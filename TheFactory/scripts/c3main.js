import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let It=function(t){i=t},Ct=function(t){return t*n},Rt=function(t,i){return Math.abs(t-i)<=s*Math.max(1,Math.abs(t),Math.abs(i))},At=function(){var t=new i(4);return i!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},Pt=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Et=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},Dt=function(t,s,e,h){var n=new i(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=h,n},Ot=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},kt=function(t,s){if(t===s){var i=s[1];t[1]=s[2],t[2]=i}else t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3];return t},Lt=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=i*n-h*e;return r?(r=1/r,t[0]=n*r,t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},Nt=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},Bt=function(t){return t[0]*t[3]-t[2]*t[1]},Wt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*o+n*a,t[1]=h*o+r*a,t[2]=e*l+n*u,t[3]=h*l+r*u,t},jt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+n*o,t[1]=h*a+r*o,t[2]=e*-o+n*a,t[3]=h*-o+r*a,t},Vt=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[0],a=i[1];return t[0]=e*o,t[1]=h*o,t[2]=n*a,t[3]=r*a,t},Ut=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},zt=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Jt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},Xt=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},qt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Yt=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},$t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Kt=function(t,i){var e=t[0],h=t[1],n=t[2],r=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(h-a)<=s*Math.max(1,Math.abs(h),Math.abs(a))&&Math.abs(n-l)<=s*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))},Zt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Qt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ts=function(){var t=new i(6);return i!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},ss=function(t){var s=new i(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},is=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},es=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},hs=function(t,s,e,h,n,r){var o=new i(6);return o[0]=t,o[1]=s,o[2]=e,o[3]=h,o[4]=n,o[5]=r,o},ns=function(t,s,i,e,h,n,r){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t},rs=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=i*n-e*h;return a?(a=1/a,t[0]=n*a,t[1]=-e*a,t[2]=-h*a,t[3]=i*a,t[4]=(h*o-n*r)*a,t[5]=(e*r-i*o)*a,t):null},os=function(t){return t[0]*t[3]-t[1]*t[2]},as=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return t[0]=e*l+n*u,t[1]=h*l+r*u,t[2]=e*c+n*f,t[3]=h*c+r*f,t[4]=e*d+n*p+o,t[5]=h*d+r*p+a,t},ls=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=Math.sin(i),u=Math.cos(i);return t[0]=e*u+n*l,t[1]=h*u+r*l,t[2]=e*-l+n*u,t[3]=h*-l+r*u,t[4]=o,t[5]=a,t},us=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e*l,t[1]=h*l,t[2]=n*u,t[3]=r*u,t[4]=o,t[5]=a,t},cs=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=i[0],u=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=e*l+n*u+o,t[5]=h*l+r*u+a,t},fs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=-i,t[3]=e,t[4]=0,t[5]=0,t},ds=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},ps=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},ms=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},gs=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},ys=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},ws=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Ss=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},vs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},Ms=function(t,i){var e=t[0],h=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=i[0],u=i[1],c=i[2],f=i[3],d=i[4],p=i[5];return Math.abs(e-l)<=s*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(h-u)<=s*Math.max(1,Math.abs(h),Math.abs(u))&&Math.abs(n-c)<=s*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(r-f)<=s*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(o-d)<=s*Math.max(1,Math.abs(o),Math.abs(d))&&Math.abs(a-p)<=s*Math.max(1,Math.abs(a),Math.abs(p))},Gs=function(){var t=new i(9);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},xs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Ts=function(t){var s=new i(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},_s=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Is=function(t,s,e,h,n,r,o,a,l){var u=new i(9);return u[0]=t,u[1]=s,u[2]=e,u[3]=h,u[4]=n,u[5]=r,u[6]=o,u[7]=a,u[8]=l,u},Cs=function(t,s,i,e,h,n,r,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t},Rs=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},As=function(t,s){if(t===s){var i=s[1],e=s[2],h=s[5];t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h}else t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8];return t},Ps=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=u*r-o*l,f=-u*n+o*a,d=l*n-r*a,p=i*c+e*f+h*d;return p?(p=1/p,t[0]=c*p,t[1]=(-u*e+h*l)*p,t[2]=(o*e-h*r)*p,t[3]=f*p,t[4]=(u*i-h*a)*p,t[5]=(-o*i+h*n)*p,t[6]=d*p,t[7]=(-l*i+e*a)*p,t[8]=(r*i-e*n)*p,t):null},Es=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8];return t[0]=r*u-o*l,t[1]=h*l-e*u,t[2]=e*o-h*r,t[3]=o*a-n*u,t[4]=i*u-h*a,t[5]=h*n-i*o,t[6]=n*l-r*a,t[7]=e*a-i*l,t[8]=i*r-e*n,t},Fs=function(t){var s=t[0],i=t[1],e=t[2],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8];return s*(l*n-r*a)+i*(-l*h+r*o)+e*(a*h-n*o)},Ds=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],b=i[8];return t[0]=f*e+d*r+p*l,t[1]=f*h+d*o+p*u,t[2]=f*n+d*a+p*c,t[3]=m*e+g*r+y*l,t[4]=m*h+g*o+y*u,t[5]=m*n+g*a+y*c,t[6]=w*e+S*r+b*l,t[7]=w*h+S*o+b*u,t[8]=w*n+S*a+b*c,t},Os=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=i[0],d=i[1];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=f*e+d*r+l,t[7]=f*h+d*o+u,t[8]=f*n+d*a+c,t},ks=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=Math.sin(i),d=Math.cos(i);return t[0]=d*e+f*r,t[1]=d*h+f*o,t[2]=d*n+f*a,t[3]=d*r-f*e,t[4]=d*o-f*h,t[5]=d*a-f*n,t[6]=l,t[7]=u,t[8]=c,t},Ls=function(t,s,i){var e=i[0],h=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=h*s[3],t[4]=h*s[4],t[5]=h*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Ns=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Bs=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=-i,t[4]=e,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ws=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},js=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},Vs=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=i+i,o=e+e,a=h+h,l=i*r,u=e*r,c=e*o,f=h*r,d=h*o,p=h*a,m=n*r,g=n*o,y=n*a;return t[0]=1-c-p,t[3]=u-y,t[6]=f+g,t[1]=u+y,t[4]=1-l-p,t[7]=d-m,t[2]=f-g,t[5]=d+m,t[8]=1-l-c,t},Us=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*r,S=i*a-h*r,b=i*l-n*r,v=e*a-h*o,M=e*l-n*o,G=h*l-n*a,x=u*m-c*p,T=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,R=f*y-d*g,A=w*R-S*C+b*I+v*_-M*T+G*x;return A?(A=1/A,t[0]=(o*R-a*C+l*I)*A,t[1]=(a*_-r*R-l*T)*A,t[2]=(r*C-o*_+l*x)*A,t[3]=(h*C-e*R-n*I)*A,t[4]=(i*R-h*_+n*T)*A,t[5]=(e*_-i*C-n*x)*A,t[6]=(m*G-g*M+y*v)*A,t[7]=(g*b-p*G-y*S)*A,t[8]=(p*M-m*b+y*w)*A,t):null},Hs=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},zs=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Js=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},Xs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},qs=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Ys=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},$s=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Ks=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},Zs=function(t,i){var e=t[0],h=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=i[0],d=i[1],p=i[2],m=i[3],g=i[4],y=i[5],w=i[6],S=i[7],b=i[8];return Math.abs(e-f)<=s*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(h-d)<=s*Math.max(1,Math.abs(h),Math.abs(d))&&Math.abs(n-p)<=s*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(r-m)<=s*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(o-g)<=s*Math.max(1,Math.abs(o),Math.abs(g))&&Math.abs(a-y)<=s*Math.max(1,Math.abs(a),Math.abs(y))&&Math.abs(l-w)<=s*Math.max(1,Math.abs(l),Math.abs(w))&&Math.abs(u-S)<=s*Math.max(1,Math.abs(u),Math.abs(S))&&Math.abs(c-b)<=s*Math.max(1,Math.abs(c),Math.abs(b))},Qs=function(){var t=new i(16);return i!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},ti=function(t){var s=new i(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},si=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},ii=function(t,s,e,h,n,r,o,a,l,u,c,f,d,p,m,g){var y=new i(16);return y[0]=t,y[1]=s,y[2]=e,y[3]=h,y[4]=n,y[5]=r,y[6]=o,y[7]=a,y[8]=l,y[9]=u,y[10]=c,y[11]=f,y[12]=d,y[13]=p,y[14]=m,y[15]=g,y},ei=function(t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},hi=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ni=function(t,s){if(t===s){var i=s[1],e=s[2],h=s[3],n=s[6],r=s[7],o=s[11];t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=n,t[11]=s[14],t[12]=h,t[13]=r,t[14]=o}else t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15];return t},ri=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*r,S=i*a-h*r,b=i*l-n*r,v=e*a-h*o,M=e*l-n*o,G=h*l-n*a,x=u*m-c*p,T=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,R=f*y-d*g,A=w*R-S*C+b*I+v*_-M*T+G*x;return A?(A=1/A,t[0]=(o*R-a*C+l*I)*A,t[1]=(h*C-e*R-n*I)*A,t[2]=(m*G-g*M+y*v)*A,t[3]=(f*M-c*G-d*v)*A,t[4]=(a*_-r*R-l*T)*A,t[5]=(i*R-h*_+n*T)*A,t[6]=(g*b-p*G-y*S)*A,t[7]=(u*G-f*b+d*S)*A,t[8]=(r*C-o*_+l*x)*A,t[9]=(e*_-i*C-n*x)*A,t[10]=(p*M-m*b+y*w)*A,t[11]=(c*b-u*M-d*w)*A,t[12]=(o*T-r*I-a*x)*A,t[13]=(i*I-e*T+h*x)*A,t[14]=(m*S-p*v-g*w)*A,t[15]=(u*v-c*S+f*w)*A,t):null},oi=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=s[15],w=i*o-e*r,S=i*a-h*r,b=i*l-n*r,v=e*a-h*o,M=e*l-n*o,G=h*l-n*a,x=u*m-c*p,T=u*g-f*p,_=u*y-d*p,I=c*g-f*m,C=c*y-d*m,R=f*y-d*g;return t[0]=o*R-a*C+l*I,t[1]=h*C-e*R-n*I,t[2]=m*G-g*M+y*v,t[3]=f*M-c*G-d*v,t[4]=a*_-r*R-l*T,t[5]=i*R-h*_+n*T,t[6]=g*b-p*G-y*S,t[7]=u*G-f*b+d*S,t[8]=r*C-o*_+l*x,t[9]=e*_-i*C-n*x,t[10]=p*M-m*b+y*w,t[11]=c*b-u*M-d*w,t[12]=o*T-r*I-a*x,t[13]=i*I-e*T+h*x,t[14]=m*S-p*v-g*w,t[15]=u*v-c*S+f*w,t},ai=function(t){var s=t[0],i=t[1],e=t[2],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8],u=t[9],c=t[10],f=t[11],d=t[12],p=t[13],m=t[14],g=s*r-i*n,y=s*o-e*n,w=i*o-e*r,S=l*p-u*d,b=l*m-c*d,v=u*m-c*p;return a*(s*v-i*b+e*S)-h*(n*v-r*b+o*S)+t[15]*(l*w-u*y+c*g)-f*(d*w-p*y+m*g)},li=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],w=s[15],S=i[0],b=i[1],v=i[2],M=i[3];return t[0]=S*e+b*o+v*c+M*m,t[1]=S*h+b*a+v*f+M*g,t[2]=S*n+b*l+v*d+M*y,t[3]=S*r+b*u+v*p+M*w,S=i[4],b=i[5],v=i[6],M=i[7],t[4]=S*e+b*o+v*c+M*m,t[5]=S*h+b*a+v*f+M*g,t[6]=S*n+b*l+v*d+M*y,t[7]=S*r+b*u+v*p+M*w,S=i[8],b=i[9],v=i[10],M=i[11],t[8]=S*e+b*o+v*c+M*m,t[9]=S*h+b*a+v*f+M*g,t[10]=S*n+b*l+v*d+M*y,t[11]=S*r+b*u+v*p+M*w,S=i[12],b=i[13],v=i[14],M=i[15],t[12]=S*e+b*o+v*c+M*m,t[13]=S*h+b*a+v*f+M*g,t[14]=S*n+b*l+v*d+M*y,t[15]=S*r+b*u+v*p+M*w,t},ui=function(t,s,i){var e,h,n,r,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*y+s[12],t[13]=s[1]*m+s[5]*g+s[9]*y+s[13],t[14]=s[2]*m+s[6]*g+s[10]*y+s[14],t[15]=s[3]*m+s[7]*g+s[11]*y+s[15]):(e=s[0],h=s[1],n=s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*y+s[12],t[13]=h*m+a*g+f*y+s[13],t[14]=n*m+l*g+d*y+s[14],t[15]=r*m+u*g+p*y+s[15]),t},ci=function(t,s,i){var e=i[0],h=i[1],n=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*n,t[9]=s[9]*n,t[10]=s[10]*n,t[11]=s[11]*n,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fi=function(t,i,e,h){var n,r,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,G,x,T,_,I,C,R=h[0],A=h[1],P=h[2],E=Math.hypot(R,A,P);return E<s?null:(R*=E=1/E,A*=E,P*=E,n=Math.sin(e),o=1-(r=Math.cos(e)),a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],d=i[5],p=i[6],m=i[7],g=i[8],y=i[9],w=i[10],S=i[11],b=R*R*o+r,v=A*R*o+P*n,M=P*R*o-A*n,G=R*A*o-P*n,x=A*A*o+r,T=P*A*o+R*n,_=R*P*o+A*n,I=A*P*o-R*n,C=P*P*o+r,t[0]=a*b+f*v+g*M,t[1]=l*b+d*v+y*M,t[2]=u*b+p*v+w*M,t[3]=c*b+m*v+S*M,t[4]=a*G+f*x+g*T,t[5]=l*G+d*x+y*T,t[6]=u*G+p*x+w*T,t[7]=c*G+m*x+S*T,t[8]=a*_+f*I+g*C,t[9]=l*_+d*I+y*C,t[10]=u*_+p*I+w*C,t[11]=c*_+m*I+S*C,i!==t&&(t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15]),t)},di=function(t,s,i){var e=Math.sin(i),h=Math.cos(i),n=s[4],r=s[5],o=s[6],a=s[7],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=n*h+l*e,t[5]=r*h+u*e,t[6]=o*h+c*e,t[7]=a*h+f*e,t[8]=l*h-n*e,t[9]=u*h-r*e,t[10]=c*h-o*e,t[11]=f*h-a*e,t},pi=function(t,s,i){var e=Math.sin(i),h=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],l=s[8],u=s[9],c=s[10],f=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*h-l*e,t[1]=r*h-u*e,t[2]=o*h-c*e,t[3]=a*h-f*e,t[8]=n*e+l*h,t[9]=r*e+u*h,t[10]=o*e+c*h,t[11]=a*e+f*h,t},mi=function(t,s,i){var e=Math.sin(i),h=Math.cos(i),n=s[0],r=s[1],o=s[2],a=s[3],l=s[4],u=s[5],c=s[6],f=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=n*h+l*e,t[1]=r*h+u*e,t[2]=o*h+c*e,t[3]=a*h+f*e,t[4]=l*h-n*e,t[5]=u*h-r*e,t[6]=c*h-o*e,t[7]=f*h-a*e,t},gi=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},yi=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},wi=function(t,i,e){var h,n,r,o=e[0],a=e[1],l=e[2],u=Math.hypot(o,a,l);return u<s?null:(o*=u=1/u,a*=u,l*=u,h=Math.sin(i),r=1-(n=Math.cos(i)),t[0]=o*o*r+n,t[1]=a*o*r+l*h,t[2]=l*o*r-a*h,t[3]=0,t[4]=o*a*r-l*h,t[5]=a*a*r+n,t[6]=l*a*r+o*h,t[7]=0,t[8]=o*l*r+a*h,t[9]=a*l*r-o*h,t[10]=l*l*r+n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Si=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=e,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vi=function(t,s){var i=Math.sin(s),e=Math.cos(s);return t[0]=e,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=e,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Mi=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=e+e,a=h+h,l=n+n,u=e*o,c=e*a,f=e*l,d=h*a,p=h*l,m=n*l,g=r*o,y=r*a,w=r*l;return t[0]=1-(d+m),t[1]=c+w,t[2]=f-y,t[3]=0,t[4]=c-w,t[5]=1-(u+m),t[6]=p+g,t[7]=0,t[8]=f+y,t[9]=p-g,t[10]=1-(u+d),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gi=function(t,s){var e=new i(3),h=-s[0],n=-s[1],r=-s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7],f=h*h+n*n+r*r+o*o;return f>0?(e[0]=2*(a*o+c*h+l*r-u*n)/f,e[1]=2*(l*o+c*n+u*h-a*r)/f,e[2]=2*(u*o+c*r+a*n-l*h)/f):(e[0]=2*(a*o+c*h+l*r-u*n),e[1]=2*(l*o+c*n+u*h-a*r),e[2]=2*(u*o+c*r+a*n-l*h)),Mi(t,s,e),t},xi=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},Ti=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[4],r=s[5],o=s[6],a=s[8],l=s[9],u=s[10];return t[0]=Math.hypot(i,e,h),t[1]=Math.hypot(n,r,o),t[2]=Math.hypot(a,l,u),t},_i=function(t,s){var e=new i(3);Ti(e,s);var h=1/e[0],n=1/e[1],r=1/e[2],o=s[0]*h,a=s[1]*n,l=s[2]*r,u=s[4]*h,c=s[5]*n,f=s[6]*r,d=s[8]*h,p=s[9]*n,m=s[10]*r,g=o+c+m,y=0;return g>0?(y=2*Math.sqrt(g+1),t[3]=.25*y,t[0]=(f-p)/y,t[1]=(d-l)/y,t[2]=(a-u)/y):o>c&&o>m?(y=2*Math.sqrt(1+o-c-m),t[3]=(f-p)/y,t[0]=.25*y,t[1]=(a+u)/y,t[2]=(d+l)/y):c>m?(y=2*Math.sqrt(1+c-o-m),t[3]=(d-l)/y,t[0]=(a+u)/y,t[1]=.25*y,t[2]=(f+p)/y):(y=2*Math.sqrt(1+m-o-c),t[3]=(a-u)/y,t[0]=(d+l)/y,t[1]=(f+p)/y,t[2]=.25*y),t},Ii=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var h=e[0],n=e[1],r=e[2],o=e[4],a=e[5],l=e[6],u=e[8],c=e[9],f=e[10];i[0]=Math.hypot(h,n,r),i[1]=Math.hypot(o,a,l),i[2]=Math.hypot(u,c,f);var d=1/i[0],p=1/i[1],m=1/i[2],g=h*d,y=n*p,w=r*m,S=o*d,b=a*p,v=l*m,M=u*d,G=c*p,x=f*m,T=g+b+x,_=0;return T>0?(_=2*Math.sqrt(T+1),t[3]=.25*_,t[0]=(v-G)/_,t[1]=(M-w)/_,t[2]=(y-S)/_):g>b&&g>x?(_=2*Math.sqrt(1+g-b-x),t[3]=(v-G)/_,t[0]=.25*_,t[1]=(y+S)/_,t[2]=(M+w)/_):b>x?(_=2*Math.sqrt(1+b-g-x),t[3]=(M-w)/_,t[0]=(y+S)/_,t[1]=.25*_,t[2]=(v+G)/_):(_=2*Math.sqrt(1+x-g-b),t[3]=(y-S)/_,t[0]=(M+w)/_,t[1]=(v+G)/_,t[2]=.25*_),t},Ci=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],o=s[3],a=h+h,l=n+n,u=r+r,c=h*a,f=h*l,d=h*u,p=n*l,m=n*u,g=r*u,y=o*a,w=o*l,S=o*u,b=e[0],v=e[1],M=e[2];return t[0]=(1-(p+g))*b,t[1]=(f+S)*b,t[2]=(d-w)*b,t[3]=0,t[4]=(f-S)*v,t[5]=(1-(c+g))*v,t[6]=(m+y)*v,t[7]=0,t[8]=(d+w)*M,t[9]=(m-y)*M,t[10]=(1-(c+p))*M,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ri=function(t,s,i,e,h){var n=s[0],r=s[1],o=s[2],a=s[3],l=n+n,u=r+r,c=o+o,f=n*l,d=n*u,p=n*c,m=r*u,g=r*c,y=o*c,w=a*l,S=a*u,b=a*c,v=e[0],M=e[1],G=e[2],x=h[0],T=h[1],_=h[2],I=(1-(m+y))*v,C=(d+b)*v,R=(p-S)*v,A=(d-b)*M,P=(1-(f+y))*M,E=(g+w)*M,F=(p+S)*G,D=(g-w)*G,O=(1-(f+m))*G;return t[0]=I,t[1]=C,t[2]=R,t[3]=0,t[4]=A,t[5]=P,t[6]=E,t[7]=0,t[8]=F,t[9]=D,t[10]=O,t[11]=0,t[12]=i[0]+x-(I*x+A*T+F*_),t[13]=i[1]+T-(C*x+P*T+D*_),t[14]=i[2]+_-(R*x+E*T+O*_),t[15]=1,t},Ai=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=i+i,o=e+e,a=h+h,l=i*r,u=e*r,c=e*o,f=h*r,d=h*o,p=h*a,m=n*r,g=n*o,y=n*a;return t[0]=1-c-p,t[1]=u+y,t[2]=f-g,t[3]=0,t[4]=u-y,t[5]=1-l-p,t[6]=d+m,t[7]=0,t[8]=f+g,t[9]=d-m,t[10]=1-l-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Pi=function(t,s,i,e,h,n,r){var o=1/(i-s),a=1/(h-e),l=1/(n-r);return t[0]=2*n*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*n*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(r+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n*2*l,t[15]=0,t},Ei=function(t,s,i,e,h){var n=1/Math.tan(s/2);if(t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0){var r=1/(e-h);t[10]=(h+e)*r,t[14]=2*h*e*r}else t[10]=-1,t[14]=-2*e;return t},Fi=function(t,s,i,e,h){var n=1/Math.tan(s/2);if(t[0]=n/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0){var r=1/(e-h);t[10]=h*r,t[14]=h*e*r}else t[10]=-1,t[14]=-e;return t},Di=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),n=Math.tan(s.downDegrees*Math.PI/180),r=Math.tan(s.leftDegrees*Math.PI/180),o=Math.tan(s.rightDegrees*Math.PI/180),a=2/(r+o),l=2/(h+n);return t[0]=a,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=l,t[6]=0,t[7]=0,t[8]=-(r-o)*a*.5,t[9]=(h-n)*l*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},Oi=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),l=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(r+n)*l,t[15]=1,t},ki=function(t,s,i,e,h,n,r){var o=1/(s-i),a=1/(e-h),l=1/(n-r);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=n*l,t[15]=1,t},Li=function(t,i,e,h){var n,r,o,a,l,u,c,f,d,p,m=i[0],g=i[1],y=i[2],w=h[0],S=h[1],b=h[2],v=e[0],M=e[1],G=e[2];return Math.abs(m-v)<s&&Math.abs(g-M)<s&&Math.abs(y-G)<s?hi(t):(c=m-v,f=g-M,d=y-G,n=S*(d*=p=1/Math.hypot(c,f,d))-b*(f*=p),r=b*(c*=p)-w*d,o=w*f-S*c,(p=Math.hypot(n,r,o))?(n*=p=1/p,r*=p,o*=p):(n=0,r=0,o=0),a=f*o-d*r,l=d*n-c*o,u=c*r-f*n,(p=Math.hypot(a,l,u))?(a*=p=1/p,l*=p,u*=p):(a=0,l=0,u=0),t[0]=n,t[1]=a,t[2]=c,t[3]=0,t[4]=r,t[5]=l,t[6]=f,t[7]=0,t[8]=o,t[9]=u,t[10]=d,t[11]=0,t[12]=-(n*m+r*g+o*y),t[13]=-(a*m+l*g+u*y),t[14]=-(c*m+f*g+d*y),t[15]=1,t)},Ni=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],o=e[0],a=e[1],l=e[2],u=h-i[0],c=n-i[1],f=r-i[2],d=u*u+c*c+f*f;d>0&&(u*=d=1/Math.sqrt(d),c*=d,f*=d);var p=a*f-l*c,m=l*u-o*f,g=o*c-a*u;return(d=p*p+m*m+g*g)>0&&(p*=d=1/Math.sqrt(d),m*=d,g*=d),t[0]=p,t[1]=m,t[2]=g,t[3]=0,t[4]=c*g-f*m,t[5]=f*p-u*g,t[6]=u*m-c*p,t[7]=0,t[8]=u,t[9]=c,t[10]=f,t[11]=0,t[12]=h,t[13]=n,t[14]=r,t[15]=1,t},Bi=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Wi=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},ji=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Vi=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ui=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Hi=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},zi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ji=function(t,i){var e=t[0],h=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=t[8],f=t[9],d=t[10],p=t[11],m=t[12],g=t[13],y=t[14],w=t[15],S=i[0],b=i[1],v=i[2],M=i[3],G=i[4],x=i[5],T=i[6],_=i[7],I=i[8],C=i[9],R=i[10],A=i[11],P=i[12],E=i[13],F=i[14],D=i[15];return Math.abs(e-S)<=s*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(h-b)<=s*Math.max(1,Math.abs(h),Math.abs(b))&&Math.abs(n-v)<=s*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(r-M)<=s*Math.max(1,Math.abs(r),Math.abs(M))&&Math.abs(o-G)<=s*Math.max(1,Math.abs(o),Math.abs(G))&&Math.abs(a-x)<=s*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=s*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-_)<=s*Math.max(1,Math.abs(u),Math.abs(_))&&Math.abs(c-I)<=s*Math.max(1,Math.abs(c),Math.abs(I))&&Math.abs(f-C)<=s*Math.max(1,Math.abs(f),Math.abs(C))&&Math.abs(d-R)<=s*Math.max(1,Math.abs(d),Math.abs(R))&&Math.abs(p-A)<=s*Math.max(1,Math.abs(p),Math.abs(A))&&Math.abs(m-P)<=s*Math.max(1,Math.abs(m),Math.abs(P))&&Math.abs(g-E)<=s*Math.max(1,Math.abs(g),Math.abs(E))&&Math.abs(y-F)<=s*Math.max(1,Math.abs(y),Math.abs(F))&&Math.abs(w-D)<=s*Math.max(1,Math.abs(w),Math.abs(D))},Xi=function(){var t=new i(3);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},qi=function(t){var s=new i(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Yi=function(t){var s=t[0],i=t[1],e=t[2];return Math.hypot(s,i,e)},$i=function(t,s,e){var h=new i(3);return h[0]=t,h[1]=s,h[2]=e,h},Ki=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Zi=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},Qi=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},te=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},se=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},ie=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},ee=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},he=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},ne=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},re=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},oe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},le=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ue=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return Math.hypot(i,e,h)},ce=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h},fe=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e},de=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},pe=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},me=function(t,s){var i=s[0],e=s[1],h=s[2],n=i*i+e*e+h*h;return n>0&&(n=1/Math.sqrt(n)),t[0]=s[0]*n,t[1]=s[1]*n,t[2]=s[2]*n,t},ge=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},ye=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2];return t[0]=h*a-n*o,t[1]=n*r-e*a,t[2]=e*o-h*r,t},we=function(t,s,i,e){var h=s[0],n=s[1],r=s[2];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t},Se=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(ge(s,i),-1),1)),n=Math.sin(h),r=Math.sin((1-e)*h)/n,o=Math.sin(e*h)/n;return t[0]=r*s[0]+o*i[0],t[1]=r*s[1]+o*i[1],t[2]=r*s[2]+o*i[2],t},be=function(t,s,i,e,h,n){var r=n*n,o=r*(2*n-3)+1,a=r*(n-2)+n,l=r*(n-1),u=r*(3-2*n);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*u,t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*u,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*u,t},ve=function(t,s,i,e,h,n){var r=1-n,o=r*r,a=n*n,l=o*r,u=3*n*o,c=3*a*r,f=a*n;return t[0]=s[0]*l+i[0]*u+e[0]*c+h[0]*f,t[1]=s[1]*l+i[1]*u+e[1]*c+h[1]*f,t[2]=s[2]*l+i[2]*u+e[2]*c+h[2]*f,t},Me=function(t,s){s=s||1;var i=2*e()*Math.PI,h=2*e()-1,n=Math.sqrt(1-h*h)*s;return t[0]=Math.cos(i)*n,t[1]=Math.sin(i)*n,t[2]=h*s,t},Ge=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[3]*e+i[7]*h+i[11]*n+i[15];return r=r||1,t[0]=(i[0]*e+i[4]*h+i[8]*n+i[12])/r,t[1]=(i[1]*e+i[5]*h+i[9]*n+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*n+i[14])/r,t},xe=function(t,s,i){var e=s[0],h=s[1],n=s[2];return t[0]=e*i[0]+h*i[3]+n*i[6],t[1]=e*i[1]+h*i[4]+n*i[7],t[2]=e*i[2]+h*i[5]+n*i[8],t},Te=function(t,s,i){var e=i[0],h=i[1],n=i[2],r=i[3],o=s[0],a=s[1],l=s[2],u=h*l-n*a,c=n*o-e*l,f=e*a-h*o,d=h*f-n*c,p=n*u-e*f,m=e*c-h*u,g=2*r;return u*=g,c*=g,f*=g,d*=2,p*=2,m*=2,t[0]=o+u+d,t[1]=a+c+p,t[2]=l+f+m,t},_e=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0],n[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),n[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Ie=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),n[1]=h[1],n[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Ce=function(t,s,i,e){var h=[],n=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],n[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),n[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),n[2]=h[2],t[0]=n[0]+i[0],t[1]=n[1]+i[1],t[2]=n[2]+i[2],t},Re=function(t,s){var i=t[0],e=t[1],h=t[2],n=s[0],r=s[1],o=s[2],a=Math.sqrt((i*i+e*e+h*h)*(n*n+r*r+o*o)),l=a&&ge(t,s)/a;return Math.acos(Math.min(Math.max(l,-1),1))},Ae=function(t){return t[0]=0,t[1]=0,t[2]=0,t},Pe=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Ee=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Fe=function(t,i){var e=t[0],h=t[1],n=t[2],r=i[0],o=i[1],a=i[2];return Math.abs(e-r)<=s*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(h-o)<=s*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(n-a)<=s*Math.max(1,Math.abs(n),Math.abs(a))},De=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},Oe=function(t){var s=new i(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},ke=function(t,s,e,h){var n=new i(4);return n[0]=t,n[1]=s,n[2]=e,n[3]=h,n},Le=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},Ne=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Be=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},We=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},je=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ve=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ue=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},He=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},ze=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Je=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Xe=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},qe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Ye=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},$e=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2],n=s[3]-t[3];return Math.hypot(i,e,h,n)},Ke=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2],n=s[3]-t[3];return i*i+e*e+h*h+n*n},Ze=function(t){var s=t[0],i=t[1],e=t[2],h=t[3];return Math.hypot(s,i,e,h)},Qe=function(t){var s=t[0],i=t[1],e=t[2],h=t[3];return s*s+i*i+e*e+h*h},th=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},sh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},ih=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=i*i+e*e+h*h+n*n;return r>0&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=n*r,t},eh=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},hh=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],n=i[0]*e[2]-i[2]*e[0],r=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],l=i[2]*e[3]-i[3]*e[2],u=s[0],c=s[1],f=s[2],d=s[3];return t[0]=c*l-f*a+d*o,t[1]=-u*l+f*r-d*n,t[2]=u*a-c*r+d*h,t[3]=-u*o+c*n-f*h,t},nh=function(t,s,i,e){var h=s[0],n=s[1],r=s[2],o=s[3];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t[2]=r+e*(i[2]-r),t[3]=o+e*(i[3]-o),t},rh=function(t,s){var i,h,n,r,o,a;s=s||1;do{o=(i=2*e()-1)*i+(h=2*e()-1)*h}while(o>=1);do{a=(n=2*e()-1)*n+(r=2*e()-1)*r}while(a>=1);var l=Math.sqrt((1-o)/a);return t[0]=s*i,t[1]=s*h,t[2]=s*n*l,t[3]=s*r*l,t},oh=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*n+i[12]*r,t[1]=i[1]*e+i[5]*h+i[9]*n+i[13]*r,t[2]=i[2]*e+i[6]*h+i[10]*n+i[14]*r,t[3]=i[3]*e+i[7]*h+i[11]*n+i[15]*r,t},ah=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=i[0],o=i[1],a=i[2],l=i[3],u=l*e+o*n-a*h,c=l*h+a*e-r*n,f=l*n+r*h-o*e,d=-r*e-o*h-a*n;return t[0]=u*l+d*-r+c*-a-f*-o,t[1]=c*l+d*-o+f*-r-u*-a,t[2]=f*l+d*-a+u*-o-c*-r,t[3]=s[3],t},lh=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},uh=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},ch=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},fh=function(t,i){var e=t[0],h=t[1],n=t[2],r=t[3],o=i[0],a=i[1],l=i[2],u=i[3];return Math.abs(e-o)<=s*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(h-a)<=s*Math.max(1,Math.abs(h),Math.abs(a))&&Math.abs(n-l)<=s*Math.max(1,Math.abs(n),Math.abs(l))&&Math.abs(r-u)<=s*Math.max(1,Math.abs(r),Math.abs(u))},dh=function(){var t=new i(4);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},ph=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},mh=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},gh=function(t,i){var e=2*Math.acos(i[3]),h=Math.sin(e/2);return h>s?(t[0]=i[0]/h,t[1]=i[1]/h,t[2]=i[2]/h):(t[0]=1,t[1]=0,t[2]=0),e},yh=function(t,s){var i=J(t,s);return Math.acos(2*i*i-1)},wh=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+r*o+h*l-n*a,t[1]=h*u+r*a+n*o-e*l,t[2]=n*u+r*l+e*a-h*o,t[3]=r*u-e*o-h*a-n*l,t},Sh=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],r=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+r*o,t[1]=h*a+n*o,t[2]=n*a-h*o,t[3]=r*a-e*o,t},bh=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],r=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a-n*o,t[1]=h*a+r*o,t[2]=n*a+e*o,t[3]=r*a-h*o,t},vh=function(t,s,i){i*=.5;var e=s[0],h=s[1],n=s[2],r=s[3],o=Math.sin(i),a=Math.cos(i);return t[0]=e*a+h*o,t[1]=h*a-e*o,t[2]=n*a+r*o,t[3]=r*a-n*o,t},Mh=function(t,s){var i=s[0],e=s[1],h=s[2];return t[0]=i,t[1]=e,t[2]=h,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-h*h)),t},Gh=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=Math.sqrt(i*i+e*e+h*h),o=Math.exp(n),a=r>0?o*Math.sin(r)/r:0;return t[0]=i*a,t[1]=e*a,t[2]=h*a,t[3]=o*Math.cos(r),t},xh=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=Math.sqrt(i*i+e*e+h*h),o=r>0?Math.atan2(r,n)/r:0;return t[0]=i*o,t[1]=e*o,t[2]=h*o,t[3]=.5*Math.log(i*i+e*e+h*h+n*n),t},Th=function(t,s,i){return xh(t,s),z(t,t,i),Gh(t,t),t},_h=function(t,i,e,h){var n,r,o,a,l,u=i[0],c=i[1],f=i[2],d=i[3],p=e[0],m=e[1],g=e[2],y=e[3];return(r=u*p+c*m+f*g+d*y)<0&&(r=-r,p=-p,m=-m,g=-g,y=-y),1-r>s?(n=Math.acos(r),o=Math.sin(n),a=Math.sin((1-h)*n)/o,l=Math.sin(h*n)/o):(a=1-h,l=h),t[0]=a*u+l*p,t[1]=a*c+l*m,t[2]=a*f+l*g,t[3]=a*d+l*y,t},Ih=function(t){var s=e(),i=e(),h=e(),n=Math.sqrt(1-s),r=Math.sqrt(s);return t[0]=n*Math.sin(2*Math.PI*i),t[1]=n*Math.cos(2*Math.PI*i),t[2]=r*Math.sin(2*Math.PI*h),t[3]=r*Math.cos(2*Math.PI*h),t},Ch=function(t,s){var i=s[0],e=s[1],h=s[2],n=s[3],r=i*i+e*e+h*h+n*n,o=r?1/r:0;return t[0]=-i*o,t[1]=-e*o,t[2]=-h*o,t[3]=n*o,t},Rh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},Ah=function(t,s){var i,e=s[0]+s[4]+s[8];if(e>0)i=Math.sqrt(e+1),t[3]=.5*i,i=.5/i,t[0]=(s[5]-s[7])*i,t[1]=(s[6]-s[2])*i,t[2]=(s[1]-s[3])*i;else{var h=0;s[4]>s[0]&&(h=1),s[8]>s[3*h+h]&&(h=2);var n=(h+1)%3,r=(h+2)%3;i=Math.sqrt(s[3*h+h]-s[3*n+n]-s[3*r+r]+1),t[h]=.5*i,i=.5/i,t[3]=(s[3*n+r]-s[3*r+n])*i,t[n]=(s[3*n+h]+s[3*h+n])*i,t[r]=(s[3*r+h]+s[3*h+r])*i}return t},Ph=function(t,s,i,e){var n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:h,r=Math.PI/360;s*=r,e*=r,i*=r;var o=Math.sin(s),a=Math.cos(s),l=Math.sin(i),u=Math.cos(i),c=Math.sin(e),f=Math.cos(e);switch(n){case"xyz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"xzy":t[0]=o*u*f-a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f+o*l*c;break;case"yxz":t[0]=o*u*f+a*l*c,t[1]=a*l*f-o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;case"yzx":t[0]=o*u*f+a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f-o*l*c;break;case"zxy":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c+o*l*f,t[3]=a*u*f-o*l*c;break;case"zyx":t[0]=o*u*f-a*l*c,t[1]=a*l*f+o*u*c,t[2]=a*u*c-o*l*f,t[3]=a*u*f+o*l*c;break;default:throw new Error("Unknown angle order "+n)}return t},Eh=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},Fh=function(t,i){return Math.abs(eh(t,i))>=1-s},Dh=function(){var t=new i(8);return i!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},Oh=function(t){var s=new i(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},kh=function(t,s,e,h,n,r,o,a){var l=new i(8);return l[0]=t,l[1]=s,l[2]=e,l[3]=h,l[4]=n,l[5]=r,l[6]=o,l[7]=a,l},Lh=function(t,s,e,h,n,r,o){var a=new i(8);a[0]=t,a[1]=s,a[2]=e,a[3]=h;var l=.5*n,u=.5*r,c=.5*o;return a[4]=l*h+u*e-c*s,a[5]=u*h+c*t-l*e,a[6]=c*h+l*s-u*t,a[7]=-l*t-u*s-c*e,a},Nh=function(t,s,i){var e=.5*i[0],h=.5*i[1],n=.5*i[2],r=s[0],o=s[1],a=s[2],l=s[3];return t[0]=r,t[1]=o,t[2]=a,t[3]=l,t[4]=e*l+h*a-n*o,t[5]=h*l+n*r-e*a,t[6]=n*l+e*o-h*r,t[7]=-e*r-h*o-n*a,t},Bh=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},Wh=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},jh=function(t,s){var e=dh();_i(e,s);var h=new i(3);return xi(h,s),Nh(t,e,h),t},Vh=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},Uh=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Hh=function(t,s,i,e,h,n,r,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=n,t[5]=r,t[6]=o,t[7]=a,t},zh=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},Jh=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Xh=function(t,s){var i=s[4],e=s[5],h=s[6],n=s[7],r=-s[0],o=-s[1],a=-s[2],l=s[3];return t[0]=2*(i*l+n*r+e*a-h*o),t[1]=2*(e*l+n*o+h*r-i*a),t[2]=2*(h*l+n*a+i*o-e*r),t},qh=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=.5*i[0],a=.5*i[1],l=.5*i[2],u=s[4],c=s[5],f=s[6],d=s[7];return t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=r*o+h*l-n*a+u,t[5]=r*a+n*o-e*l+c,t[6]=r*l+e*a-h*o+f,t[7]=-e*o-h*a-n*l+d,t},Yh=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*r+u*e+a*n-l*h,f=a*r+u*h+l*e-o*n,d=l*r+u*n+o*h-a*e,p=u*r-o*e-a*h-l*n;return Sh(t,s,i),e=t[0],h=t[1],n=t[2],r=t[3],t[4]=c*r+p*e+f*n-d*h,t[5]=f*r+p*h+d*e-c*n,t[6]=d*r+p*n+c*h-f*e,t[7]=p*r-c*e-f*h-d*n,t},$h=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*r+u*e+a*n-l*h,f=a*r+u*h+l*e-o*n,d=l*r+u*n+o*h-a*e,p=u*r-o*e-a*h-l*n;return bh(t,s,i),e=t[0],h=t[1],n=t[2],r=t[3],t[4]=c*r+p*e+f*n-d*h,t[5]=f*r+p*h+d*e-c*n,t[6]=d*r+p*n+c*h-f*e,t[7]=p*r-c*e-f*h-d*n,t},Kh=function(t,s,i){var e=-s[0],h=-s[1],n=-s[2],r=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=o*r+u*e+a*n-l*h,f=a*r+u*h+l*e-o*n,d=l*r+u*n+o*h-a*e,p=u*r-o*e-a*h-l*n;return vh(t,s,i),e=t[0],h=t[1],n=t[2],r=t[3],t[4]=c*r+p*e+f*n-d*h,t[5]=f*r+p*h+d*e-c*n,t[6]=d*r+p*n+c*h-f*e,t[7]=p*r-c*e-f*h-d*n,t},Zh=function(t,s,i){var e=i[0],h=i[1],n=i[2],r=i[3],o=s[0],a=s[1],l=s[2],u=s[3];return t[0]=o*r+u*e+a*n-l*h,t[1]=a*r+u*h+l*e-o*n,t[2]=l*r+u*n+o*h-a*e,t[3]=u*r-o*e-a*h-l*n,o=s[4],a=s[5],l=s[6],u=s[7],t[4]=o*r+u*e+a*n-l*h,t[5]=a*r+u*h+l*e-o*n,t[6]=l*r+u*n+o*h-a*e,t[7]=u*r-o*e-a*h-l*n,t},Qh=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[0],a=i[1],l=i[2],u=i[3];return t[0]=e*u+r*o+h*l-n*a,t[1]=h*u+r*a+n*o-e*l,t[2]=n*u+r*l+e*a-h*o,t[3]=r*u-e*o-h*a-n*l,o=i[4],a=i[5],l=i[6],u=i[7],t[4]=e*u+r*o+h*l-n*a,t[5]=h*u+r*a+n*o-e*l,t[6]=n*u+r*l+e*a-h*o,t[7]=r*u-e*o-h*a-n*l,t},tn=function(t,i,e,h){if(Math.abs(h)<s)return Vh(t,i);var n=Math.hypot(e[0],e[1],e[2]);h*=.5;var r=Math.sin(h),o=r*e[0]/n,a=r*e[1]/n,l=r*e[2]/n,u=Math.cos(h),c=i[0],f=i[1],d=i[2],p=i[3];t[0]=c*u+p*o+f*l-d*a,t[1]=f*u+p*a+d*o-c*l,t[2]=d*u+p*l+c*a-f*o,t[3]=p*u-c*o-f*a-d*l;var m=i[4],g=i[5],y=i[6],w=i[7];return t[4]=m*u+w*o+g*l-y*a,t[5]=g*u+w*a+y*o-m*l,t[6]=y*u+w*l+m*a-g*o,t[7]=w*u-m*o-g*a-y*l,t},sn=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},en=function(t,s,i){var e=s[0],h=s[1],n=s[2],r=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],p=s[7],m=i[0],g=i[1],y=i[2],w=i[3];return t[0]=e*w+r*m+h*y-n*g,t[1]=h*w+r*g+n*m-e*y,t[2]=n*w+r*y+e*g-h*m,t[3]=r*w-e*m-h*g-n*y,t[4]=e*u+r*o+h*l-n*a+c*w+p*m+f*y-d*g,t[5]=h*u+r*a+n*o-e*l+f*w+p*g+d*m-c*y,t[6]=n*u+r*l+e*a-h*o+d*w+p*y+c*g-f*m,t[7]=r*u-e*o-h*a-n*l+p*w-c*m-f*g-d*y,t},hn=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},nn=function(t,s,i,e){var h=1-e;return ot(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},rn=function(t,s){var i=ut(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},on=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},an=function(t,s){var i=ut(s);if(i>0){i=Math.sqrt(i);var e=s[0]/i,h=s[1]/i,n=s[2]/i,r=s[3]/i,o=s[4],a=s[5],l=s[6],u=s[7],c=e*o+h*a+n*l+r*u;t[0]=e,t[1]=h,t[2]=n,t[3]=r,t[4]=(o-e*c)/i,t[5]=(a-h*c)/i,t[6]=(l-n*c)/i,t[7]=(u-r*c)/i}return t},ln=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},un=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},cn=function(t,i){var e=t[0],h=t[1],n=t[2],r=t[3],o=t[4],a=t[5],l=t[6],u=t[7],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7];return Math.abs(e-c)<=s*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=s*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(n-d)<=s*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(r-p)<=s*Math.max(1,Math.abs(r),Math.abs(p))&&Math.abs(o-m)<=s*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=s*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=s*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(u-w)<=s*Math.max(1,Math.abs(u),Math.abs(w))},fn=function(){var t=new i(2);return i!=Float32Array&&(t[0]=0,t[1]=0),t},dn=function(t){var s=new i(2);return s[0]=t[0],s[1]=t[1],s},pn=function(t,s){var e=new i(2);return e[0]=t,e[1]=s,e},mn=function(t,s){return t[0]=s[0],t[1]=s[1],t},gn=function(t,s,i){return t[0]=s,t[1]=i,t},yn=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},wn=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},Sn=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},bn=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},vn=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Mn=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Gn=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},xn=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Tn=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},_n=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},In=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},Cn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return Math.hypot(i,e)},Rn=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},An=function(t){var s=t[0],i=t[1];return Math.hypot(s,i)},Pn=function(t){var s=t[0],i=t[1];return s*s+i*i},En=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},Fn=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},Dn=function(t,s){var i=s[0],e=s[1],h=i*i+e*e;return h>0&&(h=1/Math.sqrt(h)),t[0]=s[0]*h,t[1]=s[1]*h,t},On=function(t,s){return t[0]*s[0]+t[1]*s[1]},kn=function(t,s,i){var e=s[0]*i[1]-s[1]*i[0];return t[0]=t[1]=0,t[2]=e,t},Ln=function(t,s,i,e){var h=s[0],n=s[1];return t[0]=h+e*(i[0]-h),t[1]=n+e*(i[1]-n),t},Nn=function(t,s){s=s||1;var i=2*e()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},Bn=function(t,s,i){var e=s[0],h=s[1];return t[0]=i[0]*e+i[2]*h,t[1]=i[1]*e+i[3]*h,t},Wn=function(t,s,i){var e=s[0],h=s[1];return t[0]=i[0]*e+i[2]*h+i[4],t[1]=i[1]*e+i[3]*h+i[5],t},jn=function(t,s,i){var e=s[0],h=s[1];return t[0]=i[0]*e+i[3]*h+i[6],t[1]=i[1]*e+i[4]*h+i[7],t},Vn=function(t,s,i){var e=s[0],h=s[1];return t[0]=i[0]*e+i[4]*h+i[12],t[1]=i[1]*e+i[5]*h+i[13],t},Un=function(t,s,i,e){var h=s[0]-i[0],n=s[1]-i[1],r=Math.sin(e),o=Math.cos(e);return t[0]=h*o-n*r+i[0],t[1]=h*r+n*o+i[1],t},Hn=function(t,s){var i=t[0],e=t[1],h=s[0],n=s[1],r=Math.sqrt((i*i+e*e)*(h*h+n*n)),o=r&&(i*h+e*n)/r;return Math.acos(Math.min(Math.max(o,-1),1))},zn=function(t){return t[0]=0,t[1]=0,t},Jn=function(t){return"vec2("+t[0]+", "+t[1]+")"},Xn=function(t,s){return t[0]===s[0]&&t[1]===s[1]},qn=function(t,i){var e=t[0],h=t[1],n=i[0],r=i[1];return Math.abs(e-n)<=s*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-r)<=s*Math.max(1,Math.abs(h),Math.abs(r))};s=1e-6,i="undefined"!=typeof Float32Array?Float32Array:Array,e=Math.random,h="zyx",n=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),r={__proto__:null,EPSILON:s,get i(){return i},h:e,o:h,l:It,u:Ct,equals:Rt},o=Wt,a=Yt,l=Object.freeze({__proto__:null,create:At,clone:Pt,m:Et,identity:Ft,S:Dt,set:Ot,v:kt,M:Lt,G:Nt,T:Bt,multiply:Wt,rotate:jt,scale:Vt,_:Ut,I:Ht,C:zt,R:Jt,A:Xt,add:qt,P:Yt,F:$t,equals:Kt,D:Zt,O:Qt,mul:o,sub:a}),u=as,c=ws,f=Object.freeze({__proto__:null,create:ts,clone:ss,m:is,identity:es,S:hs,set:ns,M:rs,T:os,multiply:as,rotate:ls,scale:us,translate:cs,_:fs,I:ds,L:ps,C:ms,R:gs,add:ys,P:ws,D:Ss,O:bs,F:vs,equals:Ms,mul:u,sub:c}),d=Ds,p=qs,m=Object.freeze({__proto__:null,create:Gs,N:xs,clone:Ts,m:_s,S:Is,set:Cs,identity:Rs,v:As,M:Ps,G:Es,T:Fs,multiply:Ds,translate:Os,rotate:ks,scale:Ls,L:Ns,_:Bs,I:Ws,B:js,W:Vs,j:Us,V:Hs,C:zs,R:Js,add:Xs,P:qs,D:Ys,O:$s,F:Ks,equals:Zs,mul:d,sub:p}),g=Ei,y=Oi,w=li,S=Vi,b=Object.freeze({__proto__:null,create:Qs,clone:ti,m:si,S:ii,set:ei,identity:hi,v:ni,M:ri,G:oi,T:ai,multiply:li,translate:ui,scale:ci,rotate:fi,U:di,H:pi,J:mi,L:gi,I:yi,_:wi,X:Si,Y:bi,$:vi,K:Mi,Z:Gi,tt:xi,st:Ti,it:_i,et:Ii,ht:Ci,nt:Ri,W:Ai,rt:Pi,ot:Ei,perspective:g,lt:Fi,ut:Di,ct:Oi,ft:y,dt:ki,gt:Li,yt:Ni,C:Bi,R:Wi,add:ji,P:Vi,D:Ui,O:Hi,F:zi,equals:Ji,mul:w,sub:S}),v=te,M=se,G=ie,x=ue,T=ce,_=Yi,I=fe,t=Xi(),C=function(s,i,e,h,n,r){var o,a;for(i||(i=3),e||(e=0),a=h?Math.min(h*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],n(t,t,r),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2];return s},R=Object.freeze({__proto__:null,create:Xi,clone:qi,length:Yi,S:$i,m:Ki,set:Zi,add:Qi,P:te,multiply:se,wt:ie,ceil:ee,floor:he,min:ne,max:re,round:oe,scale:ae,St:le,bt:ue,vt:ce,Mt:fe,Gt:de,inverse:pe,normalize:me,xt:ge,Tt:ye,_t:we,It:Se,Ct:be,Rt:ve,random:Me,At:Ge,Pt:xe,Et:Te,U:_e,H:Ie,J:Ce,angle:Re,Ft:Ae,C:Pe,F:Ee,equals:Fe,sub:v,mul:M,div:G,Dt:x,Ot:T,kt:_,Lt:I,forEach:C}),A=We,P=je,E=Ve,F=$e,D=Ke,O=Ze,k=Qe,L=function(){var t=De();return function(s,i,e,h,n,r){var o,a;for(i||(i=4),e||(e=0),a=h?Math.min(h*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],t[2]=s[o+2],t[3]=s[o+3],n(t,t,r),s[o]=t[0],s[o+1]=t[1],s[o+2]=t[2],s[o+3]=t[3];return s}}(),N=Object.freeze({__proto__:null,create:De,clone:Oe,S:ke,m:Le,set:Ne,add:Be,P:We,multiply:je,wt:Ve,ceil:Ue,floor:He,min:ze,max:Je,round:Xe,scale:qe,St:Ye,bt:$e,vt:Ke,length:Ze,Mt:Qe,Gt:th,inverse:sh,normalize:ih,xt:eh,Tt:hh,_t:nh,random:rh,At:oh,Et:ah,Ft:lh,C:uh,F:ch,equals:fh,sub:A,mul:P,div:E,Dt:F,Ot:D,kt:O,Lt:k,forEach:L}),B=Oe,W=ke,j=Le,V=Ne,U=Be,H=wh,z=qe,J=eh,X=nh,Y=q=Ze,K=$=Qe,Z=ih,Q=ch,tt=function(){var t=Xi(),s=$i(1,0,0),i=$i(0,1,0);return function(e,h,n){var r=ge(h,n);return r<-.999999?(ye(t,s,h),_(t)<1e-6&&ye(t,i,h),me(t,t),mh(e,t,Math.PI),e):r>.999999?(e[0]=0,e[1]=0,e[2]=0,e[3]=1,e):(ye(t,h,n),e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=1+r,Z(e,e))}}(),st=function(){var t=dh(),s=dh();return function(i,e,h,n,r,o){return _h(t,e,r,o),_h(s,h,n,o),_h(i,t,s,2*o*(1-o)),i}}(),it=function(){var t=Gs();return function(s,i,e,h){return t[0]=e[0],t[3]=e[1],t[6]=e[2],t[1]=h[0],t[4]=h[1],t[7]=h[2],t[2]=-i[0],t[5]=-i[1],t[8]=-i[2],Z(s,Ah(s,t))}}(),et=Object.freeze({__proto__:null,create:dh,identity:ph,Nt:mh,Bt:gh,Wt:yh,multiply:wh,U:Sh,H:bh,J:vh,jt:Mh,exp:Gh,Vt:xh,pow:Th,It:_h,random:Ih,M:Ch,Ut:Rh,Ht:Ah,zt:Ph,C:Eh,clone:B,S:W,m:j,set:V,add:U,mul:H,scale:z,xt:J,_t:X,length:q,kt:Y,Mt:$,Lt:K,normalize:Z,F:Q,equals:Fh,Jt:tt,Xt:st,qt:it}),ht=j,nt=j,rt=en,ot=J,lt=at=q,ct=ut=$,ft=Object.freeze({__proto__:null,create:Dh,clone:Oh,S:kh,Yt:Lh,K:Nh,L:Bh,_:Wh,N:jh,m:Vh,identity:Uh,set:Hh,$t:ht,Kt:zh,Zt:nt,Qt:Jh,tt:Xh,translate:qh,U:Yh,H:$h,J:Kh,ts:Zh,ss:Qh,es:tn,add:sn,multiply:en,mul:rt,scale:hn,xt:ot,_t:nn,M:rn,Ut:on,length:at,kt:lt,Mt:ut,Lt:ct,normalize:an,C:ln,F:un,equals:cn}),dt=An,pt=wn,mt=Sn,gt=bn,yt=Cn,wt=Rn,St=Pn,bt=function(){var t=fn();return function(s,i,e,h,n,r){var o,a;for(i||(i=2),e||(e=0),a=h?Math.min(h*i+e,s.length):s.length,o=e;o<a;o+=i)t[0]=s[o],t[1]=s[o+1],n(t,t,r),s[o]=t[0],s[o+1]=t[1];return s}}(),vt=Object.freeze({__proto__:null,create:fn,clone:dn,S:pn,m:mn,set:gn,add:yn,P:wn,multiply:Sn,wt:bn,ceil:vn,floor:Mn,min:Gn,max:xn,round:Tn,scale:_n,St:In,bt:Cn,vt:Rn,length:An,Mt:Pn,Gt:En,inverse:Fn,normalize:Dn,xt:On,Tt:kn,_t:Ln,random:Nn,hs:Bn,ns:Wn,Pt:jn,At:Vn,rotate:Un,angle:Hn,Ft:zn,C:Jn,F:Xn,equals:qn,kt:dt,sub:pt,mul:mt,div:gt,Dt:yt,Ot:wt,Lt:St,forEach:bt}),globalThis.rs=r,globalThis.rs.ls=l,globalThis.rs.us=f,globalThis.rs.cs=m,globalThis.rs.fs=b,globalThis.rs.ds=et,globalThis.rs.ps=ft,globalThis.rs.gs=vt,globalThis.rs.ys=R,globalThis.rs.ws=N}var t,s,i,e,h,n,r,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,G,x,T,_,I,C,R,A,P,E,F,D,O,k,L,N,B,W,j,V,U,H,z,J,X,q,Y,$,K,Z,Q,tt,st,it,et,ht,nt,rt,ot,at,lt,ut,ct,ft,dt,pt,mt,gt,yt,wt,St,bt,vt,Mt,Gt,xt,Tt;{let Yn=function(t,s,i){i=i||0;var e,h,n,r,o,a,l,u=[0,0];return e=t[1][1]-t[0][1],h=t[0][0]-t[1][0],n=e*t[0][0]+h*t[0][1],r=s[1][1]-s[0][1],o=s[0][0]-s[1][0],a=r*s[0][0]+o*s[0][1],vr(l=e*o-r*h,0,i)||(u[0]=(o*n-h*a)/l,u[1]=(e*a-r*n)/l),u},$n=function(t,s,i,e){var h=s[0]-t[0],n=s[1]-t[1],r=e[0]-i[0],o=e[1]-i[1];if(r*n-o*h===0)return!1;var a=(h*(i[1]-t[1])+n*(t[0]-i[0]))/(r*n-o*h),l=(r*(t[1]-i[1])+o*(i[0]-t[0]))/(o*h-r*n);return a>=0&&a<=1&&l>=0&&l<=1},Kn=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},Zn=function(t,s,i){return Kn(t,s,i)>0},Qn=function(t,s,i){return Kn(t,s,i)>=0},tr=function(t,s,i){return Kn(t,s,i)<0},sr=function(t,s,i){return Kn(t,s,i)<=0},ir=function(t,s,i,e){if(e){var h=Mt,n=Gt;h[0]=s[0]-t[0],h[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1];var r=h[0]*n[0]+h[1]*n[1],o=Math.sqrt(h[0]*h[0]+h[1]*h[1]),a=Math.sqrt(n[0]*n[0]+n[1]*n[1]);return Math.acos(r/(o*a))<e}return 0===Kn(t,s,i)},er=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e},hr=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},nr=function(t){t.length=0},rr=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},or=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!Zn(hr(t,s-1),hr(t,s),hr(t,s+1))&&(ar(t),!0)},ar=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},lr=function(t,s){return tr(hr(t,s-1),hr(t,s),hr(t,s+1))},ur=function(t,s,i){var e,h,n=xt,r=Tt;if(Qn(hr(t,s+1),hr(t,s),hr(t,i))&&sr(hr(t,s-1),hr(t,s),hr(t,i)))return!1;h=er(hr(t,s),hr(t,i));for(var o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&Qn(hr(t,s),hr(t,i),hr(t,o+1))&&sr(hr(t,s),hr(t,i),hr(t,o))&&(n[0]=hr(t,s),n[1]=hr(t,i),r[0]=hr(t,o),r[1]=hr(t,o+1),e=Yn(n,r),er(hr(t,s),e)<h))return!1;return!0},cr=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&$n(hr(t,s),hr(t,i),hr(t,e),hr(t,e+1)))return!1;return!0},fr=function(t,s,i,e){var h=e||[];if(nr(h),s<i)for(var n=s;n<=i;n++)h.push(t[n]);else{for(n=0;n<=i;n++)h.push(t[n]);for(n=s;n<t.length;n++)h.push(t[n])}return h},dr=function(t){for(var s=[],i=[],e=[],h=[],n=Number.MAX_VALUE,r=0;r<t.length;++r)if(lr(t,r))for(var o=0;o<t.length;++o)if(ur(t,r,o)){i=dr(fr(t,r,o,h)),e=dr(fr(t,o,r,h));for(var a=0;a<e.length;a++)i.push(e[a]);i.length<n&&(s=i,n=i.length,s.push([hr(t,r),hr(t,o)]))}return s},pr=function(t){var s=dr(t);return s.length>0?mr(t,s):[t]},mr=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],n=0;n<i.length;n++){var r=mr(i[n],h);if(r){i.splice(n,1),i.push(r[0],r[1]);break}}return i}return h=s,e=t.indexOf(h[0]),n=t.indexOf(h[1]),-1!==e&&-1!==n&&[fr(t,e,n),fr(t,n,e)]},gr=function(t){var s,i=t;for(s=0;s<i.length-1;s++)for(var e=0;e<s-1;e++)if($n(i[s],i[s+1],i[e],i[e+1]))return!1;for(s=1;s<i.length-2;s++)if($n(i[0],i[i.length-1],i[s],i[s+1]))return!1;return!0},yr=function(t,s,i,e,h){h=h||0;var n=s[1]-t[1],r=t[0]-s[0],o=n*t[0]+r*t[1],a=e[1]-i[1],l=i[0]-e[0],u=a*i[0]+l*i[1],c=n*l-a*r;return vr(c,0,h)?[0,0]:[(l*o-r*u)/c,(n*u-a*o)/c]},wr=function(t,s,i,e,h,n,r){n=n||100,r=r||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(b.length<3)return s;if(++r>n)return console.warn("quickDecomp: max level ("+n+") reached."),s;for(var v=0;v<t.length;++v)if(lr(S,v)){i.push(S[v]),u=c=Number.MAX_VALUE;for(var M=0;M<t.length;++M)Zn(hr(S,v-1),hr(S,v),hr(S,M))&&sr(hr(S,v-1),hr(S,v),hr(S,M-1))&&(l=yr(hr(S,v-1),hr(S,v),hr(S,M),hr(S,M-1)),tr(hr(S,v+1),hr(S,v),l)&&(f=er(S[v],l))<c&&(c=f,a=l,m=M)),Zn(hr(S,v+1),hr(S,v),hr(S,M+1))&&sr(hr(S,v+1),hr(S,v),hr(S,M))&&(l=yr(hr(S,v+1),hr(S,v),hr(S,M),hr(S,M+1)),Zn(hr(S,v-1),hr(S,v),l)&&(f=er(S[v],l))<u&&(u=f,o=l,p=M));if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(rr(y,S,v,p+1),y.push(l),w.push(l),0!==m&&rr(w,S,m,S.length),rr(w,S,0,v+1)):(0!==v&&rr(y,S,v,S.length),rr(y,S,0,p+1),y.push(l),w.push(l),rr(w,S,m,v+1));else{if(m>p&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)Qn(hr(S,v-1),hr(S,v),hr(S,M))&&sr(hr(S,v+1),hr(S,v),hr(S,M))&&(f=er(hr(S,v),hr(S,M)))<d&&cr(S,v,M)&&(d=f,g=M%t.length);v<g?(rr(y,S,v,g+1),0!==g&&rr(w,S,g,b.length),rr(w,S,0,v+1)):(0!==v&&rr(y,S,v,b.length),rr(y,S,0,g+1),rr(w,S,g,v+1))}return y.length<w.length?(wr(y,s,i,e,h,n,r),wr(w,s,i,e,h,n,r)):(wr(w,s,i,e,h,n,r),wr(y,s,i,e,h,n,r)),s}return s.push(t),s},Sr=function(t,s){for(var i=0,e=t.length-1;t.length>3&&e>=0;--e)ir(hr(t,e-1),hr(t,e),hr(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},br=function(t,s){for(var i=t.length-1;i>=1;--i)for(var e=t[i],h=i-1;h>=0;--h)Mr(e,t[h],s)&&t.splice(i,1)},vr=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},Mr=function(t,s,i){return vr(t[0],s[0],i)&&vr(t[1],s[1],i)};Mt=[],Gt=[],xt=[],Tt=[],self.Ss={bs:pr,vs:wr,Ms:gr,Gs:Sr,xs:br,Ts:or}}{let Gr=!1,xr=!1,Tr="dev";const _r=Symbol("Construct internal API token");let Ir=16;const Cr=self._s=class{constructor(){throw TypeError("static class can't be instantiated")}static Is(){if(Ir<=0)throw new Error("cannot obtain internal API token");return--Ir,_r}static Cs(){Gr=!0}static Rs(){return Gr}static As(){xr=!0}static Ps(){return xr}static Es(t){Tr=t}static Fs(){return Tr}static Ds(){return"final"===Tr}};Cr.Os=!1,Cr.ks=!1,Cr.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ls={}}{const Rr=self._s;Rr.Ns=class{constructor(t){this.Bs=t,this.Ws=new Map,this.js()}js(){let t=this.Bs;(t.startsWith("?")||t.startsWith("#"))&&(t=t.substr(1));const s=t.split("&");for(const t of s)this.Vs(t)}Vs(t){if(!t)return;if(!t.includes("="))return void this.Ws.set(t,null);const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Ws.set(i,e)}Us(){for(const t of this.Ws)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}Hs(t){return this.Ws.has(t)}zs(t){const s=this.Ws.get(t);return void 0===s?null:s}Js(){history.replaceState("",document.title,location.pathname+location.search)}Xs(t){this.Bs=t,this.Ws.clear(),this.js()}},Rr.qs=new Rr.Ns(location.search),Rr.Ys=new Rr.Ns(location.hash),Rr.qs.Hs("perf")&&(Rr.$s=!0),"dev"!==Rr.qs.zs("mode")&&Rr.Es("final")}{let Ar=function(t){const s=parseFloat(t);return Fr.get(s)||(s>=13?"11":"NT "+t)};0;const Pr=self._s,Er="(unknown)";Pr.Ks={Zs:Er,Qs:Er,ti:Er,si:Er,ii:NaN,ei:Er,hi:"browser",ni:!0,ri:!1,oi:!1,ai:!1,li:async()=>{}};const Fr=new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]]),Dr=navigator.userAgent,Or=navigator.userAgentData;if(Or&&Or.brands.length>0){let kr=function(t){let s="",i="",e="",h="";for(const n of t){const t=Lr.get(n.brand);!s&&t&&(s=t,i=n.version);const r=Nr.get(n.brand);!e&&r&&(e=r,h=n.version)}s||"Chromium"!==e||(Pr.Ks.ti="Chromium",Pr.Ks.si=h),Pr.Ks.ti=s||Er,Pr.Ks.si=i||Er,Pr.Ks.ei=e||Er};Pr.Ks.Zs=Or.platform,Pr.Ks.ri=Or.mobile,Pr.Ks.ni=!Pr.Ks.ri;const Lr=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),Nr=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);kr(Or.brands);let Br=!1;Pr.Ks.li=async()=>{if(!Br)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);kr(t.fullVersionList),"Windows"===Pr.Ks.Zs?Pr.Ks.Qs=Ar(t.platformVersion):Pr.Ks.Qs=t.platformVersion,Br=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let Wr=function(t,s){const i=Array.isArray(t)?t:[t];for(const t of i){const i=t.exec(Dr);if(i){s(i);break}}};Wr(/windows\s+nt\s+([\d\.]+)/i,t=>{Pr.Ks.Zs="Windows";const s=t[1];Pr.Ks.Qs=Ar(s)}),Wr(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{Pr.Ks.Zs="macOS",Pr.Ks.Qs=t[1].replace(/_/g,".")}),Wr(/CrOS/,()=>{Pr.Ks.Zs="Chrome OS"}),Wr(/linux|openbsd|freebsd|netbsd/i,()=>{Pr.Ks.Zs="Linux"}),Wr(/android/i,()=>{Pr.Ks.Zs="Android"}),Wr(/android\s+([\d\.]+)/i,t=>{Pr.Ks.Zs="Android",Pr.Ks.Qs=t[1]}),Pr.Ks.Zs===Er&&(Wr(/(iphone|ipod|ipad)/i,t=>{Pr.Ks.Zs="iOS"}),Wr([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{Pr.Ks.Zs="iOS",Pr.Ks.Qs=t[1].replace(/_/g,".")}));const jr=/chrome\//i.test(Dr),Vr=/chromium\//i.test(Dr),Ur=/edg\//i.test(Dr),Hr=/OPR\//.test(Dr),zr=/nwjs/i.test(Dr),Jr=/safari\//i.test(Dr),Xr=/webkit/i.test(Dr);Ur||Hr||Wr(/chrome\/([\d\.]+)/i,t=>{Pr.Ks.ti="Chrome",Pr.Ks.si=t[1],Pr.Ks.ei="Chromium"}),Wr(/edg\/([\d\.]+)/i,t=>{Pr.Ks.ti="Edge",Pr.Ks.si=t[1],Pr.Ks.ei="Chromium"}),Wr(/OPR\/([\d\.]+)/,t=>{Pr.Ks.ti="Opera",Pr.Ks.si=t[1],Pr.Ks.ei="Chromium"}),Wr(/chromium\/([\d\.]+)/i,t=>{Pr.Ks.ti="Chromium",Pr.Ks.si=t[1],Pr.Ks.ei="Chromium"}),Wr(/nwjs\/[0-9.]+/i,t=>{Pr.Ks.ti="NW.js",Pr.Ks.si=t[1],Pr.Ks.ei="Chromium",Pr.Ks.hi="nwjs"}),Wr(/firefox\/([\d\.]+)/i,t=>{Pr.Ks.ti="Firefox",Pr.Ks.si=t[1],Pr.Ks.ei="Gecko"}),!Jr||jr||Vr||Ur||Hr||zr||(Pr.Ks.ti="Safari",Pr.Ks.ei="WebKit",Wr(/version\/([\d\.]+)/i,t=>{Pr.Ks.si=t[1]}),Wr(/crios\/([\d\.]+)/i,t=>{Pr.Ks.ti="Chrome for iOS",Pr.Ks.si=t[1]}),Wr(/fxios\/([\d\.]+)/i,t=>{Pr.Ks.ti="Firefox for iOS",Pr.Ks.si=t[1]}),Wr(/edgios\/([\d\.]+)/i,t=>{Pr.Ks.ti="Edge for iOS",Pr.Ks.si=t[1]})),Pr.Ks.ei===Er&&Xr&&(Pr.Ks.ei="WebKit"),"Android"===Pr.Ks.Zs&&"Safari"===Pr.Ks.ti&&(Pr.Ks.ti="Stock");const qr=new Set(["Windows","macOS","Linux","Chrome OS"]).has(Pr.Ks.Zs)||"nwjs"===Pr.Ks.hi;Pr.Ks.ni=qr,Pr.Ks.ri=!qr}"Chrome"===Pr.Ks.ti&&"browser"===Pr.Ks.hi&&/wv\)/.test(Dr)&&(Pr.Ks.hi="webview"),"nwjs"!==Pr.Ks.hi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(Pr.Ks.hi="webapp"),Pr.Ks.ii=parseFloat(Pr.Ks.si);"macOS"===Pr.Ks.Zs&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2&&(Pr.Ks.Zs="iOS",Pr.Ks.Qs=Pr.Ks.si,Pr.Ks.ni=!1,Pr.Ks.ri=!0,Pr.Ks.ai=!0),Pr.Ks.oi="macOS"===Pr.Ks.Zs||"iOS"===Pr.Ks.Zs}{let Yr=function(t){return new Promise((s,i)=>{t.onsuccess=()=>s(t.result),t.onerror=()=>i(t.error)})},$r=function(t){return new Promise((s,i)=>{t.oncomplete=()=>s(),t.onerror=()=>i(t.error),t.onabort=()=>i(t.error)})},Kr=function(t,s){return oo(t,s)},Zr=function(t,s){return oo(t,s,!0)},Qr=function(t){to(t);let s=ho.get(t);return s instanceof Promise||(s=ao(t),ho.set(t,s),s.catch(s=>ho.delete(t))),s},to=function(t){if("string"!=typeof t)throw new TypeError("expected string")},so=function(t,s){const i=t.objectStore(eo).openCursor();return new Promise(t=>{const e=[];i.onsuccess=i=>{const h=i.target.result;if(h){switch(s){case"entries":e.push([h.key,h.value]);break;case"keys":e.push(h.key);break;case"values":e.push(h.value)}h.continue()}else t(e)}})};0;const io=2,eo="keyvaluepairs",ho=new Map,no="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,ro="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function oo(t,s,i=!1,e=!0){const h=await Qr(t);try{return s(h.transaction([eo],i?"readwrite":"readonly"))}catch(h){if(e&&"InvalidStateError"===h.name)return ho.delete(t),oo(t,s,i,!1);throw h}}async function ao(t){to(t);const s=indexedDB.open(t,io);return s.addEventListener("upgradeneeded",s=>{try{s.target.result.createObjectStore(eo)}catch(s){console.error(`Failed to create objectstore for database ${t}`,s)}}),Yr(s)}class lo{constructor(t){to(t),this.name=t}async ready(){await Qr(this.name)}set(t,s){return to(t),Zr(this.name,async i=>{const e=Yr(i.objectStore(eo).put(s,t)),h=$r(i);await Promise.all([h,e])})}get(t){return to(t),Kr(this.name,async s=>{const i=Yr(s.objectStore(eo).get(t)),e=$r(s),[h,n]=await Promise.all([e,i]);return n})}delete(t){return to(t),Zr(this.name,async s=>{const i=Yr(s.objectStore(eo).delete(t)),e=$r(s);await Promise.all([e,i])})}clear(){return Zr(this.name,async t=>{const s=Yr(t.objectStore(eo).clear()),i=$r(t);await Promise.all([i,s])})}keys(){return Kr(this.name,async t=>{let s;s=ro?Yr(t.objectStore(eo).getAllKeys()):so(t,"keys");const i=$r(t),[e,h]=await Promise.all([i,s]);return h})}values(){return Kr(this.name,async t=>{let s;s=no?Yr(t.objectStore(eo).getAll()):so(t,"values");const i=$r(t),[e,h]=await Promise.all([i,s]);return h})}entries(){return Kr(this.name,async t=>{const s=so(t,"entries"),i=$r(t),[e,h]=await Promise.all([i,s]);return h})}}self.ci=lo}{let uo=function(t){throw new Error(`"${t}" is not implemented`)},co=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},fo=function(t){return"object"==typeof t?new Promise(s=>{const{port1:i,port2:e}=new MessageChannel;e.onmessage=t=>s(t.data),i.postMessage(t)}):Promise.resolve(t)};0;const po=self.ci,mo=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];class go{constructor(t){this.fi=t,this.di=!this.fi,this.di||"undefined"!=typeof indexedDB||(this.di=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.pi=new Map}mi(t){if(!this.di)for(const s of mo)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.di=!0;break}}async gi(t){const s=this.pi.get(t),i=await fo(s);return void 0===i?null:i}async yi(t,s){s=await fo(s),this.pi.set(t,s)}wi(t){this.pi.delete(t)}Si(){this.pi.clear()}bi(){return Array.from(this.pi.keys())}Mi(){return this.di}Gi(){return this.pi}xi(t){this.pi=t}async getItem(t,s){if(co(s),this.di)return await this.gi(t);let i;try{i=await this.fi.get(t)}catch(s){return this.mi(s),this.di?await this.gi(t):(console.error(`Error reading '${t}' from storage, returning null: `,s),null)}return void 0===i?null:i}async setItem(t,s,i){if(co(i),void 0===s&&(s=null),this.di)await this.yi(t,s);else try{await this.fi.set(t,s)}catch(i){if(this.mi(i),!this.di)throw i;await this.yi(t,s)}}async removeItem(t,s){if(co(s),this.di)this.wi(t);else try{await this.fi.delete(t)}catch(s){this.mi(s),this.di?this.wi(t):console.error(`Error removing '${t}' from storage: `,s)}}async clear(t){if(co(t),this.di)this.Si();else try{await this.fi.clear()}catch(t){this.mi(t),this.di?this.Si():console.error("Error clearing storage: ",t)}}async keys(t){if(co(t),this.di)return this.bi();let s=[];try{s=await this.fi.keys()}catch(t){if(this.mi(t),this.di)return this.bi();console.error("Error getting storage keys: ",t)}return s}ready(t){return co(t),this.di?Promise.resolve(!0):this.fi.ready()}Ti(t){if(t._i)return new go(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new po(s);return new go(i)}}length(t){uo("localforage.length()")}key(t,s){uo("localforage.key()")}iterate(t,s){uo("localforage.iterate()")}Ii(t){uo("localforage.setDriver()")}config(t){uo("localforage.config()")}Ci(t){uo("localforage.defineDriver()")}Ri(){uo("localforage.driver()")}supports(t){uo("localforage.supports()")}dropInstance(){uo("localforage.dropInstance()")}}self.localforage=new go(new po("localforage"))}{const yo=self._s;if(yo.Ai={},yo.Ai.Pi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");return void 0!==t.animate&&void 0!==t.animate([{opacity:"0"},{opacity:"1"}],1e3).reverse}catch(t){return!1}})(),yo.Ai.Ei="undefined"!=typeof HTMLDialogElement,yo.Ai.Fi=!!self.requestIdleCallback,yo.Ai.ImageBitmap=!!self.createImageBitmap,yo.Ai.ImageBitmapOptions=!1,yo.Ai.Di=!1,yo.Ai.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{yo.Ai.ImageBitmapOptions=!0}).catch(()=>{yo.Ai.ImageBitmapOptions=!1})}catch(wo){yo.Ai.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{yo.Ai.Di=10===t.width&&10===t.height}).catch(()=>{yo.Ai.Di=!1})}catch(So){yo.Ai.Di=!1}}if(yo.Ai.Oi=!(!navigator.clipboard||!navigator.clipboard.readText),yo.Ai.ki=!(!navigator.permissions||!navigator.permissions.query),yo.Ai.Li=!1,yo.Ai.ki){const bo={name:"clipboard-read"};navigator.permissions.query(bo).then(()=>{yo.Ai.Li=!0}).catch(()=>{yo.Ai.Li=!1})}yo.Ai.Ni=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),yo.Ai.Bi="undefined"!=typeof Proxy,yo.Ai.Wi="undefined"!=typeof document&&void 0!==document.createElement("a").download,yo.Ai.ji="function"==typeof fetch,yo.Ai.Vi=!!(self.isSecureContext&&"Opera"!==yo.Ks.ti&&navigator.storage&&navigator.storage.persist),yo.Ai.Ui=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),yo.Ai.Hi=(()=>{if("undefined"==typeof document)return!1;if("iOS"===yo.Ks.Zs)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),yo.Ai.ImageDecoder=void 0!==self.ImageDecoder,yo.Ai.zi=!!self.VideoEncoder,yo.Ai.Ji=!!self.showOpenFilePicker,yo.Ai.Xi=!!self.queryLocalFonts,yo.Ai.UserActivation=!!navigator.userActivation,yo.Ai.Yi=!1,(async()=>{let t;"undefined"==typeof document?t=new OffscreenCanvas(32,32):(t=document.createElement("canvas"),t.width=32,t.height=32);const s=t.getContext("2d");s.fillStyle="blue",s.fillRect(0,0,32,32);let i=null;try{t.convertToBlob?i=await t.convertToBlob({type:"image/webp",quality:1}):t.toBlob&&(i=await new Promise(s=>t.toBlob(s,"image/webp",1))),yo.Ai.Yi=i&&"image/webp"===i.type}catch(t){yo.Ai.Yi=!1}})()}{const vo=self._s;String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(vo.$i(t),"g"),s)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((t,s)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((s,i)=>t({usage:s,quota:i}),s))})}{let Mo=function(t){let s="Assertion failure: "+t+"\n\nStack trace:\n"+Go.Ki();console.error(s)};0;const Go=self._s;self.assert=function(t,s){t||Mo(s)}}{const xo=self._s,To=self.Ls;xo.Zi=function(t){return"number"==typeof t},xo.Qi=function(t){return xo.Zi(t)&&isFinite(t)},xo.te=function(t){if(!xo.Zi(t))throw new TypeError("expected number")},xo.se=function(t){xo.ie(t)},xo.ee=function(t,s,i){if(!xo.Zi(t)||isNaN(t)||s>t||i<t)throw new RangeError("number outside of range")},xo.he=function(...t){for(let s of t);},xo.ne=function(t){if(!xo.Qi(t))throw new TypeError("expected finite number")},xo.re=function(t){xo.ie(t)},xo.oe=function(...t){for(let s of t);},xo.ae=function(t){return"string"==typeof t},xo.le=function(t){if(!xo.ae(t))throw new TypeError("expected string")},xo.ue=function(t){xo.ie(t)},xo.ce=function(...t){for(let s of t);},xo.fe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},xo.de=function(t){if(!xo.fe(t))throw new TypeError("expected simple object")},xo.pe=function(t){if(!xo.ie(t)&&!xo.fe(t))throw new TypeError("expected simple object")},xo.me=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},xo.ge=function(t){if(!xo.me(t))throw new TypeError("expected object")},xo.ye=function(t){xo.ie(t)},xo.we=function(...t){for(let s of t);},xo.Se=function(t){return xo.be(t,Blob)&&"string"==typeof t.name},xo.ve=function(t){if(!xo.Se(t))throw new TypeError("expected file")},xo.Me=function(t){xo.ie(t)},xo.Ge=function(t){return Array.isArray(t)},xo.xe=function(t){if(!xo.Ge(t))throw new TypeError("expected array")},xo.Te=function(t){xo.ie(t)},xo._e=function(...t){for(let s of t);},xo.Ie=function(t){return!(!xo.Ge(t)||t.length&&!xo.Ge(t[0]))},xo.Ce=function(t){if(!xo.Ie(t))throw new TypeError("expected 2d array");for(let s of t)if(!xo.Ge(s))throw new TypeError("expected 2d array")},xo.Re=function(t){xo.ie(t)},xo.Ae=function(t){return"function"==typeof t},xo.Pe=function(t,s){if(!xo.Ae(t))throw new TypeError("expected function");if(!xo.ie(s)&&t!==s)throw new TypeError("expected same function reference")},xo.Ee=function(t){xo.ie(t)},xo.Fe=function(...t){for(let s of t);},xo.De=function(t,...s){if(!xo.Ae(t))throw new TypeError("expected function");if(!s.length)throw new Error("missing comparison functions");for(let i of s)if(!xo.ie(i)&&t===i)return;throw new TypeError("expected same function reference")},xo.Oe=function(...t){if(!xo.ie(t))for(let s of t);},xo.ke=function(t,s){return t instanceof s},xo.Le=function(t,...s){for(let i of s)if(xo.ke(t,i))return!0;return!1},xo.Ne=function(t,s){if(!xo.ke(t,s))throw new TypeError("unexpected type")},xo.Be=function(t,s){xo.ie(t)},xo.We=function(t,...s){for(let t of s);},xo.je=function(t,...s){if(!xo.Le(t,...s))throw new TypeError("unexpected type")},xo.Ve=function(t,...s){if(!xo.ie(t)&&!xo.Le(t,...s))throw new TypeError("unexpected type")},xo.Ue=function(t,s){for(let i of t)if(!xo.ke(i,s))return!1;return!0},xo.He=function(t){for(let s of t)if(!xo.Qi(s))return!1;return!0},xo.ze=function(t,s){for(let s of t);},xo.Je=function(t,s){if(!xo.ie(t))for(let s of t);},xo.Xe=function(t,s){if(!xo.ie(t))for(let s of t);},xo.qe=function(t,...s){for(let s of t);},xo.Ye=function(t,...s){if(!xo.ie(t))for(let s of t);},xo.$e=function(t,s){return!(xo.ie(t)||!xo.ae(t.nodeName))&&(!s||xo.Ke(t.nodeName,s))},xo.Ze=function(t,s){if(xo.ie(t)||!xo.ae(t.nodeName))throw new TypeError("expected DOM node");if(s&&!xo.Ke(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},xo.Qe=function(t,s){xo.ie(t)},xo.th=function(t,s){return!(xo.ie(t)||!xo.ae(t.tagName))&&(!s||xo.Ke(t.tagName,s))},xo.sh=function(t,s){if(xo.ie(t)||!xo.ae(t.tagName))throw new TypeError("expected HTML element");if(s&&!xo.Ke(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},xo.ih=function(t,s){xo.ie(t)},xo.eh=function(t){return xo.th(t,"img")||xo.th(t,"canvas")||xo.th(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},xo.hh=function(t){if(!xo.eh(t))throw new TypeError("expected drawable")},xo.nh=function(t){xo.ie(t)},xo.rh=function(t){return t instanceof ImageData||xo.eh(t)},xo.oh=function(t){if(!xo.rh(t))throw new TypeError("expected drawable or image data")},xo.ah=function(t){if(!xo.ie(t)&&!xo.rh(t))throw new TypeError("expected drawable or image data")},xo.uh=function(t){return"string"==typeof t||xo.fh&&t instanceof xo.fh||t instanceof xo.dh},xo.ph=function(t){if(!xo.uh(t))throw new TypeError("expected string-like")},xo.mh=function(t){xo.ie(t)},xo.gh=function(...t){for(let s of t);},xo.yh=function(){throw new Error("must be overridden")},xo.wh=function(){throw new Error("not yet implemented")},xo.Sh=function(t){return t.constructor===function*(){}.constructor},xo.bh=function(t){if(!xo.Sh(t))throw new Error("expected generator function")},xo.Mh=function(t){return"function"===t[Symbol.iterator]},xo.Gh=function(t){if(!xo.Mh(t))throw new Error("expected iterable")},xo.xh=function(t){return!xo.ie(t)},xo.ie=function(t){return null==t},xo.Th=function(t){let s=t[0].constructor;for(let i of t)if(i.constructor!==s)return!1;return s},xo._h=function(t,s){for(let i of t)if(!(i instanceof s))return!1;return!0};const _o=Object.getPrototypeOf(Uint8Array);xo.Ih=function(t){return xo.ke(t,_o)},xo.Ch=function(t){},xo.Rh=function(t){xo.Ah(t,_o)},xo.Ph=function(t,...s){if(!xo.Eh(t,...s))throw new TypeError("unexpected type")},xo.Eh=function(t,...s){for(const i of s)if(xo.be(t,i))return!0;return!1},xo.Ah=function(t,s){if(!xo.be(t,s))throw new TypeError("unexpected type")},xo.be=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},To.te=xo.te,To.se=xo.se,To.ne=xo.ne,To.re=xo.re,To.le=xo.le,To.ue=xo.ue,To.ge=xo.ge,To.ye=xo.ye,To.xe=xo.xe,To.Te=xo.Te,To.Pe=xo.Pe,To.Ee=xo.Ee,To.Ne=xo.Ne,To.Be=xo.Be,To.ie=xo.ie}{let Io=function(t,s){let i=Eo.getType(t),e=Eo.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},Co=function(t){console.warn("[Defence] "+t+" @",Eo.Ki())},Ro=function(){if(Wo=-1,Oo.size>0||ko.size>0){let t=[...new Set([...Oo.keys()].map(t=>Eo.getName(t)))].join(",");console.warn(`An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: ${t}`),Oo.clear(),ko.clear()}},Ao=function(t){let s=new Set;for(let i in t)s.add(i);return s},Po=function(t,s){let i=Ao(s),e=jo.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);Eo.Fh(s,[...i]),s.length&&console.warn(`[Defence] '${Eo.getName(t)}' constructor creates inconsistent properties: ${s.join(", ")}`)}else jo.set(t,i)};0;const Eo=self._s,Fo=new Map;let Do;Eo.Dh=function(t,s){console.log(`%c${t}`,`font-weight: bold; color:${s}`)},Eo.Oh=function(t,...s){Fo.has(t)||Fo.set(t,-1),-1===Fo.get(t)&&Fo.set(t,requestAnimationFrame(()=>{console.log(`%c${t}`,"font-weight: bold",...s),Fo.set(t,-1)}))},Eo.kh=function(t){performance.mark(t),Do||(Do=new Map),Do.has(t)||Do.set(t,{Lh:0,total:0,Nh:0,Bh:1,toString:function(){return`${t} :: current => ${this.Lh.toPrecision(3)} :: average => ${this.Nh.toPrecision(3)} :: calls => ${this.Bh}`}})},Eo.Wh=function(t){performance.measure(`measure-${t}`,t);const s=performance.getEntriesByName(`measure-${t}`)[0],i=Do.get(t);i.Lh=s.duration,i.total+=i.Lh,i.Nh=i.total/i.Bh,console.log(i.toString()),i.Bh++,performance.clearMarks(t),performance.clearMeasures(`measure-${t}`)},Eo.Ki=function(){return(new Error).stack},Eo.jh=function(){},Eo.cast=function(t,s){return t&&t instanceof s?t:null},Eo.getName=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":Eo.Zi(t)?"<number>":Eo.ae(t)?"<string>":Eo.Ge(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":Eo.Ae(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},Eo.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},Eo.range=function*(t,s){if(!isFinite(Math.abs(t-s)))throw new Error("Invalid parameters");if(t>s)for(let i=t-1;i>=s;i--)yield i;else for(let i=t;i<s;i++)yield i};let Oo=new Map,ko=new Map,Lo=new WeakMap,No=new WeakMap;Eo.Vh={};const Bo=new Set(["then","splice"]);Eo.Vh.get=function(t,s){return s in t||"symbol"==typeof s||Bo.has(s)||Co(`Accessed missing property '${s}' from defended object '${Eo.getName(t)}', returning undefined`),No.has(t)&&"symbol"!=typeof s&&!Bo.has(s)&&Co(`Accessed property '${s}' on a released object '${Eo.getName(t)}'\nObject was originally released at: ${No.get(t)})\nCall stack at access: `),t[s]},Eo.Vh.set=function(t,s,i){return s in t||Oo.has(t)||Co(`Set non-existent property '${s}' to '${i}' on defended object '${Eo.getName(t)}'`),Io(t[s],i)||Oo.has(t)||Co(`Set '${Eo.getType(t[s])}' property '${s}' to type '${Eo.getType(i)}' on defended object '${Eo.getName(t)}'`),No.has(t)&&Co(`Set property '${s}' on a released object '${Eo.getName(t)}'\nObject was originally released at: ${No.get(t)})\nCall stack at access: `),t[s]=i,!0},Eo.Vh.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${Eo.getName(t)}'`)},Eo.Vh.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${Eo.getName(t)}'`)},Eo.Vh.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${Eo.getName(t)}'`)};let Wo=-1;Eo.Uh=class{constructor(){if(!Eo.ks||!Eo.Ai.Bi)return;let t=new.target,s=Object.create(t.prototype),i=new Proxy(s,Eo.Vh);return Oo.set(s,i),ko.set(i,s),Lo.set(i,s),-1===Wo&&(Wo=requestAnimationFrame(Ro)),i}},Eo.Hh=function(t){if(Eo.ks&&Eo.Ai.Bi&&t instanceof Eo.Uh){if(!ko.has(t))return t;let s=ko.get(t);return ko.delete(t),Oo.delete(s),t}return Eo.Os?Object.seal(t):t},Eo.zh=function(t,...s){let i;try{i=new t(...s)}catch(t){throw ko.clear(),Oo.clear(),t}return Eo.ks&&Po(t,i),Eo.Hh(i)},Eo.Jh=function(t){let s=Lo.get(t);s&&No.set(s,Eo.Ki())},Eo.Xh=function(t){let s=Lo.get(t);return!!s&&!!No.get(s)};let jo=new Map;Eo.qh=class{constructor(t){this.Yh="",t&&this.start(t)}start(t){Eo.$s&&(this.Yh=t,performance.mark(this.Yh+"-Start"))}end(){Eo.$s&&(performance.mark(this.Yh+"-End"),performance.measure(this.Yh,this.Yh+"-Start",this.Yh+"-End"))}next(t){Eo.$s&&(this.end(),this.Yh=t,performance.mark(this.Yh+"-Start"))}}}{let Vo=function(t){return 0===t&&1/t<0};0;const Uo=self._s,Ho=2*Math.PI,zo=Math.PI/180,Jo=180/Math.PI;Uo.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0===e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},Uo.$h=function(t,s,i,e,h){const n=i-s;return 0===n&&0===e?t:(t-s)*(h-e)/n+e},Uo.normalize=function(t,s,i){return s-i===0?1:(t-s)/(i-s)},Uo.Kh=function(t,s,i){return t<s?s:t>i?i:t},Uo.Zh=function(t){return(t%=Ho)<0&&(t+=Ho),t},Uo.Qh=function(t){return t*zo},Uo.tn=function(t){return t*Jo},Uo.sn=function(t,s){return Math.sqrt(t*t+s*s)},Uo.en=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},Uo.hn=function(t,s,i,e){return Uo.sn(i-t,e-s)},Uo.nn=function(t,s,i,e){const h=i-t,n=e-s;return h*h+n*n},Uo.rn=function(t,s,i,e){return Math.atan2(e-s,i-t)},Uo.an=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=i*Math.sin(s)+e*Math.cos(s);return h>=1?0:h<=-1?Math.PI:Math.acos(h)},Uo.ln=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),n=Math.sin(s),r=Math.cos(s);return Math.acos(e*n+h*r)>i?h*n-e*r>0?Uo.Zh(t+i):Uo.Zh(t-i):Uo.Zh(s)},Uo.un=function(t,s){let i=Math.sin(t);return Math.cos(t)*Math.sin(s)-i*Math.cos(s)<=0},Uo.cn=function(t,s,i,e=0){let h=Uo.an(t,s);const n=Ho*e;return Uo.un(s,t)?Uo.Zh(t+(h+n)*i):Uo.Zh(t-(h+n)*i)},Uo.fn=function(t,s,i,e=0){const h=Uo.an(t,s),n=Ho*e;return Uo.un(s,t)?Uo.Zh(t+(h+n)*i):Uo.Zh(t+(Ho-h+n)*i)},Uo.dn=function(t,s,i,e=0){const h=Uo.an(t,s),n=Ho*e;return Uo.un(s,t)?Uo.Zh(t-(-Ho+h-n)*i):Uo.Zh(t-(h+n)*i)},Uo.pn=function(t,s){const i=Uo.an(t,s);return Uo.un(t,s)?Uo.Zh(s-i):Uo.Zh(s+i)},Uo._t=function(t,s,i){return t+i*(s-t)},Uo.mn=function(t,s,i){return t===s?0:(i-t)/(s-t)},Uo.gn=function(t,s,i,e,h){return Uo._t(e,h,Uo.mn(t,s,i))},Uo.yn=function(t,s,i,e){return Uo._t(Uo._t(t,s,e),Uo._t(s,i,e),e)},Uo.wn=function(t,s,i,e,h){return Uo._t(Uo.yn(t,s,i,h),Uo.yn(s,i,e,h),h)},Uo.Sn=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},Uo.bn=function(t){return t>0&&!(t-1&t)},Uo.vn=function(t){--t;for(let s=1;s<32;s<<=1)t|=t>>s;return t+1},Uo.Mn=function(t,s){return Math.round(t*s)/s},Uo.Gn=function(t,s){return Math.floor(t*s)/s},Uo.xn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},Uo.Tn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},Uo.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;e>=0&&"0"===i.charAt(e);--e);return e>=0&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},Uo._n=function(t,s,i){return Uo.Kh(t,0,255)|Uo.Kh(s,0,255)<<8|Uo.Kh(i,0,255)<<16};Uo.In=function(t,s,i,e){return(t=Uo.Kh(Math.floor(1024*t),-8192,8191))<0&&(t+=16384),(s=Uo.Kh(Math.floor(1024*s),-8192,8191))<0&&(s+=16384),(i=Uo.Kh(Math.floor(1024*i),-8192,8191))<0&&(i+=16384),-(16384*t*16384*1024+16384*s*1024+1024*i+(e=Uo.Kh(Math.floor(1023*e),0,1023)))},Uo.Cn=function(t,s,i){return Uo.In(t,s,i,1)},Uo.Rn=function(t){if(t>=0)return(255&t)/255;{let s=Math.floor(-t/274877906944);return s>8191&&(s-=16384),s/1024}},Uo.An=function(t){if(t>=0)return((65280&t)>>8)/255;{let s=Math.floor(-t%274877906944/16777216);return s>8191&&(s-=16384),s/1024}},Uo.Pn=function(t){if(t>=0)return((16711680&t)>>16)/255;{let s=Math.floor(-t%16777216/1024);return s>8191&&(s-=16384),s/1024}},Uo.En=function(t){return Vo(t)?0:t>=0?1:Math.floor(-t%1024)/1023},Uo.Fn=function(t,s){for(t=Math.floor(t),s=Math.floor(s);0!==s;){let i=s;s=t%s,t=i}return t};const Xo=[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]];Uo.Dn=function(t,s){if((t=Math.floor(t))===(s=Math.floor(s)))return[1,1];for(let i of Xo){let e=t/i[0]*i[1];if(Math.abs(s-e)<1)return i.slice(0);if(e=t/i[1]*i[0],Math.abs(s-e)<1)return[i[1],i[0]]}let i=Uo.Fn(t,s);return[t/i,s/i]},Uo.On=function(t,s,i,e,h,n,r,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,r),c=Math.max(h,r);if(l<u||a>c)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(n,o),m=Math.max(n,o);if(d<p||f>m)return!1;const g=h-t+r-i,y=n-s+o-e,w=i-t,S=e-s,b=r-h,v=o-n,M=Math.abs(S*b-v*w),G=b*y-v*g;if(Math.abs(G)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},Uo.kn=function(t,s,i,e,h,n,r,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(n<f||h>d)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||r>m)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),G=b*y-v*g;if(Math.abs(G)>M)return!1;const x=w*y-S*g;return Math.abs(x)<=M},Uo.Ln=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.Nn(),u=h.Bn(),c=h.Wn(),f=h.jn(),d=h.Vn(),p=h.Un(),m=h.Hn(),g=h.zn();return Uo.kn(t,s,i,e,n,r,o,a,l,u,c,f)||Uo.kn(t,s,i,e,n,r,o,a,c,f,d,p)||Uo.kn(t,s,i,e,n,r,o,a,d,p,m,g)||Uo.kn(t,s,i,e,n,r,o,a,m,g,l,u)},Uo.Jn=function(t,s,i,e,h){const n=Math.min(t,i),r=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e);let l=0;for(let u=h.length-4;l<=u;l+=2)if(Uo.kn(t,s,i,e,n,r,o,a,h[l],h[l+1],h[l+2],h[l+3]))return!0;return Uo.kn(t,s,i,e,n,r,o,a,h[l],h[l+1],h[0],h[1])};Uo.Xn=function(t,s,i,e,h,n,r,o){const a=i-t,l=o-n,u=a*l-(e-s)*(r-h);if(0===u)return 2;const c=((s-e)*(r-t)+a*(o-s))/u;return 0<c&&c<1.000001?(l*(r-t)+(h-r)*(o-s))/u:2},Uo.qn=function(t,s,i,e,h,n,r,o,a){const l=(r-h)*a,u=(o-n)*a;return Uo.Xn(t,s,i,e,h-l,n-u,r+l,o+u)},Uo.Yn=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return b>=0&&v>=0&&b+v<=1},Uo.$n=function(t,s,i,e,h,n,r,o){const a=h-i,l=n-e,u=r-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S;return[1-b-v,b,v]},Uo.Kn=function(t,s,i,e,h,n,r,o,a,l,u,c){return[t*e+s*r+i*l,t*h+s*o+i*u,t*n+s*a+i*c]}}{const qo=self._s;let Yo=null,$o="";if("undefined"!=typeof document){Yo=document;const ia=document.querySelector("base");$o=ia&&ia.hasAttribute("href")?ia.getAttribute("href"):"",$o&&($o.startsWith("/")&&($o=$o.substr(1)),$o.endsWith("/")||($o+="/"))}qo.Zn=function(){return $o},qo.Qn=function(){if(!Yo)return"";const t=Yo.location;return qo.tr(t.origin+t.pathname)+$o},qo.tr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},qo.sr=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},qo.ir=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},qo.er=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},qo.hr=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},qo.nr=function(t){return t.replace(/\\/g,"/")},qo.rr=function(t,s){return s===(t?qo.ir(t).slice(1):"")},qo.ar=function(t,s){let i,e;return qo.Se(t)&&(i=qo.hr(t.name)),qo.ae(t)&&(i=qo.hr(t)),qo.Se(s)&&(e=qo.hr(s.name)),qo.ae(s)&&(e=qo.hr(s)),i===e},qo.lr=function(t){t=qo.nr(t);let s=/^\w\:\//.exec(t);s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=t.replace(/\/{2,}/g,"/")).length>1&&"/"===t.slice(-1)&&(t=t.slice(0,-1));const i=t.lastIndexOf("/")+1;let e,h="",n=t,r="";i>0&&(h=t.slice(0,i),n=t.slice(i)),e=n;const o=n.lastIndexOf(".");return o>0&&(r=n.slice(o),e=n.slice(0,-r.length)),{dir:h,ur:n,name:e,root:s,ext:r,cr:s+h+n}},qo.dr=function(t,s){return new Promise((i,e)=>{self.setTimeout(i,t,s)})},qo.pr=function(t){try{t()}catch(t){qo.Os&&console.warn("Swallowed exception: ",t)}},qo.mr=function(){},qo.Ke=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},qo.gr=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},qo.yr=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},qo.wr=function(t,s){t.length=s},qo.Sr=function(t){t&&0!==t.length&&qo.wr(t,0)},qo.br=function(t){if(t){for(let s=0;s<t.length;s++){let i=t[s];qo.wr(i,0)}qo.wr(t,0)}},qo.vr=function(t,s,i){s|=0;const e=t.length;if(!(s<=e))for(let h=e;h<s;++h)t.push(i)},qo.Mr=function(t,s,i){s|=0;const e=t.length;s<e?qo.wr(t,s):s>e&&qo.vr(t,s,i)},qo.Gr=function(t,s){qo.Sr(t),qo.Fh(t,s)},qo.Fh=function(t,s){if(s.length<1e4)t.push(...s);else for(let i=0,e=s.length;i<e;++i)t.push(s[i])},qo.Tr=function(t,s){if((s=Math.floor(s))<0||s>=t.length)return;let i=t.length-1;for(let e=s;e<i;++e)t[e]=t[e+1];qo.wr(t,i)},qo._r=function(t,s){let i=t.indexOf(s);i>=0&&t.splice(i,1)},qo.Ir=function(t,s){let i=t.length;if(s.length!==i)return!1;for(let e=0;e<i;++e)if(t[e]!==s[e])return!1;return!0},qo.Cr=function(t,s){let i=[],e=0;for(let h=0,n=t.length;h<n;++h){let n=t[h];s(n)?i.push(n):(t[e]=n,++e)}return qo.wr(t,e),i},qo.Rr=function(t,s){const i=t.length;let e=0;for(let i=0,h=t.length;i<h;++i){let h=t[i];s.has(h)||(t[e++]=h)}return qo.wr(t,e),i-e},qo.Ar=function(t,s){return t===Math.floor(t)&&t>=0&&t<s.length},qo.Pr=function(t,s){if(!qo.Ar(t,s))throw new RangeError("array index out of bounds")},qo.Er=function(t){return t.slice()},qo.Fr=function(t,s){let i=[];for(let e of t)if(qo.me(e)){let t=s(e);if(!t)throw new Error("missing clone");if(t.constructor!==e.constructor)throw new Error("object is not a clone");i.push(t)}else qo.Ge(e)?i.push(qo.Fr(e,s)):i.push(e);return i},qo.Dr=function(t){let s=[];for(let i of t)s.push(i.slice());return s},qo.Or=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},qo.kr=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},qo.Lr=function(t,s){return t.union?t.union(s):new Set([...t,...s])},qo.Nr=function(t,s){for(const i of s)t.add(i);return t},qo.Br=function(t){for(let s of t)return s;return null},qo.xor=function(t,s){return!t!=!s},qo.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return t>i;case 5:return t>=i;default:return!1}},qo.Wr=function(t){for(let s in t)if(t.hasOwnProperty(s))return!0;return!1},qo.jr=function(t,s){return t.length?new Promise((i,e)=>{const h=[];let n=0,r=!1;for(let o=0,a=t.length;o<a;++o)h.push(void 0),t[o].then(e=>{r||(h[o]=e,++n,n===t.length?i(h):s(n,t.length))}).catch(t=>{r=!0,e(t)})}):Promise.resolve([])};let Ko=[];qo.Vr=function(t){Ko.push(t)},qo.Ur=function(){let t=0;for(let s of Ko)t+=s();return Math.floor(t)};let Zo=1;const Qo=new Map,ta=new MessageChannel;ta.port2.onmessage=function(t){const s=t.data,i=Qo.get(s);Qo.delete(s),i&&i(performance.now())},qo.Hr=function(t){const s=Zo++;return Qo.set(s,t),ta.port1.postMessage(s),s},qo.zr=function(t){Qo.delete(t)},qo.Jr=qo.Hr,qo.Xr=function(){return new Promise(t=>qo.Jr(t))};const sa=new Set;qo.qr=function(t){const s=self.requestAnimationFrame(async i=>{await qo.Xr(),sa.has(s)&&(sa.delete(s),t(i))});return sa.add(s),s},qo.Yr=function(t){sa.has(t)&&(self.cancelAnimationFrame(t),sa.delete(t))}}{const ea=self._s;ea.$r=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},ea.Kr=function(t){return!ea.$r(t)},ea.Zr=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} ${t.statusText}`)},ea.Qr=function(t,s){return fetch(t,s).then(t=>(ea.Zr(t),t))},ea.so=function(t){return ea.Qr(t).then(t=>t.text())},ea.io=function(t){return ea.Qr(t).then(t=>t.json())},ea.eo=function(t){return ea.Qr(t).then(t=>t.blob())},ea.ho=function(t){return ea.Qr(t).then(t=>t.arrayBuffer())},ea.no=function(t){return new Promise((s,i)=>{const e=new Image;e.onload=()=>s(e),e.onerror=t=>i(t),e.src=t})},ea.ro=function(t){return"function"==typeof t.arrayBuffer?t.arrayBuffer():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsArrayBuffer(t)})},ea.oo=function(t){return"function"==typeof t.text?t.text():new Promise((s,i)=>{const e=new FileReader;e.onload=()=>s(e.result),e.onerror=()=>i(e.error),e.readAsText(t)})},ea.ao=function(t){return ea.oo(t).then(t=>JSON.parse(t))},ea.lo=async function(t,s){let i=URL.createObjectURL(t);try{const t=await ea.no(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof t.decode&&await t.decode(),t}finally{i&&URL.revokeObjectURL(i)}},ea.uo=function(t,s){if("undefined"!=typeof document&&"function"==typeof document.createElement){const i=document.createElement("canvas");return i.width=t,i.height=s,i}return new OffscreenCanvas(t,s)},ea.co=function(t,s,i){if("number"!=typeof i&&(i=1),s=s||"image/png",i=ea.Kh(i,0,1),t.convertToBlob)return t.convertToBlob({type:s,quality:i});if(t.toBlob)return new Promise(e=>t.toBlob(e,s,i));throw new Error("could not convert canvas to blob")},ea.fo=function(t,s,i){const e=ea.uo(t.width,t.height);return e.getContext("2d").drawImage(t,0,0),ea.co(e,s,i)},ea.do=function(t,s,i){if(ea.Ai.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>ea.fo(t,s,i));if(ea.Ai.ImageBitmap)return createImageBitmap(t).then(t=>ea.fo(t,s,i));{const e=ea.uo(t.width,t.height);return e.getContext("2d").putImageData(t,0,0),ea.co(e,s,i)}},ea.po=function(t,s){t.clear();for(const i of s)t.add(i)},ea.mo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},ea.yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},ea.wo=function t(s){if("object"==typeof s&&null!==s){if(s instanceof Set)return{_c3type_:"set",data:[...s].map(s=>t(s))};if(s instanceof Map)return{_c3type_:"map",data:[...s].map(s=>[s[0],t(s[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(s))i[e]=t(h);return i}}return s},ea.So=function t(s){if("object"==typeof s&null!==s){if("set"===s._c3type_)return new Set(s.data.map(s=>t(s)));if("map"===s._c3type_)return new Map(s.data.map(s=>[s[0],t(s[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(s))i[e]=t(h);return i}}return s},ea.bo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?e>0&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},ea.vo=function(t){return"object"==typeof t&&"function"==typeof t.next},ea.Mo=function(t,s){const i=[];if("function"==typeof s)for(let e=0;e<t;++e)i.push(s());else for(let e=0;e<t;++e)i.push(s);return i}}{let ha=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},na=function(t,s,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};0;const ra=self._s,oa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,aa=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;ra.Go=class{constructor(t,s,i,e){this.xo=NaN,this.To=NaN,this._o=NaN,this.Io=NaN,this.xo=0,this.To=0,this._o=0,this.Io=0,t instanceof ra.Go?this.set(t):this.Co(t||0,s||0,i||0,e||0)}Ro(t,s,i){return this.xo=+t,this.To=+s,this._o=+i,this.Kh(),this}Co(t,s,i,e){return this.xo=+t,this.To=+s,this._o=+i,this.Io=+e,this.Kh(),this}set(t){return this.xo=t.xo,this.To=t.To,this._o=t._o,this.Io=t.Io,this}m(t){return this.set(t)}add(t){this.xo+=t.xo,this.To+=t.To,this._o+=t._o,this.Io+=t.Io,this.Kh()}Ao(t,s,i,e=0){this.xo+=+t,this.To+=+s,this._o+=+i,this.Io+=+e,this.Kh()}Po(t){this.Eo(Math.max(this.xo,t.xo)-Math.min(this.xo,t.xo)),this.Fo(Math.max(this.To,t.To)-Math.min(this.To,t.To)),this.Do(Math.max(this._o,t._o)-Math.min(this._o,t._o)),this.Oo(Math.max(this.Io,t.Io)-Math.min(this.Io,t.Io)),this.Kh()}ko(t){this.xo=t.xo,this.To=t.To,this._o=t._o}Eo(t){this.xo=ra.Kh(+t,0,1)}Lo(){return this.xo}Fo(t){this.To=ra.Kh(+t,0,1)}No(){return this.To}Do(t){this._o=ra.Kh(+t,0,1)}Bo(){return this._o}Oo(t){this.Io=ra.Kh(+t,0,1)}Wo(){return this.Io}clone(){return ra.zh(ra.Go,this.xo,this.To,this._o,this.Io)}toArray(){return[this.xo,this.To,this._o,this.Io]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.xo,t[s++]=this.To,t[s++]=this._o,t[s]=this.Io}Uo(t,s){const i=this.xo,e=this.To,h=this._o,n=this.Io;for(let r=0;r<4;++r)t[s++]=i,t[s++]=e,t[s++]=h,t[s++]=n}Ho(t,s){t[s++]=this.xo,t[s++]=this.To,t[s]=this._o}equals(t){return this.xo===t.xo&&this.To===t.To&&this._o===t._o&&this.Io===t.Io}zo(t){return this.xo===t.xo&&this.To===t.To&&this._o===t._o}Jo(t,s,i){return this.xo===t&&this.To===s&&this._o===i}Xo(t,s,i,e){return this.xo===t&&this.To===s&&this._o===i&&this.Io===e}qo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.To)&&t[s+2]===Math.fround(this._o)&&t[s+3]===Math.fround(this.Io)}Yo(t,s){return t[s]===Math.fround(this.xo)&&t[s+1]===Math.fround(this.To)&&t[s+2]===Math.fround(this._o)}multiply(t){this.xo*=t.xo,this.To*=t.To,this._o*=t._o,this.Io*=t.Io}$o(t){this.xo*=t,this.To*=t,this._o*=t,this.Io*=t}Ko(){return this.xo*=this.Io,this.To*=this.Io,this._o*=this.Io,this}Zo(){return this.xo/=this.Io,this.To/=this.Io,this._o/=this.Io,this}Kh(){return this.xo=ra.Kh(this.xo,0,1),this.To=ra.Kh(this.To,0,1),this._o=ra.Kh(this._o,0,1),this.Io=ra.Kh(this.Io,0,1),this}Qo(t){this.xo=ra.Rn(t),this.To=ra.An(t),this._o=ra.Pn(t),this.Io=ra.En(t)}ta(t,s,i){return`rgb(${100*(ra.Qi(t)?t:this.Lo())}%, ${100*(ra.Qi(s)?s:this.No())}%, ${100*(ra.Qi(i)?i:this.Bo())}%)`}sa(t,s,i,e){return`rgba(${100*(ra.Qi(t)?t:this.Lo())}%, ${100*(ra.Qi(s)?s:this.No())}%, ${100*(ra.Qi(i)?i:this.Bo())}%, ${ra.Qi(e)?e:this.Wo()})`}ia(){const t=Math.round(255*this.Lo()),s=Math.round(255*this.No()),i=Math.round(255*this.Bo());return"#"+ha(t.toString(16))+ha(s.toString(16))+ha(i.toString(16))}ea(t){if("string"!=typeof t)return!1;let s,i,e;if("#"===(t=t.trim()).charAt(0)&&(t=t.substr(1)),3===t.length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.Eo(s),isFinite(i)&&this.Fo(i),isFinite(e)&&this.Do(e),this.Oo(1),!0}ha(){return`${Math.round(255*this.Lo())}, ${Math.round(255*this.No())}, ${Math.round(255*this.Bo())}`}na(){return[Math.round(255*this.Lo()),Math.round(255*this.No()),Math.round(255*this.Bo())]}ra(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(h)&&this.Do(h),this.Oo(1),!0}oa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(h)&&this.Do(h),this.Oo(1),!0}aa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,n=parseFloat(s[3].trim());return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(h)&&this.Do(h),isFinite(n)&&this.Oo(n),!0}la(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,n=parseFloat(s[3].trim());return isFinite(i)&&this.Eo(i),isFinite(e)&&this.Fo(e),isFinite(h)&&this.Do(h),isFinite(n)&&this.Oo(n),!0}ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.oa(t):this.ra(t);if(t.startsWith("rgba("))return t.includes("%")?this.la(t):this.aa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.ca(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.oa(t):4===s.length&&this.la(t):3===s.length?this.ra(t):4===s.length&&this.aa(t)}}return this.ea(t)}toJSON(){return[this.xo,this.To,this._o,this.Io]}fa(t,s,i,e){let h,n,r;if(t%=360,s=ra.Kh(s,0,100),i=ra.Kh(i,0,100),e=ra.Kh(e,0,1),t/=360,i/=100,0==(s/=100))h=n=r=i;else{const e=i<.5?i*(1+s):i+s-i*s,o=2*i-e;h=na(o,e,t+1/3),n=na(o,e,t),r=na(o,e,t-1/3)}return this.Eo(h),this.Fo(n),this.Do(r),this.Oo(e),this}ca(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=oa.exec(s),e=aa.exec(s);return i&&4===i.length?(this.fa(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.fa(+i[1],+i[2],+i[3],+i[4]),0))}da(){const t=this.xo,s=this.To,i=this._o,e=this.Io;return`hsla(${ra.Go.pa(t,s,i)}, ${ra.Go.ma(t,s,i)}%, ${ra.Go.ga(t,s,i)}%, ${e})`}ya(){const t=this.xo,s=this.To,i=this._o;return[ra.Go.pa(t,s,i),ra.Go.ma(t,s,i),ra.Go.ga(t,s,i),this.Io]}wa(t){Array.isArray(t)&&(t.length<3||(this.xo=t[0],this.To=t[1],this._o=t[2],t.length>=4?this.Io=t[3]:this.Io=1))}set r(t){this.Eo(t)}get r(){return this.Lo()}set g(t){this.Fo(t)}get g(){return this.No()}set b(t){this.Do(t)}get b(){return this.Bo()}set a(t){this.Oo(t)}get a(){return this.Wo()}Sa(t,s){switch(t){case 0:this.Eo(s);break;case 1:this.Fo(s);break;case 2:this.Do(s);break;case 3:this.Oo(s);break;default:throw new RangeError("invalid color index")}}ba(t){switch(t){case 0:return this.Lo();case 1:return this.No();case 2:return this.Bo();case 3:return this.Wo();default:throw new RangeError("invalid color index")}}static va(t,s){let i,e;if(Array.isArray(t))i=new ra.Go,i.wa(t);else{if(!(t instanceof ra.Go))throw new Error("unexpected type");i=t}if(Array.isArray(s))e=new ra.Go,e.wa(s);else{if(!(s instanceof ra.Go))throw new Error("unexpected type");e=s}return i.equals(e)}static Ma(t,s){return ra.Kh(Math.max(t,s)-Math.min(t,s),0,1)}static Ga(t,s){const i=new ra.Go;return i.Eo(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Fo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i.Oo(Math.max(t.Io,s.Io)-Math.min(t.Io,s.Io)),i}static xa(t,s){const i=new ra.Go(0,0,0,1);return i.Eo(Math.max(t.xo,s.xo)-Math.min(t.xo,s.xo)),i.Fo(Math.max(t.To,s.To)-Math.min(t.To,s.To)),i.Do(Math.max(t._o,s._o)-Math.min(t._o,s._o)),i}static pa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let n=0;switch(e){case t:n=(s-i)/(e-h)+(s<i?6:0);break;case s:n=(i-t)/(e-h)+2;break;case i:n=(t-s)/(e-h)+4}return Math.round(n/6*360)}static ma(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const n=e-h,r=(e+h)/2>.5?n/(2-e-h):n/(e+h);return Math.round(100*r)}static ga(t,s,i){const e=Math.max(t,s,i),h=(e+Math.min(t,s,i))/2;return e?Math.round(100*h):0}},ra.Go.Ta=Object.freeze(ra.zh(ra.Go,1,1,1,1)),ra.Go._a=Object.freeze(ra.zh(ra.Go,0,0,0,1)),ra.Go.Ia=Object.freeze(ra.zh(ra.Go,0,0,0,0))}{const la=self._s;la.Ca=class{constructor(t,s){this.Ra=0,this.Aa=0,t instanceof la.Ca?this.m(t):this.set(t||0,s||0)}set(t,s){this.Ra=+t,this.Aa=+s}m(t){this.Ra=t.Ra,this.Aa=t.Aa}equals(t){return this.Ra===t.Ra&&this.Aa===t.Aa}Pa(t,s){return this.Ra===t&&this.Aa===s}qo(t,s){return t[s]===Math.fround(this.Ra)&&t[s+1]===Math.fround(this.Aa)}Ea(t){this.Ra=+t}Fa(){return this.Ra}Da(t){this.Aa=+t}Oa(){return this.Aa}toArray(){return[this.Ra,this.Aa]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Ra,t[s]=this.Aa}offset(t,s){this.Ra+=+t,this.Aa+=+s}scale(t,s){this.Ra*=t,this.Aa*=s}wt(t,s){this.Ra/=t,this.Aa/=s}round(){this.Ra=Math.round(this.Ra),this.Aa=Math.round(this.Aa)}floor(){this.Ra=Math.floor(this.Ra),this.Aa=Math.floor(this.Aa)}ceil(){this.Ra=Math.ceil(this.Ra),this.Aa=Math.ceil(this.Aa)}angle(){return la.rn(0,0,this.Ra,this.Aa)}ka(){return this.Ra*this.Ra+this.Aa*this.Aa}length(){return la.sn(this.Ra,this.Aa)}La(t,s){const i=this.Ra*s-this.Aa*t;this.Aa=this.Aa*s+this.Ra*t,this.Ra=i}rotate(t){0!==t&&this.La(Math.sin(t),Math.cos(t))}Na(t,s,i){0===t||s===this.Ra&&i===this.Aa||(this.Ra-=s,this.Aa-=i,this.La(Math.sin(t),Math.cos(t)),this.Ra+=+s,this.Aa+=+i)}move(t,s){0!==s&&(this.Ra+=Math.cos(t)*s,this.Aa+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.Ra/=t,this.Aa/=t)}Kh(t,s){this.Ra=la.Kh(this.Ra,t,s),this.Aa=la.Kh(this.Aa,t,s)}xt(t){return this.Ra*t.Ra+this.Aa*t.Aa}reverse(){this.Ra=-this.Ra,this.Aa=-this.Aa}Ba(){let t=this.Ra;return this.Ra=this.Aa,this.Aa=-t,this}}}{const ua=self._s;ua.Rect=class{constructor(t,s,i,e){this.Wa=NaN,this.ja=NaN,this.Va=NaN,this.Ua=NaN,this.Wa=0,this.ja=0,this.Va=0,this.Ua=0,t instanceof ua.Rect?this.m(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Wa=+t,this.ja=+s,this.Va=+i,this.Ua=+e}Ha(t,s,i,e){t=+t,s=+s,this.Wa=t,this.ja=s,this.Va=t+ +i,this.Ua=s+ +e}m(t){this.Wa=+t.Wa,this.ja=+t.ja,this.Va=+t.Va,this.Ua=+t.Ua}clone(){return new ua.Rect(this.Wa,this.ja,this.Va,this.Ua)}static za(t,s){const i=new ua.Rect;return i.Ja(Math.min(t.Wa,s.Wa)),i.Xa(Math.min(t.ja,s.ja)),i.qa(Math.max(t.Va,s.Va)),i.Ya(Math.max(t.Ua,s.Ua)),i}static $a(t){return new ua.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Wa===t.Wa&&this.ja===t.ja&&this.Va===t.Va&&this.Ua===t.Ua}Ka(t,s,i,e){return this.Wa===t&&this.ja===s&&this.width()===i&&this.height()===e}qo(t,s){return t[s]===Math.fround(this.Wa)&&t[s+1]===Math.fround(this.ja)&&t[s+2]===Math.fround(this.Va)&&t[s+3]===Math.fround(this.Ua)}Ja(t){this.Wa=+t}Za(){return this.Wa}Xa(t){this.ja=+t}Qa(){return this.ja}qa(t){this.Va=+t}tl(){return this.Va}Ya(t){this.Ua=+t}sl(){return this.Ua}toArray(){return[this.Wa,this.ja,this.Va,this.Ua]}jo(){return new Float64Array(this.toArray())}il(){return new DOMRect(this.Wa,this.ja,this.width(),this.height())}static el(t){return ua.zh(ua.Rect,t.left,t.top,t.right,t.bottom)}Vo(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s]=this.Ua}hl(t,s){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.ja,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=this.Wa,t[s]=this.Ua}nl(t,s,i){t[s++]=this.Wa,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.ja,t[s++]=i,t[s++]=this.Va,t[s++]=this.Ua,t[s++]=i,t[s++]=this.Wa,t[s++]=this.Ua,t[s]=i}width(){return this.Va-this.Wa}height(){return this.Ua-this.ja}rl(){return(this.Wa+this.Va)/2}ol(){return(this.ja+this.Ua)/2}offset(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va+=t,this.Ua+=s}offsetLeft(t){this.Wa+=+t}offsetTop(t){this.ja+=+t}al(t){this.Va+=+t}ll(t){this.Ua+=+t}ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.ja<this.Ua?this.Wa<this.Va?this.Ua=this.ja+this.width():this.Ua=this.ja-this.width():this.Wa<this.Va?this.Ua=this.ja-this.width():this.Ua=this.ja+this.width()}cl(t,s){t=+t,s=+s,this.Wa-=t,this.ja-=s,this.Va+=t,this.Ua+=s}fl(t,s){t=+t,s=+s,this.Wa+=t,this.ja+=s,this.Va-=t,this.Ua-=s}multiply(t,s){this.Wa*=t,this.ja*=s,this.Va*=t,this.Ua*=s}wt(t,s){this.Wa/=t,this.ja/=s,this.Va/=t,this.Ua/=s}dl(t){this.Wa=+t-this.Wa,this.Va=+t-this.Va}pl(t){this.ja=+t-this.ja,this.Ua=+t-this.Ua}ml(t,s){const i=this.width(),e=this.height(),h=this.Za()+i*t,n=this.Qa()+e*s;this.Ha(h-e*s,n-i*t,e,i)}gl(){const t=this.Wa;this.Wa=this.Va,this.Va=t}yl(){const t=this.ja;this.ja=this.Ua,this.Ua=t}wl(t){const s=this.ja;this.ja=+t-this.Ua,this.Ua=+t-s}round(){this.Wa=Math.round(this.Wa),this.ja=Math.round(this.ja),this.Va=Math.round(this.Va),this.Ua=Math.round(this.Ua)}Sl(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}bl(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}floor(){this.Wa=Math.floor(this.Wa),this.ja=Math.floor(this.ja),this.Va=Math.floor(this.Va),this.Ua=Math.floor(this.Ua)}ceil(){this.Wa=Math.ceil(this.Wa),this.ja=Math.ceil(this.ja),this.Va=Math.ceil(this.Va),this.Ua=Math.ceil(this.Ua)}Kh(t,s,i,e){this.Wa=Math.max(this.Wa,+t),this.ja=Math.max(this.ja,+s),this.Va=Math.min(this.Va,+i),this.Ua=Math.min(this.Ua,+e)}vl(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Wa=ua.Kh(this.Wa,t,i),this.ja=ua.Kh(this.ja,s,e),this.Va=ua.Kh(this.Va,t,i),this.Ua=ua.Kh(this.Ua,s,e)}normalize(){this.Wa>this.Va&&this.gl(),this.ja>this.Ua&&this.yl()}Ml(t){return!(t.Va<this.Wa||t.Ua<this.ja||t.Wa>this.Va||t.ja>this.Ua)}Gl(t,s,i){return!(t.Va+s<this.Wa||t.Ua+i<this.ja||t.Wa+s>this.Va||t.ja+i>this.Ua)}xl(t,s){return t>=this.Wa&&t<=this.Va&&s>=this.ja&&s<=this.Ua}Tl(t){return t.Wa>=this.Wa&&t.ja>=this.ja&&t.Va<=this.Va&&t.Ua<=this.Ua}_l(t){t.Wa<this.Wa&&(this.Wa=+t.Wa),t.ja<this.ja&&(this.ja=+t.ja),t.Va>this.Va&&(this.Va=+t.Va),t.Ua>this.Ua&&(this.Ua=+t.Ua)}Il(t){this.Wa=ua._t(t.Wa,t.Va,this.Wa),this.ja=ua._t(t.ja,t.Ua,this.ja),this.Va=ua._t(t.Wa,t.Va,this.Va),this.Ua=ua._t(t.ja,t.Ua,this.Ua)}}}{const ca=self._s;ca.Cl=class{constructor(t,s,i,e,h,n,r,o){this.Rl=NaN,this.Al=NaN,this.Pl=NaN,this.El=NaN,this.Fl=NaN,this.Dl=NaN,this.Ol=NaN,this.kl=NaN,this.Rl=0,this.Al=0,this.Pl=0,this.El=0,this.Fl=0,this.Dl=0,this.Ol=0,this.kl=0,t instanceof ca.Cl?this.m(t):this.set(t||0,s||0,i||0,e||0,h||0,n||0,r||0,o||0)}set(t,s,i,e,h,n,r,o){this.Rl=+t,this.Al=+s,this.Pl=+i,this.El=+e,this.Fl=+h,this.Dl=+n,this.Ol=+r,this.kl=+o}Ll(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}m(t){this.Rl=t.Rl,this.Al=t.Al,this.Pl=t.Pl,this.El=t.El,this.Fl=t.Fl,this.Dl=t.Dl,this.Ol=t.Ol,this.kl=t.kl}equals(t){return this.Rl===t.Rl&&this.Al===t.Al&&this.Pl===t.Pl&&this.El===t.El&&this.Fl===t.Fl&&this.Dl===t.Dl&&this.Ol===t.Ol&&this.kl===t.kl}Nl(t){this.Rl=+t}Nn(){return this.Rl}Bl(t){this.Al=+t}Bn(){return this.Al}Wl(t){this.Pl=+t}Wn(){return this.Pl}jl(t){this.El=+t}jn(){return this.El}Vl(t){this.Fl=+t}Vn(){return this.Fl}Ul(t){this.Dl=+t}Un(){return this.Dl}Hl(t){this.Ol=+t}Hn(){return this.Ol}zl(t){this.kl=+t}zn(){return this.kl}Jl(){return new DOMQuad(new DOMPoint(this.Rl,this.Al),new DOMPoint(this.Pl,this.El),new DOMPoint(this.Fl,this.Dl),new DOMPoint(this.Ol,this.kl))}static Xl(t){return ca.zh(ca.Cl,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.Rl,this.Al,this.Pl,this.El,this.Fl,this.Dl,this.Ol,this.kl]}jo(){return new Float64Array(this.toArray())}Vo(t,s){t[s++]=this.Rl,t[s++]=this.Al,t[s++]=this.Pl,t[s++]=this.El,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=this.Ol,t[s]=this.kl}ql(t,s,i){t[s++]=this.Rl,t[s++]=this.Al,t[s++]=i,t[s++]=this.Pl,t[s++]=this.El,t[s++]=i,t[s++]=this.Fl,t[s++]=this.Dl,t[s++]=i,t[s++]=this.Ol,t[s++]=this.kl,t[s]=i}offset(t,s){t=+t,s=+s,this.Rl+=t,this.Al+=s,this.Pl+=t,this.El+=s,this.Fl+=t,this.Dl+=s,this.Ol+=t,this.kl+=s}round(){this.Rl=Math.round(this.Rl),this.Al=Math.round(this.Al),this.Pl=Math.round(this.Pl),this.El=Math.round(this.El),this.Fl=Math.round(this.Fl),this.Dl=Math.round(this.Dl),this.Ol=Math.round(this.Ol),this.kl=Math.round(this.kl)}floor(){this.Rl=Math.floor(this.Rl),this.Al=Math.floor(this.Al),this.Pl=Math.floor(this.Pl),this.El=Math.floor(this.El),this.Fl=Math.floor(this.Fl),this.Dl=Math.floor(this.Dl),this.Ol=Math.floor(this.Ol),this.kl=Math.floor(this.kl)}ceil(){this.Rl=Math.ceil(this.Rl),this.Al=Math.ceil(this.Al),this.Pl=Math.ceil(this.Pl),this.El=Math.ceil(this.El),this.Fl=Math.ceil(this.Fl),this.Dl=Math.ceil(this.Dl),this.Ol=Math.ceil(this.Ol),this.kl=Math.ceil(this.kl)}Yl(t){this.Rl=t.Wa,this.Al=t.ja,this.Pl=t.Va,this.El=t.ja,this.Fl=t.Va,this.Dl=t.Ua,this.Ol=t.Wa,this.kl=t.Ua}$l(t,s){0===s?this.Yl(t):this.Kl(t,Math.sin(s),Math.cos(s))}Kl(t,s,i){const e=t.Wa*s,h=t.ja*s,n=t.Va*s,r=t.Ua*s,o=t.Wa*i,a=t.ja*i,l=t.Va*i,u=t.Ua*i;this.Rl=o-h,this.Al=a+e,this.Pl=l-h,this.El=a+n,this.Fl=l-r,this.Dl=u+n,this.Ol=o-r,this.kl=u+e}Zl(t){t.set(Math.min(this.Rl,this.Pl,this.Fl,this.Ol),Math.min(this.Al,this.El,this.Dl,this.kl),Math.max(this.Rl,this.Pl,this.Fl,this.Ol),Math.max(this.Al,this.El,this.Dl,this.kl))}xl(t,s){let i=this.Pl-this.Rl,e=this.El-this.Al;const h=this.Fl-this.Rl,n=this.Dl-this.Al,r=t-this.Rl,o=s-this.Al;let a=i*i+e*e,l=i*h+e*n,u=i*r+e*o;const c=h*h+n*n,f=h*r+n*o;let d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return p>=0&&m>0&&p+m<1||(i=this.Ol-this.Rl,e=this.kl-this.Al,a=i*i+e*e,l=i*h+e*n,u=i*r+e*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d,p>=0&&m>0&&p+m<1)}rl(){return(this.Rl+this.Pl+this.Fl+this.Ol)/4}ol(){return(this.Al+this.El+this.Dl+this.kl)/4}Ql(t,s,i,e){return!(!this.xl(t,s)&&!this.xl(i,e))||ca.Ln(t,s,i,e,this)}tu(t){let s=t.rl(),i=t.ol();if(this.xl(s,i))return!0;if(s=this.rl(),i=this.ol(),t.xl(s,i))return!0;const e=this.Rl,h=this.Al,n=this.Pl,r=this.El,o=this.Fl,a=this.Dl,l=this.Ol,u=this.kl;return ca.Ln(e,h,n,r,t)||ca.Ln(n,r,o,a,t)||ca.Ln(o,a,l,u,t)||ca.Ln(l,u,e,h,t)}su(){const t=this.Rl,s=this.Al;this.Rl=this.Pl,this.Al=this.El,this.Pl=this.Fl,this.El=this.Dl,this.Fl=this.Ol,this.Dl=this.kl,this.Ol=t,this.kl=s}iu(){this.eu(0,2),this.eu(1,3),this.eu(6,4),this.eu(7,5)}hu(){this.eu(0,6),this.eu(1,7),this.eu(2,4),this.eu(3,5)}nu(){this.eu(2,6),this.eu(3,7)}eu(t,s){const i=this.ru(t);this.ou(t,this.ru(s)),this.ou(s,i)}ru(t){switch(t){case 0:return this.Rl;case 1:return this.Al;case 2:return this.Pl;case 3:return this.El;case 4:return this.Fl;case 5:return this.Dl;case 6:return this.Ol;case 7:return this.kl;default:throw new RangeError("invalid quad point index")}}ou(t,s){switch(s=+s,t){case 0:this.Rl=s;break;case 1:this.Al=s;break;case 2:this.Pl=s;break;case 3:this.El=s;break;case 4:this.Fl=s;break;case 5:this.Dl=s;break;case 6:this.Ol=s;break;case 7:this.kl=s;break;default:throw new RangeError("invalid quad point index")}}wt(t,s){this.Rl/=t,this.Al/=s,this.Pl/=t,this.El/=s,this.Fl/=t,this.Dl/=s,this.Ol/=t,this.kl/=s}}}{const fa=self._s,da=(self.assert,[0,0,1,0,1,1,0,1]),pa=fa.zh(fa.Cl);fa.au=class extends fa.Uh{constructor(t,s=!0){super(),t||(t=da),this.lu=Float64Array.from(t),this.uu=new fa.Rect,this.cu=!0,this.fu=s}Jh(){}du(){return this.lu}pu(){return this.lu.length/2}mu(t){this.lu.length===t.length?this.lu.set(t):this.lu=Float64Array.from(t),this.cu=!0}gu(){this.mu(da)}m(t){this.mu(t.lu)}yu(){this.cu=!0}wu(){if(!this.cu)return;const t=this.lu;let s=t[0],i=t[1],e=s,h=i;for(let n=0,r=t.length;n<r;n+=2){const r=t[n],o=t[n+1];r<s&&(s=r),r>e&&(e=r),o<i&&(i=o),o>h&&(h=o)}this.uu.set(s,i,e,h),this.cu=!1}Yl(t,s,i){let e=this.lu;8!==e.length&&(e=new Float64Array(8),this.lu=e),e[0]=t.Za()-s,e[1]=t.Qa()-i,e[2]=t.tl()-s,e[3]=t.Qa()-i,e[4]=t.tl()-s,e[5]=t.sl()-i,e[6]=t.Za()-s,e[7]=t.sl()-i,this.uu.m(t),0===s&&0===i||this.uu.offset(-s,-i),this.cu=!1}Su(t,s,i){pa.m(t),pa.offset(s,i),this.mu(pa.toArray()),this.cu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.bu(t,s,e,h)}bu(t,s,i,e){const h=this.lu;for(let n=0,r=h.length;n<r;n+=2){const r=n+1,o=h[n]*t,a=h[r]*s;h[n]=o*e-a*i,h[r]=a*e+o*i}this.cu=!0}offset(t,s){const i=this.lu;for(let e=0,h=i.length;e<h;e+=2)i[e]+=t,i[e+1]+=s}xl(t,s){const i=this.lu;if(t===i[0]&&s===i[1])return!0;this.wu();const e=this.uu,h=e.Za()-110,n=e.Qa()-101,r=e.tl()+131,o=e.sl()+120;let a=0,l=0,u=0,c=0,f=0,d=0,p=0,m=0;h<t?(a=h,u=t):(a=t,u=h),n<s?(l=n,c=s):(l=s,c=n),r<t?(f=r,p=t):(f=t,p=r),o<s?(d=o,m=s):(d=s,m=o);let g=0,y=0;for(let e=0,w=i.length;e<w;e+=2){const S=(e+2)%w,b=i[e],v=i[e+1],M=i[S],G=i[S+1];fa.kn(h,n,t,s,a,u,l,c,b,v,M,G)&&++g,fa.kn(r,o,t,s,f,p,d,m,b,v,M,G)&&++y}return g%2==1||y%2==1}vu(t,s,i){const e=t.lu,h=this.lu;if(this.xl(e[0]+s,e[1]+i))return!0;if(t.xl(h[0]-s,h[1]-i))return!0;for(let t=0,n=h.length;t<n;t+=2){const r=(t+2)%n,o=h[t],a=h[t+1],l=h[r],u=h[r+1];let c=0,f=0,d=0,p=0;o<l?(c=o,d=l):(c=l,d=o),a<u?(f=a,p=u):(f=u,p=a);for(let t=0,h=e.length;t<h;t+=2){const n=(t+2)%h,r=e[t]+s,m=e[t+1]+i,g=e[n]+s,y=e[n+1]+i;if(fa.kn(o,a,l,u,c,d,f,p,r,m,g,y))return!0}}return!1}Ql(t,s,i,e,h,n){if(this.xl(i-t,e-s))return!0;if(this.xl(h-t,n-s))return!0;let r=0,o=0,a=0,l=0;i<h?(r=i,a=h):(r=h,a=i),e<n?(o=e,l=n):(o=n,l=e);const u=this.lu;for(let c=0,f=u.length;c<f;c+=2){const d=(c+2)%f,p=u[c]+t,m=u[c+1]+s,g=u[d]+t,y=u[d+1]+s;if(fa.kn(i,e,h,n,r,a,o,l,p,m,g,y))return!0}return!1}iu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2)s[i]=2*t-s[i];this.cu=!0}hu(t){const s=this.lu;for(let i=0,e=s.length;i<e;i+=2){const e=i+1;s[e]=2*t-s[e]}this.cu=!0}nu(){const t=this.lu;for(let s=0,i=t.length;s<i;s+=2){const i=s+1,e=t[s];t[s]=t[i],t[i]=e}this.cu=!0}Mu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i];return s/this.pu()}Gu(){const t=this.lu;let s=0;for(let i=0,e=t.length;i<e;i+=2)s+=t[i+1];return s/this.pu()}xu(){return this.lu}Tu(){return this.pu()}_u(){return this.fu}}}{const ma=self._s;ma.Iu=class extends ma.Uh{constructor(t){if(super(),this.Cu=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Jh(){this.Ru(),this.Cu=null}Au(){return 0===this.Cu.size}Ru(){const t=this.Cu;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){const e=this.Cu;let h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}zs(t,s){const i=this.Cu.get(t);return i?i.get(s):i}Hs(t,s){const i=this.Cu.get(t);return!!i&&i.has(s)}Pu(t,s){const i=this.Cu,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}Eu(t){const s=this.Cu,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[i,e]of s.entries())e.delete(t)&&0===e.size&&s.delete(i)}Fu(){let t=0;for(const s of this.Cu.values())t+=s.size;return t}*values(){for(const t of this.Cu.values())yield*t.values()}*Du(){for(const[t,s]of this.Cu.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Cu.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const ga=self._s;ga.Ou=class extends ga.Uh{constructor(){super(),this.ku=new Set,this.Lu=[],this.Nu=!1}Jh(){this.Ru()}Ru(){this.ku.clear(),ga.Sr(this.Lu),this.Nu=!1}Bu(t){this.ku.has(t)||(this.ku.add(t),this.Nu||this.Lu.push(t))}Hs(t){return this.ku.has(t)}Pu(t){this.ku.delete(t)&&(this.Nu=!0)}Fu(){return this.ku.size}Au(){return 0===this.ku.size}Wu(){return this.Nu&&(this.ju(),this.Nu=!1),this.Lu}ju(){const t=this.Lu;ga.Sr(t);for(const s of this.ku)t.push(s)}}}{const ya=self._s,wa=new Map,Sa=new Map,ba=new Map,va=new Map,Ma=new Map,Ga=new Map,xa=new Map,Ta=new Map,_a=new Map;_a.set("linear","noease"),_a.set("default","noease");const Ia=["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"],Ca=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Ra=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]);self.Vu=class t{constructor(){}static Uu(){return"default"}static Hu(){return"noease"}static zu(t){return Ra.get(t)}static Ju(s,...i){let e,h;this.Xu(),s?(ba.has(s)||ba.set(s,new Map),e=ba.get(s),h=[...e.keys()].filter(i=>!t.qu(i,s)||t.qu(i,s).transition.Yu())):(e=Ma,h=[...e.keys()]);const n=h.sort();return[...Sa.keys()].concat(n).filter(t=>!i.includes(t))}static $u(){this.Xu();const t=[...Ma.keys()];return t.sort(),[...Sa.keys()].concat(t)}static Ku(){this.Xu();const t=[...Ma.keys()];return t.sort(),t}static Zu(t){for(const s of Ia)if(self.lang(`ui.bars.timeline.eases.${s}`)===t)return!0;for(const s of Ca)if(self.lang(`ui.bars.timeline.short-eases.${s}`)===t)return!0}static Qu(t){return this.Xu(),[...Sa.keys()].includes(t)}static tc(s){const i=_a.get(s);return i?wa.get(i):t.Qu(s)?wa.get(s):xa.has(s)?xa.get(s):void 0}static sc(t){return this.Xu(),Ta.get(t)}static ec(s,i){this.Xu();const e=t.tc(s);if(e)return e;if(!i)throw new Error("missing ease function");return ba.get(i).get(s)}static qu(t,s){this.Xu();const i=va.get(s);if(i)return i.get(t)}static hc(s,i){return this.Xu(),!!t.tc(s)||!!ba.get(i).get(s)}static nc(s){this.Xu();return t.tc(s)||Ma.get(s)}static rc(t){return this.Xu(),Ga.get(t)}static oc(t){return this.Xu(),this.$u()[t]}static ac(t,s){return this.Xu(),this.Ju(s).indexOf(t)}static lc(t){return this.ac(t)}static Xu(){0===wa.size&&(this.uc("default",()=>{}),this.uc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.uc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.uc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.uc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.uc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.uc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.uc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.uc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.uc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.uc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.uc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.uc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.uc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.uc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.uc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.uc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.uc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.uc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.uc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.uc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.uc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.uc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.uc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.uc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.uc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.uc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.cc("cubicbezier",this.fc),this.cc("spline",this.dc))}static uc(s,i,e=!1){if("function"==typeof i)t.mc(s,i,"predefined");else{if(!ya.Ge(i))throw new Error("unexpected arguments");if(self.yc){const h=ya.zh(self.yc,s,e);h.wc(i),t.mc(s,(t,s,i,e)=>h.Sc(t,s,i,e),"predefined"),Ta.set(s,h)}else{const h=ya.zh(ya.bc,[s,i.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);h.vc(e),t.mc(s,(t,s,i,e)=>h.Sc(t,s,i,e),"predefined")}}}static cc(s,i){t.mc(s,i,"private")}static Mc(s,i,e,h){this.Xu(),t.mc(s,i,"custom",e,h)}static Gc(t,s){if(this.Qu(t))return;if([...xa.keys()].includes(t))return;const i=ba.get(s);i&&i.delete(t);const e=va.get(s);e&&e.delete(t)}static mc(t,s,i,e,h){switch(i){case"predefined":wa.set(t,s),Sa.set(t,s);break;case"custom":e?(ba.has(e)||ba.set(e,new Map),va.has(e)||va.set(e,new Map),ba.get(e).set(t,s),va.get(e).set(t,h)):(Ma.set(t,s),Ga.set(t,h));break;case"private":wa.set(t,s),xa.set(t,s);break;default:throw new Error("unexpected ease mode")}}static xc(t,s,i,e){return 0===e?s:i*t/e+s}static fc(t,s,i,e,h){return s+3*t*(i-s)+3*t**2*(s+e-2*i)+t**3*(h-s+3*i-3*e)}static dc(t,s,i,e,h,n,r,o,a,l){if(e===h&&n===r)return t;const u=La(t,s,e,n,o,l),c=Ea(i,h,r,a),f=Fa(i,h,r,a),d=Da(i,h,r,a);return Oa(u,c,f,d)}static Tc(t,s,i,e){const h=[],n=Ea(t,s,i,e),r=Fa(t,s,i,e),o=Da(t,s,i,e);for(let t=0;t<Aa;++t){const s=Oa(t*Pa,n,r,o);h.push(s)}return h}};const Aa=11,Pa=1/(Aa-1),Ea=(t,s,i,e)=>e-3*i+3*s-t,Fa=(t,s,i,e)=>3*i-6*s+3*t,Da=(t,s,i,e)=>3*(s-t),Oa=(t,s,i,e)=>((s*t+i)*t+e)*t,ka=(t,s,i,e)=>3*s*t*t+2*i*t+e,La=(t,s,i,e,h,n)=>{if(1==t)return 1;let r=0,o=1,a=n[o],l=Aa-1;for(n[Aa-1];o!=l&&a<=t;)o++,a=n[o],r+=Pa;o--,a=n[o];let u=r+(t-a)/(n[o+1]-a)*Pa;const c=Ea(s,i,e,h),f=Fa(s,i,e,h),d=Da(s,i,e,h),p=ka(u,c,f,d);if(0===p)return u;if(p>=.01){for(let s=0;s<4;++s)u-=(Oa(u,c,f,d)-t)/ka(u,c,f,d);return u}{let s,i,e=r,h=r+Pa,n=0;do{u=e+(h-e)/2;let r=Oa(u,c,f,d)-t;r>0?h=u:e=u,s=Math.abs(r)>1e-7,i=++n<10}while(s&&i);return u}}}{let Na=function(t){Ba.ae(t)};0;const Ba=self._s;Ba._c=class{constructor(t){this.Ic=[],this.Yh=t||"",this.Cc=0}Jh(){this.Ru(),this.Ic=null}Rc(){return this.Yh}Ru(){Ba.br(this.Ic),this.Cc=0}Ac(){return this.Cc}Pc(t=Math.random()*this.Ac()){let s=0;for(const[i,e]of this.Ic)if(s+=i,t<s)return e;return 0}Ec(){return!!this.Ic.length}Fc(t,s){Na(s),this.Cc+=t,this.Ic.push([t,s])}Dc(t,s){Na(s);const i=0===t;for(let e=0;e<this.Ic.length;e++){const h=this.Ic[e],n=i||h[0]===t,r=h[1]===s;if(n&&r){this.Ic.splice(e,1),this.Cc-=h[0];break}}}Oc(){return JSON.stringify(this.Ic)}static kc(t,s){const i=new Ba._c(s),e=JSON.parse(t);for(const t of e){const s=t[0],e=t[1];i.Fc(s,e)}return i}}}{const Wa=self._s;let ja=0;Wa.Lc=class{constructor(t,s){this.Nc=t,this.Bc=s,this.Wc=ja++,this.Nc.jc("runtime","screen-reader-text",{type:"create",id:this.Wc,text:this.Bc})}Jh(){this.Nc.jc("runtime","screen-reader-text",{type:"release",id:this.Wc}),this.Nc=null,this.Bc="",this.Wc=-1}Vc(t){this.Bc!==t&&(this.Bc=t,this.Nc.jc("runtime","screen-reader-text",{type:"update",id:this.Wc,text:this.Bc}))}}}self._s.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Uc=!1,this.Hc=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Hc)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Uc=!0}};{const Va=self._s;self.assert;Va.Event.zc=class extends Va.Uh{constructor(t){super(),this.Jc=t,this.Xc=[],this.qc=new Set,this.Yc=[],this.$c=new Set,this.Kc=0,this.Zc=[]}Jh(){this.Kc>0||(Va.Sr(this.Xc),this.qc.clear(),Va.Sr(this.Yc),this.$c.clear(),Va.Sr(this.Zc),Va.Jh(this))}Qc(t,s){if(this.tf())this.Zc.push({sf:"add",if:t,capture:s});else if(s){if(this.qc.has(t))return;this.Xc.push(t),this.qc.add(t)}else{if(this.$c.has(t))return;this.Yc.push(t),this.$c.add(t)}}ef(t,s){this.tf()?this.Zc.push({sf:"remove",if:t,capture:s}):s?this.qc.has(t)&&(this.qc.delete(t),Va._r(this.Xc,t)):this.$c.has(t)&&(this.$c.delete(t),Va._r(this.Yc,t))}hf(){return!this.Xc.length&&!this.Yc.length}tf(){return this.Kc>0}nf(){const t=new Set,s=new Set;for(const i of this.Zc)if("add"===i.sf)this.Qc(i.if,i.capture),i.capture?s.delete(i.if):t.delete(i.if);else{if("remove"!==i.sf)throw new Error("invalid op");i.capture?(this.qc.delete(i.if),s.add(i.if)):(this.$c.delete(i.if),t.add(i.if))}Va.Rr(this.Yc,t),Va.Rr(this.Xc,s),Va.Sr(this.Zc)}rf(t){this.af();let s=!1;for(let i=0,e=this.Xc.length;i<e;++i)if(this.Xc[i](t),t.Uc){s=!0;break}if(!s)for(let s=0,i=this.Yc.length;s<i&&(this.Yc[s](t),!t.Uc);++s);return this.lf(),!t.defaultPrevented}uf(t){this.af();for(let s=0,i=this.Xc.length;s<i;++s)this.Xc[s](t);for(let s=0,i=this.Yc.length;s<i;++s)this.Yc[s](t);return this.lf(),!0}af(){this.Kc++}lf(){this.Kc--,0===this.Kc&&this.Zc.length>0&&this.nf()}cf(t){t?this.af():this.lf()}ff(t){let s=[];for(let i=0,e=this.Xc.length;i<e;++i){let e=this.Xc[i];s.push(Va.df(()=>e(t)))}for(let i=0,e=this.Yc.length;i<e;++i){let e=this.Yc[i];s.push(Va.df(()=>e(t)))}return Promise.all(s).then(()=>!t.defaultPrevented)}pf(t){const s=[];this.af();for(let i=0,e=this.Xc.length;i<e;++i){const e=this.Xc[i](t);e instanceof Promise&&s.push(e)}for(let i=0,e=this.Yc.length;i<e;++i){const e=this.Yc[i](t);e instanceof Promise&&s.push(e)}return this.lf(),s.length?Promise.all(s).then(()=>!t.defaultPrevented):!t.defaultPrevented}async mf(t){return await this.pf(t)}async gf(t){this.af();for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);i instanceof Promise&&await i}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);i instanceof Promise&&await i}return this.lf(),!t.defaultPrevented}*yf(t){this.af();for(let s=0,i=this.Xc.length;s<i;++s){const i=this.Xc[s](t);Va.vo(i)&&(yield*i)}for(let s=0,i=this.Yc.length;s<i;++s){const i=this.Yc[s](t);Va.vo(i)&&(yield*i)}this.lf()}}}{const Ua=self._s;Ua.Event.wf=class extends Ua.Uh{constructor(){super(),this.Sf=new Map,this.bf=!1}Jh(){if(this.bf)throw new Error("already released");this.vf(),this.bf=!0,Ua.Jh(this)}Xh(){return this.bf}vf(){if(this.Sf){for(let t of this.Sf.values())t.Jh();this.Sf.clear()}}Mf(t,s){let i=this.Sf.get(t);return i||(s?(i=Ua.zh(Ua.Event.zc,t),this.Sf.set(t,i),i):null)}Gf(t){return this.Sf.has(t)}addEventListener(t,s,i){this.Mf(t,!0).Qc(s,!!i)}removeEventListener(t,s,i){let e=this.Mf(t,!1);e&&(e.ef(s,!!i),e.hf()&&this.Sf.delete(t))}dispatchEvent(t){const s=this.Mf(t.type,!1);return!s||(t.cancelable?s.rf(t):s.uf(t))}xf(t){const s=this.Mf(t.type,!1);return s?(t.Hc=!0,s.ff(t)):Promise.resolve(!0)}async Tf(t){const s=this.Mf(t.type,!1);if(!s)return!0;this.Sf.delete(t.type),t.Hc=!0;const i=await s.ff(t);return s.Jh(),i}async _f(t){const s=this.Mf(t.type,!1);return!s||await s.mf(t)}If(t){const s=this.Mf(t.type,!1);return!s||s.pf(t)}async Cf(t){const s=this.Mf(t.type,!1);return!s||await s.gf(t)}Rf(t){const s=this.Mf(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.yf(t)}cf(t){for(const s of this.Sf.values())s.cf(t)}}}{let Ha=function(t){$a=qa&&0===Ka?requestIdleCallback(za,{timeout:35}):setTimeout(za,Ka>0?1:t)},za=function(t){if($a=-1,!Ya.length)return;let s=performance.now(),i=s,e=0,h=0;do{Ja(Ya.shift()),i=performance.now(),++e,h=(i-s)/e*1.1}while(Ya.length&&(qa&&0===Ka&&void 0!==t?h<t.timeRemaining():i-s+h<12));if(-1===$a&&Ya.length){let t=i-s;Ha(Math.max(16-t,4))}},Ja=function(t){let s;try{s=t.if()}catch(s){return void t.reject(s)}t.resolve(s)};0;const Xa=self._s,qa="undefined"!=typeof requestIdleCallback;let Ya=[],$a=-1,Ka=0,Za=Xa.qs.Hs("disable-asyncify");Za&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),Xa.df=function(t){let s=null;return Xa.Os&&(s=Xa.Ki()),new Promise((i,e)=>{Ya.push({if:t,resolve:i,reject:e,stack:s}),Za?Ja(Ya.pop()):-1===$a&&Ha(16)})},Xa.df.Af=function(t){if(t)++Ka;else if(--Ka,Ka<0)throw new Error("already turned off high throughput mode")}}{let Qa=function(){il=-1},tl=function(){el=-1,hl=-1;let t=Date.now();for(let s of nl)if(s.Pf(t)){let t=s.Ef();(-1===hl||t<hl)&&(hl=t)}else nl.delete(s);if(-1!==hl){let s=Math.max(hl-t+100,1e3);el=self.setTimeout(tl,s)}};0;const sl=self._s;let il=-1;sl.Ff=function(){return-1===il&&(il=Date.now(),self.setTimeout(Qa,16)),il};let el=-1,hl=-1,nl=new Set;sl.Df=class{constructor(t,s){this.Of=t,this.kf=1e3*s,this.Lf=0,this.Nf=!1}Bf(){let t=sl.Ff();this.Lf=t+this.kf,this.Nf||(nl.add(this),this.Nf=!0),-1===el?(hl=this.Lf,el=self.setTimeout(tl,this.kf+100)):this.Lf<hl&&hl>t+1e3&&(self.clearTimeout(el),hl=this.Lf,el=self.setTimeout(tl,this.kf+100))}Pf(t){return!(t>=this.Lf&&(this.Of()?(this.Lf=t+this.kf,0):(this.Nf=!1,1)))}Ef(){return this.Lf}Wf(){this.Nf&&(nl.delete(this),this.Nf=!1,0===nl.size&&-1!==el&&(self.clearTimeout(el),el=-1,hl=-1))}Jh(){this.Wf(),this.Of=null}}}{const rl=self._s;rl.jf=class t{constructor(t){this.Vf=!1,this.Uf=t}Hf(){this.Vf||(this.Vf=!0,this.Uf&&(this.Uf(),this.Uf=null))}zf(){return this.Vf}Jh(){this.Hf()}static Jh(s){return new t(()=>s.Jh())}static Jf(t,s,i,e,h){if("string"!=typeof s&&!Array.isArray(s))throw new TypeError("expected string or array");if(null==e)e=!1;else if("boolean"!=typeof e&&"object"!=typeof e)throw new TypeError("invalid event listener options");if(h&&(i=i.bind(h)),Array.isArray(s)||s.includes(" ")){"string"==typeof s&&(s=s.split(" "));const h=new rl.Xf;for(const n of s)t.addEventListener(n,i,e),h.Bu(rl.zh(rl.jf,()=>t.removeEventListener(n,i,e)));return h}return t.addEventListener(s,i,e),rl.zh(rl.jf,()=>t.removeEventListener(s,i,e))}},rl.qf=class extends rl.jf{Yf(t){this.Uf=t}},rl.Xf=class extends rl.jf{constructor(...t){super(),this.$f=new Set;for(let s of t)this.Bu(s)}Bu(...t){if(this.Vf)throw new Error("already disposed");for(let s of t)this.$f.add(s)}Kf(t){if(this.Vf)throw new Error("already disposed");this.$f.delete(t)}Zf(){if(this.Vf)throw new Error("already disposed");if(this.$f){for(let t of this.$f)t.Hf();this.$f.clear()}}zf(){return this.Vf}Hf(){if(this.Vf)throw new Error("already disposed");this.Vf=!0;for(let t of this.$f)t.Hf();this.$f.clear(),this.$f=null}Jh(){this.Hf()}}}{const ol=self._s;ol.Qf=class extends ol.Uh{constructor(){super(),this.td=0,this.Aa=0,this.sd=0,this.ed=0}Bu(t){t=+t,this.Aa=t-this.td,this.sd=this.ed+this.Aa,this.td=this.sd-this.ed-this.Aa,this.ed=this.sd}hd(t){this.ed-=+t}zs(){return this.ed}Bf(){this.td=0,this.Aa=0,this.sd=0,this.ed=0}Set(t){this.td=0,this.Aa=0,this.sd=0,this.ed=+t}nd(t){this.td=t.td,this.Aa=t.Aa,this.sd=t.sd,this.ed=t.ed}Jh(){}}}{const al=self._s,ll={},ul=!0;ll.rd=function(t){this.od=t,this.right=this.od.ad,this.left=this.od.ad,this.parent=null,this.color=!1,this.key=null},ll.ld=function(t){this.size=0,this.ad=new ll.rd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad,this.compare=t||this.ud},ll.ld.prototype.ud=function(t,s){return t<s?-1:s<t?1:0},ll.ld.prototype.clone=function(){var t=new ll.ld(this.compare);return t.fd(this),t},ll.ld.prototype.clear=function(){this.size=0,this.ad=new ll.rd(this),this.ad.color=!1,this.root=this.ad,this.root.parent=this.ad},ll.ld.prototype.dd=function(t){var s=t.right;t.right=s.left,s.left!=this.ad&&(s.left.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,s.left=t,t.parent=s},ll.ld.prototype.pd=function(t){var s=t.left;t.left=s.right,s.right!=this.ad&&(s.right.parent=t),s.parent=t.parent,t.parent==this.ad?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,s.right=t,t.parent=s},ll.ld.prototype.md=function(t){if(this.contains(t))this.gd(t).key=t;else{var s=new ll.rd(this);s.key=t;for(var i=this.ad,e=this.root;e!=this.ad;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;s.parent=i,i==this.ad?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.ad,s.right=this.ad,s.color=ul,this.yd(s),this.size++}},ll.ld.prototype.yd=function(t){for(;t!=this.ad&&t!=this.root&&t.parent.color==ul;){var s;t.parent==t.parent.parent.left?(s=t.parent.parent.right).color==ul?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ul,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.dd(t)),t.parent.color=!1,t.parent.parent.color=ul,t.parent.parent!=this.ad&&this.pd(t.parent.parent)):(s=t.parent.parent.left).color==ul?(t.parent.color=!1,s.color=!1,t.parent.parent.color=ul,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.pd(t)),t.parent.color=!1,t.parent.parent.color=ul,t.parent.parent!=this.ad&&this.dd(t.parent.parent))}this.root.color=!1},ll.ld.prototype.wd=function(t){var s,i;(i=(s=t.left==this.ad||t.right==this.ad?t:this.Sd(t)).left!=this.ad?s.left:s.right).parent=s.parent,s.parent==this.ad?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.bd(i),this.size--},ll.ld.prototype.bd=function(t){for(;t!=this.root&&0==t.color;){var s;t==t.parent.left?((s=t.parent.right).color==ul&&(s.color=!1,t.parent.color=ul,this.dd(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=ul,t=t.parent):(0==s.right.color&&(s.left.color=!1,s.color=ul,this.pd(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.dd(t.parent),t=this.root)):((s=t.parent.left).color==ul&&(s.color=!1,t.parent.color=ul,this.pd(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=ul,t=t.parent):(0==s.left.color&&(s.right.color=!1,s.color=ul,this.dd(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.pd(t.parent),t=this.root))}t.color=!1},ll.ld.prototype.remove=function(t){var s=this.gd(t);if(s!=this.ad){var i=s.key;return this.wd(s),i}return null},ll.ld.prototype.vd=function(t,s){this.remove(s)},ll.ld.prototype.min=function(t){for(;t.left!=this.ad;)t=t.left;return t},ll.ld.prototype.max=function(t){for(;t.right!=this.ad;)t=t.right;return t},ll.ld.prototype.Sd=function(t){if(t.right!=this.ad)return this.min(t.right);for(var s=t.parent;s!=this.ad&&t==s.right;)t=s,s=s.parent;return s},ll.ld.prototype.Md=function(t){if(t.left!=this.ad)return this.max(t.left);for(var s=t.parent;s!=this.ad&&t==s.left;)t=s,s=s.parent;return s},ll.ld.prototype.Gd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.right!=this.ad)return this.min(s.right).key;for(var i=s.parent;i!=this.ad&&s==i.right;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ll.ld.prototype.xd=function(t){if(this.size>0){var s=this.gd(t);if(s==this.ad)return null;if(s.left!=this.ad)return this.max(s.left).key;for(var i=s.parent;i!=this.ad&&s==i.left;)s=i,i=i.parent;return i!=this.ad?i.key:null}return null},ll.ld.prototype.Td=function(){return this.min(this.root).key},ll.ld.prototype._d=function(){return this.max(this.root).key},ll.ld.prototype.gd=function(t){for(var s=this.root;s!=this.ad&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},ll.ld.prototype.contains=function(t){return null!=this.gd(t).key},ll.ld.prototype.getValues=function(){var t=[];return this.forEach(function(s){t.push(s)}),t},ll.ld.prototype.fd=function(t){if("array"==ll.Id(t))for(var s=0;s<t.length;s++)this.md(t[s]);else if("function"==ll.Id(t.forEach))t.forEach(this.md,this);else if("function"==ll.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.md(i[s])}else if("object"==ll.Id(t))for(var e in t)this.md(t[e])},ll.ld.prototype.Cd=function(t){if("array"==ll.Id(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==ll.Id(t.forEach))t.forEach(this.vd,this);else if("function"==ll.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)this.remove(i[s])}else if("object"==ll.Id(t))for(var e in t)this.remove(t[e])},ll.ld.prototype.Rd=function(t){if("array"==ll.Id(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==ll.Id(t.forEach))return t.every(this.contains,this);if("function"==ll.Id(t.getValues)){var i=t.getValues();for(s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==ll.Id(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},ll.ld.prototype.range=function(t,s){var i=[];return this.Ad(function(t){i.push(t)},t,s),i},ll.ld.prototype.Pd=function(t,s){if(!this.Ed())for(var i=this.min(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Sd(i)}},ll.ld.prototype.Fd=function(t,s,i){if(!this.Ed())for(var e=this.gd(s);e!=this.ad;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},ll.ld.prototype.traverseTo=function(t,s,i){if(!this.Ed())for(var e=this.min(this.root),h=this.gd(s);e!=h;){if(t.call(i,e.key,this))return;e=this.Sd(e)}},ll.ld.prototype.Ad=function(t,s,i,e){if(!this.Ed())for(var h=this.gd(s),n=this.gd(i);h!=n;){if(t.call(e,h.key,this))return;h=this.Sd(h)}},ll.ld.prototype.Dd=function(t,s){if(!this.Ed())for(var i=this.max(this.root);i!=this.ad;){if(t.call(s,i.key,this))return;i=this.Md(i)}},ll.ld.prototype.forEach=function(t,s){if(!this.Ed())for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.call(s,i.key,i.key,this)},ll.ld.prototype.some=function(t,s){if(this.Ed())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},ll.ld.prototype.every=function(t,s){if(this.Ed())return!1;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},ll.ld.prototype.map=function(t,s){var i=[];if(this.Ed())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))i.push(t.call(s,e.key,e.key,this));return i},ll.ld.prototype.filter=function(t,s){var i=[];if(this.Ed())return i;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},ll.ld.prototype.Od=function(){return this.size},ll.ld.prototype.Ed=function(){return 0==this.size},ll.ld.prototype.isSubsetOf=function(t){var s=ll.Od(t);if(this.Od()>s)return!1;var i=0;if(this.Ed())return!0;for(var e=this.min(this.root);e!=this.ad;e=this.Sd(e))ll.contains.call(t,t,e.key)&&i++;return i==this.Od()},ll.ld.prototype.intersection=function(t){var s=new ll.ld(this.compare);if(this.Ed())return s;for(var i=this.min(this.root);i!=this.ad;i=this.Sd(i))t.contains.call(t,i.key,i.key,this)&&s.md(i.key);return s},al.ld=class extends al.Uh{constructor(t){super(),this.kd=new ll.ld(t),this.Ld=!1,this.Nd=new Set,this.Bd=new Set}Bu(t){this.Ld?this.kd.contains(t)?this.Bd.delete(t):this.Nd.add(t):this.kd.md(t)}Kf(t){this.Ld?this.kd.contains(t)?this.Bd.add(t):this.Nd.delete(t):this.kd.remove(t)}Hs(t){return this.Ld?!!this.Nd.has(t)||!this.Bd.has(t)&&this.kd.contains(t):this.kd.contains(t)}Ru(){this.kd.clear(),this.Nd.clear(),this.Bd.clear()}toArray(){if(this.Ld)throw new Error("cannot be used in queueing mode");return this.kd.getValues()}Fu(){return this.kd.Od()+this.Nd.size-this.Bd.size}Au(){return 0===this.Fu()}Wd(){if(this.Au())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.kd;return t.min(t.root).key}jd(){if(this.Au())throw new Error("empty set");if(this.Ld)throw new Error("cannot be used in queueing mode");const t=this.Wd();return this.Kf(t),t}Vd(t){if(t=!!t,this.Ld!==t&&(this.Ld=t,!t)){for(const t of this.Bd)this.kd.remove(t);this.Bd.clear();for(const t of this.Nd)this.kd.md(t);this.Nd.clear()}}Ud(t){this.kd.forEach(t)}*values(){if(this.Au())return;const t=this.kd;for(let s=t.min(t.root);s!=t.ad;s=t.Sd(s))yield s.key}[Symbol.iterator](){return this.values()}}}{const cl=self._s;cl.Hd=class{constructor(t=cl.hardwareConcurrency){this.zd=t,this.Jd=[],this.Xd=0}Bu(t,s){return new Promise((i,e)=>{const h={if:t,resolve:i,reject:e,qd:s};s?.signal&&s.signal.aborted?e(new Error("abort")):(s?.signal&&(h.onabort=()=>{const t=this.Jd.indexOf(h);-1!==t&&(this.Jd.splice(t,1),e(new Error("abort")))},s.signal.addEventListener("abort",h.onabort)),this.Jd.push(h),this.Yd())})}$d(t){for(let s=0,i=this.Jd.length;s<i;++s)if(this.Jd[s].if===t)return s;return-1}Kd(t,s){const i=this.$d(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Jd[i].resolve(s),this.Jd.splice(i,1)}Zd(t,s){const i=this.$d(t);if(-1===i)throw new Error("cannot find promise to reject");this.Jd[i].reject(s),this.Jd.splice(i,1)}async Yd(){if(!this.Jd.length)return;if(this.Xd>=this.zd)return;this.Xd++;const t=this.Jd.shift();t.qd?.signal&&t.onabort&&t.qd.signal.removeEventListener("abort",t.onabort);try{const s=await t.if();t.resolve(s)}catch(s){t.reject(s)}this.Xd--,this.Yd()}}}{const fl=self._s;fl.Qd=class{constructor(t,s,i){this.Of=t,this.tp=s,this.sp=i||2*s,this.ip=-1,this.ep=-1/0,this.hp=()=>this.np(),this.rp=!1,this.op=!1,this.ap=null}lp(t){this.op=!!t}up(){return void 0!==fl.cp&&fl.cp.fp()?this.sp:this.tp}pp(...t){if(-1!==this.ip)return;this.ap=t;let s=fl.Ff(),i=s-this.ep,e=this.up();i>=e&&this.op?(this.ep=s,this.mp()):this.ip=self.setTimeout(this.hp,Math.max(e-i,4))}mp(){this.rp=!0;const t=this.ap;this.ap=null,t?this.Of(...t):this.Of(),this.rp=!1}Bf(){this.rp||(this.gp(),this.ap=null,this.ep=fl.Ff())}np(){this.ip=-1,this.ep=fl.Ff(),this.mp()}gp(){-1!==this.ip&&(self.clearTimeout(this.ip),this.ip=-1)}Jh(){this.gp(),this.Of=null,this.ap=null,this.hp=null}}}{const dl=self._s;dl.yp=class{constructor(){this.wp=new Map,this.Sp=!1,this.bp=null,this.vp=null,this.Mp=null,this.Gp=null}xp(t){this.Sp=!!t}Tp(){return this.Sp}_p(t){this.bp=t}Ip(t){if(!this.bp)throw new Error("no get base size callback set");return this.bp(t)}Cp(t){this.vp=t}Rp(t,s,i,e,h,n){if(!this.vp)throw new Error("no raster at size callback set");return this.vp(t,s,i,e,h,n)}Ap(t){this.Mp=t}Pp(t){if(!this.Mp)throw new Error("no release result callback set");this.Mp(t)}Ep(t){this.Gp=t}Fp(){if(!this.Gp)throw new Error("no redraw callback set");this.Gp()}Dp(t){let s=this.wp.get(t);return s||(s=dl.zh(dl.Op,this,t),this.wp.set(t,s)),s.kp(),s}Lp(t){this.wp.delete(t.Np())}Bp(){for(const t of this.wp.values())t.Wp(),t.jp()}}}{const pl=self._s;pl.Op=class{constructor(t,s){this.Vp=t,this.Up=s,this.Hp=0,this.zp=0,this.Jp=0,this.Xp=this.Vp.Ip(s).then(t=>{this.Vp&&(this.zp=t[0],this.Jp=t[1],this.Vp.Fp())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.qp=!0,this.Vp&&this.Vp.Fp()}),this.Yp=0,this.$p=0,this.Kp=0,this.Zp=0,this.Qp=!1,this.tm=null,this.sm=!1,this.qp=!1}Jh(){if(this.Hp<=0)throw new Error("already released");this.Hp--,0===this.Hp&&this.im()}Wp(){this.tm&&(this.Vp.Pp(this.tm),this.tm=null)}im(){this.Wp(),this.Vp.Lp(this),this.Vp=null}Np(){return this.Up}kp(){this.Hp++}hm(){return this.Hp>0}nm(){return this.tm}jp(){this.sm=!0}async rm(t,s,i){if(0===s||0===i||this.qp)return;if(this.Qp)return;let e=pl.vn(Math.ceil(s)),h=pl.vn(Math.ceil(i));const n=Math.max(e,h);if(n>4096){const t=4096/n;s*=t,i*=t,e=Math.min(Math.ceil(e*t),4096),h=Math.min(Math.ceil(h*t),4096)}if(s<e&&i<h){const t=s/i;e/h>t?(s=h*t,i=h):(s=e,i=e/t)}if(this.Vp.Tp()&&(e=Math.ceil(s),h=Math.ceil(i)),e<=this.Yp&&h<=this.$p&&!this.sm)return;this.Qp=!0,this.Yp=e,this.$p=h;const r=await this.Vp.Rp(this.Up,t,this.Yp,this.$p,s,i);this.Vp&&(this.Wp(),this.tm=r,this.Kp=s,this.Zp=i,this.Qp=!1,this.sm=!1,this.Vp.Fp())}om(){return this.Xp}am(){return this.zp}lm(){return this.Jp}um(){return this.Kp}fm(){return this.Zp}dm(){return this.qp}}}{let ml=function(t){return vl.get(t)};0;const gl=self._s;gl.pm="\ufeff";const yl=new Set("0123456789");gl.gm=function(t){return yl.has(t)};const wl=new Set(" \t\n\r\u2028\u2029");gl.ym=function(t){return wl.has(t)},gl.wm=function(t){return[...t].filter(t=>!gl.ym(t)).join("")},gl.Sm=function(t){for(const s of t)if(!gl.ym(s))return!1;return!0},gl.bm=function(t){for(const s of t)if(!gl.ym(s))return!1;return!0},gl.vm=function(t){return 1===t.length&&t.charCodeAt(0)<32},gl.Mm=function(t){return[...t].filter(t=>!gl.vm(t)).join("")};let Sl=null;try{Sl=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}gl.Gm=function(t){return!gl.ym(t)&&Sl&&Sl.test(t)};const bl=new Set("0123456789.+-e");gl.xm=function(t){if(!(t=t.trim()).length)return!1;let s=t.charAt(0);if("-"!==s&&!yl.has(s))return!1;for(let s of t)if(!bl.has(s))return!1;return!0},gl.Tm=function(t){let s=t.length;for(;s>0;){let i=t.charAt(s-1);if(!gl.gm(i))break;--s}return t.substr(0,s)},gl._m=function(t){let s=gl.Tm(t),i=t.substr(s.length);return i=i?(parseInt(i,10)+1).toString():"2",s+i};const vl=new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]]),Ml=/[&<>"']/g;gl.Im=function(t){return t.replace(Ml,ml)},gl.Cm=function(t){let s=gl.Rm(t,"\\","\\\\");return s=gl.Rm(s,'"','\\"'),s=gl.Rm(s,"\t","\\t"),s=gl.Rm(s,"\r",""),gl.Rm(s,"\n","\\n")},gl.Am=function(t){let s=gl.Rm(t,"&","&amp;");return s=gl.Rm(s,"<","&lt;"),s=gl.Rm(s,">","&gt;"),gl.Rm(s,'"',"&quot;")};const Gl=/[-[\]{}()*+?.,\\^$|#\s]/g;gl.$i=function(t){return t.replace(Gl,"\\$&")},gl.Pm=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},gl.Em=function(t,s){let i=0,e=0;for(;i<s;){if(i=t.indexOf("\n",i),-1===i)return e;e++,i++}return e},gl.Fm=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());const e=s.length;let h=0,n=0,r=[];for(;(n=t.indexOf(s,h))>-1;)r.push(n),h=n+e;return r},gl.Rm=function(t,s,i){return t.replaceAll(s,()=>i)},gl.Dm=function(t,s,i){return t.replace(new RegExp(gl.$i(s),"gi"),()=>i)},gl.Om=function(t,s){"string"==typeof s?t.textContent=s:s.km()?t.textContent=s.toString():(t.innerHTML=s.Lm(),s instanceof gl.dh&&s.Nm(t))},gl.Bm=function(t,s){return t instanceof gl.fh||t instanceof gl.dh?t.equals(s):s instanceof gl.fh||s instanceof gl.dh?s.equals(t):t===s},gl.Wm=function(t,...s){let i=t;for(let e=0,h=s.length;e<h;++e){const h=`{${e}}`;if(!t.includes(h))throw new Error(`missing placeholder '${h}' in string substitution`);i=i.replace(h,s[e].toString())}return i},gl.jm=function(t,...s){let i=t,e=-1,h=-1;for(let n=0,r=s.length;n<r;++n){const r=`{${n}}`;t.includes(r)?(h=n,i=i.replace(r,s[n].toString())):-1===e&&(e=n)}if(e>=0&&h>=0&&e<h)throw new Error(`missing placeholder '${e}' in string substitution`);return i},gl.Vm=function(t,s){let i=t;for(let[t,e]of Object.entries(s))i=i.replaceAll(t,e.toString());return i},gl.Um=function(t,s){return t>s?1:t<s?-1:0},gl.Hm=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return i>e?1:i<e?-1:0};const xl=new self.Intl.Segmenter;gl.zm=function(t){if(1===t.length)return[t];const s=[];for(const i of xl.segment(t))s.push(i.segment);return s},gl.Jm=function*(t){for(const s of xl.segment(t))yield s.segment},gl.Xm=function(t){let s=0;for(const i of xl.segment(t))++s;return s};const Tl=1073741824,_l=1099511627776;gl.qm=function(t,s){let i="common."+(s?"dataRates":"dataSizes")+".";const e=self.Ym;if(t<1024)return e(i+"bytes",t);if(t<1048576){let s=t/1024;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"kilobytes",s)}if(t<Tl){let s=t/1048576;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"megabytes",s)}if(t<_l){let s=t/Tl;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"gigabytes",s)}{let s=t/_l;return s=s<10?Math.round(10*s)/10:Math.round(s),e(i+"terabytes",s)}};const Il={$m:!1,Km:!0,Zm:!0,Qm:!0,tg:!0};gl.sg=function(t,s){s=Object.assign({},Il,s),gl.eg.ig("common.time");const i=[],e=self.lang,h=self.hg;if(s.Km){const s=Math.floor(t/86400);s>0&&(t-=24*s*3600,i.push(h(".days",null,s)))}if(s.Zm){const s=Math.floor(t/3600);(s>0||i.length)&&(t-=3600*s,i.push(h(".hours",null,s)))}if(s.Qm){const e=Math.floor(t/60);(e>0||i.length||!s.tg)&&(t-=60*e,i.push(h(".minutes",null,e)))}if(s.tg){const s=Math.floor(t%60);i.push(h(".seconds",null,s))}const n=(s.$m?e(".approx-prefix"):"")+i.join(e(".separator"));return gl.eg.ng(),n},gl.rg=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},gl.og=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},gl.ag=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());gl.Mr(i,4,"0"),gl.Mr(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const s=i[t]-e[t];if(0!==s)return s<0?-1:1}return 0},gl.lg=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random());return("x"===t?s:3&s|8).toString(16)})},gl.ug=function(t,s){if(t.length!==s.length)throw new Error("strings must be same length");let i=0;for(let e=0,h=t.length;e<h;++e)t.charAt(e)!==s.charAt(e)&&++i;return i},gl.cg=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,n,r,o;for(t.length>s.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(n=e,h=1;h<=t.length;h++)r=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(n+1,o[h]+1)),o[h-1]=n,n=r;o[t.length]=n}return o[t.length]},gl.fg=function(t){return(new TextEncoder).encode(t).length}}{let Cl=function(t,s,i){const e=Al.get(i);if(!e)return"class"===i?s?"</span>":`<span class="bbclass${kl++}">`:t;if("string"==typeof e){if("a"===e&&0===Dl.length||"abbr"===e&&0===Ol.length)return t;if("a"!==e||s){if("abbr"!==e||s)return"<"+s+e+">";{const t=parseInt(i.substring(3),10)-1;if(t<0||t>=Ol.length)throw new Error("invalid bbcode tip substitution");const s=Ol[t];let e="";if("string"==typeof s?e=s:"function"==typeof s&&(e=s()),"string"!=typeof e)throw new TypeError("invalid bbcode tip");return`<abbr title="${Rl.Rm(e,'"',"&quot;")}">`}}{const t=parseInt(i.substring(1),10)-1;if(t<0||t>=Dl.length)throw new Error("invalid bbcode link substitution");const s=Dl[t];if("string"==typeof s)return`<a href="${Dl[t]}">`;if("function"==typeof s)return`<a class="bblink${t}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(e)){let t=e[0],i=e[1];return s?"</"+t+">":`<${t} class="${i}">`}};0;const Rl=self._s,Al=(self.assert,new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]])),Pl=new Set(["icon"]),El=/\[(\/?)([a-zA-Z0-9]+)\]/g,Fl=/\[(\/?)([^\[\n]*?)\]/g;let Dl=null,Ol=null,kl=0;const Ll=/\n/g;Rl.dh=class{constructor(t,s){if(this.dg=s&&s.pg?t:Rl.Im(t),this.mg="",this.gg=!1,this.yg=[],this.wg=[],s){if(this.gg=!!s.Sg,s.links){if(s.links.length>9)throw new Error("too many links");this.yg=s.links}if(s.bg){if(s.bg.length>9)throw new Error("too many tips");this.wg=s.bg}}this.vg=this.dg.includes("["),this.Mg=this.gg&&this.dg.includes("\n"),this.Gg=!this.vg&&!this.Mg&&!this.dg.includes("&"),this.xg=!1,this.Tg=[]}toString(){return this.dg}valueOf(){return this.dg}km(){return this.Gg}_g(){return this.vg?this.dg.replace(El,""):this.dg}Lm(){if(this.Gg)return this.dg;if(!this.mg&&this.dg){let t=this.dg;this.vg&&(kl=0,Dl=this.yg,Ol=this.wg,t=t.replace(El,Cl),Dl=null,Ol=null),this.Mg&&(t=t.replace(Ll,"<br>")),this.mg=t}return this.mg}Nm(t){if(this.yg.length)for(let s=0,i=this.yg.length;s<i;++s){const i=this.yg[s];if("function"!=typeof i)continue;const e=t.querySelector(".bblink"+s);if(!e)throw new Error("unable to attach BBString link handler");e.onclick=i}}equals(t){return t instanceof Rl.fh?this.Lm()===t.Lm():t instanceof Rl.dh?this.dg===t.dg:this.dg===t}Ig(){if(this.xg)return this.Tg;const t=[],s=this.dg,i=[];Fl.lastIndex=0;let e=0,h=null;for(;null!==(h=Fl.exec(s));){const n=h.index;if(n>0&&"\\"===s.charAt(n-1))continue;const r=h[0],o=h[1],a=h[2],l=s.substring(e,n);if(e=n+r.length,l&&t.push({text:l,Cg:i.slice(0)}),a)if(o){const t=a.toLowerCase();for(let s=i.length-1;s>=0;--s)if(i[s].tag===t){i.splice(s,1);break}}else{let s=a,e=null;const h=a.indexOf("=");if(-1!==h?(s=a.substring(0,h).toLowerCase(),e=a.substring(h+1)):s=s.toLowerCase(),Pl.has(s)){if("icon"!==s)throw new Error(`unknown self-closing tag ${s}`);t.push({icon:e,Cg:i.slice(0)})}else i.push({tag:s,Rg:e})}}e<s.length&&t.push({text:s.substring(e),Cg:i.slice(0)});for(const s of t)s.text&&(s.text=this.Ag(s.text));return this.Tg=t.map(t=>t.icon?Rl.zh(Rl.Pg,{icon:t.icon,Cg:t.Cg}):Rl.zh(Rl.Eg,{Fg:Rl.zm(t.text),Cg:t.Cg})),this.xg=!0,this.Tg}Ag(t){return t=Rl.Rm(t,"\\[","["),Rl.Rm(t,"\\\\","\\")}static Dg(t){return Rl.zh(Rl.dh,t,{pg:!0})._g()}static Og(t){return t.replace(Fl,"")}}}{let Nl=function(t){return""!==t&&""!==t&&Ul.ym(t)},Bl=function(t){return Hl.has(t)},Wl=function(t){return Ul.Gm(t)&&!Bl(t)},jl=function(t){for(;t.length>0&&Nl(t.at(-1));)t.pop()},Vl=function(t){return"\n"===t||"\r\n"===t};0;const Ul=self._s,Hl=new Set("");class zl{constructor(){this.kg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Lg=0,this.Ng=!1}static Bg(t,s,i,e,h,n){const r=new zl;return r.kg.push(t),r.width=s,r.height=i,r.fontBoundingBoxAscent=e,r.fontBoundingBoxDescent=h,r.Lg=n,r}nd(t){this.kg=t.kg.map(t=>t.Wg()),this.width=t.width,this.height=t.height,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent,this.Lg=t.Lg,this.Ng=t.Ng}Bf(){this.kg=[],this.width=0,this.height=0,this.fontBoundingBoxAscent=0,this.fontBoundingBoxDescent=0,this.Lg=0,this.Ng=!1}jg(t,s){s||(this.width=t.width),this.height=t.height||0,this.fontBoundingBoxAscent=t.fontBoundingBoxAscent||0,this.fontBoundingBoxDescent=t.fontBoundingBoxDescent||0,this.Lg=t.Lg||0,this.Ng=!0}Vg(t){const s=this.kg.length?this.kg.at(-1):null;let i=0;s&&s.Ug()&&t[0].Ug()&&t[0].Hg()===s.Hg()&&(s.zg(t[0].Jg()),i=1);for(let s=t.length;i<s;++i){const s=t[i];this.kg.push(s.Wg())}this.Ng=!1}}Ul.Xg=class{constructor(){this.qg=[],this.Yg=null,this.$g=new zl,this.Kg=new zl,this.Zg=!1}Qg(){return this.qg}ty(){return this.qg.length}sy(t){this.Yg=t}Xg(t,s,i,e,h){if("string"==typeof t&&(t=[Ul.zh(Ul.Eg,{Fg:Ul.zm(t)})]),Ul.Sr(this.qg),!t.length||1===t.length&&t[0].Ug()&&t[0].Au()||i<2)return;if(1===t.length){const e=t[0];if(e.Ug()&&e.iy()<=100&&!e.ey()){let{width:t,height:n,fontBoundingBoxAscent:r,fontBoundingBoxDescent:o,Lg:a}=s(e);if(t+=h,e.hy(t),e.ny(n),e.oy(r||0),e.ly(o||0),e.uy(a||0),t<=i)return void this.py(zl.Bg(e,t,n,r,o,a))}}let n,r=4;"word"===e?n=this.my(t):"cjk"===e?(n=this.gy(t),r=8):(n=this.yy(t),r=8),this.wy(n,s,i,r,h)}my(t){const s=[];let i=[],e=!1;for(const h of t){const t=h.Hg();if(h.Sy())i.length>0&&s.push(i),s.push([h]),i=[];else for(const n of h.Jg())if(Vl(n))i.length>0&&s.push(i),s.push([Ul.zh(Ul.Eg,{Fg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(Ul.zh(Ul.Eg,{Fg:[n],Cg:t})),e=Nl(n);else{const h=Nl(n);if(h===e){const s=i.at(-1);s.Hg()===t?s.by(n):i.push(Ul.zh(Ul.Eg,{Fg:[n],Cg:t}))}else s.push(i),i=[Ul.zh(Ul.Eg,{Fg:[n],Cg:t})],e=h}}return i.length>0&&s.push(i),s}gy(t){const s=[];let i=[],e=!1;for(const h of t){const t=h.Hg();if(h.Sy())i.length>0&&s.push(i),s.push([h]),i=[];else for(const n of h.Jg())if(Vl(n))i.length>0&&s.push(i),s.push([Ul.zh(Ul.Eg,{Fg:["\n"],Cg:t})]),i=[];else if(0===i.length)i.push(Ul.zh(Ul.Eg,{Fg:[n],Cg:t})),e=Bl(n);else if(e||Wl(n)){const s=i.at(-1);s.Hg()===t?s.by(n):i.push(Ul.zh(Ul.Eg,{Fg:[n],Cg:t})),e=Bl(n)}else s.push(i),i=[Ul.zh(Ul.Eg,{Fg:[n],Cg:t})],e=Bl(n)}return i.length>0&&s.push(i),s}yy(t){const s=[];for(const i of t)if(i.Ug()){const t=i.Jg();Ul.Fh(s,t.map(t=>[Ul.zh(Ul.Eg,{Fg:[t],Cg:i.Hg()})]))}else s.push([i]);return s}vy(t,s){let i=0,e=0,h=0,n=0,r=0;for(const o of t){if(-1===o.My()){const t=s(o);o.ny(t.height),o.oy(t.fontBoundingBoxAscent||0),o.ly(t.fontBoundingBoxDescent||0),o.uy(t.Lg||0),o.Ug()?o.hy(t.width):o.Sy()&&o.Gy(this.Yg)}i+=o.My(),e=Math.max(e,o.xy()),h=Math.max(h,o.Ty()),n=Math.max(n,o._y()),r=Math.max(r,o.Iy())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:n,Lg:r}}Cy(){this.$g.Bf(),this.Kg.Bf()}py(t){this.qg.push(new Ul.Xg.Ry(t)),this.Cy()}Ay(t){return 1===t.length&&t[0].Ug()&&1===t[0].iy()&&Vl(t[0].Jg()[0])}Py(t){return t[0].Ug()&&Ul.bm(t[0].Jg())}wy(t,s,i,e,h){let n=0;for(;n<t.length;)n=this.Ey(t,n,s,i,e);if(this.Kg.kg.length>0){if(!this.Kg.Ng){const t=this.vy(this.Kg.kg,s);this.Kg.jg(t)}this.py(this.Kg)}this.Fy(s,h),this.Cy(),this.Zg=!1}Ey(t,s,i,e,h){const n=this.$g,r=this.Kg,o=t[s];if(this.Ay(o)){if(!r.Ng){const t=i(Ul.zh(Ul.Eg,{Fg:[" "],Cg:o[0].Hg()}));r.jg(t,!0)}return this.py(r),s+1}const a=this.Dy(t,s,h),l=this.vy(r.kg,i);return r.jg(l),l.width>=e?this.Oy(t,s,i,e):(n.nd(r),this.Zg&&this.py(n),a+1)}Dy(t,s,i){const e=this.Kg;this.Zg=!1;let h=s,n=0;for(let s=t.length;h<s;++h){const s=t[h];if(this.Ay(s)){this.Zg=!0;break}if(e.Vg(s),!this.Py(s)&&(++n,n===i))break}return h}Oy(t,s,i,e){const h=this.$g,n=this.Kg;n.nd(h);let r=s;for(let s=t.length;r<s;++r){const o=t[r];if(this.Ay(o))return this.py(h),r+1;if(n.Vg(o),!this.Py(o)||0===h.kg.length){const o=this.vy(n.kg,i);if(n.jg(o),o.width>=e){let i;return h.kg.length>0?i=h:(i=n,++r,r<s&&this.Py(t[r])&&++r),this.py(i),r}h.nd(n)}}return r}Fy(t,s){for(const i of this.qg){const e=i.ky();if(!e.length)continue;let h=e.at(-1);if(h.Ug()){const n=h.Jg(),r=n.slice(0);if(jl(r),0===r.length)i.Ly(-h.My()),e.pop();else if(r.length<n.length){h.Ny(r);const s=t(h).width,e=h.My()-s;h.hy(s),i.Ly(-e)}0!==s&&e.length>0&&(h=e.at(-1),h.Ly(s),i.Ly(s))}}}Ru(){Ul.Sr(this.qg)}By(){return this.qg.reduce((t,s)=>Math.max(t,s.My()),0)}Wy(){return this.qg.reduce((t,s)=>t+s.xy(),0)}}}self._s.Xg.Ry=class{constructor(t){this.Tg=t.kg,this.jy=t.width,this.Vy=t.height,this.Uy=t.fontBoundingBoxAscent,this.Hy=t.fontBoundingBoxDescent,this.zy=t.Lg,this.Jy=0,this.Xy=0}kg(){return this.Tg.values()}*qy(){const t=this.Tg;for(let s=t.length-1;s>=0;--s)yield t[s]}ky(){return this.Tg}Ly(t){this.jy+=t}My(){return this.jy}xy(){return this.Vy}Yy(){return this.Uy}_y(){return this.Hy}Iy(){return this.zy}$y(t){this.Jy=t}Ky(){return this.Jy}Zy(t){this.Xy=t}Qy(){return this.Xy}};self._s.tw=class{constructor(t){this.sw=t.Cg||[],this.jy=t.width||-1,this.Vy=t.height||-1,this.Uy=t.fontBoundingBoxAscent||-1,this.Hy=t.fontBoundingBoxDescent||-1,this.zy=t.Lg||-1,this.Jy=0,this.Xy=0}Ug(){return!1}Sy(){return!1}Hg(){return this.sw}iw(t){const s=this.sw;for(let i=s.length-1;i>=0;--i){const e=s[i];if(e.tag===t)return e}return null}ew(t){return!!this.iw(t)}hw(){const t=new Map;for(const s of this.sw)t.set(s.tag,s.Rg);return t}Ly(t){this.jy+=t}hy(t){this.jy=t}My(){return this.jy}ny(t){this.Vy=t}xy(){return this.Vy}oy(t){this.Uy=t}Ty(){return this.Uy}ly(t){this.Hy=t}_y(){return this.Hy}uy(t){this.zy=t}Iy(){return this.zy}$y(t){this.Jy=t}Ky(){return this.Jy}Zy(t){this.Xy=t}Qy(){return this.Xy}};{const Jl=self._s;Jl.Eg=class extends Jl.tw{constructor(t){super(t),this.rw=t.Fg}Ug(){return!0}zg(t){Jl.Fh(this.rw,t),this.jy=-1,this.Vy=-1,this.Uy=-1,this.Hy=-1,this.zy=-1}by(t){this.rw.push(t)}Wg(){return Jl.zh(Jl.Eg,{Fg:this.rw.slice(0),Cg:this.sw,width:this.jy,height:this.Vy,fontBoundingBoxAscent:this.Uy,fontBoundingBoxDescent:this.Hy,Lg:this.zy})}Jg(){return this.rw}Ny(t){this.rw=t}iy(){return this.rw.length}Au(){return 0===this.rw.length}ey(){return this.rw.includes("\n")}}}{const Xl=self._s;Xl.Pg=class extends Xl.tw{constructor(t){super(t),this.ow=t.icon}Sy(){return!0}aw(){return this.ow}Wg(){return Xl.zh(Xl.Pg,{icon:this.ow,Cg:this.sw,width:this.jy,height:this.Vy,fontBoundingBoxAscent:this.Uy,fontBoundingBoxDescent:this.Hy,Lg:this.zy})}lw(t){if(!t)return null;let s=Number(this.ow);return String(s)===this.ow?(s=Math.floor(s),t.uw(s)):t.cw(this.ow)}Gy(t){const s=this.lw(t);this.jy=s?this.Vy*s.My()/s.xy():0}fw(t){const s=this.lw(t);return s?s.fw():null}iy(){return 1}}}{const ql=self._s;ql.dw=class{constructor(t){this.pw=new Map,this.mw=t.gw,this.yw=t.ww}Jh(){for(const t of this.pw.values())t.Jh();this.pw.clear()}Sw(t){let s=this.pw.get(t);if(s)return s;const i=this.mw(t);return s=ql.zh(ql.bw,this,{source:t,Mw:i}),this.pw.set(t,s),s}Gw(t){return this.pw.has(t)}xw(t){const s=this.pw.get(t);s&&s.Jh(),this.pw.delete(t)}async Tw(t){return await this.yw(t)}}}{const Yl=self._s;Yl.bw=class{constructor(t,s){this._w=t,this.Iw=s.source,this.Cw=[],this.Rw=new Map,this.Aw=!1,this.Pw=!1,this.Ew=null;const i=s.Mw.Fw;for(let t=0,s=i.length;t<s;++t){const s=i[t],e=Yl.zh(Yl.Dw,this,{index:t,tag:s.tag,source:s.source,width:s.width,height:s.height});this.Cw.push(e),s.tag&&this.Rw.set(s.tag.toLowerCase(),e)}}Jh(){for(const t of this.Cw)t.Jh();Yl.Sr(this.Cw),this.Rw.clear(),this._w=null,this.Iw=null}Ow(){return this.Aw}kw(){return this.Pw}Lw(){return this.Ew||(this.Ew=this.Nw()),this.Ew}async Nw(){if(this.Aw)return;this.Aw=!0,this.Pw=!0;const t=await this._w.Tw(this.Iw);if(!this._w)return;const s=t.Fw;for(let t=0,i=Math.min(s.length,this.Cw.length);t<i;++t){const i=s[t].Bw;this.Cw[t].Ww(i)}this.Pw=!1}uw(t){return(t=Math.floor(t))<0||t>=this.Cw.length?null:this.Cw[t]}cw(t){return this.Rw.get(t.toLowerCase())||null}}}self._s.Dw=class{constructor(t,s){this.jw=t,this.Iw=s.source||null,this.Vw=s.index,this.Uw=s.tag,this.jy=s.width,this.Vy=s.height,this.Hw=null}Jh(){this.jy=0,this.Vy=0,this.jw=null}zw(){return this.Iw}My(){return this.jy}xy(){return this.Vy}Ww(t){this.Hw=t}fw(){return this.Hw}};{let $l=function(t,s,i,e){const h=ru;su.P(hu,i,s),su.P(nu,t,s),su.Tt(h,hu,nu),su.normalize(h,h),e.set(h[0],h[1],h[2],su.xt(t,h))},Kl=function(t,s,i,e,h,n,r){const o=r.x,a=r.y,l=r.z,u=r.w,c=r.Jw,f=r.Xw,d=r.qw,p=1-c,m=1-f,g=1-d;return o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*n*g>=u||o*e*c+o*t*p+a*h*f+a*s*m+l*n*d+l*i*g>u},Zl=function(t,s,i,e){return e.x*t+e.y*s+e.z*i>=e.w};0;const Ql=self._s,tu=self.rs,su=tu.ys,iu=tu.ws,eu=tu.fs,hu=su.create(),nu=su.create(),ru=su.create(),ou=iu.create(),au=eu.create(),lu=su.create(),uu=su.create(),cu=su.create(),fu=su.create(),du=su.create(),pu=su.create(),mu=su.create(),gu=su.create(),yu=iu.S(0,0,1,1);Ql.Yw={$w(t,s,i,e,h,n,r){const o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15];let c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!==p&&(p=1/p,c*=p,f*=p,d*=p,r[0]=(.5*c+.5)*n[2]+n[0],r[1]=(.5*f+.5)*n[3]+n[1],r[2]=.5*(1+d),!0)},Kw(t,s,i,e,h,n,r){const o=au,a=ou;return eu.multiply(o,h,e),null!==eu.M(o,o)&&(a[0]=(t-n[0])/n[2]*2-1,a[1]=(s-n[1])/n[3]*2-1,a[2]=2*i-1,a[3]=1,iu.At(a,a,o),0!==a[3]&&(a[3]=1/a[3],r[0]=a[0]*a[3],r[1]=a[1]*a[3],r[2]=a[2]*a[3],!0))},Zw(t,s,i,e,h,n,r){const o=hu,a=nu;if(!Ql.Yw.Kw(t,s,0,e,h,n,o))return!1;if(!Ql.Yw.Kw(t,s,1,e,h,n,a))return!1;const l=nu;su.P(l,a,o);const u=ru;su.set(u,0,0,1);const c=-i,f=su.xt(u,l);let d=0;if(0===f){if(0!==su.xt(u,o)+c)return!1}else if(d=-(su.xt(o,u)+c)/f,d<0)return!1;return su.St(r,o,l,d),!0}};class wu{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Jw=NaN,this.Xw=NaN,this.qw=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Jw=t>0?1:0,this.Xw=s>0?1:0,this.qw=i>0?1:0}}Ql.Yw.Qw=class{constructor(){this.tS=new wu,this.sS=new wu,this.iS=new wu,this.eS=new wu,this.hS=new wu,this.nS=new wu}rS(t,s){const i=yu;Ql.Yw.Kw(0,1,0,t,s,i,lu),Ql.Yw.Kw(1,1,0,t,s,i,uu),Ql.Yw.Kw(0,0,0,t,s,i,cu),Ql.Yw.Kw(1,0,0,t,s,i,fu),Ql.Yw.Kw(0,1,1,t,s,i,du),Ql.Yw.Kw(1,1,1,t,s,i,pu),Ql.Yw.Kw(0,0,1,t,s,i,mu),Ql.Yw.Kw(1,0,1,t,s,i,gu),$l(cu,lu,du,this.tS),$l(lu,uu,pu,this.sS),$l(uu,fu,gu,this.iS),$l(fu,cu,mu,this.eS),$l(mu,du,pu,this.nS),$l(fu,uu,lu,this.hS)}oS(t,s,i,e,h,n){return Kl(t,s,i,e,h,n,this.tS)&&Kl(t,s,i,e,h,n,this.sS)&&Kl(t,s,i,e,h,n,this.iS)&&Kl(t,s,i,e,h,n,this.eS)&&Kl(t,s,i,e,h,n,this.hS)&&Kl(t,s,i,e,h,n,this.nS)}aS(t,s,i){return!Zl(t,s,i,this.hS)}}}{const Su=self._s,bu=self.rs,vu=bu.ys,Mu=bu.ws,Gu=bu.fs,xu=Gu.create(),Tu=vu.S(0,0,0),_u=vu.S(0,0,0),Iu=vu.S(0,0,0),Cu=vu.S(0,1,0),Ru=(Mu.S(0,0,0,0),new Su.Cl),Au=new Su.Rect,Pu=new Su.Cl(0,0,1,0,1,1,0,1),Eu={lS:1,uS:1e4},Fu=Gu.S(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Su.Yw.cS=class{constructor(t){t=Object.assign({},Eu,t),this.jy=0,this.Vy=0,this.fS=Su.Qh(45),this.dS=Math.tan(this.fS/2),this.pS=Gu.create(),this.mS=Gu.create(),this.gS=!1,this.yS=t.lS,this.wS=t.uS,this.SS=[],this.bS=new Map,this.vS=null,this.MS=null,this.GS=null,this.xS=null,this.TS=null,this._S=null,this.IS=null,this.CS=null,this.RS=null,this.AS=null,this.PS=null,this.ES=null,this.FS=new Map,this.DS=null,this.OS=[],this.kS=new Map,this.LS=0,this.NS=0,this.BS=1,this.WS=[this.BS],this.jS=1,this.VS=[this.jS],this.US=.5,this.HS=[this.US],this.zS=0,this.JS=!0,this.XS=!1}qS(){this.LS=0,this.NS=0,this.vS=null,this.MS=null,this.GS=null,this.xS=null,this.TS=null,this._S=null,this.IS=null,this.CS=null,this.RS=null,this.AS=null,this.PS=null,this.ES=null,this.YS()}$S(){this.qS(),this.DS=null}KS(){for(const t of this.SS)t.Jh();this.qS()}My(){return this.jy}xy(){return this.Vy}ZS(t){return this.QS()?100:t/(2*this.tb())}sb(t){return this.QS()?t/(2*this.tb())/this.ZS(t):1}ib(t){this.yS=t}eb(){return this.yS}hb(t){this.wS=t}nb(){return this.wS}rb(t){this.fS=t,this.dS=Math.tan(this.fS/2)}ob(){return this.fS}tb(){return this.dS}ab(){this.gS=!1}lb(){this.gS=!0}QS(){return!this.gS}ub(){return this.gS}cb(t,s,i=.5,e=.5){const h=this.eb(),n=this.nb(),r=this.ob();if(.5===i&&.5===e)this.fb()?Gu.lt(t,r,s,h,n):Gu.perspective(t,r,s,h,n);else{const r=2*(i=1-i)-2,o=2*i,a=2*e-2,l=2*e,u=this.tb()*h,c=u*s;Gu.rt(t,r*c,o*c,a*u,l*u,h,n),this.fb()&&Gu.mul(t,Fu,t)}}pb(t,s,i,e=1){const h=self.devicePixelRatio,n=2*this.ZS(i)*h*this.tb()/i,r=s*n/(2*h*e),o=i*n/(2*h*e),a=-r,l=r,u=-o,c=o;this.fb()?Gu.dt(t,a,l,u,c,this.eb(),this.nb()):Gu.ft(t,a,l,u,c,this.eb(),this.nb())}mb(t,s,i,e,h,n=1){let r=1;this.QS()&&(r=200*this.tb()/h);const o=Iu;vu.set(o,r,-r,1);const a=Tu,l=_u;vu.multiply(a,s,o),vu.multiply(l,i,o),Gu.gt(t,a,l,e||Cu),o[2]=n,Gu.scale(t,t,o)}gb(t,s,i,e,h,n,r,o){return vu.set(Tu,t,s,i),vu.set(_u,e,h,n),this.mb(xu,Tu,_u,Cu,r,o),xu}yb(t){this.SS.push(t),this.bS.set(t.Rc(),t)}wb(t){const s=this.SS.indexOf(t);-1!==s&&this.SS.splice(s,1),this.bS.delete(t.Rc())}YS(){Su.Sr(this.SS),this.bS.clear()}Sb(t){return this.bS.get(t)||null}bb(){return this.vS}Mb(){this.Gb(this.vS)}xb(){return this.MS}Tb(){this.Gb(this.MS)}_b(){this.Gb(this.GS)}Ib(){this.Gb(this.xS)}Cb(){this.Gb(this.TS)}Rb(){this.Gb(this._S)}Ab(){this.Gb(this.IS)}Pb(){this.Gb(this.CS)}Eb(){this.Gb(this.RS)}Fb(){this.Gb(this.AS)}Db(){this.Gb(this.PS)}Ob(){this.Gb(this.ES)}kb(t){this.DS=t}Lb(){return this.DS}Nb(t,s,i,e,h,n){const r=Su.Yw.Wb.Bb(t,s,i,e,h,n);let o=this.FS.get(r);return o||(o=Su.zh(Su.Yw.Wb,this,t,s,i,e,h,n),this.FS.set(r,o)),o.jb(),o}Vb(t){t.Ub(),0===t.Hb()&&(this.DS===t&&(this.DS=null),this.FS.delete(t.zb()),t.Jh())}Jb(t){Su.Sr(this.OS),this.kS.clear();let s=0;for(const i of t){const t=i[0],e=i[1],h=i[2];this.OS.push([e,h]),this.kS.set(t,{number:s,Xb:e,qb:h}),s++}}Yb(t){return this.OS[t]}$b(t){return this.Yb(t)[0]}Kb(t){return this.Yb(t)[1]}Zb(t){const s=this.kS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Qb(t){const s=this.kS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}tv(t){this.LS=t}sv(){return this.LS}ev(t){this.NS=t,this.DS=null}hv(){return this.NS}Ry(t,s,i,e){const h=Su.rn(t,s,i,e),n=Math.sin(h),r=Math.cos(h),o=.5*this.BS,a=n*o,l=r*o,u=this.jS;2===u?this.nv(t,s,0,i,e,0,a,l):1===u?this.rv(t,s,0,i,e,0,a,l):this.ov(t,s,0,i,e,0,a,l)}av(t,s,i,e,h,n){const r=Su.rn(t,s,e,h),o=Math.sin(r),a=Math.cos(r),l=.5*this.BS,u=o*l,c=a*l,f=this.jS;2===f?this.nv(t,s,i,e,h,n,u,c):1===f?this.rv(t,s,i,e,h,n,u,c):this.ov(t,s,i,e,h,n,u,c)}nv(t,s,i,e,h,n,r,o){const a=this.US,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=2*o,p=2*r,m=l+r,g=u-o,y=l-r+d,w=u+o+p,S=c+r,b=f-o,v=c-r-d,M=f+o-p;this.lv(m,g,i,S,b,n,v,M,n,y,w,i,Pu)}rv(t,s,i,e,h,n,r,o){const a=this.US,l=t+a-o,u=s+a-r,c=e+a+o,f=h+a+r,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.lv(d,p,i,y,w,n,S,b,n,m,g,i,Pu)}ov(t,s,i,e,h,n,r,o){const a=this.US,l=t+a,u=s+a,c=e+a,f=h+a,d=l+r,p=u-o,m=l-r,g=u+o,y=c+r,w=f-o,S=c-r,b=f+o;this.lv(d,p,i,y,w,n,S,b,n,m,g,i,Pu)}uv(t,s,i,e,h,n){const r=Su.rn(t,s,i,e),o=Math.sin(r),a=Math.cos(r),l=.5*this.BS,u=o*l,c=a*l,f=this.jS;2===f?this.cv(t,s,i,e,u,c,h,n):1===f?this.fv(t,s,i,e,u,c,h,n):this.dv(t,s,i,e,u,c,h,n)}cv(t,s,i,e,h,n,r,o){const a=this.US,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=2*n,p=2*h,m=l+h,g=u-n,y=l-h+d,w=u+n+p,S=c+h,b=f-n,v=c-h-d,M=f+n-p;Ru.set(m,g,S,b,v,M,y,w),Au.set(r,0,o,0),this.pv(Ru,Au)}fv(t,s,i,e,h,n,r,o){const a=this.US,l=t+a-n,u=s+a-h,c=i+a+n,f=e+a+h,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;Ru.set(d,p,y,w,S,b,m,g),Au.set(r,0,o,0),this.pv(Ru,Au)}dv(t,s,i,e,h,n,r,o){const a=this.US,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-n,m=l-h,g=u+n,y=c+h,w=f-n,S=c-h,b=f+n;Ru.set(d,p,y,w,S,b,m,g),Au.set(r,0,o,0),this.pv(Ru,Au)}mv(t,s,i,e){const h=.5*this.BS,n=this.jS;2===n?this.gv(t,s,i,e,h):1===n?this.yv(t,s,i,e,h):this.wv(t,s,i,e,h)}gv(t,s,i,e,h){this.nv(t,s,0,i,s,0,0,h),this.nv(i,s,0,i,e,0,h,0),this.nv(i,e,0,t,e,0,0,-h),this.nv(t,e,0,t,s,0,-h,0)}yv(t,s,i,e,h){this.rv(t,s,0,i,s,0,0,h),this.rv(i,s,0,i,e,0,h,0),this.rv(i,e,0,t,e,0,0,-h),this.rv(t,e,0,t,s,0,-h,0)}wv(t,s,i,e,h){this.ov(t,s,0,i,s,0,0,h),this.ov(i,s,0,i,e,0,h,0),this.ov(i,e,0,t,e,0,0,-h),this.ov(t,e,0,t,s,0,-h,0)}Sv(t){this.mv(t.Za(),t.Qa(),t.tl(),t.sl())}bv(t){const s=Su.rn(t.Nn(),t.Bn(),t.Wn(),t.jn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.BS,n=i*h,r=e*h,o=this.jS;2===o?this.vv(t,n,r):1===o?this.Mv(t,n,r):this.Gv(t,n,r)}vv(t,s,i){this.nv(t.Nn(),t.Bn(),0,t.Wn(),t.jn(),0,s,i),this.nv(t.Wn(),t.jn(),0,t.Vn(),t.Un(),0,i,-s),this.nv(t.Vn(),t.Un(),0,t.Hn(),t.zn(),0,-s,-i),this.nv(t.Hn(),t.zn(),0,t.Nn(),t.Bn(),0,-i,s)}Mv(t,s,i){this.rv(t.Nn(),t.Bn(),0,t.Wn(),t.jn(),0,s,i),this.rv(t.Wn(),t.jn(),0,t.Vn(),t.Un(),0,i,-s),this.rv(t.Vn(),t.Un(),0,t.Hn(),t.zn(),0,-s,-i),this.rv(t.Hn(),t.zn(),0,t.Nn(),t.Bn(),0,-i,s)}Gv(t,s,i){this.ov(t.Nn(),t.Bn(),0,t.Wn(),t.jn(),0,s,i),this.ov(t.Wn(),t.jn(),0,t.Vn(),t.Un(),0,i,-s),this.ov(t.Vn(),t.Un(),0,t.Hn(),t.zn(),0,-s,-i),this.ov(t.Hn(),t.zn(),0,t.Nn(),t.Bn(),0,-i,s)}xv(t){this.BS=t,this.WS[this.WS.length-1]=t}Tv(){return this.BS}_v(t){if(this.WS.length>=100)throw new Error("pushed too many line widths - check push/pop pairs");this.WS.push(t),this.BS=t}Iv(){if(this.WS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.WS.pop(),this.BS=this.WS.at(-1)}Cv(){this.jS=0,this.VS[this.VS.length-1]=0}Rv(){this.jS=1,this.VS[this.VS.length-1]=0}Av(){this.jS=2,this.VS[this.VS.length-1]=0}Pv(t){if("butt"===t)this.Ev();else if("square"===t)this.Fv();else{if("zag"!==t)throw new Error("invalid line cap");this.Dv()}}Ev(){if(this.VS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.VS.push(0),this.jS=0}Fv(){if(this.VS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.VS.push(1),this.jS=1}Dv(){if(this.VS.length>=100)throw new Error("pushed too many line caps - check push/pop pairs");this.VS.push(2),this.jS=2}Ov(){if(this.VS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.VS.pop(),this.jS=this.VS.at(-1)}kv(t){this.US=t,this.HS[this.HS.length-1]=t}Lv(){return this.US}Nv(t){if(this.HS.length>=100)throw new Error("pushed too many line offsets - check push/pop pairs");this.HS.push(t),this.US=t}Bv(){if(this.HS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.HS.pop(),this.US=this.HS.at(-1)}Wv(){this.jv(0),this.Vv(0)}Uv(t){const s=t.length/2;if(s<3)throw new Error("need at least 3 points");const i=s-2,e=i-1,h=t[0],n=t[1];for(let s=0;s<i;s+=2){const i=2*s,r=t[i+2],o=t[i+3],a=t[i+4],l=t[i+5];if(s===e)this.Hv(h,n,r,o,a,l,a,l);else{const s=t[i+6],e=t[i+7];this.Hv(h,n,r,o,a,l,s,e)}}}zv(){this.Jv(!0),this.zS++}Xv(){return this.zS}qv(){this.zS++}Yv(t){this.JS=!!t}$v(){return this.JS}Kv(t){this.XS=!!t}Zv(){return this.XS}Qv(){return!1}fb(){return!1}tM(){}sM(){}iM(){}eM(){return this.tM()+this.sM()+this.iM()}hM(){return Su.zh(Su.Yw.nM,this)}}}self._s.Yw.rM=class{constructor(t,s){this.Yh=s.name,this.oM=t,this.aM=s.lM||0,this.uM=s.cM||0,this.fM=!!s.dM,this.pM=!!s.mM,this.gM=!!s.yM,this.wM=!!s.SM,this.bM=!!s.animated,this.vM=!!s.MM,this.GM=!!s.xM,this.TM=!1,this._M=this.fM||this.vM||0!==this.aM||0!==this.uM}Jh(){this.oM=null}IM(){return this.oM}Rc(){return this.Yh}CM(){return 0!==this.aM||0!==this.uM}RM(){return this.aM}AM(){return this.uM}PM(){return this.fM}EM(){return this.pM}FM(){return this.gM}DM(){return this.wM}OM(){return this.bM}kM(){return this.vM}LM(){return this.GM}NM(){return this.TM}BM(){return this._M}WM(){return!1}};{const Du=self._s;Du.Yw.Wb=class{constructor(t,s,i,e,h,n,r){this.oM=t,this.Hp=0,this.jM=null,this.VM="",this.UM=i,this.HM=Du.zh(Du.Go),this.HM.set(e),this.zM=h,this.JM=n,this.XM=r,"string"==typeof s?this.VM=s:(this.jM=s,this.VM=this.jM.Rc())}Jh(){if(this.Hp>0)throw new Error("releasing state group still in use");this.oM=null,this.jM=null,this.VM=""}qM(){const t=this.oM;t.Gb(this.jM),t.YM(this.UM),t.$M(this.HM),t.ev(this.zM),t.jv(this.JM),t.Vv(this.XM),t.kb(this)}zb(){return Du.Yw.Wb.Bb(this.VM,this.UM,this.HM,this.zM,this.JM,this.XM)}jb(){++this.Hp}Ub(){--this.Hp}Hb(){return this.Hp}KM(){this.jM=null}ZM(t){if(this.jM=t.Sb(this.VM),!this.jM)throw new Error("failed to restore shader program")}static Bb(t,s,i,e,h,n){return("string"==typeof t?t:t.Rc())+","+s+","+i.Lo()+","+i.No()+","+i.Bo()+","+i.Wo()+","+e+","+h+","+n}}}{let Ou=function(t,s,i){const e=i.Nn(),h=i.Bn(),n=i.Wn()-e,r=i.jn()-h;return[e+n*t+(i.Hn()-e)*s,h+r*t+(i.zn()-h)*s]};0;const ku=globalThis._s;globalThis.assert;ku.Yw.QM=class{constructor(t,s,i){this.tG=t,this.sG=s,this.iG=i,this.Ra=NaN,this.Aa=NaN,this.zM=NaN,this.eG=NaN,this.hG=NaN,this.Ra=0,this.Aa=0,this.zM=0,this.eG=0,this.hG=0}nG(t,s,i,e){this.Ra=t,this.Aa=s,this.eG=i,this.hG=e}rG(){return this.Ra}oG(t){this.Ra!==t&&(this.Ra=t,this.tG.aG())}lG(){return this.Aa}uG(t){this.Aa!==t&&(this.Aa=t,this.tG.aG())}cG(){return this.zM}fG(t){this.zM!==t&&(this.zM=Math.max(t,0),this.tG.aG())}dG(){return this.eG}pG(t){this.eG=t}mG(){return this.hG}gG(t){this.hG=t}yG(t,s,i){[this.Ra,this.Aa]=Ou(t.Ra,t.Aa,s),this.zM=t.zM,this.eG=ku._t(i.Za(),i.tl(),t.eG),this.hG=ku._t(i.Qa(),i.sl(),t.hG)}wG(t,s,i){[this.Ra,this.Aa]=Ou(t.Ra,t.Aa,s),this.zM=t.zM,[this.eG,this.hG]=Ou(t.eG,t.hG,i)}SG(){return{x:this.rG(),y:this.lG(),z:this.cG(),u:this.dG(),v:this.mG()}}bG(t){this.oG(t.x),this.uG(t.y),t.hasOwnProperty("z")&&this.fG(t.z),this.pG(t.u),this.gG(t.v)}vG(){return this.tG}MG(){return this.sG}GG(){return this.iG}},ku.Yw.xG=class{constructor(t,s,i){if(t<2||s<2)throw new Error("invalid mesh size");this.TG=t,this._G=s,this.IG=i||null,this.CG=[],this.AG=0,this.PG=0,this.EG=1,this.FG=1,this.DG=0,this.OG=!1,this.kG=[],this.LG=0,this.NG=!0;const e=t-1,h=s-1;for(let i=0;i<s;++i){const s=[];for(let n=0;n<t;++n){const t=ku.zh(ku.Yw.QM,this,n,i),r=n/e,o=i/h;t.nG(r,o,r,o),s.push(t)}this.CG.push(s)}}Jh(){ku.Sr(this.CG),ku.Sr(this.kG)}BG(){return this.TG}WG(){return this._G}jG(){return this.IG}VG(){return this.CG}aG(){this.OG=!0,this.NG=!0}UG(){if(!this.OG)return;let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const n of this.CG)for(const r of n){const n=r.rG(),o=r.lG();t=Math.min(t,n),s=Math.min(s,o),i=Math.max(i,n),e=Math.max(e,o),h=Math.max(h,r.cG())}this.AG=t,this.PG=s,this.EG=i,this.FG=e,this.DG=h,this.OG=!1}HG(){return this.UG(),this.AG}zG(){return this.UG(),this.PG}JG(){return this.UG(),this.EG}XG(){return this.UG(),this.FG}qG(){return this.UG(),this.DG}YG(){return this.qG()>0}$G(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.TG||s<0||s>=this._G?null:this.CG[s][t]}KG(t,s,i){const e=i instanceof ku.Rect;if(t.BG()!==this.BG()||t.WG()!==this.WG())throw new Error("source mesh wrong size");const h=t.CG,n=this.CG;for(let t=0,r=n.length;t<r;++t){const r=h[t],o=n[t];for(let t=0,h=o.length;t<h;++t){const h=r[t],n=o[t];e?n.yG(h,s,i):n.wG(h,s,i)}}this.NG=!0}ZG(t){if(!this.NG&&this.LG===t)return;const s=this.TG,i=this._G,e=this.kG,h=Math.floor(65535/s)-1;if(h<=0)throw new Error("mesh too large");const n=Math.ceil((i-1)/h);n<e.length&&(e.length=n);let r=0;for(let o=0;o<n;++o){const n=Math.min(h,i-r-1),a=(n+1)*s,l=3*a,u=2*a,c=(s-1)*n*6;if(o===e.length)e.push({QG:new Float32Array(l),tx:new Float32Array(u),sx:new Uint16Array(c)});else{const t=e[o];t.QG.length!==l&&(t.QG=new Float32Array(l)),t.tx.length!==u&&(t.tx=new Float32Array(u)),t.sx.length!==c&&(t.sx=new Uint16Array(c))}const{QG:f,tx:d,sx:p}=e[o];this.ix(r,n,t,f,d,p),r+=h}this.LG=t,this.NG=!1}ix(t,s,i,e,h,n){const r=this.CG,o=this.TG;let a=0,l=0,u=0;for(let c=t,f=t+s+1;c<f;++c){const s=r[c],d=c+1,p=c-t,m=p*o,g=(p+1)*o;for(let t=0,r=s.length;t<r;++t){const o=s[t],c=t+1;if(e[a++]=o.rG(),e[a++]=o.lG(),e[a++]=o.cG()+i,h[l++]=o.dG(),h[l++]=o.mG(),c<r&&d<f){const s=t+m,i=c+m,e=c+g,h=t+g;n[u++]=s,n[u++]=i,n[u++]=e,n[u++]=s,n[u++]=e,n[u++]=h}}}}hx(t,s){this.ZG(s);for(const{QG:s,tx:i,sx:e}of this.kG)t.nx(s,i,e)}ox(t,s){s||(s=(t,s,i)=>[t,s,i]);const i=this.CG;let e=i[0];for(let h=1,n=i.length;h<n;++h){const r=i[h];let o=e[0],a=r[0];for(let i=1,l=r.length;i<l;++i){const u=e[i],c=r[i],[f,d,p]=s(o.rG(),o.lG(),o.cG()),[m,g,y]=s(u.rG(),u.lG(),u.cG()),[w,S,b]=s(c.rG(),c.lG(),c.cG()),[v,M,G]=s(a.rG(),a.lG(),a.cG());t.av(f,d,p,m,g,y),t.av(f,d,p,w,S,b),t.av(f,d,p,v,M,G),i===l-1&&t.av(m,g,y,w,S,b),h===n-1&&t.av(v,M,G,w,S,b),o=u,a=c}e=r}}lx(t){const s=.001,i=.99999999,e=t.du(),h=[],n=this.BG()-1,r=this.WG()-1,o=1/n,a=1/r,l=n-1,u=r-1;let c=e[0],f=e[1],d=ku.Kh(Math.floor(c*n),0,l),p=ku.Kh(Math.floor(f*r),0,u),m=!0,g=0,y=0,w=0,S=-1;const b=()=>{c=ku.Kh(ku._t(c,g,w),0,1),f=ku.Kh(ku._t(f,y,w),0,1),h.push(c,f)};for(let t=0,v=e.length;t<v;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=ku.Kh(Math.floor(c*n),0,l),p=ku.Kh(Math.floor(f*r),0,u);const M=(t+2)%v;for(g=e[M],y=e[M+1],S=-1;;){if(h.length>1e6)throw new Error("Too many mesh poly points");const t=d*o,e=p*a,n=(d+1)*o,r=(p+1)*a;if(m=ku.Yn(c,f,t,e,n,e,n,r),0!==S&&(w=ku.qn(c,f,g,y,t,e,n,r,-.001),w>=0&&w<=i))b(),m=!m,S=0;else if(p>0&&2!==S&&(w=ku.qn(c,f,g,y,t,e,n,e,s),w>=0&&w<=i))b(),p--,m=!1,S=4;else if(d<l&&3!==S&&(w=ku.qn(c,f,g,y,n,e,n,r,s),w>=0&&w<=i))b(),d++,m=!1,S=1;else if(d>0&&1!==S&&(w=ku.qn(c,f,g,y,t,e,t,r,s),w>=0&&w<=i))b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&(w=ku.qn(c,f,g,y,t,r,n,r,s),w>=0&&w<=i)))break;b(),p++,m=!0,S=2}}}return ku.zh(ku.au,h)}ux(t,s){const i=this.mx(t);this.gx(i),s.mu(i)}mx(t){const s=[],i=t.du();for(let t=0,e=i.length;t<e;t+=2){const e=i[t],h=i[t+1],[n,r]=this.yx(e,h);s.push(n,r)}return s}yx(t,s){const i=this.BG()-1,e=this.WG()-1,h=1/i,n=1/e,r=ku.Kh(Math.floor(t*i),0,i-1),o=ku.Kh(Math.floor(s*e),0,e-1),a=r*h,l=o*n,u=(r+1)*h,c=(o+1)*n,f=this.$G(r,o),d=this.$G(r+1,o+1),p=ku.Yn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+n,y=this.$G(r+(p?1:0),o+(p?0:1)),[w,S,b]=ku.$n(t,s,a,l,m,g,u,c);return ku.Kn(w,S,b,f.rG(),f.lG(),f.cG(),y.rG(),y.lG(),y.cG(),d.rG(),d.lG(),d.cG())}gx(t){const s=[],i=1e-7;let e=t[0],h=t[1],n=e-t.at(-2),r=h-t.at(-1);for(let o=0,a=t.length;o<a;o+=2){const l=(o+2)%a,u=t[l],c=t[l+1],f=u-e,d=c-h,p=Math.abs(f)<i&&Math.abs(n)<i&&Math.sign(d)===Math.sign(r),m=Math.abs(d)<i&&Math.abs(r)<i&&Math.sign(f)===Math.sign(n);(!p&&!m&&Math.abs(f/n-d/r)>.001||0==f&&0===d)&&s.push(e,h),e=u,h=c,n=f,r=d}s.length>=6&&s.length<t.length&&ku.Gr(t,s)}SG(){return{cols:this.BG(),rows:this.WG(),points:this.CG.map(t=>t.map(t=>t.SG()))}}bG(t){const s=this.BG(),i=this.WG();if(t.cols!==s||t.rows!==i)throw new Error("mesh data wrong size");const e=t.points;for(let t=0;t<i;++t){const i=e[t];for(let e=0;e<s;++e)this.$G(e,t).bG(i[e])}}}}{let Lu=function(t,s){let i,e,h,n;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,n=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,n=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,n=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{wx:i,Sx:e,format:h,type:n}};0;const Nu=self._s,Bu=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),Wu=new Set(["nearest","bilinear","trilinear"]),ju=new Set(["default","low","high"]),Vu=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Uu={bx:"clamp-to-edge",vx:"clamp-to-edge",Mx:"trilinear",Gx:0,xx:"rgba8",Tx:!0,_x:"default",Ix:!0,Cx:!1,width:-1,height:-1},Hu={Ix:!0,flipY:!1},zu=new Set;Nu.Yw.Rx=class{constructor(t){this.oM=t,this.Ax=null,this.jy=0,this.Vy=0,this.Px=!0,this.Ex="clamp-to-edge",this.Fx="clamp-to-edge",this.Dx="trilinear",this.Ox=0,this.kx="rgba8",this.Lx=!1,this.Nx="default",this.Hp=0}Bx(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData||t instanceof ArrayBuffer))throw new Error("invalid texture source");if(s=Object.assign({},Uu,s),this.Ax)throw new Error("already created texture");if(this.Ex=s.bx,this.Fx=s.vx,this.Dx=s.Mx,this.Ox=s.Gx,this.kx=s.xx,this.Lx=!!s.Tx&&this.oM.$v(),this.Nx=s._x,!Vu.has(this.Ex)||!Vu.has(this.Fx))throw new Error("invalid wrap mode");if(!Wu.has(this.Dx))throw new Error("invalid sampling");if(!Bu.has(this.kx))throw new Error("invalid pixel format");if(!ju.has(this.Nx))throw new Error("invalid mipmap quality");if(this.Px=!0,t instanceof ArrayBuffer||null===t||s.Cx){if(this.jy=s.width,this.Vy=s.height,t instanceof ArrayBuffer&&t.byteLength!==this.jy*this.Vy*4)throw new Error("ArrayBuffer wrong size")}else this.jy=t.width,this.Vy=t.height;if(this.jy<=0||this.Vy<=0)throw new Error("invalid texture data size");if(s.Cx){const s=Nu.uo(this.jy,this.Vy);s.getContext("2d").drawImage(t,0,0,this.jy,this.Vy),t=s}const i=Nu.bn(this.jy)&&Nu.bn(this.Vy),e=this.oM.Wx();if(this.jy>e||this.Vy>e)throw new Error("texture data exceeds maximum texture size");const h=this.oM.jx(),n=this.oM.Vx();this.Ax=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.Ax),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.Ix),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1);const r=Lu(this.kx,h);if(this.oM.Ux()||i||!this.Hx())if(n>=2){let s;s=this.Lx?Math.floor(Math.log2(Math.max(this.jy,this.Vy))+1):1,h.texStorage2D(h.TEXTURE_2D,s,r.wx,this.jy,this.Vy),t instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.jy,this.Vy,r.format,r.type,new Uint8Array(t)):null!==t&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,r.format,r.type,t)}else t instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,r.Sx,this.jy,this.Vy,0,r.format,r.type,new Uint8Array(t)):null===t?h.texImage2D(h.TEXTURE_2D,0,r.Sx,this.jy,this.Vy,0,r.format,r.type,null):h.texImage2D(h.TEXTURE_2D,0,r.Sx,r.format,r.type,t);else{if(null===t)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if(t instanceof ArrayBuffer&&(t=new ImageData(new Uint8ClampedArray(t),this.jy,this.Vy)),t instanceof ImageData){const s=Nu.uo(this.jy,this.Vy);s.getContext("2d").putImageData(t,0,0),t=s}const s=Nu.uo(Nu.vn(this.jy),Nu.vn(this.Vy)),i=s.getContext("2d");i.imageSmoothingEnabled="nearest"!==this.Dx,i.drawImage(t,0,0,this.jy,this.Vy,0,0,s.width,s.height),h.texImage2D(h.TEXTURE_2D,0,r.Sx,r.format,r.type,s)}null!==t&&this.zx(h),h.bindTexture(h.TEXTURE_2D,null),this.oM.Jx(),this.Hp=1,zu.add(this)}Xx(t,s,i){if(i=Object.assign({},Uu,i),this.Ax)throw new Error("already created texture");if(this.Ex=i.bx,this.Fx=i.vx,this.Dx=i.Mx,this.kx=i.xx,this.Lx=!!i.Tx&&this.oM.$v(),this.Nx=i._x,!Vu.has(this.Ex)||!Vu.has(this.Fx))throw new Error("invalid wrap mode");if(!Wu.has(this.Dx))throw new Error("invalid sampling");if(!Bu.has(this.kx))throw new Error("invalid pixel format");if(!ju.has(this.Nx))throw new Error("invalid mipmap quality");this.Px=!1,this.jy=Math.floor(t),this.Vy=Math.floor(s);const e=Nu.bn(this.jy)&&Nu.bn(this.Vy),h=this.oM.Wx();if(this.jy<=0||this.Vy<=0)throw new Error("invalid texture size");if(this.jy>h||this.Vy>h)throw new Error("texture exceeds maximum texture size");if(!this.oM.Ux()&&this.Hx()&&!e)throw new Error("non-power-of-two tiled textures not supported");const n=this.oM.jx(),r=this.oM.Vx();this.Ax=n.createTexture(),n.bindTexture(n.TEXTURE_2D,this.Ax),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.Ix),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1);const o=Lu(this.kx,n),a=r>=2?o.wx:o.Sx;n.texImage2D(n.TEXTURE_2D,0,a,this.jy,this.Vy,0,o.format,o.type,null),this.zx(n),n.bindTexture(n.TEXTURE_2D,null),this.oM.Jx(),this.Hp=1,zu.add(this)}qx(t){if("default"===this.Nx)return this.Px?t.NICEST:t.FASTEST;if("low"===this.Nx)return t.FASTEST;if("high"===this.Nx)return t.NICEST;throw new Error("invalid mipmap quality")}Hx(){return"clamp-to-edge"!==this.Ex||"clamp-to-edge"!==this.Fx}Yx(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}zx(t){const s=Nu.bn(this.jy)&&Nu.bn(this.Vy);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.Yx(t,this.Ex)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.Yx(t,this.Fx)),"nearest"===this.Dx)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.Lx=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.oM.Ux())&&this.Lx){t.hint(t.GENERATE_MIPMAP_HINT,this.qx(t)),t.generateMipmap(t.TEXTURE_2D);const s="trilinear"===this.Dx&&!this.oM.Zv();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,s?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.Lx=!1;const i=this.oM.$x();i&&this.Ox>0&&"nearest"!==this.Dx&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.Ox,this.oM.Kx()))}Zx(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Ax||this.Hp<=0)throw new Error("texture not created");if(this.Px)throw new Error("cannot update static texture");s=Object.assign({},Hu,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.oM.Vx(),n=this.oM.jx();n.bindTexture(n.TEXTURE_2D,this.Ax),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.Ix),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!!s.flipY);const r=Lu(this.kx,n),o=h>=2?r.wx:r.Sx;try{if(this.jy===i&&this.Vy===e){const s=Nu.bn(this.jy)&&Nu.bn(this.Vy);n.texSubImage2D(n.TEXTURE_2D,0,0,0,r.format,r.type,t),(s||this.oM.Ux())&&this.Lx&&(n.hint(n.GENERATE_MIPMAP_HINT,this.qx(n)),n.generateMipmap(n.TEXTURE_2D))}else{this.jy=i,this.Vy=e;const s=Nu.bn(this.jy)&&Nu.bn(this.Vy);if(!this.oM.Ux()&&this.Hx()&&!s)throw new Error("non-power-of-two tiled textures not supported");n.texImage2D(n.TEXTURE_2D,0,o,r.format,r.type,t),(s||this.oM.Ux())&&this.Lx&&(n.hint(n.GENERATE_MIPMAP_HINT,this.qx(n)),n.generateMipmap(n.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}n.bindTexture(n.TEXTURE_2D,null),this.oM.Jx()}Qx(){if(this.Hp>0)throw new Error("texture still has references");if(!this.Ax)throw new Error("already deleted texture");zu.delete(this),this.oM.jx().deleteTexture(this.Ax),this.Ax=null}tT(){return!!this.Ax}sT(){return this.Ax}IM(){return this.oM}iT(){this.Hp++}eT(){if(this.Hp<=0)throw new Error("no more references");this.Hp--}hT(){return this.Hp}My(){return this.jy}xy(){return this.Vy}nT(){return this.Px}rT(){let t=this.jy*this.Vy;switch(this.kx){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.Lx&&(t+=Math.floor(t/3)),t}static KM(){zu.clear()}static oT(){return zu.values()}}}{const Ju=self._s,Xu=(self.assert,self.rs),qu=(Xu.ys,Xu.fs),Yu=new Set(["nearest","bilinear","trilinear"]),$u={Mx:"trilinear",alpha:!0,depth:!1,aT:!0,lT:!0,uT:0},Ku=new Set;Ju.Yw.cT=class{constructor(t){this.oM=t,this.fT=null,this.dT=null,this.Ax=null,this.pT=null,this.jy=0,this.Vy=0,this.mT=!0,this.Dx="trilinear",this.gT=!0,this.yT=!1,this.wT=!0,this.ST=0,this.bT=qu.create(),this.vT=0,this.MT=0,this.GT=0}xT(t,s,i){i=Object.assign({},$u,i);const e=this.oM.Vx();if(this.Ax||this.pT)throw new Error("already created render target");if(this.Dx=i.Mx,this.gT=!!i.alpha,this.yT=!!i.depth,this.wT=!!i.aT,this.mT=!!i.lT,this.ST=i.uT,!Yu.has(this.Dx))throw new Error("invalid sampling");if(this.ST>0&&(e<2||this.wT))throw new Error("invalid use of multisampling");if(e<2&&(this.wT=!0),this.jy=t,this.Vy=s,this.jy<=0||this.Vy<=0)throw new Error("invalid render target size");this.TT();const h=this.oM.jx();if(this.fT=h.createFramebuffer(),this.yT&&(this.dT=h.createFramebuffer()),this.wT){this.Ax=this.oM._T(this.jy,this.Vy,{Mx:this.Dx,xx:this.gT?"rgba8":"rgb8",Tx:!1});const t=this.Ax.sT();h.bindFramebuffer(h.FRAMEBUFFER,this.fT),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t,0),this.yT&&(h.bindFramebuffer(h.FRAMEBUFFER,this.dT),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,t,0))}else{this.pT=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.pT);const t=this.gT?h.RGBA8:h.RGB8;if(this.ST>0){const s=h.getInternalformatParameter(h.RENDERBUFFER,t,h.SAMPLES);if(s&&s[0]){const t=s[0];this.ST>t&&(this.ST=t)}else this.ST=0}0===this.ST?h.renderbufferStorage(h.RENDERBUFFER,t,this.jy,this.Vy):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.ST,t,this.jy,this.Vy),h.bindFramebuffer(h.FRAMEBUFFER,this.fT),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.pT),this.yT&&(h.bindFramebuffer(h.FRAMEBUFFER,this.dT),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.pT)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const n=this.oM.IT();this.yT&&n&&(h.bindFramebuffer(h.FRAMEBUFFER,this.fT),this.oM.CT()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,n,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,n)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ku.add(this)}RT(t,s){if(this.jy===t&&this.Vy===s)return;this.jy=t,this.Vy=s,this.TT();const i=this.oM.jx();i.bindFramebuffer(i.FRAMEBUFFER,this.fT),this.Ax?this.Ax.Zx(new ImageData(this.jy,this.Vy)):(i.bindRenderbuffer(i.RENDERBUFFER,this.pT),i.renderbufferStorage(i.RENDERBUFFER,this.gT?i.RGBA8:i.RGB8,this.jy,this.Vy),i.bindRenderbuffer(i.RENDERBUFFER,null));const e=this.oM.IT();this.yT&&e&&(this.oM.CT()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}Qx(){if(!this.Ax&&!this.pT)throw new Error("already deleted render target");Ku.delete(this);const t=this.oM.jx();this.Ax?(t.bindFramebuffer(t.FRAMEBUFFER,this.fT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.yT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.dT),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.oM.AT(this.Ax),this.Ax=null):this.pT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.fT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.yT&&(t.bindFramebuffer(t.FRAMEBUFFER,this.dT),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.pT),this.pT=null),t.bindFramebuffer(t.FRAMEBUFFER,null),this.oM.Vx()>=2&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.fT),this.yT&&t.deleteFramebuffer(this.dT);const s=this.oM.PT();s.ET=null,s.FT=null,this.fT=null}TT(){this.oM.cb(this.bT,this.jy/this.Vy),this.vT=this.oM.ob(),this.MT=this.oM.eb(),this.GT=this.oM.nb()}DT(){return this.fT}OT(){return this.dT}IM(){return this.oM}kT(){return this.Ax}LT(){return this.oM.ob()===this.vT&&this.oM.eb()===this.MT&&this.oM.nb()===this.GT||this.TT(),this.bT}NT(){return"nearest"!==this.Dx}BT(){return this.gT}WT(){return this.wT}jT(){return this.yT}My(){return this.jy}xy(){return this.Vy}VT(){return this.mT}UT(){return this.ST}HT(){const t={Mx:this.Dx,alpha:this.gT,aT:this.wT};return this.mT||(t.width=this.jy,t.height=this.Vy),t}zT(t){return"nearest"!==(t=Object.assign({},$u,t)).Mx===this.NT()&&!!t.alpha===this.BT()&&!!t.depth===this.jT()&&!(this.oM.Vx()>=2&&!!t.aT!==this.WT())&&("number"==typeof t.width||"number"==typeof t.height?!this.VT()&&this.My()===Math.floor(t.width)&&this.xy()===Math.floor(t.height):this.VT())}JT(){return this.Ax?this.Ax.sT():null}rT(){return this.Ax?this.Ax.rT():this.jy*this.Vy*(this.gT?4:3)}static async XT(t,s){const i=await t.qT(s,!0);return await Ju.do(i)}static KM(){Ku.clear()}static YT(){return Ku.values()}static $T(t,s){for(const i of Ku)i.VT()&&i.RT(t,s)}}}{const Zu=self._s,Qu=self.rs,tc=(Qu.ys,Qu.fs,new Set(["aPos","aTex","aColor","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]));Zu.Yw.KT=class extends Zu.Yw.rM{static async ZT(t,s){const i=t.jx(),e=s.src,h=s.QT,n=s.name,r=i.createShader(i.FRAGMENT_SHADER);i.shaderSource(r,e),i.compileShader(r);const o=i.createShader(i.VERTEX_SHADER);i.shaderSource(o,h),i.compileShader(o);const a=i.createProgram();i.attachShader(a,r),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aColor"),i.bindAttribLocation(a,3,"aPoints"),i.linkProgram(a);const l=t.t_();if(l?await t.s_(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await Zu.dr(5),!i.getShaderParameter(r,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(r);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+t)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const t=i.getShaderInfoLog(o);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+t)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const t=i.getProgramInfoLog(a);throw i.deleteShader(r),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+t)}const u=Zu.Mm(i.getProgramInfoLog(a)||"").trim();return u&&!Zu.Sm(u)&&console.info(`[WebGL] Shader program '${n}' compilation log: `,u),i.deleteShader(r),i.deleteShader(o),a}static async i_(t,s){const i=await Zu.Yw.KT.ZT(t,s);return new Zu.Yw.KT(t,i,s)}constructor(t,s,i){super(t,i);const e=t.jx(),h=t.PT();t.Jv(),e.useProgram(s),this.e_=e,this.jM=s,this.h_="<default-device-transform>"===i.name;const n=e.getAttribLocation(s,"aPos"),r=e.getAttribLocation(s,"aTex"),o=e.getAttribLocation(s,"aColor");this.n_=e.getAttribLocation(s,"aPoints"),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.r_),e.vertexAttribPointer(n,3,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.o_),e.vertexAttribPointer(r,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==o&&(e.bindBuffer(e.ARRAY_BUFFER,t.a_),e.vertexAttribPointer(o,4,t.l_()?e.HALF_FLOAT:e.FLOAT,!1,0,0),e.enableVertexAttribArray(o)),-1!==this.n_&&(e.bindBuffer(e.ARRAY_BUFFER,t.u_),e.vertexAttribPointer(this.n_,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.n_)),e.bindBuffer(e.ARRAY_BUFFER,null),this.c_=new Zu.Yw.f_(this,"matP","mat4"),this.d_=new Zu.Yw.f_(this,"matMV","mat4"),this.p_=new Zu.Yw.f_(this,"color","vec4"),this.m_=new Zu.Yw.f_(this,"samplerFront","sampler"),this.g_=new Zu.Yw.f_(this,"pointTexStart","vec2"),this.y_=new Zu.Yw.f_(this,"pointTexEnd","vec2"),this.w_=new Zu.Yw.f_(this,"zElevation","float"),this.S_=new Zu.Yw.f_(this,"tileSize","vec2"),this.b_=new Zu.Yw.f_(this,"tileSpacing","vec2"),this.v_=new Zu.Yw.f_(this,"color2_","vec4"),this.M_=new Zu.Yw.f_(this,"outlineThickness","float"),this.G_=new Zu.Yw.f_(this,"samplerBack","sampler"),this.x_=new Zu.Yw.f_(this,"samplerDepth","sampler"),this.T_=new Zu.Yw.f_(this,"destStart","vec2"),this.__=new Zu.Yw.f_(this,"destEnd","vec2"),this.I_=new Zu.Yw.f_(this,"srcStart","vec2"),this.C_=new Zu.Yw.f_(this,"srcEnd","vec2"),this.R_=new Zu.Yw.f_(this,"srcOriginStart","vec2"),this.A_=new Zu.Yw.f_(this,"srcOriginEnd","vec2"),this.P_=new Zu.Yw.f_(this,"pixelSize","vec2"),this.E_=new Zu.Yw.f_(this,"seconds","float"),this.F_=new Zu.Yw.f_(this,"devicePixelRatio","float"),this.D_=new Zu.Yw.f_(this,"layerScale","float"),this.O_=new Zu.Yw.f_(this,"layerAngle","float"),this.k_=new Zu.Yw.f_(this,"layoutStart","vec2"),this.L_=new Zu.Yw.f_(this,"layoutEnd","vec2"),this.N_=new Zu.Yw.f_(this,"zNear","float"),this.B_=new Zu.Yw.f_(this,"zFar","float"),this.W_=!!(this.P_.j_()||this.E_.j_()||this.G_.j_()||this.T_.j_()||this.__.j_()||this.I_.j_()||this.C_.j_()||this.R_.j_()||this.A_.j_()||this.F_.j_()||this.D_.j_()||this.O_.j_()||this.k_.j_()||this.L_.j_());const a=i.parameters||[];this.V_=[],this.TM=this.P_.j_()||this.I_.j_()||this.C_.j_()||this.R_.j_()||this.A_.j_(),this.U_=!1,this.H_=!1,this.p_.z_(1,1,1,1),this.v_.z_(1,1,1,1),this.m_.J_(0),this.G_.J_(1),this.x_.J_(2),this.g_.X_(0,0),this.y_.X_(1,1),this.w_.q_(0),this.S_.X_(0,0),this.b_.X_(0,0),this.T_.X_(0,0),this.__.X_(1,1),this.I_.X_(0,0),this.C_.X_(0,0),this.R_.X_(0,0),this.A_.X_(0,0),this.P_.X_(0,0),this.F_.q_(1),this.N_.q_(t.eb()),this.B_.q_(t.nb()),this.D_.q_(1),this.O_.q_(0),this.E_.q_(0),this.k_.X_(0,0),this.L_.X_(0,0),this.M_.q_(1);for(const t of a){const s=t[0],i=t[2],e=new Zu.Yw.f_(this,s,i);"color"===i?e.Y_(0,0,0):e.q_(0),this.V_.push(e)}this.h_?this.K_(h.Z_):(this.Q_(h.Z_,!0),this.tI(h.sI,!0));const l=h.iI;e.useProgram(l?l.jM:null)}Jh(){this.e_.deleteProgram(this.jM),this.jM=null,this.oM.wb(this),this.e_=null,super.Jh()}eI(){return this.e_}hI(){return this.jM}nI(){return this.V_.length}rI(t){return t<0||t>=this.V_.length?null:this.V_[t].oI()}aI(t){for(let s=0,i=t.length;s<i;++s)if(!this.V_[s].lI(t[s]))return!1;return!0}uI(t){for(let s=0,i=t.length;s<i;++s)this.V_[s].cI(t[s])}fI(t,s,i,e,h,n,r,o,a,l){return!(this.G_.j_()||this.P_.j_()&&!this.P_.dI(h,n)||this.T_.j_()&&!this.T_.dI(t.Za(),t.Qa())||this.__.j_()&&!this.__.dI(t.tl(),t.sl())||this.F_.j_()&&!this.F_.pI(r)||this.D_.j_()&&!this.D_.pI(o)||this.O_.j_()&&!this.O_.pI(a)||this.I_.j_()&&!this.I_.dI(s.Za(),s.Qa())||this.C_.j_()&&!this.C_.dI(s.tl(),s.sl())||this.R_.j_()&&!this.R_.dI(i.Za(),i.Qa())||this.A_.j_()&&!this.A_.dI(i.tl(),i.sl())||this.k_.j_()&&!this.k_.dI(e.Za(),e.Qa())||this.L_.j_()&&!this.L_.dI(e.Qa(),e.sl())||this.E_.j_()&&!this.E_.pI(l))}mI(t,s,i,e,h,n,r,o,a,l){this.G_.j_()||(this.P_.j_()&&this.P_.gI(h,n),this.T_.j_()&&this.T_.gI(t.Za(),t.Qa()),this.__.j_()&&this.__.gI(t.tl(),t.sl()),this.F_.j_()&&this.F_.yI(r),this.D_.j_()&&this.D_.yI(o),this.O_.j_()&&this.O_.yI(a),this.I_.j_()&&this.I_.gI(s.Za(),s.Qa()),this.C_.j_()&&this.C_.gI(s.tl(),s.sl()),this.R_.j_()&&this.R_.gI(i.Za(),i.Qa()),this.A_.j_()&&this.A_.gI(i.tl(),i.sl()),this.k_.j_()&&this.k_.gI(e.Za(),e.Qa()),this.L_.j_()&&this.L_.gI(e.Qa(),e.sl()),this.E_.j_()&&this.E_.yI(l))}Q_(t,s){this.U_&&!s||this.h_||(this.c_.j_()&&this.c_.wI(t),this.U_=!0)}SI(){this.U_=!1}tI(t,s){this.H_&&!s||this.h_||(this.d_.j_()&&this.d_.wI(t),this.H_=!0)}bI(){this.H_=!1}K_(t){if(!this.h_)throw new Error("not device transform shader");this.c_.wI(t);const s=this.oM,i=s.My()/2,e=s.xy()/2,h=s.gb(i,e,s.ZS(s.xy()),i,e,0,s.xy());this.d_.wI(h)}vI(t){this.p_.j_()&&this.p_.MI(t[0],t[1],t[2],t[3])}static GI(){return tc}static xI(t){return t?"\n#extension GL_EXT_conservative_depth : enable\nlayout (depth_greater) out highp float gl_FragDepth;\n\t":""}static TI(t){const s=t?"highp":"mediump";return["attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"attribute lowp vec4 aColor;","varying lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static _I(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"in lowp vec4 aColor;","out lowp vec4 vColor;","uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPos, 1.0);","\tvTex = aTex;","\tvColor = aColor;","}"].join("\n")}static II(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","}"].join("\n")}static CI(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static RI(t){return["#version 300 es",Zu.Yw.KT.xI(t),"in mediump vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static AI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","}"].join("\n")}static EI(){return["#extension GL_EXT_frag_depth : enable","varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static FI(t){return["#version 300 es",Zu.Yw.KT.xI(t),"in highp vec2 vTex;","out lowp vec4 outColor;","in lowp vec4 vColor;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * vColor;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static DI(t,s,i,e){let h="";return t>=2?h="#version 300 es\n"+Zu.Yw.KT.xI(e):(s&&(h="#extension GL_EXT_frag_depth : enable\n"),i&&(h+="#extension GL_EXT_shader_texture_lod : enable\n",h+="#extension GL_OES_standard_derivatives : enable\n")),h+`\nprecision highp float;\n${t>=2?"in":"varying"} vec2 vTex;\n${t>=2?"out lowp vec4 outColor;":""}\n${t>=2?"in":"varying"} lowp vec4 vColor;\nuniform lowp sampler2D samplerFront;\nuniform vec2 pixelSize;\n\nuniform vec2 tileSize;\nuniform vec2 tileSpacing;\nuniform float outlineThickness;\n\nconst float PI = 3.1415926;\n\nlowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)\n{\n\treturn (a + b + (a - b) * cos(x * PI)) / 2.0;\n}\n\nvec3 randVec3(vec2 seed)\n{\n\treturn vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),\n\t\t\t\tfract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));\n}\n\nlowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)\n{\n\tvec2 posRandom = tileSize;\n\tfloat angleRandom = outlineThickness;\n\t\n\tvec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;\n\t\n\tfloat angle = angleRandom * rand.z * PI;\n\tfloat sin_a = sin(angle);\n\tfloat cos_a = cos(angle);\n\tfloat aspect = pixelSize.x / pixelSize.y;\n\n\tvec2 mid = tile + vec2(0.5, 0.5);\n\tvec2 dp = uv - mid;\n\tdp.x /= aspect;\n\tvec2 r = vec2(dp.x * cos_a - dp.y * sin_a,\n\t\t\t\t  dp.y * cos_a + dp.x * sin_a);\n\tr.x *= aspect;\n\n\tvec2 p = mid + r + (posRandom * rand.xy / 2.0);\n\t\n\t${t>=2?"return textureGrad(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}\n\t${t<2&&!i?"return texture2D(samplerFront, p);":""}\n}\n\nvoid main(void) {\n\t\n\t${t<2?"lowp vec4 outColor;":""}\n\t\n\tfloat blendMarginX = tileSpacing.x;\n\tfloat blendMarginY = tileSpacing.y;\n\t\n\tvec2 tile = floor(vTex);\n\tvec2 tex = fract(vTex);\n\tvec2 ddx = ${t>=2||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};\n\tvec2 ddy = ${t>=2||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};\n\t\n\tvec4 curTile = sampleTile(tile, vTex, ddx, ddy);\n\t\n\tbool inLeftMargin = (tex.x < blendMarginX);\n\tbool inRightMargin = (tex.x > 1.0 - blendMarginX);\n\tbool inTopMargin = (tex.y < blendMarginY);\n\tbool inBottomMargin = (tex.y > 1.0 - blendMarginY);\n\t\n\tif (inLeftMargin)\n\t{\n\t\tlowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;\n\t\tlowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);\n\t\t\t\n\t\t\toutColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = leftMixedTile;\n\t\t}\n\t}\n\telse if (inRightMargin)\n\t{\n\t\tlowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);\n\t\tfloat rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);\n\t\tlowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);\n\t\t\n\t\tif (inTopMargin)\n\t\t{\n\t\t\tlowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t\t}\n\t\telse if (inBottomMargin)\n\t\t{\n\t\t\tlowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);\n\t\t\tlowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);\n\t\t\t\n\t\t\toutColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t\t}\n\t\telse\n\t\t{\n\t\t\toutColor = rightMixedTile;\n\t\t}\n\t}\n\telse if (inTopMargin)\n\t{\n\t\tlowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);\n\t}\n\telse if (inBottomMargin)\n\t{\n\t\tlowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);\n\t\toutColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));\n\t}\n\telse\n\t{\n\t\toutColor = curTile;\n\t}\n\t\n\toutColor *= vColor;\n\t${t<2?"gl_FragColor = outColor;":""}\n\t${t>=2?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n\t${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}\n}\n`}static OI(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static kI(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static LI(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static NI(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static BI(t){return["#version 300 es",Zu.Yw.KT.xI(t),"uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static WI(){return["varying lowp vec4 vColor;","void main(void) {","\tgl_FragColor = vColor;","}"].join("\n")}static jI(){return["precision lowp float;","varying mediump vec2 vTex;","varying vec4 vColor;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(vColor.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(vColor.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static VI(){return["precision lowp float;","varying highp vec2 vTex;","varying vec4 vColor;","void main(void) {","\thighp float grad = vTex.x / (1.0 - vTex.y);","\tgl_FragColor = vColor * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);","}"].join("\n")}static UI(){return["varying mediump vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = vColor * f;","}"].join("\n")}static HI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = vColor * f;","}"].join("\n")}static zI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp float innerF = step(distSq, 0.25);","\thighp vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}static JI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 innerEdge = halfNorm - pixelSize * norm;","\thighp vec2 innerEdgeSq = innerEdge * innerEdge;","\thighp float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = vColor * f;","}"].join("\n")}static XI(){return["varying highp vec2 vTex;","varying lowp vec4 vColor;","uniform highp vec2 pixelSize;","uniform highp float outlineThickness;","void main(void) {","\thighp vec2 diff = vTex - vec2(0.5, 0.5);","\thighp vec2 diffSq = diff * diff;","\thighp float distSq = diffSq.x + diffSq.y;","\thighp vec2 norm = normalize(diff);","\thighp vec2 halfNorm = norm * 0.5;","\thighp vec2 halfNormSq = halfNorm * halfNorm;","\thighp vec2 pxNorm = pixelSize * norm;","\thighp vec2 innerEdge1 = halfNorm - pxNorm;","\thighp vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\thighp float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\thighp vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\thighp vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\thighp vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\thighp vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\thighp float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = vColor * innerF * outerF;","}"].join("\n")}}}{const sc=self._s,ic=self.rs.fs,ec=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);sc.Yw.f_=class{constructor(t,s,i){if(!ec.has(i))throw new Error("invalid uniform type");this.IG=t,this.e_=this.IG.eI(),this.Yh=s,this.Jc=i,this.qI="color"===this.Jc,this.YI=this.e_.getUniformLocation(this.IG.hI(),s),this.$I=!!this.YI;const e=ec.get(i);this.KI=new Float32Array(e),this.ZI=new Float32Array(e)}Jh(){this.IG=null,this.e_=null,this.YI=null}j_(){return this.$I}oI(){return this.Jc}QI(){return this.qI}q_(t){this.j_()&&(this.KI[0]=t,this.ZI.set(this.KI),this.e_.uniform1f(this.YI,t))}J_(t){this.j_()&&(this.KI[0]=t,this.ZI.set(this.KI),this.e_.uniform1i(this.YI,t))}X_(t,s){this.j_()&&(this.KI[0]=t,this.KI[1]=s,this.ZI.set(this.KI),this.e_.uniform2f(this.YI,t,s))}Y_(t,s,i){this.j_()&&(this.KI[0]=t,this.KI[1]=s,this.KI[2]=i,this.ZI.set(this.KI),this.e_.uniform3f(this.YI,t,s,i))}z_(t,s,i,e){this.j_()&&(this.KI[0]=t,this.KI[1]=s,this.KI[2]=i,this.KI[3]=e,this.ZI.set(this.KI),this.e_.uniform4f(this.YI,t,s,i,e))}tC(t){t=Math.fround(t);const s=this.KI;s[0]!==t&&(s[0]=t,this.e_.uniform1f(this.YI,t))}sC(t){const s=this.KI;s[0]!==t&&(s[0]=t,this.e_.uniform1i(this.YI,t))}iC(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.KI;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.e_.uniform2f(this.YI,t,s))}eC(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.KI;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.e_.uniform3f(this.YI,t,s,i))}MI(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.KI;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.e_.uniform4f(this.YI,t,s,i,e))}wI(t){const s=this.KI;ic.F(s,t)||(sc.yr(s,t,0),this.e_.uniformMatrix4fv(this.YI,!1,t))}lI(t){const s=this.ZI;return this.QI()?s[0]===Math.fround(t.Lo())&&s[1]===Math.fround(t.No())&&s[2]===Math.fround(t.Bo()):s[0]===Math.fround(t)}cI(t){const s=this.ZI;this.QI()?(s[0]=t.Lo(),s[1]=t.No(),s[2]=t.Bo()):s[0]=t}pI(t){return this.ZI[0]===Math.fround(t)}dI(t,s){const i=this.ZI;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}yI(t){this.ZI[0]=t}gI(t,s){const i=this.ZI;i[0]=t,i[1]=s}}}{const hc=self._s,nc=self.rs,rc=(nc.ws,nc.fs);hc.Yw.hC=class{constructor(t){this.nC=t,this.sI=rc.create(),this.Z_=rc.create(),this.ET=null,this.FT=null,this.rC=!1,this.iI=null,this.oC=new hc.Rect,this.clearColor=hc.zh(hc.Go,0,0,0,0)}},hc.Yw.aC=class{constructor(t){const s=new ArrayBuffer(96);this.Jc=0,this.lC=t,this.e_=t.nC.jx(),this.uC=0,this.cC=0,this.fC=null,this.dC=new Float32Array(s,0,16),this.pC=new Float32Array(s,64,4),this.mC=new Float32Array(s,80,4),this.gC=[]}yC(t,s){this.Jc=1,this.uC=t,this.cC=s}wC(){const t=this.e_;t.drawElements(t.TRIANGLES,this.cC,t.UNSIGNED_SHORT,this.uC)}SC(t){this.Jc=2,this.fC=t}bC(){const t=this.e_,s=this.fC;t.bindTexture(t.TEXTURE_2D,s?s.sT():null)}vC(t){this.Jc=20,t.Vo(this.pC,0)}MC(){const t=this.pC,s=this.lC.iI;s.v_.j_()&&s.v_.MI(t[0],t[1],t[2],t[3])}GC(t,s){this.Jc=3,this.uC=t,this.cC=s}xC(){this.e_.blendFunc(this.uC,this.cC)}TC(t,s,i,e){this.Jc=4;const h=this.pC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}_C(){const t=this.pC;this.e_.viewport(t[0],t[1],t[2],t[3])}IC(t){this.Jc=5,rc.m(this.dC,t)}CC(){const t=this.lC,s=t.nC.SS,i=t.iI,e=this.dC;for(let t=0,h=s.length;t<h;++t){const h=s[t];h===i?h.Q_(e,!0):h.SI()}rc.m(t.Z_,e)}RC(t){this.Jc=6,rc.m(this.dC,t)}AC(){const t=this.lC,s=t.nC.SS,i=t.iI,e=this.dC;for(let t=0,h=s.length;t<h;++t){const h=s[t];h===i?h.tI(e,!0):h.bI()}rc.m(t.sI,e)}PC(t){this.Jc=7,this.fC=t}EC(){const t=this.e_,s=this.fC,i=this.lC;s?(i.ET=s.DT(),i.FT=s.OT(),i.rC&&i.FT?t.bindFramebuffer(t.FRAMEBUFFER,i.FT):t.bindFramebuffer(t.FRAMEBUFFER,i.ET)):(i.ET=null,i.FT=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}FC(t){this.Jc=8,t.Vo(this.dC,0)}DC(t,s,i,e){this.Jc=8;const h=this.dC;h[0]=t,h[1]=s,h[2]=i,h[3]=e}OC(){const t=this.e_,s=this.dC,i=this.lC.clearColor,e=s[0],h=s[1],n=s[2],r=s[3];i.Xo(e,h,n,r)||(t.clearColor(e,h,n,r),i.Co(e,h,n,r)),t.clear(t.COLOR_BUFFER_BIT)}kC(t){this.Jc=14,t.Vo(this.dC,0)}LC(){const t=this.dC;this.lC.oC.set(t[0],t[1],t[2],t[3])}NC(t,s,i){this.Jc=9,this.uC=t,this.cC=1,this.dC[0]=s,i.Vo(this.pC,0)}BC(){const t=this.e_,s=this.lC,i=s.nC.MS;t.useProgram(i.jM),i.Q_(s.Z_,!1),i.tI(s.sI,!1);const e=s.oC;i.g_.j_()&&i.g_.iC(e.Za(),e.Qa()),i.y_.j_()&&i.y_.iC(e.tl(),e.sl());const h=this.dC[0];if(i.w_.j_()&&i.w_.tC(h),i.p_.j_()){const t=this.pC;i.p_.MI(t[0],t[1],t[2],t[3])}t.drawArrays(t.POINTS,this.uC/4,this.cC),t.useProgram(s.iI.jM)}WC(t){this.Jc=10,this.fC=t}jC(){const t=this.e_,s=this.lC,i=this.fC;s.iI=i,t.useProgram(i.jM),i.Q_(s.Z_,!1),i.tI(s.sI,!1)}VC(){this.Jc=11}UC(){const t=this.lC.iI,s=this.e_,i=this.dC,e=this.pC,h=this.mC;if(t.G_.j_()){const t=this.lC.nC,i=this.fC;t.HC!==i&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,i?i.sT():null),t.HC=i,s.activeTexture(s.TEXTURE0))}t.P_.j_()&&t.P_.iC(i[0],i[1]),t.T_.j_()&&t.T_.iC(i[2],i[3]),t.__.j_()&&t.__.iC(i[4],i[5]),t.F_.j_()&&t.F_.tC(this.cC),t.D_.j_()&&t.D_.tC(i[6]),t.O_.j_()&&t.O_.tC(i[7]),t.I_.j_()&&t.I_.iC(i[12],i[13]),t.C_.j_()&&t.C_.iC(i[14],i[15]),t.R_.j_()&&t.R_.iC(h[0],h[1]),t.A_.j_()&&t.A_.iC(h[2],h[3]),t.k_.j_()&&t.k_.iC(e[0],e[1]),t.L_.j_()&&t.L_.iC(e[2],e[3]),t.E_.j_()&&t.E_.tC(this.uC)}zC(){this.Jc=12}JC(){const t=this.lC.iI.V_,s=this.gC;for(let i=0,e=t.length;i<e;++i){const e=t[i],h=s[i];e.QI()?e.eC(h.Lo(),h.No(),h.Bo()):e.tC(h)}}XC(t){this.Jc=13,this.fC=t}qC(){const t=this.e_,s=this.fC,i=this.lC.ET;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}YC(t,s,i){this.Jc=16;const e=this.dC,h=this.lC.nC;e[0]=t.My(),e[1]=t.xy(),e[2]=s?s.My():h.My(),e[3]=s?s.xy():h.xy(),e[4]=t.NT()?1:0,e[5]="stretch"===i;const n=this.gC;hc.Sr(n),n.push(t.DT()),n.push(s?s.DT():null)}$C(){const t=this.dC,s=this.gC,i=this.e_,e=t[0],h=t[1],n=t[2],r=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,n,r,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const t=Math.min(e,n),s=Math.min(h,r),o=Math.max(h-r,0),a=Math.max(r-h,0);i.blitFramebuffer(0,o,t,s+o,0,a,t,s+a,i.COLOR_BUFFER_BIT,i.NEAREST)}}KC(t){this.Jc=17,this.fC=t}ZC(){this.fC.QC(),this.fC=null}tR(t){this.Jc=18,this.fC=t}sR(){this.fC.iR(),this.fC=null}eR(t,s,i){this.Jc=19;const e=this.dC;e[0]=t,e[1]=s,e[2]=i}hR(){const t=this.lC.iI,s=this.dC;t.P_.j_()&&t.P_.iC(s[0],s[1]),t.M_.j_()&&t.M_.tC(s[2])}nR(t,s,i,e,h,n,r){this.Jc=15;const o=this.dC;t.Vo(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=n/s,o[9]=r/i}rR(){const t=this.lC.iI,s=this.dC;t.I_.j_()&&t.I_.iC(s[0],s[1]),t.P_.j_()&&t.P_.iC(s[4],s[5]),t.S_.j_()&&t.S_.iC(s[6],s[7]),t.b_.j_()&&t.b_.iC(s[8],s[9])}oR(t,s,i,e,h,n,r){this.Jc=28;const o=this.dC;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=n,o[6]=r}aR(){const t=this.lC.iI,s=this.dC;t.P_.j_()&&t.P_.iC(s[0],s[1]),t.S_.j_()&&t.S_.iC(s[2],s[3]),t.M_.j_()&&t.M_.tC(s[4]),t.b_.j_()&&t.b_.iC(s[5],s[6])}lR(t){this.Jc=21,this.uC=t?1:0}uR(){const t=this.e_,s=0!==this.uC;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}cR(t){this.Jc=22,this.uC=t?1:0}fR(){const t=this.e_;0===this.uC?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}dR(t){this.Jc=23,this.uC=t?1:0}pR(){const t=this.e_,s=this.lC,i=s.nC,e=0!==this.uC;s.rC=e,t.activeTexture(t.TEXTURE2),e?(s.FT&&t.bindFramebuffer(t.FRAMEBUFFER,s.FT),t.bindTexture(t.TEXTURE_2D,i.IT())):(t.bindTexture(t.TEXTURE_2D,null),s.FT&&t.bindFramebuffer(t.FRAMEBUFFER,s.ET)),t.activeTexture(t.TEXTURE0)}mR(){this.Jc=24}gR(){const t=this.e_;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}yR(){this.Jc=25}wR(){const t=this.e_;t.enable(t.STENCIL_TEST),t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}SR(){this.Jc=26}bR(){const t=this.e_;t.disable(t.STENCIL_TEST)}vR(t,s,i,e,h){this.Jc=27,this.uC=t?1:0;const n=this.dC;n[0]=s,n[1]=i,n[2]=e,n[3]=h}MR(){const t=this.e_,s=this.dC;1===this.uC?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}GR(t){this.Jc=29,this.uC=t}xR(){const t=this.e_,s=this.uC;0===s?t.disable(t.CULL_FACE):(t.enable(t.CULL_FACE),1===s?t.cullFace(t.BACK):t.cullFace(t.FRONT))}TR(t){this.Jc=30,this.uC=t}_R(){const t=this.e_;t.frontFace(0===this.uC?t.CW:t.CCW)}IR(){switch(this.Jc){case 1:return void this.wC();case 2:return void this.bC();case 3:return void this.xC();case 4:return void this._C();case 5:return void this.CC();case 6:return void this.AC();case 7:return void this.EC();case 8:return void this.OC();case 9:return void this.BC();case 10:return void this.jC();case 11:return void this.UC();case 12:return void this.JC();case 13:return void this.qC();case 14:return void this.LC();case 15:return void this.rR();case 16:return void this.$C();case 17:return void this.ZC();case 18:return void this.sR();case 19:return void this.hR();case 20:return void this.MC();case 21:return void this.uR();case 22:return void this.fR();case 23:return void this.pR();case 24:return void this.gR();case 25:return void this.wR();case 26:return void this.bR();case 27:return void this.MR();case 28:return void this.aR();case 29:return void this.xR();case 30:return void this._R()}}}}{let oc=function(t,s,i,e,h,n){s?t.strokeRect(i,e,h,n):t.fillRect(i,e,h,n)},ac=function(t){return t*(4/3)},lc=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};0;const uc=self._s,cc=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),fc={timeout:60},dc=new uc.Go(0,0,0,1),pc=new Set(["left","center","right"]),mc=new Set(["top","center","bottom"]),gc=new Set(["word","cjk","character"]),yc=new Set(["ltr","rtl"]),wc=new Set;uc.CR&&uc.CR.addEventListener("fontload",t=>{const s=t.font.Rc();for(const t of wc)(t.RR()||uc.Ke(t.AR(),s))&&(t.PR(),t.ER())});let Sc=!1,bc=!1;uc.Yw.nM=class{constructor(t,s){s=Object.assign({},fc,s),this.oM=t,this.FR="Arial",this.DR=16,this.OR=1,this.kR=0,this.LR=!1,this.NR=!1,this.BR="black",this.WR=!1,this.Yg=null,this.jR=!0,this.VR=null,this.UR=new Set,this.HR="left",this.zR="top",this.Bc="",this.JR=null,this.XR=uc.zh(uc.Xg),this.qR="word",this.YR="ltr",this.$R=!1,this.KR=!1,this.ZR=!1,this.QR=!1,this.tA=-1,this.sA=0,this.iA=0,this.eA=0,this.jy=0,this.Vy=0,this.hA=1,this.nA=null,this.rA=null,this.oA=null,this.aA=null,this.lA=-1,this.uA=-1,this.cA="",this.fA="",this.dA="",this.pA=1,this.mA=1,this.gA=t=>this.yA(t),this.wA=new Map,this.SA=new uc.Df(()=>this.ER(!0),2),this.Ax=null,this.bA=!0,this.vA=new uc.Rect,this.MA=1,this.GA=new uc.Df(()=>{this.xA(),this.TA(8,8),this._A()},s.timeout),this.IA=null,this.CA=!1,wc.add(this)}Jh(){this.VR=null,this.UR.clear(),this.Yg=null,this.JR=null,this.nA=null,this.rA=null,this.oA=null,this.aA=null,this.gA=null,this.ER(),this.SA.Jh(),this.GA.Jh(),this.IA=null,this.xA(),this.XR.Ru(),this.XR=null,this.oM=null,this.CA=!0,wc.delete(this)}_A(){this.ZR=!0}RA(){this._A(),this.KR=!0}PR(){this.RA(),this.$R=!0}AA(t){if(t=!!t,this.WR===t)return;this.WR=t;const s=this.WR?"alphabetic":"top";this.rA&&(this.rA.textBaseline=s),this.oA&&(this.oA.textBaseline=s),this.ER(),this.PR()}RR(){return this.WR}sy(t){this.Yg!==t&&(this.Yg=t,this.XR.sy(t),this.Yg&&this.Yg.kw()&&this.Yg.Lw().then(()=>this._A()),this.PR())}PA(t){t=!!t,this.jR!==t&&(this.jR=t,this._A())}EA(t){t||(t="serif"),this.FR!==t&&(this.FR=t,this.ER(),this.PR())}AR(){return this.FR}FA(t){t<.1&&(t=.1),this.DR!==t&&(this.DR=t,this.ER(),this.PR())}DA(){return this.DR}OA(t){this.OR!==t&&(this.OR=t,this.ER(),this.PR())}kA(t){this.kR!==t&&(this.kR=t,this.RA())}LA(){return this.kR}NA(t){t=!!t,this.LR!==t&&(this.LR=t,this.ER(),this.PR())}BA(){return this.LR}WA(t){t=!!t,this.NR!==t&&(this.NR=t,this.ER(),this.PR())}jA(){return this.NR}VA(t){t=Math.floor(t),this.tA!==t&&(this.tA=t,this._A())}UA(){return this.tA}HA(t,s){let i=[];(this.LR||s.ew("b"))&&i.push("bold"),(this.NR||s.ew("i"))&&i.push("italic");const e=s.iw("size"),h=(e?parseFloat(e.Rg):this.DR)*this.OR;t?i.push(h+"pt"):i.push(h*this.zA()+"pt");let n=this.FR;const r=s.iw("font");return r&&r.Rg&&(n=r.Rg,this.VR&&!this.UR.has(n)&&(this.VR(n),this.UR.add(n))),n&&(cc.has(n)?i.push(n):i.push('"'+n+'"')),i.join(" ")}$M(t){t instanceof uc.Go&&(t=t.ta()),this.BR!==t&&(this.BR=t,this._A())}JA(t,s,i){dc.Ro(t,s,i),this.$M(dc)}XA(t){if(!pc.has(t))throw new Error("invalid horizontal alignment");this.HR!==t&&(this.HR=t,this.RA())}qA(){return this.HR}YA(t){if(!mc.has(t))throw new Error("invalid vertical alignment");this.zR!==t&&(this.zR=t,this.RA())}$A(){return this.zR}KA(t){if(!gc.has(t))throw new Error("invalid word wrap mode");this.qR!==t&&(this.qR=t,this.ER(),this.PR())}ZA(){return this.qR}QA(t){if(!yc.has(t))throw new Error("invalid text direction");this.YR!==t&&(this.YR=t,this.rA&&(this.rA.direction=this.YR),this.oA&&(this.oA.direction=this.YR),this.ER(),this.PR())}tP(){return this.YR}Vc(t){this.Bc!==t&&(this.Bc=t,this.ER(),this.PR())}sP(){return this.Bc}zA(){return this.MA*this.hA*self.devicePixelRatio}iP(t){t=!!t,this.bA!==t&&(this.bA=t,this.QR=!0)}eP(){return this.bA}hP(t,s,i){if(void 0===i&&(i=1),t<=0||t<=0)return;if(this.iA===t&&this.eA===s&&this.hA===i)return;const e=this.iA;this.iA=t,this.eA=s,this.hA=i;const h=self.devicePixelRatio;this.jy=this.iA*this.hA*h,this.Vy=this.eA*this.hA*h;const n=Math.max(this.jy,this.Vy),r=Math.min(this.oM.Wx(),4096);let o=1;n>r&&(o=r/n,this.jy=Math.min(this.jy*o,r),this.Vy=Math.min(this.Vy*o,r)),this.MA=o,this.iA!==e?this.PR():this.RA()}My(){return this.jy}xy(){return this.Vy}nP(){return this.hA}rP(){return this.oP(),this.XR.By()}aP(){return this.oP(),this.XR.Wy()+this.XR.ty()*(this.kR+4)-this.kR}lP(){this.oP();let t=0;for(const s of this.XR.Qg())for(const i of s.kg())t+=i.iy();return t}kT(){return this.GA.Bf(),this.uP(),this.Ax}cP(t,s){this.oP();const i=this.zA(),e=this.XR.Qg();for(const h of e){const e=h._y()*i;if(s>=h.Qy()-h.xy()*i+e&&s<h.Qy()+e)for(const s of h.kg())if(t>=s.Ky()&&t<s.Ky()+s.My()*i)return s}return null}*fP(t){this.oP();const s=this.XR.Qg();for(const i of s)for(const s of i.kg()){const i=s.iw("tag");i&&uc.Ke(i.Rg,t)&&(yield s)}}dP(t,s){for(const i of this.fP(t)){if(0===s)return i;--s}return null}pP(t){let s=0;for(const i of this.fP(t))++s;return s}uP(){(!this.Ax||this.ZR||this.KR||this.$R||this.QR)&&(this.CA||this.jy<=0||this.Vy<=0||this.mP())}mP(){this.CA||(this.oP(),this.TA(Math.max(uc.vn(Math.ceil(this.jy)),128),Math.max(uc.vn(Math.ceil(this.Vy)),64)),this.gP(),this.yP(),this.GA.Bf())}TA(t,s){this.nA||(this.nA=uc.uo(16,16));let i=!1;this.lA===t&&this.uA===s||(this.lA=t,this.uA=s,this.nA.width=t,this.nA.height=s,i=!0),this.rA||(this.rA=this.nA.getContext("2d"),i=!0),i?(this.rA.textBaseline=this.WR?"alphabetic":"top",this.rA.direction=this.YR,this.rA.font=this.cA,this.rA.fillStyle=this.dA,this.rA.strokeStyle=this.dA,this.rA.globalAlpha=this.pA,this.rA.lineWidth=this.mA):this.rA.clearRect(0,0,t,s)}wP(){this.oA||(this.oA=uc.uo(16,16).getContext("2d"),this.aA=uc.uo(16,16).getContext("2d"),this.oA.textBaseline=this.WR?"alphabetic":"top",this.aA.textBaseline="top",this.oA.direction=this.YR,this.aA.direction=this.YR)}SP(t){this.fA!==t&&(this.fA=t,this.oA.font=t,this.aA.font=t)}bP(){if(!Sc){Sc=!0,this.wP();const t=this.oA.measureText("test");bc="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return bc}oP(){this.vP(),this.MP()}vP(){this.$R&&(this.wP(),!this.WR||this.JR&&this.JR.toString()===this.Bc||(this.JR=new uc.dh(this.Bc,{pg:!0})),this.SA.Bf(),this.XR.Xg(this.WR?this.JR.Ig():this.Bc,this.gA,this.iA,this.qR,0),this.$R=!1)}MP(){this.KR&&(this.GP(),this.KR=!1)}ER(t){this.wA.clear(),t||this.SA.Wf()}xP(t,s){const i=this.wA;if(i.set(t,s),i.size>1e3){let t=0;for(const s of i.keys())if(i.delete(s),t++,t>=10)break}}yA(t){const s=t.Ug()?t.Jg().join(""):" ",i=this.HA(!0,t),e=i+"|"+s,h=this.wA;let n=h.get(e);if(n)return h.delete(e),h.set(e,n),n;this.SP(i);const r=this.oA.measureText(s);let o=0;if(this.WR&&this.bP()){const t=this.aA.measureText(s);o=r.fontBoundingBoxAscent-t.fontBoundingBoxAscent}const a=t.iw("size"),l=(a?parseFloat(a.Rg):this.DR)*this.OR;return n={width:r.width,height:ac(l),fontBoundingBoxAscent:r.fontBoundingBoxAscent||0,fontBoundingBoxDescent:r.fontBoundingBoxDescent||0,Lg:o},this.xP(e,n),n}TP(t){this.cA!==t&&(this.cA=t,this.rA.font=t)}_P(t){this.dA!==t&&(this.dA=t,this.rA.fillStyle=t,this.rA.strokeStyle=t)}IP(t){this.pA!==t&&(this.pA=t,this.rA.globalAlpha=t)}CP(t){this.mA!==t&&(this.mA=t,this.rA.lineWidth=t)}GP(){const t=this.zA(),s=(4+this.kR)*t;let i=0;const e=this.XR.Qg();if(0===e.length)return;for(const t of e){t.$y(NaN),t.Zy(NaN);for(const s of t.kg())s.$y(NaN),s.Zy(NaN)}const h=this.WR&&this.bP();let n=e[0].xy()*t;if("center"===this.zR){const r=e.reduce((i,e)=>i+e.xy()*t+s,0)-s;i=Math.max(this.Vy/2-r/2,0),h&&(n=e[0].Iy()*t)}else if("bottom"===this.zR){const n=e.reduce((i,e)=>i+e.xy()*t+s,0)-this.kR*t,r=h?e.at(-1)._y()*t:0;i=this.Vy-n-r-2}for(let h=0,r=e.length;h<r;++h){const r=e[h],o=r.xy()*t,a=i;if(this.WR){if(i+=0===h?n:o,h>0&&i>this.Vy-4*t)break}else if(h>0&&i>=this.Vy-o)break;a>=0&&this.RP(r,i,t),this.WR||(i+=o),i+=s}}RP(t,s,i){let e=0;"center"===this.HR?e=Math.floor((this.jy-t.My()*i)/2):"right"===this.HR&&(e=this.jy-t.My()*i),t.$y(e),t.Zy(s);for(const h of"ltr"===this.YR?t.kg():t.qy())this.AP(h,e,s,i),e+=h.My()*i}AP(t,s,i,e){const h=t.iw("offsetx");s+=h?lc(h.Rg,t.xy())*e:0;const n=t.iw("offsety");if(i+=n?lc(n.Rg,t.xy())*e:0,t.Sy()){const s=t.iw("iconoffsety");i+=s?lc(s.Rg,t.xy())*e:.2*t.xy()*e}t.$y(s),t.Zy(i)}gP(){if(!this.ZR)return;this.rA.imageSmoothingEnabled=this.jR,this.rA.imageSmoothingQuality="high",this.sA=0;const t=this.zA(),s=this.XR.Qg();for(const i of s)this.PP(i,t);this.ZR=!1}PP(t,s){const i=t.Ky(),e=t.Qy();if(Number.isFinite(i)&&Number.isFinite(e))for(const i of"ltr"===this.YR?t.kg():t.qy())this.EP(i,s,t.xy())}EP(t,s,i){const e=this.rA,h=t.Ky(),n=t.Qy();if(!Number.isFinite(h)||!Number.isFinite(n))return;const r=i/16;let o=t.My()*s;const a=t.xy()*s,l=t.xy()/16,u=(4+this.kR)*s;let c=t.Ug()?t.Jg():null;if(-1!==this.tA){if(this.sA>=this.tA)return;t.Ug()&&this.sA+c.length>this.tA&&(c=c.slice(0,this.tA-this.sA),o=this.yA(t).width*s),this.sA+=t.iy()}const f=t.iw("background"),d=t.ew("u"),p=t.ew("s");if(t.Ug()&&uc.bm(c)&&!f&&!d&&!p||t.ew("hide"))return;const m=t.iw("color"),g=t.iw("opacity");this.IP(g?parseFloat(g.Rg)/100:1),f&&(this._P(f.Rg),e.fillRect(h,n-a,o,a+u));const y=t.iw("linethickness"),w=y?parseFloat(y.Rg):1,S=t.ew("stroke");if(S&&this.CP(.5*l*w*this.zA()),t.Ug()){const s=c.join("");if(this.TP(this.HA(!1,t)),!S){this.CP(.5*l*w*this.zA());const i=t.iw("outlineback");i&&(this._P(i.Rg),this.FP(!0,s,h,n,o))}if(this._P(m?m.Rg:this.BR),this.FP(S,s,h,n,o),!S){this.CP(.5*l*w*this.zA());const i=t.iw("outline");i&&(this._P(i.Rg),this.FP(!0,s,h,n,o))}}else if(t.Sy()&&t.My()>0){const s=t.fw(this.Yg);s&&e.drawImage(s,h,n-a,o,a)}if(this._P(m?m.Rg:this.BR),d&&oc(e,S,h,n+s*r,o,s*r*w),p){const t=s*l,i=n-a/4+t/2;e.fillRect(h,i-t*w/2,o,t*w)}}FP(t,s,i,e,h){"rtl"===this.YR&&(i+=h),t?"Gecko"===uc.Ks.ei?this.rA.strokeText(s,i,e,h):this.rA.strokeText(s,i,e):"Gecko"===uc.Ks.ei?this.rA.fillText(s,i,e,h):this.rA.fillText(s,i,e)}yP(){this.oM.DP()||(this.Ax&&!this.QR||(this.xA(),this.Ax=this.oM._T(this.nA.width,this.nA.height,{Tx:this.bA,_x:"high"}),this.QR=!1),this.oM.OP(this.nA,this.Ax),this.vA.set(0,0,this.jy/this.Ax.My(),this.Vy/this.Ax.xy()),this.IA&&this.IA())}kP(){return this.vA}xA(){this.Ax&&(this.oM.DP()||this.oM.AT(this.Ax),this.Ax=null)}static KM(){for(const t of wc)t.xA()}static LP(){return wc.values()}}}{const vc=self._s;class Mc{constructor(t){this.e_=t.jx(),this.NP=t.Vx(),this.BP=t.WP(),this.jP=null,this.Nf=!1,this.VP=!1,this.UP=0,1===this.NP?this.jP=this.BP.createQueryEXT():this.jP=this.e_.createQuery()}Jh(){this.HP(),this.e_=null,this.BP=null,this.VP=!1}HP(){this.jP&&(1===this.NP?this.BP.deleteQueryEXT(this.jP):this.e_.deleteQuery(this.jP),this.jP=null)}QC(){if(this.Nf)throw new Error("query already active");1===this.NP?this.BP.beginQueryEXT(this.BP.TIME_ELAPSED_EXT,this.jP):this.e_.beginQuery(this.BP.TIME_ELAPSED_EXT,this.jP),this.Nf=!0}iR(){if(!this.Nf)throw new Error("query not active");1===this.NP?this.BP.endQueryEXT(this.BP.TIME_ELAPSED_EXT):this.e_.endQuery(this.BP.TIME_ELAPSED_EXT),this.Nf=!1}zP(){if(!this.jP||this.VP||this.Nf)return;let t=!1;t=1===this.NP?this.BP.getQueryObjectEXT(this.jP,this.BP.QUERY_RESULT_AVAILABLE_EXT):this.e_.getQueryParameter(this.jP,this.e_.QUERY_RESULT_AVAILABLE);const s=this.e_.getParameter(this.BP.GPU_DISJOINT_EXT);t&&!s&&(1===this.NP?this.UP=this.BP.getQueryObjectEXT(this.jP,this.BP.QUERY_RESULT_EXT):this.UP=this.e_.getQueryParameter(this.jP,this.e_.QUERY_RESULT),this.UP/=1e9,this.VP=!0),(t||s)&&this.HP()}JP(){return this.VP}XP(){if(!this.VP)throw new Error("no result available");return this.UP}}vc.Yw.qP=class{constructor(t){this.oM=t,this.zS=t.Xv(),this.Nf=!1,this.YP=null,this.$P=!1,this.KP=null,this.ZP=[]}Jh(){for(const t of this.ZP)t instanceof Mc&&t.Jh();vc.Sr(this.ZP),this.YP=null,this.KP=null,this.oM=null}QC(){if(this.Nf)throw new Error("query already active");const t=this.oM.QP();t.length>0?(this.$P=!0,this.YP=t.at(-1),this.YP.tE(),this.YP.ZP.push(this)):(this.$P=!1,this.YP=null),this.Nf=!0,t.push(this),this.sE()}iR(){if(!this.Nf)throw new Error("query not active");if(this.oM.QP().pop()!==this)throw new Error("can only end most nested query");this.Nf=!1,this.tE(),this.YP&&(this.YP.sE(),this.YP=null)}sE(){this.KP=vc.zh(Mc,this.oM),this.ZP.push(this.KP),this.KP.QC()}tE(){this.KP.iR(),this.KP=null}zP(){for(const t of this.ZP)t.zP()}iE(){return this.$P}JP(){return this.ZP.every(t=>t.JP())}XP(){return this.ZP.reduce((t,s)=>t+s.XP(),0)}Xv(){return this.zS}}}{const Gc=self._s;Gc.Yw.eE=class{constructor(t,s=1e3){this.oM=t,this.hE=s,this.nE=[],this.oM.rE(this)}Jh(){this.Ru(),this.oM.oE(this),this.oM=null}Ru(){for(const t of this.nE)t.Jh();Gc.Sr(this.nE)}aE(){const t=new Gc.Yw.qP(this.oM);return this.nE.push(t),this.nE.length>this.hE&&this.nE.shift().Jh(),t}lE(t){for(const s of this.nE){if(s.Xv()>=t)return;if(s.iE())return;s.zP()}}uE(t,s){if(s<=t)return NaN;let i=0;for(const e of this.nE){if(e.Xv()>=s)break;if(!(e.Xv()<t)){if(!e.JP())return NaN;i+=e.XP()}}return i}cE(t){for(let s=0,i=this.nE.length;s<i;++s){const i=this.nE[s];if(!(i.Xv()<t))return void(s>0&&this.nE.splice(0,s));i.Jh()}}}}{let xc=function(){Nc=-1;for(const t of Lc)t.fE()&&(t.resolve(),Lc.delete(t));Lc.size>0&&(Nc=self.requestAnimationFrame(xc))};0;const Tc=self._s,_c=(self.assert,self.rs),Ic=(_c.ys,_c.ws),Cc=_c.fs,Rc={powerPreference:"default",dE:!0,alpha:!1,depth:!1,pE:!1,mE:2,failIfMajorPerformanceCaveat:!1},Ac=new Set(["default","low-power","high-performance"]),Pc=new Tc.Cl(0,0,1,0,1,1,0,1),Ec=Cc.create(),Fc=Cc.create(),Dc=new Tc.Cl,Oc=new Tc.Rect;let kc=null;Tc.Os&&(self.gE=function(){kc?kc.loseContext():console.warn("WEBGL_lose_context not supported")},self.yE=function(){kc?kc.restoreContext():console.warn("WEBGL_lose_context not supported")});const Lc=new Set;let Nc=-1;Tc.Yw.wE=class extends Tc.Yw.cS{constructor(t,s){if(super(s),s=Object.assign({},Rc,s),!Ac.has(s.powerPreference))throw new Error("invalid power preference");const i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat};let e=null,h=0;if(s.mE>=2&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.e_=e,this.SE=e.getContextAttributes(),this.bE=e.getParameter(e.VERSION),this.NP=h,this.vE=Ic.create(),this.ME=!1,this.GE=Cc.create(),this.xE=!!s.depth,this.TE=!(!s.depth||!s.pE),this._E=this.xE,this.IE=!1,this.CE=null,this.RE=!0,this.AE=0,this.PE=0,this.r_=null,this.o_=null,this.a_=null,this.EE=null,this.u_=null,this.FE=this.NP>=2&&void 0!==globalThis.Float16Array,this.DE=new Float32Array(196605),this.OE=new Uint16Array(393210),this.kE=new Float32Array(131070),this.LE=this.FE?new globalThis.Float16Array(262140):new Float32Array(262140),this.NE=new Float32Array(32e3),this.BE=0,this.WE=0,this.jE=0,this.VE=null,this.UE=null,this.HE=[],this.zE=0,this.JE=0,this.XE=null,this.qE=0,this.lC=Tc.zh(Tc.Yw.hC,this),this.YE=Tc.zh(Tc.Go,1,1,1,1),this.$E=null,this.HC=null,this.KE=0,this.ZE=0,this.QE=new Tc.Rect,this.tF=Tc.zh(Tc.Rect,0,0,-1,-1),this.sF=0,this.iF=0,this.eF=0,this.hF=-1,this.nF=0,this.rF=0,this.oF="(unavailable)",this.aF="(unavailable)",this.lF=[],this.uF=!1,this.cF=null,this.fF=null,this.dF=null,this.pF=null,this.mF=null,this.gF=null,this.yF=null,this.wF=0,this.SF=!!s.dE,this.BP=null,this.bF=new Set,this.vF=[]}Qv(){return!0}async $S(){super.$S();const t=this.e_;this.YE.Co(1,1,1,1),this.$E=null,this.HC=null,this.BE=0,this.WE=0,this.jE=0,Tc.Sr(this.HE),this.zE=0,this.JE=0,this.VE=null,this.XE=null,this.QE.set(0,0,1,1),this.qE=0;const s=this.lC;s.iI=null,s.ET=null,s.FT=null,s.clearColor.Co(0,0,0,0),s.oC.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.KE=t.ONE,this.ZE=t.ONE_MINUS_SRC_ALPHA,this.MF(t),t.cullFace(t.BACK),t.disable(t.CULL_FACE),this.iF=0,t.frontFace(t.CW),this.eF=0,t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.xE?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this._E=this.xE,this.IE=!1,this.u_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.u_),t.bufferData(t.ARRAY_BUFFER,this.NE.byteLength,t.DYNAMIC_DRAW),this.r_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.r_),t.bufferData(t.ARRAY_BUFFER,this.DE.byteLength,t.DYNAMIC_DRAW),this.o_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.o_),t.bufferData(t.ARRAY_BUFFER,this.kE.byteLength,t.DYNAMIC_DRAW),this.a_=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.a_),t.bufferData(t.ARRAY_BUFFER,this.LE.byteLength,t.DYNAMIC_DRAW),this.EE=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.EE),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.OE.byteLength,t.DYNAMIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.hF=t.getParameter(t.MAX_TEXTURE_SIZE);const i=t.getParameter(t.ALIASED_POINT_SIZE_RANGE);this.nF=i[0],this.rF=i[1],this.rF>2048&&(this.rF=2048),this.lF=t.getSupportedExtensions();const e=t.getExtension("WEBGL_debug_renderer_info");if(e&&(this.oF=t.getParameter(e.UNMASKED_VENDOR_WEBGL),this.aF=t.getParameter(e.UNMASKED_RENDERER_WEBGL)),this.cF=t.getExtension("KHR_parallel_shader_compile"),this.NP>=2&&("Chromium"!==Tc.Ks.ei||Tc.Ks.ii>=135)&&(this.dF=t.getExtension("EXT_conservative_depth")),Tc.Os&&(kc=t.getExtension("WEBGL_lose_context")),this.SF&&(1===this.Vx()?this.BP=t.getExtension("EXT_disjoint_timer_query"):this.BP=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.fF=t.getExtension("EXT_texture_filter_anisotropic"),this.fF?this.wF=t.getParameter(this.fF.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.wF=0,this.Vx()<2&&this.xE&&this.TE&&(this.pF=t.getExtension("WEBGL_depth_texture"),!this.pF))throw new Error("no depth texture support");this.Vx()<2&&(this.mF=t.getExtension("EXT_frag_depth"),this.gF=t.getExtension("OES_standard_derivatives"),this.yF=t.getExtension("EXT_shader_texture_lod"));const h=Tc.Yw.KT,n=h.TI(!1);let r=h.II(),o=n,a=h.LI(),l=h.OI(),u=h.AI(),c=h.TI(!0),f=!1;this.xE&&(this.Vx()<2?this.mF&&(r=h.CI(),a=h.NI(),u=h.EI(),f=!0):(o=h._I(),r=h.RI(this.GF()),a=h.BI(this.GF()),l=h.kI(),u=h.FI(this.GF()),c=h._I(!0)));const d=h.DI(this.Vx(),f,this.gF&&this.yF,this.GF()),p=this.Vx()>=2?h._I():n,m=[[r,o,"<default>"],[r,o,"<default-device-transform>"],[a,l,"<point>"],[h.WI(),n,"<fill>"],[h.jI(),n,"<lineargradient>"],[h.VI(),n,"<penumbra>"],[h.HI(),n,"<hardellipse>"],[h.zI(),n,"<hardellipseoutline>"],[h.JI(),n,"<smoothellipse>"],[h.XI(),n,"<smoothellipseoutline>"],[h.UI(),n,"<smoothline>"],[u,c,"<tilemap>"],[d,p,"<tilerandomization>"]],g=await Promise.all(m.map(t=>this.xF({src:t[0],QT:t[1],name:t[2]})));this.vS=g[0],this.UE=g[1],this.MS=g[2],this.TS=g[3],this._S=g[4],this.IS=g[5],this.CS=g[6],this.RS=g[7],this.AS=g[8],this.PS=g[9],this.ES=g[10],this.GS=g[11],this.xS=g[12],this.Mb()}async xF(t){const s=await Tc.Yw.KT.i_(this,t);return this.yb(s),s}TF(){this.VE=null}hP(t,s,i){if(this.jy===t&&this.Vy===s&&!i)return;this.Jv();const e=this.e_,h=this.lC;this.jy=t,this.Vy=s,this._F(0,0,t,s),this.cb(this.GE,t/s),this.IF(this.GE),this.UE&&(e.useProgram(this.UE.hI()),this.UE.K_(this.pS),this.VE=this.UE,this.lC.iI=this.UE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.$E=null,this.HC=null,this.xE&&this.RE&&this.CF(this.jy,this.Vy),this.XE&&this.XE.RT(this.jy,this.Vy),e.bindFramebuffer(e.FRAMEBUFFER,null),this.XE=null,h.ET=null,h.FT=null}CF(t,s){const i=this.e_;this.CE&&this.AE===t&&this.PE===s||(this.TE?(this.CE&&i.deleteTexture(this.CE),this.CE=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.CE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),this.Vx()>=2?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.pF&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.pF.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.CE&&i.deleteRenderbuffer(this.CE),this.CE=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.CE),i.renderbufferStorage(i.RENDERBUFFER,this.NP>=2?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.AE=t,this.PE=s)}RF(t,s){this.xE&&(this.RE=!1,this.CF(t,s))}AF(){this.xE&&(this.RE=!0,this.CF(this.jy,this.Vy))}_F(t,s,i,e){const h=this.vE;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(this.PF().TC(t,s,i,e),Ic.set(h,t,s,i,e),this.JE=0)}rb(t){super.rb(t),this.cb(this.GE,this.jy/this.Vy)}ib(t){super.ib(t),this.cb(this.GE,this.jy/this.Vy)}hb(t){super.hb(t),this.cb(this.GE,this.jy/this.Vy)}IF(t){Cc.F(this.pS,t)||(this.PF().IC(t),Cc.m(this.pS,t),this.JE=0,this.ME=!0)}EF(){let t,s,i;const e=this.XE;null===e?(t=this.GE,s=this.My(),i=this.xy()):(t=e.LT(),s=e.My(),i=e.xy()),this.IF(t),this._F(0,0,s,i)}FF(t){Cc.F(this.mS,t)||(this.PF().RC(t),Cc.m(this.mS,t),this.JE=0,this.ME=!0)}DF(){this.ME=!1}OF(){return this.ME}PT(){return this.lC}PF(){const t=this.HE;return this.zE===t.length&&t.push(new Tc.Yw.aC(this.lC)),t[this.zE++]}Jv(){0!==this.zE&&(this.DP()||(this.kF(),this.LF(),this.zE=0,this.BE=0,this.WE=0,this.jE=0,this.JE=0))}kF(){const t=this.e_;this.BE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.r_),t.bufferSubData(t.ARRAY_BUFFER,0,this.DE.subarray(0,3*this.BE)),t.bindBuffer(t.ARRAY_BUFFER,this.o_),t.bufferSubData(t.ARRAY_BUFFER,0,this.kE.subarray(0,2*this.BE)),t.bindBuffer(t.ARRAY_BUFFER,this.a_),t.bufferSubData(t.ARRAY_BUFFER,0,this.LE.subarray(0,4*this.BE))),this.WE>0&&(t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.EE),t.bufferSubData(t.ELEMENT_ARRAY_BUFFER,0,this.OE.subarray(0,this.WE))),this.jE>0&&(t.bindBuffer(t.ARRAY_BUFFER,this.u_),t.bufferSubData(t.ARRAY_BUFFER,0,this.NE.subarray(0,this.jE)))}LF(){const t=this.HE;for(let s=0,i=this.zE;s<i;++s)t[s].IR()}NF(){return this.YE.Wo()}BF(t,s,i,e){const h=this.YE;h.Xo(t,s,i,e)||(h.Co(t,s,i,e),this.DS=null,2===this.JE&&(this.JE=0))}WF(t){const s=this.YE;s.Wo()!==t&&(s.Oo(t),this.DS=null,2===this.JE&&(this.JE=0))}$M(t){const s=this.YE;s.equals(t)||(s.set(t),this.DS=null,2===this.JE&&(this.JE=0))}jF(){this.BF(1,1,1,1)}VF(){return this.YE}UF(t){t!==this.$E&&(this.PF().SC(t),this.$E=t,this.JE=0)}Jx(){this.$E=null}YM(t){const s=this.Yb(t);this.HF(s[0],s[1])}zF(t){const s=this.Zb(t);this.HF(s.Xb,s.qb)}HF(t,s){t===this.KE&&s===this.ZE||(this.PF().GC(t,s),this.KE=t,this.ZE=s,this.JE=0,this.DS=null)}JF(){return this.KE===this.e_.ONE&&this.ZE===this.e_.ONE_MINUS_SRC_ALPHA}XF(){this.HF(this.e_.ONE,this.e_.ONE_MINUS_SRC_ALPHA)}qF(){this.HF(this.e_.SRC_ALPHA,this.e_.ONE_MINUS_SRC_ALPHA)}jv(t){this.iF!==t&&(this.PF().GR(t),this.iF=t,this.JE=0,this.DS=null)}YF(){return this.iF}Vv(t){this.eF!==t&&(this.PF().TR(t),this.eF=t,this.JE=0,this.DS=null)}$F(){return this.eF}KF(){this.HF(this.e_.ONE,this.e_.ZERO)}Rect(t){this.ZF(t.Za(),t.Qa(),t.tl(),t.sl())}ZF(t,s,i,e){this.Hv(t,s,i,s,i,e,t,e)}QF(t,s){(this.BE+t>65535||this.WE+s>393210)&&this.Jv(),1===this.JE?this.HE[this.zE-1].cC+=s:(this.PF().yC(2*this.WE,s),this.JE=1)}tD(){const t=this.BE;let s=this.WE;this.WE+=6;const i=this.OE;i[s++]=t,i[s++]=t+1,i[s++]=t+2,i[s++]=t,i[s++]=t+2,i[s]=t+3}Cl(t){this.sD(t,Pc)}Hv(t,s,i,e,h,n,r,o){this.QF(4,6),this.tD();const a=this.DE,l=this.BE;this.BE+=4;let u=3*l;const c=this.LS+this.NS;a[u++]=t,a[u++]=s,a[u++]=c,a[u++]=i,a[u++]=e,a[u++]=c,a[u++]=h,a[u++]=n,a[u++]=c,a[u++]=r,a[u++]=o,a[u]=c,Pc.Vo(this.kE,2*l),this.YE.Uo(this.LE,4*l)}pv(t,s){this.QF(4,6),this.tD();const i=this.BE;this.BE+=4,t.ql(this.DE,3*i,this.LS+this.NS),s.hl(this.kE,2*i),this.YE.Uo(this.LE,4*i)}sD(t,s){this.QF(4,6),this.tD();const i=this.BE;this.BE+=4,t.ql(this.DE,3*i,this.LS+this.NS),s.Vo(this.kE,2*i),this.YE.Uo(this.LE,4*i)}iD(t,s,i){this.QF(4,6),this.tD();const e=this.BE;this.BE+=4,t.ql(this.DE,3*e,this.LS+this.NS),s.Vo(this.kE,2*e),this.LE.set(i,4*e)}eD(t,s,i,e,h,n,r,o,a,l,u,c,f){this.QF(4,6),this.tD();const d=this.DE,p=this.BE;this.BE+=4;let m=3*p;const g=this.LS+this.NS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=h,d[m++]=g+n,d[m++]=r,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.hl(this.kE,2*p),this.YE.Uo(this.LE,4*p)}lv(t,s,i,e,h,n,r,o,a,l,u,c,f){this.QF(4,6),this.tD();const d=this.DE,p=this.BE;this.BE+=4;let m=3*p;const g=this.LS+this.NS;d[m++]=t,d[m++]=s,d[m++]=g+i,d[m++]=e,d[m++]=h,d[m++]=g+n,d[m++]=r,d[m++]=o,d[m++]=g+a,d[m++]=l,d[m++]=u,d[m]=g+c,f.Vo(this.kE,2*p),this.YE.Uo(this.LE,4*p)}hD(t,s,i,e,h,n,r,o,a,l,u,c,f,d){this.QF(4,6),this.tD();const p=this.DE,m=this.BE;this.BE+=4;let g=3*m;const y=this.LS+this.NS;p[g++]=t,p[g++]=s,p[g++]=y+i,p[g++]=e,p[g++]=h,p[g++]=y+n,p[g++]=r,p[g++]=o,p[g++]=y+a,p[g++]=l,p[g++]=u,p[g]=y+c,f.Vo(this.kE,2*m),this.LE.set(d,4*m)}nx(t,s,i,e){if(t.length%3!=0)throw new Error("vertex buffer length not multiple of 3");if(t.length>196605)throw new Error(`too many vertices (${t.length/3}, limit 65535)`);if(i.length%3!=0)throw new Error("index buffer length not multiple of 3");if(i.length>393210)throw new Error(`too many indices (${i.length}, limit 393210)`);this.QF(t.length,i.length);const h=this.BE;this.DE.set(t,3*h),this.kE.set(s,2*h);const n=this.OE;if(0===h)n.set(i,this.WE);else{let t=this.WE;for(let s=0,e=i.length;s<e;++s)n[t++]=i[s]+h}const r=this.LE;if(null!=e)r.set(e,4*h);else{const s=this.YE,i=s.Lo(),e=s.No(),n=s.Bo(),o=s.Wo();let a=4*h;for(let s=0,h=t.length;s<h;++s)r[a++]=i,r[a++]=e,r[a++]=n,r[a++]=o}this.BE+=t.length/3,this.WE+=i.length}nD(t,s){this.ev(0),Cc.m(Ec,this.pS),Cc.m(Fc,this.mS),this.EF();const[i,e]=this.rD(this.XE),h=this.gb(0,0,this.ZS(e),0,0,0,e);if(this.FF(h),"crop"===t&&this.XE&&s){const t=this.jy/2,i=this.Vy/2,e=s.My(),h=s.xy(),n=this.XE.My(),r=this.XE.xy(),o=Math.min(n,e),a=Math.min(r,h),l=Math.max(h-r,0),u=Math.max(r-h,0);Oc.set(-t,i-u,-t+o,i-a-u),Dc.Yl(Oc),Oc.set(0,l,o,a+l),Oc.wt(e,h),this.pv(Dc,Oc)}else{const t=i/2,s=e/2;this.ZF(-t,s,t,-s)}this.IF(Ec),this.FF(Fc)}oD(t){this.QE.equals(t)||(this.QE.m(t),this.PF().kC(t),this.JE=0)}aD(){}lD(t,s,i,e){this.jE>=7996&&this.Jv();let h=this.jE;const n=this.LS+this.NS;2===this.JE&&this.qE===n?this.HE[this.zE-1].cC++:(this.PF().NC(h,n,this.YE),this.JE=2,this.qE=n);const r=this.NE;r[h++]=t,r[h++]=s,r[h++]=i,r[h++]=e,this.jE=h}Gb(t){this.VE!==t&&(this.PF().WC(t),this.VE=t,this.JE=0,this.DS=null)}uD(){return this.VE}cD(){this.Gb(this.UE)}fD(t){this.PF().vC(t),this.JE=0}dD(t,s,i=1){this.PF().eR(t,s,i),this.JE=0}pD(t,s,i,e,h,n,r){if(this.VE!==this.GS)throw new Error("must set tilemap fill mode first");this.PF().nR(t,s,i,e,h,n,r),this.JE=0}mD(t,s,i,e,h,n,r){if(this.VE!==this.xS)throw new Error("must set tile randomization mode first");this.PF().oR(t,s,i,e,h,n,r),this.JE=0}gD(t,s,i,e,h,n,r,o,a,l,u){const c=this.VE;if(u%=10800,!c.W_||c.fI(s,i,e,h,n,r,o,a,l,u))return;const f=this.PF();f.VC(),c.mI(s,i,e,h,n,r,o,a,l,u);const d=f.dC;d[0]=n,d[1]=r,s.Vo(d,2),d[6]=a,d[7]=l,i.Vo(d,12);const p=f.pC;h.Vo(p,0);const m=p[1];p[1]=p[3],p[3]=m,e.Vo(f.mC,0),f.uC=u,f.cC=o,c.G_.j_()?f.fC=t?t.kT():null:f.fC=null,this.JE=0}yD(t){const s=this.VE;if(0===t.length||s.aI(t))return;const i=this.PF();i.zC(),s.uI(t),Tc.Gr(i.gC,t),this.JE=0}wD(t,s,i,e){this.PF().DC(t,s,i,e),this.JE=0}Ru(t){this.PF().FC(t),this.JE=0}SD(){}zv(){super.zv(),this.e_.flush()}bD(){this.xE&&this.XE&&this.XE.jT()&&(this.PF().lR(this._E),this.JE=0)}vD(t){t=!!t,this._E!==t&&this.xE&&(this._E=t,this.PF().cR(t),this.JE=0)}MD(){return this._E}IT(){return this.CE}CT(){return this.TE}GD(t){if(t=!!t,this.TE&&this.IE!==t){if(t&&this.MD())throw new Error("depth still enabled");this.IE=t,this.PF().dR(t),this.JE=0}}xD(t,s,i,e,h=0){t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),this.tF.Ka(t,s,i,e)||(this.tF.Ha(t,s,i,e),s=(h||this.rD(this.TD())[1])-s-e,this.PF().vR(!0,t,s,i,e),this.JE=0)}_D(){-1!==this.tF.tl()&&(this.tF.set(0,0,-1,-1),this.PF().vR(!1,0,0,0,0),this.JE=0)}ID(){for(const t of this.bF)t.lE(this.zS)}DP(){return!this.e_||this.e_.isContextLost()||this.uF}KM(){super.KS(),Tc.Yw.Rx.KM(),Tc.Yw.cT.KM(),Tc.Yw.nM.KM();for(const t of this.bF)t.Ru();this.lF=[],this.BP=null,this.cF=null,this.dF=null,this.fF=null,this.pF=null,this.mF=null,this.gF=null,this.yF=null,this.wF=0,this.oF="(unavailable)",this.aF="(unavailable)",this.VE=null,this.UE=null,this.CE=null;for(const t of this.FS.values())t.KM()}async ZM(){this.uF=!0,await this.$S(),this.uF=!1;for(const t of this.FS.values())t.ZM(this);this.hP(this.jy,this.Vy,!0)}CD(t,s){if(this.DP())throw new Error("context lost");this.Jv();const i=Tc.zh(Tc.Yw.Rx,this);return i.Bx(t,s),i}async RD(t,s){if(this.DP())throw new Error("context lost");if(s=Object.assign({},s),Tc.Ai.ImageBitmapOptions){let i=await createImageBitmap(t,{premultiplyAlpha:"premultiply"});const e=s.bx&&"clamp-to-edge"!==s.bx||s.vx&&"clamp-to-edge"!==s.vx,h=Tc.bn(i.width)&&Tc.bn(i.height);return this.Ux()||h||!e?s.Ix=!1:Tc.Ai.Di?(i=await createImageBitmap(t,{premultiplyAlpha:"premultiply",resizeWidth:Tc.vn(i.width),resizeHeight:Tc.vn(i.height)}),s.Ix=!1):i=await createImageBitmap(t,{premultiplyAlpha:"none"}),await Tc.df(()=>this.CD(i,s))}if(t instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const s=await Tc.lo(t);t=s}return await Tc.df(()=>this.CD(t,s))}_T(t,s,i){this.Jv();const e=Tc.zh(Tc.Yw.Rx,this);return e.Xx(t,s,i),e}OP(t,s,i){this.Jv(),s.Zx(t,i)}AT(t){t&&(t.eT(),t.hT()>0||(this.Jv(),t===this.$E&&(this.e_.bindTexture(this.e_.TEXTURE_2D,null),this.$E=null),t===this.HC&&(this.e_.activeTexture(this.e_.TEXTURE1),this.e_.bindTexture(this.e_.TEXTURE_2D,null),this.e_.activeTexture(this.e_.TEXTURE0),this.HC=null),t.Qx()))}AD(t){let s=this.jy,i=this.Vy,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height&&(i=Math.floor(t.height),e=!1)),s<=0||i<=0)throw new Error("invalid size");this.Jv();const h=Tc.zh(Tc.Yw.cT,this);return h.xT(s,i,Object.assign({lT:e},t)),this.XE=null,this.lC.ET=null,this.lC.FT=null,h}PD(t,s=!0){t!==this.XE&&(t&&t.VT()&&t.RT(this.jy,this.Vy),this.PF().PC(t),this.XE=t,this.JE=0,s&&this.EF())}TD(){return this.XE}rD(t){return t?[t.My(),t.xy()]:[this.jy,this.Vy]}ED(t,s="stretch"){this.NP<2||this.XE&&this.XE.UT()>0?(this.KF(),this.jF(),this.FD(t,s)):(this.PF().YC(t,this.XE,s),this.JE=0)}FD(t,s="stretch"){const i=t.kT();if(!i)throw new Error("not a texture-backed render target");this.UF(i),this.nD(s,i)}DD(t){this.NP<2||(this.PF().XC(t.DT()),this.JE=0)}OD(t){this.PD(null),this.Jv();const s=t.kT();s===this.$E&&(this.e_.bindTexture(this.e_.TEXTURE_2D,null),this.$E=null),s===this.HC&&(this.e_.activeTexture(this.e_.TEXTURE1),this.e_.bindTexture(this.e_.TEXTURE_2D,null),this.e_.activeTexture(this.e_.TEXTURE0),this.HC=null),t.Qx()}async qT(t,s,i){this.Jv();const e=this.XE;let h,n,r;t?(h=t.My(),n=t.xy(),r=t.DT()):(h=this.My(),n=this.xy(),r=null);let o=0,a=0,l=h,u=n;if(i){o=Tc.Kh(Math.floor(i.Za()),0,h-1),a=Tc.Kh(Math.floor(i.Qa()),0,n-1);let t=i.width();t=0===t?h-o:Tc.Kh(Math.floor(t),0,h-o);let s=i.height();s=0===s?n-a:Tc.Kh(Math.floor(s),0,n-a),l=t,u=s,a=n-(a+u)}const c=this.e_;c.bindFramebuffer(c.FRAMEBUFFER,r);const f=()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.XE=null,this.lC.ET=null,this.lC.FT=null,this.PD(e)};let d;if(!s&&this.Vx()>=2){c.bindFramebuffer(c.READ_FRAMEBUFFER,r);const t=c.createBuffer(),s=l*u*4,i=c.PIXEL_PACK_BUFFER;c.bindBuffer(i,t),c.bufferData(i,s,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(i,null),f();const e=c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0);await this.s_(()=>c.getSyncParameter(e,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(e),d=new ImageData(l,u),c.bindBuffer(i,t),c.getBufferSubData(i,0,new Uint8Array(d.data.buffer),0,s),c.bindBuffer(i,null),c.deleteBuffer(t)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}kD(){this.vD(!0),this.PF().mR(),this.JE=0,this.sF=1}LD(t=!1){this.vD(t),this.PF().yR(),this.JE=0,this.sF=2}ND(){return 2===this.sF}BD(t=!0){this.vD(t),this.PF().SR(),this.JE=0,this.sF=0}WD(t){this.jD()&&(this.PF().KC(t),this.JE=0)}VD(t){this.jD()&&(this.PF().tR(t),this.JE=0)}s_(t){const s=new Promise(s=>Lc.add({resolve:s,fE:t}));return-1===Nc&&(Nc=self.requestAnimationFrame(xc)),s}tM(){return this.jy*this.Vy*(this.SE.alpha?4:3)}sM(){let t=0;for(const s of Tc.Yw.cT.YT())s.kT()||(t+=s.rT());return t}iM(){let t=0;for(const s of Tc.Yw.Rx.oT())t+=s.rT();return t}UD(){return this.bE}Vx(){return this.NP}l_(){return this.FE}HD(){return"webgl"+this.Vx()}Ux(){return this.Vx()>=2}Wx(){return this.hF}zD(){return this.nF}JD(){return this.rF}XD(){return this.oF}qD(){return this.aF}YD(){if(this.Vx()>=2)return"webgl2";{const t=[];return this.mF&&t.push("EXT_frag_depth"),this.gF&&t.push("OES_standard_derivatives"),this.yF&&t.push("EXT_shader_texture_lod"),t.length>0?"webgl1:"+t.join(","):"webgl1:none"}}$D(){return this.lF}jD(){return!!this.BP}WP(){return this.BP}t_(){return this.cF}GF(){return!!this.dF}$x(){return this.fF}Kx(){return this.wF}rE(t){this.bF.add(t)}oE(t){this.bF.delete(t)}QP(){return this.vF}jx(){return this.e_}MF(t){this.Jb([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}KD(){return this.hM()}}}{const Bc=self._s,Wc={ZD:null,QD:null,tO:null,getTime:null,sO:null};Bc.Yw.iO=class{constructor(t){t=Object.assign({},Wc,t),this.eO=t.ZD,this.hO=t.QD,this.nO=t.tO,this.rO=t.getTime,this.oO=t.sO,this.aO=null,this.lO=new Set}uO(t){this.lO.add(t)}cO(t){this.lO.delete(t)}KM(){this.aO=null;for(const t of this.lO)t.KM()}fO(t){return this.eO?this.eO(t):[t.My(),t.xy()]}TD(t){return this.hO(t)}dO(t,s){this.nO(t,s)}pO(){return this.rO()}Fp(t){this.oO(t)}mO(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.aO||this.aO.My()===s&&this.aO.xy()===i||(t.AT(this.aO),this.aO=null),null===this.aO&&(this.aO=t.CD(null,{width:s,height:i,Mx:"nearest",Tx:!1})),this.aO}}}{const jc=self._s,Vc=(self.assert,self.rs.fs),Uc=jc.zh(jc.Rect),Hc=jc.zh(jc.Rect),zc=jc.zh(jc.Rect),Jc=jc.zh(jc.Rect),Xc=Vc.create(),qc=Vc.create(),Yc={gO:null,yO:null,wO:null,SO:!1},$c={bO:null,vO:!1,MO:!1,GO:!1,xO:!1,TO:!1,_O:!1};jc.Yw.IO=class{constructor(t,s){s=Object.assign({},Yc,s),this.Vp=t,this.CO=s.gO,this.RO=s.yO,this.AO=s.wO,this.PO=null,this.EO=[],this.FO=[],this.DO=[],this.OO=!1,this.UM=0,this.kO=!1,this.LO=!1,this.NO=!1,this.BO=!1,this.WO=!1,this.jO=!1,this.ME=!1,this.VO=!1,this.UO=!1,this.HO=!1,this.zO=!1,this.JO=!1,this.XO=0,this.qO=[null,null,null],this.YO=!!s.SO,this.$O=0,this.KO=0,this.ZO=0,this.QO=0,this.tk=null,this.sk=null,this.ik=jc.zh(jc.Rect),this.ek=jc.zh(jc.Rect),this.hk=jc.zh(jc.Rect),this.nk=jc.zh(jc.Rect),this.rk=jc.zh(jc.Rect),this.ak=1,this.lk=1,this.uk=0,this.ck=0,this.fk=null,this.dk=null,this.pk=0,this.mk=0,this.gk=0,this.yk=0,this.wk=!1,this.bT=Vc.create(),this.Sk=Vc.create(),this.Vp.uO(this)}Jh(){this.Vp.cO(this),jc.Sr(this.DO),jc.Sr(this.EO),jc.Sr(this.FO),this.tk=null,this.sk=null,this.CO=null,this.RO=null,this.AO=null}KM(){this.OO=!0,jc.Sr(this.DO),jc.Sr(this.EO),jc.Sr(this.FO)}bk(){return this.OO}vk(t,s){if(s=Object.assign({},$c,s),jc.Sr(this.DO),this.$O=0,this.KO=0,this.kO=!1,this.LO=!1,this.NO=!1,this.BO=!1,this.WO=!1,this.jO=!1,this.XO=0,this.JO=!!s.xO,this.zO=!!s._O,this.OO=!1,jc.Gr(this.EO,t),0===t.length)return;if(s.bO){if(s.bO.length!==t.length)throw new Error("incorrect indexMap length");jc.Gr(this.FO,s.bO)}else{jc.Sr(this.FO);for(let s=0,i=t.length;s<i;++s)this.FO.push(s)}for(const s of t)this.$O+=s.RM(),this.KO+=s.AM(),s.OM()&&(this.kO=!0),s.LM()&&(this.LO=!0),s.kM()&&(this.NO=!0),s.PM()&&(this.BO=!0),s.WM()&&(this.WO=!0);this.jO=this.Mk(t[0].IM());const i=this.Gk(t[0],s),e=this.xk(t.at(-1),s);if(1===t.length&&!i&&!e)return void(this.HO=!0);this.HO=!1;let h=0;i&&(this.XO=1,this.DO.push(jc.zh(jc.Yw.IO._k.Tk,this,-1,1)),h=1);for(let s=0,n=t.length;s<n;++s)if(0!==s||i){let t=1===h?2:1;s!==n-1||e||(t=0),this.XO=Math.max(this.XO,t),this.DO.push(jc.zh(jc.Yw.IO._k.Ik,this,h,t,s)),h=t}else this.XO=1,this.DO.push(jc.zh(jc.Yw.IO._k.Ck,this,-1,1,s)),h=1;e&&this.DO.push(jc.zh(jc.Yw.IO._k.Rk,this,h,0))}Gk(t,s){return!!(s.vO||t.EM()||s.GO&&!t.DM()||t.LM()&&!this.zO||0!==this.$O||0!==this.KO)||(t.IM().Qv()?t.kM()&&(s.TO||s.xO)||t.NM()&&s.xO:t.kM()&&!this.jO&&s.TO)}xk(t,s){return!!s.MO||(t.IM().Qv()?t.kM()||t.PM():(t.kM()||t.PM())&&this.Ak())}Mk(t){return t.fb()&&this.NO&&!this.BO}Pk(t,s,i){t.fb()&&null===s&&(s=t.Ek()),this.fk=s,this.tk=i.Fk||null,this.sk=i.Dk||null,this.UM=i.Ok||0,this.ak=i.devicePixelRatio||1,this.lk=i.kk||1,this.uk=i.Lk||0,this.ck="number"==typeof i.time?i.time:this.Vp.pO(),this.ME=!1,t.DF(),this.kO&&this.Nk();let e=!1;if(this.Bk()&&(this.Wk(t,i),e=!0,this.dk=this.Vp.mO(t,this.ZO,this.QO),Uc.m(this.ek),Uc.bl(),t.fb()&&t.jk(this.fk),t.Vk(this.fk.kT(),this.dk,Uc.Za(),Uc.Qa(),Uc.width(),Uc.height())),this.HO)this.Uk(t,i);else if(e||this.Wk(t,i),0!==this.hk.width()||0!==this.hk.height()){t.XF(),t.Wv(),t.jF(),t.tv(0),t.ev(0),this.PO=i.Hk||null,this.pk=i.zk||0,this.mk=i.Jk||0,this.gk=i.Xk||0,this.yk=i.qk||0,this.wk=!!i.Yk,this.$k(t),this.qO[0]=s,this.qO[1]=this.XO>=1?this.Kk():null,this.qO[2]=2===this.XO?this.Kk():null;for(const s of this.DO){const i=this.Zk(s.Qk()),e=this.Zk(s.tL());t.fb()?s.sL(t,i,e):s.iL(t,i,e)}t.UF(null),this.qO[1]&&this.eL(this.qO[1]),this.qO[2]&&this.eL(this.qO[2]),this.qO.fill(null),this.hL(t),this.fk=null,this.dk=null,this.tk=null,this.sk=null,this.PO=null}}Wk(t,s){const[i,e]=this.Vp.fO(t);this.nL(t,i,e),this.rL(s)}nL(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.ZO===s&&this.QO===i||this.oL(t,s,i,0,0,this.bT,this.Sk),this.ZO=s,this.QO=i}oL(t,s,i,e,h,n,r){const o=s/2+e,a=i/2+h;t.cb(n,s/i);const l=t.gb(o,a,t.ZS(i),o,a,0,i);Vc.m(r,l)}rL(t){if(this.ik.m(t.aL),t.lL?this.ek.m(t.lL):this.ek.set(0,0,this.ZO,this.QO),this.HO){const s=t.zk??0,i=t.Jk??0;this.ek.offset(-s,-i)}this.hk.m(this.ek),this.hk.wt(this.ZO,this.QO);const s=this.lk*this.ak;this.ek.cl(this.$O*s,this.KO*s),this.rk.m(this.ek),this.rk.wt(this.ZO,this.QO),this.ek.vl(0,0,this.ZO,this.QO),this.nk.m(this.ek),this.nk.wt(this.ZO,this.QO)}$k(t){if(this.VO=t.MD(),this.UO=t.ND(),this.zO)t.vD(!1),this.LO&&t.GD(!0);else{if(Uc.m(this.ek),t.Qv()){const t=this.lk*this.ak;Uc.cl(Math.max(this.$O,1)*t,Math.max(this.KO,1)*t),Uc.bl(),Uc.Kh(0,0,this.ZO,this.QO)}else Uc.bl();t.xD(Uc.Za(),Uc.Qa(),Uc.width(),Uc.height(),this.QO)}}uL(t){t.jF(),this.zO||(this.UO?t.BD(!1):t.vD(!1),this.LO&&t.GD(!0)),t.fb()&&t.cL(!0)}hL(t){t.GD(!1),this.UO?t.LD(this.VO):t.vD(this.VO),this.zO||t._D(),t.fb()&&t.cL(!1),this.ME=t.OF()}fL(){this.rk.Kh(0,0,1,1)}Zk(t){return t<0?null:this.qO[t]}Kk(){return this.Vp.TD(this)}dL(){return this.fk}eL(t){this.Vp.dO(t,this)}pL(t){return this.EO[t]}mL(t){this.PO?this.PO(this,t,()=>this.CO(t,this)):this.CO(t,this),this.HO||this.uL(t)}gL(t){if(this.zO)return!0;if(0!==this.pk||0!==this.mk||0!==this.gk||0!==this.yk)return!1;const[s,i]=t.rD(t.TD());return s===this.ZO&&i===this.QO}yL(t,s){let i=this.bT,e=this.Sk;if(s&&!this.gL(t)){let s,h;i=Xc,e=qc,0!==this.gk&&0!==this.yk?[s,h]=[this.gk,this.yk]:[s,h]=t.rD(t.TD()),this.oL(t,s,h,this.pk,this.mk,i,e),this.zO||t._D()}t.IF(i),t.FF(e)}Nk(){this.Vp.Fp(this)}wL(t,s){return this.AO(this.FO[t],s)}SL(t,s){let i=this.rk,e=this.nk,h=this.hk;t.Qv()&&(Hc.m(i),Hc.pl(1),i=Hc,zc.m(e),zc.pl(1),e=zc,Jc.m(h),Jc.pl(1),h=Jc),this.bL(t,s,e,h,i,1/this.ZO,1/this.QO)}vL(t,s){let i=this.nk,e=this.hk,h=1/this.ZO,n=1/this.QO;if(this.RO){let{ML:t,GL:s,xL:r}=this.RO(this.tk);t||(Uc.set(0,0,0,0),t=Uc),s||(s=this.ZO),r||(r=this.QO),i=t,e=t,h=1/s,n=1/r}else t.Qv()&&(zc.m(i),zc.pl(1),i=zc,Jc.m(e),Jc.pl(1),e=Jc);let r=this.rk;t.Qv()&&(r=Hc,r.m(this.rk),r.pl(1)),this.bL(t,s,i,e,r,h,n),t.fb()&&this.WO&&t.TL(this.JO)}_L(t){return this.NO?t.fb()?this.Bk()?this.dk:this.fk.kT():this.fk:null}bL(t,s,i,e,h,n,r){t.gD(this._L(t),h,i,e,this.ik,n,r,this.ak,this.lk,this.uk,this.ck),t.yD(this.wL(s,t))}Uk(t,s){const i=this.EO[0],e=t.MD(),h=i.LM();h&&(t.vD(!1),t.GD(!0),this.rk.set(0,0,1,1),this.hk.set(0,0,1,1)),t.Gb(i),t.YM(this.UM),t.PD(this.fk),t.Wv();let n=0,r=1;if(this.hk.set(0,0,1,1),i.NM()&&this.RO){const{ML:t,GL:s,xL:i}=this.RO(this.tk);t&&this.hk.m(t),n=Number.isFinite(s)?1/s:0,r=Number.isFinite(i)?1/i:0}else{const[s,i]=this.Vp.fO(t);n=1/s,r=1/i}s.aL?this.ik.m(s.aL):this.ik.set(0,0,0,0),t.gD(this._L(t),this.rk,this.hk,this.hk,this.ik,n,r,this.ak,this.lk,this.uk,this.ck),t.yD(this.wL(0,t)),t.fb()&&this.WO&&t.TL(this.JO),t.tv(0),this.mL(t),h&&(t.GD(!1),t.vD(e))}Bk(){return this.jO}Ak(){return!this.jO}IL(){return this.NO}CL(){return!!this.HO&&!this.Bk()}RL(){return this.zO}AL(){return this.tk}PL(){return this.sk}EL(){return this.UM}FL(){return this.wk}OF(){return this.ME}DL(){return this.ek}OL(){return this.nk}kL(){return this.YO}async LL(t,s,i){}}}self._s.Yw.IO._k=class{constructor(t,s,i,e=-1){this.NL=t,this.BL=s,this.WL=i,this.Vw=e}jL(){return this.NL}Qk(){return this.BL}tL(){return this.WL}VL(){return this.Vw}hI(){return this.jL().pL(this.VL())}iL(t,s,i){}sL(t,s,i){}};{const Kc=self._s;Kc.Yw.IO._k.Tk=class extends Kc.Yw.IO._k{constructor(t,s,i,e){super(t,s,i,e)}iL(t,s,i){const e=this.jL();t.XF(),t.Wv(),t.Mb(),t.PD(i,e.FL()),t.wD(0,0,0,0),e.mL(t),e.fL()}sL(t,s,i){const e=this.jL();t.XF(),t.Wv(),t.Mb(),t.PD(i,!1),t.wD(0,0,0,0),e.mL(t),e.fL()}}}{const Zc=self._s,Qc=Zc.zh(Zc.Rect),tf=Zc.zh(Zc.Cl);Zc.Yw.IO._k.Rk=class extends Zc.Yw.IO._k{constructor(t,s,i,e){super(t,s,i,e)}iL(t,s,i){const e=this.jL();t.Mb(),t.PD(i),e.yL(t,!0),t.YM(e.EL()),t.UF(s.kT()),tf.Yl(e.DL()),Qc.m(e.OL()),Qc.pl(1),t.pv(tf,Qc),e.kL()&&t.DD(s)}sL(t,s,i){const e=this.jL();t.Mb(),t.PD(i,!1),e.gL(t)?tf.Yl(e.OL()):(t.cL(!1),e.yL(t,!0),tf.Yl(e.DL())),t.UL(null),t.YM(e.EL()),t.UF(s.kT()),e.RL()?t.nD():t.pv(tf,e.OL())}}}{const sf=self._s;sf.Yw.IO._k.Ck=class extends sf.Yw.IO._k{constructor(t,s,i,e){super(t,s,i,e)}iL(t,s,i){const e=this.jL();t.PD(i,e.FL()),t.wD(0,0,0,0),t.KF(),t.Gb(this.hI()),e.vL(t,this.VL()),e.mL(t),e.fL()}sL(t,s,i){const e=this.jL();t.PD(i,!1),t.wD(0,0,0,0),t.KF(),t.Gb(this.hI()),e.vL(t,this.VL()),e.mL(t),e.fL()}}}{const ef=self._s,hf=ef.zh(ef.Rect),nf=ef.zh(ef.Cl);ef.Yw.IO._k.Ik=class extends ef.Yw.IO._k{constructor(t,s,i,e){super(t,s,i,e)}iL(t,s,i){const e=this.jL();t.PD(i);const h=0===this.tL();h?t.YM(e.EL()):(t.wD(0,0,0,0),t.KF()),t.Gb(this.hI()),e.SL(t,this.VL()),t.UF(s.kT()),e.yL(t,h),nf.Yl(e.DL()),hf.m(e.OL()),hf.pl(1),t.pv(nf,hf),e.kL()&&t.DD(s)}sL(t,s,i){const e=this.jL();t.PD(i,!1),0===this.tL()?(t.YM(e.EL()),t.UL(null),e.gL(t)?nf.Yl(e.OL()):(t.cL(!1),e.yL(t,!0),nf.Yl(e.DL()))):(t.wD(0,0,0,0),t.KF(),nf.Yl(e.OL())),t.Gb(this.hI()),e.SL(t,this.VL()),t.UF(s.kT()),e.RL()?t.nD():t.pv(nf,e.OL())}}}{let rf=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]};0;const of=self._s,af=self.Ls;let lf=null;const uf=new Set,cf=[],ff=[];let df=!1,pf=!1,mf=!1;const gf=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.HL=class{constructor(t){lf=t,Object.defineProperties(this,{zL:{value:lf.XL().JL(),writable:!1},qL:{value:lf.$L().YL(),writable:!1},KL:{value:{},writable:!1},ZL:{value:{},writable:!1},QL:{value:lf.tN(),writable:!1},sN:{value:lf.iN(),writable:!1},eN:{value:lf.hN(),writable:!1},nN:{value:lf.rN(),writable:!1},oN:{value:new Date(lf.aN()),writable:!1},storage:{value:new self.lN(lf),writable:!1},uN:{value:lf.cN(),writable:!1},fN:{value:lf.dN(),writable:!1},pN:{value:lf.mN(),writable:!1},Mx:{value:lf.gN(),writable:!1},yN:{value:new self.wN(t),writable:!1},SN:{value:new self.bN(t),writable:!1}}),lf.vN().addEventListener("keydown",t=>{uf.has(t.key)?t.stopPropagation():uf.add(t.key)}),lf.vN().addEventListener("keyup",t=>uf.delete(t.key)),lf.wf().addEventListener("window-blur",()=>uf.clear()),lf.cN()&&(self.alert=t=>(df||(df=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}MN(t){Object.defineProperties(this.KL,t)}GN(t){Object.defineProperties(this.ZL,t)}addEventListener(t,s){lf.vN().addEventListener(t,s)}removeEventListener(t,s){lf.vN().removeEventListener(t,s)}xN(t,...s){af.le(t);const i=lf.TN(),e=i._N(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e._u())return e.IN();if(s.length<e.CN())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.CN()} expected)`);const h=e.RN();let n=h.AN();const r=i.PN();if(r){n=n.slice(0);const t=new Set(n);for(const s of r.AN())t.has(s)||(n.push(s),t.add(s));for(const s of i.EN())t.has(s)||(n.push(s),t.add(s))}return h.FN(n,e.DN(),e.ON(),e.IN(),...s)}kN(t){const s=lf.NN().LN();if(!s)throw new Error("not in a function which returns a value");switch(s.BN()){case 1:"number"==typeof t&&s.WN(t);break;case 2:"string"==typeof t&&s.WN(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.WN(t)}}signal(t){af.le(t),lf.TN().jN(t)}VN(t){return af.le(t),lf.TN().UN(t)}HN(){return[lf.dN(),lf.mN()]}get zN(){return lf.JN()}get XN(){return lf.qN()}get YN(){return lf.$N()}get KN(){return lf.ZN()}get QN(){return lf.tB()}get sB(){return lf.iB()}get eB(){return lf.hB()}set eB(t){af.ne(t),lf.nB(t)}get rB(){return pf||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),pf=!0),lf.oB()}get framesPerSecond(){return lf.oB()}get aB(){return lf.lB()}get uB(){return lf.cB()}get fB(){return lf.dB()}get pB(){return lf.mB()}set pB(t){if(!gf.has(t))throw new Error("invalid framerate mode");lf.gB(t)}get yB(){return lf.wB()}set yB(t){af.ne(t),lf.SB(t)}get bB(){return lf.vB()}set bB(t){lf.MB(t)}set GB(t){lf.xB(!!t)}get GB(){return lf.TB()}get _B(){return lf.XL().IB()}get CB(){return lf.XL().RB()}random(){return lf.AB()}get layout(){const t=lf.PB();if(!t)throw new Error("no layout is running - make sure a layout is loaded before accessing");return t.EB()}DB(t){const s=lf.OB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.kB(t),!i)throw new Error("invalid layout");return i.EB()}LB(){return lf.OB().NB().map(t=>t.EB())}BB(t){const s=lf.OB();let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.kB(t),!i)throw new Error("invalid layout");s.WB()||s.jB(i)}get keyboard(){const t=lf.VB().keyboard;if(!t)throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first");return t}get UB(){const t=lf.VB().UB;if(!t)throw new Error("runtime.mouse used but Mouse object missing - add it to your project first");return t}get HB(){const t=lf.VB().HB;if(!t)throw new Error("runtime.touch used but Touch object missing - add it to your project first");return t}get zB(){const t=lf.VB().zB;if(!t)throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first");return t}get nC(){return lf.XB().JB()}qB(t,s){af.le(t),af.le(s),lf.YB(t,s)}$B(t){af.ne(t);const s=lf.KB(t);return s?s.ZB():null}QB(t,s){af.Pe(s);const i=lf.tW();for(const s of t){const t=lf.sW(s),i=t.iW();cf.push([i.eW().VL(),i.hW()]),ff.push(t)}if(0===cf.length)return;cf.sort(rf),ff.sort((t,i)=>s(t.ZB(),i.ZB()));let e=!1;for(let t=0,s=cf.length;t<s;++t){const s=ff[t],h=i.nW(cf[t][0]),n=cf[t][1],r=h.rW();r[n]!==s&&(r[n]=s,s.iW().oW(h,!0),h.aW(s),e=!0)}e&&lf.lW(),of.Sr(cf),of.Sr(ff)}async uW(t,s){mf||(console.warn("IRuntime.createWorker() is deprecated. All modern browsers now support nested workers so this method is no longer needed."),mf=!0);const i=new MessageChannel,e=i.port1,h=i.port2;return await lf.cW("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return lf.cW("runtime","alert",{message:t+(lf.cN()?" [via Web Worker]":"")})}fW(t){return af.ne(t),lf.dW(t)}pW(t){lf.mW(t)}async gW(t,s,i){af.ue(t),af.se(s),af.Be(i,DOMRect),i||(i=new DOMRect(0,0,0,0));const e=lf.XB();if(!e)return;lf.lW();const h=await e.yW(t||"image/png",s,i.x,i.y,i.width,i.height);return await lf.wW(of.MW.vW.bW.SW,null),h}}}{self._s,self.Ls;let yf=null;self.GW=class{constructor(t){yf=t,Object.defineProperties(this,{xW:{value:!0,writable:!1}})}TW(t){const s=self.IW._W(t);if(!s)throw new Error("invalid IImageInfo");s.RW(yf.AW())}PW(t){return yf.so(t)}EW(t){return yf.io(t)}FW(t){return yf.eo(t)}DW(t){return yf.ho(t)}OW(t){return Promise.resolve(yf.kW(t))}LW(t){return yf.NW(t)}get BW(){return yf.WW()}async jW(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}VW(...t){return yf.UW(...t)}HW(t){return yf.zW(t)}JW(t){return yf.XW(t)}get qW(){return yf.YW()}}}{const wf=self._s,Sf=self.Ls;let bf=null;self.$W=class{constructor(t){bf=t,Object.defineProperties(this,{runtime:{value:bf.AW(),writable:!1}})}KW(t,s){const i=bf.AW(),e=i.sW(t),h=i.sW(s);return bf.ZW(e,h)}QW(t,s){const i=bf.AW(),e=i.sW(t);for(const t of s){const s=i.sW(t);if(bf.ZW(e,s))return t}return null}tj(t){const s=bf.AW().sW(t),i=bf.sj(s);return i?i.ZB():null}ij(t,s){if(Sf.ne(t),Sf.ne(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");bf.ej(t,s)}hj(){return bf.nj()}rj(t,s){const i=bf.AW();let e;e=Array.isArray(t)?t.map(t=>i.oj(t)):[i.oj(t)];const h=wf.Rect.$a(s),n=[];return bf.aj(null,e,h,n),n.map(t=>t.ZB())}}}{const vf=self._s;self.Ls;let Mf=null;const Gf=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),xf=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["Firefox","firefox"],["Safari","safari"]]),Tf=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.wN=class{constructor(t){Mf=t,Object.defineProperties(this,{lj:{value:vf.Ks.ri,writable:!1},os:{value:Gf.get(vf.Ks.Zs)||"unknown",writable:!1},uj:{value:vf.Ks.Qs,writable:!1},browser:{value:xf.get(vf.Ks.ti)||"unknown",writable:!1},cj:{value:vf.Ks.si,writable:!1},fj:{value:Tf.get(vf.Ks.ei)||"unknown",writable:!1}})}get dj(){let t=Mf.pj();return Mf.mj()?t="windows-webview2":"cordova"===t?t="Android"===vf.Ks.Zs?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get nC(){return Mf.XB().gj()}get yj(){return Mf.XB().wj()}get Sj(){return Mf.XB().bj()}get vj(){return Mf.XB().Mj()}get Gj(){return Mf.XB().xj()}get Tj(){return Mf.XB()._j()}get Ij(){return Mf.XB().Cj()}get Rj(){return Mf.XB().Aj()}get devicePixelRatio(){return Mf.Pj()}}}{self._s;const _f=self.Ls;self.lN=class{constructor(t){this.Ej=t.Fj()}getItem(t){return _f.le(t),this.Ej.getItem(t)}setItem(t,s){return _f.le(t),this.Ej.setItem(t,s)}removeItem(t){return _f.le(t),this.Ej.removeItem(t)}clear(){return this.Ej.clear()}keys(){return this.Ej.keys()}}}{const If=self._s,Cf=(self.Ls,If.Is());self.Dj=class{#t;constructor(){const t=If.kj.Oj(Cf);this.#t=t,Object.defineProperties(this,{runtime:{value:t.AW().Lj(),writable:!1},id:{value:t.Nj(),writable:!1},Bj:{value:t.Wj(),writable:!1},jj:{value:t.Vj(),writable:!1},Uj:{value:t.Hj(),writable:!1},zj:{value:t.Jj(),writable:!1},Xj:{value:t.qj(),writable:!1},Yj:{value:t.$j(),writable:!1},Kj:{value:t.Zj(),writable:!1},Qj:{value:t.tV(),writable:!1}}),t.AW().sV(this,t)}static iV(t){if(!t)return null;const s=If.kj.eV(t);return s?s.hV():null}nV(){return this.#t.oV().rV()}aV(){return this.#t.lV().ZB()}}}{const Rf=globalThis._s,Af=globalThis.Ls,Pf=Rf.Is();globalThis.uV=class{#t;constructor(){const t=Rf.kj.Oj(Pf);this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1},runtime:{value:t.AW().Lj(),writable:!1},cV:{value:t.fV().hV(),writable:!1}}),t.AW().sV(this,t)}addEventListener(t,s){Af.le(t),Af.Pe(s),this.#t.vN().addEventListener(t,s)}removeEventListener(t,s){Af.le(t),Af.Pe(s),this.#t.vN().removeEventListener(t,s)}dV(){return[...this.pV()]}mV(){return Rf.Br(this.pV())}gV(){return[...this.yV()]}wV(){return Rf.Br(this.yV())}SV(t){const s=this.#t,i=s.AW().bV(t),e=s.vV(i);return e?e.ZB():null}*pV(){for(const t of this.#t.MV())yield t.ZB()}*yV(){for(const t of this.#t.xV().GV())yield t.ZB()}}}{const Ef=globalThis._s,Ff=globalThis.Ls,Df=Ef.Is();globalThis.TV=class extends globalThis.uV{#t;constructor(){super();const t=Ef.kj.Oj(Df);this.#t=t}_V(t){Ff.Pe(t);const s=this.#t;if(s.IV()>0)throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.CV(t)}Ti(t,s,i,e,h){if(Ff.te(s),Ff.te(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const n=this.#t,r=n.AW(),o=r.PB().eW(t);if(!o)throw new Error("invalid layer");const a=r.RV(n,o,s,i,e,h);e&&o.AV(a);const l=r.TN();return l.PV(!0),a.EV(),l.PV(!1),l.FV()||r.OB().DV()||r.OV(),a.ZB()}kV(){return this.#t.LV().map(t=>t.rV())}*NV(){for(const t of this.#t.LV())yield t.rV()}BV(t){return Ff.Ne(t,globalThis.WV),t.jV(this)}}}{const Of=globalThis._s,kf=globalThis.Ls,Lf=globalThis.TV,Nf=Of.Is();globalThis.WV=class extends globalThis.uV{#t;constructor(){super();const t=Of.kj.Oj(Nf);this.#t=t}VV(){return this.#t.UV().map(t=>t.rV())}*HV(){for(const t of this.#t.UV())yield t.rV()}jV(t){kf.Ne(t,Lf);const s=this.#t,i=s.AW().oj(t);return s.zV(i)}}}{self._s;const Bf=self.Ls,Wf=["above","below","top-sublayer","bottom-sublayer"];self.JV=class{#t;constructor(t){this.#t=t;const s=[],i=t.XV(),e=i.qV().length;for(let t=0;t<e;++t)s.push(new self.YV(i,t));Object.defineProperties(this,{runtime:{value:t.AW().Lj(),writable:!1},name:{value:t.Rc(),writable:!1},index:{value:t.VL(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){Bf.le(t),Bf.Pe(s),this.#t.vN().addEventListener(t,s)}removeEventListener(t,s){Bf.le(t),Bf.Pe(s),this.#t.vN().removeEventListener(t,s)}get width(){return this.#t.My()}set width(t){Bf.ne(t),this.#t.hy(t)}get height(){return this.#t.xy()}set height(t){Bf.ne(t),this.#t.ny(t)}$V(t,s){Bf.ne(t),Bf.ne(s);const i=this.#t;i.hy(t),i.ny(s)}getSize(){const t=this.#t;return[t.My(),t.xy()]}set scale(t){Bf.ne(t),this.#t.KV(t)}get scale(){return this.#t.ZV()}set angle(t){Bf.ne(t),this.#t.QV(t)}get angle(){return this.#t.tU()}set scrollX(t){Bf.te(t),this.#t.sU(t)}get scrollX(){return this.#t.iU()}set scrollY(t){Bf.te(t),this.#t.eU(t)}get scrollY(){return this.#t.hU()}scrollTo(t,s){Bf.te(t),Bf.te(s);const i=this.#t;i.sU(t),i.eU(s)}nU(){const t=this.#t;return[t.iU(),t.hU()]}get rU(){return this.#t.oU()}aU(t){const s=this.#t;let i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return i=s.eW(t),i?i.lU():null}uU(){return this.#t.cU().map(t=>t.lU())}*fU(){for(const t of this.#t.fU())yield t.lU()}dU(t,s,i){const e=this.#t,h=self.pU;Bf.le(t),Bf.Be(s,h);const n=s?e.AW().mU(s):null,r=Wf.indexOf(i);if(r<0)throw new Error("invalid location");e.gU(t,n,r)}yU(t,s,i){const e=this.#t,h=e.AW(),n=self.pU;Bf.Ne(t,n);const r=h.mU(t);if(!r)throw new Error("invalid layer");Bf.Be(s,n);const o=s?h.mU(s):null,a=Wf.indexOf(i);if(a<0)throw new Error("invalid location");e.wU(r,o,a)}SU(t){const s=this.#t,i=self.pU;Bf.Ne(t,i);const e=s.AW().mU(t);if(!e)throw new Error("invalid layer");const h=e.AW();s.bU(e),h.TN().FV()||h.OV()}vU(){const t=this.#t,s=t.AW();t.MU(),s.TN().FV()||s.OV()}GU(t,s){Bf.ne(t),Bf.ne(s),this.#t.xU(t,s)}TU(){return this.#t._U()}set V(t){Bf.le(t);const s=this.#t;if("perspective"===t)s.IU();else{if("orthographic"!==t)throw new Error("invalid projection");s.CU()}}get V(){return this.#t.RU()?"orthographic":"perspective"}}}{const jf=self._s,Vf=self.Ls,Uf=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Hf=new Map([...Uf.entries()].map(t=>[t[1],t[0]])),zf=new Set(["2d","3d"]),Jf=jf.zh(jf.Go);self.pU=class{#t;constructor(t){this.#t=t;const s=[],i=t.XV(),e=i.qV().length;for(let t=0;t<e;++t)s.push(new self.YV(i,t));Object.defineProperties(this,{runtime:{value:t.AW().Lj(),writable:!1},name:{value:t.Rc(),writable:!1},layout:{value:t.kB().EB(),writable:!1},effects:{value:s,writable:!1}}),t.AW().sV(this,t)}addEventListener(t,s){this.#t.vN().addEventListener(t,s)}removeEventListener(t,s){this.#t.vN().removeEventListener(t,s)}get AU(){const t=this.#t.PU();return t?t.lU():null}*EU(){for(const t of this.#t.EU())yield t.lU()}*FU(){for(const t of this.#t.DU())yield t.lU()}*OU(){for(const t of this.#t.DU())for(const s of t.kU())yield s.lU()}get index(){return this.#t.VL()}get isVisible(){return this.#t.LU()}set isVisible(t){this.#t.NU(t)}get BU(){return this.#t.WU()}get jU(){return this.#t.VU()}set jU(t){this.#t.UU(t)}get HU(){return this.#t.zU()}set HU(t){this.#t.JU(!!t)}get XU(){return this.#t.qU()}get opacity(){return this.#t.NF()}set opacity(t){t=jf.Kh(+t,0,1),isNaN(t)||this.#t.WF(t)}set scale(t){Vf.ne(t),this.#t.YU(t)}get scale(){return this.#t.$U()}set KU(t){Vf.ne(t),this.#t.ZU(t)}get KU(){return this.#t.QU()}set angle(t){Vf.ne(t),this.#t.QV(t)}get angle(){return this.#t.tH()}set sH(t){Vf.ne(t),this.#t.iH(t)}get sH(){return this.#t.eH()}set hH(t){Vf.ne(t),this.#t.nH(t)}get hH(){return this.#t.rH()}set oH(t){Vf.ne(t),this.#t.fG(t)}get oH(){return this.#t.cG()}set renderingMode(t){if(!zf.has(t))throw TypeError("invalid rendering mode");this.#t.aH("3d"===t)}get renderingMode(){return this.#t.lH()?"3d":"2d"}set uH(t){this.#t.cH(t)}get uH(){return this.#t.fH()}set dH(t){this.#t.pH(t)}get dH(){return this.#t.mH()}set Ok(t){Vf.le(t);const s=Uf.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");this.#t.YM(s)}get Ok(){return Hf.get(this.#t.gH())}set backgroundColor(t){if(Vf.xe(t),t.length<3)throw new Error("expected 3 elements");Jf.Ro(t[0],t[1],t[2]);const s=this.#t,i=s.yH();i.zo(Jf)||(i.ko(Jf),s.AW().lW())}get backgroundColor(){const t=this.#t.yH();return[t.Lo(),t.No(),t.Bo()]}set scrollX(t){Vf.te(t);const s=this.#t;s.wH(!0),s.sU(t)}get scrollX(){return this.#t.iU()}set scrollY(t){Vf.te(t);const s=this.#t;s.wH(!0),s.eU(t)}get scrollY(){return this.#t.hU()}scrollTo(t,s){Vf.te(t),Vf.te(s);const i=this.#t;i.wH(!0),i.sU(t),i.eU(s)}nU(){const t=this.#t;return[t.iU(),t.hU()]}SH(){this.#t.wH(!1)}getViewport(){return this.#t.bH().il()}vH(t,s,i=0){Vf.te(t),Vf.te(s),Vf.te(i);const e=this.#t,h=e.AW();return e.MH(t-h.bj(),s-h.Mj(),i)}GH(t,s,i=0){Vf.te(t),Vf.te(s),Vf.te(i);const e=this.#t,h=e.AW(),[n,r]=e.xH(t,s,i);return[n+h.bj(),r+h.Mj()]}TH(t,s,i=0){return Vf.te(t),Vf.te(s),Vf.te(i),this.#t._H(t,s,i)}IH(t,s,i=0){return Vf.te(t),Vf.te(s),Vf.te(i),this.#t.CH(t,s,i)}get RH(){return this.#t.AH()}}}{let Xf=function(t){let s=$f.get(t);return s||(s=qf.zh(qf.Event.wf),$f.set(t,s),s)};0;const qf=self._s,Yf=self.Ls,$f=new WeakMap,Kf=qf.Is();self.PH=class{#t;constructor(){const t=qf.kj.Oj(Kf);this.#t=t;const s={runtime:{value:t.AW().Lj(),writable:!1},objectType:{value:t.EH().rV(),writable:!1},cV:{value:t.fV().hV(),writable:!1}};t.FH(s),t.DH(s),Object.defineProperties(this,s),t.AW().sV(this,t)}static OH(){return qf.kj.kH()}LH(){const t=$f.get(this);t&&(t.Jh(),$f.delete(this))}addEventListener(t,s,i){Yf.le(t),Yf.Pe(s),Xf(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Yf.le(t),Yf.Pe(s),Xf(this).removeEventListener(t,s,i)}dispatchEvent(t){Xf(this).dispatchEvent(t)}destroy(){const t=this.#t,s=t.AW();s.NH(t),s.TN().FV()||s.OB().DV()||s.TN().BH()||s.OV()}WH(){const t=this.#t.jH();return t?t.map(t=>t.ZB()):[]}*VH(){const t=this.#t;if(t.UH())for(const s of t.HH())yield s.ZB()}get uid(){return this.#t.zH()}get JH(){return this.#t.XH()}get qH(){return this.#t.YH()}set eB(t){Yf.ne(t),this.#t.nB(t)}get eB(){return this.#t.$H()}KH(){this.#t.ZH()}get XN(){const t=this.#t;return t.AW().qN(t)}QH(...t){Yf.xe(t);const s=new Set(t),i=this.#t.tz();return s.isSubsetOf(i)}sz(t){Yf.Ne(t,Set),this.#t.iz(t)}ez(){return new Set(this.#t.tz())}signal(t){Yf.le(t);const s=this.#t;s.AW().TN().hz(s,t)}VN(t){Yf.le(t);const s=this.#t;return s.AW().TN().nz(s,t)}}}{const Zf=self._s,Qf=self.Ls,td=Zf.Is();self.rz=class extends self.PH{#t;#s=!1;#i=null;#e=!1;#h=null;#n;#r;constructor(t){super(),this.#t=Zf.kj.Oj(td),this.#s=!1,this.#i=null,this.#e=!1,this.#h=null,this.#n=t?.oz,this.#r=t?.az}LH(){this.lz(!1),this.uz(!1),super.LH()}cz(){return Zf.kj.fz()}dz(t){const s=this.#t;s.AW().pz(t,s)}mz(t){const s=this.#t;return s.AW().wW(t,s)}gz(t,s){if(Qf.le(t),Qf.Pe(s),!this.#n)throw new Error("no DOM component id set");this.#t.AW().yz(this.#n,t,s)}wz(t){Qf.xe(t);for(const[s,i]of t)this.gz(s,i)}Sz(t,s){if(Qf.le(t),!this.#n)throw new Error("no DOM component id set");this.#t.AW().jc(this.#n,t,s)}bz(t,s){if(Qf.le(t),!this.#n)throw new Error("no DOM component id set");return this.#t.AW().cW(this.#n,t,s)}vz(t,s){if(!this.#t.AW().cN())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#n,handler:t,data:s,responseId:null});this.Sz(t,s)}lz(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=this.#t.AW();if(t){if(!this.#i)if(this.#t.AW().Mz()){const t=globalThis.Gz,s=this.cV;this.#i=()=>{const i=performance.now();this.xz(),t.Tz(s,performance.now()-i)}}else this.#i=()=>this.xz();s.wf().addEventListener("tick",this.#i)}else s.wf().removeEventListener("tick",this.#i)}_z(){return this.#s}xz(){}uz(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=this.#t.AW();if(t){if(!this.#h)if(this.#t.AW().Mz()){const t=globalThis.Gz,s=this.cV;this.#h=()=>{const i=performance.now();this.Iz(),t.Tz(s,performance.now()-i)}}else this.#h=()=>this.Iz();s.wf().addEventListener("tick2",this.#h)}else s.wf().removeEventListener("tick2",this.#h)}Cz(){return this.#e}Iz(){}Rz(){return[]}Az(){return null}Pz(t){}Ez(){if(!this.#r)throw new Error("no wrapper component id set");return this.#t.AW().Fz(this.#r)}Dz(t,s){if(Qf.le(t),Qf.Pe(s),!this.#r)throw new Error("no wrapper component id set");this.#t.AW().Oz(this.#r,t,s)}kz(t){Qf.xe(t);for(const[s,i]of t)this.Dz(s,i)}Lz(t,s){if(!this.#r)throw new Error("no wrapper component id set");this.runtime.SN.Nz(this.#r,t,s)}Bz(t,s){if(!this.#r)throw new Error("no wrapper component id set");return this.runtime.SN.Wz(this.#r,t,s)}}}{let sd=function(t){return class s extends t{#t;#s;constructor(t){super(t);const s=id.kj.Oj(ad),i=s.iW();this.#t=s,this.#s=i,od.set(this,s);const e=[],h=i.jz();if(h){const t=i.EH().XV().qV().length;for(let s=0;s<t;++s)e.push(new self.YV(h,s))}const n={effects:{value:e,writable:!1}};Object.defineProperties(this,n)}get layout(){return this.#s.kB().EB()}get Vz(){return this.#s.eW().lU()}get x(){return this.#s.rG()}set x(t){t=+t;const s=this.#s;isNaN(t)||s.rG()===t||(s.oG(t),s.Uz())}get y(){return this.#s.lG()}set y(t){t=+t;const s=this.#s;isNaN(t)||s.lG()===t||(s.uG(t),s.Uz())}setPosition(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.rG()===t&&i.lG()===s||(i.zz(t,s),i.Uz())}Jz(){const t=this.#s;return[t.rG(),t.lG()]}offsetPosition(t,s){if(t=+t,s=+s,isNaN(t)||isNaN(s)||0===t&&0===s)return;const i=this.#s;i.Xz(t,s),i.Uz()}set qz(t){t=+t;const s=this.#s;isNaN(t)||s.Yz()===t||(s.$z(t),s.Uz())}get qz(){return this.#s.Yz()}set Kz(t){t=+t;const s=this.#s;isNaN(t)||s.Zz()===t||(s.Qz(t),s.Uz())}get Kz(){return this.#s.Zz()}tJ(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.Yz()===t&&i.Zz()===s||(i.$z(t),i.Qz(s),i.Uz())}sJ(){const t=this.#s;return[t.Yz(),t.Zz()]}get oH(){return this.#s.cG()}set oH(t){t=+t;const s=this.#t,i=this.#s;isNaN(t)||i.cG()===t||(i.fG(t),s.AW().lW())}get iJ(){return this.#s.eJ()}get width(){return this.#s.My()}set width(t){t=+t;const s=this.#s;isNaN(t)||s.My()===t||(s.hy(t),s.Uz())}get height(){return this.#s.xy()}set height(t){t=+t;const s=this.#s;isNaN(t)||s.xy()===t||(s.ny(t),s.Uz())}$V(t,s){t=+t,s=+s;const i=this.#s;isNaN(t)||isNaN(s)||i.My()===t&&i.xy()===s||(i.hP(t,s),i.Uz())}getSize(){const t=this.#s;return[t.My(),t.xy()]}get angle(){return this.#s.tU()}set angle(t){t=id.Zh(+t);const s=this.#s;isNaN(t)||s.tU()===t||(s.QV(t),s.Uz())}get hJ(){return id.tn(this.angle)}set hJ(t){this.angle=id.Qh(t)}Zl(t){return t?(this.#s.nJ(nd,rd,!1),nd.il()):this.#s.rJ().il()}oJ(t){return t?(this.#s.nJ(nd,rd,!1),rd.Jl()):this.#s.aJ().Jl()}lJ(){return this.#s.uJ()}get isVisible(){return this.#s.WU()}set isVisible(t){t=!!t;const s=this.#t,i=this.#s;i.WU()!==t&&(i.NU(t),s.AW().lW())}get opacity(){return this.#s.NF()}set opacity(t){t=id.Kh(+t,0,1);const s=this.#t,i=this.#s;isNaN(t)||i.NF()===t||(i.WF(t),s.AW().lW())}set cJ(t){if(ed.xe(t),t.length<3)throw new Error("expected 3 elements");cd.Ro(t[0],t[1],t[2]);const s=this.#t,i=this.#s;i.fJ().zo(cd)||(i.dJ(cd),s.AW().lW())}get cJ(){const t=this.#s.fJ();return[t.Lo(),t.No(),t.Bo()]}set Ok(t){ed.le(t);const s=ld.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#t;this.#s.YM(s),i.AW().lW()}get Ok(){return ud.get(this.#s.gH())}pJ(){this.#s.mJ()}gJ(){this.#s.yJ()}wJ(t){ed.Ne(t,hd);const s=this.#t,i=s.AW().mU(t);if(!i)throw new Error("invalid layer");s.iW().SJ(i)}bJ(t,i){ed.Ne(t,s),this.#s.vJ(od.get(t),i)}get zIndex(){return this.#s.hW()}get MJ(){return this.#s.GJ()}set MJ(t){this.#s.xJ(!!t)}xl(t,s){return ed.te(t),ed.te(s),this.#s.TJ(+t,+s)}KW(t){ed.Ne(t,s);const i=this.#t,e=od.get(t);return i.AW().$L().ZW(i,e)}tj(){const t=this.#t,s=t.AW().$L().sj(t);return s?s.ZB():null}getParent(){const t=this.#t._J();return t?t.ZB():null}IJ(){const t=this.#t.CJ();return t?t.ZB():null}*RJ(){for(const t of this.#t.RJ())yield t.ZB()}AJ(){return this.#t.PJ()}EJ(t){const s=this.#t.FJ(t);return s?s.ZB():null}*children(){for(const t of this.#t.children())yield t.ZB()}*DJ(){for(const t of this.#t.DJ())yield t.ZB()}OJ(t,i){ed.Ne(t,s),ed.ye(i),i||(i={});const e=this.#t,h=od.get(t);e.kJ(h,i)}removeChild(t){ed.Ne(t,s);const i=this.#t,e=od.get(t);i.LJ(e)}NJ(){const t=this.#t;t.BJ()&&t._J().LJ(t)}WJ(){const t=this.#s;return{jJ:t.VJ(),UJ:t.HJ(),zJ:t.JJ(),XJ:t.qJ(),YJ:t.$J(),KJ:t.ZJ(),QJ:t.tX(),sX:t.iX(),eX:t.hX()}}nX(t,s){ed.ne(t),ed.ne(s),this.#s.rX(t,s)}oX(){const t=this.#s;t.aX(),t.Uz()}lX(t,s,i){ed.ne(t),ed.ne(s),ed.ge(i);const e=this.#s;e.uX(t,s,i)&&e.Uz()}cX(t,s){let i=NaN,e=NaN,h=NaN,n=NaN,r=NaN;const o=this.#s;if(o.fX()){const a=o.dX().$G(t,s);null!==a&&(i=a.rG(),e=a.lG(),h=a.cG(),n=a.dG(),r=a.mG())}return{x:i,y:e,oH:h,pX:n,mX:r}}gX(){const t=this.#s;if(!t.fX())return[0,0];const s=t.dX();return[s.BG(),s.WG()]}}};0;const id=self._s,ed=self.Ls,hd=(self.PH,self.pU),nd=id.zh(id.Rect),rd=id.zh(id.Cl),od=new WeakMap,ad=id.Is(),ld=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ud=new Map([...ld.entries()].map(t=>[t[1],t[0]])),cd=id.zh(id.Go);self.yX=sd(self.PH),self.wX=sd(self.rz)}{self._s;const fd=self.Ls;self.SX=class extends self.yX{#t;constructor(){super(),this.#t=self.PH.OH()}bX(){return this.#t.MX().vX()}focus(){this.#t.MX().GX()}blur(){this.#t.MX().xX()}TX(t,s){fd.le(t),this.#t.MX()._X(t,s)}}}{let dd=function(t){let s=gd.get(t);return s||(s=pd.zh(pd.Event.wf),gd.set(t,s),s)};0;const pd=self._s,md=self.Ls,gd=new WeakMap,yd=pd.Is();self.IX=class{#t;constructor(){const t=pd.kj.Oj(yd);this.#t=t;const s={runtime:{value:t.AW().Lj(),writable:!1},behavior:{value:t.RX().CX(),writable:!1},AX:{value:t.EX().PX(),writable:!1}};Object.defineProperties(this,s),t.AW().sV(this,t)}static OH(){return pd.kj.kH()}get FX(){return this.#t.DX().ZB()}LH(){const t=gd.get(this);t&&(t.Jh(),gd.delete(this))}addEventListener(t,s,i){md.le(t),md.Pe(s),dd(this).addEventListener(t,s,i)}removeEventListener(t,s,i){md.le(t),md.Pe(s),dd(this).removeEventListener(t,s,i)}dispatchEvent(t){dd(this).dispatchEvent(t)}}}{const wd=self._s,Sd=(self.Ls,wd.Is());self.OX=class{constructor(){const t=wd.kj.Oj(Sd),s={runtime:{value:t.AW().Lj(),writable:!1},behavior:{value:t.RX().CX(),writable:!1},name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{const bd=self._s,vd=(self.Ls,bd.Is());self.kX=class{#s;constructor(){const t=bd.kj.Oj(vd);this.#s=t;const s={runtime:{value:t.AW().Lj(),writable:!1},id:{value:t.Nj(),writable:!1}};Object.defineProperties(this,s),t.AW().sV(this,t)}dV(){return this.#s.GV().map(t=>t.ZB())}static iV(t){if(!t)return null;const s=bd.kj.LX(t);return s?s.CX():null}}}{const Md=self._s,Gd=self.Ls,xd=Md.zh(Md.Go);self.YV=class{#t;constructor(t,s){this.#t=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){return this.#t.qV()[this.index].Rc()}get isActive(){return this.#t.NX(this.index)}set isActive(t){t=!!t;const s=this.#t;s.NX(this.index)!==t&&(s.BX(this.index,t),s.WX(),s.AW().lW())}setParameter(t,s){Gd.ne(t),t=Math.floor(+t);const i=this.#t,e=i.jX(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Md.Go){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");xd.Ro(s[0],s[1],s[2]),s=xd}else if("number"!=typeof s)throw new TypeError("expected number");i.VX(this.index,t,s)&&i.NX(this.index)&&i.AW().lW()}getParameter(t){Gd.ne(t),t=Math.floor(+t);const s=this.#t.jX(this.index,t);if(null===s)throw new RangeError("invalid index");return s instanceof Md.Go?[s.Lo(),s.No(),s.Bo()]:s}}}self._s,self.Ls;self.UX=class{#t;constructor(t){this.#t=t,Object.defineProperties(this,{name:{value:t.Rc(),writable:!1}})}get speed(){return this.#t.HX()}get zX(){return this.#t.JX()}get XX(){return this.#t.qX()}get YX(){return this.#t.$X()}get KX(){return this.#t.ZX()}get frameCount(){return this.#t.QX()}tq(){return this.#t.sq().map(t=>t.iq())}*frames(){for(const t of this.#t.sq())yield t.iq()}};self._s,self.Ls;self.IW=class{#s;constructor(t){this.#s=t}static _W(t){return t.#s}get width(){return this.#s.My()}get height(){return this.#s.xy()}getSize(){const t=this.#s;return[t.My(),t.xy()]}eq(t){return t.hq(this)}nq(){return this.#s.kP().il()}};{self._s;const Td=self.Ls;self.rq=class extends self.IW{#s;constructor(t){super(t.oq()),this.#s=t,Object.defineProperties(this,{duration:{value:t.aq(),writable:!1},qz:{value:t.Yz(),writable:!1},Kz:{value:t.Zz(),writable:!1}})}sJ(){const t=this.#s;return[t.Yz(),t.Zz()]}lq(){return this.#s.uq()}cq(t){return this.fq(t)[0]}pq(t){return this.fq(t)[1]}fq(t){const s=this.#s;let i=null;if("number"==typeof t)i=s.mq(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.gq(t)}return i?[i.rG(),i.lG()]:this.sJ()}yq(){const t=this.#s.wq();return t?t.pu():0}Sq(t){return this.bq(t)[0]}vq(t){return this.bq(t)[1]}bq(t){Td.ne(t),t=Math.floor(t);const s=this.#s.wq();if(!s||t<0||t>=s.pu())return[0,0];const i=s.du();return[i[2*t],i[2*t+1]]}get tag(){return this.#s.Mq()}}}{let _d=function(t){const s=Cd.get(t);if(s.Gq())throw new Error("timeline/tween was released and is no longer valid");return s};0;self._s;const Id=self.Ls,Cd=new WeakMap;self.xq=class{constructor(t){Cd.set(this,t),t.AW().sV(this,t)}pause(){_d(this).Tq()}resume(){_d(this)._q()}stop(){_d(this).Bf()}QH(t){return _d(this).Iq(t)}set time(t){Id.ne(t),_d(this).Cq(t)}get time(){return _d(this).pO()}set totalTime(t){Id.ne(t),_d(this).Rq(t)}get totalTime(){return _d(this).Aq()}set zX(t){_d(this).Pq(!!t)}get zX(){return _d(this).Eq()}set KX(t){_d(this).Fq(!!t)}get KX(){return _d(this).Dq()}set playbackRate(t){Id.ne(t),_d(this).Oq(t)}get playbackRate(){return _d(this).kq()}get progress(){const t=_d(this);return t.pO()/t.Aq()}get tags(){return _d(this).Lq()}get finished(){return _d(this).Nq()}get Bq(){return _d(this).IsPlaying()}get Wq(){return _d(this).jq()}get Vq(){return Cd.get(this).Gq()}}}{let Rd=function(t){const s=Ad.get(t);if(s.Gq())throw new Error("timeline was released and is no longer valid");return s};0;self._s,self.Ls;const Ad=new WeakMap;self.Uq=class extends self.xq{constructor(t){super(t),Ad.set(this,t);const s={name:{value:t.Rc(),writable:!1}};Object.defineProperties(this,s)}}}{let Pd=function(t){const s=Fd.get(t);if(s.Gq())throw new Error("tween was released and is no longer valid");return s};0;self._s;const Ed=self.Ls,Fd=new WeakMap,Dd=new WeakMap;let Od=null;self.Hq=class extends self.xq{constructor(t,s,i){super(t),Od||(Od=i.zq),Fd.set(this,t),s&&Dd.set(this,s)}stop(){const t=Pd(this);Dd.get(this).Jq(t)}Xq(t){Ed.le(t);const s=self.Vu.oc(Od(t));Pd(this).qq(s)}get FX(){const t=Pd(this).Yq();return t?t.ZB():null}get $q(){return Pd(this).Kq()}set $q(t){Pd(this).Zq(!!t)}get finished(){const t=Pd(this);return t.Nq().then(()=>new Promise(s=>{t.Qq()&&s()}))}get released(){return Pd(this).tY()}get value(){const t=Pd(this);if("value"!==t.sY())throw new Error("not a value tween");return t.eY("value").iY()}}}self._s,self.Ls;self.hY=class extends self.Dj{constructor(){super()}};{const kd=self._s,Ld=self.Ls,Nd=kd.Is();self.nY=class extends self.hY{#t;#i;#s=0;#n=new Map;constructor(t){if(super(),this.#t=kd.kj.Oj(Nd),!t?.oz)throw new Error("no DOM component ID specified");this.#i=t.oz,this.rY("elem-focused",t=>t.oY()),this.rY("elem-blurred",t=>{t&&t.aY()})}lY(t){const s=this.#s++;return this.#n.set(s,t),s}uY(t){this.#n.delete(t)}rY(t,s){this.#t.AW().yz(this.#i,t,t=>{const i=this.#n.get(t.elementId);s(i,t)})}cY(t){Ld.xe(t);for(const[s,i]of t)this.cY(s,i)}}}{const Bd=self._s,Wd=(self.Ls,Bd.Is());self.fY=class extends self.TV{#t;constructor(){super(),this.#t=Bd.kj.Oj(Wd)}dY(){}pY(){return this.#t.oq().mY()}gY(t){}yY(t){}wY(){}SY(t){}}}{const jd=self._s,Vd=(self.Ls,jd.Is());self.bY=class extends self.wX{#t;#h=null;#s=null;constructor(t){super(t),this.#t=jd.kj.Oj(Vd)}LH(){if(super.LH(),this.#h){const t=this.#t.AW().wf();t.removeEventListener("renderercontextlost",this.#h),t.removeEventListener("renderercontextrestored",this.#s),this.#h=null,this.#s=null}}vY(){if(this.#h)return;this.#h=()=>this.MY(),this.#s=()=>this.GY();const t=this.#t.AW().wf();t.addEventListener("renderercontextlost",this.#h),t.addEventListener("renderercontextrestored",this.#s)}MY(){}GY(){}xY(t){}TY(){return!0}pM(){return!1}}}{const Ud=self._s,Hd=(self.Ls,Ud.zh(Ud.Rect)),zd=new WeakMap,Jd=Ud.Is();self._Y=class extends self.bY{#t=-1;#s=!0;#n=!1;#e=!1;#i=-.2;#r=Ud.zh(Ud.Rect,0,0,-1,-1);#o=0;#a=0;#l=-1;#u=-1;#c=!1;constructor(t){if(!t?.oz)throw new Error("no DOM component ID specified");super(t);const s=Ud.kj.Oj(Jd);zd.set(this,s),this.#t=this.cV.lY(this);const i=s.AW().XB();this.#o=i.IY(),this.#a=i.CY(),this.lz(!0)}LH(){super.LH(),this.cV.uY(this.#t),this.RY("destroy"),this.#t=-1,zd.delete(this)}AY(){if(zd.get(this).AW().cN())throw new Error("not valid in worker mode");return this.PY("get-element")}RY(t,s){s||(s={}),s.elementId=this.#t,this.Sz(t,s)}PY(t,s){return s||(s={}),s.elementId=this.#t,this.vz(t,s)}EY(t,s){return s||(s={}),s.elementId=this.#t,this.bz(t,s)}FY(t){t||(t={});const s=zd.get(this).iW();t.elementId=this.#t,t.isVisible=s.WU(),t.htmlIndex=s.eW().DY(),t.htmlZIndex=s.OY(),Object.assign(t,this.kY()),this.#s=!!t.isVisible,this.vz("create",t),this.LY(!0)}NY(t){t=!!t,this.#s!==t&&(this.#s=t,this.RY("set-visible",{isVisible:t}))}xz(){this.LY(!1)}BY(){const t=zd.get(this).AW().XB().WY();return"Android"===Ud.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}LY(t){const s=zd.get(this);if(s.jY())return;const i=s.iW(),e=i.eW(),h=i.rJ();let[n,r]=e.xH(h.Za(),h.Qa()),[o,a]=e.xH(h.tl(),h.sl());const l=s.AW().XB(),u=l.xj(),c=l._j();if(!i.WU()||!e.WU())return void this.NY(!1);if(!this.BY()&&(o<=0||a<=0||n>=u||r>=c))return void this.NY(!1);Hd.set(n,r,o,a);const f=l.IY(),d=l.CY(),p=e.DY(),m=i.OY();if(!t&&Hd.equals(this.#r)&&this.#o===f&&this.#a===d&&this.#l===p&&this.#u===m)return void this.NY(!0);this.#r.m(Hd),this.#o=f,this.#a=d,this.#l=p,this.#u=m,this.NY(!0);let g=null;this.#e&&(g=e.VY()+this.#i),this.RY("update-position",{left:Math.round(this.#r.Za()),top:Math.round(this.#r.Qa()),width:Math.round(this.#r.width()),height:Math.round(this.#r.height()),htmlIndex:p,htmlZIndex:m,fontSize:g})}UY(){this.PY("focus",{focus:!0})}HY(){this.PY("focus",{focus:!1})}oY(){this.#n=!0}aY(){this.#n=!1}zY(){return this.#n}JY(t,s){this.XY("set-css-style",{prop:Ud.bo(t),val:s})}qY(t,s){this.XY("set-attribute",{name:t,val:s})}YY(t){this.XY("remove-attribute",{name:t})}$Y(){this.#c||(this.#c=!0,Promise.resolve().then(()=>{this.#c=!1,this.RY("update-state",this.kY())}))}kY(){}KY(){return this.#t}}}self._s,self.Ls;self.ZY=class extends self.kX{constructor(){super()}};self._s,self.Ls;self.QY=class extends globalThis.OX{constructor(){super()}dY(){}};{const Xd=self._s,qd=(self.Ls,new WeakMap),Yd=Xd.Is();self.t$=class extends self.IX{#e=!1;#s=!1;#t=!1;constructor(){super(),qd.set(this,Xd.kj.Oj(Yd))}LH(){super.LH(),this.lz(!1),this.uz(!1),this.s$(!1),qd.delete(this)}cz(){return Xd.kj.fz()}i$(){}dz(t){const s=qd.get(this);s.AW().pz(t,s.DX(),s.EX())}mz(t){const s=qd.get(this);return s.AW().wW(t,s.DX(),s.EX())}lz(t){if(t=!!t,this.#e===t)return;this.#e=t;const s=qd.get(this).AW();t?s.e$(this):s.h$(this)}_z(){return this.#e}xz(){}uz(t){if(t=!!t,this.#s===t)return;this.#s=t;const s=qd.get(this).AW();t?s.n$(this):s.r$(this)}Cz(){return this.#s}Iz(){}s$(t){if(t=!!t,this.#t===t)return;this.#t=t;const s=qd.get(this).AW();t?s.o$(this):s.a$(this)}l$(){return this.#t}u$(){}Rz(){return[]}Az(){return null}Pz(t){}}}{self._s;const $d=self.Ls;let Kd=null;self.bN=class{constructor(t){Kd=t,Object.defineProperties(this,{c$:{value:Kd.f$(),writable:!1}})}d$(){Kd.lW()}pW(t){Kd.mW(t)}Nz(t,s,i){$d.le(t),$d.le(s),$d.Te(i),Kd.p$(t,s,i)}Wz(t,s,i){return $d.le(t),$d.le(s),$d.Te(i),Kd.m$(t,s,i)}g$(t){return $d.ue(t),new self.y$(Kd,t)}set w$(t){Kd.S$(!!t)}get w$(){return Kd.b$()}v$(t){Kd.M$(!!t)}G$(t){$d.te(t);const s=Kd.x$(t);return s?s.rV():null}}}self._s,self.Ls;self.y$=class{#t;#s;#r;#i;#n;#h;constructor(t,s){this.#t=t;const i=t.TN(),e=t.PN();this.#s=e,this.#r=e.T$();const h=t.NN();this.#i=h._$(),this.#n=h.I$(e);const n=i.C$().I$();this.#h=n,s&&n.R$(s),t.A$(!1)}P$(){const t=this.#t.TN(),s=this.#r,i=this.#h;t.E$(s),this.#s.F$(this.#i,this.#n),t.D$(s),i.O$(i.VL()+1)}get k$(){return this.#h.L$()}release(){const t=this.#t,s=t.NN(),i=t.TN().C$();t.A$(!0),i.N$(),s.N$()}};{let Zd=function(t){return t instanceof ImageBitmap||"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas};0;const Qd=self._s,tp=self.Ls;let sp=null,ip=null;const ep=["none","back","front"],hp=["cw","ccw"];self.B$=class{constructor(t,s){ip=t,sp=s}W$(){sp.XF()}j$(t){sp.zF(t)}V$(){sp.Cb()}U$(){sp.Mb()}H$(){sp.Ob()}setColor(t){sp.BF(t[0],t[1],t[2],t[3])}z$(t,s,i,e){sp.BF(t,s,i,e)}J$(){sp.jF()}X$(t){sp.WF(t)}q$(t){sp.ev(t)}Y$(){return sp.hv()}$$(t){const s=ep.indexOf(t);if(-1===s)throw new Error("invalid cull mode");sp.jv(s)}K$(){return ep[sp.YF()]}Z$(t){const s=hp.indexOf(t);if(-1===s)throw new Error("invalid front face winding");sp.Vv(s)}Q$(){return sp.$F()}rect(t){sp.ZF(t.left,t.top,t.right,t.bottom)}tK(t,s,i,e){sp.ZF(t,s,i,e)}sK(t){sp.Cl(Qd.Cl.Xl(t))}iK(t,s,i,e,h,n,r,o){sp.Hv(t,s,i,e,h,n,r,o)}eK(t,s){sp.pv(Qd.Cl.Xl(t),Qd.Rect.el(s))}hK(t,s){sp.sD(Qd.Cl.Xl(t),Qd.Cl.Xl(s))}nK(t,s,i){sp.iD(Qd.Cl.Xl(t),Qd.Cl.Xl(s),i)}rK(t,s,i,e,h,n,r,o,a,l,u,c,f){sp.eD(t,s,i,e,h,n,r,o,a,l,u,c,Qd.Rect.el(f))}oK(t,s,i,e,h,n,r,o,a,l,u,c,f){sp.lv(t,s,i,e,h,n,r,o,a,l,u,c,Qd.Cl.Xl(f))}aK(t,s,i,e,h,n,r,o,a,l,u,c,f,d){sp.hD(t,s,i,e,h,n,r,o,a,l,u,c,Qd.Cl.Xl(f),d)}lK(t,s,i,e){sp.nx(t,s,i,e)}uK(t){sp.Uv(t)}line(t,s,i,e){sp.Ry(t,s,i,e)}cK(t,s,i,e,h,n){sp.uv(t,s,i,e,h,n)}fK(t,s,i,e){sp.mv(t,s,i,e)}dK(t){sp.Sv(Qd.Rect.el(t))}pK(t){sp.bv(Qd.Cl.Xl(t))}mK(t){sp._v(t)}gK(){sp.Iv()}yK(t){sp.Pv(t)}wK(){sp.Ov()}SK(t){tp.Be(t,self.bK);const s=t?ip.mU(t):null;sp.UF(s)}vK(t,s){const i=self.IW._W(t);if(!i)throw new Error("invalid IImageInfo");return i.MK(sp,{bx:s?.bx??"clamp-to-edge",vx:s?.vx??"clamp-to-edge",Mx:s?.Mx??"trilinear",Tx:s?.Tx??!0})}GK(t){const s=self.IW._W(t);if(!s)throw new Error("invalid IImageInfo");s.xA()}hq(t){const s=self.IW._W(t);if(!s)throw new Error("invalid IImageInfo");const i=s.kT();return self.bK.xK(ip,i)}TK(t,s){if(!Zd(t))throw new TypeError("invalid texture data");const i=sp.CD(t,{bx:s?.bx??"clamp-to-edge",vx:s?.vx??"clamp-to-edge",Mx:s?.Mx??"trilinear",Tx:s?.Tx??!0});return self.bK.xK(ip,i)}_K(t,s,i){tp.ne(t),tp.ne(s);const e=sp._T(t,s,{bx:i?.bx??"clamp-to-edge",vx:i?.vx??"clamp-to-edge",Mx:i?.Mx??"trilinear",Tx:i?.Tx??!0});return self.bK.xK(ip,e)}IK(t,s,i){tp.Ne(s,self.bK);const e=ip.mU(s);sp.OP(t,e,{Ix:i?.Ix??!0})}deleteTexture(t){tp.Ne(t,self.bK);const s=ip.mU(t);sp.AT(s)}CK(){const t=sp.hM();return new self.RK(ip,t)}AK(){ip.XB().PK(sp)}EK(t){tp.Ne(t,globalThis.pU),ip.mU(t).FK(sp)}}}{self._s,self.Ls;const np=new WeakMap,rp=new WeakMap;self.bK=class{constructor(t,s){np.set(this,{runtime:t,texture:s}),rp.set(s,this),t.sV(this,s),Object.defineProperties(this,{width:{value:s.My(),writable:!1},height:{value:s.xy(),writable:!1}})}static xK(t,s){if(!s)return null;return rp.get(s)||new self.bK(t,s)}}}{let op=function(t){return lp.get(t).DK};0;self._s;const ap=self.Ls,lp=new WeakMap;self.RK=class{constructor(t,s){lp.set(this,{runtime:t,DK:s}),t.sV(this,s)}release(){op(this).Jh()}set kK(t){ap.le(t),op(this).EA(t)}get kK(){return op(this).AR()}set LK(t){ap.ne(t),op(this).FA(t)}get LK(){return op(this).DA()}set lineHeight(t){ap.ne(t),op(this).kA(t)}get lineHeight(){return op(this).LA()}set NK(t){op(this).NA(t)}get NK(){return op(this).BA()}set BK(t){op(this).WA(t)}get BK(){return op(this).jA()}setColor(t){ap.xe(t),this.WK(t[0],t[1],t[2])}WK(t,s,i){op(this).JA(t,s,i)}jK(t){ap.le(t),op(this).$M(t)}set VK(t){op(this).XA(t)}get VK(){return op(this).qA()}set verticalAlign(t){op(this).YA(t)}get verticalAlign(){return op(this).$A()}set UK(t){op(this).KA(t)}get UK(){return op(this).ZA()}set HK(t){op(this).QA(t)}get HK(){return op(this).tP()}set text(t){ap.le(t),op(this).Vc(t)}get text(){return op(this).sP()}$V(t,s,i){ap.ne(t),ap.ne(s),ap.ne(i),op(this).hP(t,s,i)}eq(){const{runtime:t,DK:s}=lp.get(this),i=s.kT();return self.bK.xK(t,i)}nq(){return op(this).kP().il()}zK(t){ap.Pe(t),op(this).IA=t}JK(){op(this).xA()}get XK(){return op(this).rP()}get qK(){return op(this).aP()}}}{let up=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return pp.get(i)||""},cp=function(t){return new Promise((s,i)=>{const e=document.createElement("script");e.onload=s,e.onerror=i,e.async=!1,e.type="module",e.src=t,document.head.appendChild(e)})};0;const fp=self._s,dp=new Set(["local","remote"]),pp=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);fp.YK=class extends fp.Uh{constructor(t,s){super();const i=s.exportType;this.Nc=t,this.$K=new Map,this.KK="cordova"===i,this.ZK=!!s.isiOSCordova,this.QK=s.swClientId,this.tZ=s.supportedAudioFormats||{},this.sZ=new Map,this.iZ=!1,this.eZ=s.scriptFolder,this.hZ="",this.nZ="",this.rZ="",this.oZ=s.fileMap||new Map,this.aZ=new Map,this.lZ=[];const e="html5"===i||"scirra-arcade"===i||"instant-games"===i;this.uZ=e?"remote":"local",this.cZ=new Map,this.fZ=[],this.dZ=[],this.pZ=!1,this.mZ=0,this.gZ=0,this.yZ=0,this.wZ=!1,this.SZ=fp.zh(fp.Qd,()=>this.bZ(),50),this.vZ=fp.zh(fp.Hd,Math.max(fp.hardwareConcurrency,8)),this.MZ=fp.zh(fp.Hd,20),this.GZ=new self.GW(this)}Jh(){for(const t of this.cZ.values())t.Jh();this.cZ.clear(),fp.Sr(this.dZ),this.Nc=null}AW(){return this.Nc}xZ(){return this.eZ}TZ(t){this.hZ=t}WW(){return this.hZ}_Z(t){this.nZ=t}IZ(){return this.nZ}CZ(t){this.rZ=t}RZ(){return this.rZ}AZ(t){this.lZ=t}YW(){return this.lZ}eo(t,s){return s=s||this.uZ,fp.Kr(t)?"playable-ad-single-file"===this.Nc.pj()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):"local"===s?this.vZ.Bu(()=>fp.eo(t)):this.MZ.Bu(()=>fp.eo(t)):fp.eo(t)}ho(t){return fp.Kr(t)?"playable-ad-single-file"===this.Nc.pj()?fp.ro(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.uZ?this.vZ.Bu(()=>fp.ho(t)):this.MZ.Bu(()=>fp.ho(t)):fp.ho(t)}so(t){return fp.Kr(t)?"playable-ad-single-file"===this.Nc.pj()?fp.oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):"local"===this.uZ?this.vZ.Bu(()=>fp.so(t)):this.MZ.Bu(()=>fp.so(t)):fp.so(t)}async io(t){const s=await this.so(t);return JSON.parse(s)}NW(t){let s=this.hZ+t;return"Gecko"===fp.Ks.ei&&"preview"===this.Nc.pj()&&(s=this.PZ(s)),s}kW(t){return"playable-ad-single-file"===this.Nc.pj()&&fp.Kr(t)?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):t}EZ(t){if(fp.$r(t)||"preview"!==this.Nc.pj()||!this.QK||!t)return t;try{const s=new URL(t,location.href);return s.searchParams.set("__c3_client_id",this.QK),s.toString()}catch(s){return console.warn("Invalid iframe URL: "+t),t}}FZ(t,s){return(s?"true":"false")+"|"+t}DZ(t){const s=!!t.OZ;if(t.kZ&&!dp.has(t.kZ))throw new Error("invalid load policy");const i=this.FZ(t.url,s);let e=this.cZ.get(i);return e||(e=fp.zh(fp.LZ,this,{url:t.url,size:t.size||0,kZ:t.kZ||this.uZ,OZ:s}),this.cZ.set(i,e),this.pZ||(this.mZ+=e.Fu(),this.dZ.push(e.NZ().then(()=>this.BZ(e.Fu())))),e)}WZ(t){const s=this.FZ(t.jZ(),t.VZ());this.cZ.delete(s)}async UZ(t){try{await Promise.all(this.dZ),this.yZ=1,t&&0===this.mZ&&this.bZ()}catch(t){console.error("Error loading: ",t),this.wZ=!0,this.bZ()}}HZ(){this.pZ=!0}zZ(){return this.wZ}BZ(t){this.gZ+=t,this.SZ.pp()}bZ(){const t=fp.zh(fp.Event,"loadingprogress");0===this.mZ?this.yZ=1:this.yZ=fp.Kh(this.gZ/this.mZ,0,1),t.progress=this.yZ,this.Nc.wf().dispatchEvent(t),this.Nc.JZ(fp.zh(fp.Event,"loadingprogress"))}IB(){return this.yZ}RB(){return this.Nc.qZ().XZ()}YZ(t){fp.Gr(this.fZ,t),this.fZ.length&&this.dZ.push(this.$Z())}async $Z(){const t=[],s=[];for(const[i,e,h]of this.fZ)this.mZ+=h,t.push(this.KZ(i,e,s).then(()=>this.BZ(h)));await Promise.all(t),this.Nc.cN()&&s.length>0&&await this.Nc.cW("runtime","load-webfonts",{webfonts:s})}async KZ(t,s,i){try{let e=this.kW(s);"Gecko"===fp.Ks.ei&&(t=`'${t}'`),("Gecko"===fp.Ks.ei&&"preview"===this.Nc.pj()||"playable-ad-single-file"===this.Nc.pj())&&(e=this.PZ(e));const h=new FontFace(t,`url('${e}')`);this.Nc.cN()?self.fonts.add(h):document.fonts.add(h),await h.load(),this.Nc.cN()&&i.push({name:t,url:e})}catch(s){console.warn(`[C3 runtime] Failed to load web font '${t}': `,s)}}ZZ(t){return!!this.tZ[t]}QZ(t,s){this.iZ=!!s;for(const[s,i,e]of t)this.sZ.set(s,{fileName:s,tQ:i.map(t=>({type:t[0],sQ:t[1],fullName:s+t[1],fileSize:t[2]})),iQ:e})}eQ(t){const s=this.sZ.get(t);if(!s)return null;let i=null;for(const t of s.tQ)if(i||"audio/webm; codecs=opus"!==t.type||(i=t),this.ZZ(t.type))return t;return i}hQ(t){const s=this.eQ(t);return s?{url:this.NW(s.fullName),type:s.type}:null}nQ(){if(this.iZ){const t=[];for(const s of this.sZ.values()){if(s.iQ)continue;const i=this.eQ(s.fileName);i&&t.push({rQ:s.fileName,url:this.NW(i.fullName),type:i.type,fileSize:i.fileSize})}return t}return[]}oQ(t){return"preview"===this.Nc.pj()&&(t=new URL(t,location.href).toString()),this.oZ.get(t)||null}PZ(t){let s=this.aZ.get(t);if(s)return s;const i=this.oQ(t);return i?(s=URL.createObjectURL(i),this.aZ.set(t,s),s):t}JL(){return this.GZ}async UW(...t){const s=t.map(t=>this.kW(t));if(this.Nc.cN())if(1===t.length){const s=t[0];await import((fp.Kr(s)?"./":"")+s)}else{const s=t.map(t=>`import "${fp.Kr(t)?"./":""}${t}";`).join("\n"),i=URL.createObjectURL(new Blob([s],{type:"application/javascript"}));await import(i)}else await Promise.all(s.map(t=>cp(t)))}async zW(t){if(WebAssembly.compileStreaming){const s=this.kW(t);return await WebAssembly.compileStreaming(fetch(s))}{const s=await fp.ho(t);return await WebAssembly.compile(s)}}async XW(t){const s=this.kW(t);return await this.Nc.cW("runtime","add-stylesheet",{url:s})}}}{const mp=self._s;mp.aQ=class extends mp.Uh{constructor(t,s){super(),this.lQ=t,this.Nc=t.AW(),this.uQ=s.url||"",this.cQ=s.size,this.fQ=s.kZ,this.dQ=s.blob||null,this.pQ=!!this.dQ,this.Ew=null}Jh(){this.Ew=null,this.lQ=null,this.Nc=null,this.dQ=null}jZ(){return this.uQ}Fu(){return this.cQ}NZ(){return"local"===this.fQ||this.dQ?(this.pQ=!0,Promise.resolve()):(this.Ew||(this.Ew=this.lQ.eo(this.uQ,this.fQ).then(t=>(this.pQ=!0,this.Ew=null,this.dQ=t,t)).catch(t=>{console.error("Error loading resource: ",t),this.Ew=null})),this.Ew)}mQ(){return this.pQ}gQ(){return this.dQ?Promise.resolve(this.dQ):this.Ew?this.Ew:this.lQ.eo(this.uQ,this.fQ)}}}{const gp=self._s,yp=new gp.Hd,wp=new Set;gp.LZ=class extends gp.aQ{constructor(t,s){super(t,s),this.yQ=null,this.wQ=null,this.Hp=0,this.SQ=-1,this.bQ=-1,this.vQ=!!s.OZ,wp.add(this)}Jh(){if(0!==this.Hp)throw new Error("released image asset which still has texture references");this.lQ.WZ(this),this.yQ=null,wp.delete(this),super.Jh()}static MQ(){for(const t of wp)t.yQ=null,t.wQ=null,t.Hp=0}MK(t,s){return s=s||{},this.Hp++,this.wQ?Promise.resolve(this.wQ):(this.yQ||(s.Gx=this.Nc.XB().GQ(),this.yQ=this.xQ(t,s)),this.yQ)}async xQ(t,s){try{const i=await this.gQ();return 0===this.Hp?(this.yQ=null,null):await yp.Bu(async()=>{const e=await t.RD(i,s);return this.yQ=null,0===this.Hp?(t.AT(e),null):(this.wQ=e,this.SQ=e.My(),this.bQ=e.xy(),this.wQ)})}catch(t){throw console.error("Failed to load texture: ",t),t}}xA(){if(this.Hp<=0)throw new Error("texture released too many times");this.Hp--,0===this.Hp&&this.wQ&&(this.wQ.IM().AT(this.wQ),this.wQ=null)}TQ(){return this.Hp}kT(){return this.wQ}My(){return this.SQ}xy(){return this.bQ}VZ(){return this.vQ}async _Q(){const t=await this.gQ();return gp.Ai.ImageBitmap?await createImageBitmap(t):await gp.lo(t)}}}{let Sp=function(t,s){return t.iW().IQ()-s.iW().IQ()};0;const bp=self._s;self.assert;bp.CQ=class extends bp.Uh{constructor(t,s,i){super(),this.RQ=t,this.Ra=s,this.Aa=i,this.AQ=[],this.PQ=!0,this.EQ=new Set,this.FQ=!1}Jh(){bp.Sr(this.AQ),this.EQ.clear(),this.RQ=null}Bf(){bp.Sr(this.AQ),this.PQ=!0,this.EQ.clear(),this.FQ=!1}DQ(){this.PQ=!1}Au(){return!this.AQ.length||!(this.AQ.length>this.EQ.size)&&(this.OQ(),!0)}kQ(t){if(this.EQ.has(t))return this.EQ.delete(t),void(0===this.EQ.size&&(this.FQ=!1));this.AQ.push(t),this.PQ=1===this.AQ.length}Kf(t){this.EQ.add(t),this.FQ=!0,this.EQ.size>=50&&this.OQ()}OQ(){this.FQ&&(this.AQ.length!==this.EQ.size?(bp.Rr(this.AQ,this.EQ),this.EQ.clear(),this.FQ=!1):this.Bf())}LQ(){this.PQ||(this.AQ.sort(Sp),this.PQ=!0)}NQ(t){this.OQ(),this.LQ(),this.AQ.length&&t.push(this.AQ)}}}{const vp=self._s;vp.BQ=class extends vp.Uh{constructor(t,s){super(),this.WQ=t,this.jQ=s,this.VQ=vp.zh(vp.Iu)}Jh(){this.VQ.Jh(),this.VQ=null}UQ(t,s,i){let e=this.VQ.zs(t,s);return e||(i?(e=vp.zh(vp.CQ,this,t,s),this.VQ.Set(t,s,e),e):null)}HQ(t){return Math.floor(t/this.WQ)}zQ(t){return Math.floor(t/this.jQ)}JQ(t,s,i){if(s)for(let e=s.Za(),h=s.tl();e<=h;++e)for(let h=s.Qa(),n=s.sl();h<=n;++h){if(i&&i.xl(e,h))continue;const s=this.UQ(e,h,!1);s&&(s.Kf(t),s.Au()&&this.VQ.Pu(e,h))}if(i)for(let e=i.Za(),h=i.tl();e<=h;++e)for(let h=i.Qa(),n=i.sl();h<=n;++h)s&&s.xl(e,h)||this.UQ(e,h,!0).kQ(t)}XQ(t,s){let i=this.HQ(t.Za());const e=this.zQ(t.Qa()),h=this.HQ(t.tl()),n=this.zQ(t.sl());for(;i<=h;++i)for(let t=e;t<=n;++t){const e=this.UQ(i,t,!1);e&&e.NQ(s)}}qQ(t){let s=t.Za();const i=t.Qa(),e=t.tl(),h=t.sl();for(;s<=e;++s)for(let t=i;t<=h;++t){const i=this.UQ(s,t,!1);i&&i.DQ()}}}}{let Mp=function(t,s){return t.iW().IQ()-s.iW().IQ()},Gp=function(t,s){return t.iW().cG()-s.iW().cG()};0;const xp=self._s,Tp=(self.assert,new xp.Rect),_p=new xp.Cl,Ip=[],Cp=(new xp.Rect,new xp.Rect,self.rs),Rp=Cp.ys,Ap=Cp.ws,Pp=Cp.fs,Ep=Pp.create(),Fp=Rp.create(),Dp=Ap.create(),Op=Rp.create(),kp=Rp.create(),Lp=Rp.create(),Np=xp.zh(xp.Ca),Bp=(xp.zh(xp.Rect),[]),Wp=[],jp=[],Vp={name:"",YQ:-1,$Q:!1,isVisible:!0,jU:!0,HU:!1,backgroundColor:[1,1,1,1],uH:!0,KQ:[1,1],opacity:1,dH:!1,ZQ:!1,QQ:!1,t0:!1,KU:1,Ok:0,oH:0,s0:[],i0:[],e0:[]},Up=new Map,Hp=t=>{if(!t.FX.EH().h0())return;const s=t.FX.zH();Up.has(s)&&(Up.delete(s),Up.size||t.FX.AW().wf().removeEventListener("instancedestroy",Hp))};xp.n0=class extends xp.Uh{constructor(t,s,i){super(),i=Object.assign({},Vp,i),this.r0=t,this.Nc=t.AW(),this.o0=s,this.Yh=i.name,this.Vw=-1,this.a0=!!i.HU,this.l0=-1,this.u0=i.YQ,this.c0=!!i.$Q,this.f0=!!i.isVisible,this.d0=!!i.jU,this.p0=xp.zh(xp.Go),this.p0.wa(i.backgroundColor),this.m0=!!i.uH,this.g0=i.KQ[0],this.y0=i.KQ[1],this.HM=xp.zh(xp.Go,1,1,1,i.opacity),this.w0=xp.zh(xp.Go),this.S0=!!i.dH,this.b0=!!i.ZQ,this.v0=!!i.QQ,this.M0=!!i.t0,this.G0=i.KU,this.UM=i.Ok,this.x0=null,this.T0=1,this.zM=i.oH,this._0=0,this.I0=0,this.C0=0,this.R0=!1,this.vE=xp.zh(xp.Rect),this.A0=xp.zh(xp.Rect),this.P0=xp.zh(xp.Rect),this.E0=!0,this.bT=Pp.create(),this.F0=!0,this.Sk=Pp.create(),this.D0=!0,this.O0=xp.zh(xp.Yw.Qw),this.k0=!0,this.L0=[],this.N0=i.s0,this.B0=[],this.W0=[],this.j0=new Map,this.AQ=[],this.V0=!1,this.U0=!1,this.H0=!1;const e=this.Nc.XB();this.z0=xp.zh(xp.J0,this,i.i0),this.NL=xp.zh(xp.Yw.IO,e.X0(),{gO:(t,s)=>{const i=s.AL(),h=i.TD();t.$M(i.q0()),t.FD(h),t.DD(h),e.Y0(h)},wO:t=>this.XV().$0(t)}),this.K0=!0,this.Z0=!0,this.Q0=null,this.t1=[],this.s1=!1,this.i1=xp.zh(xp.Rect,0,0,-1,-1),this.e1=xp.zh(xp.Rect,0,0,-1,-1),this.h1=new self.pU(this),this.n1=xp.zh(xp.Event.wf),this.o1(),this.a1()&&(this.Q0=xp.zh(xp.BQ,this.Nc.dN(),this.Nc.mN())),this.l1=i.e0.map(t=>xp.n0.u1(this.r0,this,t))}c1(){for(const t of this.N0){const s=this.Nc.f1(t[1]);this.r0.d1(s),s.m1()||(s.g1(t),s.w1(this.Vw)),this.B0.push(t),this.j0.set(t[2],t)}xp.Gr(this.L0,this.B0),this.N0=null}static u1(t,s,i){return xp.zh(xp.n0,t,s,{name:i[0],YQ:i[2],isVisible:i[3],jU:i[13],HU:i[19],backgroundColor:i[4].map(t=>t/255),uH:i[5],KQ:[i[6],i[7]],opacity:i[8],dH:i[9],ZQ:i[17],QQ:i[18],t0:i[10],KU:i[11],Ok:i[12],oH:i[16],s0:i[14],i0:i[15],e0:i[20]})}Jh(){for(const t of this.l1)t.Jh();xp.Sr(this.l1);for(const t of this.AQ)this.Nc.NH(t);xp.Sr(this.AQ),this.z0.Jh(),this.z0=null,this.NL.Jh(),this.NL=null,this.h1=null,this.o0=null,this.r0=null,this.Nc=null}Xh(){return!this.r0}S1(t){return this.j0.get(t)}b1(t){const s=this.r0.v1(),i=this.B0;let e=0;for(let h=0,n=i.length;h<n;++h){const n=i[h],r=this.Nc.f1(n[1]);let o=!0;if(!r.M1()||s)if(r.h0()&&Up.has(n[2]))o=!1;else{const s=this.Nc.G1(n,this,!0);t.push(s),r.h0()&&(Up.size||this.Nc.wf().addEventListener("instancedestroy",Hp),Up.set(s.zH(),s),o=!1,this.W0.push(s.zH()))}o&&(i[e]=i[h],++e)}xp.wr(i,e),this.Nc.OV(),this.aW()}T1(t,s){if(!t.fV().Vj())throw new Error("instance is not of world type");const i=t.iW();if(i.eW()!==this)throw new Error("instance added to wrong layer");this.AQ.push(t),0!==i.cG()&&(this.H0=!0),s&&this.a1()&&t.iW().Uz(),this.aW(t)}_1(t){this.AQ.includes(t)||(this.AQ.push(t),0!==t.iW().cG()&&(this.H0=!0),this.aW(t))}I1(t,s){const i=t.iW();if(i.eW()!==this)throw new Error("instance added to wrong layer");this.AQ.unshift(t),0!==i.cG()&&(this.H0=!0),this.aW(t),s&&this.a1()&&t.iW().Uz()}C1(t,s){const i=this.AQ.indexOf(t);i<0||(s&&this.a1()&&t.iW().R1(),this.AQ.splice(i,1),this.aW(t),this.A1())}P1(){this.H0=!0}A1(){0===this.AQ.length&&(this.H0=!1)}E1(t){if(t){const t=new Set;for(const s of this.AQ){const i=s.iW().IQ();i>=0&&t.add(i)}let s=-1;for(const i of this.AQ){const e=i.iW();if(!(e.IQ()>=0)){for(++s;t.has(s);)++s;e.F1(s)}}}this.AQ.sort(Mp)}D1(){}O1(){for(const t of this.AQ)t.EH().h0()||this.Nc.NH(t);this.Nc.OV(),xp.Sr(this.AQ),this.H0=!1,this.aW()}L1(t,s,i,e,h,n){const r=this.Nc.TN(),o=this.Nc.N1(),a=t.B1(),l=[];for(const u of this.B0){const c=u[0],f=c[0],d=c[1];if(!s.xl(f,d))continue;const p=o[u[1]];if(p!==t){if(!a)continue;if(!t.zV(p))continue}let m=h;if(!m){const t=this.Nc.tW();this.kB()===t?m=this:(m=t.W1(this.Rc()),m||(m=t.nW(this.VL())))}const g=this.Nc.G1(u,m,!1,void 0,void 0,!1,n,void 0,n);n&&m.AV(g);const y=g.iW();y.Xz(i,e),y.Uz(),r.PV(!0),g.EV(),r.PV(!1),l.push(g)}return l}IV(){return this.AQ.length}kB(){return this.r0}Rc(){return this.Yh}j1(t){this.Vw=t}VL(){return this.Vw}V1(t){this.l0=t}DY(){return this.l0}zU(){return this.a0}JU(t){t=!!t,this.a0!==t&&(this.a0=t,this.r0.U1(),this.Nc.lW())}H1(){let t=-1;const s=this.PU();return t=s?s.DU().indexOf(this):this.kB().z1().indexOf(this),t}J1(){return this.u0}AW(){return this.Nc}X1(){return this.c0}q1(){for(const t of this.EU())if(t.X1())return!0;return!1}Pj(){return this.Nc.Pj()}XV(){return this.z0}jL(){return this.Y1(),this.NL}Y1(){const t=this.K1();if(!this.K0&&t===this.Z0&&!this.NL.bk())return;const s=this.XV().Z1();this.NL.vk(s.map(t=>t.hI()),{bO:s.map(t=>t.VL()),vO:!t,_O:!0}),this.K0=!1,this.Z0=t}WX(){this.XV().WX(),this.K0=!0}a1(){return this.M0&&!this.v0}Q1(){return this.Q0}t2(){this.s1=!1}WU(){for(const t of this.s2())if(!t.LU())return!1;return!0}LU(){return this.f0}NU(t){t=!!t,this.f0!==t&&(this.f0=t,this.Nc.lW())}UU(t){this.d0=!!t}VU(){return this.d0}qU(){for(const t of this.s2())if(!t.VU())return!1;return!0}wH(t){if(t=!!t,this.R0!==t){if(this.R0=t,t){const t=this.kB();this.I0=t.iU(),this.C0=t.hU()}this.i2(),this.Nc.lW()}}e2(){return this.R0}sU(t){const s=this.kB(),i=s.h2(),e=s.n2();t>e&&(t=e),t<i&&(t=i),this.I0!==t&&(this.I0=t,this.e2()&&(this.i2(),this.Nc.lW()))}eU(t){const s=this.kB(),i=s.o2(),e=s.a2();t>e&&(t=e),t<i&&(t=i),this.C0!==t&&(this.C0=t,this.e2()&&(this.i2(),this.Nc.lW()))}iU(){return this.e2()?this.I0:this.kB().iU()}hU(){return this.e2()?this.C0:this.kB().hU()}bH(){return this.l2(),this.vE}u2(){return this.l2(),this.A0}c2(){return this.l2(),this.P0}f2(){return this.kB()._U()}ZS(t){return this.Nc.ZS(t)}d2(t,s){const i=this.u2();if(0===t)s.m(i);else{let e=i.rl(),h=i.ol();const n=this.m2(t),r=i.width()/n,o=i.height()/n,[a,l]=this.f2();if(.5!==a||.5!==l){const s=this.g2(),i=this.Nc,n=this.ZS()/s;let r=(a-.5)*i.w2()/n,o=(l-.5)*i.S2()/n;const u=this.tU();0!==u&&(Np.set(r,o),Np.rotate(u),r=Np.Fa(),o=Np.Oa());const c=xp.mn(s,0,t);e+=xp._t(r,0,c),h+=xp._t(o,0,c)}s.set(e-r/2,h-o/2,e+r/2,h+o/2)}}NF(){return this.HM.Wo()}WF(t){t=xp.Kh(t,0,1),this.HM.Wo()!==t&&(this.HM.Oo(t),this.o1(),this.Nc.lW())}o1(){this.w0.m(this.HM),this.w0.Ko()}q0(){return this.w0}K1(){return this.HM.Xo(1,1,1,1)}QU(){return this.G0}ZU(t){this.G0!==t&&(this.G0=t,this.i2(),this.Nc.lW())}eH(){return this.g0}rH(){return this.y0}b2(t,s){this.g0===t&&this.y0===s||(this.g0=t,this.y0=s,this.i2(),this.Nc.lW())}iH(t){this.b2(t,this.rH())}nH(t){this.b2(this.eH(),t)}fG(t){this.zM!==t&&(this.zM=t,this.Nc.lW())}cG(){return this.zM}QV(t){t=xp.Zh(t),this._0!==t&&(this._0=t,this.i2(),this.Nc.lW())}tU(){return xp.Zh(this.r0.tU()+this._0)}tH(){return this._0}v2(){return this.AQ.length>0}rW(){return this.AQ}M2(){return this.G2()&&this.v0?(xp.Gr(jp,this.rW()),jp.sort((t,s)=>this.T2(t,s)),jp):this.rW()}_2(t){xp.Fh(t,this.M2());for(const s of this.l1)s.WU()&&s.NF()>0&&s._2(t)}T2(t,s){const i=this.kB().I2(),e=i[0],h=i[1],n=i[2],r=t.iW(),o=s.iW(),a=r.rG()-e,l=r.lG()-h,u=r.cG()-n,c=o.rG()-e,f=o.lG()-h,d=o.cG()-n;return c*c+f*f+d*d-(a*a+l*l+u*u)}yH(){return this.p0}fH(){return this.m0}cH(t){t=!!t,this.m0!==t&&(this.m0=t,this.Nc.lW())}mH(){return this.S0}pH(t){t=!!t,this.S0!==t&&(this.S0=t,this.Nc.lW())}aH(t){t=!!t,this.b0!==t&&(this.b0=t,this.i2(),this.Nc.lW())}lH(){return this.b0}C2(){return!this.AW().R2()||!this.b0}G2(){return!this.C2()}A2(){return this.G2()&&this.kB().P2()}E2(){if(!this.A2())return!1;for(const t of this.l1)if(!t.E2())return!1;return!0}YM(t){this.UM!==t&&(this.UM=t,this.Nc.lW())}gH(){return this.UM}F2(){return!this.o0}PU(){return this.o0}D2(t){this.o0=t}DU(){return this.l1}O2(){return this.l1.length>0}L2(t,s=!0){s?this.l1.push(t):this.l1.unshift(t)}N2(t,s,i){let e=this.l1.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.l1.splice(e,0,t)}B2(t){const s=this.l1.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.l1.splice(s,1)}W2(){for(const t of this.l1)if(t.j2())return!0;return!1}*kU(){for(const t of this.l1)yield*t.kU();yield this}*EU(){let t=this.PU();for(;t;)yield t,t=t.PU()}*s2(){yield this,yield*this.EU()}V2(t){for(const s of this.EU())if(s===t)return!0;return!1}U2(t){return this===t||this.g0===t.g0&&this.y0===t.y0&&this.T0===t.T0&&this.G0===t.G0&&this._0===t._0&&this.iU()===t.iU()&&this.hU()===t.hU()}H2(){return{parallaxX:this.eH(),parallaxY:this.rH(),scale:this.$U(),scaleRate:this.QU(),angle:this.tH(),hasOwnScroll:this.e2(),scrollX:this.iU(),scrollY:this.hU()}}z2(t){this.b2(t.parallaxX,t.parallaxY),this.YU(t.scale),this.ZU(t.scaleRate),this.QV(t.angle),this.wH(t.hasOwnScroll),this.sU(t.scrollX),this.eU(t.scrollY),this.l2()}J2(t){0!==t.size&&xp.Rr(this.AQ,t)>0&&(this.A1(),this.aW())}aW(t){this.V0=!1,this.s1=!1,t&&!t.EH().fV().Hj()||(this.U0=!1)}X2(){if(!this.V0){if(this.AQ.sort(Gp),this.a1())for(let t=0,s=this.AQ.length;t<s;++t){const s=this.AQ[t].iW();s.F1(t),this.Q0.qQ(s.q2())}else for(let t=0,s=this.AQ.length;t<s;++t)this.AQ[t].iW().F1(t);this.V0=!0}}Y2(){if(this.U0)return;const t=this.r0.K2(this.DY()).map(t=>[...t.kU()]).flat();let s=0;for(const i of t){for(const t of i.rW())t.EH().fV().Hj()&&t.iW().Z2(s++);i.Q2()}}Q2(){this.U0=!0}t3(){return{isVisible:this.WU(),opacity:this.NF(),isInteractive:this.VU()}}s3(t,s,i){const e=t.iW(),h=s.iW();if(e.eW()!==this||h.eW()!==this)throw new Error("can't arrange Z order unless both objects on this layer");const n=e.hW();let r=h.hW();return n!==r+(i?1:-1)&&(xp.Tr(this.AQ,n),n<r&&r--,i&&r++,r===this.AQ.length?this.AQ.push(t):this.AQ.splice(r,0,t),this.aW(t),!0)}i3(t,s){const i=[];let e=0,h=0,n=t.length,r=s.length;for(;e<n&&h<r;){const n=t[e],r=s[h];n.iW().IQ()<r.iW().IQ()?(i.push(n),++e):(i.push(r),++h)}for(;e<n;++e)i.push(t[e]);for(;h<r;++h)i.push(s[h]);return i}e3(t){const s=[],i=t.length;for(let e=0;e<i-1;e+=2){const i=t[e],h=t[e+1];s.push(this.i3(i,h))}return i%2==1&&s.push(t[i-1]),s}h3(t){for(;t.length>1;)t=this.e3(t);return t[0]}n3(){return this.X2(),xp.Sr(Ip),this.Q0.XQ(this.bH(),Ip),Ip.length?1===Ip.length?Ip[0]:this.h3(Ip):[]}j2(){return this.WU()&&this.NF()>0&&this.r3()}r3(){if(this.v2()||!this.fH()||this.n1.Gf("beforedraw")||this.n1.Gf("afterdraw"))return!0;for(const t of this.l1)if(t.r3())return!0;return!1}o3(){return this.mH()||!this.K1()||0!==this.gH()||this.z0.a3()}l3(){if(this.o3())return!0;for(const t of this.l1)if(t.l3())return!0;return!1}TD(){return this.x0}m2(t){if(this.r0.RU())return 1;{const s=this.u3();return s/(s-t)}}c3(t){const s=this.Nc.AH();if(this.r0.RU())return s;{const i=this.u3();return this.ZS()/Math.abs(i-t)*s}}i2(){this.D0=!0,this.k0=!0,this.E0=!0}f3(t){return this.D0&&(this.d3(t,this.Sk,0,0,null),this.D0=!1),this.Sk}g2(t){return this.ZS(t)/this.m3()}u3(){return this.A2()?this.kB().I2()[2]:this.g2()}g3(){if(this.A2()){const t=this.kB().I2();return[t[0],t[1],t[2]]}return this.y3()}y3(t=0,s=0,i=0){const e=this.Nc,h=this.kB(),n=e.w3(),r=e.S3();let o=(this.iU()-n)*this.g0+n,a=(this.hU()-r)*this.y0+r;e.TB()&&(o=Math.round(o),a=Math.round(a));let l=o+t,u=a+s;const c=h.RU()?this.ZS(i):this.g2(i),[f,d]=this.f2();if(.5!==f||.5!==d){const t=this.ZS(i)/c;let s=(f-.5)*e.w2()/t,h=(d-.5)*e.S2()/t;const n=this.tU();0!==n&&(Np.set(s,h),Np.rotate(n),s=Np.Fa(),h=Np.Oa()),l+=s,u+=h}return[l,u,c]}d3(t,s,i,e,h){const n=this.Nc,r=this.kB();if(this.A2()){Rp.m(Op,r.I2()),Rp.m(kp,r.b3()),Rp.m(Lp,r.v3());const t=n.w3(),s=n.S3(),i=kp[0]-Op[0],e=kp[1]-Op[1],h=kp[2]-Op[2];Op[0]=(Op[0]-t)*this.g0+t,Op[1]=(Op[1]-s)*this.y0+s,Op[2]*=Math.max(this.g0,this.y0),kp[0]=Op[0]+i,kp[1]=Op[1]+e,kp[2]=Op[2]+h}else{const[t,s,n]=this.y3(i,e,h);Rp.set(Op,t,s,n),Rp.set(kp,t,s,n-100);const r=this.tU();0===r?Rp.set(Lp,0,1,0):Rp.set(Lp,Math.sin(r),Math.cos(r),0)}t.mb(s,Op,kp,Lp,h||n.S2())}M3(){this.F0=!0,this.k0=!0,this.E0=!0}G3(t){return this.F0&&(this.x3(t),this.F0=!1),this.bT}x3(t){const s=this.Nc.XB(),[i,e]=this.f2();if(this.r0.RU())t.pb(this.bT,s.T3(),s._3());else if(.5===i&&.5===e)Pp.m(this.bT,s.I3());else{const h=s.T3(),n=s._3();t.cb(this.bT,h/n,i,e)}}FK(t,s=!0,i=0,e=0,h=0){s&&t.IF(this.G3(t));let n=null;0===i&&0===e&&0===h?n=this.f3(t):(this.d3(t,Ep,i,e,h),n=Ep),t.FF(n)}C3(t){this.FK(t),t.tv(this.cG())}R3(t){let s=null;if(t.Qv()&&this.Nc.A3()){const i=this.Nc.XB().P3(this);i&&(s=i.aE(),t.WD(s))}return s}E3(t){if(t.fb()&&this.Nc.A3()){const s=2*(this.VL()+1);t.F3(s,s+1)}}D3(t,s){if(this.n1.Gf(s)){t.Mb(),t.UF(null),t.XF(),t.Wv(),t.BF(1,1,1,1),t.tv(this.cG()),t.ev(0);const i=new xp.Event(s);i.nC=this.Nc.XB().JB(),this.JZ(i)}}hx(t,s,i){const e=this.Nc.XB(),h=this.o3();let n=null;const r=this.R3(t);if(this.E3(t),h){const s={Mx:this.Nc.gN(),aT:!0,O3:!!t.fb()&&this.Nc.L3()};"low"===e.N3()&&(s.width=e.T3(),s.height=e._3()),n=this.Nc.B3(s),this.x0=n,t.PD(n),this.fH()&&t.wD(0,0,0,0)}else this.x0=s,t.PD(s);if(this.fH()||t.Ru(this.p0),this.r0.W3(t,this.x0,this.l1,h&&this.fH()),this.E3(t),this.FK(t),t.tv(this.cG()),t.vD(this.G2()),this.D3(t,"beforedraw"),this.m3()>Number.EPSILON){this.X2();const s=this.a1()&&0===this.cG()&&!this.H0;this.A2()?this.j3(t):s?this.V3(t):this.U3(t,this.M2())}this.D3(t,"afterdraw"),t.tv(0),t.ev(0),h&&(t.vD(!1),this.H3(t,n,s,i)),r&&t.VD(r),this.x0=null}U3(t,s){const i=this.bH(),e=this.x0,h=this.kB().RU(),n=this.kB().z3();let r=null;for(let o=0,a=s.length;o<a;++o){const a=s[o];if(a===r)continue;r=a;const l=a.iW();l.WU()&&l.J3(i,n,h)&&this.X3(a,l,t,e)}}j3(t){const s=this.x0,i=this.q3(),e=Bp,h=Wp,n=this.M2();for(let r=0,o=n.length;r<o;){const a=n[r],l=a.iW();if(!l.WU()||!l.Y3(i)){++r;continue}(!a.K3()||l.Z3()>0)&&h.push(a);const u=a.iW().eJ();e.push(a);let c=r+1;for(;c<o;++c){const t=n[c],s=t.iW();if(s.WU()&&s.Y3(i)){if(s.eJ()!==u)break;t.K3()?(s.Z3()>0&&h.push(t),e.push(t)):h.push(t)}}if(1!==e.length||e[0].Q3()){this.t5(t,e);for(let i=0,e=h.length;i<e;++i){const e=h[i],n=e.iW();n.s5(!0),this.X3(e,n,t,s),n.s5(!1)}}else{this.X3(a,l,t,s);for(let i=0,e=h.length;i<e;++i){const e=h[i];if(e===a)continue;const n=e.iW();n.eW().X3(e,n,t,s)}}r=c,xp.Sr(e),xp.Sr(h)}}t5(t,s){const i=this.x0;t.kD();for(let i=0,e=s.length;i<e;++i){const e=s[i],h=e.iW();h.i5(!0),this.e5(e,h,t)}t.LD();for(let e=0,h=s.length;e<h;++e){const h=s[e],n=h.iW();this.X3(h,n,t,i),n.i5(!1)}t.BD()}V3(t){const s=this.Q0,i=this.e1,e=this.i1,h=this.bH();let n;i.set(s.HQ(h.Za()),s.zQ(h.Qa()),s.HQ(h.tl()),s.zQ(h.sl())),this.s1&&i.equals(e)?n=this.t1:(n=this.n3(),this.s1=!0,e.m(i)),this.U3(t,n),n!==this.t1&&xp.Gr(this.t1,n)}X3(t,s,i,e){s.a3()?this.h5(t,s,i,e):this.e5(t,s,i)}e5(t,s,i){const e=s.n5();i.Lb()!==e&&e.qM(),t.hx(i)}h5(t,s,i,e){this.r5(t,s,i,e,null)&&this.FK(i)}r5(t,s,i,e,h){const n=s.jz().jL();return n.Pk(i,e,{Fk:t,Ok:s.gH(),devicePixelRatio:this.Nc.o5(),time:t.a5(),kk:this.Nc.l5()*this.m3(),Lk:this.tU(),aL:s.rJ(),lL:n.CL()?null:this.u5(s),Hk:h&&h.Hk,zk:h&&h.zk,Jk:h&&h.Jk,Xk:h&&h.Xk,qk:h&&h.qk,Yk:h&&h.Yk}),i.tv(this.cG()),n.OF()}H3(t,s,i,e){const h=this.z0.Z1(),n=this.Nc;0===h.length?(t.PD(i),t.Mb(),e&&0===this.UM&&this.K1()?t.ED(s):(t.YM(this.UM),t.$M(this.w0),t.FD(s)),t.DD(s),n.Y0(s)):this.jL().Pk(t,i,{Fk:this,Ok:this.gH(),devicePixelRatio:n.o5(),kk:n.l5()*this.m3(),Lk:this.tU(),aL:this.bH(),lL:null,SO:!0})}$U(){return this.T0}YU(t){this.T0!==t&&(this.T0=t,this.r0.c5(),this.i2(),this.Nc.lW())}AH(){return this.m3()*this.Nc.AH()}VY(){return this.m3()*this.Nc.VY()}m3(){return(this.T0*this.r0.ZV()-1)*this.G0+1}l2(){if(!this.E0)return;this.E0=!1;const t=this.Nc.w3(),s=this.Nc.S3(),i=(this.iU()-t)*this.g0+t,e=(this.hU()-s)*this.y0+s,h=this.m3(),n=this.Nc.w2()/h,r=this.Nc.S2()/h;let o=i-n/2,a=e-r/2;this.Nc.TB()&&(o=Math.round(o),a=Math.round(a));const l=this.A0;l.set(o,a,o+n,a+r);const u=this.tU();0!==u&&(Tp.m(l),Tp.offset(-l.rl(),-l.ol()),_p.$l(Tp,u),_p.Zl(Tp),Tp.offset(l.rl(),l.ol()),l.m(Tp));const c=this.zM;this.d2(c,this.vE),this.A2()?this.f5(c,this.P0):this.P0.m(this.vE)}f5(t,s){const i=this.Nc.XB(),e=i.xj(),h=i._j(),[n,r]=this.MH(0,0,t),[o,a]=this.MH(e,0,t),[l,u]=this.MH(e,h,t),[c,f]=this.MH(0,h,t);let d=Math.min(n,o,l,c),p=Math.min(r,a,u,f),m=Math.max(n,o,l,c),g=Math.max(r,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}MH(t,s,i=0){return this.d5(t,s,i,this.VY())}_H(t,s,i=0){return this.d5(t,s,i,this.AH()*this.Pj())}d5(t,s,i,e){const h=this.Nc,n=h.IM(),r=this.m3(),o=h.w2()/r,a=h.S2()/r,l=Dp;Ap.set(l,0,0,o,a),t/=e,s=l[3]-s/e;const u=this.G3(n),c=this.f3(n),f=Fp;return xp.Yw.Zw(t,s,i,c,u,l,f)?[f[0],f[1]]:[NaN,NaN]}p5(t,s){const i=this.T0,e=this.G0,h=this.g0,n=this.y0,r=this._0,o=this.A2();o&&this.kB().m5(!1),this.T0=1,this.G0=1,this.g0=1,this.y0=1,this._0=0,this.i2();const a=this.MH(t,s);return this.T0=i,this.G0=e,this.g0=h,this.y0=n,this._0=r,this.i2(),o&&this.kB().m5(!0),a}xH(t,s,i=0){return this.g5(t,s,i,this.VY())}CH(t,s,i=0){return this.g5(t,s,i,this.AH()*this.Pj())}g5(t,s,i,e){const h=this.Nc,n=h.IM(),r=this.m3(),o=h.w2()/r,a=h.S2()/r,l=Dp;Ap.set(l,0,0,o,a);const u=this.G3(n),c=this.f3(n),f=Fp;return xp.Yw.$w(t,s,i,c,u,l,f)?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}y5(t,s){return t*=this.AH()*this.Pj(),0!==s&&(t*=this.m2(s)),t}u5(t){const s=t.rJ(),i=t.eJ(),e=t.Z3(),h=i+e,n=s.Za(),r=s.Qa(),o=s.tl(),a=s.sl();if(this.A2()){if(this.w5(n,r,i)||this.w5(o,r,i)||this.w5(o,a,i)||this.w5(n,a,i))return null;if(e>0&&(this.w5(n,r,h)||this.w5(o,r,h)||this.w5(o,a,h)||this.w5(n,a,h)))return null}else if(h>=this.g2())return null;let[l,u]=this.CH(n,r,i),[c,f]=this.CH(o,a,i);if(0!==this.tU()||e>0||this.A2()){const[t,s]=this.CH(o,r,i),[d,p]=this.CH(n,a,i);if(e>0){const[i,e]=this.CH(n,r,h),[m,g]=this.CH(o,r,h),[y,w]=this.CH(o,a,h),[S,b]=this.CH(n,a,h);let v=Math.min(l,c,t,d,i,m,y,S);c=Math.max(l,c,t,d,i,m,y,S),l=v,v=Math.min(u,f,s,p,e,g,w,b),f=Math.max(u,f,s,p,e,g,w,b),u=v}else{let i=Math.min(l,c,t,d);c=Math.max(l,c,t,d),l=i,i=Math.min(u,f,s,p),f=Math.max(u,f,s,p),u=i}}return Tp.set(l,u,c,f),Tp}q3(){return this.k0&&(this.S5(),this.k0=!1),this.O0}S5(){const t=this.Nc.IM(),s=this.G3(t),i=this.f3(t);this.O0.rS(i,s)}w5(t,s,i){return this.q3().aS(t,s,i)}b5(){return{d:this.X1(),s:this.$U(),a:this.tH(),v:this.LU(),i:this.VU(),html:this.zU(),bc:this.p0.toJSON(),t:this.fH(),sx:this.I0,sy:this.C0,hosp:this.R0,px:this.eH(),py:this.rH(),c:this.HM.toJSON(),sr:this.QU(),fx:this.z0.SG(),cg:this.W0}}v5(t){this.c0=!!t.d,this.T0=t.s,this._0=t.a,this.f0=!!t.v,this.d0=!t.hasOwnProperty("i")||t.i,this.a0=!!t.html,this.p0.wa(t.bc),this.m0=!!t.t,t.hasOwnProperty("sx")&&(this.I0=t.sx),t.hasOwnProperty("sy")&&(this.C0=t.sy),t.hasOwnProperty("hosp")&&(this.R0=!!t.hosp),this.g0=t.px,this.y0=t.py,this.HM.wa(t.c),this.o1(),this.G0=t.sr,xp.Gr(this.W0,t.cg),xp.Gr(this.B0,this.L0);const s=new Set(this.W0);let i=0;for(let t=0,e=this.B0.length;t<e;++t)s.has(this.B0[t][2])||(this.B0[i]=this.B0[t],++i);xp.wr(this.B0,i),this.z0.bG(t.fx),this.K0=!0}M5(){this.E1(!1),this.aW(),this.i2(),this.M3()}lU(){return this.h1}vN(){return this.n1}JZ(t){t.Vz=this.lU(),this.n1.dispatchEvent(t)}AV(t,s=!1,i=!1){if(this.AQ.includes(t))return s&&this.AQ.sort((t,s)=>(t.iW().G5()??0)-(s.iW().G5()??0)),void(i&&this.AQ.forEach((t,s)=>t.iW().F1(s)));if(t.x5()){const s=[...t.DJ()];s.push(t),s.sort((t,s)=>(t.iW().G5()??0)-(s.iW().G5()??0));for(const t of s)if(t.UH())for(const i of t.HH()){if(s.includes(i))continue;const t=[...i.DJ()];t.push(i),t.sort((t,s)=>(t.iW().G5()??0)-(s.iW().G5()??0)),t&&t.length&&s.splice(s.length,0,...t)}for(const t of s)t.fV().Vj()&&this.T1(t,!0);i&&this.AQ.forEach((t,s)=>t.iW().F1(s))}else{if(t.fV().Vj()&&this.T1(t,!0),!t.UH())return void(i&&this.AQ.forEach((t,s)=>t.iW().F1(s)));for(const s of t.HH()){const t=[...s.DJ()];if(t.push(s),t.sort((t,s)=>(t.iW().G5()??0)-(s.iW().G5()??0)),t&&t.length)for(const s of t)s.fV().Vj()&&this.T1(s,!0)}i&&this.AQ.forEach((t,s)=>t.iW().F1(s))}}}}{let zp=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},Jp=function(t,s){im!==t&&(t.C3(s),im=t)};0;const Xp=self._s,qp=self.Gz,Yp=(self.assert,Xp.zh(Xp.Rect),Xp.zh(Xp.Rect),Xp.zh(Xp.Rect)),$p=Xp.zh(Xp.Go),Kp=self.rs.ys,Zp=[],Qp=[],tm=[],sm=[];let im=null;Xp.T5=class extends Xp.Uh{constructor(t,s,i){super(),this._5=t,this.Nc=t.AW(),this.Yh=i[0],this.I5=i[1],this.C5=i[2],this.jy=i[1],this.Vy=i[2],this.R5=!!i[3],this.A5=!!i[4],this.P5=i[5],this.E5=i[6],this.F5=i[7],this.D5=null,this.u0=i[8],this.Vw=s,this.I0=0,this.C0=0,this.T0=1,this._0=0,this.O5=new Set,this.k5=new Set,this.L5=new Set,this.N5=[],this.B5=[],this.W5=new Map,this.j5=new Map,this.V5=[],this.U5=!1,this.H5=Kp.create(),this.z5=Kp.create(),this.J5=Kp.create(),this.X5=[],this.q5=[],this.Y5=new Map,this.K5=new Map,this.Z5=-1;const e=this.Nc.XB();this.z0=Xp.zh(Xp.J0,this,i[11]),this.NL=Xp.zh(Xp.Yw.IO,e.X0(),{gO:(t,s)=>{const i=s.AL().TD();t.jF(),t.FD(i),t.DD(i),e.Y0(i)},wO:t=>this.XV().$0(t)}),this.K0=!0,this.Q5=!1,this.x0=null,this.t4={},this.s4=new Map,this.i4=!0,this.e4=new self.JV(this),this.n1=Xp.zh(Xp.Event.wf);for(const t of i[9])this.X5.push(Xp.n0.u1(this,null,t));this.h4();for(const t of this.fU())t.c1();for(const t of i[10]){const s=this.Nc.f1(t[1]);if(!s)throw new Error("missing nonworld object class");s.m1()||s.g1(t),this.V5.push(t),this.d1(s)}}Jh(){for(const t of this.q5)t.Jh();Xp.Sr(this.q5),this.L5.clear(),this.D5=null,this._5=null,this.Nc=null}AW(){return this.Nc}Rc(){return this.Yh}J1(){return this.u0}VL(){return this.Vw}XV(){return this.z0}jL(){return this.Y1(),this.NL}Y1(){const t="low"===this.Nc.XB().N3();if(!this.K0&&this.Q5===t&&!this.NL.bk())return;const s=this.XV().Z1();this.NL.vk(s.map(t=>t.hI()),{bO:s.map(t=>t.VL()),MO:t,_O:!0}),this.K0=!1,this.Q5=t}WX(){this.XV().WX(),this.K0=!0}n4(){let t=this.q5[0].m3();for(let s=1,i=this.q5.length;s<i;++s){const i=this.q5[s];0===i.eH()&&0===i.rH()||(t=Math.min(t,i.m3()))}return t}r4(){return.5*this.Nc.w2()/this.n4()}o4(){return.5*this.Nc.S2()/this.n4()}h2(){return this.oU()?-1/0:this.r4()}n2(){return this.oU()?1/0:this.My()-this.r4()}o2(){return this.oU()?-1/0:this.o4()}a2(){return this.oU()?1/0:this.xy()-this.o4()}sU(t){const s=this.h2(),i=this.n2();t>i&&(t=i),t<s&&(t=s),this.I0!==t&&(this.I0=t,this.a4(),this.Nc.lW())}iU(){return this.I0}eU(t){const s=this.o2(),i=this.a2();t>i&&(t=i),t<s&&(t=s),this.C0!==t&&(this.C0=t,this.a4(),this.Nc.lW())}hU(){return this.C0}oU(){return this.R5}c5(){this.sU(this.iU()),this.eU(this.hU());for(const t of this.q5)t.e2()&&(t.sU(t.iU()),t.eU(t.hU()))}xU(t,s){this.P5===t&&this.E5===s||(this.P5=t,this.E5=s,this.l4()&&(this.u4(),this.a4(),this.Nc.lW()))}c4(){return this.RU()?.5:this.P5}f4(){return this.RU()?.5:this.E5}_U(){return[this.c4(),this.f4()]}z3(){const t=this.c4(),s=this.f4();return t<0||t>1||s<0||s>1}IU(){this.A5&&(this.A5=!1,this.u4(),this.a4(),this.Nc.lW())}CU(){this.A5||(this.A5=!0,this.u4(),this.a4(),this.Nc.lW())}RU(){return this.A5}l4(){return!this.RU()}m5(t){t=!!t,this.U5!==t&&(this.U5=t,this.a4(),this.Nc.lW())}P2(){return this.U5}d4(t,s,i,e,h,n,r,o,a){zp(this.H5,t,s,i)&&zp(this.z5,e,h,n)&&zp(this.J5,r,o,a)||(Kp.set(this.H5,t,s,i),Kp.set(this.z5,e,h,n),Kp.set(this.J5,r,o,a),this.m4())}m4(){this.a4(),this.Nc.lW()}I2(){return this.H5}b3(){return this.z5}v3(){return this.J5}ZV(){return this.T0}KV(t){this.T0!==t&&(this.T0=t,this.a4(),this.c5(),this.Nc.lW())}QV(t){t=Xp.Zh(t),this._0!==t&&(this._0=t,this.a4(),this.Nc.lW())}tU(){return this._0}My(){return this.jy}hy(t){!isFinite(t)||t<1||(this.jy=t)}xy(){return this.Vy}ny(t){!isFinite(t)||t<1||(this.Vy=t)}g4(){return this.D5}z1(){return this.X5}*fU(){for(const t of this.X5)yield*t.kU()}cU(){return this.q5}y4(){return this.q5.length}eW(t){return"number"==typeof t?this.nW(t):this.W1(t.toString())}nW(t){return t=Xp.Kh(Math.floor(t),0,this.q5.length-1),this.q5[t]}W1(t){return this.Y5.get(t.toLowerCase())||null}w4(t){return!!this.W1(t)}S4(t){return this.K5.get(t)||null}u4(){for(const t of this.q5)t.M3()}a4(){for(const t of this.q5)t.i2()}gU(t,s,i){if(this.w4(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=i>=2?s:s.PU(),h=Xp.zh(Xp.n0,this,e,{name:t,YQ:Math.floor(1e15*Math.random()),$Q:!0});this.b4(h,s,i),this.AW().lW(),this.U1()}wU(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.v4(t),this.b4(t,s,i),this.AW().lW(),this.U1())}bU(t){if(this.v4(t)){const s=this.Nc.TN();s.PV(!0),t.Jh(),s.PV(!1),this.AW().lW(),this.U1()}}MU(){const t=new Set;for(const s of this.fU())s.X1()&&!s.q1()&&t.add(s);if(0===t.size)return;const s=this.Nc.TN();s.PV(!0);for(const s of t)this.v4(s),s.Jh();s.PV(!1),this.AW().lW(),this.U1()}b4(t,s,i){if(i>=2)if(s){if(s===t||s.V2(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);s.L2(t,2===i),t.D2(s)}else 2===i?this.X5.push(t):this.X5.unshift(t),t.D2(null);else{const e=s.PU();if(e){if(s.V2(t))throw new Error(`cannot move layer '${t.Rc()}' to sub-layer of itself`);e.N2(t,s,0===i),t.D2(e)}else{let e=this.X5.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");0===i&&++e,this.X5.splice(e,0,t),t.D2(null)}}}v4(t){const s=t.PU();if(s)return s.B2(t),!0;if(this.X5.length>1){const s=this.X5.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");return this.X5.splice(s,1),!0}return!1}h4(){this.q5=[...this.fU()],this.Y5.clear(),this.K5.clear();for(let t=0,s=this.q5.length;t<s;++t){const s=this.q5[t];s.j1(t),this.Y5.set(s.Rc().toLowerCase(),s),this.K5.set(s.J1(),s)}}M4(){let t=0;for(const s of this.X5){for(const i of s.kU())i.V1(t);s.zU()&&t++}}G4(){return this.X5.at(-1).DY()+1}async U1(){this.h4(),this.M4(),this.Z5=this.G4()}x4(){return this.Z5}T4(){this.Z5=-1}K2(t){const s=[];for(const i of this.X5){const e=i.DY();if(e===t)s.push(i);else if(e>t)break}return s}H2(){return{scrollX:this.iU(),scrollY:this.hU(),scale:this.ZV(),angle:this.tU(),vpX:this.c4(),vpY:this.f4()}}z2(t){this.sU(t.scrollX),this.eU(t.scrollY),this.KV(t.scale),this.QV(t.angle),this.xU(t.vpX,t.vpY)}_4(){let t=this.X5.filter(t=>t.j2())[0];for(;t;){if(!t.fH())return $p.ko(t.yH()),$p.Oo(1),$p;if(t.o3())return $p.Co(0,0,0,0),$p;t=t.DU().filter(t=>t.j2())[0]}return $p.Co(0,0,0,0),$p}v1(){return this.i4}I4(){return[...this.O5]}d1(t){if(t.UH())for(const s of t.R4().C4())this.O5.add(s);else this.O5.add(t)}A4(){return[...this.k5]}P4(t,s){if(t===this||!s)return Promise.resolve();t&&(Xp.po(this.k5,t.k5),t.k5.clear());const i=[];for(const t of this.O5)this.k5.has(t)||(i.push(t.E4(s)),this.k5.add(t));return Promise.all(i)}async F4(t){if(t.B1())throw new Error("cannot load textures for family");const s=this.Nc.IM();if(!s||s.DP()||this.k5.has(t))return;this.k5.add(t);const i=t.E4(s);this.D4(i),await i,t.O4(),this.Nc.lW()}D4(t){this.L5.add(t),t.then(()=>this.L5.delete(t)).catch(()=>this.L5.delete(t))}L4(){return Promise.all([...this.L5])}N4(t){if(t.B1()||t.IV()>0)throw new Error("cannot unload textures");const s=this.Nc.IM();s&&this.k5.has(t)&&(this.k5.delete(t),t.B4(s))}W4(t,s){if(t!==this&&s)for(const s of this.k5)s.h0()||t.O5.has(s)||(s.B4(),this.k5.delete(s))}j4(){this.k5.clear()}async V4(t){const s=this.Nc,i=this._5,e=s.TN();this.F5&&(this.D5=e.U4(this.F5),this.D5.H4()),i.z4(this),this.jy=this.I5,this.Vy=this.C5,this.I0=s.dN()/2,this.C0=s.mN()/2,this.c5(),this.u4(),this.a4(),this.M4(),await this.Nc.XB().J4(this.G4(),!0),this.X4(t),this.Nc.q4(!0),this.Y4(),this.i4||this.K4(),this.Z4(this.N5),this.Z4(this.B5),this.Q4(),i.t6(),s.OV(),this.Nc.q4(!1);const h=this.Nc.s6();if(await Promise.all(h),Xp.Sr(h),!s.i6()){for(const t of this.N5)t.e6();for(const t of this.B5)t.h6(this.W5,this.j5);for(const[t,s]of Object.entries(this.t4)){const i=this.Nc.x$(parseInt(t,10));i&&!i.B1()&&i.M1()&&Xp.Sr(s)}for(const t of this.N5)t.n6();for(const t of this.B5)t.n6();for(const t of this.N5)t.BJ()||t.r6();for(const t of this.B5)t.BJ()||t.r6()}Xp.Sr(this.N5),Xp.Sr(this.B5),this.W5.clear(),this.j5.clear(),await Promise.all([...this.O5].map(t=>t.o6(this.Nc.IM()))),t&&(s.wf().dispatchEvent(new Xp.Event("beforefirstlayoutstart")),await s.a6(new Xp.Event("beforeprojectstart"))),await this.l6(new Xp.Event("beforeanylayoutstart")),s.wf().dispatchEvent(new Xp.Event("beforelayoutstart")),await this.a6(new Xp.Event("beforelayoutstart")),s.i6()||await s.wW(Xp.MW.vW.bW.u6,null,null),s.wf().dispatchEvent(new Xp.Event("afterlayoutstart")),await this.a6(new Xp.Event("afterlayoutstart")),await this.l6(new Xp.Event("afteranylayoutstart")),t&&(s.wf().dispatchEvent(new Xp.Event("afterfirstlayoutstart")),await s.a6(new Xp.Event("afterprojectstart"))),e.c6(i),await this.L4(),this.i4=!1}X4(t){for(const t of this.Nc.N1())if(!t.B1()&&t.Vj())for(const s of t.GV()){const t=s.iW(),i=t.eW(),e=i.Rc(),h=this.W1(e);if(h)t.oW(h,!0),h._1(s);else{const e=Xp.Kh(i.VL(),0,this.q5.length-1),h=this.q5[e];t.oW(h,!0),h._1(s)}}if(!t)for(const t of this.q5)t.E1(!1)}Y4(){for(const t of this.q5)t.b1(this.N5),t.D1()}K4(){let t=!1;for(const[s,i]of Object.entries(this.t4)){const e=this.Nc.x$(parseInt(s,10));if(e&&!e.B1()&&e.M1())for(const s of i){let i=null;if(e.Vj()&&(i=s.hasOwnProperty("instJson")?this.S4(s.instJson.w.l):this.S4(s.w.l),!i))continue;const h=this.Nc.G1(e,i,!1,0,0,!0);s.hasOwnProperty("instJson")?h.bG(s.instJson):h.bG(s),t=!0,this.B5.push(h),s.hasOwnProperty("instJson")&&(this.W5.set(h,s),this.j5.set(s.index,h))}}for(const t of this.q5)t.E1(!0),t.aW();t&&(this.Nc.OV(),this.Nc.f6())}Z4(t){for(const s of t){if(!s.UH())continue;const i=s.iW(),e=s.XH();for(const h of s.EH().R4().HV()){if(h===s.EH())continue;const n=h.GV();if(n.length>e)s.d6(n[e]);else{let e;e=i?this.Nc.G1(h,i.eW(),!0,i.rG(),i.lG(),!0):this.Nc.G1(h,null,!0,0,0,!0),this.Nc.OV(),h.p6(),s.d6(e),t.push(e)}}}}Q4(){for(const t of this.V5)this.Nc.f1(t[1]).UH()||this.Nc.G1(t,null,!0)}m6(){const t=[],s=this.V5;let i=0;for(let e=0,h=s.length;e<h;++e){const h=s[e],n=this.Nc.f1(h[1]);n.h0()?n.UH()&&n.R4().g6()||t.push(this.Nc.G1(h,null,!0)):(s[i]=h,++i)}Xp.wr(s,i),this.Nc.OV(),this.Z4(t)}L1(t,s,i,e,h,n,r){if(i)return i.L1(t,s,h,n,e,r);{const i=[];for(const o of this.q5)i.push(o.L1(t,s,h,n,e,r));return i.flat()}}async y6(){const t=this._5;this.Nc.i6()||(await this.l6(new Xp.Event("beforeanylayoutend")),await this.a6(new Xp.Event("beforelayoutend")),await this.Nc.wW(Xp.MW.vW.bW.w6,null,null),await this.a6(new Xp.Event("afterlayoutend")),await this.l6(new Xp.Event("afteranylayoutend"))),t.S6(!0),this.Nc.TN().b6(),this.i4||this.v6();for(const t of this.q5)t.O1();for(const t of this.Nc.N1())if(!(t.h0()||t.Vj()||t.fV().Wj()||t.B1())){for(const s of t.GV())this.Nc.NH(s);this.Nc.OV()}t.S6(!1),t.PB()===this&&t.z4(null)}M6(t,s){const i=t.EH().J1().toString();this.t4.hasOwnProperty(i)||(this.t4[i]=[]);const e=this.t4[i],h={index:s,instJson:t.SG(),sceneGraphJson:{children:[]}};e.push(h),this.s4.set(t,h)}G6(t){const s=this.s4.get(t);for(const i of t.x6()){const t=this.s4.get(i);t&&s.sceneGraphJson.children.push({index:t.index,flags:Xp._6.T6(i.iW())})}}v6(){this.s4.clear();let t=0;for(const s of this.q5){s.X2();for(const i of s.rW()){const s=i.EH();!s.h0()&&s.M1()&&(this.M6(i,t),t++)}}for(const t of this.q5)for(const s of t.rW()){const t=s.EH();!t.h0()&&t.M1()&&this.G6(s)}this.s4.clear()}I6(){this.t4={},this.i4=!0}TD(){return this.x0}o3(){const t=this.Nc,s=t.IM().Qv();return"low"===t.XB().N3()||s&&t.L3()||this.z0.a3()||s&&t.R2()}C6(t){const s=this.Nc.XB();if(this.o3()){t.PD(null),t.wD(0,0,0,0);const i={Mx:this.Nc.gN(),aT:t.fb()||this.Nc.L3()||this.z0.a3(),O3:!!t.fb()&&this.Nc.L3()};"low"===s.N3()&&(i.width=s.T3(),i.height=s._3()),this.x0=this.Nc.B3(i)}else this.x0=null}R6(t){this.Nc.A6(t)&&(t.vD(!1),t.PD(null),t.Mb(),t.ED(this.x0))}P6(t){this.o3()&&(t.vD(!1),this.E6(t,this.x0))}F6(t){t.PD(this.x0),t.Ru(this._4()),this.Nc.R2()&&t.bD();const s=this.K2(0);this.W3(t,this.x0,s,!0),t.fb()&&t.F3(0,1),this.P6(t),this.x0=null}D6(t,s){let i=null;this.Nc.A6(t)&&(i=this.x0),t.PD(i),t.wD(0,0,0,0),this.Nc.R2()&&t.bD();const e=this.K2(s);this.W3(t,i,e,!0),this.R6(t),t.Jv(),this.Nc.XB().O6(s)}W3(t,s,i,e){const h=i.filter(t=>t.j2());for(let i=0,n=h.length;i<n;){const r=h[i];if(r.E2()&&!r.l3()){Zp.push(r);for(let t=i+1;t<n;++t){const s=h[t];if(!s.E2()||s.l3())break;Zp.push(h[t])}if(Zp.length>=2||1===Zp.length&&Zp[0].W2()){this.k6(t,s,Zp),i+=Zp.length,Xp.Sr(Zp);continue}Xp.Sr(Zp)}r.hx(t,s,e&&0===i),++i}}E6(t,s){const i=this.z0.Z1(),e=this.Nc;0===i.length?(t.PD(null),t.Mb(),t.ED(s),t.DD(s),e.Y0(s)):(Yp.set(0,0,e.w2(),e.S2()),this.jL().Pk(t,null,{Fk:this,Ok:3,devicePixelRatio:this.Nc.o5(),kk:this.Nc.l5()*this.ZV(),Lk:this.tU(),aL:Yp,lL:null,SO:!0}))}k6(t,s,i){const e=i[0],h=e.R3(t);e.E3(t),i[0].fH()||($p.ko(i[0].yH()),$p.Oo(1),t.Ru($p)),t.vD(!0);const n=Qp,r=tm,o=sm;for(const s of i)s.X2(),s._2(n),s.D3(t,"beforedraw");for(let i=0,e=n.length;i<e;){const h=n[i],a=h.iW(),l=a.eW();if(!a.WU()||!a.Y3(l.q3())){++i;continue}(!h.K3()||a.Z3()>0)&&o.push(h);const u=h.iW().eJ();r.push(h);let c=i+1;for(;c<e;++c){const t=n[c],s=t.iW();if(s.WU()&&s.Y3(s.eW().q3())){if(s.eJ()!==u)break;t.K3()?(s.Z3()>0&&o.push(t),r.push(t)):o.push(t)}}if(1!==r.length||r[0].Q3()){this.L6(t,s,r);for(let i=0,e=o.length;i<e;++i){const e=o[i],h=e.iW(),n=h.eW();h.s5(!0),Jp(n,t),n.X3(e,h,t,s),h.s5(!1)}}else{Jp(l,t),l.X3(h,a,t,s);for(let i=0,e=o.length;i<e;++i){const e=o[i];if(e===h)continue;const n=e.iW(),r=n.eW();Jp(r,t),r.X3(e,n,t,s)}}i=c,Xp.Sr(r),Xp.Sr(o)}for(const s of i)s.D3(t,"afterdraw");h&&t.VD(h),Xp.Sr(n),im=null}L6(t,s,i){t.kD();for(let s=0,e=i.length;s<e;++s){const e=i[s],h=e.iW(),n=h.eW();h.i5(!0),Jp(n,t),n.e5(e,h,t)}t.LD();for(let e=0,h=i.length;e<h;++e){const h=i[e],n=h.iW(),r=n.eW();Jp(r,t),r.X3(h,n,t,s),n.i5(!1)}t.BD()}b5(){const t={sx:this.iU(),sy:this.hU(),s:this.ZV(),a:this.tU(),w:this.My(),h:this.xy(),ortho:this.RU(),vpX:this.c4(),vpY:this.f4(),fv:this.i4,persist:this.t4,fx:this.z0.SG(),layers:{},dynamicLayers:[]};for(const s of this.q5)if(s.X1()){const i=s.PU();t.dynamicLayers.push({sid:s.J1(),name:s.Rc(),parentSid:i?i.J1():null,siblingIndex:s.H1(),data:s.b5()})}else t.layers[s.J1().toString()]=s.b5();return t}v5(t){this.I0=t.sx,this.C0=t.sy,this.T0=t.s,this._0=t.a,this.jy=t.w,this.Vy=t.h,this.A5=!!t.ortho,t.hasOwnProperty("vpX")&&(this.P5=t.vpX),t.hasOwnProperty("vpY")&&(this.E5=t.vpY),this.i4=!!t.fv,this.t4=t.persist,this.z0.bG(t.fx),this.K0=!0;for(const[s,i]of Object.entries(t.layers)){const t=parseInt(s,10),e=this.S4(t);e&&e.v5(i)}if(t.hasOwnProperty("dynamicLayers")){this.MU(),this.Nc.OV();const s=new Map,i=t.dynamicLayers;for(let t=i.length-1;t>=0;--t){const e=i[t],h=e.sid,n=e.name,r=e.parentSid,o=e.siblingIndex,a=e.data;if(this.h4(),this.w4(n)||this.S4(h))continue;let l,u;if(null===r)l=null,u=this.X5;else{if(l=this.S4(r),!l)continue;u=l.DU()}const c=Xp.zh(Xp.n0,this,l,{name:n,YQ:h,$Q:!0});u.push(c);let f=s.get(u);f||(f=[],s.set(u,f)),f.push({Vz:c,N6:o}),c.v5(a)}for(const[t,i]of s){i.sort((t,s)=>t.N6-s.N6);for(const s of i){const i=s.Vz,e=s.N6;let h=t.indexOf(i);t.splice(h,1),t.splice(e,0,i)}}}this.U1(),this.u4(),this.a4()}EB(){return this.e4}vN(){return this.n1}JZ(t){t.layout=this.EB();const s=this.Nc,i=s.Mz()&&!s.TN().FV();i&&qp.B6(),this.n1.dispatchEvent(t),i&&qp.W6()}a6(t){return t.layout=this.EB(),this.n1._f(t)}l6(t){return t.layout=this.EB(),this.Nc.a6(t)}j6(){this.V6(this.X5)}V6(t,s=0){const i=t.slice(0);i.reverse();for(const t of i)console.log(`${"\t".repeat(s)}- ${t.Rc()}`),this.V6(t.DU(),s+1)}}}{const em=self._s;em.U6=class extends em.Uh{#s;#i=[];#f=new Map;#a=new Map;#e=null;#t=[];#n=null;#r=0;#d=null;constructor(t){super(),this.#s=t}Jh(){this.#s=null,this.#e=null,this.#n=null,this.#d=null,em.Sr(this.#i),this.#f.clear(),this.#a.clear(),em.Sr(this.#t)}i_(t){const s=em.zh(em.T5,this,this.#i.length,t);this.#i.push(s),this.#f.set(s.Rc().toLowerCase(),s),this.#a.set(s.J1(),s)}AW(){return this.#s}H6(t){this.#n=t}z6(){if(this.#n)return this.#n;if(this.#i.length)return this.#i[0];throw new Error("no first layout")}J6(t){return this.#f.get(t.toLowerCase())||null}X6(t){return this.#a.get(t)||null}q6(t){return t=em.Kh(Math.floor(t),0,this.#i.length-1),this.#i[t]}kB(t){return"number"==typeof t?this.q6(t):this.J6(t.toString())}NB(){return this.#i}z4(t){this.#e=t}PB(){return this.#e}Y6(t){if(this.#t.includes(t))throw new Error("layout already running");this.#t.push(t)}K6(t){const s=this.#t.indexOf(t);if(-1===s)throw new Error("layout not running");this.#t.splice(s,1)}*Z6(){this.#e&&(yield this.#e),this.#t.length&&(yield*this.#t)}Q6(t){return this.#e===t||this.#t.includes(t)}S6(t){if(t)this.#r++;else{if(this.#r<=0)throw new Error("already unset");this.#r--}}DV(){return this.#r>0}jB(t){this.#d=t}t6(){this.#d=null}WB(){return!!this.#d}t8(){return this.#d}s8(){const t=this.PB();t&&t.u4()}i8(){const t=this.PB();t&&t.a4()}}}{const hm=self._s,nm=new RegExp("<(.+?)>","g");hm.e8=class extends hm.Uh{constructor(t){super(),this.Nc=t,this.h8=hm.zh(hm.n8),this.r8=null,this.o8=[],this.a8=new Map,this.l8=new Map,this.u8=new Map,this.c8=[],this.f8=[],this.d8=[],this.p8=!1,this.m8=!1,this.g8=!1,this.y8=()=>this.w8(),this.S8=()=>this.b8(),this.v8=()=>this.M8(),this.G8=()=>this.x8(),this.T8=t=>this._8(t.FX),this.I8=t=>this.C8(),this.A8=t=>this.P8(),this.E8=t=>this.F8(),this.D8=[],this.O8=0}Jh(){this.k8(),this.y8=null,this.S8=null,this.v8=null,this.G8=null,this.T8=null,this.A8=null;for(const t of this.o8)t.Tq(),t.Jh();hm.Sr(this.o8),this.o8=null,this.h8.Jh(),this.h8=null,hm.Sr(this.c8),this.c8=null,hm.Sr(this.f8),this.f8=null,hm.Sr(this.d8),this.d8=null,this.a8.clear(),this.a8=null,this.l8.clear(),this.l8=null,this.u8.clear(),this.u8=null,hm.Sr(this.D8),this.D8=null,this.Nc=null}L8(){const t=this.Nc.wf();t.addEventListener("pretick",this.y8),t.addEventListener("tick2",this.S8),t.addEventListener("beforelayoutchange",this.v8),t.addEventListener("layoutchange",this.G8),t.addEventListener("instancedestroy",this.T8),t.addEventListener("beforeload",this.I8),t.addEventListener("afterload",this.A8),t.addEventListener("afterlayoutstart",this.E8)}k8(){const t=this.Nc.wf();t.removeEventListener("pretick",this.y8),t.removeEventListener("tick2",this.S8),t.removeEventListener("beforelayoutchange",this.v8),t.removeEventListener("layoutchange",this.G8),t.removeEventListener("instancedestroy",this.T8),t.removeEventListener("beforeload",this.I8),t.removeEventListener("afterload",this.A8),t.removeEventListener("afterlayoutstart",this.E8)}i_(t){this.h8.Bu(t);const s=hm.B8.N8(t,this);this.Bu(s),this.W8(s),this.u8.set(s.Rc(),0)}j8(t){const s=this.V8(),i=t.YH(),e=s.zs(i),h=hm.B8.j8(`${i}:${this.u8.get(i)}`,e,this);return this.U8(i),this.Bu(h),this.Nc.Mz()&&globalThis.Gz.H8(h),h}z8(t){return this.u8.get(t)}U8(t){this.u8.set(t,this.u8.get(t)+1)}J8(){for(const t of this.o8){if(t.X8())continue;const s=t.YH();this.U8(s)}}q8(){for(const t of this.u8.keys())this.u8.set(t,0)}Bu(t){this.o8.push(t),this.a8.set(t.Rc().toLowerCase(),t)}Kf(t){t.Y8(),t.X8()||(hm._r(this.o8,t),hm._r(this.c8,t),hm._r(this.f8,t),hm._r(this.d8,t),this.a8.delete(t.Rc().toLowerCase()),this.K8(t),this.Nc.Mz()&&globalThis.Gz.Z8(t),t.Gq()||t.Jh())}pz(t){this.Nc.pz(t,this.r8,null)}AW(){return this.Nc}V8(){return this.h8}Q8(t){this.r8=t}t7(){return this.r8}*s7(){for(const t of this.o8)yield t}*i7(){for(const t of this.f8)yield t}e7(t,s){this.l8.has(t)||this.l8.set(t,new Set),this.l8.get(t).add(s)}W8(t){for(const s of t.h7())this.e7(s,t)}K8(t){for(const[s,i]of this.l8.entries())i.has(t)&&(i.delete(t),0===i.size&&this.l8.delete(s))}n7(t){if(this.l8.has(t))return this.l8.get(t)}r7(t,s){if(s)for(const i of this.o8)if(s.every(t=>i.o7(t.FX,t.trackId))&&i.Rc().includes(t.Rc()))return i}a7(t){return this.a8.get(t.toLowerCase())||null}l7(t){for(const s of this.c8)if(s.Rc()===t)return s;for(const s of this.f8)if(s.Rc()===t)return s;return null}*u7(t){if(nm.test(t)){let s;nm.lastIndex=0;const i=new Set;do{if(s=nm.exec(t),s){const t=s[1].split(",");for(const s of t)i.add(s)}}while(s);for(const t of i.values()){const s=this.a7(t);s&&(yield s)}i.clear()}else{const s=this.a7(t);s&&(yield s)}}*c7(t){for(const s of this.o8)s.Iq(t)&&(yield s)}f7(t){this.c8.includes(t)||this.c8.push(t),this.d7()}p7(t){hm._r(this.f8,t),this.m7()}g7(t){this.f8.includes(t)?(t.y7(!0),t.w7(!1),t.S7(!1)):(t.y7(!1),t.w7(!0),t.S7(!1),this.c8.includes(t)||this.c8.push(t)),this.d7()}b7(t){t.y7(!1),t.w7(!1),t.v7(),hm._r(this.c8,t),this.m7()}M7(t){t.y7(!1),t.w7(!1),this.f8.includes(t)&&(t.S7(!0),this.d8.push(t),hm._r(this.f8,t)),this.c8.includes(t)&&t.S7(!0)}G7(t){t.y7(!1),t.w7(!1),t.S7(!1),t.Oq(1),hm._r(this.f8,t)}x7(t){this.M7(t),t.v7()}w8(){const t=this.AW();if(t.i6())return;if(!this.p8)return;if(this.m8)return;let s=0;for(t.Mz()&&(s=performance.now()),this.g8=!0;this.c8.length;){const t=this.c8.pop();t.T7()?(t._7(),this.d8.push(t)):(t.I7(),this.f8.push(t)),0!==t.C7()&&(this.O8=1)}const i=this.Nc.R7(),e=this.Nc.A7(),h=this.Nc.hB();for(let t=this.f8.length-1;t>=0;t--){const s=this.f8[t];s&&s.P7(i,h,e)}this.g8=!1,t.Mz()&&globalThis.Gz.E7(performance.now()-s),0!==this.O8&&t.lW()}b8(){const t=this.AW();if(t.i6())return;if(!this.p8)return;if(this.m8)return;let s,i=0;t.Mz()&&(i=performance.now());for(let t=0,i=this.d8.length;t<i;t++){const i=this.d8[t];s||(s=new Set),i.Y8(),this.F7(i),s.add(i)}if(s){hm.Rr(this.d8,s),this.O8=0;for(let t=0,s=this.f8.length;t<s;t++)if(0!==this.f8[t].C7()){this.O8=1;break}}this.m7(),t.Mz()&&globalThis.Gz.E7(performance.now()-i)}F7(t){t.Gq()||t.D7()&&t.Qq()&&t.O7()&&t.k7()}d7(){this.p8||(this.p8=!0)}m7(){this.d8.length||this.f8.length||this.c8.length||this.g8||(this.p8=!1)}M8(){for(this.m8=!0;this.c8.length;)this.b7(this.c8.pop());const t=new Set;for(const s of this.f8)s.M8()&&(s.Y8(),t.add(s));hm.Rr(this.f8,t),t.clear();for(const s of this.d8)s.M8()&&(s.Y8(),t.add(s));hm.Rr(this.d8,t),this.m7();for(const t of this.o8)t.L7()}x8(){this.m8=!1}_8(t){const s=t.EH(),i=this.n7(s);if(i)if(this.Nc.i6())this.D8.push(t);else for(const t of i)t.X8()||(t.Gq()?this.Kf(t):t.D7()||(this.F7(t),this.Kf(t)))}C8(){for(const t of this.c8.map(t=>t))this.F7(t),this.Kf(t);for(const t of this.f8.map(t=>t))this.F7(t),this.Kf(t)}P8(){for(const t of this.D8)this._8(t);hm.Sr(this.D8);for(const t of this.o8)t.P8()}F8(){const t=this.Nc.OB().PB();if(t)for(const s of this.o8){const i=s.N7();i&&t.Rc()===i&&this.g7(s)}}b5(){return{timelinesJson:this.B7(),scheduledTimelinesJson:this.W7(),playingTimelinesJson:this.j7(),markedForRemovalTimelinesJson:this.V7(),hasRuntimeListeners:this.p8,changingLayout:this.m8,isTickingTimelines:this.g8}}v5(t){t&&(this.q8(),this.U7(t.timelinesJson),this.H7(t.scheduledTimelinesJson),this.z7(t.playingTimelinesJson),this.J7(t.markedForRemovalTimelinesJson),this.p8=!t.hasRuntimeListeners,this.m8=!!t.changingLayout,this.g8=!!t.isTickingTimelines,this.J8(),this.d7(),this.m7())}B7(){return this.o8.map(t=>t.b5())}U7(t){for(const s of t){let t=this.a7(s.name);if(t)t.v5(s);else{const i=this.X7(s);if(!i)continue;const e=this.a7(i);t=this.j8(e),t.v5(s)}t.q7()||this.Kf(t)}}X7(t){const s=t.name.split(":");return s&&2===s.length?s[0]:null}W7(){return this.Y7(this.c8)}H7(t){this.K7(t,this.c8)}j7(){return this.Y7(this.f8)}z7(t){this.K7(t,this.f8)}V7(){return this.Y7(this.d8)}J7(t){this.K7(t,this.d8)}Z7(t,s){if(!s)return!1;for(const i of s)if(i===t.Rc())return!0;return!1}Y7(t){return t.map(t=>t.Rc())}K7(t,s){const i=new Set;for(const e of s)this.Z7(e,t)||i.add(e);if(hm.Rr(s,i),t){const i=t=>s=>s.Rc()===t;for(const e of t){const t=this.a7(e);t&&(s.find(i(e))||s.push(t))}}}}}{const rm=self._s,om=[0,0],am=[0,0],lm=[0,0],um=[0,0,0,0,0],cm=new Array(4),fm=[{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0},{x:0,y:0,t:0,bt:0}],dm={x:0,y:0,t:0,bt:0};rm.Q7=class{constructor(t,s){this.t9=!1,this.s9=t,this.i9=[];let i=null;if(i=s?this.s9.e9(s):rm.Br(this.s9.h9()),!i)return;const e=i.eY("offsetX"),h=i.eY("offsetY");if(!e||!h)return;this.n9=e,this.r9=h;const n=e.o9(),r=h.o9();for(let t=1,s=Math.min(n.length,r.length);t<s;++t){const s=n[t],i=(s.a9(),s.l9()),e=r[t],h=(e.a9(),e.l9());i&&"cubic-bezier"===i.u9()&&h&&"cubic-bezier"===h.u9()?this.i9.push(rm.zh(rm.c9,i,h,s,e,this.i9.length)):(i&&"line"===i.u9()&&h&&h.u9(),this.i9.push(rm.zh(rm.f9,s,e,this.i9.length)))}this.t9=!0}Jh(){for(const t of this.i9)t.Jh();rm.Sr(this.i9),this.i9=null,this.s9=null,this.n9=null,this.r9=null}d9(){return this.t9}p9(){return this.i9}m9(t){const s="relative"===this.n9.g9()?t.rG():0,i="relative"===this.r9.g9()?t.lG():0;for(const t of this.i9)t.m9(s,i)}$w(t,s,i){let e=NaN,h=this.i9.length;for(let i=0;i<h;i++){const h=this.i9[i];if("cubic-bezier"===h.oI()){const i=h.$w(t,s);(isNaN(e)||i[3]<e)&&(e=i[3],lm[0]=i[2],lm[1]=h.VL())}}return lm}y9(t,s,i){const e=i.w9;rm.Qi(e[0])||(e[0]=0),rm.Qi(e[1])||(e[1]=1);let h=NaN,n=this.i9.length;for(let i=0;i<n;i++){const n=this.i9[i];if("cubic-bezier"===n.oI()){const i=n.S9(t,s,e);(isNaN(h)||i[3]<h)&&(h=i[3],lm[0]=i[2],lm[1]=n.VL())}}return lm}b9(t,s){return this.i9[s].b9(t)}v9(t,s){return this.i9[s].v9(t)}},rm.c9=class{constructor(t,s,i,e,h){this.Vw=h;const n=t.M9("cubic-bezier"),r=i.M9("cubic-bezier"),o=s.M9("cubic-bezier"),a=e.M9("cubic-bezier");this.G9=t.x9(),this.T9=s.x9(),this._9=t.x9()+n.I9(),this.C9=s.x9()+o.I9(),this.R9=i.x9()+r.A9(),this.P9=e.x9()+a.A9(),this.E9=i.x9(),this.F9=e.x9(),this.D9=0,this.O9=0,this.k9=0,this.L9=0,this.N9=0,this.B9=0,this.W9=0,this.j9=0,this.V9=0,this.U9=0,this.H9=0,this.z9=0,this.J9=0,this.X9=0,this.q9=0,this.Y9=0,this.K9=0,this.Z9=0,this.Q9=0,this.ttt=0,this.stt=NaN,this.t9=!1,this.itt=100,this.ett=new Array(this.itt+1),this.ett[0]=0,this.htt=0,this.ntt=[],this.ott=[];for(let t=0;t<100;t++)this.ott.push({x:0,y:0,t:0,bt:0});this.att()}Jh(){rm.Sr(this.ett),this.ett=null,rm.Sr(this.ntt),this.ntt=null,rm.Sr(this.ott),this.ott=null}oI(){return"cubic-bezier"}VL(){return this.Vw}ltt(){return Math.floor(this.htt/25)}utt(){return 1/this.ltt()}m9(t,s){this.ctt=t,this.ftt=s,this.ett=new Array(this.itt+1),this.ett[0]=0,this.att(),this.D9=this.G9+this.ctt,this.O9=this.T9+this.ftt,this.k9=this._9+this.ctt,this.L9=this.C9+this.ftt,this.N9=this.R9+this.ctt,this.B9=this.P9+this.ftt,this.W9=this.E9+this.ctt,this.j9=this.F9+this.ftt,this.V9=3*(this.k9-this.D9),this.U9=3*(this.L9-this.O9),this.H9=3*(this.N9-this.k9),this.z9=3*(this.B9-this.L9),this.J9=3*(this.W9-this.N9),this.X9=3*(this.j9-this.B9),this.q9=3*(this.k9-this.D9),this.Y9=3*(this.D9+this.N9-2*this.k9),this.K9=this.W9-this.D9+3*(this.k9-this.N9),this.Z9=3*(this.L9-this.O9),this.Q9=3*(this.O9+this.B9-2*this.L9),this.ttt=this.j9-this.O9+3*(this.L9-this.B9)}Map(t){if(!this.t9)return NaN;const s=this.dtt(t);return am[0]=this.ptt(s),am[1]=this.mtt(s),am}$w(t,s){const i=this.gtt(100),e=this.ytt(t,s,i),h=this.wtt(t,s,i,e);return um[0]=h.x,um[1]=h.y,um[2]=h.t,um[3]=h.bt,um}S9(t,s,i){const e=this.gtt(100),h=this.Stt(t,s,e,i),n=this.wtt(t,s,e,h);return um[0]=n.x,um[1]=n.y,um[2]=n.t,um[3]=n.bt,um}b9(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.V9+e*this.H9+h*this.J9,r=i*this.U9+e*this.z9+h*this.X9,o=rm.sn(n,r);return om[0]=n/o,om[1]=r/o,om}v9(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,n=i*this.V9+e*this.H9+h*this.J9,r=i*this.U9+e*this.z9+h*this.X9;return Math.atan2(r,n)}dtt(t){if(!this.t9)return;let s=t*this.ett[this.itt],i=0,e=this.itt,h=0;for(;i<e;)h=i+((e-i)/2|0),this.ett[h]<s?i=h+1:e=h;this.ett[h]>s&&h--;const n=this.ett[h];return n===s?h/this.itt:(h+(s-n)/(this.ett[h+1]-n))/this.itt}ptt(t){return this.t9?self.Vu.nc("cubicbezier")(t,this.G9+this.ctt,this._9+this.ctt,this.R9+this.ctt,this.E9+this.ctt):NaN}mtt(t){return this.t9?self.Vu.nc("cubicbezier")(t,this.T9+this.ftt,this.C9+this.ftt,this.P9+this.ftt,this.F9+this.ftt):NaN}gtt(t){if(t=t||100,this.ntt.length>=t)return this.ntt;this.ntt=new Array(t),t++;for(let s=0;s<t-1;s++){const i=s/(t-1),e=i**2,h=i**3,n=this.q9*i,r=this.Y9*e,o=this.K9*h,a=this.Z9*i,l=this.Q9*e,u=this.ttt*h,c=this.D9+n+r+o,f=this.O9+a+l+u;this.ott[s].x=c,this.ott[s].y=f,this.ott[s].t=i,this.ott[s].bt=0,this.ntt[s]=this.ott[s]}return this.ntt}ytt(t,s,i,e=null,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.stt))for(let e=0;e<100;e++){const r=i[e],o=r.x-t,a=r.y-s;r.bt=o*o+a*a,r.bt<h&&(h=r.bt,n=e)}else{for(let e=this.stt;e<this.stt+5&&!(e>=i.length);e++){const r=i[e],o=r.x-t,a=r.y-s;r.bt=o*o+a*a,r.bt<h&&(h=r.bt,n=e)}for(let e=this.stt;e>this.stt-5&&!(e<0);e--){const r=i[e],o=r.x-t,a=r.y-s;r.bt=o*o+a*a,r.bt<h&&(h=r.bt,n=e)}}return this.stt=n,n}Stt(t,s,i,e,h=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.stt))for(let r=0;r<100;r++){const o=i[r],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<h&&(h=o.bt,n=r)}else{for(let r=this.stt;r<this.stt+5&&!(r>=i.length);r++){const o=i[r],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<h&&(h=o.bt,n=r)}for(let r=this.stt;r>this.stt-5&&!(r<0);r--){const o=i[r],a=o.x-t,l=o.y-s;o.bt=a*a+l*l,o.t>=e[0]&&o.t<=e[1]&&o.bt<h&&(h=o.bt,n=r)}}return this.stt=n,n}wtt(t,s,i,e){let h=i[e],n=1,r=Number.MAX_SAFE_INTEGER;t:do{const n=i.length;let o=0===e?0:e-1,a=e===n-1?n-1:e+1,l=i[o].t,u=(i[a].t-l)/4;if(u<.001)break;cm[0]=i[o];for(let i=1;i<=2;i++){const n=l+i*u,o=n**2,a=n**3,c=this.q9*n,f=this.Y9*o,d=this.K9*a,p=this.Z9*n,m=this.Q9*o,g=this.ttt*a,y=this.D9+c+f+d,w=this.O9+p+m+g,S=y-t,b=w-s,v=S*S+b*b;if(v<r){r=v,e=i,dm.x=y,dm.y=w,dm.t=n,dm.bt=v,h=dm;break t}const M=fm[i-1];M.x=y,M.y=w,M.t=n,M.bt=v,cm[i]=M}cm[3]=i[a],i=cm}while(n++<20);return h}att(){this.t9=!0;let t=this.ptt(0),s=this.mtt(0),i=0;for(let e=1;e<=this.itt;e++){const h=this.ptt(.01*e),n=this.mtt(.01*e),r=t-h,o=s-n;i+=rm.sn(r,o),this.ett[e]=i,t=h,s=n}this.htt=i}},rm.f9=class{constructor(t,s,i){this.Vw=i,this.btt=t.x9(),this.vtt=s.x9(),this.ctt=0,this.ftt=0}Jh(){}oI(){return"line"}VL(){return this.Vw}m9(t,s){this.ctt=t,this.ftt=s}rG(){return this.btt+this.ctt}lG(){return this.vtt+this.ftt}}}{const pm=self._s;pm.B8=class extends pm.Uh{constructor(t,s,i){super(),this.Nc=i.AW(),this.Mtt=i,this.Gtt=s,this.Yh=t,this.xtt=[],this.Ttt=0,this._tt=null,this.Itt=0,this.Ctt(),this.Rtt=null,this.Att=null,this.Ptt=0,this.Ett=0,this.Ftt=1,this.Dtt=0,this.Ott=-1,this.ktt=1,this.Ltt=!1,this.Ntt=!1,this.Btt=!1,this.Wtt=!0,this.jtt=!1,this.Vtt=!1,this.Utt=-1,this.Htt=!1,this.ztt=!1,this.Jtt=!1,this.Xtt=!1,this.qtt=NaN,this.Ytt=[""],this.$tt="",this.Ktt=!1,this.O8=0,this.Ztt=0,this.Qtt=null,this.tst=null}static N8(t,s){const i=s.V8(),e=i.sst(),h=i.zs(t[e]),n=pm.zh(pm.B8,t[e],h,s);return n.ist(!0),n}static j8(t,s,i){return pm.zh(pm.B8,t,s,i)}Jh(){if(this.Gq())return;const t=this.Nc.wf();this.Mtt.b7(this),this.Mtt.x7(this);for(const t of this.xtt)t.Jh();pm.Sr(this.xtt),this.xtt=null,this.Nc=null,this.Mtt=null,this.Gtt=null,this.jtt=!0,this.Rtt=null,this.Att=null,this.est(t)}est(t){const s=pm.zh(pm.Event,"timelinestatereleased");s.hst=this,t.dispatchEvent(s)}oI(){return 0}Ctt(){for(const t of this.Gtt.rst().nst())this.Ttt=this.xtt.push(pm.ost.i_(this,t))}ast(){return this.Mtt}AW(){return this.Nc}h9(){return this.xtt}lst(t,s,i,e){if(!this.Ztt)return;let h;for(let n=0;n<this.xtt.length;n++){let r=this.xtt[n];if(t!==r.Yq())continue;const o=r.eY(i);o&&s.constructor===o.ust().constructor&&o.g9()===e.g9()&&(h||(h=[]),h.push(o))}return h}q7(){return!!this.xtt.length}e9(t){for(const s of this.xtt)if(pm.Ke(s.sY(),t))return s;return null}cst(t){for(const s of this.xtt)if(!s.fst()&&pm.Ke(s.Rc(),t))return s;return null}R$(t){this.Yh=t}Rc(){return this.Yh}dst(){return this.Gtt}YH(){return this.Gtt.Rc()}Aq(){return this.Gtt.Aq()}Rq(t){this.Gtt.Rq(t)}pst(){return this.Gtt.pst()}mst(t){this.Gtt.mst(t)}gst(){return this.Gtt.gst()}yst(t){this.Gtt.yst(t)}g9(){return this.Gtt.g9()}wst(t){this.Gtt.g9(t)}qq(t){for(const s of this.h9())s.qq(t)}Eq(){return this.Gtt.Eq()}Pq(t){return this.Gtt.Pq(t)}Dq(){return this.Gtt.Dq()}Fq(t){return this.Gtt.Fq(t)}qX(){return this.Gtt.qX()}Sst(){return this.ktt}bst(t){return this.Gtt.bst(t)}Oq(t){if(t=Number(t),pm.Qi(t))return this.Ftt=t}kq(){return this.Ftt}N7(){return this.Gtt.N7()}vst(){return this.Gtt.vst()}Mst(){return this.Gtt.Mst()}Gst(){return this.Dtt}xst(){return!this.IsPlaying()||this.Ftt>0}Tst(){return this.IsPlaying()?"playing":this.jq()?"paused":this.Qq()?"complete":"other"}Nq(){return this.Rtt||(this.Rtt=new Promise(t=>{this.Att=t})),this.Rtt}v7(){this.Rtt&&(this.Att(),this.Rtt=null,this.Att=null)}_st(t){this.Ytt=pm.B8.Ist(t),this.Ktt=!0}Lq(){return this.Ytt}Cst(){return this.Ktt&&(this.$tt=this.Ytt.join(" ")),this.Ktt=!1,this.$tt}Iq(t){if(!this.Ytt)return!1;if(!this.Ytt.length)return!1;const s=pm.B8.Ist(t);return!!s&&!!s.length&&s.every(pm.B8.Rst,this)}Ast(){pm.MW.Pst&&this.constructor===pm.B8&&(pm.MW.Pst.bW.Est(this),this.Mtt.pz(pm.MW.Pst.bW.Fst),this.Mtt.pz(pm.MW.Pst.bW.Dst),this.Mtt.pz(pm.MW.Pst.bW.Ost),this.Mtt.pz(pm.MW.Pst.bW.kst),pm.MW.Pst.bW.Lst())}Nst(){this.Utt=this.Nc.tB()}k7(){this.Jtt||(this.Jtt=!0,pm.MW.Pst&&this.constructor===pm.B8&&(pm.MW.Pst.bW.Est(this),this.Mtt.pz(pm.MW.Pst.bW.Bst),this.Mtt.pz(pm.MW.Pst.bW.Wst),this.Mtt.pz(pm.MW.Pst.bW.jst),this.Mtt.pz(pm.MW.Pst.bW.Vst),pm.MW.Pst.bW.Lst()))}y7(t){this.Ltt=t}Ust(){return this.Utt===this.Nc.tB()}IsPlaying(t=!1){return!!this.Ust()||!(!this.Hst()||t)||this.Ltt}zst(){return this.IsPlaying(!0)}jq(){return this.Jst()}Jst(){return!(this.Gq()||this.Hst()||this.zst()||this.Qq())}w7(t){this.Ntt=t}Hst(){return this.Ntt}Xst(t){this.Wtt=t;const s=this.Eq(),i=this.Dq();if(s||i){if(s&&!i);else if(!s&&i){const t=this.pO();1===this.Dtt&&(t<=0||t>=this.Aq())&&(this.Wtt=!0)}}else{const t=this.pO();(t<=0||t>=this.Aq())&&(this.Wtt=!0)}}Qq(){return this.Wtt}Gq(){return this.jtt}S7(t){this.Vtt=t}T7(){return this.Vtt}qst(t){this.Htt=t}Yst(){return this.Htt}ist(t){this.ztt=!!t}X8(){return this.ztt}O7(){return this.Btt}pO(){return this.Ptt}Cq(t){if(t=Number(t),!pm.Qi(t))return;const s=this.pO();this.$st(t),this.Xst(!1),this.Qq()||this.qst(!0),(this.zst()||this.Hst()||!this.Btt)&&(this.zst()||this.Hst()||this.Btt?this.zst()?this.Tq():this.Hst()&&(this.Mtt.b7(this),this.Kst()):this.Kst()),this.Zst(),this.Qst(this.pO(),!1,!0,!0,s),this.tit(),this.O8&&this.AW().lW(),this.sit()}$st(t){pm.Qi(t)||(t=this.Aq()),t<0?this.Ptt=0:t>=this.Aq()?this.Ptt=this.Aq():this.Ptt=t}iit(t){pm.Qi(t)||(t=this.Aq()),t<0?this.Ptt=0:t>=this.Aq()?this.Ptt=this.Aq():this.Ptt=t;for(const t of this.xtt)t.eit()}sit(){pm.MW.Pst&&this.constructor===pm.B8&&(pm.MW.Pst.bW.Est(this),this.Mtt.pz(pm.MW.Pst.bW.hit),this.Mtt.pz(pm.MW.Pst.bW.nit),this.Mtt.pz(pm.MW.Pst.bW.rit),pm.MW.Pst.bW.Lst())}oit(){if(this.Eq())return!0;if(this.Dq()&&1===this.Dtt){if(this.xst()){if(this.pO()>=this.Aq())return!1}else if(this.pO()<=0)return!1}else if(!this.Eq()&&!this.Dq())if(this.xst()){if(this.pO()>=this.Aq())return!1}else if(this.pO()<=0)return!1;return!0}_q(){this.Gq()||this.oit()&&this.Play(!0)}Play(t=!1){return!this.Gq()&&!this.Hst()&&(this.zst()&&this.Ust()?this.ait():!this.zst()&&!!(this.Qq()||t||this.Yst())&&this.lit())}ait(){return this.qst(!1),this.Mtt.p7(this),this.Mtt.g7(this),this.Nq(),!0}lit(){return this.qst(!1),this.Mtt.g7(this),this.Nq(),!0}Tq(t=!1){this.Gq()||(this.Xst(t),this.Mtt.M7(this),this.Qq()&&this.v7())}Bf(t=!0,s=!1){if(this.Gq())return;if(!this.zst()&&this.Hst())return this.Mtt.b7(this);if(this.Qq())return;this.Tq(!0),this.xst()?this.$st(0):this.$st(this.Aq());const i=this.pO();this.Zst(),s?this.uit(i):this.Qst(i,!1,!1,!0),t&&this.sit(),this.tit(),this.O8&&t&&this.AW().lW()}cit(){this.Bf(!1,!0)}uit(t){this.Qst(t,!1,!1,!0,NaN,!1,!0)}M8(){return!!this.Gq()||!(!this.AW().i6()&&this.fit())&&(this.Mtt.G7(this),this.AW().i6()||this.cit(),!0)}Kst(){this.I7(!0)}_7(){this.I7(!1,!0),this.y7(!1),this.w7(!1)}I7(t=!1,s=!1){if(!this.T7()||s)if(t){this.Jtt=!1,this.Btt=!0,this.Xtt=!0,this.Zst();for(const t of this.xtt)t.I7();this.tit()}else if(this.y7(!0),this.w7(!1),this.Ast(),this.Qq()){this.Utt=-1,0!==this.Dtt&&(this.Ftt=Math.abs(this.Ftt)),this.Dtt=0,this.Ott=-1,this.ktt=1,this.Wtt=!1,this.Jtt=!1,this.Btt=!0,this.Xtt=!0,this.xst()?this.$st(0):this.$st(this.Aq()),this.Zst();for(const t of this.xtt)t.I7();this.tit()}else{-1!==this.Ott&&(this.Dtt=this.Ott),this.Xtt=!0,this.Jtt=!1,this.Zst();for(const t of this.xtt)t.dit();this.tit()}}C7(){return this.O8}Zst(){this.Ztt=0;for(const t of this.xtt)t.iE()&&(this.Ztt=1)}tit(){this.O8=0;for(const t of this.xtt)t.pit(),0===this.O8&&1===t.C7()&&(this.O8=1),this._tt||1!==t.mit()||(this._tt||(this._tt=[]),this.Itt=this._tt.push(t))}P7(t,s,i){if(this.Mst()){if(0===t&&0===this.qtt)return;this.qtt=t,t=i}else{if(0===i&&0===this.qtt)return;this.qtt=i,t=i,s=1}const e=this.Ptt+this.Ett,h=e+t*s*this.Ftt,n=this.Gtt.git;h<0?(this.Ptt=0,this.Ett=-h):h>=n?(this.Ptt=n,this.Ett=this.Ptt-h):(this.Ptt=h,this.Ett=0);let r=!1,o=!1;const a=this.Eq(),l=this.Dq();let u;a||l?a&&!l?this.Ftt>0?this.Ptt>=n&&(this.iit(0),o=!0):this.Ptt<=0&&(this.iit(n),o=!0):!a&&l?this.Ftt>0?this.Ptt>=n&&(this.$st(n),this.Oq(-1*this.kq()),o=!0,1===this.Dtt?this.ktt<this.qX()?(this.ktt++,this.Dtt=0):r=!0:0===this.Dtt&&(this.Dtt=1)):this.Ptt<=0&&(this.$st(0),this.Oq(-1*this.kq()),o=!0,1===this.Dtt?this.ktt<this.qX()?(this.ktt++,this.Dtt=0):r=!0:0===this.Dtt&&(this.Dtt=1)):a&&l&&(this.Ftt>0?this.Ptt>=n&&(this.$st(n),this.Oq(-1*this.kq()),o=!0,this.Dtt++,pm.wrap(this.Dtt,0,2)):this.Ptt<=0&&(this.$st(0),this.Oq(-1*this.kq()),o=!0,this.Dtt++,pm.wrap(this.Dtt,0,2))):this.Ftt>0?this.Ptt>=n&&(this.ktt<this.qX()?(this.ktt++,this.iit(0),o=!0):(this.$st(n),r=!0)):this.Ptt<=0&&(this.ktt<this.qX()?(this.ktt++,this.iit(n),o=!0):(this.$st(0),r=!0));const c=this.Ttt;if(r){for(u=0;u<c;u++)this.xtt[u].yit();return this.Tq(!0),void this.Nst()}const f=this.Itt;for(u=0;u<f;u++)this._tt[u].wit();if(1===this.Ztt)for(u=0;u<c;u++){const t=this.xtt[u],s=t.Sit();this.Ptt-s<0&&e-s>0?(this.Ptt=s<0?0:s>=n?n:s,t.Sc(s,!0,!1,o,this.Xtt,!1)):t.Sc(this.Ptt,!0,!1,o,this.Xtt,!1)}else for(u=0;u<c;u++)this.xtt[u].Sc(this.Ptt,!0,!1,o,this.Xtt,!1);if(!this.IsPlaying()&&this.Qtt){const t=this.Qtt.pO()+this.Qtt.vit().bit().Sit(),s=this.Ptt-t;this.Ptt-=s,0!==this.Ett&&(this.Ett-=s),this.Qtt=null}for(u=0;u<f;u++)this._tt[u].Mit();this.Xtt&&(this.Xtt=!1)}Git(t){this.Qtt=t}xit(){return this.Qtt}Qst(t,s=!1,i=!1,e=!1,h=NaN,n=!1,r=!1){for(const t of this.xtt)t.wit();for(const n of this.xtt){let o=t;if("number"==typeof h&&!isNaN(h)){const t=this.pO()-n.Sit(),s=h-n.Sit();t<0&&s>0&&(o=n.Sit(),this.$st(o))}n.Sc(o,s,i,e,this.Xtt,r)}for(const t of this.xtt)t.Mit();this.Xtt&&n&&(this.Xtt=!1)}Tit(){const t=this.Gtt.rst()._it(),s=pm.ost.i_(this,t);return this.Ttt=this.xtt.push(s),s}Y8(){if(!this.Gq())for(const t of this.xtt)t.Iit()}L7(){for(const t of this.xtt)t.L7()}*GV(){for(const t of this.xtt)t.Yq()&&(yield t.Yq())}Cit(){for(const t of this.xtt)t.Rit()}Ait(t,s,i){if(s){if("number"==typeof i&&i>=0){const t=this.xtt[i];if(!t)return;return t.Pit(s),void this.Mtt.e7(s.EH(),this)}for(const i of this.xtt)if(i.fst()){if(t){if(i.sY()!==t)continue;i.Pit(s),this.Mtt.e7(s.EH(),this);break}if(!i.Eit()){i.Pit(s),this.Mtt.e7(s.EH(),this);break}}}}o7(t,s){for(const i of this.xtt)if(i.fst())if(s){if(s===i.sY()&&t===i.Yq())return!0}else if(t===i.Yq())return!0;return!1}D7(){return this.xtt.some(t=>!t.fst()||t.Fit())}fit(){return this.xtt.some(t=>{if(t.fst()){if(!t.Fit())return!1;const s=t.EH();return!!s&&s.h0()}return!1})}eY(t){for(const s of this.h9())for(const i of s.Dit())if(i.Oit()===t)return i}kit(t){for(const s of this.xtt)if(t===s.Yq())return s;return null}Lit(t){let s=t?t.split(" "):[];const i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const t of this.h9())for(const i of t.Nit())if(s.every(t=>i.Bit(t)))return i}h7(){const t=[];for(const s of this.h9())t.push(s.EH());return t.filter(t=>t)}P8(){for(const t of this.h9())t.P8()}b5(){return{tracksJson:this.Wit(),name:this.Yh,playheadTime:this.pO(),playbackRate:this.Ftt,pingPongState:this.Dtt,resumePingPongState:this.Ott,currentRepeatCount:this.ktt,isPlaying:this.Ltt,isScheduled:this.Ntt,initialStateSet:this.Btt,finishedTriggers:this.Jtt,complete:this.Wtt,released:this.jtt,markedForRemoval:this.Vtt,completedTick:this.Utt,implicitPause:this.Htt,isTemplate:this.ztt,tags:this.Ytt.join(" "),stringTags:this.$tt,tagsChanged:this.Ktt,firstTick:this.Xtt}}v5(t){t&&(this.jit(t.tracksJson),this.Yh=t.name,this.Ptt=t.playheadTime,this.Ftt=t.playbackRate,this.Dtt=t.pingPongState,this.Ott=t.hasOwnProperty("resumePingPongState")?t.resumePingPongState:-1,this.ktt=t.currentRepeatCount,this.Ltt=!!t.isPlaying,this.Ntt=!!t.isScheduled,this.Btt=!!t.initialStateSet,this.Jtt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.Wtt=!!t.complete,this.jtt=!!t.released,this.Vtt=!!t.markedForRemoval,this.Utt=t.completedTick,this.Htt=!!t.implicitPause,this.ztt=!!t.isTemplate,this.Ytt=t.tags.split(" "),this.$tt=t.stringTags,this.Ktt=!!t.tagsChanged,this.Xtt=!!t.firstTick)}Wit(){return this.xtt.map(t=>t.b5())}jit(t){this.Cit(),t.forEach((t,s)=>{this.xtt[s].v5(t)}),this.xtt.filter(t=>t.Fit())}static Rst(t){const s=this.Lq();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Ist(t){if(pm.Ge(t))return t.slice(0);if(pm.ae(t))return t.split(" ");throw new Error("invalid tags")}Vit(){return this.tst||(this.tst=pm.zh(self.Uq,this)),this.tst}}}{const mm=self._s;mm.ost=class extends mm.Uh{constructor(t,s){super(),this.s9=t,this.Uit=s,this.Hit=s.rst(),this.zit=NaN,this.Jit=NaN,this.Xit=null,this.qit=null,this.Yit=!1,this.$P=s.Sit()>0,this.$it=!1,this.Kit=!1,this.Zit=NaN,this.Qit=null,this.tet=this.Uit.vit().iet(),this.eet=[],this.het(),this.net=0,this.O8=0,this.ret=0}static i_(t,s){return mm.zh(mm.ost,t,s)}Jh(){this.tet=null;for(const t of this.eet)t.Jh();mm.Sr(this.eet),this.eet=null,this.s9=null,this.Xit=null,this.qit=null,this.Uit=null,this.Qit=null}het(){for(const t of this.Uit.aet().oet())this.eet.push(mm.let.i_(this,t))}Iit(){for(const t of this.eet)t.Iit()}L7(){for(const t of this.eet)t.L7();this.Xit=null,this.qit=null}uet(){return this.s9}AW(){return this.s9.AW()}Nit(){return this.tet||(this.tet=this.Uit.vit().iet()),this.tet}Dit(){return this.eet}eY(t){for(let s=0;s<this.eet.length;s++){const i=this.eet[s];if(i.Oit()===t)return i}}cet(){this.Xit||this.Yq()}fet(){return!!this.Xit&&!this.Xit.jY()}Fit(){if(!this.fst())return!1;if(this.Yit)return!1;const t=this.det(),s=this.AW().KB(t);return!!s&&!s.jY()}EH(){if(!this.fst())return;const t=this.pet();return-1!==t?this.AW().f1(t):void 0}met(){return this.s9.h9().indexOf(this)}Rit(){this.Xit=null,this.zit=NaN,this.qit=null,this.Jit=NaN,this.Yit=!0}Eit(){return!!this.Xit}Yq(){if(this.Yit)return;if(this.Xit&&this.fet())return this.Xit;const t=this.det();return this.Xit=this.AW().KB(t),this.Xit}Pit(t){if(this.Yit=!1,this.Xit!==t){this.L7(),this.Xit=t,this.Jit=t.EH().VL(),this.zit=t.zH(),this.qit=t.iW();for(const s of this.yet()){const i=s.wet,e=s.bet;switch(i.vet()){case"instance-variable":{e.Met();const i=t.EH(),h=i.Get(s.name),n=i.xet(h),r=i.Tet(h);n===s.name&&r===s.type&&e._et(h);break}case"behavior":{const i=s.AX,h=this.EH(),n=t.EH(),r=e.EX(n);if(i&&r){const t=i.Rc();h.Iet(t),n.Iet(t),e.Met(),e.Cet(r.J1())}break}}}}}*yet(){for(const t of this.eet){const s=t.ust(),i=this.EH(),e={wet:t,bet:s};switch(t.vet()){case"world-instance":e.Ret=t.Oit();break;case"instance-variable":{const t=s.Met();e.name=i.xet(t),e.type=i.Tet(t);break}case"effect":{const t=i.XV(),h=s.Aet(t);e.Pet=h;break}case"behavior":{const t=s.EX(i);e.AX=t;break}case"plugin":e.cV=i.fV()}yield e}}iW(){if(this.qit&&this.fet())return this.qit;const t=this.Yq();return t&&(this.qit=t.iW()),this.qit}bit(){return this.Uit}det(){return isNaN(this.zit)?this.Uit.det():this.zit}Eet(t){this.Uit.Eet(t)}gst(){return this.Uit.gst()}yst(t){this.Uit.yst(t)}g9(){return this.Uit.g9()}sY(){return this.Uit.sY()}Sit(){return this.Uit.Sit()}Fet(){return this.Uit.Fet()}Det(t){this.Uit.Det(t)}wst(t){this.Uit.wst(t)}qq(t){for(const s of this.Nit())s.qq(t);for(const s of this.Dit())s.qq(t)}Oet(){return this.Uit.Oet()}ket(t){this.Uit.ket(t)}pet(){return isNaN(this.Jit)?this.Uit.pet():this.Jit}Let(t){this.Uit.Let(t)}Net(t){this.Uit.Net(t)}Bet(){const t=this.Yq();return t&&t.MX().Wet()?t.MX().Bet():this.Uit.Bet()}jet(t){this.Uit.jet(t)}Vet(){const t=this.Yq();return t&&t.MX().Wet()?t.MX().Vet():this.Uit.Vet()}oI(){return this.Uit.oI()}Rc(){return this.Uit.Rc()}fst(){return 0===this.oI()}Uet(){return 1===this.oI()}Het(){return 2===this.oI()}zet(){return this.net}C7(){return this.O8}mit(){return this.ret}iE(){return this.$P}eit(){for(const t of this.eet)t.eit()}I7(){if(this.cet(),!this.fet()&&this.fst())return;const t=this.uet().xst(),s=t?0:this.Fet();for(const t of this.eet)t.I7(s),0===this.net&&1===t.zet()&&(this.net=1),0===this.O8&&1===t.C7()&&(this.O8=1);this.ret=0,this.eet.some(t=>t.mit())&&(this.ret=1),this.Qit=t?this.Jet(s):this.Xet(s),this.$it=!1,this.Kit=!1,this.Sc(s),this.qet(this.Qit)}Yet(){const t=this.$et(),s=this.Ket();let i,e;return this.s9.xst()?(i={pO:()=>t.pO()+this.Sit(),Lq:()=>t.Zet()||"<no tags>"},e={pO:()=>s?s.pO()+this.Sit():this.Fet(),Lq:()=>s?.Zet()||"<no tags>"}):(i={pO:()=>s?s.pO()+this.Sit():this.Fet(),Lq:()=>s?.Zet()||"<no tags>"},e={pO:()=>t.pO()+this.Sit(),Lq:()=>t.Zet()||"<no tags>"}),[i,e]}$et(){const t=this.s9.pO()-this.Sit();return this.s9.xst()?this.Jet(t):this.Xet(t)}Ket(){return this.s9.xst()?this.$et().a9():this.$et().Qet()}dit(){if(this.cet(),!this.fet()&&this.fst())return;const t=this.s9.xst(),s=this.s9.pO()-this.Sit();this.Qit=t?this.Jet(s):this.Xet(s);for(const t of this.eet)t.dit(s)}yit(){if(!this.uet().Qq()&&(this.cet(),(this.fet()||!this.fst())&&!this.$P)){const t=this.s9.pO();t>=this.Sit()+this.Fet()?this.Sc(this.Fet(),!0,!1,!0,!1,!1,!0):t<=0&&this.Sc(0,!0,!1,!0,!1,!1,!0)}}pit(){for(let t=0,s=this.eet.length;t<s;t++){const s=this.eet[t];s.pit(),0===this.net&&1===s.zet()&&(this.net=1),0===this.O8&&1===s.C7()&&(this.O8=1)}}wit(){const t=this.eet.length;for(let s=0;s<t;s++)this.eet[s].wit()}Sc(t,s=!1,i=!1,e=!1,h=!1,n=!1,r=!1){this.Xit||this.Yq();const o=this.Xit&&!this.Xit.jY(),a=0===this.Uit.Jc;if((o||!a)&&!(n&&a&&this.EH().h0()||(t-=this.Sit())<0)){this.tht(t,s),this.sht(t,s,h),!this.uet().IsPlaying()&&this.uet().xit()&&(t=this.uet().xit().pO());for(let s=0,h=this.eet.length;s<h;s++)this.eet[s].Sc(t,i,e,r);this.iht(t,s),0!==this.net&&(this.qit||(this.qit=this.Xit.iW()),this.qit&&this.qit.Uz())}}Mit(){const t=this.eet.length;for(let s=0;s<t;s++)this.eet[s].Mit()}tht(t,s){if(s&&this.$P&&!this.$it){if(this.uet().xst()){if(t<0)return}else if(t>this.Fet())return;for(const t of this.eet)t.I7();this.$it=!0}}iht(t,s){if(s&&this.$P&&!this.Kit)if(this.uet().xst()){if(t>=this.Fet()){for(const t of this.eet)t.Sc(this.Fet(),!1,!0);this.Kit=!0}}else if(t<=0){for(const t of this.eet)t.Sc(0,!1,!0);this.Kit=!0}}sht(t,s,i){if(i)return;if(!s)return;if(!mm.MW.Pst)return;const e=this.uet();if(e.xst()){const s=this.Qit.a9(),i=this.Qit.pO(),h=s?s.pO():e.Aq();(t<=i||t>=h)&&(this.Qit=this.Hit.eht(t,this.Uit),s&&this.hht(this.Qit))}else{if(!this.Hit.nht(t,this.Uit))return;this.Qit||(this.Qit=this.Hit.nht(t,this.Uit));const s=this.Qit.Qet(),i=this.Qit.pO(),e=s?s.pO():0;(t>=i||t<=e)&&(this.Qit=this.Hit.nht(t,this.Uit),this.Qit&&this.hht(this.Qit))}}Jet(t){return this.Hit.rht(t,this.Uit)||this.Hit.eht(t,this.Uit)}Xet(t){return this.Hit.rht(t,this.Uit)||this.Hit.nht(t,this.Uit)}hht(t,s=!1){if(!mm.MW.Pst)return;const i=this.uet(),e=i.ast();mm.MW.Pst.bW.Est(i),mm.MW.Pst.bW.oht(t),e.pz(mm.MW.Pst.bW.aht),e.pz(mm.MW.Pst.bW.hht),i.IsPlaying()||s||i.Git(t),mm.MW.Pst.bW.Lst(i),mm.MW.Pst.bW.lht(t)}qet(t){this.hht(t,!0)}uht(){return this.Uit.vit().cht()}fht(){const t=this.Uit.aet().dht(),s=mm.let.i_(this,t);return this.eet.push(s),s}pht(t){this.Uit.vit().mht(t)}ght(t){for(const s of this.eet)s.ght(t)}yht(){for(const t of this.eet)t.yht()}wht(){if(this.cet(),this.fet()||!this.fst())for(const t of this.eet)t.wht()}Sht(){if(this.cet(),!this.fet()&&this.fst())return;let t=!1;for(const s of this.eet){const i=s.Sht();!t&&i&&(t=!0)}if(t){const t=this.uht();t.Cq(this.uet().pO()),t.qq("noease"),t.ket(!0),t._st("")}}P8(){isNaN(this.Zit)||this.bht(this.Zit),this.Zit=NaN}b5(){const t=this.Yq(),s=t?t.zH():this.det();return{propertyTracksJson:this.vht(),lastKeyframeDataItemJson:this.Mht(),initialStateOfNestedSet:this.$it,endStateOfNestedSet:this.Kit,instanceUid:s,cleared:this.Yit}}v5(t){if(t){this.Ght(t.propertyTracksJson),this.xht(t.lastKeyframeDataItemJson),this.Zit=t.instanceUid,this.$it=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.$it=t.initialStateOfNestedSet),this.Kit=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Kit=t.endStateOfNestedSet),this.Yit=!!t.hasOwnProperty("cleared")&&t.cleared;for(const t of this.eet)0===this.net&&1===t.zet()&&(this.net=1),0===this.O8&&1===t.C7()&&(this.O8=1);this.ret=0,this.eet.some(t=>t.mit())&&(this.ret=1)}}Mht(){return this.Uit.vit().Tht(this.Qit)}vht(){return this.eet.map(t=>t.b5())}Ght(t){t.forEach((t,s)=>{this.eet[s].v5(t)})}bht(t){if(!mm.Qi(t))return;const s=this.AW().KB(t);s&&this.uet().Ait(this.Uit.sY(),s,this.met())}xht(t){const s=this.Uit.vit();this.Qit=s._ht(t)}}}{const gm=self._s;gm.let=class extends gm.Uh{constructor(t,s){super(),this.Iht=t,this.Cht=s,this.Rht=s.aet(),this.net=0,this.O8=0,this.ret=0,this.Aht=this.ust(),this.Pht=this.Cht.Fht().Eht(),this.Dht=null,this.Oht=null}static i_(t,s){return gm.zh(gm.let,t,s)}Jh(){this.Iht=null,this.Aht&&(this.Aht.Jh(),this.Aht=null),this.Pht=null,this.Cht=null,this.Rht=null}zet(){return this.net}C7(){return this.O8}mit(){return this.ret}kht(){return!!this.Oht}Lht(t){this.Oht=t}Nht(){return this.Oht}Bht(){return this.Iht}Wht(){return this.Cht}aet(){return this.Rht}uet(){return this.Iht.uet()}AW(){return this.Iht.AW()}Yq(){return this.Iht.Yq()}ust(){if(this.Aht)return this.Aht;let t;switch(this.Cht.vet()){case"behavior":t=new gm.let.jht(this);break;case"effect":t=new gm.let.Vht(this),this.O8=1;break;case"instance-variable":t=new gm.let.Uht(this);break;case"plugin":t=new gm.let.Hht(this),this.O8=1;break;case"world-instance":t=new gm.let.zht(this),this.O8=1,this.net=1;break;case"value":t=new gm.let.Jht(this);break;case"audio":t=new gm.let.Xht(this)}return this.Aht=t,this.Aht}vet(){return this.Cht.vet()}qht(t){this.Cht.qht(t)}Yht(){return this.Cht.$ht()}Kht(t){this.Cht.Zht(t)}iY(){return this.ust().Qht()}Oit(){return this.Cht.tnt()}snt(t){this.Cht.int(t)}ent(){return this.Cht.oI()}hnt(t){this.Cht.nnt(t)}rnt(){return this.aet().ont(this.Cht).oI()}ant(){return this.Cht.ant()}lnt(t){this.Cht.lnt(t)}unt(){return this.Cht.unt()}cnt(t){this.Cht.cnt(t)}Oet(){return this.Cht.Oet()}ket(t){this.Cht.ket(t)}gst(){return this.Cht.gst()}yst(t){this.Cht.yst(t)}g9(){return this.Cht.g9()}wst(t){this.Cht.wst(t)}qq(t){for(const s of this.fnt())s.qq(t)}dnt(){return this.Cht.dnt()}fnt(){return this.Pht||(this.Pht=this.Cht.Fht().Eht()),this.Pht}o9(){return this.Cht.Fht().o9()}pnt(t){return this.Rht.pnt(t,this.Cht)}mnt(t){return this.Rht.mnt(t,this.Cht)}gnt(t){let s,i=this.Rht.pnt(t,this.Cht);return i?s=this.Rht.ynt(t,this.Cht):(i=this.Rht.mnt(t,this.Cht),s=this.Rht.wnt(t,this.Cht)),{start:i,end:s}}*Snt(){for(const t of this.fnt())yield t.x9()}*bnt(){for(const t of this.fnt())yield t.pO()}Iit(){this.ust().Iit()}L7(){this.ust().L7()}vnt(){return this.ust().vnt()}eit(){this.ust().eit()}I7(t){this.ust().I7(),this.Dht=this.Mnt(t),this.pit()}dit(t){this.ust().dit(),this.Dht=this.Mnt(t)}pit(){const t=this.Bht();if(this.ret=0,t.fst()){const s=this.uet(),i=t.Yq(),e=this.ust(),h=this.Oit();if(e.Gnt()){const t=s.lst(i,e,h,this);t&&t.length&&(this.ret=1)}else this.ret=0}}Mnt(t){const s=this.uet();return this.Rht.pnt(t,this.Cht)||(s.xst()?this.Rht.mnt(t,this.Cht):this.Rht.wnt(t,this.Cht))}wit(){this.Aht.wit()}Sc(t,s=!1,i=!1,e=!1){let h,n,r=!1;if(s)h=this.Rht.mnt(t,this.Cht);else{if(this.Dht){const s=this.uet(),i=this.Dht.a9(),e=this.Dht.pO(),h=i?i.pO():s.Aq();(t<=e||t>=h)&&(this.Dht=this.Rht.mnt(t,this.Cht),r=!0)}else this.Dht=this.Rht.mnt(t,this.Cht),r=!0;h=this.Dht}h&&(n=h.a9()),this.Aht.Sc(t,h,n,s,i,e,r)}xnt(t){if(this.Dht){const s=this.uet(),i=this.Dht.a9(),e=this.Dht.pO(),h=i?i.pO():s.Aq();(t<=e||t>=h)&&(this.Dht=this.Rht.mnt(t,this.Cht))}else this.Dht=this.Rht.mnt(t,this.Cht);const s=this.Dht,i=s.a9();return this.Aht.xnt(t,s,i)}Tnt(t,s,i){return this.Aht.xnt(t,s,i)}Mit(){this.Aht.Mit()}static _nt(t,s){const i=s.Wht();return s.Rht.mnt(t,i)}static Int(t,s){const i=s.Wht();return s.Rht.wnt(t,i)}Cnt(){const t=this.Cht.Fht().Rnt();return this.Dht=null,t}ght(t){this.Dht=null,this.Cht.Fht().Ant(t)}yht(){this.ust().yht()}wht(){if(this.ust().wht()){const t=this.Rht.ont(this.Cht),s=this.ust().vnt();t.Pnt(s)}}Sht(){const t=this.ust().Sht();return t&&this.Ent(),this.ust().Fnt(),t}Ent(){const t=this.uet().pO(),s=this.ust(),i=gm.let._nt(t,this),e=this.Cnt();e.nnt(i.oI()),e.Cq(t),e.qq(i.Dnt()),e.ket(!0),e.Ont(s.knt()),e.Pnt(s.vnt())}b5(){return{sourceAdapterJson:this.ust().b5()}}v5(t){t&&this.ust().v5(t.sourceAdapterJson)}}}{const ym=self._s.let;ym.zht=class{constructor(t){this.Lnt=t,this.Nnt=null,this.Bnt()}Jh(){this.Nnt&&(this.Nnt.Jh(),this.Nnt=null),this.Lnt=null}Gnt(){return this.Nnt.Gnt()}eY(){return this.Lnt}Iit(){this.Nnt&&this.Nnt.Iit()}L7(){this.Nnt&&this.Nnt.L7()}Bnt(){return this.Nnt||(this.Nnt=this.Wnt()),this.Nnt}Met(){}VL(){return this.Met()}jnt(){}eit(){this.Bnt().eit()}I7(){this.Bnt().I7()}dit(){this.Bnt().dit()}wit(){this.Nnt.Vnt()}Sc(t,s,i,e,h,n,r){let o;switch(this.Lnt.rnt()){case"numeric":o=ym.Unt.Sc(t,s,i,this.Lnt);break;case"angle":o=ym.Hnt.Sc(t,s,i,this.Lnt);break;case"boolean":o=ym.znt.Sc(t,s,i,this.Lnt);break;case"color":o=ym.Jnt.Sc(t,s,i,this.Lnt);break;case"text":o=ym.Xnt.Sc(t,s,i,this.Lnt)}this.Nnt.qnt(t,o,s,i,e,h,n,r)}xnt(t,s,i){switch(this.Lnt.rnt()){case"numeric":return ym.Unt.Sc(t,s,i,this.Lnt);case"angle":return ym.Hnt.Sc(t,s,i,this.Lnt);case"boolean":return ym.znt.Sc(t,s,i,this.Lnt);case"color":return ym.Jnt.Sc(t,s,i,this.Lnt);case"text":return ym.Xnt.Sc(t,s,i,this.Lnt)}}Mit(){this.Nnt.Ynt()}yht(){this.Bnt().$nt()}Fnt(){this.Bnt().Fnt()}vnt(){return this.Bnt().vnt()}wht(){return this.Bnt().wht()}Sht(){return this.Bnt().Sht()}knt(){const t=this.Lnt,s=t.Bht().uet().pO(),i=ym._nt(s,t),e=i.a9();switch(t.rnt()){case"numeric":return ym.Unt.Sc(s,i,e,t);case"angle":return ym.Hnt.Sc(s,i,e,t);case"boolean":return ym.znt.Sc(s,i,e,t);case"color":return ym.Jnt.Sc(s,i,e,t);case"text":return ym.Xnt.Sc(s,i,e,t)}}Wnt(){const t=this.Lnt;switch(t.dnt()?t.rnt():""){case"combo":case"boolean":case"text":case"string":return new ym.Znt.Knt(this);case"numeric":case"number":case"angle":return"combo"===this.Lnt.ent()?new ym.Znt.Knt(this):new ym.Znt.Qnt(this);case"color":case"offsetColor":return new ym.Znt.trt(this);default:return new ym.Znt.Qnt(this)}}b5(){return{propertyAdapterJson:this.Bnt().b5()}}v5(t){t&&this.Bnt().v5(t.propertyAdapterJson)}}}{const wm=self._s;class Sm extends wm.let.zht{constructor(t){super(t),this.srt=NaN}Met(){return this.Lnt.Wht().$ht()[0]}VL(){return this.srt?this.srt:super.VL()}jnt(){return this.Lnt.Bht().Yq()}_et(t){this.Lnt.Wht().$ht()[0]!==t&&(this.srt=t)}Sc(t,s,i,e,h,n,r){this.Bnt().irt(s.Qht())&&super.Sc(t,s,i,e,h,n,r)}xnt(t,s,i){if(this.Bnt().irt(s.Qht()))return super.xnt(t,s,i)}b5(){return Object.assign(super.b5(),{index:this.srt})}v5(t){t&&(super.v5(t),this.srt=t.index)}}wm.let.Uht=Sm}{const bm=self._s;class vm extends bm.let.zht{constructor(t){super(t),this.u0=NaN}Met(){return this.Lnt.Wht().$ht()[1]}jnt(){const t=this.Lnt.Wht(),s=this.Lnt.Bht(),i=this.u0?this.u0:t.$ht()[0],e=s.Yq(),h=e.ert(i);return e.hrt()[h].MX()}EX(t){const s=this.Lnt.Wht().$ht()[2];return t.nrt(s)}Cet(t){this.Lnt.Wht().$ht()[0]!==t&&(this.u0=t)}Sc(t,s,i,e,h,n,r){const o=this.Lnt.Bht().Yq();this.EX(o.EH())&&super.Sc(t,s,i,e,h,n,r)}xnt(t,s,i){const e=this.Lnt.Bht().Yq();if(this.EX(e.EH()))return super.xnt(t,s,i)}b5(){return Object.assign(super.b5(),{sid:this.u0})}v5(t){t&&(super.v5(t),this.u0=t.sid)}}bm.let.jht=vm}{const Mm=self._s;class Gm extends Mm.let.zht{constructor(t){super(t)}Met(){return this.Lnt.Wht().$ht()[1]}jnt(){const t=this.Lnt.Bht().iW().jz(),s=t.XV(),i=this.Aet(s).VL();return t.NX(i)?t.rrt(i):null}Aet(t){const s=this.Lnt.Wht().$ht()[0];return t.ort(s)}Sc(t,s,i,e,h,n,r){this.art()&&super.Sc(t,s,i,e,h,n,r)}xnt(t,s,i){if(this.art())return super.xnt(t,s,i)}art(){const t=this.Lnt.Bht().iW().jz(),s=t.XV(),i=this.Aet(s);if(!i)return;const e=i.VL();return t.NX(e)}}Mm.let.Vht=Gm}{const xm=self._s;class Tm extends xm.let.zht{constructor(t){super(t)}Met(){return this.Lnt.Wht().$ht()[0]}jnt(){return this.Lnt.Bht().Yq().MX()}Sc(t,s,i,e,h,n,r){const o=this.Lnt.Bht();o.EH().fV()===o.Yq().EH().fV()&&super.Sc(t,s,i,e,h,n,r)}xnt(t,s,i){const e=this.Lnt.Bht();if(e.EH().fV()===e.Yq().EH().fV())return super.xnt(t,s,i)}lrt(){const t=this.Lnt.Bht(),s=t.EH().fV();if(xm.MW.urt&&s instanceof xm.MW.urt&&("initial-frame"===this.Lnt.Oit()||"initial-animation"===this.Lnt.Oit()))switch(this.Lnt.g9()){case"relative":return{crt:(s,i,e,h,n)=>{if(i!==h){const e=h/i,n=t.eY("offsetWidth"),r=t.eY("offsetScaleX");if(n||r){const o=n?.ust()?.Bnt(),a=r?.ust()?.Bnt();if(s.BJ()&&s.JJ())a&&a.frt(h),s.hy(this.drt(h,i,s,t,o,a));else{const i=h*((s.mrt()?.prt()??this.grt(s,t))/this.grt(s,t));a&&a.frt(h);const n=o?.yrt()??0,r=a?.yrt()??0;s.hy(i+(n+r*e))}}else s.hy(s.My()*e)}if(e!==n){const i=n/e,h=t.eY("offsetHeight"),r=t.eY("offsetScaleY");if(h||r){const o=h?.ust()?.Bnt(),a=r?.ust()?.Bnt();if(s.BJ()&&s.qJ())a&&a.frt(n),s.ny(this.wrt(n,e,s,t,o,a));else{const e=n*((s.mrt()?.Srt()??this.brt(s,t))/this.brt(s,t));a&&a.frt(n);const h=o?.yrt()??0,r=a?.yrt()??0;s.ny(e+(h+r*i))}}else s.ny(s.xy()*i)}}};case"absolute":return null}}vrt(t,s,i,e=0){const h=s.uet().kit(t.Yq());if(!h)return e;const n=h.eY(i);if(!n)return e;const r=n.Wht().Fht();if(!r)return e;const o=r.Mrt();return o?o.Qht():e}grt(t,s){const i=s.uet().kit(t.Yq());if(i)return i.Bet();const e=t.Yq().MX();return e.Wet()?e.Bet():t.mrt().prt()}brt(t,s){const i=s.uet().kit(t.Yq());if(i)return i.Vet();const e=t.Yq().MX();return e.Wet()?e.Vet():t.mrt().Srt()}drt(t,s,i,e,h,n){const r=i.mrt().prt(),o=r/i._J().mrt().prt();let a=1;const l=n?.Grt()??0;if(0!==l){const t=r/this.grt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=r*(t/s);let c=h?.xrt()??0;c+=u-r;const f=(r+c)/(0===r?Number.EPSILON:r);return i._J().My()*o*a*f}wrt(t,s,i,e,h,n){const r=i.mrt().Srt(),o=r/i._J().mrt().Srt();let a=1;const l=n?.Trt()??0;if(0!==l){const t=r/this.brt(i,e);a=(t+l)/(0===t?Number.EPSILON:t)}const u=r*(t/s);let c=h?._rt()??0;c+=u-r;const f=(r+c)/(0===r?Number.EPSILON:r);return i._J().xy()*o*a*f}}xm.let.Hht=Tm}{const _m=self._s;class Im extends _m.let.zht{constructor(t){super(t),this.Irt=0,this.Crt=!1}Gnt(){return!1}I7(){const t=this.Lnt.aet();let s=this.Lnt.Wht();s=t.ont(s),this.Irt=s.x9()}dit(){}Qht(){return this.Crt||this.Lnt.Sc(0),this.Irt}Sc(t,s,i,e,h,n,r){this.Irt=_m.let.Unt.Sc(t,s,i,this.Lnt),this.Crt=!0}yht(){}Fnt(){}vnt(){return this.Irt}wht(){return!1}Sht(){return!1}b5(){return{value:this.Irt,init:this.Crt}}v5(t){t&&(this.Irt=t.value,this.Crt=!t.hasOwnProperty("init")||t.init)}}_m.let.Jht=Im}{const Cm=self._s;class Rm extends Cm.let.zht{constructor(t){super(t),this.Rrt=!1,this.Art=null,this.Prt=null,this.Ert=null,this.s9=this.Lnt.uet(),this.Iht=this.Lnt.Bht(),this.Frt=this.Lnt.Yht(),this.Drt=this.Frt[0],this.Ort=this.Frt[1],this.Frt[3]?this.krt=this.Frt[3]:this.krt=Math.random().toString(36).slice(2),this.Lrt=NaN,this.Nrt=NaN,this.Brt=NaN,this.Wrt=null,this.jrt()}Jh(){super.Jh(),this.Art=null,this.Prt=null,this.Ert=null,this.s9=null,this.Iht=null,this.Frt=null,this.Drt=null,this.Wrt=null}jrt(){if(!self._s.MW.Audio)return;const t=this.Lnt.AW().Vrt(self._s.MW.Audio);t&&(this.Art=t.lV().MX()),this.Prt=self._s.MW.Audio.Urt,this.Ert=self._s.MW.Audio.Hrt}zrt(){if(this.Wrt)return;const t=this.Lnt.Bht().eY("audioSource");t&&(this.Wrt=t.ust())}Jrt(){const t=this.Lnt.Bht().eY("volume");return t?t.ust().Nrt:this.Nrt}Iit(){super.Iit(),this.Rrt=!1,this.Art&&(this.Ert&&(this.Lrt=this.Ert.Xrt.call(this.Art,this.krt),this.Nrt=this.Ert.qrt.call(this.Art,this.krt)),this.Prt&&this.Prt.Tq.call(this.Art,this.krt))}Yrt(){return this.krt}$rt(){return this.Brt}Krt(t){this.Brt=t}I7(){super.I7(),this.Lrt=NaN,this.Rrt=!1}dit(){super.dit();const t=this.Lnt.uet().pO();switch(this.Lrt=t-this.Ort,this.Lnt.Oit()){case"audioSource":break;case"volume":this.Nrt=this.Lnt.xnt(t)}this.Rrt=!1}Sc(t,s,i,e,h,n,r){if(this.Art)switch(this.Lnt.Oit()){case"audioSource":{if(!this.s9.xst())return;if(e)return void(this.Prt&&this.Prt.Tq.call(this.Art,this.krt));if(t<this.Ort)return void(this.Rrt=!1);const s=this.Ert.Zrt.call(this.Art,this.krt),i=this.s9.kq();if(i!==s&&this.Prt.Oq.call(this.Art,this.krt,i),this.Rrt)return;if(!this.Lnt.uet().IsPlaying())return;if(this.Rrt=!0,isNaN(this.Lrt)){const s=self.performance.now(),i=t-this.Ort;if("suspended"===this.Art.Qrt())return void(this.Rrt=!1);const e=i+(self.performance.now()-s)/1e3;if(this.Prt){let t=this.$rt();isNaN(t)?(this.Krt(0),t=0):this.Krt(t),this.Prt.tot.call(this.Art,this.Drt,t,this.krt,e)}}else{const t=this.Lrt;this.Lrt=NaN;const s=this.Jrt();if(this.Nrt=NaN,"suspended"===this.Art.Qrt())return void(this.Rrt=!1);this.Prt&&(this.Krt(s),this.Prt.tot.call(this.Art,this.Drt,s,this.krt,t))}break}case"volume":this.zrt(),super.Sc(t,s,i,e,h,n,r)}}xnt(t,s,i){if(this.Art)switch(this.Lnt.Oit()){case"audioSource":return;case"volume":return this.zrt(),super.xnt(t,s,i)}}sot(t,s){return this.Wrt?this.Wrt.$rt():0}iot(t,s,i,e){this.Wrt&&this.Wrt.Krt(this.sot()+s),this.Prt&&this.Wrt&&this.Prt.Krt.call(this.Art,this.Wrt.Yrt(),this.Wrt.$rt())}eot(t,s,i){this.Wrt&&this.Wrt.Krt(s),this.Prt&&this.Wrt&&this.Prt.Krt.call(this.Art,this.Wrt.Yrt(),this.Wrt.$rt())}hot(){return!0}b5(){return{audioPlaybackStarted:this.Rrt,audioTag:this.krt,pauseTime:this.Lrt,pauseVolume:this.Nrt,volume:this.Brt}}v5(t){t&&(this.Rrt=t.audioPlaybackStarted,this.krt=t.audioTag,this.Lrt=t.pauseTime,this.Nrt=t.pauseVolume,this.Brt=t.volume,this.jrt())}}Cm.let.Xht=Rm}self._s.let.Znt=class{constructor(t){this.Aht=t,this.Lnt=t.eY(),this.qit=this.Lnt.Bht().iW(),this.not=this.Lnt.Oit(),this.rot=!1,this.oot=null,this.aot=null}Jh(){this.Aht=null,this.Lnt=null,this.qit=null,this.oot=null,this.aot=null}Gnt(){return!1}Iit(){}L7(){this.qit=null,this.oot=null,this.aot=null}ust(){return this.Aht}eY(){return this.Lnt}iW(){return this.qit||(this.qit=this.Lnt.Bht().iW()),this.qit}lot(t){this.rot=!!t}uot(){return this.rot}eit(){}I7(){}dit(){}$nt(){this.oot=this.vnt()}Fnt(){this.oot=null}vnt(){}wht(){}Sht(){}irt(t){return typeof this.cot()==typeof t}Vnt(){}qnt(t,s,i,e,h,n,r,o){}Ynt(){}fot(){return this.pot(()=>{const t=this.Lnt.Wht();return this.Lnt.aet().ont(t)},()=>{const t=this.Lnt.Wht();return this.Lnt.aet().Mrt(t)}).dot()}mot(){const t=this.Lnt.uet().pO()-this.Lnt.Bht().Sit();return this.pot(()=>{const s=this.Lnt.Wht();return this.Lnt.aet().mnt(t,s)},()=>{const s=this.Lnt.Wht(),i=this.Lnt.aet();return i.wnt(t,s)||i.Mrt(s)}).dot()}pot(t,s){return this.Lnt.uet().xst()?t():s()}got(t,s){return"relative"===this.Lnt.g9()?t():s()}yot(t,s){return this.uot()?(this.lot(!1),t()):s()}wot(t){}Sot(){return this.Aht.VL()}bot(){return this.aot||(this.aot=this.Aht.jnt()),this.aot}vot(t,s,i,e,h,n){switch(this.Lnt.vet()){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return n()}}b5(){return{firstAbsoluteUpdate:this.rot,saveState:this.oot}}v5(t){t&&(this.rot=t.firstAbsoluteUpdate,this.oot=t.saveState)}Mot(t,s=!1){const i=[];for(const e of t){const t=e.Bht().Sit();for(const h of e.fnt())s&&0===h.pO()?i.push({time:t+h.pO(),value:h.dot()}):s||i.push({time:t+h.pO(),value:h.dot()})}return i.sort((t,s)=>t.time-s.time)}Got(t,s,i){return this.xot(s,i)}xot(t,s){for(let i=s.length-1;i>=0;i--)if(s[i].time<=t)return s[i];return null}};{const Am=self._s,Pm=new Map,Em=[0,0,0];class Fm extends Am.let.Znt{constructor(t){super(t)}eit(){}I7(){}dit(){}vnt(){const t=this.Lnt.vet(),s=this.bot(),i=this.Sot();switch(t){case"behavior":case"plugin":return this.Tot(s._ot(i));case"effect":return this.Tot(s[i]);case"world-instance":return this.Tot(this.cot())}}wht(){const t=this.fot();return!this.Iot(t,this.cot())}Sht(){return!Am.ie(this.oot)&&!this.Iot(this.oot,this.cot())}Iot(t,s){return t=this.Cot(t),s=this.Cot(s),t.zo(s)}fot(){const t=super.fot();return this.Cot(t)}mot(){const t=super.mot();return this.Cot(t)}wot(t){}Tot(t){return Am.ke(t,Am.Go)?t.toArray().slice(0,3):t.slice(0,3)}Cot(t){return Am.ke(t,Am.Go)?t:new Am.Go(t[0],t[1],t[2],1)}irt(t){return!0}Gnt(){return!0}Vnt(){const t=this.Lnt.uet(),s=this.Lnt.Yq(),i=this.Lnt.ust(),e=t.lst(s,i,this.not,this.Lnt);if(e&&e.length>1){Pm.has(s)||Pm.set(s,new Map);const t=Pm.get(s),i=this.Lnt.vet();t.has(i)||t.set(i,new Map);const e=t.get(i);e.has(this.not)||e.set(this.not,{Rot:!1,color:new Am.Go(0,0,0,1)})}}Aot(t,s,i){const e=Pm.get(t).get(s).get(i);return e.Rot=!0,e.color}qnt(t,s,i,e,h,n,r,o){const a=this.Lnt.uet(),l=this.Lnt.Bht(),u=this.Lnt.Yq(),c=this.Lnt.ust(),f=this.Lnt.vet(),d=this.not,p=a.lst(u,c,d,this.Lnt);if(p&&p.length>1){const t=this.Mot(p,!0),i=this.Got(a,a.pO(),t);if(i){const t=l.Sit(),e=i.time-t;if(0===e)this.Aot(u,f,this.not).Ao(s[0],s[1],s[2]);else{if(e<0)return;const t=s[0],i=s[1],h=s[2],n=this.Lnt.Sc(e,!1,!0),r=Am.Go.Ma(t,n[0]),o=Am.Go.Ma(i,n[1]),a=Am.Go.Ma(h,n[2]);this.Aot(u,f,this.not).Ao(r,o,a)}}}else this.Pot(s[0],s[1],s[2])}Ynt(){const t=this.Lnt.Yq();if(!Pm.has(t))return;const s=Pm.get(t),i=this.Lnt.vet();if(!s.has(i))return;const e=s.get(i);if(!e.has(this.not))return;const h=e.get(this.not),n=h.Rot,r=h.color;n&&this.Pot(r.Lo(),r.No(),r.Bo()),0===e.size&&s.delete(i),0===s.size&&Pm.delete(t)}cot(){const t=this.Lnt.vet(),s=this.bot(),i=this.Sot();switch(t){case"behavior":case"plugin":return this.Cot(s._ot(i));case"effect":return s[i].clone();case"world-instance":return this.iW().fJ().clone()}}Pot(t,s,i){const e=this.Lnt.vet(),h=this.bot(),n=this.Sot();switch(e){case"behavior":case"plugin":Em[0]=t,Em[1]=s,Em[2]=i,h.Eot(n,Em);break;case"effect":h[n].Ro(t,s,i);break;case"world-instance":this.iW().Fot(t,s,i)}}b5(){}v5(t){}}Am.let.Znt.trt=Fm}{const Dm=self._s,Om=Dm.let;class km extends Dm.let.Znt{constructor(t){super(t)}eit(){}I7(){}dit(){}vnt(){return this.cot()}wht(){return this.fot()!==this.vnt()}Sht(){return!Dm.ie(this.oot)&&this.oot!==this.vnt()}Gnt(){return!1}qnt(t,s,i,e,h,n,r,o){const a=this.Lnt,l=a.Bht(),u=a.vet(),c=a.uet(),f=l.Yq(),d=a.ust(),p=this.not,m=c.lst(f,d,p,a);if(m&&m.length>1){const i=this.Mot(m),e=t+l.Sit(),h=this.Got(c,e,i);h&&(s=h.value)}switch(a.rnt()){case"numeric":if(!Om.Unt.Dot(this.Sot(),this.bot(),s,u))return;break;case"angle":if(!Om.Hnt.Dot(this.Sot(),this.bot(),s,u))return;break;case"boolean":if(!Om.znt.Dot(this.Sot(),this.bot(),s,u))return;break;case"color":if(!Om.Jnt.Dot(this.Sot(),this.bot(),s,u))return;break;case"text":if(!Om.Xnt.Dot(this.Sot(),this.bot(),s,u))return}this.Pot(s)}cot(){const t=this.Lnt.vet(),s=this.bot(),i=this.Sot();switch(t){case"behavior":case"plugin":return s._ot(i);case"effect":return s[i];case"instance-variable":return s.Oot(i)}}Pot(t){const s=this.Lnt.vet(),i=this.bot(),e=this.Sot();switch(s){case"behavior":case"plugin":i.Eot(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.kot(e,t)}}}Dm.let.Znt.Knt=km}{const Lm=self._s,Nm=(Lm.let.Znt,new Map),Bm=(t,s,i,e,h,n=!1,r=null,o=null)=>{Nm.set(t,{Lot:s,Not:i,Bot:e,round:h,Wot:n,init:r,reset:o})},Wm=(t,s,i,e=0)=>{const h=s.uet().kit(t.Yq());if(!h)return e;const n=h.eY(i);if(!n)return e;const r=n.Wht().Fht();if(!r)return e;const o=r.Mrt();return o?o.Qht():e},jm=t=>{const s=[];let i=t._J();for(;i;)s.push(i),i=i._J();return s.reverse(),s};Bm("offsetX",(t,s,i,e)=>{"relative"===e.Lnt.g9()?t.jot(s,i.uet().vst()):t.jot(s)},(t,s)=>t.oG(s),t=>t.rG(),!0),Bm("offsetY",(t,s,i,e)=>{"relative"===e.Lnt.g9()?t.Vot(s,i.uet().vst()):t.Vot(s)},(t,s)=>t.uG(s),t=>t.lG(),!0),Bm("offsetWidth",(t,s,i,e,h=!1,n=!0)=>{if(0===s)return;const r="relative"===e.Lnt.g9(),o=1===e.Uot.oI();if((r||o)&&t.BJ()&&t.JJ()){if(isNaN(e.Hot)){const s=jm(t);let i;i=o?s[s.length-1].My():s[s.length-1].mrt().prt(),e.Hot=0===i?Number.EPSILON:i}if(h)return;e.zot+=s;const i=s/e.Hot;t.Ly(i,n),e.Jot+=i}else t.Ly(s),e.Jot+=s},(t,s)=>t.hy(s),t=>t.My(),!0,!1,null,t=>{t.Jot=0,t.zot=0}),Bm("offsetHeight",(t,s,i,e,h=!1,n=!0)=>{if(0===s)return;const r="relative"===e.Lnt.g9(),o=1===e.Uot.oI();if((r||o)&&t.BJ()&&t.qJ()){if(isNaN(e.Hot)){const s=jm(t);let i;i=o?s[s.length-1].xy():s[s.length-1].mrt().Srt(),e.Hot=0===i?Number.EPSILON:i}if(h)return;e.Xot+=s;const i=s/e.Hot;t.qot(i,n),e.Jot+=i}else t.qot(s),e.Jot+=s},(t,s)=>t.ny(s),t=>t.xy(),!0,!1,null,t=>{t.Jot=0,t.Xot=0}),Bm("offsetAngle",(t,s,i,e,h)=>{t.Yot(s)},(t,s)=>t.QV(s),t=>t.tU(),!1,!0),Bm("offsetOpacity",(t,s,i,e,h)=>{s/=e.$ot?e.$ot:1;const n=t.NF()+s;if(0===e.Kot)n>1?e.Kot+=n-1:n<0&&(e.Kot+=n),t.Zot(s);else{const i=t.NF()+s;s>0&&e.Kot>0?i>1&&(e.Kot+=i-1):s>0&&e.Kot<0?(e.Kot+=s,e.Kot>0&&(t.Zot(e.Kot),e.Kot=0)):s<0&&e.Kot>0?(e.Kot+=s,e.Kot<0&&(t.Zot(e.Kot),e.Kot=0)):s<0&&e.Kot<0&&i<0&&(e.Kot+=i)}},(t,s)=>{t.WF(s)},t=>t.NF(),!1,!0,(t,s,i)=>{switch(t.Kot=0,t.Lnt.g9()){case"relative":{t.Lnt.aet();const s=t.Lnt.Wht().Fht().Eht();let i=t.iW().NF(),e=i;for(const h of s){const s=h.pO();e=i+t.Lnt.xnt(s),e=Lm.Kh(e,0,1)}t.Qot=i-e,t.Qot=Math.round(100*(t.Qot+Number.EPSILON))/100,e=i;for(let i=s.length-1;i>=0;i--){const h=s[i].pO();e-=t.Lnt.xnt(h),e=Lm.Kh(e,0,1)}t.tat=e,t.tat=Math.round(100*(t.tat+Number.EPSILON))/100;break}}const e="relative"===t.Lnt.g9(),h=1===t.Uot.oI();if((e||h)&&s.BJ()&&s.tX()){const e=jm(s);let h=e[0].mrt().sat();h+=Wm(e[0],i,"offsetOpacity");for(let t=1;t<e.length;t++)h+=Wm(e[t],i,"offsetOpacity");t.$ot=0===h?1:h}},t=>{switch(t.Lnt.g9()){case"relative":{t.Kot=0;const s=t.iW();let i=s.NF();i=Math.round(100*(i+Number.EPSILON))/100,t.Lnt.uet().xst()?(s.WF(i+t.Qot),t.KI=0):(s.WF(i-t.tat),t.KI=t.ust().knt());break}}}),Bm("offsetOriginX",(t,s)=>t.iat(s),(t,s)=>t.$z(s),t=>t.Yz(),!1),Bm("offsetOriginY",(t,s)=>t.eat(s),(t,s)=>t.Qz(s),t=>t.Zz(),!1),Bm("offsetZElevation",(t,s)=>t.hat(s),(t,s)=>t.fG(s),t=>t.cG(),!0),Bm("offsetScaleX",(t,s,i,e)=>{if(0===s)return;const h=t.My()<0?-1:1;if(e.nat+=s,"relative"===e.Lnt.g9()&&t.BJ()&&t.JJ()){const n=Wm(t,i,"offsetWidth"),r=isNaN(e.rat)?i.Bet():e.rat,o=(r+n/(t.mrt().prt()/r))*h*s;isNaN(e.Hot)&&Nm.get("offsetWidth").Lot(t,1,i,e,!0);const a=o/e.Hot;t.Ly(a,!0),e.Jot+=a}else{const n=(isNaN(e.rat)?i.Bet():e.rat)*h*s;t.Ly(n),e.Jot+=n}},(t,s,i)=>{t.hy(i.Bet()*s)},(t,s)=>{const i=t.My()<0?-1:1;if(t.JJ()){const e=t._J(),h=s.uet().kit(e.Yq());let n=NaN;if(h)n=e.My()/h.Bet();else{const t=e.Yq().MX();n=t.Wet()?e.My()/t.Bet():1}return t.My()*i/(s.Bet()*n)}return t.My()*i/s.Bet()},!1,!1,null,t=>{t.Jot=0,t.rat=NaN,t.nat=0}),Bm("offsetScaleY",(t,s,i,e)=>{if(0===s)return;const h=t.xy()<0?-1:1;if(e.oat+=s,"relative"===e.Lnt.g9()&&t.BJ()&&t.qJ()){const n=Wm(t,i,"offsetHeight"),r=isNaN(e.rat)?i.Vet():e.rat,o=(r+n/(t.mrt().Srt()/r))*h*s;isNaN(e.Hot)&&Nm.get("offsetHeight").Lot(t,1,i,e,!0);const a=o/e.Hot;t.qot(a,!0),e.Jot+=a}else{const n=(isNaN(e.rat)?i.Vet():e.rat)*h*s;t.qot(n),e.Jot+=n}},(t,s,i)=>{t.ny(i.Vet()*s)},(t,s)=>{const i=t.xy()<0?-1:1;if(t.qJ()){const e=t._J(),h=s.uet().kit(e.Yq());let n=NaN;if(h)n=e.xy()/h.Vet();else{const t=e.Yq().MX();n=t.Wet()?e.xy()/t.Vet():1}return t.xy()*i/(s.Vet()*n)}return t.xy()*i/s.Vet()},!1,!1,null,t=>{t.Jot=0,t.rat=NaN,t.oat=0});class Vm extends Lm.let.Znt{constructor(t){super(t),this.KI=0,this.Kot=0,this.Qot=0,this.tat=0,this.$ot=NaN,this.Hot=NaN,this.Jot=0,this.rat=NaN,this.zot=0,this.nat=0,this.Xot=0,this.oat=0,this.aat=void 0,this.lat=void 0,this.uat=null,this.cat=null,this.fat=null,this.dat=null,this.pat=null,this.mat=null,this.gat=null,this.yat=null,this.wat=!1,this.Sat=!1,Lm.ke(this.Lnt.uet(),Lm.bat)?this.Uot=new Lm.let.Znt.vat(this):this.Uot=new Lm.let.Znt.Mat(this);const s=this.Lnt.Oit();switch(this.Lnt.vet()){case"world-instance":{const t=Nm.get(s);this.uat=t.Bot,this.cat=t.Lot,this.fat=t.Not,this.wat=t.round,this.Sat=t.Wot,this.pat=t.init,this.dat=t.reset;break}case"audio":this.mat=t.sot,this.gat=t.iot,this.yat=t.eot,this.wat=!!t.hot(),this.Sat=!1}}Jh(){this.Uot=null,this.uat=null,this.cat=null,this.fat=null,this.dat=null,this.pat=null,this.mat=null,this.gat=null,this.yat=null,super.Jh()}Gnt(){return this.Uot.Gnt()}Gat(){return this.KI}xat(t){this.KI=t}eit(){this.dat&&this.dat(this)}I7(){const t=this.Uot.I7();if("number"==typeof t&&(this.KI=t),this.pat){const t=this.iW(),s=this.Lnt.Bht();this.pat(this,t,s)}}dit(){const t=this.Uot.dit();"number"==typeof t&&(this.KI=t)}vnt(){return this.cot()}wht(){return this.fot()!==this.vnt()}Sht(){return!Lm.ie(this.oot)&&this.oot!==this.vnt()}Vnt(){this.Uot.Vnt()}qnt(t,s,i,e,h,n,r,o){return this.Uot.qnt(t,s,i,e,h,n,r,o)}Ynt(){this.Uot.Ynt()}cot(){const t=this.bot(),s=this.Sot(),i=this.iW(),e=this.Lnt.Bht();switch(this.Lnt.vet()){case"behavior":case"plugin":return t._ot(s);case"effect":return t[s];case"instance-variable":return t.Oot(s);case"world-instance":return this.uat(i,e);case"audio":return this.mat.call(this.ust(),i,e)}}Pot(t,s,i,e=!0){const h=this.bot(),n=this.Sot(),r=this.iW(),o=this.Lnt.Bht();switch(this.Lnt.vet()){case"behavior":h.Tat(n,t);break;case"effect":h[n]+=t;break;case"instance-variable":h._at(n,t);break;case"plugin":h.Tat(n,t,this.ust().lrt());break;case"world-instance":this.cat(r,t,o,this,!1,e);break;case"audio":this.gat.call(this.ust(),r,t,o,this)}}Iat(t,s,i){let e=this.Lnt.gst();if(e="default"===e?"continuous":e,"discrete"===e&&!s)return;if("discrete"===e&&i){const t=this.Lnt.uet().pO();if(!this.Lnt.pnt(t))return}const h=this.bot(),n=this.Sot(),r=this.iW(),o=this.Lnt.Bht();switch(this.Lnt.vet()){case"behavior":h.Eot(n,t);break;case"effect":h[n]=t;break;case"instance-variable":h.kot(n,t);break;case"plugin":h.Eot(n,t,this.ust().lrt());break;case"world-instance":this.fat(r,t,o);break;case"audio":this.yat.call(this.ust(),r,t,o)}}Cat(t,s,i,e,h,n,r,o){this.Uot.Cat(t,s,i,e,h,n,r,o)}Rat(t,s,i,e,h){"angle"===this.Lnt.ent()&&(t=Lm.tn(t));const n=(t.toString().split(".")[1]||"").length,r=this.cot();let o;switch(o=0===n?this.wat?Math.round(r):this.Sat?"angle"===this.Lnt.ent()?Lm.Qh(Math.round(Lm.tn(r))):Number(Lm.toFixed(r,2)):r:this.wat?Number(Lm.toFixed(r,n)):(this.Sat,r),this.Pot(o-r,s,i,!1),this.Lnt.Oit()){case"offsetWidth":case"offsetScaleX":{const t=this.iW(),s=t.My(),i=Number(Lm.toFixed(s,2));t.Ly(i-s);break}case"offsetHeight":case"offsetScaleY":{const t=this.iW(),s=t.xy(),i=Number(Lm.toFixed(s,2));t.qot(i-s);break}}}b5(){return Object.assign(super.b5(),{v:this.KI,a:this.Kot,fod:this.Qot,bod:this.tat,of:this.$ot,sf:this.Hot,armorf:this.aat,armandf:this.lat,ca:this.Jot,os:this.rat,awo:this.zot,aho:this.Xot,asxo:this.nat,asyo:this.oat})}v5(t){t&&(super.v5(t),this.KI=t.v,this.Kot=t.a,this.Qot=Lm.Qi(t.fod)?t.fod:0,this.tat=Lm.Qi(t.bod)?t.bod:0,this.$ot=Lm.Qi(t.of)?t.of:NaN,this.Hot=Lm.Qi(t.sf)?t.sf:NaN,this.aat=Lm.Qi(t.armorf)?t.armorf:void 0,this.lat=Lm.Qi(t.armandf)?t.armandf:void 0,this.Jot=Lm.Qi(t.ca)?t.ca:0,this.rat=Lm.Qi(t.os)?t.os:NaN,this.zot=Lm.Qi(t.awo)?t.awo:0,this.Xot=Lm.Qi(t.aho)?t.aho:0,this.nat=Lm.Qi(t.asxo)?t.asxo:0,this.oat=Lm.Qi(t.asyo)?t.asyo:0)}frt(t){this.rat=t}yrt(){return this.Jot}xrt(){return this.zot}_rt(){return this.Xot}Grt(){return this.nat}Trt(){return this.oat}}Lm.let.Znt.Qnt=Vm}{const Um=self._s;class Hm{constructor(t){this.Aat=!1,this.Irt=0,this.Pat=!1,this.Eat=!1,this.eet=t;for(let t=0,s=this.eet.length;t<s;t++)this.eet[t].Lht(this)}Dit(){return this.eet}Fat(){this.Aat=!0}Dat(){return this.Aat}Ont(t){this.Irt=t}Qht(){return this.Irt}Oat(t){this.Pat=t}kat(){return this.Pat}yit(t){this.Eat=t}Lat(){return this.Eat}Bf(){this.Aat=!1,this.Irt=0,this.Pat=!1,this.Eat=!1}}class zm{constructor(t){this.Nat=t}Jh(){this.Nat=null}oI(){return 0}I7(){const t=this.Nat;return this.Nat.eY(),t.got(()=>t.pot(()=>0,()=>t.ust().knt()),()=>{})}dit(){}Gnt(){switch(this.Nat,this.Nat.eY().g9()){case"relative":return!1;case"absolute":return!0}}Vnt(){this.Nat;const t=this.Nat.eY(),s=t.Oit();switch(t.g9()){case"relative":break;case"absolute":if(t.kht())t.Nht().Bf();else{const i=t.uet(),e=t.Yq(),h=t.ust(),n=i.lst(e,h,s,t);n&&n.length>1&&new Hm(n)}}}qnt(t,s,i,e,h,n,r,o){const a=this.Nat,l=this.Nat.eY();switch(l.g9()){case"relative":{const r=a.Gat();a.Pot(s-r,i,e),n&&this.Cat(t,i,e,h,r,s),a.xat(s);break}case"absolute":{const t=l.uet(),i=l.Bht();if(l.Yq(),l.ust(),l.kht()){const e=l.Nht(),h=e.Dit(),n=a.Mot(h,!0),u=a.Got(t,t.pO(),n);if(u){const t=i.Sit(),h=u.time-t;if(0===h)e.yit(r),e.Oat(o),e.Fat(),e.Ont(e.Qht()+s);else{if(h<0)return;const t=l.xnt(h);e.yit(r),e.Oat(o),e.Fat(),e.Ont(e.Qht()+(s-t))}}}else a.Iat(s,o,r);break}}}Ynt(){const t=this.Nat,s=this.Nat.eY();switch(s.g9()){case"relative":break;case"absolute":if(s.kht()){const i=s.Nht();i.Dat()&&t.Iat(i.Qht(),i.kat(),i.Lat())}}}Cat(t,s,i,e,h,n){const r=this.Nat;e||(s&&t===s.pO()?r.Rat(s.x9(),s,i):i&&t===i.pO()?r.Rat(i.x9(),s,i):n-h===0&&r.Rat(s.x9(),s,i))}}Um.let.Znt.Mat=zm}{const Jm=self._s;class Xm{constructor(t){this.Nat=t}Jh(){this.Nat=null}oI(){return 1}I7(){const t=this.Nat;return t.lot(!0),this.wot(t.fot())}dit(){const t=this.Nat;if(t.fot()!==t.mot())return t.lot(!0),this.wot(t.mot())}Gnt(){return!1}Vnt(){}qnt(t,s,i,e,h,n,r,o){const a=this.Nat,l=a.Gat();switch(a.eY().g9()){case"relative":a.Pot(s-l,i,e),n&&this.Cat(t,i,e,h,l,s,!1,r);break;case"absolute":a.uot()?(a.lot(!1),a.Pot(l,i,e)):0===t&&0===a.eY().uet().Aq()?a.Iat(s,!0,!1):(a.Pot(s-l,i,e),n&&this.Cat(t,i,e,h,l,s,this.Bat(),r))}a.xat(s)}Ynt(){}wot(t){return t-this.Nat.vnt()}Bat(){const t=this.Nat,s=t.iW().Yq(),i=t.eY().AW().ast();let e=0;for(const t of i.i7())0===t.oI()?t.o7(s)&&e++:1===t.oI()&&t.Yq()===s&&e++;return e<=1}Cat(t,s,i,e,h,n,r,o){const a=this.Nat;e?s&&t===s.pO()?a.Rat(s.x9(),s,i,r,o):i&&t===i.pO()?a.Rat(i.x9(),s,i,r,o):i||a.Rat(s.x9(),s,i,r,o):s&&t===s.pO()?a.Rat(s.x9(),s,i,r,o):i&&t===i.pO()?a.Rat(i.x9(),s,i,r,o):n-h===0&&a.Rat(s.x9(),s,i,r,o)}}Jm.let.Znt.vat=Xm}{const qm=self._s,Ym=self.Vu;qm.let.Unt=class{constructor(){}static Dot(t,s,i,e){let h;switch(e){case"behavior":case"plugin":h=s._ot(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Oot(t)}return h!==i}static Sc(t,s,i,e){if(!i){let t=e.Wht();return t=e.aet().Mrt(t),t.x9()}let h=e.gst();if("default"===h&&(h="continuous"),"combo"===e.ent()&&(h="discrete"),"discrete"===h)return s.x9();if("continuous"===h||"step"===h){const n=e.uet().pst();if("step"===h&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const r=s.x9(),o=i.x9(),a=s.M9("cubic-bezier"),l=i.M9("cubic-bezier"),u=a&&a.Wat()&&l&&l.jat();if(!u&&r===o)return r;const c=s.pO(),f=i.pO();"step"===h&&0!==n&&(t=qm.Kh(t,c,f));const d=qm.normalize(t,c,f),p=s.Dnt();let m;if(u){const t=f-c;m=Ym.nc(p)(t*d,0,1,t),m=Ym.nc("cubicbezier")(m,r,r+a.I9(),o+l.A9(),o)}else m=Ym.nc(p)((f-c)*d,r,o-r,f-c);return"integer"===e.ent()?Math.floor(m):m}}}}{const $m=self._s;$m.let.Hnt=class{constructor(){}static Dot(t,s,i,e){let h;switch(e){case"behavior":case"plugin":h=s._ot(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Oot(t)}return h!==i}static Sc(t,s,i,e){if(!i){let t=e.Wht();return t=e.aet().Mrt(t),t.x9()}let h=e.gst();if("default"===h&&(h="continuous"),"combo"===e.ent()&&(h="discrete"),"discrete"===h)return s.x9();if("continuous"===h||"step"===h){const n=e.uet().pst();if("step"===h&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const r=s.pO(),o=i.pO(),a=s.x9(),l=i.x9();"step"===h&&0!==n&&(t=$m.Kh(t,r,o));const u=s.M9("angle");if(!u){if(a===l)return a;const i=$m.normalize(t,r,o),e=self.Vu.nc(s.Dnt());return $m.cn(a,l,e(i,0,1,1))}{const i=u.Vat();if(a===l&&0===i)return a;const e=$m.normalize(t,r,o),h=self.Vu.nc(s.Dnt())(e,0,1,1);switch(u.Uat()){case"closest":return $m.cn(a,l,h,i);case"clockwise":return $m.fn(a,l,h,i);case"anti-clockwise":return $m.dn(a,l,h,i)}}}}}}self._s.let.znt=class{constructor(){}static Dot(t,s,i,e){let h;switch(e){case"behavior":case"plugin":h=s._ot(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Oot(t)}return!!h!=!!i}static Sc(t,s,i,e){if(!i){let t=e.Wht();return t=e.aet().Mrt(t),t.x9()?1:0}return s.x9()?1:0}};{const Km=self._s,Zm=[0,0,0],Qm=[0,0,0],tg=[0,0,0];Km.let.Jnt=class{constructor(){}static Dot(t,s,i,e){let h;switch(e){case"behavior":case"plugin":h=s._ot(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Oot(t)}return Array.isArray(i)?(Zm[0]=i[0],Zm[1]=i[1],Zm[2]=i[2]):(tg.ra(i),Zm[0]=Math.floor(255*tg.Lo()),Zm[1]=Math.floor(255*tg.No()),Zm[2]=Math.floor(255*tg.Bo())),Array.isArray(h)?(Qm[0]=h[0],Qm[1]=h[1],Qm[2]=h[2]):(tg.ra(h),Qm[0]=Math.floor(255*tg.Lo()),Qm[1]=Math.floor(255*tg.No()),Qm[2]=Math.floor(255*tg.Bo())),Zm[0]!==Qm[0]||Zm[1]!==Qm[1]||Zm[2]!==Qm[2]}static Sc(t,s,i,e){if(!i){let t=e.Wht();t=e.aet().Mrt(t);const s=t.x9();return Zm[0]=s[0],Zm[1]=s[1],Zm[2]=s[2],Zm}let h=e.gst();if("default"===h&&(h="continuous"),"discrete"===h){const t=s.x9();return Zm[0]=t[0],Zm[1]=t[1],Zm[2]=t[2],Zm}if("continuous"===h||"step"===h){const n=e.uet().pst();if("step"===h&&0!==n){const s=1/n;t=Math.floor(t*s)/s}const r=s.pO(),o=i.pO(),a=s.x9(),l=i.x9();"step"===h&&0!==n&&(t=Km.Kh(t,r,o));const u=Km.normalize(t,r,o),c=s.Dnt(),f=a[0],d=a[1],p=a[2],m=l[0],g=l[1],y=l[2],w=self.Vu.nc(c),S=o-r,b=S*u;return Zm[0]=f===m?f:w(b,f,m-f,S),Zm[1]=d===g?d:w(b,d,g-d,S),Zm[2]=p===y?p:w(b,p,y-p,S),Zm}}}}self._s.let.Xnt=class{constructor(){}static Dot(t,s,i,e){let h;switch(e){case"behavior":case"plugin":h=s._ot(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.Oot(t)}return h!==i}static Sc(t,s,i,e){if(!i){let t=e.Wht();return t=e.aet().Mrt(t),t.x9()}return s.x9()}};{const sg=self._s;sg.n8=class{constructor(){this.Hat=new Map}Jh(){for(const t of this.Hat.values())t.Jh();this.Hat.clear(),this.Hat=null}Bu(t){const s=new sg.zat(t),i=s.Rc();this.Hat.set(i,s)}zs(t){return this.Hat.get(t)}sst(){return 0}static Jat(t,s,i,e){if(s)for(const h of s)sg.n8.Xat("create",h,t,i,e)}static qat(t,s,i,e){if(s)for(const h of s)sg.n8.Xat("create-including-disabled",h,t,i,e)}static Yat(t,s,i,e){t.length?s.forEach((s,i)=>{t[i].v5(s)}):s.forEach(s=>{sg.n8.Xat("load",s,t,i,e)})}static Xat(t,s,i,e,h){let n;if("function"==typeof e)switch(t){case"load":n=new e(null,h);break;case"create":case"create-including-disabled":n=new e(s,h)}else if("object"==typeof e){const i=s[e.$at],r=e.map.get(i);switch(t){case"load":n=new r(null,h);break;case"create":case"create-including-disabled":n=new r(s,h)}}switch(t){case"load":n.v5(s),i.push(n);break;case"create":if("function"==typeof n.Oet&&!n.Oet())return n.Jh();i.push(n);break;case"create-including-disabled":i.push(n)}}}}{const ig=self._s;ig.zat=class{constructor(t){this.Yh="",this.git=NaN,this.Kat=0,this.Zat="default",this.Qat="default",this.tlt=!1,this.slt=!1,this.ilt=1,this.Hit=null,this.elt="",this.hlt=!1,this.nlt=!0,t&&(this.Yh=t[0],this.git=t[1],this.Kat=t[2],this.Zat=t[3],this.Qat=t[4],this.tlt=!!t[6],this.slt=!!t[7],this.ilt=t[8],this.elt=t[9],this.hlt=!!t[10],this.nlt=!!t[11],this.Hit=new ig.rlt(t[5],this))}Jh(){this.Hit.Jh(),this.Hit=null}rst(){return this.Hit||(this.Hit=new ig.rlt(null,this)),this.Hit}Rc(){return this.Yh}R$(t){this.Yh=t}Aq(){return this.git}Rq(t){this.git=t}pst(){return this.Kat}mst(t){this.Kat=t}gst(){return this.Zat}yst(t){this.Zat=t}g9(){return this.Qat}wst(t){this.Qat=t}Eq(){return this.tlt}Pq(t){this.tlt=t}Dq(){return this.slt}Fq(t){this.slt=t}qX(){return this.ilt}bst(t){this.ilt=t}N7(){return this.elt}vst(){return this.hlt}Mst(){return this.nlt}b5(){return{trackDataJson:this.Hit.b5(),name:this.Yh,totalTime:this.git,step:this.Kat,interpolationMode:this.Zat,resultMode:this.Qat,loop:this.tlt,pingPong:this.slt,repeatCount:this.ilt,startOnLayout:this.elt,transformWithSceneGraph:!!this.hlt,useSystemTimescale:this.nlt}}v5(t){t&&(this.rst().v5(t.trackDataJson),this.Yh=t.name,this.git=t.totalTime,this.Kat=t.step,this.Zat=t.interpolationMode,this.Qat=t.resultMode,this.tlt=t.loop,this.slt=t.pingPong,this.ilt=t.repeatCount,this.elt=t.startOnLayout,this.hlt=!!t.transformWithSceneGraph,this.nlt=!!t.useSystemTimescale)}}}{const eg=self._s;class hg{constructor(t,s){this.Hit=s,this.olt=null,this.llt=null,this.zit=NaN,this.Jit=NaN,this.Zat="default",this.Qat="default",this.fu=!1,this.ult=null,this.Rht=null,this.Wc="",this.clt=null,this.flt=0,this.dlt=this.Hit.dst().Aq(),this.Jc=0,this.Yh="",t&&(t[0]&&(this.olt=t[0],this.zit=t[0][2],this.Jit=t[0][1]),this.Zat=t[1],this.Qat=t[2],this.fu=!!t[3],t[6]&&(this.Wc=t[6]),t[7]&&(this.clt=t[7],this.flt=t[7][0],this.dlt=t[7][1]),t[8]&&(this.llt=t[8]),t[8]&&(this.llt=t[8]),t[9]&&(this.Jc=t[9]),t[10]&&(this.Yh=t[10]),this.ult=new eg.plt(t[4],this),this.Rht=new eg.mlt(t[5],this))}Jh(){this.olt=null,this.Hit=null,this.ult&&(this.ult.Jh(),this.ult=null),this.Rht&&(this.Rht.Jh(),this.Rht=null),this.clt=null}rst(){return this.Hit}vit(){return this.ult||(this.ult=new eg.plt(null,this)),this.ult}aet(){return this.Rht||(this.Rht=new eg.mlt(null,this)),this.Rht}glt(){return this.olt}pet(){return this.Jit}Let(t){this.Jit=t}det(){return this.zit}Eet(t){this.zit=t}gst(){return this.Zat}yst(t){this.Zat=t}g9(){return this.Qat}wst(t){this.Qat=t}Oet(){return this.fu}ket(t){this.fu=!!t}sY(){return this.Wc}Sit(){return this.flt}Fet(){return this.dlt}Det(t){this.dlt=t}Bet(){return this.llt[0]}Net(t){this.llt||(this.llt=[]),this.llt[0]=t}Vet(){return this.llt||(this.llt=[]),this.llt[1]}jet(t){this.llt||(this.llt=[]),this.llt[1]=t}oI(){return this.Jc}Rc(){return this.Yh}b5(){return{keyframeDataJson:this.ult.b5(),propertyTrackDataJson:this.Rht.b5(),instanceData:this.olt,additionalInstanceData:this.llt,instanceUid:this.zit,objectClassIndex:this.Jit,interpolationMode:this.Zat,resultMode:this.Qat,enabled:this.fu,id:this.Wc,nestedData:this.clt,type:this.Jc,name:this.Yh}}v5(t){t&&(this.olt=t.instanceData,this.zit=t.instanceUid,this.Jit=t.objectClassIndex,this.Zat=t.interpolationMode,this.Qat=t.resultMode,this.fu=t.enabled,this.Wc=t.id,this.Jc=t.type?t.type:0,this.Yh=t.name?t.name:"",this.dlt=this.Hit.dst().Aq(),t.nestedData&&(this.clt=t.nestedData,this.flt=this.clt[0],this.dlt=this.clt[1]),t.additionalInstanceData&&(this.llt=t.additionalInstanceData),this.vit().v5(t.keyframeDataJson),this.aet().v5(t.propertyTrackDataJson))}}eg.rlt=class{constructor(t,s){this.Gtt=s,this.ylt=[],eg.n8.Jat(this.ylt,t,hg,this)}Jh(){this.Gtt=null;for(const t of this.ylt)t.Jh();eg.Sr(this.ylt),this.ylt=null}dst(){return this.Gtt}_it(){const t=new hg(null,this);return this.ylt.push(t),t}wlt(t){return t.vit().iet()[0]}Slt(t){return t.vit().iet().at(-1)}rht(t,s){const i=s.vit().iet(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.pO()===t)return e}}blt(t,s){const i=s.vit().iet(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.pO()>t)return e}}nht(t,s){const i=s.vit().iet(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.pO()>=t)return e}}eht(t,s){const i=s.vit().iet();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.pO()<=t)return e}}*nst(){for(const t of this.ylt)yield t}b5(){return{trackDataItemsJson:this.ylt.map(t=>t.b5())}}v5(t){t&&eg.n8.Yat(this.ylt,t.trackDataItemsJson,hg,this)}}}{const ng=self._s;class rg{constructor(t,s){this.Rht=s,this.vlt="",this.Mlt=null,this.not=null,this.Jc=null,this.Glt=NaN,this.xlt=NaN,this.Zat="default",this.Qat="default",this.fu=!1,this.Tlt=null,this._lt=!0,t&&(this.vlt=t[0][0],this.Mlt=t[0].slice(1),this.not=t[1],this.Jc=t[2],this.Glt=t[3],this.xlt=t[4],this.Zat=t[5],this.Qat=t[6],this.fu=!!t[7],this.Tlt=new ng.Ilt(t[8],this),this._lt=t[9])}Jh(){this.Tlt.Jh(),this.Tlt=null,this.Rht=null,this.Mlt=null}aet(){return this.Rht}Fht(){return this.Tlt||(this.Tlt=new ng.Ilt(null,this)),this.Tlt}vet(){return this.vlt}qht(t){this.vlt=t}$ht(){return this.Mlt}Zht(t){this.Mlt=t}tnt(){return this.not}int(t){this.not=t}oI(){return this.Jc}nnt(t){this.Jc=t}ant(){return this.Glt}lnt(t){this.Glt=t}unt(){return this.xlt}cnt(t){this.xlt=t}gst(){return this.Zat}yst(t){this.Zat=t}g9(){return this.Qat}wst(t){this.Qat=t}Oet(){return this.fu}ket(t){this.fu=!!t}dnt(){return!!this._lt}b5(){return{propertyKeyframeDataJson:this.Tlt.b5(),sourceAdapterId:this.vlt,sourceAdapterArguments:this.Mlt,property:this.not,type:this.Jc,min:this.Glt,max:this.xlt,interpolationMode:this.Zat,resultMode:this.Qat,enabled:this.fu,canHavePropertyKeyframes:this._lt}}v5(t){t&&(this.vlt=t.sourceAdapterId,this.Mlt=t.sourceAdapterArguments,this.not=t.property,this.Jc=t.type,this.Glt=t.min,this.xlt=t.max,this.Zat=t.interpolationMode,this.Qat=t.resultMode,this.fu=t.enabled,this._lt=t.canHavePropertyKeyframes,this.Fht().v5(t.propertyKeyframeDataJson))}}ng.mlt=class{constructor(t,s){this.Uit=s,this.Clt=[],ng.n8.Jat(this.Clt,t,rg,this)}Jh(){this.Uit=null;for(const t of this.Clt)t.Jh();ng.Sr(this.Clt),this.Clt=null}bit(){return this.Uit}dht(){const t=new rg(null,this);return this.Clt.push(t),t}ont(t){return t.Fht().Eht()[0]}Mrt(t){return t.Fht().Eht().at(-1)}pnt(t,s){const i=s.Fht().Eht(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.pO()===t)return e}}ynt(t,s){const i=s.Fht().Eht(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.pO()>t)return e}}wnt(t,s){const i=s.Fht().Eht(),e=i.length;for(let s=0;s<e;s++){const e=i[s];if(e.pO()>=t)return e}}mnt(t,s){const i=s.Fht().Eht();for(let s=i.length-1;s>=0;s--){const e=i[s];if(e.pO()<=t)return e}}*oet(){for(const t of this.Clt)yield t}b5(){return{propertyTrackDataItemsJson:this.Clt.map(t=>t.b5())}}v5(t){t&&ng.n8.Yat(this.Clt,t.propertyTrackDataItemsJson,rg,this)}}}{const og=self._s;class ag{constructor(t,s){if(this.ult=s,this.ck=-1,this.Rlt="noease",this.Alt=!1,this.Ytt=null,this.Plt=null,!t)return;this.ck=t[0],this.Rlt=t[1],this.Alt=!!t[2];const i=t[3];this.Ytt=i?i.split(" "):[],this.Plt=new Set(this.Ytt.map(t=>t.toLowerCase())),this.Elt=null,this.Flt=null}Jh(){this.ult=null,og.Sr(this.Ytt),this.Ytt=null,this.Plt.clear(),this.Plt=null,this.Elt=null}vit(){return this.ult}a9(){return this.Elt}Dlt(t){this.Elt=t}Qet(){return this.Flt}Olt(t){this.Flt=t}pO(){return this.ck}Cq(t){this.ck=t,this.ult.klt()}Dnt(){return this.Rlt}qq(t){this.Rlt=t}Oet(){return this.Alt}ket(t){this.Alt=!!t}Lq(){return this.Ytt}_st(t){this.Ytt=t?t.split(" "):[],this.Plt=new Set(this.Ytt.map(t=>t.toLowerCase()))}Llt(){return this.Plt}Zet(){return Array.from(this.Plt).join(",").trim()}Bit(t){return this.Plt.has(t.toLowerCase())}b5(){return{time:this.ck,ease:this.Rlt,enable:this.Alt,tags:this.Ytt}}v5(t){t&&(this.ck=t.time,this.Rlt=t.ease,this.Alt=t.enable,this.Ytt=t.tags,this.Plt=new Set(this.Ytt.map(t=>t.toLowerCase())))}}og.plt=class{constructor(t,s){this.Uit=s,this.tet=[],og.n8.Jat(this.tet,t,ag,this),this.klt()}Jh(){this.Uit=null;for(const t of this.tet)t.Jh();og.Sr(this.tet),this.tet=null}klt(){this.tet.sort((t,s)=>t.pO()-s.pO());for(let t=0;t<this.tet.length;t++){const s=this.tet[t];s.Dlt(this.tet[t+1]),s.Olt(this.tet[t-1])}}bit(){return this.Uit}Nlt(){return this.tet.length}iet(){return this.tet}cht(){const t=new ag(null,this);return this.tet.push(t),this.klt(),t}mht(t){for(const s of this.tet){if(!t(s))continue;const i=this.tet.indexOf(s);-1!==i&&(s.Jh(),this.tet.splice(i,1))}this.Blt(),this.klt()}Blt(){this.tet.sort((t,s)=>t.pO()-s.pO())}Tht(t){return this.tet.indexOf(t)}_ht(t){return this.tet[t]}*Wlt(){for(const t of this.tet)yield t}*jlt(){for(let t=this.tet.length-1;t>=0;t--)yield this.tet[t]}b5(){return{keyframeDataItemsJson:this.tet.map(t=>t.b5())}}v5(t){t&&(og.n8.Yat(this.tet,t.keyframeDataItemsJson,ag,this),this.klt())}}}{const lg=self._s;class ug{constructor(t,s){this.Tlt=s,this.Irt=null,this.Vlt=null,this.Jc="",this.ck=NaN,this.Rlt="noease",this.Alt=!1,this.Ult=null,this.Hlt=void 0,this.zlt="line",t&&(this.Irt=t[0][0],this.Vlt=t[0][1],this.Jc=t[0][2],this.ck=t[1],this.Rlt=t[2],this.Alt=!!t[3],this.zlt=t[5],this.Ult=null,t[4]&&(this.Ult=new lg.Jlt(t[4],this)),this.Elt=null,this.Xlt=null)}Jh(){this.Tlt=null,this.Ult&&(this.Ult.Jh(),this.Ult=null),this.Elt=null,this.Xlt=null}qlt(){return this.Ult}Dlt(t){this.Elt=t}a9(){return this.Elt}Ylt(t){this.Xlt=t}l9(){return this.Xlt}Qht(){return this.Irt}Ont(t){"color"===this.Jc&&lg.Qi(t)?(this.Irt[0]=lg.Rn(t),this.Irt[1]=lg.An(t),this.Irt[2]=lg.Pn(t)):this.Irt=t}dot(){return this.Vlt}Pnt(t){"color"===this.Jc&&lg.Qi(t)?(this.Vlt[0]=lg.Rn(t),this.Vlt[1]=lg.An(t),this.Vlt[2]=lg.Pn(t)):this.Vlt=t}x9(){const t=this.Tlt.Wht().g9();return"relative"===t?this.Qht():"absolute"===t?this.dot():void 0}oI(){return this.Jc}nnt(t){this.Jc=t}pO(){return this.ck}Cq(t){this.ck=t,this.Tlt.$lt()}Dnt(){return this.Rlt}qq(t){this.Rlt=t}Oet(){return this.Alt}ket(t){this.Alt=!!t}u9(){return this.zlt}M9(t){if(!this.Ult)return;if(this.Hlt||null===this.Hlt)return this.Hlt;const s=this.Ult.Klt();if(!s)return this.Hlt=null,this.Hlt;const i=s.length;for(let e=0;e<i;e++){const i=s[e];if(i.sY()===t)return this.Hlt=i,this.Hlt}return this.Hlt=null,this.Hlt}b5(){const t=this.Ult;return{addonDataJson:t?t.b5():t,value:this.Irt,aValue:this.Vlt,type:this.Jc,time:this.ck,ease:this.Rlt,enable:this.Alt}}v5(t){t&&(t.addonDataJson&&this.Ult.Zlt(t.addonDataJson),this.Irt=t.value,this.Vlt=t.aValue,this.Jc=t.type,this.ck=t.time,this.Rlt=t.ease,this.Alt=t.enable)}}lg.Ilt=class{constructor(t,s){this.Cht=s,this.Pht=[],this.Qlt=[],lg.n8.Jat(this.Pht,t,ug,this),lg.n8.qat(this.Qlt,t,ug,this),this.$lt()}Jh(){this.Cht=null;for(const t of this.Pht)t.Jh();lg.Sr(this.Pht),this.Pht=null;for(const t of this.Qlt)t.Jh();lg.Sr(this.Qlt),this.Qlt=null}$lt(){let t=this.Pht;t.sort((t,s)=>t.pO()-s.pO());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Dlt(t[s+1]),s-1>=0&&i.Ylt(t[s-1])}t=this.Qlt,t.sort((t,s)=>t.pO()-s.pO());for(let s=0;s<t.length;s++){const i=t[s];s+1<t.length&&i.Dlt(t[s+1]),s-1>=0&&i.Ylt(t[s-1])}}Rnt(){const t=new ug(null,this);return this.Pht.push(t),this.$lt(),t}Ant(t){for(const s of this.Pht){if(!t(s))continue;const i=this.Pht.indexOf(s);-1!==i&&(s.Jh(),this.Pht.splice(i,1))}this.tut(),this.$lt()}tut(){this.Pht.sort((t,s)=>t.pO()-s.pO())}Wht(){return this.Cht}sut(){return this.Pht.length}Mrt(){return this.Pht[this.Pht.length-1]}Eht(){return this.Pht}o9(){return this.Qlt}*iut(){for(const t of this.Pht)yield t}*eut(){for(let t=this.Pht.length-1;t>=0;t--)yield this.Pht[t]}b5(){const t=this.Pht,s=this.Qlt;return{propertyKeyframeDataItemsJson:t.map(t=>t.b5()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.b5())}}v5(t){t&&(lg.n8.Yat(this.Pht,t.propertyKeyframeDataItemsJson,ug,this),lg.n8.Yat(this.Qlt,t.propertyKeyframeDataItemsIncludingDisabledJson,ug,this),this.$lt())}}}{const cg=self._s;class fg{constructor(t,s){this.Ult=s,this.Wc=t[0],this.hut=t[1]}Jh(){this.Ult=null,this.hut=null}qlt(){return this.Ult}sY(){return this.Wc}b5(){return{id:this.Wc,data:this.hut}}v5(t){t&&(this.Wc=t.id,this.hut=t.data)}}class dg extends fg{constructor(t,s){super(t,s),this.nut=this.hut[0],this.rut=!!this.hut[1],this.out=this.hut[2],this.aut=!!this.hut[3]}Jh(){super.Jh()}I9(){return this.nut}Wat(){return this.rut}A9(){return this.out}jat(){return this.aut}b5(){return Object.assign(super.b5(),{startAnchor:this.nut,startEnable:!!this.rut,endAnchor:this.out,endEnable:!!this.aut})}v5(t){t&&(super.v5(t),this.nut=t.startAnchor,this.rut=!!t.startEnable,this.out=t.endAnchor,this.aut=!!t.endEnable)}}class pg extends fg{constructor(t,s){super(t,s),this.lut=this.hut[0],this.uut=this.hut[1]}Jh(){super.Jh()}Uat(){return this.lut}Vat(){return this.uut}b5(){return Object.assign(super.b5(),{direction:this.lut,revolutions:this.uut})}v5(t){t&&(super.v5(t),this.lut=t.direction,this.uut=t.revolutions)}}cg.Jlt=class{constructor(t,s){this.cut=s,this.fut=[],cg.n8.Jat(this.fut,t,{$at:0,map:new Map([["cubic-bezier",dg],["angle",pg]])},this)}Jh(){this.cut=null;for(const t of this.fut)t.Jh();cg.Sr(this.fut),this.fut=null}dut(){return this.cut}Klt(){return this.fut}*mut(){for(const t of this.fut)yield t}b5(){return{addonDataItemsJson:this.fut.map(t=>t.b5())}}v5(t){t&&cg.n8.Yat(this.fut,t.addonDataItemsJson,{$at:"id",map:new Map([["cubic-bezier",dg],["angle",pg]])},this)}}}{const mg=self._s;let gg=0;mg.bat=class extends mg.B8{constructor(t,s){super("tween-"+gg++,t,s),this.Wc="",this.gut=!1,this.yut="start-value",this.Xit=null,this.wut=null,this.Sut=null,this.but=null,this.vut=null,this.Mut=null,this.Iht=null,this.Gut=null}Jh(){this.Gq()||(this.xut(mg.Iut._ut.bW.Tut),this.xut(mg.Iut._ut.bW.Cut),this.Rut(),super.Jh(),this.Xit=null,this.wut=null,this.Sut=null,this.Mut=null,this.Iht=null,this.but=null,this.vut=null)}est(t){const s=mg.zh(mg.Event,"tweenstatereleased");s.Aut=this,t.dispatchEvent(s)}oI(){return 1}Ctt(){for(const t of this.Gtt.rst().nst())this.xtt.push(mg.Put.i_(this,t));this.Iht=this.xtt[0]}Tit(){const t=this.Gtt.rst()._it(),s=mg.Put.i_(this,t);return this.xtt.push(s),this.Eut(),s}Eut(){this.Iht=this.xtt[0]}eY(t){return this.Iht.Dit()[0]}hnt(t){this.Fut=t}Yq(){const t=this.h9();if(!t||!t.length)return;const s=t[0];if(this.Iht=s,!s)return;const i=s.Yq();return s.fet()?i:void 0}Dut(t){this.Mut=t}tY(){return this.but||(this.but=new Promise(t=>{this.vut=t})),this.but}Rut(){this.but&&(this.vut&&this.vut(),this.but=null,this.vut=null)}Out(t){this.Sut||(this.Sut=[]),this.Sut.push(t)}kut(t){this.wut||(this.wut=[]),this.wut.push(t)}Lut(t){if(!this.Sut)return;const s=this.Sut.indexOf(t);-1!==s&&this.Sut.splice(s,1)}Nut(t){if(!this.wut)return;const s=this.wut.indexOf(t);-1!==s&&this.wut.splice(s,1)}But(t,s){for(const i of this.xtt)for(const e of i.eet){if(e.Oit()!==s)continue;const i=e.aet(),h=e.Wht(),n=i.ont(h);n.Ont(t),n.Pnt(t)}}Wut(t){for(const s of this.xtt)for(const i of s.eet)if(i.Oit()===t)return i}jut(t){let s=!1;for(const i of t){const t=this.Wut(i);t&&(this.But(t.vnt(),i),s=!0)}if(s){if(this.xst()){const t=this.Aq()-this.pO();this.Rq(t);for(const s of this.xtt)s.Det(t);this.$st(0)}else{const t=this.pO();this.Rq(t);for(const s of this.xtt)s.Det(t);this.$st(t)}this.Kst()}}Vut(t,s){const i=this.Wut(s);if(!i)return;const e=i.aet(),h=i.Wht(),n=e.Mrt(h);n.Cq(this.Aq()),n.Ont(t),n.Pnt(t)}Uut(t){this.Wc=t}sY(){return this.Wc}Hut(t){this.yut=t}zut(){return this.yut}Zq(t){this.gut=t}Kq(){return this.gut}Ast(){if(this.Sut)for(const t of this.Sut)t(this);if(!this.Qq())for(const t of this.xtt)t.Sht()}Nst(){this.Utt=this.Nc.tB()}k7(){if(!this.Jtt&&(this.Jtt=!0,this.wut))for(const t of this.wut)t(this)}Cq(t){this.Jut(),super.Cq(t)}iit(t){mg.Qi(t)||(t=this.Aq()),t<0?this.Ptt=0:t>=this.Aq()?this.Ptt=this.Aq():this.Ptt=t,this.Iht.eit()}I7(t){if(!this.O7()&&"current-state"===this.zut())for(const t of this.xtt)t.wht();super.I7(t)}Tq(t=!1){if(super.Tq(t),!this.Qq())for(const t of this.xtt)t.yht()}Bf(t=!0,s=!1){this.Jut(),super.Bf(t,s)}Jut(){for(const t of this.xtt){const s=t=>{const s=t.pO(),i=this.Aq();return 0!==s&&s!==i};t.pht(s),t.ght(s)}}M8(){if(this.Gq())return!0;const t=this.Yq();return!(t&&t.EH().h0()||(this.Mtt.G7(this),this.cit(),0))}P7(t,s,i){if(this.Xit||(this.Xit=this.Yq()),!this.Xit||this.Xit.jY())return this.Tq(!0),void this.Nst();const e=this.Xit.hB();if(-1!==e&&(t=i*e),0===t&&0===this.qtt)return;this.qtt=t;const h=this.Ptt+this.Ett+t*this.Ftt,n=this.Gtt.git;h<0?(this.Ptt=0,this.Ett=-h):h>=n?(this.Ptt=n,this.Ett=this.Ptt-h):(this.Ptt=h,this.Ett=0);let r=!1,o=!1;const a=this.Eq(),l=this.Dq();if(a||l?a&&!l?this.Ftt>0?this.Ptt>=n&&(this.iit(0),this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),o=!0):this.Ptt<=0&&(this.iit(n),this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),o=!0):!a&&l?this.Ftt>0?this.Ptt>=n&&(this.$st(n),this.Oq(-1*this.kq()),o=!0,1===this.Dtt?this.ktt<this.qX()?(this.ktt++,this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut),this.IsPlaying()?this.Dtt=0:this.Ott=0):(this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut),r=!0):0===this.Dtt&&(this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut),this.IsPlaying()?this.Dtt=1:this.Ott=1)):this.Ptt<=0&&(this.$st(0),this.Oq(-1*this.kq()),o=!0,1===this.Dtt?this.ktt<this.qX()?(this.ktt++,this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut),this.IsPlaying()?this.Dtt=0:this.Ott=0):(r=!0,this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut)):0===this.Dtt&&(this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut),this.IsPlaying()?this.Dtt=1:this.Ott=1)):a&&l&&(this.Ftt>0?this.Ptt>=n&&(this.$st(n),this.Oq(-1*this.kq()),o=!0,0===this.Dtt&&(this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut)),1===this.Dtt&&(this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut)),this.IsPlaying()?(this.Dtt++,this.Dtt=mg.wrap(this.Dtt,0,2)):(this.Ott=this.Dtt+1,this.Ott=mg.wrap(this.Ott,0,2))):this.Ptt<=0&&(this.$st(0),this.Oq(-1*this.kq()),o=!0,0===this.Dtt&&(this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut)),1===this.Dtt&&(this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),this.xut(mg.Iut._ut.bW.Yut),this.xut(mg.Iut._ut.bW.$ut)),this.IsPlaying()?(this.Dtt++,this.Dtt=mg.wrap(this.Dtt,0,2)):(this.Ott=this.Dtt+1,this.Ott=mg.wrap(this.Ott,0,2)))):this.Ftt>0?this.Ptt>=n&&(this.ktt<this.qX()?(this.ktt++,this.iit(0),this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),o=!0):(this.$st(n),r=!0)):this.Ptt<=0&&(this.ktt<this.qX()?(this.ktt++,this.iit(n),this.xut(mg.Iut._ut.bW.Xut),this.xut(mg.Iut._ut.bW.qut),o=!0):(this.$st(0),r=!0)),!this.Gq()&&this.IsPlaying()){if(r)return this.Iht.yit(),this.Tq(!0),void this.Nst();this.Iht.Sc(this.Ptt,!0,!1,o,this.Xtt,!1),this.Xtt&&(this.Xtt=!1)}}xut(t){const s=this.Yq();this.Mut.Kut(this),this.Nc.pz(t,s,this.Mut.EX()),this.Mut.Zut()}b5(){const t=super.b5(),s=this.dst();return Object.assign(t,{tweenDataItemJson:s.b5(),id:this.Wc,destroyInstanceOnComplete:this.gut,initialValueMode:this.yut})}v5(t){t&&(this.dst().v5(t.tweenDataItemJson),super.v5(t),this.Wc=t.id,this.gut=t.destroyInstanceOnComplete,this.yut=t.initialValueMode,this.Eut())}static IsPlaying(t){return t.IsPlaying()}static jq(t){return t.jq()}static Qut(t){return!!t.Dq()&&0===t.Gst()}static tct(t){return!!t.Dq()&&1===t.Gst()}static sct(t){const s=t.runtime.ast(),i=new mg.zat;if(t.json){i.v5(t.json.tweenDataItemJson);const e=new mg.bat(i,s);return e.v5(t.json),e}{const e=new mg.bat(i,s);mg.Ge(t.ict)||(t.ict=[t.ict]),e.Uut(t.id),e._st(t.tags),e.Hut(t.ect),e.Zq(t.hct),e.Pq(t.loop),e.Fq(t.nct),e.Rq(t.time),e.mst(0),e.yst("default"),e.wst(t.ict[0].rct),e.bst(t.XX);const h=e.Tit();h.Eet(t.FX.zH()),h.yst("default"),h.wst(t.ict[0].rct),h.ket(!0),h.Let(t.FX.EH().VL());const n=t.FX.MX(),r=n.Wet()?n.Bet():t.FX.iW().My(),o=n.Wet()?n.Vet():t.FX.iW().xy();h.Net(r),h.jet(o);const a=h.uht();a.Cq(0),a.qq("noease"),a.ket(!0),a._st("");const l=h.uht();l.Cq(t.time),l.qq("noease"),l.ket(!0),l._st("");for(const s of t.ict){const i=h.fht();i.qht(s.oct),i.Kht(s.act),i.snt(s.Ret),i.hnt(s.type),i.lnt(NaN),i.cnt(NaN),i.yst("default"),i.wst(s.rct),i.ket(!0);const e=i.Cnt();e.nnt(s.valueType),e.Cq(0),e.qq(s.lct),e.ket(!0),e.Ont(s.uct),e.Pnt(s.uct);const n=i.Cnt();n.nnt(s.valueType),n.Cq(t.time),n.qq(s.lct),n.ket(!0),n.Ont(s.cct),n.Pnt(s.cct),i.ust()}return e}}static Eet(t,s){if(!isNaN(s))for(const i of t.h9())i.Eet(s)}static Dut(t,s){t.Dut(s)}fct(t,s){return this.Gut||(this.Gut=mg.zh(self.Hq,this,t,s)),this.Gut}}}{const yg=self._s;yg.Put=class extends yg.ost{constructor(t,s){super(t,s),this.dct=null,this.pct=null}static i_(t,s){return yg.zh(yg.Put,t,s)}mct(){1===this.eet.length?this.dct=this.eet[0]:(this.dct=this.eet[0],this.pct=this.eet[1])}het(){for(const t of this.Uit.aet().oet())this.eet.push(yg.gct.i_(this,t));this.mct()}fht(){const t=this.Uit.aet().dht(),s=yg.gct.i_(this,t);return this.eet.push(s),this.mct(),s}I7(){if(this.cet(),!this.fet()&&this.fst())return;const t=this.uet().xst()?0:this.Fet();for(const s of this.eet)s.I7(t),0===this.net&&1===s.zet()&&(this.net=1),0===this.O8&&1===s.C7()&&(this.O8=1);this.ret=0,this.eet.some(t=>t.mit())&&(this.ret=1),this.Qit=this.Jet(t),this.$it=!1,this.Kit=!1,this.Sc(t)}wit(){}Sc(t,s=!1,i=!1,e=!1,h=!1,n=!1,r=!1){if(this.Xit||this.Yq(),this.Xit)return!this.Xit.jY()&&(!n||!this.EH().h0())&&(this.pct?(this.dct.Sc(t,i,e,r),this.pct.Sc(t,i,e,r)):this.dct.Sc(t,i,e,r),void(0!==this.dct.zet()&&(this.qit||(this.qit=this.Xit.iW()),this.qit&&this.qit.Uz())))}Mit(){}v5(t){super.v5(t),this.mct()}}}{const wg=self._s;wg.gct=class extends wg.let{constructor(t,s){super(t,s),this.yct=!1}static i_(t,s){return wg.zh(wg.gct,t,s)}Sc(t,s=!1,i=!1,e=!1){let h,n;if(this.yct)h=this.Pht[0],n=this.Pht[1];else if(s)h=this.Rht.mnt(t,this.Cht),n=h.a9();else{if(this.Dht){const s=this.uet(),i=this.Dht.a9(),e=this.Dht.pO(),h=i?i.pO():s.Aq();(t<=e||t>=h)&&(this.Dht=this.Rht.mnt(t,this.Cht))}else this.Dht=this.Rht.mnt(t,this.Cht);h=this.Dht,n=h.a9()}this.Aht.Sc(t,h,n,s,i,e)}Cnt(){const t=this.Cht.Fht().Rnt();return this.Dht=null,this.yct=this.fnt().length<=2,t}ght(t){this.Dht=null,this.Cht.Fht().Ant(t),this.yct=this.fnt().length<=2}b5(){return{sourceAdapterJson:this.ust().b5(),basic:this.yct}}v5(t){t&&(this.ust().v5(t.sourceAdapterJson),this.yct=t.basic)}}}{const Sg=self._s,bg=self.Vu;Sg.bc=class extends Sg.Uh{constructor(t,s=!0){super(),this.Yh=t[0],this.wct=t[2],this.Sct=[];for(const s of t[1]){const t=Sg.bct.i_(this,s);this.Sct.push(t)}for(let t=0;t<this.Sct.length;t++){const s=this.Sct[t],i=this.Sct[t+1],e=this.Sct[t-1];s.Dlt(i),s.Ylt(e)}this.vct=new Map,this.Mct=new Map,this.Gct(),s&&bg.Mc(this.Yh,(t,s,i,e)=>this.Sc(t,s,i,e),null,{transition:this})}static i_(t){return Sg.zh(Sg.bc,t)}Jh(){for(const t of this.Sct)t.Jh();Sg.Sr(this.Sct),this.Sct=null,this.vct.clear(),this.vct=null,this.Mct.clear(),this.Mct=null}vc(t){this.wct=!!t}xct(t){const s=this.Mct.get(t);if(s)return s;for(const s of this.Sct)if(s.Tct()===t)return this.Mct.set(t,s),s}_ct(t){for(let s=this.Sct.length-1;s>=0;s--){const i=this.Sct[s],e=i.Tct();if(e<=t){let s=i;if(e<t)return s;if(e===t){for(;s;){const t=s.l9();if(!t)break;if(t.Tct()!==s.Tct())break;s=t}return s}}}}Sc(t,s,i,e){let h=t/e;if(this.wct){const h=this.xct(0),n=this.xct(1),r=s+(s+i)*h.Ict(),o=(s+i)*n.Ict()-r;return 0===e?r+o:bg.xc(t,r,o,e)}0===e&&(h=1);let n=this._ct(h),r=n.a9();if(!r){const t=n.l9(),s=n;n=t,r=s}const o=r.Tct()-n.Tct(),a=Sg.$h(h,n.Tct(),r.Tct(),0,o);if(n.Cct()||0===o){const t=s+(s+i)*n.Ict(),e=(s+i)*r.Ict()-t;return 0===o?1===a?t+e:t:bg.xc(a,t,e,o)}const l=n.Tct(),u=n.Ict(),c=n.Tct()+n.Rct(),f=n.Ict()+n.Act(),d=r.Tct()+r.Pct(),p=r.Ict()+r.Ect(),m=r.Tct(),g=r.Ict();let y=bg.nc("spline")(a,l,u,c,f,d,p,m,g,this.vct.get(n));return y+=n.Ict(),(1-y)*s+y*(s+i)}Gct(){this.vct.clear();for(let t=0;t<this.Sct.length-1;t++){const s=this.Sct[t];if(!s.Wat())continue;const i=s,e=this.Sct[t+1];if(!e.jat())continue;const h=i.Tct(),n=i.Tct()+i.Rct(),r=e.Tct()+e.Pct(),o=e.Tct();this.vct.set(i,bg.Tc(h,n,r,o))}}}}{const vg=self._s;vg.bct=class extends vg.Uh{constructor(t,s){super(),this.Fct=t,this.Dct=s[0],this.Oct=s[1],this.kct=s[2],this.Lct=s[3],this.Nct=s[4],this.Bct=s[5],this.rut=s[6],this.aut=s[7],this.Wct=s[8],this.Elt=null,this.Xlt=null}Jh(){this.Fct=null}static i_(t,s){return vg.zh(vg.bct,t,s)}Dlt(t){this.Elt=t}a9(){return this.Elt}Ylt(t){this.Xlt=t}l9(){return this.Xlt}Tct(){return this.Dct}Ict(){return this.Oct}Rct(){return this.kct}Act(){return this.Lct}Pct(){return this.Nct}Ect(){return this.Bct}Wat(){return this.rut}jat(){return this.aut}Cct(){return"linear"===this.Wct}jct(){return"cubic"===this.Wct}}}{const Mg=self._s;Mg.Vct=class extends Mg.Uh{constructor(t){super(),this.Nc=t,this.Uct=[]}Jh(){for(const t of this.Uct)t.Jh();Mg.Sr(this.Uct),this.Uct=null}i_(t){this.Uct.push(Mg.bc.i_(t))}}}{const Gg=self._s;Gg.Hct=class extends Gg.Uh{constructor(t){super(),this.Nc=t,this.zct=null,this.Jct=null,this.T8=t=>this._8(t.FX)}Jh(){if(this.k8(),this.zct){for(const t of this.zct.values())t.clear();this.zct.clear()}this.zct=null,this.Nc=null}i_(t){if(this.zct||(this.zct=new Map),!t)return;const s=t[0][16][0],i=t[1];this.zct.has(i)||this.zct.set(i,new Map),this.zct.get(i).set(s,t)}L8(){const t=this.Nc.wf();t&&t.addEventListener("instancedestroy",this.T8)}k8(){const t=this.Nc.wf();t&&t.removeEventListener("instancedestroy",this.T8)}Xct(){return!!this.zct&&0!==this.zct.size}qct(t,s){let i=0;if(i=t instanceof Gg.Yct?t.VL():t,!this.zct.has(i))return;const e=this.zct.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}$ct(t,s){this.Jct||(this.Jct=new WeakMap),this.Jct.has(t)||this.Jct.set(t,s)}Kct(t){if(!this.Jct)return"";return this.Jct.get(t)||""}_8(t){this.Jct&&this.Jct.has(t)&&this.Jct.delete(t)}}}{const xg=self._s;xg.Zct=class{constructor(t){this.Nc=t,this.Qct=new xg.tft}Jh(){this.Qct.Jh(),this.Qct=null,this.Nc=null}AW(){return this.Nc}i_(t){this.Qct.Bu(t)}sft(t){return this.Qct.zs(t)}ift(){return this.Qct.ift()}}}{const Tg=self._s;Tg.eft=class{constructor(t,s,i,e,h,n,r){this.Nc=h.AW(),this.hft=h,this.nft=t,this.rft=i,this.oft=e,this.Uw=s,this.r8=n,this.aft=r??n.Yq().zH(),this.lft(),this.uft=this.fft?.cft()??-1,this.dft=[],this.pft=null,this.mft=NaN,this.gft=null,this.yft=null,this.wft=null,this.Sft="",this.bft=null,this.vft="",this.Mft="",this.Gft=0,this.xft=!1,this.jtt=!1}Jh(){this.jtt||(Tg.Sr(this.dft),this.dft=null,this.Nc=null,this.hft=null,this.oft=null,this.r8=null,this.pft=null,this.mft=NaN,this.gft&&this.gft.clear(),this.gft=null,this.yft=null,this.wft=null,this.Sft="",this.bft=null,this.vft="",this.Mft="",this.jtt=!0)}Xh(){return this.jtt}Tft(){return this.hft}AW(){return this.Nc}Rc(){return this.nft}_ft(){return this.oft}Mq(){return this.Uw}t7(){return this.r8||(this.r8=this.Nc.KB(this.aft).MX()),this.r8}Ift(){return this.Cft(this.uft)}Rft(){const t=this.Ift();return t?t.Mq():""}Aft(){const t=this.Ift();return t?t.Lq():[]}Pft(t){const s=this.Aft();if(!s)return!1;if(!s.length)return!1;const i=Tg.eft.Ist(t);return!(!i||!i.length)&&i.every(Tg.eft.Rst,s)}Eft(t,s){const i=this.Aft();if(!i)return!1;if(!i.length)return!1;const e=Tg.eft.Ist(t);return!(!e||!e.length)&&e.every(t=>Tg.eft.Fft.call(i,t,s))}static Rst(t){const s=this;return""===t?1===s.length&&""===s[0]:s.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Ist(t){return t.trim().split(" ")}static Fft(t,s){const i=this;return""===t?1===i.length&&""===i[0]:i.some(i=>Tg.compare(i.trim(),s,t.trim()))}Dft(t){const s=this.Ift();if(s){if(Tg.Qi(t)){const i=s.Oft(),e=i?i[t]:void 0;if(Tg.Qi(e))return this.Cft(e)}if("string"==typeof t)for(const i of s.Oft()){const s=this.Cft(i);if(s.Iq(t))return this.Cft(s.cft())}}}kft(t){const s=this.Dft(t);return s?s.Mq():""}Lft(t){const s=this.Dft(t);return s?s.Lq():""}Nft(t){const s=this.Ift();if(!s)return-1;const i=s.Oft();if(!i)return-1;const e=this.Dft(t);return e?i.indexOf(e.cft()):-1}Bft(){const t=this.Ift();if(!t)return 0;const s=t.Oft();return s?s.length:0}Cft(t){return this.oft.Cft(t)}Bf(){this.jft().Wft(!0)}Wft(t){if(this.Vft()){for(const[t,s]of this.Vft().entries())s.Wft(!1);this.Vft().clear()}if(this.gft=null,this.pft=null,this.Uft=null,this.yft=null,this.Sft="",this.bft=null,this.vft="",this.Mft="",this.dft=[],t){this.hft.Hft(this);const t=this.fft.cft();t!==this.uft&&this.zft(t)}else this.uft=this.fft.cft()}Jft(){const t=this.oft.Cft(this.uft);return t?t.qft().Xft():0}Yft(t){return!(t<0)&&t===this.$ft()}$ft(){const t=this.oft.Cft(this.uft);if(!t)return-1;let s=t.qft().Kft();return s?t.qft().Zft().indexOf(s):-1}Qft(t){const s=this.tdt(t);return s?s.Rc():""}sdt(t){let s;return Tg.Qi(t)&&(s=this.tdt(t)),"string"==typeof t&&(s=this.idt(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Qht():""}edt(t,s){if(t.Oet())return t.cft();{const i=t.qft().Kft();if(!i)return s.cft();const e=i.hdt();if(!Tg.Qi(e))return s.cft();const h=this.Cft(e);return h?this.edt(h,s):s.cft()}}ndt(t,s){if(t.Oet()){if("reference"===t.oI()){const s=t.rdt(),i=t.odt(),e=this.hft.sft(s);if(!e)return[-1,null];const h=e.adt(i);return h?this.ndt(h,e):this.ndt(e.ldt(),e)}return[t.cft(),s]}{const i=t.qft().Kft();if(!i)return[-1,null];const e=i.hdt();if(!Tg.Qi(e))return[-1,null];const h=s.Cft(e);return h?this.ndt(h,s):[-1,null]}}udt(t,s){let i=this.Cft(t);if(i){if(!i.Oet()){const s=this.Cft(this.uft);t=this.edt(i,s)}if(Tg.Qi(t)&&t!==this.uft)if(i=this.Cft(t),"reference"===i.oI()){const e=i.rdt(),h=i.odt(),n=this.hft.sft(e);let r=n.adt(h);if(r){const i=this.ndt(r,n);if(-1===i[0])return;s(this.uft,t,i[1],i[0])}else s(this.uft,t)}else s(this.uft,t)}}cdt(t){let s;if(Tg.Qi(t)&&(s=this.tdt(t)),"string"==typeof t&&(s=this.idt(t)),!s)return;let i=s.hdt();Tg.Qi(i)&&this.udt(i,(t,s,i,e)=>{this.dft.push(t),this.zft(s,i,e)})}fdt(){const t=this.ddt();if(!t)return;const s=t.hdt();Tg.Qi(s)&&this.udt(s,(t,s,i,e)=>{this.dft.push(t),this.zft(s,i,e)})}pdt(t){const s=this.oft.adt(t);if(!s)return;const i=s.cft();Tg.Qi(i)&&this.udt(i,(t,s,i,e)=>{this.dft.push(t),this.zft(s,i,e)})}mdt(){const t=this.dft.pop();Tg.Qi(t)?this.zft(t):this.gdt()&&(this.hft.Hft(this.gdt(),!0,!1,!1),this.gdt().zft(this.ydt()),this.jft().wdt(this.gdt()))}Sdt(t){if(!this.Ift())return;const s=this.Dft(t);if(s){if(!s.Oet())return;const t=s.cft();if(!Tg.Qi(t))return;this.dft.push(this.uft),this.zft(s.cft())}}bdt(t){if(Tg.Qi(t))return!!this.oft.Cft(this.uft).qft().Zft()[t];if("string"==typeof t){const s=this.oft.Cft(this.uft).qft().Zft();for(let i=0;i<s.length;i++)if(s[i].Rc()===t)return!0;return!1}return!1}vdt(){this.xft=!0}Mdt(){return this.Gft>0}Gdt(){this.Gft++}xdt(){this.Gft--,0===this.Gft&&this.xft&&this.hft.Tdt(this)}zft(t,s,i){const e=this.uft,h=this.t7().Yq();this.Gdt(),this.hft._dt(this),this.Nc.pz(Tg.MW.Cdt.bW.Idt,h),this.Nc.pz(Tg.MW.Cdt.bW.Rdt,h),this.Nc.pz(Tg.MW.Cdt.bW.Adt,h),this.Nc.pz(Tg.MW.Cdt.bW.Pdt,h),this.uft=t;let n=this.Cft(this.uft);if("dictionary"===n.oI()&&(this.Nc.pz(Tg.MW.Cdt.bW.Edt,h),this.Nc.pz(Tg.MW.Cdt.bW.Fdt,h),this.Nc.pz(Tg.MW.Cdt.bW.Ddt,h),this.Nc.pz(Tg.MW.Cdt.bW.Odt,h)),this.hft.kdt(),this.xdt(),!this.Xh()&&(n=this.Cft(this.uft),"reference"===n.oI())){const t=s?s.Rc():n.rdt();if(this.Ldt(n)){this.dft.pop();const t=this.Ndt(n);this.hft.Hft(t,!0,!0,!1),t.Bdt(this,e),this.jft().wdt(t)}else{const s="number"==typeof i?i:n.odt();if(t){this.dft.pop();let i=n.Wdt();if(i){let t=this.hft.jdt(i);for(;t;)i=Tg._m(i),t=this.hft.jdt(i)}else{i=`${t}-ref`;let s=this.hft.jdt(i);for(;s;)i=Tg._m(i),s=this.hft.jdt(i)}const h=this.hft.Vdt(t,s,i,this.r8,!0);h.Bdt(this,e),this.Udt(n,h);const r=this.jft();h.Hdt(r),r.wdt(h)}}}}ddt(){const t=this.oft.Cft(this.uft);return t?t.qft().Kft():null}tdt(t){const s=this.oft.Cft(this.uft);if(!s)return null;const i=s.qft().Zft();if(!i)return null;return i[t]||null}idt(t){const s=this.oft.Cft(this.uft);if(!s)return null;return s.qft().zdt(t)||null}lft(t){if("number"==typeof t){let s=this.Cft(t);s||(s=this.oft.ldt()),this.fft=s}else if("number"==typeof this.rft){let t=this.Cft(this.rft);t||(t=this.oft.ldt()),this.fft=t}else{let t=this.oft.adt(this.rft);t||(t=this.oft.ldt()),this.fft=t}}b5(){return this.xft?null:{flowchartName:this.nft,flowchartTag:this.Uw,startNodeTag:this.rft,currentNodeId:this.uft,previousNodeIds:this.dft,pluginUID:this.r8.Yq().zH(),reference:{previousFlowchartTag:this.gdt()?this.gdt().Mq():"",previousStartNodeId:Tg.Qi(this.ydt())?this.ydt():NaN,referencesJson:this.Jdt(),currentReferenceFlowchartTag:this.Xdt()?this.Xdt().Mq():"",rootFlowchartTag:this.jft()?this.jft().Mq():""}}}Jdt(){if(!this.qdt())return null;const t=[];for(const[s,i]of this.Vft().entries())t.push({flowchartElementId:s.cft(),flowchartStateTag:i.Mq()});return t.length?t:null}v5(t){if(t){if(this.nft=t.flowchartName,this.Uw=t.flowchartTag,this.rft=t.startNodeTag,this.uft=t.currentNodeId,this.dft=t.previousNodeIds,this.aft=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Sft=s.previousFlowchartTag,this.mft=s.previousStartNodeId,this.bft=s.referencesJson,this.vft=s.currentReferenceFlowchartTag,this.Mft=s.rootFlowchartTag}this.lft()}}gdt(){return"string"==typeof this.Sft&&this.Sft&&(this.pft=this.hft.jdt(this.Sft),this.Sft=""),this.pft}ydt(){return this.mft}Bdt(t,s){this.pft=t,this.mft=s}Xdt(){return"string"==typeof this.vft&&this.vft&&(this.yft=this.hft.jdt(this.vft),this.vft=""),this.yft}wdt(t){this.yft=t,this.yft===this&&(this.yft=null)}jft(){return"string"==typeof this.Mft&&this.Mft&&(this.wft=this.hft.jdt(this.Mft),this.Mft=""),this.wft?this.wft:this}Hdt(t){this.wft=t}qdt(){return this.Ydt(),!!this.gft}Ldt(t){return this.Ydt(),this.gft&&this.gft.has(t)}Ydt(){if(this.bft){this.gft&&this.gft.clear(),this.gft||(this.gft=new Map);for(const t of this.bft){const s=this.hft.jdt(t.flowchartStateTag),i=s.Cft(t.flowchartElementId);this.gft.set(i,s)}this.bft=null}}Vft(){return this.Ydt(),this.gft}Ndt(t){return this.Ydt(),this.gft.get(t)}Udt(t,s){this.gft||(this.gft=new Map),this.gft.set(t,s)}}}{const _g=self._s;_g.$dt=class{constructor(t){this.Nc=t,this.Kdt=new Map,this.Zdt=null,this.Qdt=[],this.tpt=()=>this.P8(),this.spt=null}Jh(){_g.Sr(this.Qdt),this.Qdt=null,this.Kdt.clear(),this.Kdt=null,this.Zdt=null,this.Nc=null,this.spt=null}AW(){return this.Nc}sft(t){return this.Nc.Tft().sft(t)}Vdt(t,s,i,e,h,n){const r=this.Nc.Tft().sft(t);if(!r)return void console.warn(`[Flowcharts] no flowchart found with name '${t}'`);if(this.Kdt.has(i)){const t=this.Kdt.get(i);t&&this.Tdt(t)}const o=new _g.eft(t,i,s,r,this,e,n);return this.Kdt.set(i,o),h&&this.Hft(o,!0),o}Tdt(t){if(t.vdt(),t.Mdt())return;const s=t.Mq();this.Kdt.delete(s),t.Jh(),this.Zdt===t&&(this.Zdt=null)}ipt(t){t.Bf()}jdt(t){return this.Kdt.get(t)}_dt(t){this.Qdt.push(t)}kdt(){this.Qdt.pop()}Hft(t,s=!1,i=!1,e=!0){if(e){const s=t.Xdt();t=s||t}t!==this.Zdt&&(this.ept(),this.hpt(t,s,i))}npt(t){return"string"==typeof t?this.jdt(t):this.Qdt.length?this.Qdt[this.Qdt.length-1]:this.Zdt}ept(){if(!this.Zdt)return;if(this.Zdt.Xh())return;const t=this.Zdt.t7().Yq();this.Zdt.Gdt(),this._dt(this.Zdt),this.Nc.pz(_g.MW.Cdt.bW.rpt,t),this.kdt(),this.Zdt.xdt()}hpt(t,s=!1,i=!1){if(this.Zdt=t,!this.Zdt)return;if(this.Zdt.Xh())return;const e=this.Zdt.t7().Yq();this.Zdt.Gdt(),this._dt(this.Zdt),this.Nc.pz(_g.MW.Cdt.bW.opt,e),!0!==i&&"number"!=typeof i||this.Zdt.lft(i),s&&(this.Nc.pz(_g.MW.Cdt.bW.Edt,e),this.Nc.pz(_g.MW.Cdt.bW.Fdt,e),this.Nc.pz(_g.MW.Cdt.bW.Ddt,e),this.Nc.pz(_g.MW.Cdt.bW.Odt,e)),this.kdt(),this.Zdt.xdt()}b5(){return{flowchartJsonObjects:[...this.Kdt.values()].map(t=>t.b5()),currentFlowchartTag:this.Zdt?this.Zdt.Mq():null}}v5(t){if(!t)return;this.spt=t;const s=new Map;for(const t of this.spt.flowchartJsonObjects){const i=t.flowchartTag;if(this.Kdt.has(i)){const e=this.Kdt.get(i);e.v5(t),s.set(i,e)}else{const i=this.Vdt(t.flowchartName,t.startNodeTag,t.flowchartTag,null,!1,t.pluginUID);i.v5(t),s.set(t.flowchartTag,i)}}for(const[t,i]of this.Kdt.entries())s.has(t)||i.Jh();this.Kdt.clear(),this.Kdt=s,this.Nc.i6()?this.Nc.wf().addEventListener("afterload",this.tpt):this.P8()}P8(){this.Nc.wf().removeEventListener("afterload",this.tpt);const t=this.Kdt.get(this.spt.currentFlowchartTag);t&&this.Hft(t,!0),this.spt=null}}}{const Ig=self._s;Ig.tft=class{constructor(){this.apt=new Map}Jh(){for(const t of this.apt.values())t.Jh();this.apt.clear(),this.apt=null}Bu(t){const s=new Ig.lpt(t),i=s.Rc();this.apt.set(i,s)}zs(t){return this.apt.get(t)}ift(){return!!this.apt.size}static upt(t,s,i,e){if(s)for(const h of s){const s=new i(h,e);t.push(s)}}}}{const Cg=self._s;Cg.lpt=class{constructor(t){this.Yh=t[0],this.cpt=new Cg.fpt(t[1],this)}Jh(){this.cpt.Jh(),this.cpt=null}dpt(){return this.cpt}Cft(t){return this.cpt.Cft(t)}adt(t){return this.cpt.adt(t)}ldt(){return this.cpt.ldt()}Rc(){return this.Yh}}}{const Rg=self._s;class Ag{constructor(t,s){this.cpt=s,this.Jc=t[7],this.ppt=t[0],this.Uw=t[1],this.Uw?this.Ytt=this.Uw.trim().split(" ").map(t=>t.trim()):this.Ytt=[],this.mpt=t[2],this.gpt=null,this.ypt=null,this.Alt=!1,"dictionary"===this.Jc&&(this.gpt=t[3],this.ypt=t[4],this.Alt=t[8]),this.wpt=t[6],this.Spt=null,this.bpt=null,this.vpt=null,"reference"===this.Jc&&(this.Spt=t[8],this.bpt=t[9],this.vpt=t[10],this.Alt=t[11]),this.Mpt=new Rg.Gpt(t[5],this)}Jh(){this.cpt=null}dpt(){return this.cpt}qft(){return this.Mpt}cft(){return this.ppt}Mq(){return this.Uw}Lq(){return this.Ytt}Iq(t){if(!this.Ytt)return!1;if(!this.Ytt.length)return!1;const s=Rg.eft.Ist(t);return!(!s||!s.length)&&s.every(Rg.eft.Rst,this.Ytt)}xpt(){return this.wpt}Tpt(t){this.wpt=!!t}_pt(){if("dictionary"===this.Jc)return!0;if("reference"===this.Jc)return!1;throw new Error(`unexpected flowchart node type: ${this.Jc}`)}Oft(){return this.mpt}Ipt(){return this.gpt}Cpt(){return this.ypt}oI(){return this.Jc}Oet(){return this.Alt}rdt(){return this.Spt}odt(){return this.bpt}Wdt(){return this.vpt}}Rg.fpt=class{constructor(t,s){this.oft=s,this.Rpt=[],this.Apt=new Map,this.Ppt=new Map,this.Ept=null,Rg.tft.upt(this.Rpt,t,Ag,this);for(const t of this.Rpt){const s=t.cft(),i=t.Mq(),e=t.Lq(),h=t.xpt();if(this.Apt.set(s,t),i)for(const s of e)this.Ppt.has(s)||this.Ppt.set(s,new Set),this.Ppt.get(s).add(t);h&&(this.Ept=t);const n=t.qft();for(const t of n.Fpt()){const s=t.cft();this.Apt.set(s,t)}}this.Ept||this.Dpt()}Jh(){this.oft=null;for(const t of this.Rpt)t.Jh();Rg.Sr(this.Rpt),this.Rpt=null}_ft(){return this.oft}Cft(t){return this.Apt.get(t)}adt(t){if(!t||!t.length)return null;const s=[];for(const i of t.trim().split(" ")){let t=this.Ppt.get(i.trim())??new Set;if(0===t.size)return null;s.push(t)}return[...s.reduce((t,s)=>s.size<t.size?s:t)].filter(t=>s.every(s=>s.has(t)))[0]}ldt(){return this.Ept}*Opt(){for(const t of this.Rpt)yield t}Dpt(){let t=0;for(const s of this.Opt())s.xpt()&&t++;if(0===t){for(const t of this.Opt())if(t._pt()&&!t.xpt())return void t.Tpt(!0)}else{if(1===t)return;if(t>1){let t=!0;for(const s of this.Opt())s._pt()&&(s.xpt()&&t?t=!1:s.xpt()&&!t&&s.Tpt(!1))}}for(const t of this.Opt())if(t._pt()&&t.xpt())return void(this.Ept=t)}}}{const Pg=self._s;class Eg{constructor(t,s){this.Mpt=s,this.ppt=t[0],this.Yh=t[1],this.Irt=t[2],this.kpt=t[3],this.Alt=t[4],this.Lpt=t[5]}Jh(){this.Mpt=null}qft(){return this.Mpt}cft(){return this.ppt}Rc(){return this.Yh}Qht(){return this.Irt}hdt(){return this.kpt}Oet(){return this.Alt}Npt(){return this.Lpt}}Pg.Gpt=class{constructor(t,s){this.Bpt=s,this.Wpt=[],this.jpt=new Map,Pg.tft.upt(this.Wpt,t,Eg,this),this.Vpt=this.Wpt.filter(t=>t.Oet());for(const t of this.Vpt)this.jpt.set(t.Rc(),t)}Jh(){this.Bpt=null;for(const t of this.Wpt)t.Jh();Pg.Sr(this.Wpt),this.Wpt=null,Pg.Sr(this.Vpt),this.Vpt=null}Upt(){return this.Bpt}Xft(){return this.Vpt.length}Zft(){return this.Vpt}zdt(t){return this.jpt.get(t)}Kft(){for(const t of this.Vpt)if(t.Npt())return t}*Fpt(){for(const t of this.Vpt)yield t}}}{const Fg=self._s;Fg.Hpt=class extends Fg.Uh{constructor(t){super(),this.zpt=t,this.Jpt=[],this.Jpt.push(Fg.zh(Fg.Xpt,this)),this.Vw=0,this.qpt=this.Jpt[0]}Jh(){for(const t of this.Jpt)t.Jh();Fg.Sr(this.Jpt),this.qpt=null,this.zpt=null}EH(){return this.zpt}xV(){return this.qpt}Ypt(){return this.Jpt[this.Vw-1]}Ru(){this.xV().Ru()}$pt(){const t=this.Jpt,s=++this.Vw;if(s===t.length){const s=Fg.zh(Fg.Xpt,this);t.push(s),this.qpt=s}else{const i=t[s];i.Bf(),this.qpt=i}}Kpt(){const t=this.Jpt,s=++this.Vw;s===t.length&&t.push(Fg.zh(Fg.Xpt,this));const i=t[s];i.nd(t[s-1]),this.qpt=i}N$(){this.qpt=this.Jpt[--this.Vw]}Zpt(t){const s=this.Jpt;for(let i=0,e=s.length;i<e;++i)s[i].Zpt(t)}}}{const Dg=self._s;Dg.Xpt=class extends Dg.Uh{constructor(t){super(),this.Jpt=t,this.zpt=this.Jpt.EH(),this.Qpt=this.zpt.AW().NN(),this.tmt=!0,this.AQ=[],this.smt=[]}Jh(){this.imt(),this.Jpt=null,this.zpt=null,this.Qpt=null}imt(){Dg.Sr(this.AQ),Dg.Sr(this.smt)}EH(){return this.zpt}emt(){return this.tmt}hmt(){return this.tmt?!!this.zpt.IV():!!this.AQ.length}GV(){return this.tmt?this.zpt.GV():this.AQ}nmt(){return!!this.smt.length}rmt(){return this.smt}omt(){const t=this.GV();return t.length?t:this.smt}Bf(){this.tmt=!0,Dg.Sr(this.smt)}Ru(){this.tmt=!0}nd(t){t.emt()?this.Bf():(this.tmt=!1,Dg.Gr(this.AQ,t.AQ),Dg.Sr(this.smt))}amt(t){this.AQ.push(t)}lmt(t){this.smt.push(t)}umt(t){this.tmt=!!t}cmt(){return this.AQ}fmt(){return this.smt}dmt(t){this.tmt=!1,Dg.Sr(this.AQ),this.AQ.push(t)}pmt(t){this.tmt=!1,Dg.Gr(this.AQ,t)}mmt(t){this.tmt=!1,Dg.Sr(this.AQ);for(const s of t)this.AQ.push(s)}gmt(t,s){for(const i of s)t.has(i)||this.smt.push(i)}ymt(t){for(const s of t)this.AQ.push(s);Dg.Rr(this.smt,t)}wmt(){Dg.Sr(this.smt)}Smt(t){if(t)if(this.Qpt._$().PN().bmt()){this.emt()&&(Dg.Sr(this.AQ),Dg.Gr(this.smt,t.EH().GV()),this.tmt=!1);const s=this.smt.indexOf(t);-1!==s&&(this.AQ.push(this.smt[s]),this.smt.splice(s,1))}else this.dmt(t)}Zpt(t){Dg.Rr(this.AQ,t),Dg.Rr(this.smt,t)}}}{const Og=self._s;Og.vmt=class extends Og.Uh{constructor(t){super(),this.Mmt=t,this.Nc=this.Mmt.AW(),this.Jpt=[],this.Jpt.push(Og.zh(Og.Gmt,this,null)),this.Vw=0,this.xmt=[]}Jh(){for(const t of this.Jpt)t.Jh();Og.Sr(this.Jpt),Og.Sr(this.xmt),this.Mmt=null,this.Nc=null}TN(){return this.Mmt}AW(){return this.Nc}_$(){return this.Jpt[this.Vw]}Tmt(){return this.Jpt}_mt(){return this.Vw}I$(t){const s=this.Jpt,i=++this.Vw;if(i===s.length){const i=Og.zh(Og.Gmt,this,t);return s.push(i),i}{const e=s[i];return e.Bf(t),e}}N$(){--this.Vw}Imt(t){this.xmt.push(t)}Cmt(){this.xmt.pop()}LN(){const t=this.xmt;return 0===t.length?null:t.at(-1)}}}{const kg=self._s;kg.Gmt=class extends kg.Uh{constructor(t,s){super(),this.Jpt=t,this.Nc=this.Jpt.AW(),this.Rmt=s,this.Amt=0,this.Pmt=0,this.Emt=!1,this.Fmt=!1,this.Dmt=null,this.Omt=0,this.kmt=0,this.Lmt=null}Jh(){this.Bf(null),this.Jpt=null,this.Nc=null}Bf(t){this.Rmt=t,this.Amt=0,this.Pmt=0,this.Emt=!1,this.Fmt=!1,this.Lmt=null}Nmt(t,s){this.Rmt=t,this.Amt=0,this.Pmt=s}Bmt(){this.Amt=0,this.Pmt=0}PN(){return this.Rmt}Wmt(t){this.Rmt=t}jmt(){return this.Amt}Vmt(t){this.Amt=t}Umt(){return this.Pmt}Hmt(t){this.Pmt=t}zmt(t){this.Emt=!!t}Jmt(){return this.Emt}Xmt(t){this.Fmt=!!t}qmt(){return this.Fmt}Ymt(t){this.Dmt=t}$mt(){return this.Dmt}Kmt(t,s){this.Omt=t,this.kmt=s}BN(){return this.Omt}WN(t){this.kmt=t}Zmt(){return this.kmt}Qmt(){const t=this.Rmt;return!!t.tgt()||this.Amt<t.sgt()-1&&!!t.T$().length}igt(t){this.Lmt=t}egt(){return this.Lmt}}}{const Lg=self._s;Lg.hgt=class extends Lg.Uh{constructor(t){super(),this.Mmt=t,this.Nc=this.Mmt.AW(),this.Jpt=[],this.Vw=-1,this.qpt=null,this.ngt=[]}Jh(){Lg.Sr(this.Jpt),this.Mmt=null,this.Nc=null}rgt(t){this.ngt=t;const s=this.ngt.slice(0);this.Jpt.push(s),this.Vw=0,this.qpt=s}TN(){return this.Mmt}AW(){return this.Nc}ogt(){return this.qpt}I$(){const t=++this.Vw,s=this.Jpt;t===s.length?s.push(this.ngt.slice(0)):Lg.Gr(s[t],this.ngt),this.qpt=s[t]}N$(){this.qpt=this.Jpt[--this.Vw]}}}{const Ng=self._s;Ng.agt=class extends Ng.Uh{constructor(t){super(),this.Mmt=t,this.Nc=this.Mmt.AW(),this.Jpt=[],this.Vw=-1}Jh(){Ng.Sr(this.Jpt),this.Mmt=null,this.Nc=null}TN(){return this.Mmt}AW(){return this.Nc}lgt(){return this.Vw>=0}ogt(){return this.Jpt[this.Vw]}I$(){if(++this.Vw,this.Vw===this.Jpt.length){const t=Ng.zh(Ng.ugt,this);return this.Jpt.push(t),t}{const t=this.Jpt[this.Vw];return t.Bf(),t}}N$(){--this.Vw}cgt(t){const s=this.Jpt;for(let i=this.Vw;i>=0;--i){const e=s[i];if(e.Rc()===t)return e}return null}fgt(){return this.Jpt.slice(0,this.Vw+1)}}}{const Bg=self._s;Bg.ugt=class extends Bg.Uh{constructor(t){super(),this.dgt=t,this.Yh="",this.Vw=0,this.pgt=!1,this.mgt=NaN}Bf(){this.Yh="",this.Vw=0,this.pgt=!1,this.mgt=NaN}R$(t){this.Yh=t}Rc(){return this.Yh}O$(t){this.Vw=t}VL(){return this.Vw}Tq(){this.pgt=!0}L$(){return this.pgt}ggt(t){this.mgt=t}ygt(){return this.mgt}}}{const Wg=self._s;Wg.wgt=class extends Wg.Uh{constructor(){super(),this.Jpt=[],this.Vw=-1}Jh(){Wg.Sr(this.Jpt)}ogt(){return this.Jpt[this.Vw]}I$(){if(++this.Vw,this.Vw===this.Jpt.length){const t=[];return this.Jpt.push(t),t}return this.Jpt[this.Vw]}N$(){--this.Vw}}}{let jg=function(t,s){return t.VL()-s.VL()},Vg=function(t,s){for(let i=0,e=t.length;i<e;++i)if(t[i]!==s[i])return!1;return!0};0;const Ug=self._s;self.assert;Ug.Sgt=class extends Ug.Uh{constructor(t){super(),this.Nc=t,this.bgt=[],this.vgt=new Map,this.Mgt=[],this.Ggt=new Map,this.xgt=new Map,this.Tgt=new Map,this._gt=new Map,this.Igt=new Map,this.Cgt=new Map,this.Rgt=0,this.Agt=[],this.Pgt=[],this.Egt=[],this.Fgt=new Map,this.Dgt=new Map,this.Qpt=Ug.zh(Ug.vmt,this),this.Ogt=Ug.zh(Ug.hgt,this),this.dgt=Ug.zh(Ug.agt,this),this.kgt=[],this.Lgt=[],this.Ngt=[],this.Bgt=0,this.Wgt=0,this.jgt=0,this.Vgt=[],this.Ugt=[],this.Hgt=[],this.zgt=new Map,this.Jgt=new Map,self.c3_callFunction=(t,s)=>this.Xgt(t,s)}Jh(){this.b6(),this.Qpt.Jh(),this.Qpt=null,this.Ogt.Jh(),this.Ogt=null,Ug.Sr(this.Lgt),Ug.Sr(this.Ngt),this.Nc=null,Ug.Sr(this.bgt),this.vgt.clear()}i_(t){const s=Ug.zh(Ug.qgt,this,t);this.bgt.push(s),this.vgt.set(s.Rc().toLowerCase(),s)}Ygt(t){this.kgt.push(t)}$gt(){for(const t of this.Dgt.values())t.Kgt();for(const t of this.Fgt.values())t.$gt();for(const t of this.Dgt.values())t.$gt();for(const t of this.bgt)t.$gt();for(const t of this.bgt)t.H4();for(const t of this.kgt)t.$gt(!1);Ug.Sr(this.kgt),this.Ogt.rgt(this.Egt)}AW(){return this.Nc}U4(t){return this.vgt.get(t.toLowerCase())||null}Zgt(t){this.Mgt.push(t),this.Ggt.set(t.Qgt(),t)}tyt(t){this.xgt.set(t.J1(),t)}syt(t){this.Tgt.set(t.J1(),t)}iyt(t){this._gt.set(t.J1(),t)}eyt(t){switch(t.hyt()){case 0:this.Fgt.set(t.nyt().toLowerCase(),t);break;case 1:this.Dgt.set(t.nyt().toLowerCase(),t)}}ryt(t){this.Cgt.set(t.J1(),t),t.h0()?this.Agt.push(t):this.Pgt.push(t)}oyt(t){t.length>=2&&t.sort(jg);let s=this.Igt.get(t.length);s||(s=[],this.Igt.set(t.length,s));for(let i=0,e=s.length;i<e;++i){const e=s[i];if(Vg(t,e))return e}return s.push(t),t}ayt(t){return this.Egt.push(t.lyt()),this.Rgt++}NN(){return this.Qpt}uyt(){return this.NN()._$()}PN(){return this.uyt().PN()}cyt(){const t=this.uyt();return t.PN().fyt(t.jmt())}dyt(){const t=this.uyt();return t.PN().pyt(t.Umt())}myt(){return this.Ogt}C$(){return this.dgt}gyt(t){const s=[];for(t=t.yyt();t;)Ug.Fh(s,t.wyt()),t=t.yyt();return s}Syt(t){const s={};for(const i of this.gyt(t))s[i.byt()]=i.vyt();return Object.create(Object.prototype,s)}Myt(t){return this.Cgt.get(t)||null}Gyt(t){return this.xgt.get(t)||null}xyt(t){return this.Tgt.get(t)||null}Tyt(t){return this._gt.get(t)||null}_N(t){return this.Fgt.get(t.toLowerCase())||null}_yt(t,s){let i=this.Dgt.get((t.Rc()+"."+s).toLowerCase());if(i)return i;if(!t.B1())for(const e of t.LV())if(i=this.Dgt.get((e.Rc()+"."+s).toLowerCase()),i)return i;return null}Iyt(){return this.Agt}Cyt(){return this.Pgt}Ryt(t){for(const t of this.Agt)t.Ayt();if(t)for(const t of this.Pgt)t.nT()&&t.Ayt()}Pyt(t){return this.Ggt.get(t.toLowerCase())||null}Eyt(t){const s=this.xgt.get(t);return s&&s.Fyt()?s:null}Dyt(){return this.Mgt}Oyt(){for(const t of this.Mgt)t.kyt()}Lyt(){for(const t of this.bgt)t.Nyt()}Byt(t){this.Lyt(),this.Bgt++;for(const s of t.Z6()){const t=s.g4();t&&(this.Nc.Wyt(s),t.IR(),this.Nc.jyt())}this.Bgt--}async Vyt(t){this.Lyt(),this.Bgt++;for(const s of this.Uyt(t))await this.Nc.Hyt(s);this.Bgt--}*Uyt(t){for(const s of t.Z6()){const t=s.g4();t&&(this.Nc.Wyt(s),yield*t.zyt(),this.Nc.jyt())}}Jyt(t,s,i,e){let h=!1;if(!t.PB())return this.Xyt(s,i,e);this.Wgt++;for(const n of t.Z6()){const t=n.g4();if(!t)continue;this.Nc.Wyt(n);for(const n of t.qyt()){const t=n.Jyt(s,i,e);h=h||t}const r=t.Jyt(s,i,e);h=h||r,this.Nc.jyt()}return this.Wgt--,h}*Yyt(t,s,i,e){let h=!1;if(!t.PB())return this.Xyt(s,i,e);this.Wgt++;for(const n of t.Z6()){const t=n.g4();if(!t)continue;this.Nc.Wyt(n);for(const n of t.qyt()){const t=yield*n.Yyt(s,i,e);h=h||t}const r=yield*t.Yyt(s,i,e);h=h||r,this.Nc.jyt()}return this.Wgt--,h}Xyt(t,s,i){return this.Lgt.push([t,s,i]),!1}$yt(t,s,i){let e=null;const h=new Promise(t=>e=t);return this.Ngt.push([t,s,i,e]),h}*Kyt(){if(this.Nc.Zyt())throw new Error("should not be in breakpoint");const t=this.Nc.OB();for(;this.Ngt.length;){const[s,i,e,h]=this.Ngt.shift();h(yield*this.Yyt(t,s,i,e))}}async Qyt(){for(const t of this.Kyt())await this.Nc.Hyt(t)}twt(t,s,i,e){let h=!1;const n=t.PB(),r=n.g4();if(!r)return;this.Wgt++,this.Nc.Wyt(n);const o=r.qyt();for(let t=0,n=o.length;t<n;++t){const n=o[t].twt(s,i,e);h=h||n}const a=r.twt(s,i,e);return h=h||a,this.Nc.jyt(),this.Wgt--,h}*swt(t,s,i,e){let h=!1;const n=t.PB(),r=n.g4();if(!r)return;this.Wgt++,this.Nc.Wyt(n);const o=r.qyt();for(let t=0,n=o.length;t<n;++t){const n=yield*o[t].swt(s,i,e);h=h||n}const a=yield*r.swt(s,i,e);return h=h||a,this.Nc.jyt(),this.Wgt--,h}iwt(){return this.Wgt}ewt(){return this.iwt()>0}hwt(){return++this.Wgt}nwt(){--this.Wgt}rwt(){return this.Bgt>0}FV(){return this.rwt()||this.ewt()}c6(t){for(const[s,i,e]of this.Lgt)this.Jyt(t,s,i,e);Ug.Sr(this.Lgt)}PV(t){t?this.jgt++:this.jgt--}BH(){return this.jgt>0}owt(t){for(let s=0,i=t.length;s<i;++s)t[s].awt().Ru()}lwt(t){for(let s=0,i=t.length;s<i;++s)t[s].awt().$pt()}E$(t){for(let s=0,i=t.length;s<i;++s)t[s].awt().Kpt()}D$(t){for(let s=0,i=t.length;s<i;++s)t[s].awt().N$()}EN(t){const s=new Set,i=this.Qpt.Tmt(),e=this.Qpt._mt();for(let h=0;h<=e;++h){const e=i[h].egt();if(e)for(const i of e)t&&t.has(i)||s.add(i)}return s}uwt(t){const s=new Set([...t]),i=this.EN(s);if(i.size>0){for(const t of i)t.awt().$pt();return[...i]}return null}cwt(){const t=Ug.zh(Ug.fwt,this);return this.Vgt.push(t),t}dwt(){return this.Vgt}pwt(){if(!this.Vgt.length)return;const t=this.uyt();let s=!1;this.Bgt++;for(let i=0,e=this.Vgt.length;i<e;++i){const e=this.Vgt[i];e.mwt()&&e.gwt(t),e.ywt()&&(s=!0)}s&&(this.wwt(),t.Bf(null)),this.Bgt--}async Swt(){if(!this.Vgt.length)return;const t=this.uyt();let s=!1;this.Bgt++;for(let i=0,e=this.Vgt.length;i<e;++i){const e=this.Vgt[i];e.mwt()&&await e.bwt(t),e.ywt()&&(s=!0)}s&&(this.wwt(),t.Bf(null)),this.Bgt--}wwt(){const t=Ug.Cr(this.Vgt,t=>t.ywt());for(const s of t)s.Jh()}b6(){for(const t of this.Vgt)t.Jh();Ug.Sr(this.Vgt)}vwt(t){for(const s of this.Vgt)s.Zpt(t);for(const s of t){const t=this.Jgt.get(s);if(this.Jgt.delete(s),t)for(const{resolve:s}of t.Mwt.values())s(!0)}}Gwt(t){this.Ugt.push({promise:t,xwt:this.iwt()})}Twt(){Ug.Sr(this.Ugt)}_wt(){const t=this.iwt(),s=Promise.all(this.Ugt.filter(s=>s.xwt===t).map(t=>t.promise));return this.Ugt=this.Ugt.filter(s=>s.xwt<t),s}jN(t){const s=t.toLowerCase();this.Hgt.push(s),this.Nc.pz(Ug.MW.vW.bW.Iwt,null),this.Hgt.pop();for(const t of this.Nc.TN().dwt())t.Cwt()&&t.Rwt()===s&&t.Awt();const i=this.zgt.get(s);i&&(i.resolve(),this.zgt.delete(s))}UN(t){const s=t.toLowerCase(),i=this.zgt.get(s);if(i)return i.promise;{let t=null;const i=new Promise(s=>t=s);return this.zgt.set(s,{promise:i,resolve:t}),i}}Pwt(){if(0===this.Hgt.length)throw new Error("not in a signal");return this.Hgt.at(-1)}Ewt(t){let s=this.Jgt.get(t);return s||(s={Fwt:[],Mwt:new Map},this.Jgt.set(t,s)),s}hz(t,s){const i=this.Ewt(t),e=s.toLowerCase();i.Fwt.push(e),this.Nc.pz(t.fV().Owt().bW.Dwt,t),i.Fwt.pop();for(const s of this.Nc.TN().dwt())s.kwt()&&s.Rwt()===e&&s.Lwt(t);const h=i.Mwt.get(e);h&&(h.resolve(!1),i.Mwt.delete(e)),0===i.Fwt.length&&0===i.Mwt.size&&this.Jgt.delete(t)}nz(t,s){const i=this.Ewt(t),e=s.toLowerCase(),h=i.Mwt.get(e);if(h)return h.promise;{let t=null;const s=new Promise(s=>t=s);return i.Mwt.set(e,{promise:s,resolve:t}),s}}Nwt(t){const s=this.Ewt(t);if(!s||0===s.Fwt.length)throw new Error("not in a signal");return s.Fwt.at(-1)}b5(){return{groups:this.Bwt(),cnds:this.Wwt(),acts:this.jwt(),vars:this.Vwt(),waits:this.Uwt()}}v5(t){this.Hwt(t.groups),this.zwt(t.cnds),this.Jwt(t.acts),this.Xwt(t.vars),this.qwt(t.waits)}Bwt(){const t={};for(const s of this.Dyt())t[s.J1().toString()]=s.Ywt();return t}Hwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Eyt(t);e&&e.$wt(i)}}Wwt(){const t={};for(const[s,i]of this.Tgt){const e=i.b5();e&&(t[s.toString()]=e)}return t}zwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this.Tgt)i.v5(s.get(t)||null)}jwt(){const t={};for(const[s,i]of this._gt){const e=i.b5();e&&(t[s.toString()]=e)}return t}Jwt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[t,i]of this._gt)i.v5(s.get(t)||null)}Vwt(){const t={};for(const[s,i]of this.Cgt)i.Kwt()||!i.h0()&&!i.nT()||(t[s.toString()]=i.Qht());return t}Xwt(t){for(const[s,i]of Object.entries(t)){const t=parseInt(s,10),e=this.Myt(t);e&&e.Ont(i)}}Uwt(){return this.Vgt.filter(t=>!t.Zwt()).map(t=>t.b5())}qwt(t){this.b6();for(const s of t){const t=Ug.fwt.Qwt(this,s);t&&this.Vgt.push(t)}}tSt(){return[...this.Nc.OB().Z6()].map(t=>t.g4()).filter(t=>t).map(t=>t.sSt())}iSt(t){for(;t;){const s=t.yyt();if(s instanceof Ug.eSt)return s;t=s}return null}Xgt(t,s){Array.isArray(s)||(s=[]);const i=this._N(t.toLowerCase());if(!i)return null;if(!i._u())return i.IN();const e=i.hSt();if(s.length<e.length){s=s.slice(0);do{s.push(e[s.length].lyt())}while(s.length<e.length)}const h=i.RN();return h.FN(h.AN(),!1,i.ON(),i.IN(),...s)}}}{const Hg=self._s;Hg.qgt=class extends Hg.Uh{constructor(t,s){super(),this.Mmt=t,this.Nc=t.AW(),this.Yh=s[0],this.nSt=[],this.rSt=new Map,this.oSt=new Map,this.aSt=new Map,this.lSt=!1,this.uSt=[],this.cSt=[],this.fSt=new Set;for(const t of s[1])this.dSt(t,null,this.nSt);this.pSt=this.Nc.Mz()?{type:"sheet",name:this.Yh,mSt:0,children:[]}:null}Jh(){this.Mmt=null,this.Nc=null}dSt(t,s,i){switch(t[0]){case 0:case 3:this.gSt(t,s,i);break;case 1:this.ySt(t,s,i);break;case 2:this.wSt(t,s,i);break;case 4:this.SSt(t,s);break;case 5:this.bSt(t,s,i);break;case 6:this.vSt(t,s);break;default:throw new Error("invalid event type")}}gSt(t,s,i){const e=Hg.MSt.i_(this,s,t);if(e.bmt()){i.push(e);const t=e.GSt();for(let s=0,i=t.length;s<i;++s)t[s].xSt()&&this.TSt(e,s)}else e.xSt()?this.TSt(e,0):i.push(e)}SSt(t,s){const i=Hg.eSt._St(this,s,t);this.Mmt.eyt(i)}vSt(t,s){const i=Hg.eSt.ISt(this,s,t);this.Mmt.eyt(i)}ySt(t,s,i){const e=Hg.CSt.i_(this,s,t);i.push(e)}wSt(t,s,i){const e=Hg.RSt.i_(this,s,t);i.push(e)}bSt(t,s,i){const e=Hg.ASt.i_(this,s,t);i.push(e)}TSt(t,s){t.bmt()||this.Mmt.Ygt(t);const i=t.fyt(s),e=i.PSt(),h=i.EH();if(i.ESt()){let n=this.oSt.get(h);n||(n=new Map,this.oSt.set(h,n));const r=i.FSt().toLowerCase();let o=n.get(e);o||(o=new Map,n.set(e,o));let a=o.get(r);a||(a=[],o.set(r,a)),a.push([t,s])}else{let n=this.rSt.get(h);n||(n={DSt:new Map,OSt:new Map},this.rSt.set(h,n));const r=i.EX();let o;r?(o=n.OSt.get(r),o||(o=new Map,n.OSt.set(r,o))):o=n.DSt;let a=o.get(e);a||(a=[],o.set(e,a)),a.push([t,s])}}$gt(){const t=this.nSt;for(let s=0,i=t.length;s<i;++s){const e=s<i-1&&t[s+1]instanceof Hg.MSt&&t[s+1].kSt();t[s].$gt(e)}}LSt(t){this.uSt.push(t)}H4(){Hg.Sr(this.cSt),this.NSt(this),this.fSt.clear()}NSt(t){const s=t.cSt,i=t.fSt;for(const e of this.uSt){const h=e.BSt();e.WSt()&&t!==h&&!i.has(h)&&(i.add(h),h.NSt(t),s.push(h))}}qyt(){return this.cSt}TN(){return this.Mmt}AW(){return this.Nc}Rc(){return this.Yh}jSt(t,s){this.aSt.set(s,t)}VSt(t){return this.aSt.get(t)||null}Nyt(){this.lSt=!1}IR(){if(this.lSt)return;const t=this.Nc,s=t.USt(),i=s?performance.now():0;this.lSt=!0;const e=this.TN(),h=e.uyt();for(const s of this.nSt)s.IR(h),e.owt(s.T$()),e.Twt(),t.OV();h.Bf(null),s&&(this.pSt.mSt+=performance.now()-i)}*zyt(){if(this.lSt)return;this.lSt=!0;const t=this.Nc,s=this.TN(),i=s.uyt();for(const e of this.nSt)yield*e.zyt(i),s.owt(e.T$()),s.Twt(),t.OV();i.Bf(null)}Jyt(t,s,i){if(!s)return this.HSt(t,s,null,null);{const e=s.EH();let h=!1,n=this.HSt(t,s,e,i);h=h||n;for(const r of e.LV())n=this.HSt(t,s,r,i),h=h||n}}HSt(t,s,i,e){const h=this.rSt.get(i);if(!h)return!1;const n=e?h.OSt.get(e):h.DSt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[t,i]of r){const e=this.zSt(s,t,i);o=o||e}return o}*Yyt(t,s,i){if(!s)return yield*this.JSt(t,s,null,null);{const e=s.EH();let h=!1,n=yield*this.JSt(t,s,e,i);h=h||n;for(const r of e.LV())n=yield*this.JSt(t,s,r,i),h=h||n}}*JSt(t,s,i,e){const h=this.rSt.get(i);if(!h)return!1;const n=e?h.OSt.get(e):h.DSt;if(!n)return!1;const r=n.get(t);if(!r)return!1;let o=!1;for(const[t,i]of r){let e;e=t.XSt()?this.zSt(s,t,i):yield*this.qSt(s,t,i),o=o||e}return o}twt(t,s,i){const e=s.EH(),h=this.oSt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const s=r[t],i=this.zSt(null,s[0],s[1]);o=o||i}return o}*swt(t,s,i){const e=s.EH(),h=this.oSt.get(e);if(!h)return!1;const n=h.get(t);if(!n)return!1;const r=n.get(i);if(!r)return!1;let o=!1;for(let t=0,s=r.length;t<s;++t){const s=r[t],i=s[0],e=s[1];let h;h=i.XSt()?this.zSt(null,i,e):yield*this.qSt(null,i,e),o=o||h}return o}zSt(t,s,i){const e=this.Nc,h=this.Mmt,n=h.PN(),r=h.NN(),o=h.iwt();let a=!1;n&&h.lwt(n.AN()),h.lwt(s.AN());const l=o>1;l&&h.myt().I$();const u=r.I$(s);t&&(s.GSt()[i].EH().xV().dmt(t),t.UH()&&t.YSt());let c=!0;if(s._J()){const t=s.$St();for(let s=0,i=t.length;s<i;++s)if(!t[s].KSt(u)){c=!1;break}}return c&&(s.bmt()?s.ZSt(u,i):s.IR(u),a=u.Jmt()),r.N$(),l&&h.myt().N$(),h.D$(s.AN()),n&&h.D$(n.AN()),n||1!==o||(h.Twt(),h.BH()||e.OV()),a}*qSt(t,s,i){const e=this.Nc,h=this.Mmt,n=h.PN(),r=h.NN(),o=h.iwt();let a=!1;n&&h.lwt(n.AN()),h.lwt(s.AN());const l=o>1;l&&h.myt().I$();const u=r.I$(s);t&&(s.GSt()[i].EH().xV().dmt(t),t.UH()&&t.YSt());let c=!0;if(s._J()){const t=s.$St();for(let s=0,i=t.length;s<i;++s)if(!(yield*t[s].QSt(u))){c=!1;break}}return c&&(s.bmt()?yield*s.tbt(u,i):yield*s.zyt(u),a=u.Jmt()),r.N$(),l&&h.myt().N$(),h.D$(s.AN()),n&&h.D$(n.AN()),n||1!==o||(h.Twt(),h.BH()||e.OV()),a}sSt(){return this.pSt}}}{let zg=function(t,s){return!0};0;const Jg=self._s,Xg=[];function*qg(t,s){return!0}Jg.MSt=class extends Jg.Uh{constructor(t,s,i){super(),this.D5=t,this.Nc=t.AW(),this.sbt=s,this.ibt=null,this.Qpt=this.Nc.TN().NN(),this.ebt=[],this.hbt=[],this.nbt=!1,this.rbt=!1,this.obt=!1,this.abt=!1,this.lbt=!!i[2],this.ubt=!1,this.cbt=null,this.fbt=[],this.Prt=[],this.dbt=[],this.pbt=zg,this.mbt=qg,this.gbt=!1,this.ybt=!1,this.wbt="",this.Sbt=!1,this.bbt=null,this.pSt=null,this.u0=i[4],this.vbt=i[5],this.D5.jSt(this,this.vbt),this.Mbt=this.Nc.Mz()?{Gbt:i[3][0],xbt:i[3][1],Tbt:!1,_bt:!1,Ibt:!1,Cbt:!1}:null,this.TN().tyt(this),3===i[0]&&this.Rbt(i[1]);let e=0;for(const t of i[6]){const s=Jg.Abt.i_(this,t,e++);this.fbt.push(s),this.Pbt(s.EH())}e=0;for(const t of i[7]){const s=Jg.Ebt.i_(this,t,e++);this.Prt.push(s)}if(9===i.length){const t=i[8];for(const s of t)this.D5.dSt(s,this,this.dbt)}this.fbt.length&&(this.ubt=null===this.fbt[0].EH()&&this.fbt[0].PSt()===Jg.MW.vW.bW.Fbt),0===this.fbt.length&&(this.fbt=Xg),0===this.Prt.length&&(this.Prt=Xg),0===this.dbt.length&&(this.dbt=Xg)}static i_(t,s,i){return Jg.zh(Jg.MSt,t,s,i)}Rbt(t){this.gbt=!0,this.ybt=!!t[0],this.Sbt=this.ybt,this.wbt=t[1].toLowerCase(),this.bbt=[],this.TN().Zgt(this),this.Nc.Mz()&&(this.pSt={type:"group",name:t[1],mSt:0,children:[]})}Dbt(t){this.bbt.push(t)}Obt(t,s){for(const i of t.R4().HV())s.includes(i)||s.push(i)}kbt(t,s){if(t)if(s.includes(t)||s.push(t),t.B1())for(const i of t.UV())i.UH()&&this.Obt(i,s);else t.UH()&&this.Obt(t,s)}Pbt(t){this.kbt(t,this.ebt)}Lbt(t){this.kbt(t,this.hbt)}Nbt(){this.ebt=this.Nc.N1()}$gt(t){this.abt=!!t,this.Bbt(),this.Wbt();for(const t of this.fbt)t.$gt();if(this.Prt.length>0){let t=!1;for(const s of this.Prt)s.$gt(),s.jbt()&&(t=!0);t?(this.pbt=this.Vbt,this.mbt=this.Ubt):(this.pbt=this.Hbt,this.mbt=this.zbt)}const s=this.dbt;for(let t=0,i=s.length;t<i;++t){const e=t<i-1&&s[t+1]instanceof Jg.MSt&&s[t+1].kSt();s[t].$gt(e)}this.Mbt&&this.Jbt(),this.pSt&&this.Xbt().sSt().children.push(this.pSt)}sSt(){return this.pSt}Xbt(){let t=this._J();for(;t;){if(t.Fyt())return t;t=t._J()}return this.D5}Jbt(){const t=this.Mbt;t.Tbt=this.fbt.every(t=>t.XSt()),t._bt=this.Prt.every(t=>t.XSt()),t.Ibt=this.dbt.every(t=>t.XSt()),t.Cbt=t.Tbt&&t._bt&&t.Ibt}qbt(){let t=this;do{t.Jbt(),t=t._J()}while(t)}Bbt(){if(!this.Fyt())return;let t=this._J();for(this.obt=!0;t;){if(!t.Fyt()){this.obt=!1;break}t=t._J()}}Ybt(){const t=this.Nc.N1();if(this.ebt===t)this.hbt=t;else{this.hbt=Jg.Er(this.ebt);let t=this._J();for(;t;){for(const s of t.ebt)this.Lbt(s);t=t._J()}const s=this.TN();this.ebt=s.oyt(this.ebt),this.hbt=s.oyt(this.hbt)}}Wbt(){if(!this.$bt())return;this.cbt=[];let t=this._J();for(;t;)this.cbt.push(t),t=t._J();this.cbt.reverse()}Kbt(){this.rbt=!0,this.sbt&&this.sbt.Kbt()}tgt(){return this.rbt}T$(){return this.ebt}AN(){return this.nbt||(this.nbt=!0,this.Ybt()),this.hbt}Zbt(t){return this.ebt.includes(t)}$St(){return this.cbt}g4(){return this.D5}TN(){return this.D5.TN()}AW(){return this.Nc}_J(){return this.sbt}Qbt(t){this.ibt=t}yyt(){return this.ibt||this.sbt}tvt(){return this.vbt}svt(){return this.Mbt&&this.Mbt.xbt}ivt(){return this.svt()&&this.Mbt.Gbt}evt(t){this.Mbt.Gbt=!!t,this.qbt()}Fyt(){return this.gbt}hvt(){return this.obt}kSt(){return this.ubt}nvt(){return this.abt}Qgt(){return this.wbt}Ywt(){return this.Sbt}kyt(){this.$wt(this.ybt)}$wt(t){if(t=!!t,!this.gbt)throw new Error("not a group");if(this.Sbt!==t){this.Sbt=t;for(const t of this.bbt)t.rvt();if(this.bbt.length){const t=this.Nc.tW().g4();t&&t.H4()}}}J1(){return this.u0}bmt(){return this.lbt}xSt(){return this.fbt.length&&this.fbt[0].xSt()}ovt(){return this.ibt&&this.ibt instanceof Jg.eSt}$bt(){return this.ovt()||this.fbt.some(t=>t.xSt())}GSt(){return this.fbt}sgt(){return this.fbt.length}fyt(t){if((t=Math.floor(t))<0||t>=this.fbt.length)throw new RangeError("invalid condition index");return this.fbt[t]}avt(t){return this.fyt(t)}lvt(t){let s=t.VL();if(0===s)return!0;--s;const i=t.uvt()?t.cvt():t.EH();for(;s>=0;--s){const t=this.fbt[s];if(i===t.EH()||t.uvt()&&t.cvt()===i)return!1}return!0}fvt(){return this.Prt}dvt(){return this.Prt.length}pyt(t){if((t=Math.floor(t))<0||t>=this.Prt.length)throw new RangeError("invalid action index");return this.Prt[t]}pvt(t){t=Math.floor(t);const s=this.Prt.find(s=>s.mvt()===t);if(!s)throw new RangeError("invalid action debug index");return s}gvt(t){return(t=Math.floor(t))>=0&&t<this.Prt.length}yvt(){return this.dbt}wyt(){return this.dbt.filter(t=>t instanceof Jg.CSt)}KSt(t){t.Wmt(this);const s=this.fbt;let i=0===s.length;for(let e=0,h=s.length;e<h;++e){const h=s[e];if(t.Vmt(e),h.JX())throw new Error("trigger cannot be used as sub-event to a loop");if(h.IR())i=!0;else if(!this.lbt)return!1}return!this.lbt||i}ZSt(t,s){t.Wmt(this),t.Vmt(s),this.fbt[s].IR()&&(this.pbt(t,0)&&this.wvt(t),t.zmt(!0))}*QSt(t){t.Wmt(this);const s=this.fbt;let i=0===s.length;for(let e=0,h=s.length;e<h;++e){const h=s[e];if(t.Vmt(e),h.JX())throw new Error("trigger cannot be used as sub-event to a loop");let n;if(n=h.XSt()?h.IR():yield*h.zyt(),n)i=!0;else if(!this.lbt)return!1}return!this.lbt||i}*tbt(t,s){t.Wmt(this),t.Vmt(s);const i=this.fbt[s];let e;if(e=i.XSt()?i.IR():yield*i.zyt(),e){let s;s=this.Svt()?this.pbt(t,0):yield*this.mbt(t,0),s&&(this.bvt()?this.wvt():yield*this.vvt()),t.zmt(!0)}}IR(t){t.Wmt(this),this.ubt||t.Xmt(!1),this.lbt?this.Mvt(t):this.Gvt(t)}*zyt(t){(this.ivt()||this.Nc.xvt())&&(yield this),t.Wmt(this),this.ubt||t.Xmt(!1),this.lbt?yield*this.Tvt(t):yield*this._vt(t)}Mvt(t){const s=this.fbt;let i=0===s.length;for(let e=0,h=s.length;e<h;++e){const h=s[e];if(h.xSt())continue;t.Vmt(e);const n=h.IR();i=i||n}t.zmt(i),i&&(this.pbt(t,0)&&this.wvt(t),this.abt&&t.Xmt(!0))}*Tvt(t){const s=this.fbt;let i=0===s.length;for(let e=0,h=s.length;e<h;++e){const h=s[e];if(h.xSt())continue;let n;t.Vmt(e),n=h.XSt()?h.IR():yield*h.zyt(),i=i||n}if(t.zmt(i),i){let s;s=this.Svt()?this.pbt(t,0):yield*this.mbt(t,0),s&&(this.bvt()?this.wvt():yield*this.vvt()),this.abt&&t.Xmt(!0)}}Gvt(t){const s=this.fbt;for(let i=0,e=s.length;i<e;++i){const e=s[i];if(t.Vmt(i),!e.IR())return void t.zmt(!1)}t.zmt(!0),this.pbt(t,0)&&this.wvt(t),t.Jmt()&&this.abt&&t.Xmt(!0)}*_vt(t){const s=this.fbt;for(let i=0,e=s.length;i<e;++i){const e=s[i];let h;if(t.Vmt(i),h=e.XSt()?e.IR():yield*e.zyt(),!h)return void t.zmt(!1)}let i;t.zmt(!0),i=this.Svt()?this.pbt(t,0):yield*this.mbt(t,0),i&&(this.bvt()?this.wvt():yield*this.vvt()),t.Jmt()&&this.abt&&t.Xmt(!0)}Hbt(t,s){const i=this.Prt;for(let e=s,h=i.length;e<h;++e){const s=i[e];t.Hmt(e),s.IR()}return!0}*zbt(t,s){const i=this.Prt;for(let e=s,h=i.length;e<h;++e){const s=i[e];t.Hmt(e),s.XSt()?s.IR():yield*s.zyt()}return!0}Vbt(t,s){const i=this.TN(),e=this.Prt;for(let h=s,n=e.length;h<n;++h){const s=e[h];t.Hmt(h);const n=s.IR();if(s.Ivt()&&!0===n)return!1;s.Cvt()&&n instanceof Promise&&i.Gwt(n)}return!0}*Ubt(t,s){const i=this.TN(),e=this.Prt;for(let h=s,n=e.length;h<n;++h){const s=e[h];let n;if(t.Hmt(h),n=s.XSt()?s.IR():yield*s.zyt(),s.Ivt()&&!0===n)return!1;s.Cvt()&&n instanceof Promise&&i.Gwt(n)}return!0}Rvt(t){this.pbt(t,t.Umt())&&this.wvt()}*Avt(t){(yield*this.mbt(t,t.Umt()))&&(yield*this.vvt())}wvt(){if(!this.dbt.length)return;const t=this.Fyt()&&this.Nc.USt(),s=t?performance.now():0,i=this.Qpt,e=i.I$(this);this.rbt?this.Pvt(e):this.Evt(e),i.N$(),t&&(this.pSt.mSt+=performance.now()-s)}Pvt(t){const s=this.gbt,i=this.obt,e=this.TN(),h=this.dbt;for(let n=0,r=h.length,o=r-1;n<r;++n){const r=h[n],a=r.T$(),l=!i||!s&&n<o;l&&e.E$(a),r.IR(t),l?e.D$(a):e.owt(a)}}Evt(t){const s=this.dbt;for(let i=0,e=s.length;i<e;++i)s[i].IR(t)}*vvt(){if(!this.dbt.length)return;const t=this.Qpt,s=t.I$(this);this.rbt?yield*this.Fvt(s):yield*this.Dvt(s),t.N$()}*Fvt(t){const s=this.gbt,i=this.obt,e=this.TN(),h=this.dbt;for(let n=0,r=h.length,o=r-1;n<r;++n){const r=h[n],a=r.T$(),l=!i||!s&&n<o;l&&e.E$(a),yield*r.zyt(t),l?e.D$(a):e.owt(a)}}*Dvt(t){const s=this.dbt;for(let i=0,e=s.length;i<e;++i)yield*s[i].zyt(t)}F$(t,s){s.Bmt();const i=this.fbt;if(!this.bmt())for(let e=t.jmt()+1,h=i.length;e<h;++e){const t=i[e];if(s.Vmt(e),!t.IR())return!1}return this.pbt(s,0)&&this.wvt(s),!0}*Ovt(t,s){s.Bmt();const i=this.fbt;if(!this.bmt())for(let e=t.jmt()+1,h=i.length;e<h;++e){const t=i[e];let h;if(s.Vmt(e),h=t.XSt()?t.IR():yield*t.zyt(),!h)return!1}let e;return e=this.Svt()?this.pbt(s,0):yield*this.mbt(s,0),e&&(this.bvt()?this.wvt():yield*this.vvt()),!0}XSt(){return!this.ivt()&&!this.Nc.xvt()&&this.Mbt.Cbt}Svt(){return!this.Nc.xvt()&&this.Mbt._bt}bvt(){return!this.Nc.xvt()&&this.Mbt.Ibt}kvt(t){if(this._J()){const s=this.$St();for(let i=0,e=s.length;i<e;++i)if(!s[i].KSt(t))return!1}return!0}*Lvt(t){if(this._J()){const s=this.$St();for(let i=0,e=s.length;i<e;++i)if(!(yield*s[i].QSt(t)))return!1}return!0}Nvt(t,s,i){if(s.length>0)if(i){const i=s.map(t=>t.zs(0));t.myt().I$(),this.ibt.Bvt(i)}else this.ibt.Wvt(s);else i&&t.myt().I$()}jvt(t,s,i,e){let h,n;const r=t.length>0;let o=null;const a=this.Nc,l=this.Qpt,u=a.TN(),c=this.ibt,f=c.Cvt(),d=u.hwt()>1;if(this.Nvt(u,s,d),r&&(i?u.E$(t):u.lwt(t)),null!==e){if(e.Vvt){const t=i?e.Vvt.xV():e.Vvt.awt().Ypt(),s=e.Uvt.xV();s.pmt(t.GV()),s.wmt(),i||e.Uvt.Hvt()}else if(e.zvt){const t=e.zvt.xV();t.pmt(e.Jvt),t.wmt()}e.Xvt&&(o=u.uwt(t))}const p=l.I$(this);return i&&p.igt(t),this.kvt(p)&&(p.Wmt(this),f&&([n,h]=c.qvt()),this.Gvt(p),f&&c.Yvt(n)),l.N$(),d&&u.myt().N$(),null!==o&&u.D$(o),r&&u.D$(t),u.nwt(),h}*$vt(t,s,i,e){let h,n;(this.ivt()||this.Nc.xvt())&&(yield this);const r=t.length>0;let o=null;const a=this.Nc,l=this.Qpt,u=a.TN(),c=this.ibt,f=c.Cvt(),d=u.hwt()>1;if(this.Nvt(u,s,d),r&&(i?u.E$(t):u.lwt(t)),null!==e){if(e.Vvt){const t=i?e.Vvt.xV():e.Vvt.awt().Ypt(),s=e.Uvt.xV();s.pmt(t.GV()),s.wmt(),i||e.Uvt.Hvt()}else if(e.zvt){const t=e.zvt.xV();t.pmt(e.Jvt),t.wmt()}e.Xvt&&(o=u.uwt(t))}const p=l.I$(this);return i&&p.igt(t),(yield*this.Lvt(p))&&(p.Wmt(this),f&&([n,h]=c.qvt()),yield*this._vt(p),f&&c.Yvt(n)),l.N$(),d&&u.myt().N$(),null!==o&&u.D$(o),r&&u.D$(t),u.nwt(),h}Kvt(t,s){const i=this.AN(),e=i.length>0,h=this.Nc,n=this.Qpt,r=h.TN(),o=r.hwt()>1;o&&r.myt().I$(),this.ibt.Bvt(t),e&&(s?r.E$(i):r.lwt(i));const a=n.I$(this);this.kvt(a)&&(a.Wmt(this),this.Gvt(a)),n.N$(),o&&r.myt().N$(),e&&r.D$(i),r.nwt()}*Zvt(t,s){(this.ivt()||this.Nc.xvt())&&(yield this);const i=this.AN(),e=i.length>0,h=this.Nc,n=this.Qpt,r=h.TN(),o=r.hwt()>1;o&&r.myt().I$(),this.ibt.Bvt(t),e&&(s?r.E$(i):r.lwt(i));const a=n.I$(this);(yield*this.Lvt(a))&&(a.Wmt(this),yield*this._vt(a)),n.N$(),o&&r.myt().N$(),e&&r.D$(i),r.nwt()}FN(t,s,i,e,...h){let n,r;const o=t.length>0,a=this.Nc,l=this.Qpt,u=a.TN(),c=this.ibt,f=c.Cvt(),d=u.hwt()>1;d&&u.myt().I$(),h.length>0&&this.ibt.Bvt(h),o&&(s?u.E$(t):u.lwt(t));const p=l.I$(this);return p.Kmt(i,e),l.Imt(p),a.A$(!1),this.kvt(p)&&(p.Wmt(this),f&&([r,n]=c.qvt()),this.Gvt(p),f&&c.Yvt(r)),a.A$(!0),l.N$(),l.Cmt(),d&&u.myt().N$(),o&&u.D$(t),u.nwt(),n||p.Zmt()}}}{const Yg=self._s,$g=[];let Kg=!1;Yg.ASt=class extends Yg.Uh{constructor(t,s,i){super();const e=t.AW(),h=t.TN();this.D5=t,this.Mmt=h,this.Nc=t.AW(),this.sbt=s;const n=e.Qvt(i[1]);this.tMt=n,this.vbt=i[2],this.D5.jSt(this,this.vbt),this.Mbt=e.Mz()?{Gbt:i[3][0],xbt:i[3][1]}:null}static i_(t,s,i){return Yg.zh(Yg.ASt,t,s,i)}$gt(){const t=this.tMt,s=this.Nc.TN().Syt(this);this.tMt=t.bind(null,this.Nc.Lj(),s)}_J(){return this.sbt}yyt(){return this.sbt}g4(){return this.D5}tvt(){return this.vbt}svt(){return this.Mbt&&this.Mbt.xbt}ivt(){return this.svt()&&this.Mbt.Gbt}evt(t){this.Mbt.Gbt=!!t}kSt(){return!1}T$(){return $g}AN(){return this.sbt?this.sbt.AN():$g}IR(t){t.Wmt(this),this.Mmt.Gwt(this.sMt())}async sMt(){try{await this.tMt()}catch(t){console.error(`Unhandled exception running script %c${this.g4().Rc()}, event ${this.tvt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.Gz&&self.Gz.iMt(this),Kg||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Kg=!0)}}*zyt(t){t.Wmt(this),(this.ivt()||this.Nc.xvt())&&(yield this),this.IR(t)}XSt(){return!this.ivt()&&!this.Nc.xvt()}static eMt(){return Kg}static hMt(){Kg=!0}}}{const Zg=self._s;self.assert;Zg.eSt=class extends Zg.Uh{constructor(t,s,i){super(),this.D5=t,this.Nc=t.AW(),this.sbt=s,this.nMt=0,this.rMt="",this.oMt=0,this.aMt=[],this.lMt=!0,this.uMt="",this.zpt=null,this.cMt=!1,this.fMt=[],this.dMt=!1,this.pMt=!1,this.mMt=0,this.gMt=-1,this.yMt=new Map,this.wMt=Zg.MSt.i_(t,s,i),this.wMt.Qbt(this)}SMt(t){this.nMt=0,this.rMt=t[0],this.oMt=t[1],this.aMt=t[2].map(t=>Zg.CSt.i_(this.D5,this,t)),this.lMt=t[3],this.pMt=t[4],this.dMt=t[5]}bMt(t){this.nMt=1,this.uMt=t[1],this.zpt=this.Nc.f1(t[2]),this.wMt.Pbt(this.zpt),this.rMt=this.zpt.Rc()+"."+this.uMt,this.oMt=t[3],this.aMt=t[4].map(t=>Zg.CSt.i_(this.D5,this,t)),this.lMt=t[5],this.pMt=t[6],this.dMt=t[7],this.zpt.vMt(this)}static _St(t,s,i){const e=Zg.zh(Zg.eSt,t,s,i),h=i[1];return e.SMt(h),e}static ISt(t,s,i){const e=Zg.zh(Zg.eSt,t,s,i),h=i[1];return e.bMt(h),e}Kgt(){if(this.zpt&&this.zpt.B1())for(const t of this.zpt.UV())if(t.MMt(this.uMt)){this.cMt=!0;break}}$gt(){for(const t of this.aMt)t.$gt();this.wMt.$gt(!1)}hyt(){return this.nMt}wyt(){return this.aMt}hSt(){return this.aMt}CN(){return this.aMt.length}GMt(t){this.fMt.push(t)}xMt(){return this.fMt}Wvt(t){const s=this.aMt;for(let i=0,e=s.length;i<e;++i)s[i].Ont(t[i].zs(0))}Bvt(t){const s=this.aMt;for(let i=0,e=s.length;i<e;++i)s[i].Ont(t[i])}TMt(){return this.aMt.map(t=>t.Qht())}_J(){return this.sbt}yyt(){return this.sbt}nyt(){return this.rMt}_Mt(){return this.uMt}IMt(){return this.cMt}ON(){return this.oMt}EH(){return this.zpt}_u(){return this.lMt}IN(){switch(this.oMt){case 0:return null;case 2:return"";default:return 0}}RN(){return this.wMt}DN(){return this.dMt}Cvt(){return this.pMt}qvt(){const t=this.mMt++;let s;this.gMt=t;const i=new Promise(t=>s=t);return this.yMt.set(t,{resolve:s,CMt:0}),[t,i]}Yvt(t){const s=this.yMt.get(t);0===s.CMt&&(s.resolve(),this.yMt.delete(t)),this.gMt=-1}RMt(){return this.yMt.get(this.gMt).CMt++,this.gMt}AMt(t){this.gMt=t,this.yMt.get(t).CMt--}PMt(t,s){const i=new Map,e=[];for(const t of this.zpt.xV().GV()){const s=t.EH();if(s.MMt(this.uMt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&this.wMt.jvt(t,s,this.dMt,{zvt:this.zpt,Jvt:e}),i.size>0)for(const[e,h]of i){const i=e.EMt(this.uMt).RN(),n=[...new Set([...t,...i.T$()])];i.jvt(n,s,this.dMt,{zvt:e,Jvt:h})}}*FMt(t,s){const i=new Map,e=[];for(const t of this.zpt.xV().GV()){const s=t.EH();if(s.MMt(this.uMt)){const e=i.get(s);Array.isArray(e)?e.push(t):i.set(s,[t])}else e.push(t)}if(e.length>0&&(yield*this.wMt.$vt(t,s,this.dMt,{zvt:this.zpt,Jvt:e})),i.size>0)for(const[e,h]of i){const i=e.EMt(this.uMt).RN(),n=[...new Set([...t,...i.T$()])];yield*i.$vt(n,s,this.dMt,{zvt:e,Jvt:h})}}}}{const Qg=self._s,ty=[];Qg.CSt=class extends Qg.Uh{constructor(t,s,i){super();const e=t.TN();this.D5=t,this.Mmt=e,this.Nc=t.AW(),this.sbt=s,this.Ogt=e.myt(),this.Yh=i[1],this.Jc=i[2],this.DMt=i[3],this.Px=!!i[4],this.OMt=!!i[5],this.kMt=s instanceof Qg.eSt,this.u0=i[6],this.LMt=this.Nc.byt(i[8]),this.NMt=t=>this.Ont(t),this.BMt=()=>this.WMt(),this.jMt=!this.sbt||this.Px||this.OMt,this.Irt=this.DMt,this.VMt=-1,this.UMt()&&(this.Irt=this.Irt?1:0),!this.HMt()||this.nT()||this.Kwt()||(this.VMt=e.ayt(this)),e.ryt(this)}static i_(t,s,i){return Qg.zh(Qg.CSt,t,s,i)}$gt(){if(this.HMt()&&!this.nT()&&!this.Kwt()&&!this.zMt()){const t=this.Mmt.iSt(this);t&&t.GMt(this)}}Rc(){return this.Yh}byt(){return this.LMt}_J(){return this.sbt}yyt(){return this._J()}h0(){return!this._J()}HMt(){return!this.h0()}zMt(){return this.kMt}nT(){return this.Px}Kwt(){return this.OMt}Zi(){return 0===this.Jc}ae(){return 1===this.Jc}UMt(){return 2===this.Jc}kSt(){return!1}J1(){return this.u0}lyt(){return this.DMt}T$(){return ty}IR(t){!this.HMt()||this.nT()||this.Kwt()||this.Ont(this.lyt())}XSt(){return!0}*zyt(t){this.IR(t)}Ont(t){this.Zi()?"number"!=typeof t&&(t=parseFloat(t)):this.ae()?"string"!=typeof t&&(t=t.toString()):this.UMt()&&(t=t?1:0),this.jMt?this.Irt=t:this.Ogt.ogt()[this.VMt]=t}Qht(){return this.jMt?this.Irt:this.Ogt.ogt()[this.VMt]}WMt(){let t=this.Qht();return this.UMt()&&(t=!!t),t}Ayt(){this.Irt=this.DMt}vyt(){return{configurable:!1,enumerable:!0,get:this.BMt,set:this.NMt}}}}{const sy=self._s,iy=(self.assert,[]);sy.RSt=class extends sy.Uh{constructor(t,s,i){super();const e=t.TN();this.D5=t,this.Mmt=e,this.Nc=t.AW(),this.sbt=s,this.JMt=null,this.XMt=i[1],this.Nf=!0}static i_(t,s,i){return sy.zh(sy.RSt,t,s,i)}$gt(){this.JMt=this.Mmt.U4(this.XMt),this.D5.LSt(this);let t=this._J();for(;t;)t instanceof sy.MSt&&t.Fyt()&&t.Dbt(this),t=t._J();this.rvt(),this.Nc.Mz()&&this.D5.sSt().children.push(this.JMt.sSt())}_J(){return this.sbt}T$(){return iy}BSt(){return this.JMt}IR(t){const s=!!this._J(),i=this.Nc.N1();s&&this.Mmt.lwt(i),this.JMt.IR(),s&&this.Mmt.D$(i)}*zyt(t){const s=!!this._J(),i=this.Nc.N1();s&&this.Mmt.lwt(i),yield*this.JMt.zyt(),s&&this.Mmt.D$(i)}XSt(){return!1}WSt(){return this.Nf}rvt(){let t=this._J();for(;t;){if(t instanceof sy.MSt&&t.Fyt()&&!t.Ywt())return void(this.Nf=!1);t=t._J()}this.Nf=!0}}}{let ey=function(t,s){return t>=s?t%s:t<0?(t<=-s&&(t%=s),t<0&&(t+=s),t):t};0;const hy=self._s;self.assert;hy.qMt=class extends hy.Uh{constructor(t){super(),this.IG=t,this.Nc=t.AW()}$gt(){}static YMt(t,s){const i=s[0],e=[ly,oy,ay,uy,ny,ry];return hy.zh(e[i],t,s)}};class ny extends hy.qMt{constructor(t,s){super(t),this.$Mt=this.Nc.qZ(),this.tMt=this.Nc.Qvt(s[1]),this.tMt!==hy.MW.vW.Hrt.random&&this.tMt!==hy.MW.vW.Hrt.KMt||this.IG.ZMt()}QMt(){return this.$Mt.tGt(this.tMt,this.$Mt)}}class ry extends hy.qMt{constructor(t,s){super(t),this.sGt=null,this.rMt=s[1],this.IG.ZMt()}$gt(){const t=this.Nc.TN();this.sGt=t._N(this.rMt),this.rMt=null;const s=this.IG.RN(),i=this.sGt.RN();this.iGt=[...new Set([...s.AN(),...i.AN()])],this.iGt=t.oyt(this.iGt)}QMt(){const t=this.sGt;if(t._u()){const s=t.RN();return hy.MSt.prototype.FN.bind(s,this.iGt,t.DN(),t.ON(),t.IN())}{const s=t.IN();return()=>s}}}class oy extends hy.qMt{constructor(t,s){super(t),this.zpt=this.Nc.f1(s[1]),this.tMt=this.Nc.Qvt(s[2]),this.eGt=!!s[3],this.Qpt=this.Nc.TN().NN(),this.IG.hGt(this.zpt)}QMt(){return this.zpt.fV().tGt(this.tMt,this.zpt.lV().MX())}nGt(...t){const s=this.zpt,i=s.xV().omt(),e=i.length;if(0===e)return this.eGt?"":0;const h=ey(this.IG.rGt(),e);return this.Qpt._$().Ymt(s),this.tMt.apply(i[h].MX(),t)}oGt(t,...s){const i=this.zpt,e=i.GV(),h=e.length;if(0===h||"number"!=typeof t)return this.eGt?"":0;const n=ey(t,h);return this.Qpt._$().Ymt(i),this.tMt.apply(e[n].MX(),s)}}class ay extends hy.qMt{constructor(t,s){super(t),this.zpt=this.Nc.f1(s[1]),this.aGt=s[3],this.eGt=!!s[2],this.IG.hGt(this.zpt)}lGt(){const t=this.zpt.xV().omt(),s=t.length;return 0===s?this.eGt?"":0:t[ey(this.IG.rGt(),s)].uGt(this.aGt)}cGt(){const t=this.zpt,s=t.xV().omt(),i=s.length;if(0===i)return this.eGt?"":0;const e=s[ey(this.IG.rGt(),i)],h=e.EH().fGt(t.dGt());return e.uGt(this.aGt+h)}pGt(t){const s=this.zpt,i=s.GV(),e=i.length;if(0===e||"number"!=typeof t)return this.eGt?"":0;const h=i[ey(t,e)];let n=0;return s.B1()&&(n=h.EH().fGt(s.dGt())),h.uGt(this.aGt+n)}}class ly extends hy.qMt{constructor(t,s){super(t),this.zpt=this.Nc.f1(s[1]),this.mGt=this.zpt.nrt(s[2]),this.gGt=this.zpt.Iet(s[2]),this.tMt=this.Nc.Qvt(s[3]),this.eGt=!!s[4],this.Qpt=this.Nc.TN().NN(),this.IG.hGt(this.zpt)}yGt(...t){const s=this.zpt,i=s.xV().omt(),e=i.length;if(0===e)return this.eGt?"":0;const h=ey(this.IG.rGt(),e);this.Qpt._$().Ymt(s);const n=i[h];let r=0;return s.B1()&&(r=n.EH().wGt(s.dGt())),this.tMt.apply(n.hrt()[this.gGt+r].MX(),t)}SGt(t,...s){const i=this.zpt,e=i.GV(),h=e.length;if(0===h||"number"!=typeof t)return this.eGt?"":0;const n=ey(t,h);this.Qpt._$().Ymt(i);const r=e[n];let o=0;return i.B1()&&(o=r.EH().wGt(i.dGt())),this.tMt.apply(r.hrt()[this.gGt+o].MX(),s)}}class uy extends hy.qMt{constructor(t,s){super(t),this.bGt=null,this.vGt=s[1]}$gt(){this.bGt=this.Nc.TN().Myt(this.vGt)}MGt(){return this.bGt}}}{let cy=function(t){const s=self.GGt[t];if(!s)throw new Error("invalid expression number");return s};0;const fy=self._s;self.assert;fy.xGt=class extends fy.Uh{constructor(t,s,i){super(),this.IG=t,this.Vw=i,this.Jc=s,this.zs=null,this.TGt=!1,this.OMt=!1}static i_(t,s,i){const e=s[0],h=[dy,py,vy,gy,wy,my,Sy,dy,gy,gy,My,Gy,vy,Ty,py,by,yy,xy,_y,Iy,Cy,Ry];return fy.zh(h[e],t,e,i,s)}$gt(){}ZMt(){this.TGt=!0}hGt(t){this.TGt||t&&(t.fV().Wj()||(this.TGt=!0))}_Gt(){return this.TGt}VL(){return this.Vw}AW(){return this.IG.AW()}RN(){return this.IG.RN()}Kwt(){return this.OMt}IGt(){return 4===this.Jc}};class dy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.CGt=0;const h=e[1];this.RGt=h[0],this.AGt=[],this.PGt=null;for(let t=1,s=h.length;t<s;++t)this.AGt.push(fy.qMt.YMt(this,h[t]));this.AGt.length?this.zs=this.EGt:(this.zs=cy(this.RGt),this.OMt=!0)}FGt(t){if(t<0||t>=this.AGt.length)throw new RangeError("invalid numbered node");return this.AGt[t]}$gt(){for(const t of this.AGt)t.$gt();const t=cy(this.RGt);this.AGt.length?this.PGt=t(this):this.PGt=t}rGt(){return this.CGt}EGt(t){return this.CGt=t,this.PGt()}}class py extends dy{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.DGt,14===s&&(this.RN().Nbt(),this.IG instanceof fy.Ebt&&this.RN().Kbt())}DGt(t){this.CGt=t;const s=this.PGt();return"string"==typeof s?s:""}OGt(){return cy(this.RGt)()}}class my extends dy{constructor(t,s,i,e){super(t,s,i,e),t.kGt()>=2?this.zs=this.lU:this.zs=this.eW,this.OMt=!1}eW(t){this.CGt=t;const s=this.PGt();return this.AW().tW().eW(s)}lU(t){const s=this.eW(t);return s?s.lU():null}}class gy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.LGt=e[1],this.zs=this.NGt,this.OMt=!0}NGt(){return this.LGt}}class yy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.BGt=e[1],this.zs=this.WGt,this.OMt=!0}WGt(){return this.BGt}}class wy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.zpt=this.AW().f1(e[1]),t.kGt()>=2?this.zs=this.rV:this.zs=this.EH;const h=this.RN();h.Pbt(this.zpt),this.IG instanceof fy.Ebt?h.Kbt():h._J()&&h._J().Kbt(),this.OMt=!0}EH(){return this.zpt}rV(){return this.zpt?this.zpt.rV():null}}class Sy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.r0=this.AW().OB().J6(e[1]),t.kGt()>=2?this.zs=this.EB:this.zs=this.kB,this.OMt=!0}kB(){return this.r0}EB(){return this.r0?this.r0.EB():null}}class by extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.s9=this.AW().ast().a7(e[1]),t.kGt()>=2?this.zs=this.Vit:this.zs=this.uet,this.OMt=!0}uet(){return this.s9}Vit(){return this.s9?this.s9.Vit():null}}class vy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.jGt=e[1],this.zs=this.VGt,this.OMt=!0}VGt(){return this.jGt}}class My extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.UGt=e[1];const h=this.IG.EH();this.IG instanceof fy.Abt&&this.IG.nT()?(this.zs=this.HGt,this.OMt=!0):h&&h.B1()?(this.zs=this.zGt,this.ZMt()):(this.zs=this.HGt,this.OMt=!0)}HGt(){return this.UGt}zGt(t){t=t||0;const s=this.IG.EH(),i=s.xV(),e=i.GV();let h=null;if(e.length)h=e[t%e.length].EH();else if(i.nmt()){const s=i.rmt();h=s[t%s.length].EH()}else{if(!(s.IV()>0))return 0;{const i=s.GV();h=i[t%i.length].EH()}}return this.UGt+h.fGt(s.dGt())}}class Gy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.vGt=e[1],this.bGt=null,t.kGt()>=2?this.zs=this.JGt:this.zs=this.XGt,this.OMt=!0}$gt(){this.bGt=this.AW().TN().Myt(this.vGt)}XGt(){return this.bGt}JGt(){return null}}class xy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.qGt=e[1],this.sGt=null,t.kGt()>=2?this.zs=this.YGt:this.zs=this.$Gt,this.OMt=!0}$gt(){this.sGt=this.AW().TN()._N(this.qGt),this.qGt=null}$Gt(){return this.sGt}YGt(){return null}}class Ty extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.KGt=[],this.ZGt=[],this.OMt=!0;for(let t=1,s=e.length;t<s;++t){const s=fy.xGt.i_(this.IG,e[t],0);this.KGt.push(s),this.ZGt.push(0),s.Kwt()||(this.OMt=!1)}this.zs=this.QGt}$gt(){for(const t of this.KGt)t.$gt()}QGt(){const t=this.KGt,s=this.ZGt;for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0);return s}}class _y extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.txt=e[1],this.zs=this.Dnt,this.OMt=!0}Dnt(){return this.txt}}class Iy extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.sxt=e[1],this.zs=this.ixt,this.OMt=!0}ixt(){return this.sxt}}class Cy extends dy{constructor(t,s,i,e){super(t,s,i,e),this.zs=this.YH,this.OMt=!1}YH(){return this.PGt()}}class Ry extends fy.xGt{constructor(t,s,i,e){super(t,s,i),this.oft=this.AW().Tft().sft(e[1]),this.zs=this.hxt,this.OMt=!0}hxt(){return this.oft.Rc()}}}{let Ay=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};0;const Py=self._s,Ey=(self.assert,[]),Fy=function(){};Py.Abt=class extends Py.Uh{constructor(t,s,i){if(super(),this.wMt=t,this.Nc=t.AW(),this.Vw=i,this.tMt=this.Nc.Qvt(s[1]),this.nxt=s[3]>0,this.rxt=2===s[3],this.oxt=!!s[4],this.axt=!!s[5],this.Px=!!s[6],this.u0=s[7],this.lxt=this.wMt.bmt(),this.zpt=null,this.mGt=null,this.gGt=-1,this.$Mt=null,this.IR=Fy,this.zyt=Fy,this.Ws=[],this.uxt=[],this.cxt=!1,this.fxt=null,this.dxt=null,this.Mbt=this.Nc.Mz()?{Gbt:s[8][0],pxt:s[8][1]}:null,-1===s[0]?this.$Mt=this.Nc.qZ():(this.zpt=this.Nc.f1(s[0]),s[2]&&(this.mGt=this.zpt.nrt(s[2]),this.gGt=this.zpt.Iet(s[2])),this.wMt._J()&&this.wMt._J().Kbt()),10===s.length){let t=s[9];for(let s of t)this.Ws.push(Py.xGt.i_(this,s,this.Ws.length)),this.uxt.push(0)}0===this.Ws.length&&(this.Ws=Ey,this.uxt=Ey),this.wMt.TN().syt(this)}static i_(t,s,i){return Py.zh(Py.Abt,t,s,i)}$gt(){for(const t of this.Ws)t.$gt(),t._Gt()&&(this.cxt=!0);this.rxt?(this.IR=this.mxt,this.zyt=this.gxt):this.$Mt?(this.yxt(),this.zyt=this.wxt):this.zpt.fV().Wj()?(this.Sxt(),this.zyt=this.bxt):this.Px?(this.IR=this.vxt,this.zyt=this.Mxt):(this.IR=this.Gxt,this.zyt=this.xxt)}yxt(){const t=this.$Mt,s=this.$Mt;this.Txt(t,s,this._xt)}Sxt(){const t=this.zpt.fV(),s=this.zpt.lV().MX();this.Txt(t,s,this.Ixt)}Txt(t,s,i){const e=this.tMt,h=this.axt,n=this.Ws;if(0===n.length){const i=t.tGt(e,s);this.IR=h?function(){return Py.xor(i(),h)}:i}else if(1===n.length){const i=n[0];if(!h&&i.Kwt())this.IR=t.Cxt(e,s,i.zs(0));else{const n=t.tGt(e,s);this.IR=function(){return Py.xor(n(i.zs(0)),h)}}}else if(2===n.length){const i=n[0],r=n[1];if(!h&&i.Kwt()&&r.Kwt())this.IR=t.Rxt(e,s,i.zs(0),r.zs(0));else{const n=t.tGt(e,s);this.IR=function(){return Py.xor(n(i.zs(0),r.zs(0)),h)}}}else if(3===n.length){const i=n[0],r=n[1],o=n[2];if(!h&&i.Kwt()&&r.Kwt()&&o.Kwt())this.IR=t.Axt(e,s,i.zs(0),r.zs(0),o.zs(0));else{const n=t.tGt(e,s);this.IR=function(){return Py.xor(n(i.zs(0),r.zs(0),o.zs(0)),h)}}}else this.IR=i}J1(){return this.u0}PSt(){return this.tMt}EH(){return this.zpt}EX(){return this.mGt}Pxt(){return this.mGt?this.mGt.RX():this.zpt?this.zpt.fV():null}kGt(){const t=this.Pxt();return t?t.Ext():1}RN(){return this.wMt}AW(){return this.Nc}VL(){return this.Vw}mvt(){return this.VL()}xSt(){return this.nxt}ESt(){return this.rxt}Fxt(){return this.axt}JX(){return this.oxt}nT(){return this.Px}Dxt(){return this.Mbt.Gbt}Oxt(){return!!this.$Mt}uvt(){return this.Oxt()||this.zpt.fV().Wj()}cvt(){for(const t of this.Ws)if(t.IGt())return t.EH();return null}kxt(t){this.Mbt.Gbt=!!t,this.wMt.qbt()}Lxt(){return this.Mbt.pxt}XSt(){return!this.Dxt()&&!this.Nc.xvt()&&!this.Lxt()}Nxt(){return this.fxt||(this.fxt=new Map),this.fxt}Bxt(){return this.dxt||(this.dxt=new Map),this.dxt}_xt(){const t=this.uxt;return Ay(this.Ws,t),Py.xor(this.tMt.apply(this.$Mt,t),this.axt)}*wxt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;Ay(this.Ws,t);let s=this.tMt.apply(this.$Mt,t);return Py.vo(s)&&(s=yield*s),Py.xor(s,this.axt)}return this.IR()}Ixt(){const t=this.uxt;Ay(this.Ws,t);const s=this.zpt.lV().MX();return Py.xor(this.tMt.apply(s,t),this.axt)}*bxt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;Ay(this.Ws,t);const s=this.zpt.lV().MX();let i=this.tMt.apply(s,t);return Py.vo(i)&&(i=yield*i),Py.xor(i,this.axt)}return this.IR()}mxt(){return!0}*gxt(){return(this.Dxt()||this.Nc.xvt())&&(yield this),!0}Wxt(){return this.mGt?this.mGt.RX().Ext()>=2?this.mGt.PX():this.mGt:this.zpt.fV().Ext()>=2?this.zpt.rV():this.zpt}vxt(){const t=this.uxt;Ay(this.Ws,t);const s=this.tMt.apply(this.Wxt(),t);return this.zpt.Hvt(),s}*Mxt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;Ay(this.Ws,t);let s=this.tMt.apply(this.Wxt(),t);return Py.vo(s)&&(s=yield*s),this.zpt.Hvt(),s}return this.IR()}Gxt(){const t=this.Ws,s=this.uxt,i=this.zpt.xV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e._Gt()||(s[i]=e.zs(0))}return i.emt()?this.jxt(i):this.Vxt(i)}*xxt(){return(this.Dxt()||this.Nc.xvt())&&(yield this),this.Gxt()}Uxt(t){const s=this.Ws,i=this.uxt;for(let e=0,h=s.length;e<h;++e){const h=s[e];h._Gt()&&(i[e]=h.zs(t))}}jxt(t){const s=this.zpt,i=s.B1(),e=s.dGt(),h=this.gGt,n=h>=0,r=s.GV(),o=this.cxt,a=this.uxt,l=this.tMt,u=this.axt,c=this.lxt&&!this.nxt;t.imt();for(let s=0,f=r.length;s<f;++s){const f=r[s];let d;if(o&&this.Uxt(s),n){const t=i?f.EH().wGt(e):0;d=l.apply(f.hrt()[h+t].MX(),a)}else d=l.apply(f.MX(),a);Py.xor(d,u)?t.amt(f):c&&t.lmt(f)}return s.Hxt(!0),t.umt(!1),s.Hvt(),t.hmt()}Vxt(t){const s=this.zpt,i=s.B1(),e=s.dGt(),h=s.UH(),n=this.gGt,r=n>=0,o=this.cxt,a=this.uxt,l=this.tMt,u=this.axt,c=this.lxt&&!this.nxt,f=t.cmt(),d=t.fmt(),p=c&&!this.wMt.lvt(this),m=p?d:f;let g=0,y=!1;for(let t=0,s=m.length;t<s;++t){const s=m[t];let w;if(o&&this.Uxt(t),r){const t=i?s.EH().wGt(e):0;w=l.apply(s.hrt()[n+t].MX(),a)}else w=l.apply(s.MX(),a);Py.xor(w,u)?(y=!0,p?(f.push(s),h&&s.zxt()):(m[g]=s,h&&s.Jxt(g),++g)):p?(m[g]=s,h&&s.Xxt(g),++g):c&&(d.push(s),h&&s.qxt())}Py.wr(m,g),h&&s.Yxt(p,g);const w=y;return p&&!y&&(y=this.$xt(f)),s.Hxt(w||c),c?y:t.hmt()}$xt(t){const s=this.zpt,i=s.B1(),e=s.dGt(),h=this.cxt,n=this.gGt,r=n>=0,o=this.uxt,a=this.tMt,l=this.axt;for(let s=0,u=t.length;s<u;++s){const u=t[s];let c;if(h&&this.Uxt(s),r){const t=i?u.EH().wGt(e):0;c=a.apply(u.hrt()[n+t].MX(),o)}else c=a.apply(u.MX(),o);if(Py.xor(c,l))return!0}return!1}Kxt(t,s){return this.Ws[t].zs(s)}FSt(){const t=this.Ws;if(!t.length)throw new Error("no parameters");return t[0].OGt()}b5(){if(!this.fxt||!this.fxt.size)return null;const t={};for(const[s,i]of this.fxt.entries()){let e=i;"collmemory"===s&&(e=[...i.entries()].map(t=>[t[0].zH(),t[1].zH(),t[2]])),t[s]=e}return{ex:t}}v5(t){if(this.fxt&&(this.fxt.clear(),this.fxt=null),!t)return;const s=this.Nc,i=t.ex;if(i){const t=this.Nxt();t.clear();for(const[e,h]of Object.entries(i)){let i=h;"collmemory"===e&&(i=Py.zh(Py.Iu,h.map(t=>[s.KB(t[0]),s.KB(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),t.set(e,i)}}}}}{let Dy=function(t,s){for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(0)};0;const Oy=self._s,ky=(self.assert,[]),Ly=function(){},Ny=function*(){};Oy.Ebt=class extends Oy.Uh{constructor(t,s,i){super(),this.wMt=t;const e=t.AW();this.Nc=e,this.Vw=i,this.u0=s.length>=4?s[3]:-1,this.Zxt=s.length>=5?255&s[4]:0,this.Qxt=s.length>=5?s[4]>>8:0,this.tMt=null,this.zpt=null,this.mGt=null,this.gGt=-1,this.$Mt=null,this.tTt="",this.sTt=null,this.iTt=null,this.IR=Ly,this.zyt=Ly,this.Ws=[],this.uxt=[],this.cxt=!1,this.fxt=null,this.dxt=null;const h=-3===s[0],n=h?s[2]:s[5];if(this.Mbt=e.Mz()||h?{Gbt:n[0],pxt:n[1],index:n[2]}:null,-1===s[0])this.$Mt=e.qZ(),this.tMt=e.Qvt(s[1]);else if(-2===s[0])this.tTt=s[1];else if(h){const t=e.Qvt(s[1]);this.tMt=t,this.IR=this.eTt,this.zyt=this.hTt,this.Qxt|=8}else this.zpt=e.f1(s[0]),4&this.Qxt?(this.tTt=s[1],this.sTt=e.f1(s[2])):(s[2]&&(this.mGt=this.zpt.nrt(s[2]),this.gGt=this.zpt.Iet(s[2])),this.tMt=e.Qvt(s[1]));if(7===s.length){const t=s[6];for(const s of t)this.Ws.push(Oy.xGt.i_(this,s,this.Ws.length)),this.uxt.push(0)}0===this.Ws.length&&(this.Ws=ky,this.uxt=ky),this.nTt()&&(this.wMt.Nbt(),this.wMt.Kbt()),this.wMt.TN().iyt(this)}static i_(t,s,i){return Oy.zh(Oy.Ebt,t,s,i)}$gt(){for(const t of this.Ws)t.$gt(),t._Gt()&&(this.cxt=!0);if(this.$Mt)this.yxt(),this.zyt=this.wxt;else if(this.tTt)4&this.Qxt?this.rTt():this.oTt(),this.tTt="",this.sTt=null;else if(this.IR===this.eTt){const t=this.tMt,s=this.Nc.TN().Syt(this.wMt);this.tMt=t.bind(null,this.Nc.Lj(),s)}else this.mGt?this.Cvt()?(this.IR=this.aTt,this.zyt=this.lTt):(this.IR=this.uTt,this.zyt=this.cTt):this.zpt.fV().Wj()?(this.Sxt(),this.zyt=this.bxt):this.nT()?(this.IR=this.fTt,this.zyt=this.dTt):this.Cvt()?(this.IR=this.pTt,this.zyt=this.mTt):this.gTt()?(this.IR=this.yTt,this.zyt=this.wTt):this.Ws.length?this.Ws.every(t=>t._Gt())?(this.IR=this.STt,this.zyt=this.bTt):this.cxt?(this.IR=this.vTt,this.zyt=this.MTt):this.Ws.every(t=>t.Kwt())?(Dy(this.Ws,this.uxt),this.IR=this.GTt,this.zyt=this.xTt):(this.IR=this.TTt,this.zyt=this._Tt):(this.IR=this.GTt,this.zyt=this.xTt)}yxt(){const t=this.$Mt,s=this.$Mt;this.Txt(t,s,this._xt)}Sxt(){const t=this.zpt.fV(),s=this.zpt.lV().MX();this.Txt(t,s,this.Ixt)}oTt(){const t=this.wMt.TN(),s=t._N(this.tTt);if(s._u()){const i=!!(2&this.Qxt);this.iTt=s.RN();let e=[...new Set([...this.wMt.AN(),...this.iTt.AN()])];e=t.oyt(e);const h=!s.DN()&&this.ITt()?{Xvt:!0}:null;if(this.IR=Oy.MSt.prototype.jvt.bind(this.iTt,e,this.Ws,i,h),this.Nc.Mz()){const t=this;this.zyt=function*(){return(t.Dxt()||t.Nc.xvt())&&(yield t),yield*t.iTt.$vt(e,t.Ws,i,h)}}else this.zyt=Ny}else this.IR=Ly,this.zyt=Ny}rTt(){const t=this.wMt.TN(),s=t._yt(this.sTt,this.tTt);if(s._u()){const i=!!(2&this.Qxt);this.iTt=s.RN();let e=[...new Set([...this.wMt.AN(),...this.iTt.AN(),this.zpt,s.EH()])];e=t.oyt(e);const h=!this.zpt.B1()&&!s.EH().B1(),n=!this.zpt.B1()&&s.EH().B1(),r=this.zpt.B1();let o=null;if(!s.DN()&&this.ITt()&&(o=o||{},o.Xvt=!0),!n&&i||(o=o||{},o.Vvt=this.zpt,o.Uvt=s.EH()),h||n||r&&!s.IMt()?this.IR=Oy.MSt.prototype.jvt.bind(this.iTt,e,this.Ws,i,o):r&&(this.IR=Oy.eSt.prototype.PMt.bind(s,e,this.Ws)),this.Nc.Mz()){const t=this;h||n||r&&!s.IMt()?this.zyt=function*(){return(t.Dxt()||t.Nc.xvt())&&(yield t),yield*t.iTt.$vt(e,t.Ws,i,o)}:r&&(this.zyt=function*(){return(t.Dxt()||t.Nc.xvt())&&(yield t),yield*s.FMt(e,t.Ws)})}else this.zyt=Ny}else this.IR=Ly,this.zyt=Ny}Txt(t,s,i){const e=this.tMt,h=this.Ws;if(0===h.length)this.IR=t.tGt(e,s);else if(1===h.length){const i=h[0];if(i.Kwt())this.IR=t.Cxt(e,s,i.zs(0));else{const h=t.tGt(e,s);this.IR=function(){return h(i.zs(0))}}}else if(2===h.length){const i=h[0],n=h[1];if(i.Kwt()&&n.Kwt())this.IR=t.Rxt(e,s,i.zs(0),n.zs(0));else{const h=t.tGt(e,s);this.IR=function(){return h(i.zs(0),n.zs(0))}}}else if(3===h.length){const i=h[0],n=h[1],r=h[2];if(i.Kwt()&&n.Kwt()&&r.Kwt())this.IR=t.Axt(e,s,i.zs(0),n.zs(0),r.zs(0));else{const h=t.tGt(e,s);this.IR=function(){return h(i.zs(0),n.zs(0),r.zs(0))}}}else this.IR=i}J1(){return this.u0}Cvt(){return!!(8&this.Qxt)}Ivt(){return!!(16&this.Qxt)}gTt(){return 1===this.Zxt}nT(){return 2===this.Zxt}nTt(){return!!(1&this.Qxt)}jbt(){return this.Cvt()||this.Ivt()}EH(){return this.zpt}Pxt(){return this.mGt?this.mGt.RX():this.zpt?this.zpt.fV():null}kGt(){const t=this.Pxt();return t?t.Ext():1}RN(){return this.wMt}ITt(){let t=this.wMt;do{if(t instanceof Oy.eSt&&t.DN())return!0;t=t.yyt()}while(t);return!1}AW(){return this.Nc}VL(){return this.Vw}mvt(){return this.Mbt.index}Dxt(){return this.Mbt.Gbt}kxt(t){this.Mbt.Gbt=!!t,this.wMt.qbt()}Lxt(){return this.Mbt.pxt}XSt(){return!this.Dxt()&&!this.Nc.xvt()&&!this.Lxt()}Nxt(){return this.fxt||(this.fxt=new Map),this.fxt}Bxt(){return this.dxt||(this.dxt=new Map),this.dxt}_xt(){const t=this.uxt;return Dy(this.Ws,t),this.tMt.apply(this.$Mt,t)}*wxt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;return Dy(this.Ws,t),yield*this.tMt.apply(this.$Mt,t)}return this.IR()}Ixt(){const t=this.uxt;return Dy(this.Ws,t),this.tMt.apply(this.zpt.lV().MX(),t)}*bxt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;return Dy(this.Ws,t),yield*this.tMt.apply(this.zpt.lV().MX(),t)}return this.IR()}GTt(){const t=this.uxt,s=this.zpt.xV().GV();for(let i=0,e=s.length;i<e;++i)this.tMt.apply(s[i].MX(),t)}*xTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt,s=this.zpt.xV().GV();for(let i=0,e=s.length;i<e;++i)yield*this.tMt.apply(s[i].MX(),t)}else this.GTt()}TTt(){const t=this.uxt;Dy(this.Ws,t);const s=this.zpt.xV().GV();for(let i=0,e=s.length;i<e;++i)this.tMt.apply(s[i].MX(),t)}*_Tt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;Dy(this.Ws,t);const s=this.zpt.xV().GV();for(let i=0,e=s.length;i<e;++i)yield*this.tMt.apply(s[i].MX(),t)}else this.TTt()}STt(){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt.xV().GV();for(let h=0,n=e.length;h<n;++h){const n=e[h];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(h);i.apply(n.MX(),s)}}*bTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt.xV().GV();for(let h=0,n=e.length;h<n;++h){const n=e[h];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(h);yield*i.apply(n.MX(),s)}}else this.STt()}vTt(){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt.xV().GV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e._Gt()||(s[i]=e.zs(0))}for(let h=0,n=e.length;h<n;++h){const n=e[h];for(let i=0,e=t.length;i<e;++i){const e=t[i];e._Gt()&&(s[i]=e.zs(h))}i.apply(n.MX(),s)}}*MTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt.xV().GV();for(let i=0,e=t.length;i<e;++i){const e=t[i];e._Gt()||(s[i]=e.zs(0))}for(let h=0,n=e.length;h<n;++h){const n=e[h];for(let i=0,e=t.length;i<e;++i){const e=t[i];e._Gt()&&(s[i]=e.zs(h))}yield*i.apply(n.MX(),s)}}else this.vTt()}yTt(){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt,h=e.CTt(),n=e.xV().GV();h.RTt(i);for(let e=0,h=n.length;e<h;++e){const h=n[e];for(let i=0,h=t.length;i<h;++i)s[i]=t[i].zs(e);i.apply(h.MX(),s)}h.ATt(i)}*wTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt,h=e.CTt(),n=e.xV().GV();h.RTt(i);for(let e=0,h=n.length;e<h;++e){const h=n[e];for(let i=0,h=t.length;i<h;++i)s[i]=t[i].zs(e);yield*i.apply(h.MX(),s)}h.ATt(i)}else this.yTt()}PTt(){return this.mGt?this.mGt.RX().Ext()>=2?this.mGt.PX():this.mGt:this.zpt.fV().Ext()>=2?this.zpt.rV():this.zpt}fTt(){const t=this.uxt;return Dy(this.Ws,t),this.tMt.apply(this.PTt(),t)}*dTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.uxt;Dy(this.Ws,t);let s=this.tMt.apply(this.PTt(),t);return Oy.vo(s)&&(s=yield*s),s}return this.fTt()}uTt(){const t=this.zpt,s=t.B1(),i=t.dGt(),e=this.Ws,h=this.cxt,n=this.uxt,r=this.tMt,o=this.gGt,a=t.xV().GV();for(let t=0,s=e.length;t<s;++t){const s=e[t];s._Gt()||(n[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(h)for(let s=0,i=e.length;s<i;++s){const i=e[s];i._Gt()&&(n[s]=i.zs(t))}const u=s?l.EH().wGt(i):0;r.apply(l.hrt()[o+u].MX(),n)}}*cTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.zpt,s=t.B1(),i=t.dGt(),e=this.Ws,h=this.cxt,n=this.uxt,r=this.tMt,o=this.gGt,a=t.xV().GV();for(let t=0,s=e.length;t<s;++t){const s=e[t];s._Gt()||(n[t]=s.zs(0))}for(let t=0,l=a.length;t<l;++t){const l=a[t];if(h)for(let s=0,i=e.length;s<i;++s){const i=e[s];i._Gt()&&(n[s]=i.zs(t))}const u=s?l.EH().wGt(i):0;yield*r.apply(l.hrt()[o+u].MX(),n)}}else this.uTt()}pTt(){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt.xV().GV(),h=[];for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);h.push(i.apply(r.MX(),s))}return Promise.all(h)}*mTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.Ws,s=this.uxt,i=this.tMt,e=this.zpt.xV().GV(),h=[];for(let n=0,r=e.length;n<r;++n){const r=e[n];for(let i=0,e=t.length;i<e;++i)s[i]=t[i].zs(n);h.push(yield*i.apply(r.MX(),s))}return Promise.all(h)}return this.pTt()}aTt(){const t=this.zpt,s=t.B1(),i=t.dGt(),e=this.Ws,h=this.uxt,n=this.tMt,r=this.gGt,o=t.xV().GV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)h[s]=e[s].zs(t);const u=s?l.EH().wGt(i):0;a.push(n.apply(l.hrt()[r+u].MX(),h))}return Promise.all(a)}*lTt(){if((this.Dxt()||this.Nc.xvt())&&(yield this),this.Lxt()){const t=this.zpt,s=t.B1(),i=t.dGt(),e=this.Ws,h=this.uxt,n=this.tMt,r=this.gGt,o=t.xV().GV(),a=[];for(let t=0,l=o.length;t<l;++t){const l=o[t];for(let s=0,i=e.length;s<i;++s)h[s]=e[s].zs(t);const u=s?l.EH().wGt(i):0;a.push(yield*n.apply(l.hrt()[r+u].MX(),h))}return Promise.all(a)}return this.aTt()}async eTt(){try{await this.tMt()}catch(t){console.error(`Unhandled exception running script %c${this.wMt.g4().Rc()}, event ${this.wMt.tvt()}, action ${this.mvt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.Gz&&self.Gz.iMt(this),Oy.ASt.eMt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),Oy.ASt.hMt())}}*hTt(){return(this.Dxt()||this.Nc.xvt())&&(yield this),this.eTt()}b5(){return this.fxt&&this.fxt.size?{ex:Oy.wo(this.fxt)}:null}v5(t){if(this.fxt&&(this.fxt.clear(),this.fxt=null),!t)return;const s=t.ex;s&&(this.fxt=Oy.So(s))}}}{let By=function(t){return t instanceof rw?nw.mU(t):t.Yq()},Wy=function(t){return By(t).iW()},jy=function(t){return nw.mU(t)},Vy=function(t){return jy(t).iW()},Uy=function(t){return t instanceof ow?nw.mU(t):t},Hy=function(t){return t instanceof aw?nw.mU(t):t},zy=function(t,s,i,e){s.zH()<i.zH()?t.Set(s,i,e):t.Set(i,s,e)},Jy=function(t,s,i){s.zH()<i.zH()?t.Pu(s,i):t.Pu(i,s)},Xy=function(t,s){t.Eu(s)},qy=function(t,s,i){return s.zH()<i.zH()?t.zs(s,i):t.zs(i,s)},Yy=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,n=t.iW(),r=nw.$L(),o=nw.cyt(),a=o.RN().bmt(),l=o.EH(),u=o.Fxt(),c=s.xV(),f=l!==s;let d;dw=s,fw=f&&!u,pw=!1;let p=0,m=0,g=!1;c.emt()?(lw.m(n.rJ()),lw.offset(i,e),r.ETt(n.eW(),s,lw,cw),d=cw):a?nw.FTt()&&!c.fmt().length&&c.cmt().length?d=c.cmt():(d=c.fmt(),pw=!0):d=c.cmt(),h&&(p=n.rG(),m=n.lG(),n.Xz(i,e),n.Uz());for(const s of d)if(r.ZW(t,s)){if(g=!0,u)break;f&&mw.add(s)}return h&&(n.zz(p,m),n.Uz()),tw.Sr(cw),g},$y=function(t){const s=nw.PN().bmt(),i=dw.xV(),e=i.cmt(),h=i.fmt();i.emt()?(i.mmt(mw),s&&(tw.Sr(h),i.gmt(mw,dw.GV()))):s?pw?i.ymt(mw):(i.gmt(mw,e),i.mmt(mw)):i.mmt(mw),dw.Hvt()},Ky=function(t,s){fw&&(s&&$y(t),mw.clear(),dw=null,fw=!1)},Zy=function(t,s){const i=nw.KB(s);if(!i)return!1;const e=t.xV();if(!e.emt()&&!e.cmt().includes(i))return!1;if(t.B1()){if(i.EH().DTt(t))return e.Smt(i),t.Hvt(),!0}else if(i.EH()===t)return e.Smt(i),t.Hvt(),!0;return!1},Qy=function(t,s){const i=t.xV();if(i.emt()){i.umt(!1),i.imt();const e=t.GV();for(let t=0,h=e.length;t<h;++t){const h=e[t];h.zH()===s?i.lmt(h):i.amt(h)}return t.Hvt(),!!i.cmt().length}{const e=i.cmt();let h=0;for(let t=0,n=e.length;t<n;++t){const n=e[t];e[h]=n,n.zH()===s?i.lmt(n):++h}return tw.wr(e,h),t.Hvt(),!!e.length}};0;const tw=self._s,sw=new tw.Go,iw={},ew={},hw={};let nw=null;tw.OTt=function(t){nw=t};const rw=self.PH,ow=self.uV,aw=self.pU;ew.kTt=function(t,s){return tw.compare(this.iW().rG(),t,s)},hw.kTt=function(t,s){return tw.compare(this.x,t,s)},ew.LTt=function(t,s){return tw.compare(this.iW().lG(),t,s)},hw.LTt=function(t,s){return tw.compare(this.y,t,s)},ew.NTt=function(){return this.iW().uJ()},hw.NTt=function(){return this.lJ()},iw.BTt=function(){const t=Wy(this),s=t.kB(),i=t.rJ();return i.tl()<0||i.sl()<0||i.Za()>s.My()||i.Qa()>s.xy()},iw.WTt=function(t,s,i){const e=Uy(this).xV(),h=e.GV();if(!h.length)return!1;let n=h[0],r=n.iW(),o=n,a=tw.nn(r.rG(),r.lG(),s,i);for(let e=1,l=h.length;e<l;++e){n=h[e],r=n.iW();const l=tw.nn(r.rG(),r.lG(),s,i);(0===t&&l<a||1===t&&l>a)&&(a=l,o=n)}return e.Smt(o),!0},ew.oG=function(t){const s=this.iW();s.rG()!==t&&(s.oG(t),s.Uz())},hw.oG=function(t){this.x=+t},ew.uG=function(t){const s=this.iW();s.lG()!==t&&(s.uG(t),s.Uz())},hw.uG=function(t){this.y=+t},ew.jTt=function(t,s){const i=this.iW();i.VTt(t,s)||(i.zz(t,s),i.Uz())},hw.jTt=function(t,s){this.setPosition(t,s)},iw.UTt=function(t,s){if(!(t=Uy(t)))return;const i=By(this),e=t.vV(i);if(!e)return;const[h,n]=e.HTt(s),r=i.iW();r.rG()===h&&r.lG()===n||(r.zz(h,n),r.Uz())},iw.zTt=function(t){if(0===t)return;const s=Wy(this);s.Xz(s.JTt()*t,s.XTt()*t),s.Uz()},ew.qTt=function(t,s){if(0===s)return;const i=this.iW();t=tw.Qh(t),i.Xz(Math.cos(t)*s,Math.sin(t)*s),i.Uz()},hw.qTt=function(t,s){0!==s&&(t=tw.Qh(t),this.offsetPosition(Math.cos(t)*s,Math.sin(t)*s))},ew.rG=function(){return this.iW().rG()},hw.rG=function(){return this.x},ew.lG=function(){return this.iW().lG()},hw.lG=function(){return this.y},iw.qN=function(){return nw.qN(By(this))},ew.YTt=function(t,s){return tw.compare(this.iW().My(),t,s)},hw.YTt=function(t,s){return tw.compare(this.width,t,s)},ew.$Tt=function(t,s){return tw.compare(this.iW().xy(),t,s)},hw.$Tt=function(t,s){return tw.compare(this.height,t,s)},ew.hy=function(t){const s=this.iW();s.My()!==t&&(s.hy(t),s.Uz())},hw.hy=function(t){this.width=t},ew.ny=function(t){const s=this.iW();s.xy()!==t&&(s.ny(t),s.Uz())},hw.ny=function(t){this.height=t},ew.hP=function(t,s){const i=Wy(this);i.My()===t&&i.xy()===s||(i.hP(t,s),i.Uz())},hw.hP=function(t,s){this.$V(t,s)},ew.My=function(){return this.iW().My()},hw.My=function(){return this.width},ew.xy=function(){return this.iW().xy()},hw.xy=function(){return this.height},iw.KTt=function(){return Wy(this).rJ().Za()},iw.ZTt=function(){return Wy(this).rJ().Qa()},iw.QTt=function(){return Wy(this).rJ().tl()},iw.t_t=function(){return Wy(this).rJ().sl()},iw.s_t=function(){const t=Wy(this).rJ();return(t.Za()+t.tl())/2},iw.i_t=function(){const t=Wy(this).rJ();return(t.Qa()+t.sl())/2},iw.e_t=function(t,s){return tw.an(Wy(this).tU(),tw.Qh(s))<=tw.Qh(t)},iw.h_t=function(t){return tw.un(Wy(this).tU(),tw.Qh(t))},iw.n_t=function(t,s){const i=tw.Qh(t),e=tw.Qh(s),h=Wy(this).tU();return tw.un(e,i)?tw.un(h,i)&&!tw.un(h,e):!(!tw.un(h,i)&&tw.un(h,e))},ew.QV=function(t){const s=this.iW(),i=tw.Zh(tw.Qh(t));isNaN(i)||s.tU()===i||(s.QV(i),s.Uz())},hw.QV=function(t){this.hJ=t},iw.r_t=function(t){if(isNaN(t)||0===t)return;const s=Wy(this);s.QV(s.tU()+tw.Qh(t)),s.Uz()},iw.o_t=function(t){if(isNaN(t)||0===t)return;const s=Wy(this);s.QV(s.tU()-tw.Qh(t)),s.Uz()},iw.a_t=function(t,s){const i=Wy(this),e=i.tU(),h=tw.ln(e,tw.Qh(s),tw.Qh(t));isNaN(h)||e===h||(i.QV(h),i.Uz())},iw.l_t=function(t,s,i){const e=Wy(this),h=e.tU(),n=s-e.rG(),r=i-e.lG(),o=Math.atan2(r,n),a=tw.ln(h,o,tw.Qh(t));isNaN(a)||h===a||(e.QV(a),e.Uz())},iw.u_t=function(t,s){const i=Wy(this),e=i.tU(),h=t-i.rG(),n=s-i.lG(),r=Math.atan2(n,h);isNaN(r)||e===r||(i.QV(r),i.Uz())},ew.tU=function(){return tw.tn(this.iW().tU())},hw.tU=function(){return this.hJ},iw.c_t=function(t,s){return tw.compare(tw.xn(100*Wy(this).NF(),6),t,s)},ew.WU=function(){return this.iW().WU()},hw.WU=function(){return this.isVisible},iw.NU=function(t){const s=Wy(this);t=2===t?!s.WU():0!==t,s.WU()!==t&&(s.NU(t),nw.lW())},iw.WF=function(t){const s=tw.Kh(t/100,0,1),i=Wy(this);if(i.tX()){if(i.mrt().f_t()===s)return}else if(i.NF()===s)return;i.WF(s),nw.lW()},iw.d_t=function(t){sw.Qo(t);const s=Wy(this);s.fJ().zo(sw)||(s.dJ(sw),nw.lW())},iw.VF=function(){const t=Wy(this).fJ();return tw.In(t.Lo(),t.No(),t.Bo(),t.Wo())},iw.NF=function(){return tw.xn(100*Wy(this).NF(),6)},iw.p_t=function(t){return!!(t=Hy(t))&&Wy(this).eW()===t},iw.m_t=function(t){const s=Uy(this).xV(),i=s.GV();if(!i.length)return!1;let e=i[0];for(let s=1,h=i.length;s<h;++s){const h=i[s],n=h.iW(),r=e.iW(),o=n.eW().VL(),a=r.eW().VL();0===t?(o>a||o===a&&n.hW()>r.hW())&&(e=h):(o<a||o===a&&n.hW()<r.hW())&&(e=h)}return s.Smt(e),!0},ew.g_t=function(t,s,i){const e=this.iW(),h=0===t?e.cG():e.eJ();return tw.compare(h,s,i)},hw.g_t=function(t,s,i){const e=0===t?this.oH:this.iJ;return tw.compare(e,s,i)},ew.y_t=function(){this.iW().mJ()},hw.y_t=function(){this.pJ()},ew.w_t=function(){this.iW().yJ()},hw.w_t=function(){this.gJ()},iw.S_t=function(t){(t=Hy(t))&&Wy(this).SJ(t)},iw.b_t=function(t,s){const i=0===t;if(!(s=Uy(s)))return;const e=By(this),h=s.v_t(e);h&&e.iW().vJ(h,i)},ew.fG=function(t){const s=this.iW();s.cG()!==t&&(s.fG(t),nw.lW())},hw.fG=function(t){this.oH=t},iw.M_t=function(){return Wy(this).eW().VL()},iw.G_t=function(){return Wy(this).eW().Rc()},ew.x_t=function(){return this.iW().hW()},hw.x_t=function(){return this.zIndex},ew.T_t=function(){return this.iW().cG()},hw.T_t=function(){return this.oH},ew.__t=function(){return this.iW().eJ()},hw.__t=function(){return this.iJ},iw.I_t=function(t){const s=By(this),i=s.EH().XV().ort(t);if(!i)return;const e=i.VL();return s.iW().jz().NX(e)},iw.C_t=function(t,s){const i=By(this),e=i.EH().XV().ort(s);if(!e)return;const h=e.VL(),n=1===t,r=i.iW().jz();r.NX(h)!==n&&(r.BX(h,n),r.WX(),nw.lW())},iw.R_t=function(t,s,i){const e=By(this),h=e.EH().XV().ort(t);if(!h)return;s=Math.floor(s);const n=h.hI().rI(s);if(!n)return;"color"===n?(sw.Qo(i),i=sw):"percent"===n&&(i/=100);const r=h.VL(),o=e.iW().jz();o.VX(r,s,i)&&o.NX(r)&&nw.lW()};const lw=tw.zh(tw.Rect),uw=[],cw=[];let fw=!1,dw=null,pw=!1;const mw=new Set;function*gw(t){if(!t)return!1;const s=this.AW(),i=s.$L(),e=s.TN(),h=e.NN(),n=e.cyt(),r=n.EH(),o=n.Nxt(),a=n.Bxt(),l=h._$(),u=s.tB(),c=u-1,f=l.PN(),d=h.I$(f);let p=o.get("collmemory");p||(p=tw.zh(tw.Iu),o.set("collmemory",p)),a.get("collisionCreatedDestroyCallback")||(a.set("collisionCreatedDestroyCallback",!0),s.wf().addEventListener("instancedestroy",t=>Xy(p,t.FX)));const m=r.xV(),g=t.xV(),y=m.GV();let w=null;for(let s=0;s<y.length;++s){const h=y[s];g.emt()?(i.ETt(h.iW().eW(),t,h.iW().rJ(),uw),w=uw,i.A_t(h,t,w)):w=g.GV();for(let s=0;s<w.length;++s){const n=w[s];if(i.ZW(h,n)||i.P_t(h,n)){const s=qy(p,h,n);let i=!1,o=-2;"number"==typeof s&&(i=!0,o=s);const a=!i||o<c;if(zy(p,h,n,u),a){const s=f.T$();e.E$(s);const i=r.xV(),o=t.xV();if(i.umt(!1),o.umt(!1),r===t){const t=i.cmt();tw.Sr(t),t.push(h),t.push(n),r.Hvt()}else{const s=i.cmt(),e=o.cmt();tw.Sr(s),tw.Sr(e),s.push(h),e.push(n),r.Hvt(),t.Hvt()}yield*f.Ovt(l,d),e.D$(s)}}else Jy(p,h,n)}tw.Sr(uw)}return h.N$(),!1}iw.E_t=function(t){const s=Uy(this);t=Uy(t);const i=s.AW();if(i.F_t())return gw.call(s,t);if(!t)return!1;const e=i.$L(),h=i.TN(),n=h.NN(),r=h.cyt(),o=r.EH(),a=r.Nxt(),l=r.Bxt(),u=n._$(),c=i.tB(),f=c-1,d=u.PN(),p=n.I$(d);let m=a.get("collmemory");m||(m=tw.zh(tw.Iu),a.set("collmemory",m)),l.get("collisionCreatedDestroyCallback")||(l.set("collisionCreatedDestroyCallback",!0),i.wf().addEventListener("instancedestroy",t=>Xy(m,t.FX)));const g=o.xV(),y=t.xV(),w=g.GV();let S=null;for(let s=0;s<w.length;++s){const i=w[s];y.emt()?(e.ETt(i.iW().eW(),t,i.iW().rJ(),uw),S=uw,e.A_t(i,t,S)):S=y.GV();for(let s=0;s<S.length;++s){const n=S[s];if(e.ZW(i,n)||e.P_t(i,n)){const s=qy(m,i,n);let e=!1,r=-2;"number"==typeof s&&(e=!0,r=s);const a=!e||r<f;if(zy(m,i,n,c),a){const s=d.T$();h.E$(s);const e=o.xV(),r=t.xV();if(e.umt(!1),r.umt(!1),o===t){const t=e.cmt();tw.Sr(t),t.push(i),t.push(n),o.Hvt()}else{const s=e.cmt(),h=r.cmt();tw.Sr(s),tw.Sr(h),s.push(i),h.push(n),o.Hvt(),t.Hvt()}d.F$(u,p),h.D$(s)}}else Jy(m,i,n)}tw.Sr(uw)}return n.N$(),!1},iw.D_t=function(t){return t=Uy(t),Yy(By(this),t,0,0)},iw.O_t=function(t,s,i){return t=Uy(t),Yy(By(this),t,s,i)},iw.k_t=function(){return!0},iw.BJ=function(){return Wy(this).BJ()},iw.x5=function(){return Wy(this).x5()},iw.L_t=function(t,s){const i=Uy(this);t=Uy(t);const e=i.AW(),h=this.xV().GV();if(0===h.length)return!1;const n=t.xV();let r=n.GV();if(n.emt()){const s=[...e.N_t(t)];s.length>0&&(r=r.concat(s))}if(0===r.length)return!1;const o=n.emt()?null:new Set(r),a=new Set;for(let i=0,e=h.length;i<e;++i){const e=h[i];if(1===s)for(const s of e.RJ())s.B_t(t)&&(null===o||o.has(s))&&a.add(s);else{let i;if(0===s){if(i=e._J(),null===i)continue}else i=e.CJ();i.B_t(t)&&(null===o||o.has(i))&&a.add(i)}}return 0!==a.size&&(n.mmt(a),t.Hvt(),!0)},iw.W_t=function(t,s){const i=Uy(this);t=Uy(t);const e=i.AW(),h=i.xV().GV();if(0===h.length)return!1;const n=t.xV();let r=n.GV();if(n.emt()){const s=[...e.N_t(t)];s.length>0&&(r=r.concat(s))}if(0===r.length)return!1;const o=n.emt()?null:new Set(r),a=new Set;for(let i=0,e=h.length;i<e;++i){const e=h[i];2!==s||e.x5()||!e.B_t(t)||null!==o&&!o.has(e)||a.add(e);for(const i of 0===s?e.children():e.DJ())2===s&&i.x5()||i.B_t(t)&&(null===o||o.has(i))&&a.add(i)}return 0!==a.size&&(n.mmt(a),t.Hvt(),!0)},iw.j_t=function(t,s,i){const e=Uy(this);t=Uy(t);const h=e.AW(),n=e.xV().GV();if(0===n.length)return!1;const r=t.xV();let o=r.GV();if(r.emt()){const s=[...h.N_t(t)];s.length>0&&(o=o.concat(s))}if(0===o.length)return!1;const a=r.emt()?null:new Set(o),l=[];for(let e=0,h=n.length;e<h;++e){const h=n[e];if(0===s){const s=h.FJ(i);null!==s&&s.B_t(t)&&(null===a||a.has(s))&&l.push(s)}else if(1===s)for(const s of h.children())if(s.B_t(t)){if(0===i){(null===a||a.has(s))&&l.push(s);break}--i}}return 0!==l.length&&(r.pmt(l),t.Hvt(),!0)},iw.V_t=function(t,s,i){const e=By(this);switch(t){case 0:default:return tw.compare(e.PJ(),s,i);case 1:return tw.compare(e.U_t(),s,i)}},iw.kJ=function(t,s,i,e,h,n,r,o,a,l){t=Uy(t);const u=By(this),c=nw.dyt().EH();for(const f of t.H_t(u,c)){if(!f.fV().Zj())return;u.kJ(f,{jJ:s,UJ:i,zJ:e,XJ:h,YJ:n,QJ:r,KJ:o,sX:a,eX:l})}},iw.LJ=function(t){t=Uy(t);const s=By(this),i=nw.dyt().EH();for(const e of t.H_t(s,i))s.LJ(e)},iw.z_t=function(){const t=By(this);t.BJ()&&t._J().LJ(t)},iw.J_t=function(){const t=By(this)._J();return t?t.zH():-1},iw.X_t=function(){return By(this).PJ()},iw.q_t=function(){return By(this).U_t()},iw.Y_t=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=Wy(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.aX(),i.Uz()):i.rX(t,s)},iw.uX=function(t,s,i,e,h,n,r,o){const a=Wy(this);a.uX(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,oH:n,pX:r,mX:o})&&a.Uz()},iw.$_t=function(){const t=Wy(this);return t.fX()?t.dX().BG():0},iw.K_t=function(){const t=Wy(this);return t.fX()?t.dX().WG():0},iw.Z_t=function(t){const s=Wy(this);t=2===t?!s.WU():0!==t,s.WU()!==t&&s.NU(t)},iw._X=function(t,s){this instanceof self.PH?this.JY(t,s):this._X(t,s)},iw.Q_t=function(t,s){this instanceof self.PH?this.qY(t,""+s):this.Q_t(t,""+s)},iw.tIt=function(t){this instanceof self.PH?this.YY(t):this.tIt(t)},iw.sIt=function(){this instanceof self.PH?this.UY():this.GX()},iw.iIt=function(){this instanceof self.PH?this.HY():this.xX()},iw.eIt=function(){return this instanceof self.PH?this.zY():this.eIt()},iw.hIt=function(t){this instanceof self.PH?this.nIt(0!==t):this.rIt(0!==t)},iw.oIt=function(){return this instanceof self.PH?this.lMt():this.aIt()},ew.lIt=function(t,s,i){return tw.compare(this.Yq().Oot(t),s,i)},hw.lIt=function(t,s,i){return tw.compare(jy(this).Oot(t),s,i)},ew.uIt=function(t){return!!this.Yq().Oot(t)},hw.uIt=function(t){return!!jy(this).Oot(t)},iw.cIt=function(t,s){const i=Uy(this),e=i.xV(),h=e.GV();if(!h.length)return!1;const n=i.B1();let r=null,o=0;for(let e=0,a=h.length;e<a;++e){const a=h[e],l=n?a.EH().fGt(i.dGt()):0,u=a.Oot(l+s);(null===r||0===t&&u<o||1===t&&u>o)&&(o=u,r=a)}return e.Smt(r),!0},iw.fIt=function(t){const s=Uy(this);return s.AW().cyt().Fxt()?Qy(s,t):Zy(s,t)},iw.Iq=function(t){const s=new Set(tw.Or(t)),i=By(this).tz();return s.isSubsetOf(i)},iw.dIt=function(){return By(this).Zet()},iw.pIt=function(){return By(this).tz().size},iw.mIt=function(t){return By(this).gIt(t)},iw.yIt=function(t,s){const i=tw.Or(s);if(0===i.length)return;const e=By(this),h=new Set(e.tz());if(0===t)for(const t of i)h.add(t);else if(1===t)for(const t of i)h.delete(t);e.iz(h)},iw.wIt=function(){nw.NH(By(this))},iw.SIt=function(){return!0},iw.bIt=function(){return!0},ew.vIt=function(t,s){this.Yq().kot(t,s)},hw.vIt=function(t,s){jy(this).kot(t,s)},ew.MIt=function(t,s){const i=this.Yq(),e=i.Oot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.kot(t,e+s)},hw.MIt=function(t,s){const i=jy(this),e=i.Oot(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.kot(t,e+s)},ew.GIt=function(t,s){const i=this.Yq(),e=i.Oot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.kot(t,e-s))},hw.GIt=function(t,s){const i=jy(this),e=i.Oot(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.kot(t,e-s))},ew.xIt=function(t,s){this.Yq().kot(t,s?1:0)},hw.xIt=function(t,s){jy(this).kot(t,s?1:0)},ew.TIt=function(t){const s=this.Yq();s.kot(t,0===s.Oot(t)?1:0)},hw.TIt=function(t){const s=jy(this);s.kot(t,0===s.Oot(t)?1:0)},iw._It=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=By(this),e="state";nw.IIt(),i.C8(e),i.bG(s,e),nw.CIt(e,{RIt:!0})},iw.AIt=function(){return JSON.stringify(By(this).SG("state"))},iw.PIt=function(){return By(this).EH().Rc()},iw.EIt=function(){const t=nw.uyt().$mt();let s=t.IV();for(const i of nw.N_t(t))++s;return s},iw.FIt=function(){return nw.uyt().$mt().xV().GV().length},ew.XH=function(){return this.Yq().XH()},hw.XH=function(){return jy(this).XH()},ew.zH=function(){return this.Yq().zH()},hw.zH=function(){return jy(this).zH()},iw.Dwt=function(t){const s=By(this);return t.toLowerCase()===nw.TN().Nwt(s)},iw.hz=function(t){const s=By(this);nw.TN().hz(s,t)},iw.DIt=function(t){const s=Uy(this);return nw.TN().cwt().OIt(s.xV().GV(),t),!0},iw.kIt=function(){return By(this).YH()},tw.LIt=function(t,s,i){const e=t[1],h=t[3],n=t[4],r=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.bW,w=s.Urt,S=s.Hrt,b=Object.assign({},iw,i>=2?hw:ew);h&&(y.kTt=b.kTt,y.LTt=b.LTt,y.NTt=b.NTt,y.BTt=b.BTt,y.WTt=b.WTt,w.oG=b.oG,w.uG=b.uG,w.jTt=b.jTt,w.UTt=b.UTt,w.zTt=b.zTt,w.qTt=b.qTt,S.NIt=b.rG,S.BIt=b.lG,S.XN=b.qN),n&&(y.YTt=b.YTt,y.$Tt=b.$Tt,w.hy=b.hy,w.ny=b.ny,w.hP=b.hP,S.WIt=b.My,S.jIt=b.xy,S.VIt=b.KTt,S.UIt=b.ZTt,S.HIt=b.QTt,S.zIt=b.t_t,S.JIt=b.s_t,S.XIt=b.i_t),r&&(y.qIt=b.e_t,y.YIt=b.h_t,y.n_t=b.n_t,w.QV=b.QV,w.r_t=b.r_t,w.o_t=b.o_t,w.a_t=b.a_t,w.l_t=b.l_t,w.u_t=b.u_t,S.$It=b.tU),o&&(y.WU=b.WU,y.c_t=b.c_t,w.NU=b.NU,w.WF=b.WF,w.d_t=b.d_t,S.Opacity=b.NF,S.ColorValue=b.VF),a&&(y.p_t=b.p_t,y.m_t=b.m_t,y.g_t=b.g_t,w.y_t=b.y_t,w.w_t=b.w_t,w.S_t=b.S_t,w.b_t=b.b_t,w.fG=b.fG,S.M_t=b.M_t,S.G_t=b.G_t,S.x_t=b.x_t,S.T_t=b.T_t,S.__t=b.__t),l&&(y.I_t=b.I_t,w.C_t=b.C_t,w.R_t=b.R_t),d&&(y.k_t=b.k_t,y.BJ=b.BJ,y.x5=b.x5,y.L_t=b.L_t,y.W_t=b.W_t,y.j_t=b.j_t,y.V_t=b.V_t,w.kJ=b.kJ,w.LJ=b.LJ,w.z_t=b.z_t,S.J_t=b.J_t,S.X_t=b.X_t,S.q_t=b.q_t),p&&(w.Y_t=b.Y_t,w.uX=b.uX,S.$_t=b.$_t,S.K_t=b.K_t),u&&(y.WU=b.WU,w.NU=b.Z_t,w.KIt=b._X,w.ZIt=b.Q_t,w.QIt=b.tIt),c&&(y.tCt=b.eIt,w.sCt=b.sIt,w.iCt=b.iIt),f&&(y._u=b.oIt,w.eCt=b.hIt),m&&(y.E_t=b.E_t,y.D_t=b.D_t,y.O_t=b.O_t,s.hCt=Ky),e||(y.lIt=b.lIt,y.uIt=b.uIt,y.cIt=b.cIt,y.fIt=b.fIt,y.Iq=b.Iq,w.vIt=b.vIt,w.MIt=b.MIt,w.GIt=b.GIt,w.xIt=b.xIt,w.TIt=b.TIt,w.yIt=b.yIt,y.SIt=b.SIt,y.bIt=b.bIt,w.wIt=b.wIt,w._It||(w._It=b._It),S.AIt||(S.AIt=b.AIt),S.EIt=b.EIt,S.FIt=b.FIt,S.nCt=b.XH,S.rCt=b.zH,S.PIt=b.PIt,S.dIt=b.dIt,S.pIt=b.pIt,S.mIt=b.mIt,y.Dwt=b.Dwt,w.hz=b.hz,w.DIt=b.DIt),g&&(S.kIt=b.kIt)}}{const yw=self._s;yw.fwt=class extends yw.Uh{constructor(t){super(),this.Mmt=t,this.Jc="",this.ck=-1,this.oCt="",this.aCt=!1,this.lCt=null,this.Pmt=0,this.ebt=[],this.Lmt=null,this.uCt=new Map,this.cCt=null,this.fCt=null,this.dCt=-1,this.aMt=null,this.pCt=null,this.mCt=!1}Jh(){this.Jc="",this.ck=-1,this.oCt="",this.lCt=null,this.fCt=null,this.aMt=null,this.pCt=null,this.dCt=-1,yw.Sr(this.ebt),this.Lmt&&(this.Lmt.clear(),this.Lmt=null);for(const t of this.uCt.values())t.Jh();this.uCt.clear(),this.cCt=null}nG(){const t=this.Mmt,s=t.AW().N1(),i=t.uyt();this.lCt=i.PN(),this.Pmt=i.Umt()+1;const e=t.iSt(this.lCt);e&&(this.fCt=e,this.aMt=e.TMt(),this.pCt=e.xMt().map(t=>t.Qht()),e.Cvt()&&(this.dCt=e.RMt()));for(const t of s){const s=t.xV();s.emt()&&!this.lCt.Zbt(t)||(this.ebt.push(t),this.uCt.set(t,yw.zh(yw.gCt,s)))}const h=t.EN();this.Lmt=h.size>0?h:null}yCt(t){this.Jc="timer",this.nG(),this.ck=this.Mmt.AW().ZN()+t}wCt(t){this.Jc="walltimer",this.nG(),this.ck=this.Mmt.AW().iB()+t}SCt(t){this.Jc="signal",this.nG(),this.oCt=t.toLowerCase()}OIt(t,s){this.Jc="instance-signals",this.nG(),this.oCt=s.toLowerCase(),this.cCt=new Set(t)}bCt(t){this.Jc="promise",this.nG(),t.then(()=>this.Awt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Awt()})}vCt(){return"timer"===this.Jc}MCt(){return"walltimer"===this.Jc}Cwt(){return"signal"===this.Jc}kwt(){return"instance-signals"===this.Jc}Zwt(){return"promise"===this.Jc}Rwt(){return this.oCt}GCt(){return this.aCt}Awt(){this.aCt=!0}Lwt(t){this.cCt.delete(t),0===this.cCt.size&&this.Awt()}mwt(){return this.vCt()?this.ck<=this.Mmt.AW().ZN():this.MCt()?this.ck<=this.Mmt.AW().iB():this.GCt()}xCt(t){t.Nmt(this.lCt,this.Pmt);for(const[t,s]of this.uCt.entries()){const i=t.xV();s.Nmt(i)}this.Lmt&&t.igt([...this.Lmt]);const s=this.fCt;s&&(s.Bvt(this.aMt),s.xMt().map((t,s)=>t.Ont(this.pCt[s])),s.Cvt()&&s.AMt(this.dCt))}gwt(t){this.xCt(t),this.lCt.Rvt(t),this.fCt&&this.fCt.Cvt()&&this.fCt.Yvt(this.dCt),this.Mmt.owt(this.ebt),this.mCt=!0}async bwt(t){this.xCt(t);for(const s of this.lCt.Avt(t))await this.Mmt.AW().Hyt(s);this.fCt&&this.fCt.Cvt()&&this.fCt.Yvt(this.dCt),this.Mmt.owt(this.ebt),this.mCt=!0}ywt(){return this.mCt}Zpt(t){for(const s of this.uCt.values())s.Zpt(t);if("instance-signals"===this.Jc){for(const s of t)this.cCt.delete(s);0===this.cCt.size&&this.Awt()}}b5(){const t={},s={wt:this.Jc,t:this.ck,st:this.oCt,s:this.aCt,ev:this.lCt.J1(),sm:this.ebt.map(t=>t.J1()),dsm:this.Lmt?[...this.Lmt].map(t=>t.J1()):null,sols:t};this.lCt.gvt(this.Pmt)&&(s.act=this.lCt.pyt(this.Pmt).J1());for(const[s,i]of this.uCt)t[s.J1().toString()]=i.b5();return"instance-signals"===this.Jc&&(s.pi=[...this.cCt].map(t=>t.zH())),s}static Qwt(t,s){const i=t.AW(),e=t.Gyt(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const i=t.Tyt(s.act);if(!i)return null;h=i.VL()}const n=yw.zh(yw.fwt,t);n.ck=s.t,s.hasOwnProperty("wt")?n.Jc=s.wt:n.Jc=-1===n.ck?"signal":"timer",n.oCt=s.st,n.aCt=s.s,n.lCt=e,n.Pmt=h;for(const t of s.sm){const s=i.x$(t);s&&n.ebt.push(s)}if(Array.isArray(s.dsm))for(const t of s.dsm){const s=i.x$(t);s&&(n.Lmt||(n.Lmt=new Set),n.Lmt.add(s))}for(const[e,h]of Object.entries(s.sols)){const s=parseInt(e,10),r=i.x$(s);if(!r)continue;const o=yw.zh(yw.gCt,null);o.v5(t,h),n.uCt.set(r,o)}if("instance-signals"===n.Jc){n.cCt=new Set;for(const t of s.pi){const s=i.KB(t);s&&n.cCt.add(s)}}return n}}}{const ww=self._s;ww.gCt=class extends ww.Uh{constructor(t){super(),this.zpt=null,this.TCt=!0,this.AQ=[],t&&(this.zpt=t.EH(),this.TCt=t.emt(),ww.Gr(this.AQ,t.cmt()))}Jh(){this.zpt=null,ww.Sr(this.AQ)}Nmt(t){t.umt(this.TCt),ww.Gr(t.cmt(),this.AQ)}Zpt(t){ww.Rr(this.AQ,t)}b5(){return{sa:this.TCt,insts:this.AQ.map(t=>t.zH())}}v5(t,s){const i=t.AW();this.TCt=!!s.sa,ww.Sr(this.AQ);for(const t of s.insts){const s=i.KB(t);s&&this.AQ.push(s)}}}}{let Sw=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};0;const bw=self._s;bw._Ct=class extends bw.Uh{constructor(t){super(),this.Nc=t.runtime,this.Wc=t.id,this.Yh=t.name??"",this.ICt=!!t.Bj,this.CCt=!!t.RCt,this.ACt=!!t.zj,this.PCt=!!t.ECt,this.FCt=!!t.Xj,this.DCt=!!t.OCt,this.kCt=!!t.Qj,this.LCt=!!t.Uj,this.NCt=!!t.Yj,this.BCt=t.WCt,this.jCt=t.VCt,this.UCt=null,this.HCt=new Map,this.zCt=new Map,this.JCt=new Map,this.XCt=new Map,this.qCt=t.YCt,this.$Ct=null}Jh(){this.Nc=null}AW(){return this.Nc}Nj(){return this.Wc}Rc(){return this.Yh}KCt(){}Owt(){return this.Ext()>=2?this.$Ct.constructor:this.constructor}Ext(){return this.BCt}ZCt(t=!1){let s=this.qCt;return t&&"function"!=typeof s&&this.Ext()>=2&&(s=globalThis.hY),s}QCt(){return this.jCt}Wj(){return this.ICt}Vj(){return this.CCt}Hj(){return this.LCt}$j(){return this.NCt}Jj(){return this.ACt}EM(){return this.PCt}qj(){return this.FCt}Zj(){return this.DCt}tV(){return this.kCt}tGt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.HCt.get(t);return i||(i=t.bind(s),this.HCt.set(t,i),i)}Cxt(t,s,i){if(!s)throw new Error("missing 'this' binding");const e=Sw(this.zCt,t);let h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h),h)}Rxt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");const h=Sw(this.JCt,t),n=Sw(h,i);let r=n.get(e);return r||(r=t.bind(s,i,e),n.set(e,r),r)}Axt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");const n=Sw(this.XCt,t),r=Sw(n,i),o=Sw(r,e);let a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a),a)}tRt(t){if(!this.Wj())throw new Error("must be single-global plugin");this.UCt=t}oV(){if(!this.Wj())throw new Error("must be single-global plugin");return this.UCt}lV(){if(!this.Wj())throw new Error("must be single-global plugin");return this.UCt.lV()}sRt(){const t=this.Ext();bw.kj.iRt(this,t);const s=this.ZCt(!0);if(s){if(this.$Ct=new s,!(this.$Ct instanceof self.Dj))throw new TypeError("plugin class must derive from IPlugin")}else this.$Ct=new self.Dj;bw.kj.eRt(t)}hV(){return this.$Ct}}}{const vw=self._s;vw.hRt=class extends vw._Ct{constructor(t,s){super(t),this.nRt=s,this.rRt=0,this.oRt=new Map,this.aRt("elem-focused",t=>t.lRt()),this.aRt("elem-blurred",t=>{t&&t.uRt()})}Jh(){super.Jh()}cRt(t){const s=this.rRt++;return this.oRt.set(s,t),s}fRt(t){this.oRt.delete(t)}aRt(t,s){this.Nc.yz(this.nRt,t,t=>{const i=this.oRt.get(t.elementId);s(i,t)})}}}{const Mw=self._s;Mw.dRt=class extends Mw.Uh{constructor(t){super(),this.zpt=t,this.Nc=t.AW(),this.pRt=t.fV()}Jh(){this.zpt=null,this.Nc=null,this.pRt=null}EH(){return this.zpt}AW(){return this.Nc}fV(){return this.pRt}oq(){return this.zpt.oq()}KCt(){}Hxt(t){}RTt(t){}ATt(t){}E4(t){}B4(){}O4(){}o6(t){}mRt(){}ZCt(){return null}gRt(t,s,i){const e=Mw.zh(Mw.Event,t,s);e.yRt=this,i&&Object.assign(e,i),this.EH().JZ(e)}}}{const Gw=self._s;Gw.wRt=class extends Gw.Uh{constructor(t,s){super(),this.fi=t,this.nRt=s,this.SRt=null,this.Nc=t.AW(),this.zpt=this.fi.EH(),this.bRt=this.zpt.CTt(),this.y8=null,this.S8=null,this._z=!1,this.Cz=!1,this.$f=null,this.CA=!1}Jh(){this.CA=!0,this.vRt(),this.MRt(),this.y8=null,this.S8=null,this.$f&&(this.$f.Jh(),this.$f=null),this.fi=null,this.Nc=null,this.zpt=null,this.bRt=null}Xh(){return this.CA}Yq(){return this.fi}AW(){return this.Nc}EH(){return this.zpt}fV(){return this.bRt.fV()}CTt(){return this.bRt}GRt(){return this.fi.ZB()}pz(t){return this.Nc.pz(t,this.fi,null)}xRt(t){return this.Nc.xRt(t,this.fi,null)}wW(t){return this.Nc.wW(t,this.fi,null)}TRt(t,s){return this.Nc.TRt(t,this.fi,s)}_Rt(t,s){return this.Nc._Rt(t,this.fi,s)}IRt(t){return this.Nc.IRt(t)}CRt(t,s){this.Nc.yz(this.nRt,t,s)}RRt(t){for(const[s,i]of t)this.CRt(s,i)}ARt(t,s){this.Nc.jc(this.nRt,t,s)}PRt(t,s){return this.Nc.cW(this.nRt,t,s)}ERt(t,s){if(!this.Nc.cN())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.nRt,handler:t,data:s,responseId:null});this.ARt(t,s)}FRt(t){if(!t)throw new Error("cannot set empty component id");this.SRt=t}DRt(){if(!this.SRt)throw new Error("wrapper extension component id not set");return this.Nc.Fz(this.SRt)}Oz(t,s){if(!this.SRt)throw new Error("wrapper extension component id not set");this.Nc.Oz(this.SRt,t,s)}ORt(t){for(const[s,i]of t)this.Oz(s,i)}p$(t,s){if(!this.SRt)throw new Error("wrapper extension component id not set");this.Nc.p$(this.SRt,t,s)}m$(t,s){if(!this.SRt)throw new Error("wrapper extension component id not set");return this.Nc.m$(this.SRt,t,s)}P7(){}kRt(){}LRt(){if(!this._z){if(!this.y8)if(this.Nc.Mz()){const t=globalThis.Gz,s=this.fV();this.y8=()=>{const i=performance.now();this.P7(),t.Tz(s,performance.now()-i)}}else this.y8=()=>this.P7();this.Nc.wf().addEventListener("tick",this.y8),this._z=!0}}vRt(){this._z&&(this.Nc.wf().removeEventListener("tick",this.y8),this._z=!1)}NRt(){return this._z}BRt(){if(!this.Cz){if(!this.S8)if(this.Nc.Mz()){const t=globalThis.Gz,s=this.fV();this.S8=()=>{const i=performance.now();this.kRt(),t.Tz(s,performance.now()-i)}}else this.S8=()=>this.kRt();this.Nc.wf().addEventListener("tick2",this.S8),this.Cz=!0}}MRt(){this.Cz&&(this.Nc.wf().removeEventListener("tick2",this.S8),this.Cz=!1)}WRt(){return this.Cz}jRt(){return[]}SG(){return null}bG(t){}_ot(t){}Eot(t,s){}Tat(t,s,i){if(0===s)return;const e=this._ot(t);if("number"!=typeof e)throw new Error("expected number");this.Eot(t,e+s,i)}VRt(t,s,i,e){}URt(t,...s){t.call(this,...s)}HRt(t,...s){return t.call(this,...s)}ZCt(){return null}gRt(t,s,i){if(!this.fi.zRt())return;const e=this.GRt(),h=Gw.zh(Gw.Event,t,s);h.FX=e,i&&Object.assign(h,i),e.dispatchEvent(h)}EM(){return!1}}}{const xw=self._s;xw.JRt=class extends xw.wRt{constructor(t,s){super(t,s),this.qit=t.iW(),this.XRt=null,this.qRt=null}Jh(){if(this.XRt){const t=this.Nc.wf();t.removeEventListener("renderercontextlost",this.XRt),t.removeEventListener("renderercontextrestored",this.qRt),this.XRt=null,this.qRt=null}this.qit=null,super.Jh()}YRt(){this.$Rt()}KRt(){}ZRt(){}$Rt(){if(this.XRt)return;this.XRt=()=>this.MQ(),this.qRt=()=>this.QRt();const t=this.Nc.wf();t.addEventListener("renderercontextlost",this.XRt),t.addEventListener("renderercontextrestored",this.qRt)}MQ(){this.KRt()}QRt(){this.ZRt()}iW(){return this.qit}Wet(){return!1}Bet(){if(!this.Wet())throw new Error("original size not known");const t=this.tAt();if(t)return t.My()}Vet(){if(!this.Wet())throw new Error("original size not known");const t=this.tAt();if(t)return t.xy()}tAt(){return null}sAt(){const t=this.tAt();if(t){const s=t.kT();if(s)return[s.My(),s.xy()]}return[100,100]}iAt(){const t=this.tAt();return t?t.kP():null}eAt(){const t=this.tAt();return t?t.hAt():null}nAt(){const t=this.tAt();return!!t&&t.rAt()}HTt(t){const s=this.fi.iW();return[s.rG(),s.lG(),s.eJ()]}mRt(t,s,i){}oAt(t,s){}K3(){return!0}}}{const Tw=self._s,_w=Tw.zh(Tw.Rect);Tw.aAt=class extends Tw.JRt{constructor(t,s){super(t,s),this.lAt=this.fV().cRt(this),this.uAt=!0,this.cAt=!1,this.fAt=!1,this.dAt=-.2,this.pAt=Tw.zh(Tw.Rect,0,0,-1,-1);const i=this.Nc.XB();this.mAt=i.IY(),this.gAt=i.CY(),this.yAt=-1,this.wAt=-1,this.SAt=!1,this.LRt()}Jh(){this.fV().fRt(this.lAt),this.bAt("destroy"),this.lAt=-1,super.Jh()}vX(){if(this.Nc.cN())throw new Error("not valid in worker mode");return this.vAt("get-element")}bAt(t,s){s||(s={}),s.elementId=this.lAt,this.ARt(t,s)}vAt(t,s){return s||(s={}),s.elementId=this.lAt,this.ERt(t,s)}MAt(t,s){return s||(s={}),s.elementId=this.lAt,this.PRt(t,s)}GAt(t){t||(t={});const s=this.iW();t.elementId=this.lAt,t.isVisible=s.WU(),t.htmlIndex=s.eW().DY(),t.htmlZIndex=s.OY(),Object.assign(t,this.xAt()),this.uAt=!!t.isVisible,this.ERt("create",t),this.TAt(!0)}Z_t(t){t=!!t,this.uAt!==t&&(this.uAt=t,this.bAt("set-visible",{isVisible:t}))}P7(){this.TAt(!1)}_At(){const t=this.Nc.XB().WY();return"Android"===Tw.Ks.Zs&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}TAt(t){if(this.Yq().jY())return;const s=this.iW(),i=s.eW(),e=s.rJ();let[h,n]=i.xH(e.Za(),e.Qa()),[r,o]=i.xH(e.tl(),e.sl());const a=this.Nc.XB(),l=a.xj(),u=a._j();if(!s.WU()||!i.WU())return void this.Z_t(!1);if(!this._At()&&(r<=0||o<=0||h>=l||n>=u))return void this.Z_t(!1);_w.set(h,n,r,o);const c=a.IY(),f=a.CY(),d=i.DY(),p=s.OY();if(!t&&_w.equals(this.pAt)&&this.mAt===c&&this.gAt===f&&this.yAt===d&&this.wAt===p)return void this.Z_t(!0);this.pAt.m(_w),this.mAt=c,this.gAt=f,this.yAt=d,this.wAt=p,this.Z_t(!0);let m=null;this.fAt&&(m=i.VY()+this.dAt),this.vAt("update-position",{left:Math.round(this.pAt.Za()),top:Math.round(this.pAt.Qa()),width:Math.round(this.pAt.width()),height:Math.round(this.pAt.height()),htmlIndex:d,htmlZIndex:p,fontSize:m})}GX(){this.vAt("focus",{focus:!0})}xX(){this.vAt("focus",{focus:!1})}lRt(){this.cAt=!0}uRt(){this.cAt=!1}eIt(){return this.cAt}_X(t,s){this.bAt("set-css-style",{prop:Tw.bo(t),val:s})}Q_t(t,s){this.bAt("set-attribute",{name:t,val:s})}tIt(t){this.bAt("remove-attribute",{name:t})}IAt(){this.SAt||(this.SAt=!0,Promise.resolve().then(()=>{this.SAt=!1,this.bAt("update-state",this.xAt())}))}xAt(){}CAt(){return this.lAt}}}{const Iw=self._s,Cw=self.kX;Iw.RAt=class extends Iw.Uh{constructor(t){super(),this.Nc=t.runtime,this.Wc=t.id,this.Yh=t.name??"",this.AAt=Iw.zh(Iw.Ou),this.PAt=Iw.zh(Iw.Ou),this.BCt=t.WCt,this.qCt=t.YCt,this.EAt=null}Jh(){this.PAt.Jh(),this.AAt.Jh(),this.Nc=null}AW(){return this.Nc}Nj(){return this.Wc}Rc(){return this.Yh}KCt(){}Ext(){return this.BCt}ZCt(t=!1){let s=this.qCt;return t&&"function"!=typeof s&&this.Ext()>=2&&(s=globalThis.ZY),s}FAt(t){this.AAt.Bu(t)}h7(){return this.AAt.Wu()}T1(t){this.PAt.Bu(t)}C1(t){this.PAt.Pu(t)}GV(){return this.PAt.Wu()}sRt(){const t=this.Ext();Iw.kj.iRt(this,t);const s=this.ZCt(!0);if(s){if(this.EAt=new s,!(this.EAt instanceof Cw))throw new TypeError("behavior class must derive from IBehavior")}else this.EAt=new Cw;Iw.kj.eRt(t)}CX(){return this.EAt}}}{const Rw=self._s;Rw.DAt=class extends Rw.Uh{constructor(t){super(),this.Nc=t.AW(),this.mGt=t,this.zpt=t.EH(),this.OAt=t.RX(),this.OAt.FAt(this.zpt)}Jh(){this.Nc=null,this.mGt=null,this.zpt=null,this.OAt=null}KCt(){}EX(){return this.mGt}EH(){return this.zpt}AW(){return this.Nc}RX(){return this.OAt}}}{const Aw=self._s;Aw.kAt=class extends Aw.Uh{constructor(t,s){super(),this.Mut=t,this.nRt=s,this.fi=t.DX(),this.Nc=t.AW(),this.mGt=t.EX(),this.bRt=this.mGt.CTt(),this._z=!1,this.Cz=!1,this.l$=!1,this.$f=null}Jh(){this.vRt(),this.MRt(),this.LAt(),this.$f&&(this.$f.Jh(),this.$f=null),this.Mut=null,this.fi=null,this.Nc=null,this.mGt=null,this.bRt=null}RX(){return this.mGt.RX()}NAt(){return this.Mut}DX(){return this.fi}EH(){return this.fi.EH()}iW(){return this.fi.iW()}AW(){return this.Nc}EX(){return this.mGt}CTt(){return this.bRt}GRt(){return this.Mut.GRt()}pz(t){return this.Nc.pz(t,this.fi,this.mGt)}xRt(t){return this.Nc.xRt(t,this.fi,this.mGt)}wW(t){return this.Nc.wW(t,this.fi,this.mGt)}BAt(){}P7(){}kRt(){}WAt(){}LRt(){this._z||(this.Nc.e$(this),this._z=!0)}vRt(){this._z&&(this.Nc.h$(this),this._z=!1)}NRt(){return this._z}BRt(){this.Cz||(this.Nc.n$(this),this.Cz=!0)}MRt(){this.Cz&&(this.Nc.r$(this),this.Cz=!1)}WRt(){return this.Cz}jAt(){this.l$||(this.Nc.o$(this),this.l$=!0)}LAt(){this.l$&&(this.Nc.a$(this),this.l$=!1)}VAt(){return this.l$}jRt(){return[]}CRt(t,s){this.Nc.yz(this.nRt,t,s)}UAt(t,s){}SG(){return null}bG(t){}_ot(t){}Eot(t,s){}Tat(t,s){if(0===s)return;const i=this._ot(t);if("number"!=typeof i)throw new Error("expected number");this.Eot(t,i+s)}VRt(t,s,i,e){}URt(t,...s){t.call(this,...s)}HRt(t,...s){return t.call(this,...s)}ZCt(){return null}gRt(t,s,i){if(!this.Mut.zRt())return;const e=this.GRt(),h=Aw.zh(Aw.Event,t,s);h.HAt=e,h.FX=e.FX,i&&Object.assign(h,i),e.dispatchEvent(h)}}}{let Pw=function(t){if(t!==Fw)throw new Error("invalid internal API token")};0;const Ew=self._s;Ew.MW={},Ew.Iut={};const Fw=Ew.Is();let Dw=[],Ow=[],kw=[],Lw=null,Nw=null,Bw=null,Ww=null;const jw=new Map,Vw=new Map;Ew.kj=class extends Ew.Uh{#s=null;#t=[];#e=null;#i=[];#h=new Map;#r=null;#a=null;#n;constructor(t,s){super(),this.#s=t,this.#n=new Set(s)}zAt(t){const s=t[19],i=this.#s.Qvt(t[0]);if(!i)throw new Error("missing plugin");Ew.LIt(t,i,s);const e=s>=2?Ew._Ct:i,h=Ew.zh(e,{runtime:this.#s,Bj:t[1],RCt:t[2],zj:t[5],Xj:t[8],ECt:t[9],OCt:t[13],Qj:t[14],Uj:t[17],Yj:t[18],WCt:s,id:t[20],name:t[21],YCt:s>=2?i:null,VCt:t[22]});h.KCt(),this.#t.push(h),jw.set(i,h)}JAt(){this.#e=Ew.zh(Ew.MW.vW,{runtime:this.#s,Bj:!0}),this.#e.KCt()}XAt(t){const s=t[1],i=t[2],e=t[3],h=this.#s.Qvt(t[0]);if(!h)throw new Error("missing behavior");this.#h.set(h,()=>{const t=s>=2?Ew.RAt:h,n=Ew.zh(t,{runtime:this.#s,id:i,name:e,WCt:s,YCt:s>=2?h:null});n.KCt(),this.#i.push(n),Vw.set(h,n),!this.#r&&Ew.Iut.qAt&&n instanceof Ew.Iut.qAt?this.#r=n:!this.#a&&Ew.Iut.YAt&&n instanceof Ew.Iut.YAt&&(this.#a=n),n.sRt()})}$At(t){const s=this.#h.get(t);s&&(s(),this.#h.delete(t))}static iRt(t,s=1){if(Ew.kj.iRt!==Lw)throw new Error("invalid method");1===s&&Dw.push(t),Ow.push(t)}static eRt(t=1){if(Ew.kj.eRt!==Nw)throw new Error("invalid method");1===t&&Dw.pop(),Ow.pop()}static kH(){if(Ew.kj.kH!==Bw)throw new Error("invalid method");if(0===Dw.length)throw new Error("no init object set");return Dw.at(-1)}static Oj(t){if(Ew.kj.Oj!==Ww)throw new Error("invalid method");if(Pw(t),0===Ow.length)throw new Error("no init object set");return Ow.at(-1)}static KAt(t){kw.push(t)}static ZAt(){kw.pop()}static fz(){if(0===kw.length)throw new Error("no init properties set");return kw.at(-1)}QAt(){for(const t of this.#t)t.sRt()}static eV(t){return jw.get(t)||null}static LX(t){return Vw.get(t)||null}qZ(){return this.#e}tPt(){return this.#r}sPt(){return this.#a}Fz(t){return this.#n.has(t)}},Lw=Ew.kj.iRt,Nw=Ew.kj.eRt,Bw=Ew.kj.kH,Ww=Ew.kj.Oj}{const Uw=self._s,Hw=new Set;Uw.iPt=class extends Uw.Uh{constructor(){super(),this.ePt=0,this.uQ="",this.cQ=0,this.hPt=0,this.nPt=0,this.jy=0,this.Vy=0,this.rPt=!1,this.oPt=!1,this.aPt=null,this.lPt="",this.vA=Uw.zh(Uw.Rect),this.uPt=Uw.zh(Uw.Cl),this.cPt="",this.fPt=new self.IW(this),Hw.add(this)}Jh(){this.xA(),this.aPt&&0===this.aPt.TQ()&&this.aPt.Jh(),this.aPt=null,Hw.delete(this),this.dPt()}static MQ(){for(const t of Hw)t.lPt="",t.vA.set(0,0,0,0),t.uPt.Yl(t.vA)}pPt(t){this.uQ=t[0],this.cQ=t[1],this.hPt=t[2],this.nPt=t[3],this.jy=t[4],this.Vy=t[5],this.rPt=t[6],this.oPt=!0}mPt(t,s,i){if(i=!!i,this.aPt)throw new Error("already loaded asset");this.uQ=s;const e={OZ:i};return Uw.$r(s)&&(e.kZ="remote"),this.RW(t,e),this.aPt.NZ()}gPt(t,s){if(this.aPt)throw new Error("already loaded asset");this.uQ="",this.cQ=s.size,this.aPt=Uw.zh(Uw.LZ,t.XL(),{blob:s,size:this.cQ,kZ:"local"})}yPt(t){if(t===this)throw new Error("cannot replace with self");this.ePt++,this.xA(),this.uQ=t.uQ,this.cQ=t.cQ,this.hPt=t.hPt,this.nPt=t.nPt,this.jy=t.jy,this.Vy=t.Vy,this.rPt=t.rPt,this.oPt=t.oPt,this.aPt=t.aPt,this.lPt=t.lPt,this.vA=t.vA,this.uPt=t.uPt,this.dPt()}jZ(){return this.uQ}Fu(){return this.cQ}wPt(){return this.hPt}SPt(){return this.nPt}rAt(){return this.rPt}My(){return this.jy}xy(){return this.Vy}bPt(){return this.aPt.My()}vPt(){return this.aPt.xy()}RW(t,s){if(this.aPt)throw new Error("already got asset");s=Object.assign({},s,{url:this.jZ(),size:this.Fu()}),this.aPt=t.DZ(s)}mQ(){return this.aPt&&this.aPt.mQ()}async MK(t,s){if(!this.aPt)throw new Error("no asset");if(this.lPt)throw new Error("already loaded texture");const i=this.ePt;this.lPt="loading";const e=await this.aPt.MK(t,s);if(this.ePt!==i)return null;if(!e)return this.lPt="",null;this.lPt="loaded",this.oPt||(this.jy=e.My(),this.Vy=e.xy(),this.oPt=!0);const h=this.rPt?this.Vy:this.jy,n=this.rPt?this.jy:this.Vy;return this.vA.set(this.hPt,this.nPt,this.hPt+h,this.nPt+n),this.vA.wt(e.My(),e.xy()),this.uPt.Yl(this.vA),this.rPt&&this.uPt.su(),e}xA(){this.lPt&&(this.aPt&&this.aPt.xA(),this.lPt="",this.vA.set(0,0,0,0),this.uPt.Yl(this.vA))}kT(){return this.aPt&&"loaded"===this.lPt?this.aPt.kT():null}kP(){return this.vA}hAt(){return this.uPt}mY(){return this.fPt}MPt(){return this.aPt}async GPt(t){t||(t=await this.aPt._Q()),this.oPt||(this.jy=t.width,this.Vy=t.height,this.oPt=!0);const s=Uw.uo(this.jy,this.Vy),i=s.getContext("2d");return this.rPt?(i.rotate(Math.PI/-2),i.translate(-this.Vy,0),i.drawImage(t,this.hPt,this.nPt,this.Vy,this.jy,0,0,this.Vy,this.jy)):i.drawImage(t,this.hPt,this.nPt,this.jy,this.Vy,0,0,this.jy,this.Vy),s}async xPt(t){if(this.cPt)return this.cPt;const s=await this.GPt(t),i=await Uw.co(s);return this.cPt=URL.createObjectURL(i),this.cPt}dPt(){this.cPt&&(URL.revokeObjectURL(this.cPt),this.cPt="")}}}{const zw=self._s;zw.TPt=class extends zw.Uh{constructor(t){super(),this.Yh=t[0],this._Pt=t[1],this.oxt=!!t[2],this.ilt=t[3],this.IPt=t[4],this.CPt=!!t[5],this.u0=t[6],this.RPt=t[7].map(t=>zw.zh(zw.APt,t)),this.PPt=new self.UX(this)}static EPt(t,s){const i=zw.zh(zw.TPt,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.RPt.push(zw.APt.EPt(t)),i}Jh(){for(const t of this.RPt)t.Jh();zw.Sr(this.RPt)}FPt(t){for(const s of this.RPt)s.oq().RW(t)}DPt(t,s){return Promise.all(this.RPt.map(i=>i.oq().MK(t,s)))}OPt(){for(const t of this.RPt)t.oq().xA()}Rc(){return this.Yh}J1(){return this.u0}QX(){return this.RPt.length}sq(){return this.RPt}kPt(t){if((t=Math.floor(t))<0||t>=this.RPt.length)throw new RangeError("invalid frame");return this.RPt[t]}LPt(t,s){(s=Math.floor(s))<0?this.RPt.unshift(t):s>=this.RPt.length?this.RPt.push(t):this.RPt.splice(s,0,t)}NPt(t){if((t=Math.floor(t))<0||t>=this.RPt.length)throw new RangeError("invalid frame");this.RPt[t].Jh(),this.RPt.splice(t,1)}BPt(t){for(let s=0,i=this.RPt.length;s<i;++s)if(zw.Ke(this.RPt[s].Mq(),t))return s;return-1}WPt(t){if("string"==typeof t){const s=this.BPt(t);if(-1===s)throw new Error(`cannot find animation frame with tag ${t}`);return s}return t}HX(){return this._Pt}JX(){return this.oxt}qX(){return this.ilt}$X(){return this.IPt}ZX(){return this.CPt}jPt(){return this.PPt}}}{const Jw=self._s,Xw=(()=>{const t=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),s=new Uint8Array(t.length);for(let i=0,e=t.length;i<e;++i)s[i]=t.charCodeAt(i);return new Blob([s],{type:"image/png"})})();Jw.APt=class extends Jw.Uh{constructor(t){super(),this.VPt=Jw.zh(Jw.iPt),this.VPt.pPt(t),this.UPt=t[7],this.HPt=Jw.zh(Jw.Ca,t[8],t[9]),this.zPt=t[10].map(t=>Jw.zh(Jw.JPt,this,t)),this.XPt=new Map;for(const t of this.zPt)this.XPt.set(t.Rc().toLowerCase(),t);this.qPt=null;const s=t[11];s.length>=6&&(this.qPt=Jw.zh(Jw.au,s)),this.Uw=t[12]?t[12]:"",this.YPt=new self.rq(this)}static EPt(t){const s=Jw.zh(Jw.APt,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.VPt.gPt(t,Xw),s}Jh(){this.qPt&&(this.qPt.Jh(),this.qPt=null),this.VPt.Jh(),this.VPt=null}oq(){return this.VPt}aq(){return this.UPt}Yz(){return this.HPt.Fa()}Zz(){return this.HPt.Oa()}wq(){return this.qPt}gq(t){return this.XPt.get(t.toLowerCase())||null}mq(t){return(t=Math.floor(t))<0||t>=this.zPt.length?null:this.zPt[t]}uq(){return this.zPt.length}Mq(){return this.Uw}iq(){return this.YPt}}}{const qw=self._s;qw.JPt=class extends qw.Uh{constructor(t,s){super(),this.$Pt=t,this.Yh=s[0],this.KPt=qw.zh(qw.Ca,s[1],s[2])}Jh(){}Rc(){return this.Yh}rG(){return this.KPt.Fa()}lG(){return this.KPt.Oa()}ZPt(){return this.KPt}}}{const Yw=globalThis._s,$w=globalThis.Gz,Kw=(globalThis.uV,globalThis.TV),Zw=globalThis.WV;globalThis.assert;Yw.Yct=class extends Yw.Uh{constructor(t,s,i){super();const e=t.Qvt(i[1]);this.Nc=t,this.pRt=Yw.kj.eV(e),this.bRt=null,this.QPt=e.Instance,this.Vw=s,this.u0=i[11],this.Yh=i[0],this.LMt=this.Nc.byt(i[14]),this.tEt=!!i[9],this.sEt=!!i[2],this.iEt=!!i[10],this.eEt=i[3].map(s=>({YQ:s[0],type:s[1],name:s[2],hEt:t.byt(s[3])})),this.nEt=i[4],this.rEt=i[5],this.CCt=this.pRt.Vj(),this.oEt=Yw.zh(Yw.Event.wf),this.z0=null;const[h,n]=t.$L().nj();if(this.aEt=Yw.zh(Yw.lEt,h,n),this.uEt=!0,this.cEt=null,this.fEt=null,this.dEt=-1,this.pEt=null,this.mEt=null,this.gEt=null,this.yEt=null,this.wEt=null,this.SEt=!1,this.bEt=null,this.vEt=i[8].map(t=>Yw.MEt.i_(this,t)),this.GEt=[],this.xEt=new Map,this.TEt=new Map,this._Et=new Set,this.IEt=new Map,this.CEt=Yw.zh(Yw.Hpt,this),this.REt=null,this.AEt=0,this.PEt=!1,this.bEt=null,this.VPt=null,this.EEt=null,this.FEt=null,this.DEt=null,this.OEt=0,this.fxt=new Map,this.dxt=new Map,this.AQ=[],this.kEt=new Map,this.LEt=!0,this.pRt.qj()&&(this.z0=Yw.zh(Yw.J0,this,i[12])),i[6]&&(this.VPt=Yw.zh(Yw.iPt),this.VPt.pPt(i[6])),i[7]){this.EEt=i[7].map(t=>Yw.zh(Yw.TPt,t)),this.FEt=new Map,this.DEt=new Map;for(const t of this.EEt)this.FEt.set(t.Rc().toLowerCase(),t),this.DEt.set(t.J1(),t)}this.sEt?(this.cEt=[],this.fEt=new Set,this.dEt=this.Nc.NEt()):(this.pEt=[],this.mEt=new Set,this.gEt=[],this.yEt=[],this.wEt=[]);const r=this.pRt.Ext();if(r<2&&(this.bRt=Yw.zh(e.BEt,this,i[15]),!(this.bRt instanceof Yw.dRt)))throw new Error("v1 sdk type must derive from SDKTypeBase");let o;if(this.WEt=null,this.jEt=null,this.n1=Yw.zh(Yw.Event.wf),Yw.kj.iRt(this,r),r>=2?(o=e.BEt,o||(o=globalThis.fY)):o=this.bRt.ZCt(),o&&!this.sEt){if(this.WEt=new o(r<2?this:null),r<2&&!(this.WEt instanceof Kw))throw new TypeError("script interface class must derive from IObjectType");if(r>=2&&!(this.WEt instanceof globalThis.fY))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else{const t=this.sEt?Zw:Kw;this.WEt=new t}if(Yw.kj.eRt(r),i[13]){const t=i[13];if(t){const s=t[0],i=t[1],e=t[2];this.bRt.mRt(s,i,e)}}this.Nc.VEt()&&!this.sEt&&!this.iEt&&this.CCt||this.KCt(),this.pRt.Wj()&&(this.pRt.tRt(this),this.UEt(i)),this.HEt=null}static i_(t,s,i){return Yw.zh(Yw.Yct,t,s,i)}Jh(){if(this.oEt.Jh(),this.oEt=null,this.VPt&&(this.VPt.Jh(),this.VPt=null),this.EEt){for(const t of this.EEt)t.Jh();Yw.Sr(this.EEt),this.FEt.clear(),this.DEt.clear()}this.HEt=null,this.CEt.Jh(),this.CEt=null,this.fxt.clear(),this.dxt.clear(),this.bEt=null,this.Nc=null}zEt(t){for(let s=1,i=t.length;s<i;++s){const i=this.Nc.f1(t[s]);this.cEt.push(i),this.fEt.add(i),i.pEt.push(this),i.mEt.add(this)}}JEt(t){this.SEt=!0,this.bEt=t}UH(){return this.SEt}R4(){return this.bEt}XEt(){let t=0;if(!this.sEt)for(const s of this.pEt)for(const i of s.qEt()){const s=i.Rc().toLowerCase();this.xEt.set(s,i),this.TEt.set(s,t),this.GEt.push(i),++t}for(const s of this.qEt()){const i=s.Rc().toLowerCase();this.xEt.set(i,s),this.TEt.set(i,t),this.GEt.push(s),++t}for(const t of this.GEt)this._Et.add(t.RX().constructor);if(!this.sEt&&this.pEt.length){const t=this.Nc.YEt();Yw.vr(this.gEt,t,0),Yw.vr(this.yEt,t,0),Yw.vr(this.wEt,t,0);const s=[];let i=0,e=0,h=0;for(const t of this.pEt){const n=t.dGt();this.gEt[n]=i,i+=t.$Et(),this.yEt[n]=e,e+=t.KEt(),this.wEt[n]=h,h+=t.ZEt();const r=t.XV();if(r&&this.z0)for(const t of r.qV())s.push(t.QEt(this.z0))}this.z0&&this.z0.tFt(s)}}UEt(t){const s=Yw.Qi(t[17])?t[17]:this.Nc.sFt(),i=Yw.zh(Yw.Instance,{runtime:this.Nc,objectType:this,uid:s});i.iFt(t[16],[]),this.Nc.eFt(s,i),this.AQ.push(i)}CTt(){return this.bRt}hFt(){return this.iEt}wf(){return this.oEt}KCt(){this.sEt||(this.bRt?this.bRt.KCt():this.WEt.dY())}nFt(){return this.OEt>0}async E4(t){this.sEt||(this.OEt++,1===this.OEt&&(this.bRt?await this.bRt.E4(t):await this.WEt.gY(this.Nc.XB().JB())))}B4(){if(!this.sEt){if(this.OEt--,this.OEt<0)throw new Error("released textures too many times");0===this.OEt&&(this.bRt?this.bRt.B4():this.WEt.yY(this.Nc.XB().JB()))}}O4(){if(this.sEt)throw new Error("not applicable to family");this.bRt?this.bRt.O4():this.WEt.wY()}async o6(t){this.sEt||(this.bRt?await this.bRt.o6(t):await this.WEt.SY(this.Nc.XB().JB()))}AW(){return this.Nc}fV(){return this.pRt}rFt(){return this.QPt}Rc(){return this.Yh}byt(){return this.LMt}VL(){return this.Vw}J1(){return this.u0}B1(){return this.sEt}h0(){return this.tEt}Vj(){return this.CCt}dGt(){return this.dEt}qEt(){return this.vEt}KEt(){return this.nEt}oFt(t){return t&&this._Et.has(t)}$Et(){return this.eEt.length}aFt(){return this.eEt.map(t=>t.YQ)}lFt(t){return this.eEt.findIndex(s=>s.YQ===t)}Get(t){return this.eEt.findIndex(s=>s.name===t)}uFt(){return this.eEt.map(t=>t.name)}cFt(){return this.eEt.map(t=>t.hEt)}Tet(t){if((t=Math.floor(t))<0||t>=this.eEt.length)throw new RangeError("invalid instance variable index");return this.eEt[t].type}xet(t){if((t=Math.floor(t))<0||t>=this.eEt.length)throw new RangeError("invalid instance variable index");return this.eEt[t].name}ZEt(){return this.rEt}fFt(){return this.GEt}nrt(t){return this.xEt.get(t.toLowerCase())||null}Iet(t){const s=this.TEt.get(t.toLowerCase());return void 0===s?-1:s}XV(){return this.z0}qj(){return this.pRt.qj()}dFt(){return this.z0&&this.z0.pFt()}awt(){return this.CEt}xV(){return this.CEt.xV()}oq(){return this.VPt}g1(t){this.REt=t}m1(){return this.REt}w1(t){this.AEt=t}mFt(){return this.AEt}gFt(){return this.EEt}yFt(){return this.EEt.length}LV(){return this.pEt}DTt(t){return this.mEt.has(t)}UV(){return this.cEt}zV(t){return this.fEt.has(t)}wGt(t){return this.yEt[t]}fGt(t){return this.gEt[t]}vMt(t){this.IEt.set(t._Mt().toLowerCase(),t)}MMt(t){return!!this.EMt(t)}EMt(t){const s=this.IEt.get(t.toLowerCase());return s&&s._u()?s:null}wFt(){return this.EEt}SFt(t){if(!this.EEt)throw new Error("no animations");return this.FEt.get(t.toLowerCase())||null}bFt(t){if(!this.EEt)throw new Error("no animations");return this.DEt.get(t)||null}vFt(t){if(this.SFt(t))throw new Error(`animation name '${t}' already exists`);const s=Yw.TPt.EPt(this.AW(),t);return this.EEt.push(s),this.FEt.set(s.Rc().toLowerCase(),s),this.DEt.set(s.J1(),s),s}MFt(t){const s=this.SFt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.EEt.length)throw new Error("cannot remove last animation");const i=this.EEt.indexOf(s);this.EEt.splice(i,1),this.FEt.delete(s.Rc().toLowerCase()),this.DEt.delete(s.J1()),s.Jh()}GFt(){if(!this.EEt)throw new Error("no animations");return this.EEt[0]}xFt(){return this.GFt().kPt(0)}TFt(){if(this.EEt){const t=this.xFt().oq();return[t.My(),t.xy()]}return this.VPt?[this.VPt.My(),this.VPt.xy()]:[100,100]}lV(){if(!this.pRt.Wj())throw new Error("not a single-global plugin");return this.AQ[0]}GV(){return this.AQ}*pV(){yield*this.AQ}*MV(){yield*this.AQ,yield*this.Nc.N_t(this)}IV(){return this.AQ.length}T1(t){this.AQ.push(t)}_Ft(){this.LEt=!0}p6(){if(!this.LEt||this.sEt)return;const t=this.AQ;let s=0;for(let i=t.length;s<i;++s)t[s].IFt(s);const i=this.Nc.CFt();for(const t of i)t.EH()===this&&t.IFt(s++);this.LEt=!1}RFt(t){const s=this.AQ;if(t<s.length)return s[t];t-=s.length;const i=this.Nc.CFt();for(const s of i)if(s.EH()===this){if(0===t)return s;--t}return null}v_t(t){if(t&&t.UH()&&t.EH()!==this)for(const s of t.HH())if(s.EH()===this)return s;const s=this.xV().GV();return s.length?s[0]:null}vV(t){const s=this.xV().GV();return s.length>0?s[t.XH()%s.length]:null}*H_t(t,s){const i=this.xV().GV(),e=i.length,h=s.xV(),n=s.xV().GV(),r=n.length;let o=t.XH();!s.B1()&&h.emt()||(o=n.indexOf(t));const a=Math.ceil(e/r),l=e%r;let u=0,c=0;0===l||o<l?(u=o*a,c=a):(u=l*a+(o-l)*(a-1),c=a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}Hxt(t){this.bRt?.Hxt(t)}Hvt(){if(!this.SEt||this.sEt)return;this.p6();const t=this.xV(),s=t.cmt(),i=t.emt(),e=this.Nc.uyt(),h=e&&e.PN()&&e.PN().bmt();for(const e of this.bEt.HV()){if(e===this)continue;e.p6();const n=e.xV();if(n.umt(i),!i){const i=n.cmt();Yw.Sr(i);for(const t of s)i.push(e.RFt(t.XH()));if(h){const s=t.fmt(),i=n.fmt();Yw.Sr(i);for(const t of s)i.push(e.RFt(t.XH()))}}}}Yxt(t,s){for(const i of this.R4().HV()){const e=i.xV();t?Yw.wr(e.fmt(),s):Yw.wr(e.cmt(),s)}}AFt(){return this.aEt}PFt(t){this.uEt=!!t}EFt(){if(this.uEt&&this.CCt){for(const t of this.AQ)t.iW().FFt();for(const t of this.Nc.CFt())t.EH()===this&&t.iW().FFt();this.uEt=!1}}DFt(t,s,i){if(s){const i=this.kEt.get(s);i&&(i.delete(t),0===i.size&&this.kEt.delete(s))}if(i){let s=this.kEt.get(i);s||(s=new Set,this.kEt.set(i,s)),s.add(t)}}*OFt(){if(this.B1()){const t=new Set;for(const s of this.cEt)for(const i of s.OFt())t.add(i);yield*t.values()}else for(const t of this.kEt.keys())t.Xh()||(yield t)}Nxt(){return this.fxt||(this.fxt=new Map),this.fxt}Bxt(){return this.dxt||(this.dxt=new Map),this.dxt}kFt(){return this.oFt(Yw.Iut.qAt)}LFt(){return this.oFt(Yw.Iut.YAt)}NFt(){return this.oFt(Yw.Iut.BFt)}M1(){return this.oFt(Yw.Iut.WFt)}b5(){const t={instances:this.AQ.map(t=>t.SG())};return this.fxt&&this.fxt.size&&(t.ex=Yw.wo(this.fxt)),t}v5(t,s){this.fxt&&(this.fxt.clear(),this.fxt=null);const i=t.ex;i&&(this.fxt=Yw.So(i));const e=this.AQ,h=t.instances;for(let t=0,s=Math.min(e.length,h.length);t<s;++t)e[t].bG(h[t]);for(let t=h.length,s=e.length;t<s;++t)this.Nc.NH(e[t]);for(let t=e.length,i=h.length;t<i;++t){const i=h[t];let e=null;if(this.Vj()&&(e=this.Nc.PB().S4(i.w.l),!e))continue;const n=this.Nc.G1(this.REt||this,e,!1,0,0,!0);n.bG(i),s&&s.add(n)}this.HEt=h,this._Ft()}jFt(){return this.HEt}VFt(){this.HEt=null}UFt(){for(let t=0,s=this.AQ;t<s;++t)this.AQ[t].UFt()}rV(){return this.WEt}vN(){return this.n1}HFt(){return this.jEt}CV(t){this.jEt=t}JZ(t){const s=this.Nc,i=s.Mz()&&!s.TN().FV();i&&$w.B6(),this.n1.dispatchEvent(t),i&&$w.W6()}}}{const Qw=self._s;Qw.zFt=class extends Qw.Uh{constructor(t,s){super(),this.Nc=t,this.JFt=s;for(const t of this.JFt)t.JEt(this)}Jh(){this.Nc=null}AW(){return this.Nc}C4(){return this.JFt}HV(){return this.JFt}g6(){return this.JFt.some(t=>t.Vj())}}}{const tS=self._s,sS=self.Gz,iS=(self.PH,tS.kj),eS=[];let hS=0;const nS=new WeakMap,rS=new WeakMap;tS.Instance=class extends tS.Uh{constructor(t){if(tS.kj!==iS)throw new Error("invalid addon manager");super(),this.Nc=t.runtime,this.XFt=t.objectType,this.qit=null,this.qFt=null,this.YFt=null,this.$Ft=0,this.KFt=t.uid,this.ZFt=hS++,this.Qxt=0,this.QFt=null;const s=tS.Or(t.tags);s.length>0&&(this.QFt=new Set(s)),this.tDt=eS,this.sDt=eS;const i=this.XFt.fFt();i.length>0&&(this.sDt=i.map((t,s)=>tS.zh(tS.iDt,{runtime:this.Nc,AX:t,FX:this,index:s}))),this.eDt=this.XFt.UH()?[]:null,this.hDt=-1,this.oEt=null;const e=this.fV();if(e.EM()&&(this.Qxt|=4),e.Vj())if(this.qit=tS.zh(tS.nDt,this,t.Vz),t.rDt)this.qit.oDt(t.rDt);else{this.qit.aDt();const[t,s]=this.XFt.TFt();this.qit.hP(t,s),this.EH().dFt()&&this.qit.jz().lDt()}t.uDt?this.cDt(t.uDt):this.fDt()}Jh(){if(this.YFt&&(this.YFt.LH(),this.YFt=null),this.sDt.length>0){for(const t of this.sDt)t.Jh();tS.Sr(this.sDt)}this.qFt&&(this.qFt.Jh(),this.qFt=null);const t=nS.get(this);t&&(t.clear(),nS.delete(this));const s=rS.get(this);s&&(s.clear(),rS.delete(this)),this.eDt&&tS.Sr(this.eDt),this.oEt&&(this.oEt.Jh(),this.oEt=null),this.QFt&&this.QFt.clear(),this.QFt=null,this.Nc=null,this.XFt=null,this.tDt.length>0&&tS.Sr(this.tDt),this.qit&&(this.qit.Jh(),this.qit=null)}cDt(t){t.length>0&&(this.tDt=[],tS.Gr(this.tDt,t))}fDt(){const t=this.XFt.$Et();if(0===t)return;this.tDt=[];const s=[0,0,""];for(let i=0;i<t;++i)this.tDt.push(s[this.XFt.Tet(i)])}iFt(t,s){if(this.qFt)throw new Error("already got sdk instance");for(let t=0,i=this.sDt.length;t<i;++t)this.sDt[t].iFt(s?s[t]:null);if(this.fV().Ext()<2){if(this.qFt=tS.zh(this.XFt.rFt(),this,t),!(this.qFt instanceof tS.wRt))throw new Error("sdk type must derive from SDKInstanceBase");!this.fV().Vj()&&this.XFt.HFt()&&this.ZB()}else{const s=this.fV().ZCt();this.dDt(s.Instance,t)}}MX(){return this.qFt??this.YFt}iW(){return this.qit}AW(){return this.Nc}hB(){return this.hDt}$H(){const t=this.hDt;return-1===t?this.AW().hB():t}nB(t){((t=+t)<0||!isFinite(t))&&(t=0),this.hDt=t,this.EH().dFt()&&this.Nc.pDt(this,!0)}ZH(){this.hDt=-1,this.EH().dFt()&&this.Nc.pDt(this,!1)}a5(){return this.Nc.mDt(this)}wf(){return this.oEt||(this.oEt=tS.zh(tS.Event.wf)),this.oEt}hx(t){this.qFt?this.qFt.hx(t):this.YFt.xY(this.Nc.XB().JB())}KCt(t){this.qFt.KCt(t)}gDt(){this.Qxt|=2}yDt(){return!!(2&this.Qxt)}wDt(){this.Qxt|=1}jY(){return!!(1&this.Qxt)}EM(){return!!(4&this.Qxt)||(this.qFt?this.qFt.EM():this.YFt.pM())}SDt(){this.Qxt|=32}Q3(){return!!(32&this.Qxt)}bDt(){return!!(8&this.Qxt)}vDt(t){t?this.Qxt|=8:this.Qxt&=-9}MDt(){return!!(16&this.Qxt)}GDt(t){t?this.Qxt|=16:this.Qxt&=-17}xDt(){return!!(64&this.Qxt)}TDt(t){t?this.Qxt|=64:this.Qxt&=-65}_Dt(t,s){t<<=16,s?this.Qxt|=t:this.Qxt&=~t}IDt(t){return!!(this.Qxt&t<<16)}tAt(){return this.qFt?this.qFt.tAt():null}sAt(){return this.qFt?this.qFt.sAt():null}iAt(){return this.qFt?this.qFt.iAt():null}eAt(){return this.qFt?this.qFt.eAt():null}nAt(){return!!this.qFt&&this.qFt.nAt()}HTt(t){return this.qFt?this.qFt.HTt(t):[this.YFt.x,this.YFt.y,this.YFt.iJ]}EH(){return this.XFt}K3(){return this.qFt?this.qFt.K3():this.YFt.TY()}B_t(t){return t.B1()?t.zV(this.EH()):this.EH()===t}CDt(t,s,i){const e=(s,i)=>{const e=i||s.EH(),h=t.get(e);h?h.add(s):t.set(e,new Set([s]))};if(e(this,s),this.UH())for(const t of this.HH())e(t);if(i)for(const t of this.DJ())e(t)}RDt(){if(!this.fV().Zj())throw new Error("object does not support scene graph")}BJ(){return null!==this._J()}_J(){const t=this.iW();if(!t)return null;const s=t._J();return s?s.Yq():null}CJ(){const t=this.iW();if(!t)return null;const s=t.CJ();return s?s.Yq():null}*RJ(){const t=this.iW();if(t)for(const s of t.RJ())yield s.Yq()}ADt(t){if(!t)return!1;for(const s of this.children())if(s===t)return!0;return!1}x5(){const t=this.iW();return!!t&&t.x5()}PDt(t){const s=this.iW();if(!s)return[];const i=t.Rc();return s.x6().map(t=>t.Yq()).filter(t=>t.EH().Rc()===i)}x6(){const t=this.iW();return t?t.x6().map(t=>t.Yq()):[]}*children(){const t=this.iW();if(t)for(const s of t.children())yield s.Yq()}*DJ(){const t=this.iW();if(t)for(const s of t.DJ())yield s.Yq()}PJ(){const t=this.iW();return t?t.PJ():0}EDt(){return[...this.RJ()].length}U_t(){const t=this.iW();return t?t.U_t():0}FJ(t){const s=this.iW();if(!s)return null;const i=s.FJ(t);return i?i.Yq():null}FDt(){const t=this.iW();if(!t)return NaN;const s=t._J();return s?s.DDt(t):NaN}ODt(t){for(const s of this.iW().x6())if(s.Yq().zH()===t)return!0;return!1}kJ(t,s){this.RDt(),t.RDt(),this.iW().kJ(t.iW(),s||{})}LJ(t){const s=this.iW();s&&s.LJ(t.iW())}hX(){const t=this.iW();return!!t&&t.hX()}e6(){const t=this.iW();if(!t)return;const s=t.kDt();if(s)for(const t of s){const s=this.Nc.KB(t[2]);if(s){const i=t[3];this.kJ(s,{jJ:!!(1&i),UJ:!!(i>>1&1),zJ:!!(i>>2&1),XJ:!!(i>>3&1),YJ:!!(i>>4&1),eX:!!(i>>5&1),KJ:!!(i>>6&1),QJ:!!(i>>7&1),sX:!!(i>>8&1)})}}}h6(t,s){const i=t.get(this);if(i)for(const t of i.sceneGraphJson.children){const i=s.get(t.index);if(!i)continue;const e=t.flags;this.kJ(i,{jJ:!!(1&e),UJ:!!(e>>1&1),zJ:!!(e>>2&1),XJ:!!(e>>3&1),YJ:!!(e>>4&1),eX:!!(e>>5&1),KJ:!!(e>>6&1),QJ:!!(e>>7&1),sX:!!(e>>8&1)})}}YH(){const t=this.Nc.LDt();return t?t.Kct(this):""}UH(){return null!==this.eDt}NDt(){tS.Sr(this.eDt)}d6(t){this.eDt.push(t)}jH(){return this.eDt}BDt(t){return!!this.WDt(t)}WDt(t){const s=this.HH();if(null===s||0===s.length)return!1;for(const i of s)if(i.EH()===t)return i;return null}HH(){return this.eDt}YSt(){for(const t of this.HH())t.EH().xV().dmt(t)}zxt(){for(const t of this.HH())t.EH().xV().amt(t)}Jxt(t){for(const s of this.HH())s.EH().xV().cmt()[t]=s}qxt(){for(const t of this.HH())t.EH().xV().lmt(t)}Xxt(t){for(const s of this.HH())s.EH().xV().fmt()[t]=s}fV(){return this.XFt.fV()}IFt(t){this.$Ft=t}XH(){return this.XFt.p6(),this.$Ft}zH(){return this.KFt}jDt(t){this.KFt=t}VDt(){return this.ZFt}UDt(t){t?this.iz(new Set(t)):this.QFt=null}iz(t){if(0===t.size)this.QFt=null;else{this.QFt?this.QFt.clear():this.QFt=new Set;for(const s of t)this.QFt.add(s)}}tz(){return this.QFt??new Set}Zet(){return Array.from(this.tz()).join(" ")}gIt(t){t=Math.floor(t);for(const s of this.tz()){if(0===t)return s;--t}return""}hrt(){return this.sDt}HDt(t){if(!t)return null;for(const s of this.sDt)if(s.RX()instanceof t)return s;return null}zDt(t){if(!t)return null;const s=this.HDt(t);return s?s.MX():null}ert(t){const s=this.sDt;for(let i=0,e=s.length;i<e;++i)if(s[i].EX().J1()===t)return i;return-1}JDt(){return this.tDt}uFt(){return this.XFt.uFt()}XDt(){return this.tDt.length}Oot(t){t|=0;const s=this.tDt;if(t<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}uGt(t){return this.tDt[t]}qDt(t){const s=this.tDt[t];return 0===this.XFt.Tet(t)?!!s:s}kot(t,s){t|=0;const i=this.tDt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");switch(this.XFt.Tet(t)){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}_at(t,s){if(0===s)return;t|=0;const i=this.tDt;if(t<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}Nxt(){let t=nS.get(this);return t||(t=new Map,nS.set(this,t),t)}Bxt(){let t=rS.get(this);return t||(t=new Map,rS.set(this,t),t)}YDt(t){const s=this.EH();if(s.vN().Gf(t))return!0;for(const i of s.LV())if(i.vN().Gf(t))return!0;return!!this.Nc.vN().Gf(t)}EV(t=void 0){const s=t??new Set;if(s.has(this))return;s.add(this);const i=this.iW();if(i&&i.x5())for(const t of this.DJ())if(s.add(t),t.UH())for(const i of t.HH())s.add(i);if(this.UH())for(const t of this.HH())t.EV(s);if(!t){for(const t of s.values())t.n6();this.r6()}}$Dt(){this.XFt.HFt()&&this.ZB();for(const t of this.sDt)t.BAt()}KDt(){this.$Dt()}n6(){if(this.$Dt(),this.YDt("instancecreate")){const t=this.EH(),s=new tS.Event("instancecreate");s.FX=this.ZB(),t.JZ(s);for(const i of t.LV())i.JZ(s);this.Nc.JZ(s)}this.Nc.pz(this.fV().Owt().bW.SIt,this,null)}r6(){if(this.fV().Zj()){if(this.JZ(new tS.Event("hierarchyready")),this.YDt("hierarchyready")){const t=this.EH(),s=new tS.Event("hierarchyready");s.FX=this.ZB(),t.JZ(s);for(const i of t.LV())i.JZ(s);this.Nc.JZ(s)}this.Nc.pz(this.fV().Owt().bW.k_t,this,null)}}ZDt(){this.Nc.pz(this.fV().Owt().bW.bIt,this,null)}QDt(t){if(this.YFt){const s=new tS.Event("destroy");s.tOt=t,this.JZ(s)}if(!this.YDt("instancedestroy"))return;const s=this.EH(),i=new tS.Event("instancedestroy");i.FX=this.ZB(),i.tOt=t,s.JZ(i);for(const t of s.LV())t.JZ(i);this.Nc.JZ(i)}sOt(){return this.qFt?this.qFt.jRt():this.YFt.Rz()}SG(t="full",s=null){const i={};"full"===t?i.uid=this.zH():i.c3=!0;const e=this.tz();if(e.size>0&&(i.tags=Array.from(e)),"visual-state"!==t){const s=nS.get(this);if(s&&s.size&&(i.ex=tS.wo(s)),-1!==this.hB()&&(i.mts=this.hB()),this.XFt.$Et()>0){const t={},s=this.XFt.aFt();for(let i=0,e=this.tDt.length;i<e;++i)t[s[i].toString()]=this.tDt[i];i.ivs=t}if(this.sDt.length){const s={};for(const i of this.sDt){const e=i.SG(t);e&&(s[i.EX().J1().toString()]=e)}i.behs=s}}this.qit&&(i.w=this.qit.b5(t,s));const h=this.qFt?this.qFt.SG():this.YFt.Az();return h&&(i.data=h),i}C8(t="full",s=null){this.qit&&this.qit.C8(t)}P8(t,s="full",i=null){this.qit&&this.qit.P8(t,s,i)}iOt(t,s="full",i=null){this.qit&&this.qit.iOt(t,s,i)}UFt(){this.fV().Vj()&&this.qit.UFt()}bG(t,s="full",i=null){if("full"===s)this.KFt=t.uid;else if(!t.c3)return;if(this.UDt(t.tags),"visual-state"!==s){let s=nS.get(this);s&&(s.clear(),nS.delete(this));const i=t.ex;i&&(s=tS.So(i),nS.set(this,s)),this.hDt=t.hasOwnProperty("mts")?t.mts:-1;const e=t.ivs;if(e)for(const[t,s]of Object.entries(e)){const i=parseInt(t,10),e=this.XFt.lFt(i);if(e<0||e>=this.tDt.length)continue;let h=s;null===h&&(h=NaN),this.tDt[e]=h}}if(this.fV().Vj()){const e=t.w;if(e){const t=e.l;if(this.qit.eW().J1()!==t){const i=this.qit.eW(),e=i.kB().S4(t);e?(this.qit.oW(e),i.C1(this,!0),e.T1(this,!0),e.aW(this),this.qit.Uz()):"full"===s&&this.Nc.NH(this)}this.qit.v5(e,s,i)}}if("visual-state"!==s){const i=t.behs;if(i)for(const[t,e]of Object.entries(i)){const i=parseInt(t,10),h=this.ert(i);h<0||h>=this.sDt.length||this.sDt[h].bG(e,s)}}const e=t.data;e&&(this.qFt?this.qFt.bG(e,s):this.YFt.Pz(e))}eOt(t){if(this.qit.eW().J1()===t)return;const s=this.qit.eW(),i=s.kB().S4(t);i&&(this.qit.oW(i),s.C1(this,!0),i.T1(this,!0),i.aW(this),this.qit.Uz())}ZB(){return this.YFt||this.dDt()}zRt(){return!!this.YFt}dDt(t,s){const i=this.qit?t?self.bY:self.yX:t?self.rz:self.PH,e=t||this.qFt.ZCt(),h=this.XFt.HFt(),n=h||e||i,r=this.fV().Ext();if(tS.kj.iRt(this,r),tS.kj.KAt(s),this.YFt=new n,tS.kj.ZAt(),tS.kj.eRt(r),e&&!(this.YFt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const t=e||i;if(!(this.YFt instanceof t))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.YFt}FH(t){if(0===this.tDt.length)return;const s={},i=this.XFt.cFt();for(let t=0,e=i.length;t<e;++t)s[i[t]]={configurable:!1,enumerable:!0,get:tS.Instance.prototype.qDt.bind(this,t),set:tS.Instance.prototype.kot.bind(this,t)};const e=Object.create(Object.prototype,s);t.hOt={value:e,writable:!1}}DH(t){const s=this.sDt;if(0===s.length)return;const i={};for(const t of s)i[t.EX().byt()]={value:t.GRt(),writable:!1};const e=Object.create(Object.prototype,i);t.OSt={value:e,writable:!1}}JZ(t){if(!this.zRt())return;const s=this.ZB();t.FX=s;const i=this.Nc,e=i.Mz()&&!i.TN().FV();e&&sS.B6(),s.dispatchEvent(t),e&&sS.W6()}}}{const oS=self._s,aS=new Map;oS._6=class extends oS.Uh{constructor(t){super(),this.IG=t,this.sbt=null,this.nOt=[],this.rOt=t.My(),this.oOt=t.xy(),this.aOt=1,this.lOt=1,this.uOt=0,this.cOt=1,this.fOt=t.NF(),this.dOt=null,this.pOt=null,this.mOt=NaN,this.gOt=!1,this.I5=NaN,this.C5=NaN,this.yOt=s=>{if(s.FX!==this.sbt.Yq())return;t.AW().wf().removeEventListener("instancecreate",this.yOt);const i=this.sbt.Yq().MX();this.gOt=!!i.Wet(),this.I5=this.gOt?i.Bet():NaN,this.C5=this.gOt?i.Vet():NaN}}Jh(){this.sbt=null,this.dOt=null,this.pOt=null,this.mOt=NaN,this.gOt=!1,this.I5=NaN,this.C5=NaN,oS.Sr(this.nOt)}wOt(t){if(this.cOt=this.IG.NF(),this.fOt=this.cOt,this.sbt=t,this.uOt=t?t.tU():0,this.sbt){const t=this.IG.AW();if(this.sbt.Yq().fV().Ext()<2){const s=this.sbt.Yq().MX();s?(this.gOt=!!s.Wet(),this.I5=this.gOt?s.Bet():NaN,this.C5=this.gOt?s.Vet():NaN):this.sbt.Yq().jY()||t.wf().addEventListener("instancecreate",this.yOt)}else this.gOt=!1,this.I5=NaN,this.C5=NaN}else this.gOt=!1,this.I5=NaN,this.C5=NaN}_J(){return this.sbt}x5(){return this.nOt.length>0}x6(){return this.nOt}SOt(){this.x5()&&1!==this.nOt.length&&(this.pOt?this.nOt.sort((t,s)=>{const i=this.pOt.get(t.Yq()),e=this.pOt.get(s.Yq());return oS.Qi(i)&&oS.Qi(e)?i-e:0}):this.nOt.sort((t,s)=>{const i=t.mrt().bOt(),e=s.mrt().bOt();return oS.Qi(i)&&oS.Qi(e)?i-e:0}))}bOt(){return this.mOt}vOt(){return this.aOt}MOt(t){this.aOt=t}GOt(){return this.lOt}xOt(t){this.lOt=t}sat(){return this.fOt}f_t(){return this.cOt}TOt(t){this.cOt=t}prt(){return 0===this.rOt?Number.EPSILON:this.rOt}Srt(){return 0===this.oOt?Number.EPSILON:this.oOt}_Ot(){if(this.IG.JJ()){const t=this.sbt;let s=t.My(),i=t.mrt().prt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.gOt?1+s/this.I5:s/i}return 1}IOt(){if(this.IG.qJ()){const t=this.sbt;let s=t.xy(),i=t.mrt().Srt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.gOt?1+s/this.C5:s/i}return 1}COt(){return 0}ROt(){return{sw:this.rOt,sh:this.oOt,sx:this.aOt,sy:this.lOt,psa:this.uOt,oo:this.cOt,so:this.fOt,pi:this.IG.Yq().FDt()}}b5(t,s=null){const i=this.ROt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.AOt(t),c:this.POt(t)})}EOt(t){let s="";return t.VJ()&&(s+="x"),t.HJ()&&(s+="y"),t.JJ()&&(s+="w"),t.qJ()&&(s+="h"),t.$J()&&(s+="a"),t.ZJ()&&(s+="z"),t.hX()&&(s+="d"),t.tX()&&(s+="o"),t.iX()&&(s+="v"),s}AOt(t){return this.sbt?!this.sbt.Yq()||this.sbt.Yq().jY()?null:this.FOt(this.sbt,this.IG,t):null}POt(t){return this.nOt.map(s=>this.FOt(s,s,t)).filter(t=>t)}FOt(t,s,i){const e=t.Yq();if(e&&e.jY())return null;const h={};return h.uid=e.zH(),h.f=this.EOt(s),h.offsets=s.DOt(),h.data=oS._6.OOt(e),h.oci=e.EH().VL(),"state"===i?(h.inst=e.SG("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.EH().GV().indexOf(e),h.inst=null),h}v5(t){this.rOt=t.sw,this.oOt=t.sh,this.aOt=t.sx,this.lOt=t.sy,this.uOt=t.psa,this.cOt=t.oo,this.fOt=t.so,this.mOt=oS.Qi(t.pi)?t.pi:NaN}kOt(t,s,i,e){if(!t&&!s)if(e?.RIt){if(this.dOt)for(const t of this.dOt)t.jY()||t.BJ()||t.AW().NH(t)}else if(this.dOt)for(const t of this.dOt)if(i.c&&i.c.length){if(!i.c.some(s=>s.uid===t.zH()))continue;t.jY()||t.BJ()||t.AW().NH(t)}this.dOt=t,this.pOt=s}LOt(t){const s=this.IG.AW();return aS.has(t)?aS.get(t):s.KB(t)}P8(t,s){const i=this.IG,e=i.AW(),h=s?.NOt??new Set;if(t.p&&!this.sbt){const n=t.p.uid,r=this.LOt(n);if(r){const n=r.iW();r.ADt(i.Yq())?this.sbt=n:(r.ODt(i.Yq().zH())?(e.NH(i.Yq()),e.BOt(i.Yq().zH()),aS.delete(i.Yq().zH())):r.kJ(i.Yq(),this.WOt(t.p.f)),h.has(i)||(i.jOt(t.p.offsets),this.VOt(r,t.p,s),this.UOt(r,r.zH(),i.AW(),s)),h.add(i),r.iW().mrt().SOt())}else if(oS.Qi(t.p.oci)){const h=e.RV(e.f1(t.p.oci),i.eW(),0,0,!0);if(h){const n=this.HOt(t.p,e);n&&h.bG(n);const r=h.iW(),o=!!s?.RIt;r.eW().AV(h,!1,o),h.kJ(i.Yq(),this.WOt(t.p.f)),aS.set(h.zH(),h),this.UOt(h,h.zH(),e,s),h.iW().mrt().SOt()}}}const n=[];for(const s of t.c){const t=s.uid,i=this.LOt(t);i&&n.push(i)}let r=0;for(const o of t.c){const a=o.uid,l=this.LOt(a);if(l){if(this.dOt){if(this.dOt.includes(l)){const e=l;if(e.EH()!==l.EH()){r++;continue}if(e.jY()){r++;continue}const o=t.c[r];if(!s?.RIt&&this.zOt(e,n,i)){if(i.Yq().FJ(r)){const n=e.EH().VL(),a=o.oci,l=i.Yq().FJ(r).EH().VL();if(n!==a||a!==l){this.JOt(t.c,i,h,s);break}this.XOt(r,o,i,h,s)}else this.XOt(r,o,i,h,s);r++;continue}if(e.BJ()&&e._J()!==i.Yq()){const t=this.qOt(o,s);this.YOt(t,o,h,s),r++;continue}this.YOt(e.iW(),o,h,s,!0),r++;continue}if(this.dOt[r]){const e=this.dOt[r];if(e.EH()!==l.EH()){r++;continue}if(e.jY()){r++;continue}const o=t.c[r];if(!s?.RIt&&this.zOt(e,n,i)){if(i.Yq().FJ(r)){const n=e.EH().VL(),a=o.oci,l=i.Yq().FJ(r).EH().VL();if(n!==a||a!==l){this.JOt(t.c,i,h,s);break}this.XOt(r,o,i,h,s)}else this.XOt(r,o,i,h,s);r++;continue}if(e.BJ()&&e._J()!==i.Yq()){const t=this.qOt(o,s);this.YOt(t,o,h,s),r++;continue}this.YOt(e.iW(),o,h,s,!0),r++;continue}}const e=l.EH();if(this.$Ot(n,e)===i.Yq().PDt(e).length){for(const t of i.Yq().x6()){if(t.EH()!==e)continue;const i=t.iW();if(i&&!h.has(i)){h.add(i),i.jOt(o.offsets),this.VOt(t,o,s);break}}r++;continue}if(l.BJ()&&l._J()!==i.Yq()){const t=this.qOt(o,s);this.YOt(t,o,h,s),r++;continue}this.YOt(l.iW(),o,h,s)}else if(this.dOt&&this.dOt[r]){const a=this.dOt[r],l=e.f1(this.KOt(o));if(a.EH()!==l){r++;continue}if(a.jY()){r++;continue}const u=t.c[r];if(!s?.RIt&&this.zOt(a,n,i)){if(i.Yq().FJ(r)){const e=a.EH().VL(),n=u.oci,o=i.Yq().FJ(r).EH().VL();if(e!==n||n!==o){this.JOt(t.c,i,h,s);break}this.XOt(r,u,i,h,s)}else this.XOt(r,u,i,h,s);r++;continue}if(a.BJ()&&a._J()!==i.Yq()){const t=this.qOt(u,s);this.YOt(t,u,h,s),r++;continue}this.YOt(a.iW(),u,h,s)}else{const t=this.qOt(o,s);this.YOt(t,o,h,s)}r++}}JOt(t,s,i,e){const h=s.AW();for(const t of s.Yq().children())t&&!t.jY()&&(h.NH(t),h.BOt(t.zH()),aS.delete(t.zH()));this.dOt&&(this.dOt=[]),this.pOt&&(this.pOt=new WeakMap),Object.assign({},e,{assignZIndex:!1});for(const s of t){const t=this.qOt(s,e);this.YOt(t,s,i,e),this.dOt.push(t.Yq()),this.pOt.set(t.Yq(),this.dOt.length-1)}s.mrt().SOt()}zOt(t,s,i){const e=t.EH();return this.$Ot(s,e)===i.Yq().PDt(e).length}XOt(t,s,i,e,h){const n=i.Yq().FJ(t);if(!n)return;const r=n.iW();r&&(e.has(r)||(r.jOt(s.offsets),this.VOt(n,s,h)),e.add(r))}WOt(t){const s={};return s.jJ=t.includes("x"),s.UJ=t.includes("y"),s.zJ=t.includes("w"),s.XJ=t.includes("h"),s.YJ=t.includes("a"),s.KJ=t.includes("z"),s.eX=t.includes("d"),s.QJ=t.includes("o"),s.sX=t.includes("v"),s}KOt(t){return oS.Qi(t.oci)?t.oci:t[1]}qOt(t,s){if(!oS.Qi(t.oci))return;const i=this.IG,e=i.AW();let h;const n=!s.hasOwnProperty("createHierarchy")||s.createHierarchy;if(h=t.data?e.G1(t.data,i.eW(),!1,0,0,!1,n):e.RV(e.f1(t.oci),i.eW(),0,0,n),!h)return;const r=this.HOt(t,e);r&&h.bG(r);const o=h.iW(),a=!!s?.RIt;return o.eW().AV(h,!0,a),o}UOt(t,s,i,e){if(this.LOt(s)&&!e?.RIt){const e=this.LOt(s);e!==t&&i.NH(e)}i.BOt(s),i.eFt(s,t)}YOt(t,s,i,e,h=!0){const n=this.IG,r=n.kJ(t,this.WOt(s.f));r&&h?(i.has(t)||(t.jOt(s.offsets),this.VOt(t.Yq(),s,e)),i.add(t)):r&&(aS.set(t.Yq().zH(),t.Yq()),this.UOt(t.Yq(),s.uid,n.AW(),e)),this.SOt()}VOt(t,s,i){let e=this.HOt(s,this.IG.AW());if(!e)return;const h=!i.hasOwnProperty("clearChildren")||i.clearChildren,n=!i.hasOwnProperty("assignZIndex")||i.assignZIndex,r=t.AW();if(aS.set(t.zH(),t),e=JSON.parse(JSON.stringify(e)),h&&t.zH()!==e.uid){for(const s of t.children())s&&!s.jY()&&(r.NH(s),r.BOt(s.zH()),aS.delete(s.zH()));if(e.w?.sgi&&e.w.sgi.c?.length)for(const s of e.w.sgi.c){const e=Object.assign({},i,{clearChildren:!1,createHierarchy:!1}),h=this.qOt(s,e);aS.set(h.Yq().zH(),h.Yq()),t.kJ(h.Yq(),this.WOt(s.f)),h.jOt(s.offsets),this.VOt(h.Yq(),s,e)}}const o=e.w?.zi,a=e.w?.l;e.w=null,t.bG(e),i?.RIt||(oS.Qi(o)&&n&&t.iW().F1(o),oS.Qi(a)&&t.eOt(a)),this.UOt(t,e.uid,r,i)}$Ot(t,s){return t.filter(t=>t.EH().Rc()===s.Rc()).length}HOt(t,s){if(oS.Qi(t.instIndex)){const i=s.f1(t.oci).jFt();return i?i[t.instIndex]:null}return oS.ae(t.inst)?JSON.parse(t.inst):t.inst?t.inst:void 0}static OOt(t){let s=t.iW().eW().S1(t.zH());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const s of[...t.x6()]){const t=s.iW();i.push([t.kB().J1(),t.eW().VL(),s.zH(),oS._6.T6(t),s.EH().UH()?1:0,t.hW(),oS._6.OOt(s)])}return oS.Ge(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=oS._6.ZOt(),s[0][14][1]=i,s[0][14][2]=t.iW().hW()),s}static T6(t){let s=0;return s|=Number(t.iX())<<8,s|=Number(t.tX())<<7,s|=Number(t.ZJ())<<6,s|=Number(t.hX())<<5,s|=Number(t.$J())<<4,s|=Number(t.qJ())<<3,s|=Number(t.JJ())<<2,s|=Number(t.HJ())<<1,s|=0|Number(t.VJ()),s}static ZOt(t){let s=0;return s|=256,s|=128,s|=64,s|=32,s|=16,s|=8,s|=4,s|=2,s|=1,511}static QOt(){aS.clear()}}}{const lS=self._s,uS=self.rs,cS=(uS.ys,uS.ws,lS.zh(lS.Rect)),fS=lS.zh(lS.Cl),dS=lS.zh(lS.Event,"bboxchange",!1),pS=lS.zh(lS.Go,0,0,0,0),mS=lS.zh(lS.au),gS=lS.zh(lS.Go,1,1,1,1),yS=lS.zh(lS.Rect,0,0,-1,-1),wS=lS.zh(lS.Rect,0,0,-1,-1),SS=new Set(["absolute","relative"]),bS=[];let vS=!0;const MS=new WeakMap,GS=new WeakMap;lS.nDt=class extends lS.Uh{constructor(t,s){super(),this.fi=t,this.zpt=t.EH(),this.Nc=t.AW(),this.tkt=s,this.zpt.DFt(this,null,s),this.skt=-1,this.ikt=-1,this.Qxt=196635,this.zpt.fV().Jj()&&(this.Qxt|=128),this.Ra=NaN,this.Aa=NaN,this.zM=NaN,this.ekt=NaN,this.hkt=NaN,this.yT=NaN,this.Io=NaN,this.nkt=NaN,this.rkt=NaN,this.okt=NaN,this.akt=NaN,this.lkt=lS.zh(lS.Rect),this.ukt=lS.zh(lS.Cl),this.ckt=wS,this.fkt=yS,this.dkt=null,this.pkt=null,this.mkt=null,this.HM=gS,this.gkt=gS,this.ykt=null,this.wkt=null,this.fi.EH().dFt()&&(this.wkt=lS.zh(lS.Skt,this.fi,this)),this.bkt=null,this.dOt=null,this.pOt=null,this.vkt=-1,this.Mkt=null}wDt(){this.Qxt|=256}Jh(){if(this.zpt.DFt(this,this.tkt,null),this.ykt&&(this.Nc.IM().Vb(this.ykt),this.ykt=null),this.dkt=null,this.pkt&&(this.pkt.Gkt.Jh(),this.pkt=null),this.mkt&&(this.mkt.clear(),this.mkt=null),this.aX(),this.wkt&&this.wkt.Jh(),this.BJ()&&this._J().LJ(this),this.x5()){const t=[...this.x6()];for(const s of t)this.LJ(s)}this.xkt(),this.Tkt(),MS.delete(this),GS.delete(this),this.fi=null,this.zpt=null,this.Nc=null,this.tkt=null}oDt(t){if(vS=!1,this.zz(t[0],t[1]),this.fG(t[2]),this.hP(t[3],t[4]),this.yT=0,this.Jj()?this.QV(t[6]):this.Io=0,pS.wa(t[7]),this._kt(pS),this.$z(t[8]),this.Qz(t[9]),this.YM(t[10]),this.wkt&&this.wkt.Ikt(t[12]),t[14]&&MS.set(this,{Ckt:t[14][1],Rkt:t[14][2]}),t[15]){const s=t[15];this.rX(s[0],s[1]);const i=this.dX(),e=s[2];for(let t=0,s=e.length;t<s;++t){const s=e[t];for(let e=0,h=s.length;e<h;++e){const h=s[e],n=i.$G(e,t);n.oG(h[0]),n.uG(h[1]),n.fG(h[2]),n.pG(h[3]),n.gG(h[4])}}}if(t[16]){const s=t[16][0],i=t[16][1],e=!!i,h=!e,n=this.Nc.LDt();e&&n&&n.$ct(this.Yq(),i),h&&n&&n.$ct(this.Yq(),s)}vS=!0,this.Akt()}aDt(){this.Ra=0,this.Aa=0,this.zM=0,this.ekt=0,this.hkt=0,this.yT=0,this.Io=0,this.nkt=0,this.rkt=1,this.okt=0,this.akt=0,this.Akt()}AW(){return this.Nc}EH(){return this.zpt}Yq(){return this.fi}Pkt(){return this.$J()?this.Ekt(this._J().Fkt()-this.bkt.COt()):0}oG(t){if(t=+t,this.VJ()){const s=this.bkt,i=t-this.rG(),e=-this.Pkt();0===e?this.Ra+=i/s._Ot():(this.Ra+=Math.cos(e)*i/s._Ot(),this.HJ()&&(this.Aa+=Math.sin(e)*i/s.IOt()))}else this.Ra=t}jot(t,s=!1){t=+t,s?this.Ra+=t:this.VJ()?this.oG(this.rG()+t):this.Ra+=t}rG(){if(this.VJ()){let t=this.Ra;const s=this.bkt,i=this._J(),e=this.Pkt();return 0===e?t*=s._Ot():(t=t*s._Ot()*Math.cos(e),this.HJ()&&(t-=this.Aa*s.IOt()*Math.sin(e))),i.rG()+t}return this.Ra}uG(t){if(t=+t,this.HJ()){const s=this.bkt,i=t-this.lG(),e=-this.Pkt();0===e?this.Aa+=i/s.IOt():(this.VJ()&&(this.Ra-=Math.sin(e)*i/s._Ot()),this.Aa+=Math.cos(e)*i/s.IOt())}else this.Aa=t}Vot(t,s=!1){t=+t,s?this.Aa+=t:this.HJ()?this.uG(this.lG()+t):this.Aa+=t}lG(){if(this.HJ()){let t=this.Aa;const s=this.bkt,i=this._J(),e=this.Pkt();return 0===e?t*=s.IOt():(t=t*s.IOt()*Math.cos(e),this.VJ()&&(t+=this.Ra*s._Ot()*Math.sin(e))),i.lG()+t}return this.Aa}zz(t,s){if(t=+t,s=+s,this.Dkt()){const i=this.VJ(),e=this.HJ(),h=this.bkt,n=t-this.rG(),r=s-this.lG(),o=-this.Pkt();if(0===o)i?this.Ra+=n/h._Ot():this.Ra=t,e?this.Aa+=r/h.IOt():this.Aa=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.Ra+=e?(l*n-a*r)/h._Ot():l*n/h._Ot():this.Ra=t,e?this.Aa+=i?(a*n+l*r)/h.IOt():l*r/h.IOt():this.Aa=s}}else this.Ra=t,this.Aa=s}Okt(){return[this.rG(),this.lG()]}Xz(t,s){t=+t,s=+s,this.Dkt()?this.zz(this.rG()+t,this.lG()+s):(this.Ra+=t,this.Aa+=s)}VTt(t,s){return this.rG()===t&&this.lG()===s}fG(t){if(t=+t,this.ZJ()&&(t-=this._J().cG()),this.zM===t)return;this.zM=t,this.kkt();const s=this.eW();0!==this.zM&&s.P1(),s.aW(this)}kkt(){if(this.Akt(),this.x5()){const t=this.x6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.ZJ()&&i.kkt()}}}hat(t){this.fG(this.cG()+t)}cG(){return this.ZJ()?this._J().cG()+this.zM:this.zM}eJ(){return this.eW().cG()+this.cG()}Wet(){return this.Yq().fV().Ext()<2&&this.Yq().MX().Wet()}hy(t){if(t=+t,this.JJ()){const s=this.My();0===s?this.ekt=Number.EPSILON:this.ekt*=t/s}else this.ekt=t;this.Lkt()}Ly(t,s){t=+t,s?this.ekt+=t:this.JJ()?this.hy(this.My()+t):this.ekt+=t,this.Lkt()}My(){if(this.JJ()){const t=this._J(),s=t.My();return t.mrt().prt()===Number.EPSILON?(this.mrt().prt()+s)*this.ekt:s*this.ekt}return this.ekt}ny(t){if(t=+t,this.qJ()){const s=this.xy();0===s?this.hkt=Number.EPSILON:this.hkt*=t/s}else this.hkt=t;this.Lkt()}qot(t,s){t=+t,s?this.hkt+=t:this.qJ()?this.ny(this.xy()+t):this.hkt+=t,this.Lkt()}xy(){if(this.qJ()){const t=this._J(),s=t.xy();return t.mrt().Srt()===Number.EPSILON?(this.mrt().Srt()+s)*this.hkt:s*this.hkt}return this.hkt}hP(t,s){if(t=+t,s=+s,this.JJ()){const s=this.My();0===s?this.ekt=Number.EPSILON:this.ekt*=t/s}else this.ekt=t;if(this.qJ()){const t=this.xy();0===t?this.hkt=Number.EPSILON:this.hkt*=s/t}else this.hkt=s;this.Lkt()}Fu(){return[this.My(),this.xy()]}Z3(){return this.yT}Nkt(t){if(t<0)throw new RangeError("invalid depth");this.yT=t}Bkt(){if(this.BJ()){const t=this.bkt;return Math.min(t._Ot(),t.IOt())}return 1}Jj(){return!!(128&this.Qxt)}QV(t){t=+t,this.Jj()&&(this.$J()&&(t-=this._J().tU()),t=lS.Zh(t),this.Io!==t&&(this.Io=t,this.Lkt()))}Yot(t){0!==(t=+t)&&this.Jj()&&(this.Io=lS.Zh(this.Io+t),this.Lkt())}Lkt(){if(this.Qxt|=262144,this.x5()){const t=this.x6();for(let s=0,i=t.length;s<i;s++)t[s].Lkt()}}tU(){return this.$J()&&this.Jj()?this.Ekt(lS.Zh(this._J().Fkt()+this.Io)):this.Io}Fkt(){return this.$J()&&this.Jj()?lS.Zh(this._J().Fkt()+this.Io):this.Io}Ekt(t){return this.JJ()&&this.CJ().My()<0&&(t=lS.Zh(lS.pn(t,this.CJ().tU()+Math.PI))),this.qJ()&&this.CJ().xy()<0&&(t=lS.pn(t,this.CJ().tU())),t}Wkt(){const t=this._J();return!!(this.JJ()&&t.My()<0)||!!(this.qJ()&&t.xy()<0)}jkt(){const t=this._J();return!!(this.JJ()&&t.My()<0&&this.qJ()&&t.xy()<0)}Vkt(){const t=this.Qxt;if(!(262144&t))return;const s=this.tU();this.nkt=Math.sin(s),this.rkt=Math.cos(s),this.Qxt=-262145&t}XTt(){return this.Vkt(),this.nkt}JTt(){return this.Vkt(),this.rkt}$z(t){this.okt=+t}iat(t){this.okt+=+t}Yz(){return this.okt}Qz(t){this.akt=+t}eat(t){this.akt+=+t}Zz(){return this.akt}_kt(t){this.HM.equals(t)||(this.HM===gS?(this.HM=lS.zh(lS.Go,t),this.gkt=lS.zh(lS.Go,t),this.gkt.Ko()):t.Xo(1,1,1,1)?(this.HM=gS,this.gkt=gS):(this.HM.set(t),this.gkt.set(t),this.gkt.Ko()),this.Akt())}WF(t){if(t=lS.Kh(+t,0,1),this.tX()){if(this.mrt().f_t()===t)return;this.mrt().TOt(t),t=this.NF()}else if(this.HM.a===t)return;this.Ukt(t)}Hkt(){if(!this.x5())return;const t=this.x6();for(let s=0,i=t.length;s<i;s++){const i=t[s];i.Ukt(i.NF())}}Ukt(t){pS.ko(this.HM),pS.a=t,this._kt(pS),this.Hkt()}Zot(t){this.tX()?this.WF(this.mrt().f_t()+t):this.WF(this.NF()+t)}NF(){return this.tX()?this._J().NF()*this.mrt().f_t():this.HM.a}dJ(t){this.HM.zo(t)||(pS.ko(t),pS.a=this.NF(),this._kt(pS))}Fot(t,s,i){pS.Ro(t,s,i),this.dJ(pS)}zkt(t,s,i){0===t&&0===s&&0===i||(pS.ko(this.HM),pS.r+=t,pS.g+=s,pS.b+=i,this.dJ(pS))}fJ(){return this.HM}q0(){return this.gkt}hX(){return!!(512&this.Qxt)}Jkt(t){this.Xkt(512,t)}VJ(){return!!(1024&this.Qxt)}qkt(t){this.Xkt(1024,t)}HJ(){return!!(2048&this.Qxt)}Dkt(){return!!(3072&this.Qxt)}Ykt(t){this.Xkt(2048,t)}JJ(){return!!(4096&this.Qxt)}$kt(t){this.Xkt(4096,t)}qJ(){return!!(8192&this.Qxt)}Kkt(t){this.Xkt(8192,t)}$J(){return!!(16384&this.Qxt)}Zkt(t){this.Xkt(16384,t)}ZJ(){return!!(32768&this.Qxt)}Qkt(t){this.Xkt(32768,t)}tX(){return!!(4194304&this.Qxt)}tLt(t){this.Xkt(4194304,t)}iX(){return!!(8388608&this.Qxt)}sLt(t){this.Xkt(8388608,t)}iLt(){this.Qxt&=-12647937}kJ(t,s){if(t===this)return!1;if(t.BJ())return!1;if(this.eLt(t))return!1;if(this.hLt(t))return!1;const i=t.rG(),e=t.lG(),h=t.My(),n=t.xy(),r=t.tU(),o=t.cG(),a=t.NF();t.nLt(this),t.qkt(s.jJ),t.Ykt(s.UJ),t.$kt(s.zJ),t.Kkt(s.XJ),t.Zkt(s.YJ),t.Qkt(s.KJ),t.tLt(s.QJ),t.sLt(s.sX),t.Jkt(s.eX);const l=i-this.rG(),u=e-this.lG(),c=-this.tU(),f=Math.cos(c),d=Math.sin(c);if(s.jJ&&(s.YJ?t.Ra=l*f-u*d:t.Ra=l,s.zJ)){const s=this.My()/this.bkt.prt();0!==s&&(t.Ra/=s)}if(s.UJ&&(s.YJ?t.Aa=l*d+u*f:t.Aa=u,s.XJ)){const s=this.xy()/this.bkt.Srt();0!==s&&(t.Aa/=s)}if(s.zJ){const s=this.My();0===s||s===Number.EPSILON?(t.ekt=1,t.bkt.MOt(1)):(t.ekt=h/this.My(),t.bkt.MOt(t.ekt))}if(s.XJ){const s=this.xy();0===s||s===Number.EPSILON?(t.hkt=1,t.bkt.xOt(1)):(t.hkt=n/this.xy(),t.bkt.xOt(t.hkt))}return s.YJ&&(t.Io=r-this.tU()),s.KJ&&(t.zM=o-this.cG()),s.QJ&&t.bkt.TOt(a),s.sX&&t.NU(this.WU()),this.rLt(t),this.Uz(),this.Hkt(),!0}LJ(t){if(t._J()!==this)return;const s=t.rG(),i=t.lG(),e=t.My(),h=t.xy(),n=t.tU(),r=t.cG(),o=t.NF();t.nLt(null),t.iLt(),t.zz(s,i),t.hP(e,h),t.QV(n),t.fG(r),t.WF(o),this.oLt(t),this.Uz()}aLt(){return this.vkt}lLt(){this.uLt();const t=[...this.children()];for(const s of t)this.LJ(s);const s=this._J();s&&s.LJ(this),this.iLt()}uLt(){if(this.cLt(),!this.dOt){const t=[...this.children()];t.length&&(this.dOt=[],this.pOt=new WeakMap);let s=0;for(const i of t){const t=i.Yq();this.dOt.push(t),this.pOt.set(t,s),s++}}const t=this._J();t&&t.uLt()}cLt(){if(-1!==this.vkt)return;const t=[...this.RJ()];this.vkt=t.length;for(const s of t)s.cLt();const s=[...this.children()];for(const t of s)t.cLt()}Tkt(){this.dOt&&(this.dOt.length=0),this.dOt=null,this.pOt=null;const t=this._J();t&&t.Tkt(),this.vkt=-1}BJ(){return null!==this._J()}_J(){const t=this.bkt;return null!==t?t._J():null}CJ(){let t=this;for(;t.BJ();)t=t._J();return t}*RJ(){let t=this._J();for(;t;)yield t,t=t._J()}ADt(t){return this.x6().includes(t)}x5(){const t=this.bkt;return null!==t&&t.x5()}x6(){const t=this.bkt;return null!==t?t.x6():bS}children(){return this.x6()}*DJ(){for(const t of this.children())yield t,yield*t.DJ()}PJ(){return this.x6().length}U_t(){return[...this.DJ()].length}FJ(t){const s=this.x6();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}DDt(t){if(!t)return NaN;const s=this.x6();if(!s)return NaN;for(let i=0;i<s.length;i++)if(t===s[i])return i;return NaN}fLt(t){this.bkt||(this.bkt=lS.zh(lS._6,this)),t&&this.bkt.wOt(t)}mrt(){return this.bkt}xkt(){this.bkt&&(this.bkt.Jh(),this.bkt=null)}nLt(t){t?(t.fLt(null),this.fLt(t)):(this.bkt&&this.bkt.wOt(null),this.x5()||this.xkt())}hLt(t){if(!this.BJ())return!1;const s=this._J();return s===t||s.hLt(t)}eLt(t){if(this.ADt(t))return!0;for(const s of this.x6())if(s.eLt(t))return!0;return!1}rLt(t){this.bkt.x6().push(t)}oLt(t){const s=this.bkt.x6(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.BJ()||this.xkt(),t.x5()||t.xkt()}kDt(){const t=MS.get(this);return t?t.Ckt:null}dLt(){const t=MS.get(this);return t?t.Rkt:NaN}G5(){const t=GS.get(this);return lS.Qi(t)?t:NaN}pLt(t){GS.set(this,t)}mLt(){this.Xkt(524288,!0),this.Akt()}Akt(){if(!vS)return;const t=this.Nc.IM();let s;this.ykt&&t.Vb(this.ykt),s=524288&this.Qxt?t.xb()||"<point>":t.bb()||"<default>",this.ykt=t.Nb(s,this.gH(),this.gkt,this.cG(),this.gLt()?1:0,0)}n5(){return this.ykt}K1(){return this.HM===gS}YM(t){if((t|=0)<0||t>31)throw new RangeError("invalid blend mode");this.gH()!==t&&(this.Qxt=-2080374785&this.Qxt|t<<26,this.Akt())}gH(){return(2080374784&this.Qxt)>>26}oW(t,s){const i=s&&this.tkt!==t;i&&this.R1(),this.zpt.DFt(this,this.tkt,t),this.tkt=t,i&&this.yLt(),0!==this.cG()&&this.tkt.P1()}eW(){return this.tkt}kB(){return this.eW().kB()}F1(t){this.skt=0|t}hW(){return this.tkt.X2(),this.skt}Z2(t){this.ikt=0|t}OY(){return this.tkt.Y2(),this.ikt}IQ(){return this.skt}Xkt(t,s){s?this.Qxt|=t:this.Qxt&=~t}WU(){return!!(1&this.Qxt)}NU(t){if(this.Xkt(1,t),this.x5())for(const s of this.x6())s.iX()&&s.NU(t)}GJ(){return!!(8&this.Qxt)}xJ(t){t=!!t,this.GJ()!==t&&(this.Xkt(8,t),t?this.Uz():this.wLt())}SLt(t,s){if(this.Xkt(32,t),this.mkt&&this.mkt.clear(),s.trim()){this.mkt||(this.mkt=new Set);for(const t of s.split(" "))t&&this.mkt.add(t.toLowerCase())}else this.mkt=null}bLt(t){const s=!!(32&this.Qxt),i=this.mkt;if(!t||!i)return!s;for(const e of i)if(t.has(e))return s;return!s}Uz(){if(this.Qxt|=65554,this.zpt.PFt(!0),this.Nc.lW(),this.tkt.a1()&&(this.nJ(this.lkt,this.ukt,!0),this.Qxt&=-3,this.yLt()),4&this.Qxt&&this.fi.wf().dispatchEvent(dS),null!==this.bkt){const t=this.bkt.x6();for(let s=0,i=t.length;s<i;++s)t[s].Uz()}}nJ(t,s,i){const e=this.rG(),h=this.lG(),n=this.My(),r=this.xy(),o=this.tU();t.Ha(e-this.okt*n,h-this.akt*r,n,r),i&&this.fX()&&this.vLt(t),0===o?s.Yl(t):(t.offset(-e,-h),s.Kl(t,this.XTt(),this.JTt()),s.offset(e,h),s.Zl(t)),t.normalize()}MLt(){const t=this.Qxt;2&t&&(this.nJ(this.lkt,this.ukt,!0),this.Qxt=-3&t)}rJ(){return this.MLt(),this.lkt}aJ(){return this.MLt(),this.ukt}GLt(t){const s=this.rG(),i=this.lG(),e=Math.round(s)-s,h=Math.round(i)-i;return 0===e&&0===h?t:(fS.m(t),fS.offset(e,h),fS)}xLt(t){this.lkt.m(t),this.ukt.Yl(this.lkt),this.Qxt&=-3,this.FFt(),this.yLt()}TLt(t){this.Xkt(4,t)}_Lt(){return!!(4&this.Qxt)}J3(t,s,i){return s&&0!==this.Z3()?this.Y3(this.eW().q3()):0===this.cG()||i?t.Ml(this.rJ()):this.ILt()}ILt(){const t=this.eW(),s=this.eJ();return!(s>=t.g2())&&(t.d2(s,cS),cS.Ml(this.rJ()))}Y3(t){const s=this.rJ(),i=s.Za(),e=s.tl(),h=s.Qa(),n=s.sl(),r=this.eJ(),o=r+this.Z3();return t.oS(i,h,r,e,n,o)}uJ(){const t=this.eW();if(t.A2())return this.Y3(t.q3());{const s=t.kB();return this.J3(t.bH(),s.z3(),s.RU())}}i5(t){this.Xkt(1048576,t)}s5(t){this.Xkt(2097152,t)}CLt(){return!!(1048576&this.Qxt)}RLt(){return!!(2097152&this.Qxt)}ALt(t){(t=!!t)!==this.gLt()&&(this.Xkt(16777216,t),this.Akt())}gLt(){return!!(16777216&this.Qxt)}PLt(t){this.dkt=t,this.ELt(),this.fX()&&(this.Mkt.FLt=null)}DLt(){return this.dkt}OLt(){return null!==this.dkt||this.fX()}kLt(){return this.LLt(this.My(),this.xy(),this.tU(),this.XTt(),this.JTt())}NLt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.LLt(t,s,i,e,h)}LLt(t,s,i,e,h){let n=this.pkt;null===n&&(n={Gkt:lS.zh(lS.au),width:NaN,height:NaN,angle:NaN},this.pkt=n);const r=n.Gkt;if(n.width===t&&n.height===s&&n.angle===i)return r;const o=this.dkt;if(this.fX()){const i=this.Yz(),n=this.Zz(),a=this.dX();let l=this.Mkt.FLt;l||(o?(mS.m(o),mS.offset(i,n)):mS.gu(),l=a.lx(mS),this.Mkt.FLt=l),a.ux(l,r),r.offset(-i,-n),r.bu(t,s,e,h)}else o?(r.m(o),r.bu(t,s,e,h)):r.Su(this.aJ(),-this.rG(),-this.lG());return n.width=t,n.height=s,n.angle=i,r}ELt(){this.BLt(!0);const t=this.pkt;null!==t&&(t.width=NaN)}rX(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.Yq().fV().tV())throw new Error("object does not support mesh");this.aX(),this.Mkt={WLt:lS.zh(lS.Yw.xG,t,s),jLt:lS.zh(lS.Yw.xG,t,s),FLt:null}}fX(){return null!==this.Mkt}dX(){if(!this.fX())throw new Error("no mesh");return this.Mkt.WLt}VLt(){if(!this.fX())throw new Error("no mesh");return this.Mkt.jLt}ULt(t){this.Xkt(65536,t)}HLt(){return!!(65536&this.Qxt)}BLt(t){this.Xkt(131072,t)}zLt(){return!!(131072&this.Qxt)}vLt(t){const s=this.Mkt.WLt,i=Math.min(s.HG(),0),e=Math.min(s.zG(),0),h=Math.max(s.JG(),1),n=Math.max(s.XG(),1),r=t.width(),o=t.height();t.offsetLeft(i*r),t.offsetTop(e*o),t.al((h-1)*r),t.ll((n-1)*o),this.yT=s.qG()}aX(){this.Mkt&&(this.Mkt.WLt.Jh(),this.Mkt.jLt.Jh(),this.Mkt=null,this.ELt())}uX(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!SS.has(e))throw new Error("invalid mode");const h="relative"===e;let n=i.x,r=i.y;const o=i.oH;let a="number"==typeof i.pX?i.pX:h?0:-1,l="number"==typeof i.mX?i.mX:h?0:-1;if(!this.fX())return!1;const u=this.dX(),c=u.$G(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.cG()!==o&&(c.fG(o),f=!0),h&&(n+=t/(u.BG()-1),r+=s/(u.WG()-1)),-1!==a||h?(h&&(a+=t/(u.BG()-1)),a=lS.Kh(a,0,1)):a=c.dG(),-1!==l||h?(h&&(l+=s/(u.WG()-1)),l=lS.Kh(l,0,1)):l=c.mG(),c.rG()===n&&c.lG()===r&&c.dG()===a&&c.mG()===l?f:(c.oG(n),c.uG(r),c.pG(a),c.gG(l),this.ELt(),!0)}yDt(){return this.fi.yDt()}TJ(t,s){return!!this.rJ().xl(t,s)&&!!this.aJ().xl(t,s)&&(this.yDt()?this.fi.MX().oAt(t,s):!this.OLt()||this.kLt().xl(t-this.rG(),s-this.lG()))}JLt(){return!!(16&this.Qxt)}FFt(){if(!this.JLt()||!this.GJ()||256&this.Qxt)return;const t=this.rJ(),s=this.zpt.AFt(),i=this.ckt;if(cS.set(s.HQ(t.Za()),s.zQ(t.Qa()),s.HQ(t.tl()),s.zQ(t.sl())),i.equals(cS))return;const e=this.fi;i===wS?(s.JQ(e,null,cS),this.ckt=lS.zh(lS.Rect,cS)):(s.JQ(e,i,cS),i.m(cS)),this.Qxt&=-17}XLt(){this.Qxt|=16}wLt(){const t=this.ckt;t!==wS&&(this.zpt.AFt().JQ(this.fi,t,null),this.ckt=wS)}yLt(){const t=this.eW();if(!t.a1()||256&this.Qxt)return;const s=t.Q1(),i=this.rJ(),e=this.fkt;if(cS.set(s.HQ(i.Za()),s.zQ(i.Qa()),s.HQ(i.tl()),s.zQ(i.sl())),e.equals(cS))return;const h=this.fi;e===yS?(s.JQ(h,null,cS),this.fkt=lS.zh(lS.Rect,cS)):(s.JQ(h,e,cS),e.m(cS)),t.t2()}R1(){const t=this.fkt;t!==yS&&(this.eW().Q1().JQ(this.fi,t,null),this.fkt=yS)}q2(){return this.fkt}mJ(){const t=this.fi,s=this.tkt,i=s.rW();i.length&&i.at(-1)===t||(s.C1(t,!1),s.T1(t,!1),this.Nc.lW())}yJ(){const t=this.fi,s=this.tkt,i=s.rW();i.length&&i[0]===t||(s.C1(t,!1),s.I1(t,!1),this.Nc.lW())}SJ(t){const s=this.fi,i=this.tkt;if(i.kB()!==t.kB())throw new Error("layer from different layout");t!==i&&(i.C1(s,!0),this.oW(t),t.T1(s,!0),this.Nc.lW())}vJ(t,s){const i=this.fi;let e=!1;const h=this.tkt;if(t.zH()===i.zH())return;const n=t.iW();if(!n)throw new Error("expected world instance");const r=n.eW();h.VL()!==r.VL()&&(h.C1(i,!0),this.oW(r),r.T1(i,!0),e=!0);const o=r.s3(i,t,!!s);(e||o)&&this.Nc.lW()}jz(){return this.wkt}qLt(t){this.Xkt(64,t)}a3(){return!!(64&this.Qxt)}b5(t,s=null){const i={x:this.rG(),y:this.lG(),w:this.My(),h:this.xy(),l:this.eW().J1(),zi:this.hW()};0!==this.cG()&&(i.ze=this.cG()),0!==this.tU()&&(i.a=this.Fkt()),this.K1()||(i.c=this.HM.toJSON()),.5!==this.Yz()&&(i.oX=this.Yz()),.5!==this.Zz()&&(i.oY=this.Zz()),0!==this.gH()&&(i.bm=this.gH()),this.WU()||(i.v=this.WU()),this.GJ()||(i.ce=this.GJ()),this._Lt()&&(i.be=this._Lt()),this.wkt&&(i.fx=this.wkt.b5());const e=!!(32&this.Qxt);return e&&(i.sfi=e),this.mkt&&(i.sft=[...this.mkt].join(" ")),this.bkt&&"visual-state"!==t&&(i.sgi=this.bkt.b5(t,s),MS.has(this)&&(i.sgcd=MS.get(this).Ckt,i.sgzid=MS.get(this).Rkt)),this.fX()&&(i.mesh=this.dX().SG()),i}DOt(){return{x:this.Ra,y:this.Aa,z:this.zM,w:this.ekt,h:this.hkt,a:this.Io,sgi:this.mrt()?this.mrt().ROt():null}}jOt(t){t&&(this.Ra=t.x,this.Aa=t.y,this.zM=t.z,this.ekt=t.w,this.hkt=t.h,this.Io=t.a,t.sgi&&this.mrt()&&this.mrt().v5(t.sgi),this.Lkt(),this.Uz())}UFt(){this.Tkt(),this.lLt(),this.fLt(null),this.bkt&&this.bkt.kOt(this.dOt,this.pOt)}C8(t){"visual-state"!==t&&this.lLt()}P8(t,s="full",i=null){if(t.hasOwnProperty("sgi")&&"visual-state"!==s){if(256&this.Qxt)return;this.bkt.P8(t.sgi,i)}}iOt(t,s="full",i=null){if("visual-state"!==s)if(256&this.Qxt)this.Tkt();else{if(t.hasOwnProperty("sgi"))this.bkt.kOt(null,null,t.sgi,i);else if(i?.RIt&&this.dOt)for(const t of this.dOt)t.jY()||this.Nc.NH(t);this.Tkt(),this.Uz()}}v5(t,s,i=null){if(vS=!1,this.oG(t.x),this.uG(t.y),this.hy(t.w),this.ny(t.h),this.F1(t.zi),this.fG(t.hasOwnProperty("ze")?t.ze:0),this.QV(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?pS.wa(t.c):t.hasOwnProperty("o")?(pS.ko(this.HM),pS.a=t.o):pS.Co(1,1,1,1),this._kt(pS),this.$z(t.hasOwnProperty("oX")?t.oX:.5),this.Qz(t.hasOwnProperty("oY")?t.oY:.5),this.YM(t.hasOwnProperty("bm")?t.bm:0),this.NU(!t.hasOwnProperty("v")||t.v),this.xJ(!t.hasOwnProperty("ce")||t.ce),this.TLt(!!t.hasOwnProperty("be")&&t.be),this.SLt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.wkt&&t.hasOwnProperty("fx")&&this.wkt.v5(t.fx),t.hasOwnProperty("sgi")&&"visual-state"!==s){this.fLt(null);const s=this.bkt,i=t.sgi;s.v5(i),s.kOt(this.dOt,this.pOt),this.YLt(t.sgcd,t.sgzid)}if(t.hasOwnProperty("mesh")){const s=t.mesh;this.rX(s.cols,s.rows),this.dX().bG(s)}else this.aX();this.Uz(),vS=!0,this.Akt(),"visual-state"!==s&&this.Nc.$Lt(this.Yq(),t)}YLt(t,s){t&&lS.Qi(s)&&MS.set(this,{Ckt:t,Rkt:s})}}}{const xS=self._s;xS.MEt=class extends xS.Uh{constructor(t,s){super();const i=t.AW(),e=i.Qvt(s[1]);i.KLt().$At(e),this.Nc=i,this.zpt=t,this.OAt=xS.kj.LX(e),this.bRt=null,this.ZLt=null,this.QPt=e.Instance,this.u0=s[2],this.Yh=s[0],this.LMt=this.Nc.byt(s[3]);const h=this.OAt.Ext();if(h<2&&(this.bRt=xS.zh(e.BEt,this),!(this.bRt instanceof xS.DAt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(xS.kj.iRt(this,h),h>=2){const t=e.BEt??globalThis.QY;if(this.ZLt=new t,!(this.ZLt instanceof globalThis.QY))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.ZLt=new globalThis.OX;xS.kj.eRt(h),this.KCt()}static i_(t,s){return xS.zh(xS.MEt,t,s)}Jh(){this.Nc=null,this.OAt=null,this.bRt&&(this.bRt.Jh(),this.bRt=null),this.QPt=null}CTt(){return this.bRt}KCt(){this.bRt?this.bRt.KCt():this.ZLt&&this.ZLt.dY()}AW(){return this.Nc}EH(){return this.zpt}RX(){return this.OAt}rFt(){return this.QPt}Rc(){return this.Yh}J1(){return this.u0}PX(){return this.ZLt}byt(){return this.LMt}}}{const TS=self._s,_S=self.IX;TS.iDt=class extends TS.Uh{constructor(t){super(),this.Nc=t.runtime,this.mGt=t.AX,this.OAt=this.mGt.RX(),this.fi=t.FX,this.Vw=t.index,this.qFt=null,this.YFt=null,this.OAt.T1(this.fi)}Jh(){this.YFt&&(this.YFt.LH(),this.YFt=null),this.OAt.C1(this.fi),this.qFt&&(this.qFt.Jh(),this.qFt=null),this.Nc=null,this.mGt=null,this.OAt=null,this.fi=null}iFt(t){if(this.qFt)throw new Error("already got sdk instance");if(this.RX().Ext()<2){if(this.qFt=TS.zh(this.mGt.rFt(),this,t),!(this.qFt instanceof TS.kAt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const s=this.RX().ZCt();this.sRt(s.Instance,t)}}MX(){return this.qFt??this.YFt}DX(){return this.fi}AW(){return this.Nc}EX(){return this.mGt}RX(){return this.OAt}Sot(){return this.Vw}BAt(){this.qFt?this.qFt.BAt():this.YFt.i$()}UAt(t,s){this.qFt&&this.qFt.UAt(t,s)}sOt(){return this.qFt?this.qFt.jRt():this.YFt.Rz()}SG(t="full"){return this.qFt?this.qFt.SG(t):this.YFt.Az(t)}bG(t,s="full"){if(this.qFt)return this.qFt.bG(t,s);this.YFt.Pz(t,s)}static QLt(t,s,i){const e=globalThis.t$;let h,n;h=s instanceof e?t.mU(s):s.NAt(),n=i instanceof e?t.mU(i):i.NAt();const r=h.DX(),o=n.DX(),a=r.EH().VL(),l=o.EH().VL();if(a!==l)return a-l;const u=r.VDt(),c=o.VDt();return u!==c?u-c:h.Sot()-n.Sot()}sRt(t,s){const i=_S,e=t??this.qFt.ZCt(),h=e||i,n=this.RX().Ext();if(TS.kj.iRt(this,n),TS.kj.KAt(s),this.YFt=new h,TS.kj.ZAt(),TS.kj.eRt(n),e&&!(this.YFt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);return this.YFt}GRt(){return this.YFt||this.sRt()}zRt(){return!!this.YFt}}}{const IS=self._s;IS.J0=class extends IS.Uh{constructor(t,s){super(),this.IG=t,this.tNt=[],this.sNt=[],this.iNt=new Map,this.eNt=[],this.hNt=[],this.nNt=new Set,this.gM=!0;for(const t of s){const s=IS.zh(IS.rNt,this,t,this.tNt.length);this.tNt.push(s),this.iNt.set(s.Rc().toLowerCase(),s),t.length>=3&&this.eNt.push(this.oNt(s,t[2]))}this.AW().aNt(this)}Jh(){this.AW().lNt(this);for(const t of this.hNt)t.Jh();IS.Sr(this.hNt),IS.Sr(this.tNt),IS.Sr(this.sNt),this.iNt.clear(),IS.Sr(this.eNt),this.IG=null}uNt(t){this.nNt.add(t)}cNt(t){this.nNt.delete(t)}fNt(t){t.fb()&&(this.hNt=this.tNt.map(t=>{const s=t.hI();return s.dNt()>0?IS.zh(IS.Yw.pNt,s):null}),this.mNt());for(const s of this.nNt)s.fNt(t)}tFt(t){if(t.length){this.tNt=t.concat(this.tNt);for(const s of t)this.iNt.set(s.Rc().toLowerCase(),s);for(let t=0,s=this.tNt.length;t<s;++t)this.tNt[t].j1(t)}}oNt(t,s){t.gNt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=IS.zh(IS.Go);e.wa(s),i[t]=e}}return i}jG(){return this.IG}AW(){return this.IG.AW()}WX(){IS.Sr(this.sNt);let t=!0;for(const s of this.tNt)s.WSt()&&(this.sNt.push(s),s.hI().FM()||(t=!1));this.gM=t}qV(){return this.tNt}pFt(){return this.tNt.length>0}ort(t){return this.iNt.get(t.toLowerCase())||null}yNt(t){if((t=Math.floor(+t))<0||t>=this.tNt.length)throw new RangeError("invalid effect type index");return this.tNt[t]}NX(t){return this.yNt(t).WSt()}BX(t,s){this.yNt(t).gNt(s)}Z1(){return this.sNt}a3(){return this.sNt.length>0}FM(){return this.gM}rrt(t){return this.eNt[t]}$0(t){return t<this.hNt.length?this.hNt[t]:this.eNt[t]}jX(t,s){if(t<0||t>=this.eNt.length)return null;const i=this.eNt[t];return s<0||s>=i.length?null:i[s]}VX(t,s,i){if(t<0||t>=this.eNt.length)return!1;const e=this.eNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof IS.Go){if(h.zo(i))return!1;h.ko(i)}else{if(h===i)return!1;e[s]=i}return t<this.hNt.length&&this.hNt[t].wNt(s,i),!0}mNt(){const t=this.eNt,s=this.hNt;for(let i=0,e=Math.min(t.length,s.length);i<e;++i){const e=s[i],h=t[i];for(let t=0,s=h.length;t<s;++t)e.wNt(t,h[t])}}static SNt(t){return t&&t instanceof IS.Go?{t:"color",v:t.toJSON()}:t}static bNt(t){if(null===t)return NaN;if("object"==typeof t){if("color"===t.t){const s=IS.zh(IS.Go);return s.wa(t.v),s}throw new Error("invalid effect parameter type")}return t}static vNt(t){return t.map(IS.J0.SNt)}static MNt(t){return t.map(IS.J0.bNt)}SG(){return this.tNt.map(t=>({name:t.Rc(),active:t.WSt(),params:IS.J0.vNt(this.eNt[t.VL()])}))}bG(t){for(const s of t){const t=this.ort(s.name);t&&(t.gNt(s.active),this.eNt[t.VL()]=IS.J0.MNt(s.params))}this.WX(),this.mNt()}}}{const CS=self._s;CS.rNt=class extends CS.Uh{constructor(t,s,i){super(),this.z0=t,this.Wc=s[0],this.Yh=s[1],this.Vw=i,this.jM=null,this.Nf=!0}Jh(){this.z0=null,this.jM=null}QEt(t){const s=CS.zh(CS.rNt,t,[this.Wc,this.Yh],-1);return s.jM=this.jM,s.Nf=this.Nf,s}fNt(t){const s=t.Sb(this.Wc);if(!s)throw new Error("failed to find shader program '"+this.Wc+"'");this.jM=s}XV(){return this.z0}Rc(){return this.Yh}j1(t){this.Vw=t}VL(){return this.Vw}jG(){return this.z0.jG()}AW(){return this.z0.AW()}gNt(t){this.Nf=!!t}WSt(){return this.Nf}hI(){return this.jM}GNt(){const t=[];for(let s=0,i=this.jM.nI();s<i;++s){const i=this.jM.rI(s);if("float"===i||"percent"===i)t.push(0);else{if("color"!==i)throw new TypeError("unknown effect parameter type");t.push(CS.zh(CS.Go,1,1,1,1))}}return t}}}{const RS=self._s;RS.Skt=class extends RS.Uh{constructor(t,s){super(),this.fi=t,this.xNt=s,this.z0=t.EH().XV(),this.TNt=!0,this.Z0=!0,this._Nt=!1,this.INt=!1,this.CNt=!1,this.RNt=!1,this.NL=RS.zh(RS.Yw.IO,t.AW().XB().X0(),{gO:(t,s)=>{const i=s.AL(),e=i.iW();t.$M(e.q0()),t.ev(e.eJ()),i.hx(t),t.ev(0)},yO:t=>{const s=t.iAt(),[i,e]=t.sAt();return{ML:s,GL:i,xL:e}},wO:t=>this.$0(t)}),this.ANt=[],this.sNt=[],this.gM=!0,this.eNt=[],this.hNt=[],this.fNt(t.AW().IM());for(let t=0,s=this.z0.qV().length;t<s;++t)this.ANt.push(!0);this.WX(),this.z0.uNt(this)}Jh(){this.z0.cNt(this);for(const t of this.hNt)t&&t.Jh();RS.Sr(this.hNt),this.NL.Jh(),this.NL=null,RS.Sr(this.ANt),RS.Sr(this.sNt),RS.Sr(this.eNt),this.fi=null,this.z0=null}fNt(t){t.fb()&&(this.hNt=this.z0.qV().map(t=>{const s=t.hI();return s.dNt()>0?RS.zh(RS.Yw.pNt,s):null}))}Ikt(t){let s=0;for(const i of t)this.eNt.push(this.oNt(s,i)),++s;this.mNt(),this.WX()}oNt(t,s){this.ANt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const s=i[t];if(Array.isArray(s)){const e=RS.zh(RS.Go);e.wa(s),i[t]=e}}return i}lDt(){for(const t of this.z0.qV())this.eNt.push(t.GNt());this.mNt()}jG(){return this.IG}XV(){return this.z0}jL(){return this.Y1(),this.NL}AW(){return this.fi.AW()}WX(){RS.Sr(this.sNt);const t=this.xNt,s=this.z0.qV(),i=this.sNt,e=this.ANt;let h=!0;for(let t=0,n=s.length;t<n;++t)if(e[t]){const e=s[t];i.push(e),e.hI().FM()||(h=!1)}this.gM=h,t.qLt(!!i.length),this.TNt=!0}Y1(){const t=this.fi,s=this.xNt,i=s.K1(),e=t.fV().$j(),h=0!==s.tU()||0!==s.eW().tU()||s.My()<0||s.xy()<0,n=t.nAt(),r=t.EM();(this.TNt||i!==this.Z0||e!==this._Nt||h!==this.INt||n!==this.CNt||r!==this.RNt||this.NL.bk())&&(this.NL.vk(this.sNt.map(t=>t.hI()),{bO:this.sNt.map(t=>t.VL()),vO:!i||r,GO:e,xO:n,TO:h}),this.TNt=!1,this.Z0=i,this._Nt=e,this.INt=h,this.CNt=n,this.RNt=r)}Z1(){return this.sNt}rrt(t){return this.eNt[t]}$0(t){return t<this.hNt.length?this.hNt[t]:this.eNt[t]}jX(t,s){if(t<0||t>=this.eNt.length)return null;const i=this.eNt[t];return s<0||s>=i.length?null:i[s]}VX(t,s,i){if(t<0||t>=this.eNt.length)return!1;const e=this.eNt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof RS.Go){if(h.zo(i))return!1;h.ko(i)}else{if(h===i)return!1;e[s]=i}return t<this.hNt.length&&this.hNt[t].wNt(s,i),!0}mNt(){const t=this.eNt,s=this.hNt;for(let i=0,e=s.length;i<e;++i){const e=s[i],h=t[i];for(let t=0,s=h.length;t<s;++t)e.wNt(t,h[t])}}FM(){return this.gM}PNt(){return this.sNt.some(t=>t.hI().kM())}NX(t){return this.ANt[t]}BX(t,s){this.ANt[t]=!!s}qV(){return this.z0.qV()}b5(){return this.z0.qV().map(t=>({name:t.Rc(),active:this.ANt[t.VL()],params:RS.J0.vNt(this.eNt[t.VL()])}))}v5(t){for(const s of t){const t=this.z0.ort(s.name);t&&(this.ANt[t.VL()]=s.active,this.eNt[t.VL()]=RS.J0.MNt(s.params))}this.WX(),this.mNt()}}}{const AS=self._s,PS=[],ES=[],FS=[],DS=AS.zh(AS.au),OS=AS.zh(AS.au),kS=AS.zh(AS.Cl),LS=AS.zh(AS.Rect),NS=AS.zh(AS.Rect);let BS=null,WS=null,jS=null;AS.ENt=class extends AS.Uh{constructor(t){super(),this.Nc=t,this.FNt=0,this.DNt=0,this.ONt=[],this.kNt=0,this.LNt=0,this.NNt=0,this.BNt=0,this.WNt=new self.$W(this)}Jh(){this.Nc=null}AW(){return this.Nc}YL(){return this.WNt}jNt(){this.LNt=this.kNt,this.kNt=0,this.BNt=this.NNt,this.NNt=0}VNt(){return this.LNt}UNt(){return this.BNt}HNt(t,s){const i=t.iW(),e=s.iW();i&&e&&i.GJ()&&e.GJ()&&this.ONt.push([t,s])}A_t(t,s,i){for(const[e,h]of this.ONt){let n=null;if(t===e)n=h;else{if(t!==h)continue;n=e}n.B_t(s)&&(i.includes(n)||i.push(n))}}P_t(t,s){if(!this.ONt.length)return!1;for(const[i,e]of this.ONt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}zNt(){AS.Sr(this.ONt)}ZW(t,s){if(!t||!s||t===s)return!1;const i=t.iW(),e=s.iW();if(!i.GJ()||!e.GJ())return!1;this.kNt++;const h=i.eW(),n=e.eW();return h.U2(n)?this.JNt(i,e):this.XNt(i,e)}JNt(t,s){if(!t.rJ().Ml(s.rJ()))return!1;if(this.NNt++,!t.aJ().tu(s.aJ()))return!1;if(t.yDt()&&s.yDt())return!1;if(t.yDt())return this.qNt(t,s);if(s.yDt())return this.qNt(s,t);if(!t.OLt()&&!s.OLt())return!0;const i=t.kLt(),e=s.kLt();return i.vu(e,s.rG()-t.rG(),s.lG()-t.lG())}XNt(t,s){const i=t.yDt(),e=s.yDt();if(i&&!e)return this.YNt(t,s);if(e&&!i)return this.YNt(s,t);if(e||i)return!1;{const i=t.eW(),e=s.eW();DS.m(t.kLt()),OS.m(s.kLt());const h=DS.du();for(let s=0,e=h.length;s<e;s+=2){const e=s+1,n=h[s],r=h[e],[o,a]=i.xH(n+t.rG(),r+t.lG());h[s]=o,h[e]=a}const n=OS.du();for(let t=0,i=n.length;t<i;t+=2){const i=t+1,h=n[t],r=n[i],[o,a]=e.xH(h+s.rG(),r+s.lG());n[t]=o,n[i]=a}return DS.yu(),OS.yu(),this.NNt++,DS.vu(OS,0,0)}}YNt(t,s){const i=t.eW(),e=s.eW();BS||(BS=AS.zh(AS.au)),WS||(WS=AS.zh(AS.Rect)),jS||(jS=AS.zh(AS.Cl));const h=s.rG(),n=s.lG(),[r,o]=e.xH(h,n),[a,l]=i.MH(r,o),u=a-h,c=l-n;if(WS.m(s.rJ()),WS.offset(u,c),!t.rJ().Ml(WS))return!1;if(jS.m(s.aJ()),jS.offset(u,c),this.NNt++,!t.aJ().tu(jS))return!1;BS.m(s.kLt());const f=BS.du();for(let t=0,s=f.length;t<s;t+=2){const s=t+1;f[t]+=u,f[s]+=c}return BS.yu(),this.qNt(t,s,a,l,BS,WS,jS)}qNt(t,s,i,e,h,n,r){const o=void 0!==n?n:s.rJ(),a=t.rG(),l=t.lG(),u=t.Yq().MX(),c=void 0!==i?i:s.rG(),f=void 0!==e?e:s.lG(),d=s.OLt(),p=void 0!==r?r:s.aJ(),m=ES;u.$Nt(o,m);for(let t=0,i=m.length;t<i;++t){const i=m[t],e=i.KNt();if(this.kNt++,o.Gl(e,a,l)&&(kS.Yl(e),kS.offset(a,l),kS.tu(p)))if(d){const t=void 0!==h?h:s.kLt();let n=c,r=f;void 0!==h&&(n=s.rG(),r=s.lG());const o=i.ZNt();if(o){if(this.NNt++,o.vu(t,n-(a+e.Za()),r-(l+e.Qa())))return AS.Sr(m),!0}else if(DS.Su(kS,0,0),DS.vu(t,n,r))return AS.Sr(m),!0}else{const t=i.ZNt();if(!t)return AS.Sr(m),!0;if(DS.Su(p,0,0),t.vu(DS,-(a+e.Za()),-(l+e.Qa())))return AS.Sr(m),!0}}return AS.Sr(m),!1}QNt(t,s,i){const e=t.xV(),h=this.Nc.PN();if(!h)throw new Error("cannot call outside event");const n=h.bmt(),r=new AS.tBt;if(e.emt()){i||(e.umt(!1),AS.Sr(e.cmt())),n&&AS.Sr(e.fmt());for(const h of t.GV()){const t=h.iW(),o=t.eW();let a=!1;if(r.VU(o)&&t.uJ()&&(a=s.some(([s,i])=>{const[e,h]=r.MH(o,s,i,t.eJ());return t.TJ(e,h)})),a){if(i)return!1;e.amt(h)}else n&&e.lmt(h)}}else{let t,o=!1;n&&!h.lvt(this.Nc.cyt())?this.Nc.FTt()&&!e.fmt().length&&e.cmt().length?t=e.cmt():(t=e.fmt(),o=!0):t=e.cmt();let a=0;for(let h=0,l=t.length;h<l;++h){const l=t[h],u=l.iW(),c=u.eW();let f=!1;if(r.VU(c)&&u.uJ()&&(f=s.some(([t,s])=>{const[i,e]=r.MH(c,t,s,u.eJ());return u.TJ(i,e)})),f){if(i)return!1;o?e.amt(l):t[a++]=l}else o?t[a++]=l:n&&e.lmt(l)}i||(t.length=a)}return t.Hvt(),r.Jh(),!!i||e.hmt()}sBt(t,s){if(!t)return!0;for(const i of s.OFt())if(!t.U2(i))return!1;return!0}ETt(t,s,i,e){if(s.B1())for(const h of s.UV())this.sBt(t,h)?(h.EFt(),h.AFt().XQ(i,e)):AS.Fh(e,h.GV());else this.sBt(t,s)?(s.EFt(),s.AFt().XQ(i,e)):AS.Fh(e,s.GV())}aj(t,s,i,e){for(const h of s)this.ETt(t,h,i,e)}iBt(t,s,i){const e=this.Nc.tPt();e&&this.aj(t,e.h7(),s,i)}eBt(t,s,i){const e=this.Nc.sPt();e&&this.aj(t,e.h7(),s,i)}bLt(t,s){return t.bDt()&&(!s||s.iW().bLt(t.Nxt().get("solidTags")))}sj(t){const s=t.iW();this.iBt(s.eW(),s.rJ(),PS);for(const s of PS)if(this.bLt(s,t)&&this.ZW(t,s))return AS.Sr(PS),s;return AS.Sr(PS),null}hBt(t,s){this.iBt(null,t,PS);for(const i of PS)if(this.bLt(i,s)&&this.nBt(t,i))return AS.Sr(PS),i;return AS.Sr(PS),null}rBt(t,s){let i=null;s&&(i=FS,AS.Sr(i));const e=t.iW();this.eBt(e.eW(),e.rJ(),PS);for(const e of PS)if(e.MDt()&&this.ZW(t,e)){if(!s)return AS.Sr(PS),e;i.push(e)}return AS.Sr(PS),i}oBt(t,s,i,e,h){e=e||50;const n=t.iW(),r=n.rG(),o=n.lG();for(let a=0;a<e;++a)if(n.zz(r+s*a,o+i*a),n.Uz(),!this.ZW(t,h))return!0;return n.zz(r,o),n.Uz(),!1}aBt(t,s,i,e,h,n){e=e||50;const r=t.iW(),o=r.rG(),a=r.lG();let l=null,u=null;for(let c=0;c<e;++c)if(r.zz(o+s*c,a+i*c),r.Uz(),!this.ZW(t,l))if(l=this.sj(t),l)u=l;else if(h&&(l=n?this.ZW(t,n)?n:null:this.rBt(t),l&&(u=l)),!l)return u&&this.lBt(t,s,i,u,16,!0),!0;return r.zz(o,a),r.Uz(),!1}uBt(t,s,i,e){e=e||50;const h=t.iW(),n=h.rG(),r=h.lG();let o=null,a=null;for(let l=0;l<e;++l)for(let e=0;e<2;++e){const u=2*e-1;if(h.zz(n+s*l*u,r+i*l*u),h.Uz(),!this.ZW(t,o)){if(o=this.sj(t),!o)return a&&this.lBt(t,s*u,i*u,a,16,!0),!0;a=o}}return h.zz(n,r),h.Uz(),!1}lBt(t,s,i,e,h,n){let r=2,o=!1,a=!1;const l=t.iW();let u=l.rG(),c=l.lG();for(;r<=h;){const h=1/r;r*=2,l.Xz(s*h*(o?1:-1),i*h*(o?1:-1)),l.Uz(),this.ZW(t,e)||n&&this.sj(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.rG(),c=l.lG())}a&&(l.zz(u,c),l.Uz())}cBt(t,s=100){let i=0;const e=t.iW(),h=e.rG(),n=e.lG();let r=0,o=this.sj(t);if(!o)return!0;for(;i<=s;){let s=0,a=0;switch(r){case 0:s=0,a=-1,i++;break;case 1:s=1,a=-1;break;case 2:s=1,a=0;break;case 3:s=1,a=1;break;case 4:s=0,a=1;break;case 5:s=-1,a=1;break;case 6:s=-1,a=0;break;case 7:s=-1,a=-1}if(r=(r+1)%8,e.zz(Math.floor(h+s*i),Math.floor(n+a*i)),e.Uz(),!this.ZW(t,o)&&(o=this.sj(t),!o))return!0}return e.zz(h,n),e.Uz(),!1}fBt(t,s,i,e){const h=t.iW(),n=h.rG(),r=h.lG(),o=Math.max(10,AS.hn(s,i,n,r)),a=AS.rn(s,i,n,r),l=e||this.sj(t);if(!l)return AS.Zh(a+Math.PI);let u=l,c=0,f=0;const d=AS.Qh(5);let p;for(p=1;p<36;++p){const n=a-p*d;if(h.zz(s+Math.cos(n)*o,i+Math.sin(n)*o),h.Uz(),!this.ZW(t,u)&&(u=e?null:this.sj(t),!u)){c=n;break}}for(36===p&&(c=AS.Zh(a+Math.PI)),u=l,p=1;p<36;++p){const n=a+p*d;if(h.zz(s+Math.cos(n)*o,i+Math.sin(n)*o),h.Uz(),!this.ZW(t,u)&&(u=e?null:this.sj(t),!u)){f=n;break}}if(36===p&&(f=AS.Zh(a+Math.PI)),h.zz(n,r),h.Uz(),f===c)return f;const m=AS.an(f,c)/2;let g;g=AS.un(f,c)?AS.Zh(c+m+Math.PI):AS.Zh(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,G=w-2*v*b;return AS.rn(0,0,M,G)}dBt(t,s,i,e,h){if(!h)return!1;const n=h.iW();return!!n.GJ()&&(this.kNt++,LS.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!!n.rJ().Ml(LS)&&(h.yDt()?this.pBt(t,s,i,e,h,n):(this.NNt++,!!n.aJ().Ql(t,s,i,e)&&(!n.OLt()||n.kLt().Ql(n.rG(),n.lG(),t,s,i,e)))))}pBt(t,s,i,e,h,n){const r=n.rG(),o=n.lG(),a=h.MX(),l=ES;NS.set(t,s,i,e),NS.normalize(),a.$Nt(NS,l);for(let h=0,n=l.length;h<n;++h){const n=l[h],a=n.KNt();if(this.kNt++,LS.Gl(a,r,o)&&(kS.Yl(a),kS.offset(r,o),kS.Ql(t,s,i,e))){const h=n.ZNt();if(!h)return AS.Sr(l),!0;if(this.NNt++,h.Ql(r+a.Za(),o+a.Qa(),t,s,i,e))return AS.Sr(l),!0}}return AS.Sr(l),!1}nBt(t,s){if(!s)return!1;const i=s.iW();if(!i.GJ())return!1;if(this.kNt++,!i.rJ().Ml(t))return!1;if(s.yDt())return this.mBt(t,s,i);if(this.NNt++,kS.Yl(t),!i.aJ().tu(kS))return!1;if(!i.OLt())return!0;const e=DS;e.Yl(t,i.rG(),i.lG());const h=i.kLt();return e.vu(h,0,0)}mBt(t,s,i){const e=i.rG(),h=i.lG(),n=s.MX(),r=ES;n.$Nt(t,r);for(let s=0,i=r.length;s<i;++s){const i=r[s],n=i.KNt();if(this.kNt++,t.Gl(n,e,h)){const s=i.ZNt();if(!s)return AS.Sr(r),!0;if(this.NNt++,DS.Yl(t,0,0),s.vu(DS,-(e+n.Za()),-(h+n.Qa())))return AS.Sr(r),!0}}return AS.Sr(r),!1}gBt(t,s){if(!t)return;const i=t.iW();i.GJ()&&(this.kNt++,i.rJ().Ml(s.rect)&&(t.yDt()?this.yBt(t,i,s):(this.NNt++,i.OLt()?s.wBt(t,i.rG(),i.lG(),i.kLt()):s.SBt(t,i.aJ()))))}yBt(t,s,i){const e=s.rG(),h=s.lG(),n=ES;t.MX().$Nt(i.rect,n);for(let r=0,o=n.length;r<o;r++){const o=n[r],a=o.KNt();if(this.kNt++,i.rect.Gl(a,e,h)){const n=o.ZNt();this.NNt++,n?i.wBt(t,e+a.Za(),h+a.Qa(),n):i.bBt(t,s.rG(),s.lG(),a)}}AS.Sr(n)}ej(t,s){if(t===this.FNt&&s===this.DNt)return;this.FNt=t,this.DNt=s;const i=this.Nc.N1();for(const e of i)if(e.Vj()){for(const t of e.MV())t.iW().wLt();e.AFt().vBt(t,s),e.PFt();for(const t of e.MV()){const s=t.iW();s.XLt(),s.FFt()}}}nj(){return[this.FNt,this.DNt]}MBt(t,s){this.FNt=t,this.DNt=s}}}{const VS=self._s;VS.lEt=class extends VS.Uh{constructor(t,s){super(),this.WQ=t,this.jQ=s,this.VQ=VS.zh(VS.Iu)}Jh(){this.VQ.Jh(),this.VQ=null}vBt(t,s){if(!this.VQ.Au())throw new Error("grid not empty");this.WQ=t,this.jQ=s}UQ(t,s,i){let e=this.VQ.zs(t,s);return e||(i?(e=VS.zh(VS.GBt,this,t,s),this.VQ.Set(t,s,e),e):null)}HQ(t){const s=Math.floor(t/this.WQ);return isFinite(s)?s:0}zQ(t){const s=Math.floor(t/this.jQ);return isFinite(s)?s:0}JQ(t,s,i){if(s)for(let e=s.Za(),h=s.tl();e<=h;++e)for(let h=s.Qa(),n=s.sl();h<=n;++h){if(i&&i.xl(e,h))continue;const s=this.UQ(e,h,!1);s&&(s.Kf(t),s.Au()&&this.VQ.Pu(e,h))}if(i)for(let e=i.Za(),h=i.tl();e<=h;++e)for(let h=i.Qa(),n=i.sl();h<=n;++h)s&&s.xl(e,h)||this.UQ(e,h,!0).kQ(t)}XQ(t,s){let i=this.HQ(t.Za());const e=this.zQ(t.Qa()),h=this.HQ(t.tl()),n=this.zQ(t.sl());if(isFinite(h)&&isFinite(n))for(;i<=h;++i)for(let t=e;t<=n;++t){const e=this.UQ(i,t,!1);e&&e.NQ(s)}}}}{const US=self._s;US.GBt=class extends US.Uh{constructor(t,s,i){super(),this.RQ=t,this.Ra=s,this.Aa=i,this.AQ=US.zh(US.Ou)}Jh(){this.AQ.Jh(),this.AQ=null,this.RQ=null}Au(){return this.AQ.Au()}kQ(t){this.AQ.Bu(t)}Kf(t){this.AQ.Pu(t)}NQ(t){US.Fh(t,this.AQ.Wu())}}}{const HS=self._s,zS=1e-6;HS.xBt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new HS.Rect,this.TBt=2,this._Bt=null,this.IBt=0,this.CBt=0,this.RBt=0,this.ABt=0,this.PBt=0,this.bt=0,this.EBt=1,this.FBt=0,this.DBt=1,this.OBt=0}kBt(){return this.TBt<1.000001}Bf(){this.TBt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.TBt=2,this._Bt=null,this.IBt=0,this.CBt=0,this.RBt=0,this.ABt=0,this.PBt=0,this.bt=0,this.EBt=1,this.FBt=0,this.DBt=1,this.OBt=0,this}LBt(){if(!1===this.kBt())return;const t=this.dx*this.TBt,s=this.dy*this.TBt,i=HS.sn(t,s),e=t/i,h=s/i;this.bt=i-zS,this.ABt=this.x1+e*this.bt,this.PBt=this.y1+h*this.bt,this.IBt=Math.atan2(this.RBt,this.CBt)+Math.PI/2,this.EBt=Math.cos(this.IBt),this.FBt=Math.sin(this.IBt);const n=e*this.EBt+h*this.FBt;if(this.DBt=e-2*this.EBt*n,this.OBt=h-2*this.FBt*n,n>0){const t=Math.PI;this.IBt=HS.Zh(this.IBt+t),this.EBt=-this.EBt,this.FBt=-this.FBt}}NBt(t,s,i,e,h){const n=HS.Xn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);n>=0&&n<this.TBt&&(this.TBt=n,this._Bt=t.zH(),this.CBt=s-e,this.RBt=i-h)}bBt(t,s,i,e){const h=s+e.Za(),n=s+e.tl(),r=i+e.Qa(),o=i+e.sl();this.NBt(t,h,r,n,r),this.NBt(t,n,r,n,o),this.NBt(t,n,o,h,o),this.NBt(t,h,o,h,r)}SBt(t,s){const i=s.Nn(),e=s.Bn(),h=s.Wn(),n=s.jn(),r=s.Vn(),o=s.Un(),a=s.Hn(),l=s.zn();this.NBt(t,i,e,h,n),this.NBt(t,h,n,r,o),this.NBt(t,r,o,a,l),this.NBt(t,a,l,i,e)}wBt(t,s,i,e){const h=e.du();for(let e=0,n=h.length;e<n;e+=2){const r=(e+2)%n,o=h[e]+s,a=h[e+1]+i,l=h[r]+s,u=h[r+1]+i;this.NBt(t,o,a,l,u)}}}}{const JS=self._s;JS.tBt=class{constructor(){this.BBt=new Map}Jh(){for(const t of this.BBt.values())t.WBt.Ru();this.BBt.clear()}jBt(t){let s=this.BBt.get(t);return void 0===s&&(s={jU:null,WBt:new JS.Iu},this.BBt.set(t,s)),s}VU(t){const s=this.jBt(t);return null===s.jU&&(s.jU=t.qU()),s.jU}MH(t,s,i,e){if(0!==e)return t.MH(s,i,e);const h=this.jBt(t);let n=h.WBt.zs(s,i);return void 0===n&&(n=t.MH(s,i,e),h.WBt.Set(s,i,n)),n}}}{const XS=self._s,qS=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),YS=new Set(["high","low"]),$S=self.rs,KS=$S.fs,ZS=($S.ys,KS.create()),QS=XS.zh(XS.Cl),tb=XS.zh(XS.Rect);XS.VBt=class extends XS.Uh{constructor(t){super(),this.Nc=t,this.UBt=[],this.HBt=!1,this.zBt=null,this.JBt=null,this.XBt=null,this.qBt="high-performance",this.YBt=!1,this.$Bt="auto",this.KBt=0,this.ZBt=0,this.QBt="",this.tWt=0,this.sWt=0,this.iWt=0,this.eWt=0,this.hWt=0,this.nWt=0,this.gS="normalized",this.rWt=0,this.oWt=1,this.aWt=1e4,this.JS=!0,this.lWt=0,this.ZO=0,this.QO=0,this.uWt="letterbox-scale",this.cWt="letterbox-scale",this.fWt=0,this.dWt=0,this.pWt=KS.create(),this.mWt="high",this.gWt=this.mWt,this.yWt=!1,this.wWt=[],this.SWt=new Set,this.bWt=self.C3_Shaders,this.vWt=XS.zh(XS.Yw.iO,{ZD:()=>[this.T3(),this._3()],QD:()=>this.MWt(),tO:t=>this.GWt(t),getTime:()=>this.AW().ZN(),sO:()=>this.AW().lW()}),this.xWt=0,this.TWt=0,this._Wt=NaN,this.IWt=null,this.CWt=new Map,this.RWt=NaN,this.AWt=new Map,this.PWt="",this.EWt=1,this.FWt=XS.zh(XS.Rect),this.DWt="",this.OWt=null,this.kWt=null,this.LWt=0,this.NWt=0,this.BWt=-1,this.WWt=0,this.jWt=t=>this.WWt=t.progress,this.VWt=null,this.UWt={HWt:null,zWt:null,JWt:null},this.XWt=0,this.qWt=0,this.YWt=0,this.$Wt="fade-in",this.KWt=null,this.ZWt=new Promise(t=>this.KWt=t)}QWt(t){this.qBt=t}tjt(t){this.HBt=!!t}sjt(t){this.gS=t}ijt(){return this.gS}ejt(t){this.rWt=t}hjt(t,s){this.oWt=t,this.aWt=s}njt(t){this.YBt=!!t}rjt(t){this.$Bt=t}async uo(t){let s=t.canvas;this.UBt.push({canvas:s,ojt:null}),this.Nc.yz("runtime","window-resize",t=>this.ajt(t)),this.Nc.yz("runtime","fullscreenchange",t=>this.ljt(t)),this.Nc.yz("runtime","fullscreenerror",t=>this.ujt(t)),s.addEventListener("webglcontextlost",t=>this.cjt(t)),s.addEventListener("webglcontextrestored",t=>this.fjt(t)),this.yWt=!!t.isFullscreen,this.QBt=t.cssDisplayMode;const i=navigator.gpu&&this.HBt;let e=!1;if(i)try{await this.djt(!0)}catch(t){this.pjt("WebGPU",t),this.JBt=null}if(!this.IM())try{await this.mjt(!0)}catch(t){this.pjt("WebGL",t),this.zBt=null}if(this.IM()||(e=!0),!this.IM()&&i)try{await this.djt(!1)}catch(t){this.pjt("WebGPU",t),this.JBt=null}if(!this.IM())try{await this.mjt(!1)}catch(t){this.pjt("WebGL",t),this.zBt=null}const h=this.IM();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Kv(e),this.JBt&&(this.JBt.gjt=()=>this.yjt(),this.JBt.wjt=()=>this.Sjt()),"normalized"===this.gS?h.ab():(h.lb(),h.rb(this.rWt)),this.hP(t.windowInnerWidth,t.windowInnerHeight,!0),await this.fNt()}pjt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async djt(t){const s={lS:this.oWt,uS:this.aWt};let i=!0;"no"===this.$Bt?i=!1:"auto"===this.$Bt&&(i=XS.Ks.ni);let e="nearest";this.Nc.bjt()&&"nearest"!==this.Nc.gN()&&(e="bilinear");const h={powerPreference:this.qBt,depth:this.Nc.R2(),failIfMajorPerformanceCaveat:t,vjt:this.Nc.L3(),Mjt:this.Nc.bjt(),Gjt:e,pE:this.Nc.xjt(),Tjt:i};this.JBt=XS.zh(XS.Yw._jt,s),await this.JBt.i_(this.UBt[0].canvas,h)}async mjt(t){const s={alpha:!0,powerPreference:this.qBt,dE:"xbox-uwp-webview2"!==this.Nc.pj(),depth:this.Nc.R2(),pE:this.Nc.xjt(),failIfMajorPerformanceCaveat:t,lS:this.oWt,uS:this.aWt};this.YBt&&(s.mE=1),this.zBt=XS.zh(XS.Yw.wE,this.UBt[0].canvas,s),await this.zBt.$S()}async Ijt(){if(this.bWt){const t=[];for(const[s,i]of Object.entries(this.bWt)){i.src=i.Cjt;const e=XS.Yw.Rjt.TI(this.JBt.l_());t.push(this.JBt.xF(Object.assign({QT:e,name:s},i)))}await Promise.all(t)}}async Ajt(){if(this.bWt){const t=[];for(const[s,i]of Object.entries(this.bWt)){let e;if(i.Pjt&&this.zBt.Vx()>=2)i.src=i.Pjt,e=XS.Yw.KT._I();else{if(!i.Ejt)throw new Error(`shader '${s}' does not support WebGL 1`);i.src=i.Ejt,e=XS.Yw.KT.TI()}t.push(this.zBt.xF(Object.assign({QT:e,name:s},i)))}await Promise.all(t),this.zBt.TF(),this.zBt.Mb()}this.zBt.jD()&&(this.IWt=XS.zh(XS.Yw.eE,this.zBt))}async fNt(){this.JBt?await this.Ijt():this.zBt&&await this.Ajt();const t=this.IM();t.Yv(this.JS),t.jD()&&(this._Wt=0);for(const s of this.Nc.Fjt()){for(const i of s.qV())i.fNt(t);s.fNt(t),s.WX()}this.XBt=new self.B$(this.Nc,t)}Jh(){this.Nc=null,this.zBt=null,this.UBt.length=0}cN(){return this.Nc.cN()}ajt(t){const s=this.Nc;if(s.Djt())return;const i=t.devicePixelRatio;this.cN()&&(self.devicePixelRatio=i),s.Ojt(i),this.yWt=!!t.isFullscreen,this.QBt=t.cssDisplayMode,this.hP(t.innerWidth,t.innerHeight),s.lW();const e=new XS.Event("window-resize");e.data=t,s.wf().Cf(e);const h=new XS.Event("resize");h.kjt=this.xj(),h.Ljt=this._j(),h.Njt=this.Cj(),h.Bjt=this.Aj(),s.JZ(h),this.Nc.tW()?.c5(),s.Mz()&&(s.Zyt()||self.Gz.Wjt())&&s.Pk()}ljt(t){this.yWt=!!t.isFullscreen,this.hP(t.innerWidth,t.innerHeight,!0),this.Nc.lW()}ujt(t){this.yWt=!!t.isFullscreen,this.hP(t.innerWidth,t.innerHeight,!0),this.Nc.lW()}hP(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.KBt===t&&this.ZBt===s&&!i)return;this.KBt=t,this.ZBt=s;const e=this.jjt();"letterbox-scale"===e?this.Vjt(t,s):"letterbox-integer-scale"===e?this.Ujt(t,s):"off"===e?this.Hjt(t,s):this.zjt(t,s),this.Jjt(e);for(const{canvas:t}of this.UBt)t.width=this.iWt,t.height=this.eWt;this.Nc.jc("canvas","update-size",{marginLeft:this.hWt,marginTop:this.nWt,styleWidth:this.tWt,styleHeight:this.sWt,displayScale:this.VY()});const h=this.IM();h.hP(this.iWt,this.eWt,!0);for(const t of this.wWt)h.OD(t);XS.Sr(this.wWt),this.Xjt();const n=this.Nc.OB();n.s8(),n.i8()}Xjt(){this.IM().cb(this.pWt,this.T3()/this._3())}I3(){return this.pWt}Vjt(t,s){const i=this.Nc.Pj(),e=this.Nc.dN(),h=this.Nc.mN(),n=e/h;if(t/s>n){const i=s*n;this.tWt=Math.round(i),this.sWt=s,this.hWt=Math.floor((t-this.tWt)/2),this.nWt=0}else{const i=t/n;this.tWt=t,this.sWt=Math.round(i),this.hWt=0,this.nWt=Math.floor((s-this.sWt)/2)}this.iWt=Math.round(this.tWt*i),this.eWt=Math.round(this.sWt*i),this.Nc.qjt(e,h)}Ujt(t,s){const i=this.Nc.Pj();1!==i&&(t+=1,s+=1);const e=this.Nc.dN(),h=this.Nc.mN(),n=e/h;let r;r=t/s>n?s*n*i/e:t/n*i/h,r>1?r=Math.floor(r):r<1&&(r=1/Math.ceil(1/r)),this.iWt=Math.round(e*r),this.eWt=Math.round(h*r),this.tWt=this.iWt/i,this.sWt=this.eWt/i,this.hWt=Math.max(Math.floor((t-this.tWt)/2),0),this.nWt=Math.max(Math.floor((s-this.sWt)/2),0),this.Nc.qjt(e,h)}zjt(t,s){const i=this.Nc.Pj();this.tWt=t,this.sWt=s,this.iWt=Math.round(this.tWt*i),this.eWt=Math.round(this.sWt*i),this.hWt=0,this.nWt=0;const e=this.VY();this.Nc.qjt(this.tWt/e,this.sWt/e)}Hjt(t,s){const i=this.Nc.Pj();this.tWt=this.Nc.w2(),this.sWt=this.Nc.S2(),this.iWt=Math.round(this.tWt*i),this.eWt=Math.round(this.sWt*i),this.Yjt()?(this.hWt=Math.floor((t-this.tWt)/2),this.nWt=Math.floor((s-this.sWt)/2)):(this.hWt=0,this.nWt=0),this.Nc.qjt(this.Nc.w2(),this.Nc.S2())}Jjt(t){if("high"===this.mWt)this.ZO=this.iWt,this.QO=this.eWt,this.gWt="high";else{let s,i;if("off"===this.jjt()?(s=this.Nc.w2(),i=this.Nc.S2()):(s=this.Nc.dN(),i=this.Nc.mN()),this.iWt<s||this.eWt<i)this.ZO=this.iWt,this.QO=this.eWt,this.gWt="high";else if(this.ZO=s,this.QO=i,this.gWt="low","scale-inner"===t){const t=s/i,e=this.KBt/this.ZBt;e<t?this.ZO=this.QO*e:e>t&&(this.QO=this.ZO/e)}else if("scale-outer"===t){const t=s/i,e=this.KBt/this.ZBt;e>t?this.ZO=this.QO*e:e<t&&(this.QO=this.ZO/e)}}}AW(){return this.Nc}$jt(){return this.UBt[0].canvas}X0(){return this.vWt}Yjt(){return this.yWt}Kjt(){return this.QBt}Zjt(t){if(!qS.has(t))throw new Error("invalid fullscreen mode");this.uWt=t;const s=this.Nc.OB();s.s8(),s.i8()}WY(){return this.uWt}Qjt(t){if(!qS.has(t))throw new Error("invalid fullscreen mode");this.cWt=t;const s=this.Nc.OB();s.s8(),s.i8()}tVt(){return this.cWt}jjt(){return this.Yjt()?this.tVt():this.WY()}sVt(t){if(!YS.has(t))throw new Error("invalid fullscreen scaling quality");this.mWt=t,this.Nc.OB().s8()}iVt(){return this.mWt}N3(){return this.gWt}static eVt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}IY(){return this.KBt}CY(){return this.ZBt}T3(){return this.ZO}_3(){return this.QO}Yv(t){this.JS=!!t}hVt(){return this.JS}nVt(t){this.lWt=t}GQ(){return this.lWt}rVt(){return this.IM().DP()}cjt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.wWt=[],this.SWt.clear(),this.vWt.KM(),this.zBt.KM(),this.Nc.j4()}yjt(){console.log("[Construct] WebGPU device lost"),this.wWt=[],this.SWt.clear(),this.vWt.KM(),this.Nc.j4()}async fjt(t){await this.zBt.ZM(),await this.fNt(),await this.Nc.oVt(),console.log("[Construct] WebGL context restored")}async Sjt(){await this.fNt(),await this.Nc.oVt(),console.log("[Construct] WebGPU device restored")}aVt(){return this.zBt}lVt(){return this.JBt}IM(){return this.JBt||this.zBt}JB(){return this.XBt}gj(){let t="";return t=this.Nc.lVt()?"webgpu":"webgl"+this.Nc.aVt().Vx(),this.Nc.IM().Zv()&&(t+="-software"),t}wj(){return this.Nc.lVt()?this.Nc.lVt().uVt():this.Nc.aVt().qD()}AH(){return"low"===this.gWt?1/this.Nc.Pj():this.VY()}VY(){const t=this.jjt();if("off"===t||"crop"===t)return 1;const s=this.Nc.dN(),i=this.Nc.mN(),e=s/i,h=this.iWt/this.eWt;return"scale-inner"!==t&&h>e||"scale-inner"===t&&h<e?this.sWt/i:this.tWt/s}l5(){return"low"===this.N3()?1:this.VY()}o5(){return"low"===this.N3()?1:this.Nc.Pj()}cVt(t,s){this.fWt=t,this.dWt=s}PK(t,s,i,e=!0){s=s||this.ZO,i=i||this.QO;const h=s/2+this.fWt,n=i/2+this.dWt;if(e){let e=this.I3();s===this.ZO&&i===this.QO||(t.cb(ZS,s/i),e=ZS),t.IF(e)}const r=t.gb(h,n,t.ZS(i),h,n,0,i);t.FF(r)}fVt(t,s=!0){const i=this.xj(),e=this._j(),h=i/2,n=e/2;s&&t.IF(this.I3());const r=t.gb(h,n,t.ZS(e),h,n,0,e);t.FF(r)}Cj(){return this.iWt}Aj(){return this.eWt}xj(){return this.tWt}_j(){return this.sWt}bj(){return this.hWt}Mj(){return this.nWt}G4(){return this.UBt.length}dVt(){return"undefined"!=typeof OffscreenCanvas&&this.$jt()instanceof OffscreenCanvas&&("Chromium"!==XS.Ks.ei||XS.Ks.ii>=124)}async J4(t,s=!1){if(t<1)throw new Error("invalid HTML layer count");if(this.UBt.length===t)return;const i={count:t,layersDomState:this.Nc.OB().PB().z1().filter(t=>t.zU()).map(t=>t.t3()),immediate:s,marginLeft:this.hWt,marginTop:this.nWt,styleWidth:this.tWt,styleHeight:this.sWt};let e;if(e=this.cN()?await this.Nc.cW("canvas","set-html-layer-count",i):self.c3_runtimeInterface._OnSetHTMLLayerCount(i),t<this.UBt.length)this.UBt.length=t;else for(const t of e.addedCanvases){t.width=this.iWt,t.height=this.eWt;const s=this.dVt()?"bitmaprenderer":"2d",i=t.getContext(s);if(!i)throw new Error(`failed to acquire '${s}' canvas context`);this.UBt.push({canvas:t,ojt:i})}this.Nc.lW()}O6(t){if(t>=this.UBt.length)return;const s=this.$jt(),i=this.UBt[t].ojt;this.dVt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}B3(t){t.depth=this.Nc.R2();const s=this.wWt,i=s.findIndex(s=>s.zT(t));let e;return-1!==i?(e=s[i],s.splice(i,1)):e=this.IM().AD(t),this.SWt.add(e),e}Y0(t){if(!this.SWt.has(t))throw new Error("render target not in use");this.SWt.delete(t),this.wWt.push(t)}MWt(){const t={Mx:this.Nc.gN()};return"low"===this.N3()&&(t.width=this.T3(),t.height=this._3()),this.B3(t)}GWt(t){this.Y0(t)}*pVt(){for(const t of this.Nc.OB().Z6())for(const s of t.cU()){const t=this.CWt.get(s);t&&(yield t)}}P3(t){if(!this.IM().jD())return null;let s=this.CWt.get(t);return s||(s={Vz:t,name:t.Rc(),mVt:XS.zh(XS.Yw.eE,this.zBt),gVt:0,yVt:0,wVt:0},this.CWt.set(t,s)),s.mVt}SVt(){const t=this.IM();if(t.jD()&&0===this.TWt){this.TWt=t.Xv(),this.RWt=NaN;for(const t of this.pVt())t.gVt=NaN}}bVt(){this.zBt&&this.zBt.jD()&&this.vVt(),this.JBt&&this.JBt.jD()&&this.MVt()}vVt(){if(isNaN(this.RWt)&&(this.RWt=this.IWt.uE(this.xWt,this.TWt),!isNaN(this.RWt))){if(this.Nc.Mz())for(const t of this.pVt())if(t.gVt=t.mVt.uE(this.xWt,this.TWt),isNaN(t.gVt))return;if(this.IWt.cE(this.TWt),this._Wt=Math.min(this.RWt,1),this.Nc.Mz()){const t=new Map;for(const s of this.pVt())s.mVt.cE(this.TWt),s.yVt=Math.min(s.gVt,1),t.set(s.Vz,s.yVt);for(const s of this.pVt()){const i=s.Vz,e=(t.get(i)||0)-i.DU().reduce((s,i)=>s+(t.get(i)||0),0);s.wVt=XS.Kh(e,0,1)}const s=this.Nc.PB(),i=this._Wt-s.z1().reduce((s,i)=>s+(t.get(i)||0),0);self.Gz.GVt(XS.Kh(i,0,1),this._Wt,[...this.pVt()])}this.xWt=this.TWt,this.TWt=0}}xVt(){return this.IWt}MVt(){if(0===this.TWt)return;for(let t=this.xWt;t<this.TWt;++t){const s=this.AWt.get(t);if(s&&!s.JP())return}const t=this.Nc.PB(),s=XS.Mo(t.y4()+1,0);let i=0;for(let t=this.xWt;t<this.TWt;++t){const e=this.AWt.get(t);if(!e)continue;const h=e.XP();let n=BigInt(0),r=BigInt(0);const o=BigInt(0);for(let t=0,i=Math.min(s.length,h.length/2);t<i;++t){const i=h[2*t],e=h[2*t+1];i!==o&&(n===o||i<n)&&(n=i),e>r&&(r=e);const a=Number(e-i)/1e9;s[t]+=a}i+=Number(r-n)/1e9}if(this._Wt=XS.Kh(i,0,1),this.Nc.Mz()){const i=t.cU(),e=new Map;for(let t=0,h=Math.min(i.length,s.length-1);t<h;++t){const h=s[t+1];e.set(i[t],h)}const h=[],n=new Map;for(const[t,s]of e){const i=[...t.kU()].reduce((t,s)=>t+(e.get(s)||0),0);n.set(t,i),h.push({name:t.Rc(),wVt:XS.Kh(s,0,1),yVt:XS.Kh(i,0,1)})}const r=this._Wt-t.z1().reduce((t,s)=>t+(n.get(s)||0),0);self.Gz.GVt(XS.Kh(r,0,1),this._Wt,h)}for(let t=this.xWt;t<this.TWt;++t)this.AWt.delete(t);this.xWt=this.TWt,this.TWt=0}TVt(t){this.AWt.set(this.JBt.Xv(),t)}dB(){return this._Wt}yW(t,s,i,e,h,n){return this.PWt=t,this.EWt=s,this.FWt.Ha(i,e,h,n),this.OWt||(this.OWt=new Promise(t=>{this.kWt=t})),this.OWt}_Vt(){if(!this.PWt)return;let t=this.$jt();const s=this.FWt,i=XS.Kh(Math.floor(s.Za()),0,t.width),e=XS.Kh(Math.floor(s.Qa()),0,t.height);let h=s.width();h=0===h?t.width-i:XS.Kh(Math.floor(h),0,t.width-i);let n=s.height();if(n=0===n?t.height-e:XS.Kh(Math.floor(n),0,t.height-e),(0!==i||0!==e||h!==t.width||n!==t.height)&&h>0&&n>0){const s=XS.uo(h,n);s.getContext("2d").drawImage(t,i,e,h,n,0,0,h,n),t=s}XS.co(t,this.PWt,this.EWt).then(t=>{this.DWt&&URL.revokeObjectURL(this.DWt),this.DWt=URL.createObjectURL(t),this.OWt=null,this.kWt(t)}),this.PWt="",this.EWt=1}IVt(){return this.DWt}CVt(t){t?this.LWt++:this.LWt--}RVt(){return this.LWt>0}AVt(t){const s=this.IM();if(2===t)this.VWt=XS.zh(XS.Yw.nM,this.IM()),this.VWt.EA("Arial"),this.VWt.FA(16),this.VWt.XA("center"),this.VWt.YA("center"),this.VWt.hP(300,200);else if(0===t){const t=this.Nc.PVt();t&&t.MK(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.EVt("splash-images/splash-logo.svg").then(t=>{"done"===this.$Wt?s.AT(t):this.UWt.HWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.FVt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.$Wt?s.AT(t):this.UWt.zWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.FVt("splash-images/splash-website-512.png").then(t=>{"done"===this.$Wt?s.AT(t):this.UWt.JWt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async EVt(t){t=new URL(t,this.Nc.DVt()).toString();const s=await XS.eo(t),i=await this.Nc.OVt(s,2048,2048);return await this.IM().RD(i,{_x:"high"})}async FVt(t){t=new URL(t,this.Nc.DVt()).toString();const s=await XS.eo(t);return await this.IM().RD(s,{_x:"high"})}kVt(){this.Nc.jc("runtime","hide-cordova-splash")}LVt(){this.NWt=Date.now(),this.Nc.wf().addEventListener("loadingprogress",this.jWt),this.BWt=requestAnimationFrame(()=>this.NVt()),3!==this.Nc.BVt()&&this.kVt()}async WVt(){const t=this.IM();this.WWt=1;const s=this.Nc.BVt();4===s&&await this.ZWt,this.KWt=null,this.ZWt=null,-1!==this.BWt&&(cancelAnimationFrame(this.BWt),this.BWt=-1),this.Nc.wf().removeEventListener("loadingprogress",this.jWt),this.jWt=null,this.VWt&&(this.VWt.Jh(),this.VWt=null),this.Nc.jVt(),t.SD(),this.UWt.HWt&&(t.AT(this.UWt.HWt),this.UWt.HWt=null),this.UWt.zWt&&(t.AT(this.UWt.zWt),this.UWt.zWt=null),this.UWt.JWt&&(t.AT(this.UWt.JWt),this.UWt.JWt=null),t.wD(0,0,0,0),t.zv(),this.$Wt="done",this.xWt=t.Xv(),3===s&&this.kVt()}NVt(){if(-1===this.BWt)return;const t=this.IM();t.SD(),this.BWt=-1;const s=this.Nc.XL().zZ(),i=this.Nc.BVt();if(3!==i&&(this.fVt(t),t.wD(0,0,0,0),t.jF(),t.Mb(),t.UF(null)),0===i)this.VVt(s);else if(1===i)this.UVt(s,120,0);else if(2===i)this.HVt(s);else if(3===i)XS.mr();else{if(4!==i)throw new Error("invalid loader style");this.zVt(s)}t.zv(),this.BWt=requestAnimationFrame(()=>this.NVt())}HVt(t){t?this.VWt.JA(1,0,0):this.VWt.JA(.6,.6,.6),this.VWt.Vc(Math.round(100*this.WWt)+"%");const s=this.tWt/2,i=this.sWt/2;QS.Ll(s-150,i-100,s+150,i+100);const e=this.IM();e.UF(this.VWt.kT()),e.pv(QS,this.VWt.kP())}UVt(t,s,i){const e=this.IM();e.Cb(),t?e.BF(1,0,0,1):e.BF(.118,.565,1,1);const h=this.tWt/2,n=this.sWt/2,r=s/2;tb.Ha(h-r,n-4+i,Math.floor(s*this.WWt),8),e.Rect(tb),tb.Ha(h-r,n-4+i,s,8),tb.offset(-.5,-.5),tb.cl(.5,.5),e.BF(0,0,0,1),e.Sv(tb),tb.cl(1,1),e.BF(1,1,1,1),e.Sv(tb)}VVt(t){const s=this.IM(),i=this.Nc.PVt();if(!i)return void this.UVt(t,120,0);const e=i.kT();if(!e)return void this.UVt(t,120,0);const h=e.My(),n=e.xy(),r=this.tWt/2,o=this.sWt/2,a=h/2,l=n/2;QS.Ll(r-a,o-l,r+a,o+l),s.UF(e),s.Cl(QS),this.UVt(t,h,l+16)}zVt(t){const s=this.IM(),i=this.UWt.HWt,e=this.UWt.zWt,h=this.UWt.JWt,n=Date.now();0===this.XWt&&(this.NWt=n);const r=this.Nc.JVt()||this.Nc.XVt()&&!this.Nc.qVt(),o=r?0:200,a=r?0:3e3;let l=1;"fade-in"===this.$Wt?l=Math.min((n-this.NWt)/300,1):"fade-out"===this.$Wt&&(l=Math.max(1-(n-this.YWt)/300,0)),s.Cb(),s.BF(.231*l,.251*l,.271*l,l),tb.set(0,0,this.tWt,this.sWt),s.Rect(tb);const u=Math.ceil(this.tWt),c=Math.ceil(this.sWt);let f,d;this.sWt>256?(s.BF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),tb.Ha(0,.8*c-d/2,f,d),s.Rect(tb),t?s.BF(l,0,0,l):s.BF(.161*l,.953*l,.816*l,l),f=u*this.WWt,tb.Ha(.5*u-f/2,.8*c-d/2,f,d),s.Rect(tb),s.BF(l,l,l,l),s.Mb(),e&&(f=1.5*XS.Kh(.22*c,105,.6*u),d=f/8,tb.Ha(.5*u-f/2,.2*c-d/2,f,d),s.UF(e),s.Rect(tb)),i&&(f=Math.min(.395*c,.95*u),d=f,tb.Ha(.5*u-f/2,.485*c-d/2,f,d),s.UF(i),s.Rect(tb)),h&&(f=1.5*XS.Kh(.22*c,105,.6*u),d=f/8,tb.Ha(.5*u-f/2,.868*c-d/2,f,d),s.UF(h),s.Rect(tb))):(s.BF(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),tb.Ha(0,.85*c-d/2,f,d),s.Rect(tb),t?s.BF(l,0,0,l):s.BF(.161*l,.953*l,.816*l,l),f=u*this.WWt,tb.Ha(.5*u-f/2,.85*c-d/2,f,d),s.Rect(tb),s.BF(l,l,l,l),s.Mb(),i&&(f=.55*c,d=f,tb.Ha(.5*u-f/2,.45*c-d/2,f,d),s.UF(i),s.Rect(tb))),this.XWt++,"fade-in"===this.$Wt&&n-this.NWt>=300&&this.XWt>=2&&(this.$Wt="wait",this.qWt=n),"wait"===this.$Wt&&n-this.qWt>=a&&this.WWt>=1&&(this.$Wt="fade-out",this.YWt=n),("fade-out"===this.$Wt&&n-this.YWt>=300+o||r&&this.WWt>=1&&n-this.NWt<500)&&this.KWt()}}}{const sb=self._s,ib=self.Gz,eb=(self.assert,self.t$),hb={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""};let nb=!0;sb.YVt=class extends sb.Uh{constructor(t){t=Object.assign({},hb,t),super(),this.$Vt=t.messagePort,this.KVt=t.runtimeBaseUrl,this.ZVt=t.previewUrl,this.QVt=!!t.headless,this.tUt=!!t.hasDom,this.sUt=!!t.isInWorker,nb=t.ife,this.iUt=!!t.useAudio,this.eUt=t.exportType,this.ZK=!!t.isiOSCordova,this.hUt=!!t.isiOSWebView,this.nUt=!!t.isWindowsWebView2,this.rUt=!!t.isAnyWebView2Wrapper,this.oUt=!!t.isFBInstantAvailable,this.aUt=!("preview"!==this.eUt||!t.isDebug),this.lUt=this.aUt,this.uUt=this.aUt,this.cUt=0,this.fUt=[],this.dUt=[],this.pUt=!1,this.mUt="",this.gUt="",this.yUt="",this.wUt="",this.SUt=0,this.bUt=0,this.vUt=0,this.ak=self.devicePixelRatio,this.MUt=0,this.GUt=0,this.xUt=0,this.TUt=0,this._Ut=0,this.IUt=!1,this.Pw=!0,this.CUt=!1,this.RUt=!1,this.AUt=!1,this.PUt=null,this.lQ=sb.zh(sb.YK,this,t),this._5=sb.zh(sb.U6,this),this.Mmt=sb.zh(sb.Sgt,this),this.EUt=sb.zh(sb.kj,this,t.wrapperComponentIds),this.FUt=sb.zh(sb.ENt,this),this.Mtt=sb.zh(sb.e8,this),this.DUt=sb.zh(sb.Vct,this),this.OUt=sb.zh(sb.Hct,this),this.hft=sb.zh(sb.Zct,this),this._w=sb.zh(sb.dw,{gw:t=>this.kUt(t),ww:t=>this.LUt(t)}),this.NUt=new Map,this.BUt=[],this.WUt=new Map,this.jUt=new Map,this.VUt=0,this.UUt=[],this.HUt=new Set,this.zUt=[],this.JUt=[],this.XUt=new Map,this.qUt=!1,this.YUt=!1,this.$Ut=0,this.KUt=0,this.ZUt=new Map,this.QUt=new Set,this.tHt=new Set,this.sHt=[],this.iHt=[],this.eHt=null,this.hHt=!1,this.nHt="vsync",this.Dx="trilinear",this.rHt=!1,this.oHt=!0,this.aHt=!1,this.lHt=!1,this.uHt=null,this.cHt={fHt:t=>{this.BWt=-1,this.dHt=-1,this.P7(t)},pHt:t=>{this.dHt=-1,this.P7(t,!1,"skip-render")},mHt:()=>{this.BWt=-1,this.Pk()}},this.BWt=-1,this.dHt=-1,this.gHt=0,this.yHt=0,this.wHt=!1,this.SHt=!1,this.bHt=!1,this.vHt=!0,this.MHt=!0,this.GHt=!1,this.xHt=0,this.THt=new sb.Hd(1),this._Ht=()=>Math.random(),this.IHt=0,this.CHt=0,this.RHt=0,this.AHt=0,this.PHt=0,this.hDt=1,this.EHt=1/30,this.FHt=0,this.DHt=sb.zh(sb.Qf),this.OHt=sb.zh(sb.Qf),this.kHt=sb.zh(sb.Qf),this.LHt=new Map,this.NHt=-1,this.BHt=0,this.WHt=0,this.jHt=-1,this.VHt=0,this.UHt=0,this.HHt=0,this.zHt=!1,this.JHt="",this.XHt=!1,this.qHt="",this.Pz=null,this.YHt="",this.$Ht=null,this.KHt=null,this.oEt=sb.zh(sb.Event.wf),this.ZHt=new Map,this.QHt=new Map,this.tzt=0,this.szt=!1,this.izt=!1,this.ezt=!1,this.hzt=[],this.nzt={pretick:sb.zh(sb.Event,"pretick",!1),tick:sb.zh(sb.Event,"tick",!1),tick2:sb.zh(sb.Event,"tick2",!1),instancecreate:sb.zh(sb.Event,"instancecreate",!1),instancedestroy:sb.zh(sb.Event,"instancedestroy",!1),beforelayoutchange:sb.zh(sb.Event,"beforelayoutchange",!1),layoutchange:sb.zh(sb.Event,"layoutchange",!1),beforerender:sb.zh(sb.Event,"beforerender",!1),afterrender:sb.zh(sb.Event,"afterrender",!1)},this.nzt.instancecreate.FX=null,this.nzt.instancedestroy.FX=null,this.n1=sb.zh(sb.Event.wf),this.rzt=null;const s=(t,s)=>sb.iDt.QLt(this,t,s);this.ozt=sb.zh(sb.ld,s),this.azt=sb.zh(sb.ld,s),this.lzt=sb.zh(sb.ld,s),this.uzt=sb.zh(sb.czt,this,t.jobScheduler),t.canvas&&(this.eHt=sb.zh(sb.VBt,this)),this.$Vt.onmessage=t=>this._OnMessageFromDOM(t.data),this.yz("runtime","visibilitychange",t=>this.fzt(t)),this.yz("runtime","wrapper-extension-message",t=>this.dzt(t)),this.yz("runtime","get-remote-preview-status-info",()=>this.pzt()),this.yz("runtime","js-invoke-function",t=>this.Xgt(t)),this.yz("runtime","go-to-last-error-script",self.goToLastErrorScript),this.yz("runtime","offline-audio-render-completed",t=>this.mzt(t)),this.oEt.addEventListener("window-blur",t=>this.gzt(t)),this.oEt.addEventListener("window-focus",()=>this.yzt()),this.Mtt.L8(),this.OUt.L8(),this.wzt=null,this.Szt=0,this.bzt=new WeakMap,this.vzt={keyboard:null,UB:null,HB:null,zB:null},this.Mzt=new WeakMap,this.Gzt=[]}static i_(t){return sb.zh(sb.YVt,t)}Jh(){sb.Sr(this.BUt),this.WUt.clear(),this.jUt.clear(),this._5.Jh(),this._5=null,this.Mmt.Jh(),this.Mmt=null,this.EUt.Jh(),this.EUt=null,this.lQ.Jh(),this.lQ=null,this.FUt.Jh(),this.FUt=null,this.Mtt.Jh(),this.Mtt=null,this.DUt.Jh(),this.DUt=null,this.OUt.Jh(),this.OUt=null,this.hft.Jh(),this.hft=null,this._w.Jh(),this._w=null,this.eHt&&(this.eHt.Jh(),this.eHt=null),this.oEt.Jh(),this.oEt=null,this.xzt=null}_OnMessageFromDOM(t){const s=t.type;if("event"===s)this.Tzt(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this._zt(t)}}Tzt(t){if(!this.ezt)return void this.hzt.push(t);const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,n=!(!h||!h.dispatchRuntimeEvent),r=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(n){const t=new sb.Event(i);t.data=e,this.oEt.Cf(t)}if(r){const t=new sb.Event(i,!0);if(e)for(const[s,i]of Object.entries(e))t[s]=i;this.JZ(t)}}const a=this.ZHt.get(s);if(!a)return void(n||r||console.warn(`[Runtime] No DOM event handlers for component '${s}'`));const l=a.get(i);if(!l)return void(n||r||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`));let u=null;try{u=l(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.Izt(o,!1,""+t))}null!==o&&(u&&u.then?u.then(t=>this.Izt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.Izt(o,!1,""+t)}):this.Izt(o,!0,u))}Izt(t,s,i){this.$Vt.postMessage({type:"result",responseId:t,isOk:s,result:i})}_zt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.QHt.get(s);i?h.resolve(e):h.reject(e),this.QHt.delete(s)}yz(t,s,i){let e=this.ZHt.get(t);if(e||(e=new Map,this.ZHt.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}jc(t,s,i,e){this.$Vt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}cW(t,s,i,e){const h=this.tzt++,n=new Promise((t,s)=>{this.QHt.set(h,{resolve:t,reject:s})});return this.$Vt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),n}p$(t,s,i,e=-1){this.jc("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}Czt(t){this.jc("runtime","send-raw-wrapper-extension-message",t)}m$(t,s,i){const e=this.tzt++,h=new Promise((t,s)=>{this.QHt.set(e,{resolve:t,reject:s})});return this.p$(t,s,i,e),h}dzt(t){if(-1!==t.asyncId){const s=t.asyncId;this.QHt.get(s).resolve(t.params),this.QHt.delete(s)}else this.Tzt({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}Oz(t,s,i){this.yz("wrapper-extension:"+t,s,i)}Fz(t){return this.EUt.Fz(t)}Rzt(t){if(!this.Mz())throw new Error("not in debug mode");this.jc("runtime","post-to-debugger",t)}async oDt(t){sb.OTt(this),this.Mz()?await ib.oDt(this):self.Gz&&self.Gz.Azt(this);const s=await this.lQ.io("data.json");if(await this.Pzt(s),await this.Ezt(t),this.JVt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.aVt()){const t=this.aVt();console.info(`[C3 runtime] Hosted in ${this.cN()?"worker":"DOM"}, rendering with WebGL ${t.Vx()} [${t.qD()}]`)}else this.lVt()&&console.info(`[C3 runtime] Hosted in ${this.cN()?"worker":"DOM"}, rendering with WebGPU [${this.lVt().uVt()}]`);this.IM().Zv()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.ezt=!0;for(const t of this.hzt)this.Tzt(t);sb.Sr(this.hzt),this.eHt&&this.eHt.LVt();for(const s of t.runOnStartupFunctions)this.fUt.push(this.Fzt(s));if(await Promise.all([this.lQ.UZ(!1),...this.fUt]),sb.Sr(this.fUt),!this.lQ.zZ())return this.eHt&&await this.eHt.WVt(),await this.oEt._f(new sb.Event("beforeruntimestart")),await this.SD(),this.$Vt.postMessage({type:"runtime-ready"}),this;this.eHt&&this.eHt.kVt()}async Fzt(t){try{await t(this.wzt)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async Pzt(t){const s=t.project;this.mUt=s[0],this.gUt=s[16],this.yUt=s[31],this.wUt=s[38],this.SUt=s[36];const i=s[39]||"loading-logo.png";this.rHt=!!s[9],this.bUt=this.xUt=s[10],this.vUt=this.TUt=s[11],this.FUt.MBt(this.bUt,this.vUt),this.MUt=this.bUt/2,this.GUt=this.vUt/2,this.nHt=s[37],this.hHt=!!s[40],this.Dx=s[14],this.CUt=s[15],this.RUt=s[42],this.AUt=s[17],this.IUt=!!s[18],this._Ut=s[19],this.KUt=s[21],this.aHt=s[22],this.Szt=s[51];const e=this.lQ;e.QZ(s[7],s[25]),e.TZ(s[8]),e._Z(s[32]),e.CZ(s[28]),e.YZ(s[29]),e.AZ(s[45]),0===this._Ut&&i&&(this.PUt=e.DZ({url:i})),this.eHt&&(this.eHt.Zjt(sb.VBt.eVt(s[12])),this.eHt.sVt(s[23]?"high":"low"),this.eHt.Yv(0!==s[24]),this.eHt.QWt(s[34]),this.eHt.nVt(s[41]),this.eHt.tjt(s[13]),this.eHt.sjt(s[30]),this.eHt.hjt(s[46],s[47]),this.eHt.ejt(s[26]),this.eHt.njt(s[48]),this.eHt.rjt(s[50]));const h=s[43];h&&await this.Dzt(h),this.Ozt(),this.EUt.JAt(),this.sHt=self.kzt();const n=s[2];for(const t of n[1])this.EUt.XAt(t);for(const t of n[0])this.EUt.zAt(t);this.sHt=self.kzt(),this.Lzt(),this.EUt.QAt();for(const t of s[3]){const s=sb.Yct.i_(this,this.BUt.length,t);this.BUt.push(s),this.WUt.set(s.Rc().toLowerCase(),s),this.jUt.set(s.J1(),s)}for(const t of s[4])this.BUt[t[0]].zEt(t);for(const t of s[27]){const s=t.map(t=>this.BUt[t]);this.UUt.push(sb.zh(sb.zFt,this,s))}this.Nzt();for(const t of this.BUt)t.XEt();for(const t of s[5])this._5.i_(t);const r=s[1];if(r){const t=this._5.J6(r);t&&this._5.H6(t)}for(const t of s[35])this.DUt.i_(t);for(const t of s[33])this.Mtt.i_(t);for(const t of s[44])this.OUt.i_(t);this.OUt.Xct()||(this.OUt.Jh(),this.OUt=null);for(const t of s[49])this.hft.i_(t);this.hft.ift()||(this.hft.Jh(),this.hft=null);for(const t of s[6])this.Mmt.i_(t);this.Mmt.$gt(),this.Bzt(),sb.Sr(this.sHt),this.OV();let o="any";const a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.jc("runtime","set-target-orientation",{targetOrientation:o})}async Dzt(t){const s=t.format;"image-sequence"===s?this.uHt=new self.Wzt(this,t):"image-sequence-gif"===s?this.uHt=new self.jzt(this,t):"webm"===s?this.uHt=new self.Vzt(this,t):"mp4"===s&&(this.uHt=new self.Uzt(this,t)),this.nHt="unlimited-frame",this.eHt.Zjt("off"),this.ak=1,self.devicePixelRatio=1,await this.cW("runtime","set-exporting-to-video",{message:this.uHt.Hzt(0),duration:this.uHt.aq()})}BVt(){return this._Ut}Djt(){return null!==this.uHt}zzt(){return this.uHt.aq()}Jzt(){return this.uHt.Xzt()}qzt(){return this.uHt.oDt({width:this.eHt.Cj(),height:this.eHt.Aj()})}Yzt(){const t=this.gHt/this.Jzt();return this.uHt.$zt(this.eHt.$jt(),t)}Kzt(){this.uHt&&this.uHt.uht()}mzt(t){this.uHt.Zzt(t)}Qzt(){return this.uHt.zv()}XVt(){return this.oUt}kw(){return this.Pw}mW(t){this.fUt.push(t)}q4(t){this.pUt=!!t}tJt(t){this.pUt&&this.dUt.push(t)}s6(){return this.dUt}NEt(){return this.VUt++}YEt(){return this.VUt}aNt(t){this.HUt.add(t)}lNt(t){this.HUt.delete(t)}Fjt(){return this.HUt}async Ezt(t){this.eHt&&(await this.eHt.uo(t),this.eHt.AVt(this._Ut))}async SD(){this.wHt=!0,this.IHt=Date.now();let t=null;const s=new Promise(s=>t=s);if(this.IUt){for(const t of this.BUt)t.B1()||t.hFt()||!t.Vj()||t.KCt();(async()=>{await this.lQ.UZ(!0),await s,this.Pw=!1,this.sJt()})()}else this.Pw=!1;this.lQ.HZ(),this.Mz()&&ib.iJt(nb);for(const t of this._5.NB())t.m6();this.Djt()&&await this.qzt();const i=this._5.z6();await i.P4(null,this.IM()),await i.V4(!0),this.BHt=performance.now(),t(),this.IUt||this.sJt(),(await this.cW("runtime","before-start-ticking")).isSuspended&&!this.Djt()?(this.xHt++,this.GHt=!0):this.P7()}sJt(){this.pz(sb.MW.vW.bW.eJt,null,null),this.jc("runtime","register-sw")}Qvt(t){t=Math.floor(t);const s=this.sHt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}Lzt(){for(const t of self.hJt){const s=sb.Br(Object.keys(t));this.iHt.push(s)}}byt(t){t=Math.floor(t);const s=this.iHt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}nJt(){return this.tUt}rJt(){return this.QVt}cN(){return this.sUt}DVt(){return this.KVt}oJt(){return this.ZVt}TN(){return this.Mmt}NN(){return this.Mmt.NN()}uyt(){return this.Mmt.uyt()}PN(){return this.Mmt.PN()}cyt(){return this.Mmt.cyt()}FTt(){return 0===this.uyt().jmt()}dyt(){return this.Mmt.dyt()}KLt(){return this.EUt}qZ(){return this.EUt.qZ()}f1(t){if((t=Math.floor(t))<0||t>=this.BUt.length)throw new RangeError("invalid index");return this.BUt[t]}aJt(t){return this.WUt.get(t.toLowerCase())||null}x$(t){return this.jUt.get(t)||null}Vrt(t){const s=sb.kj.eV(t);return s?s.oV():null}N1(){return this.BUt}*lJt(){for(const t of this.BUt)t.B1()||(yield*t.pV())}wf(){return this.oEt}vN(){return this.n1}JZ(t){t.runtime=this.Lj();const s=this.Mz()&&!this.Mmt.FV();s&&ib.B6(),this.n1.dispatchEvent(t),s&&ib.W6()}a6(t){return t.runtime=this.Lj(),this.n1._f(t)}dN(){return this.bUt}mN(){return this.vUt}uJt(t,s){if(this.bUt===t&&this.vUt===s)return;this.bUt=t,this.vUt=s;const i=this.OB();i.s8(),i.i8()}w2(){return this.xUt}S2(){return this.TUt}qjt(t,s){if(this.xUt===t&&this.TUt===s)return;this.xUt=t,this.TUt=s;const i=this.OB();i.s8(),i.i8()}Ojt(t){this.Djt()||(this.ak=t)}Pj(){return this.ak}w3(){return this.MUt}S3(){return this.GUt}XB(){return this.eHt}T3(){return this.eHt?this.eHt.T3():this.xUt}_3(){return this.eHt?this.eHt._3():this.TUt}AH(){return this.eHt?this.eHt.AH():1}VY(){return this.eHt?this.eHt.VY():1}l5(){return this.eHt?this.eHt.l5():1}o5(){return this.eHt?this.eHt.o5():1}bj(){return this.eHt?this.eHt.bj():0}Mj(){return this.eHt?this.eHt.Mj():0}cJt(){return this.eHt?this.eHt.xj():0}fJt(){return this.eHt?this.eHt._j():0}WY(){return this.eHt?this.eHt.WY():"off"}B3(t){return this.eHt?this.eHt.B3(t):null}Y0(t){this.eHt&&this.eHt.Y0(t)}L3(){return this.CUt}bjt(){return this.RUt}xjt(){return this.AUt}dB(){return this.eHt?this.eHt.dB():NaN}NT(){return"nearest"!==this.gN()}mB(){return this.nHt}gB(t){this.nHt!==t&&(this.nHt=t,-1===this.BWt&&-1===this.dHt||(this.dJt(),this.pJt()))}gN(){return this.Dx}VEt(){return this.IUt}PVt(){return this.PUt}jVt(){this.PUt&&(this.PUt.xA(),this.PUt.Jh(),this.PUt=null)}OB(){return this._5}PB(){return this._5.PB()}ast(){return this.Mtt}mJt(){return this.DUt}LDt(){return this.OUt}Tft(){return this.hft}XL(){return this.lQ}DZ(t){return this.lQ.DZ(t)}RV(t,s,i,e,h,n){if(n&&this.OUt){if(t instanceof sb.Yct&&t.B1()){const r=t.UV(),o=Math.floor(this.AB()*r.length);return this.RV(r[o],s,i,e,h,n)}const r=this.OUt.qct(t,n);if(r){const t=this.G1(r,s,!1,i,e,!1,h,void 0,h);return this.OUt.$ct(t,n),t}}return this.G1(t,s,!1,i,e,!1,h,void 0,h)}G1(t,s,i,e,h,n,r,o,a){let l=null,u=null;if(t instanceof sb.Yct){if(u=t,u.B1()){const t=u.UV();u=t[Math.floor(this.AB()*t.length)]}l=u.m1()}else l=t,u=this.f1(l[1]);const c=u.fV().Vj();if(this.Pw&&c&&!u.hFt())return null;const f=s;let d;c||(s=null),d=i&&!n&&l&&!this.ZUt.has(l[2])?l[2]:this.KUt++;const p=l?l[0]:null,m=sb.zh(sb.Instance,{runtime:this,objectType:u,Vz:s,rDt:p,uDt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.ZUt.set(d,m);let g=null;if(c&&(g=m.iW(),void 0!==e&&void 0!==h&&(g.oG(e),g.uG(h)),u.PFt(!0)),s&&(a||s.T1(m,!0),s.kB().F4(u)),this.$Ut++,u.UH()&&!i&&!n){const t=new Set;for(const s of u.R4().HV()){if(s===u)continue;const i=this.gJt(s,g,t);if(i){const t=this.G1(i,f,!1,g?g.rG():e,g?g.lG():h,!0,!1,void 0,a);m.d6(t)}else{const t=this.G1(s,f,!1,g?g.rG():e,g?g.lG():h,!0,!1,void 0,a);m.d6(t)}}for(const t of m.HH()){t.d6(m);for(const s of m.HH())t!==s&&t.d6(s)}}if(c&&!i&&r&&this.yJt(m,p,g,s,e,h,a),u.UH()&&!i&&!n&&r)for(const t of m.HH()){const i=t.iW();if(!i)continue;const e=t.fV(),h=t.EH().m1()[0];e.Vj()?this.yJt(t,h,i,s,i.rG(),i.lG(),a):this.yJt(t,h,i,s,void 0,void 0,a)}if(!n&&r){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const t=g.CJ(),s=e-g.rG()+t.rG(),i=h-g.lG()+t.lG();t.zz(s,i)}u._Ft();const y=l?sb.Er(l[5]):null,w=l?l[4].map(t=>sb.Er(t)):null,S=c&&p&&p[13];if(S&&m.gDt(),m.iFt(y,w),S){const t=p[13];m.MX().mRt(t[2],t[0],t[1])}this.JUt.push(m),this.qUt=!0,this.Mz()&&ib.wJt(m);const b=this.nzt.instancecreate;return b.FX=m,this.oEt.dispatchEvent(b),m}HOt(t){const s=t[0],i=t[1],e=t[2],h=t[6];return h||this._5.X6(s).eW(i).S1(e)}gJt(t,s,i){const e=s?.kDt()??[];for(const s of e){const e=this.HOt(s),h=!!s[4],n=this.f1(e[1]);if(!i.has(e)&&t===n&&h)return i.add(e),e}}yJt(t,s,i,e,h,n,r){const o=i.dLt(),a=i.kDt();if(t.iW().pLt(o),!a)return;void 0===h&&(h=s[0]),void 0===n&&(n=s[1]);const l=new Set,u=s[0],c=s[1];for(const s of a){const i=s[0],o=s[1],a=s[2],f=s[3],d=!!s[4],p=s[5],m=s[6];let g;g=m||this._5.X6(i).eW(o).S1(a);const y=this.f1(g[1]),w=t.BDt(y),S=l.has(y);if(w&&!S&&d){const s=t.WDt(y);s.iW().oDt(g[0]);const i=h+g[0][0]-u,e=n+g[0][1]-c;s.iW().zz(i,e),s.iW().pLt(p),t.kJ(s,{jJ:!!(1&f),UJ:!!(f>>1&1),zJ:!!(f>>2&1),XJ:!!(f>>3&1),YJ:!!(f>>4&1),eX:!!(f>>5&1),KJ:!!(f>>6&1),QJ:!!(f>>7&1),sX:!!(f>>8&1)}),l.add(y)}else{const s=h+g[0][0]-u,i=n+g[0][1]-c,o=this.G1(g,e,!1,s,i,!1,!0,t,r);o.iW().pLt(p),t.kJ(o,{jJ:!!(1&f),UJ:!!(f>>1&1),zJ:!!(f>>2&1),XJ:!!(f>>3&1),YJ:!!(f>>4&1),eX:!!(f>>5&1),KJ:!!(f>>6&1),QJ:!!(f>>7&1),sX:!!(f>>8&1)})}}}NH(t){if(this.QUt.has(t))return;const s=t.EH();let i=this.XUt.get(s);if(i){if(i.has(t))return;i.add(t)}else i=new Set,i.add(t),this.XUt.set(s,i);if(this.Mz()&&ib.SJt(t),t.wDt(),this.qUt=!0,t.UH())for(const s of t.HH())this.NH(s);for(const s of t.children())s.hX()&&this.NH(s);if(!this._5.DV()&&!this.zHt){const s=this.TN();s.PV(!0),t.ZDt(),s.PV(!1)}t.QDt(this._5.DV())}OV(){this.qUt&&(this.YUt=!0,this.bJt(),this.vJt(),this.YUt=!1,this.qUt=!1,this.lW())}bJt(){for(const t of this.JUt){const s=t.EH();s.T1(t);for(const i of s.LV())i.T1(t),i._Ft()}sb.Sr(this.JUt)}vJt(){this.oEt.cf(!0);for(const[t,s]of this.XUt.entries())this.MJt(t,s),s.clear();this.XUt.clear(),this.oEt.cf(!1)}MJt(t,s){for(const t of s){const s=this.nzt.instancedestroy;s.FX=t,this.oEt.dispatchEvent(s),this.ZUt.delete(t.zH()),this.LHt.delete(t);const i=t.iW();i&&(i.wLt(),i.R1(),i.wDt()),this.QUt.add(t),this.$Ut--}sb.Rr(t.GV(),s),t._Ft(),this.tHt.add(t);for(const i of t.LV())sb.Rr(i.GV(),s),i._Ft(),this.tHt.add(i);if(t.fV().Vj()){const t=new Set([...s].map(t=>t.iW().eW()));for(const i of t)i.J2(s)}}CFt(){return this.JUt}*N_t(t){for(const s of this.CFt())t.B1()?s.EH().DTt(t)&&(yield s):s.EH()===t&&(yield s)}sFt(){return this.KUt++}eFt(t,s){this.ZUt.set(t,s)}S$(t){t=!!t,this.MHt!==t&&(this.MHt=!!t,this.MHt&&this.GHt&&(this.M$(!1),this.GHt=!1))}b$(){return this.MHt}j4(){this.oEt.dispatchEvent(sb.zh(sb.Event,"renderercontextlost")),this.M$(!0);for(const t of this.BUt)!t.B1()&&t.nFt()&&t.B4();const t=this.PB();t&&t.j4(),sb.iPt.MQ(),sb.LZ.MQ()}async oVt(){await this.PB().P4(null,this.IM()),this.oEt.dispatchEvent(sb.zh(sb.Event,"renderercontextrestored")),this.M$(!1),this.lW()}fzt(t){if(!this.MHt)return;const s=t.hidden;this.M$(s),this.GHt=s,s||this.lW()}gzt(t){this.JVt()&&this.aHt&&!sb.Ks.ri&&(t.data.parentHasFocus||(this.M$(!0),this.lHt=!0))}yzt(){this.lHt&&(this.M$(!1),this.lHt=!1)}pJt(){const t=this.cHt;"vsync"===this.nHt?-1===this.BWt&&(this.BWt=self.requestAnimationFrame(t.fHt)):"unlimited-tick"===this.nHt?(-1===this.dHt&&(this.dHt=sb.Hr(t.pHt)),-1===this.BWt&&(this.BWt=self.requestAnimationFrame(t.mHt))):-1===this.dHt&&(this.dHt=sb.Hr(t.fHt))}dJt(){-1!==this.BWt&&(self.cancelAnimationFrame(this.BWt),this.BWt=-1),-1!==this.dHt&&(sb.zr(this.dHt),this.dHt=-1)}JN(){return this.xHt>0}M$(t){if(this.Djt())return;const s=this.JN();this.xHt+=t?1:-1,this.xHt<0&&(this.xHt=0);const i=this.JN();if(!s&&i)console.log("[Construct] Suspending"),this.dJt(),this.oEt.dispatchEvent(sb.zh(sb.Event,"suspend")),this.JZ(sb.zh(sb.Event,"suspend")),this.pz(sb.MW.vW.bW.GJt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const t=performance.now();this.CHt=t,this.BHt=t,this.NHt=0,this.WHt=0,this.jHt=0,this.VHt=0,this.HHt=0,this.UHt=0,this.oEt.dispatchEvent(sb.zh(sb.Event,"resume")),this.JZ(sb.zh(sb.Event,"resume")),this.pz(sb.MW.vW.bW.xJt,null,null),this.Zyt()||this.P7(t)}}e$(t){this.ozt.Bu(t)}o$(t){this.azt.Bu(t)}n$(t){this.lzt.Bu(t)}h$(t){this.ozt.Kf(t)}a$(t){this.azt.Kf(t)}r$(t){this.lzt.Kf(t)}TJt(t,s){const i=s?performance.now():0;let e;return t instanceof eb?(e=t.xz(),s&&ib._Jt(t.behavior,performance.now()-i)):(e=t.P7(),s&&ib._Jt(t.RX(),performance.now()-i)),e}IJt(){const t=this.Mz();this.ozt.Vd(!0);for(const s of this.ozt)this.TJt(s,t);this.ozt.Vd(!1)}CJt(t,s){const i=s?performance.now():0;let e;return t instanceof eb?(e=t.u$(),s&&ib._Jt(t.behavior,performance.now()-i)):(e=t.WAt(),s&&ib._Jt(t.RX(),performance.now()-i)),e}RJt(){const t=this.Mz();this.azt.Vd(!0);for(const s of this.azt)this.CJt(s,t);this.azt.Vd(!1)}AJt(t,s){const i=s?performance.now():0;let e;return t instanceof eb?(e=t.Iz(),s&&ib._Jt(t.behavior,performance.now()-i)):(e=t.kRt(),s&&ib._Jt(t.RX(),performance.now()-i)),e}PJt(){const t=this.Mz();this.lzt.Vd(!0);for(const s of this.lzt)this.AJt(s,t);this.lzt.Vd(!1)}*EJt(){const t=this.Mz();this.ozt.Vd(!0);for(const s of this.ozt){const i=this.TJt(s,t);sb.vo(i)&&(yield*i)}this.ozt.Vd(!1)}*FJt(){const t=this.Mz();this.azt.Vd(!0);for(const s of this.azt){const i=this.CJt(s,t);sb.vo(i)&&(yield*i)}this.azt.Vd(!1)}*DJt(){const t=this.Mz();this.lzt.Vd(!0);for(const s of this.lzt){const i=this.AJt(s,t);sb.vo(i)&&(yield*i)}this.lzt.Vd(!1)}async P7(t,s,i){this.bHt=!0;const e="background-wake"===i,h="background-wake"!==i&&"skip-render"!==i,n=this.OB(),r=this.XB();if(!this.wHt||this.JN()&&!s&&!e)return;const o=performance.now();this.SHt=!0,this.OJt(t||0),this.jHt++,this.kJt();const a=this.LJt();this.F_t()&&await a;const l=this.oEt.If(this.nzt.pretick);l instanceof Promise&&await l,this.JZ(this.rzt.pretick);const u=this.NJt();this.F_t()&&await u,this.BJt()&&await this.WJt(),n.WB()&&await this.jJt();const c=this.VJt();this.F_t()&&await c;const f=n.PB(),d=f.x4();let p=!1;if(-1!==d&&(f.T4(),r.G4()!==d)){const t=this.XB().J4(d);this.cN()&&(p=!0,await t)}this.jc("canvas","update-html-layer-dom-state",{layersDomState:f.z1().filter(t=>t.zU()).map(t=>t.t3())}),h&&this.Pk(),p&&this.jc("canvas","cleanup-html-layers"),this.Djt()&&(await this.Yzt(),this.ZN()>=this.zzt())?this.Qzt():(this.JN()||e||this.pJt(),this.gHt++,this.yHt++,this.SHt=!1,this.UHt+=performance.now()-o)}async LJt(){const t=this.Mmt,s=this.Mz();this.OV(),t.PV(!0),this.Wyt(this.PB()),s&&ib.UJt(),this.F_t()?await t.Swt():t.pwt(),s&&ib.HJt(),this.jyt(),t.PV(!1),this.OV(),t.PV(!0)}async NJt(){const t=this.Mmt,s=this.Mz(),i=this.F_t(),e=this.oEt,h=this.nzt,n=this.rzt;s&&ib.UJt(),i?await this.zJt(this.EJt()):this.IJt(),i?await this.zJt(this.FJt()):this.RJt(),s&&ib.JJt(),s&&ib.UJt(),i?await this.XJt(h.tick):e.dispatchEvent(h.tick),s&&ib.qJt(),t.PV(!1),this.JZ(n.tick)}async VJt(){const t=this.Mmt,s=this.oEt,i=this.nzt,e=this.rzt,h=this.Mz(),n=this.F_t();h&&ib.UJt(),n?await t.Vyt(this._5):t.Byt(this._5),h&&ib.HJt(),this.FUt.zNt(),this.kJt(),this.vHt=!1,t.PV(!0),h&&ib.UJt(),n?await this.zJt(this.DJt()):this.PJt(),h&&ib.JJt(),h&&ib.UJt(),n?await this.XJt(i.tick2):s.dispatchEvent(i.tick2),h&&ib.qJt(),t.PV(!1),this.JZ(e.tick2),n&&await t.Qyt(),this.OV(),this.kJt()}kJt(){if(0===this.QUt.size)return;const t=this.oEt;t.cf(!0);for(const t of this.tHt)t.awt().Zpt(this.QUt);this.tHt.clear(),this.Mmt.vwt(this.QUt);for(const t of this.QUt)t.Jh();this.QUt.clear(),t.cf(!1)}async jJt(){const t=this.OB();let s=0;for(;t.WB()&&s++<10;)await this.YJt(t.t8())}OJt(t){let s=0;this.Djt()?(s=1/this.Jzt(),this.RHt=s,this.AHt=s):0!==this.CHt&&(s=Math.max(t-this.CHt,0)/1e3,s>.5&&(s=0),this.RHt=s,this.AHt=sb.Kh(s,this.FHt,this.EHt)),this.CHt=t,this.PHt=this.AHt*this.hDt,this.DHt.Bu(this.PHt),this.OHt.Bu(s*this.hDt),this.kHt.Bu(this.AHt);for(const[t,s]of this.LHt)s.Bu(this.AHt*t.hB());this.eHt&&this.eHt.bVt(),t-this.BHt>=1e3&&(this.BHt+=1e3,t-this.BHt>=1e3&&(this.BHt=t),this.WHt=this.NHt,this.NHt=0,this.VHt=this.jHt,this.jHt=0,this.HHt=Math.min(this.UHt/1e3,1),this.UHt=0,this.eHt&&this.eHt.SVt(),this.FUt.jNt(),this.Mz()&&ib.$Jt())}pDt(t,s){if(s){if(!this.LHt.has(t)){const s=sb.zh(sb.Qf);s.nd(this.DHt),this.LHt.set(t,s)}}else this.LHt.delete(t)}mDt(t){const s=this.LHt.get(t);return s?s.zs():this.ZN()}async YJt(t){const s=this.oEt,i=this.OB().PB();await i.y6(),i.W4(t,this.IM()),i===t&&this.Mmt.b6(),this.FUt.zNt(),this.kJt(),s.dispatchEvent(this.nzt.beforelayoutchange),sb.df.Af(!0),await t.P4(i,this.IM()),sb.df.Af(!1),await t.V4(!1),s.dispatchEvent(this.nzt.layoutchange),this.lW(),this.vHt=!0,this.OV(),this.Kzt()}lW(){this.oHt=!0}aVt(){return this.eHt?this.eHt.aVt():null}lVt(){return this.eHt?this.eHt.lVt():null}IM(){return this.eHt?this.eHt.IM():null}Pk(){const t=this.eHt;if(!t||t.rVt())return;const s=this.IM(),i=s.jD(),e=i&&s.Qv(),h=i&&s.fb();if(e&&s.ID(),!this.oHt&&!this.Djt())return void s.qv();const n=this._5.PB();this.NHt++,s.SD();const r=this.Mz();r&&ib.UJt(),this.oHt=!1;let o=null;e&&(o=t.xVt().aE(),s.WD(o));let a=null;h&&(a=s.KJt(2*(1+n.y4())),s.F3(0,1)),this.R2()&&"low"===t.N3()?s.RF(t.T3(),t._3()):s.AF(),this.ZJt(this.IM(),n),o&&s.VD(o),h&&(s.QJt(),this.eHt.TVt(a)),s.zv(),r&&(ib.tXt(),ib.sXt()),t&&t._Vt()}A6(t){return"low"===this.XB().N3()||t.Qv()&&(this.L3()||this.R2())}ZJt(t,s){t.Mb(),t.XF(),t.Wv(),t.BF(1,1,1,1),t.PD(null),t.UF(null),t.vD(this.R2()),this.wf().dispatchEvent(this.nzt.beforerender),this.A6(t)&&s.C6(t);const i=s.G4();for(let e=1;e<i;++e)s.D6(t,e),t.fb()&&t.iXt();this.A6(t)||s.C6(t),s.F6(t),this.wf().dispatchEvent(this.nzt.afterrender)}pz(t,s,i){if(!this.wHt)return!1;const e=!this.SHt&&!this.Mmt.ewt();let h=0;e&&(h=performance.now());const n=this.Mz();n&&this.A$(!1);const r=this.Mmt.Jyt(this._5,t,s,i);if(e){const t=performance.now()-h;this.UHt+=t,n&&ib.eXt(t)}return n&&this.A$(!0),r}xRt(t,s,i){if(!this.F_t())return this.pz(t,s,i);if(this.Zyt())throw new Error("called DebugTrigger() while stopped on breakpoint");if(!this.SHt&&!this.Mmt.ewt())throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead");return this.Mmt.Yyt(this._5,t,s,i)}async wW(t,s,i){if(!this.F_t())return this.pz(t,s,i);if(!this.wHt)return!1;if(this.Zyt())return this.Mmt.$yt(t,s,i);if(!this.PB())return this.Mmt.Xyt(t,s,i);const e=performance.now(),h=this.Mmt.Yyt(this._5,t,s,i);let n=h.next();for(;!n.done;)await this.Hyt(n.value),n=h.next();return this.JN()||this.Mmt.ewt()||(await this.Mmt.Qyt(),this.bHt&&!this.SHt&&this.pJt()),this.UHt+=performance.now()-e,n.value}TRt(t,s,i){const e=this.Mz();e&&this.A$(!1);const h=this.Mmt.twt(this._5,t,s,i);return e&&this.A$(!0),h}_Rt(t,s,i){return this.Mmt.swt(this._5,t,s,i)}IRt(t){return this.THt.Bu(t)}Wyt(t){this.zUt.push(t)}jyt(){if(!this.zUt.length)throw new Error("layout stack empty");this.zUt.pop()}tW(){return this.zUt.length?this.zUt.at(-1):this.PB()}qN(t){return t&&-1!==t.hB()?this.AHt*t.hB():this.PHt}R7(){return this.PHt}A7(){return this.AHt}$N(){return this.RHt}hB(){return this.hDt}nB(t){(isNaN(t)||t<0)&&(t=0),this.hDt=t}SB(t){this.FHt=Math.max(t,0)}wB(){return this.FHt}MB(t){this.EHt=Math.max(t,0)}vB(){return this.EHt}oB(){return this.WHt}lB(){return this.VHt}cB(){return this.HHt}hXt(){return this.IHt}ZN(){return this.DHt.zs()}nXt(){return this.OHt.zs()}iB(){return this.kHt.zs()}tB(){return this.gHt}rXt(){return this.yHt}oXt(){return this.$Ut}tN(){return this.mUt}iN(){return this.gUt}rN(){return this.yUt}hN(){return this.wUt}aN(){return this.SUt}KB(t){if(this.zHt)throw new Error("cannot call while loading state - wait until afterload event");return this.ZUt.get(t)||null}BOt(t){if(this.zHt)throw new Error("cannot call while loading state - wait until afterload event");this.ZUt.delete(t)}f6(){this.ZUt.clear();for(const t of this.BUt)if(!t.B1())for(const s of t.GV())this.ZUt.set(s.zH(),s)}JVt(){return"preview"===this.eUt}Mz(){return this.aUt}pj(){return this.eUt}qVt(){return"cordova"===this.eUt}aXt(){return"Android"===sb.Ks.Zs&&("cordova"===this.eUt||"playable-ad-single-file"===this.eUt||"playable-ad-zip"===this.eUt||"instant-games"===this.eUt)}lXt(){return this.ZK}uXt(){return this.hUt}mj(){return this.nUt}cXt(){return this.rUt}$L(){return this.FUt}tPt(){return this.EUt.tPt()}sPt(){return this.EUt.sPt()}R2(){return this.hHt}fXt(){return this.IM().sb(this.S2())}ZS(t){return this.IM().ZS(t||this.S2())}dXt(){return this.vHt}xB(t){t=!!t,this.rHt!==t&&(this.rHt=t,this.OB().i8(),this.lW())}TB(){return this.rHt}pXt(t){if(!this.NUt.has(t)){const s=()=>this.mXt(t);this.NUt.set(t,s),t.wf().addEventListener("animationframeimagechange",s)}const s=this._w.Sw(t);return s.Ow()||s.Lw().then(()=>this.lW()),s}mXt(t){this._w.xw(t)}kUt(t){const s=[];for(const i of t.gFt())for(const t of i.sq()){const i=t.oq();s.push({source:t,width:i.My(),height:i.xy(),tag:t.Mq()})}return{Fw:s}}async LUt(t){const s=sb.zh(sb.Hd),i=[],e=new Map;for(const h of t.gFt())for(const t of h.sq()){const h=t.oq().MPt();e.has(h)||(e.set(h,null),i.push(s.Bu(async()=>{const t=await h._Q();e.set(h,t)})))}await Promise.all(i);const h=[];for(const i of t.gFt())for(const t of i.sq())h.push(s.Bu(async()=>{const s=t.oq(),i=e.get(s.MPt()),h=await s.GPt(i);return{Bw:await createImageBitmap(h)}}));const n=await Promise.all(h);for(const t of e.values())t instanceof ImageBitmap&&t.close&&t.close();return{Fw:n}}gXt(t){this.JHt=t,this.XHt=!1}yXt(){this.JHt="",this.XHt=!0}wXt(t){this.qHt=t}_It(t){this.Pz=t}SXt(){return this.YHt}BJt(){return!!(this.JHt||this.XHt||this.qHt||null!==this.Pz)}async WJt(){if(this.JHt&&(this.OV(),await this.bXt(this.JHt),this.vXt()),this.qHt&&(await this.MXt(this.qHt),this.vXt(),this.Mz()&&ib.GXt()),this.XHt){const t=await this.xXt();this.YHt=t,await this.wW(sb.MW.vW.bW.TXt,null),this.YHt="",this.vXt()}if(null!==this.Pz){this.OV();try{await this._Xt(this.Pz),this.YHt=this.Pz,await this.wW(sb.MW.vW.bW.IXt,null),this.YHt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.wW(sb.MW.vW.bW.CXt,null)}this.vXt()}}vXt(){this.JHt="",this.XHt=!1,this.qHt="",this.Pz=null}Fj(){return this.$Ht||(this.$Ht=localforage.Ti({name:"c3-localstorage-"+this.rN(),description:this.tN()})),this.$Ht}RXt(){return this.KHt||(this.KHt=localforage.Ti({name:"c3-savegames-"+this.rN(),description:this.tN()})),this.KHt}async bXt(t){const s=await this.xXt();try{await this.RXt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.YHt=s,await this.wW(sb.MW.vW.bW.TXt,null),this.YHt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.wW(sb.MW.vW.bW.AXt,null)}}async MXt(t){try{const s=await this.RXt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this._Xt(s),this.YHt=s,await this.wW(sb.MW.vW.bW.IXt,null),this.YHt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.wW(sb.MW.vW.bW.CXt,null)}}async xXt(){const t={c3save:!0,version:1,rt:{time:this.ZN(),timeRaw:this.nXt(),walltime:this.iB(),timescale:this.hB(),tickcount:this.tB(),next_uid:this.KUt,running_layout:this.PB().J1(),start_time_offset:Date.now()-this.IHt},types:{},layouts:{},events:this.Mmt.b5(),timelines:this.Mtt.b5(),user_script_data:null};for(const s of this.BUt)s.B1()||s.NFt()||(t.types[s.J1().toString()]=s.b5());for(const s of this._5.NB())t.layouts[s.J1().toString()]=s.b5();const s=this.PXt("save");return s.saveData=null,await this.a6(s),t.user_script_data=s.saveData,JSON.stringify(t)}i6(){return this.zHt}async _Xt(t){const s=this.OB(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(i.version>1)throw new Error("C3 save data from future version");this.IIt(),this.oEt.dispatchEvent(sb.zh(sb.Event,"beforeload"));for(const t of this.lJt())t.EH().NFt()||t.C8();const e=i.rt;this.DHt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.OHt.Set(e.timeRaw),this.kHt.Set(e.walltime),this.hDt=e.timescale,this.gHt=e.tickcount,this.IHt=Date.now()-e.start_time_offset;const h=e.running_layout;this.zHt=!0;let n=!1;if(h!==this.PB().J1()){const t=s.X6(h);if(!t)return;await this.YJt(t),n=!0}for(const[t,e]of Object.entries(i.layouts)){const i=parseInt(t,10),h=s.X6(i);h&&h.v5(e)}const r=new Set;for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.x$(i);!e||e.B1()||e.NFt()||e.v5(s,r)}for(const t of this._5.NB())for(const s of t.fU())s.M5();if(this.OV(),this.f6(),this.zHt=!1,n){for(const t of this.lJt())t.e6();for(const[t,s]of Object.entries(i.types)){const i=parseInt(t,10),e=this.x$(i);!e||e.B1()||e.NFt()||e.UFt(s)}}this.KUt=e.next_uid,this.Mmt.v5(i.events);for(const t of this.BUt)if(!t.B1()&&t.UH())for(const s of t.GV()){const i=s.XH();s.NDt();for(const e of t.R4().HV()){if(e===t)continue;const h=e.GV();if(i<0||i>=h.length)throw new Error("missing sibling instance");s.d6(h[i])}}this.Mtt.v5(i.timelines),s.s8(),s.i8();for(const t of r)t.KDt();this.CIt(),this.oEt.dispatchEvent(sb.zh(sb.Event,"afterload")),this.JZ(this.PXt("afterload"));for(const[t,s]of Object.entries(i.types)){const s=parseInt(t,10),i=this.x$(s);i&&i.VFt()}const o=this.PXt("load");o.saveData=i.user_script_data,await this.a6(o),this.lW()}EXt(t,s){return s.iW().aLt()-t.iW().aLt()}$Lt(t,s){t.iW()&&(this.Mzt.has(t)||(this.Mzt.set(t,s),this.Gzt.push(t)))}IIt(){this.Mzt=new WeakMap,sb.Sr(this.Gzt),sb._6.QOt()}CIt(t="full",s=null){this.Gzt.sort(this.EXt),s||(s={}),s.NOt=new Set;const i=this.Gzt.length;for(const i of this.Gzt)i.P8(this.Mzt.get(i),t,s);for(const i of this.Gzt)i.iOt(this.Mzt.get(i),t,s);if(this.IIt(),i){this.OV(),this.f6();for(const t of this._5.NB())for(const s of t.fU())s.E1(),s.aW()}}async FXt(t){const s=t.map(t=>new URL(t,location.href).toString());this.uzt.DXt(s)}OXt(t,s){this.uzt.kXt(t,s)}LXt(t,s){this.uzt.NXt(t,s)}BXt(t,s,i,e){return this.uzt.BXt(t,s,i,null,null,e)}WXt(t,s,i,e){return this.uzt.WXt(t,s,i,e)}jXt(){return this.uzt.VXt()}YB(t,s){this.jc("runtime","invoke-download",{url:t,filename:s})}async OVt(t,s,i,e,h,n){if(e=e||s,h=h||i,this.cN())return(await this.cW("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:n})).imageBitmap;{const r=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return n?await self.createImageBitmap(r,n):r}}async UXt(t){return this.cN()?await this.cW("runtime","get-svg-image-size",{blob:t}):await self.C3_GetSvgImageSize(t)}HXt(){this.szt||(this.szt=!0,this.jc("runtime","enable-device-orientation"))}zXt(){this.izt||(this.izt=!0,this.jc("runtime","enable-device-motion"))}AB(){return this._Ht()}JXt(t){this._Ht=t}pzt(){const t=this.IM();return{fps:this.oB(),tps:this.lB(),cpu:this.cB(),gpu:this.dB(),layout:this.PB()?this.PB().Rc():"",renderer:t.Qv()?t.qD():t.uVt()}}Zyt(){return!!this.Mz()&&ib.Zyt()}Hyt(t){return this.F_t()?ib.Hyt(t):Promise.resolve()}xvt(){return!!this.F_t()&&ib.XXt()}qXt(t){this.lUt=!!t,this.YXt()}$Xt(){return this.lUt}F_t(){return this.uUt}A$(t){t?this.cUt--:this.cUt++,this.YXt()}YXt(){this.uUt=this.Mz()&&this.lUt&&0===this.cUt}USt(){return this.Mz()&&ib.USt()}A3(){return this.Mz()&&this.IM().jD()&&ib.A3()}async zJt(t){if(t)for(const s of t)await this.Hyt(s)}XJt(t){return this.zJt(this.oEt.Rf(t))}Xgt(t){return this.Mmt.Xgt(t.name,t.params)}dW(t){if(this.cN())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}Lj(){return this.wzt}f$(){return this.Szt}PXt(t){const s=sb.zh(sb.Event,t,!1);return s.runtime=this.wzt,s}Ozt(){this.wzt=new self.HL(this),this.rzt={pretick:this.PXt("pretick"),tick:this.PXt("tick"),tick2:this.PXt("tick2")}}Nzt(){const t={};for(const s of this.BUt)t[s.byt()]={value:s.rV(),enumerable:!0,writable:!1};this.wzt.MN(t)}Bzt(){const t={};for(const s of this.TN().Iyt())t[s.byt()]=s.vyt();this.wzt.GN(t)}VB(){return this.vzt}sV(t,s){this.bzt.set(t,s)}mU(t){return this.bzt.get(t)}oj(t){if(!(t instanceof self.uV))throw new TypeError("expected IObjectClass");const s=this.mU(t);if(!(s&&s instanceof sb.Yct))throw new Error("invalid IObjectClass");return s}bV(t){if(!(t instanceof self.PH))throw new TypeError("expected IInstance");const s=this.mU(t);if(!(s&&s instanceof sb.Instance))throw new Error("invalid IInstance");return s}sW(t){if(!(t instanceof self.yX))throw new TypeError("expected IWorldInstance");const s=this.mU(t);if(!(s&&s instanceof sb.Instance))throw new Error("invalid IInstance");return s}},self.C3_CreateRuntime=sb.YVt.i_,self.C3_InitRuntime=(t,s)=>t.oDt(s)}{const rb=self._s;rb.czt=class extends rb.Uh{constructor(t,s){super(),this.Nc=t,this.KXt=new Map,this.ZXt=0,this.QXt=s.inputPort,s.outputPort.onmessage=t=>this.tqt(t),this.sqt=s.maxNumWorkers,this.iqt=1,this.eqt=!1,this.hqt=!1}VXt(){return this.sqt}DXt(t){this.QXt.postMessage({type:"_import_scripts",scripts:t})}kXt(t,s){this.QXt.postMessage({type:"_send_blob",blob:t,id:s})}NXt(t,s){this.QXt.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}BXt(t,s,i,e,h,n){if(i||(i=[]),"number"==typeof n&&(n=Math.floor(n))<=0)throw new Error("invalid maxWorkerNum");const r=this.ZXt++,o={type:t,isBroadcast:!1,maxWorkerNum:n,jobId:r,params:s,transferables:i},a=new Promise((t,s)=>{this.KXt.set(r,{resolve:t,progress:e,reject:s,nqt:!1,rqt:n})});return h&&h.Yf(()=>this.oqt(r)),this.QXt.postMessage(o,i),this.aqt(),a}WXt(t,s,i,e){if(i||(i=[]),"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:this.ZXt++,params:s,transferables:i};this.QXt.postMessage(h,i)}oqt(t){const s=this.KXt.get(t);s&&(s.nqt=!0,s.resolve=null,s.progress=null,s.reject=null,this.QXt.postMessage({type:"_cancel",jobId:t}))}tqt(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.lqt(e,s.result);break;case"progress":this.uqt(e,s.progress);break;case"error":this.cqt(e,s.error);break;case"ready":this.fqt();break;default:throw new Error(`unknown message from worker '${i}'`)}}lqt(t,s){const i=this.KXt.get(t);if(!i)throw new Error("invalid job ID");i.nqt||i.resolve(s),this.KXt.delete(t)}uqt(t,s){const i=this.KXt.get(t);if(!i)throw new Error("invalid job ID");!i.nqt&&i.progress&&i.progress(s)}cqt(t,s){const i=this.KXt.get(t);if(!i)throw new Error("invalid job ID");i.nqt||i.reject(s),this.KXt.delete(t)}fqt(){this.eqt&&(this.eqt=!1,this.iqt++,this.iqt<this.sqt?this.aqt():this.QXt.postMessage({type:"_no_more_workers"}))}dqt(){let t=0;const s=[...this.KXt.values()].sort((t,s)=>(t.rqt||1/0)-(s.rqt||1/0));for(const i of s)t<(i.rqt||1/0)&&t++;return t}async aqt(){if(!(this.iqt>=this.sqt||this.eqt||this.hqt||this.dqt()<=this.iqt))try{this.eqt=!0,(await this.Nc.cW("runtime","create-job-worker")).outputPort.onmessage=t=>this.tqt(t)}catch(t){this.hqt=!0,this.eqt=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.iqt} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.tint={Ejt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 tintColor;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\ngl_FragColor = front * vec4(tintColor.r, tintColor.g, tintColor.b, 1.0);\n}",Pjt:"",Cjt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ntintColor : vec3<f32>\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput {\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar output : FragmentOutput;\noutput.color = front * vec4<f32>(shaderParams.tintColor, 1.0);\nreturn output;\n}",MM:!1,xM:!1,lM:0,cM:0,dM:!1,mM:!1,yM:!0,SM:!1,animated:!1,parameters:[["tintColor",0,"color"]]};{let ob=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const t=""+i,s=""+e;return t<s?-1:t>s?1:0}};0;const ab=self._s;let lb=null,ub="",cb="",fb=[],db="",pb="",mb="";const gb=ab.zh(ab.wgt);ab.MW.vW=class extends ab._Ct{constructor(t){super(t),this.dgt=this.Nc.TN().C$(),this.Qpt=this.Nc.TN().NN(),this.pqt=0,this.mqt=0,this.gqt=new Map}Jh(){super.Jh()}lW(){this.Nc.lW()}pz(t){this.Nc.pz(t,null,null)}yqt(t,s){return lb&&t===ub&&s===cb||(lb=new RegExp(t,s),ub=t,cb=s),lb.lastIndex=0,lb}wqt(t,s,i){if(t===db&&s===pb&&i===mb)return fb;const e=this.yqt(s,i);return fb=t.match(e),db=t,pb=s,mb=i,fb}async Sqt(t,s){if(!s.length)return;this.pqt+=s.length;const i=[];for(const e of s)i.push(t.F4(e));await ab.jr(i,()=>{this.mqt++}),this.mqt++,this.mqt===this.pqt&&(this.mqt=0,this.pqt=0,this.Nc.pz(ab.MW.vW.bW.bqt,null,null))}XZ(){return 0===this.pqt?1:this.mqt/this.pqt}vqt(t,s){for(const i of s)0===i.IV()&&t.N4(i)}Mqt(){return gb}Gqt(t){const s=this.Nc.TN(),i=s.NN(),e=i._$(),h=e.PN(),n=h.T$(),r=e.Qmt(),o=i.I$(h),a=s.C$(),l=a.I$();if(l.ggt(t),r)for(let i=0;i<t&&!l.L$();++i)s.E$(n),l.O$(i),h.F$(e,o),s.D$(n);else for(let s=0;s<t&&!l.L$();++s)l.O$(s),h.F$(e,o);return i.N$(),a.N$(),!1}*xqt(t){const s=this.Nc.TN(),i=s.NN(),e=i._$(),h=e.PN(),n=h.T$(),r=e.Qmt(),o=i.I$(h),a=s.C$(),l=a.I$();if(l.ggt(t),r)for(let i=0;i<t&&!l.L$();++i)s.E$(n),l.O$(i),yield*h.Ovt(e,o),s.D$(n);else for(let s=0;s<t&&!l.L$();++s)l.O$(s),yield*h.Ovt(e,o);return i.N$(),a.N$(),!1}Tqt(){const t=this.Nc.TN(),s=t.NN(),i=s._$(),e=i.PN(),h=e.T$(),n=i.Qmt(),r=s.I$(e),o=t.C$(),a=o.I$();if(n)for(let s=0;!a.L$();++s)t.E$(h),a.O$(s),e.F$(i,r)||a.Tq(),t.D$(h);else for(let t=0;!a.L$();++t)a.O$(t),e.F$(i,r)||a.Tq();return s.N$(),o.N$(),!1}*_qt(){const t=this.Nc.TN(),s=t.NN(),i=s._$(),e=i.PN(),h=e.T$(),n=i.Qmt(),r=s.I$(e),o=t.C$(),a=o.I$();if(n)for(let s=0;!a.L$();++s)t.E$(h),a.O$(s),(yield*e.Ovt(i,r))||a.Tq(),t.D$(h);else for(let t=0;!a.L$();++t)a.O$(t),(yield*e.Ovt(i,r))||a.Tq();return s.N$(),o.N$(),!1}Iqt(t,s,i){const e=this.Nc.TN(),h=e.NN(),n=h._$(),r=n.PN(),o=r.T$(),a=n.Qmt(),l=h.I$(r),u=e.C$(),c=u.I$();if(c.R$(t),c.ggt(i),i<s)if(a)for(let t=s;t>=i&&!c.L$();--t)e.E$(o),c.O$(t),r.F$(n,l),e.D$(o);else for(let t=s;t>=i&&!c.L$();--t)c.O$(t),r.F$(n,l);else if(a)for(let t=s;t<=i&&!c.L$();++t)e.E$(o),c.O$(t),r.F$(n,l),e.D$(o);else for(let t=s;t<=i&&!c.L$();++t)c.O$(t),r.F$(n,l);return h.N$(),u.N$(),!1}*Cqt(t,s,i){const e=this.Nc.TN(),h=e.NN(),n=h._$(),r=n.PN(),o=r.T$(),a=n.Qmt(),l=h.I$(r),u=e.C$(),c=u.I$();if(c.R$(t),c.ggt(i),i<s)if(a)for(let t=s;t>=i&&!c.L$();--t)e.E$(o),c.O$(t),yield*r.Ovt(n,l),e.D$(o);else for(let t=s;t>=i&&!c.L$();--t)c.O$(t),yield*r.Ovt(n,l);else if(a)for(let t=s;t<=i&&!c.L$();++t)e.E$(o),c.O$(t),yield*r.Ovt(n,l),e.D$(o);else for(let t=s;t<=i&&!c.L$();++t)c.O$(t),yield*r.Ovt(n,l);return h.N$(),u.N$(),!1}Rqt(t){const s=t.xV(),i=s.GV();if(0===i.length)return!1;const e=this.Nc.TN(),h=e.NN(),n=h._$(),r=n.PN(),o=r.T$(),a=n.Qmt(),l=h.I$(r),u=e.C$(),c=u.I$(),f=t.UH(),d=gb.I$();if(ab.Gr(d,i),c.ggt(d.length),a)for(let s=0,i=d.length;s<i&&!c.L$();++s){e.E$(o);const i=d[s];t.xV().dmt(i),f&&i.YSt(),c.O$(s),r.F$(n,l),e.D$(o)}else{s.umt(!1);const t=s.cmt();ab.Sr(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.L$();++s){const i=d[s];t[0]=i,f&&i.YSt(),c.O$(s),r.F$(n,l)}}return h.N$(),u.N$(),ab.Sr(d),gb.N$(),!1}*Aqt(t){const s=t.xV(),i=s.GV();if(0===i.length)return!1;const e=this.Nc.TN(),h=e.NN(),n=h._$(),r=n.PN(),o=r.T$(),a=n.Qmt(),l=h.I$(r),u=e.C$(),c=u.I$(),f=t.UH(),d=gb.I$();if(ab.Gr(d,i),c.ggt(d.length),a)for(let s=0,i=d.length;s<i&&!c.L$();++s){e.E$(o);const i=d[s];t.xV().dmt(i),f&&i.YSt(),c.O$(s),yield*r.Ovt(n,l),e.D$(o)}else{s.umt(!1);const t=s.cmt();ab.Sr(t),t.push(null);for(let s=0,i=d.length;s<i&&!c.L$();++s){const i=d[s];t[0]=i,f&&i.YSt(),c.O$(s),yield*r.Ovt(n,l)}}return h.N$(),u.N$(),ab.Sr(d),gb.N$(),!1}Pqt(t,s){const i=t.xV(),e=i.GV();if(0===e.length)return!1;const h=this.Nc.TN(),n=h.NN(),r=h.cyt(),o=n._$(),a=o.PN(),l=a.T$(),u=o.Qmt(),c=n.I$(a),f=h.C$(),d=f.I$(),p=t.UH(),m=gb.I$();ab.Sr(m),d.ggt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.Kxt(1,t)]);if(m.sort(ob),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.L$();++s){h.E$(l);const i=m[s][0];t.xV().dmt(i),p&&i.YSt(),d.O$(s),a.F$(o,c),h.D$(l)}else{i.umt(!1);const t=i.cmt();ab.Sr(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.L$();++s){const i=m[s][0];t[0]=i,p&&i.YSt(),d.O$(s),a.F$(o,c)}}return n.N$(),f.N$(),ab.Sr(m),gb.N$(),!1}*Eqt(t,s){const i=t.xV(),e=i.GV();if(0===e.length)return!1;const h=this.Nc.TN(),n=h.NN(),r=h.cyt(),o=n._$(),a=o.PN(),l=a.T$(),u=o.Qmt(),c=n.I$(a),f=h.C$(),d=f.I$(),p=t.UH(),m=gb.I$();ab.Sr(m),d.ggt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],r.Kxt(1,t)]);if(m.sort(ob),1===s&&m.reverse(),u)for(let s=0,i=m.length;s<i&&!d.L$();++s){h.E$(l);const i=m[s][0];t.xV().dmt(i),p&&i.YSt(),d.O$(s),yield*a.Ovt(o,c),h.D$(l)}else{i.umt(!1);const t=i.cmt();ab.Sr(t),t.push(null);for(let s=0,i=m.length;s<i&&!d.L$();++s){const i=m[s][0];t[0]=i,p&&i.YSt(),d.O$(s),yield*a.Ovt(o,c)}}return n.N$(),f.N$(),ab.Sr(m),gb.N$(),!1}Fqt(t,s){let i=this.gqt.get(t);return i||(s?(i={Dqt:null,Oqt:new Map},this.gqt.set(t,i),i):null)}kqt(t,s,i,e,h){s.RN().Kvt(i,s.DN()),e&&t.D$(h)}*Lqt(t,s,i,e,h){yield*s.RN().Zvt(i,s.DN()),e&&t.D$(h)}}}{const yb=self._s;yb.MW.vW.BEt=class extends yb.Uh{constructor(t){super(),this.zpt=t,this.Nc=t.AW(),this.pRt=t.fV()}KCt(){}Jh(){this.zpt=null,this.Nc=null,this.pRt=null}}}{const wb=self._s;wb.MW.vW.Instance=class extends wb.Uh{constructor(t,s){super(),this.fi=t,this.zpt=this.fi.EH(),this.bRt=this.zpt.CTt(),this.Nc=this.fi.AW()}Jh(){this.fi=null,this.zpt=null,this.bRt=null,this.Nc=null}}}{const Sb=self._s,bb=[];Sb.MW.vW.bW={Nqt:()=>!0,u6:()=>!0,w6:()=>!0,GJt:()=>!0,xJt:()=>!0,JN(){return this.Nc.JN()},Fbt(){const t=this.Nc.uyt();return!t.qmt()&&!t.Jmt()},Bqt(){const t=this.Nc.cyt().Nxt();let s=t.get("TriggerOnce_lastTick");void 0===s&&(s=-1,t.set("TriggerOnce_lastTick",-1));const i=this.Nc.tB();return t.set("TriggerOnce_lastTick",i),this.Nc.dXt()||s!==i-1},Wqt(t){const s=this.Nc.cyt().Nxt(),i=s.get("Every_lastTime")||0,e=this.Nc.ZN();s.has("Every_seconds")||s.set("Every_seconds",t);const h=s.get("Every_seconds");return e>=i+h?(s.set("Every_lastTime",i+h),e>=s.get("Every_lastTime")+.04&&s.set("Every_lastTime",e),s.set("Every_seconds",t),!0):(e<i-.1&&s.set("Every_lastTime",e),!1)},Ywt(t){const s=this.Nc.TN().Pyt(t);return s&&s.Ywt()},JVt(){return this.Nc.JVt()},ri:()=>Sb.Ks.ri,eJt:()=>!0,SW:()=>!0,jqt:()=>!0,TXt:()=>!0,AXt:()=>!0,IXt:()=>!0,CXt:()=>!0,Vqt(t){return!!this.Nc.KB(t)},Uqt(t){switch(t){case 0:return"browser"===Sb.Ks.hi;case 1:return"iOS"===Sb.Ks.Zs;case 2:return"Android"===Sb.Ks.Zs;case 8:return"cordova"===Sb.Ks.hi;case 9:return"scirra-arcade"===this.Nc.pj();case 13:return"windows-uwp"===this.Nc.pj();default:return!1}},Hqt(t,s,i){return this.yqt(s,i).test(t)},zqt:(t,s,i)=>Sb.compare(t,s,i),Jqt:(t,s,i)=>t>=s&&t<=i,Xqt:(t,s,i)=>Sb.compare(t.Qht(),s,i),qqt:t=>!!t.Qht(),Yqt(t,s){const i=this.Nc.ZN();if(0===t){const t=this.Nc.cyt().Nxt();return!t.get("CompareTime_executed")&&i>=s&&(t.set("CompareTime_executed",!0),!0)}return Sb.compare(i,t,s)},$qt:t=>isNaN(t),qIt:(t,s,i)=>Sb.an(Sb.Qh(t),Sb.Qh(i))<=Sb.Qh(s),YIt:(t,s)=>Sb.un(Sb.Qh(t),Sb.Qh(s)),n_t(t,s,i){let e=Sb.Qh(t),h=Sb.Qh(s),n=Sb.Qh(i);return Sb.un(n,h)?Sb.un(e,h)&&!Sb.un(e,n):!(!Sb.un(e,h)&&Sb.un(e,n))},Kqt:(t,s)=>"number"==typeof t?0===s:1===s,Zqt:t=>!!t,Iwt(t){return t.toLowerCase()===this.Nc.TN().Pwt()},Qqt(t,s,i,e){if(!t)return!1;const h=this.Mqt(),n=h.I$(),r=t.xV();Sb.Gr(n,r.GV()),r.emt()&&Sb.Sr(r.fmt());const o=this.Nc.cyt();let a=0;for(let t=0,h=n.length;t<h;++t){const h=n[t];n[a]=h,s=o.Kxt(1,t),e=o.Kxt(3,t),Sb.compare(s,i,e)?++a:r.lmt(h)}Sb.wr(n,a),r.pmt(n);const l=!!n.length;return Sb.Sr(n),h.N$(),t.Hvt(),l},tYt(t,s){if(!t)return!1;const i=this.Mqt(),e=i.I$(),h=t.xV();Sb.Gr(e,h.GV()),h.emt()&&Sb.Sr(h.fmt());const n=this.Nc.cyt();let r=0;for(let t=0,s=e.length;t<s;++t){const s=e[t];e[r]=s,n.Kxt(1,t)?++r:h.lmt(s)}Sb.wr(e,r),h.pmt(e);const o=!!e.length;return Sb.Sr(e),i.N$(),t.Hvt(),o},sYt(t,s,i){if(!t)return!1;const e=t.xV(),h=e.GV();if(0===h.length)return!1;const n=this.Nc.cyt();let r=null,o=0;for(let t=0,e=h.length;t<e;++t){const e=h[t];i=n.Kxt(2,t),(null===r||0===s&&i<o||1===s&&i>o)&&(o=i,r=e)}return e.Smt(r),t.Hvt(),!0},iYt(t,s){if(!t)return!1;const i=t.xV(),e=i.GV();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.Smt(h),t.Hvt(),!0},eYt(t){if(!t)return!1;const s=t.xV(),i=s.GV(),e=Math.floor(this.Nc.AB()*i.length);if(e>=i.length)return!1;const h=i[e];return s.Smt(h),t.Hvt(),!0},hYt:t=>!!t&&(!!t.IV()&&(t.xV().umt(!0),t.Hvt(),!0)),nYt(t,s,i){if(!t)return!1;const e=t.xV(),h=e.GV(),n=this.Nc.PN().bmt(),r=this.Nc.cyt().Fxt();e.emt()?(Sb.Gr(bb,h),e.imt(),e.umt(!1)):n?(Sb.Gr(bb,e.fmt()),Sb.Sr(e.fmt())):(Sb.Gr(bb,e.cmt()),Sb.Sr(e.cmt()));for(let t=0,h=bb.length;t<h;++t){const h=bb[t];Sb.xor(h.iW().TJ(s,i),r)?e.amt(h):e.lmt(h)}return t.Hvt(),Sb.xor(!!e.cmt().length,r)},rYt(t){if(!t)return!1;const s=t.B1();let i=null;const e=this.Nc.CFt();for(let h=e.length-1;h>=0;--h){const n=e[h];if(s){if(n.EH().DTt(t)){i=n;break}}else if(n.EH()===t){i=n;break}}if(!i){const s=t.GV();s.length&&(i=s.at(-1))}return!!i&&(t.xV().Smt(i),t.Hvt(),!0)},oYt(t){return this.Nc.F_t()?this.xqt(t):this.Gqt(t)},aYt(){return this.Nc.F_t()?this._qt():this.Tqt()},lYt(t,s,i){return this.Nc.F_t()?this.Cqt(t,s,i):this.Iqt(t,s,i)},Ud(t){return this.Nc.F_t()?this.Aqt(t):this.Rqt(t)},uYt(t,s,i){return this.Nc.F_t()?this.Eqt(t,i):this.Pqt(t,i)},cYt:t=>!!t&&t.WU(),fYt:t=>!!t&&t.qU(),dYt:t=>!!t&&t.zU(),pYt:t=>!!t&&!t.IV(),mYt:(t,s,i)=>!!t&&Sb.compare(100*t.NF(),s,i),gYt(t){const s=this.Nc.PB();return!!s&&s.w4(t)},bqt:()=>!0,yYt(){return this.pqt>0},wYt(t,s){const i=this.Nc.LDt();return!!i&&!!s&&!!i.qct(t,s)}}}{let vb=function(t,s){const i=t[0]-s[0];return 0!==i?i:t[1]-s[1]},Mb=function(t,s){return t[1]-s[1]};0;const Gb=self._s,xb=[],Tb=[],_b=Gb.zh(Gb.Rect),Ib=Gb.zh(Gb.Go),Cb=[];Gb.MW.vW.Urt={SYt(t,s){t.Ont(s)},bYt(t,s){t.Zi()&&"number"!=typeof s&&(s=parseFloat(s)),t.Ont(t.Qht()+s)},vYt(t,s){t.Zi()&&t.Ont(t.Qht()-s)},MYt(t,s){t.Ont(!!s)},GYt(t){t.Ont(!t.Qht())},xYt(t){t.Ont(t.lyt())},TYt(t){this.Nc.TN().Ryt(t)},_Yt(t,s,i,e,h,n){if(!t||!s)return;const r=this.Nc.RV(t,s,i,e,h,n);if(!r)return;h&&s.AV(r);const o=this.Nc.TN();o.PV(!0),r.EV(),o.PV(!1);const a=new Map;r.CDt(a,t,h);for(const[t,s]of a)t.xV().mmt(s)},IYt(t,s,i,e,h,n){if(!t||!s)return;const r=this.Nc.aJt(t);r&&Gb.MW.vW.Urt._Yt.call(this,r,s,i,e,h,n)},L1(t,s,i,e,h,n,r,o,a,l,u){if(!t)return;const c=this.Nc.tW();let f=c;if(n){const t=this.Nc.OB().J6(n);if(!t)return;f=t}let d=null;if(("number"!=typeof r||r>=0)&&(d=f.eW(r),!d))return;let p=null;if(("number"!=typeof o||o>=0)&&(p=c.eW(o),!p))return;_b.set(s,i,e,h);const m=f.L1(t,_b,d,p,a,l,u);t.xV().pmt(m),t.Hvt()},CYt(){const t=this.dgt;t.lgt()&&t.ogt().Tq()},$wt(t,s){const i=this.Nc.TN().Pyt(t);i&&(0===s?i.$wt(!1):1===s?i.$wt(!0):i.$wt(!i.Ywt()))},RYt(t){this.Nc.nB(t)},AYt(t,s){if(s<0&&(s=0),!t)return;const i=t.xV().GV();for(const t of i)t.nB(s)},PYt(t){if(!t)return;const s=t.xV().GV();for(const t of s)t.ZH()},dr(t,s){if(t<0)return;const i=this.Nc.TN().cwt();return s?i.yCt(t):i.wCt(t),!0},UN(t){return this.Nc.TN().cwt().SCt(t),!0},EYt(){const t=this.Nc.TN();return t.cwt().bCt(t._wt()),!0},jN(t){this.Nc.TN().jN(t)},async yW(t,s,i,e,h,n){const r=this.Nc.XB();r&&(this.lW(),await r.yW(0===t?"image/png":"image/jpeg",s/100,i,e,h,n),await this.Nc.wW(Gb.MW.vW.bW.SW,null))},FYt(t,s){if(t<=0||s<=0)return;this.Nc.qjt(t,s),this.Nc.tW().c5();const i=this.Nc.XB();i&&("off"===i.jjt()||this.Nc.uJt(t,s),i.hP(i.IY(),i.CY(),!0),this.Nc.lW())},DYt(t){const s=this.Nc.XB();s&&"off"!==s.jjt()&&(s.sVt(0!==t?"high":"low"),s.hP(s.IY(),s.CY(),!0))},yht(t){this.Nc.gXt(t)},OYt(){this.Nc.yXt()},kYt(t){this.Nc.wXt(t)},LYt(t){this.Nc._It(t)},NYt(t){},BYt(){for(const t of this.Nc.OB().NB())t.I6()},WYt(t){this.Nc.xB(0!==t)},jYt(t,s){this.Nc.MB(1/t),this.Nc.SB(1/s)},VYt(t,s){this.Nc.SB(t),this.Nc.MB(s)},UYt(t){this.Nc.gB(["vsync","unlimited-tick","unlimited-frame"][t])},HYt(t,s){if(!t)return;const i=t.xV().GV(),e=xb,h=Tb,n=this.Nc.tW(),r=t.B1(),o=t.dGt();for(let t=0,n=i.length;t<n;++t){const n=i[t],a=n.iW();if(!a)continue;let l;l=r?n.Oot(s+n.EH().fGt(o)):n.Oot(s),e.push([a.eW().VL(),a.hW()]),h.push([n,l])}if(!e.length)return;e.sort(vb),h.sort(Mb);let a=!1;for(let t=0,s=e.length;t<s;++t){const s=h[t][0],i=n.nW(e[t][0]),r=e[t][1],o=i.rW();o[r]!==s&&(o[r]=s,s.iW().oW(i,!0),i.aW(s),a=!0)}a&&this.Nc.lW(),Gb.Sr(xb),Gb.Sr(Tb)},ej(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Nc.$L().ej(t,s)},zYt(t){if(this.Nc.kw())return;const s=this.Nc.OB();s.WB()||s.jB(t)},JYt(t){if(this.Nc.kw())return;const s=this.Nc.OB();if(s.WB())return;const i=s.J6(t);i&&s.jB(i)},XYt(t){if(this.Nc.kw())return;const s=this.Nc.OB();if(s.WB())return;const i=s.NB(),e=i.indexOf(s.PB());if(t&&0===e)return;if(!t&&e===i.length-1)return;const h=i[e+(t?-1:1)];s.jB(h)},qYt(){if(this.Nc.kw())return;const t=this.Nc.OB();t.WB()||(t.jB(t.PB()),this.Nc.TN().Oyt())},YYt(t,s){t&&t.NU(s)},$Yt(t,s){t&&t.UU(s)},KYt(t,s){t&&t.JU(s)},ZYt(t,s){t&&t.WF(s/100)},QYt(t,s){t&&t.YU(s)},t$t(t,s){t&&t.ZU(s)},s$t(t,s){t&&t.QV(Gb.Qh(+s))},i$t(t,s,i){t&&(t.wH(!0),t.sU(s),t.eU(i))},e$t(t){t&&t.wH(!1)},h$t(t,s,i){t&&t.b2(s/100,i/100)},n$t(t,s){t&&t.fG(+s)},r$t(t,s){t&&t.aH(1===s)},o$t(t,s){if(!t)return;Ib.Qo(s),Ib.Kh();const i=t.yH();i.zo(Ib)||(i.ko(Ib),this.lW())},a$t(t,s){t&&t.cH(s)},l$t(t,s){t&&t.YM(s)},u$t(t,s,i){if(!t)return;const e=t.XV().ort(i);if(!e)return;const h=1===s;e.WSt()!==h&&(e.gNt(h),t.WX(),this.Nc.lW())},c$t(t,s,i,e){if(!t)return;const h=t.XV(),n=h.ort(s);if(!n)return;i=Math.floor(i);const r=n.hI().rI(i);r&&("color"===r?(Ib.Qo(e),e=Ib):"percent"===r&&(e/=100),h.VX(n.VL(),i,e)&&n.WSt()&&this.Nc.lW())},f$t(t,s){t&&t.pH(s)},d$t(t){this.Nc.tW().KV(+t)},p$t(t){this.Nc.tW().QV(Gb.Qh(+t))},m$t(t,s){const i=this.Nc.tW(),e=i.XV().ort(s);if(!e)return;const h=1===t;e.WSt()!==h&&(e.gNt(h),i.WX(),this.Nc.lW())},g$t(t,s,i){const e=this.Nc.tW().XV(),h=e.ort(t);if(!h)return;s=Math.floor(s);const n=h.hI().rI(s);n&&("color"===n?(Ib.Qo(i),i=Ib):"percent"===n&&(i/=100),e.VX(h.VL(),s,i)&&h.WSt()&&this.Nc.lW())},y$t(t,s){this.Nc.tW().xU(t/100,s/100)},w$t(t){const s=this.Nc.tW();0===t?s.IU():s.CU()},S$t(t){this.Nc.tW().sU(t)},b$t(t){this.Nc.tW().eU(t)},v$t(t,s){const i=this.Nc.tW();i.sU(t),i.eU(s)},M$t(t){if(!t)return;const s=t.v_t();if(!s)return;const i=s.iW();if(!i)return;const e=this.Nc.tW();e.sU(i.rG()),e.eU(i.lG())},gU(t,s,i){const e=this.Nc.tW();try{e.gU(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},wU(t,s,i){if(!t)return;const e=this.Nc.tW();try{e.wU(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}},bU(t){t&&this.Nc.tW().bU(t)},MU(){this.Nc.tW().MU()},async G$t(t){const s=this.Nc.PB();if(!s||!t||this.Nc.kw())return;const i=t.B1()?t.UV():[t];await this.Sqt(s,i)},async x$t(t){await Gb.MW.vW.Urt.G$t.call(this,this.Nc.aJt(t))},T$t(t){const s=this.Nc.PB();if(!s||!t)return;const i=t.B1()?t.UV():[t];this.vqt(s,i)},_$t(t){Gb.MW.vW.Urt.T$t.call(this,this.Nc.aJt(t))},I$t(){const t=this.Nc.PB();if(!t)return;const s=t.A4();this.vqt(t,s)},async C$t(t){const s=this.Nc.PB();t&&s&&!this.Nc.kw()&&await this.Sqt(s,t.I4())},async R$t(t){const s=this.Nc.PB(),i=this.Nc.OB().J6(t);i&&s&&!this.Nc.kw()&&await this.Sqt(s,i.I4())},WN(t){const s=this.Qpt.LN();if(s)switch(s.BN()){case 1:"number"==typeof t&&s.WN(t);break;case 2:"string"==typeof t&&s.WN(t);break;case 3:s.WN(t)}},A$t(t,s,i){const e=this.Fqt(t.toLowerCase(),!0),h=e.Oqt,n=s.toLowerCase();h.has(n)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`);const r=Gb.Br(h.values())||e.Dqt;r&&0!==r.ON()!=(0!==i.ON())?console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`):h.set(n,i)},P$t(t,s){const i=this.Fqt(t.toLowerCase(),!0);i.Dqt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`);const e=Gb.Br(i.Oqt.values())||i.Dqt;e&&0!==e.ON()!=(0!==s.ON())?console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`):i.Dqt=s},E$t(t,s,i){const e=this.Nc,h=e.F_t()?Cb:null;i=Math.floor(i);const n=this.Fqt(t.toLowerCase(),!1);if(!n)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let r=n.Oqt.get(s.toLowerCase());if(!r){if(!n.Dqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;r=n.Dqt,i=0}if(!r._u())return h;if(0!==r.ON())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.TN(),a=o.PN(),l=a.AN(),u=l.length>0;u&&(r.DN()?o.E$(l):o.lwt(l));const c=[],f=o.iSt(a);if(f){const t=f.hSt();for(let s=i,e=t.length;s<e;++s)c.push(t[s].Qht())}const d=r.hSt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].lyt());return e.F_t()?this.Lqt(o,r,c,u,l):this.kqt(o,r,c,u,l)}}}{const Rb=self._s;Rb.MW.vW.Hrt={F$t:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t)&&(t=0)),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t)&&(t=0)),t},C:t=>t.toString(),kt:t=>"string"==typeof t?t.length:0,random(t,s){return void 0===s?this.Nc.AB()*t:this.Nc.AB()*(s-t)+t},KMt(...t){return t[Math.floor(this.Nc.AB()*t.length)]},D$t:(t,...s)=>("number"!=typeof t&&(t=0),s[t=Rb.Kh(Math.floor(t),0,s.length-1)]),O$t:()=>Math.PI,k$t:()=>1/0,sqrt:t=>Math.sqrt(t),abs:t=>Math.abs(t),round:t=>Math.round(t),L$t(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor:t=>Math.floor(t),ceil:t=>Math.ceil(t),sign:t=>Math.sign(t),sin:t=>Math.sin(Rb.Qh(t)),cos:t=>Math.cos(Rb.Qh(t)),tan:t=>Math.tan(Rb.Qh(t)),asin:t=>Rb.tn(Math.asin(t)),acos:t=>Rb.tn(Math.acos(t)),atan:t=>Rb.tn(Math.atan(t)),exp:t=>Math.exp(t),Vt:t=>Math.log(t),log10:t=>Math.log10(t),max(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s<e&&(s=e)}return s},min(...t){let s=t[0];"number"!=typeof s&&(s=0);for(let i=1,e=t.length;i<e;++i){let e=t[i];"number"==typeof e&&s>e&&(s=e)}return s},Kh:(t,s,i)=>Rb.Kh(t,s,i),bt:(t,s,i,e)=>Rb.hn(t,s,i,e),angle:(t,s,i,e)=>Rb.tn(Rb.rn(t,s,i,e)),_t:(t,s,i)=>Rb._t(t,s,i),mn:(t,s,i)=>Rb.mn(t,s,i),yn:(t,s,i,e)=>Rb.yn(t,s,i,e),wn:(t,s,i,e,h)=>Rb.wn(t,s,i,e,h),Sn:(t,s,i)=>Rb.Sn(t,s,i),N$t:(t,s)=>Rb.tn(Rb.an(Rb.Qh(t),Rb.Qh(s))),B$t:(t,s,i)=>Rb.tn(Rb.cn(Rb.Qh(t),Rb.Qh(s),i)),W$t:(t,s,i)=>Rb.tn(Rb.ln(Rb.Qh(t),Rb.Qh(s),Rb.Qh(i))),j$t:(t,s,i)=>(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s,V$t:(t,s)=>(t|=0)^1<<s,U$t:(t,s)=>(t|=0)&1<<(s|=0)?1:0,H$t:()=>"\n",z$t:t=>"string"==typeof t?t.toUpperCase():"",J$t:t=>"string"==typeof t?t.toLowerCase():"",left:(t,s)=>"string"==typeof t?t.substr(0,s):"",mid:(t,s,i)=>"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i),right:(t,s)=>"string"==typeof t?t.substr(Math.max(t.length-s,0)):"",trim:t=>"string"==typeof t?t.trim():"",X$t(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},q$t:(t,s)=>"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0,find:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Rb.$i(s),"i")):-1,Y$t:(t,s)=>"string"==typeof t&&"string"==typeof s?t.search(new RegExp(Rb.$i(s),"")):-1,replace:(t,s,i)=>"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(Rb.$i(s),"gi"),i):"string"==typeof t?t:"",$$t(t,...s){let i=t;for(let t=0,e=s.length;t<e;++t)i=i.replaceAll(`{${t}}`,s[t].toString());return i},K$t(t,s,i){const e=this.yqt(s,i);return t?t.search(e):-1},Z$t(t,s,i,e){const h=this.yqt(s,i);return t?t.replace(h,e):""},Q$t(t,s,i){const e=this.wqt(t.toString(),s,i);return e?e.length:0},tKt(t,s,i,e){e=Math.floor(e);const h=this.wqt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},sKt(t,s){let i=t<0?"-":"";t<0&&(t=-t);const e=s-t.toString().length;return i+="0".repeat(Math.max(e,0)),i+t.toString()},iKt:t=>encodeURIComponent(t),eKt:t=>decodeURIComponent(t),XN(){return this.Nc.R7()},hKt(){return this.Nc.A7()},nKt(){return this.Nc.hB()},rKt(){return(Date.now()-this.Nc.hXt())/1e3},oKt:()=>Date.now(),time(){return this.Nc.ZN()},aKt(){return this.Nc.tB()},lKt(){return this.Nc.oXt()},rB(){return this.Nc.oB()},uKt(){return this.Nc.cB()},cKt(){return this.Nc.dB()},fKt(){return this.Nc.XB().Cj()},dKt(){return this.Nc.XB().Aj()},pKt(){return this.Nc.dN()},mKt(){return this.Nc.mN()},gKt(){return this.Nc.dN()},yKt(){return this.Nc.mN()},wKt(){return this.Nc.tW().iU()},SKt(){return this.Nc.tW().hU()},bKt(){return this.Nc.tW().Rc()},vKt(){return this.Nc.tW().ZV()},MKt(){return Rb.tn(this.Nc.tW().tU())},GKt(){return this.Nc.tW().My()},xKt(){return this.Nc.tW().xy()},TKt(){return 100*this.Nc.tW().c4()},_Kt(){return 100*this.Nc.tW().f4()},IKt(t){const s=this.Nc.tW().eW(t);return s?s.c2().Za():0},CKt(t){const s=this.Nc.tW().eW(t);return s?s.c2().Qa():0},RKt(t){const s=this.Nc.tW().eW(t);return s?s.c2().tl():0},AKt(t){const s=this.Nc.tW().eW(t);return s?s.c2().sl():0},PKt(t){const s=this.Nc.tW().eW(t);return s?s.c2().width():0},EKt(t){const s=this.Nc.tW().eW(t);return s?s.c2().height():0},FKt(t){const s=this.Nc.tW().eW(t);if(s){const t=s.c2();return(t.Za()+t.tl())/2}return 0},DKt(t){const s=this.Nc.tW().eW(t);if(s){const t=s.c2();return(t.Qa()+t.sl())/2}return 0},OKt(t,s,i){const e=this.Nc.tW().eW(t);return e?e.MH(s,i)[0]:0},kKt(t,s,i){const e=this.Nc.tW().eW(t);return e?e.MH(s,i)[1]:0},LKt(t,s,i){const e=this.Nc.tW().eW(t);return e?e.xH(s,i)[0]:0},NKt(t,s,i){const e=this.Nc.tW().eW(t);return e?e.xH(s,i)[1]:0},BKt(t,s,i,e){const h=this.Nc.tW(),n=h.eW(t),r=h.eW(s);if(!n||!r||n===r)return i;const[o,a]=n.xH(i,e);return r.MH(o,a)[0]},WKt(t,s,i,e){const h=this.Nc.tW(),n=h.eW(t),r=h.eW(s);if(!n||!r||n===r)return e;const[o,a]=n.xH(i,e);return r.MH(o,a)[1]},jKt(t){const s=this.Nc.tW().eW(t);return s?s.$U():0},VKt(t){const s=this.Nc.tW().eW(t);return s?Rb.tn(s.tH()):0},UKt(t){const s=this.Nc.tW().eW(t);return s?100*s.NF():0},HKt(t){const s=this.Nc.tW().eW(t);return s?s.QU():0},zKt(t){const s=this.Nc.tW().eW(t);return s?s.iU():0},JKt(t){const s=this.Nc.tW().eW(t);return s?s.hU():0},XKt(t){const s=this.Nc.tW().eW(t);return s?100*s.eH():0},qKt(t){const s=this.Nc.tW().eW(t);return s?100*s.rH():0},YKt(t){const s=this.Nc.tW().eW(t);return s?s.cG():0},$Kt(t){const s=this.Nc.tW().eW(t);return s?s.VL():-1},KKt(){const t=this.Nc.XB();return t?t.IVt():""},ZKt(t){const s=this.dgt;if(!s.lgt())return 0;if(t){const i=s.cgt(t);return i?i.VL():0}return s.ogt().VL()},QKt(){return this.Nc.SXt()},tZt(t,s,...i){const e=this.Fqt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.Oqt.get(s.toLowerCase());if(!h){if(!e.Dqt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.Dqt}const n=h.ON(),r=h.IN();if(0===n)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h._u())return r;const o=this.Nc.TN(),a=o.PN().AN(),l=a.length>0;l&&(h.DN()?o.E$(a):o.lwt(a));const u=h.hSt();for(let t=i.length,s=u.length;t<s;++t)i.push(u[t].lyt());const c=h.RN(),f=c.FN(c.AN(),h.DN(),n,r,...i);return l&&o.D$(a),f},sZt(){return this.Nc.XL().IB()},iZt(){return this.XZ()},nC(){return this.Nc.lVt()?"webgpu":"webgl"},eZt(){return this.Nc.lVt()?this.Nc.lVt().uVt():this.Nc.aVt().qD()},hZt(){let t=this.Nc.IM().iM();return Math.round(100*t/1048576)/100},nZt:(t,s,i)=>Rb._n(t,s,i),rZt:(t,s,i)=>Rb.Cn(t/100,s/100,i/100),oZt:(t,s,i,e)=>Rb.In(t/100,s/100,i/100,e/100),aZt:(t,s,i)=>Rb.Cn(t/255,s/255,i/255),lZt:(t,s,i,e)=>Rb.In(t/255,s/255,i/255,e/255),uZt(){return this.Nc.tN()},cZt(){return this.Nc.iN()},fZt(){return this.Nc.hN()},dZt(){return this.Nc.rN()},pZt(){return this.Nc.PN().g4().Rc()},mZt(){return this.Nc.PN().tvt()},gZt(){return this.Nc.XL().YW().length},yZt(t){t=Math.floor(t);const s=this.Nc.XL().YW();return t<0||t>=s.length?"":s[t].name}}}{const Ab=self._s;Ab.MW.wZt=class extends Ab._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{let Pb=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};0;const Eb=self._s;Eb.MW.wZt.BEt=class extends Eb.dRt{constructor(t,s){super(t),this.Ex="repeat",this.Fx="repeat",s&&(this.Ex=Pb(s[0]),this.Fx=Pb(s[1]))}Jh(){super.Jh()}KCt(){this.oq().RW(this.Nc)}E4(t){return this.oq().MK(t,{Mx:this.Nc.gN(),bx:this.Ex,vx:this.Fx})}B4(){this.oq().xA()}SZt(){return this.Ex}bZt(){return this.Fx}}}{const Fb=globalThis._s,Db=globalThis.Ls,Ob=0,kb=4,Lb=5,Nb=6,Bb=7,Wb=8,jb=9,Vb=10,Ub=11,Hb=12,zb=13,Jb=14,Xb=Fb.zh(Fb.Rect),qb=Fb.zh(Fb.Cl),Yb=Fb.zh(Fb.Rect),$b=Fb.zh(Fb.Cl);Fb.MW.wZt.Instance=class extends Fb.JRt{constructor(t,s){super(t),this.vZt=0,this.MZt=0,this.GZt=1,this.xZt=1,this.TZt=0,this._Zt=!1,this.IZt=0,this.CZt=0,this.RZt=0,this.AZt=0,this.PZt=0,this.EZt=null,s&&(this.iW().NU(!!s[Ob]),this.vZt=s[kb],this.MZt=s[Lb],this.GZt=s[Nb],this.xZt=s[Bb],this.TZt=Fb.Qh(s[Wb]),this._Zt=!!s[jb],this.IZt=s[Vb],this.CZt=s[Ub],this.RZt=s[Hb],this.AZt=s[zb],this.PZt=s[Jb])}Jh(){this.FZt(),super.Jh()}FZt(){this.EZt&&(this.EZt.Jh(),this.EZt=null)}DZt(t,s,i){const e=this.tAt(),h=e.My(),n=e.xy(),r=this.vZt/h,o=this.MZt/n,a=this.TZt;Yb.set(0,0,t/(h*this.GZt),s/(n*this.xZt)),Yb.offset(-r,-o),0===a?i.Yl(Yb):i.$l(Yb,-a)}OZt(t,s=!0){if(this._Zt){const s=this.tAt();t.Ib(),t.mD(s.My()*this.GZt,s.xy()*this.xZt,this.IZt,this.CZt,this.RZt,this.AZt,this.PZt)}else s&&t.Mb()}hx(t){const s=this.tAt(),i=s.kT();if(null===i)return;this.OZt(t),t.UF(i);const e=s.My(),h=s.xy();let n=this.vZt/e,r=this.MZt/h;0!==this.TZt||this._Zt||("repeat"===this.CTt().SZt()&&(n%=1),"repeat"===this.CTt().bZt()&&(r%=1));const o=this.iW();Yb.set(0,0,o.My()/(e*this.GZt),o.xy()/(h*this.xZt)),Yb.offset(-n,-r),o.fX()?this.kZt(o,t):this.LZt(o,t)}LZt(t,s){let i=t.aJ();this.Nc.TB()&&(i=t.GLt(i)),0===this.TZt?s.pv(i,Yb):($b.$l(Yb,-this.TZt),s.sD(i,$b))}kZt(t,s){const i=t.VLt();if(t.HLt()){t.nJ(Xb,qb,!1);let s=qb;this.Nc.TB()&&(s=t.GLt(s));let e=Yb;0!==this.TZt&&($b.$l(Yb,-this.TZt),e=$b),i.KG(t.dX(),s,e),t.ULt(!1)}i.hx(s,t.eJ())}tAt(){return this.EZt||this.zpt.oq()}Wet(){return!0}kT(){return this.tAt().kT()}NZt(){this.iW().ULt(!0)}BZt(t){this.vZt!==t&&(this.vZt=t,this.Nc.lW(),this.NZt())}WZt(){return this.vZt}jZt(t){this.MZt!==t&&(this.MZt=t,this.Nc.lW(),this.NZt())}VZt(){return this.MZt}UZt(t){this.GZt!==t&&(this.GZt=t,this.Nc.lW(),this.NZt())}HZt(){return this.GZt}zZt(t){this.xZt!==t&&(this.xZt=t,this.Nc.lW(),this.NZt())}JZt(){return this.xZt}XZt(t){this.TZt!==t&&(this.TZt=t,this.Nc.lW(),this.NZt())}qZt(){return this.TZt}YZt(t){t=!!t,this._Zt!==t&&(this._Zt=t,this.Nc.lW())}$Zt(){return this._Zt}KZt(t){this.IZt!==t&&(this.IZt=t,this.$Zt()&&this.Nc.lW())}ZZt(){return this.IZt}QZt(t){this.CZt!==t&&(this.CZt=t,this.$Zt()&&this.Nc.lW())}tQt(){return this.CZt}sQt(t){this.RZt!==t&&(this.RZt=t,this.$Zt()&&this.Nc.lW())}iQt(){return this.RZt}eQt(t){this.AZt!==t&&(this.AZt=t,this.$Zt()&&this.Nc.lW())}hQt(){return this.AZt}nQt(t){this.PZt!==t&&(this.PZt=t,this.$Zt()&&this.Nc.lW())}rQt(){return this.PZt}SG(){const t={};return 0!==this.vZt&&(t.iox=this.vZt),0!==this.MZt&&(t.ioy=this.MZt),1!==this.GZt&&(t.isx=this.GZt),1!==this.xZt&&(t.isy=this.xZt),0!==this.TZt&&(t.ia=this.TZt),this._Zt&&(t.tr=!0),1!==this.IZt&&(t.trx=this.IZt),1!==this.CZt&&(t.try=this.CZt),1!==this.RZt&&(t.tra=this.RZt),.1!==this.AZt&&(t.trbmx=this.AZt),.1!==this.PZt&&(t.trbmy=this.PZt),t}bG(t){this.vZt=t.iox||0,this.MZt=t.ioy||0,this.GZt=t.hasOwnProperty("isx")?t.isx:1,this.xZt=t.hasOwnProperty("isy")?t.isy:1,this.TZt=t.ia||0,this._Zt=!!t.tr,this.IZt=t.hasOwnProperty("trx")?t.trx:1,this.CZt=t.hasOwnProperty("try")?t.try:1,this.RZt=t.hasOwnProperty("tra")?t.tra:1,this.AZt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.PZt=t.hasOwnProperty("trbmy")?t.trbmy:.1}jRt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.WZt(),oQt:t=>this.BZt(t)},{name:t+".image-offset-y.name",value:this.VZt(),oQt:t=>this.jZt(t)},{name:t+".image-scale-x.name",value:100*this.HZt(),oQt:t=>this.UZt(t/100)},{name:t+".image-scale-y.name",value:100*this.JZt(),oQt:t=>this.zZt(t/100)},{name:t+".image-angle.name",value:Fb.tn(this.qZt()),oQt:t=>this.XZt(Fb.Qh(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.$Zt(),oQt:t=>this.YZt(t)},{name:t+".x-random.name",value:100*this.ZZt(),oQt:t=>this.KZt(t/100)},{name:t+".y-random.name",value:100*this.tQt(),oQt:t=>this.QZt(t/100)},{name:t+".angle-random.name",value:100*this.iQt(),oQt:t=>this.sQt(t/100)},{name:t+".blend-margin-x.name",value:100*this.hQt(),oQt:t=>this.eQt(t/100)},{name:t+".blend-margin-y.name",value:100*this.rQt(),oQt:t=>this.nQt(t/100)}]}]}_ot(t){switch(t){case kb:return this.WZt();case Lb:return this.VZt();case Nb:return this.HZt();case Bb:return this.JZt();case Wb:return this.qZt();case jb:return this.$Zt();case Vb:return this.ZZt();case Ub:return this.tQt();case Hb:return this.iQt();case zb:return this.hQt();case Jb:return this.rQt()}}Eot(t,s){switch(t){case kb:this.BZt(s);break;case Lb:this.jZt(s);break;case Nb:this.UZt(s);break;case Bb:this.zZt(s);break;case Wb:this.XZt(s);break;case jb:this.YZt(!!s);break;case Vb:this.KZt(s);break;case Ub:this.QZt(s);break;case Hb:this.sQt(s);break;case zb:this.eQt(s);break;case Jb:this.nQt(s)}}ZCt(){return globalThis.aQt}},globalThis.aQt=class extends globalThis.yX{#t;constructor(){super(),this.#t=globalThis.PH.OH().MX()}set lQt(t){Db.ne(t),this.#t.BZt(t)}get lQt(){return this.#t.WZt()}set uQt(t){Db.ne(t),this.#t.jZt(t)}get uQt(){return this.#t.VZt()}cQt(t,s){Db.ne(t),Db.ne(s);const i=this.#t;i.BZt(t),i.jZt(s)}fQt(){const t=this.#t;return[t.WZt(),t.VZt()]}set dQt(t){Db.ne(t),this.#t.UZt(t)}get dQt(){return this.#t.HZt()}set pQt(t){Db.ne(t),this.#t.zZt(t)}get pQt(){return this.#t.JZt()}mQt(t,s){Db.ne(t),Db.ne(s);const i=this.#t;i.UZt(t),i.zZt(s)}gQt(){const t=this.#t;return[t.HZt(),t.JZt()]}set yQt(t){Db.ne(t),this.#t.XZt(t)}get yQt(){return this.#t.qZt()}set wQt(t){Db.ne(t),this.#t.XZt(Fb.Qh(t))}get wQt(){return Fb.tn(this.#t.qZt())}get imageWidth(){return this.#t.tAt().My()}get imageHeight(){return this.#t.tAt().xy()}SQt(){const t=this.#t.tAt();return[t.My(),t.xy()]}set bQt(t){this.#t.YZt(!!t)}get bQt(){return this.#t.$Zt()}set vQt(t){Db.ne(t),this.#t.KZt(t)}get vQt(){return this.#t.ZZt()}set MQt(t){Db.ne(t),this.#t.QZt(t)}get MQt(){return this.#t.tQt()}GQt(t,s){Db.ne(t),Db.ne(s);const i=this.#t;i.KZt(t),i.QZt(s)}xQt(){const t=this.#t;return[t.ZZt(),t.tQt()]}set TQt(t){Db.ne(t),this.#t.sQt(t)}get TQt(){return this.#t.iQt()}set _Qt(t){Db.ne(t),this.#t.eQt(t)}get _Qt(){return this.#t.hQt()}set IQt(t){Db.ne(t),this.#t.nQt(t)}get IQt(){return this.#t.rQt()}CQt(t,s){Db.ne(t),Db.ne(s);const i=this.#t;i.eQt(t),i.nQt(s)}RQt(){const t=this.#t;return[t.hQt(),t.rQt()]}async AQt(t){Db.Ne(t,Blob);const s=this.#t,i=s.AW(),e=Fb.zh(Fb.iPt);e.gPt(i,t),await e.MK(i.IM(),{Mx:i.gN(),bx:s.CTt().SZt(),vx:s.CTt().bZt()}),s.Xh()?e.Jh():(s.FZt(),s.EZt=e,i.lW())}}}self._s.MW.wZt.bW={PQt:()=>!0,EQt:()=>!0,FQt(){return this.$Zt()}};{const Kb=self._s;Kb.MW.wZt.Urt={DQt(t){this.BZt(t)},OQt(t){this.jZt(t)},kQt(t){this.UZt(t/100)},LQt(t){this.zZt(t/100)},NQt(t){this.XZt(Kb.Qh(t))},BQt(t){this.YZt(t)},WQt(t,s){this.KZt(t/100),this.QZt(s/100)},jQt(t){this.sQt(t/100)},VQt(t,s){this.eQt(t/100),this.nQt(s/100)},UQt(t){this.iW().YM(t),this.Nc.lW()},async HQt(t,s){if(this.EZt&&this.EZt.jZ()===t)return;const i=this.Nc,e=Kb.zh(Kb.iPt);try{if(await e.mPt(i,t,!0),!e.mQ())throw new Error("image failed to load");if(this.Xh())return e.Jh(),null;if(!await e.MK(i.IM(),{Mx:i.gN(),bx:this.CTt().SZt(),vx:this.CTt().bZt()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Xh()||this.pz(Kb.MW.wZt.bW.EQt))}this.Xh()?e.Jh():(this.FZt(),this.EZt=e,i.lW(),await this.wW(Kb.MW.wZt.bW.PQt))}}}{const Zb=self._s;Zb.MW.wZt.Hrt={zQt(){return this.tAt().My()},JQt(){return this.tAt().xy()},XQt(){return this.vZt},qQt(){return this.MZt},YQt(){return 100*this.GZt},$Qt(){return 100*this.xZt},KQt(){return Zb.tn(this.TZt)},ZQt(){return 100*this.ZZt()},QQt(){return 100*this.tQt()},t0t(){return 100*this.iQt()},s0t(){return 100*this.hQt()},i0t(){return 100*this.rQt()}}}{const Qb=self._s;Qb.MW.urt=class extends Qb._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{const tv=self._s,sv=self.Ls,iv=[];tv.MW.urt.BEt=class extends tv.dRt{constructor(t){super(t),this.EEt=t.gFt()}Jh(){tv.Sr(this.EEt),super.Jh()}KCt(){for(const t of this.EEt)t.FPt(this.Nc)}E4(t){const s={Mx:this.Nc.gN()};return Promise.all(this.EEt.map(i=>i.DPt(t,s)))}B4(){for(const t of this.EEt)t.OPt()}O4(){this.e0t()}e0t(){for(const t of this.zpt.MV())t.MX().h0t()}Hxt(t){tv.MW.urt.hCt(this,t)}RTt(t){iv.push({yRt:null,n0t:!1,pV:[]})}r0t(t,s,i){const e=iv.at(-1);e.yRt=t,e.n0t=i,e.pV.push(s)}ATt(t){const s=iv.pop(),i=s.yRt,e=s.n0t;if(!i)return;const h=new Map;for(const t of s.pV)t.CDt(h,i,e);for(const[t,s]of h)t.xV().mmt(s)}o0t(t){const s=this.EH().vFt(t),i=this.AW();return s.kPt(0).oq().MK(i.IM(),{Mx:i.gN()}).then(()=>this.e0t()),s}a0t(t){for(const s of this.zpt.MV())s.MX().l0t(t);this.EH().MFt(t)}u0t(t,s){const i=this.zpt.SFt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.WPt(s);e<0&&(e+=i.QX()+1);const h=tv.APt.EPt(this.AW());i.LPt(h,e);const n=this.AW();h.oq().MK(n.IM(),{Mx:n.gN()}).then(()=>this.e0t());for(const t of this.zpt.MV())t.MX().c0t();return h}f0t(t,s){const i=this.zpt.SFt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.QX())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.WPt(s);e<0&&(e+=i.QX()),i.NPt(e);for(const t of this.zpt.MV())t.MX().c0t()}ZCt(){return self.d0t}};const ev=new WeakMap;self.d0t=class extends self.TV{constructor(t){super(t),ev.set(this,t.CTt())}p0t(t){sv.le(t);const s=ev.get(this).EH().SFt(t);return s?s.jPt():null}m0t(){return ev.get(this).EH().wFt().map(t=>t.jPt())}g0t(t){return sv.le(t),ev.get(this).o0t(t).jPt()}y0t(t){sv.le(t),ev.get(this).a0t(t)}w0t(t,s){if(sv.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return ev.get(this).u0t(t,s).iq()}S0t(t,s){if(sv.le(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");ev.get(this).f0t(t,s)}}}{const hv=self._s,nv=self.Ls,rv=0,ov=1,av=2,lv=3,uv=hv.zh(hv.Rect),cv=hv.zh(hv.Cl),fv=hv.zh(hv.Ca),dv=1,pv=2,mv=4;hv.MW.urt.Instance=class extends hv.JRt{constructor(t,s){super(t);let i=!0,e="",h=0,n=!0;s&&(i=!!s[rv],e=s[ov],h=s[av],n=s[lv]),this.b0t=this.zpt.SFt(e)||this.zpt.gFt()[0],this.v0t=hv.Kh(h,0,this.b0t.QX()-1),this.M0t=this.b0t.kPt(this.v0t);const r=this.M0t.oq();this.G0t=r.kT(),this.x0t=r.kP(),this.T0t=r.hAt(),this.$Rt(),t._Dt(pv,!0),t._Dt(dv,this.b0t.HX()>=0),this._0t=Math.abs(this.b0t.HX()),this.I0t=this.b0t.$X(),this.C0t=hv.zh(hv.Qf),this.R0t=0,this.A0t=0,this.P0t="",this.E0t=-1,this.F0t="",this.D0t=0;const o=this.iW();this.O0t=o.aJ(),o.NU(i),o.xJ(n),o.$z(this.M0t.Yz()),o.Qz(this.M0t.Zz()),o.PLt(this.M0t.wq()),o.Uz(),1===this.zpt.yFt()&&1===this.zpt.gFt()[0].QX()||0===this._0t||this.LRt()}Jh(){this.b0t=null,this.M0t=null,this.G0t=null,this.C0t=null,super.Jh()}tAt(){return this.M0t.oq()}Wet(){return!0}MQ(){this.G0t=null}QRt(){this.h0t()}hx(t){const s=this.G0t;if(null===s)return;t.UF(s);const i=this.iW();i.fX()?this.kZt(i,t):this.LZt(i,t)}LZt(t,s){let i=this.O0t;this.Nc.TB()&&(i=t.GLt(i)),s.sD(i,this.T0t)}kZt(t,s){const i=t.VLt();if(t.HLt()){t.nJ(uv,cv,!1);let s=cv;this.Nc.TB()&&(s=t.GLt(s)),i.KG(t.dX(),s,this.T0t),t.ULt(!1)}i.hx(s,t.eJ())}k0t(){return this.C0t.zs()}L0t(){return this.fi.IDt(pv)}N0t(t){this.fi._Dt(pv,t)}B0t(){return this.fi.IDt(dv)}W0t(t){this.fi._Dt(dv,t)}j0t(){return this.fi.IDt(mv)}V0t(t){this.fi._Dt(mv,t)}P7(){this.F0t&&this.U0t(),this.E0t>=0&&this.H0t();const t=this._0t;if(!this.L0t()||0===t)return void this.vRt();const s=this.Nc.qN(this.fi);this.C0t.Bu(s);const i=this.k0t(),e=this.M0t,h=e.aq()/t;if(i<this.R0t+h)return;const n=this.b0t,r=this.I0t,o=n.QX(),a=n.qX(),l=n.JX(),u=n.ZX();this.B0t()?this.v0t++:this.v0t--,this.R0t+=h,this.v0t>=o&&(u?(this.W0t(!1),this.v0t=o-2):l?this.v0t=r:(this.A0t++,this.A0t>=a?this.z0t(!1):this.v0t=r)),this.v0t<0&&(u?(this.v0t=1,this.W0t(!0),l||(this.A0t++,this.A0t>=a&&this.z0t(!0))):l?this.v0t=r:(this.A0t++,this.A0t>=a?this.z0t(!0):this.v0t=r)),this.v0t=hv.Kh(this.v0t,0,o-1);const c=n.kPt(this.v0t);i>this.R0t+c.aq()/t&&(this.R0t=i),this.J0t(e,c)}z0t(t){this.v0t=t?0:this.b0t.QX()-1,this.N0t(!1),this.P0t=this.b0t.Rc(),this.V0t(!0),this.gRt("animationend",!1,{animationName:this.P0t}),this.pz(hv.MW.urt.bW.X0t),this.pz(hv.MW.urt.bW.q0t),this.V0t(!1),this.A0t=0}J0t(t,s,i){if(t===s)return;const e=this.iW(),h=t.oq(),n=s.oq(),r=h.My(),o=h.xy(),a=n.My(),l=n.xy();i&&i.crt?i.crt(e,r,o,a,l):(r!==a&&e.hy(e.My()*(a/r)),o!==l&&e.ny(e.xy()*(l/o))),e.$z(s.Yz()),e.Qz(s.Zz()),e.PLt(s.wq()),e.Uz(),this.M0t=s,this.G0t=n.kT(),this.x0t=n.kP(),this.T0t=n.hAt();const u=this.Yq().hrt();for(let i=0,e=u.length;i<e;++i)u[i].UAt(t,s);this.gRt("framechange",!1,{animationName:this.b0t.Rc(),Y0t:this.v0t}),this.pz(hv.MW.urt.bW.$0t),this.Nc.lW()}K0t(t){this.N0t(!0),this.R0t=this.k0t(),1===t&&0!==this.v0t&&(this.E0t=0,this.j0t()||this.H0t()),this.LRt()}Z0t(t,s,i){this.F0t=t,this.D0t=s,this.LRt(),!i&&this.j0t()||this.U0t()}Q0t(){return this.b0t}t1t(){return this.F0t?this.F0t:this.b0t.Rc()}l0t(t){hv.Ke(t,this.t1t())&&this.Z0t(this.zpt.GFt().Rc(),1,!0)}s1t(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.zpt.SFt(this.t1t());if(!s)return;if(-1===(t=s.BPt(t)))return}isFinite(t)&&(this.E0t=t,this.j0t()||this.H0t())}c0t(){if(this.F0t||-1!==this.E0t)return;const t=this.M0t,s=this.b0t.kPt(hv.Kh(this.v0t,0,this.b0t.QX()-1));t!==s&&this.J0t(t,s),this.b0t.QX()>1&&this._0t>0&&this.LRt()}i1t(){return this.v0t}e1t(){return this.M0t.Mq()}h1t(t){this._0t=Math.abs(t),this.W0t(t>=0),this._0t>0&&this.LRt()}n1t(){return this.B0t()?this._0t:-this._0t}r1t(t){"string"==typeof t&&-1===(t=this.b0t.BPt(t))||(t=hv.Kh(Math.floor(t),0,this.b0t.QX()-1),this.I0t=t)}o1t(){return this.I0t}U0t(t){const s=this.M0t,i=this.zpt.SFt(this.F0t);if(this.F0t="",!i)return;if(i===this.b0t&&this.L0t())return;this.b0t=i,this.W0t(i.HX()>=0),this._0t=Math.abs(i.HX()),this.I0t=i.$X(),this.v0t=hv.Kh(this.v0t,0,this.b0t.QX()-1),1===this.D0t&&(this.v0t=0),this.N0t(!0),this.R0t=this.k0t();const e=this.b0t.kPt(this.v0t);this.J0t(s,e,t)}H0t(t){const s=this.M0t,i=this.v0t;if(this.v0t=hv.Kh(Math.floor(this.E0t),0,this.b0t.QX()-1),this.E0t=-1,!t&&i===this.v0t)return;const e=this.b0t.kPt(this.v0t);this.J0t(s,e),this.R0t=this.k0t()}h0t(){const t=this.M0t.oq();this.G0t=t.kT(),this.x0t=t.kP(),this.T0t=t.hAt(),this.iW().ULt(!0)}kT(){return this.G0t}kP(){return this.x0t}hAt(){return this.T0t}uq(){return this.M0t.uq()}HTt(t){const s=this.M0t,i=this.iW();let e=null;if("string"==typeof t)e=s.gq(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.mq(t-1)}let h=i.eJ();if(!e)return[i.rG(),i.lG(),h];if(fv.m(e.ZPt()),i.fX()){const[t,s,e]=i.dX().yx(fv.Fa(),fv.Oa());fv.set(t,s),h+=e}return fv.offset(-s.Yz(),-s.Zz()),fv.scale(i.My(),i.xy()),fv.rotate(i.tU()),fv.offset(i.rG(),i.lG()),[fv.Fa(),fv.Oa(),h]}a1t(){return this.iW().kLt().pu()}l1t(t){t=Math.floor(t);const s=this.iW(),i=s.kLt(),e=i.pu();if(t===e&&(t=0),t<0||t>=e)return[0,0];const h=i.du();return[h[2*t+0]+s.rG(),h[2*t+1]+s.lG()]}jRt(){const t=hv.MW.urt.Urt,s="plugins.sprite.debugger.animation-properties";return[{title:s+".title",properties:[{name:s+".current-animation",value:this.b0t.Rc(),oQt:s=>this.URt(t.u1t,s,0)},{name:s+".current-frame",value:this.v0t,oQt:s=>this.URt(t.c1t,s)},{name:s+".is-playing",value:this.L0t(),oQt:s=>s?this.URt(t.f1t,0):this.URt(t.d1t)},{name:s+".speed",value:this._0t,oQt:s=>this.URt(t.p1t,s)},{name:s+".repeats",value:this.A0t,oQt:t=>this.A0t=t}]}]}SG(){const t={a:this.b0t.J1()};0!==this.R0t&&(t.fs=this.R0t);const s=this.k0t();0!==s&&(t.at=s),0!==this.v0t&&(t.f=this.v0t),0!==this._0t&&(t.cas=this._0t),1!==this.A0t&&(t.ar=this.A0t),0!==this.I0t&&(t.rt=this.I0t),this.L0t()||(t.ap=this.L0t()),this.B0t()||(t.af=this.B0t());const i=this.iW();return i.GJ()&&(t.ce=i.GJ()),t}bG(t){const s=this.EH().bFt(t.a);s&&(this.b0t=s),this.R0t=t.hasOwnProperty("fs")?t.fs:0,this.C0t.Set(t.hasOwnProperty("at")?t.at:0);const i=t.hasOwnProperty("f")?t.f:0;this.v0t=hv.Kh(i,0,this.b0t.QX()-1),this._0t=t.hasOwnProperty("cas")?t.cas:0,this.A0t=t.hasOwnProperty("ar")?t.ar:1;const e=t.hasOwnProperty("rt")?t.rt:0;this.I0t=hv.Kh(e,0,this.b0t.QX()-1),this.N0t(!t.hasOwnProperty("ap")||!!t.ap),this.W0t(!t.hasOwnProperty("af")||!!t.af);const h=this.b0t.kPt(this.v0t);this.M0t=h,this.h0t();const n=this.iW();n.$z(h.Yz()),n.Qz(h.Zz()),n.PLt(h.wq()),n.xJ(!!t.ce),this.L0t()&&this.LRt()}_ot(t){const s=this.iW();switch(t){case lv:return s.GJ();case av:return hv.Kh(this.v0t,0,this.b0t.QX()-1);case ov:return this.b0t.Rc()}}Eot(t,s,i){const e=this.iW();switch(t){case lv:e.xJ(!!s);break;case av:{this.N0t(!1);const t=this.b0t.QX()-1,e=s=hv.Kh(s,0,t),h=this.b0t.kPt(this.v0t),n=this.b0t.kPt(e);this.J0t(h,n,i),this.v0t=hv.Kh(e,0,t);break}case ov:this.F0t=s,this.U0t(i),this.b0t.QX()>1&&this.b0t.HX()>0?this.LRt():this.vRt()}}ZCt(){return self.m1t}};const gv=new WeakMap,yv=new Map([["current-frame",0],["beginning",1]]);self.m1t=class extends self.yX{constructor(){super(),gv.set(this,self.PH.OH().MX())}lq(){return gv.get(this).uq()}cq(t){return this.fq(t)[0]}pq(t){return this.fq(t)[1]}g1t(t){return this.fq(t)[2]}fq(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return gv.get(this).HTt(t)}yq(){return gv.get(this).a1t()}Sq(t){return nv.ne(t),gv.get(this).l1t(t)[0]}vq(t){return nv.ne(t),gv.get(this).l1t(t)[1]}bq(t){return nv.ne(t),gv.get(this).l1t(t)}y1t(){gv.get(this).N0t(!1)}w1t(t="current-frame"){nv.le(t);const s=yv.get(t);if(void 0===s)throw new Error("invalid mode");gv.get(this).K0t(s)}S1t(t,s="beginning"){nv.le(t),nv.le(s);const i=yv.get(s);if(void 0===i)throw new Error("invalid mode");const e=gv.get(this);if(!e.EH().SFt(t))throw new Error(`animation name "${t}" does not exist`);e.Z0t(t,i)}p0t(t){nv.le(t);const s=gv.get(this).EH().SFt(t);return s?s.jPt():null}get animation(){return gv.get(this).Q0t().jPt()}get animationName(){return gv.get(this).t1t()}set Y0t(t){nv.ne(t),gv.get(this).s1t(t)}get Y0t(){return gv.get(this).i1t()}set b1t(t){nv.le(t),gv.get(this).s1t(t)}get b1t(){return gv.get(this).e1t()}set v1t(t){nv.ne(t),gv.get(this).h1t(t)}get v1t(){return gv.get(this).n1t()}set M1t(t){nv.ne(t),gv.get(this).r1t(t)}get M1t(){return gv.get(this).o1t()}get imageWidth(){return gv.get(this).tAt().My()}get imageHeight(){return gv.get(this).tAt().xy()}SQt(){const t=gv.get(this).tAt();return[t.My(),t.xy()]}async G1t(t){nv.Ne(t,Blob);const s=gv.get(this),i=s.AW(),e=s.tAt(),h=hv.zh(hv.iPt);if(h.gPt(i,t),await h.MK(i.IM(),{Mx:i.gN()}),s.Xh())return void h.Jh();e.yPt(h);const n=s.CTt();n.e0t(),n.EH().wf().dispatchEvent(new hv.Event("animationframeimagechange")),i.lW()}x1t(t,s){nv.le(s),gv.get(this).iW().SLt(!!t,s)}}}{const wv=self._s;wv.MW.urt.bW={T1t(t){return wv.Ke(this.t1t(),t)},_1t(t,s){return wv.compare(this.v0t,t,s)},I1t(t,s){if("string"!=typeof s)return!1;const i=this.M0t.Mq();return wv.compare(i.toLowerCase(),t,s.toLowerCase())},C1t(t,s){return wv.compare(this.n1t(),t,s)},q0t(t){return wv.Ke(this.P0t,t)},X0t:()=>!0,$0t:()=>!0,R1t(){return this.iW().My()<0},A1t(){return this.iW().xy()<0},PQt:()=>!0,EQt:()=>!0,GJ(){return this.iW().GJ()}}}{const Sv=self._s;Sv.MW.urt.Urt={P1t(t,s,i,e,h){if(!t||!s)return;const[n,r]=this.HTt(i),o=this.Nc.RV(t,s,n,r,e,h);if(!o)return;if(e&&s.AV(o),t.fV().Jj()){const t=o.iW();t.QV(this.iW().tU()),t.Uz()}const a=this.Nc.TN();a.PV(!0),o.EV(),a.PV(!1),t!==this.Nc.dyt().EH()&&this.bRt.r0t(t,o,e)},d1t(){this.N0t(!1)},f1t(t){this.K0t(t)},u1t(t,s){this.Z0t(t,s)},c1t(t){this.s1t(t)},p1t(t){this.h1t(t)},E1t(t){this.r1t(t)},F1t(t,s){try{0===t?this.CTt().o0t(s):this.CTt().a0t(s)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation: `,s)}},D1t(t,s,i){try{0===t?this.CTt().u0t(s,i):this.CTt().f0t(s,i)}catch(s){console.error(`[Construct] Error ${0===t?"adding":"removing"} animation frame: `,s)}},O1t(t){const s=this.iW(),i=s.My(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.hy(e),s.Uz())},k1t(t){const s=this.iW(),i=s.xy(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.ny(e),s.Uz())},KV(t){const s=this.M0t.oq(),i=this.iW(),e=i.My()<0?-1:1,h=i.xy()<0?-1:1,n=s.My()*t*e,r=s.xy()*t*h;i.My()===n&&i.xy()===r||(i.hP(n,r),i.Uz())},async HQt(t,s,i){const e=this.M0t.oq(),h=this.iW(),n=this.Nc,r=this.bRt;if(e.jZ()===t)return 0===s&&(h.hP(e.My(),e.xy()),h.Uz()),void this.pz(Sv.MW.urt.bW.PQt);const o=Sv.zh(Sv.iPt);try{if(await o.mPt(n,t),!o.mQ())throw new Error("image failed to load");if(this.Xh())return void o.Jh();await o.MK(n.IM(),{Mx:n.gN()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Xh()||this.pz(Sv.MW.urt.bW.EQt))}this.Xh()?o.Jh():(e.yPt(o),r.e0t(),r.EH().wf().dispatchEvent(new Sv.Event("animationframeimagechange")),n.lW(),0===s&&(h.hP(e.My(),e.xy()),h.Uz()),await this.wW(Sv.MW.urt.bW.PQt))},L1t(t){this.iW().xJ(t)},SLt(t,s){this.iW().SLt(0===t,s)},UQt(t){this.iW().YM(t),this.Nc.lW()}}}self._s.MW.urt.Hrt={N1t(){return this.i1t()},B1t(){return this.e1t()},W1t(){return this.b0t.QX()},j1t(){return this.b0t.Rc()},V1t(){return this.n1t()},U1t(){return this.b0t.HX()},H1t(t){return this.HTt(t)[0]},z1t(t){return this.HTt(t)[1]},J1t(t){return this.HTt(t)[2]},X1t(){return this.uq()},zQt(){return this.tAt().My()},JQt(){return this.tAt().xy()},q1t(t){return this.l1t(t)[0]},Y1t(t){return this.l1t(t)[1]},$1t(){return this.a1t()}};{const bv=self._s;bv.MW.K1t=class extends bv._Ct{constructor(t){super(t)}Jh(){super.Jh()}},bv.MW.K1t.Z1t=-2147483648,bv.MW.K1t.Q1t=1073741824,bv.MW.K1t.t2t=536870912,bv.MW.K1t.s2t=3758096384,bv.MW.K1t.i2t=536870911}{const vv=self._s,Mv=vv.MW.K1t.Z1t,Gv=vv.MW.K1t.Q1t,xv=vv.MW.K1t.t2t,Tv=vv.MW.K1t.i2t;vv.MW.K1t.BEt=class extends vv.dRt{constructor(t){super(t),this.e2t=[],this.h2t=!1,this.n2t=0,this.r2t=[],this.o2t=null}Jh(){this.o2t.clear(),this.o2t=null,super.Jh()}KCt(){this.oq().RW(this.Nc)}E4(t){return this.oq().MK(t,{Mx:this.Nc.gN()})}B4(){this.oq().xA()}O4(){for(const t of this.EH().MV())t.MX().a2t()}mRt(t,s,i){this.n2t=s;for(const s of t)if(s){const t=s[0],i=!!s[1];this.e2t.push({Gkt:t,use:i,l2t:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.e2t.push(null);for(const t of i){const s=t[0],i=t[1],e=t[2];this.r2t.push({name:s,type:i,u2t:e})}}c2t(t,s){this.h2t=!1,this.f2t(t,s)}f2t(t,s){if(!this.h2t){this.h2t=!0;for(let i=0,e=this.e2t.length;i<e;++i)this.e2t[i]&&(this.d2t(i,t,s,!1,!1,!1),this.d2t(i,t,s,!1,!1,!0),this.d2t(i,t,s,!1,!0,!1),this.d2t(i,t,s,!1,!0,!0),this.d2t(i,t,s,!0,!1,!1),this.d2t(i,t,s,!0,!1,!0),this.d2t(i,t,s,!0,!0,!1),this.d2t(i,t,s,!0,!0,!0))}}d2t(t,s,i,e,h,n){if(t<0||t>=this.e2t.length)return;const r=this.e2t[t];if(!r)return;const o=vv.zh(vv.au,r.Gkt,r.use);o.transform(s,i,0),n&&o.nu(),e&&o.iu(s/2),h&&o.hu(i/2),r.l2t[e?1:0][h?1:0][n?1:0]=null,r.l2t[e?1:0][h?1:0][n?1:0]=o}p2t(t){if(-1===t)return null;const s=t&Tv;if(s<0||s>=this.e2t.length)return null;const i=this.e2t[s];if(!i)return null;const e=t&Mv?1:0,h=t&Gv?1:0,n=t&xv?1:0;return i.l2t[e][h][n]}m2t(t){return!t||t._u()}g2t(){return this.n2t}y2t(t){this.o2t||(this.o2t=new Map);const s=this.o2t.get(t);if("number"==typeof s&&s>=0)return this.r2t[s];for(let s=0;s<this.r2t.length;s++)if(this.r2t[s].name===t)return this.o2t.set(t,s),this.r2t[s]}}}{let _v=function(t){const s=[],i=t.split(",");for(let t=0,e=i.length;t<e;++t){const e=i[t],h=e.indexOf("x");if(h>-1){let t=parseInt(e.substring(0,h),10);const i=e.substring(h+1);let n=parseInt(i,10);for(i.includes("h")&&(n|=kv),i.includes("v")&&(n|=Lv),i.includes("d")&&(n|=Nv);t>0;--t)s.push(n)}else{let t=parseInt(e,10);e.includes("h")&&(t|=kv),e.includes("v")&&(t|=Lv),e.includes("d")&&(t|=Nv),s.push(t)}}return s};0;const Iv=self._s,Cv=self.Ls,Rv=0,Av=1,Pv=2,Ev=3,Fv=4,Dv=5,Ov=6,kv=Iv.MW.K1t.Z1t,Lv=Iv.MW.K1t.Q1t,Nv=Iv.MW.K1t.t2t,Bv=Iv.MW.K1t.s2t,Wv=Iv.MW.K1t.i2t,jv=Iv.zh(Iv.Rect),Vv=Iv.zh(Iv.Rect),Uv=Iv.zh(Iv.Rect);Iv.MW.K1t.Instance=class extends Iv.JRt{constructor(t,s){super(t);const i=this.iW();this.w2t=32,this.S2t=32,this.b2t=0,this.v2t=0,this.M2t=0,this.G2t=0,this.x2t=0,this.T2t=0,this._2t=i.My(),this.I2t=i.xy(),this.WQ=0,this.jQ=0,this.C2t=[],this.R2t=new Map,this.A2t=!0,this.EZt=null,s&&(i.NU(s[Rv]),this.w2t=Math.max(s[Av],1),this.S2t=Math.max(s[Pv],1),this.b2t=s[Ev],this.v2t=s[Fv],this.M2t=s[Dv],this.G2t=s[Ov]),this.WQ=Math.ceil(this.Nc.dN()/this.w2t),this.jQ=Math.ceil(this.Nc.mN()/this.S2t),this.bRt.f2t(this.w2t,this.S2t),this.P2t=null}Jh(){this.FZt(),Iv.Sr(this.C2t),this.C2t=null,this.R2t.clear(),this.R2t=null,super.Jh()}FZt(){this.EZt&&(this.EZt.Jh(),this.EZt=null)}mRt(t,s,i){this.x2t=s,this.T2t=i,this.E2t(!0),this.F2t(t),this.D2t()}E2t(t){const[s,i]=this.O2t();if(s<=this.x2t&&i<=this.T2t&&!t)return;let e=0,h=0;t?(e=Math.ceil(this.T2t/this.jQ),h=Math.ceil(this.x2t/this.WQ)):(e=this.C2t.length,h=Math.ceil(this.x2t/this.WQ),i>this.T2t&&(this.T2t=i,e=Math.ceil(this.T2t/this.jQ)),s>this.x2t&&(this.x2t=s,h=Math.ceil(this.x2t/this.WQ)),this.k2t(),this.L2t(),this.Nc.lW());const n=this.C2t;if(n.length<e)for(let t=n.length;t<e;++t)n.push([]);for(let t=0;t<e;++t){const s=n[t];for(let i=s.length;i<h;++i)s.push(Iv.zh(Iv.MW.K1t.N2t,this,i,t))}}F2t(t){const s=_v(t);let i=0;const e=this.x2t,h=this.WQ,n=this.jQ;for(let t=0,r=this.T2t;t<r;++t)for(let r=0;r<e;++r){const e=s[i++],o=this.B2t(r,t);o&&o.W2t(r%h,t%n,e)}}j2t(){let t="";if(this.x2t<=0||this.T2t<=0)return t;let s=1,i=this.V2t(0,0);const[e,h]=this.O2t();let n=-1,r=!1,o=!1,a=!1;for(let l=0;l<h;++l)for(let h=0===l?1:0;h<e;++h){const e=this.V2t(h,l);e===i?++s:(-1===i?(n=-1,r=!1,o=!1,a=!1):(n=i&Wv,r=0!==(i&kv),o=0!==(i&Lv),a=0!==(i&Nv)),t+=1===s?""+n:s+"x"+n,r&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t+=",",s=1,i=e)}return-1===i?(n=-1,r=!1,o=!1,a=!1):(n=i&Wv,r=0!==(i&kv),o=0!==(i&Lv),a=0!==(i&Nv)),t+=1===s?""+n:s+"x"+n,r&&(t+="h"),o&&(t+="v"),a&&(t+="d"),t}k2t(){const t=this.C2t;for(let s=0,i=t.length;s<i;++s){const i=t[s];for(let t=0,s=i.length;t<s;++t)i[t].U2t()}this.A2t=!0}D2t(){if(!this.A2t)return;this.A2t=!1;const t=this.C2t;for(let s=0,i=t.length;s<i;++s){const i=t[s];for(let t=0,s=i.length;t<s;++t)i[t].H2t()}}z2t(){this.A2t=!0,this.L2t(),this.Nc.lW()}L2t(){this.iW().BLt(!0)}B2t(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.jQ);if(i>=this.C2t.length)return null;const e=this.C2t[i],h=Math.floor(t/this.WQ);return h>=e.length?null:e[h]}J2t(t,s){if(t<0||s<0||s>=this.C2t.length)return null;const i=this.C2t[s];return t>=i.length?null:i[t]}V2t(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.x2t||s>=this.T2t)return-1;const i=this.B2t(t,s);return i?i.X2t()[s%this.jQ][t%this.WQ]:-1}W2t(t,s,i){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.x2t||s>=this.T2t)return;if(-1!==i&&(i&Wv)>this.g2t())return;const e=this.B2t(t,s);e&&e.W2t(t%this.WQ,s%this.jQ,i)}g2t(){return this.bRt.g2t()}q2t(t){return Math.floor((t-this.iW().rG())/(this.WQ*this.w2t))}Y2t(t){return Math.floor((t-this.iW().lG())/(this.jQ*this.S2t))}$2t(t){return Math.floor((t-this.iW().rG())/this.w2t)}K2t(t){return Math.floor((t-this.iW().lG())/this.S2t)}Z2t(){return this.x2t}Q2t(){return this.T2t}t3t(){return Math.floor(this.iW().My()/this.s3t())}i3t(){return Math.floor(this.iW().xy()/this.e3t())}O2t(){const t=this.iW();return[Math.floor(t.My()/this.s3t()),Math.floor(t.xy()/this.e3t())]}s3t(){return this.w2t}e3t(){return this.S2t}h3t(){return this.WQ}n3t(){return this.jQ}$Nt(t,s){const i=this.q2t(t.Za()),e=this.Y2t(t.Qa()),h=this.q2t(t.tl()),n=this.Y2t(t.sl());for(let t=i;t<=h;++t)for(let i=e;i<=n;++i){const e=this.J2t(t,i);e&&(e.H2t(),Iv.Fh(s,e.r3t()))}}oAt(t,s){const i=this.$2t(t),e=this.K2t(s),h=this.V2t(i,e);if(-1===h)return!1;const n=this.bRt.p2t(h);if(!n)return!0;if(!this.bRt.m2t(n))return!1;const r=this.iW();return t-=Math.floor((t-r.rG())/this.w2t)*this.w2t+r.rG(),s-=Math.floor((s-r.lG())/this.S2t)*this.S2t+r.lG(),n.xl(t,s)}o3t(t){const s=this.C2t;for(let i=0,e=s.length;i<e;++i){const e=s[i];for(let s=0,i=e.length;s<i;++s){const i=e[s];i.H2t(),Iv.Fh(t,i.r3t())}}}tAt(){return this.EZt||this.zpt.oq()}a3t(t){const s=this.R2t,i=s.get(t);if(i)return i;const e=t&Wv,h=0!==(t&kv),n=0!==(t&Lv),r=0!==(t&Nv),o=this.tAt(),a=o.My(),l=this.w2t,u=this.b2t,c=this.M2t,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.wPt()+this.b2t+(this.w2t+this.M2t)*p,y=o.SPt()+this.v2t+(this.S2t+this.G2t)*m;jv.Ha(g,y,this.w2t,this.S2t),jv.wt(o.bPt(),o.vPt());const w=Iv.zh(Iv.Cl);return w.Yl(jv),r&&w.nu(),h&&w.iu(),n&&w.hu(),w.offset(p,m),s.set(t,w),w}a2t(){this.R2t.clear(),this.k2t()}hx(t){const s=this.tAt(),i=s.kT();if(!i)return;jv.m(s.kP()),jv.offsetLeft(this.b2t/i.My()),jv.offsetTop(this.v2t/i.xy()),t._b(),t.pD(jv,i.My(),i.xy(),this.w2t,this.S2t,this.M2t,this.G2t),t.UF(i);const e=this.iW(),h=e.eW();e.My()===this._2t&&e.xy()===this.I2t||(this.L2t(),this.k2t(),this._2t=e.My(),this.I2t=e.xy());let n=e.rG(),r=e.lG();this.Nc.TB()&&(n=Math.round(n),r=Math.round(r));const o=this.WQ*this.w2t,a=this.jQ*this.S2t,l=e.eJ(),u=Vv;if(h.A2()){u.set(-1/0,-1/0,1/0,1/0);const s=Uv,i=h.q3();for(const e of this.C2t)for(const h of e)h.l3t(s),i.oS(s.Za(),s.Qa(),l,s.tl(),s.sl(),l)&&(h.H2t(),h.hx(t,u,n,r))}else{h.d2(l,u);const s=Math.floor((u.Za()-n)/o),i=Math.floor((u.tl()-n)/o),e=Math.floor((u.Qa()-r)/a),c=Math.floor((u.sl()-r)/a);for(let h=s;h<=i;++h)for(let s=e;s<=c;++s){const i=this.J2t(h,s);i&&(i.H2t(),i.hx(t,u,n,r))}}}SG(){this.E2t();const[t,s]=this.O2t();return{tw:this.w2t,th:this.S2t,tox:this.b2t,toy:this.v2t,tsx:this.M2t,tsy:this.G2t,w:t,h:s,d:this.j2t()}}bG(t){this.w2t=t.tw,this.S2t=t.th,this.b2t=t.tox,this.v2t=t.toy,this.M2t=t.tsx,this.G2t=t.tsy,this.x2t=t.w,this.T2t=t.h,this.E2t(!0),this.F2t(t.d),this.L2t(),this.k2t()}u3t(){this.E2t();const[t,s]=this.O2t();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.j2t()})}c3t(t){switch(t){case 0:default:return 0;case 1:return kv;case 2:return Lv;case 3:return kv|Nv;case 4:return kv|Lv;case 5:return Lv|Nv;case 6:return kv|Lv|Nv;case 7:return Nv}}_ot(t){switch(t){case Av:return this.w2t;case Pv:return this.S2t;case Ev:return this.b2t;case Fv:return this.v2t;case Dv:return this.M2t;case Ov:return this.G2t}}Eot(t,s){switch(t){case Av:if(this.w2t===s)return;this.w2t=Math.max(s,1),this.WQ=Math.ceil(this.Nc.dN()/this.w2t),this.bRt.c2t(),this.f3t();break;case Pv:if(this.S2t===s)return;this.S2t=Math.max(s,1),this.jQ=Math.ceil(this.Nc.mN()/this.S2t),this.bRt.c2t(),this.f3t();break;case Ev:if(this.b2t===s)return;this.b2t=s,this.f3t();break;case Fv:if(this.v2t===s)return;this.v2t=s,this.f3t();break;case Dv:if(this.M2t===s)return;this.M2t=s,this.f3t();break;case Ov:if(this.G2t===s)return;this.G2t=s,this.f3t()}}f3t(){this.R2t.clear(),this.k2t(),this.D2t()}ZCt(){return zv}};const Hv=new WeakMap,zv=self.d3t=class extends self.yX{constructor(){super(),Hv.set(this,self.PH.OH().MX())}get p3t(){return Hv.get(this).Z2t()}get m3t(){return Hv.get(this).Q2t()}g3t(){const t=Hv.get(this);return[t.Z2t(),t.Q2t()]}get y3t(){return Hv.get(this).t3t()}get w3t(){return Hv.get(this).i3t()}S3t(){const t=Hv.get(this);return[t.t3t(),t.i3t()]}get b3t(){return Hv.get(this).s3t()}get v3t(){return Hv.get(this).e3t()}M3t(){const t=Hv.get(this);return[t.s3t(),t.e3t()]}G3t(t,s){return Cv.ne(t),Cv.ne(s),Hv.get(this).V2t(t,s)}x3t(t,s,i){Cv.ne(t),Cv.ne(s),Cv.ne(i);const e=Hv.get(this);e.E2t(),e.W2t(t,s,i)}async AQt(t){Cv.Ne(t,Blob);const s=Hv.get(this),i=s.AW(),e=Iv.zh(Iv.iPt);e.gPt(i,t),await e.MK(i.IM(),{Mx:i.gN()}),s.Xh()?e.Jh():(s.FZt(),s.EZt=e,s.R2t.clear(),s.k2t(),i.lW())}};zv.Z1t=kv,zv.Q1t=Lv,zv.t2t=Nv,zv.s2t=Bv,zv.i2t=Wv}{const Jv=self._s,Xv=Jv.MW.K1t.s2t,qv=Jv.MW.K1t.i2t;Jv.MW.K1t.bW={T3t(t,s,i,e){let h=this.V2t(t,s);return-1!==h&&(h&=qv),Jv.compare(h,i,e)},_3t(t,s,i){const e=this.V2t(t,s);let h=0;return-1!==e&&(h=e&Xv),h===this.c3t(i)},PQt:()=>!0,EQt:()=>!0,I3t(t){return this.P2t||(this.P2t=new Jv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(t)}}}{const Yv=self._s,$v=Yv.MW.K1t.i2t;Yv.MW.K1t.Urt={R3t(t,s){this.E2t(),this.W2t(t,s,-1)},A3t(t,s,i,e){this.E2t(),this.W2t(t,s,i&$v|this.c3t(e))},P3t(t,s,i){const e=this.V2t(t,s);-1!==e&&(this.E2t(),this.W2t(t,s,e&$v|this.c3t(i)))},E3t(t,s,i,e){const h=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),r=Math.floor(Math.min(t+i,this.x2t)),o=Math.floor(Math.min(s+e,this.T2t));for(let t=n;t<o;++t)for(let s=h;s<r;++s)this.W2t(s,t,-1)},F3t(t,s,i,e,h,n){this.E2t();const r=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.x2t)),l=Math.floor(Math.min(s+e,this.T2t)),u=h&$v|this.c3t(n);for(let t=o;t<l;++t)for(let s=r;s<a;++s)this.W2t(s,t,u)},D3t(t,s,i,e,h){this.E2t();const n=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.x2t)),a=Math.floor(Math.min(s+e,this.T2t)),l=this.c3t(h);for(let t=r;t<a;++t)for(let s=n;s<o;++s){const i=this.V2t(s,t);-1!==i&&this.W2t(s,t,i&$v|l)}},O3t(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.x2t=s.width,this.T2t=s.height,this.E2t(!0),this.F2t(s.data),this.k2t(),this.L2t()):console.error("[Construct] Unrecognized JSON data format")},k3t(t){const s=URL.createObjectURL(new Blob([this.u3t()],{type:"application/json"}));this.Nc.YB(s,t)},async HQt(t,s){if(this.EZt&&this.EZt.jZ()===t)return;const i=this.Nc,e=Yv.zh(Yv.iPt);try{if(await e.mPt(i,t),!e.mQ())throw new Error("image failed to load");if(this.Xh())return e.Jh(),null;if(!await e.MK(i.IM(),{Mx:i.gN()}))return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Xh()||this.pz(Yv.MW.K1t.bW.EQt))}this.Xh()?e.Jh():(this.FZt(),this.EZt=e,i.lW(),this.R2t.clear(),this.k2t(),await this.wW(Yv.MW.K1t.bW.PQt))},UQt(t){t>=2&&t++,this.iW().YM(t),this.Nc.lW()},L3t(t,s,i){if(this.E2t(),this.P2t||(this.P2t=new Yv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(i))switch(this.P2t.N3t(i)){case 0:case 1:this.P2t.B3t(t,s,i);break;case 2:this.P2t.W3t(t,s,i)}},j3t(t,s,i,e,h,n,r){this.E2t(),this.P2t||(this.P2t=new Yv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(i)&&2===this.P2t.N3t(i)&&this.P2t.W3t(t,s,i,e,h,n,r)},V3t(t,s,i){if(this.E2t(),this.P2t||(this.P2t=new Yv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(i))switch(this.P2t.N3t(i)){case 0:case 1:this.P2t.U3t(t,s,i);break;case 2:this.P2t.H3t(t,s,i)}},z3t(t,s,i,e,h,n){this.E2t(),this.P2t||(this.P2t=new Yv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(i)&&2===this.P2t.N3t(i)&&this.P2t.H3t(t,s,i,e,h,n)},J3t(t,s,i,e,h,n,r){Yv.MW.K1t.Urt.j3t.call(this,t,s,i,e,h,n,r)},X3t(t,s,i,e,h,n){Yv.MW.K1t.Urt.z3t.call(this,t,s,i,e,h,n)},q3t(t,s,i){Yv.MW.K1t.Urt.L3t.call(this,t,s,i)},Y3t(t,s,i){Yv.MW.K1t.Urt.V3t.call(this,t,s,i)}}}{const Kv=self._s,Zv=Kv.MW.K1t.i2t;Kv.MW.K1t.Hrt={$3t(t,s){const i=this.V2t(t,s);return-1===i?-1:i&Zv},K3t(t){return this.$2t(t)},Z3t(t){return this.K2t(t)},Q3t(t){return t*this.w2t+this.iW().rG()+this.w2t/2},t5t(t){return t*this.S2t+this.iW().lG()+this.S2t/2},s5t(t){const s=this.iW().rG();return Math.floor((t-s)/this.w2t)*this.w2t+s+this.w2t/2},i5t(t){const s=this.iW().lG();return Math.floor((t-s)/this.S2t)*this.S2t+s+this.S2t/2},e5t(){return this.u3t()},h5t(){return this.s3t()},n5t(){return this.e3t()},r5t(){return this.t3t()},o5t(){return this.i3t()},a5t(t){return this.P2t||(this.P2t=new Kv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(t)&&2===this.P2t.N3t(t)?this.P2t.l5t(t):0},u5t(t){return this.P2t||(this.P2t=new Kv.MW.K1t.C3t(this,this.bRt)),this.P2t.I3t(t)&&2===this.P2t.N3t(t)?this.P2t.c5t(t):0}}}{const Qv=self._s,tM=Qv.MW.K1t.Z1t,sM=Qv.MW.K1t.Q1t,iM=Qv.MW.K1t.t2t,eM=Qv.MW.K1t.i2t,hM=Qv.zh(Qv.Rect),nM=Qv.zh(Qv.Cl);Qv.MW.K1t.f5t=class extends Qv.Uh{constructor(){super(),this.Wc=-1,this.d5t=-1,this.p5t=!1,this.m5t=!1,this.g5t=!1,this.y5t=Qv.zh(Qv.Rect),this.w5t=null}JQ(t,s,i,e,h,n,r,o){this.Wc=t,this.d5t=t&eM,this.p5t=0!==(t&tM),this.m5t=0!==(t&sM),this.g5t=0!==(t&iM),this.y5t.Ha(e*s+n,h*i+r,s,i),this.w5t=o.a3t(this.Wc)}hx(t,s,i,e,h){hM.m(this.y5t),hM.offset(i,e),hM.Ml(s)&&(nM.Yl(hM),t.sD(nM,this.w5t))}}}{const rM=self._s;rM.MW.K1t.S5t=class extends rM.Uh{constructor(){super(),this.Wc=-1,this.b5t=null,this.y5t=rM.zh(rM.Rect)}JQ(t,s,i,e,h,n,r,o){this.Wc=t,this.b5t=s,this.y5t.Ha(h*i+r,n*e+o,i,e)}v5t(t){this.y5t.qa(this.y5t.tl()+t)}M5t(){return this.Wc}G5t(){return!!this.b5t}ZNt(){return this.b5t}KNt(){return this.y5t}}}{const oM=self._s;oM.MW.K1t.i2t;oM.MW.K1t.N2t=class extends oM.Uh{constructor(t,s,i){super();const e=t.h3t(),h=t.n3t();this.qFt=t,this.Ra=s,this.Aa=i,this.Wa=this.Ra*e*t.s3t(),this.ja=this.Aa*h*t.e3t(),this.x5t=[],this.T5t=[],this._5t=[],this.I5t=!1;for(let t=0;t<h;++t){const t=new Int32Array(e);t.fill(-1),this.x5t.push(t)}}Ru(){const t=this.qFt.h3t(),s=this.qFt.n3t(),i=this.x5t;if(i.length<s)for(let e=i.length;e<s;++e)i.push(new Int32Array(t));else i.length>s&&oM.wr(i,s);for(let s=0,e=i.length;s<e;++s){let e=i[s];e.length!==t&&(e=new Int32Array(t),i[s]=e),e.fill(-1)}}l3t(t){const s=this.qFt,i=s.iW(),e=s.h3t()*s.s3t(),h=s.n3t()*s.e3t(),n=i.rG()+this.Wa,r=i.lG()+this.ja;t.set(n,r,n+e,r+h)}U2t(){this.I5t=!1}H2t(){if(this.I5t)return;const t=this.qFt,s=t.CTt(),i=t.iW(),e=t.s3t(),h=t.e3t(),n=t.h3t(),r=t.n3t(),o=this.Wa,a=this.ja;if(e<=0||h<=0)return;let l=Math.min(t.Z2t(),Math.floor(i.My()/e)),u=Math.min(t.Q2t(),Math.floor(i.xy()/h));l-=o/e,u-=a/h,l>n&&(l=n),u>r&&(u=r);const c=this.x5t,f=this.T5t;let d=0;for(let s=0;s<u;++s){const i=c[s];for(let n=0;n<l;++n){const r=i[n];if(-1===r)continue;let l=null;d<f.length?l=f[d]:(l=oM.zh(oM.MW.K1t.f5t),f.push(l)),l.JQ(r,e,h,n,s,o,a,t),++d}}d<f.length&&oM.wr(f,d);let p=null,m=!1;const g=this._5t;oM.Sr(g);for(let t=0;t<u;++t){const i=c[t];for(let n=0;n<l;++n){const r=i[n],l=s.p2t(r),u=s.m2t(l);-1!==r&&u?!p||l||m?(p&&g.push(p),p=oM.zh(oM.MW.K1t.S5t),p.JQ(r,l,e,h,n,t,o,a),m=!!l):p.v5t(e):p&&(g.push(p),p=null,m=!1)}p&&(g.push(p),p=null,m=!1)}let y=g.length;for(let t=0;t<y;++t){const s=g[t];if(s.G5t())continue;const i=s.KNt();for(let s=t+1;s<y;++s){const t=g[s],e=t.KNt();e.Qa()<i.sl()||e.Qa()>i.sl()||e.tl()>i.tl()||e.Za()>i.Za()||t.G5t()||e.Za()===i.Za()&&e.tl()===i.tl()&&(g.splice(s,1),--y,i.Ya(i.sl()+h),--s)}}this.I5t=!0}W2t(t,s,i){this.x5t[s][t]!==i&&(this.x5t[s][t]=i,this.I5t=!1,this.qFt.z2t())}X2t(){return this.x5t}r3t(){return this._5t}hx(t,s,i,e){const h=this.qFt,n=this.T5t;for(let r=0,o=n.length;r<o;++r)n[r].hx(t,s,i,e,h)}}}{const aM=self._s,lM=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);aM.MW.K1t.C3t=class{constructor(t,s){this.qFt=t,this.bRt=s,this.C5t=[null,null,null],this.R5t=[aM.MW.K1t.A5t,aM.MW.K1t.P5t,aM.MW.K1t.E5t],this.F5t=new aM._c}get D5t(){return lM}get O5t(){return-999}get k5t(){return-998}get L5t(){return-1}get N5t(){return 0}get B5t(){return 1}W5t(){return this.qFt}CTt(){return this.bRt}j5t(){return this.F5t}l5t(t){return this.I3t(t)?this.V5t(t):0}c5t(t){return this.I3t(t)?this.U5t(t):0}B3t(t,s,i){this.I3t(i)&&(this.H5t(i,0),this.z5t(t,s,this.J5t(t,s,i)))}U3t(t,s,i){this.I3t(i)&&(this.H5t(i,1),this.X5t(t,s),this.z5t(t,s,this.J5t(t,s,i)))}W3t(t,s,i,e,h,n,r){this.I3t(i)&&(this.H5t(i,0),this.q5t(t,s,i,this.J5t(t,s,i),e,h,n,r,0))}H3t(t,s,i,e,h,n){this.I3t(i)&&(this.H5t(i,1),this.q5t(t,s,i,this.J5t(t,s,i),e,h,n,0,1))}N3t(t){return this.Y5t(t)}I3t(t){return!!this.CTt().y2t(t)}$5t(t,s){return this.W5t().V2t(t,s)}K5t(t,s,i){this.W5t().W2t(t,s,i)}X5t(t,s){this.W5t().W2t(t,s,-1)}z5t(t,s,i){i&&(this.K5t(t-1,s-1,i[0][0]),this.K5t(t,s-1,i[1][0]),this.K5t(t+1,s-1,i[2][0]),this.K5t(t-1,s,i[0][1]),this.K5t(t,s,i[1][1]),this.K5t(t+1,s,i[2][1]),this.K5t(t-1,s+1,i[0][2]),this.K5t(t,s+1,i[1][2]),this.K5t(t+1,s+1,i[2][2]))}q5t(t,s,i,e,h=!1,n=!1,r=0,o=0,a=0){if(!e)return;const l=(e=this.Z5t(e,i,h,n,r,o,a))[0].length,u=e.length;for(let i=0;i<u;i++)for(let h=0;h<l;h++)if(e[i][h]!==this.O5t)switch(o){case 0:e[i][h]===this.L5t?this.X5t(t+h,s+i):this.K5t(t+h,s+i,e[i][h]);break;case 1:-1!==e[i][h]&&this.K5t(t+h,s+i,e[i][h])}}Y5t(t){return this.CTt().y2t(t).type}Q5t(t){const s=this.Y5t(t);this.C5t[s]||(this.C5t[s]=new this.R5t[s](this))}H5t(t,s){this.Q5t(t);const i=this.Y5t(t);this.C5t[i]&&this.C5t[i].t4t(s)}s4t(t){this.Q5t(t);const s=this.Y5t(t);if(this.C5t[s])return this.C5t[s].i4t()}J5t(t,s,i){this.Q5t(i);const e=this.CTt().y2t(i);if(this.C5t[e.type])return this.C5t[e.type].e4t(t,s,e)}Z5t(t,s,i=!1,e=!1,h=0,n=0,r=0){this.Q5t(s);const o=this.CTt().y2t(s);if(this.C5t[o.type])return this.C5t[o.type].h4t(t,i,e,h,n,r)}V5t(t){this.Q5t(t);const s=this.CTt().y2t(t);if(this.C5t[s.type])return this.C5t[s.type].l5t(s)}U5t(t){this.Q5t(t);const s=this.CTt().y2t(t);if(this.C5t[s.type])return this.C5t[s.type].c5t(s)}}}self._s.MW.K1t.n4t=class{constructor(t){this.Vp=t}r4t(t,s,i){const e=this.Vp.$5t(t,s);return!!this.o4t(e,!0,e,i)}o4t(t,s,i,e){return t===this.Vp.L5t?0:s&&t===this.Vp.k5t?1:s&&e&&!this.a4t(i,e)?0:1}l4t(t,s,i,e){const h=e.u2t[t];if(!h.length)return this.Vp.L5t;if(1===h.length)return h[0][0];const n=this.Vp.$5t(s,i);if(this.o4t(n)&&h.some(t=>n===t[0]))return n;const r=this.Vp.j5t();r.Ru();for(let[t,s]of h)t>this.Vp.W5t().g2t()||("number"!=typeof s&&(s=1),r.Fc(s,t));return r.Pc()}a4t(t,s){for(const i of s.u2t)for(const[s]of i)if(s===t)return!0;return!1}};{const uM=self._s;uM.MW.K1t.A5t=class{constructor(t){this.Vp=t,this.u4t=new uM.MW.K1t.n4t(t),this.c4t=t.N5t}t4t(t){this.c4t=t}i4t(){return this.c4t}l5t(t){return 0}c5t(t){return 0}h4t(t,s=!1,i=!1,e=0,h=0,n=0){return t}e4t(t,s,i){return this.f4t(t,s,i)}f4t(t,s,i){const e=this.c4t===this.Vp.N5t?this.d4t(t,s,void 0,i):this.Vp.L5t,h=this.p4t(t,s-1,"s",i),n=this.p4t(t-1,s,"e",i),r=this.p4t(t+1,s,"w",i),o=this.p4t(t,s+1,"n",i),a=this.Vp.D5t;return a[0][0]=this.Vp.O5t,a[1][0]=this.m4t(h,t,s-1,i),a[2][0]=this.Vp.O5t,a[0][1]=this.m4t(n,t-1,s,i),a[1][1]=this.m4t(e,t,s,i),a[2][1]=this.m4t(r,t+1,s,i),a[0][2]=this.Vp.O5t,a[1][2]=this.m4t(o,t,s+1,i),a[2][2]=this.Vp.O5t,a}p4t(t,s,i,e){return this.u4t.r4t(t,s,e)?this.d4t(t,s,i,e):this.Vp.O5t}d4t(t,s,i,e){this.c4t===this.Vp.B5t&&(i=void 0);const h=this.Vp.$5t(t,s-1),n=this.Vp.$5t(t-1,s),r=this.Vp.$5t(t+1,s),o=this.Vp.$5t(t,s+1),a="n"===i?this.Vp.k5t:h,l="w"===i?this.Vp.k5t:n,u="e"===i?this.Vp.k5t:r,c="s"===i?this.Vp.k5t:o;return 1*this.u4t.o4t(a,!0,h,e)+2*this.u4t.o4t(l,!0,n,e)+4*this.u4t.o4t(u,!0,r,e)+8*this.u4t.o4t(c,!0,o,e)}m4t(t,s,i,e){return t===this.Vp.O5t||t===this.Vp.L5t?t:this.u4t.l4t(t,s,i,e)}}}{const cM=self._s,fM=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);cM.MW.K1t.P5t=class{constructor(t){this.Vp=t,this.u4t=new cM.MW.K1t.n4t(t),this.c4t=t.N5t}t4t(t){this.c4t=t}i4t(){return this.c4t}l5t(t){return 0}c5t(t){return 0}h4t(t,s=!1,i=!1,e=0,h=0,n=0){return t}e4t(t,s,i){return this.g4t(t,s,i)}g4t(t,s,i){const e=this.c4t===this.Vp.N5t?this.y4t(t,s,void 0,i):this.Vp.L5t,h=this.w4t(t-1,s-1,"se",i),n=this.w4t(t,s-1,"s",i),r=this.w4t(t+1,s-1,"sw",i),o=this.w4t(t-1,s,"e",i),a=this.w4t(t+1,s,"w",i),l=this.w4t(t-1,s+1,"ne",i),u=this.w4t(t,s+1,"n",i),c=this.w4t(t+1,s+1,"nw",i),f=this.Vp.D5t;return f[0][0]=this.S4t(h,t-1,s-1,i),f[1][0]=this.S4t(n,t,s-1,i),f[2][0]=this.S4t(r,t+1,s-1,i),f[0][1]=this.S4t(o,t-1,s,i),f[1][1]=this.S4t(e,t,s,i),f[2][1]=this.S4t(a,t+1,s,i),f[0][2]=this.S4t(l,t-1,s+1,i),f[1][2]=this.S4t(u,t,s+1,i),f[2][2]=this.S4t(c,t+1,s+1,i),f}w4t(t,s,i,e){return this.u4t.r4t(t,s,e)?this.y4t(t,s,i,e):this.Vp.O5t}y4t(t,s,i,e){this.c4t===this.Vp.B5t&&(i=void 0);const h=this.Vp.$5t(t,s-1),n=this.Vp.$5t(t-1,s),r=this.Vp.$5t(t+1,s),o=this.Vp.$5t(t,s+1),a=this.Vp.$5t(t-1,s-1),l=this.Vp.$5t(t+1,s-1),u=this.Vp.$5t(t-1,s+1),c=this.Vp.$5t(t+1,s+1),f="n"===i?this.Vp.k5t:h,d="w"===i?this.Vp.k5t:n,p="e"===i?this.Vp.k5t:r,m="s"===i?this.Vp.k5t:o,g="nw"===i?this.Vp.k5t:a,y="ne"===i?this.Vp.k5t:l,w="sw"===i?this.Vp.k5t:u,S="se"===i?this.Vp.k5t:c,b=this.u4t.o4t(f,!0,h,e),v=this.u4t.o4t(d,!0,n,e),M=this.u4t.o4t(p,!0,r,e),G=this.u4t.o4t(m,!0,o,e);return 1*(b&&v?this.u4t.o4t(g,!0,a,e):0)+2*b+4*(b&&M?this.u4t.o4t(y,!0,l,e):0)+8*v+16*M+32*(G&&v?this.u4t.o4t(w,!0,u,e):0)+64*G+128*(G&&M?this.u4t.o4t(S,!0,c,e):0)}S4t(t,s,i,e){return t===this.Vp.O5t||t===this.Vp.L5t?t:this.u4t.l4t(fM.get(t),s,i,e)}}}self._s.MW.K1t.E5t=class{constructor(t){this.Vp=t,this.c4t=t.N5t,this.b4t=0,this.v4t=0,this.M4t=0,this.G4t=0,this.x4t=0,this.T4t=0}t4t(t){this.c4t=t}i4t(){return this.c4t}l5t(t){return t.u2t[0].length}c5t(t){return t.u2t.length}h4t(t,s=!1,i=!1,e=0,h=0,n=0){switch(t=this._4t(0,0,e,t),this.G4t=this.b4t,this.x4t=this.v4t,this.T4t=this.M4t,this.M4t&&(t=this.I4t(t)),this.b4t&&(t=this.C4t(t,n===this.Vp.N5t)),this.v4t&&(t=this.R4t(t,n===this.Vp.N5t)),t=this._4t(s?1:0,i?1:0,0,t),e){case 0:this.G4t=this.b4t,this.x4t=this.v4t;break;case 1:this.G4t=1^this.b4t,this.x4t=this.v4t;break;case 2:this.G4t=1^this.b4t,this.x4t=1^this.v4t;break;case 3:this.G4t=this.b4t,this.x4t=1^this.v4t}return this.b4t&&(t=this.C4t(t,n===this.Vp.N5t)),this.v4t&&(t=this.R4t(t,n===this.Vp.N5t)),t}e4t(t,s,i){const e=i.u2t[0].length,h=i.u2t.length,n=Array.from({length:h},()=>new Array(e).fill(this.Vp.L5t)),r=this.Vp.j5t();r.Ru();for(let t=0;t<h;t++)for(let s=0;s<e;s++){const e=i.u2t[t][s];switch(this.c4t){case this.Vp.N5t:if(1===e.length){const i=e[0][0];if(i>this.Vp.W5t().g2t())continue;n[t][s]=i}else{for(let[t,s]of e)t>this.Vp.W5t().g2t()||("number"!=typeof s&&(s=1),r.Fc(s,t));n[t][s]=r.Pc()}break;case this.Vp.B5t:i.u2t[t][s][0][0]===this.Vp.L5t?n[t][s]=this.Vp.O5t:n[t][s]=this.Vp.L5t}}return n}_4t(t,s,i,e){switch(i){case 0:this.b4t=t,this.v4t=s,this.M4t=0;break;case 1:this.b4t=1^s,this.v4t=t,this.M4t=1;break;case 2:this.b4t=1^t,this.v4t=1^s,this.M4t=0;break;case 3:this.b4t=s,this.v4t=1^t,this.M4t=1}return e}A4t(t){if(t===this.Vp.O5t||t===this.Vp.L5t)return t;const s=globalThis.d3t;let i=t&s.i2t;return this.T4t&&(i|=s.t2t),this.G4t&&(i|=s.Z1t),this.x4t&&(i|=s.Q1t),i}C4t(t,s){for(let s=0;s<t.length;s++)t[s].reverse();if(s){let s=t[0].length,i=t.length;for(let e=0;e<i;e++)for(let i=0;i<s;i++){const s=this.A4t(t[e][i]);t[e][i]=s}}return t}R4t(t,s){if(t.reverse(),s){let s=t[0].length,i=t.length;for(let e=0;e<i;e++)for(let i=0;i<s;i++){const s=this.A4t(t[e][i]);t[e][i]=s}}return t}I4t(t){let s=[],i=t.length,e=t[0].length;for(let h=0;h<e;h++){let e=[];for(let s=0;s<i;s++)e.push(t[s][h]);s.push(e)}return s}};{const dM=self._s;dM.MW.P4t=class extends dM._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{const pM=self._s;pM.MW.P4t.BEt=class extends pM.dRt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){this.oq().RW(this.Nc)}E4(t){return this.oq().MK(t,{Mx:this.Nc.gN()})}B4(){this.oq().xA()}}}{let mM=function(t){return VM.get(t).E4t()};0;const gM=self._s,yM=self.Ls,wM=0,SM=1,bM=2,vM=3,MM=4,GM=5,xM=6,TM=7,_M=8,IM=9,CM=10,RM=11,AM=12,PM=13,EM=14,FM=15,DM=16,OM=17,kM=18,LM=19,NM=20,BM=0,WM=1,jM=gM.zh(gM.Rect);gM.MW.P4t.Instance=class extends gM.JRt{constructor(t,s){super(t),this.F4t=!0;const i=gM.zh(self.D4t);this.O4t=i,i.k4t=()=>this.L4t(),this.N4t=null,this.B4t=(t,s,i,e,h,n)=>this.W4t(t,s,i,e,h,n),this.j4t=t=>this.V4t(t),this.U4t=!0;let e=!0;s&&(i.H4t(s[wM]),i.z4t(gM.Qh(s[SM])),i.J4t(s[bM]?"one-shot":"continuous-spray"),this.X4t(this.Nc.x$(s[vM])),e=s[MM],i.q4t(s[GM]),i.Y4t(s[xM]),i.$4t(s[TM]/100),i.K4t(s[_M]),i.Z4t(s[IM]),i.Q4t(s[CM]),i.t6t(s[RM]),i.s6t(s[AM]),i.i6t(s[PM]),i.e6t(s[EM]),i.h6t(s[FM]),i.n6t(s[DM]),i.r6t(s[OM]),i.o6t(s[kM]),i.a6t(s[LM]),i.l6t(s[NM])),this.u6t(),this.N4t&&(this.U4t=!1),"one-shot"===i.c6t()?i.f6t():i.d6t(!0);const h=this.iW();h.NU(e),h.TLt(!0),this.fi.wf().addEventListener("bboxchange",()=>{h.xLt(this.O4t.rJ())}),this.AW().IM().fb()&&h.mLt(),this.A8=t=>this.P8(t),this.AW().wf().addEventListener("afterload",this.A8),this.LRt()}Jh(){this.AW().wf().removeEventListener("afterload",this.A8),this.A8=null,this.O4t.Jh(),this.O4t=null,this.B4t=null,this.j4t=null,super.Jh()}E4t(){return this.O4t}p6t(t){this.O4t.H4t(t),"one-shot"===this.O4t.c6t()&&this.F4t&&this.O4t.m6t(t)}X4t(t){t===this.EH()&&(t=null),t!==this.N4t&&(this.N4t=t,this.O4t.g6t=t?t=>this.y6t(t):null,this.N4t||(this.U4t=!0))}u6t(){const t=this.O4t,s=this.iW();t.w6t(s.NF()),t.WYt(this.Nc.TB()),t.S6t(s.rG()),t.b6t(s.lG()),t.v6t(s.tU()),t.M6t(Math.abs(s.Bkt()))}L4t(){this.Nc.NH(this.fi)}hx(t){if(!this.U4t)return;const s=this.zpt.oq(),i=s.kT();if(!i)return;const e=this.iW(),h=e.eW(),n=jM;this.Nc.XB().RVt()?n.set(-1/0,-1/0,1/0,1/0):h.A2()?h.f5(e.eJ(),n):h.d2(e.eJ(),n),t.UF(i);const r=h.m2(e.eJ());this.O4t.G6t(h.AH()*r),this.O4t.hx(t,s.hAt(),n,h.A2())}SG(){const t=this.O4t;return{r:t.x6t(),sc:t.T6t(),st:t.c6t(),isp:t._6t(),isz:t.I6t(),io:t.C6t(),gr:t.R6t(),xr:t.A6t(),yr:t.P6t(),spr:t.E6t(),szr:t.F6t(),grnd:t.D6t(),acc:t.O6t(),g:t.k6t(),lar:t.L6t(),lsr:t.N6t(),lor:t.B6t(),dm:t.W6t(),to:t.j6t(),s:t.V6t(),pcc:t.U6t(),ft:this.F4t,soc:this.N4t?this.N4t.J1():null,p:t.H6t().map(t=>t.toJSON())}}bG(t,s){const i=this.O4t;if(i.H4t(t.r),i.z4t(t.sc),i.J4t(t.st),i.q4t(t.isp),i.Y4t(t.isz),i.$4t(t.io),i.K4t(t.gr),i.Z4t(t.xr),i.Q4t(t.yr),i.t6t(t.spr),i.s6t(t.szr),i.i6t(t.grnd),i.e6t(t.acc),i.h6t(t.g),i.n6t(t.lar),i.r6t(t.lsr),i.o6t(t.lor),i.a6t(t.dm),i.l6t(t.to),i.d6t(t.s),i.z6t(t.pcc),this.F4t=t.ft,t.hasOwnProperty("soc")){const s=this.AW().x$(t.soc);s&&this.X4t(s)}const e=t.p;i.m6t(e.length,!1);const h=i.H6t();for(let t=0,s=h.length;t<s;++t)h[t].wa(e[t]);"state"===s&&this.N4t&&(i.J6t(),i.X6t(this))}P8(){const t=this.O4t;t.J6t(),t.X6t(this);const s=t.H6t();for(let t=0,i=s.length;t<i;++t){const i=s[t],e=i.q6t();if(!e)continue;const h=e.iW();if(!h)continue;const n=h.Yq();if(!n)continue;const r=i.Y6t(),o=n.zH();if(("number"!=typeof r||"number"!=typeof o||r!==o)&&"number"==typeof r){const t=this.AW(),s=t.KB(r);s&&t.NH(s)}}}P7(){const t=this.Nc.qN(this.fi);this.u6t(),this.F4t&&"one-shot"===this.O4t.c6t()&&this.O4t.$6t(),this.O4t.P7(t),this.O4t.V6t()&&this.Nc.lW(),this.iW().Uz(),this.F4t=!1}K6t(t){const s=1/60;for(this.F4t&&"one-shot"===this.O4t.c6t()&&this.O4t.$6t();t>0;)this.O4t.P7(s),t-=s;this.O4t.V6t()&&this.Nc.lW(),this.iW().Uz(),this.F4t=!1}y6t(t,s){let i;"number"==typeof s&&(i=this.Nc.KB(s)),i&&i.EH()!==this.N4t&&(i=null),i||(i=this.Nc.RV(this.N4t,this.iW().eW(),t.rG(),t.lG()));const e=i.iW();return e.hP(t.Fu(),t.Fu()),e.QV(t.tU()),e.WF(t.NF()),e.dJ(this.iW().fJ()),e.Uz(),e.vJ(this.Yq(),!0),i.n6(),t.Z6t(this.B4t),t.Q6t(this.j4t),i}W4t(t,s,i,e,h,n){if(t.jY())return;const r=t.iW();r.Xz(s,i),r.hP(r.My()+e,r.xy()+e),r.QV(r.tU()+h),r.WF(r.NF()+n),r.Uz()}V4t(t){t.jY()||this.Nc.NH(t)}_ot(t){const s=this.O4t;switch(t){case wM:return s.x6t();case SM:return gM.tn(s.T6t());case bM:return"one-shot"===s.c6t()?WM:BM;case GM:return s._6t();case xM:return s.I6t();case TM:return 100*s.C6t();case _M:return s.R6t();case IM:return s.A6t();case CM:return s.P6t();case RM:return s.E6t();case AM:return s.F6t();case PM:return s.D6t();case EM:return s.O6t();case FM:return s.k6t();case DM:return s.L6t();case OM:return s.N6t();case kM:return s.B6t();case LM:return s.W6t();case NM:return s.j6t()}}Eot(t,s){const i=this.O4t;switch(t){case wM:i.H4t(s);break;case SM:i.z4t(gM.Qh(s));break;case bM:i.J4t(s?"one-shot":"continuous-spray");break;case GM:i.q4t(s);break;case xM:i.Y4t(s);break;case TM:i.$4t(s/100);break;case _M:i.K4t(s);break;case IM:i.Z4t(s);break;case CM:i.Q4t(s);break;case RM:i.t6t(s);break;case AM:i.s6t(s);break;case PM:i.i6t(s);break;case EM:i.e6t(s);break;case FM:i.h6t(s);break;case DM:i.n6t(s);break;case OM:i.r6t(s);break;case kM:i.o6t(s);break;case LM:i.a6t(s);break;case NM:i.l6t(s)}}jRt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.O4t;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.t8t()},{name:s+".type.name",value:[s+".type.items."+e.c6t()]},{name:i+".is-spraying",value:e.V6t(),oQt:t=>e.d6t(t)},{name:s+".rate.name",value:e.x6t(),oQt:t=>e.H4t(t)},{name:s+".spray-cone.name",value:gM.tn(e.T6t()),oQt:t=>e.z4t(gM.Qh(t))},{name:s+".speed.name",value:e._6t(),oQt:t=>e.q4t(t)},{name:s+".size.name",value:e.I6t(),oQt:t=>e.Y4t(t)},{name:s+".opacity.name",value:e.C6t(),oQt:t=>e.$4t(t)},{name:s+".grow-rate.name",value:e.R6t(),oQt:t=>e.K4t(t)},{name:s+".x-randomiser.name",value:e.A6t(),oQt:t=>e.Z4t(t)},{name:s+".y-randomiser.name",value:e.P6t(),oQt:t=>e.Q4t(t)},{name:s+".initial-speed-randomiser.name",value:e.E6t(),oQt:t=>e.t6t(t)},{name:s+".size-randomiser.name",value:e.F6t(),oQt:t=>e.s6t(t)},{name:s+".grow-rate-randomiser.name",value:e.D6t(),oQt:t=>e.i6t(t)},{name:s+".acceleration.name",value:e.O6t(),oQt:t=>e.e6t(t)},{name:s+".gravity.name",value:e.k6t(),oQt:t=>e.h6t(t)},{name:s+".angle-randomiser.name",value:e.L6t(),oQt:t=>e.n6t(t)},{name:s+".life-speed-randomiser.name",value:e.N6t(),oQt:t=>e.r6t(t)},{name:s+".opacity-randomiser.name",value:e.B6t(),oQt:t=>e.o6t(t)},{name:s+".timeout.name",value:e.j6t(),oQt:t=>e.l6t(t)}]}]}ZCt(){return self.s8t}};const VM=new WeakMap;self.s8t=class extends self.yX{constructor(){super(),VM.set(this,self.PH.OH().MX())}set i8t(t){mM(this).d6t(!!t)}get i8t(){return mM(this).V6t()}set rate(t){yM.ne(t),VM.get(this).p6t(t)}get rate(){return mM(this).x6t()}set e8t(t){yM.ne(t),mM(this).z4t(t)}get e8t(){return mM(this).T6t()}set h8t(t){yM.ne(t),mM(this).q4t(t)}get h8t(){return mM(this)._6t()}set n8t(t){yM.ne(t),mM(this).Y4t(t)}get n8t(){return mM(this).I6t()}set r8t(t){yM.ne(t),mM(this).$4t(t)}get r8t(){return mM(this).C6t()}set o8t(t){yM.ne(t),mM(this).Z4t(t)}get o8t(){return mM(this).A6t()}set a8t(t){yM.ne(t),mM(this).Q4t(t)}get a8t(){return mM(this).P6t()}set l8t(t){yM.ne(t),mM(this).t6t(t)}get l8t(){return mM(this).E6t()}set u8t(t){yM.ne(t),mM(this).s6t(t)}get u8t(){return mM(this).F6t()}set c8t(t){yM.ne(t),mM(this).K4t(t)}get c8t(){return mM(this).R6t()}set f8t(t){yM.ne(t),mM(this).i6t(t)}get f8t(){return mM(this).D6t()}set acceleration(t){yM.ne(t),mM(this).e6t(t)}get acceleration(){return mM(this).O6t()}set d8t(t){yM.ne(t),mM(this).h6t(t)}get d8t(){return mM(this).k6t()}set p8t(t){yM.ne(t),mM(this).n6t(t)}get p8t(){return mM(this).L6t()}set m8t(t){yM.ne(t),mM(this).r6t(t)}get m8t(){return mM(this).N6t()}set g8t(t){yM.ne(t),mM(this).o6t(t)}get g8t(){return mM(this).B6t()}set timeout(t){yM.ne(t),mM(this).l6t(t)}get timeout(){return mM(this).j6t()}y8t(t){yM.ne(t),VM.get(this).K6t(t)}w8t(t){const s=VM.get(this);t?s.X4t(s.AW().oj(t)):s.X4t(null)}}}self._s.MW.P4t.bW={V6t(){return this.O4t.V6t()}};{const UM=self._s;UM.MW.P4t.Urt={d6t(t){this.O4t.d6t(0!==t)},H4t(t){this.p6t(t)},S8t(t){this.X4t(t)},b8t(){this.X4t(null)},z4t(t){this.O4t.z4t(UM.Qh(t))},q4t(t){this.O4t.q4t(t)},Y4t(t){this.O4t.Y4t(t)},$4t(t){this.O4t.$4t(t/100)},K4t(t){this.O4t.K4t(t)},v8t(t){this.O4t.Z4t(t)},M8t(t){this.O4t.Q4t(t)},G8t(t){this.O4t.t6t(t)},x8t(t){this.O4t.s6t(t)},T8t(t){this.O4t.i6t(t)},_8t(t){this.O4t.e6t(t)},h6t(t){this.O4t.h6t(t)},I8t(t){this.O4t.n6t(t)},C8t(t){this.O4t.r6t(t)},R8t(t){this.O4t.o6t(t)},l6t(t){this.O4t.l6t(t)},A8t(t){this.K6t(t)},UQt(t){this.iW().YM(t),this.Nc.lW()}}}{const HM=self._s;HM.MW.P4t.Hrt={P8t(){return this.O4t.t8t()},E8t(){return this.O4t.x6t()},F8t(){return HM.tn(this.O4t.T6t())},D8t(){return this.O4t._6t()},O8t(){return this.O4t.I6t()},k8t(){return 100*this.O4t.C6t()},L8t(){return this.O4t.R6t()},N8t(){return this.O4t.A6t()},B8t(){return this.O4t.P6t()},W8t(){return this.O4t.F6t()},j8t(){return this.O4t.E6t()},V8t(){return this.O4t.D6t()},U8t(){return this.O4t.O6t()},H8t(){return this.O4t.k6t()},z8t(){return this.O4t.L6t()},J8t(){return this.O4t.N6t()},X8t(){return this.O4t.B6t()},q8t(){return this.O4t.j6t()}}}{const zM=self._s,JM=[],XM=new Set(["continuous-spray","one-shot"]),qM=["fade-to-invisible","timeout-expired","particle-stopped"],YM=zM.zh(zM.Rect);self.D4t=class{constructor(){this.Y8t=0,this.$8t=0,this.K8t="continuous-spray",this.Z8t=!1,this.Q8t=0,this.t7t=!1,this.s7t=0,this.i7t=0,this.e7t=0,this.h7t=0,this.n7t=0,this.r7t=1,this.o7t=0,this.a7t=0,this.l7t=0,this.u7t=0,this.c7t=0,this.f7t=0,this.d7t=0,this.p7t=0,this.m7t=0,this.g7t=0,this.y7t=0,this.w7t=0,this.S7t=0,this.kf=0,this.b7t=0,this.v7t=1,this.k4t=null,this.g6t=null,this.M7t=[],this.lkt=new zM.Rect,this.HM=new zM.Go,this.ak=globalThis.devicePixelRatio||1}Jh(){this.Wf(),zM.Sr(this.M7t),this.M7t=null,this.k4t=null,this.g6t=null,this.lkt=null,this.HM=null}Wf(){const t=this.M7t;for(let s=0,i=t.length;s<i;++s)t[s].wIt();zM.Fh(JM,t),zM.Sr(t),JM.length>1e3&&zM.wr(JM,1e3),this.Z8t=!1}f6t(){for(let t=0,s=this.Y8t;t<s;++t)this.G7t();this.M7t.length&&(this.Z8t=!0)}G7t(t=!0){let s=null;return JM.length?(s=JM.pop(),s.x7t(this)):s=zM.zh(self.T7t,this),this.M7t.push(s),t?s.oDt(this.g6t):s.oDt(),s}$6t(){const t=this.M7t,s=this.g6t;for(let i=0,e=t.length;i<e;++i)t[i].oDt(s)}J6t(){const t=this.M7t,s=this.g6t;for(let i=0,e=t.length;i<e;++i)t[i]._7t(s)}X6t(t){const s=this.M7t;for(let i=0,e=s.length;i<e;++i){const e=s[i],h=e.q6t();if(h){const s=h.iW();s.oG(e.rG()),s.uG(e.lG()),s.hP(e.Fu(),e.Fu()),s.WF(e.NF()),s.QV(e.tU()),s.dJ(t.iW().fJ()),s.Uz()}}}m6t(t,s=!0){const i=this.M7t;if(t<i.length){const s=i.length-t;for(let t=0;t<s;++t){const t=i.pop();t.wIt(),JM.push(t)}JM.length>1e3&&zM.wr(JM,1e3)}else if(t>i.length){const e=t-i.length;for(let t=0;t<e;++t)this.G7t(s)}}H6t(){return this.M7t}t8t(){return this.M7t.length}P7(t){this.I7t(t),this.C7t(t),this.R7t()}I7t(t){if("continuous-spray"===this.K8t&&this.Z8t){this.b7t+=t*this.Y8t;const s=Math.floor(this.b7t);this.b7t-=s;for(let t=0;t<s;++t)this.G7t()}}z6t(t){this.b7t=t}U6t(){return this.b7t}C7t(t){const s=this.lkt;s.set(this.s7t,this.i7t,this.s7t,this.i7t);const i=this.M7t;let e=0;for(let h=0,n=i.length;h<n;++h){const n=i[h];i[e]=n,n.P7(t),n.WSt()?(++e,s._l(n.rJ())):(n.wIt(),JM.push(n))}zM.wr(i,e),JM.length>1e3&&zM.wr(JM,1e3)}R7t(){"one-shot"===this.K8t&&0===this.M7t.length&&this.Z8t&&(this.k4t&&this.k4t(),this.Z8t=!1)}hx(t,s,i,e){this.ak=globalThis.devicePixelRatio||1,YM.set(s.Nn(),s.Bn(),s.Vn(),s.Un()),t.oD(YM),this.HM.m(t.VF());const h=this.M7t;for(let n=0,r=h.length;n<r;++n){const r=h[n];i.Ml(r.rJ())&&r.hx(t,s,e)}t.aD()}VF(){return this.HM}H4t(t){this.Y8t=+t}x6t(){return this.Y8t}z4t(t){this.$8t=+t}T6t(){return this.$8t}J4t(t){if(!XM.has(t))throw new Error("invalid spray type");this.K8t=t}c6t(){return this.K8t}d6t(t){this.Z8t=!!t}V6t(){return this.Z8t}w6t(t){this.Q8t=+t}A7t(){return this.Q8t}WYt(t){this.t7t=!!t}P7t(){return this.t7t}S6t(t){this.s7t=+t}E7t(){return this.s7t}b6t(t){this.i7t=+t}F7t(){return this.i7t}v6t(t){this.e7t=+t}D7t(){return this.e7t}q4t(t){this.h7t=+t}_6t(){return this.h7t}Y4t(t){this.n7t=+t}I6t(){return this.n7t}M6t(t){this.r7t=+t}O7t(){return this.r7t}$4t(t){this.o7t=+t}C6t(){return this.o7t}K4t(t){this.a7t=+t}R6t(){return this.a7t}Z4t(t){this.l7t=+t}A6t(){return this.l7t}Q4t(t){this.u7t=+t}P6t(){return this.u7t}t6t(t){this.c7t=+t}E6t(){return this.c7t}s6t(t){this.f7t=+t}F6t(){return this.f7t}i6t(t){this.d7t=+t}D6t(){return this.d7t}e6t(t){this.p7t=+t}O6t(){return this.p7t}h6t(t){this.m7t=+t}k6t(){return this.m7t}n6t(t){this.g7t=+t}L6t(){return this.g7t}r6t(t){this.y7t=+t}N6t(){return this.y7t}o6t(t){this.w7t=+t}B6t(){return this.w7t}k7t(t){let s=qM.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.S7t=s}a6t(t){this.k7t(qM[t])}L7t(){return qM[this.S7t]}W6t(){return this.S7t}l6t(t){this.kf=+t}j6t(){return this.kf}G6t(t){this.v7t=+t}N7t(){return this.v7t}rJ(){return this.lkt}Pj(){return this.ak}}}{let $M=function(t){return Math.random()*t-t/2};0;const KM=self._s,ZM=(self.D4t,new KM.Cl),QM=new KM.Go;let tG=!1;self.T7t=class{constructor(t){this.B7t=t,this.Nf=!1,this.Ra=0,this.Aa=0,this._Pt=0,this._0=0,this.W7t=1,this.j7t=0,this.V7t=0,this.cQ=0,this.U7t=0,this.H7t=0,this.z7t=0,this.uu=new KM.Rect,this.J7t=null,this.X7t=NaN,this.q7t=null,this.Y7t=null}x7t(t){this.B7t=t}oDt(t){const s=this.B7t;this.Nf=!0,this.Ra=s.E7t()+$M(s.A6t()),this.Aa=s.F7t()+$M(s.P6t()),this._Pt=s._6t()+$M(s.E6t()),this._0=s.D7t()+$M(s.T6t()),this.W7t=s.C6t(),this.j7t=this.W7t,this.cQ=(s.I6t()+$M(s.F6t()))*s.O7t(),this.U7t=this.cQ/2,this.V7t=s.R6t()+$M(s.D6t()),this.H7t=0,this.z7t=0,this.$7t(),t?this.J7t||(this.J7t=t(this)):(this.J7t=null,this.q7t=null,this.Y7t=null)}_7t(t){t?this.J7t&&!this.J7t.jY()||(this.J7t=t(this,this.X7t)):(this.J7t=null,this.q7t=null,this.Y7t=null)}Z6t(t){this.q7t=t}Q6t(t){this.Y7t=t}wIt(){const t=this.Y7t;t&&t(this.J7t),this.J7t=null,this.q7t=null,this.Y7t=null}toJSON(){let t;return this.J7t&&this.J7t.iW()&&(t=this.J7t.iW().Yq().zH()),[this.Ra,this.Aa,this._Pt,this._0,this.W7t,this.V7t,this.cQ,this.H7t,this.z7t,t]}wa(t){this.Ra=t[0],this.Aa=t[1],this._Pt=t[2],this._0=t[3],this.W7t=t[4],this.j7t=this.W7t,this.V7t=t[5],this.cQ=t[6],this.H7t=t[7],this.z7t=t[8],this.X7t=t[9],this.U7t=this.cQ/2,this.$7t()}P7(t){const s=this.B7t,i=this._Pt*t,e=this._0,h=Math.cos(e)*i,n=Math.sin(e)*i+this.H7t*t;this.Ra+=h,this.Aa+=n;const r=this.V7t*t;this.cQ+=r,this.U7t=this.cQ/2,this._Pt+=s.O6t()*t,this.H7t+=s.k6t()*t,this.z7t+=t,this.$7t();const o=s.L6t(),a=s.N6t(),l=s.B6t();let u=0;0!==o&&(u=$M(o*t),this._0+=u),0!==a&&(this._Pt+=$M(a*t)),0!==l&&(this.W7t=KM.Kh(this.W7t+$M(l*t),0,1));const c=this.cQ>=1&&(2===s.W6t()?this._Pt>0:this.z7t<s.j6t()),f=this.q7t;if(f&&c){let t=s.A7t()*this.W7t;0===s.W6t()&&(t*=1-this.z7t/s.j6t());const i=t-this.j7t;this.j7t=t,f(this.J7t,h,n,r,u,i)}this.Nf=c}WSt(){return this.Nf}rJ(){return this.uu}$7t(){const t=this.Ra,s=this.Aa,i=this.U7t;this.uu.set(t-i,s-i,t+i,s+i)}hx(t,s,i){if(this.J7t)return;const e=this.B7t;let h=e.A7t()*this.W7t;if(0===e.W6t()&&(h*=1-this.z7t/e.j6t()),h<=0)return;const n=this.cQ,r=n*e.N7t()*e.Pj();if(r<1)return;let o=this.Ra,a=this.Aa;e.P7t()&&(o=o+.5|0,a=a+.5|0),t.fb()?t.lD(o,a,n,h):i||r>t.JD()||r<t.zD()?(QM.m(e.VF()),QM.$o(h),t.$M(QM),tG=!0,ZM.Yl(this.uu),t.sD(ZM,s)):(tG&&(t.$M(e.VF()),tG=!1),t.lD(o,a,r,h))}q6t(){return this.J7t}Y6t(){return this.X7t}rG(){return this.Ra}lG(){return this.Aa}Fu(){return this.cQ}tU(){return this._0}NF(){return this.W7t}}}{const sG=self._s;sG.MW.K7t=class extends sG._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{const iG=self._s;iG.MW.K7t.BEt=class extends iG.dRt{constructor(t){super(t),this.Z7t=iG.zh(self.Q7t)}Jh(){super.Jh()}KCt(){this.oq().RW(this.Nc)}E4(t){return this.oq().MK(t,{Mx:this.Nc.gN()})}B4(){this.oq().xA()}t9t(){return this.Z7t}s9t(t,s,i,e){const h=this.oq(),n=this.Z7t;n.hy(h.My()),n.ny(h.xy()),n.i9t(t),n.e9t(s),n.h9t(i),n.n9t(e),n.r9t()}}}{const eG=self._s,hG=self.Ls,nG=eG.zh(eG.Ca),rG=0,oG=1,aG=2,lG=3,uG=4,cG=5,fG=6,dG=7,pG=8,mG=9,gG=10,yG=11,wG=14,SG=["left","center","right"],bG=["top","center","bottom"],vG=["word","cjk","character"];eG.MW.K7t.Instance=class extends eG.JRt{constructor(t,s){super(t),this.Bc="",this.o9t=!0,this.a9t=16,this.l9t=16,this.u9t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";this.c9t=1,this.f9t=0,this.kR=0,this.HR=0,this.zR=0,this.qR="word",this.d9t=!0,this.p9t=!1,this.m9t=null,this.g9t=null,this.y9t=-1,this.w9t=-1,this.S9t=0,s&&(this.Bc=s[0],this.o9t=s[1],this.a9t=s[2],this.l9t=s[3],this.u9t=s[4],i=s[5],this.c9t=s[6],this.f9t=s[7],this.kR=s[8],this.HR=s[9],this.zR=s[10],this.qR=vG[s[11]],this.iW().NU(s[12]),this.p9t=!!s[wG]),this.bRt.s9t(this.a9t,this.l9t,this.u9t,i),this.g9t=eG.zh(self.b9t,this.bRt.t9t());const e=this.iW();this.g9t.hP(e.My(),e.xy()),this.v9t(),this.M9t(),this.fi.SDt()}Jh(){this.G9t(),this.m9t&&(this.m9t.Jh(),this.m9t=null),this.g9t.Jh(),this.g9t=null,super.Jh()}v9t(){const t=this.g9t;t&&(t.AA(this.o9t),t.Vc(this.Bc),t.KA(this.qR),t.x9t(SG[this.HR]),t.T9t(bG[this.zR]),t._9t(this.f9t),t.kA(this.kR))}I9t(){const t=this.iW();this.g9t.hP(t.My(),t.xy()),this.g9t.KV(this.c9t)}M9t(){if(this.p9t){let t=this.Bc;this.o9t&&(t=eG.dh.Og(t)),this.m9t?this.m9t.Vc(t):this.m9t=eG.zh(eG.Lc,this.Nc,t)}else this.m9t&&(this.m9t.Jh(),this.m9t=null)}hx(t){const s=this.zpt.oq(),i=s.kT();if(!i)return;t.UF(i);const e=this.iW();let h=e.aJ();const n=this.g9t;n.KV(this.c9t),n.C9t(e.Bkt()),this.Nc.TB()&&(h=e.GLt(h)),n.hP(e.My(),e.xy()),n.t9t().R9t(s.kP()),n.$M(e.fJ()),n.hx(t,h.Nn(),h.Bn(),e.tU()),this.d9t=!1}SG(){const t={t:this.Bc,ebbc:this.o9t,csc:this.c9t,csp:this.f9t,lh:this.kR,ha:this.HR,va:this.zR,w:this.qR,cw:this.bRt.t9t().A9t(),ch:this.bRt.t9t().P9t(),cs:this.bRt.t9t().E9t(),sd:this.bRt.t9t().F9t()};return-1!==this.w9t&&(t.tw={st:this.y9t,en:this.w9t,l:this.S9t}),t}bG(t){if(this.G9t(),this.Bc=t.t,this.o9t=t.ebbc,this.c9t=t.csc,this.f9t=t.csp,this.kR=t.lh,this.HR=t.ha,this.zR=t.va,t.hasOwnProperty("w")){const s=t.w;this.qR="boolean"==typeof s?s?"word":"character":s}else this.qR="word";if(t.hasOwnProperty("tw")){const s=t.tw;this.y9t=s.st,this.w9t=s.en,this.S9t=t.l}const s=this.bRt.t9t();s.i9t(t.cw),s.e9t(t.ch),s.h9t(t.cs),s.n9t(t.sd),this.v9t(),this.M9t(),-1!==this.w9t&&this.LRt()}_ot(t){switch(t){case rG:return this.sP();case oG:return this.o9t;case aG:return this.bRt.t9t().A9t();case lG:return this.bRt.t9t().P9t();case uG:return this.bRt.t9t().E9t();case cG:return this.bRt.t9t().F9t();case fG:return this.D9t();case dG:return this.O9t();case pG:return this.k9t();case mG:return this.L9t();case gG:return this.N9t();case yG:return this.B9t()}}Eot(t,s){switch(t){case rG:this.W9t(s);break;case oG:if(this.o9t===!!s)return;this.o9t=!!s,this.v9t();break;case aG:this.bRt.t9t().i9t(s);break;case lG:this.bRt.t9t().e9t(s);break;case uG:this.bRt.t9t().h9t(s);break;case cG:this.bRt.t9t().n9t(s);break;case fG:this.j9t(s);break;case dG:this.V9t(s);break;case pG:this.U9t(s);break;case mG:this.H9t(s);break;case gG:this.z9t(s);break;case yG:this.J9t(s)}}W9t(t){this.Bc!==t&&(this.Bc=t,this.g9t.Vc(t),this.M9t(),this.Nc.lW())}sP(){return this.Bc}X9t(t,s){this.W9t(t),this.y9t=this.Nc.iB(),this.w9t=this.y9t+s/this.Yq().$H(),this.S9t=eG.Xm(eG.dh.Og(t)),this.g9t.VA(0),this.LRt()}G9t(){this.y9t=-1,this.w9t=-1,this.S9t=0,this.g9t.VA(-1),this.vRt()}q9t(){-1!==this.w9t&&(this.G9t(),this.pz(eG.MW.K7t.bW.Y9t),this.Nc.lW())}j9t(t){this.c9t!==t&&(this.c9t=t,this.g9t.KV(this.c9t),this.Nc.lW())}D9t(){return this.c9t}V9t(t){this.f9t!==t&&(this.f9t=t,this.g9t._9t(this.f9t),this.Nc.lW())}O9t(){return this.f9t}U9t(t){this.kR!==t&&(this.kR=t,this.g9t.kA(this.kR),this.Nc.lW())}k9t(){return this.kR}H9t(t){this.HR!==t&&(this.HR=t,this.v9t(),this.Nc.lW())}L9t(){return this.HR}z9t(t){this.zR!==t&&(this.zR=t,this.v9t(),this.Nc.lW())}N9t(){return this.zR}$9t(t){this.J9t(vG[t])}J9t(t){this.qR!==t&&(this.qR=t,this.v9t(),this.Nc.lW())}B9t(){return this.qR}K9t(t){this.p9t=!!t,this.M9t()}Z9t(){return this.p9t}Q9t(){return this.I9t(),this.g9t.rP()}tts(){return this.I9t(),this.g9t.aP()}sts(t,s){this.I9t();const i=this.iW();nG.set(t-i.rG(),s-i.lG()),nG.rotate(-i.tU()),nG.offset(i.My()*i.Yz(),i.xy()*i.Zz());const e=this.g9t.cP(nG.Fa(),nG.Oa());if(e){const t=e.iw("tag");if(t)return t.Rg}return""}its(t,s,i){const e=this.sts(s,i);return e&&eG.Ke(t,e)}ets(t,s){this.I9t(),s=Math.floor(s);const i=this.g9t.dP(t,s);if(!i)return null;const e=this.iW();return nG.set(i.Ky(),i.Qy()),nG.offset(-e.My()*e.Yz(),-e.xy()*e.Zz()),nG.rotate(e.tU()),nG.offset(e.rG(),e.lG()),{x:nG.Fa(),y:nG.Oa(),width:i.My(),height:i.xy()}}hts(t){return this.I9t(),this.g9t.pP(t)}P7(){const t=this.Nc.iB();if(t>=this.w9t)this.G9t(),this.pz(eG.MW.K7t.bW.Y9t),this.Nc.lW();else{let s=eG.gn(this.y9t,this.w9t,t,0,this.S9t);s=Math.floor(s),s!==this.g9t.UA()&&(this.g9t.VA(s),this.Nc.lW())}}jRt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.sP(),oQt:t=>this.W9t(t)},{name:t+".properties.scale.name",value:this.D9t(),oQt:t=>this.j9t(t)},{name:t+".properties.character-spacing.name",value:this.O9t(),oQt:t=>this.V9t(t)},{name:t+".properties.line-height.name",value:this.k9t(),oQt:t=>this.U9t(t)},{name:t+".debugger.text-width",value:this.Q9t()},{name:t+".debugger.text-height",value:this.tts()}]}]}ZCt(){return self.nts}};const MG=new WeakMap,GG=new Map([["left",0],["center",1],["right",2]]),xG=new Map([["top",0],["center",1],["bottom",2]]);self.nts=class extends self.yX{constructor(){super(),MG.set(this,self.PH.OH().MX())}get text(){return MG.get(this).sP()}set text(t){hG.le(t);const s=MG.get(this);s.G9t(),s.W9t(t)}rts(t,s){hG.le(t),hG.ne(s);const i=MG.get(this);i.G9t(),i.X9t(t,s)}ots(){MG.get(this).q9t()}set ats(t){hG.ne(t),MG.get(this).j9t(t)}get ats(){return MG.get(this).D9t()}set lts(t){hG.ne(t),MG.get(this).V9t(t)}get lts(){return MG.get(this).O9t()}set lineHeight(t){hG.ne(t),MG.get(this).U9t(t)}get lineHeight(){return MG.get(this).k9t()}set VK(t){hG.le(t);const s=GG.get(t);if(void 0===s)throw new Error("invalid mode");MG.get(this).H9t(s)}get VK(){return SG[MG.get(this).L9t()]}set verticalAlign(t){hG.le(t);const s=xG.get(t);if(void 0===s)throw new Error("invalid mode");MG.get(this).z9t(s)}get verticalAlign(){return bG[MG.get(this).N9t()]}set UK(t){if(!vG.includes(t))throw new Error("invalid mode");MG.get(this).J9t(t)}get UK(){return MG.get(this).B9t()}set uts(t){MG.get(this).K9t(!!t)}get uts(){return MG.get(this).Z9t()}get XK(){return MG.get(this).Q9t()}get qK(){return MG.get(this).tts()}cts(){const t=MG.get(this);return[t.Q9t(),t.tts()]}fts(t,s,i){return hG.le(t),hG.ne(s),hG.ne(i),MG.get(this).its(t,s,i)}dts(t,s){return hG.ne(t),hG.ne(s),MG.get(this).sts(t,s)}pts(t,s=0){return hG.le(t),hG.ne(s),MG.get(this).ets(t,s)}mts(t){return hG.le(t),MG.get(this).hts(t)}}}{const TG=self._s;TG.MW.K7t.bW={gts(t,s){return s?this.Bc===t:TG.Ke(this.Bc,t)},yts(){return-1!==this.w9t},Y9t:()=>!0,wts(t,s,i){return this.its(t,s,i)}}}self._s.MW.K7t.Urt={Vc(t){this.G9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.W9t(t.toString())},Sts(t){this.G9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),(t=t.toString())&&this.W9t(this.Bc+t)},bts(t,s){this.G9t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.X9t(t.toString(),s)},vts(){this.q9t()},KV(t){this.j9t(t)},Mts(t){this.V9t(t)},kA(t){this.U9t(t)},i9t(t,s){let i=!1;const e=this.bRt.t9t();for(const h of t)if(" "===h)e.Gts(s),i=!0;else{const t=e.xts(h);t&&(t.Tts(s),i=!0)}i&&e._ts(),this.Nc.lW()},UQt(t){this.iW().YM(t),this.Nc.lW()},Its(t){this.H9t(t)},Cts(t){this.z9t(t)},Rts(t){this.$9t(t)},Ats(t){this.K9t(t)}};{const _G=self._s;_G.MW.K7t.Hrt={Pts(t){const s=this.bRt.t9t().xts(t);return s?s.Ets():this.bRt.t9t().A9t()},Fts(){return this.l9t},Dts(){return this.c9t},Ots(){return this.f9t},kts(){return this.kR},Text(){return this.Bc},Lts(){return this.o9t?_G.dh.Og(this.Bc):this.Bc},Nts(){return this.Q9t()},Bts(){return this.tts()},Wts(t,s){return this.sts(t,s)},jts(t){return this.hts(t)},Vts(t,s){const i=this.ets(t,s);return i?i.x:0},Uts(t,s){const i=this.ets(t,s);return i?i.y:0},Hts(t,s){const i=this.ets(t,s);return i?i.width:0},zts(t,s){const i=this.ets(t,s);return i?i.height:0}}}{const IG=self._s;self.Jts=class{constructor(t,s,i,e){let h=t.A9t(),n=t.P9t();this.Z7t=t,this.Xts=s,this.qts=new IG.Rect(i,e,i+h,e+n),this.Yts=new IG.Rect,this.$ts=-1,this.Kts()}Jh(){this.Z7t=null,this.qts=null,this.Yts=null}Kts(){let t=this.Z7t.My(),s=this.Z7t.xy();this.Yts.m(this.qts),this.Yts.wt(t,s),this.Yts.Il(this.Z7t.kP())}t9t(){return this.Z7t}Zts(){return this.Xts}kP(){return this.Yts}Tts(t){this.$ts=t}Ets(){return this.$ts<0?this.Z7t.A9t():this.$ts}}}{let CG=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},RG=function(t){return LG||(LG=AG.uo(32,32).getContext("2d")),LG.fillStyle="#FFFFFF",LG.fillStyle=t,LG.fillStyle};0;const AG=self._s,PG=new AG.Rect,EG=new AG.Cl,FG=new AG.Go,DG=new Set(["left","center","right"]),OG=new Set(["top","center","bottom"]),kG=new Set(["word","cjk","character"]);let LG=null;self.b9t=class{constructor(t){this.Z7t=t,this.iA=0,this.eA=0,this.Bc="",this.WR=!1,this.JR=null,this.XR=AG.zh(AG.Xg),this.qR="word",this.$R=!1,this.KR=!1,this.HR="left",this.zR="top",this.T0=1,this.Qts=1,this.tss=0,this.kR=0,this.HM=AG.zh(AG.Go),this.tA=-1,this.sA=0,this.gA=t=>this.yA(t),this.Z7t.sss(this)}Jh(){this.Z7t.iss(this),this.HM=null,this.gA=null,this.XR.Ru(),this.XR=null,this.Z7t=null,this.JR=null}yA(t){if(t.Sy())return{width:0,height:0};const s=t.Jg(),i=t.iw("scale"),e=(i?parseFloat(i.Rg):this.T0)*this.Qts,h=t.iw("scalex"),n=(h?parseFloat(h.Rg):1)*e,r=t.iw("scaley"),o=(r?parseFloat(r.Rg):1)*e,a=this.Z7t.P9t()*o+this.kR,l=this.t9t(),u=l.A9t()*n,c=this.ess();if(l.hss()){let t=0,i=0;for(const e of s){let s=u;const h=l.xts(e);h?s=h.Ets()*n:" "===e&&(s=l.nss()*n),i+=s,++t}return{width:i+t*c,height:a}}{const t=s.length;return{width:u*t+Math.max(t,0)*c,height:a}}}RA(){this.KR=!0}PR(){this.RA(),this.$R=!0,this.XR.Ru()}hP(t,s){t<=0||s<=0||this.iA===t&&this.eA===s||(this.iA!==t?this.PR():this.RA(),this.iA=t,this.eA=s)}VA(t){this.tA=Math.floor(t)}UA(){return this.tA}cP(t,s){this.oP();const i=this.XR.Qg();for(const e of i)if(s>e.Qy()&&s<e.Qy()+e.xy())for(const s of e.kg())if(t>=s.Ky()&&t<s.Ky()+s.My())return s;return null}*fP(t){this.oP();const s=this.XR.Qg();for(const i of s)for(const s of i.kg()){const i=s.iw("tag");i&&AG.Ke(i.Rg,t)&&(yield s)}}dP(t,s){for(const i of this.fP(t)){if(0===s)return i;--s}return null}pP(t){let s=0;for(const i of this.fP(t))++s;return s}oP(){this.vP(),this.MP()}vP(){if(!this.$R)return;!this.WR||this.JR&&this.JR.toString()===this.Bc||(this.JR=new AG.dh(this.Bc,{pg:!0}));const t=-this.ess();this.XR.Xg(this.WR?this.JR.Ig():this.Bc,this.gA,this.iA,this.qR,t),this.$R=!1}MP(){this.KR&&(this.GP(),this.KR=!1)}GP(){let t=0;const s=this.kR,i=AG.Er(this.XR.Qg());for(const t of i){t.$y(NaN),t.Zy(NaN);for(const s of t.kg())s.$y(NaN),s.Zy(NaN)}const e=i.reduce((t,s)=>t+s.xy(),0)-s;"center"===this.zR?t=Math.max(Math.floor(this.eA/2-e/2),0):"bottom"===this.zR&&(t=Math.floor(this.eA-e));for(let e=0,h=i.length;e<h;++e){const h=i[e],n=h.xy();if(e>0&&t>this.eA-(n-s))break;t>=0&&this.RP(h,t),t+=n}}RP(t,s){let i=0;"center"===this.HR?i=Math.max(Math.floor((this.iA-t.My())/2),0):"right"===this.HR&&(i=Math.max(Math.floor(this.iA-t.My()),0)),t.$y(i),t.Zy(s);for(const e of t.kg())e.Sy()||(this.rss(e,i,s),i+=e.My())}rss(t,s,i){const e=t.iw("offsetx");s+=e?CG(e.Rg,t.xy()):0;const h=t.iw("offsety");i+=h?CG(h.Rg,t.xy()):0,t.$y(s),t.Zy(i)}hx(t,s,i,e){this.oP(),this.sA=0;const h=AG.Er(this.XR.Qg()),n=Math.sin(e),r=Math.cos(e);for(const e of h)this.oss(t,e,s,i,n,r)}oss(t,s,i,e,h,n){const r=s.Ky(),o=s.Qy();if(!Number.isFinite(r)||!Number.isFinite(o))return;const a=s.xy();for(const r of s.kg())this.EP(t,r,i,e,h,n,a)}EP(t,s,i,e,h,n,r){let o=s.Ky(),a=s.Qy();if(!Number.isFinite(o)||!Number.isFinite(a))return;let l=s.Jg(),u=s.My();if(-1!==this.tA){if(this.sA>=this.tA)return;this.sA+l.length>this.tA&&(l=l.slice(0,this.tA-this.sA),u=this.yA(s).width),this.sA+=l.length}const c=s.iw("background");if(AG.bm(l)&&!c||s.ew("hide"))return;const f=s.iw("scale"),d=(f?parseFloat(f.Rg):this.T0)*this.Qts,p=s.iw("scalex"),m=(p?parseFloat(p.Rg):1)*d,g=s.iw("scaley"),y=(g?parseFloat(g.Rg):1)*d,w=this.Z7t.P9t()*y;a+=r-this.kR-w;let S=1;const b=s.iw("opacity");b&&(S=parseFloat(b.Rg)/100),c&&(t.Cb(),FG.ua(RG(c.Rg)),FG.Oo(FG.Wo()*S*this.HM.Wo()),FG.Ko(),t.$M(FG),PG.set(o,a,o+u,a+w),PG.tl()>this.iA&&PG.qa(this.iA),EG.Kl(PG,h,n),EG.offset(i,e),t.Cl(EG),t.Mb());const v=s.iw("color");v?(FG.ua(RG(v.Rg)),FG.Oo(this.HM.Wo())):FG.m(this.HM),FG.Oo(FG.Wo()*S),FG.Ko(),t.$M(FG);const M=this.Z7t.A9t()*m,G=Math.abs(this.ess());for(const s of l){const r=this.Z7t.xts(s);if(r){const s=r.Ets()*m;if(o+s>this.iA+G+1e-5)return;PG.set(o,a,o+M,a+w),EG.Kl(PG,h,n),EG.offset(i,e),t.pv(EG,r.kP()),o+=s+this.tss}else o+=this.Z7t.nss()*m+this.tss}}t9t(){return this.Z7t}AA(t){t=!!t,this.WR!==t&&(this.WR=t,this.PR())}RR(){return this.WR}Vc(t){this.Bc!==t&&(this.Bc=t,this.PR())}KA(t){if(!kG.has(t))throw new Error("invalid word wrap mode");this.qR!==t&&(this.qR=t,this.PR())}x9t(t){if(!DG.has(t))throw new Error("invalid alignment");this.HR!==t&&(this.HR=t,this.RA())}T9t(t){if(!OG.has(t))throw new Error("invalid alignment");this.zR!==t&&(this.zR=t,this.RA())}KV(t){this.T0!==t&&(this.T0=t,this.PR())}ZV(){return this.T0}C9t(t){this.Qts!==t&&(this.Qts=t,this.PR())}Bkt(){return this.Qts}_9t(t){this.tss!==t&&(this.tss=t,this.PR())}ess(){return this.tss}kA(t){this.kR=t,this.PR()}LA(){return this.kR}WF(t){t=AG.Kh(t,0,1),this.HM.a=t}$M(t){this.HM.equals(t)||this.HM.m(t)}VF(){return this.HM}rP(){return this.oP(),this.XR.By()}aP(){this.oP();const t=this.Z7t.P9t()*this.T0,s=this.kR,i=t+s;return this.XR.ty()*i-s}}}{const NG=self._s,BG=(self.b9t,{width:256,height:256,ass:16,lss:16,characterSet:""});self.Q7t=class{constructor(t){if((t=Object.assign({},BG,t)).width<=0||t.height<=0||t.ass<=0||t.lss<=0)throw new Error("invalid size");this.jy=t.width,this.Vy=t.height,this.a9t=t.ass,this.l9t=t.lss,this.u9t=t.characterSet,this.uss="",this.css=null,this.fss=!1,this.dss=-1,this.Yts=new NG.Rect(0,0,1,1),this.pss=new Map,this.mss=!0,this.gss=new Set}Jh(){this.Yts=null,this.yss(),this.pss=null,this.gss&&this.gss.clear(),this.gss=null}yss(){for(let t of this.pss.values())t.Jh();this.pss.clear()}sss(t){this.gss.add(t)}iss(t){this.gss.delete(t)}r9t(){if(!this.mss)return;this.yss();let t=NG.zm(this.u9t),s=Math.floor(this.jy/this.a9t),i=s*Math.floor(this.Vy/this.l9t);for(let e=0,h=t.length;e<h&&!(e>=i);++e){let i=t[e];if(this.pss.has(i))continue;let h=e%s,n=Math.floor(e/s);this.pss.set(i,NG.zh(self.Jts,this,i,h*this.a9t,n*this.l9t))}if(this.fss=!1,this.dss=-1,Array.isArray(this.css))for(let t of this.css){if(!Array.isArray(t))continue;if(2!==t.length)continue;let s=t[0],i=t[1];if("number"==typeof s&&isFinite(s)&&"string"==typeof i&&s!==this.a9t)for(let t of i){let i=this.pss.get(t);i?(i.Tts(s),this.fss=!0):" "===t&&(this.dss=s,this.fss=!0)}}this.mss=!1;for(let t of this.gss)t.PR()}_ts(){this.fss=!0;for(const t of this.gss)t.PR()}xts(t){return this.r9t(),this.pss.get(t)||null}hss(){return this.fss}hy(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.jy!==t&&(this.jy=t,this.mss=!0)}My(){return this.jy}ny(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Vy!==t&&(this.Vy=t,this.mss=!0)}xy(){return this.Vy}R9t(t){if(!this.Yts.equals(t)){this.Yts.m(t);for(const t of this.pss.values())t.Kts()}}kP(){return this.Yts}i9t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.a9t!==t&&(this.a9t=t,this.mss=!0)}A9t(){return this.a9t}e9t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.l9t!==t&&(this.l9t=t,this.mss=!0)}P9t(){return this.l9t}h9t(t){this.u9t!==t&&(this.u9t=t,this.mss=!0)}E9t(){return this.u9t}n9t(t){if(this.uss!==t&&(this.uss=t,this.mss=!0,this.css=null,this.uss.length))try{this.css=JSON.parse(this.uss)}catch(t){this.css=null}}F9t(){return this.uss}Gts(t){t<0&&(t=-1),this.dss!==t&&(this.dss=t,this.dss>=0&&(this.fss=!0))}nss(){return this.dss<0?this.a9t:this.dss}}}{const WG=self._s;WG.MW.wss=class extends WG._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{const jG=self._s;jG.MW.wss.BEt=class extends jG.dRt{constructor(t){super(t),this.Sss=null,this.bss=16,this.vss=16,this.Mss=16,this.Gss=16,this.Hw=null}Jh(){this.B4(),super.Jh()}KCt(){this.oq().RW(this.Nc)}async E4(t){const s=this.oq();this.Hw=await s.GPt()}xss(){return!(this.Sss||!this.Hw)}Tss(){this.xss()&&(this.Sss=new self._ss(this.Nc),this.Sss.Iss(this.Hw,this.bss,this.vss,this.Mss,this.Gss))}B4(){this.Sss&&(this.Sss.Jh(),this.Sss=null)}Css(){this.B4()}Rss(){return this.Sss}Ass(t){t=Math.max(+t,0),this.bss!==t&&(this.bss=t,this.Css(),this.Nc.lW())}Pss(){return this.bss}Ess(t){t=Math.max(+t,0),this.vss!==t&&(this.vss=t,this.Css(),this.Nc.lW())}Fss(){return this.vss}Dss(t){t=Math.max(+t,0),this.Mss!==t&&(this.Mss=t,this.Css(),this.Nc.lW())}Oss(){return this.Mss}kss(t){t=Math.max(+t,0),this.Gss!==t&&(this.Gss=t,this.Css(),this.Nc.lW())}Lss(){return this.Gss}}}{const VG=globalThis._s,UG=globalThis.Ls,HG=0,zG=1,JG=2,XG=3,qG=4,YG=5,$G=6,KG=7,ZG=8,QG=10,tx=0,sx=1,ix=2,ex=4,hx=8,nx=VG.zh(VG.Rect),rx=VG.zh(VG.Rect),ox=VG.zh(VG.Cl);VG.MW.wss.Instance=class extends VG.JRt{constructor(t,s){super(t),this.bss=16,this.vss=16,this.Mss=16,this.Gss=16,this.Nss=1,this.Bss=1,this.GZt=1,this.xZt=1,this.Wss=1,this.EZt=null,this.jss=null,this.Vss=null,this.Uss=null,s&&(this.bss=s[HG],this.vss=s[zG],this.Mss=s[JG],this.Gss=s[XG],this.Nss=s[qG],this.Bss=s[YG],this.GZt=s[$G],this.xZt=s[KG],this.Wss=s[QG],this.iW().NU(!!s[ZG]));const i=this.bRt;i.xss()&&(i.Ass(this.bss),i.Ess(this.vss),i.Dss(this.Mss),i.kss(this.Gss),i.Tss())}Jh(){this.FZt(),super.Jh()}FZt(){this.Vss&&(this.Vss.Jh(),this.Vss=null),this.jss=null,this.EZt&&(this.EZt.Jh(),this.EZt=null)}Hss(t){this.Uss=t}hx(t){const s=this.iW(),i=s.aJ();this.zss(t,i.Nn(),i.Bn(),s.My(),s.xy())}zss(t,s,i,e,h){let n=null;if(this.EZt)this.Vss||(this.Vss=new globalThis._ss(this.Nc),this.Vss.Iss(this.jss,this.bss,this.vss,this.Mss,this.Gss)),n=this.Vss;else{const t=this.bRt;if(n=t.Rss(),!n&&(t.Ass(this.bss),t.Ess(this.vss),t.Dss(this.Mss),t.kss(this.Gss),t.Tss(),n=t.Rss(),!n))return}const r=this.iW(),o=r.My(),a=r.xy(),l=n.Jss(),u=n.Xss(),c=Math.min(this.Pss(),l),f=Math.min(this.Fss(),l),d=Math.min(this.Oss(),u),p=Math.min(this.Lss(),u),m=l-f,g=u-p,y=Math.min(this.Pss()*this.GZt,l),w=Math.min(this.Fss()*this.GZt,l),S=Math.min(this.Oss()*this.xZt,u),b=Math.min(this.Lss()*this.xZt,u),v=this.Wss,M=VG.Kh(o-y,0,v),G=VG.Kh(o-w,0,v),x=VG.Kh(a-S,0,v),T=VG.Kh(a-b,0,v),_=M/this.GZt,I=G/this.GZt,C=x/this.xZt,R=T/this.xZt,A=this.Nss,P=this.Bss,E=2===P?0:M,F=2===P?0:G,D=2===P?0:x,O=2===P?0:T;c>0&&d>0&&this.qss(t,n.kT(),sx|ix,0,0,c+_,d+C,s,i,y+M,S+x),0===A&&c>0&&g>d?this.Yss(t,n.$ss(),sx,s,i+S,y+E,h-S-b,0,0):1===A&&c>0&&g>d&&this.qss(t,n.kT(),sx,0,d,c,g-d,s,i+S,y,h-S-b),0===A&&d>0&&m>c?this.Yss(t,n.Kss(),ix,s+y,i,e-y-w,S+D,0,0):1===A&&d>0&&m>c&&this.qss(t,n.kT(),ix,c,0,m-c,d,s+y,i,e-y-w,S),g>d&&m>c&&(0===P?this.Yss(t,n.Zss(),tx,s+y,i+S,e-y-w,h-S-b,0,0):1===P&&this.qss(t,n.kT(),tx,c,d,m-c,g-d,s+y,i+S,e-y-w,h-S-b)),c>0&&p>0&&this.qss(t,n.kT(),sx|hx,0,g-R,c+_,p+R,s,i+h-b-T,y+M,b+T),f>0&&d>0&&this.qss(t,n.kT(),ex|ix,m-I,0,f+I,d+C,s+e-w-G,i,w+G,S+x),0===A&&p>0&&m>c?this.Yss(t,n.Qss(),hx,s+y,i+h-b-O,e-y-w,b+O,0,O):1===A&&p>0&&m>c&&this.qss(t,n.kT(),hx,c,g,m-c,p,s+y,i+h-b,e-y-w,b),0===A&&f>0&&g>d?this.Yss(t,n.tis(),ex,s+e-w-F,i+S,w+F,h-S-b,F,0):1===A&&f>0&&g>d&&this.qss(t,n.kT(),ex,m,d,f,g-d,s+e-w,i+S,w,h-S-b),f>0&&p>0&&this.qss(t,n.kT(),ex|hx,m-I,g-R,f+I,p+R,s+e-w-G,i+h-b-T,w+G,b+T)}qss(t,s,i,e,h,n,r,o,a,l,u){if(({sis:e,iis:h,eis:n,his:r,dx:o,dy:a,nis:l,ris:u}=this.ois(i,e,h,n,r,o,a,l,u)),l<=0||u<=0||!s)return;const c=s.My(),f=s.xy();if(t.UF(s),nx.set(o,a,o+l,a+u),rx.set(e/c,h/f,(e+n)/c,(h+r)/f),null===this.Uss){const s=this.iW(),i=s.aJ(),e=i.Nn(),h=i.Bn();nx.offset(-e,-h),ox.$l(nx,s.tU()),ox.offset(e,h),t.pv(ox,rx)}else this.Uss(nx,rx)}Yss(t,s,i,e,h,n,r,o,a){let l=0,u=0,c=0,f=0;if(({sis:l,iis:u,eis:c,his:f,dx:e,dy:h,nis:n,ris:r}=this.ois(i,l,u,c,f,e,h,n,r)),o-=l*this.GZt,a-=u*this.xZt,n<=0||r<=0||!s)return;const d=s.My(),p=s.xy();if(t.UF(s),nx.set(e,h,e+n,h+r),rx.set(-o/(d*this.GZt),-a/(p*this.xZt),(n-o)/(d*this.GZt),(r-a)/(p*this.xZt)),null===this.Uss){const s=this.iW(),i=s.aJ(),e=i.Nn(),h=i.Bn();nx.offset(-e,-h),ox.$l(nx,s.tU()),ox.offset(e,h),t.pv(ox,rx)}else this.Uss(nx,rx)}ois(t,s,i,e,h,n,r,o,a){const l=this.iW(),u=l.My(),c=l.xy(),f=this.GZt,d=this.xZt,p=this.Rss(),m=p.Jss(),g=p.Xss(),y=Math.min(this.Pss()*f,m),w=Math.min(this.Fss()*f,m),S=Math.min(this.Oss()*d,g),b=Math.min(this.Lss()*d,g);if(t&sx){const t=u-w-y;t<-y?o=0:t<0&&(e+=t/f,o+=t)}if(t&ix){const t=c-b-S;t<-S?a=0:t<0&&(h+=t/d,a+=t)}if(t&ex){const t=u-w;t<-w?o=0:t<0&&(e+=t/f,o+=t,s-=t/f,n-=t)}if(t&hx){const t=c-b;t<-b?a=0:t<0&&(h+=t/d,a+=t,i-=t/d,r-=t)}return{sis:s,iis:i,eis:e,his:h,dx:n,dy:r,nis:o,ris:a}}Rss(){return this.Vss||this.bRt.Rss()}Css(){this.EZt&&(this.Vss&&(this.Vss.Jh(),this.Vss=null),this.Nc.lW())}tAt(){return this.EZt||this.zpt.oq()}Ass(t){this.EZt||this.bRt.Ass(t),t=Math.max(+t,0),this.bss!==t&&(this.bss=t,this.Css())}Pss(){return this.EZt?this.bss:this.bRt.Pss()}Ess(t){this.EZt||this.bRt.Ess(t),t=Math.max(+t,0),this.vss!==t&&(this.vss=t,this.Css())}Fss(){return this.EZt?this.vss:this.bRt.Fss()}Dss(t){this.EZt||this.bRt.Dss(t),t=Math.max(+t,0),this.Mss!==t&&(this.Mss=t,this.Css())}Oss(){return this.EZt?this.Mss:this.bRt.Oss()}kss(t){this.EZt||this.bRt.kss(t),t=Math.max(+t,0),this.Gss!==t&&(this.Gss=t,this.Css())}Lss(){return this.EZt?this.Gss:this.bRt.Lss()}ais(t){this.Nss!==t&&(this.Nss=t,this.Nc.lW())}lis(){return this.Nss}uis(t){this.Bss!==t&&(this.Bss=t,this.Nc.lW())}cis(){return this.Bss}UZt(t){this.GZt!==t&&(this.GZt=t,this.Nc.lW())}HZt(){return this.GZt}zZt(t){this.xZt!==t&&(this.xZt=t,this.Nc.lW())}JZt(){return this.xZt}fis(t){this.Wss!==t&&(this.Wss=t,this.Nc.lW())}dis(){return this.Wss}_ot(t){switch(t){case HG:return this.Pss();case zG:return this.Fss();case JG:return this.Oss();case XG:return this.Lss();case $G:return this.HZt();case KG:return this.JZt()}}Eot(t,s){switch(t){case HG:this.Ass(s);break;case zG:this.Ess(s);break;case JG:this.Dss(s);break;case XG:this.kss(s);break;case $G:this.UZt(s);break;case KG:this.zZt(s)}}jRt(){const t="plugins.ninepatch.properties";return[{title:"plugins.ninepatch.name",properties:[{name:t+".left-margin.name",value:this.Pss(),oQt:t=>this.Ass(t)},{name:t+".right-margin.name",value:this.Fss(),oQt:t=>this.Ess(t)},{name:t+".top-margin.name",value:this.Oss(),oQt:t=>this.Dss(t)},{name:t+".bottom-margin.name",value:this.Lss(),oQt:t=>this.kss(t)},{name:t+".image-scale-x.name",value:100*this.HZt(),oQt:t=>this.UZt(t/100)},{name:t+".image-scale-y.name",value:100*this.JZt(),oQt:t=>this.zZt(t/100)}]}]}ZCt(){return globalThis.pis}};const ax=["tile","stretch"],lx=["tile","stretch","transparent"],ux=["exact","overlap"];globalThis.pis=class extends self.yX{#s;constructor(){super(),this.#s=globalThis.PH.OH().MX()}set leftMargin(t){UG.ne(t),this.#s.Ass(t)}get leftMargin(){return this.#s.Pss()}set rightMargin(t){UG.ne(t),this.#s.Ess(t)}get rightMargin(){return this.#s.Fss()}set topMargin(t){UG.ne(t),this.#s.Dss(t)}get topMargin(){return this.#s.Oss()}set bottomMargin(t){UG.ne(t),this.#s.kss(t)}get bottomMargin(){return this.#s.Lss()}set mis(t){const s=ax.indexOf(t);if(-1===s)throw new Error("invalid edge");this.#s.ais(s)}get mis(){return ax[this.#s.lis()]}set fill(t){const s=lx.indexOf(t);if(-1===s)throw new Error("invalid fill");this.#s.uis(s)}get fill(){return lx[this.#s.cis()]}set dQt(t){UG.ne(t),this.#s.UZt(t)}get dQt(){return this.#s.HZt()}set pQt(t){UG.ne(t),this.#s.zZt(t)}get pQt(){return this.#s.JZt()}set gis(t){const s=ux.indexOf(t);if(-1===s)throw new Error("invalid seams");this.#s.fis(s)}get gis(){return ux[this.#s.dis()]}async AQt(t){UG.Ne(t,Blob);const s=this.#s,i=s.AW(),e=VG.zh(VG.iPt);await e.gPt(i,t);const h=await e.GPt();s.Xh()?e.Jh():(s.FZt(),s.EZt=e,s.jss=h,i.lW())}}}self._s.MW.wss.bW={PQt:()=>!0,EQt:()=>!0};{const cx=self._s;cx.MW.wss.Urt={UQt(t){this.iW().YM(t),this.Nc.lW()},yis(t,s,i,e){this.Ass(t),this.Ess(s),this.Dss(i),this.kss(e)},wis(t){this.ais(t)},Sis(t){this.uis(t)},kQt(t){this.UZt(t/100)},LQt(t){this.zZt(t/100)},bis(t){this.fis(t)},async HQt(t){if(this.EZt&&this.EZt.jZ()===t)return;const s=this.Nc,i=cx.zh(cx.iPt);let e=null;try{if(await i.mPt(s,t),!i.mQ())throw new Error("image failed to load");if(this.Xh())return i.Jh(),null;e=await i.GPt()}catch(t){return console.error("Load image from URL failed: ",t),void(this.Xh()||this.pz(cx.MW.wss.bW.EQt))}this.Xh()?i.Jh():(this.FZt(),this.EZt=i,this.jss=e,s.lW(),await this.wW(cx.MW.wss.bW.PQt))}}}self._s.MW.wss.Hrt={vis(){return this.Pss()},Mis(){return this.Fss()},Gis(){return this.Oss()},xis(){return this.Lss()},YQt(){return 100*this.HZt()},$Qt(){return 100*this.JZt()}};{let fx=function(t){const s=dx.uo(t.width,t.height);return s.getContext("2d").drawImage(t,0,0),s};0;const dx=self._s;self._ss=class{constructor(t){this.Nc=t,this.Ax=null,this.Tis=null,this._is=null,this.Iis=null,this.Cis=null,this.Ris=null,this.SQ=0,this.bQ=0,this.oM=t.IM(),this.Pw=!1,this.CA=!1}Jh(){this.oM.DP()||(this.oM.AT(this.Ax),this.oM.AT(this.Tis),this.oM.AT(this._is),this.oM.AT(this.Iis),this.oM.AT(this.Cis),this.oM.AT(this.Ris)),this.Ax=null,this.Tis=null,this._is=null,this.Iis=null,this.Cis=null,this.Ris=null,this.oM=null,this.CA=!0}Xh(){return this.CA}Iss(t,s,i,e,h){this.Ais(t,s,i,e,h)}Pis(){return!!this.Ax}Ais(t,s,i,e,h){if(this.CA)return;const n=t.width,r=t.height;this.SQ=n,this.bQ=r,s=Math.min(Math.floor(s),n),i=Math.min(Math.floor(i),n),e=Math.min(Math.floor(e),r);const o=n-i,a=r-(h=Math.min(Math.floor(h),r)),l=this.Nc.gN(),u=this.Nc.XB().GQ();this.Ax=this.oM.CD(fx(t),{Mx:l,Gx:u}),o>s&&a>e&&(this.Tis=this.oM.CD(this.Eis(fx(t),s,e,o,a),{bx:"repeat",vx:"repeat",Mx:l,Gx:u})),s>0&&a>e&&(this._is=this.oM.CD(this.Eis(fx(t),0,e,s,a),{vx:"repeat",Mx:l,Gx:u})),i>0&&a>e&&(this.Iis=this.oM.CD(this.Eis(fx(t),o,e,n,a),{vx:"repeat",Mx:l,Gx:u})),e>0&&o>s&&(this.Cis=this.oM.CD(this.Eis(fx(t),s,0,o,e),{bx:"repeat",Mx:l,Gx:u})),h>0&&o>s&&(this.Ris=this.oM.CD(this.Eis(fx(t),s,a,o,r),{bx:"repeat",Mx:l,Gx:u}))}Eis(t,s,i,e,h){const n=e-s,r=h-i,o=dx.uo(n,r);return o.getContext("2d").drawImage(t,s,i,n,r,0,0,n,r),o}Jss(){return this.SQ}Xss(){return this.bQ}kT(){return this.Ax}Zss(){return this.Tis}$ss(){return this._is}tis(){return this.Iis}Kss(){return this.Cis}Qss(){return this.Ris}}}{const px=self._s,mx=[];px.MW.Audio=class extends px._Ct{constructor(t){super(t)}Fis(t){mx.push(t)}static async Dis(){await Promise.all(mx),px.Sr(mx)}Jh(){super.Jh()}}}{let gx=function(){return bx.lV().MX()},yx=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};0;const wx=self._s,Sx=self.Ls;wx.MW.Audio.BEt=class extends wx.dRt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}ZCt(){return self.Ois}};let bx=null;self.Ois=class extends self.TV{constructor(t){super(t),bx=t}get kis(){return yx().GetAudioContextExtern()}get Lis(){return yx().GetDestinationNodeExtern()}get Nis(){return gx().Bis()}set Nis(t){gx().Wis(t)}get jis(){return gx().Vis()}set jis(t){Sx.ne(t),gx().Uis(t)}His(){gx().zis()}}}{const vx=self._s,Mx="audio",Gx=["interactive","balanced","playback"];vx.MW.Audio.Instance=class extends vx.wRt{constructor(t,s){super(t,Mx),this.Jis=0,this.Xis=0,this.qis=[],this.Yis=!0,this.$is=0,this.Kis=0,this.Zis=!1,this.Qis=1,this.tes=1,this.ses=[this.Nc.w2()/2,this.Nc.S2()/2,600],this.ies=[0,0,-1],this.ees=[0,1,0],this.hes=600,this.nes=1e4,this.res=1,this.oes=null,this.aes=-1,this.les=1,this.ues=!1,this.ces=0,this.fes="suspended",this.des=0,this.pes=new Map,this.mes=0,this.ges=0,this.yes=new Map,this.wes=new Map;let i="interactive";s&&(this.$is=s[0],this.Kis=s[1],this.Zis=s[2],i=Gx[s[3]],this.Yis=s[4],this.Qis=s[5],this.tes=s[6],this.ses[2]=s[7],this.hes=s[8],this.nes=s[9],this.res=s[10]),this.Ses=[],this.bes=[],this.ves=[],this.RRt([["state",t=>this.Mes(t)],["audiocontext-state",t=>this.Ges(t)],["fxstate",t=>this.xes(t)],["trigger",t=>this.Tes(t)],["buffer-metadata",t=>this._es(t)]]);const e=this.AW().wf();this.$f=new vx.Xf(vx.jf.Jf(e,"instancedestroy",t=>this.Ies(t.FX)),vx.jf.Jf(e,"afterload",()=>this.P8()),vx.jf.Jf(e,"suspend",()=>this.Ces()),vx.jf.Jf(e,"resume",()=>this.Res()));const h=this.Nc.pj(),n="Safari"===vx.Ks.ti,r=this.Nc.uXt()||"macos-wkwebview"===h,o="playable-ad-single-file"===h,a="cordova"===h&&"Android"===vx.Ks.Zs,l=n||r||o||a;this.Nc.mW(this.PRt("create-audio-context",{preloadList:this.Nc.XL().nQ().map(t=>({originalUrl:t.rQ,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.$is,latencyHint:i,panningModel:this.Qis,distanceModel:this.tes,refDistance:this.hes,maxDistance:this.nes,rolloffFactor:this.res,listenerPos:this.ses,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.ces=t.sampleRate,this.fes=t.audioContextState,this.des=t.outputLatency})),this.LRt()}Jh(){this.oes=null,super.Jh()}Aes(t){return this.Yis?t.split(" ").filter(t=>!!t):t?[t]:[]}Pes(t,s){for(const i of s){let s=!1;for(const e of t)if(vx.Ke(e,i)){s=!0;break}if(!s)return!1}return!0}Ees(t,s){return this.Pes(t,this.Aes(s))}Fis(t){this.fV().Fis(t)}Ies(t){this.oes===t&&(this.oes=null)}Fes(t){return Math.pow(10,t/20)}Des(t){const s=this.Fes(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Oes(t){return Math.log(t)/Math.log(10)*20}kes(t){return this.Oes(Math.max(Math.min(t,1),0))}Les(){let t=0;const s=!!self.C3_GetAudioContextCurrentTime;return t=s?this.Jis:this.Xis,this.Jis=0,this.Xis=0,{Nes:t,Bes:s}}Ces(){this.Zis||this.ARt("set-suspended",{isSuspended:!0})}Res(){this.Zis||this.ARt("set-suspended",{isSuspended:!1})}Mes(t){const s=t.tickCount;this.des=t.outputLatency;const i=this.Ses.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder));this.Ses=t.audioInstances,this.ves=t.analysers,i.length>0&&vx.Fh(this.Ses,i)}_es(t){this.yes.set(t.originalUrl,{duration:t.duration})}Ges(t){this.fes=t.audioContextState}Qrt(){return this.Nc.Djt()?"running":this.fes}xes(t){this.bes=t.fxstate}Wes(t){const s=this.Aes(t);for(const t of this.Ses)if(this.Pes(t.tags,s))return t;return null}jes(t){const s=this.Aes(t);return this.Ses.some(t=>this.Pes(t.tags,s)&&t.isPlaying)}Ves(t,s,i,e,h){if(this.jes(s))return null;const n=this.yes.get(t),r={tags:this.Aes(s),duration:n?n.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Ses.push(r),r}Ues(t){const s=this.Aes(t);for(const t of this.Ses)this.Pes(t.tags,s)&&(t.isPlaying=!1)}async Tes(t){const s=t.type;this.qis=t.tags;const i=t.aiid;if("ended"===s){for(const t of this.Ses)if(t.aiid===i){t.isPlaying=!1;break}await this.wW(vx.MW.Audio.bW.Hes)}else"fade-ended"===s&&await this.wW(vx.MW.Audio.bW.zes)}Jes(t){return this.Ees(this.qis,t)}P7(){const t={timeScale:this.Nc.hB(),gameTime:this.Nc.nXt(),instPans:this.Xes(),tickCount:this.Nc.rXt()};if(this.oes){const s=this.oes.iW();this.ses[0]=s.rG(),this.ses[1]=s.lG(),t.listenerPos=this.ses,t.listenerOrientation=[...this.ies,...this.ees]}this.ARt("tick",t)}qes(t,s,i,e,h){if(0===i)return[t,s];const n=Math.sin(i),r=Math.cos(i),o=(t-=e)*n;return t=t*r-(s-=h)*n,s=s*r+o,[t+=e,s+=h]}Xes(){return this.Ses.filter(t=>-1!==t.uid).map(t=>this.Nc.KB(t.uid)).filter(t=>t).map(t=>{const s=t.iW(),i=s.eW().tU(),[e,h]=this.qes(s.rG(),s.lG(),-i,this.ses[0],this.ses[1]);return{uid:t.zH(),x:e,y:h,z:s.eJ(),angle:s.tU()-i}})}Yes(t,s){for(const i of this.ves)if(i.index===s&&vx.Ke(i.tag,t))return i;return null}$es(t){for(const s of this.Aes(t)){const t=s.toLowerCase();this.pes.set(t,(this.pes.get(t)||0)+1)}}Bis(){return this.ues}Wis(t){t=!!t,this.ues!==t&&(this.ues=t,this.ARt("set-silent",{isSilent:t}))}Vis(){return this.les}Uis(t){this.les!==t&&(this.les=t,this.ARt("set-master-volume",{vol:t}))}zis(){this.ARt("stop-all");for(const t of this.Ses)t.isPlaying=!1}Kes(t){return!(t.hasOwnProperty("placeholder")||3===this.Kis||t.isMusic&&1===this.Kis||!t.isMusic&&2===this.Kis)}SG(){return{isSilent:this.ues,masterVolume:this.les,listenerZ:this.ses[2],listenerForwardVec:this.ies,listenerUpVec:this.ees,listenerUid:this.oes?this.oes.zH():-1,remoteUrls:[...this.wes.entries()],playing:this.Ses.filter(t=>this.Kes(t)),effects:this.bes,analysers:this.ves}}bG(t){if(this.ues=t.isSilent,this.les=t.masterVolume,this.ses[2]=t.listenerZ,this.oes=null,this.aes=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.ies=t.listenerForwardVec:this.ies=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.ees=t.listenerUpVec:this.ees=[0,1,0],this.wes.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.wes.set(s,i);this.Ses=t.playing;for(const t of this.Ses)t.hasOwnProperty("tag")&&!t.hasOwnProperty("tags")&&(t.tags=[t.tag].filter(t=>!!t));this.bes=t.effects,this.ves=t.analysers}P8(){if(-1!==this.aes&&(this.oes=this.Nc.KB(this.aes),this.aes=-1,this.oes)){const t=this.oes.iW();this.ses[0]=t.rG(),this.ses[1]=t.lG()}for(const t of this.Ses){const s=this.Nc.XL().hQ(t.bufferOriginalUrl);s?(t.bufferUrl=s.url,t.bufferType=s.type):t.bufferUrl=null}for(const t of Object.values(this.bes))for(const s of t)if(s.hasOwnProperty("bufferOriginalUrl")){const t=this.Nc.XL().hQ(s.bufferOriginalUrl);t&&(s.bufferUrl=t.url,s.bufferType=t.type)}this.ARt("load-state",{saveLoadMode:this.Kis,timeScale:this.Nc.hB(),gameTime:this.Nc.nXt(),listenerPos:this.ses,listenerOrientation:[...this.ies,...this.ees],isSilent:this.ues,masterVolume:this.les,playing:this.Ses.filter(t=>null!==t.bufferUrl),effects:this.bes})}jRt(){const t=[];for(const[s,i]of Object.entries(this.bes))t.push({name:"$"+s,value:i.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.Ses.length},...this.Ses.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / ${Math.round(10*t.duration)/10}`}))]}]}}}self._s.MW.Audio.bW={Hes(t){return this.Jes(t)},zes(t){return this.Jes(t)},Zes(){return this.ges===this.mes},Qes:()=>!0,ths(){return this.Bis()},shs(){for(const t of this.Ses)if(t.isPlaying)return!0;return!1},ihs(t){return this.jes(t)}};{const xx=self._s,Tx=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];xx.MW.Audio.Urt={Play(t,s,i,e,h){const n=xx.MW.Audio.Urt.ehs.call(this,t,s,i,e,h);return this.Fis(n),n},tot(t,s,i,e){xx.MW.Audio.Urt.ehs.call(this,t,0,s,0,i,e)},async ehs(t,s,i,e,h,n){if(this.ues)return;const r=t[1],o=this.Nc.XL().hQ(t[0]);if(!o)return;const{Nes:a,Bes:l}=this.Les(),u=this.Ves(t[0],h,r,0!==s,this.Des(i));try{await this.PRt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:r,tags:this.Aes(h),isLooping:0!==s,vol:this.Des(i),stereoPan:xx.Kh(e/100,-1,1),pos:n||0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.rXt())}},async hhs(t,s,i,e,h,n,r,o,a,l,u){if(this.ues)return;const c=t[1],f=this.Nc.XL().hQ(t[0]);if(!f)return;const{Nes:d,Bes:p}=this.Les(),m=this.Ves(t[0],u,c,0!==s,this.Des(i));try{await this.PRt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.Aes(u),isLooping:0!==s,vol:this.Des(i),pos:0,off:d,trueClock:p,panning:{x:e,y:h,z:n,angle:xx.Qh(r),innerAngle:xx.Qh(o),outerAngle:xx.Qh(a),outerGain:this.Des(l)}})}finally{m&&(m.placeholder=this.Nc.rXt())}},async nhs(t,s,i,e,h,n,r,o){if(this.ues)return;if(!e)return;const a=e.v_t();if(!a||!a.iW())return;const l=a.iW(),u=l.eW().tU(),[c,f]=this.qes(l.rG(),l.lG(),-u,this.ses[0],this.ses[1]),d=t[1],p=this.Nc.XL().hQ(t[0]);if(!p)return;const{Nes:m,Bes:g}=this.Les(),y=this.Ves(t[0],o,d,0!==s,this.Des(i));try{await this.PRt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Aes(o),isLooping:0!==s,vol:this.Des(i),pos:0,off:m,trueClock:g,panning:{x:c,y:f,z:l.eJ(),angle:l.tU()-u,innerAngle:xx.Qh(h),outerAngle:xx.Qh(n),outerGain:this.Des(r),uid:a.zH()}})}finally{y&&(y.placeholder=this.Nc.rXt())}},async rhs(t,s,i,e,h,n){if(this.ues)return;const r=1===t,o=this.Nc.XL().hQ(s)||this.wes.get(s.toLowerCase());if(!o)return;const{Nes:a,Bes:l}=this.Les(),u=this.Ves(s,n,r,0!==i,this.Des(e));try{await this.PRt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:r,tags:this.Aes(n),isLooping:0!==i,vol:this.Des(e),stereoPan:xx.Kh(h/100,-1,1),pos:0,off:a,trueClock:l})}finally{u&&(u.placeholder=this.Nc.rXt())}},async ohs(t,s,i,e,h,n,r,o,a,l,u,c){if(this.ues)return;const f=1===t,d=this.Nc.XL().hQ(s)||this.wes.get(s.toLowerCase());if(!d)return;const{Nes:p,Bes:m}=this.Les(),g=this.Ves(s,c,f,0!==i,this.Des(e));try{await this.PRt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.Aes(c),isLooping:0!==i,vol:this.Des(e),pos:0,off:p,trueClock:m,panning:{x:h,y:n,z:r,angle:xx.Qh(o),innerAngle:xx.Qh(a),outerAngle:xx.Qh(l),outerGain:this.Des(u)}})}finally{g&&(g.placeholder=this.Nc.rXt())}},async ahs(t,s,i,e,h,n,r,o,a){if(this.ues)return;if(this.ues)return;if(!h)return;const l=h.v_t();if(!l||!l.iW())return;const u=l.iW(),c=u.eW().tU(),[f,d]=this.qes(u.rG(),u.lG(),-c,this.ses[0],this.ses[1]),p=1===t,m=this.Nc.XL().hQ(s)||this.wes.get(s.toLowerCase());if(!m)return;const{Nes:g,Bes:y}=this.Les(),w=this.Ves(s,a,p,0!==i,this.Des(e));try{await this.PRt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.Aes(a),isLooping:0!==i,vol:this.Des(e),pos:0,off:g,trueClock:y,panning:{x:f,y:d,z:u.eJ(),angle:u.tU()-c,innerAngle:xx.Qh(n),outerAngle:xx.Qh(r),outerGain:this.Des(o),uid:l.zH()}})}finally{w&&(w.placeholder=this.Nc.rXt())}},lhs(t,s){this.ARt("set-looping",{tags:this.Aes(t),isLooping:0===s})},uhs(t,s){this.ARt("set-muted",{tags:this.Aes(t),isMuted:0===s})},Krt(t,s){this.ARt("set-volume",{tags:this.Aes(t),vol:this.Des(s)})},chs(t,s,i,e){this.ARt("fade-volume",{tags:this.Aes(t),vol:this.Des(s),duration:i,stopOnEnd:0===e})},fhs(t,s){this.ARt("set-stereo-pan",{tags:this.Aes(t),p:xx.Kh(s/100,-1,1)})},async dhs(t){const s=t[1],i=this.Nc.XL().hQ(t[0]);i&&(this.mes++,await this.PRt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.ges++)},async phs(t,s){const i=1===t,e=this.Nc.XL().hQ(s)||this.wes.get(s.toLowerCase());e&&(this.mes++,await this.PRt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.ges++)},Oq(t,s){this.ARt("set-playback-rate",{tags:this.Aes(t),rate:Math.max(s,0)})},Tq(t){this.Ues(t),this.ARt("stop",{tags:this.Aes(t)})},mhs(){this.zis()},ghs(t,s){this.ARt("set-paused",{tags:this.Aes(t),paused:0===s})},yhs(t,s){this.ARt("seek",{tags:this.Aes(t),pos:s})},whs(t){2===t&&(t=this.Bis()?1:0),this.Wis(0===t)},Shs(t){const s=this.Des(t);this.Uis(s)},bhs(t,s,i,e,h,n,r){const o=Tx[s];this.$es(t),this.ARt("add-effect",{type:"filter",tags:this.Aes(t),params:[o,i,e,h,n,xx.Kh(r/100,0,1)]})},vhs(t,s,i,e){this.$es(t),this.ARt("add-effect",{type:"delay",tags:this.Aes(t),params:[s,this.Des(i),xx.Kh(e/100,0,1)]})},Mhs(t,s,i,e,h,n){this.$es(t),this.ARt("add-effect",{type:"flanger",tags:this.Aes(t),params:[s/1e3,i/1e3,e,h/100,xx.Kh(n/100,0,1)]})},Ghs(t,s,i,e,h,n,r){this.$es(t),this.ARt("add-effect",{type:"phaser",tags:this.Aes(t),params:[s,i,e,h,n,xx.Kh(r/100,0,1)]})},xhs(t,s,i,e){const h=this.Nc.XL().hQ(s[0]);h&&(this.$es(t),this.ARt("add-effect",{type:"convolution",tags:this.Aes(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,xx.Kh(e/100,0,1)]}))},Ths(t,s){this.$es(t),this.ARt("add-effect",{type:"gain",tags:this.Aes(t),params:[this.Des(s)]})},_hs(t,s){this.$es(t),this.ARt("add-effect",{type:"stereopan",tags:this.Aes(t),params:[xx.Kh(s/100,-1,1)]})},Ihs(t){this.$es(t),this.ARt("add-effect",{type:"gain",tags:this.Aes(t),params:[0]})},Chs(t,s,i){this.$es(t),this.ARt("add-effect",{type:"tremolo",tags:this.Aes(t),params:[s,xx.Kh(i/100,0,1)]})},Rhs(t,s,i){this.$es(t),this.ARt("add-effect",{type:"ringmod",tags:this.Aes(t),params:[s,xx.Kh(i/100,0,1)]})},Ahs(t,s,i,e,h,n){this.$es(t),this.ARt("add-effect",{type:"distortion",tags:this.Aes(t),params:[this.Fes(s),this.Fes(i),e,this.Fes(h),xx.Kh(n/100,0,1)]})},Phs(t,s,i,e,h,n){this.$es(t),this.ARt("add-effect",{type:"compressor",tags:this.Aes(t),params:[s,i,e,h/1e3,n/1e3]})},Ehs(t,s,i){this.$es(t),this.ARt("add-effect",{type:"analyser",tags:this.Aes(t),params:[s,i]})},Fhs(t){const s=this.Aes(t);for(const t of s)this.pes.set(t.toLowerCase(),0);this.ARt("remove-effects",{tags:s}),this.bes={}},VX(t,s,i,e,h,n){this.ARt("set-effect-param",{tags:this.Aes(t),index:Math.floor(s),param:i,value:e,ramp:h,time:n})},Dhs(t){if(!t)return;const s=t.v_t();s&&s.iW()&&(this.oes=s)},Ohs(t){this.ses[2]=t},khs(t,s,i,e,h,n){this.ies[0]=t,this.ies[1]=s,this.ies[2]=-i,this.ees[0]=e,this.ees[1]=h,this.ees[2]=-n},Lhs(t){this.Jis=Math.max(t,0),this.Xis=Math.max(t-performance.now()/1e3,0)},Nhs(t){const s=t[1],i=this.Nc.XL().hQ(t[0]);i&&this.ARt("unload",{url:i.url,type:i.type,isMusic:s})},Bhs(t,s){const i=1===t,e=this.Nc.XL().hQ(s)||this.wes.get(s.toLowerCase());e&&this.ARt("unload",{url:e.url,type:e.type,isMusic:i})},Whs(){this.ARt("unload-all")},jhs(t,s,i){this.wes.set(i.toLowerCase(),{url:t,type:s})}}}{const _x=self._s;_x.MW.Audio.Hrt={Vhs(t){const s=this.Wes(t);return s?s.duration:0},Xrt(t){const s=this.Wes(t);return s?s.playbackTime:0},Zrt(t){const s=this.Wes(t);return s?s.playbackRate:0},qrt(t){const s=this.Wes(t);return s?this.kes(s.volume):0},Uhs(){return this.kes(this.Vis())},Hhs(t){return this.pes.get(t.toLowerCase())||0},zhs(t,s){const i=this.Yes(t,Math.floor(s));return i?i.binCount:0},Jhs(t,s,i){const e=this.Yes(t,Math.floor(s));return e?(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]:0},Xhs(t,s){const i=this.Yes(t,Math.floor(s));return i?i.peak:0},qhs(t,s){const i=this.Yes(t,Math.floor(s));return i?i.rms:0},Yhs(){return this.ces},$hs:()=>self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3,Khs(){return this.des},Zhs(t,s){return 0==(t=_x.Kh(+t,0,100)/100)?-1/0:t<.1?this.kes(_x._t(0,this.Des(s),10*t)):_x._t(s,0,(t-.1)/.9)}}}{const Ix=self._s;Ix.MW.gamepad=class extends Ix._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{const Cx=self._s;Cx.MW.gamepad.BEt=class extends Cx.dRt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const Rx=self._s,Ax="gamepad";class Px{constructor(t,s,i){this.Vw=t,this.Wc=s,this.Qhs=new Set(i),this.tns=new Ex,this.sns=new Ex,this.ins=[],this.ens=[]}Nj(){return this.Wc}JQ(t,s){const i=this.sns;this.sns=this.tns,this.tns=i,this.tns.JQ(t,s),Rx.Mr(this.ins,this.tns.hns(),!1),Rx.Mr(this.ens,this.tns.hns(),!1);for(let t=0,s=this.tns.hns();t<s;++t){const s=this.sns.nns(t),i=this.tns.nns(t);i>=.5&&s<.5&&(this.ins[t]=!0),i<.5&&s>=.5&&(this.ens[t]=!0)}}hns(){return this.tns.hns()}rns(){return this.tns.rns()}ons(t){return!((t=Math.floor(t))<0||t>=this.ins.length)&&this.ins[t]}ans(t){return!((t=Math.floor(t))<0||t>=this.ens.length)&&this.ens[t]}lns(){this.ins.fill(!1),this.ens.fill(!1)}nns(t){return this.tns.nns(t)}uns(t){return this.tns.nns(t)>=.5}cns(t){return this.tns.cns(t)}VL(){return this.Vw}fns(){return this.Qhs}}class Ex{constructor(){this.pns=[],this.mns=[]}JQ(t,s){const i=this.pns;let e=0;for(let s=t.length;e<s;++e){const s=t[e];e===i.length?i.push(s.value):i[e]=s.value}e<i.length&&Rx.wr(i,e),Rx.Gr(this.mns,s)}hns(){return this.pns.length}rns(){return this.mns.length}nns(t){return(t=Math.floor(t))<0||t>=this.pns.length?0:this.pns[t]}cns(t){return(t=Math.floor(t))<0||t>=this.mns.length?0:this.mns[t]}}Rx.MW.gamepad.Instance=class extends Rx.wRt{constructor(t,s){super(t,Ax),this.gns=25,this.yns=0,this.wns=-1,this.Sns=new Map,s&&(this.gns=s[0]),this.CRt("gamepad-connected",t=>this.bns(t)),this.CRt("gamepad-disconnected",t=>this.vns(t)),this.CRt("input-update",t=>this.Mns(t));const i=this.AW().wf();this.$f=new Rx.Xf(Rx.jf.Jf(i,"tick2",()=>this.b8()),Rx.jf.Jf(i,"suspend",()=>this.Ces()),Rx.jf.Jf(i,"resume",()=>this.Res())),this.ARt("ready")}Jh(){super.Jh()}bns(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.Sns.has(s)||(this.Sns.set(s,new Px(s,i,e)),this.wns=s,this.pz(Rx.MW.gamepad.bW.Gns),this.wns=-1)}vns(t){const s=t.index;this.wns=s,this.pz(Rx.MW.gamepad.bW.xns),this.wns=-1,this.Sns.delete(s)}Mns(t){for(const s of t)this.Tns(s)}Tns(t){const s=t.index;this.Sns.has(s)||this.bns(t);const i=this.Sns.get(s);i.JQ(t.buttons,t.axes);for(let t=0,s=i.hns();t<s;++t)i.ons(t)&&(this.yns=t)}_ns(t){return this.Sns.get(Math.floor(t))||null}Ins(t){if(-1===t)return[...this.Sns.values()];{const s=this.Sns.get(Math.floor(t));return s?[s]:[]}}b8(){for(const t of this.Sns.values())t.lns()}Ces(){this.ARt("suspend")}Res(){this.ARt("resume")}jRt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.yns},{name:t+".properties.analog-deadzone.name",value:this.gns}]}]}}}{const Fx=self._s;Fx.MW.gamepad.bW={Gns:()=>!0,xns:()=>!0,uns(t,s){const i=this._ns(t);if(!i)return!1;const e=i.uns(s);return e&&(this.yns=s),e},Cns(t,s){const i=this._ns(t);if(!i)return!1;const e=i.ons(s);return e&&(this.yns=s),e},Rns(t,s){const i=this._ns(t);if(!i)return!1;const e=i.ans(s);return e&&(this.yns=s),e},Ans(){return this.Sns.size>0},Pns(t,s,i,e){s=Math.floor(s);const h=this._ns(t);if(!h)return!1;let n=h.cns(s),r=0;return r=s%2==0?h.cns(s+1):h.cns(s-1),n*=100,r*=100,Math.hypot(n,r)<=this.gns&&(n=0),Fx.compare(n,i,e)},Ens(t){const s=this.Ins(t);if(0===s.length)return!1;const i=this.Nc,e=i.TN(),h=i.PN(),n=h.T$(),r=i.NN(),o=r._$(),a=r.I$(h);i.A$(!1);for(const t of s)for(let s=0,i=t.hns();s<i;++s)t.ons(s)&&(this.wns=t.VL(),this.yns=s,e.E$(n),h.F$(o,a),e.D$(n),this.wns=-1);return i.A$(!0),r.N$(),!1},Fns(t){const s=this.Ins(t);if(0===s.length)return!1;const i=this.Nc,e=i.TN(),h=i.PN(),n=h.T$(),r=i.NN(),o=r._$(),a=r.I$(h);i.A$(!1);for(const t of s)for(let s=0,i=t.hns();s<i;++s)t.ans(s)&&(this.wns=t.VL(),this.yns=s,e.E$(n),h.F$(o,a),e.D$(n),this.wns=-1);return i.A$(!0),r.N$(),!1},Dns(t,s){s=Math.floor(s);const i=this._ns(t);if(!i)return!1;const e=i.uns(s);return e&&(this.yns=s),e},Ons(t,s){s=Math.floor(s);const i=this._ns(t);if(!i)return!1;const e=i.ons(s);return e&&(this.yns=s),e},kns(t,s){s=Math.floor(s);const i=this._ns(t);if(!i)return!1;const e=i.ans(s);return e&&(this.yns=s),e},Lns(t,s){const i=this._ns(t);if(!i)return!1;const e=i.fns();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},Nns:()=>!0}}{const Dx=self._s;Dx.MW.gamepad.Urt={Bns(t,s,i,e){this.ARt("vibrate-dual-rumble",{index:t,duration:s,weakMag:Dx.Kh(i/100,0,1),strongMag:Dx.Kh(e/100,0,1)})},Wns(t,s,i,e,h,n){this.ARt("vibrate-trigger-rumble",{index:t,duration:s,weakMag:Dx.Kh(i/100,0,1),strongMag:Dx.Kh(e/100,0,1),leftMag:Dx.Kh(h/100,0,1),rightMag:Dx.Kh(n/100,0,1)})},jns(t){this.ARt("reset-vibrate",{index:t})}}}self._s.MW.gamepad.Hrt={Vns(){return this.Sns.size},Uns(t){const s=this._ns(t);return s?s.Nj():""},Hns(){return this.wns},zns(t){const s=this._ns(t);if(!s)return"";let i="";for(let t=0,e=s.rns();t<e;++t)i+=`Axis ${t}: ${Math.round(100*s.cns(t))}\n`;return i},Jns(t){const s=this._ns(t);if(!s)return"";let i="";for(let t=0,e=s.hns();t<e;++t)i+=`Button ${t}: ${Math.round(100*s.nns(t))}\n`;return i},Xns(t,s){const i=this._ns(t);return i?i.nns(Math.floor(s)):0},qns(t,s){const i=this._ns(t);return i?i.cns(Math.floor(s)):0},Yns(t){const s=this._ns(t);return s?s.hns():0},$ns(t){const s=this._ns(t);return s?s.rns():0},Kns(t,s){const i=this._ns(t);return i?100*i.nns(Math.floor(s)):0},Zns(t,s){s=Math.floor(s);const i=this._ns(t);if(!i)return 0;let e=i.cns(s),h=0;return h=s%2==0?i.cns(s+1):i.cns(s-1),e*=100,h*=100,Math.hypot(e,h)<=this.gns&&(e=0),e},Qns(){return this.yns},trs(){return this.yns}};{const Ox=self._s;Ox.MW.Keyboard=class extends Ox._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{let kx=function(){return Nx.lV().MX()};0;const Lx=self._s;self.Ls,Lx.MW.Keyboard.BEt=class extends Lx.dRt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}ZCt(){return self.srs}};let Nx=null;self.srs=class extends self.TV{constructor(t){super(t),Nx=t,t.AW().VB().keyboard=this}irs(t){const s=kx();if("string"==typeof t)return s.ers(t);if("number"==typeof t)return s.hrs(t);throw new TypeError("expected string or number")}}}{const Bx=self._s,Wx="keyboard";Bx.MW.Keyboard.Instance=class extends Bx.wRt{constructor(t,s){super(t,Wx),this.nrs=new Set,this.rrs=new Set,this.ors=0,this.ars="",this.lrs="",this.urs=!1;const i=this.AW().wf();this.$f=new Bx.Xf(Bx.jf.Jf(i,"keydown",t=>this.crs(t.data)),Bx.jf.Jf(i,"keyup",t=>this.frs(t.data)),Bx.jf.Jf(i,"window-blur",()=>this.drs()),Bx.jf.Jf(i,"keyboard-blur",()=>this.drs())),this.Nc.mW(this.nG())}Jh(){super.Jh()}async nG(){const t=await this.PRt("init");this.urs=t.isKeyboardLockSupported}crs(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.nrs.has(i)||(this.nrs.add(i),this.rrs.add(s),this.ars=i,this.ors=s,this.lrs=e,this.pz(Bx.MW.Keyboard.bW.prs),this.pz(Bx.MW.Keyboard.bW.mrs),this.pz(Bx.MW.Keyboard.bW.grs),this.pz(Bx.MW.Keyboard.bW.yrs))}frs(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.nrs.delete(i),this.rrs.delete(s),this.ars=i,this.ors=s,this.lrs=e,this.pz(Bx.MW.Keyboard.bW.wrs),this.pz(Bx.MW.Keyboard.bW.Srs),this.pz(Bx.MW.Keyboard.bW.brs),this.pz(Bx.MW.Keyboard.bW.vrs)}drs(){for(const t of this.rrs)this.rrs.delete(t),this.ors=t,this.pz(Bx.MW.Keyboard.bW.wrs),this.pz(Bx.MW.Keyboard.bW.Srs),this.pz(Bx.MW.Keyboard.bW.vrs);this.nrs.clear()}ers(t){return this.nrs.has(t)}hrs(t){return this.rrs.has(t)}SG(){return{tk:this.ors,tkk:this.lrs}}bG(t){this.ors=t.tk,t.hasOwnProperty("tkk")&&(this.lrs=t.tkk)}jRt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.ors},{name:t+".debugger.last-key-string",value:Bx.MW.Keyboard.Hrt.Mrs(this.ors)},{name:t+".debugger.last-typed-key",value:this.lrs}]}]}}}{const jx=self._s,Vx=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];jx.MW.Keyboard.bW={ers(t){return this.rrs.has(t)},mrs(t){return this.ors===t},prs:()=>!0,wrs:()=>!0,Srs(t){return this.ors===t},hrs(t){return t=Math.floor(t),this.rrs.has(t)},yrs(t){return this.ors===t},vrs(t){return this.ors===t},grs(t){const s=Vx[t];return this.ars===s},brs(t){const s=Vx[t];return this.ars===s},Grs(t){const s=Vx[t];return this.nrs.has(s)},xrs(){return this.urs},Trs:()=>!0,_rs:()=>!0}}{const Ux=self._s;Ux.MW.Keyboard.Urt={async Irs(t){if(!this.urs)return;let s=[];t&&(s=t.split(",")),(await this.PRt("lock-keyboard",{keysArr:s})).isOk?this.pz(Ux.MW.Keyboard.bW.Trs):this.pz(Ux.MW.Keyboard.bW._rs)},Crs(){this.urs&&this.PRt("unlock-keyboard")}}}{let Hx=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};self._s.MW.Keyboard.Hrt={Rrs(){return this.ors},Mrs:t=>Hx(t),Ars(){return this.lrs}}}{const zx=self._s;zx.MW.Prs=class extends zx._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{let Jx=function(){return Yx.lV().MX()};0;const Xx=self._s,qx=self.Ls;Xx.MW.Prs.BEt=class extends Xx.dRt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}ZCt(){return self.Ers}};let Yx=null;self.Ers=class extends self.TV{constructor(t){super(t),Yx=t,t.AW().VB().UB=this}Frs(t){return Jx().Drs(t)[0]}Ors(t){return Jx().Drs(t)[1]}krs(t){return Jx().Drs(t)}Lrs(t){return Jx().Nrs(t)}Brs(t){qx.le(t),Jx().Wrs(t)}jrs(t){const s=Jx(),i=s.AW().oj(t);s.Vrs(i)}}}{const $x=self._s,Kx="mouse";let Zx=null;$x.MW.Prs.Instance=class extends $x.wRt{constructor(t,s){super(t,Kx),this.Urs=[!1,!1,!1,!1,!1],this.Hrs=0,this.zrs=0,this.Jrs=0,this.Xrs=0,this.qrs=0,this.Yrs=0,this.$rs=0,this.Krs=0,this.Zrs=!1,this.Qrs=0,this.tos=0,this.RRt([["pointer-lock-change",t=>this.sos(t)],["pointer-lock-error",t=>this.ios(t)]]);const i=this.AW().wf();this.$f=new $x.Xf($x.jf.Jf(i,"pointermove",t=>this.eos(t.data)),$x.jf.Jf(i,"pointerdown",t=>this.hos(t.data)),$x.jf.Jf(i,"pointerup",t=>this.nos(t.data)),$x.jf.Jf(i,"dblclick",t=>this.ros(t.data)),$x.jf.Jf(i,"wheel",t=>this.oos(t.data)),$x.jf.Jf(i,"window-blur",()=>this.gzt()))}Jh(){super.Jh()}hos(t){"mouse"===t.pointerType&&(this.Hrs=t.pageX-this.Nc.bj(),this.zrs=t.pageY-this.Nc.Mj(),this.aos(t.lastButtons,t.buttons))}eos(t){this.Qrs=t.movementX,this.tos=t.movementY,this.pz($x.MW.Prs.bW.los),this.Qrs=0,this.tos=0,"mouse"===t.pointerType&&(this.Hrs=t.pageX-this.Nc.bj(),this.zrs=t.pageY-this.Nc.Mj(),this.aos(t.lastButtons,t.buttons))}nos(t){"mouse"===t.pointerType&&this.aos(t.lastButtons,t.buttons)}aos(t,s){this.uos(t,s,1,0),this.uos(t,s,4,1),this.uos(t,s,2,2),this.uos(t,s,8,3),this.uos(t,s,16,4)}uos(t,s,i,e){!(t&i)&&s&i?this.fos(e):t&i&&!(s&i)&&this.dos(e)}fos(t){this.Urs[t]=!0,this.pz($x.MW.Prs.bW.pos),this.Jrs=t,this.Xrs=0,this.pz($x.MW.Prs.bW.mos),this.pz($x.MW.Prs.bW.gos)}dos(t){this.Urs[t]&&(this.Urs[t]=!1,this.Jrs=t,this.pz($x.MW.Prs.bW.yos))}ros(t){this.Jrs=t.button,this.Xrs=1,this.pz($x.MW.Prs.bW.mos),this.pz($x.MW.Prs.bW.gos)}oos(t){this.qrs=t.deltaY<0?1:0,this.Yrs=t.deltaX,this.$rs=t.deltaY,this.Krs=t.deltaZ,this.pz($x.MW.Prs.bW.wos)}gzt(){for(let t=0,s=this.Urs.length;t<s;++t){if(!this.Urs[t])return;this.Urs[t]=!1,this.Jrs=t,this.pz($x.MW.Prs.bW.yos)}}Drs(t){const s=this.Nc.PB(),i=this.Hrs,e=this.zrs;if(void 0===t)return s.nW(0).p5(i,e);{const h=s.eW(t);return h?h.MH(i,e):[0,0]}}Nrs(t){return t=Math.floor(t),!!this.Urs[t]}Sos(){return this.Hrs>=0&&this.zrs>=0&&this.Hrs<this.Nc.cJt()&&this.zrs<this.Nc.fJt()}Wrs(t){Zx!==t&&(Zx=t,this.ARt("cursor",t))}async Vrs(t){if($x.Ks.ri||!t)return;const s=t.v_t();if(!s)return;const i=s.iW(),e=s.tAt();if(!i||!e)return;if(Zx===e)return;Zx=e;const h=`url(${await e.xPt()}) ${Math.round(i.Yz()*e.My())} ${Math.round(i.Zz()*e.xy())}, auto`;this.ARt("cursor",h)}sos(t){this.bos(t["has-pointer-lock"])}ios(t){this.bos(t["has-pointer-lock"]),this.pz($x.MW.Prs.bW.vos)}bos(t){this.Zrs!==t&&(this.Zrs=t,this.Zrs?this.pz($x.MW.Prs.bW.Mos):this.pz($x.MW.Prs.bW.Gos))}jRt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.Hrs+","+this.zrs},{name:t+".debugger.left-button",value:this.Urs[0]},{name:t+".debugger.middle-button",value:this.Urs[1]},{name:t+".debugger.right-button",value:this.Urs[2]},{name:t+".debugger.button-4",value:this.Urs[3]},{name:t+".debugger.button-5",value:this.Urs[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Nc.PB().cU().map(t=>({name:"$"+t.Rc(),value:t.MH(this.Hrs,this.zrs).join(", ")}))}]}}}{const Qx=self._s;Qx.MW.Prs.bW={mos(t,s){return this.Jrs===t&&this.Xrs===s},pos:()=>!0,uns(t){return this.Urs[t]},yos(t){return this.Jrs===t},xos(t){const s=this.Nc.cyt().Fxt(),i=[];return this.Sos()&&i.push([this.Hrs,this.zrs]),Qx.xor(this.Nc.$L().QNt(t,i,s),s)},gos(t,s,i){if(t!==this.Jrs||s!==this.Xrs)return!1;if(!this.Sos())return!1;const e=this.Hrs,h=this.zrs;return this.Nc.$L().QNt(i,[[e,h]],!1)},wos(t){return 2===t||this.qrs===t},Mos:()=>!0,Gos:()=>!0,vos:()=>!0,Tos(){return this.Zrs},los:()=>!0}}{const tT=self._s,sT=["auto","pointer","text","crosshair","move","help","wait","none"],iT=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];tT.MW.Prs.Urt={_os(t){this.Wrs(sT[t])},Ios(t){this.Wrs(iT[t])},Cos(t){this.Vrs(t)},Ros(t){this.ERt("request-pointer-lock",{unadjustedMovement:t})},Aos(){this.ARt("release-pointer-lock")}}}self._s.MW.Prs.Hrt={NIt(t){return this.Drs(t)[0]},BIt(t){return this.Drs(t)[1]},Pos(){return this.Hrs},Eos(){return this.zrs},Fos(){return this.Qrs},Dos(){return this.tos},Oos(){return this.Yrs},kos(){return this.$rs},Los(){return this.Krs}};{const eT=self._s;eT.MW.Touch=class extends eT._Ct{constructor(t){super(t)}Jh(){super.Jh()}}}{let hT=function(){return oT.lV().MX()};0;const nT=self._s,rT=self.Ls;nT.MW.Touch.BEt=class extends nT.dRt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}ZCt(){return self.Nos}};let oT=null;self.Nos=class extends self.TV{constructor(t){super(t),oT=t,t.AW().VB().HB=this}requestPermission(t){rT.le(t);const s=hT();if("orientation"===t)return s.Bos(0);if("motion"===t)return s.Bos(1);throw new Error("invalid type")}}}{const aT=self._s,lT="touch";aT.MW.Touch.Instance=class extends aT.wRt{constructor(t,s){super(t,lT),this.Wos=new Map,this.jos=!1,this.Vos=!1,this.Uos=0,this.Hos=0,this.zos=0,this.Jos=0,this.Xos=0,this.qos=0,this.Yos=0,this.$os=0,this.Kos=0,this.Zos=0,this.Qos=0,this.tas=0,this.sas=0,this.ias=0,this.eas=0,this.nas=0,this.Xrs=0,this.ras=[],s&&(this.jos=s[0]),this.CRt("permission-result",t=>this.oas(t));const i=this.AW().wf();this.$f=new aT.Xf(aT.jf.Jf(i,"pointerdown",t=>this.hos(t.data)),aT.jf.Jf(i,"pointermove",t=>this.eos(t.data)),aT.jf.Jf(i,"pointerup",t=>this.nos(t.data,!1)),aT.jf.Jf(i,"pointercancel",t=>this.nos(t.data,!0)),aT.jf.Jf(i,"deviceorientation",t=>this.aas(t.data)),aT.jf.Jf(i,"deviceorientationabsolute",t=>this.las(t.data)),aT.jf.Jf(i,"devicemotion",t=>this.uas(t.data)),aT.jf.Jf(i,"tick2",t=>this.b8()))}Jh(){this.Wos.clear(),super.Jh()}hos(t){if("mouse"===t.pointerType){if(!this.jos)return;this.Vos=!0}const s=t.pointerId;if(this.Wos.has(s))return;const i=t.pageX-this.Nc.bj(),e=t.pageY-this.Nc.Mj(),h=performance.now(),n=this.Wos.size;this.Qos=n,this.tas=s;const r=aT.zh(aT.MW.Touch.cas);r.oDt(h,i,e,s,n),this.Wos.set(s,r),this.pz(aT.MW.Touch.bW.fas),this.pz(aT.MW.Touch.bW.das),this.ias=i,this.eas=e,this.Xrs=0,this.pz(aT.MW.Touch.bW.pas)}eos(t){if("mouse"===t.pointerType&&!this.Vos)return;const s=this.Wos.get(t.pointerId);if(!s)return;const i=performance.now();if(i-s.pO()<2)return;const e=t.pageX-this.Nc.bj(),h=t.pageY-this.Nc.Mj();s.JQ(i,e,h,t.width,t.height,t.pressure)}nos(t,s){if("mouse"===t.pointerType){if(!this.Vos)return;this.Vos=!1}const i=performance.now(),e=t.pointerId,h=this.Wos.get(e);if(h){if(this.Qos=h.mas(),this.tas=h.sY(),!s){const s=t.pageX-this.Nc.bj(),i=t.pageY-this.Nc.Mj();this.ias=s,this.eas=i,this.Xrs=1,this.pz(aT.MW.Touch.bW.pas)}if(this.pz(aT.MW.Touch.bW.gas),this.pz(aT.MW.Touch.bW.yas),!s){const t=h.was(i);"single-tap"===t?(this.pz(aT.MW.Touch.bW.Sas),this.ias=h.rG(),this.eas=h.lG(),this.pz(aT.MW.Touch.bW.bas)):"double-tap"===t&&(this.pz(aT.MW.Touch.bW.vas),this.ias=h.rG(),this.eas=h.lG(),this.pz(aT.MW.Touch.bW.Mas))}h.Jh(),this.Wos.delete(e)}}Bos(t){return this.ERt("request-permission",{type:t}),new Promise((s,i)=>{this.ras.push({type:t,resolve:s,reject:i})})}oas(t){const s=t.result,i=t.type;this.sas=i;const e=this.ras.filter(t=>t.type===i);for(const t of e)t.resolve(s?"granted":"denied");this.ras=this.ras.filter(t=>t.type!==i),s?(this.pz(aT.MW.Touch.bW.Gas),0===i?this.Nc.HXt():this.Nc.zXt()):this.pz(aT.MW.Touch.bW.xas)}aas(t){"number"==typeof t.webkitCompassHeading?this.Uos=t.webkitCompassHeading:t.absolute&&(this.Uos=t.alpha),this.Hos=t.alpha,this.zos=t.beta,this.Jos=t.gamma}las(t){this.Uos=t.alpha}uas(t){const s=t.acceleration;s&&(this.Xos=s.x,this.qos=s.y,this.Yos=s.z);const i=t.accelerationIncludingGravity;i&&(this.$os=i.x,this.Kos=i.y,this.Zos=i.z)}b8(){const t=performance.now();let s=0;for(const i of this.Wos.values())i.pO()<=t-50&&i.Tas(t),i._as(t)&&(this.Qos=i.mas(),this.tas=i.sY(),this.nas=s,this.pz(aT.MW.Touch.bW.Ias),this.ias=i.rG(),this.eas=i.lG(),this.pz(aT.MW.Touch.bW.Cas),this.nas=0),++s}Ras(t){t=Math.floor(t);for(const s of this.Wos.values()){if(0===t)return s;--t}return null}Aas(t,s){return t>=0&&s>=0&&t<this.Nc.cJt()&&s<this.Nc.fJt()}jRt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.Wos.values()].map(t=>({name:"$"+t.sY(),value:t.rG()+", "+t.lG()}))}]}}}{const uT=self._s;uT.MW.Touch.bW={das:()=>!0,yas:()=>!0,Pas(){return this.Wos.size>0},pas(t,s){return!!t&&s===this.Xrs&&!!this.Aas(this.ias,this.eas)&&this.Nc.$L().QNt(t,[[this.ias,this.eas]],!1)},Eas(t){if(!t)return!1;const s=this.Nc.cyt().Fxt(),i=[...this.Wos.values()].filter(t=>this.Aas(t.rG(),t.lG())).map(t=>[t.rG(),t.lG()]);return uT.xor(this.Nc.$L().QNt(t,i,s),s)},Fas(t,s,i){const e=this.Ras(t);return!!e&&uT.compare(e.HX(),s,i)},Das:()=>!0,Oas:()=>!0,kas(t,s,i){this.Nc.HXt();let e=0;return e=0===t?this.Hos:1===t?this.zos:this.Jos,uT.compare(e,s,i)},Las(t,s,i){this.Nc.zXt();let e=0;return e=0===t?this.$os:1===t?this.Kos:2===t?this.Zos:3===t?this.Xos:4===t?this.qos:this.Yos,uT.compare(e,s,i)},fas(t){return(t=Math.floor(t))===this.Qos},gas(t){return(t=Math.floor(t))===this.Qos},Nas(t){return t=Math.floor(t),this.Wos.size>=t+1},Ias:()=>!0,Sas:()=>!0,vas:()=>!0,Cas(t){return!!t&&!!this.Aas(this.ias,this.eas)&&this.Nc.$L().QNt(t,[[this.ias,this.eas]],!1)},bas(t){return!!t&&!!this.Aas(this.ias,this.eas)&&this.Nc.$L().QNt(t,[[this.ias,this.eas]],!1)},Mas(t){return!!t&&!!this.Aas(this.ias,this.eas)&&this.Nc.$L().QNt(t,[[this.ias,this.eas]],!1)},Gas(t){return this.sas===t},xas(t){return this.sas===t}}}self._s.MW.Touch.Urt={Bas(t){this.Bos(t)}};{const cT=self._s;cT.MW.Touch.Hrt={Was(){return this.Wos.size},NIt(t){const s=this.Ras(this.nas);return s?s.jas(this.Nc.tW(),t,!0):0},BIt(t){const s=this.Ras(this.nas);return s?s.jas(this.Nc.tW(),t,!1):0},Vas(t,s){const i=this.Ras(t);return i?i.jas(this.Nc.tW(),s,!0):0},Uas(t,s){const i=this.Ras(t);return i?i.jas(this.Nc.tW(),s,!1):0},Has(t,s){const i=this.Wos.get(t);return i?i.jas(this.Nc.tW(),s,!0):0},zas(t,s){const i=this.Wos.get(t);return i?i.jas(this.Nc.tW(),s,!1):0},Pos(){const t=this.Ras(0);return t?t.rG():0},Eos(){const t=this.Ras(0);return t?t.lG():0},Jas(t){const s=this.Ras(t);return s?s.rG():0},Xas(t){const s=this.Ras(t);return s?s.lG():0},qas(t){const s=this.Wos.get(t);return s?s.rG():0},Yas(t){const s=this.Wos.get(t);return s?s.lG():0},$as(t){const s=this.Ras(t);return s?s.HX():0},Kas(t){const s=this.Wos.get(t);return s?s.HX():0},Zas(t){const s=this.Ras(t);return s?cT.tn(s.tU()):0},Qas(t){const s=this.Wos.get(t);return s?cT.tn(s.tU()):0},tls(){return this.Nc.HXt(),this.Uos},sls(){return this.Nc.HXt(),this.Hos},ils(){return this.Nc.HXt(),this.zos},els(){return this.Nc.HXt(),this.Jos},hls(){return this.Nc.zXt(),this.$os},nls(){return this.Nc.zXt(),this.Kos},rls(){return this.Nc.zXt(),this.Zos},ols(){return this.Nc.zXt(),this.Xos},als(){return this.Nc.zXt(),this.qos},lls(){return this.Nc.zXt(),this.Yos},uls(){return this.Qos},cls(){return this.tas},fls(t){const s=this.Wos.get(t);return s?s.My():0},dls(t){const s=this.Wos.get(t);return s?s.xy():0},pls(t){const s=this.Wos.get(t);return s?s.mls():0}}}{const fT=self._s;let dT=-1e3,pT=-1e3,mT=-1e4;fT.MW.Touch.cas=class extends fT.Uh{constructor(){super(),this.gls=0,this.uC=0,this.IHt=0,this.ck=0,this.yls=0,this.wls=0,this.Sls=0,this.Ra=0,this.Aa=0,this.bls=0,this.vls=0,this.jy=0,this.Vy=0,this.Mls=0,this.Gls=!1,this.xls=!1}Jh(){}oDt(t,s,i,e,h){this.gls=e,this.uC=h,this.ck=t,this.yls=t,this.IHt=t,this.wls=s,this.Sls=i,this.Ra=s,this.Aa=i,this.bls=s,this.vls=i}JQ(t,s,i,e,h,n){this.yls=this.ck,this.ck=t,this.bls=this.Ra,this.vls=this.Aa,this.Ra=s,this.Aa=i,this.jy=e,this.Vy=h,this.Mls=n,!this.xls&&fT.hn(this.wls,this.Sls,this.Ra,this.Aa)>=15&&(this.xls=!0)}sY(){return this.gls}mas(){return this.uC}pO(){return this.ck}Tas(t){this.yls=t}rG(){return this.Ra}lG(){return this.Aa}HX(){const t=fT.hn(this.Ra,this.Aa,this.bls,this.vls),s=(this.ck-this.yls)/1e3;return s>0?t/s:0}tU(){return fT.rn(this.bls,this.vls,this.Ra,this.Aa)}My(){return this.jy}xy(){return this.Vy}mls(){return this.Mls}_as(t){return!this.Gls&&t-this.IHt>=500&&!this.xls&&fT.hn(this.wls,this.Sls,this.Ra,this.Aa)<15&&(this.Gls=!0,!0)}was(t){return this.Gls?"":t-this.IHt<=333&&!this.xls&&fT.hn(this.wls,this.Sls,this.Ra,this.Aa)<15?t-mT<=666&&fT.hn(dT,pT,this.Ra,this.Aa)<25?(dT=-1e3,pT=-1e3,mT=-1e4,"double-tap"):(dT=this.Ra,pT=this.Aa,mT=t,"single-tap"):""}jas(t,s,i){if(void 0===s)return t.nW(0).p5(this.Ra,this.Aa)[i?0:1];{const e=t.eW(s);return e?e.MH(this.Ra,this.Aa)[i?0:1]:0}}}}{const gT=self._s;gT.Iut.Tls=class extends gT.RAt{constructor(t){super(t)}Jh(){super.Jh()}}}{const yT=self._s;yT.Iut.Tls.BEt=class extends yT.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const wT=self._s,ST=self.Ls,bT=self.IX,vT=0,MT=1,GT=2,xT=3,TT=4,_T=5,IT=6,CT=7,RT=8,AT=0,PT=1,ET=2,FT=3,DT=4,OT=5,kT=6,LT=7,NT=8,BT=9,WT=0,jT=1,VT=2,UT=3,HT=4,zT=2*Math.PI,JT=Math.PI/2,XT=3*Math.PI/2,qT=[0,1,8,3,4,2,5,6,9,7];wT.Iut.Tls.Instance=class extends wT.kAt{constructor(t,s){super(t),this._ls=0,this.Ils=0,this.Cls=0,this.Rls=0,this.Als=0,this.lMt=!0,this.Pls=0,this.Els=0,this.Fls=0,this.Dls=0,this.Ols=0,this.kls=0,this.DMt=0,this.Lls=0,this.Nls=0,this.Bls=0,this.Wls=0,s&&(this.Ils=qT[s[vT]],this.Cls=s[MT],this.Dls=this.Nc.AB()*s[xT],this.Pls=s[GT],this.Rls=s[GT],this.Rls+=this.Dls,this.Els=s[TT],0!==this.Rls&&(this.Ols=this.Nc.AB()*s[_T],this._ls=s[TT]/this.Rls*zT,this._ls+=this.Ols/this.Rls*zT),this.kls=this.Nc.AB()*s[CT],this.Fls=s[IT],this.Als=s[IT],this.Als+=this.kls,this.lMt=!!s[RT]),this.Ils===OT&&(this.Als=wT.Qh(this.Als)),this.oDt(),this.lMt&&this.LRt()}Jh(){super.Jh()}SG(){return{i:this._ls,e:this.lMt,mv:this.Ils,w:this.Cls,p:this.Rls,mag:this.Als,iv:this.DMt,iv2:this.Lls,r:this.Wls,lkv:this.Nls,lkv2:this.Bls}}bG(t){this._ls=t.i,this.rIt(t.e),this.Ils=t.mv,this.Cls=t.w,this.Rls=t.p,this.Als=t.mag,this.DMt=t.iv,this.Lls=t.iv2,this.Wls=t.r,this.Nls=t.lkv,this.Bls=t.lkv2}oDt(){const t=this.fi.iW();switch(this.Ils){case AT:this.DMt=t.rG();break;case PT:this.DMt=t.lG();break;case ET:this.DMt=t.My(),this.Wls=t.xy()/t.My();break;case FT:this.DMt=t.My();break;case DT:this.DMt=t.xy();break;case OT:this.DMt=t.tU();break;case kT:this.DMt=t.NF();break;case LT:this.DMt=0;break;case NT:this.DMt=t.rG(),this.Lls=t.lG();break;case BT:this.DMt=t.cG()}this.Nls=this.DMt,this.Bls=this.Lls}jls(t){switch(t%=zT,this.Cls){case WT:return Math.sin(t);case jT:return t<=JT?t/JT:t<=XT?1-2*(t-JT)/Math.PI:(t-XT)/JT-1;case VT:return 2*t/zT-1;case UT:return-2*t/zT+1;case HT:return t<Math.PI?-1:1}return 0}P7(){const t=this.Nc.qN(this.fi);this.lMt&&0!==t&&(0===this.Rls?this._ls=0:this._ls=(this._ls+t/this.Rls*zT)%zT,this.Vls())}Vls(){const t=this.fi.iW();switch(this.Ils){case AT:t.rG()!==this.Nls&&(this.DMt+=t.rG()-this.Nls),t.oG(this.DMt+this.jls(this._ls)*this.Als),this.Nls=t.rG();break;case PT:t.lG()!==this.Nls&&(this.DMt+=t.lG()-this.Nls),t.uG(this.DMt+this.jls(this._ls)*this.Als),this.Nls=t.lG();break;case ET:t.hy(this.DMt+this.jls(this._ls)*this.Als),t.ny(t.My()*this.Wls);break;case FT:t.hy(this.DMt+this.jls(this._ls)*this.Als);break;case DT:t.ny(this.DMt+this.jls(this._ls)*this.Als);break;case OT:t.tU()!==this.Nls&&(this.DMt=wT.Zh(this.DMt+(t.tU()-this.Nls))),t.QV(this.DMt+this.jls(this._ls)*this.Als),this.Nls=t.tU();break;case kT:t.WF(this.DMt+this.jls(this._ls)*this.Als/100);break;case NT:t.rG()!==this.Nls&&(this.DMt+=t.rG()-this.Nls),t.lG()!==this.Bls&&(this.Lls+=t.lG()-this.Bls),t.oG(this.DMt+Math.cos(t.tU())*this.jls(this._ls)*this.Als),t.uG(this.Lls+Math.sin(t.tU())*this.jls(this._ls)*this.Als),this.Nls=t.rG(),this.Bls=t.lG();break;case BT:t.fG(this.DMt+this.jls(this._ls)*this.Als)}t.Uz()}Uls(t,s){}Hls(t){this.Rls=t}zls(){return this.Rls}Jls(t){this.Als=t}Xls(t){5===this.Ils&&(t=wT.Qh(t)),this.Jls(t)}qls(){return this.Als}Yls(){let t=this.qls();return 5===this.Ils&&(t=wT.tn(t)),t}$ls(t){5===this.Ils&&5!==t&&(this.Als=wT.tn(this.Als)),this.Ils=t,this.oDt()}Kls(){return this.Ils}Zls(t){this.Cls=t}Qls(){return this.Cls}tus(t){this._ls=wT.Kh(t,0,2*Math.PI),this.Vls()}sus(){return this._ls}rIt(t){this.lMt=!!t,this.lMt?this.LRt():this.vRt()}aIt(){return this.lMt}_ot(t){switch(t){case vT:return this.Ils;case MT:return this.Cls;case GT:return this.Pls;case IT:return this.Fls;case RT:return this.lMt}}Eot(t,s){switch(t){case vT:this.Ils=qT[s],this.oDt();break;case MT:this.Cls=s;break;case GT:this.Pls=s,this.Rls=this.Pls+this.Dls,this.lMt||(0!==this.Rls?(this._ls=this.Els/this.Rls*zT,this._ls+=this.Ols/this.Rls*zT):this._ls=0);break;case IT:this.Fls=s,this.Als=this.Fls+this.kls,this.Ils===OT&&(this.Als=wT.Qh(this.Als));break;case RT:this.lMt=!!s}}jRt(){const t="behaviors.sin";return[{title:"$"+this.EX().Rc(),properties:[{name:t+".properties.enabled.name",value:this.aIt(),oQt:t=>this.rIt(t)},{name:t+".properties.period.name",value:this.zls(),oQt:t=>this.Hls(t)},{name:t+".properties.magnitude.name",value:this.Yls(),oQt:t=>this.Xls(t)},{name:t+".debugger.value",value:this.jls(this.sus())*this.Yls()}]}]}ZCt(){return self.ius}};const YT=new WeakMap,$T=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],KT=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.ius=class extends bT{constructor(){super(),YT.set(this,bT.OH().MX())}set eus(t){ST.ne(t),YT.get(this).Hls(t)}get eus(){return YT.get(this).zls()}set hus(t){ST.ne(t),YT.get(this).Jls(t)}get hus(){return YT.get(this).qls()}set nus(t){YT.get(this).tus(t)}get nus(){return YT.get(this).sus()}set rus(t){ST.le(t);const s=$T.indexOf(t);if(-1===s)throw new Error("invalid movement");YT.get(this).$ls(s)}get rus(){return $T[YT.get(this).Kls()]}set ous(t){ST.le(t);const s=KT.indexOf(t);if(-1===s)throw new Error("invalid wave");YT.get(this).Zls(s)}get ous(){return KT[YT.get(this).Qls()]}get value(){const t=YT.get(this);return t.jls(t.sus())*t.qls()}aus(){YT.get(this).oDt()}set isEnabled(t){YT.get(this).rIt(!!t)}get isEnabled(){return YT.get(this).aIt()}}}{const ZT=self._s;ZT.Iut.Tls.bW={_u(){return this.aIt()},lus(t){return this.Kls()===t},uus(t,s){return ZT.compare(this.zls(),t,s)},cus(t,s){return ZT.compare(this.Yls(),t,s)},fus(t){return this.Qls()===t}}}self._s.Iut.Tls.Urt={eCt(t){this.rIt(0!==t)},dus(t){this.Hls(t)},pus(t){this.Xls(t)},mus(t){this.$ls(t)},gus(t){this.Cls=t},yus(t){const s=2*Math.PI;this.tus(t*s%s)},wus(){this.oDt()}},self._s.Iut.Tls.Hrt={Sus(){return this.sus()/(2*Math.PI)},bus(){return this.zls()},vus(){return this.Yls()},Mus(){return this.jls(this.sus())*this.Yls()}};{let QT=function(t,s,i){const e=t.Nxt(),h=s.Nxt();if(i){const i=e.get(o_);i&&i.delete(s.J1());const n=h.get(o_);n&&n.delete(t.J1())}else{let i=e.get(o_);i||(i=new Set,e.set(o_,i));let n=h.get(o_);n||(n=new Set,h.set(o_,n)),i.add(s.J1()),n.add(t.J1())}};0;const t_=self._s,s_=self.Ls;let i_=null,e_=null,h_=[],n_=null,r_=null;const o_="Physics_DisabledCollisions";t_.Iut.Gus=class extends t_.RAt{constructor(t){super(t),r_=this,this.xus=null,this.Tus=10,this._us=.02,this.Ius=null,this.Cus=-1,this.Rus=1,this.Aus=8,this.Pus=3,this.Eus=!0,this.Nc.mW(this.Fus())}ZCt(){return self.Dus}async Fus(){const t=this.Nc.XL().kW("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{n_=t,this.Ous(),s()})})}Ous(){const t=this.Nc.$L();i_=t_.Iut.Gus.ZPt(0,0),e_=t_.Iut.Gus.ZPt(0,0),this.xus=new n_.b2World(t_.Iut.Gus.kus(0,this.Tus),!0);const s=new n_.JSContactListener;s.BeginContact=s=>{const i=n_.wrapPointer(s,n_.b2Contact),e=t_.Iut.Gus.Instance.Lus(i.GetFixtureA().GetBody()),h=t_.Iut.Gus.Instance.Lus(i.GetFixtureB().GetBody());t.HNt(e.DX(),h.DX())},s.EndContact=()=>{},s.PreSolve=()=>{},s.PostSolve=()=>{},this.xus.SetContactListener(s);const i=new n_.JSContactFilter;i.ShouldCollide=(t,s)=>{if(this.Eus)return!0;const i=n_.wrapPointer(t,n_.b2Fixture),e=n_.wrapPointer(s,n_.b2Fixture),h=t_.Iut.Gus.Instance.Lus(i.GetBody()),n=t_.Iut.Gus.Instance.Lus(e.GetBody()),r=h.DX().EH(),o=n.DX().EH(),a=r.J1(),l=o.J1(),u=r.Nxt().get(o_);if(u&&u.has(l))return!1;const c=o.Nxt().get(o_);return!c||!c.has(a)},this.xus.SetContactFilter(i),this.Ius=new n_.b2WorldManifold}Jh(){super.Jh()}Nus(){return n_}Bus(){return this.xus}Wus(){return this._us}jus(){return this.Rus}Vus(t){this.Rus=t}Uus(t){this.Cus=t}Hus(){return this.Cus}zus(t){this.Aus=Math.max(t,1)}Jus(){return this.Aus}Xus(t){this.Pus=Math.max(t,1)}qus(){return this.Pus}Yus(t,s){this.zus(t),this.Xus(s)}k6t(){return this.Tus}h6t(t){t!==this.Tus&&(this.xus.SetGravity(t_.Iut.Gus.kus(0,t)),this.Tus=t,this.$us())}$us(){for(const t of this.GV()){const s=t_.Iut.Gus.Instance.Kus(t);if(!s)continue;const i=s.Zus();i&&i.SetAwake(!0)}}Qus(){this.Eus=!1}tcs(t,s,i){if(i=!!i,t&&s){if(s.B1())for(const e of s.UV())QT(t,e,i);else QT(t,s,i);this.Qus()}}scs(){return this.Ius}static ics(){return o_}static ZPt(t,s){if(h_.length){const i=h_.pop();return i.set_x(t),i.set_y(s),i}return new(0,n_.b2Vec2)(t,s)}static ecs(t){h_.push(t)}static kus(t,s){return i_.set_x(t),i_.set_y(s),i_}static hcs(t,s){return e_.set_x(t),e_.set_y(s),e_}static ncs(t){const s=new(0,n_.b2PolygonShape),i=n_._malloc(8*t.length);let e=0;for(let s=0;s<t.length;++s)n_.HEAPF32[i+e>>2]=t[s].get_x(),n_.HEAPF32[i+(e+4)>>2]=t[s].get_y(),e+=8;const h=n_.wrapPointer(i,n_.b2Vec2);return s.Set(h,t.length),n_._free(i),s}};const a_=["fixed","variable"];self.Dus=class extends self.kX{constructor(){super()}set rcs(t){s_.ne(t),r_.h6t(t)}get rcs(){return r_.k6t()}set ocs(t){const s=a_.indexOf(t);if(s<0)throw new Error("invalid stepping mode");r_.Vus(a_[s])}get ocs(){return a_[r_.jus()]}set acs(t){s_.ne(t),r_.zus(t)}get acs(){return r_.Jus()}set lcs(t){s_.ne(t),r_.Xus(t)}get lcs(){return r_.qus()}ucs(t,s,i){const e=r_.AW(),h=e.oj(t),n=e.oj(s);i=!!i,r_.tcs(h,n,i)}}}{const l_=self._s;l_.Iut.Gus.BEt=class extends l_.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{let u_=function(t,s){return O_.get(t).AW().sW(s)};0;const c_=self._s,f_=self.Ls,d_=self.IX,p_=(self.assert,0),m_=1,g_=2,y_=3,w_=4,S_=5,b_=6,v_=7,M_=8,G_=9,x_=new WeakMap,T_=new WeakMap,__=new WeakMap,I_=-2147483648,C_=1073741824,R_=536870912,A_=3758096384,P_=c_.Iut.Gus.kus,E_=c_.Iut.Gus.hcs,F_=c_.zh(c_.Rect),D_=c_.zh(c_.Cl);c_.Iut.Gus.Instance=class extends c_.kAt{constructor(t,s){super(t);const i=this.RX(),e=this.iW();this.ccs=i.Nus(),this.xus=i.Bus(),this._us=i.Wus(),this.fcs=!1,this.dcs=0,this.pcs=0,this.mcs=!1,this.gcs=1,this.ycs=.5,this.wcs=.2,this.Scs=0,this.bcs=.01,this.vcs=!1,this.lMt=!0,this.Mcs=null,this.Gcs=[],this.xcs=[],this.Tcs=[],this._cs=new Set,this.Ics=e.rG(),this.Ccs=e.lG(),this.Rcs=e.tU(),this._2t=0,this.I2t=0,this.Acs=!1,s&&(this.fcs=!!s[p_],this.dcs=s[m_],this.mcs=!!s[g_],this.gcs=s[y_],this.ycs=s[w_],this.wcs=s[S_],this.Scs=s[b_],this.bcs=s[v_],this.vcs=!!s[M_],this.lMt=!!s[G_]);const h=this.Nc.wf();this.$f=new c_.Xf(c_.jf.Jf(h,"instancedestroy",t=>this.Ies(t.FX)),c_.jf.Jf(h,"beforeload",()=>this.C8()),c_.jf.Jf(h,"afterload",()=>this.P8())),T_.set(this.fi,this),this.lMt&&this.LRt()}BAt(){this.Pcs()}Jh(){this.Ecs(),c_.Sr(this.Tcs),this._cs.clear(),this.Mcs&&(this.Fcs(),this.xus.DestroyBody(this.Mcs),this.Mcs=null),super.Jh()}Dcs(t){if(!this.Mcs)return;const s=this.Mcs.CreateFixture(t);return this.Gcs.push(s),s}Fcs(){if(this.Mcs){for(const t of this.Gcs)this.Mcs.DestroyFixture(t);c_.Sr(this.Gcs)}}Ocs(){const t=this.iW();return t.fX()?(t.nJ(F_,D_,!1),D_):t.aJ()}kcs(t){this.ccs.destroy(t)}Pcs(){if(!this.lMt)return;const t=this.ccs.b2FixtureDef,s=this.ccs.b2BodyDef,i=this.iW(),e=i.OLt();if(this.pcs=this.dcs,e||this.fi.yDt()||0!==this.pcs||(this.pcs=1),!this.Mcs){const t=new s;t.set_type(this.fcs?0:2);let e=i.rG()*this._us,h=i.lG()*this._us;if(2===this.pcs){const t=this.Ocs();e=t.rl()*this._us,h=t.ol()*this._us}t.set_position(E_(e,h)),t.set_angle(i.tU()),t.set_fixedRotation(this.mcs),t.set_linearDamping(this.Scs),t.set_angularDamping(this.bcs),t.set_bullet(this.vcs),this.Mcs=this.xus.CreateBody(t),this.kcs(t),x_.set(this.Mcs,this)}this.Fcs();const h=new t;h.set_density(this.gcs),h.set_friction(this.ycs),h.set_restitution(this.wcs);const n=Math.max(Math.abs(i.My()),1),r=Math.max(Math.abs(i.xy()),1);0===this.pcs?this.fi.yDt()?this.Lcs(h):this.Ncs(h,n,r):1===this.pcs?this.Bcs(h,i,n,r):this.Wcs(h,n,r),this._2t=i.My(),this.I2t=i.xy(),i.BLt(!1),this.kcs(h)}Bcs(t,s,i,e){const h=new(0,this.ccs.b2PolygonShape),n=i*this._us,r=e*this._us;let o=s.Yz(),a=s.Zz();s.My()<0&&(o=1-o),s.xy()<0&&(a=1-a);const l=(.5-o)*n,u=(.5-a)*r,c=c_.Iut.Gus.ZPt(l,u);h.SetAsBox(n/2,r/2,c,0),t.set_shape(h),this.Dcs(t),this.kcs(h),c_.Iut.Gus.ecs(c)}Wcs(t,s,i){const e=new(0,this.ccs.b2CircleShape);e.set_m_radius(Math.min(s,i)*this._us*.5),t.set_shape(e),this.Dcs(t),this.kcs(e)}Ncs(t,s,i){const e=this.iW(),h=e.My()<0,n=e.xy()<0,r=this._us,o=e.NLt(h?-s:s,n?-i:i,0).du(),a=o.length/2,l=[];for(let t=0;t<a;++t)l.push(c_.Iut.Gus.ZPt(o[2*t],o[2*t+1]));h!==n&&l.reverse();const u=c_.Iut.Gus.Vcs.jcs(l,s*i);for(const t of l)c_.Iut.Gus.ecs(t);if(u.length)for(const s of u){for(const t of s)t.set_x(t.get_x()*r),t.set_y(t.get_y()*r);const i=c_.Iut.Gus.ncs(s);t.set_shape(i),this.Dcs(t),this.kcs(i);for(const t of s)c_.Iut.Gus.ecs(t)}else this.Bcs(t,e,s,i)}Lcs(t){const s=this._us,i=c_.Iut.Gus.ZPt,e=c_.Iut.Gus.ecs,h=[];this.fi.MX().o3t(h);const n=[];for(let r=0,o=h.length;r<o;++r){const o=h[r],a=o.KNt(),l=o.ZNt();if(l){let h=__.get(l);if(!h){const t=l.du(),s=l.pu();for(let e=0;e<s;++e)n.push(i(t[2*e],t[2*e+1]));const r=o.M5t()&A_;(r===I_||r===C_||r===R_||r&I_&&r&C_&&r&R_)&&n.reverse(),h=c_.Iut.Gus.Vcs.jcs(n,a.width()*a.height()),__.set(l,h);for(const t of n)e(t);c_.Sr(n)}for(let r=0,o=h.length;r<o;++r){const o=h[r];for(let t=0,e=o.length;t<e;++t)n.push(i((a.Za()+o[t].get_x())*s,(a.Qa()+o[t].get_y())*s));const l=c_.Iut.Gus.ncs(n);t.set_shape(l),this.Dcs(t),this.kcs(l);for(const t of n)e(t);c_.Sr(n)}}else{n.push(i(a.Za()*s,a.Qa()*s)),n.push(i(a.tl()*s,a.Qa()*s)),n.push(i(a.tl()*s,a.sl()*s)),n.push(i(a.Za()*s,a.sl()*s));const e=c_.Iut.Gus.ncs(n);t.set_shape(e),this.Dcs(t),this.kcs(e)}for(const t of n)e(t);c_.Sr(n)}}Ucs(){this.Mcs&&(this.Ecs(),x_.delete(this.Mcs),this.Fcs(),this.xus.DestroyBody(this.Mcs),this.Mcs=null)}Ecs(){for(const t of this.xcs)this.xus.DestroyJoint(t);c_.Sr(this.xcs)}Hcs(){for(const t of this.Tcs)switch(t.type){case 0:this.zcs(...t.Jcs);break;case 1:this.Xcs(...t.Jcs);break;case 2:this.qcs(...t.Jcs);break;case 3:this.Ycs(...t.Jcs)}}$cs(t){const s=this.iW();if(-1===t)return[s.rG(),s.lG()];if(0===t&&this.Mcs){const t=this.Mcs.GetWorldCenter();return[t.get_x()/this._us,t.get_y()/this._us]}return this.fi.HTt(t)}Kcs(t,s,i,e,h){if(!this.lMt||!s||s===this.fi)return;const n=c_.Iut.Gus.Instance.Kus(s);n&&n.aIt()&&(this.Tcs.push({type:0,Jcs:[t,s.zH(),i,e,h]}),this.zcs(t,s.zH(),i,e,h))}zcs(t,s,i,e,h){if(!this.lMt)return;const n=this.Nc.KB(s);if(!n||n===this.fi)return;const r=c_.Iut.Gus.Instance.Kus(n);if(!r||!r.aIt())return;r._cs.add(this.fi),this.Zcs(!1),r.Zcs(!1);const[o,a]=this.$cs(t),[l,u]=n.HTt(i),c=o-l,f=a-u,d=this.ccs.b2DistanceJointDef,p=this._us,m=new d;m.Initialize(this.Mcs,r.Zus(),P_(o*p,a*p),E_(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(h),this.xcs.push(this.xus.CreateJoint(m)),this.kcs(m)}Qcs(t,s){if(!this.lMt||!s||s===this.fi)return;const i=c_.Iut.Gus.Instance.Kus(s);i&&i.aIt()&&(this.Tcs.push({type:1,Jcs:[t,s.zH()]}),this.Xcs(t,s.zH()))}Xcs(t,s){if(!this.lMt)return;const i=this.Nc.KB(s);if(!i||i===this.fi)return;const e=c_.Iut.Gus.Instance.Kus(i);if(!e||!e.aIt())return;e._cs.add(this.fi),this.Zcs(!1),e.Zcs(!1);const[h,n]=this.$cs(t),r=this.ccs.b2RevoluteJointDef,o=this._us,a=new r;a.Initialize(this.Mcs,e.Zus(),P_(h*o,n*o)),this.xcs.push(this.xus.CreateJoint(a)),this.kcs(a)}tfs(t,s,i,e){if(!this.lMt||!s||s===this.fi)return;const h=c_.Iut.Gus.Instance.Kus(s);h&&h.aIt()&&(i=c_.tn(i),e=c_.tn(e),this.Tcs.push({type:2,Jcs:[t,s.zH(),i,e]}),this.qcs(t,s.zH(),i,e))}qcs(t,s,i,e){if(!this.lMt)return;const h=this.Nc.KB(s);if(!h||h===this.fi)return;const n=c_.Iut.Gus.Instance.Kus(h);if(!n||!n.aIt())return;n._cs.add(this.fi),this.Zcs(!1),n.Zcs(!1);const[r,o]=this.$cs(t),a=this.ccs.b2RevoluteJointDef,l=this._us,u=new a;u.Initialize(this.Mcs,n.Zus(),P_(r*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(c_.Qh(i)),u.set_upperAngle(c_.Qh(e)),this.xcs.push(this.xus.CreateJoint(u)),this.kcs(u)}sfs(t,s,i,e,h,n,r,o,a){if(!this.lMt||!s||s===this.fi)return;const l=c_.Iut.Gus.Instance.Kus(s);l&&l.aIt()&&(i=c_.tn(i),o=c_.tn(o),this.Tcs.push({type:3,Jcs:[t,s.zH(),i,e,h,n,r,o,a]}),this.Ycs(t,s.zH(),i,e,h,n,r,o,a))}Ycs(t,s,i,e,h,n,r,o,a){if(!this.lMt)return;const l=this.Nc.KB(s);if(!l||l===this.fi)return;const u=c_.Iut.Gus.Instance.Kus(l);if(!u||!u.aIt())return;u._cs.add(this.fi),this.Zcs(!1),u.Zcs(!1);const[c,f]=this.$cs(t);i=c_.Qh(i);const d=Math.cos(i),p=Math.sin(i),m=this.ccs.b2PrismaticJointDef,g=this._us,y=new m;y.Initialize(this.Mcs,u.Zus(),P_(c*g,f*g),E_(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(h*g),y.set_upperTranslation(n*g),y.set_enableMotor(!!r),y.set_motorSpeed(c_.Qh(o)),y.set_maxMotorForce(a),this.xcs.push(this.xus.CreateJoint(y)),this.kcs(y)}ifs(){this.lMt&&(this.Ecs(),c_.Sr(this.Tcs),this._cs.clear())}efs(){for(const t of this._cs){const s=c_.Iut.Gus.Instance.Kus(t);if(!s||!s.aIt())return;s.hfs(this.fi)}this._cs.clear()}Ies(t){this.hfs(t)}hfs(t){const s=t.zH();let i=0;for(let t=0,e=this.Tcs.length;t<e;++t)this.Tcs[i]=this.Tcs[t],i<this.xcs.length&&(this.xcs[i]=this.xcs[t]),this.Tcs[t].Jcs[1]===s?t<this.xcs.length&&this.xus.DestroyJoint(this.xcs[t]):++i;c_.wr(this.Tcs,i),i<this.xcs.length&&c_.wr(this.xcs,i),this._cs.delete(t)}Zus(){return this.Mcs}static Lus(t){return x_.get(t)||null}static Kus(t){return T_.get(t)||null}SG(){const t={e:this.lMt,im:this.fcs,pr:this.mcs,d:this.gcs,fr:this.ycs,re:this.wcs,ld:this.Scs,ad:this.bcs,b:this.vcs,mcj:this.Tcs};if(this.lMt){const s=this.Mcs.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.Mcs.GetAngularVelocity()}return t}C8(){this.Ecs(),c_.Sr(this.Tcs),this._cs.clear()}bG(t){this.Ucs(),this.lMt=t.e,t.hasOwnProperty("im")&&(this.fcs=!!t.im),this.mcs=t.pr,this.gcs=t.d,this.ycs=t.fr,this.wcs=t.re,this.Scs=t.ld,this.bcs=t.ad,this.vcs=t.b,this.Tcs=t.mcj;const s=this.iW();this.Ics=s.rG(),this.Ccs=s.lG(),this.Rcs=s.tU(),this._2t=s.My(),this.I2t=s.xy(),this.lMt&&(this.Pcs(),this.Mcs.SetLinearVelocity(P_(t.vx,t.vy)),this.Mcs.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.Mcs.SetAwake(!0),this.Tcs=t.mcj),this.lMt?this.LRt():this.vRt()}P8(){this.lMt&&this.Hcs()}P7(){if(!this.lMt)return;const t=this.Nc,s=this.RX();let i=0;0===s.jus()?i=t.hB()/60:(i=t.qN(this.fi),i>1/30&&(i=1/30));const e=t.rXt();e>s.Hus()&&t.hB()>0&&(0!==i&&this.xus.Step(i,s.Jus(),s.qus()),this.xus.ClearForces(),s.Uus(e)),this.Zcs(!0)}Zcs(t){const s=this.fi.iW(),i=this._us;(s.My()!==this._2t||s.xy()!==this.I2t||s.zLt())&&this.Pcs();const e=this.Mcs,h=s.rG(),n=s.lG(),r=h-this.Ics,o=n-this.Ccs,a=Math.abs(r)>.001||Math.abs(o)>.001,l=s.tU()!==this.Rcs;let u=h,c=n;if(2===this.pcs){const t=this.Ocs();u=t.rl(),c=t.ol()}a?(l?e.SetTransform(P_(u*i,c*i),s.tU()):e.SetTransform(P_(u*i,c*i),e.GetAngle()),t&&(e.SetLinearVelocity(P_(r,o)),this.Acs=!0),e.SetAwake(!0)):t&&this.Acs&&(this.Acs=!1,e.SetLinearVelocity(P_(0,0)),e.SetTransform(P_(u*i,c*i),e.GetAngle())),!a&&l&&(e.SetTransform(e.GetPosition(),s.tU()),e.SetAwake(!0));const f=e.GetPosition(),d=f.get_x()/i,p=f.get_y()/i,m=e.GetAngle();if((d!==s.rG()||p!==s.lG()||m!==s.tU())&&(s.zz(d,p),s.QV(m),s.Uz(),2===this.pcs)){const t=this.Ocs(),i=t.rl()-s.rG(),e=t.ol()-s.lG();0===i&&0===e||(s.Xz(-i,-e),s.Uz())}this.Ics=s.rG(),this.Ccs=s.lG(),this.Rcs=s.tU()}_ot(t){switch(t){case g_:return this.nfs();case y_:return this.rfs();case w_:return this.ofs();case S_:return this.afs();case b_:return this.lfs();case v_:return this.ufs();case M_:return this.cfs();case G_:return this.aIt()}}Eot(t,s){switch(t){case g_:this.ffs(s);break;case y_:this.dfs(s);break;case w_:this.pfs(s);break;case S_:this.mfs(s);break;case b_:this.gfs(s);break;case v_:this.yfs(s);break;case M_:this.wfs(s);break;case G_:this.rIt(s)}}rIt(t){t=!!t,this.lMt&&!t?(this.efs(),this.Ucs(),this.lMt=!1,this.vRt()):!this.lMt&&t&&(this.lMt=!0,this.Pcs(),this.LRt())}aIt(){return this.lMt}jRt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.aIt(),oQt:t=>this.rIt(t)},{name:t+".properties.immovable.name",value:this.Sfs(),oQt:t=>this.bfs(t)},{name:t+".properties.density.name",value:this.rfs(),oQt:t=>this.dfs(t)},{name:t+".properties.friction.name",value:this.ofs(),oQt:t=>this.pfs(t)},{name:t+".properties.elasticity.name",value:this.afs(),oQt:t=>this.mfs(t)},{name:t+".properties.linear-damping.name",value:this.lfs(),oQt:t=>this.gfs(t)},{name:t+".properties.angular-damping.name",value:this.ufs(),oQt:t=>this.yfs(t)}];return this.lMt&&(s.push({name:t+".debugger.is-sleeping",value:!this.vfs()}),s.push({name:t+".debugger.velocity-x",value:this.Mfs(),oQt:t=>this.Gfs(t,this.xfs())}),s.push({name:t+".debugger.velocity-y",value:this.xfs(),oQt:t=>this.Gfs(this.Mfs(),t)}),s.push({name:t+".debugger.angular-velocity",value:c_.tn(this.Tfs()),oQt:t=>this._fs(c_.Qh(t))}),s.push({name:t+".debugger.mass",value:this.Ifs()})),[{title:"$"+this.EX().Rc(),properties:s}]}Cfs(t,s,i){const[e,h]=this.$cs(i);this.Rfs(t,s,e,h)}Afs(t,s,i,e){const[h,n]=this.$cs(e),r=c_.rn(h,n,s,i);this.Rfs(Math.cos(r)*t,Math.sin(r)*t,h,n)}Pfs(t,s,i){const[e,h]=this.$cs(i);this.Rfs(Math.cos(s)*t,Math.sin(s)*t,e,h)}Rfs(t,s,i,e){if(!this.lMt)return;const h=this._us;this.Mcs.ApplyForce(P_(t,s),E_(i*h,e*h),!0)}Efs(t,s,i){const[e,h]=this.$cs(i);this.Ffs(t,s,e,h)}Dfs(t,s,i,e){const[h,n]=this.$cs(e),r=c_.rn(h,n,s,i);this.Ffs(Math.cos(r)*t,Math.sin(r)*t,h,n)}Ofs(t,s,i){const[e,h]=this.$cs(i);this.Ffs(Math.cos(s)*t,Math.sin(s)*t,e,h)}Ffs(t,s,i,e){if(!this.lMt)return;const h=this._us;this.Mcs.ApplyLinearImpulse(P_(t,s),E_(i*h,e*h),!0);const n=this.iW();this.Ics=n.rG(),this.Ccs=n.lG(),this.Acs=!1}kfs(t){this.lMt&&this.Mcs.ApplyTorque(t,!0)}Lfs(t,s){const i=c_.un(this.iW().tU(),s)?-1:1;this.kfs(t*i)}Nfs(t,s,i){const e=this.iW(),h=c_.rn(e.rG(),e.lG(),s,i),n=c_.un(e.tU(),h)?-1:1;this.kfs(t*n)}_fs(t){this.lMt&&(this.Mcs.SetAngularVelocity(t),this.Mcs.SetAwake(!0))}Tfs(){return this.lMt?this.Mcs.GetAngularVelocity():0}Gfs(t,s){if(!this.lMt)return;const i=this._us;this.Mcs.SetLinearVelocity(P_(t*i,s*i)),this.Mcs.SetAwake(!0);const e=this.iW();this.Ics=e.rG(),this.Ccs=e.lG(),this.Acs=!1}Bfs(){if(!this.lMt)return[0,0];const t=this._us,s=this.Mcs.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}Mfs(){return this.lMt?this.Mcs.GetLinearVelocity().get_x()/this._us:0}xfs(){return this.lMt?this.Mcs.GetLinearVelocity().get_y()/this._us:0}Wfs(t,s){if(!this.lMt)return;const i=this._us;this.Mcs.SetTransform(P_(t*i,s*i),this.Mcs.GetAngle());const e=this.iW();e.zz(t,s),e.Uz(),this.Ics=e.rG(),this.Ccs=e.lG()}dfs(t){if(this.lMt&&this.gcs!==t){this.gcs=t;for(const s of this.Gcs)s.SetDensity(t);this.Mcs.ResetMassData()}}rfs(){return this.lMt?this.gcs:0}pfs(t){if(this.lMt&&this.ycs!==t){this.ycs=t;for(const s of this.Gcs)s.SetFriction(t);if(this.Mcs)for(let t=this.Mcs.GetContactList();this.ccs.getPointer(t);t=t.get_next()){const s=t.get_contact();s&&s.ResetFriction()}}}ofs(){return this.lMt?this.ycs:0}mfs(t){if(this.lMt&&this.wcs!==t){this.wcs=t;for(const s of this.Gcs)s.SetRestitution(t)}}afs(){return this.lMt?this.wcs:0}gfs(t){this.lMt&&this.Scs!==t&&(this.Scs=t,this.Mcs.SetLinearDamping(t))}lfs(){return this.lMt?this.Scs:0}yfs(t){this.lMt&&this.bcs!==t&&(this.bcs=t,this.Mcs.SetAngularDamping(t))}ufs(){return this.lMt?this.bcs:0}bfs(t){this.lMt&&(t=!!t,this.fcs!==t&&(this.fcs=t,this.Mcs.SetType(this.fcs?0:2),this.Mcs.SetAwake(!0)))}Sfs(){return this.fcs}ffs(t){this.lMt&&(t=!!t,this.mcs!==t&&(this.mcs=t,this.Mcs.SetFixedRotation(this.mcs),this.Mcs.SetAngularVelocity(0),this.Mcs.SetAwake(!0)))}nfs(){return this.mcs}wfs(t){this.lMt&&(t=!!t,this.vcs!==t&&(this.vcs=t,this.Mcs.SetBullet(this.vcs),this.Mcs.SetAwake(!0)))}cfs(){return this.vcs}jfs(t){this.lMt&&this.Mcs.SetAwake(!!t)}vfs(){return!!this.lMt&&this.Mcs.IsAwake()}Ifs(){return this.lMt?this.Mcs.GetMass()/this._us:0}Vfs(){return this.lMt?this.Mcs.GetWorldCenter().get_x()/this._us:0}Ufs(){return this.lMt?this.Mcs.GetWorldCenter().get_y()/this._us:0}Hfs(){if(!this.lMt)return[0,0];const t=this.Mcs.GetWorldCenter(),s=this._us;return[t.get_x()/s,t.get_y()/s]}zfs(){if(!this.lMt)return 0;let t=0;for(let s=this.Mcs.GetContactList();this.ccs.getPointer(s);s=s.get_next()){const i=s.get_contact();i&&(t+=i.GetManifold().get_pointCount())}return t}Jfs(t){if(t=Math.floor(t),!this.lMt)return[0,0];let s=0;for(let i=this.Mcs.GetContactList();this.ccs.getPointer(i);i=i.get_next()){const e=i.get_contact();if(!e)continue;const h=e.GetManifold().get_pointCount();if(t>=s&&t<s+h){const i=t-s,h=this.RX().scs();e.GetWorldManifold(h);const n=h.get_points(i);return[n.get_x()/this._us,n.get_y()/this._us]}s+=h}return[0,0]}ZCt(){return self.Xfs}};const O_=new WeakMap;self.Xfs=class extends d_{constructor(){super(),O_.set(this,d_.OH().MX())}get isEnabled(){return O_.get(this).aIt()}set isEnabled(t){O_.get(this).rIt(t)}qfs(t,s,i=0){f_.ne(t),f_.ne(s),O_.get(this).Cfs(t,s,i)}Yfs(t,s,i,e=0){f_.ne(t),f_.ne(s),f_.ne(i),O_.get(this).Afs(t,s,i,e)}$fs(t,s,i=0){f_.ne(t),f_.ne(s),O_.get(this).Pfs(t,s,i)}Kfs(t,s,i=0){f_.ne(t),f_.ne(s),O_.get(this).Efs(t,s,i)}Zfs(t,s,i,e=0){f_.ne(t),f_.ne(s),f_.ne(i),O_.get(this).Dfs(t,s,i,e)}Qfs(t,s,i=0){f_.ne(t),f_.ne(s),O_.get(this).Ofs(t,s,i)}tds(t){f_.ne(t),O_.get(this).kfs(t)}sds(t,s){f_.ne(t),f_.ne(s),O_.get(this).Lfs(t,s)}ids(t,s,i){f_.ne(t),f_.ne(s),f_.ne(i),O_.get(this).Nfs(t,s,i)}set angularVelocity(t){f_.ne(t),O_.get(this)._fs(t)}get angularVelocity(){return O_.get(this).Tfs()}setVelocity(t,s){f_.ne(t),f_.ne(s),O_.get(this).Gfs(t,s)}eds(){return O_.get(this).Mfs()}hds(){return O_.get(this).xfs()}nds(){return O_.get(this).Bfs()}rds(t,s){f_.ne(t),f_.ne(s),O_.get(this).Wfs(t,s)}set ods(t){f_.ne(t),O_.get(this).dfs(t)}get ods(){return O_.get(this).rfs()}set ads(t){f_.ne(t),O_.get(this).pfs(t)}get ads(){return O_.get(this).ofs()}set lds(t){f_.ne(t),O_.get(this).mfs(t)}get lds(){return O_.get(this).afs()}set uds(t){f_.ne(t),O_.get(this).gfs(t)}get uds(){return O_.get(this).lfs()}set cds(t){f_.ne(t),O_.get(this).yfs(t)}get cds(){return O_.get(this).ufs()}set fds(t){O_.get(this).bfs(t)}get fds(){return O_.get(this).Sfs()}set dds(t){O_.get(this).ffs(t)}get dds(){return O_.get(this).nfs()}set pds(t){O_.get(this).wfs(t)}get pds(){return O_.get(this).cfs()}get mds(){return O_.get(this).Ifs()}gds(){return O_.get(this).Vfs()}yds(){return O_.get(this).Ufs()}wds(){return O_.get(this).Hfs()}Sds(){return O_.get(this).zfs()}bds(t){return f_.ne(t),O_.get(this).Jfs(t)[0]}vds(t){return f_.ne(t),O_.get(this).Jfs(t)[1]}Mds(t){return f_.ne(t),O_.get(this).Jfs(t)}set Gds(t){O_.get(this).jfs(!!t)}get Gds(){return O_.get(this).vfs()}get xds(){return!O_.get(this).vfs()}Tds(t,s,i,e,h){f_.ne(e),f_.ne(h);const n=u_(this,s);O_.get(this).Kcs(t,n,i,e,h)}_ds(t,s){const i=u_(this,s);O_.get(this).Qcs(t,i)}Ids(t,s,i,e){f_.ne(i),f_.ne(e);const h=u_(this,s);O_.get(this).tfs(t,h,i,e)}Cds(t,s,i,e,h,n,r,o,a){const l=u_(this,s);O_.get(this).sfs(t,l,i,e,h,n,r,o,a)}Rds(){O_.get(this).ifs()}}}{const k_=self._s;k_.Iut.Gus.bW={Ads(){return!this.vfs()},Pds(){return this.Sfs()},Eds(t,s,i){if(!this.lMt)return!1;let e=0;if(0===t)e=this.Mfs();else if(1===t)e=this.xfs();else{const[t,s]=this.Bfs();e=Math.hypot(t,s)}return k_.compare(e,s,i)},Fds(t,s){if(!this.lMt)return!1;const i=k_.tn(this.Tfs());return k_.compare(i,t,s)},Dds(t,s){if(!this.lMt)return!1;const i=this.Ifs();return k_.compare(i,t,s)},_u(){return this.aIt()}}}{const L_=self._s;L_.Iut.Gus.Urt={Ods(t,s,i){this.Cfs(t,s,i)},kds(t,s,i,e){this.Afs(t,s,i,e)},Lds(t,s,i){this.Pfs(t,L_.Qh(s),i)},Nds(t,s,i){this.Efs(t,s,i)},Bds(t,s,i,e){this.Dfs(t,s,i,e)},Wds(t,s,i){this.Ofs(t,L_.Qh(s),i)},jds(t){this.kfs(L_.Qh(t))},Vds(t,s){this.Lfs(L_.Qh(t),L_.Qh(s))},Uds(t,s,i){this.Nfs(L_.Qh(t),s,i)},Hds(t){this._fs(L_.Qh(t))},zds(t,s,i,e,h){if(!s)return;const n=s.v_t(this.fi);this.Kcs(t,n,i,e,h)},Jds(t,s){if(!s)return;const i=s.v_t(this.fi);this.Qcs(t,i)},Xds(t,s,i,e){if(!s)return;const h=s.v_t(this.fi);this.tfs(t,h,L_.Qh(i),L_.Qh(e))},qds(t,s,i,e,h,n,r,o,a){if(!s)return;const l=s.v_t(this.fi);this.sfs(t,l,L_.Qh(i),e,h,n,r,L_.Qh(o),a)},Yds(){this.ifs()},$ds(t){this.RX().h6t(t)},Vus(t){this.RX().Vus(t)},Yus(t,s){this.RX().Yus(t,s)},Kds(t,s){this.Gfs(t,s)},Zds(t,s){this.Wfs(t,s)},Qds(t){this.dfs(t)},tps(t){this.pfs(t)},sps(t){this.mfs(t)},ips(t){this.gfs(t)},eps(t){this.yfs(t)},hps(t){this.bfs(t)},nps(t,s){this.RX().tcs(this.EH(),t,0!==s)},rps(t){this.ffs(0!==t)},ops(t){this.wfs(0!==t)},aps(t){this.jfs(!!t)},eCt(t){this.rIt(0!==t)}}}{const N_=self._s;N_.Iut.Gus.Hrt={lps(){return this.Mfs()},ups(){return this.xfs()},cps(){return N_.tn(this.Tfs())},fps(){return this.Ifs()},dps(){return this.Vfs()},pps(){return this.Ufs()},mps(){return this.rfs()},gps(){return this.ofs()},yps(){return this.afs()},wps(){return this.lfs()},Sps(){return this.ufs()},bps(){return this.zfs()},vps(t){return this.Jfs(t)[0]},Mps(t){return this.Jfs(t)[1]}}}{let B_=function(t){return H_(t.get_x(),t.get_y())},W_=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,j_(i));return s},j_=function(t){const s=[];s.push(t.splice(0,8));const i=s[0][0];let e=s[0][7];for(;t.length;){const h=t.splice(0,Math.min(t.length,6));let n=h.at(-1);h.push(B_(i)),h.push(B_(e)),s.push(h),e=n}return s};0;const V_=self._s,U_={};V_.Iut.Gus.Vcs=U_;const H_=V_.Iut.Gus.ZPt,z_=V_.Iut.Gus.ecs;U_.Gps=function(t,s,i,e,h,n){return t*e+i*n+h*s-s*i-e*h-n*t},U_.xps=function(t,s,i,e,h,n,r,o){const a=i-t,l=e-s,u=r-h,c=o-n,f=(u*(n-s)-c*(h-t))/(l*u-a*c),d=t+f*a,p=s+f*l,m=U_.Tps(i,e,t,s,d,p),g=U_.Tps(d,p,h,n,r,o);return m&&g?H_(d,p):null},U_.Tps=function(t,s,i,e,h,n){return(i+.1>=t&&t>=h-.1||i-.1<=t&&t<=h+.1)&&(e+.1>=s&&s>=n-.1||e-.1<=s&&s<=n+.1)&&U_._ps(t,s,i,e,h,n)},U_._ps=function(t,s,i,e,h,n){if(Math.abs(h-i)>.1){const r=(n-e)/(h-i)*(t-i)+e;return Math.abs(r-s)<.1}return Math.abs(t-i)<.1},U_.Ips=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},U_.jcs=function(t,s){if(3===t.length)return[t.map(t=>H_(t.get_x(),t.get_y()))];const i=U_.Cps(t);let e=[];for(let t=0,h=i.length;t<h;++t){const h=i[t],n=[];let r=0;for(let t=0,s=h.length;t<s;++t){const i=h[t],e=h[(t+1)%s];r+=i.get_x()*e.get_y()-i.get_y()*e.get_x(),n.push(H_(i.get_x(),i.get_y()))}if(r=Math.abs(r/2),r>=.001*s)e.push(n);else for(let t=0,s=n.length;t<s;t++)z_(n[t])}return e=W_(e),e},U_.Cps=function(t){let s,i,e,h,n,r,o,a=[],l=0,u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=0,w=0,S=0,b=0,v=0,M=0,G=0,x=[],T=[],_=!1,I=[],C=[],R=!1;for(C.push(t);C.length;){for(a=C[0],u=a.length,_=!0,l=0;l<u;l++)if(y=l,w=l<u-1?l+1:l+1-u,S=l<u-2?l+2:l+2-u,s=a[y],i=a[w],e=a[S],f=U_.Gps(s.get_x(),s.get_y(),i.get_x(),i.get_y(),e.get_x(),e.get_y()),f<0){for(_=!1,g=1e9,c=0;c<u;c++)c!==y&&c!==w&&(b=c,v=c<u-1?c+1:0,h=a[b],n=a[v],r=U_.xps(s.get_x(),s.get_y(),i.get_x(),i.get_y(),h.get_x(),h.get_y(),n.get_x(),n.get_y()),r&&(p=i.get_x()-r.get_x(),m=i.get_y()-r.get_y(),d=p*p+m*m,d<g?(G=b,M=v,o=r,g=d):z_(r)));if(1e9===g)return[];for(x=[],T=[],b=G,v=M,h=a[b],n=a[v],R=!1,U_.Ips(o.get_x(),o.get_y(),n.get_x(),n.get_y())||(x.push(o),R=!0),U_.Ips(o.get_x(),o.get_y(),h.get_x(),h.get_y())||(T.push(o),R=!0),R||z_(o),G=-1,M=y;;){if(M===v){if(G<0||G>=u)return[];U_.Tps(n.get_x(),n.get_y(),a[G].get_x(),a[G].get_y(),s.get_x(),s.get_y())||x.push(a[M]);break}x.push(a[M]),G=M,M-1<0?M=u-1:M--}for(x.reverse(),G=-1,M=w;;){if(M===b){if(G<0||G>=u)return[];M!==b||U_.Tps(h.get_x(),h.get_y(),a[G].get_x(),a[G].get_y(),i.get_x(),i.get_y())||T.push(a[M]);break}T.push(a[M]),G=M,M+1>u-1?M=0:M++}C.push(x,T),C.shift();break}_&&I.push(C.shift())}return I}}{const J_=self._s;J_.Iut.Rps=class extends J_.RAt{constructor(t){super(t),this.Aps=0,this.Pps=0,this.Eps=0,this.Fps=0}Jh(){super.Jh()}Dps(t){this.Aps=t}Ops(){return this.Aps}kps(t){this.Pps=t}Lps(){return this.Pps}Nps(t){this.Eps=t}Bps(){return this.Eps}Wps(t){this.Fps=t}jps(){return this.Fps}}}{const X_=self._s;X_.Iut.Rps.BEt=class extends X_.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const q_=self._s,Y_=0;q_.Iut.Rps.Instance=class extends q_.kAt{constructor(t,s){super(t),this.lMt=!0,s&&(this.lMt=s[Y_]),this.lMt&&this.BRt()}Jh(){super.Jh()}SG(){const t=this.RX();return{e:this.lMt,smg:t.Ops(),ss:t.Lps(),se:t.Bps(),smd:t.jps()}}bG(t){const s=this.RX();s.Dps(t.smg),s.kps(t.ss),s.Nps(t.se),s.Wps(t.smd),this.lMt=t.e,this.lMt?this.BRt():this.MRt()}rIt(t){this.lMt=!!t,this.lMt?this.BRt():this.MRt()}_u(){return this.lMt}kRt(){if(!this._u())return;this.Nc.qN(this.fi);const t=this.RX(),s=t.GV();let i=0,e=0,h=0;for(const t of s){const s=t.HDt(q_.Iut.Rps);if(!s||!s.MX()._u())continue;const n=t.iW();i+=n.rG(),e+=n.lG(),++h}const n=this.fi.iW().kB(),r=this.Nc.ZN();let o=0,a=0;if(r>=t.Lps()&&r<t.Bps()){let s=t.Ops()*Math.min(this.Nc.hB(),1);0===t.jps()&&(s*=1-(r-t.Lps())/(t.Bps()-t.Lps()));const i=this.Nc.AB()*Math.PI*2,e=this.Nc.AB()*s;o=Math.cos(i)*e,a=Math.sin(i)*e}n.sU(i/h+o),n.eU(e/h+a)}_ot(t){if(t===Y_)return this.lMt}Eot(t,s){t===Y_&&(this.lMt=!!s,this.lMt?this.BRt():this.MRt())}jRt(){return[{title:"$"+this.EX().Rc(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this._u(),oQt:t=>this.rIt(t)}]}]}}}self._s.Iut.Rps.bW={_u(){return this._u()}},self._s.Iut.Rps.Urt={Vps(t,s,i){const e=this.RX();e.Dps(t),e.kps(this.Nc.ZN()),e.Nps(this.Nc.ZN()+s),e.Wps(i)},eCt(t){this.rIt(0!==t)}},self._s.Iut.Rps.Hrt={};{const $_=self._s;$_.Iut.Ks=class extends $_.RAt{constructor(t){super(t)}Jh(){super.Jh()}}}{const K_=self._s;K_.Iut.Ks.BEt=class extends K_.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{let Z_=function(t,s,i,e,h){const n=s*h,r=i*h;return Q_.Kh(t*h+.5*e*h*h,n,r)};0;const Q_=self._s,tI=self.Ls,sI=self.IX,iI=0,eI=1,hI=2,nI=3,rI=4,oI=5,aI=6,lI=7,uI=8,cI=9,fI=.05;Q_.Iut.Ks.Instance=class extends Q_.kAt{constructor(t,s){super(t),this.Ups=null,this.Hps=!1,this.zps=!1,this.Jps=!1,this.Xps=!1,this.qps=!1,this.Yps=!1,this.$ps=!1,this.Kps=!1,this.Zps=!1,this.Qps=!1,this.tms=null,this.sms=-1,this.ims=0,this.ems=0,this.hms=!1,this.nms=!1,this.rms=this.Nc.$L().rBt(this.fi),this.oms=-1,this.ams="stopped",this.lms=-1,this.F4t=!0,this.ums=0,this.cms=0,this.fms=0,this.dms=0,this.pms=0,this.mms=0,this.To=1500,this.gms=1500,this.yms=Q_.Qh(90),this.wms=330,this.Sms=1500,this.bms=1500,this.vms=650,this.Mms=1e3,this.Gms=!1,this.xms=0,this.Tms=0,this._ms=!0,this.Ims=0,this.lMt=!0,s&&(this.wms=s[iI],this.Sms=s[eI],this.bms=s[hI],this.vms=s[nI],this.To=s[rI],this.Mms=s[oI],this.Gms=!!s[aI],this.xms=s[lI]/1e3,this._ms=!!s[uI],this.lMt=!!s[cI]);const i=this.Nc.wf();this.$f=new Q_.Xf(Q_.jf.Jf(i,"instancedestroy",t=>this.Ies(t.FX)),Q_.jf.Jf(i,"afterload",t=>this.P8())),this._ms&&this.Cms(),this.lMt&&this.jAt(),this.Rms()}Jh(){this.Ups&&(this.Ups.Jh(),this.Ups=null),this.tms=null,this.rms=null,super.Jh()}Cms(){if(this.Ups)return;const t=this.Nc.wf();this.Ups=new Q_.Xf(Q_.jf.Jf(t,"keydown",t=>this.crs(t.data)),Q_.jf.Jf(t,"keyup",t=>this.frs(t.data)),Q_.jf.Jf(t,"window-blur",()=>this.drs()),Q_.jf.Jf(t,"keyboard-blur",()=>this.drs()))}Ams(){this.Ups&&(this.Ups.Jh(),this.Ups=null)}Ies(t){this.tms===t&&(this.tms=null),this.rms===t&&(this.rms=null)}crs(t){switch(t.key){case"ArrowLeft":this.Hps=!0;break;case"ArrowRight":this.zps=!0;break;case"ArrowUp":this.Jps=!0}}frs(t){switch(t.key){case"ArrowLeft":this.Hps=!1;break;case"ArrowRight":this.zps=!1;break;case"ArrowUp":this.Jps=!1,this.Xps=!1}}drs(){this.Hps=!1,this.zps=!1,this.Jps=!1,this.Xps=!1}SG(){return{ii:this.$ps,lfx:this.ims,lfy:this.ems,lfo:this.tms?this.tms.zH():-1,am:this.ams,en:this.lMt,fallt:this.lms,ft:this.F4t,dx:this.ums,dy:this.cms,ms:this.wms,acc:this.Sms,dec:this.bms,js:this.vms,g:this.To,g1:this.gms,mf:this.Mms,wof:this.nms,woj:this.rms?this.rms.zH():-1,ga:this.yms,edj:this.Gms,cdj:this.Yps,dj:this.qps,sus:this.xms,dc:this._ms,cc:this.Ims}}bG(t){this.$ps=t.ii,this.ims=t.lfx,this.ems=t.lfy,this.sms=t.lfo,this.ams=t.am;const s=t.en;this.lms=t.fallt||-1,this.F4t=t.ft,this.ums=t.dx,this.cms=t.dy,this.wms=t.ms,this.Sms=t.acc,this.bms=t.dec,this.vms=t.js,this.To=t.g,this.gms=t.g1,this.Mms=t.mf,this.nms=t.wof,this.oms=t.woj,this.yms=t.ga,this.Gms=t.edj,this.Yps=t.cdj,this.qps=t.dj,this.xms=t.sus,this._ms=t.dc,this.Ims=t.cc||0,this.Hps=!1,this.zps=!1,this.Jps=!1,this.Xps=!1,this.Kps=!1,this.Zps=!1,this.Qps=!1,this.Tms=0,this._ms?this.Cms():this.Ams(),this.rIt(s),this.Rms()}P8(){-1===this.sms?this.tms=null:this.tms=this.Nc.KB(this.sms),-1===this.oms?this.rms=null:this.rms=this.Nc.KB(this.oms)}Pms(t){if(this.tms=t,t){const s=t.iW();this.ims=s.rG(),this.ems=s.lG()}}Ems(){return this.Nc.ZN()>this.lms+fI}Rms(){this.fms=Math.cos(this.yms),this.dms=Math.sin(this.yms),this.pms=Math.cos(this.yms-Math.PI/2),this.mms=Math.sin(this.yms-Math.PI/2),this.fms=Q_.xn(this.fms,6),this.dms=Q_.xn(this.dms,6),this.pms=Q_.xn(this.pms,6),this.mms=Q_.xn(this.mms,6),this.gms=this.To,this.To<0&&(this.fms*=-1,this.dms*=-1,this.To=Math.abs(this.To))}Fms(){return this.To<0?-1:1}Dms(){const t=this.fi.iW(),s=this.Nc.$L(),i=this.fi,e=this.tms,h=t.rG(),n=t.lG();if(t.Xz(this.fms,this.dms),t.Uz(),!e||!s.ZW(i,e)||e.EH().kFt()&&!s.bLt(e,i)||e.EH().LFt()&&!e.MDt()){let e=s.sj(i),r=null;if(!e&&this.Ems()&&(r=s.rBt(i,!0)),t.zz(h,n),t.Uz(),e)return s.ZW(i,e)?null:(this.hms=!1,e);if(r&&r.length){let t=0;for(let e=0,h=r.length;e<h;++e)r[t]=r[e],s.ZW(i,r[e])||++t;if(t>=1)return this.hms=!0,r[0]}return null}return t.zz(h,n),t.Uz(),e}WAt(){if(!this.lMt)return;const t=this.Nc.qN(this.fi);this.Jps||this.Qps||(this.Xps=!1);let s=this.Hps||this.Kps,i=this.zps||this.Zps,e=this.Jps||this.Qps,h=e&&!this.Xps;this.Kps=!1,this.Zps=!1,this.Qps=!1,this.$ps&&(s=!1,i=!1,e=!1,h=!1),e||(this.Tms=0),this.Oms();const[n,r,o]=this.kms();let a=this.Dms();const l=a&&!this.nms;let u=!1;if([u,a]=this.Lms(a),u)return;this.Nms(a,o,n,e),h=this.Bms(a,h,e),a||this.Wms(h,e,t),this.nms=!!a;const c=this.jms(s,i);let f=!1,d=0;if(0!==this.ums&&([f,a]=this.Vms(t,c,a,h)),0!==this.cms){const[s,i]=this.Ums(t,a);f=f||s,d=i}!f&&l&&this.cms<0&&d>0&&(this.cms=0,f=!0),this.Hms(s,i,c,t),a&&!h||f||(this.cms=Math.min(this.cms+this.To*t,this.Mms)),this.zms(a,f,h),this.rms=this.Nc.$L().rBt(this.fi)}Oms(){if(!this.F4t)return;const t=this.fi,s=this.Nc.$L();(s.sj(t)||s.rBt(t))&&s.aBt(t,-this.fms,-this.dms,4,!0),this.F4t=!1}kms(){const t=this.tms,s=t?t.iW():null;let i=0,e=0,h=!1;if(t&&0===this.cms&&(s.lG()!==this.ems||s.rG()!==this.ims)){const t=this.fi,n=t.iW(),r=this.Nc.$L(),o=s.rG(),a=s.lG();i=o-this.ims,e=a-this.ems,n.Xz(i,e),n.Uz(),this.ims=o,this.ems=a,h=!0;const l=r.sj(t);l&&(r.HNt(t,l),r.aBt(t,-i,-e,2.5*Q_.sn(i,e)))}return[i,e,h]}Lms(t){let s=!1;const i=this.fi,e=i.iW(),h=this.Nc.$L(),n=h.sj(i);if(!n)return[!1,t];const r=Math.abs(e.My()),o=Math.abs(e.xy());return h.aBt(i,-this.fms,-this.dms,o/8)?(h.HNt(i,n),t=n,this.Pms(n),this.hms=!1,this.cms=0):h.uBt(i,this.pms,this.mms,r/2)||h.uBt(i,this.fms,this.dms,o/2)||h.cBt(i,Math.max(r,o)/2)?h.HNt(i,n):s=!0,[s,t]}Nms(t,s,i,e){const h=this.fi,n=this.Nc.$L();if(t){const e=this.fms,r=this.dms,o=this.pms,a=this.mms;if(this.qps=!1,this.Yps=!1,this.cms>0&&(this.nms||(n.lBt(h,-e,-r,t,16),this.nms=!0),this.cms=0),this.tms!==t)this.Pms(t),n.HNt(h,t);else if(s){const t=n.sj(h);t&&(n.HNt(h,t),0!==i&&(i>0?n.aBt(h,-o,-a):n.aBt(h,o,a)),n.aBt(h,-e,-r))}}else e||(this.Yps=!0)}Bms(t,s,i){if(t&&s||!t&&this.Gms&&i&&this.Yps&&!this.qps){const i=this.fi,e=i.iW(),h=this.Nc.$L(),n=e.rG(),r=e.lG();e.Xz(-this.fms,-this.dms),e.Uz(),h.sj(i)?s=!1:(this.Tms=this.xms,this.pz(Q_.Iut.Ks.bW.Jms),this.ams="jumping",this.cms=-this.vms,s=!0,t?this.Xps=!0:this.qps=!0),e.zz(n,r),e.Uz()}return s}Wms(t,s,i){s&&this.Tms>0?(this.cms=-this.vms,this.Tms-=i):this.tms=null,t&&(this.Xps=!0)}jms(t,s){let i=0;const e=this.Sms,h=this.bms;return t&&!s&&(i=this.ums>0?-(e+h):-e),s&&!t&&(i=this.ums<0?e+h:e),i}Hms(t,s,i,e){const h=this.bms;t===s&&(this.ums<0?this.ums=Math.min(this.ums+h*e,0):this.ums>0&&(this.ums=Math.max(this.ums-h*e,0))),this.ums=Q_.Kh(this.ums+i*e,-this.wms,this.wms);const n=this.Nc.$L(),r=this.ums<0?this.Xms(0,1,1):null;if(r)this.ums=0,n.HNt(this.fi,r);else{const t=this.ums>0?this.Xms(1,1,1):null;t&&(this.ums=0,n.HNt(this.fi,t))}}Vms(t,s,i,e){const h=this.fi,n=h.iW(),r=this.Nc.$L(),o=this.fms,a=this.dms,l=this.pms,u=this.mms,c=this.wms;let f=!1;const d=new Set(r.rBt(h,!0));let p=n.rG(),m=n.lG();const g=Z_(this.ums,-c,c,s,t)*l,y=Z_(this.ums,-c,c,s,t)*u;n.Xz(l*(this.ums>1?1:-1)-o,u*(this.ums>1?1:-1)-a),n.Uz();let w=!1;const S=r.sj(h);n.zz(p+g,m+y),n.Uz();let b=r.sj(h);if(!b&&i&&this.hms&&(b=r.rBt(h),d.has(b)?b=null:w=!0),b){let s=Math.abs(this.ums*t)+2;S||!r.aBt(h,-o,-a,s,w,b)?(r.HNt(h,b),s=Math.max(Math.abs(this.ums*t*2.5),Math.floor(n.My())),r.aBt(h,l*(this.ums<0?1:-1),u*(this.ums<0?1:-1),s,!1)?!i||w||this.hms||(p=n.rG(),m=n.lG(),n.Xz(o,a),r.sj(h)&&r.aBt(h,-o,-a,3,!1)||(n.zz(p,m),n.Uz())):(n.zz(p,m),n.Uz()),w||(this.ums=0)):!S&&!e&&Math.abs(this.cms)<Math.abs(this.vms/4)&&(this.cms=0,i||(f=!0))}else{const s=this.Dms();if(i&&!s){const s=Math.ceil(Math.abs(this.ums*t))+2;p=n.rG(),m=n.lG(),n.Xz(o*s,a*s),n.Uz();const e=r.rBt(h);let l=!1;e&&!d.has(e)&&r.aBt(h,-o,-a,s+2,!0,e)&&(i=e,this.Pms(e),this.hms=!0,l=!0),l||(r.sj(h)?r.aBt(h,-o,-a,s+2,!1):(n.zz(p,m),n.Uz()))}else s&&(!i&&this.hms&&(this.Pms(s),this.cms=0,f=!0),0===this.cms&&r.lBt(h,-o,-a,s,16))}return[f,i]}Ums(t,s){const i=this.fi,e=i.iW(),h=this.Nc.$L(),n=this.fms,r=this.dms;let o=!1,a=e.rG(),l=e.lG();const u=Z_(this.cms,-1/0,this.Mms,this.To,t);if(this.cms<0&&u>0&&s)return this.cms=0,[!1,0];e.Xz(u*n,u*r);const c=e.rG(),f=e.lG();e.Uz();let d=h.sj(i),p=!1;if(!d&&this.cms>0&&!s){const t=this.Ems()?h.rBt(i,!0):null;if(t&&t.length){if(this.rms){e.zz(a,l),e.Uz();let s=0;for(let e=0,n=t.length;e<n;++e)t[s]=t[e],h.ZW(i,t[e])||++s;Q_.wr(t,s),e.zz(c,f),e.Uz()}t.length>=1&&(d=t[0])}p=!!d}if(d){h.HNt(i,d),this.Tms=0;let s=1.1;p&&!this.rms&&(s=2);const u=Math.max(Math.abs(this.cms*t*s),2);h.aBt(i,n*(this.cms<0?1:-1),r*(this.cms<0?1:-1),u,p,d)?(this.Pms(d),this.hms=p,this.cms>0&&(o=!0),(this.cms>0||0===this.Ims)&&(this.cms=0),this.cms<0&&1===this.Ims&&h.lBt(i,n,r,d,32)):(e.zz(a,l),e.Uz(),this.nms=!0,p||(this.cms=0))}return[o,u]}zms(t,s,i){"falling"!==this.ams&&this.cms>0&&!t&&(this.pz(Q_.Iut.Ks.bW.qms),this.ams="falling"),(t||s)&&this.cms>=0&&("falling"===this.ams||s||i&&0===this.cms?(this.pz(Q_.Iut.Ks.bW.Yms),0===this.ums&&0===this.cms?this.ams="stopped":this.ams="moving"):("stopped"!==this.ams&&0===this.ums&&0===this.cms&&(this.pz(Q_.Iut.Ks.bW.$ms),this.ams="stopped"),"moving"===this.ams||0===this.ums&&0===this.cms||i||(this.pz(Q_.Iut.Ks.bW.Kms),this.ams="moving")))}Zms(){return 0!==this.Qms()||0!==this.tgs()}sgs(){if(0!==this.cms)return!1;const t=this.fi,s=this.iW(),i=this.Nc.$L(),e=s.rG(),h=s.lG();s.Xz(this.fms,this.dms),s.Uz();const n=i.sj(t);let r=null;if(!n&&this.Ems()&&(r=i.rBt(t,!0)),s.zz(e,h),s.Uz(),n)return!i.ZW(t,n);if(r&&r.length){let s=0;for(let e=0,h=r.length;e<h;++e)r[s]=r[e],i.ZW(t,r[e])||s++;if(s>=1)return!0}return!1}igs(t,s=2,i=3){return!!this.Xms(t,s,i)}Xms(t,s=2,i=3){const e=this.fi,h=this.iW(),n=this.Nc.$L(),r=h.rG(),o=h.lG();if(0===t?h.Xz(-this.pms*s,-this.mms*s):h.Xz(this.pms*s,this.mms*s),h.Uz(),!n.sj(e))return h.zz(r,o),h.Uz(),null;h.Xz(-this.fms*i,-this.dms*i),h.Uz();const a=n.sj(e);return h.zz(r,o),h.Uz(),a}egs(){const t=this.iW(),s=t.rG(),i=t.lG();t.Xz(this.fms,this.dms),t.Uz();const e=this.Nc.$L().rBt(this.fi,!1);t.zz(s,i),t.Uz(),e&&(this.lms=this.Nc.ZN(),this.tms=null)}hgs(t){this.qps=!t}ngs(){return Math.hypot(this.ums,this.cms)}rgs(){return Math.atan2(this.cms,this.ums)}ogs(){return this.cms<0}ags(){return this.cms>0}lgs(t){this.wms=Math.max(t,0)}ugs(){return this.wms}cgs(t){this.Sms=Math.max(t,0)}fgs(){return this.Sms}dgs(t){this.bms=Math.max(t,0)}pgs(){return this.bms}mgs(t){this.vms=Math.max(t,0)}ggs(){return this.vms}ygs(t){this.Mms=Math.max(t,0)}wgs(){return this.Mms}Sgs(t){if(this.gms===t)return;this.To=t,this.Rms();const s=this.Nc.$L(),i=this.iW();s.sj(this.fi)&&(s.aBt(this.fi,this.fms,this.dms,10),i.Xz(2*this.fms,2*this.dms),i.Uz()),this.tms=null}bgs(){return this.To}vgs(t){t=Q_.Zh(t),this.yms!==t&&(this.yms=t,this.Rms(),this.tms=null)}Mgs(){return this.yms}Ggs(t){this.Gms=!!t}xgs(){return this.Gms}Tgs(t){this.xms=t}_gs(){return this.xms}Igs(t){this.Ims=t}Cgs(){return this.Ims}Rgs(t){this.ums=t}Qms(){return this.ums}Ags(t){this.cms=t}tgs(){return this.cms}Pgs(t){if(this.lMt)switch(t){case 0:this.Kps=!0;break;case 1:this.Zps=!0;break;case 2:this.Qps=!0}}Egs(t){t=!!t,this._ms!==t&&(this._ms=t,this._ms?this.Cms():(this.Ams(),this.drs()))}Fgs(){return this._ms}Dgs(t){this.$ps=!!t}Ogs(){return this.$ps}rIt(t){t=!!t,this.lMt!==t&&(this.lMt=t,this.lMt?this.jAt():(this.LAt(),this.tms=null,this.Kps=!1,this.Zps=!1,this.Qps=!1))}aIt(){return this.lMt}_ot(t){switch(t){case iI:return this.ugs();case eI:return this.fgs();case hI:return this.pgs();case nI:return this.ggs();case rI:return this.bgs();case oI:return this.wgs();case aI:return this.xgs();case lI:return 1e3*this._gs();case uI:return this.Fgs();case cI:return this.aIt()}}Eot(t,s){switch(t){case iI:this.lgs(s);break;case eI:this.cgs(s);break;case hI:this.dgs(s);break;case nI:this.mgs(s);break;case rI:this.Sgs(s);break;case oI:this.ygs(s);break;case aI:this.Ggs(!!s);break;case lI:this.Tgs(s/1e3);break;case uI:this.Egs(!!s);break;case cI:this.rIt(!!s)}}jRt(){const t="behaviors.platform";return[{title:"$"+this.EX().Rc(),properties:[{name:t+".debugger.vector-x",value:this.Qms(),oQt:t=>this.Rgs(t)},{name:t+".debugger.vector-y",value:this.tgs(),oQt:t=>this.Ags(t)},{name:t+".properties.max-speed.name",value:this.ugs(),oQt:t=>this.lgs(t)},{name:t+".properties.acceleration.name",value:this.fgs(),oQt:t=>this.cgs(t)},{name:t+".properties.deceleration.name",value:this.pgs(),oQt:t=>this.dgs(t)},{name:t+".properties.jump-strength.name",value:this.ggs(),oQt:t=>this.mgs(t)},{name:t+".properties.gravity.name",value:this.bgs(),oQt:t=>this.Sgs(t)},{name:t+".debugger.gravity-angle",value:Q_.tn(this.Mgs()),oQt:t=>this.vgs(Q_.Qh(t))},{name:t+".properties.max-fall-speed.name",value:this.wgs(),oQt:t=>this.ygs(t)},{name:t+".properties.double-jump.name",value:this.xgs(),oQt:t=>this.Ggs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this._gs(),oQt:t=>this.Tgs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.ams]},{name:t+".properties.enabled.name",value:this.aIt(),oQt:t=>this.rIt(t)}]}]}ZCt(){return self.kgs}};const dI=new WeakMap,pI=new Map([["left",0],["right",1],["jump",2]]);self.kgs=class extends sI{constructor(){super(),dI.set(this,sI.OH().MX())}Lgs(){dI.get(this).egs()}Ngs(t){dI.get(this).hgs(!!t)}Bgs(t){tI.le(t);const s=pI.get(t);if("number"!=typeof s)throw new Error("invalid control");dI.get(this).Pgs(s)}get speed(){return dI.get(this).ngs()}get Wgs(){return dI.get(this).ugs()}set Wgs(t){tI.ne(t),dI.get(this).lgs(t)}get acceleration(){return dI.get(this).fgs()}set acceleration(t){tI.ne(t),dI.get(this).cgs(t)}get jgs(){return dI.get(this).pgs()}set jgs(t){tI.ne(t),dI.get(this).dgs(t)}get Vgs(){return dI.get(this).ggs()}set Vgs(t){tI.ne(t),dI.get(this).mgs(t)}get Ugs(){return dI.get(this).wgs()}set Ugs(t){tI.ne(t),dI.get(this).ygs(t)}get d8t(){return dI.get(this).bgs()}set d8t(t){tI.ne(t),dI.get(this).Sgs(t)}get Hgs(){return dI.get(this).Mgs()}set Hgs(t){tI.ne(t),dI.get(this).vgs(t)}get zgs(){return dI.get(this).xgs()}set zgs(t){dI.get(this).Ggs(!!t)}get Jgs(){return dI.get(this)._gs()}set Jgs(t){tI.ne(t),dI.get(this).Tgs(t)}get Xgs(){return 0===dI.get(this).Cgs()?"stop":"preserve-momentum"}set Xgs(t){tI.le(t);const s=dI.get(this);if("stop"===t)s.Igs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.Igs(1)}}get qgs(){return dI.get(this).sgs()}Ygs(t){tI.le(t);const s=dI.get(this);if("left"===t)return s.igs(0);if("right"===t)return s.igs(1);throw new Error("invalid side")}get $gs(){return dI.get(this).Zms()}get Kgs(){return dI.get(this).ogs()}get Zgs(){return dI.get(this).ags()}get Qgs(){return dI.get(this).Qms()}set Qgs(t){tI.ne(t),dI.get(this).Rgs(t)}get tys(){return dI.get(this).tgs()}set tys(t){tI.ne(t),dI.get(this).Ags(t)}sys(t,s){tI.ne(t),tI.ne(s);const i=dI.get(this);i.Rgs(t),i.Ags(s)}iys(){const t=dI.get(this);return[t.Qms(),t.tgs()]}get eys(){return dI.get(this).Fgs()}set eys(t){dI.get(this).Egs(!!t)}get hys(){return dI.get(this).Ogs()}set hys(t){dI.get(this).Dgs(!!t)}get isEnabled(){return dI.get(this).aIt()}set isEnabled(t){dI.get(this).rIt(!!t)}}}{const mI=self._s;mI.Iut.Ks.bW={nys(){return this.Zms()},rys(t,s){return mI.compare(this.ngs(),t,s)},oys(){return this.sgs()},ays(t){return this.igs(t)},lys(){return this.ogs()},uys(){return this.ags()},cys(){return this.xgs()},Jms:()=>!0,qms:()=>!0,$ms:()=>!0,Kms:()=>!0,Yms:()=>!0,_u(){return this.aIt()}}}{const gI=self._s;gI.Iut.Ks.Urt={fys(t){this.lgs(t)},e6t(t){this.cgs(t)},dys(t){this.dgs(t)},pys(t){this.mgs(t)},mys(t){this.ygs(t)},h6t(t){this.Sgs(t)},gys(t){this.Pgs(t)},yys(t){this.Dgs(!!t)},wys(t){this.Rgs(t)},Sys(t){this.Ags(t)},bys(t){this.vgs(gI.Qh(t))},eCt(t){this.rIt(0!==t)},vys(){this.egs()},Mys(t){this.Ggs(0!==t)},Gys(t){this.Tgs(t/1e3)},xys(t){this.Igs(t)},Tys(t){this.Egs(t)},_ys(t){this.hgs(t)}}}{const yI=self._s;yI.Iut.Ks.Hrt={Iys(){return this.ngs()},Cys(){return this.ugs()},Rys(){return this.fgs()},Ays(){return this.pgs()},Pys(){return this.ggs()},H8t(){return this.bgs()},Eys(){return yI.tn(this.Mgs())},Fys(){return this.wgs()},Dys(){return yI.tn(this.rgs())},Oys(){return this.Qms()},kys(){return this.tgs()},Lys(){return 1e3*this._gs()}}}{const wI=self._s;wI.Iut.Nys=class extends wI.RAt{constructor(t){super(t)}Jh(){super.Jh()}}}{const SI=self._s;SI.Iut.Nys.BEt=class extends SI.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const bI=self._s;bI.Iut.Nys.Instance=class extends bI.kAt{constructor(t,s){super(t),this.Bys=null,this.Wys=-1,this.c4t="",this.jys=new Set,this.Vys=0,this.Uys=0,this.Hys=0,this.ums=0,this.cms=0,this.zys=0,this.Jys=0,this.Xys=0,this.qys=0,this.Rcs=0,this.Yys=!1,s&&(this.Yys=s[0]);const i=this.Nc.wf();this.$f=new bI.Xf(bI.jf.Jf(i,"instancedestroy",t=>this.Ies(t.FX)),bI.jf.Jf(i,"afterload",t=>this.P8()))}Jh(){this.Bys=null,super.Jh()}$ys(t){t?(this.Bys=t,this.BRt()):(this.Bys=null,this.MRt())}Kys(t,s,i){if(!t)return;const e=t.v_t(this.fi);if(!e)return;this.c4t=s,this.$ys(e);const h=this.fi.iW(),n=e.iW();if("properties"===this.c4t){const t=this.jys;t.clear();for(const s of i)t.add(s);this.ums=h.rG()-n.rG(),this.cms=h.lG()-n.lG(),this.Xys=h.tU()-n.tU(),this.Rcs=h.tU(),this.qys=h.cG()-n.cG(),t.has("x")&&t.has("y")&&(this.Uys=bI.rn(n.rG(),n.lG(),h.rG(),h.lG())-n.tU(),this.Vys=bI.hn(n.rG(),n.lG(),h.rG(),h.lG())),t.has("width-abs")?this.zys=h.My()-n.My():t.has("width-scale")&&(this.zys=h.My()/n.My()),t.has("height-abs")?this.Jys=h.xy()-n.xy():t.has("height-scale")&&(this.Jys=h.xy()/n.xy())}else this.Vys=bI.hn(n.rG(),n.lG(),h.rG(),h.lG())}SG(){const t=this.jys,s=this.c4t,i={uid:this.Bys&&!this.Bys.jY()?this.Bys.zH():-1,m:s,d:this.Yys};return"rope"===s||"bar"===s?i.pd=this.Vys:"properties"===s&&(i.ps=[...this.jys],t.has("imagepoint")?i.ip=this.Hys:t.has("x")&&t.has("y")?(i.pa=this.Uys,i.pd=this.Vys):(t.has("x")&&(i.dx=this.ums),t.has("y")&&(i.dy=this.cms)),t.has("angle")&&(i.da=this.Xys,i.lka=this.Rcs),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.zys),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Jys),t.has("z")&&(i.dz=this.qys)),i}bG(t){const s=t.m,i=this.jys;if(i.clear(),this.Wys=t.uid,"number"!=typeof s){if(this.c4t=s,t.hasOwnProperty("d")&&(this.Yys=!!t.d),"rope"===s||"bar"===s)this.Vys=t.pd;else if("properties"===s){for(const s of t.ps)i.add(s);i.has("imagepoint")?this.Hys=t.ip:i.has("x")&&i.has("y")?(this.Uys=t.pa,this.Vys=t.pd):(i.has("x")&&(this.ums=t.dx),i.has("y")&&(this.cms=t.dy)),i.has("angle")&&(this.Xys=t.da,this.Rcs=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.zys=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Jys=t.dh),i.has("z")&&(this.qys=t.dz)}}else this.Zys(t)}Zys(t){const s=this.jys,i=t.msa,e=t.tsa,h=t.pa,n=t.pd;switch(t.m){case 0:this.c4t="properties",s.add("x").add("y").add("angle"),this.Uys=h,this.Vys=n,this.Xys=i-e,this.Rcs=t.lka;break;case 1:this.c4t="properties",s.add("x").add("y"),this.Uys=h,this.Vys=n;break;case 2:this.c4t="properties",s.add("angle"),this.Xys=i-e,this.Rcs=t.lka;break;case 3:this.c4t="rope",this.Vys=t.pd;break;case 4:this.c4t="bar",this.Vys=t.pd}}P8(){-1===this.Wys?this.$ys(null):(this.$ys(this.Nc.KB(this.Wys)),this.Wys=-1)}Ies(t){this.Bys===t&&(this.$ys(null),this.Yys&&this.Nc.NH(this.fi))}kRt(){const t=this.Bys;if(!t||t.jY())return;const s=t.iW(),i=this.fi.iW(),e=this.c4t;let h=!1;if("rope"===e||"bar"===e){const t=bI.hn(i.rG(),i.lG(),s.rG(),s.lG());if(t>this.Vys||"bar"===e&&t<this.Vys){const t=bI.rn(s.rG(),s.lG(),i.rG(),i.lG());i.zz(s.rG()+Math.cos(t)*this.Vys,s.lG()+Math.sin(t)*this.Vys),h=!0}}else{const e=this.jys;let n=0;if(e.has("imagepoint")){const[s,e]=t.HTt(this.Hys);i.VTt(s,e)||(i.zz(s,e),h=!0)}else if(e.has("x")&&e.has("y")){const t=s.rG()+Math.cos(s.tU()+this.Uys)*this.Vys,e=s.lG()+Math.sin(s.tU()+this.Uys)*this.Vys;i.VTt(t,e)||(i.zz(t,e),h=!0)}else n=s.rG()+this.ums,e.has("x")&&n!==i.rG()&&(i.oG(n),h=!0),n=s.lG()+this.cms,e.has("y")&&n!==i.lG()&&(i.uG(n),h=!0);e.has("angle")&&(this.Rcs!==i.tU()&&(this.Xys=bI.Zh(this.Xys+(i.tU()-this.Rcs))),n=bI.Zh(s.tU()+this.Xys),n!==i.tU()&&(i.QV(n),h=!0),this.Rcs=i.tU()),e.has("width-abs")&&(n=s.My()+this.zys,n!==i.My()&&(i.hy(n),h=!0)),e.has("width-scale")&&(n=s.My()*this.zys,n!==i.My()&&(i.hy(n),h=!0)),e.has("height-abs")&&(n=s.xy()+this.Jys,n!==i.xy()&&(i.ny(n),h=!0)),e.has("height-scale")&&(n=s.xy()*this.Jys,n!==i.xy()&&(i.ny(n),h=!0)),e.has("z")&&(n=s.cG()+this.qys,n!==i.cG()&&(i.fG(n),this.Nc.lW()))}h&&i.Uz()}jRt(){const t="behaviors.pin.debugger";return[{title:"$"+this.EX().Rc(),properties:[{name:t+".is-pinned",value:!!this.Bys},{name:t+".pinned-uid",value:this.Bys?this.Bys.zH():0}]}]}}}self._s.Iut.Nys.bW={Qys(){return!!this.Bys},tws(){return this.Yys}},self._s.Iut.Nys.Urt={sws(t,s){this.Kys(t,0===s?"rope":"bar")},iws(t,s,i,e,h,n,r){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),r&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===n?o.push("height-abs"):2===n&&o.push("height-scale"),0!==o.length&&this.Kys(t,"properties",o)},ews(t,s,i,e,h,n){const r=["imagepoint"];i&&r.push("angle"),n&&r.push("z"),1===e?r.push("width-abs"):2===e&&r.push("width-scale"),1===h?r.push("height-abs"):2===h&&r.push("height-scale"),this.Hys=s,this.Kys(t,"properties",r)},hws(t){"rope"!==this.c4t&&"bar"!==this.c4t||(this.Vys=Math.max(t,0))},nws(t){this.Yys=t},rws(){this.$ys(null),this.c4t="",this.jys.clear(),this.Hys=""},Nys(t,s){switch(s){case 0:this.Kys(t,"properties",["x","y","angle"]);break;case 1:this.Kys(t,"properties",["x","y"]);break;case 2:this.Kys(t,"properties",["angle"]);break;case 3:this.Kys(t,"rope");break;case 4:this.Kys(t,"bar")}}},self._s.Iut.Nys.Hrt={ows(){return this.Bys?this.Bys.zH():-1}};{const vI=self._s;vI.Iut.qAt=class extends vI.RAt{constructor(t){super(t)}Jh(){super.Jh()}}}{const MI=self._s;MI.Iut.qAt.BEt=class extends MI.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const GI=self._s,xI=self.Ls,TI=self.IX,_I=0,II=1,CI=new Set;GI.Iut.qAt.Instance=class extends GI.kAt{constructor(t,s){super(t),this.eCt(!0),s&&(this.eCt(s[_I]),this._st(s[II]))}Jh(){super.Jh()}eCt(t){this.fi.vDt(!!t)}_u(){return this.fi.bDt()}_st(t){const s=this.fi.Nxt();if(!t.trim())return void s.delete("solidTags");let i=s.get("solidTags");i||(i=new Set,s.set("solidTags",i)),i.clear();for(const s of t.split(" "))s&&i.add(s.toLowerCase())}Lq(){return this.fi.Nxt().get("solidTags")||CI}aws(){return[...this.Lq()].join(" ")}SG(){return{e:this._u()}}bG(t){this.eCt(t.e)}_ot(t){if(t===_I)return this._u()}Eot(t,s){t===_I&&this.eCt(s)}jRt(){return[{title:"$"+this.EX().Rc(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this._u(),oQt:t=>this.eCt(t)},{name:"behaviors.solid.properties.tags.name",value:this.aws(),oQt:t=>this._st(t)}]}]}ZCt(){return self.lws}};const RI=new WeakMap;self.lws=class extends TI{constructor(){super(),RI.set(this,TI.OH().MX())}set isEnabled(t){RI.get(this).eCt(!!t)}get isEnabled(){return RI.get(this)._u()}set tags(t){xI.le(t),RI.get(this)._st(t)}get tags(){return RI.get(this).aws()}}}self._s.Iut.qAt.bW={_u(){return this._u()}},self._s.Iut.qAt.Urt={eCt(t){this.eCt(t)},_st(t){this._st(t)}},self._s.Iut.qAt.Hrt={};{const AI=self._s;AI.Iut.uws=class extends AI.RAt{constructor(t){super(t)}Jh(){super.Jh()}}}{const PI=self._s;PI.Iut.uws.BEt=class extends PI.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const EI=self._s,FI=self.Ls,DI=self.IX,OI=0,kI=1,LI=2,NI=3,BI=4,WI=5,jI=6;EI.Iut.uws.Instance=class extends EI.kAt{constructor(t,s){super(t),this.wms=200,this.Sms=600,this.bms=600,this.cws=0,this.fws=!0,this.dws=!1,this.lMt=!0,this._Pt=0,this.pws=this.iW().tU(),this.mws=[],s&&(this.wms=s[OI],this.Sms=s[kI],this.bms=s[LI],this.cws=EI.Qh(s[NI]),this.fws=s[BI],this.dws=s[WI],this.lMt=s[jI]),this.gws=null,this.yws=NaN,this.wws=NaN,this.Sws=NaN,this.bws=[0,0],this.vws={w9:this.bws}}Jh(){this.gws&&(this.gws.Jh(),this.gws=null),this.yws=NaN,this.wws=NaN,this.Sws=NaN,this.bws=null,this.vws=null,super.Jh()}SG(){return{ms:this.wms,acc:this.Sms,dec:this.bms,rs:this.cws,sa:this.fws,sos:this.dws,s:this._Pt,ma:this.pws,wp:this.mws.map(t=>({x:t.x,y:t.y})),e:this.lMt}}bG(t){this.wms=t.ms,this.Sms=t.acc,this.bms=t.dec,this.cws=t.rs,this.fws=t.sa,this.dws=t.sos,this._Pt=t.s,this.pws=t.ma,this.mws=t.wp.map(t=>({x:t.x,y:t.y})),this.rIt(t.e),this.lMt&&this.mws.length>0&&this.LRt()}Mws(t,s,i,e){i&&EI.Sr(this.mws),this.mws.push({x:t,y:s,qd:e}),this.lMt&&this.LRt()}Gws(){return this.mws.length}xws(t){return(t=Math.floor(t))<0||t>=this.mws.length?0:this.mws[t].x}Tws(t){return(t=Math.floor(t))<0||t>=this.mws.length?0:this.mws[t].y}Zms(){return this.mws.length>0}_ws(){EI.Sr(this.mws),this._Pt=0,this.vRt()}Iws(){return this.mws.length>0?this.mws[0].x:0}Cws(){return this.mws.length>0?this.mws[0].y:0}Rws(){if(this.mws.length>0){const t=this.mws[0];if(t.qd)return t.qd.Aws}return!1}Pws(){if(this.mws.length>0){const t=this.mws[0];if(t.qd)return t.qd.Aws&&t.qd.Ews}return!1}Fws(){if(this.mws.length>0){const t=this.mws[0];if(t.qd)return t.qd.Dws}return NaN}Ows(t){this.Zms()&&(this._Pt=Math.min(t,this.wms))}ngs(){return this._Pt}lgs(t){this.wms=Math.max(t,0),this.Ows(this._Pt)}ugs(){return this.wms}kws(){return 0!==this.cws}P7(){if(!this.lMt||!this.Zms())return;const t=this.Nc.qN(this.fi),s=this.fi.iW(),i=s.rG(),e=s.lG(),h=s.tU();let n=this._Pt,r=this.wms;const o=this.Sms,a=this.bms,l=this.Iws(),u=this.Cws(),c=EI.rn(i,e,l,u);let f=!1;if(a>0&&1===this.mws.length){const t=.5*n*n/a*1.0001;if(f=EI.nn(i,e,l,u)<=t*t,f){const t=EI.hn(i,e,l,u);n=Math.sqrt(2*a*t),r=n,this._Pt=n}}if(this.kws()){const t=EI.an(this.pws,c);if(t>Number.EPSILON){const i=t/this.cws,e=EI.hn(s.rG(),s.lG(),l,u)/(2*Math.sin(t))*t;r=Math.min(r,EI.Kh(e/i,0,this.wms))}}let d=f?-a:o;const p=Math.min(n*t+.5*d*t*t,r*t);if(f){if(a>0&&(this._Pt=Math.max(this._Pt-a*t,0),0===this._Pt))return void this.Lws(s,l,u)}else this._Pt=0===o?r:Math.min(this._Pt+o*t,r);if(EI.nn(s.rG(),s.lG(),l,u)<=p*p)this.Lws(s,l,u);else{if(this.kws()?this.pws=EI.ln(this.pws,c,this.cws*t):this.pws=c,s.Xz(Math.cos(this.pws)*p,Math.sin(this.pws)*p),this.fws){const t=this.Rws(),i=this.Pws();if(t&&!i){const t=EI.hn(this.yws,this.wws,s.rG(),s.lG())/EI.hn(this.yws,this.wws,l,u);s.QV(EI.cn(this.Sws,this.Fws(),t))}else s.QV(this.pws),this.yws=NaN,this.wws=NaN,this.Sws=NaN}s.Uz(),this.Nws(i,e,h)}}Lws(t,s,i){t.zz(s,i);const e=this.mws[0];e.qd&&e.qd.Aws?(this.yws=e.x,this.wws=e.y,this.Sws=e.qd.Dws,this.fws&&t.QV(this.Sws)):(this.yws=NaN,this.wws=NaN,this.Sws=NaN),t.Uz(),this.mws.shift(),0===this.mws.length&&(this.gws&&(this.gws.Jh(),this.gws=null,this.yws=NaN,this.wws=NaN,this.Sws=NaN),this._Pt=0,this.vRt()),this.gRt("arrived"),this.pz(EI.Iut.uws.bW.Bws)}Nws(t,s,i){const e=this.Nc.$L();if(this.dws&&e.sj(this.fi)){this._ws();const h=this.fi.iW(),n=h.rG(),r=h.lG(),o=EI.rn(n,r,t,s),a=EI.hn(n,r,t,s);e.aBt(this.fi,Math.cos(o),Math.sin(o),Math.max(a,1))||(h.zz(t,s),h.QV(i),h.Uz()),this.gRt("hitsolid"),this.pz(EI.Iut.uws.bW.Wws)}}jws(){return this.fws}Vws(t){this.fws=!!t}Uws(t){if(this.pws=t,this.lMt&&this.fws&&!this.Zms()){const t=this.iW();t.QV(this.pws),t.Uz()}}Hws(){return this.pws}cgs(t){this.Sms=Math.max(t,0)}fgs(){return this.Sms}dgs(t){this.bms=Math.max(t,0)}pgs(){return this.bms}zws(t){this.cws=Math.max(t,0)}Jws(){return this.cws}Xws(t){this.dws=!!t}qws(){return this.dws}rIt(t){t=!!t,this.lMt!==t&&(this.lMt=t,this.lMt&&this.Zms()?this.LRt():this.vRt())}aIt(){return this.lMt}_ot(t){switch(t){case OI:return this.ugs();case kI:return this.fgs();case LI:return this.pgs();case NI:return EI.tn(this.Jws());case BI:return this.jws();case WI:return this.qws();case jI:return this.aIt()}}Eot(t,s){switch(t){case OI:this.lgs(s);break;case kI:this.cgs(s);break;case LI:this.dgs(s);break;case NI:this.zws(EI.Qh(s));break;case BI:this.Vws(s);break;case WI:this.Xws(s);break;case jI:this.rIt(s)}}jRt(){const t="behaviors.moveto";return[{title:"$"+this.EX().Rc(),properties:[{name:t+".debugger.speed",value:this.ngs(),oQt:t=>this.Ows(t)},{name:t+".debugger.angle-of-motion",value:EI.tn(this.Hws()),oQt:t=>this.pws=EI.Qh(t)},{name:t+".debugger.target-x",value:this.Iws()},{name:t+".debugger.target-y",value:this.Cws()},{name:t+".debugger.waypoint-count",value:this.Gws()},{name:t+".properties.max-speed.name",value:this.ugs(),oQt:t=>this.lgs(t)},{name:t+".properties.acceleration.name",value:this.fgs(),oQt:t=>this.cgs(t)},{name:t+".properties.deceleration.name",value:this.pgs(),oQt:t=>this.dgs(t)},{name:t+".properties.rotate-speed.name",value:EI.tn(this.Jws()),oQt:t=>this.zws(EI.Qh(t))},{name:t+".properties.enabled.name",value:this.aIt(),oQt:t=>this.rIt(t)}]}]}ZCt(){return self.Yws}};const VI=new WeakMap;self.Yws=class extends DI{constructor(){super(),VI.set(this,DI.OH().MX())}$ws(t,s,i=!0){FI.ne(t),FI.ne(s),VI.get(this).Mws(t,s,!!i)}Kws(){return VI.get(this).Iws()}Zws(){return VI.get(this).Cws()}Qws(){const t=VI.get(this);return[t.Iws(),t.Cws()]}tSs(){return VI.get(this).Gws()}sSs(t){return FI.ne(t),VI.get(this).xws(t)}iSs(t){return FI.ne(t),VI.get(this).Tws(t)}eSs(t){FI.ne(t);const s=VI.get(this);return[s.xws(t),s.Tws(t)]}stop(){VI.get(this)._ws()}get $gs(){return VI.get(this).Zms()}get speed(){return VI.get(this).ngs()}set speed(t){FI.ne(t),VI.get(this).Ows(t)}get Wgs(){return VI.get(this).ugs()}set Wgs(t){FI.ne(t),VI.get(this).lgs(t)}get acceleration(){return VI.get(this).fgs()}set acceleration(t){FI.ne(t),VI.get(this).cgs(t)}get jgs(){return VI.get(this).pgs()}set jgs(t){FI.ne(t),VI.get(this).dgs(t)}get hSs(){return VI.get(this).Hws()}set hSs(t){FI.ne(t),VI.get(this).Uws(t)}get nSs(){return VI.get(this).Jws()}set nSs(t){FI.ne(t),VI.get(this).zws(t)}get rSs(){return VI.get(this).qws()}set rSs(t){VI.get(this).Xws(t)}get isEnabled(){return VI.get(this).aIt()}set isEnabled(t){VI.get(this).rIt(t)}}}{const UI=self._s;UI.Iut.uws.bW={nys(){return this.Zms()},rys(t,s){return UI.compare(this.ngs(),t,s)},_u(){return this.aIt()},Bws:()=>!0,Wws:()=>!0}}{const HI=self._s,zI=25;HI.Iut.uws.Urt={oSs(t,s,i){this.Mws(t,s,0===i)},aSs(t,s,i){if(!t)return;const e=t.vV(this.fi);if(!e||!e.iW())return;const[h,n]=e.HTt(s);this.Mws(h,n,0===i)},lSs(t){const s=this.fi.zDt(HI.Iut.uSs);if(!s)return;const i=s.cSs();if(0!==i.length)for(let s=0,e=i.length;s<e;++s){const e=i[s];this.Mws(e.x,e.y,0===s&&0===t)}},fSs(t,s,i){const e=HI.zh(HI.Q7,t,s);if(!e.d9())return void e.Jh();e.m9(this.fi.iW());let h=!0;for(const t of e.p9())switch(t.oI()){case"line":{const s=t.rG(),e=t.lG();this.Mws(s,e,h&&0===i),h=!1;break}case"cubic-bezier":for(let s=0;s<=t.ltt();s++){const e=s*t.utt(),n=t.Map(e),r=n[0],o=n[1],a=this.xws(this.Gws()-1),l=this.Tws(this.Gws()-1);!h&&HI.Qi(a)&&HI.Qi(l)&&HI.nn(a,l,r,o)<zI||(this.Mws(r,o,h&&0===i,{Aws:!0,Ews:h,Dws:Math.atan2(o-l,r-a)}),h=!1)}}this.gws=e},dSs(t,s,i){const e=this.Nc.ast().a7(t);e&&HI.Iut.uws.Urt.fSs.call(this,e,s,i)},Tq(){this._ws()},pSs(t){this.Uws(HI.Qh(t))},mSs(t){this.Ows(t)},fys(t){this.lgs(t)},e6t(t){this.cgs(t)},dys(t){this.dgs(t)},gSs(t){this.zws(HI.Qh(t))},ySs(t){this.Xws(t)},eCt(t){this.rIt(t)}}}{const JI=self._s;JI.Iut.uws.Hrt={Iys(){return this.ngs()},Cys(){return this.ugs()},Rys(){return this.fgs()},Ays(){return this.pgs()},Dys(){return JI.tn(this.Hws())},wSs(){return JI.tn(this.Jws())},SSs(){return this.Iws()},bSs(){return this.Cws()},vSs(){return this.Gws()},MSs(t){return this.xws(t)},GSs(t){return this.Tws(t)}}}{const XI=self._s;XI.Iut.YAt=class extends XI.RAt{constructor(t){super(t)}Jh(){super.Jh()}}}{const qI=self._s;qI.Iut.YAt.BEt=class extends qI.DAt{constructor(t){super(t)}Jh(){super.Jh()}KCt(){}}}{const YI=self._s,$I=self.IX,KI=0;YI.Iut.YAt.Instance=class extends YI.kAt{constructor(t,s){super(t),this.eCt(!0),s&&this.eCt(s[KI])}Jh(){super.Jh()}eCt(t){this.fi.GDt(!!t)}_u(){return this.fi.MDt()}SG(){return{e:this._u()}}bG(t){this.eCt(t.e)}_ot(t){if(t===KI)return this._u()}Eot(t,s){t===KI&&this.eCt(s)}jRt(){return[{title:"$"+this.EX().Rc(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this._u(),oQt:t=>this.eCt(t)}]}]}ZCt(){return self.xSs}};const ZI=new WeakMap;self.xSs=class extends $I{constructor(){super(),ZI.set(this,$I.OH().MX())}set isEnabled(t){ZI.get(this).eCt(!!t)}get isEnabled(){return ZI.get(this)._u()}}}self._s.Iut.YAt.bW={_u(){return this._u()}},self._s.Iut.YAt.Urt={eCt(t){this.eCt(t)}},self._s.Iut.YAt.Hrt={};{let QI=function(t,s){return"number"==typeof t&&"number"==typeof s},tC=function(t,s){return QI(t,s)?t+s:t},sC=function(t,s){return QI(t,s)?t-s:t},iC=function(t,s){return QI(t,s)?t*s:t},eC=function(t,s){return QI(t,s)?t/s:t},hC=function(t,s){return QI(t,s)?t%s:t},nC=function(t,s){return QI(t,s)?Math.pow(t,s):t},rC=function(t,s){if("string"==typeof t||"string"==typeof s){let i,e;return i="number"==typeof t?(Math.round(1e10*t)/1e10).toString():t,e="number"==typeof s?(Math.round(1e10*s)/1e10).toString():s,i+e}return t&&s?1:0},oC=function(t,s){return QI(t,s)?t||s?1:0:t};0;const aC=self._s;self.GGt=[()=>"LevelSystem",()=>0,()=>-10,()=>10,()=>"Robot Boundary",t=>{const s=t.FGt(0);return()=>s.nGt()},t=>{const s=t.FGt(0);return()=>s.nGt()+4},t=>{const s=t.FGt(0);return()=>s.nGt()+10},t=>{const s=t.FGt(0);return()=>s.nGt()+2},t=>{const s=t.FGt(0);return()=>s.nGt()-10},()=>"x",()=>1,()=>106.75,()=>"y",()=>60,t=>{const s=t.FGt(0).QMt();return()=>s("x")},t=>{const s=t.FGt(0).QMt();return()=>s("y")},t=>{const s=t.FGt(0).QMt();return()=>16*s("x")+8},t=>{const s=t.FGt(0).QMt();return()=>16*s("y")+7},()=>"",()=>7,t=>{const s=t.FGt(0).QMt();return()=>16*s("x")},t=>{const s=t.FGt(0).QMt();return()=>16*s("y")},()=>8,t=>{const s=t.FGt(0).QMt();return()=>16*s("x")+12},t=>{const s=t.FGt(0).QMt();return()=>16*s("y")+6},()=>2,t=>{const s=t.FGt(0).QMt();return()=>16*s("x")+4},t=>{const s=t.FGt(0);return()=>s.nGt()+32},t=>{const s=t.FGt(0);return()=>s.nGt()-32},t=>{const s=t.FGt(0);return()=>s.nGt()-16},t=>{const s=t.FGt(0),i=t.FGt(1),e=t.FGt(2),h=t.FGt(3).MGt();return()=>s.nGt()+(i.nGt()-e.nGt())/h.Qht()},t=>{const s=t.FGt(0);return()=>16*Math.round(s.nGt()/16)+8},()=>-100,()=>1e3,()=>"whee",t=>{const s=t.FGt(0);return()=>aC.Kh(Math.sqrt(Math.abs(s.yGt()))/5,0,1.25)},t=>{const s=t.FGt(0),i=t.FGt(1).QMt();return()=>aC.Kh(s.yGt()-2e3*i(),200,600)},t=>{const s=t.FGt(0),i=t.FGt(1).QMt();return()=>aC.Kh(s.yGt()-2e3*i(),400,1500)},t=>{const s=t.FGt(0),i=t.FGt(1).QMt();return()=>aC.Kh(s.yGt()+2e3*i(),0,1500)},t=>{const s=t.FGt(0);return()=>s.yGt()},t=>{const s=t.FGt(0).QMt();return()=>100*s()},t=>{const s=t.FGt(0).MGt();return()=>s.Qht()/100*14},t=>{const s=t.FGt(0),i=t.FGt(1);return()=>s.lGt()/i.lGt()*14},t=>{const s=t.FGt(0).QMt(),i=t.FGt(1).QMt();return()=>aC.Kh(s()+i(),0,1)},()=>"Horimovement",()=>"Vertimovement",()=>"Roman",()=>"Walljump",()=>-1,()=>25,()=>"cling 1",t=>{const s=t.FGt(0);return()=>s.nGt()-.1},()=>-400,()=>200,()=>"Jump 1",()=>3,()=>100,()=>"cling 2",t=>{const s=t.FGt(0);return()=>s.nGt()+.1},()=>-200,()=>"Jump 2",()=>"Looks/Sound",t=>{const s=t.FGt(0).MGt();return()=>rC("run ",s.Qht())},t=>{const s=t.FGt(0);return()=>s.yGt()/15},t=>{const s=t.FGt(0).MGt();return()=>rC("still ",s.Qht())},()=>.1,t=>{const s=t.FGt(0).MGt();return()=>rC("Jump ",s.Qht())},t=>{const s=t.FGt(0).QMt();return()=>0+s(-10,-5)},()=>"swist 1",()=>"scrr",()=>"swist 2",()=>-1e3,t=>{const s=t.FGt(0).MGt();return()=>rC("Fall ",s.Qht())},t=>{const s=t.FGt(0).MGt();return()=>2*(1.5-s.Qht())},t=>{const s=t.FGt(0),i=t.FGt(1).MGt();return()=>s.nGt()+2*(1.5-i.Qht())},()=>"LevelTransit",()=>-15,()=>15,()=>"Combat",t=>{const s=t.FGt(0).QMt();return()=>2*s()},t=>{const s=t.FGt(0).MGt();return()=>rC("Up ",s.Qht())},()=>-350,()=>500,()=>5,()=>90,()=>.4,t=>{const s=t.FGt(0).MGt();return()=>rC("Sair ",s.Qht())},()=>.5,t=>{const s=t.FGt(0).MGt();return()=>rC("Nair ",s.Qht())},()=>"Sair 1",()=>250,()=>600,()=>-5,()=>"Sair 2",()=>-250,()=>1500,()=>"Animation 1",t=>{const s=t.FGt(0).MGt();return()=>rC("Jab ",s.Qht())},t=>{const s=t.FGt(0);return()=>aC.Kh(s.yGt(),-5,5)},()=>.2,t=>{const s=t.FGt(0).QMt(),i=t.FGt(1).QMt();return()=>aC.Kh(s()+10*i(),0,1)},()=>"Robot",()=>"RoboStart",t=>{const s=t.FGt(0);return()=>s.lGt()},t=>{const s=t.FGt(0).QMt();return()=>rC("",Math.round(s(1,23)))},t=>{const s=t.FGt(0).QMt();return()=>1+s(-.5,.5)},()=>"RobotMovement",t=>{const s=t.FGt(0);return()=>s.nGt()+100},t=>{const s=t.FGt(0);return()=>s.nGt()-100},()=>150,t=>{const s=t.FGt(0);return()=>s.nGt()+3},t=>{const s=t.FGt(0);return()=>s.nGt()-3},t=>{const s=t.FGt(0);return()=>s.lGt()-50},t=>{const s=t.FGt(0);return()=>s.lGt()+50},t=>{const s=t.FGt(0).QMt();return()=>s(1,5)},t=>{const s=t.FGt(0).QMt();return()=>s(-50,50)},t=>{const s=t.FGt(0),i=t.FGt(1);return()=>s.lGt()+i.lGt()+2},t=>{const s=t.FGt(0),i=t.FGt(1);return()=>s.lGt()+i.lGt()-2},()=>"RoboLooks",t=>{const s=t.FGt(0),i=t.FGt(1);return()=>rC(rC("Walk ",s.lGt())+" ",i.lGt())},()=>"RoboAttack",t=>{const s=t.FGt(0);return()=>rC("Attack ",s.lGt())+" 1"},()=>-300,t=>{const s=t.FGt(0);return()=>rC("Attack ",s.lGt())+" 2"},()=>"RoboHurt",()=>175,t=>{const s=t.FGt(0).MGt(),i=t.FGt(1);return()=>2*-(s.Qht()-1.5)*200-aC.Kh(Math.round(400*Math.abs(i.yGt())),0,100)},t=>{const s=t.FGt(0);return()=>-300+aC.Kh(Math.round(400*Math.abs(s.yGt())),0,400)},t=>{const s=t.FGt(0);return()=>75+aC.Kh(Math.abs(100*s.yGt()),0,50)},t=>{const s=t.FGt(0),i=t.FGt(1).MGt();return()=>rC(rC("Hurt ",s.lGt())+" ",i.Qht())},()=>.25,()=>"c",()=>20,t=>{const s=t.FGt(0);return()=>1*s.yGt()},()=>75,()=>30,()=>50,()=>-17,t=>{const s=t.FGt(0);return()=>rC("Walk ",s.lGt())+" 1"},t=>{const s=t.FGt(0);return()=>rC("Walk ",s.lGt())+" 2"},t=>{const s=t.FGt(0);return()=>s.yGt()/3},t=>{const s=t.FGt(0),i=t.FGt(1).QMt();return()=>s.nGt()+i(-6,6)},t=>{const s=t.FGt(0),i=t.FGt(1).QMt();return()=>s.nGt()+i(-16,16)},t=>{const s=t.FGt(0),i=t.FGt(1).QMt();return()=>s.yGt()+i(-40,40)},()=>-281474976711679,()=>"Text",t=>{const s=t.FGt(0),i=t.FGt(1).MGt();return()=>s.lGt()-i.Qht()},()=>"SystemEnd",()=>"System",t=>{const s=t.FGt(0),i=t.FGt(1).MGt(),e=t.FGt(2).QMt();return()=>s.nGt()+i.Qht()*e()},()=>"Controls",()=>"Animation 2",()=>.15,t=>{const s=t.FGt(0);return()=>s.nGt()+480},t=>{const s=t.FGt(0);return()=>s.nGt()-480},()=>"BackgroundScrolling",()=>-411,t=>{const s=t.FGt(0);return()=>s.nGt()-320},()=>-535,()=>-1035,t=>{const s=t.FGt(0);return()=>s.nGt()-330},()=>"StartupBackButtonAndEveryTick",t=>{const s=t.FGt(0).MGt();return()=>rC("Max Damage: ",s.Qht())},t=>{const s=t.FGt(0).MGt();return()=>rC("Max Combo: ",s.Qht())},t=>{const s=t.FGt(0).MGt();return()=>rC("Damage: ",s.Qht())},t=>{const s=t.FGt(0).MGt();return()=>rC("Combo: ",s.Qht())},()=>"RomanTraining",()=>"Walljump2",()=>"Looks/Sound2",()=>"LevelTransit2",()=>"Combat2",()=>"Vertimovement2",()=>"Horimovement2",()=>"RobotTraining",()=>"RoboStart2",()=>"RobotMovement2",()=>"RoboLooks2",()=>"RoboAttack2",()=>"RoboHurt2",()=>"Text2",()=>"SystemEnd2",t=>{const s=t.FGt(0).MGt();return()=>s.Qht()}]}var _t=self._s;self.kzt=function(){return[_t.MW.wZt,_t.MW.urt,_t.Iut.Tls,_t.MW.K1t,_t.MW.P4t,_t.Iut.Gus,_t.Iut.Rps,_t.MW.K7t,_t.Iut.Ks,_t.Iut.Nys,_t.Iut.qAt,_t.MW.wss,_t.MW.Audio,_t.MW.gamepad,_t.MW.Keyboard,_t.MW.Prs,_t.MW.Touch,_t.Iut.uws,_t.Iut.YAt,_t.MW.vW.bW.Ywt,_t.MW.vW.bW.u6,_t.Iut.Gus.Urt.nps,_t.Iut.Gus.Urt.Xds,_t.MW.urt.Urt.SLt,_t.MW.urt.Urt.jTt,_t.MW.urt.Hrt.NIt,_t.MW.urt.Hrt.BIt,_t.Iut.Nys.Urt.iws,_t.MW.P4t.Urt.jTt,_t.Iut.Nys.Urt.nws,_t.MW.vW.Urt.MYt,_t.MW.vW.bW.lYt,_t.MW.K1t.bW.T3t,_t.MW.vW.Hrt.ZKt,_t.MW.vW.Urt._Yt,_t.MW.urt.Urt.UQt,_t.MW.Audio.bW.ihs,_t.MW.Audio.Urt.Play,_t.MW.vW.bW.qqt,_t.MW.vW.Urt.dr,_t.MW.vW.bW.Nqt,_t.MW.K1t.Urt.F3t,_t.MW.Audio.Urt.Oq,_t.Iut.Ks.Hrt.kys,_t.Iut.Ks.Urt.fys,_t.Iut.Ks.Hrt.Cys,_t.MW.vW.Hrt.XN,_t.Iut.Ks.Urt.e6t,_t.Iut.Ks.Hrt.Rys,_t.Iut.Ks.Urt.h6t,_t.Iut.Ks.Hrt.H8t,_t.MW.urt.Urt.vIt,_t.Iut.Ks.Hrt.Oys,_t.MW.urt.Urt.GIt,_t.MW.urt.Urt.c1t,_t.MW.vW.Urt.RYt,_t.MW.vW.Hrt.nKt,_t.MW.vW.Urt.vYt,_t.MW.Keyboard.bW.mrs,_t.MW.vW.Urt.$wt,_t.MW.vW.bW.zqt,_t.MW.urt.Hrt.EIt,_t.Iut.qAt.Urt.eCt,_t.MW.vW.bW.Fbt,_t.MW.urt.bW.O_t,_t.MW.K7t.Urt.NU,_t.Iut.Ks.Urt.mys,_t.MW.urt.Urt.u1t,_t.MW.vW.Urt.SYt,_t.Iut.Ks.Urt.Mys,_t.MW.vW.bW.aYt,_t.MW.urt.bW.D_t,_t.MW.urt.Urt.oG,_t.Iut.Ks.Urt.Sys,_t.Iut.Ks.Urt.wys,_t.MW.Keyboard.bW.ers,_t.MW.vW.bW.Bqt,_t.MW.Audio.Urt.Tq,_t.Iut.Ks.bW.nys,_t.Iut.Ks.bW.oys,_t.MW.urt.Urt.p1t,_t.Iut.Ks.Hrt.Iys,_t.MW.Audio.Urt.chs,_t.Iut.Ks.bW.Jms,_t.MW.urt.bW._1t,_t.MW.vW.Hrt.random,_t.MW.urt.Urt.P1t,_t.MW.vW.bW.Xqt,_t.MW.P4t.Urt.UTt,_t.Iut.Ks.bW.uys,_t.MW.urt.bW.E_t,_t.MW.vW.Urt.XYt,_t.Iut.Rps.Urt.eCt,_t.Iut.Ks.Urt.yys,_t.MW.vW.Urt.qYt,_t.Iut.Gus.Urt.Kds,_t.MW.urt.Urt.wIt,_t.MW.vW.Urt.bYt,_t.MW.urt.Urt.QV,_t.MW.urt.bW.T1t,_t.MW.urt.bW.q0t,_t.MW.urt.Urt.L1t,_t.Iut.Ks.bW.Yms,_t.MW.urt.bW.SIt,_t.MW.urt.bW.kTt,_t.MW.urt.bW.uIt,_t.MW.urt.Urt.xIt,_t.Iut.Ks.Urt.gys,_t.MW.vW.bW.Wqt,_t.MW.vW.bW.Ud,_t.Iut.Ks.bW.ays,_t.MW.urt.bW.lIt,_t.MW.P4t.Urt.d6t,_t.MW.P4t.Urt.H4t,_t.MW.vW.bW.oYt,_t.Iut.Gus.Urt.$ds,_t.MW.urt.Urt.NU,_t.Iut.Ks.Urt.eCt,_t.MW.urt.Urt.d_t,_t.MW.K7t.bW.yts,_t.MW.K7t.Urt.vts,_t.MW.K7t.Urt.bts,_t.MW.wZt.Urt.oG,_t.MW.wZt.Hrt.NIt,_t.MW.Touch.bW.bas,_t.MW.Prs.bW.gos,_t.Iut.uws.bW.nys,_t.Iut.uws.Urt.oSs,_t.MW.vW.Urt.zYt,_t.MW.wZt.bW.kTt,_t.MW.K7t.Urt.Vc]},self.hJt=[{TSs:0},{_Ss:0},{ISs:0},{CSs:0},{RSs:0},{ASs:0},{PSs:0},{ESs:0},{FSs:0},{DSs:0},{OSs:0},{kSs:0},{urt:0},{LSs:0},{Gus:0},{head:0},{NSs:0},{Body:0},{BSs:0},{WSs:0},{jSs:0},{VSs:0},{USs:0},{Ks:0},{HSs:0},{zSs:0},{JSs:0},{XSs:0},{qSs:0},{YSs:0},{$Ss:0},{KSs:0},{ZSs:0},{QSs:0},{tbs:0},{sbs:0},{ibs:0},{Nys:0},{ebs:0},{hbs:0},{nbs:0},{rbs:0},{obs:0},{lbs:0},{ubs:0},{cbs:0},{fbs:0},{dbs:0},{pbs:0},{mbs:0},{gbs:0},{ybs:0},{wbs:0},{Sbs:0},{bbs:0},{Audio:0},{Gamepad:0},{Keyboard:0},{Prs:0},{Touch:0},{vbs:0},{Mbs:0},{Gbs:0},{xbs:0},{Tbs:0},{_bs:0},{Ibs:0},{Cbs:0},{Text:0},{uws:0},{Rbs:0},{Abs:0},{Pbs:0},{Ebs:0},{Fbs:0},{Dbs:0},{Obs:0},{kbs:0},{SSs:0},{Lbs:0},{Nbs:0},{Bbs:0},{Wbs:0},{jbs:0},{Vbs:0},{Ubs:0},{BEt:0},{Hbs:0},{zbs:0},{Jbs:0},{P4t:0},{Xbs:0},{qbs:0},{Ybs:0},{$bs:0},{Kbs:0},{Zbs:0},{Qbs:0},{tvs:0},{svs:0},{ivs:0},{evs:0},{hvs:0},{nvs:0},{rvs:0},{ovs:0},{avs:0},{lvs:0},{uvs:0},{cvs:0},{fvs:0},{dvs:0},{pvs:0},{mvs:0},{gvs:0},{yvs:0},{wvs:0},{Svs:0},{bvs:0},{vvs:0}],self.Mvs={TSs:class extends self.aQt{},_Ss:class extends self.aQt{},ISs:class extends self.aQt{},RSs:class extends self.m1t{},ASs:class extends self.d3t{},PSs:class extends self.m1t{},ESs:class extends self.s8t{},FSs:class extends self.m1t{},DSs:class extends self.m1t{},OSs:class extends self.m1t{},kSs:class extends self.d3t{},urt:class extends self.m1t{},LSs:class extends self.m1t{},head:class extends self.m1t{},Body:class extends self.m1t{},BSs:class extends self.nts{},WSs:class extends self.nts{},jSs:class extends self.nts{},VSs:class extends self.nts{},USs:class extends self.m1t{},HSs:class extends self.m1t{},$Ss:class extends self.m1t{},KSs:class extends self.m1t{},ZSs:class extends self.nts{},QSs:class extends self.m1t{},tbs:class extends self.m1t{},sbs:class extends self.m1t{},ibs:class extends self.m1t{},ebs:class extends self.m1t{},hbs:class extends self.m1t{},nbs:class extends self.m1t{},rbs:class extends self.nts{},obs:class extends self.d3t{},ubs:class extends self.d3t{},cbs:class extends self.pis{},fbs:class extends self.pis{},dbs:class extends self.pis{},pbs:class extends self.pis{},mbs:class extends self.m1t{},gbs:class extends self.m1t{},ybs:class extends self.m1t{},wbs:class extends self.s8t{},Sbs:class extends self.s8t{},bbs:class extends self.m1t{},Audio:class extends self.PH{},Gamepad:class extends self.PH{},Keyboard:class extends self.PH{},Prs:class extends self.PH{},Touch:class extends self.PH{},Gbs:class extends self.m1t{},xbs:class extends self.m1t{},Tbs:class extends self.m1t{},_bs:class extends self.m1t{},Ibs:class extends self.m1t{},Cbs:class extends self.pis{},Text:class extends self.nts{},Rbs:class extends self.m1t{},Abs:class extends self.m1t{},zbs:class extends self.m1t{},Jbs:class extends self.m1t{},P4t:class extends self.s8t{},Xbs:class extends self.m1t{},qbs:class extends self.m1t{},$bs:class extends self.m1t{}};
/*!
@fileoverview gl-matrix - High performance matrix and vector operations
@author Brandon Jones
@author Colin MacKenzie IV
@version 3.4.1

Copyright (c) 2015-2021, Brandon Jones, Colin MacKenzie IV.

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.

*/