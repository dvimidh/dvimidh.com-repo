import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let k=function(t){vh=t},L=function(t){return t*kh},B=function(t,s){return Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},N=function(){var t=new vh(4);return vh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},U=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},H=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},X=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},$=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new vh(6);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new vh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new vh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=h*a+n*l,t[2]=e*u+r*c,t[3]=h*u+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},St=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Mt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},vt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Mh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Mh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=Mh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(r-u)<=Mh*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=Mh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new vh(9);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Rt=function(t){var s=new vh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},At=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Pt=function(t,s,i,e,h,r,n,o,a){var l=new vh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=r,l[6]=n,l[7]=o,l[8]=a,l},Et=function(t,s,i,e,h,r,n,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*n-o*l,c=-s*r+o*a,f=l*r-n*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},kt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=n*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*l-n*a,t[7]=e*a-i*l,t[8]=i*n-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],S=i[7],i=i[8];return t[0]=c*e+f*n+d*l,t[1]=c*h+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*l,t[4]=p*h+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+S*n+i*l,t[7]=y*h+S*o+i*u,t[8]=y*r+S*a+i*s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+l,t[7]=c*h+i*o+u,t[8]=c*r+i*a+s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-S*(c=c*s-d*m)+w*T+b*(u=u*s-d*p)-M*G+v*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-n*f-l*G)*d,t[2]=(n*c-o*u+l*x)*d,t[3]=(h*c-e*f-r*T)*d,t[4]=(i*f-h*u+r*G)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*v-g*M+s*b)*d,t[7]=(g*w-p*v-s*S)*d,t[8]=(p*M-m*w+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Xt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Yt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},$t=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Mh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Mh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Mh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Mh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Mh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Mh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Mh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Mh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new vh(16);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new vh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m){var g=new vh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,R=y*C-S*I+w*_+b*T-M*G+v*x;return R?(t[0]=(o*C-a*I+l*_)*(R=1/R),t[1]=(h*I-e*C-r*_)*R,t[2]=(m*v-g*M+s*b)*R,t[3]=(f*M-c*v-d*b)*R,t[4]=(a*T-n*C-l*G)*R,t[5]=(i*C-h*T+r*G)*R,t[6]=(g*w-p*v-s*S)*R,t[7]=(u*v-f*w+d*S)*R,t[8]=(n*I-o*T+l*x)*R,t[9]=(e*T-i*I-r*x)*R,t[10]=(p*M-m*w+s*y)*R,t[11]=(c*w-u*M-d*y)*R,t[12]=(o*G-n*_-a*x)*R,t[13]=(i*_-e*G+h*x)*R,t[14]=(m*S-p*b-g*y)*R,t[15]=(u*b-c*S+f*y)*R,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-r*_,t[2]=m*v-g*M+s*b,t[3]=f*M-c*v-d*b,t[4]=a*T-n*C-l*G,t[5]=i*C-h*T+r*G,t[6]=g*w-p*v-s*S,t[7]=u*v-f*w+d*S,t[8]=n*I-o*T+l*x,t[9]=e*T-i*I-r*x,t[10]=p*M-m*w+s*y,t[11]=c*w-u*M-d*y,t[12]=o*G-n*_-a*x,t[13]=i*_-e*G+h*x,t[14]=m*S-p*b-g*y,t[15]=u*b-c*S+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*u,y=o*f-l*u,S=a*f-l*c;return t[7]*(s*S-i*y+e*g)-t[3]*(h*S-r*y+n*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],S=i[0],w=i[1],b=i[2],M=i[3];return t[0]=S*e+w*o+b*c+M*m,t[1]=S*h+w*a+b*f+M*g,t[2]=S*r+w*l+b*d+M*y,t[3]=S*n+w*u+b*p+M*s,t[4]=(S=i[4])*e+(w=i[5])*o+(b=i[6])*c+(M=i[7])*m,t[5]=S*h+w*a+b*f+M*g,t[6]=S*r+w*l+b*d+M*y,t[7]=S*n+w*u+b*p+M*s,t[8]=(S=i[8])*e+(w=i[9])*o+(b=i[10])*c+(M=i[11])*m,t[9]=S*h+w*a+b*f+M*g,t[10]=S*r+w*l+b*d+M*y,t[11]=S*n+w*u+b*p+M*s,t[12]=(S=i[12])*e+(w=i[13])*o+(b=i[14])*c+(M=i[15])*m,t[13]=S*h+w*a+b*f+M*g,t[14]=S*r+w*l+b*d+M*y,t[15]=S*n+w*u+b*p+M*s,t},us=function(t,s,i){var e,h,r,n,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=n*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,l,u,c,f,d,p,m,g,y,S,w,b,M,v,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<Mh?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],S=G*T*(h=1-i)-e*_,w=T*T*h+i,b=e*T*h+G*_,M=G*e*h+T*_,v=T*e*h-G*_,x=e*e*h+i,t[0]=r*(i=G*G*h+i)+(l=s[4])*(y=T*G*h+e*_)+(d=s[8])*(e=e*G*h-T*_),t[1]=n*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*S+l*w+d*b,t[5]=n*S+u*w+p*b,t[6]=o*S+c*w+m*b,t[7]=a*S+f*w+g*b,t[8]=r*M+l*v+d*x,t[9]=n*M+u*v+p*x,t[10]=o*M+c*v+m*x,t[11]=a*M+f*v+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+l*e,t[6]=n*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-r*e,t[10]=u*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-l*e,t[2]=n*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+l*i,t[10]=n*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+l*e,t[2]=n*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-r*e,t[6]=u*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Mh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},vs=function(t,s){var i=new vh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+u*e+a*r-l*h)/c,i[1]=2*(a*n+u*h+l*e-o*r)/c,i[2]=2*(l*n+u*r+o*h-a*e)/c):(i[0]=2*(o*n+u*e+a*r-l*h),i[1]=2*(a*n+u*h+l*e-o*r),i[2]=2*(l*n+u*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},l=function(t,s){var i=new vh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(u=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(h-n)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-n)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var h=(n=s[0])*(u=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,S=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=S,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(S*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),l=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Rs=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),l=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*l,t[15]=1,t},As=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Ps=function(t,s,i,e){var h,r,n,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Mh&&Math.abs(l-d)<Mh&&Math.abs(s-i)<Mh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,r=i*h-f*u,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+r*l+n*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Es=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-n*i)*e+(n=n*l-o*a)*n)&&(c*=u=1/Math.sqrt(u),e*=u,n*=u),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=l*n-i*e,t[5]=i*c-a*n,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Os=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ns=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],S=s[1],w=s[2],b=s[3],M=s[4],v=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],R=s[12],A=s[13],P=s[14],s=s[15];return Math.abs(i-y)<=Mh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-S)<=Mh*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(h-w)<=Mh*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-b)<=Mh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-M)<=Mh*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-v)<=Mh*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-x)<=Mh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=Mh*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=Mh*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=Mh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=Mh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=Mh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-R)<=Mh*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-A)<=Mh*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-P)<=Mh*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new vh(3);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new vh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new vh(3);return e[0]=t,e[1]=s,e[2]=i,e},Us=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Hs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Xs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Ys=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},$s=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},S=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(S(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},li=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,l=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*n,t},ui=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,l=o*n;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dh()*Math.PI,e=2*Dh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,l=e*n-h*r,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=r+(o*=h)+(u*=2),t[1]=n+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Si=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&S(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},vi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Mh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Mh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ri=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ai=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Pi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ei=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Oi=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},ki=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Bi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Ni=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},M=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},v=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Ui=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*n-s*r,t[2]=e*a-l*n+s*h,t[3]=-e*o+l*r-u*h,t},Hi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Dh()-1)*i+(e=2*Dh()-1)*e););for(;1<=(o=(h=2*Dh()-1)*h+(r=2*Dh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*h,u=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=l*i+(e=-n*e-o*h-a*r)*-n+u*-a-c*-o,t[1]=u*i+e*-o+c*-n-l*-a,t[2]=c*i+e*-a+l*-o-u*-n,t[3]=s[3],t},Xi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Yi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},$i=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Mh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},A=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return A(t,s),Hh(t,t,i),R(t,t),t},P=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=n*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Mh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Dh(),i=Dh(),e=Dh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},E=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Oh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"xzy":t[0]=n*l*c-o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c+n*a*u;break;case"yxz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;case"yzx":t[0]=n*l*c+o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c-n*a*u;break;case"zxy":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"zyx":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-Mh},ue=function(){var t=new vh(8);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new vh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new vh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new vh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new vh(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Se=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Me=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},ve=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+l,t[5]=n*a+r*o-e*i+u,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return _(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return I(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return C(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],l=s[3];return t[0]=n*i+l*e+o*r-a*h,t[1]=o*i+l*h+a*e-n*r,t[2]=a*i+l*r+n*h-o*e,t[3]=l*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+l*h+a*e-n*r,t[6]=a*i+l*r+n*h-o*e,t[7]=l*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*n+h*a-r*o,t[1]=h*l+s*o+r*n-e*a,t[2]=r*l+s*a+e*o-h*n,t[3]=s*l-e*n-h*o-r*a,t[4]=e*(l=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*l+s*o+r*n-e*a,t[6]=r*l+s*a+e*o-h*n,t[7]=s*l-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,l;return Math.abs(e)<Mh?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/l,r=n*i[1]/l,n=n*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-l*n,t[2]=a*i+e*n+l*r-o*h,t[3]=e*i-l*h-o*r-a*n,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+l*r+a*h-e*n,t[6]=a*i+l*n+e*r-o*h,t[7]=l*i-e*h-o*r-a*n,t)},Re=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ae=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*u+n*o+h*l-r*a+c*i+s*p+f*g-d*m,t[5]=h*u+n*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+n*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*u-e*o-h*a-r*l+s*i-c*p-f*m-d*g,t},Pe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ee=function(t,s,i,e){var h=1-e;return $h(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},Oe=function(t,s){var i,e,h,r,n,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(n=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-r*l)/u),t},ke=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Be=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Mh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Mh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=Mh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Mh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Mh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Mh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Mh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},O=function(){var t=new vh(2);return vh!=Float32Array&&(t[0]=0,t[1]=0),t},Ne=function(t){var s=new vh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new vh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},Ue=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},He=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Xe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Ye=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},$e=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Dh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Sh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Mh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,S,w,b,x,G,T,_,I,C,R,A,P,E,F,D,O,Mh=1e-6,vh="undefined"!=typeof Float32Array?Float32Array:Array,Dh=Math.random,Oh="zyx",kh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:Mh,get S(){return vh},M:Dh,G:Oh,T:k,_:L,equals:B},Bh=Object.freeze({__proto__:null,create:N,clone:W,I:j,identity:V,C:U,set:H,R:z,A:J,P:q,F:X,multiply:t,rotate:Y,scale:$,D:K,O:Z,L:Q,B:tt,N:st,add:it,W:s,j:et,equals:ht,V:rt,U:nt,mul:t,sub:s}),Nh=Object.freeze({__proto__:null,create:ot,clone:at,I:lt,identity:ut,C:ct,set:ft,A:dt,F:pt,multiply:i,rotate:mt,scale:gt,translate:yt,D:St,O:wt,H:bt,L:Mt,B:vt,add:xt,W:e,V:Gt,U:Tt,j:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,J:Ct,clone:Rt,I:At,C:Pt,set:Et,identity:Ft,R:Dt,A:Ot,P:kt,F:Lt,multiply:r,translate:Bt,rotate:Nt,scale:Wt,H:jt,D:Vt,O:Ut,X:Ht,Y:zt,$:Jt,K:qt,L:Xt,B:Yt,add:$t,W:n,V:Kt,U:Zt,j:Qt,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,I:es,C:hs,set:rs,identity:p,R:ns,A:os,P:as,F:ls,multiply:o,translate:us,scale:cs,rotate:fs,Z:ds,tt:ps,it:ms,H:gs,O:ys,D:Ss,et:ws,ht:bs,nt:Ms,ot:f,lt:vs,ut:a,ct:d,dt:l,gt:xs,yt:Gs,St:Ts,Y:_s,bt:Is,Mt:u,perspective:u,vt:Cs,xt:Rs,Gt:c,ortho:c,Tt:As,_t:Ps,It:Es,L:Fs,B:Ds,add:Os,W:ks,V:Ls,U:Bs,j:Ns,equals:Ws,mul:o,sub:ks}),Yh=Js,Zh=qs,Uh=Xs,Qh=ii,tr=ei,jh=Vs,sr=hi,Fh=m(),Gh=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,C:g,I:Us,set:Hs,add:zs,W:Js,multiply:qs,Ct:Xs,ceil:Ys,floor:$s,min:Ks,max:Zs,round:Qs,scale:ti,Rt:si,At:ii,Pt:ei,Et:hi,Ft:ri,inverse:ni,normalize:y,Dt:S,Ot:w,kt:oi,Lt:ai,Bt:li,Nt:ui,random:ci,Wt:fi,jt:di,Vt:pi,Z:mi,tt:gi,it:yi,angle:Si,Ut:wi,L:bi,j:Mi,equals:vi,sub:Yh,mul:Zh,div:Uh,Ht:Qh,zt:tr,Jt:jh,qt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),Yh=Ci,Zh=Ri,Uh=Ai,Qh=Bi,tr=Ni,sr=M,ir=v,Eh=b(),Vh=Object.freeze({__proto__:null,create:b,clone:xi,C:Gi,I:Ti,set:_i,add:Ii,W:Ci,multiply:Ri,Ct:Ai,ceil:Pi,floor:Ei,min:Fi,max:Di,round:Oi,scale:ki,Rt:Li,At:Bi,Pt:Ni,length:M,Et:v,Ft:Wi,inverse:ji,normalize:Vi,Dt:x,Ot:Ui,kt:Hi,random:zi,Wt:Ji,Vt:qi,Ut:Xi,L:Yi,j:$i,equals:Ki,sub:Yh,mul:Zh,div:Uh,Ht:Qh,zt:tr,Jt:sr,qt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Eh[0]=t[n],Eh[1]=t[n+1],Eh[2]=t[n+2],Eh[3]=t[n+3],h(Eh,Eh,r),t[n]=Eh[0],t[n+1]=Eh[1],t[n+2]=Eh[2],t[n+3]=Eh[3];return t}}),Yh=xi,Zh=Gi,Uh=Ti,Qh=_i,tr=Ii,sr=se,Hh=ki,zh=x,ir=Hi,er=Jh=M,hr=qh=v,Xh=Vi,rr=$i,Rh=m(),Ah=g(1,0,0),Ph=g(0,1,0),nr=function(t,s,i){var e=S(s,i);return e<-.999999?(w(Rh,Ah,s),jh(Rh)<1e-6&&w(Rh,Ph,s),y(Rh,Rh),T(t,Rh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Rh,s,i),t[0]=Rh[0],t[1]=Rh[1],t[2]=Rh[2],t[3]=1+e,Xh(t,t))},Ih=G(),Ch=G(),or=function(t,s,i,e,h,r){return P(Ih,s,h,r),P(Ch,i,e,r),P(t,Ih,Ch,2*r*(1-r)),t},_h=h(),Yh=Object.freeze({__proto__:null,create:G,identity:Zi,Xt:T,Yt:Qi,$t:te,multiply:se,Z:_,tt:I,it:C,Kt:ie,exp:R,Zt:A,pow:ee,Lt:P,random:he,A:re,Qt:ne,ts:E,es:oe,L:ae,clone:Yh,C:Zh,I:Uh,set:Qh,add:tr,mul:sr,scale:Hh,Dt:zh,kt:ir,length:Jh,Jt:er,Et:qh,qt:hr,normalize:Xh,j:rr,equals:le,hs:nr,ns:or,os:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],Xh(t,E(t,_h))}}),$h=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,C:fe,ls:de,ot:F,H:pe,D:me,J:ge,I:D,identity:ye,set:Se,us:Uh,ds:we,gs:Uh,ys:be,ut:Me,translate:ve,Z:xe,tt:Ge,it:Te,Ss:_e,ws:Ie,bs:Ce,add:Re,multiply:Ae,mul:Ae,scale:Pe,Dt:$h,kt:Ee,A:Fe,Qt:De,length:Jh,Jt:Jh,Et:Kh,qt:Zh,normalize:Oe,L:ke,j:Le,equals:Be}),tr=ih,sr=He,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Th=O(),or=Object.freeze({__proto__:null,create:O,clone:Ne,C:We,I:je,set:Ve,add:Ue,W:He,multiply:ze,Ct:Je,ceil:qe,floor:Xe,min:Ye,max:$e,round:Ke,scale:Ze,Rt:Qe,At:th,Pt:sh,length:ih,Et:eh,Ft:hh,inverse:rh,normalize:nh,Dt:oh,Ot:ah,kt:lh,random:uh,Ms:ch,vs:fh,jt:dh,Wt:ph,rotate:mh,angle:gh,Ut:yh,L:Sh,j:wh,equals:bh,Jt:tr,sub:sr,mul:ir,div:er,Ht:hr,zt:rr,qt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Th[0]=t[n],Th[1]=t[n+1],h(Th,Th,r),t[n]=Th[0],t[n+1]=Th[1];return t}}),globalThis.xs=Lh,globalThis.xs.Gs=Bh,globalThis.xs.Ts=Nh,globalThis.xs._s=Wh,globalThis.xs.Is=xh,globalThis.xs.Cs=Yh,globalThis.xs.Rs=Qh,globalThis.xs.As=or,globalThis.xs.Ps=Gh,globalThis.xs.Es=Vh}var Th,_h,Ih,Ch,Rh,Ah,Ph,Eh,Fh,Mh,vh,Dh,Oh,kh,Lh,Bh,Nh,Wh,xh,jh,Gh,Vh,Uh,Hh,zh,Jh,qh,Xh,Yh,$h,Kh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,D,O,k,L;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=O,(r=D)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},R=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},A=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=k,r=L;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},P=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(A(t,r))for(var n=0;n<t.length;++n)if(u(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},E=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var M=0;M<t.length;++M)if(A(w,M)){i.push(w[M]);for(var u=c=Number.MAX_VALUE,v=0;v<t.length;++v)x(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M-1),C(w,M),C(w,v-1))&&(l=E(C(w,M-1),C(w,M),C(w,v),C(w,v-1)),T(C(w,M+1),C(w,M),l))&&(f=I(w[M],l))<c&&(c=f,a=l,m=v),x(C(w,M+1),C(w,M),C(w,v+1))&&_(C(w,M+1),C(w,M),C(w,v))&&(l=E(C(w,M+1),C(w,M),C(w,v),C(w,v+1)),x(C(w,M-1),C(w,M),l))&&(f=I(w[M],l))<u&&(u=f,o=l,p=v);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),M<p?(R(y,w,M,p+1),y.push(l),S.push(l),0!==m&&R(S,w,m,w.length),R(S,w,0,M+1)):(0!==M&&R(y,w,M,w.length),R(y,w,0,p+1),y.push(l),S.push(l),R(S,w,m,M+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(v=m;v<=p;++v)G(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M+1),C(w,M),C(w,v))&&(f=I(C(w,M),C(w,v)))<d&&P(w,M,v)&&(d=f,g=v%t.length);M<g?(R(y,w,M,g+1),0!==g&&R(S,w,g,b.length),R(S,w,0,M+1)):(0!==M&&R(y,w,M,b.length),R(y,w,0,g+1),R(S,w,g,M+1))}return y.length<S.length?(F(y,s,i,e,h,r,n),F(S,s,i,e,h,r,n)):(F(S,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,G,T,_,r,I,C,n,R,l,A,u,P,c,f,d,E,F,m,g,D=[],O=[],k=[],L=[],self.Fs={Ds:s,Os:F,ks:i,Ls:e,Bs:p,Ns:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Ws=class{constructor(){throw TypeError("static class can't be instantiated")}static Vs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Us(){t=!0}static Hs(){return t}static zs(){s=!0}static Js(){return s}static qs(t){i=t}static Xs(){return i}static Ys(){return"final"===i}};r.isDebug=!1,r.$s=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ks={}}{const s=self.Ws;s.Zs=class{constructor(t){this.Qs=t,this.ti=new Map,this.si()}si(){let t=this.Qs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.ei(i)}ei(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.ti.set(i,e)}else this.ti.set(t,null)}hi(){for(const t of this.ti)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ri(t){return this.ti.has(t)}ni(t){const s=this.ti.get(t);return void 0===s?null:s}oi(){history.replaceState("",document.title,location.pathname+location.search)}ai(t){this.Qs=t,this.ti.clear(),this.si()}},s.li=new s.Zs(location.search),s.ci=new s.Zs(location.hash),s.li.ri("perf")&&(s.fi=!0),"dev"!==s.li.ni("mode")&&s.qs("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ws,W="(unknown)",j=(a.di={mi:W,gi:W,yi:W,Si:W,wi:NaN,bi:W,Mi:"browser",vi:!0,xi:!1,Gi:!1,Ti:!1,_i:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),V=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=H.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.di.yi="Chromium",a.di.Si=h),a.di.yi=s||W,a.di.Si=i||W,a.di.bi=e||W};s,a.di.mi=U.platform,a.di.xi=U.mobile,a.di.vi=!a.di.xi;const H=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let i=!1;a.di._i=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.di.mi?a.di.gi=e(t.platformVersion):a.di.gi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(V);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.di.mi="Windows";const s=t[1];a.di.gi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.di.mi="macOS",a.di.gi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.di.mi="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.di.mi="Linux"}),t(/android/i,()=>{a.di.mi="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.di.mi="Android",a.di.gi=t[1]}),a.di.mi===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.di.mi="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.di.mi="iOS",a.di.gi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(V),q=/chromium\//i.test(V),X=/edg\//i.test(V),Y=/OPR\//.test(V),$=/nwjs/i.test(V),K=/safari\//i.test(V),Z=/webkit/i.test(V),Q=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.di.yi="Chrome",a.di.Si=t[1],a.di.bi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.di.yi="Edge",a.di.Si=t[1],a.di.bi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.di.yi="Opera",a.di.Si=t[1],a.di.bi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.di.yi="Chromium",a.di.Si=t[1],a.di.bi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.di.yi="NW.js",a.di.Si=t[1],a.di.bi="Chromium",a.di.Mi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.di.yi="Firefox",a.di.Si=t[1],a.di.bi="Gecko"}),!K||J||q||X||Y||$||(a.di.yi="Safari",a.di.bi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.di.Si=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.di.yi="Chrome for iOS",a.di.Si=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.di.yi="Firefox for iOS",a.di.Si=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.di.yi="Edge for iOS",a.di.Si=t[1]})),a.di.bi===W&&Z&&(a.di.bi="WebKit"),"Android"===a.di.mi&&"Safari"===a.di.yi&&(a.di.yi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.di.mi)||"nwjs"===a.di.Mi;a.di.vi=tt,a.di.xi=!tt}"Chrome"===a.di.yi&&"browser"===a.di.Mi&&/wv\)/.test(V)&&(a.di.Mi="webview"),"nwjs"!==a.di.Mi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.di.Mi="webapp"),a.di.wi=parseFloat(a.di.Si);const i="macOS"===a.di.mi&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.di.mi="iOS",a.di.gi=a.di.Si,a.di.vi=!1,a.di.xi=!0,a.di.Ti=!0),a.di.Gi="macOS"===a.di.mi||"iOS"===a.di.mi}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),B(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Ii=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.Ii,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Ci=t,this.Ri=!this.Ci,this.Ri||"undefined"!=typeof indexedDB||(this.Ri=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ai=new Map}Pi(t){if(!this.Ri)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ri=!0;break}}async Ei(t){const s=this.Ai.get(t),i=await h(s);return void 0===i?null:i}async Fi(t,s){s=await h(s),this.Ai.set(t,s)}Di(t){this.Ai.delete(t)}Oi(){this.Ai.clear()}ki(){return Array.from(this.Ai.keys())}Li(){return this.Ri}Bi(){return this.Ai}Ni(t){this.Ai=t}async getItem(s,t){if(e(t),this.Ri)return this.Ei(s);let i;try{i=await this.Ci.get(s)}catch(t){return this.Pi(t),this.Ri?this.Ei(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ri)await this.Fi(s,i);else try{await this.Ci.set(s,i)}catch(t){if(this.Pi(t),!this.Ri)throw t;await this.Fi(s,i)}}async removeItem(s,t){if(e(t),this.Ri)this.Di(s);else try{await this.Ci.delete(s)}catch(t){this.Pi(t),this.Ri?this.Di(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ri)this.Oi();else try{await this.Ci.clear()}catch(t){this.Pi(t),this.Ri?this.Oi():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ri)return this.ki();let s=[];try{s=await this.Ci.keys()}catch(t){if(this.Pi(t),this.Ri)return this.ki();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ri?Promise.resolve(!0):this.Ci.ready()}Wi(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}ji(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Vi(t){i("localforage.defineDriver()")}Ui(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Ws;if(e.Hi={},e.Hi.Ji=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Hi.Xi="undefined"!=typeof HTMLDialogElement,e.Hi.Yi=!!self.requestIdleCallback,e.Hi.ImageBitmap=!!self.createImageBitmap,e.Hi.ImageBitmapOptions=!1,e.Hi.$i=!1,e.Hi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Hi.ImageBitmapOptions=!0}).catch(()=>{e.Hi.ImageBitmapOptions=!1})}catch(t){e.Hi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Hi.$i=10===t.width&&10===t.height}).catch(()=>{e.Hi.$i=!1})}catch(t){e.Hi.$i=!1}}if(e.Hi.Ki=!(!navigator.clipboard||!navigator.clipboard.readText),e.Hi.Zi=!(!navigator.permissions||!navigator.permissions.query),e.Hi.Qi=!1,e.Hi.Zi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Hi.Qi=!0}).catch(()=>{e.Hi.Qi=!1})}e.Hi.te=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Hi.ie="undefined"!=typeof Proxy,e.Hi.he=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Hi.ne="function"==typeof fetch,e.Hi.oe=!!(self.isSecureContext&&"Opera"!==e.di.yi&&navigator.storage&&navigator.storage.persist),e.Hi.ae=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Hi.le=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.di.mi)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Hi.ImageDecoder=void 0!==self.ImageDecoder,e.Hi.ue=!!self.VideoEncoder,e.Hi.fe=!!self.showOpenFilePicker,e.Hi.de=!!self.queryLocalFonts,e.Hi.UserActivation=!!navigator.userActivation,e.Hi.pe=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Hi.pe=i&&"image/webp"===i.type}catch(t){e.Hi.pe=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Ws;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.me(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ge(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Ws;self.assert=function(t,s){t||i(s)}}{const h=self.Ws,mt=self.Ks,gt=(h.ye=function(t){return"number"==typeof t},h.Se=function(t){return h.ye(t)&&isFinite(t)},h.we=function(t){if(!h.ye(t))throw new TypeError("expected number")},h.Me=function(t){h.ve(t)},h.xe=function(t,s,i){if(!h.ye(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.Ge=function(...s){for(let t of s);},h.Te=function(t){if(!h.Se(t))throw new TypeError("expected finite number")},h._e=function(t){h.ve(t)},h.Ie=function(...s){for(let t of s);},h.Ce=function(t){return"string"==typeof t},h.Re=function(t){if(!h.Ce(t))throw new TypeError("expected string")},h.Ae=function(t){h.ve(t)},h.Pe=function(...s){for(let t of s);},h.Ee=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Fe=function(t){if(!h.Ee(t))throw new TypeError("expected simple object")},h.De=function(t){if(!h.ve(t)&&!h.Ee(t))throw new TypeError("expected simple object")},h.Oe=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.ke=function(t){if(!h.Oe(t))throw new TypeError("expected object")},h.Le=function(t){h.ve(t)},h.Be=function(...s){for(let t of s);},h.Ne=function(t){return h.We(t,Blob)&&"string"==typeof t.name},h.je=function(t){if(!h.Ne(t))throw new TypeError("expected file")},h.Ve=function(t){h.ve(t)},h.Ue=function(t){return Array.isArray(t)},h.He=function(t){if(!h.Ue(t))throw new TypeError("expected array")},h.Je=function(t){h.ve(t)},h.qe=function(...s){for(let t of s);},h.Xe=function(t){return!(!h.Ue(t)||t.length&&!h.Ue(t[0]))},h.Ye=function(s){if(!h.Xe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Ue(t))throw new TypeError("expected 2d array")},h.$e=function(t){h.ve(t)},h.Ke=function(t){return"function"==typeof t},h.Ze=function(t,s){if(!h.Ke(t))throw new TypeError("expected function");if(!h.ve(s)&&t!==s)throw new TypeError("expected same function reference")},h.Qe=function(t){h.ve(t)},h.ih=function(...s){for(let t of s);},h.eh=function(s,...i){if(!h.Ke(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.ve(t)&&s===t)return;throw new TypeError("expected same function reference")},h.hh=function(...s){if(!h.ve(s))for(let t of s);},h.rh=function(t,s){return t instanceof s},h.nh=function(s,...i){for(let t of i)if(h.rh(s,t))return!0;return!1},h.oh=function(t,s){if(!h.rh(t,s))throw new TypeError("unexpected type")},h.ah=function(t,s){h.ve(t)},h.uh=function(t,...s){for(let t of s);},h.fh=function(t,...s){if(!h.nh(t,...s))throw new TypeError("unexpected type")},h.ph=function(t,...s){if(!h.ve(t)&&!h.nh(t,...s))throw new TypeError("unexpected type")},h.mh=function(s,i){for(let t of s)if(!h.rh(t,i))return!1;return!0},h.gh=function(s){for(let t of s)if(!h.Se(t))return!1;return!0},h.yh=function(s,t){for(let t of s);},h.Sh=function(s,t){if(!h.ve(s))for(let t of s);},h.wh=function(s,t){if(!h.ve(s))for(let t of s);},h.bh=function(s){for(let t of s);},h.Mh=function(s){if(!h.ve(s))for(let t of s);},h.xh=function(t,s){return!(h.ve(t)||!h.Ce(t.nodeName))&&(!s||h.Gh(t.nodeName,s))},h.Th=function(t,s){if(h.ve(t)||!h.Ce(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Gh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h._h=function(t,s){h.ve(t)},h.Ih=function(t,s){return!(h.ve(t)||!h.Ce(t.tagName))&&(!s||h.Gh(t.tagName,s))},h.Ch=function(t,s){if(h.ve(t)||!h.Ce(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Gh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Rh=function(t,s){h.ve(t)},h.Ah=function(t){return h.Ih(t,"img")||h.Ih(t,"canvas")||h.Ih(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Ph=function(t){if(!h.Ah(t))throw new TypeError("expected drawable")},h.Eh=function(t){h.ve(t)},h.Fh=function(t){return t instanceof ImageData||h.Ah(t)},h.Dh=function(t){if(!h.Fh(t))throw new TypeError("expected drawable or image data")},h.Oh=function(t){if(!h.ve(t)&&!h.Fh(t))throw new TypeError("expected drawable or image data")},h.kh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Lh},h.Bh=function(t){if(!h.kh(t))throw new TypeError("expected string-like")},h.Nh=function(t){h.ve(t)},h.Wh=function(...s){for(let t of s);},h.jh=function(){throw new Error("must be overridden")},h.Vh=function(){throw new Error("not yet implemented")},h.Uh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.ve=function(t){return null==t},h.Hh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.zh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Jh=function(t){return h.rh(t,gt)},h.qh=function(t){},h.Xh=function(t){h.Yh(t,gt)},h.$h=function(t,...s){if(!h.Kh(t,...s))throw new TypeError("unexpected type")},h.Kh=function(t,...s){for(const i of s)if(h.We(t,i))return!0;return!1},h.Yh=function(t,s){if(!h.We(t,s))throw new TypeError("unexpected type")},h.We=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.we=h.we,mt.Me=h.Me,mt.Te=h.Te,mt._e=h._e,mt.Re=h.Re,mt.Ae=h.Ae,mt.ke=h.ke,mt.Le=h.Le,mt.He=h.He,mt.Je=h.Je,mt.Ze=h.Ze,mt.Qe=h.Qe,mt.oh=h.oh,mt.ah=h.ah,mt.ve=h.ve}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.ge())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.Zh(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.Qh(s,[...i]),s.length&&console.warn(`[Defence] '${p.Zh(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Ws,yt=new Map;p.ir=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.er=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.hr=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,rr:0,nr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.rr.toPrecision(3)} :: calls => `+this.nr}})},p.lr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.rr=i.total/i.nr,console.log(i.toString()),i.nr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ge=function(){return(new Error).stack},p.ur=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.Zh=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ye(t)?"<number>":p.Ce(t)?"<string>":p.Ue(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ke(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.cr={};const St=new Set(["then","splice"]);p.cr.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||h(`Accessed missing property '${s}' from defended object '${p.Zh(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&h(`Accessed property '${s}' on a released object '${p.Zh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.cr.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.Zh(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.Zh(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.Zh(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.cr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.Zh(t)}'`)},p.cr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.Zh(t)}'`)},p.cr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.Zh(t)}'`)};let f=-1,d=(p.dr=class{constructor(){if(p.$s&&p.Hi.ie){let t=Object.create(new.target.prototype),s=new Proxy(t,p.cr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.mr=function(s){if(p.$s&&p.Hi.ie&&s instanceof p.dr){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.Sr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.$s&&n(t,i),p.mr(i)},p.wr=function(t){let s=u.get(t);s&&c.set(s,p.ge())},p.br=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.Mr=class{constructor(t){this.vr="",t&&this.start(t)}start(t){p.fi&&(this.vr=t,performance.mark(this.vr+"-Start"))}end(){p.fi&&(performance.mark(this.vr+"-End"),performance.measure(this.vr,this.vr+"-Start",this.vr+"-End"))}next(t){p.fi&&(this.end(),this.vr=t,performance.mark(this.vr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ws,wt=2*Math.PI,bt=Math.PI/180,Mt=180/Math.PI,vt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Gr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Tr=function(t,s,i){return t<s?s:i<t?i:t},y._r=function(t){return(t%=wt)<0&&(t+=wt),t},y.Ir=function(t){return t*bt},y.Cr=function(t){return t*Mt},y.Rr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.Ar=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Pr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Er=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Fr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y._r(t+i):y._r(t-i):y._r(s)},y.Dr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.Or=function(t,s,i,e=0){let h=y.Er(t,s),r=wt*e;return y.Dr(s,t)?y._r(t+(h+r)*i):y._r(t-(h+r)*i)},y.kr=function(t,s,i,e=0){const h=y.Er(t,s),r=wt*e;return y.Dr(s,t)?y._r(t+(h+r)*i):y._r(t+(wt-h+r)*i)},y.Lr=function(t,s,i,e=0){const h=y.Er(t,s),r=wt*e;return y.Dr(s,t)?y._r(t-(-wt+h-r)*i):y._r(t-(h+r)*i)},y.Br=function(t,s){const i=y.Er(t,s);return y.Dr(t,s)?y._r(s-i):y._r(s+i)},y.kt=function(t,s,i){return t+i*(s-t)},y.Nr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Wr=function(t,s,i,e,h){return y.kt(e,h,y.Nr(t,s,i))},y.jr=function(t,s,i,e){return y.kt(y.kt(t,s,e),y.kt(s,i,e),e)},y.Vr=function(t,s,i,e,h){return y.kt(y.jr(t,s,i,h),y.jr(s,i,e,h),h)},y.Ur=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Hr=function(t){return 0<t&&0==(t-1&t)},y.zr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Jr=function(t,s){return Math.round(t*s)/s},y.qr=function(t,s){return Math.floor(t*s)/s},y.Xr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Yr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.$r=function(t,s,i){return y.Tr(t,0,255)|y.Tr(s,0,255)<<8|y.Tr(i,0,255)<<16},1024),xt=16384,Gt=8191,Tt=(y.Kr=function(t,s,i,e){return t=y.Tr(Math.floor(1024*t),-8192,Gt),s=y.Tr(Math.floor(1024*s),-8192,Gt),i=y.Tr(Math.floor(1024*i),-8192,Gt),e=y.Tr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*vt+s*xt*vt+i*vt+e)},y.Zr=function(t,s,i){return y.Kr(t,s,i,1)},y.Qr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*vt));return t>Gt&&(t-=xt),t/1024}},y.tn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*vt)/(xt*vt));return t>Gt&&(t-=xt),t/1024}},y.sn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*vt)/vt);return t>Gt&&(t-=xt),t/1024}},y.hn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%vt);return s/1023}},y.rn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.nn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.rn(i,e);return[i/t,e/t]},y.an=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,n),c=Math.max(h,n);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,S=i-t,w=e-s,b=n-h,M=o-r,v=Math.abs(w*b-M*S),x=b*y-M*g;if(Math.abs(x)>v)return!1;const G=S*y-w*g;return Math.abs(G)<=v},y.ln=function(t,s,i,e,h,r,n,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<n)return!1;const g=a-t+u-i,y=l-s+c-e,S=i-t,w=e-s,b=u-a,M=c-l,v=Math.abs(w*b-M*S),x=b*y-M*g;if(Math.abs(x)>v)return!1;const G=S*y-w*g;return Math.abs(G)<=v},y.un=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.cn(),u=h.fn(),c=h.dn(),f=h.pn(),d=h.mn(),p=h.gn(),m=h.yn(),g=h.Sn();return y.ln(t,s,i,e,r,n,o,a,l,u,c,f)||y.ln(t,s,i,e,r,n,o,a,c,f,d,p)||y.ln(t,s,i,e,r,n,o,a,d,p,m,g)||y.ln(t,s,i,e,r,n,o,a,m,g,l,u)},y.wn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.ln(s,i,e,h,n,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.ln(s,i,e,h,n,o,a,l,r[u],r[u+1],r[0],r[1])};y.bn=function(t,s,i,e,h,r,n,o){const a=i-t,l=e-s,u=n-h,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.Mn=function(t,s,i,e,h,r,n,o,a){const l=(n-h)*a,u=(o-r)*a;return y.bn(t,s,i,e,h-l,r-u,n+l,o+u)},y.vn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),b=(y*g-m*S)*w,M=(p*S-m*g)*w;return 0<=b&&0<=M&&b+M<=1},y.xn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,b=(g*y-m*S)/w,M=(p*S-m*y)/w,v=1-b-M;return[v,b,M]},y.Gn=function(t,s,i,e,h,r,n,o,a,l,u,c){return[t*e+s*n+i*l,t*h+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Ws,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.Tn=function(){return i},l._n=function(){if(!s)return"";const t=s.location;return l.In(t.origin+t.pathname)+i},l.In=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Cn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.Rn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.An=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Pn=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.En=function(t){return t.replace(/\\/g,"/")},l.Fn=function(t,s){const i=t?l.Rn(t).slice(1):"";return s===i},l.Dn=function(t,s){let i,e;return l.Ne(t)&&(i=l.Pn(t.name)),l.Ce(t)&&(i=l.Pn(t)),l.Ne(s)&&(e=l.Pn(s.name)),l.Ce(s)&&(e=l.Pn(s)),i===e},l.On=function(t){t=l.En(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,kn:h,name:r,root:s,ext:n,Ln:a}},l.Bn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Nn=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Wn=function(){},l.Gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.jn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Vn=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Un=function(t,s){t.length=s},l.Hn=function(t){t&&0!==t.length&&l.Un(t,0)},l.zn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Un(t,0)}l.Un(i,0)}},l.Jn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.qn=function(t,s,i){const e=t.length;(s|=0)<e?l.Un(t,s):e<s&&l.Jn(t,s,i)},l.Xn=function(t,s){l.Hn(t),l.Qh(t,s)},l.Qh=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Yn=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Un(i,s)}},l.$n=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Kn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Zn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return l.Un(i,r),h},l.Qn=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Un(i,h),t-h},l.eo=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.ho=function(t,s){if(!l.eo(t,s))throw new RangeError("array index out of bounds")},l.ro=function(t){return t.slice()},l.no=function(t,i){let e=[];for(let s of t)if(l.Oe(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Ue(s)?e.push(l.no(s,i)):e.push(s);return e},l.ao=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.lo=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.uo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.co=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.fo=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.do=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.po=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.mo=function(t){e.push(t)},l.yo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.So=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},l.wo=function(t){r.delete(t)},l.bo=l.So,l.Mo=function(){return new Promise(t=>l.bo(t))},new Set);l.vo=function(s){const i=self.requestAnimationFrame(async t=>{await l.Mo(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.xo=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Ws;r.Go=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.To=function(t){return!r.Go(t)},r._o=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Io=function(t,s){return fetch(t,s).then(t=>(r._o(t),t))},r.Co=function(t){return r.Io(t).then(t=>t.text())},r.Ro=function(t){return r.Io(t).then(t=>t.json())},r.Ao=function(t){return r.Io(t).then(t=>t.blob())},r.Po=function(t){return r.Io(t).then(t=>t.arrayBuffer())},r.Eo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.Fo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Do=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.Oo=function(t){return r.Do(t).then(t=>JSON.parse(t))},r.ko=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Eo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Lo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Bo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Tr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.No=function(t,s,i){const e=r.Lo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.Bo(e,s,i)},r.Wo=function(t,s,i){if(r.Hi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.No(t,s,i));if(r.Hi.ImageBitmap)return createImageBitmap(t).then(t=>r.No(t,s,i));{const e=r.Lo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.Bo(e,s,i)}},r.jo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Vo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Uo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.Ho=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.zo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Jo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.qo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Xo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ws,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.Yo=class{constructor(t,s,i,e){this.$o=NaN,this.Ko=NaN,this.Zo=NaN,this.Qo=NaN,this.$o=0,this.Ko=0,this.Zo=0,this.Qo=0,t instanceof u.Yo?this.set(t):this.ta(t||0,s||0,i||0,e||0)}ea(t,s,i){return this.$o=+t,this.Ko=+s,this.Zo=+i,this.Tr(),this}ta(t,s,i,e){return this.$o=+t,this.Ko=+s,this.Zo=+i,this.Qo=+e,this.Tr(),this}set(t){return this.$o=t.$o,this.Ko=t.Ko,this.Zo=t.Zo,this.Qo=t.Qo,this}I(t){return this.set(t)}add(t){this.$o+=t.$o,this.Ko+=t.Ko,this.Zo+=t.Zo,this.Qo+=t.Qo,this.Tr()}ra(t,s,i,e=0){this.$o+=+t,this.Ko+=+s,this.Zo+=+i,this.Qo+=+e,this.Tr()}na(t){this.oa(Math.max(this.$o,t.$o)-Math.min(this.$o,t.$o)),this.aa(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.la(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.ua(Math.max(this.Qo,t.Qo)-Math.min(this.Qo,t.Qo)),this.Tr()}ca(t){this.$o=t.$o,this.Ko=t.Ko,this.Zo=t.Zo}oa(t){this.$o=u.Tr(+t,0,1)}fa(){return this.$o}aa(t){this.Ko=u.Tr(+t,0,1)}ya(){return this.Ko}la(t){this.Zo=u.Tr(+t,0,1)}Sa(){return this.Zo}ua(t){this.Qo=u.Tr(+t,0,1)}wa(){return this.Qo}clone(){return u.Sr(u.Yo,this.$o,this.Ko,this.Zo,this.Qo)}toArray(){return[this.$o,this.Ko,this.Zo,this.Qo]}ba(){return new Float64Array(this.toArray())}Ma(t,s){t[s++]=this.$o,t[s++]=this.Ko,t[s++]=this.Zo,t[s]=this.Qo}xa(t,s){t[s++]=this.$o,t[s++]=this.Ko,t[s]=this.Zo}equals(t){return this.$o===t.$o&&this.Ko===t.Ko&&this.Zo===t.Zo&&this.Qo===t.Qo}Ga(t){return this.$o===t.$o&&this.Ko===t.Ko&&this.Zo===t.Zo}Ta(t,s,i){return this.$o===t&&this.Ko===s&&this.Zo===i}_a(t,s,i,e){return this.$o===t&&this.Ko===s&&this.Zo===i&&this.Qo===e}Ia(t,s){return t[s]===Math.fround(this.$o)&&t[s+1]===Math.fround(this.Ko)&&t[s+2]===Math.fround(this.Zo)&&t[s+3]===Math.fround(this.Qo)}Ca(t,s){return t[s]===Math.fround(this.$o)&&t[s+1]===Math.fround(this.Ko)&&t[s+2]===Math.fround(this.Zo)}multiply(t){this.$o*=t.$o,this.Ko*=t.Ko,this.Zo*=t.Zo,this.Qo*=t.Qo}Ra(t){this.$o*=t,this.Ko*=t,this.Zo*=t,this.Qo*=t}Aa(){return this.$o*=this.Qo,this.Ko*=this.Qo,this.Zo*=this.Qo,this}Pa(){return this.$o/=this.Qo,this.Ko/=this.Qo,this.Zo/=this.Qo,this}Tr(){return this.$o=u.Tr(this.$o,0,1),this.Ko=u.Tr(this.Ko,0,1),this.Zo=u.Tr(this.Zo,0,1),this.Qo=u.Tr(this.Qo,0,1),this}Ea(t){this.$o=u.Qr(t),this.Ko=u.tn(t),this.Zo=u.sn(t),this.Qo=u.hn(t)}Fa(t,s,i){const e=u.Se(t)?t:this.fa(),h=u.Se(s)?s:this.ya(),r=u.Se(i)?i:this.Sa();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Da(t,s,i,e){const h=u.Se(t)?t:this.fa(),r=u.Se(s)?s:this.ya(),n=u.Se(i)?i:this.Sa(),o=u.Se(e)?e:this.wa();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}Oa(){const t=Math.round(255*this.fa()),s=Math.round(255*this.ya()),i=Math.round(255*this.Sa());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}ka(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.oa(s),isFinite(i)&&this.aa(i),isFinite(e)&&this.la(e),this.ua(1),!0}La(){const t=Math.round(255*this.fa()),s=Math.round(255*this.ya()),i=Math.round(255*this.Sa());return t+`, ${s}, `+i}Ba(){const t=Math.round(255*this.fa()),s=Math.round(255*this.ya()),i=Math.round(255*this.Sa());return[t,s,i]}Na(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.oa(i),isFinite(e)&&this.aa(e),isFinite(h)&&this.la(h),this.ua(1),!0}Wa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.oa(i),isFinite(e)&&this.aa(e),isFinite(h)&&this.la(h),this.ua(1),!0}ja(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.oa(i),isFinite(e)&&this.aa(e),isFinite(h)&&this.la(h),isFinite(r)&&this.ua(r),!0}Va(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.oa(i),isFinite(e)&&this.aa(e),isFinite(h)&&this.la(h),isFinite(r)&&this.ua(r),!0}Ua(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Wa(t):this.Na(t);if(t.startsWith("rgba("))return t.includes("%")?this.Va(t):this.ja(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ha(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Wa(t):4===s.length&&this.Va(t):3===s.length?this.Na(t):4===s.length&&this.ja(t)}}return this.ka(t)}toJSON(){return[this.$o,this.Ko,this.Zo,this.Qo]}za(t,s,i,e){let h,r,n;if(t%=360,s=u.Tr(s,0,100),i=u.Tr(i,0,100),e=u.Tr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),r=l(a,o,t),n=l(a,o,t-1/3)}return this.oa(h),this.aa(r),this.la(n),this.ua(e),this}Ha(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.za(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.za(+i[1],+i[2],+i[3],+i[4]),0))}Ja(){const t=this.$o,s=this.Ko,i=this.Zo,e=this.Qo,h=u.Yo.qa(t,s,i),r=u.Yo.Xa(t,s,i),n=u.Yo.Ya(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}$a(){const t=this.$o,s=this.Ko,i=this.Zo;return[u.Yo.qa(t,s,i),u.Yo.Xa(t,s,i),u.Yo.Ya(t,s,i),this.Qo]}Ka(t){!Array.isArray(t)||t.length<3||(this.$o=t[0],this.Ko=t[1],this.Zo=t[2],this.Qo=4<=t.length?t[3]:1)}set r(t){this.oa(t)}get r(){return this.fa()}set g(t){this.aa(t)}get g(){return this.ya()}set b(t){this.la(t)}get b(){return this.Sa()}set a(t){this.ua(t)}get a(){return this.wa()}Za(t,s){switch(t){case 0:this.oa(s);break;case 1:this.aa(s);break;case 2:this.la(s);break;case 3:this.ua(s);break;default:throw new RangeError("invalid color index")}}Qa(t){switch(t){case 0:return this.fa();case 1:return this.ya();case 2:return this.Sa();case 3:return this.wa();default:throw new RangeError("invalid color index")}}static tl(t,s){let i,e;if(Array.isArray(t))(i=new u.Yo).Ka(t);else{if(!(t instanceof u.Yo))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.Yo).Ka(s);else{if(!(s instanceof u.Yo))throw new Error("unexpected type");e=s}return i.equals(e)}static sl(t,s){return u.Tr(Math.max(t,s)-Math.min(t,s),0,1)}static il(t,s){const i=new u.Yo;return i.oa(Math.max(t.$o,s.$o)-Math.min(t.$o,s.$o)),i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.la(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.ua(Math.max(t.Qo,s.Qo)-Math.min(t.Qo,s.Qo)),i}static el(t,s){const i=new u.Yo(0,0,0,1);return i.oa(Math.max(t.$o,s.$o)-Math.min(t.$o,s.$o)),i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.la(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i}static qa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static Xa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Ya(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},u.Yo.hl=Object.freeze(u.Sr(u.Yo,1,1,1,1)),u.Yo.rl=Object.freeze(u.Sr(u.Yo,0,0,0,1)),u.Yo.nl=Object.freeze(u.Sr(u.Yo,0,0,0,0))}{const Rt=self.Ws;Rt.ol=class{constructor(t,s){this.al=0,this.ll=0,t instanceof Rt.ol?this.I(t):this.set(t||0,s||0)}set(t,s){this.al=+t,this.ll=+s}I(t){this.al=t.al,this.ll=t.ll}equals(t){return this.al===t.al&&this.ll===t.ll}ul(t,s){return this.al===t&&this.ll===s}Ia(t,s){return t[s]===Math.fround(this.al)&&t[s+1]===Math.fround(this.ll)}cl(t){this.al=+t}fl(){return this.al}dl(t){this.ll=+t}pl(){return this.ll}toArray(){return[this.al,this.ll]}ba(){return new Float64Array(this.toArray())}Ma(t,s){t[s++]=this.al,t[s]=this.ll}offset(t,s){this.al+=+t,this.ll+=+s}scale(t,s){this.al*=t,this.ll*=s}Ct(t,s){this.al/=t,this.ll/=s}round(){this.al=Math.round(this.al),this.ll=Math.round(this.ll)}floor(){this.al=Math.floor(this.al),this.ll=Math.floor(this.ll)}ceil(){this.al=Math.ceil(this.al),this.ll=Math.ceil(this.ll)}angle(){return Rt.Pr(0,0,this.al,this.ll)}ml(){return this.al*this.al+this.ll*this.ll}length(){return Math.hypot(this.al,this.ll)}gl(t,s){const i=this.al*s-this.ll*t;this.ll=this.ll*s+this.al*t,this.al=i}rotate(t){0!==t&&this.gl(Math.sin(t),Math.cos(t))}yl(t,s,i){0===t||s===this.al&&i===this.ll||(this.al-=s,this.ll-=i,this.gl(Math.sin(t),Math.cos(t)),this.al+=+s,this.ll+=+i)}move(t,s){0!==s&&(this.al+=Math.cos(t)*s,this.ll+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.al/=t,this.ll/=t)}Tr(t,s){this.al=Rt.Tr(this.al,t,s),this.ll=Rt.Tr(this.ll,t,s)}Dt(t){return this.al*t.al+this.ll*t.ll}reverse(){this.al=-this.al,this.ll=-this.ll}Sl(){let t=this.al;return this.al=this.ll,this.ll=-t,this}}}{const At=self.Ws;At.Rect=class{constructor(t,s,i,e){this.wl=NaN,this.bl=NaN,this.Ml=NaN,this.vl=NaN,this.wl=0,this.bl=0,this.Ml=0,this.vl=0,t instanceof At.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.wl=+t,this.bl=+s,this.Ml=+i,this.vl=+e}xl(t,s,i,e){s=+s,this.wl=t=+t,this.bl=s,this.Ml=t+ +i,this.vl=s+ +e}I(t){this.wl=+t.wl,this.bl=+t.bl,this.Ml=+t.Ml,this.vl=+t.vl}clone(){return new At.Rect(this.wl,this.bl,this.Ml,this.vl)}static Gl(t,s){const i=new At.Rect;return i.Tl(Math.min(t.wl,s.wl)),i._l(Math.min(t.bl,s.bl)),i.Il(Math.max(t.Ml,s.Ml)),i.Cl(Math.max(t.vl,s.vl)),i}static Rl(t){return new At.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.wl===t.wl&&this.bl===t.bl&&this.Ml===t.Ml&&this.vl===t.vl}Al(t,s,i,e){return this.wl===t&&this.bl===s&&this.width()===i&&this.height()===e}Ia(t,s){return t[s]===Math.fround(this.wl)&&t[s+1]===Math.fround(this.bl)&&t[s+2]===Math.fround(this.Ml)&&t[s+3]===Math.fround(this.vl)}Tl(t){this.wl=+t}Pl(){return this.wl}_l(t){this.bl=+t}El(){return this.bl}Il(t){this.Ml=+t}Fl(){return this.Ml}Cl(t){this.vl=+t}Dl(){return this.vl}toArray(){return[this.wl,this.bl,this.Ml,this.vl]}ba(){return new Float64Array(this.toArray())}Ol(){return new DOMRect(this.wl,this.bl,this.width(),this.height())}static kl(t){return At.Sr(At.Rect,t.left,t.top,t.right,t.bottom)}Ma(t,s){t[s++]=this.wl,t[s++]=this.bl,t[s++]=this.Ml,t[s]=this.vl}Ll(t,s){t[s++]=this.wl,t[s++]=this.bl,t[s++]=this.Ml,t[s++]=this.bl,t[s++]=this.Ml,t[s++]=this.vl,t[s++]=this.wl,t[s]=this.vl}Bl(t,s,i){t[s++]=this.wl,t[s++]=this.bl,t[s++]=i,t[s++]=this.Ml,t[s++]=this.bl,t[s++]=i,t[s++]=this.Ml,t[s++]=this.vl,t[s++]=i,t[s++]=this.wl,t[s++]=this.vl,t[s]=i}width(){return this.Ml-this.wl}height(){return this.vl-this.bl}Nl(){return(this.wl+this.Ml)/2}Wl(){return(this.bl+this.vl)/2}offset(t,s){s=+s,this.wl+=t=+t,this.bl+=s,this.Ml+=t,this.vl+=s}offsetLeft(t){this.wl+=+t}offsetTop(t){this.bl+=+t}jl(t){this.Ml+=+t}Vl(t){this.vl+=+t}Ul(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.bl<this.vl?this.wl<this.Ml?this.vl=this.bl+this.width():this.vl=this.bl-this.width():this.wl<this.Ml?this.vl=this.bl-this.width():this.vl=this.bl+this.width()}Hl(t,s){s=+s,this.wl-=t=+t,this.bl-=s,this.Ml+=t,this.vl+=s}zl(t,s){s=+s,this.wl+=t=+t,this.bl+=s,this.Ml-=t,this.vl-=s}multiply(t,s){this.wl*=t,this.bl*=s,this.Ml*=t,this.vl*=s}Ct(t,s){this.wl/=t,this.bl/=s,this.Ml/=t,this.vl/=s}Jl(t){this.wl=+t-this.wl,this.Ml=+t-this.Ml}ql(t){this.bl=+t-this.bl,this.vl=+t-this.vl}Xl(t,s){const i=this.width(),e=this.height(),h=this.Pl()+i*t,r=this.El()+e*s;this.xl(h-e*s,r-i*t,e,i)}Yl(){const t=this.wl;this.wl=this.Ml,this.Ml=t}$l(){const t=this.bl;this.bl=this.vl,this.vl=t}Kl(t){const s=this.bl;this.bl=+t-this.vl,this.vl=+t-s}round(){this.wl=Math.round(this.wl),this.bl=Math.round(this.bl),this.Ml=Math.round(this.Ml),this.vl=Math.round(this.vl)}Zl(){this.wl=Math.ceil(this.wl),this.bl=Math.ceil(this.bl),this.Ml=Math.floor(this.Ml),this.vl=Math.floor(this.vl)}Ql(){this.wl=Math.floor(this.wl),this.bl=Math.floor(this.bl),this.Ml=Math.ceil(this.Ml),this.vl=Math.ceil(this.vl)}floor(){this.wl=Math.floor(this.wl),this.bl=Math.floor(this.bl),this.Ml=Math.floor(this.Ml),this.vl=Math.floor(this.vl)}ceil(){this.wl=Math.ceil(this.wl),this.bl=Math.ceil(this.bl),this.Ml=Math.ceil(this.Ml),this.vl=Math.ceil(this.vl)}Tr(t,s,i,e){this.wl=Math.max(this.wl,+t),this.bl=Math.max(this.bl,+s),this.Ml=Math.min(this.Ml,+i),this.vl=Math.min(this.vl,+e)}tu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.wl=At.Tr(this.wl,t,i),this.bl=At.Tr(this.bl,s,e),this.Ml=At.Tr(this.Ml,t,i),this.vl=At.Tr(this.vl,s,e)}normalize(){this.wl>this.Ml&&this.Yl(),this.bl>this.vl&&this.$l()}su(t){return!(t.Ml<this.wl||t.vl<this.bl||t.wl>this.Ml||t.bl>this.vl)}iu(t,s,i){return!(t.Ml+s<this.wl||t.vl+i<this.bl||t.wl+s>this.Ml||t.bl+i>this.vl)}eu(t,s){return t>=this.wl&&t<=this.Ml&&s>=this.bl&&s<=this.vl}hu(t){return t.wl>=this.wl&&t.bl>=this.bl&&t.Ml<=this.Ml&&t.vl<=this.vl}ru(t){t.wl<this.wl&&(this.wl=+t.wl),t.bl<this.bl&&(this.bl=+t.bl),t.Ml>this.Ml&&(this.Ml=+t.Ml),t.vl>this.vl&&(this.vl=+t.vl)}nu(t){this.wl=At.kt(t.wl,t.Ml,this.wl),this.bl=At.kt(t.bl,t.vl,this.bl),this.Ml=At.kt(t.wl,t.Ml,this.Ml),this.vl=At.kt(t.bl,t.vl,this.vl)}}}{const Pt=self.Ws;Pt.ou=class{constructor(t,s,i,e,h,r,n,o){this.au=NaN,this.lu=NaN,this.uu=NaN,this.cu=NaN,this.fu=NaN,this.du=NaN,this.pu=NaN,this.mu=NaN,this.au=0,this.lu=0,this.uu=0,this.cu=0,this.fu=0,this.du=0,this.pu=0,this.mu=0,t instanceof Pt.ou?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.au=+t,this.lu=+s,this.uu=+i,this.cu=+e,this.fu=+h,this.du=+r,this.pu=+n,this.mu=+o}gu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.au=t.au,this.lu=t.lu,this.uu=t.uu,this.cu=t.cu,this.fu=t.fu,this.du=t.du,this.pu=t.pu,this.mu=t.mu}equals(t){return this.au===t.au&&this.lu===t.lu&&this.uu===t.uu&&this.cu===t.cu&&this.fu===t.fu&&this.du===t.du&&this.pu===t.pu&&this.mu===t.mu}yu(t){this.au=+t}cn(){return this.au}Su(t){this.lu=+t}fn(){return this.lu}wu(t){this.uu=+t}dn(){return this.uu}bu(t){this.cu=+t}pn(){return this.cu}Mu(t){this.fu=+t}mn(){return this.fu}vu(t){this.du=+t}gn(){return this.du}xu(t){this.pu=+t}yn(){return this.pu}Gu(t){this.mu=+t}Sn(){return this.mu}Tu(){return new DOMQuad(new DOMPoint(this.au,this.lu),new DOMPoint(this.uu,this.cu),new DOMPoint(this.fu,this.du),new DOMPoint(this.pu,this.mu))}static _u(t){return Pt.Sr(Pt.ou,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.au,this.lu,this.uu,this.cu,this.fu,this.du,this.pu,this.mu]}ba(){return new Float64Array(this.toArray())}Ma(t,s){t[s++]=this.au,t[s++]=this.lu,t[s++]=this.uu,t[s++]=this.cu,t[s++]=this.fu,t[s++]=this.du,t[s++]=this.pu,t[s]=this.mu}Iu(t,s,i){t[s++]=this.au,t[s++]=this.lu,t[s++]=i,t[s++]=this.uu,t[s++]=this.cu,t[s++]=i,t[s++]=this.fu,t[s++]=this.du,t[s++]=i,t[s++]=this.pu,t[s++]=this.mu,t[s]=i}offset(t,s){s=+s,this.au+=t=+t,this.lu+=s,this.uu+=t,this.cu+=s,this.fu+=t,this.du+=s,this.pu+=t,this.mu+=s}round(){this.au=Math.round(this.au),this.lu=Math.round(this.lu),this.uu=Math.round(this.uu),this.cu=Math.round(this.cu),this.fu=Math.round(this.fu),this.du=Math.round(this.du),this.pu=Math.round(this.pu),this.mu=Math.round(this.mu)}floor(){this.au=Math.floor(this.au),this.lu=Math.floor(this.lu),this.uu=Math.floor(this.uu),this.cu=Math.floor(this.cu),this.fu=Math.floor(this.fu),this.du=Math.floor(this.du),this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu)}ceil(){this.au=Math.ceil(this.au),this.lu=Math.ceil(this.lu),this.uu=Math.ceil(this.uu),this.cu=Math.ceil(this.cu),this.fu=Math.ceil(this.fu),this.du=Math.ceil(this.du),this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu)}Cu(t){this.au=t.wl,this.lu=t.bl,this.uu=t.Ml,this.cu=t.bl,this.fu=t.Ml,this.du=t.vl,this.pu=t.wl,this.mu=t.vl}Ru(t,s){0===s?this.Cu(t):this.Au(t,Math.sin(s),Math.cos(s))}Au(t,s,i){const e=t.wl*s,h=t.bl*s,r=t.Ml*s,n=t.vl*s,o=t.wl*i,a=t.bl*i,l=t.Ml*i,u=t.vl*i;this.au=o-h,this.lu=a+e,this.uu=l-h,this.cu=a+r,this.fu=l-n,this.du=u+r,this.pu=o-n,this.mu=u+e}Pu(t){t.set(Math.min(this.au,this.uu,this.fu,this.pu),Math.min(this.lu,this.cu,this.du,this.mu),Math.max(this.au,this.uu,this.fu,this.pu),Math.max(this.lu,this.cu,this.du,this.mu))}eu(t,s){let i=this.uu-this.au,e=this.cu-this.lu,h=this.fu-this.au,r=this.du-this.lu,n=t-this.au,o=s-this.lu,a=i*i+e*e,l=i*h+e*r,u=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.pu-this.au)*i+(e=this.mu-this.lu)*e)*f-(l=i*h+e*r)*(u=i*n+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Nl(){return(this.au+this.uu+this.fu+this.pu)/4}Wl(){return(this.lu+this.cu+this.du+this.mu)/4}Eu(t,s,i,e){return!(!this.eu(t,s)&&!this.eu(i,e))||Pt.un(t,s,i,e,this)}Fu(t){let s=t.Nl(),i=t.Wl();if(this.eu(s,i))return!0;if(s=this.Nl(),i=this.Wl(),t.eu(s,i))return!0;const e=this.au,h=this.lu,r=this.uu,n=this.cu,o=this.fu,a=this.du,l=this.pu,u=this.mu;return Pt.un(e,h,r,n,t)||Pt.un(r,n,o,a,t)||Pt.un(o,a,l,u,t)||Pt.un(l,u,e,h,t)}Du(){const t=this.au,s=this.lu;this.au=this.uu,this.lu=this.cu,this.uu=this.fu,this.cu=this.du,this.fu=this.pu,this.du=this.mu,this.pu=t,this.mu=s}Ou(){this.ku(0,2),this.ku(1,3),this.ku(6,4),this.ku(7,5)}Lu(){this.ku(0,6),this.ku(1,7),this.ku(2,4),this.ku(3,5)}Bu(){this.ku(2,6),this.ku(3,7)}ku(t,s){const i=this.Nu(t);this.Wu(t,this.Nu(s)),this.Wu(s,i)}Nu(t){switch(t){case 0:return this.au;case 1:return this.lu;case 2:return this.uu;case 3:return this.cu;case 4:return this.fu;case 5:return this.du;case 6:return this.pu;case 7:return this.mu;default:throw new RangeError("invalid quad point index")}}Wu(t,s){switch(s=+s,t){case 0:this.au=s;break;case 1:this.lu=s;break;case 2:this.uu=s;break;case 3:this.cu=s;break;case 4:this.fu=s;break;case 5:this.du=s;break;case 6:this.pu=s;break;case 7:this.mu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Et=self.Ws,Ft=[0,0,1,0,1,1,0,1],Dt=Et.Sr(Et.ou);Et.ju=class extends Et.dr{constructor(t,s=!0){super(),t=t||Ft,this.Vu=Float64Array.from(t),this.Uu=new Et.Rect,this.Hu=!0,this.zu=s}wr(){}Ju(){return this.Vu}qu(){return this.Vu.length/2}Xu(t){this.Vu.length===t.length?this.Vu.set(t):this.Vu=Float64Array.from(t),this.Hu=!0}Yu(){this.Xu(Ft)}I(t){this.Xu(t.Vu)}$u(){this.Hu=!0}Ku(){if(this.Hu){let i=this.Vu,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Uu.set(e,h,r,n),this.Hu=!1}}Cu(t,s,i){let e=this.Vu;8!==e.length&&(e=new Float64Array(8),this.Vu=e),e[0]=t.Pl()-s,e[1]=t.El()-i,e[2]=t.Fl()-s,e[3]=t.El()-i,e[4]=t.Fl()-s,e[5]=t.Dl()-i,e[6]=t.Pl()-s,e[7]=t.Dl()-i,this.Uu.I(t),0===s&&0===i||this.Uu.offset(-s,-i),this.Hu=!1}Zu(t,s,i){Dt.I(t),Dt.offset(s,i),this.Xu(Dt.toArray()),this.Hu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Qu(t,s,e,h)}Qu(i,e,h,r){const n=this.Vu;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,l=n[o]*e;n[t]=a*r-l*h,n[o]=l*r+a*h}this.Hu=!0}offset(i,e){const h=this.Vu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}eu(i,e){const h=this.Vu;if(i===h[0]&&e===h[1])return!0;this.Ku();let t=this.Uu,r=t.Pl()-110,n=t.El()-101,o=t.Fl()+131,a=t.Dl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=n<e?(u=n,e):(u=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),S=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,b=h[t],M=h[t+1],v=h[w],x=h[1+w];Et.ln(r,n,i,e,l,c,u,f,b,M,v,x)&&++y,Et.ln(o,a,i,e,d,m,p,g,b,M,v,x)&&++S}return y%2==1||S%2==1}tc(t,c,f){const d=t.Vu,p=this.Vu;if(this.eu(d[0]+c,d[1]+f))return!0;if(t.eu(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,l;a=i<h?(n=i,h):(n=h,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,S=d[m]+c,w=d[1+m]+f;if(Et.ln(i,e,h,r,n,a,o,l,g,y,S,w))return!0}}return!1}Eu(i,e,h,r,n,o){if(this.eu(h-i,r-e))return!0;if(this.eu(n-i,o-e))return!0;let a=0,l=0,u,c;u=h<n?(a=h,n):(a=n,h),c=r<o?(l=r,o):(l=o,r);const f=this.Vu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Et.ln(h,r,n,o,a,u,l,c,p,m,g,y))return!0}return!1}Ou(i){const e=this.Vu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Hu=!0}Lu(i){const e=this.Vu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Hu=!0}Bu(){const i=this.Vu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Hu=!0}ic(){let i=this.Vu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.qu()}ec(){let i=this.Vu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.qu()}hc(){return this.Vu}rc(){return this.qu()}nc(){return this.zu}}}{const Ot=self.Ws;Ot.oc=class extends Ot.dr{constructor(t){if(super(),this.ac=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}wr(){this.lc(),this.ac=null}uc(){return 0===this.ac.size}lc(){const t=this.ac;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.ac,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ni(t,s){const i=this.ac.get(t);return i&&i.get(s)}ri(t,s){const i=this.ac.get(t);return!!i&&i.has(s)}fc(t,s){const i=this.ac,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}mc(t){const s=this.ac,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}yc(){let t=0;for(const s of this.ac.values())t+=s.size;return t}*values(){for(const t of this.ac.values())yield*t.values()}*Sc(){for(const[t,s]of this.ac.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.ac.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Ws;kt.wc=class extends kt.dr{constructor(){super(),this.Mc=new Set,this.vc=[],this.xc=!1}wr(){this.lc()}lc(){this.Mc.clear(),kt.Hn(this.vc),this.xc=!1}Gc(t){this.Mc.has(t)||(this.Mc.add(t),this.xc)||this.vc.push(t)}ri(t){return this.Mc.has(t)}fc(t){this.Mc.delete(t)&&(this.xc=!0)}yc(){return this.Mc.size}uc(){return 0===this.Mc.size}Tc(){return this.xc&&(this._c(),this.xc=!1),this.vc}_c(){const t=this.vc;kt.Hn(t);for(const s of this.Mc)t.push(s)}}}{const Lt=self.Ws,Bt=new Map,Nt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ut=new Map,Ht=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),$t=(self.Ic=class hs{constructor(){}static Cc(){return"default"}static Rc(){return"noease"}static Ac(t){return Yt.get(t)}static Pc(s,...i){this.Ec();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.Fc(t,s)||hs.Fc(t,s).transition.IsForAnyPurpose())):[...(t=Vt).keys()]).sort();return[...Nt.keys()].concat(e).filter(t=>!i.includes(t))}static Dc(){this.Ec();const t=[...Vt.keys()];return t.sort(),[...Nt.keys()].concat(t)}static Oc(){this.Ec();const t=[...Vt.keys()];return t.sort(),t}static kc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Lc(t){return this.Ec(),[...Nt.keys()].includes(t)}static Bc(t){const s=Jt.get(t);return s?Bt.get(s):hs.Lc(t)?Bt.get(t):Ht.has(t)?Ht.get(t):void 0}static Nc(t){return this.Ec(),zt.get(t)}static Wc(t,s){this.Ec();const i=hs.Bc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static Fc(t,s){this.Ec();const i=jt.get(s);if(i)return i.get(t)}static jc(t,s){this.Ec();const i=hs.Bc(t);return!!i||!!Wt.get(s).get(t)}static Vc(t){this.Ec();const s=hs.Bc(t);return s||Vt.get(t)}static Uc(t){return this.Ec(),Ut.get(t)}static Hc(t){this.Ec();const s=this.Dc();return s[t]}static zc(t,s){this.Ec();const i=this.Pc(s);return i.indexOf(t)}static Jc(t){return this.zc(t)}static Ec(){0===Bt.size&&(this.qc("default",()=>{}),this.qc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.qc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.qc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.qc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.qc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.qc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.qc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.qc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.qc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.qc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.qc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.qc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.qc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.qc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.qc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.qc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.qc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.qc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.qc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.qc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.qc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.qc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.qc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.qc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.qc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.qc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.qc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.qc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.qc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.qc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.qc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Xc("cubicbezier",this.Yc),this.Xc("spline",this.$c))}static qc(t,s,i=!1){if("function"==typeof s)hs.Kc(t,s,"predefined");else{if(!Lt.Ue(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Lt.Sr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.Kc(t,(t,s,i,e)=>h.Zc(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=Lt.Sr(Lt.Qc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.tf(i),hs.Kc(t,(t,s,i,e)=>r.Zc(t,s,i,e),"predefined")}}}static Xc(t,s){hs.Kc(t,s,"private")}static if(t,s,i,e){this.Ec(),hs.Kc(t,s,"custom",i,e)}static ef(t,s){if(!this.Lc(t)&&![...Ht.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static Kc(t,s,i,e,h){switch(i){case"predefined":Bt.set(t,s),Nt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),jt.get(e));n.set(t,h)}else Vt.set(t,s),Ut.set(t,h);break;case"private":Bt.set(t,s),Ht.set(t,s);break;default:throw new Error("unexpected ease mode")}}static hf(t,s,i,e){return 0===e?s:i*t/e+s}static Yc(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static $c(t,s,i,e,h,r,n,o,a,l){if(e===h&&r===n)return t;const u=es(t,s,e,r,o,l),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(u,c,f,d)}static rf(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<$t;++t){const a=ss(t*Kt,r,n,o);h.push(a)}return h}},11),Kt=1/($t-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],l=$t-1;for($t;r!=l&&a<=n;)r++,a=h[r],o+=Kt;r--;let u=(n-(a=h[r]))/(h[r+1]-a),c=o+u*Kt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Ce(t)};o;const rs=self.Ws;rs.nf=class{constructor(t){this.lf=[],this.vr=t||"",this.uf=0}wr(){this.lc(),this.lf=null}cf(){return this.vr}lc(){rs.zn(this.lf),this.uf=0}ff(){return this.uf}df(t=Math.random()*this.ff()){let s=0;for(const[i,e]of this.lf)if(t<(s+=i))return e;return 0}pf(t,s){o(s),this.uf+=t,this.lf.push([t,s])}gf(s,i){o(i);const e=0===s;for(let t=0;t<this.lf.length;t++){const h=this.lf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.lf.splice(t,1),this.uf-=h[0];break}}}yf(){return JSON.stringify(this.lf)}static Sf(t,s){const i=new rs.nf(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.pf(r,n)}return i}}}{let t=self.Ws,i=0;t.wf=class{constructor(t,s){this.bf=t,this.Mf=s,this.vf=i++,this.bf.xf("runtime","screen-reader-text",{type:"create",id:this.vf,text:this.Mf})}wr(){this.bf.xf("runtime","screen-reader-text",{type:"release",id:this.vf}),this.bf=null,this.Mf="",this.vf=-1}Gf(t){this.Mf!==t&&(this.Mf=t,this.bf.xf("runtime","screen-reader-text",{type:"update",id:this.vf,text:this.Mf}))}}}{const ns=self.Ws;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Tf=!1,this._f=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this._f)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Tf=!0}}}{const os=self.Ws;os.Event.If=class extends os.dr{constructor(t){super(),this.Cf=t,this.Rf=[],this.Af=new Set,this.Pf=[],this.Ef=new Set,this.Ff=0,this.Df=[]}wr(){0<this.Ff||(os.Hn(this.Rf),this.Af.clear(),os.Hn(this.Pf),this.Ef.clear(),os.Hn(this.Df),os.wr(this))}Of(t,s){this.kf()?this.Df.push({Lf:"add",Bf:t,capture:s}):s?this.Af.has(t)||(this.Rf.push(t),this.Af.add(t)):this.Ef.has(t)||(this.Pf.push(t),this.Ef.add(t))}Nf(t,s){this.kf()?this.Df.push({Lf:"remove",Bf:t,capture:s}):s?this.Af.has(t)&&(this.Af.delete(t),os.$n(this.Rf,t)):this.Ef.has(t)&&(this.Ef.delete(t),os.$n(this.Pf,t))}Wf(){return!this.Rf.length&&!this.Pf.length}kf(){return 0<this.Ff}jf(){const t=new Set,s=new Set;for(const i of this.Df)if("add"===i.Lf)this.Of(i.Bf,i.capture),(i.capture?s:t).delete(i.Bf);else{if("remove"!==i.Lf)throw new Error("invalid op");(i.capture?(this.Af.delete(i.Bf),s):(this.Ef.delete(i.Bf),t)).add(i.Bf)}os.Qn(this.Pf,t),os.Qn(this.Rf,s),os.Hn(this.Df)}Vf(i){this.Uf();let e=!1;for(let t=0,s=this.Rf.length;t<s;++t)if(this.Rf[t](i),i.Tf){e=!0;break}if(!e)for(let t=0,s=this.Pf.length;t<s&&(this.Pf[t](i),!i.Tf);++t);return this.Hf(),!i.defaultPrevented}zf(i){this.Uf();for(let t=0,s=this.Rf.length;t<s;++t)this.Rf[t](i);for(let t=0,s=this.Pf.length;t<s;++t)this.Pf[t](i);return this.Hf(),!0}Uf(){this.Ff++}Hf(){this.Ff--,0===this.Ff&&0<this.Df.length&&this.jf()}Jf(t){t?this.Uf():this.Hf()}qf(i){let e=[];for(let s=0,t=this.Rf.length;s<t;++s){let t=this.Rf[s];e.push(os.Xf(()=>t(i)))}for(let s=0,t=this.Pf.length;s<t;++s){let t=this.Pf[s];e.push(os.Xf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Yf(i){const e=[];this.Uf();for(let t=0,s=this.Rf.length;t<s;++t){const h=this.Rf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Pf.length;t<s;++t){const r=this.Pf[t](i);r instanceof Promise&&e.push(r)}return this.Hf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async $f(t){return this.Yf(t)}async Kf(i){this.Uf();for(let t=0,s=this.Rf.length;t<s;++t){const e=this.Rf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Pf.length;t<s;++t){const h=this.Pf[t](i);h instanceof Promise&&await h}return this.Hf(),!i.defaultPrevented}*Zf(i){this.Uf();for(let t=0,s=this.Rf.length;t<s;++t){const e=this.Rf[t](i);os.qo(e)&&(yield*e)}for(let t=0,s=this.Pf.length;t<s;++t){const h=this.Pf[t](i);os.qo(h)&&(yield*h)}this.Hf()}}}{const as=self.Ws;as.Event.Qf=class extends as.dr{constructor(){super(),this.t0=new Map,this.s0=!1}wr(){if(this.s0)throw new Error("already released");this.i0(),this.s0=!0,as.wr(this)}br(){return this.s0}i0(){if(this.t0){for(let t of this.t0.values())t.wr();this.t0.clear()}}e0(t,s){let i=this.t0.get(t);return i||(s?(i=as.Sr(as.Event.If,t),this.t0.set(t,i),i):null)}h0(t){return this.t0.has(t)}addEventListener(t,s,i){let e=this.e0(t,!0);e.Of(s,!!i)}removeEventListener(t,s,i){let e=this.e0(t,!1);e&&(e.Nf(s,!!i),e.Wf())&&this.t0.delete(t)}dispatchEvent(t){const s=this.e0(t.type,!1);return!s||(t.cancelable?s.Vf(t):s.zf(t))}r0(t){const s=this.e0(t.type,!1);return s?(t._f=!0,s.qf(t)):Promise.resolve(!0)}async n0(t){const s=this.e0(t.type,!1);if(!s)return!0;this.t0.delete(t.type),t._f=!0;const i=await s.qf(t);return s.wr(),i}async o0(t){const s=this.e0(t.type,!1);return!s||s.$f(t)}a0(t){const s=this.e0(t.type,!1);return!s||s.Yf(t)}async l0(t){const s=this.e0(t.type,!1);return!s||s.Kf(t)}u0(t){const s=this.e0(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Zf(t)}Jf(t){for(const s of this.t0.values())s.Jf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;n(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Bf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Ws),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.li.ri("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Xf=function(i){let e=null;return t.isDebug&&(e=t.ge()),new Promise((t,s)=>{u.push({Bf:i,resolve:t,reject:s,stack:e}),h?n(u.pop()):-1===c&&r(a)})},t.Xf.c0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.f0(i)){let t=s.d0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Ws),e=1e3,h=100,r=-1,n=(i.p0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.m0=class{constructor(t,s){this.g0=t,this.y0=1e3*s,this.S0=0,this.w0=!1}b0(){let t=i.p0();this.S0=t+this.y0,this.w0||(a.add(this),this.w0=!0),-1===n?(o=this.S0,n=self.setTimeout(s,this.y0+h)):this.S0<o&&o>t+e&&(self.clearTimeout(n),o=this.S0,n=self.setTimeout(s,this.y0+h))}f0(t){return!(t>=this.S0)||(this.g0()?(this.S0=t+this.y0,!0):this.w0=!1)}d0(){return this.S0}M0(){this.w0&&(a.delete(this),this.w0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}wr(){this.M0(),this.g0=null}}}{const ls=self.Ws;ls.v0=class us{constructor(t){this.x0=!1,this.G0=t}T0(){this.x0||(this.x0=!0,this.G0&&(this.G0(),this.G0=null))}_0(){return this.x0}wr(){this.T0()}static wr(t){return new us(()=>t.wr())}static I0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.C0;for(let t of i)s.addEventListener(t,e,h),r.Gc(ls.Sr(ls.v0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),ls.Sr(ls.v0,()=>s.removeEventListener(i,e,h))}},ls.R0=class extends ls.v0{A0(t){this.G0=t}},ls.C0=class extends ls.v0{constructor(...s){super(),this.P0=new Set;for(let t of s)this.Gc(t)}Gc(...s){if(this.x0)throw new Error("already disposed");for(let t of s)this.P0.add(t)}E0(t){if(this.x0)throw new Error("already disposed");this.P0.delete(t)}F0(){if(this.x0)throw new Error("already disposed");if(this.P0){for(let t of this.P0)t.T0();this.P0.clear()}}_0(){return this.x0}T0(){if(this.x0)throw new Error("already disposed");this.x0=!0;for(let t of this.P0)t.T0();this.P0.clear(),this.P0=null}wr(){this.T0()}}}{const cs=self.Ws;cs.D0=class extends cs.dr{constructor(){super(),this.O0=0,this.ll=0,this.k0=0,this.L0=0}Gc(t){this.ll=(t=+t)-this.O0,this.k0=this.L0+this.ll,this.O0=this.k0-this.L0-this.ll,this.L0=this.k0}B0(t){this.L0-=+t}ni(){return this.L0}b0(){this.O0=0,this.ll=0,this.k0=0,this.L0=0}Set(t){this.O0=0,this.ll=0,this.k0=0,this.L0=+t}N0(t){this.O0=t.O0,this.ll=t.ll,this.k0=t.k0,this.L0=t.L0}wr(){}}}{const fs=self.Ws,n={};n.W0=function(t){this.j0=t,this.right=this.j0.V0,this.left=this.j0.V0,this.parent=null,this.color=!1,this.key=null},n.U0=function(t){this.size=0,this.V0=new n.W0(this),this.V0.color=!1,this.root=this.V0,this.root.parent=this.V0,this.compare=t||this.H0},n.U0.prototype.H0=function(t,s){return t<s?-1:s<t?1:0},n.U0.prototype.clone=function(){var t=new n.U0(this.compare);return t.z0(this),t},n.U0.prototype.clear=function(){this.size=0,this.V0=new n.W0(this),this.V0.color=!1,this.root=this.V0,this.root.parent=this.V0},n.U0.prototype.J0=function(t){var s=t.right;t.right=s.left,s.left!=this.V0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.V0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.U0.prototype.q0=function(t){var s=t.left;t.left=s.right,s.right!=this.V0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.V0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.U0.prototype.X0=function(t){if(this.contains(t))this.Y0(t).key=t;else{for(var s=new n.W0(this),i=(s.key=t,this.V0),e=this.root;e!=this.V0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.V0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.V0,s.right=this.V0,s.color=!0,this.$0(s),this.size++}},n.U0.prototype.$0=function(t){for(;t!=this.V0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.J0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.V0&&this.q0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.q0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.V0&&this.J0(t.parent.parent))}this.root.color=!1},n.U0.prototype.K0=function(t){var s=t.left==this.V0||t.right==this.V0?t:this.Z0(t),i=s.left!=this.V0?s.left:s.right;i.parent=s.parent,s.parent==this.V0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.Q0(i),this.size--},n.U0.prototype.Q0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.J0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.q0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.J0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.q0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.J0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.q0(t.parent),this.root))}t.color=!1},n.U0.prototype.remove=function(t){var s;return(t=this.Y0(t))!=this.V0?(s=t.key,this.K0(t),s):null},n.U0.prototype.td=function(t,s){this.remove(s)},n.U0.prototype.min=function(t){for(;t.left!=this.V0;)t=t.left;return t},n.U0.prototype.max=function(t){for(;t.right!=this.V0;)t=t.right;return t},n.U0.prototype.Z0=function(t){if(t.right!=this.V0)return this.min(t.right);for(var s=t.parent;s!=this.V0&&t==s.right;)s=(t=s).parent;return s},n.U0.prototype.ed=function(t){if(t.left!=this.V0)return this.max(t.left);for(var s=t.parent;s!=this.V0&&t==s.left;)s=(t=s).parent;return s},n.U0.prototype.hd=function(t){if(0<this.size){var s=this.Y0(t);if(s==this.V0)return null;if(s.right!=this.V0)return this.min(s.right).key;for(var i=s.parent;i!=this.V0&&s==i.right;)i=(s=i).parent;return i!=this.V0?i.key:null}return null},n.U0.prototype.rd=function(t){if(0<this.size){var s=this.Y0(t);if(s==this.V0)return null;if(s.left!=this.V0)return this.max(s.left).key;for(var i=s.parent;i!=this.V0&&s==i.left;)i=(s=i).parent;return i!=this.V0?i.key:null}return null},n.U0.prototype.nd=function(){return this.min(this.root).key},n.U0.prototype.od=function(){return this.max(this.root).key},n.U0.prototype.Y0=function(t){for(var s=this.root;s!=this.V0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.U0.prototype.contains=function(t){return null!=this.Y0(t).key},n.U0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.U0.prototype.z0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.X0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.X0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.X0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.X0(t[e])},n.U0.prototype.ud=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.td,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.U0.prototype.fd=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.U0.prototype.range=function(t,s){var i=[];return this.dd(function(t){i.push(t)},t,s),i},n.U0.prototype.md=function(t,s){if(!this.gd())for(var i=this.min(this.root);i!=this.V0;){if(t.call(s,i.key,this))return;i=this.Z0(i)}},n.U0.prototype.yd=function(t,s,i){if(!this.gd())for(var e=this.Y0(s);e!=this.V0;){if(t.call(i,e.key,this))return;e=this.Z0(e)}},n.U0.prototype.Sd=function(t,s,i){if(!this.gd())for(var e=this.min(this.root),h=this.Y0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.Z0(e)}},n.U0.prototype.dd=function(t,s,i,e){if(!this.gd())for(var h=this.Y0(s),r=this.Y0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.Z0(h)}},n.U0.prototype.wd=function(t,s){if(!this.gd())for(var i=this.max(this.root);i!=this.V0;){if(t.call(s,i.key,this))return;i=this.ed(i)}},n.U0.prototype.forEach=function(t,s){if(!this.gd())for(var i=this.min(this.root);i!=this.V0;i=this.Z0(i))t.call(s,i.key,i.key,this)},n.U0.prototype.some=function(t,s){if(!this.gd())for(var i=this.min(this.root);i!=this.V0;i=this.Z0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.U0.prototype.every=function(t,s){if(this.gd())return!1;for(var i=this.min(this.root);i!=this.V0;i=this.Z0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.U0.prototype.map=function(t,s){var i=[];if(!this.gd())for(var e=this.min(this.root);e!=this.V0;e=this.Z0(e))i.push(t.call(s,e.key,e.key,this));return i},n.U0.prototype.filter=function(t,s){var i=[];if(!this.gd())for(var e=this.min(this.root);e!=this.V0;e=this.Z0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.U0.prototype.getCount=function(){return this.size},n.U0.prototype.gd=function(){return 0==this.size},n.U0.prototype.isSubsetOf=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.gd())return!0;for(var e=this.min(this.root);e!=this.V0;e=this.Z0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.U0.prototype.intersection=function(t){var s=new n.U0(this.compare);if(!this.gd())for(var i=this.min(this.root);i!=this.V0;i=this.Z0(i))t.contains.call(t,i.key,i.key,this)&&s.X0(i.key);return s},fs.U0=class extends fs.dr{constructor(t){super(),this.bd=new n.U0(t),this.Md=!1,this.vd=new Set,this.xd=new Set}Gc(t){this.Md?this.bd.contains(t)?this.xd.delete(t):this.vd.add(t):this.bd.X0(t)}E0(t){this.Md?this.bd.contains(t)?this.xd.add(t):this.vd.delete(t):this.bd.remove(t)}ri(t){return this.Md?!!this.vd.has(t)||!this.xd.has(t)&&this.bd.contains(t):this.bd.contains(t)}lc(){this.bd.clear(),this.vd.clear(),this.xd.clear()}toArray(){if(this.Md)throw new Error("cannot be used in queueing mode");return this.bd.getValues()}yc(){return this.bd.getCount()+this.vd.size-this.xd.size}uc(){return 0===this.yc()}Gd(){if(this.uc())throw new Error("empty set");if(this.Md)throw new Error("cannot be used in queueing mode");const t=this.bd,s=t.min(t.root);return s.key}Td(){if(this.uc())throw new Error("empty set");if(this.Md)throw new Error("cannot be used in queueing mode");const t=this.Gd();return this.E0(t),t}_d(t){if(this.Md!==(t=!!t)&&!(this.Md=t)){for(const s of this.xd)this.bd.remove(s);this.xd.clear();for(const i of this.vd)this.bd.X0(i);this.vd.clear()}}Id(t){this.bd.forEach(t)}*values(){if(!this.uc()){const s=this.bd;for(let t=s.min(s.root);t!=s.V0;t=s.Z0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Ws;ds.Cd=class{constructor(t=ds.hardwareConcurrency){this.Rd=t,this.Ad=[],this.Pd=0}Gc(i){return new Promise((t,s)=>{this.Ad.push({Bf:i,resolve:t,reject:s}),this.Ed()})}Fd(i){for(let t=0,s=this.Ad.length;t<s;++t)if(this.Ad[t].Bf===i)return t;return-1}Dd(t,s){const i=this.Fd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Ad[i].resolve(s),this.Ad.splice(i,1)}Od(t,s){const i=this.Fd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Ad[i].reject(s),this.Ad.splice(i,1)}async Ed(){if(this.Ad.length&&!(this.Pd>=this.Rd)){this.Pd++;const s=this.Ad.shift();try{const t=await s.Bf();s.resolve(t)}catch(t){s.reject(t)}this.Pd--,this.Ed()}}static async kd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Ws;ps.Ld=class{constructor(t,s,i){this.g0=t,this.Bd=s,this.Nd=i||2*s,this.Wd=-1,this.jd=-1/0,this.Vd=()=>this.Ud(),this.Hd=!1,this.zd=!1,this.Jd=null}qd(t){this.zd=!!t}Xd(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Nd:this.Bd}Yd(...e){if(-1===this.Wd){this.Jd=e;let t=ps.p0(),s=t-this.jd,i=this.Xd();i<=s&&this.zd?(this.jd=t,this.$d()):this.Wd=self.setTimeout(this.Vd,Math.max(i-s,4))}}$d(){this.Hd=!0;const t=this.Jd;this.Jd=null,t?this.g0(...t):this.g0(),this.Hd=!1}b0(){this.Hd||(this.Kd(),this.Jd=null,this.jd=ps.p0())}Ud(){this.Wd=-1,this.jd=ps.p0(),this.$d()}Kd(){-1!==this.Wd&&(self.clearTimeout(this.Wd),this.Wd=-1)}wr(){this.Kd(),this.g0=null,this.Jd=null,this.Vd=null}}}{const ms=self.Ws;ms.Zd=class{constructor(){this.Qd=new Map,this.t1=!1,this.s1=null,this.i1=null,this.e1=null,this.h1=null}n1(t){this.t1=!!t}o1(){return this.t1}a1(t){this.s1=t}l1(t){if(this.s1)return this.s1(t);throw new Error("no get base size callback set")}u1(t){this.i1=t}c1(t,s,i,e,h,r){if(this.i1)return this.i1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}f1(t){this.e1=t}d1(t){if(!this.e1)throw new Error("no release result callback set");this.e1(t)}m1(t){this.h1=t}S1(){if(!this.h1)throw new Error("no redraw callback set");this.h1()}w1(t){let s=this.Qd.get(t);return s||(s=ms.Sr(ms.b1,this,t),this.Qd.set(t,s)),s.M1(),s}v1(t){this.Qd.delete(t.G1())}T1(){for(const t of this.Qd.values())t._1(),t.I1()}}}{const gs=self.Ws;gs.b1=class{constructor(t,s){this.C1=t,this.R1=s,this.A1=0,this.P1=0,this.E1=0,this.F1=this.C1.l1(s).then(t=>{this.C1&&(this.P1=t[0],this.E1=t[1],this.C1.S1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.D1=!0,this.C1&&this.C1.S1()}),this.O1=0,this.L1=0,this.B1=0,this.N1=0,this.W1=!1,this.j1=null,this.V1=!1,this.D1=!1}wr(){if(this.A1<=0)throw new Error("already released");this.A1--,0===this.A1&&this.U1()}_1(){this.j1&&(this.C1.d1(this.j1),this.j1=null)}U1(){this._1(),this.C1.v1(this),this.C1=null}G1(){return this.R1}M1(){this.A1++}H1(){return 0<this.A1}z1(){return this.j1}I1(){this.V1=!0}async J1(e,h,r){if(0!==h&&0!==r&&!this.D1&&!this.W1){let t=gs.zr(Math.ceil(h)),s=gs.zr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.C1.o1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.O1&&s<=this.L1)||this.V1){this.W1=!0,this.O1=t,this.L1=s;const l=await this.C1.c1(this.R1,e,this.O1,this.L1,h,r);this.C1&&(this._1(),this.j1=l,this.B1=h,this.N1=r,this.W1=!1,this.V1=!1,this.C1.S1())}}}q1(){return this.F1}X1(){return this.P1}Y1(){return this.E1}K1(){return this.B1}Z1(){return this.N1}Q1(){return this.D1}}}{let s=function(t){return bs.get(t)};s;const c=self.Ws,ys=(c.tp="\ufeff",new Set("0123456789")),Ss=(c.sp=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.ep=function(t){return Ss.has(t)},c.hp=function(t){return[...t].filter(t=>!c.ep(t)).join("")},c.rp=function(t){for(const s of t)if(!c.ep(s))return!1;return!0},c.np=function(t){for(const s of t)if(!c.ep(s))return!1;return!0},c.op=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.lp=function(t){return[...t].filter(t=>!c.op(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.up=function(t){return!c.ep(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),bs=(c.cp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.fp=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.sp(t))break;--i}return s.substr(0,i)},c.pp=function(t){let s=c.fp(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ms=/[&<>"']/g,vs=(c.mp=function(t){return t.replace(Ms,s)},c.gp=function(t){let s=c.yp(t,"\\","\\\\");return s=c.yp(s,'"','\\"'),s=c.yp(s,"\t","\\t"),s=c.yp(s,"\r",""),c.yp(s,"\n","\\n")},c.Sp=function(t){let s=c.yp(t,"&","&amp;");return s=c.yp(s,"<","&lt;"),s=c.yp(s,">","&gt;"),c.yp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.me=function(t){return t.replace(vs,"\\$&")},c.bp=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Mp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.yp=function(t,s,i){return t.replaceAll(s,()=>i)},c.vp=function(t,s,i){return t.replace(new RegExp(c.me(s),"gi"),()=>i)},c.xp=function(t,s){"string"==typeof s?t.textContent=s:s.Gp()?t.textContent=s.toString():(t.innerHTML=s.Tp(),s instanceof c.Lh&&s._p(t))},c.Ip=function(t,s){return t instanceof c.HtmlString||t instanceof c.Lh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Lh?s.equals(t):t===s},c.Cp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Rp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Ap=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Pp=function(t,s){return s<t?1:t<s?-1:0},c.Ep=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.Fp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Dp=function*(t){for(const s of xs.segment(t))yield s.segment},c.Op=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Ts=1024*Gs,_s={kp:!(c.Lp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Bp:!0,Np:!0,Wp:!0,jp:!0};c.Vp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Bp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.Np){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Wp){const a=Math.floor(t/60);(0<a||i.length||!s.jp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.jp){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const r=(s.kp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Up=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Hp=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.zp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.qn(i,4,"0"),c.qn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Jp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.qp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Xp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.yp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ws),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Lh=class{constructor(t,s){if(this.Yp=s&&s.$p?t:f.mp(t),this.Kp="",this.Zp=!1,this.Qp=[],this.tm=[],s){if(this.Zp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Qp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.tm=s.tips}}this.hm=this.Yp.includes("["),this.rm=this.Zp&&this.Yp.includes("\n"),this.nm=!this.hm&&!this.rm&&!this.Yp.includes("&"),this.lm=!1,this.um=[]}toString(){return this.Yp}valueOf(){return this.Yp}Gp(){return this.nm}fm(){return this.hm?this.Yp.replace(i,""):this.Yp}Tp(){if(this.nm)return this.Yp;if(!this.Kp&&this.Yp){let t=this.Yp;this.hm&&(u=0,a=this.Qp,l=this.tm,t=t.replace(i,s),a=null,l=null),this.rm&&(t=t.replace(e,"<br>")),this.Kp=t}return this.Kp}_p(i){if(this.Qp.length)for(let t=0,s=this.Qp.length;t<s;++t){const e=this.Qp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Tp()===t.Tp():t instanceof f.Lh?this.Yp===t.Yp:this.Yp===t}pm(){if(!this.lm){let e=[],t=this.Yp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+n.length,l&&e.push({text:l,gm:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,gm:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),gm:h.slice(0)});for(const c of e)c.text&&(c.text=this.ym(c.text));this.um=e.map(t=>t.icon?f.Sr(f.Sm,{icon:t.icon,gm:t.gm}):f.Sr(f.wm,{Mm:f.Fp(t.text),gm:t.gm})),this.lm=!0}return this.um}ym(t){return t=f.yp(t,"\\[","["),f.yp(t,"\\\\","\\")}static vm(t){return f.Sr(f.Lh,t,{$p:!0}).fm()}static xm(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&S.ep(t)},a=function(t){return Is.has(t)},u=function(t){return S.up(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const S=self.Ws,Is=new Set("〈《「『【〔〖〘〚〝");S.Gm=class{constructor(){this.Tm=[],this._m=null}Im(){return this.Tm}Cm(){return this.Tm.length}Rm(t){this._m=t}Am(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Pm()){const a=s(o);o.Em(a.height),o.Fm(a.fontBoundingBoxAscent||0),o.Dm(a.fontBoundingBoxDescent||0),o.Om(a.km||0),o.Lm()?o.Bm(a.width):o.Nm()&&o.Wm(this._m)}i+=o.Pm(),e=Math.max(e,o.jm()),h=Math.max(h,o.Vm()),r=Math.max(r,o.Um()),n=Math.max(n,o.Hm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,km:n}}zm(t,s,i,e,h,r){this.Tm.push(S.Sr(S.Gm.Jm,{qm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,km:r}))}Gm(s,r,n,i,o){if("string"==typeof s&&(s=[S.Sr(S.wm,{Mm:S.Fp(s)})]),S.Hn(this.Tm),!(!s.length||1===s.length&&s[0].Lm()&&s[0].uc()||n<2)){if(1===s.length){const a=s[0];if(a.Lm()&&a.Xm()<=100&&!a.Ym()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,km:h}=r(a);if(t+=o,a.Bm(t),a.Em(s),a.Fm(i||0),a.Dm(e||0),a.Om(h||0),t<=n)return void this.zm([a],t,s,i,e,h)}}let t;t="word"===i?this.$m(s):"cjk"===i?this.Km(s):this.Zm(s),this.Qm(t,r,n,o)}}$m(t){let s=[],i=[],e=!1;for(const h of t){const r=h.tg();if(h.Nm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.sg())if(y(n))0<i.length&&s.push(i),s.push([S.Sr(S.wm,{Mm:["\n"],gm:r})]),i=[];else if(0===i.length)i.push(S.Sr(S.wm,{Mm:[n],gm:r})),e=l(n);else{const o=l(n);if(o===e){const a=i.at(-1);a.tg()===r?a.ig(n):i.push(S.Sr(S.wm,{Mm:[n],gm:r}))}else s.push(i),i=[S.Sr(S.wm,{Mm:[n],gm:r})],e=o}}return 0<i.length&&s.push(i),s}Km(t){let s=[],i=[],e=!1;for(const h of t){const r=h.tg();if(h.Nm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.sg())if(y(n))0<i.length&&s.push(i),s.push([S.Sr(S.wm,{Mm:["\n"],gm:r})]),i=[];else{if(0===i.length)i.push(S.Sr(S.wm,{Mm:[n],gm:r}));else if(e||u(n)){const o=i.at(-1);o.tg()===r?o.ig(n):i.push(S.Sr(S.wm,{Mm:[n],gm:r}))}else s.push(i),i=[S.Sr(S.wm,{Mm:[n],gm:r})];e=a(n)}}return 0<i.length&&s.push(i),s}Zm(t){const s=[];for(const i of t)if(i.Lm()){const e=i.sg();S.Qh(s,e.map(t=>[S.Sr(S.wm,{Mm:[t],gm:i.tg()})]))}else s.push([i]);return s}eg(t){return t.map(t=>t.hg())}rg(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Lm()&&i[0].Lm()&&i[0].tg()===t.tg()&&(t.ng(i[0].sg()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.hg())}}Qm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].Lm()&&1===u[0].Xm()&&y(u[0].sg()[0])){if(0===n){const c=S.Sr(S.wm,{Mm:[" "],gm:u[0].tg()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.km||0}this.zm(h,r,n,o,a,l),h=[],r=0,n=0,o=0,a=0,l=0}else{const d=this.eg(h),p=(this.rg(d,u),this.Am(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.zm(h,r,n,o,a,l),h=[],u[0].Lm()&&S.np(u[0].sg()))r=0,n=0,o=0,a=0,l=0;else{this.rg(h,u);const g=this.Am(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.km}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.km}0<h.length&&this.zm(h,r,n,o,a,l),this.og(s,e)}og(s,i){for(const e of this.Tm){const h=e.ag();if(h.length){let t=h.at(-1);if(t.Lm()){const r=t.sg(),n=r.slice(0);if(c(n),0===n.length)e.lg(-t.Pm()),h.pop();else if(n.length<r.length){t.ug(n);const o=s(t).width,a=t.Pm()-o;t.Bm(o),e.lg(-a)}0!==i&&0<h.length&&((t=h.at(-1)).lg(i),e.lg(i))}}}}lc(){S.Hn(this.Tm)}fg(){return this.Tm.reduce((t,s)=>Math.max(t,s.Pm()),0)}dg(){return this.Tm.reduce((t,s)=>t+s.jm(),0)}}}{const Cs=self.Ws;Cs.Gm.Jm=class{constructor(t){this.um=t.qm||[],this.pg=t.width||-1,this.mg=t.height||-1,this.gg=t.fontBoundingBoxAscent||-1,this.yg=t.fontBoundingBoxDescent||-1,this.Sg=t.km||-1,this.wg=0,this.bg=0}qm(){return this.um.values()}*Mg(){const s=this.um;for(let t=s.length-1;0<=t;--t)yield s[t]}ag(){return this.um}lg(t){this.pg+=t}Pm(){return this.pg}jm(){return this.mg}vg(){return this.gg}Um(){return this.yg}Hm(){return this.Sg}xg(t){this.wg=t}Gg(){return this.wg}Tg(t){this.bg=t}_g(){return this.bg}}}{const Rs=self.Ws;Rs.Ig=class{constructor(t){this.Cg=t.gm||[],this.pg=t.width||-1,this.mg=t.height||-1,this.gg=t.fontBoundingBoxAscent||-1,this.yg=t.fontBoundingBoxDescent||-1,this.Sg=t.km||-1,this.wg=0,this.bg=0}Lm(){return!1}Nm(){return!1}tg(){return this.Cg}Rg(s){const i=this.Cg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Ag(t){return!!this.Rg(t)}Pg(){const t=new Map;for(const s of this.Cg)t.set(s.tag,s.param);return t}lg(t){this.pg+=t}Bm(t){this.pg=t}Pm(){return this.pg}Em(t){this.mg=t}jm(){return this.mg}Fm(t){this.gg=t}Vm(){return this.gg}Dm(t){this.yg=t}Um(){return this.yg}Om(t){this.Sg=t}Hm(){return this.Sg}xg(t){this.wg=t}Gg(){return this.wg}Tg(t){this.bg=t}_g(){return this.bg}}}{const As=self.Ws;As.wm=class extends As.Ig{constructor(t){super(t),this.Eg=t.Mm}Lm(){return!0}ng(t){As.Qh(this.Eg,t),this.pg=-1,this.mg=-1,this.gg=-1,this.yg=-1,this.Sg=-1}ig(t){this.Eg.push(t)}hg(){return As.Sr(As.wm,{Mm:this.Eg.slice(0),gm:this.Cg,width:this.pg,height:this.mg,fontBoundingBoxAscent:this.gg,fontBoundingBoxDescent:this.yg,km:this.Sg})}sg(){return this.Eg}ug(t){this.Eg=t}Xm(){return this.Eg.length}uc(){return 0===this.Eg.length}Ym(){return this.Eg.includes("\n")}}}{const Ps=self.Ws;Ps.Sm=class extends Ps.Ig{constructor(t){super(t),this.Fg=t.icon}Nm(){return!0}Dg(){return this.Fg}hg(){return Ps.Sr(Ps.Sm,{icon:this.Fg,gm:this.Cg,width:this.pg,height:this.mg,fontBoundingBoxAscent:this.gg,fontBoundingBoxDescent:this.yg,km:this.Sg})}Og(t){if(!t)return null;let s=Number(this.Fg);return String(s)===this.Fg?(s=Math.floor(s),t.kg(s)):t.Lg(this.Fg)}Wm(t){const s=this.Og(t);this.pg=s?this.mg*s.Pm()/s.jm():0}Bg(t){const s=this.Og(t);return s?s.Bg():null}Xm(){return 1}}}{const Es=self.Ws;Es.Ng=class{constructor(t){this.Wg=new Map,this.jg=t.Vg,this.Ug=t.Hg}wr(){for(const t of this.Wg.values())t.wr();this.Wg.clear()}zg(t){let s=this.Wg.get(t);if(!s){const i=this.jg(t);s=Es.Sr(Es.Jg,this,{source:t,qg:i}),this.Wg.set(t,s)}return s}Xg(t){return this.Wg.has(t)}Yg(t){const s=this.Wg.get(t);s&&s.wr(),this.Wg.delete(t)}async $g(t){return this.Ug(t)}}}{const Fs=self.Ws;Fs.Jg=class{constructor(t,s){this.Kg=t,this.Zg=s.source,this.Qg=[],this.ty=new Map,this.iy=!1,this.ey=!1,this.hy=null;const i=s.qg.ny;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.Sr(Fs.oy,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Qg.push(h),e.tag&&this.ty.set(e.tag.toLowerCase(),h)}}wr(){for(const t of this.Qg)t.wr();Fs.Hn(this.Qg),this.ty.clear(),this.Kg=null,this.Zg=null}ly(){return this.iy}uy(){return this.ey}my(){return this.hy||(this.hy=this.gy()),this.hy}async gy(){if(!this.iy){this.iy=!0,this.ey=!0;const t=await this.Kg.$g(this.Zg);if(this.Kg){const i=t.ny;for(let t=0,s=Math.min(i.length,this.Qg.length);t<s;++t){const e=i[t].yy;this.Qg[t].Sy(e)}this.ey=!1}}}kg(t){return(t=Math.floor(t))<0||t>=this.Qg.length?null:this.Qg[t]}Lg(t){return this.ty.get(t.toLowerCase())||null}}}{const Ds=self.Ws;Ds.oy=class{constructor(t,s){this.wy=t,this.Zg=s.source||null,this.by=s.index,this.My=s.tag,this.pg=s.width,this.mg=s.height,this.xy=null}wr(){this.pg=0,this.mg=0,this.wy=null}Gy(){return this.Zg}Pm(){return this.pg}jm(){return this.mg}Sy(t){this.xy=t}Bg(){return this.xy}}}{let e=function(t,s,i,e){const h=Ns;Gh.W(Ls,i,s),Gh.W(Bs,t,s),Gh.Ot(h,Ls,Bs),Gh.normalize(h,h),e.set(h[0],h[1],h[2],Gh.Dt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,l=n.z,u=n.w,c=n.Ty,f=n._y,d=n.Iy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*r*g;if(u<=y)return!0;const S=o*e*c+o*t*p+a*h*f+a*s*m+l*r*d+l*i*g;return u<S},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Os=self.Ws,ks=self.xs,Gh=ks.Ps,Vh=ks.Es,xh=ks.Is,Ls=Gh.create(),Bs=Gh.create(),Ns=Gh.create(),Ws=Vh.create(),js=xh.create(),Vs=Gh.create(),Us=Gh.create(),Hs=Gh.create(),zs=Gh.create(),Js=Gh.create(),qs=Gh.create(),Xs=Gh.create(),Ys=Gh.create(),$s=Vh.C(0,0,1,1);Os.Cy={Ry(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Ay(t,s,i,e,h,r,n){const o=js,a=Ws;return xh.multiply(o,h,e),null!==xh.A(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Vh.Wt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Py(t,s,i,e,h,r,n){const o=Ls,a=Bs;if(!Os.Cy.Ay(t,s,0,e,h,r,o))return!1;if(!Os.Cy.Ay(t,s,1,e,h,r,a))return!1;let l=Bs,u=(Gh.W(l,a,o),Ns),c=(Gh.set(u,0,0,1),-i),f=Gh.Dt(u,l),d=0;if(0===f){const p=Gh.Dt(u,o)+c;if(0!==p)return!1}else if((d=-(Gh.Dt(o,u)+c)/f)<0)return!1;return Gh.Rt(n,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Ty=NaN,this._y=NaN,this.Iy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Ty=0<t?1:0,this._y=0<s?1:0,this.Iy=0<i?1:0}}Os.Cy.Ey=class{constructor(){this.Fy=new Ks,this.Dy=new Ks,this.Oy=new Ks,this.ky=new Ks,this.Ly=new Ks,this.By=new Ks}Ny(t,s){const i=$s;Os.Cy.Ay(0,1,0,t,s,i,Vs),Os.Cy.Ay(1,1,0,t,s,i,Us),Os.Cy.Ay(0,0,0,t,s,i,Hs),Os.Cy.Ay(1,0,0,t,s,i,zs),Os.Cy.Ay(0,1,1,t,s,i,Js),Os.Cy.Ay(1,1,1,t,s,i,qs),Os.Cy.Ay(0,0,1,t,s,i,Xs),Os.Cy.Ay(1,0,1,t,s,i,Ys),e(Hs,Vs,Js,this.Fy),e(Vs,Us,qs,this.Dy),e(Us,zs,Ys,this.Oy),e(zs,Hs,Xs,this.ky),e(Xs,Js,qs,this.By),e(zs,Us,Vs,this.Ly)}Wy(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Fy)&&n(t,s,i,e,h,r,this.Dy)&&n(t,s,i,e,h,r,this.Oy)&&n(t,s,i,e,h,r,this.ky)&&n(t,s,i,e,h,r,this.Ly)&&n(t,s,i,e,h,r,this.By)}jy(t,s,i){return!h(t,s,i,this.Ly)}}}{const Zs=self.Ws,Qs=self.xs,Gh=Qs.Ps,Vh=Qs.Es,xh=Qs.Is,ti=xh.create(),si=Gh.C(0,0,0),ii=Gh.C(0,0,0),ei=Gh.C(0,0,0),hi=Gh.C(0,1,0),ri=(Vh.C(0,0,0,0),new Zs.ou),ni=new Zs.Rect,oi=new Zs.ou(0,0,1,0,1,1,0,1),ai={Vy:1,Uy:1e4},li=xh.C(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Cy.Hy=class{constructor(t){t=Object.assign({},ai,t),this.pg=0,this.mg=0,this.zy=Zs.Ir(45),this.Jy=Math.tan(this.zy/2),this.qy=xh.create(),this.Xy=xh.create(),this.Yy=!1,this.$y=t.Vy,this.Ky=t.Uy,this.Zy=[],this.Qy=new Map,this.tS=null,this.sS=null,this.iS=null,this.eS=null,this.hS=null,this.rS=null,this.nS=null,this.oS=null,this.aS=null,this.lS=null,this.uS=null,this.cS=null,this.fS=new Map,this.dS=null,this.pS=[],this.mS=new Map,this.gS=0,this.yS=0,this.SS=1,this.wS=[this.SS],this.bS=1,this.MS=[this.bS],this.vS=.5,this.xS=[this.vS],this.GS=0,this.TS=!0,this._S=!1}IS(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}CS(){this.gS=0,this.yS=0,this.tS=null,this.sS=null,this.iS=null,this.eS=null,this.hS=null,this.rS=null,this.nS=null,this.oS=null,this.aS=null,this.lS=null,this.uS=null,this.cS=null,this.RS()}AS(){this.CS(),this.dS=null}PS(){for(const t of this.Zy)t.wr();this.CS()}Pm(){return this.pg}jm(){return this.mg}ES(t){return this.FS()?100:t/(2*this.DS())}OS(t){if(this.FS()){const s=t/(2*this.DS());return s/this.ES(t)}return 1}kS(t){this.$y=t}LS(){return this.$y}BS(t){this.Ky=t}NS(){return this.Ky}WS(t){this.zy=t,this.Jy=Math.tan(this.zy/2)}jS(){return this.zy}DS(){return this.Jy}VS(){this.Yy=!1}US(){this.Yy=!0}FS(){return!this.Yy}HS(){return this.Yy}zS(t,s,i=.5,e=.5){const h=this.LS(),r=this.NS(),n=this.jS();if(.5===i&&.5===e)this.JS()?xh.vt(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.DS()*h,f=c*s;xh.bt(t,o*f,a*f,l*c,u*c,h,r),this.JS()&&xh.mul(t,li,t)}}qS(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.ES(i)*h*this.DS()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,l=n,u=-o,c=o;this.JS()?xh.Tt(t,a,l,u,c,this.LS(),this.NS()):xh.ortho(t,a,l,u,c,this.LS(),this.NS())}XS(t,s,i,e,h,r=1){let n=1;this.FS()&&(n=200*this.DS()/h);const o=ei,a=(Gh.set(o,n,-n,1),si),l=ii;Gh.multiply(a,s,o),Gh.multiply(l,i,o),xh._t(t,a,l,e||hi),o[2]=r,xh.scale(t,t,o)}YS(t,s,i,e,h,r,n,o){return Gh.set(si,t,s,i),Gh.set(ii,e,h,r),this.XS(ti,si,ii,hi,n,o),ti}$S(t){this.Zy.push(t),this.Qy.set(t.cf(),t)}KS(t){const s=this.Zy.indexOf(t);-1!==s&&this.Zy.splice(s,1),this.Qy.delete(t.cf())}RS(){Zs.Hn(this.Zy),this.Qy.clear()}ZS(t){return this.Qy.get(t)||null}QS(){return this.tS}iw(){this.ew(this.tS)}hw(){return this.sS}rw(){this.ew(this.sS)}ow(){this.ew(this.iS)}aw(){this.ew(this.eS)}lw(){this.ew(this.hS)}uw(){this.ew(this.rS)}fw(){this.ew(this.nS)}pw(){this.ew(this.oS)}mw(){this.ew(this.aS)}gw(){this.ew(this.lS)}yw(){this.ew(this.uS)}Sw(){this.ew(this.cS)}ww(t){this.dS=t}bw(){return this.dS}Mw(t,s,i,e){let h=Zs.Cy.Gw.xw(t,s,i,e),r=this.fS.get(h);return r||(r=Zs.Sr(Zs.Cy.Gw,this,t,s,i,e),this.fS.set(h,r)),r.Tw(),r}_w(t){t.Iw(),0===t.Cw()&&(this.dS===t&&(this.dS=null),this.fS.delete(t.Rw()),t.wr())}Aw(t){Zs.Hn(this.pS),this.mS.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.pS.push([h,r]),this.mS.set(e,{number:s,Pw:h,Ew:r}),s++}}Fw(t){return this.pS[t]}Dw(t){return this.Fw(t)[0]}Ow(t){return this.Fw(t)[1]}kw(t){const s=this.mS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Lw(t){const s=this.mS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Bw(t){this.gS=t}Nw(){return this.gS}Ww(t){this.yS=t,this.dS=null}jw(){return this.yS}Jm(t,s,i,e){const h=Zs.Pr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.SS,a=r*o,l=n*o,u=this.bS;2===u?this.Vw(t,s,0,i,e,0,a,l):1===u?this.Uw(t,s,0,i,e,0,a,l):this.Hw(t,s,0,i,e,0,a,l)}zw(t,s,i,e,h,r){const n=Zs.Pr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),l=.5*this.SS,u=o*l,c=a*l,f=this.bS;2===f?this.Vw(t,s,i,e,h,r,u,c):1===f?this.Uw(t,s,i,e,h,r,u,c):this.Hw(t,s,i,e,h,r,u,c)}Vw(t,s,i,e,h,r,n,o){const a=this.vS,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=l+n,g=u-o,y=l-n+d,S=u+o+p,w=c+n,b=f-o,M=c-n-d,v=f+o-p;this.Jw(m,g,i,w,b,r,M,v,r,y,S,i,oi)}Uw(t,s,i,e,h,r,n,o){const a=this.vS,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.Jw(d,p,i,y,S,r,w,b,r,m,g,i,oi)}Hw(t,s,i,e,h,r,n,o){const a=this.vS,l=t+a,u=s+a,c=e+a,f=h+a,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.Jw(d,p,i,y,S,r,w,b,r,m,g,i,oi)}qw(t,s,i,e,h,r){const n=Zs.Pr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),l=.5*this.SS,u=o*l,c=a*l,f=this.bS;2===f?this.Xw(t,s,i,e,u,c,h,r):1===f?this.Yw(t,s,i,e,u,c,h,r):this.$w(t,s,i,e,u,c,h,r)}Xw(t,s,i,e,h,r,n,o){const a=this.vS,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=l+h,g=u-r,y=l-h+d,S=u+r+p,w=c+h,b=f-r,M=c-h-d,v=f+r-p;ri.set(m,g,w,b,M,v,y,S),ni.set(n,0,o,0),this.Kw(ri,ni)}Yw(t,s,i,e,h,r,n,o){const a=this.vS,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.Kw(ri,ni)}$w(t,s,i,e,h,r,n,o){const a=this.vS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.Kw(ri,ni)}Zw(t,s,i,e){const h=.5*this.SS,r=this.bS;2===r?this.Qw(t,s,i,e,h):1===r?this.tb(t,s,i,e,h):this.sb(t,s,i,e,h)}Qw(t,s,i,e,h){this.Vw(t,s,0,i,s,0,0,h),this.Vw(i,s,0,i,e,0,h,0),this.Vw(i,e,0,t,e,0,0,-h),this.Vw(t,e,0,t,s,0,-h,0)}tb(t,s,i,e,h){this.Uw(t,s,0,i,s,0,0,h),this.Uw(i,s,0,i,e,0,h,0),this.Uw(i,e,0,t,e,0,0,-h),this.Uw(t,e,0,t,s,0,-h,0)}sb(t,s,i,e,h){this.Hw(t,s,0,i,s,0,0,h),this.Hw(i,s,0,i,e,0,h,0),this.Hw(i,e,0,t,e,0,0,-h),this.Hw(t,e,0,t,s,0,-h,0)}ib(t){this.Zw(t.Pl(),t.El(),t.Fl(),t.Dl())}eb(t){const s=Zs.Pr(t.cn(),t.fn(),t.dn(),t.pn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.SS,r=i*h,n=e*h,o=this.bS;2===o?this.hb(t,r,n):1===o?this.rb(t,r,n):this.nb(t,r,n)}hb(t,s,i){this.Vw(t.cn(),t.fn(),0,t.dn(),t.pn(),0,s,i),this.Vw(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.Vw(t.mn(),t.gn(),0,t.yn(),t.Sn(),0,-s,-i),this.Vw(t.yn(),t.Sn(),0,t.cn(),t.fn(),0,-i,s)}rb(t,s,i){this.Uw(t.cn(),t.fn(),0,t.dn(),t.pn(),0,s,i),this.Uw(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.Uw(t.mn(),t.gn(),0,t.yn(),t.Sn(),0,-s,-i),this.Uw(t.yn(),t.Sn(),0,t.cn(),t.fn(),0,-i,s)}nb(t,s,i){this.Hw(t.cn(),t.fn(),0,t.dn(),t.pn(),0,s,i),this.Hw(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.Hw(t.mn(),t.gn(),0,t.yn(),t.Sn(),0,-s,-i),this.Hw(t.yn(),t.Sn(),0,t.cn(),t.fn(),0,-i,s)}ob(t){this.SS=t,this.wS[this.wS.length-1]=t}ab(){return this.SS}lb(t){if(100<=this.wS.length)throw new Error("pushed too many line widths - check push/pop pairs");this.wS.push(t),this.SS=t}ub(){if(this.wS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.wS.pop(),this.SS=this.wS.at(-1)}cb(){this.bS=0,this.MS[this.MS.length-1]=0}fb(){this.bS=1,this.MS[this.MS.length-1]=0}pb(){this.bS=2,this.MS[this.MS.length-1]=0}mb(t){if("butt"===t)this.gb();else if("square"===t)this.yb();else{if("zag"!==t)throw new Error("invalid line cap");this.Sb()}}gb(){if(100<=this.MS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.MS.push(0),this.bS=0}yb(){if(100<=this.MS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.MS.push(1),this.bS=1}Sb(){if(100<=this.MS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.MS.push(2),this.bS=2}wb(){if(this.MS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.MS.pop(),this.bS=this.MS.at(-1)}bb(t){this.vS=t,this.xS[this.xS.length-1]=t}Mb(){return this.vS}vb(t){if(100<=this.xS.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.xS.push(t),this.vS=t}xb(){if(this.xS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.xS.pop(),this.vS=this.xS.at(-1)}Gb(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],l=s[4+n],u=s[5+n];if(t===e)this.Tb(h,r,o,a,l,u,l,u);else{const c=s[6+n],f=s[7+n];this.Tb(h,r,o,a,l,u,c,f)}}}_b(){return 3}Ib(){this.Cb(!0),this.GS++}Rb(){return this.GS}Ab(){this.GS++}Pb(t){this.TS=!!t}Eb(){return this.TS}Fb(t){this._S=!!t}Db(){return this._S}Ob(){return!1}JS(){return!1}kb(){}Lb(){}Bb(){}Nb(){return this.kb()+this.Lb()+this.Bb()}Wb(){return Zs.Sr(Zs.Cy.jb,this)}}}{const ui=self.Ws;ui.Cy.Vb=class{constructor(t,s){this.vr=s.name,this.Ub=t,this.Hb=s.zb||0,this.Jb=s.qb||0,this.Xb=!!s.Yb,this.$b=!!s.Kb,this.Zb=!!s.Qb,this.tM=!!s.sM,this.iM=!!s.eM,this.hM=!!s.rM,this.nM=!!s.oM,this.aM=!1,this.lM=this.Xb||this.hM||0!==this.Hb||0!==this.Jb}wr(){this.Ub=null}uM(){return this.Ub}cf(){return this.vr}cM(){return 0!==this.Hb||0!==this.Jb}fM(){return this.Hb}dM(){return this.Jb}pM(){return this.Xb}mM(){return this.$b}gM(){return this.Zb}yM(){return this.tM}SM(){return this.iM}wM(){return this.hM}bM(){return this.nM}MM(){return this.aM}vM(){return this.lM}xM(){return!1}}}{const ci=self.Ws;ci.Cy.Gw=class{constructor(t,s,i,e,h){this.Ub=t,this.A1=0,this.GM=null,this.TM="",this._M=i,this.IM=ci.Sr(ci.Yo),this.IM.set(e),this.CM=h,"string"==typeof s?this.TM=s:(this.GM=s,this.TM=this.GM.cf())}wr(){if(0<this.A1)throw new Error("releasing state group still in use");this.Ub=null,this.GM=null,this.TM=""}RM(){const t=this.Ub;t.ew(this.GM),t.AM(this._M),t.PM(this.IM),t.Ww(this.CM),t.ww(this)}Rw(){return ci.Cy.Gw.xw(this.TM,this._M,this.IM,this.CM)}Tw(){++this.A1}Iw(){--this.A1}Cw(){return this.A1}EM(){this.GM=null}FM(t){if(this.GM=t.ZS(this.TM),!this.GM)throw new Error("failed to restore shader program")}static xw(t,s,i,e){const h="string"==typeof t?t:t.cf();return h+","+s+","+i.fa()+","+i.ya()+","+i.Sa()+","+i.wa()+","+e}}}{let e=function(t,s,i){const e=i.cn(),h=i.fn(),r=i.dn()-e,n=i.pn()-h,o=i.yn()-e,a=i.Sn()-h,l=r*t,u=n*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Ws,fi=_.Sr(_.ou);_.Cy.DM=class{constructor(t,s,i){this.OM=t,this.kM=s,this.LM=i,this.al=NaN,this.ll=NaN,this.CM=NaN,this.BM=NaN,this.NM=NaN,this.al=0,this.ll=0,this.CM=0,this.BM=0,this.NM=0}WM(t,s,i,e){this.al=t,this.ll=s,this.BM=i,this.NM=e}jM(){return this.al}VM(t){this.al!==t&&(this.al=t,this.OM.UM())}HM(){return this.ll}zM(t){this.ll!==t&&(this.ll=t,this.OM.UM())}JM(){return this.CM}qM(t){this.CM!==t&&(this.CM=Math.max(t,0),this.OM.UM())}XM(){return this.BM}YM(t){this.BM=t}$M(){return this.NM}KM(t){this.NM=t}ZM(t,s,i){[this.al,this.ll]=e(t.al,t.ll,s),this.CM=t.CM,this.BM=_.kt(i.Pl(),i.Fl(),t.BM),this.NM=_.kt(i.El(),i.Dl(),t.NM)}QM(t,s,i){[this.al,this.ll]=e(t.al,t.ll,s),this.CM=t.CM,[this.BM,this.NM]=e(t.BM,t.NM,i)}tv(){return{x:this.jM(),y:this.HM(),z:this.JM(),u:this.XM(),v:this.$M()}}sv(t){this.VM(t.x),this.zM(t.y),t.hasOwnProperty("z")&&this.qM(t.z),this.YM(t.u),this.KM(t.v)}hv(){return this.OM}rv(){return this.kM}nv(){return this.LM}},_.Cy.ov=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.av=i,this.lv=t,this.uv=s||null,this.cv=[],this.dv=0,this.pv=0,this.gv=1,this.yv=1,this.Sv=0,this.wv=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.Sr(_.Cy.DM,this,t,s),o=t/e,a=s/h;n.WM(o,a,o,a),r.push(n)}this.cv.push(r)}}wr(){_.Hn(this.cv)}bv(){return this.av}Mv(){return this.lv}vv(){return this.uv}xv(){return this.cv}UM(){this.wv=!0}Gv(){if(this.wv){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.cv)for(const n of r){const o=n.jM(),a=n.HM();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.JM())}this.dv=t,this.pv=s,this.gv=i,this.yv=e,this.Sv=h,this.wv=!1}}Tv(){return this.Gv(),this.dv}_v(){return this.Gv(),this.pv}Iv(){return this.Gv(),this.gv}Cv(){return this.Gv(),this.yv}Rv(){return this.Gv(),this.Sv}Av(){return 0<this.Rv()}Pv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.av||s<0||s>=this.lv?null:this.cv[s][t]}Ev(t,i,e){const h=e instanceof _.Rect;if(t.bv()!==this.bv()||t.Mv()!==this.Mv())throw new Error("source mesh wrong size");const r=t.cv,n=this.cv;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.ZM(l,i,e):u.QM(l,i,e)}}}Fv(r){let n=this.cv,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.XM(),e.$M(),a.XM(),a.$M(),l.XM(),l.$M(),h.XM(),h.$M()),r.Jw(e.jM(),e.HM(),e.JM(),a.jM(),a.HM(),a.JM(),l.jM(),l.HM(),l.JM(),h.jM(),h.HM(),h.JM(),fi),e=a,h=l}o=i}}Dv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.cv,l=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.jM(),e.HM(),e.JM()),[m,g,y]=a(u.jM(),u.HM(),u.JM()),[S,w,b]=a(c.jM(),c.HM(),c.JM()),[M,v,x]=a(h.jM(),h.HM(),h.JM());o.zw(f,d,p,m,g,y),o.zw(f,d,p,S,w,b),o.zw(f,d,p,M,v,x),t===s-1&&o.zw(m,g,y,S,w,b),r===n-1&&o.zw(M,v,x,S,w,b),e=u,h=c}l=i}}Ov(t){let i=.99999999,e=t.Ju(),h=[],r=this.bv()-1,n=this.Mv()-1,o=1/r,a=1/n,l=r-1,u=n-1,c=e[0],f=e[1],d=_.Tr(Math.floor(c*r),0,l),p=_.Tr(Math.floor(f*n),0,u),m=!0,g=0,y=0,S=0,w=-1,b=()=>{c=_.Tr(_.kt(c,g,S),0,1),f=_.Tr(_.kt(f,y,S),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.Tr(Math.floor(c*r),0,l),p=_.Tr(Math.floor(f*n),0,u);const M=(t+2)%s;for(g=e[M],y=e[1+M],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const v=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.vn(c,f,v,x,G,x,G,T),0!==w&&0<=(S=_.Mn(c,f,g,y,v,x,G,T,-.001))&&S<=i)b(),m=!m,w=0;else if(0<p&&2!==w&&0<=(S=_.Mn(c,f,g,y,v,x,G,x,.001))&&S<=i)b(),p--,m=!1,w=4;else if(d<l&&3!==w&&0<=(S=_.Mn(c,f,g,y,G,x,G,T,.001))&&S<=i)b(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(S=_.Mn(c,f,g,y,v,x,v,T,.001))&&S<=i)b(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&0<=(S=_.Mn(c,f,g,y,v,T,G,T,.001))&&S<=i))break;b(),p++,m=!0,w=2}}}return _.Sr(_.ju,h)}kv(t,s){const i=this.Lv(t);this.Bv(i),s.Xu(i)}Lv(t){const i=[],e=t.Ju();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.Nv(h,r);i.push(n,o)}return i}Nv(t,s){const i=this.bv()-1,e=this.Mv()-1,h=1/i,r=1/e,n=_.Tr(Math.floor(t*i),0,i-1),o=_.Tr(Math.floor(s*e),0,e-1),a=n*h,l=o*r,u=(n+1)*h,c=(o+1)*r,f=this.Pv(n,o),d=this.Pv(n+1,o+1),p=_.vn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+r,y=this.Pv(n+(p?1:0),o+(p?0:1)),[S,w,b]=_.xn(t,s,a,l,m,g,u,c);return _.Gn(S,w,b,f.jM(),f.HM(),f.JM(),y.jM(),y.HM(),y.JM(),d.jM(),d.HM(),d.JM())}Bv(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=l,r=u,n=c,o=f}6<=e.length&&e.length<i.length&&_.Xn(i,e)}tv(){return{cols:this.bv(),rows:this.Mv(),points:this.cv.map(t=>t.map(t=>t.tv()))}}sv(t){const i=this.bv(),e=this.Mv();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.Pv(t,s);n.sv(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Wv:i,jv:e,format:h,type:r}};d;const di=self.Ws,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={Vv:"clamp-to-edge",Uv:"clamp-to-edge",Hv:"trilinear",zv:0,Jv:"rgba8",qv:!0,Xv:"default",premultiplyAlpha:!0,Yv:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Cy.$v=class{constructor(t){this.Ub=t,this.Kv=null,this.pg=0,this.mg=0,this.Zv=!0,this.Qv="clamp-to-edge",this.t2="clamp-to-edge",this.s2="trilinear",this.i2=0,this.e2="rgba8",this.h2=!1,this.n2="default",this.A1=0}o2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.Kv)throw new Error("already created texture");if(this.Qv=t.Vv,this.t2=t.Uv,this.s2=t.Hv,this.i2=t.zv,this.e2=t.Jv,this.h2=!!t.qv&&this.Ub.Eb(),this.n2=t.Xv,!yi.has(this.Qv)||!yi.has(this.t2))throw new Error("invalid wrap mode");if(!mi.has(this.s2))throw new Error("invalid sampling");if(!pi.has(this.e2))throw new Error("invalid pixel format");if(!gi.has(this.n2))throw new Error("invalid mipmap quality");if(this.Zv=!0,s instanceof ArrayBuffer||null===s||t.Yv){if(this.pg=t.width,this.mg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.pg*this.mg*4)throw new Error("ArrayBuffer wrong size")}else this.pg=s.width,this.mg=s.height;if(this.pg<=0||this.mg<=0)throw new Error("invalid texture data size");if(t.Yv){const o=di.Lo(this.pg,this.mg),a=o.getContext("2d");a.drawImage(s,0,0,this.pg,this.mg),s=o}const i=di.Hr(this.pg)&&di.Hr(this.mg),e=this.Ub.a2();if(this.pg>e||this.mg>e)throw new Error("texture data exceeds maximum texture size");const h=this.Ub.l2(),r=this.Ub.u2(),n=(this.Kv=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.Kv),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.e2,h));if(this.Ub.c2()||i||!this.f2())if(2<=r){let t;t=this.h2?Math.floor(Math.log2(Math.max(this.pg,this.mg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.Wv,this.pg,this.mg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.pg,this.mg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.jv,this.pg,this.mg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.jv,this.pg,this.mg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.jv,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.pg,this.mg):s)instanceof ImageData){const c=di.Lo(this.pg,this.mg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Lo(di.zr(this.pg),di.zr(this.mg)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.s2,u.drawImage(s,0,0,this.pg,this.mg,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,n.jv,n.format,n.type,l)}null!==s&&this.d2(h),h.bindTexture(h.TEXTURE_2D,null),this.Ub.m2(),this.A1=1,bi.add(this)}g2(t,s,i){if(i=Object.assign({},Si,i),this.Kv)throw new Error("already created texture");if(this.Qv=i.Vv,this.t2=i.Uv,this.s2=i.Hv,this.e2=i.Jv,this.h2=!!i.qv&&this.Ub.Eb(),this.n2=i.Xv,!yi.has(this.Qv)||!yi.has(this.t2))throw new Error("invalid wrap mode");if(!mi.has(this.s2))throw new Error("invalid sampling");if(!pi.has(this.e2))throw new Error("invalid pixel format");if(!gi.has(this.n2))throw new Error("invalid mipmap quality");this.Zv=!1,this.pg=Math.floor(t),this.mg=Math.floor(s);const e=di.Hr(this.pg)&&di.Hr(this.mg),h=this.Ub.a2();if(this.pg<=0||this.mg<=0)throw new Error("invalid texture size");if(this.pg>h||this.mg>h)throw new Error("texture exceeds maximum texture size");if(!this.Ub.c2()&&this.f2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Ub.l2(),n=this.Ub.u2(),o=(this.Kv=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.Kv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.e2,r)),a=2<=n?o.Wv:o.jv;r.texImage2D(r.TEXTURE_2D,0,a,this.pg,this.mg,0,o.format,o.type,null),this.d2(r),r.bindTexture(r.TEXTURE_2D,null),this.Ub.m2(),this.A1=1,bi.add(this)}S2(t){if("default"===this.n2)return this.Zv?t.NICEST:t.FASTEST;if("low"===this.n2)return t.FASTEST;if("high"===this.n2)return t.NICEST;throw new Error("invalid mipmap quality")}f2(){return"clamp-to-edge"!==this.Qv||"clamp-to-edge"!==this.t2}w2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}d2(t){const s=di.Hr(this.pg)&&di.Hr(this.mg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.w2(t,this.Qv)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.w2(t,this.t2)),"nearest"===this.s2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.h2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Ub.c2())&&this.h2){t.hint(t.GENERATE_MIPMAP_HINT,this.S2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.s2&&!this.Ub.Db();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.h2=!1;const i=this.Ub.b2();i&&0<this.i2&&"nearest"!==this.s2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.i2,this.Ub.M2()))}v2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.Kv||this.A1<=0)throw new Error("texture not created");if(this.Zv)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.Ub.u2(),r=this.Ub.l2(),n=(r.bindTexture(r.TEXTURE_2D,this.Kv),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.e2,r)),o=2<=h?n.Wv:n.jv;try{if(this.pg===i&&this.mg===e){const a=di.Hr(this.pg)&&di.Hr(this.mg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.Ub.c2())&&this.h2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.S2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.pg=i,this.mg=e;const l=di.Hr(this.pg)&&di.Hr(this.mg);if(!this.Ub.c2()&&this.f2()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(l||this.Ub.c2())&&this.h2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.S2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Ub.m2()}G2(){if(0<this.A1)throw new Error("texture still has references");if(!this.Kv)throw new Error("already deleted texture");bi.delete(this);const t=this.Ub.l2();t.deleteTexture(this.Kv),this.Kv=null}T2(){return!!this.Kv}_2(){return this.Kv}uM(){return this.Ub}I2(){this.A1++}C2(){if(this.A1<=0)throw new Error("no more references");this.A1--}R2(){return this.A1}Pm(){return this.pg}jm(){return this.mg}A2(){return this.Zv}P2(){let t=this.pg*this.mg;switch(this.e2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.h2&&(t+=Math.floor(t/3)),t}static EM(){bi.clear()}static E2(){return bi.values()}}}{const Mi=self.Ws,vi=self.xs,Gh=vi.Ps,xh=vi.Is,xi=new Set(["nearest","bilinear","trilinear"]),Gi={Hv:"trilinear",alpha:!0,depth:!1,F2:!0,D2:!0,O2:0},Ti=new Set;Mi.Cy.L2=class{constructor(t){this.Ub=t,this.B2=null,this.N2=null,this.Kv=null,this.W2=null,this.pg=0,this.mg=0,this.j2=!0,this.s2="trilinear",this.V2=!0,this.U2=!1,this.H2=!0,this.z2=0,this.J2=xh.create(),this.q2=0,this.X2=0,this.Y2=0}K2(t,s,i){i=Object.assign({},Gi,i);const e=this.Ub.u2();if(this.Kv||this.W2)throw new Error("already created render target");if(this.s2=i.Hv,this.V2=!!i.alpha,this.U2=!!i.depth,this.H2=!!i.F2,this.j2=!!i.D2,this.z2=i.O2,!xi.has(this.s2))throw new Error("invalid sampling");if(0<this.z2&&(e<2||this.H2))throw new Error("invalid use of multisampling");if(e<2&&(this.H2=!0),this.pg=t,this.mg=s,this.pg<=0||this.mg<=0)throw new Error("invalid render target size");this.Z2();const h=this.Ub.l2();if(this.B2=h.createFramebuffer(),this.U2&&(this.N2=h.createFramebuffer()),this.H2){this.Kv=this.Ub.Q2(this.pg,this.mg,{Hv:this.s2,Jv:this.V2?"rgba8":"rgb8",qv:!1});const n=this.Kv._2();h.bindFramebuffer(h.FRAMEBUFFER,this.B2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.U2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.N2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.W2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.W2);const o=this.V2?h.RGBA8:h.RGB8;if(0<this.z2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.z2>l&&(this.z2=l)}else this.z2=0}0===this.z2?h.renderbufferStorage(h.RENDERBUFFER,o,this.pg,this.mg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.z2,o,this.pg,this.mg),h.bindFramebuffer(h.FRAMEBUFFER,this.B2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.W2),this.U2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.N2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.W2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.Ub.tx();this.U2&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.B2),this.Ub.ix()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}hx(t,s){if(this.pg!==t||this.mg!==s){this.pg=t,this.mg=s,this.Z2();const i=this.Ub.l2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.B2),this.Kv?this.Kv.v2(new ImageData(this.pg,this.mg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.W2),i.renderbufferStorage(i.RENDERBUFFER,this.V2?i.RGBA8:i.RGB8,this.pg,this.mg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Ub.tx());this.U2&&e&&(this.Ub.ix()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}G2(){if(!this.Kv&&!this.W2)throw new Error("already deleted render target");Ti.delete(this);const t=this.Ub.l2(),s=(this.Kv?(t.bindFramebuffer(t.FRAMEBUFFER,this.B2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.U2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.N2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Ub.nx(this.Kv),this.Kv=null):this.W2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.B2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.U2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.N2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.W2),this.W2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Ub.u2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.B2),this.U2&&t.deleteFramebuffer(this.N2),this.Ub.ox());s.lx=null,this.B2=s.ux=null}Z2(){this.Ub.zS(this.J2,this.pg/this.mg),this.q2=this.Ub.jS(),this.X2=this.Ub.LS(),this.Y2=this.Ub.NS()}mx(){return this.B2}gx(){return this.N2}uM(){return this.Ub}yx(){return this.Kv}Sx(){return this.Ub.jS()===this.q2&&this.Ub.LS()===this.X2&&this.Ub.NS()===this.Y2||this.Z2(),this.J2}wx(){return"nearest"!==this.s2}bx(){return this.V2}Mx(){return this.H2}xx(){return this.U2}Pm(){return this.pg}jm(){return this.mg}Gx(){return this.j2}Tx(){return this.z2}_x(){const t={Hv:this.s2,alpha:this.V2,F2:this.H2};return this.j2||(t.width=this.pg,t.height=this.mg),t}Ix(t){return"nearest"!==(t=Object.assign({},Gi,t)).Hv===this.wx()&&!!t.alpha===this.bx()&&!!t.depth===this.xx()&&!(2<=this.Ub.u2()&&!!t.F2!==this.Mx())&&("number"==typeof t.width||"number"==typeof t.height?!this.Gx()&&this.Pm()===Math.floor(t.width)&&this.jm()===Math.floor(t.height):this.Gx())}Cx(){return this.Kv?this.Kv._2():null}P2(){return this.Kv?this.Kv.P2():this.pg*this.mg*(this.V2?4:3)}static async Rx(t,s){const i=await t.Ax(s,!0);return Mi.Wo(i)}static EM(){Ti.clear()}static Px(){return Ti.values()}static Ex(t,s){for(const i of Ti)i.Gx()&&i.hx(t,s)}}}{const m=self.Ws,_i=self.xs,Gh=_i.Ps,xh=_i.Is,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Cy.Fx=class extends m.Cy.Vb{static async Dx(t,s){const i=t.l2(),e=s.src,h=s.Ox,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.kx());if(l?await t.Lx(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Bn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.lp(i.getProgramInfoLog(a)||"").trim();return u&&!m.rp(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(n),i.deleteShader(o),a}static async Bx(t,s){const i=await m.Cy.Fx.Dx(t,s);return new m.Cy.Fx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.l2(),h=t.ox(),r=(t.Cb(),e.useProgram(s),this.Nx=e,this.GM=s,this.Wx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.jx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Vx),e.vertexAttribPointer(r,t._b(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Ux),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.jx&&(e.bindBuffer(e.ARRAY_BUFFER,t.Hx),e.vertexAttribPointer(this.jx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.jx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.zx=new m.Cy.Jx(this,"matP","mat4"),this.qx=new m.Cy.Jx(this,"matMV","mat4"),this.Xx=new m.Cy.Jx(this,"color","vec4"),this.Yx=new m.Cy.Jx(this,"samplerFront","sampler"),this.$x=new m.Cy.Jx(this,"pointTexStart","vec2"),this.Kx=new m.Cy.Jx(this,"pointTexEnd","vec2"),this.Zx=new m.Cy.Jx(this,"zElevation","float"),this.Qx=new m.Cy.Jx(this,"tileSize","vec2"),this.tG=new m.Cy.Jx(this,"tileSpacing","vec2"),this.sG=new m.Cy.Jx(this,"color2_","vec4"),this.iG=new m.Cy.Jx(this,"outlineThickness","float"),this.eG=new m.Cy.Jx(this,"samplerBack","sampler"),this.hG=new m.Cy.Jx(this,"samplerDepth","sampler"),this.rG=new m.Cy.Jx(this,"destStart","vec2"),this.nG=new m.Cy.Jx(this,"destEnd","vec2"),this.oG=new m.Cy.Jx(this,"srcStart","vec2"),this.aG=new m.Cy.Jx(this,"srcEnd","vec2"),this.lG=new m.Cy.Jx(this,"srcOriginStart","vec2"),this.uG=new m.Cy.Jx(this,"srcOriginEnd","vec2"),this.cG=new m.Cy.Jx(this,"pixelSize","vec2"),this.fG=new m.Cy.Jx(this,"seconds","float"),this.dG=new m.Cy.Jx(this,"devicePixelRatio","float"),this.pG=new m.Cy.Jx(this,"layerScale","float"),this.mG=new m.Cy.Jx(this,"layerAngle","float"),this.gG=new m.Cy.Jx(this,"layoutStart","vec2"),this.yG=new m.Cy.Jx(this,"layoutEnd","vec2"),this.SG=new m.Cy.Jx(this,"zNear","float"),this.wG=new m.Cy.Jx(this,"zFar","float"),this.bG=!!(this.cG.MG()||this.fG.MG()||this.eG.MG()||this.rG.MG()||this.nG.MG()||this.oG.MG()||this.aG.MG()||this.lG.MG()||this.uG.MG()||this.dG.MG()||this.pG.MG()||this.mG.MG()||this.gG.MG()||this.yG.MG()),i.parameters||[]);this.vG=[],this.aM=this.cG.MG()||this.oG.MG()||this.aG.MG()||this.lG.MG()||this.uG.MG(),this.xG=!1,this.GG=!1,this.Xx.TG(1,1,1,1),this.sG.TG(1,1,1,1),this.Yx._G(0),this.eG._G(1),this.hG._G(2),this.$x.IG(0,0),this.Kx.IG(1,1),this.Zx.CG(0),this.Qx.IG(0,0),this.tG.IG(0,0),this.rG.IG(0,0),this.nG.IG(1,1),this.oG.IG(0,0),this.aG.IG(0,0),this.lG.IG(0,0),this.uG.IG(0,0),this.cG.IG(0,0),this.dG.CG(1),this.SG.CG(t.LS()),this.wG.CG(t.NS()),this.pG.CG(1),this.mG.CG(0),this.fG.CG(0),this.gG.IG(0,0),this.yG.IG(0,0),this.iG.CG(1);for(const l of o){const u=l[0],c=l[2],f=new m.Cy.Jx(this,u,c);"color"===c?f.AG(0,0,0):f.CG(0),this.vG.push(f)}this.Wx?this.PG(h.EG):(this.FG(h.EG,!0),this.DG(h.OG,!0));const a=h.kG;e.useProgram(a?a.GM:null)}wr(){this.Nx.deleteProgram(this.GM),this.GM=null,this.Ub.KS(this),this.Nx=null,super.wr()}LG(){return this.Nx}BG(){return this.GM}NG(){return this.vG.length}WG(t){return t<0||t>=this.vG.length?null:this.vG[t].jG()}VG(i){for(let t=0,s=i.length;t<s;++t)if(!this.vG[t].UG(i[t]))return!1;return!0}HG(i){for(let t=0,s=i.length;t<s;++t)this.vG[t].zG(i[t])}JG(t,s,i,e,h,r,n,o,a,l){return!this.eG.MG()&&!(this.cG.MG()&&!this.cG.qG(h,r)||this.rG.MG()&&!this.rG.qG(t.Pl(),t.El())||this.nG.MG()&&!this.nG.qG(t.Fl(),t.Dl())||this.dG.MG()&&!this.dG.XG(n)||this.pG.MG()&&!this.pG.XG(o)||this.mG.MG()&&!this.mG.XG(a)||this.oG.MG()&&!this.oG.qG(s.Pl(),s.El())||this.aG.MG()&&!this.aG.qG(s.Fl(),s.Dl())||this.lG.MG()&&!this.lG.qG(i.Pl(),i.El())||this.uG.MG()&&!this.uG.qG(i.Fl(),i.Dl())||this.gG.MG()&&!this.gG.qG(e.Pl(),e.El())||this.yG.MG()&&!this.yG.qG(e.El(),e.Dl())||this.fG.MG()&&!this.fG.XG(l))}YG(t,s,i,e,h,r,n,o,a,l){this.eG.MG()||(this.cG.MG()&&this.cG.$G(h,r),this.rG.MG()&&this.rG.$G(t.Pl(),t.El()),this.nG.MG()&&this.nG.$G(t.Fl(),t.Dl()),this.dG.MG()&&this.dG.KG(n),this.pG.MG()&&this.pG.KG(o),this.mG.MG()&&this.mG.KG(a),this.oG.MG()&&this.oG.$G(s.Pl(),s.El()),this.aG.MG()&&this.aG.$G(s.Fl(),s.Dl()),this.lG.MG()&&this.lG.$G(i.Pl(),i.El()),this.uG.MG()&&this.uG.$G(i.Fl(),i.Dl()),this.gG.MG()&&this.gG.$G(e.Pl(),e.El()),this.yG.MG()&&this.yG.$G(e.El(),e.Dl()),this.fG.MG()&&this.fG.KG(l))}FG(t,s){this.xG&&!s||this.Wx||(this.zx.MG()&&this.zx.ZG(t),this.xG=!0)}QG(){this.xG=!1}DG(t,s){this.GG&&!s||this.Wx||(this.qx.MG()&&this.qx.ZG(t),this.GG=!0)}tT(){this.GG=!1}PG(t){if(!this.Wx)throw new Error("not device transform shader");this.zx.ZG(t);const s=this.Ub,i=s.Pm()/2,e=s.jm()/2,h=s.YS(i,e,s.ES(s.jm()),i,e,0,s.jm());this.qx.ZG(h)}sT(t){this.Xx.MG()&&this.Xx.iT(t[0],t[1],t[2],t[3])}static eT(){return Ii}static hT(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static rT(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static nT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static oT(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static aT(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static lT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static uT(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static cT(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static fT(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static dT(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static pT(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static mT(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static gT(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yT(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static ST(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static wT(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static bT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static MT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static vT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static xT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static GT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static TT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Ws,Ri=self.xs,xh=Ri.Is,Ai=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Cy.Jx=class{constructor(t,s,i){if(!Ai.has(i))throw new Error("invalid uniform type");this.uv=t,this.Nx=this.uv.LG(),this.vr=s,this.Cf=i,this._T="color"===this.Cf,this.IT=this.Nx.getUniformLocation(this.uv.BG(),s),this.CT=!!this.IT;const e=Ai.get(i);this.RT=new Float32Array(e),this.AT=new Float32Array(e)}wr(){this.uv=null,this.Nx=null,this.IT=null}MG(){return this.CT}jG(){return this.Cf}PT(){return this._T}CG(t){this.MG()&&(this.RT[0]=t,this.AT.set(this.RT),this.Nx.uniform1f(this.IT,t))}_G(t){this.MG()&&(this.RT[0]=t,this.AT.set(this.RT),this.Nx.uniform1i(this.IT,t))}IG(t,s){this.MG()&&(this.RT[0]=t,this.RT[1]=s,this.AT.set(this.RT),this.Nx.uniform2f(this.IT,t,s))}AG(t,s,i){this.MG()&&(this.RT[0]=t,this.RT[1]=s,this.RT[2]=i,this.AT.set(this.RT),this.Nx.uniform3f(this.IT,t,s,i))}TG(t,s,i,e){this.MG()&&(this.RT[0]=t,this.RT[1]=s,this.RT[2]=i,this.RT[3]=e,this.AT.set(this.RT),this.Nx.uniform4f(this.IT,t,s,i,e))}ET(t){t=Math.fround(t);const s=this.RT;s[0]!==t&&(s[0]=t,this.Nx.uniform1f(this.IT,t))}FT(t){const s=this.RT;s[0]!==t&&this.Nx.uniform1i(this.IT,s[0]=t)}DT(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.RT;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Nx.uniform2f(this.IT,t,s))}OT(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.RT;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Nx.uniform3f(this.IT,t,s,i))}iT(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.RT;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Nx.uniform4f(this.IT,t,s,i,e))}ZG(t){const s=this.RT;xh.j(s,t)||(Ci.Vn(s,t,0),this.Nx.uniformMatrix4fv(this.IT,!1,t))}UG(t){const s=this.AT;return this.PT()?s[0]===Math.fround(t.fa())&&s[1]===Math.fround(t.ya())&&s[2]===Math.fround(t.Sa()):s[0]===Math.fround(t)}zG(t){const s=this.AT;this.PT()?(s[0]=t.fa(),s[1]=t.ya(),s[2]=t.Sa()):s[0]=t}XG(t){return this.AT[0]===Math.fround(t)}qG(t,s){const i=this.AT;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}KG(t){this.AT[0]=t}$G(t,s){const i=this.AT;i[0]=t,i[1]=s}}}{const Pi=self.Ws,Ei=self.xs,Vh=Ei.Es,xh=Ei.Is;Pi.Cy.kT=class{constructor(t){this.renderer=t,this.OG=xh.create(),this.EG=xh.create(),this.lx=null,this.ux=null,this.LT=!1,this.BT=Vh.C(1,1,1,1),this.kG=null,this.NT=new Pi.Rect,this.clearColor=Pi.Sr(Pi.Yo,0,0,0,0)}},Pi.Cy.WT=class{constructor(t){const s=new ArrayBuffer(96);this.Cf=0,this.jT=t,this.Nx=t.renderer.l2(),this.VT=0,this.UT=0,this.HT=null,this.zT=new Float32Array(s,0,16),this.JT=new Float32Array(s,64,4),this.qT=new Float32Array(s,80,4),this.XT=[]}YT(t,s){this.Cf=1,this.VT=t,this.UT=s}$T(){const t=this.Nx;t.drawElements(t.TRIANGLES,this.UT,t.UNSIGNED_SHORT,this.VT)}KT(t){this.Cf=2,this.HT=t}ZT(){const t=this.Nx,s=this.HT;t.bindTexture(t.TEXTURE_2D,s?s._2():null)}QT(t){this.Cf=3,t.Ma(this.JT,0)}t_(){const t=this.JT,s=this.jT;Vh.I(s.BT,t),s.kG.sT(t)}s_(t){this.Cf=21,t.Ma(this.JT,0)}i_(){const t=this.JT,s=this.jT.kG;s.sG.MG()&&s.sG.iT(t[0],t[1],t[2],t[3])}e_(t,s){this.Cf=4,this.VT=t,this.UT=s}h_(){this.Nx.blendFunc(this.VT,this.UT)}r_(t,s,i,e){this.Cf=5;const h=this.JT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}n_(){const t=this.JT;this.Nx.viewport(t[0],t[1],t[2],t[3])}o_(t){this.Cf=6,xh.I(this.zT,t)}a_(){const t=this.jT,i=t.renderer.Zy,e=t.kG,h=this.zT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.FG(h,!0):r.QG()}xh.I(t.EG,h)}l_(t){this.Cf=7,xh.I(this.zT,t)}u_(){const t=this.jT,i=t.renderer.Zy,e=t.kG,h=this.zT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.DG(h,!0):r.tT()}xh.I(t.OG,h)}c_(t){this.Cf=8,this.HT=t}f_(){const t=this.Nx,s=this.HT,i=this.jT;s?(i.lx=s.mx(),i.ux=s.gx(),i.LT&&i.ux?t.bindFramebuffer(t.FRAMEBUFFER,i.ux):t.bindFramebuffer(t.FRAMEBUFFER,i.lx)):(i.lx=null,i.ux=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}d_(t){this.Cf=9,t.Ma(this.zT,0)}p_(t,s,i,e){this.Cf=9;const h=this.zT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}m_(){const t=this.Nx,s=this.zT,i=this.jT,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e._a(h,r,n,o)||(t.clearColor(h,r,n,o),e.ta(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}g_(t){this.Cf=15,t.Ma(this.zT,0)}y_(){const t=this.zT;this.jT.NT.set(t[0],t[1],t[2],t[3])}S_(t,s){this.Cf=10,this.VT=t,this.UT=1,this.zT[0]=s}w_(){const t=this.Nx,s=this.jT,i=s.renderer,e=i.sS,h=(t.useProgram(e.GM),e.FG(s.EG,!1),e.DG(s.OG,!1),s.NT),r=(e.$x.MG()&&e.$x.DT(h.Pl(),h.El()),e.Kx.MG()&&e.Kx.DT(h.Fl(),h.Dl()),this.zT[0]);if(e.Zx.MG()&&e.Zx.ET(r),e.Xx.MG()){const n=s.BT;e.Xx.iT(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.VT/4,this.UT),t.useProgram(s.kG.GM)}b_(t){this.Cf=11,this.HT=t}M_(){const t=this.Nx,s=this.jT,i=this.HT;if(s.kG=i,t.useProgram(i.GM),i.FG(s.EG,!1),i.DG(s.OG,!1),i.Xx.MG()){const e=s.BT;i.Xx.iT(e[0],e[1],e[2],e[3])}}v_(){this.Cf=12}x_(){const t=this.jT.kG,s=this.Nx,i=this.zT,e=this.JT,h=this.qT;if(t.eG.MG()){const r=this.jT.renderer,n=this.HT;r.G_!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n._2():null),r.G_=n,s.activeTexture(s.TEXTURE0))}t.cG.MG()&&t.cG.DT(i[0],i[1]),t.rG.MG()&&t.rG.DT(i[2],i[3]),t.nG.MG()&&t.nG.DT(i[4],i[5]),t.dG.MG()&&t.dG.ET(this.UT),t.pG.MG()&&t.pG.ET(i[6]),t.mG.MG()&&t.mG.ET(i[7]),t.oG.MG()&&t.oG.DT(i[12],i[13]),t.aG.MG()&&t.aG.DT(i[14],i[15]),t.lG.MG()&&t.lG.DT(h[0],h[1]),t.uG.MG()&&t.uG.DT(h[2],h[3]),t.gG.MG()&&t.gG.DT(e[0],e[1]),t.yG.MG()&&t.yG.DT(e[2],e[3]),t.fG.MG()&&t.fG.ET(this.VT)}T_(){this.Cf=13}__(){const t=this.jT.kG,i=t.vG,e=this.XT;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.PT()?h.OT(r.fa(),r.ya(),r.Sa()):h.ET(r)}}I_(t){this.Cf=14,this.HT=t}C_(){const t=this.Nx,s=this.HT,i=this.jT.lx;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}R_(t,s,i){this.Cf=17;const e=this.zT,h=this.jT.renderer,r=(e[0]=t.Pm(),e[1]=t.jm(),e[2]=(s||h).Pm(),e[3]=(s||h).jm(),e[4]=t.wx()?1:0,e[5]="stretch"===i,this.XT);Pi.Hn(r),r.push(t.mx()),r.push(s?s.mx():null)}A_(){const t=this.zT,s=this.XT,i=this.Nx,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}P_(t){this.Cf=18,this.HT=t}E_(){this.HT.F_(),this.HT=null}D_(t){this.Cf=19,this.HT=t}O_(){this.HT.k_(),this.HT=null}L_(t,s,i){this.Cf=20;const e=this.zT;e[0]=t,e[1]=s,e[2]=i}B_(){const t=this.jT.kG,s=this.zT;t.cG.MG()&&t.cG.DT(s[0],s[1]),t.iG.MG()&&t.iG.ET(s[2])}N_(t,s,i,e,h,r,n){this.Cf=16;const o=this.zT;t.Ma(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}W_(){const t=this.jT.kG,s=this.zT;t.oG.MG()&&t.oG.DT(s[0],s[1]),t.cG.MG()&&t.cG.DT(s[4],s[5]),t.Qx.MG()&&t.Qx.DT(s[6],s[7]),t.tG.MG()&&t.tG.DT(s[8],s[9])}j_(t,s,i,e,h,r,n){this.Cf=29;const o=this.zT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}V_(){const t=this.jT.kG,s=this.zT;t.cG.MG()&&t.cG.DT(s[0],s[1]),t.Qx.MG()&&t.Qx.DT(s[2],s[3]),t.iG.MG()&&t.iG.ET(s[4]),t.tG.MG()&&t.tG.DT(s[5],s[6])}U_(t){this.Cf=22,this.VT=t?1:0}H_(){const t=this.Nx,s=0!==this.VT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}z_(t){this.Cf=23,this.VT=t?1:0}J_(){const t=this.Nx;0===this.VT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}q_(t){this.Cf=24,this.VT=t?1:0}X_(){const t=this.Nx,s=this.jT,i=s.renderer,e=0!==this.VT;s.LT=e,t.activeTexture(t.TEXTURE2),e?(s.ux&&t.bindFramebuffer(t.FRAMEBUFFER,s.ux),t.bindTexture(t.TEXTURE_2D,i.tx())):(t.bindTexture(t.TEXTURE_2D,null),s.ux&&t.bindFramebuffer(t.FRAMEBUFFER,s.lx)),t.activeTexture(t.TEXTURE0)}Y_(){this.Cf=25}K_(){const t=this.Nx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}Z_(){this.Cf=26}Q_(){const t=this.Nx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}tI(){this.Cf=27}sI(){const t=this.Nx;t.disable(t.STENCIL_TEST)}iI(t,s,i,e,h){this.Cf=28,this.VT=t?1:0;const r=this.zT;r[0]=s,r[1]=i,r[2]=e,r[3]=h}eI(){const t=this.Nx,s=this.zT;1===this.VT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}hI(){switch(this.Cf){case 1:return void this.$T();case 2:return void this.ZT();case 3:return void this.t_();case 4:return void this.h_();case 5:return void this.n_();case 6:return void this.a_();case 7:return void this.u_();case 8:return void this.f_();case 9:return void this.m_();case 10:return void this.w_();case 11:return void this.M_();case 12:return void this.x_();case 13:return void this.__();case 14:return void this.C_();case 15:return void this.y_();case 16:return void this.W_();case 17:return void this.A_();case 18:return void this.E_();case 19:return void this.O_();case 20:return void this.B_();case 21:return void this.i_();case 22:return void this.H_();case 23:return void this.J_();case 24:return void this.X_();case 25:return void this.K_();case 26:return void this.Q_();case 27:return void this.sI();case 28:return void this.eI();case 29:return void this.V_()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Ws,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Oi={timeout:60},ki=new Fi.Yo(0,0,0,1),Li=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Ni=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.cf();for(const i of ji)(i.rI()||Fi.Gh(i.nI(),s))&&i.oI()});let s=!1,i=!1;Fi.Cy.jb=class{constructor(t,s){s=Object.assign({},Oi,s),this.Ub=t,this.aI="Arial",this.lI=16,this.uI=1,this.cI=0,this.fI=!1,this.dI=!1,this.pI="black",this.mI=!1,this._m=null,this.gI=!0,this.yI=null,this.SI=new Set,this.wI="left",this.bI="top",this.Mf="",this.MI=null,this.vI=Fi.Sr(Fi.Gm),this.xI="word",this.GI="ltr",this.TI=!1,this._I=!1,this.II=!1,this.CI=-1,this.RI=0,this.AI=0,this.EI=0,this.pg=0,this.mg=0,this.FI=1,this.DI=null,this.OI=null,this.kI=null,this.LI=null,this.BI=-1,this.NI=-1,this.WI="",this.jI="",this.VI="",this.UI=1,this.HI=1,this.zI=t=>this.JI(t),this.Kv=null,this.qI=new Fi.Rect,this.XI=1,this.YI=new Fi.m0(()=>{this.$I(),this.KI(8,8)},s.timeout),this.ZI=null,this.QI=!1,ji.add(this)}wr(){this.yI=null,this.SI.clear(),this._m=null,this.MI=null,this.DI=null,this.OI=null,this.kI=null,this.LI=null,this.zI=null,this.YI.wr(),this.ZI=null,this.$I(),this.vI.lc(),this.vI=null,this.Ub=null,this.QI=!0,ji.delete(this)}tC(){this.II=!0}sC(){this.tC(),this._I=!0}oI(){this.sC(),this.TI=!0}iC(t){if(this.mI!==(t=!!t)){this.mI=t;const s=this.mI?"alphabetic":"top";this.OI&&(this.OI.textBaseline=s),this.kI&&(this.kI.textBaseline=s),this.oI()}}rI(){return this.mI}Rm(t){this._m!==t&&(this._m=t,this.vI.Rm(t),this._m&&this._m.uy()&&this._m.my().then(()=>this.tC()),this.oI())}eC(t){this.gI!==(t=!!t)&&(this.gI=t,this.tC())}hC(t){this.aI!==(t=t||"serif")&&(this.aI=t,this.oI())}nI(){return this.aI}rC(t){this.lI!==(t=t<.1?.1:t)&&(this.lI=t,this.oI())}nC(){return this.lI}oC(t){this.uI!==t&&(this.uI=t,this.oI())}aC(t){this.cI!==t&&(this.cI=t,this.sC())}lC(){return this.cI}uC(t){this.fI!==(t=!!t)&&(this.fI=t,this.oI())}cC(){return this.fI}fC(t){this.dI!==(t=!!t)&&(this.dI=t,this.oI())}dC(){return this.dI}pC(t){t=Math.floor(t),this.CI!==t&&(this.CI=t,this.tC())}mC(){return this.CI}gC(t,s){let i=[];(this.fI||s.Ag("b"))&&i.push("bold"),(this.dI||s.Ag("i"))&&i.push("italic");const e=s.Rg("size"),h=(e?parseFloat(e.param):this.lI)*this.uI;i.push(t?h+"pt":h*this.yC()+"pt");let r=this.aI,n=s.Rg("font");return n&&n.param&&(r=n.param,this.yI)&&!this.SI.has(r)&&(this.yI(r),this.SI.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}PM(t){t instanceof Fi.Yo&&(t=t.Fa()),this.pI!==t&&(this.pI=t,this.tC())}SC(t,s,i){ki.ea(t,s,i),this.PM(ki)}wC(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.wI!==t&&(this.wI=t,this.sC())}bC(){return this.wI}MC(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this.bI!==t&&(this.bI=t,this.sC())}vC(){return this.bI}xC(t){if(!Ni.has(t))throw new Error("invalid word wrap mode");this.xI!==t&&(this.xI=t,this.oI())}GC(){return this.xI}TC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.GI!==t&&(this.GI=t,this.OI&&(this.OI.direction=this.GI),this.kI&&(this.kI.direction=this.GI),this.oI())}_C(){return this.GI}Gf(t){this.Mf!==t&&(this.Mf=t,this.oI())}IC(){return this.Mf}yC(){return this.XI*this.FI*self.devicePixelRatio}CC(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.AI===r&&this.EI===n&&this.FI===o)){let t=this.AI,s=(this.AI=r,this.EI=n,this.FI=o,self.devicePixelRatio),i=(this.pg=this.AI*this.FI*s,this.mg=this.EI*this.FI*s,Math.max(this.pg,this.mg)),e=Math.min(this.Ub.a2(),4096),h=1;e<i&&(h=e/i,this.pg=Math.min(this.pg*h,e),this.mg=Math.min(this.mg*h,e)),this.XI=h,this.AI!==t?this.oI():this.sC()}}Pm(){return this.pg}jm(){return this.mg}RC(){return this.FI}AC(){return this.PC(),this.vI.fg()}EC(){return this.PC(),this.vI.dg()+this.vI.Cm()*(this.cI+4)-this.cI}FC(){this.PC();let t=0;for(const s of this.vI.Im())for(const i of s.qm())t+=i.Xm();return t}yx(){return this.YI.b0(),this.DC(),this.Kv}OC(t,s){this.PC();const i=this.yC(),e=this.vI.Im();for(const h of e){const r=h.Um()*i;if(s>=h._g()-h.jm()*i+r&&s<h._g()+r)for(const n of h.qm())if(t>=n.Gg()&&t<n.Gg()+n.Pm()*i)return n}return null}*kC(t){this.PC();const s=this.vI.Im();for(const i of s)for(const e of i.qm()){const h=e.Rg("tag");h&&Fi.Gh(h.param,t)&&(yield e)}}LC(t,s){for(const i of this.kC(t)){if(0===s)return i;--s}return null}BC(t){let s=0;for(const i of this.kC(t))++s;return s}DC(){this.Kv&&!this.II&&!this._I&&!this.TI||this.QI||this.pg<=0||this.mg<=0||(this.II=!1,this.NC())}NC(){this.QI||(this.PC(),this.KI(Math.max(Fi.zr(Math.ceil(this.pg)),128),Math.max(Fi.zr(Math.ceil(this.mg)),64)),this.WC(),this.jC(),this.YI.b0())}KI(t,s){this.DI||(this.DI=Fi.Lo(16,16));let i=!1;this.BI===t&&this.NI===s||(this.BI=t,this.NI=s,this.DI.width=t,this.DI.height=s,i=!0),this.OI||(this.OI=this.DI.getContext("2d"),i=!0),i?(this.OI.textBaseline=this.mI?"alphabetic":"top",this.OI.direction=this.GI,this.OI.font=this.WI,this.OI.fillStyle=this.VI,this.OI.strokeStyle=this.VI,this.OI.globalAlpha=this.UI,this.OI.lineWidth=this.HI):this.OI.clearRect(0,0,t,s)}VC(){this.kI||(this.kI=Fi.Lo(16,16).getContext("2d"),this.LI=Fi.Lo(16,16).getContext("2d"),this.kI.textBaseline=this.mI?"alphabetic":"top",this.LI.textBaseline="top",this.kI.direction=this.GI,this.LI.direction=this.GI)}UC(t){this.jI!==t&&(this.jI=t,this.kI.font=t,this.LI.font=t)}HC(){if(!s){s=!0,this.VC();const t=this.kI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}PC(){this.zC(),this.JC()}zC(){this.TI&&(this.VC(),!this.mI||this.MI&&this.MI.toString()===this.Mf||(this.MI=new Fi.Lh(this.Mf,{$p:!0})),this.vI.Gm(this.mI?this.MI.pm():this.Mf,this.zI,this.AI,this.xI,0),this.TI=!1)}JC(){this._I&&(this.qC(),this._I=!1)}JI(t){let s=t.Lm()?t.sg().join(""):" ",i=(this.UC(this.gC(!0,t)),t.Rg("size")),e=(i?parseFloat(i.param):this.lI)*this.uI,h=this.kI.measureText(s),r=0;if(this.mI&&this.HC()){const n=this.LI.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,km:r}}XC(t){this.WI!==t&&(this.WI=t,this.OI.font=t)}YC(t){this.VI!==t&&(this.VI=t,this.OI.fillStyle=t,this.OI.strokeStyle=t)}$C(t){this.UI!==t&&(this.UI=t,this.OI.globalAlpha=t)}KC(t){this.HI!==t&&(this.HI=t,this.OI.lineWidth=t)}qC(){let e=this.yC(),h=(4+this.cI)*e,r=0,n=this.vI.Im();if(0!==n.length){for(const s of n){s.xg(NaN),s.Tg(NaN);for(const o of s.qm())o.xg(NaN),o.Tg(NaN)}let t=this.mI&&this.HC(),i=n[0].jm()*e;if("center"===this.bI){const a=n.reduce((t,s)=>t+s.jm()*e+h,0)-h;r=Math.max(this.mg/2-a/2,0),t&&(i=n[0].Hm()*e)}else if("bottom"===this.bI){const l=n.reduce((t,s)=>t+s.jm()*e+h,0)-this.cI*e,u=t?n.at(-1).Um()*e:0;r=this.mg-l-u-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.jm()*e,d=r;if(this.mI){if(r+=0===t?i:f,0<t&&r>this.mg-4*e)break}else if(0<t&&r>=this.mg-f)break;0<=d&&this.ZC(c,r,e),this.mI||(r+=f),r+=h}}}ZC(t,s,i){let e=0;"center"===this.wI?e=Math.floor((this.pg-t.Pm()*i)/2):"right"===this.wI&&(e=this.pg-t.Pm()*i),t.xg(e),t.Tg(s);for(const h of"ltr"===this.GI?t.qm():t.Mg())this.QC(h,e,s,i),e+=h.Pm()*i}QC(t,s,i,e){const h=t.Rg("offsetx"),r=(s+=h?o(h.param,t.jm())*e:0,t.Rg("offsety"));if(i+=r?o(r.param,t.jm())*e:0,t.Nm()){const n=t.Rg("iconoffsety");i+=n?o(n.param,t.jm())*e:.2*t.jm()*e}t.xg(s),t.Tg(i)}WC(){this.OI.imageSmoothingEnabled=this.gI,this.OI.imageSmoothingQuality="high",this.RI=0;const t=this.yC(),s=this.vI.Im();for(const i of s)this.tR(i,t)}tR(t,s){const i=t.Gg(),e=t._g();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.GI?t.qm():t.Mg())this.sR(h,s,t.jm())}sR(n,o,a){const l=this.OI,u=n.Gg(),c=n._g();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=n.Pm()*o,i=n.jm()*o,e=n.jm()/16,h=(4+this.cI)*o,r=n.Lm()?n.sg():null;if(-1!==this.CI){if(this.RI>=this.CI)return;n.Lm()&&this.RI+r.length>this.CI&&(r=r.slice(0,this.CI-this.RI),s=this.JI(n).width*o),this.RI+=n.Xm()}const f=n.Rg("background"),d=n.Ag("u"),p=n.Ag("s");if((!n.Lm()||!Fi.np(r)||f||d||p)&&!n.Ag("hide")){const m=n.Rg("color"),g=n.Rg("opacity"),y=(this.$C(g?parseFloat(g.param)/100:1),f&&(this.YC(f.param),l.fillRect(u,c-i,s,i+h)),n.Rg("linethickness")),S=y?parseFloat(y.param):1,w=n.Ag("stroke");if(w&&this.KC(.5*e*S*this.yC()),n.Lm()){const b=r.join("");if(this.XC(this.gC(!1,n)),!w){this.KC(.5*e*S*this.yC());const M=n.Rg("outlineback");M&&(this.YC(M.param),this.iR(!0,b,u,c,s))}if(this.YC(m?m.param:this.pI),this.iR(w,b,u,c,s),!w){this.KC(.5*e*S*this.yC());const v=n.Rg("outline");v&&(this.YC(v.param),this.iR(!0,b,u,c,s))}}else if(n.Nm()&&0<n.Pm()){const x=n.Bg(this._m);x&&l.drawImage(x,u,c-i,s,i)}if(this.YC(m?m.param:this.pI),d&&I(l,w,u,c+o*t,s,o*t*S),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*S/2,s,T*S)}}}}iR(t,s,i,e,h){"rtl"===this.GI&&(i+=h),t?"Gecko"===Fi.di.bi?this.OI.strokeText(s,i,e,h):this.OI.strokeText(s,i,e):"Gecko"===Fi.di.bi?this.OI.fillText(s,i,e,h):this.OI.fillText(s,i,e)}jC(){this.Ub.eR()||(this.Kv||(this.Kv=this.Ub.Q2(this.DI.width,this.DI.height,{qv:!0,Xv:"high"})),this.Ub.hR(this.DI,this.Kv),this.qI.set(0,0,this.pg/this.Kv.Pm(),this.mg/this.Kv.jm()),this.ZI&&this.ZI())}rR(){return this.qI}$I(){this.Kv&&(this.Ub.eR()||this.Ub.nx(this.Kv),this.Kv=null)}static EM(){for(const t of ji)t.$I()}static nR(){return ji.values()}}}{const Vi=self.Ws;class Ui{constructor(t){this.Nx=t.l2(),this.oR=t.u2(),this.aR=t.lR(),this.uR=null,this.w0=!1,this.cR=!1,this.fR=0,1===this.oR?this.uR=this.aR.createQueryEXT():this.uR=this.Nx.createQuery()}wr(){this.dR(),this.Nx=null,this.aR=null,this.cR=!1}dR(){this.uR&&(1===this.oR?this.aR.deleteQueryEXT(this.uR):this.Nx.deleteQuery(this.uR),this.uR=null)}F_(){if(this.w0)throw new Error("query already active");1===this.oR?this.aR.beginQueryEXT(this.aR.TIME_ELAPSED_EXT,this.uR):this.Nx.beginQuery(this.aR.TIME_ELAPSED_EXT,this.uR),this.w0=!0}k_(){if(!this.w0)throw new Error("query not active");1===this.oR?this.aR.endQueryEXT(this.aR.TIME_ELAPSED_EXT):this.Nx.endQuery(this.aR.TIME_ELAPSED_EXT),this.w0=!1}pR(){if(this.uR&&!this.cR&&!this.w0){let t;t=1===this.oR?this.aR.getQueryObjectEXT(this.uR,this.aR.QUERY_RESULT_AVAILABLE_EXT):this.Nx.getQueryParameter(this.uR,this.Nx.QUERY_RESULT_AVAILABLE);const s=this.Nx.getParameter(this.aR.GPU_DISJOINT_EXT);t&&!s&&(1===this.oR?this.fR=this.aR.getQueryObjectEXT(this.uR,this.aR.QUERY_RESULT_EXT):this.fR=this.Nx.getQueryParameter(this.uR,this.Nx.QUERY_RESULT),this.fR/=1e9,this.cR=!0),(t||s)&&this.dR()}}mR(){return this.cR}gR(){if(this.cR)return this.fR;throw new Error("no result available")}}Vi.Cy.yR=class{constructor(t){this.Ub=t,this.GS=t.Rb(),this.w0=!1,this.SR=null,this.wR=!1,this.bR=null,this.MR=[]}wr(){for(const t of this.MR)t instanceof Ui&&t.wr();Vi.Hn(this.MR),this.SR=null,this.bR=null,this.Ub=null}F_(){if(this.w0)throw new Error("query already active");const t=this.Ub.vR();0<t.length?(this.wR=!0,this.SR=t.at(-1),this.SR.xR(),this.SR.MR.push(this)):(this.wR=!1,this.SR=null),this.w0=!0,t.push(this),this.GR()}k_(){if(!this.w0)throw new Error("query not active");const t=this.Ub.vR().pop();if(t!==this)throw new Error("can only end most nested query");this.w0=!1,this.xR(),this.SR&&(this.SR.GR(),this.SR=null)}GR(){this.bR=Vi.Sr(Ui,this.Ub),this.MR.push(this.bR),this.bR.F_()}xR(){this.bR.k_(),this.bR=null}pR(){for(const t of this.MR)t.pR()}TR(){return this.wR}mR(){return this.MR.every(t=>t.mR())}gR(){return this.MR.reduce((t,s)=>t+s.gR(),0)}Rb(){return this.GS}}}{const Hi=self.Ws;Hi.Cy._R=class{constructor(t,s=1e3){this.Ub=t,this.IR=s,this.CR=[],this.Ub.RR(this)}wr(){this.lc(),this.Ub.AR(this),this.Ub=null}lc(){for(const t of this.CR)t.wr();Hi.Hn(this.CR)}PR(){const t=new Hi.Cy.yR(this.Ub);if(this.CR.push(t),this.CR.length>this.IR){const s=this.CR.shift();s.wr()}return t}ER(t){for(const s of this.CR){if(s.Rb()>=t)return;if(s.TR())return;s.pR()}}FR(t,s){if(s<=t)return NaN;let i=0;for(const e of this.CR){if(e.Rb()>=s)break;if(!(e.Rb()<t)){if(!e.mR())return NaN;i+=e.gR()}}return i}DR(i){for(let t=0,s=this.CR.length;t<s;++t){const e=this.CR[t];if(!(e.Rb()<i))return void(0<t&&this.CR.splice(0,t));e.wr()}}}}{let i=function(){h=-1;for(const t of e)t.OR()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ws),t=self.xs,M=(t.Ps,t.Es),y=t.Is,r={powerPreference:"default",kR:!0,alpha:!1,depth:!1,LR:!1,BR:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.ou(0,0,1,0,1,1,0,1),S=y.create(),w=y.create(),v=new b.ou,x=new b.Rect,G=null,e=(b.isDebug&&(self.NR=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.WR=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Cy.jR=class extends b.Cy.Hy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.BR&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Nx=e,this.VR=e.getContextAttributes(),this.UR=e.getParameter(e.VERSION),this.oR=h,this.HR=M.create(),this.zR=!1,this.JR=y.create(),this.qR=!!s.depth,this.YR=!(!s.depth||!s.LR),this.$R=this.qR,this.KR=!1,this.ZR=null,this.QR=!0,this.tA=0,this.sA=0,this.Vx=null,this.Ux=null,this.iA=null,this.Hx=null,this.eA=new Float32Array(8e3*this._b()),this.hA=new Uint16Array(12e3),this.rA=new Float32Array(16e3),this.nA=new Float32Array(32e3),this.oA=0,this.aA=0,this.lA=0,this.uA=0,this.cA=null,this.fA=null,this.dA=[],this.pA=0,this.mA=0,this.gA=null,this.yA=0,this.jT=b.Sr(b.Cy.kT,this),this.SA=b.Sr(b.Yo,1,1,1,1),this.wA=null,this.G_=null,this.bA=0,this.MA=0,this.vA=new b.Rect,this.xA=b.Sr(b.Rect,0,0,-1,-1),this.GA=0,this.TA=-1,this._A=0,this.IA=0,this.CA=0,this.RA="(unavailable)",this.AA="(unavailable)",this.PA=[],this.EA=!1,this.FA=null,this.DA=null,this.OA=null,this.kA=null,this.LA=null,this.BA=null,this.NA=0,this.WA=!!s.kR,this.aR=null,this.jA=new Set,this.VA=[],this.IS(this.hA)}Ob(){return!0}async AS(){super.AS();const t=this.Nx,s=this._b(),i=(this.SA.ta(1,1,1,1),this.wA=null,this.G_=null,this.oA=0,this.lA=0,this.uA=8e3*s-4*s,b.Hn(this.dA),this.pA=0,this.mA=0,this.cA=null,this.gA=null,this.vA.set(0,0,1,1),this.yA=0,this.jT),e=(i.kG=null,i.lx=null,i.ux=null,M.set(i.BT,1,1,1,1),i.clearColor.ta(0,0,0,0),i.NT.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.bA=t.ONE,this.MA=t.ONE_MINUS_SRC_ALPHA,this.UA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.qR?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.$R=this.qR,this.KR=!1,this.Hx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Hx),t.bufferData(t.ARRAY_BUFFER,this.nA.byteLength,t.DYNAMIC_DRAW),this.Vx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Vx),t.bufferData(t.ARRAY_BUFFER,this.eA.byteLength,t.DYNAMIC_DRAW),this.Ux=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Ux),t.bufferData(t.ARRAY_BUFFER,this.rA.byteLength,t.DYNAMIC_DRAW),this.iA=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.iA),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.hA,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.TA=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this._A=e[0],this.IA=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.CA=h&&r?Math.min(h.precision,r.precision):0,2048<this.IA&&(this.IA=2048),this.PA=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.RA=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.AA=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.FA=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.WA&&(1===this.u2()?this.aR=t.getExtension("EXT_disjoint_timer_query"):this.aR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.DA=t.getExtension("EXT_texture_filter_anisotropic"),this.DA?this.NA=t.getParameter(this.DA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.NA=0,this.u2()<2&&this.qR&&this.YR&&(this.OA=t.getExtension("WEBGL_depth_texture"),!this.OA))throw new Error("no depth texture support");this.u2()<2&&(this.kA=t.getExtension("EXT_frag_depth"),this.LA=t.getExtension("OES_standard_derivatives"),this.BA=t.getExtension("EXT_shader_texture_lod"));let o=b.Cy.Fx,a=o.hT(!1),l=o.nT(),u=a,c=o.mT(),f=o.dT(),d=o.lT(),p=o.hT(!0),m=!1;this.qR&&(this.u2()<2?this.kA&&(l=o.oT(),c=o.gT(),d=o.uT(),m=!0):(u=o.rT(),l=o.aT(),c=o.yT(),f=o.pT(),d=o.cT(),p=o.rT(!0)));const g=o.fT(this.u2(),m,this.LA&&this.BA),y=2<=this.u2()?o.rT():a,S=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.ST(),a,"<fill>"],[o.wT(),a,"<lineargradient>"],[o.bT(),a,"<penumbra>"],[o.vT(),a,"<hardellipse>"],[o.xT(),a,"<hardellipseoutline>"],[o.GT(),a,"<smoothellipse>"],[o.TT(),a,"<smoothellipseoutline>"],[o.MT(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(S.map(t=>this.HA({src:t[0],Ox:t[1],name:t[2]})));this.tS=w[0],this.fA=w[1],this.sS=w[2],this.hS=w[3],this.rS=w[4],this.nS=w[5],this.oS=w[6],this.aS=w[7],this.lS=w[8],this.uS=w[9],this.cS=w[10],this.iS=w[11],this.eS=w[12],this.iw()}async HA(t){const s=await b.Cy.Fx.Bx(this,t);return this.$S(s),s}zA(){this.cA=null}CC(t,s,i){if(this.pg!==t||this.mg!==s||i){this.Cb();const e=this.Nx,h=this.jT;this.pg=t,this.mg=s,this.JA(0,0,t,s),this.zS(this.JR,t/s),this.qA(this.JR),this.fA&&(e.useProgram(this.fA.BG()),this.fA.PG(this.qy),this.cA=this.fA,this.jT.kG=this.fA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.wA=null,this.G_=null,this.qR&&this.QR&&this.XA(this.pg,this.mg),this.gA&&this.gA.hx(this.pg,this.mg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.gA=null,h.lx=null,h.ux=null}}XA(t,s){const i=this.Nx;this.ZR&&this.tA===t&&this.sA===s||(this.YR?(this.ZR&&i.deleteTexture(this.ZR),this.ZR=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.ZR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.u2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.OA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.OA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.ZR&&i.deleteRenderbuffer(this.ZR),this.ZR=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.ZR),i.renderbufferStorage(i.RENDERBUFFER,2<=this.oR?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.tA=t,this.sA=s)}YA(t,s){this.qR&&(this.QR=!1,this.XA(t,s))}$A(){this.qR&&(this.QR=!0,this.XA(this.pg,this.mg))}JA(t,s,i,e){const h=this.HR;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.KA();r.r_(t,s,i,e),M.set(h,t,s,i,e),this.mA=0}}WS(t){super.WS(t),this.zS(this.JR,this.pg/this.mg)}kS(t){super.kS(t),this.zS(this.JR,this.pg/this.mg)}BS(t){super.BS(t),this.zS(this.JR,this.pg/this.mg)}qA(t){if(!y.j(this.qy,t)){const s=this.KA();s.o_(t),y.I(this.qy,t),this.mA=0,this.zR=!0}}ZA(){let t,s,i,e=this.gA;i=(null===e?(t=this.JR,s=this.Pm(),this):(t=e.Sx(),s=e.Pm(),e)).jm(),this.qA(t),this.JA(0,0,s,i)}QA(t){if(!y.j(this.Xy,t)){const s=this.KA();s.l_(t),y.I(this.Xy,t),this.mA=0,this.zR=!0}}tP(){this.zR=!1}sP(){return this.zR}ox(){return this.jT}KA(){const t=this.dA;return this.pA===t.length&&t.push(new b.Cy.WT(this.jT)),t[this.pA++]}Cb(){0===this.pA||this.eR()||(this.iP(),this.eP(),this.pA=0,this.oA=0,this.aA=0,this.lA=0,this.mA=0)}iP(){const t=this.Nx;0<this.lA&&(t.bindBuffer(t.ARRAY_BUFFER,this.Hx),t.bufferSubData(t.ARRAY_BUFFER,0,this.nA.subarray(0,this.lA))),0<this.oA&&(t.bindBuffer(t.ARRAY_BUFFER,this.Vx),t.bufferSubData(t.ARRAY_BUFFER,0,this.eA.subarray(0,this.oA)),t.bindBuffer(t.ARRAY_BUFFER,this.Ux),t.bufferSubData(t.ARRAY_BUFFER,0,this.rA.subarray(0,this.aA)))}eP(){const i=this.dA;for(let t=0,s=this.pA;t<s;++t)i[t].hI()}hP(){return this.SA.wa()}rP(t,s,i,e){const h=this.SA;if(!h._a(t,s,i,e)){h.ta(t,s,i,e);const r=this.KA();r.QT(h),this.mA=0,this.dS=null}}nP(t){const s=this.SA;if(s.wa()!==t){s.ua(t);const i=this.KA();i.QT(s),this.mA=0,this.dS=null}}PM(t){const s=this.SA;if(!s.equals(t)){s.set(t);const i=this.KA();i.QT(s),this.mA=0,this.dS=null}}oP(){this.rP(1,1,1,1)}aP(){return this.SA}lP(t){if(t!==this.wA){const s=this.KA();s.KT(t),this.wA=t,this.mA=0}}m2(){this.wA=null}AM(t){const s=this.Fw(t);this.uP(s[0],s[1])}cP(t){const s=this.kw(t);this.uP(s.Pw,s.Ew)}uP(t,s){if(t!==this.bA||s!==this.MA){const i=this.KA();i.e_(t,s),this.bA=t,this.MA=s,this.mA=0,this.dS=null}}fP(){return this.bA===this.Nx.ONE&&this.MA===this.Nx.ONE_MINUS_SRC_ALPHA}dP(){this.uP(this.Nx.ONE,this.Nx.ONE_MINUS_SRC_ALPHA)}pP(){this.uP(this.Nx.SRC_ALPHA,this.Nx.ONE_MINUS_SRC_ALPHA)}mP(){this.uP(this.Nx.ONE,this.Nx.ZERO)}Rect(t){this.gP(t.Pl(),t.El(),t.Fl(),t.Dl())}gP(t,s,i,e){this.Tb(t,s,i,s,i,e,t,e)}yP(){let t=this.oA;if(t>=this.uA&&(this.Cb(),t=0),1===this.mA)this.dA[this.pA-1].UT+=6;else{const s=this.KA();s.YT(t,6),this.mA=1}}SP(t){t.Iu(this.eA,this.oA,this.gS+this.yS),this.oA+=12}ou(t){this.yP(),this.SP(t),c.Ma(this.rA,this.aA),this.aA+=8}Tb(t,s,i,e,h,r,n,o){this.yP();let a=this.eA,l=this.oA,u=this.gS+this.yS;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=r,a[l++]=u,a[l++]=n,a[l++]=o,a[l++]=u,this.oA=l,c.Ma(this.rA,this.aA),this.aA+=8}Kw(t,s){this.yP(),this.SP(t),s.Ll(this.rA,this.aA),this.aA+=8}wP(t,s){this.yP(),this.SP(t),s.Ma(this.rA,this.aA),this.aA+=8}bP(t,s,i,e,h,r,n,o,a,l,u,c,f){this.yP();let d=this.eA,p=this.oA,m=this.gS+this.yS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.oA=p,f.Ll(this.rA,this.aA),this.aA+=8}Jw(t,s,i,e,h,r,n,o,a,l,u,c,f){this.yP();let d=this.eA,p=this.oA,m=this.gS+this.yS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.oA=p,f.Ma(this.rA,this.aA),this.aA+=8}MP(e,h,r){const n=this.eA,o=this.rA;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.yP();let t=this.oA,s=this.aA;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.oA=t,this.aA=s}}vP(t,s){this.Ww(0),y.I(S,this.qy),y.I(w,this.Xy),this.ZA();const[i,e]=this.xP(this.gA),h=this.YS(0,0,this.ES(e),0,0,0,e);if(this.QA(h),"crop"===t&&this.gA&&s){const r=this.pg/2,n=this.mg/2,o=s.Pm(),a=s.jm(),l=this.gA.Pm(),u=this.gA.jm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,n-p,-r+c,n-f-p),v.Cu(x),x.set(0,d,c,f+d),x.Ct(o,a),this.Kw(v,x)}else{const m=i/2,g=e/2;this.gP(-m,g,m,-g)}this.qA(S),this.QA(w)}GP(t){if(!this.vA.equals(t)){this.vA.I(t);const s=this.KA();s.g_(t),this.mA=0}}TP(){}_P(t,s,i,e){7996<=this.lA&&this.Cb();let h=this.lA,r=this.gS+this.yS;if(2===this.mA&&this.yA===r)this.dA[this.pA-1].UT++;else{const o=this.KA();o.S_(h,r),this.mA=2,this.yA=r}const n=this.nA;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.lA=h}ew(t){if(this.cA!==t){const s=this.KA();s.b_(t),this.cA=t,this.mA=0,this.dS=null}}IP(){return this.cA}CP(){this.ew(this.fA)}RP(t){const s=this.KA();s.s_(t),this.mA=0}AP(t,s,i=1){const e=this.KA();e.L_(t,s,i),this.mA=0}PP(t,s,i,e,h,r,n){if(this.cA!==this.iS)throw new Error("must set tilemap fill mode first");const o=this.KA();o.N_(t,s,i,e,h,r,n),this.mA=0}EP(t,s,i,e,h,r,n){if(this.cA!==this.eS)throw new Error("must set tile randomization mode first");const o=this.KA();o.j_(t,s,i,e,h,r,n),this.mA=0}FP(t,s,i,e,h,r,n,o,a,l,u){const c=this.cA;if(u%=10800,c.bG&&!c.JG(s,i,e,h,r,n,o,a,l,u)){const f=this.KA(),d=(f.v_(),c.YG(s,i,e,h,r,n,o,a,l,u),f.zT),p=(d[0]=r,d[1]=n,s.Ma(d,2),d[6]=a,d[7]=l,i.Ma(d,12),f.JT),m=(h.Ma(p,0),p[1]);p[1]=p[3],p[3]=m,e.Ma(f.qT,0),f.VT=u,f.UT=o,c.eG.MG()?f.HT=t?t.yx():null:f.HT=null,this.mA=0}}DP(t){const s=this.cA;if(0!==t.length&&!s.VG(t)){const i=this.KA();i.T_(),s.HG(t),b.Xn(i.XT,t),this.mA=0}}OP(t,s,i,e){const h=this.KA();h.p_(t,s,i,e),this.mA=0}lc(t){const s=this.KA();s.d_(t),this.mA=0}kP(){}Ib(){super.Ib(),this.Nx.flush()}LP(){if(this.qR&&this.gA&&this.gA.xx()){const t=this.KA();t.U_(this.$R),this.mA=0}}BP(t){if(this.$R!==(t=!!t)&&this.qR){this.$R=t;const s=this.KA();s.z_(t),this.mA=0}}NP(){return this.$R}tx(){return this.ZR}ix(){return this.YR}WP(t){if(t=!!t,this.YR&&this.KR!==t){if(t&&this.NP())throw new Error("depth still enabled");this.KR=t;const s=this.KA();s.q_(t),this.mA=0}}jP(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.xA.Al(t,s,i,e)){this.xA.xl(t,s,i,e);const r=h||this.xP(this.VP())[1],n=(s=r-s-e,this.KA());n.iI(!0,t,s,i,e),this.mA=0}}UP(){if(-1!==this.xA.Fl()){this.xA.set(0,0,-1,-1);const t=this.KA();t.iI(!1,0,0,0,0),this.mA=0}}HP(){for(const t of this.jA)t.ER(this.GS)}eR(){return!this.Nx||this.Nx.isContextLost()||this.EA}EM(){super.PS(),b.Cy.$v.EM(),b.Cy.L2.EM(),b.Cy.jb.EM();for(const t of this.jA)t.lc();this.PA=[],this.aR=null,this.FA=null,this.DA=null,this.OA=null,this.kA=null,this.LA=null,this.BA=null,this.NA=0,this.RA="(unavailable)",this.AA="(unavailable)",this.cA=null,this.fA=null,this.ZR=null;for(const s of this.fS.values())s.EM()}async FM(){this.EA=!0,await this.AS(),this.EA=!1;for(const t of this.fS.values())t.FM(this);this.CC(this.pg,this.mg,!0)}zP(t,s){if(this.eR())throw new Error("context lost");this.Cb();const i=b.Sr(b.Cy.$v,this);return i.o2(t,s),i}async JP(e,h){if(this.eR())throw new Error("context lost");if(h=Object.assign({},h),b.Hi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.Vv&&"clamp-to-edge"!==h.Vv||h.Uv&&"clamp-to-edge"!==h.Uv,i=b.Hr(t.width)&&b.Hr(t.height);return this.c2()||i||!s?h.premultiplyAlpha=!1:b.Hi.$i?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.zr(t.width),resizeHeight:b.zr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Xf(()=>this.zP(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.ko(e);e=t}return b.Xf(()=>this.zP(e,h))}Q2(t,s,i){this.Cb();const e=b.Sr(b.Cy.$v,this);return e.g2(t,s,i),e}hR(t,s,i){this.Cb(),s.v2(t,i)}nx(t){t&&(t.C2(),0<t.R2()||(this.Cb(),t===this.wA&&(this.Nx.bindTexture(this.Nx.TEXTURE_2D,null),this.wA=null),t===this.G_&&(this.Nx.activeTexture(this.Nx.TEXTURE1),this.Nx.bindTexture(this.Nx.TEXTURE_2D,null),this.Nx.activeTexture(this.Nx.TEXTURE0),this.G_=null),t.G2()))}qP(t){let s=this.pg,i=this.mg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Cb();const h=b.Sr(b.Cy.L2,this);return h.K2(s,i,Object.assign({D2:e},t)),this.gA=null,this.jT.lx=null,this.jT.ux=null,h}XP(t,s=!0){if(t!==this.gA){t&&t.Gx()&&t.hx(this.pg,this.mg);const i=this.KA();i.c_(t),this.gA=t,this.mA=0,s&&this.ZA()}}VP(){return this.gA}xP(t){return t?[t.Pm(),t.jm()]:[this.pg,this.mg]}YP(t,s="stretch"){if(this.oR<2||this.gA&&0<this.gA.Tx())this.mP(),this.oP(),this.$P(t,s);else{const i=this.KA();i.R_(t,this.gA,s),this.mA=0}}$P(t,s="stretch"){const i=t.yx();if(!i)throw new Error("not a texture-backed render target");this.lP(i),this.vP(s,i)}KP(t){if(!(this.oR<2)){const s=this.KA();s.I_(t.mx()),this.mA=0}}ZP(t){this.XP(null),this.Cb();const s=t.yx();s===this.wA&&(this.Nx.bindTexture(this.Nx.TEXTURE_2D,null),this.wA=null),s===this.G_&&(this.Nx.activeTexture(this.Nx.TEXTURE1),this.Nx.bindTexture(this.Nx.TEXTURE_2D,null),this.Nx.activeTexture(this.Nx.TEXTURE0),this.G_=null),t.G2()}async Ax(t,s,i){this.Cb();let e=this.gA,h,r,n,o=(n=t?(h=t.Pm(),r=t.jm(),t.mx()):(h=this.Pm(),r=this.jm(),null),0),a=0,l=h,u=r;if(i){o=b.Tr(Math.floor(i.Pl()),0,h-1),a=b.Tr(Math.floor(i.El()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.Tr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.Tr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.Nx,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.gA=null,this.jT.lx=null,this.jT.ux=null,this.XP(e)}),d;if(!s&&2<=this.u2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Lx(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}QP(){this.BP(!0);const t=this.KA();t.Y_(),this.mA=0,this.GA=1}tE(){this.BP(!1);const t=this.KA();t.Z_(),this.mA=0,this.GA=2}sE(){return 2===this.GA}iE(){this.BP(!0);const t=this.KA();t.tI(),this.mA=0,this.GA=0}eE(t){if(this.hE()){const s=this.KA();s.P_(t),this.mA=0}}rE(t){if(this.hE()){const s=this.KA();s.D_(t),this.mA=0}}Lx(s){const t=new Promise(t=>e.add({resolve:t,OR:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}kb(){return this.pg*this.mg*(this.VR.alpha?4:3)}Lb(){let t=0;for(const s of b.Cy.L2.Px())s.yx()||(t+=s.P2());return t}Bb(){let t=0;for(const s of b.Cy.$v.E2())t+=s.P2();return t}nE(){return this.UR}u2(){return this.oR}oE(){return"webgl"+this.u2()}c2(){return 2<=this.u2()}a2(){return this.TA}aE(){return this._A}lE(){return this.IA}uE(){return 0!==this.CA}cE(){return this.CA}fE(){return this.RA}dE(){return this.AA}pE(){if(2<=this.u2())return"webgl2";{const t=[];return this.kA&&t.push("EXT_frag_depth"),this.LA&&t.push("OES_standard_derivatives"),this.BA&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}mE(){return this.PA}hE(){return!!this.aR}lR(){return this.aR}kx(){return this.FA}b2(){return this.DA}M2(){return this.NA}RR(t){this.jA.add(t)}AR(t){this.jA.delete(t)}vR(){return this.VA}l2(){return this.Nx}UA(t){this.Aw([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}gE(){return this.Wb()}}}{const zi=self.Ws,Ji={yE:null,SE:null,wE:null,getTime:null,bE:null};zi.Cy.ME=class{constructor(t){t=Object.assign({},Ji,t),this.vE=t.yE,this.xE=t.SE,this.GE=t.wE,this.TE=t.getTime,this._E=t.bE,this.IE=null,this.CE=new Set}RE(t){this.CE.add(t)}AE(t){this.CE.delete(t)}EM(){this.IE=null;for(const t of this.CE)t.EM()}PE(t){return this.vE?this.vE(t):[t.Pm(),t.jm()]}VP(t){return this.xE(t)}EE(t,s){this.GE(t,s)}FE(){return this.TE()}S1(t){this._E(t)}DE(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.IE||this.IE.Pm()===s&&this.IE.jm()===i||(t.nx(this.IE),this.IE=null),null===this.IE&&(this.IE=t.zP(null,{width:s,height:i,Hv:"nearest",qv:!1})),this.IE}}}{const o=self.Ws,qi=self.xs,xh=qi.Is,Xi=o.Sr(o.Rect),Yi=o.Sr(o.Rect),$i=o.Sr(o.Rect),Ki=o.Sr(o.Rect),Zi=xh.create(),Qi=xh.create(),te={OE:null,kE:null,LE:null,BE:!1},se={NE:null,WE:!1,jE:!1,VE:!1,UE:!1,HE:!1,zE:!1};o.Cy.JE=class{constructor(t,s){s=Object.assign({},te,s),this.C1=t,this.qE=s.OE,this.XE=s.kE,this.YE=s.LE,this.$E=null,this.KE=[],this.ZE=[],this.QE=[],this.t3=!1,this._M=0,this.s3=!1,this.i3=!1,this.e3=!1,this.h3=!1,this.r3=!1,this.n3=!1,this.zR=!1,this.o3=!1,this.a3=!1,this.l3=!1,this.u3=!1,this.f3=!1,this.d3=0,this.m3=[null,null,null],this.g3=!!s.BE,this.y3=0,this.S3=0,this.w3=0,this.b3=0,this.M3=null,this.v3=null,this.x3=o.Sr(o.Rect),this.G3=o.Sr(o.Rect),this.T3=o.Sr(o.Rect),this._3=o.Sr(o.Rect),this.I3=o.Sr(o.Rect),this.C3=1,this.R3=1,this.A3=0,this.P3=0,this.E3=null,this.F3=null,this.D3=0,this.O3=0,this.L3=!1,this.J2=xh.create(),this.B3=xh.create(),this.C1.RE(this)}wr(){this.C1.AE(this),o.Hn(this.QE),o.Hn(this.KE),o.Hn(this.ZE),this.M3=null,this.v3=null,this.qE=null,this.XE=null,this.YE=null}EM(){this.t3=!0,o.Hn(this.QE),o.Hn(this.KE),o.Hn(this.ZE)}N3(){return this.t3}W3(h,t){if(t=Object.assign({},se,t),o.Hn(this.QE),this.y3=0,this.S3=0,this.s3=!1,this.i3=!1,this.e3=!1,this.h3=!1,this.r3=!1,this.n3=!1,this.d3=0,this.f3=!!t.UE,this.u3=!!t.zE,this.t3=!1,o.Xn(this.KE,h),0!==h.length){if(t.NE){if(t.NE.length!==h.length)throw new Error("incorrect indexMap length");o.Xn(this.ZE,t.NE)}else{o.Hn(this.ZE);for(let t=0,s=h.length;t<s;++t)this.ZE.push(t)}for(const s of h)this.y3+=s.fM(),this.S3+=s.dM(),s.SM()&&(this.s3=!0),s.bM()&&(this.i3=!0),s.wM()&&(this.e3=!0),s.pM()&&(this.h3=!0),s.xM()&&(this.r3=!0);this.n3=this.j3(h[0].uM());const r=this.V3(h[0],t),n=this.U3(h.at(-1),t);if(1!==h.length||r||n){this.l3=!1;let e=0;r&&(this.d3=1,this.QE.push(o.Sr(o.Cy.JE.Step.H3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.d3=Math.max(this.d3,t),this.QE.push(o.Sr(o.Cy.JE.Step.z3,this,e,t,s)),e=t}else this.d3=1,this.QE.push(o.Sr(o.Cy.JE.Step.J3,this,-1,1,s)),e=1;n&&this.QE.push(o.Sr(o.Cy.JE.Step.q3,this,e,0))}else this.l3=!0}}V3(t,s){return!!(s.WE||t.mM()||s.VE&&!t.yM()||t.bM()&&!this.u3||0!==this.y3||0!==this.S3)||(t.uM().Ob()?t.wM()&&(s.HE||s.UE)||t.MM()&&s.UE:t.wM()&&!this.n3&&s.HE)}U3(t,s){return!!s.jE||(t.uM().Ob()?t.wM()||t.pM():(t.wM()||t.pM())&&this.X3())}j3(t){return t.JS()&&this.e3&&!this.h3}Y3(t,s,i){t.JS()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.E3=s,this.M3=i.K3||null,this.v3=i.contextObject||null,this._M=i.Z3||0,this.C3=i.devicePixelRatio||1,this.R3=i.Q3||1,this.A3=i.tF||0,this.P3="number"==typeof i.time?i.time:this.C1.FE(),this.zR=!1,t.tP(),this.s3&&this.sF();let e=!1;if(this.iF()&&(this.eF(t,i),e=!0,this.F3=this.C1.DE(t,this.w3,this.b3),Xi.I(this.G3),Xi.Ql(),t.JS()&&t._MaybeDoPendingClearRenderPass(this.E3),t.CopyTextureToTexture(this.E3.yx(),this.F3,Xi.Pl(),Xi.El(),Xi.width(),Xi.height())),this.l3)this.hF(t,i);else if(e||this.eF(t,i),0!==this.T3.width()||0!==this.T3.height()){t.dP(),t.oP(),t.Bw(0),t.Ww(0),this.$E=i.rF||null,this.D3=i.nF||0,this.O3=i.oF||0,this.L3=!!i.aF,this.lF(t),this.m3[0]=s,this.m3[1]=1<=this.d3?this.uF():null,this.m3[2]=2===this.d3?this.uF():null;for(const h of this.QE){const r=this.cF(h.fF()),n=this.cF(h.dF());t.JS()?h.pF(t,r,n):h.mF(t,r,n)}t.lP(null),this.m3[1]&&this.gF(this.m3[1]),this.m3[2]&&this.gF(this.m3[2]),this.m3.fill(null),this.yF(t),this.E3=null,this.F3=null,this.M3=null,this.v3=null,this.$E=null}}eF(t,s){const[i,e]=this.C1.PE(t);this.SF(t,i,e),this.wF(s)}SF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.w3===s&&this.b3===i||this.bF(t,s,i,0,0,this.J2,this.B3),this.w3=s,this.b3=i}bF(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,l=(t.zS(r,s/i),t.YS(o,a,t.ES(i),o,a,0,i));xh.I(n,l)}wF(t){this.x3.I(t.MF),t.vF?this.G3.I(t.vF):this.G3.set(0,0,this.w3,this.b3),this.T3.I(this.G3),this.T3.Ct(this.w3,this.b3);const s=this.R3*this.C3;this.G3.Hl(this.y3*s,this.S3*s),this.I3.I(this.G3),this.I3.Ct(this.w3,this.b3),this.G3.tu(0,0,this.w3,this.b3),this._3.I(this.G3),this._3.Ct(this.w3,this.b3)}lF(t){if(this.o3=t.NP(),this.a3=t.sE(),this.u3)t.BP(!1),this.i3&&t.WP(!0);else{if(Xi.I(this.G3),t.Ob()){const s=this.R3*this.C3;Xi.Hl(Math.max(this.y3,1)*s,Math.max(this.S3,1)*s),Xi.Ql(),Xi.Tr(0,0,this.w3,this.b3)}else Xi.Ql();t.jP(Xi.Pl(),Xi.El(),Xi.width(),Xi.height(),this.b3)}}xF(t){t.oP(),this.u3||(this.a3&&t.iE(),t.BP(!1),this.i3&&t.WP(!0)),t.JS()&&t.SetNormalizedCoordsProgramVariant(!0)}yF(t){t.WP(!1),this.a3&&t.tE(),t.BP(this.o3),this.u3||t.UP(),t.JS()&&t.SetNormalizedCoordsProgramVariant(!1),this.zR=t.sP()}GF(){this.I3.Tr(0,0,1,1)}cF(t){return t<0?null:this.m3[t]}uF(){return this.C1.VP(this)}TF(){return this.E3}gF(t){this.C1.EE(t,this)}_F(t){return this.KE[t]}IF(t){this.$E?this.$E(this,t,()=>this.qE(t,this)):this.qE(t,this),this.l3||this.xF(t)}CF(t){if(this.u3)return!0;if(0!==this.D3||0!==this.O3)return!1;const[s,i]=t.xP(t.VP());return s===this.w3&&i===this.b3}RF(t,s){let i=this.J2,e=this.B3;if(s&&!this.CF(t)){i=Zi,e=Qi;const[h,r]=t.xP(t.VP());this.bF(t,h,r,this.D3,this.O3,i,e),this.u3||t.UP()}t.qA(i),t.QA(e)}sF(){this.C1.S1(this)}AF(t,s){return this.YE(this.ZE[t],s)}PF(t,s){let i=this.I3,e=this._3,h=this.T3;t.Ob()&&(Yi.I(i),Yi.ql(1),i=Yi,$i.I(e),$i.ql(1),e=$i,Ki.I(h),Ki.ql(1),h=Ki),this.EF(t,s,e,h,i,1/this.w3,1/this.b3)}FF(t,s){let e=this._3,h=this.T3,r=1/this.w3,n=1/this.b3;if(this.XE){let{DF:t,OF:s,kF:i}=this.XE(this.M3);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.w3,i=i||this.b3,e=t,h=t,r=1/s,n=1/i}else t.Ob()&&($i.I(e),$i.ql(1),e=$i,Ki.I(h),Ki.ql(1),h=Ki);let i=this.I3;t.Ob()&&((i=Yi).I(this.I3),i.ql(1)),this.EF(t,s,e,h,i,r,n),t.JS()&&this.r3&&t.SetProgramParameter_IsSrcTexRotated(this.f3)}LF(t){return this.e3?t.JS()?this.iF()?this.F3:this.E3.yx():this.E3:null}EF(t,s,i,e,h,r,n){t.FP(this.LF(t),h,i,e,this.x3,r,n,this.C3,this.R3,this.A3,this.P3),t.DP(this.AF(s,t))}hF(t,s){const i=this.KE[0],e=t.NP(),h=i.bM();h&&(t.BP(!1),t.WP(!0),this.I3.set(0,0,1,1),this.T3.set(0,0,1,1)),t.ew(i),t.AM(this._M),t.XP(this.E3);let r=0,n=1;if(this.T3.set(0,0,1,1),i.MM()&&this.XE){const{DF:o,OF:a,kF:l}=this.XE(this.M3);o&&this.T3.I(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(l)?1/l:0}else{const[u,c]=this.C1.PE(t);r=1/u,n=1/c}s.MF?this.x3.I(s.MF):this.x3.set(0,0,0,0),t.FP(this.LF(t),this.I3,this.T3,this.T3,this.x3,r,n,this.C3,this.R3,this.A3,this.P3),t.DP(this.AF(0,t)),t.JS()&&this.r3&&t.SetProgramParameter_IsSrcTexRotated(this.f3),t.Bw(0),this.IF(t),h&&(t.WP(!1),t.BP(e))}iF(){return this.n3}X3(){return!this.n3}BF(){return this.e3}NF(){return!!this.l3&&!this.iF()}WF(){return this.u3}jF(){return this.M3}VF(){return this.v3}UF(){return this._M}HF(){return this.L3}sP(){return this.zR}zF(){return this.G3}JF(){return this._3}qF(){return this.g3}async XF(t,s,i){}}}{const ie=self.Ws;ie.Cy.JE.Step=class{constructor(t,s,i,e=-1){this.YF=t,this.$F=s,this.KF=i,this.by=e}ZF(){return this.YF}fF(){return this.$F}dF(){return this.KF}QF(){return this.by}BG(){return this.ZF()._F(this.QF())}mF(t,s,i){}pF(t,s,i){}}}{const ee=self.Ws;ee.Cy.JE.Step.H3=class extends ee.Cy.JE.Step{constructor(t,s,i,e){super(t,s,i,e)}mF(t,s,i){const e=this.ZF();t.dP(),t.iw(),t.XP(i,e.HF()),t.OP(0,0,0,0),e.IF(t),e.GF()}pF(t,s,i){const e=this.ZF();t.dP(),t.iw(),t.XP(i,!1),t.OP(0,0,0,0),e.IF(t),e.GF()}}}{const he=self.Ws,re=he.Sr(he.Rect),ne=he.Sr(he.ou);he.Cy.JE.Step.q3=class extends he.Cy.JE.Step{constructor(t,s,i,e){super(t,s,i,e)}mF(t,s,i){const e=this.ZF();t.iw(),t.XP(i),e.RF(t,!0),t.AM(e.UF()),t.lP(s.yx()),ne.Cu(e.zF()),re.I(e.JF()),re.ql(1),t.Kw(ne,re),e.qF()&&t.KP(s)}pF(t,s,i){const e=this.ZF();t.iw(),t.XP(i,!1),e.CF(t)?ne.Cu(e.JF()):(t.SetNormalizedCoordsProgramVariant(!1),e.RF(t,!0),ne.Cu(e.zF())),t.SetBackTexture(null),t.AM(e.UF()),t.lP(s.yx()),e.WF()?t.vP():t.Kw(ne,e.JF())}}}{const oe=self.Ws;oe.Cy.JE.Step.J3=class extends oe.Cy.JE.Step{constructor(t,s,i,e){super(t,s,i,e)}mF(t,s,i){const e=this.ZF();t.XP(i,e.HF()),t.OP(0,0,0,0),t.mP(),t.ew(this.BG()),e.FF(t,this.QF()),e.IF(t),e.GF()}pF(t,s,i){const e=this.ZF();t.XP(i,!1),t.OP(0,0,0,0),t.mP(),t.ew(this.BG()),e.FF(t,this.QF()),e.IF(t),e.GF()}}}{const ae=self.Ws,le=ae.Sr(ae.Rect),ue=ae.Sr(ae.ou);ae.Cy.JE.Step.z3=class extends ae.Cy.JE.Step{constructor(t,s,i,e){super(t,s,i,e)}mF(t,s,i){const e=this.ZF(),h=(t.XP(i),0===this.dF());h?t.AM(e.UF()):(t.OP(0,0,0,0),t.mP()),t.ew(this.BG()),e.PF(t,this.QF()),t.lP(s.yx()),e.RF(t,h),ue.Cu(e.zF()),le.I(e.JF()),le.ql(1),t.Kw(ue,le),e.qF()&&t.KP(s)}pF(t,s,i){const e=this.ZF(),h=(t.XP(i,!1),0===this.dF());h?(t.AM(e.UF()),t.SetBackTexture(null),e.CF(t)?ue.Cu(e.JF()):(t.SetNormalizedCoordsProgramVariant(!1),e.RF(t,!0),ue.Cu(e.zF()))):(t.OP(0,0,0,0),t.mP(),ue.Cu(e.JF())),t.ew(this.BG()),e.PF(t,this.QF()),t.lP(s.yx()),e.WF()?t.vP():t.Kw(ue,e.JF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(u,self.Ws),f=self.Ks,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.tD=class{constructor(t){d=t,Object.defineProperties(this,{sD:{value:d.eD().iD(),writable:!1},hD:{value:d.nD().rD(),writable:!1},oD:{value:{},writable:!1},aD:{value:{},writable:!1},lD:{value:d.uD(),writable:!1},cD:{value:d.fD(),writable:!1},storage:{value:new self.dD(d),writable:!1},isInWorker:{value:d.pD(),writable:!1},mD:{value:d.gD(),writable:!1},yD:{value:d.SD(),writable:!1},Hv:{value:d.wD(),writable:!1},bD:{value:d.MD(),writable:!1},vD:{value:new self.xD(t),writable:!1},GD:{value:new self.TD(t),writable:!1}}),d._D().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d._D().addEventListener("keyup",t=>s.delete(t.key)),d.Qf().addEventListener("window-blur",()=>s.clear()),d.pD()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}ID(t){Object.defineProperties(this.oD,t)}CD(t){Object.defineProperties(this.aD,t)}addEventListener(t,s){d._D().addEventListener(t,s)}removeEventListener(t,s){d._D().removeEventListener(t,s)}RD(t,...s){f.Re(t);const i=d.AD(),e=i.PD(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.nc())return e.ED();if(s.length<e.FD())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.FD()} expected)`);let h=e.DD(),r=h.OD(),n=i.kD();if(n){r=r.slice(0);const a=new Set(r);for(const l of n.OD())a.has(l)||(r.push(l),a.add(l));for(const u of i.LD())a.has(u)||(r.push(u),a.add(u))}const o=h.BD(r,e.ND(),e.WD(),e.ED(),...s);return o}jD(t){const s=d.UD().VD();if(!s)throw new Error("not in a function which returns a value");switch(s.HD()){case 1:"number"==typeof t&&s.zD(t);break;case 2:"string"==typeof t&&s.zD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.zD(t)}}signal(t){f.Re(t),d.AD().JD(t)}qD(t){return f.Re(t),d.AD().XD(t)}YD(){return[d.gD(),d.SD()]}get isSuspended(){return d.$D()}get KD(){return d.ZD()}get QD(){return d.tO()}get gameTime(){return d.sO()}get iO(){return d.eO()}get timeScale(){return d.hO()}set timeScale(t){f.Te(t),d.rO(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.nO()}get framesPerSecond(){return d.nO()}get oO(){return d.aO()}get lO(){return d.uO()}get cO(){return d.fO()}get dO(){return d.pO()}set dO(t){if(!e.has(t))throw new Error("invalid framerate mode");d.mO(t)}get gO(){return d.yO()}set gO(t){f.Te(t),d.SO(t)}get wO(){return d.bO()}set wO(t){d.MO(t)}random(){return d.vO()}get layout(){const t=d.xO();if(t)return t.GO();throw new Error("no layout is running - make sure a layout is loaded before accessing")}TO(t){let s=d._O(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.IO(t))return i.GO();throw new Error("invalid layout")}CO(){return d._O().RO().map(t=>t.GO())}AO(t){let s=d._O(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.IO(t)))throw new Error("invalid layout");s.PO()||s.EO(i)}get keyboard(){const t=d.FO().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get DO(){const t=d.FO().DO;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get OO(){const t=d.FO().OO;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get kO(){const t=d.FO().kO;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}LO(t,s){f.Re(t),f.Re(s),d.BO(t,s)}NO(t){f.Te(t);const s=d.WO(t);return s?s.jO():null}VO(t,e){f.Ze(e);const h=d.UO();for(const s of t){const i=d.HO(s),r=i.zO();p.push([r.JO().QF(),r.qO()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.jO(),s.jO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.XO(p[t][0]),a=p[t][1],l=o.YO();l[a]!==n&&((l[a]=n).zO().$O(o,!0),o.KO(n),i=!0)}i&&d.ZO(),c.Hn(p),c.Hn(m)}}async QO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.sk("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.sk("runtime","alert",{message:t+(d.pD()?" [via Web Worker]":"")})}ik(t){return f.Te(t),d.ek(t)}hk(t){d.rk(t)}}}{let s=self.Ws,n=null;self.nk=class{constructor(t){n=t,Object.defineProperties(this,{ak:{value:n.lk("audio/webm; codecs=opus"),writable:!1}})}uk(t){const s=self.fk.ck(t);if(!s)throw new Error("invalid IImageInfo");s.dk(n.pk())}mk(t){return n.Co(t)}gk(t){return n.Ro(t)}yk(t){return n.Ao(t)}Sk(t){return n.Po(t)}wk(t){return n.bk(t)}Mk(t){return"flat"===n.vk()&&s.To(t)&&(t=t.toLowerCase()),n.xk(t)}get Gk(){return n.Tk()}async _k(t,s){if(this.ak)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await n.pk().Ik(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),r=h.getChannelData(0);return r.set(e),h}Ck(...t){return n.Rk(...t)}Ak(t){return n.Pk(t)}Ek(t){return n.Fk(t)}}}{let n=self.Ws,i=self.Ks,o=null;self.Dk=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.pk(),writable:!1}})}Ok(t,s){const i=o.pk(),e=i.HO(t),h=i.HO(s);return o.kk(e,h)}Lk(t,s){const i=o.pk(),e=i.HO(t);for(const h of s){const r=i.HO(h);if(o.kk(e,r))return h}return null}Bk(t){const s=o.pk().HO(t),i=o.Nk(s);return i?i.jO():null}Wk(t,s){if(i.Te(t),i.Te(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.jk(t,s)}Vk(){return o.Uk()}Hk(t,s){let i=o.pk(),e;e=Array.isArray(t)?t.map(t=>i.zk(t)):[i.zk(t)];const h=n.Rect.Rl(s),r=[];return o.Jk(null,e,h,r),r.map(t=>t.jO())}}}{let s=self.Ws,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.xD=class{constructor(t){i=t,Object.defineProperties(this,{qk:{value:s.di.xi,writable:!1},Xk:{value:e.get(s.di.mi)||"unknown",writable:!1},Yk:{value:s.di.gi,writable:!1},$k:{value:h.get(s.di.yi)||"unknown",writable:!1},Kk:{value:s.di.Si,writable:!1},Zk:{value:r.get(s.di.bi)||"unknown",writable:!1}})}get exportType(){let t=i.Qk();return i.tL()?t="nwjs":i.sL()?t="windows-webview2":"cordova"===t?t="Android"===s.di.mi?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.eL().iL()}get hL(){return i.eL().rL()}get nL(){return i.eL().oL()}get aL(){return i.eL().lL()}get uL(){return i.eL().cL()}get fL(){return i.eL().dL()}get devicePixelRatio(){return i.pL()}}}{const ce=self.Ks;self.dD=class{constructor(t){this.mL=t.gL()}getItem(t){return ce.Re(t),this.mL.getItem(t)}setItem(t,s){return ce.Re(t),this.mL.setItem(t,s)}removeItem(t){return ce.Re(t),this.mL.removeItem(t)}clear(){return this.mL.clear()}keys(){return this.mL.keys()}}}{const fe=self.Ws,de=fe.Vs();self.yL=class{#SL;constructor(){const t=fe.bL.wL(de);this.#SL=t,Object.defineProperties(this,{runtime:{value:t.pk().ML(),writable:!1},vL:{value:t.xL(),writable:!1},GL:{value:t.TL(),writable:!1},_L:{value:t.IL(),writable:!1},CL:{value:t.RL(),writable:!1},AL:{value:t.PL(),writable:!1},EL:{value:t.FL(),writable:!1},DL:{value:t.OL(),writable:!1},kL:{value:t.LL(),writable:!1}})}static BL(t){if(!t)return null;const s=fe.bL.NL(t);return s?s.WL():null}jL(){return this.#SL.UL().VL()}HL(){return this.#SL.zL().jO()}}}{const pe=self.Ws,me=self.Ks,ge=pe.Vs();self.JL=class{#SL;constructor(){const t=pe.bL.wL(ge);this.#SL=t,Object.defineProperties(this,{name:{value:t.cf(),writable:!1},runtime:{value:t.pk().ML(),writable:!1},qL:{value:t.XL().WL(),writable:!1}}),t.pk().YL(this,t)}addEventListener(t,s){me.Re(t),me.Ze(s),this.#SL._D().addEventListener(t,s)}removeEventListener(t,s){me.Re(t),me.Ze(s),this.#SL._D().removeEventListener(t,s)}$L(){return[...this.instances()]}KL(){return pe.first(this.instances())}ZL(){return[...this.QL()]}t5(){return pe.first(this.QL())}s5(t){const s=this.#SL,i=s.pk().i5(t),e=s.e5(i);return e?e.jO():null}*instances(){for(const t of this.#SL.h5())yield t.jO()}*QL(){for(const t of this.#SL.n5().r5())yield t.jO()}o5(t){me.Ze(t);const s=this.#SL;if(0<s.a5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.l5(t)}Wi(t,s,i,e,h){if(me.we(s),me.we(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#SL,n=r.pk(),o=n.xO().JO(t);if(!o)throw new Error("invalid layer");const a=n.u5(r,o,s,i,e,h),l=(e&&o.c5(a),n.AD());return l.f5(!0),a.d5(),l.f5(!1),l.p5()||n._O().m5()||n.g5(),a.jO()}}}{const ye=self.Ks,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.y5=class{constructor(t){l.set(this,t);const s=[],i=t.S5(),e=i.w5().length;for(let t=0;t<e;++t)s.push(new self.b5(i,t));Object.defineProperties(this,{name:{value:t.cf(),writable:!1},index:{value:t.QF(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Re(t),ye.Ze(s),l.get(this)._D().addEventListener(t,s)}removeEventListener(t,s){ye.Re(t),ye.Ze(s),l.get(this)._D().removeEventListener(t,s)}get width(){return l.get(this).Pm()}set width(t){ye.Te(t),l.get(this).Bm(t)}get height(){return l.get(this).jm()}set height(t){ye.Te(t),l.get(this).Em(t)}M5(t,s){ye.Te(t),ye.Te(s);const i=l.get(this);i.Bm(t),i.Em(s)}getSize(){const t=l.get(this);return[t.Pm(),t.jm()]}set scale(t){ye.Te(t),l.get(this).v5(t)}get scale(){return l.get(this).x5()}set angle(t){ye.Te(t),l.get(this).G5(t)}get angle(){return l.get(this).GetAngle()}set scrollX(t){ye.we(t),l.get(this).T5(t)}get scrollX(){return l.get(this)._5()}set scrollY(t){ye.we(t),l.get(this).I5(t)}get scrollY(){return l.get(this).C5()}scrollTo(t,s){ye.we(t),ye.we(s);const i=l.get(this);i.T5(t),i.I5(s)}R5(){const t=l.get(this);return[t._5(),t.C5()]}A5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.JO(t))?i.P5():null}E5(){return l.get(this).F5().map(t=>t.P5())}*D5(){for(const t of l.get(this).D5())yield t.P5()}O5(t,s,i){const e=l.get(this),h=self.k5,r=(ye.Re(t),ye.ah(s,h),s?e.pk().L5(s):null),n=Se.indexOf(i);if(n<0)throw new Error("invalid location");e.B5(t,r,n)}N5(t,s,i){const e=l.get(this),h=e.pk(),r=self.k5,n=(ye.oh(t,r),h.L5(t));if(!n)throw new Error("invalid layer");ye.ah(s,r);const o=s?h.L5(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e.W5(n,o,a)}j5(t){const s=l.get(this),i=self.k5,e=(ye.oh(t,i),s.pk().L5(t));if(!e)throw new Error("invalid layer");const h=e.pk();s.V5(e),h.AD().p5()||h.g5()}U5(){const t=l.get(this),s=t.pk();t.H5(),s.AD().p5()||s.g5()}z5(t,s){ye.Te(t),ye.Te(s),l.get(this).J5(t,s)}q5(){return l.get(this).X5()}set K(t){ye.Re(t);const s=l.get(this);if("perspective"===t)s.Y5();else{if("orthographic"!==t)throw new Error("invalid projection");s.K5()}}get K(){return l.get(this).Z5()?"orthographic":"perspective"}}}{const we=self.Ws,be=self.Ks,f=new WeakMap,Me=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...Me.entries()].map(t=>[t[1],t[0]])),xe=we.Sr(we.Yo);self.k5=class{constructor(t){f.set(this,t);const s=[],i=t.S5(),e=i.w5().length;for(let t=0;t<e;++t)s.push(new self.b5(i,t));Object.defineProperties(this,{name:{value:t.cf(),writable:!1},layout:{value:t.IO().GO(),writable:!1},effects:{value:s,writable:!1}}),t.pk().YL(this,t)}get Q5(){const t=f.get(this).tB();return t?t.P5():null}*sB(){for(const t of f.get(this).sB())yield t.P5()}*iB(){for(const t of f.get(this).eB())yield t.P5()}*hB(){for(const t of f.get(this).eB())for(const s of t.rB())yield s.P5()}get index(){return f.get(this).QF()}get isVisible(){return f.get(this).nB()}set isVisible(t){f.get(this).oB(t)}get aB(){return f.get(this).lB()}get isInteractive(){return f.get(this).uB()}set isInteractive(t){f.get(this).cB(t)}get fB(){return f.get(this).dB()}set fB(t){f.get(this).pB(!!t)}get mB(){return f.get(this).gB()}get opacity(){return f.get(this).hP()}set opacity(t){t=we.Tr(+t,0,1),isNaN(t)||f.get(this).nP(t)}set scale(t){be.Te(t),f.get(this).yB(t)}get scale(){return f.get(this).SB()}set scaleRate(t){be.Te(t),f.get(this).wB(t)}get scaleRate(){return f.get(this).bB()}set angle(t){be.Te(t),f.get(this).G5(t)}get angle(){return f.get(this).MB()}set parallaxX(t){be.Te(t),f.get(this).vB(t)}get parallaxX(){return f.get(this).xB()}set parallaxY(t){be.Te(t),f.get(this).GB(t)}get parallaxY(){return f.get(this).TB()}set _B(t){be.Te(t),f.get(this).qM(t)}get _B(){return f.get(this).JM()}set IB(t){f.get(this).CB(t)}get IB(){return f.get(this).RB()}set AB(t){f.get(this).PB(t)}get AB(){return f.get(this).EB()}set Z3(t){be.Re(t);const s=Me.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).AM(s)}get Z3(){return ve.get(f.get(this).DB())}set backgroundColor(t){if(be.He(t),t.length<3)throw new Error("expected 3 elements");xe.ea(t[0],t[1],t[2]);const s=f.get(this),i=s.OB();i.Ga(xe)||(i.ca(xe),s.pk().ZO())}get backgroundColor(){const t=f.get(this).OB();return[t.fa(),t.ya(),t.Sa()]}set scrollX(t){be.we(t);const s=f.get(this);s.kB(!0),s.T5(t)}get scrollX(){return f.get(this)._5()}set scrollY(t){be.we(t);const s=f.get(this);s.kB(!0),s.I5(t)}get scrollY(){return f.get(this).C5()}scrollTo(t,s){be.we(t),be.we(s);const i=f.get(this);i.kB(!0),i.T5(t),i.I5(s)}R5(){const t=f.get(this);return[t._5(),t.C5()]}LB(){f.get(this).kB(!1)}getViewport(){return f.get(this).BB().Ol()}NB(t,s,i=0){be.we(t),be.we(s),be.we(i);const e=f.get(this),h=e.pk();return e.WB(t-h.jB(),s-h.VB(),i)}UB(t,s,i=0){be.we(t),be.we(s),be.we(i);const e=f.get(this),h=e.pk(),[r,n]=e.HB(t,s,i);return[r+h.jB(),n+h.VB()]}zB(t,s,i=0){return be.we(t),be.we(s),be.we(i),f.get(this).JB(t,s,i)}qB(t,s,i=0){return be.we(t),be.we(s),be.we(i),f.get(this).XB(t,s,i)}get YB(){return f.get(this).$B()}}}{let e=function(t){let s=_e.get(t);return s||(s=Ge.Sr(Ge.Event.Qf),_e.set(t,s)),s};e;const Ge=self.Ws,Te=self.Ks,_e=new WeakMap,Ie=Ge.Vs();self.KB=class{#SL;constructor(){const t=Ge.bL.wL(Ie),s={runtime:{value:(this.#SL=t).pk().ML(),writable:!1},ZB:{value:t.QB().VL(),writable:!1},qL:{value:t.XL().WL(),writable:!1}};t.t4(s),t.s4(s),Object.defineProperties(this,s),t.pk().YL(this,t)}static i4(){return Ge.bL.e4()}h4(){const t=_e.get(this);t&&(t.wr(),_e.delete(this))}addEventListener(t,s,i){Te.Re(t),Te.Ze(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.Re(t),Te.Ze(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}destroy(){const t=this.#SL,s=t.pk();s.r4(t),s.AD().p5()||s._O().m5()||s.AD().n4()||s.g5()}o4(){const t=this.#SL.a4();return t?t.map(t=>t.jO()):[]}*l4(){const t=this.#SL;if(t.u4())for(const s of t.c4())yield s.jO()}get uid(){return this.#SL.f4()}get d4(){return this.#SL.m4()}set timeScale(t){Te.Te(t),this.#SL.rO(t)}get timeScale(){return this.#SL.g4()}y4(){this.#SL.S4()}get KD(){const t=this.#SL;return t.pk().ZD(t)}w4(...t){Te.He(t);const s=new Set(t),i=this.#SL.b4();return s.isSubsetOf(i)}M4(t){Te.oh(t,Set),this.#SL.v4(t)}x4(){return new Set(this.#SL.b4())}signal(t){Te.Re(t);const s=this.#SL;s.pk().AD().G4(s,t)}qD(t){Te.Re(t);const s=this.#SL;return s.pk().AD().T4(s,t)}}}{const Ce=self.Ws,Re=self.Ks,Ae=Ce.Vs();self._4=class extends self.KB{#SL;#I4=!1;#C4=null;#R4=!1;#A4=null;#P4;#E4;constructor(t){super(),this.#SL=Ce.bL.wL(Ae),this.#I4=!1,this.#C4=null,this.#R4=!1,this.#A4=null,this.#P4=t?.domComponentId,this.#E4=t?.wrapperComponentId}h4(){this.F4(!1),this.D4(!1),super.h4()}O4(){return Ce.bL.L4()}B4(t){const s=this.#SL;s.pk().N4(t,s)}W4(t){const s=this.#SL;return s.pk().j4(t,s)}V4(t,s){if(Re.Re(t),Re.Ze(s),!this.#P4)throw new Error("no DOM component id set");const i=this.#SL.pk();i.U4(this.#P4,t,s)}H4(t){Re.He(t);for(const[s,i]of t)this.V4(s,i)}z4(t,s){if(Re.Re(t),!this.#P4)throw new Error("no DOM component id set");const i=this.#SL.pk();i.xf(this.#P4,t,s)}J4(t,s){if(Re.Re(t),!this.#P4)throw new Error("no DOM component id set");const i=this.#SL.pk();return i.sk(this.#P4,t,s)}q4(t,s){const i=this.#SL.pk();if(!i.pD())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#P4,handler:t,data:s,responseId:null});this.z4(t,s)}F4(t){if(this.#I4!==(t=!!t)){this.#I4=t;const s=this.#SL.pk();t?(this.#C4||(this.#C4=()=>this.X4()),s.Qf().addEventListener("tick",this.#C4)):s.Qf().removeEventListener("tick",this.#C4)}}Y4(){return this.#I4}X4(){}D4(t){if(this.#R4!==(t=!!t)){this.#R4=t;const s=this.#SL.pk();t?(this.#A4||(this.#A4=()=>this.K4()),s.Qf().addEventListener("tick2",this.#A4)):s.Qf().removeEventListener("tick2",this.#A4)}}Z4(){return this.#R4}K4(){}Q4(){return[]}tN(){return null}sN(t){}iN(){if(!this.#E4)throw new Error("no wrapper component id set");const t=this.#SL.pk();return t.eN(this.#E4)}hN(t,s){if(Re.Re(t),Re.Ze(s),!this.#E4)throw new Error("no wrapper component id set");const i=this.#SL.pk();i.rN(this.#E4,t,s)}nN(t){Re.He(t);for(const[s,i]of t)this.hN(s,i)}oN(t,s){if(!this.#E4)throw new Error("no wrapper component id set");this.runtime.GD.aN(this.#E4,t,s)}lN(t,s){if(this.#E4)return this.runtime.GD.uN(this.#E4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#cN;#fN;constructor(t){super(t);const s=Pe.bL.wL(Oe),i=s.zO(),e=(this.#cN=s,this.#fN=i,De.set(this,s),[]),h=i.dN();if(h){const n=i.QB().S5().w5().length;for(let t=0;t<n;++t)e.push(new self.b5(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#fN.IO().GO()}get pN(){return this.#fN.JO().P5()}get x(){return this.#fN.jM()}set x(t){t=+t;const s=this.#fN;isNaN(t)||s.jM()===t||(s.VM(t),s.mN())}get y(){return this.#fN.HM()}set y(t){t=+t;const s=this.#fN;isNaN(t)||s.HM()===t||(s.zM(t),s.mN())}setPosition(t,s){t=+t,s=+s;const i=this.#fN;isNaN(t)||isNaN(s)||i.jM()===t&&i.HM()===s||(i.gN(t,s),i.mN())}yN(){const t=this.#fN;return[t.jM(),t.HM()]}SN(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#fN;i.wN(t,s),i.mN()}}get _B(){return this.#fN.JM()}set _B(t){t=+t;const s=this.#cN,i=this.#fN;isNaN(t)||i.JM()===t||(i.qM(t),s.pk().ZO())}get bN(){return this.#fN.MN()}get width(){return this.#fN.Pm()}set width(t){t=+t;const s=this.#fN;isNaN(t)||s.Pm()===t||(s.Bm(t),s.mN())}get height(){return this.#fN.jm()}set height(t){t=+t;const s=this.#fN;isNaN(t)||s.jm()===t||(s.Em(t),s.mN())}M5(t,s){t=+t,s=+s;const i=this.#fN;isNaN(t)||isNaN(s)||i.Pm()===t&&i.jm()===s||(i.CC(t,s),i.mN())}getSize(){const t=this.#fN;return[t.Pm(),t.jm()]}get angle(){return this.#fN.GetAngle()}set angle(t){t=Pe._r(+t);const s=this.#fN;isNaN(t)||s.GetAngle()===t||(s.G5(t),s.mN())}get vN(){return Pe.Cr(this.angle)}set vN(t){this.angle=Pe.Ir(t)}Pu(){return this.#fN.xN().Ol()}GN(){return this.#fN.TN().Tu()}_N(){return this.#fN.IN()}get isVisible(){return this.#fN.lB()}set isVisible(t){t=!!t;const s=this.#cN,i=this.#fN;i.lB()!==t&&(i.oB(t),s.pk().ZO())}get opacity(){return this.#fN.hP()}set opacity(t){t=Pe.Tr(+t,0,1);const s=this.#cN,i=this.#fN;isNaN(t)||i.hP()===t||(i.nP(t),s.pk().ZO())}set CN(t){if(Ee.He(t),t.length<3)throw new Error("expected 3 elements");Be.ea(t[0],t[1],t[2]);const s=this.#cN,i=this.#fN;i.RN().Ga(Be)||(i.AN(Be),s.pk().ZO())}get CN(){const t=this.#fN.RN();return[t.fa(),t.ya(),t.Sa()]}set Z3(t){Ee.Re(t);const s=ke.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#cN,e=this.#fN;e.AM(s),i.pk().ZO()}get Z3(){return Le.get(this.#fN.DB())}PN(){this.#fN.EN()}FN(){this.#fN.DN()}ON(t){Ee.oh(t,Fe);const s=this.#cN,i=s.pk().L5(t);if(!i)throw new Error("invalid layer");s.zO().kN(i)}LN(t,s){Ee.oh(t,h),this.#fN.BN(De.get(t),s)}get zIndex(){return this.#fN.qO()}get NN(){return this.#fN.WN()}set NN(t){this.#fN.jN(!!t)}eu(t,s){return Ee.we(t),Ee.we(s),this.#fN.VN(+t,+s)}Ok(t){Ee.oh(t,h);const s=this.#cN,i=De.get(t);return s.pk().nD().kk(s,i)}Bk(){const t=this.#cN,s=t.pk().nD().Nk(t);return s?s.jO():null}getParent(){const t=this.#cN.UN();return t?t.jO():null}HN(){const t=this.#cN.zN();return t?t.jO():null}*JN(){for(const t of this.#cN.JN())yield t.jO()}qN(){return this.#cN.XN()}YN(t){const s=this.#cN.$N(t);return s?s.jO():null}*children(){for(const t of this.#cN.children())yield t.jO()}*KN(){for(const t of this.#cN.KN())yield t.jO()}ZN(t,s){Ee.oh(t,h),Ee.Le(s),s=s||{};const i=this.#cN,e=De.get(t);i.QN(e,s)}removeChild(t){Ee.oh(t,h);const s=this.#cN,i=De.get(t);s.t6(i)}s6(){const t=this.#cN;if(t.i6()){const s=t.UN();s.t6(t)}}e6(){const t=this.#fN;return{h6:t.r6(),n6:t.o6(),a6:t.l6(),u6:t.c6(),f6:t.d6(),p6:t.m6(),g6:t.y6(),S6:t.w6(),b6:t.M6()}}v6(t,s){Ee.Te(t),Ee.Te(s),this.#fN.x6(t,s)}G6(){const t=this.#fN;t.T6(),t.mN()}_6(t,s,i){Ee.Te(t),Ee.Te(s),Ee.ke(i);const e=this.#fN;e.I6(t,s,i)&&e.mN()}C6(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#fN;if(o.R6()){const a=o.A6(),l=a.Pv(t,s);null!==l&&(i=l.jM(),e=l.HM(),h=l.JM(),r=l.XM(),n=l.$M())}return{x:i,y:e,_B:h,u:r,v:n}}P6(){const t=this.#fN;if(!t.R6())return[0,0];const s=t.A6();return[s.bv(),s.Mv()]}}};0;const Pe=self.Ws,Ee=self.Ks,Fe=self.k5,De=new WeakMap,Oe=Pe.Vs(),ke=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...ke.entries()].map(t=>[t[1],t[0]])),Be=Pe.Sr(Pe.Yo);self.E6=t(self.KB),self.F6=t(self._4)}{const Ne=self.Ks;self.D6=class extends self.E6{#SL;constructor(){super(),this.#SL=self.KB.i4()}O6(){return this.#SL.L6().k6()}focus(){this.#SL.L6().B6()}blur(){this.#SL.L6().N6()}W6(t,s){Ne.Re(t),this.#SL.L6().j6(t,s)}}}{let e=function(t){let s=Ve.get(t);return s||(s=We.Sr(We.Event.Qf),Ve.set(t,s)),s};e;const We=self.Ws,je=self.Ks,Ve=new WeakMap,Ue=We.Vs();self.V6=class{#SL;constructor(){const t=We.bL.wL(Ue),s={runtime:{value:(this.#SL=t).pk().ML(),writable:!1},behavior:{value:t.H6().U6(),writable:!1},z6:{value:t.q6().J6(),writable:!1}};Object.defineProperties(this,s),t.pk().YL(this,t)}static i4(){return We.bL.e4()}get X6(){return this.#SL.Y6().jO()}h4(){const t=Ve.get(this);t&&(t.wr(),Ve.delete(this))}addEventListener(t,s,i){je.Re(t),je.Ze(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){je.Re(t),je.Ze(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Ws,ze=He.Vs();self.K6=class{constructor(){const t=He.bL.wL(ze),s={runtime:{value:t.pk().ML(),writable:!1},behavior:{value:t.H6().U6(),writable:!1},name:{value:t.cf(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Ws,qe=Je.Vs();self.Z6=class{#SL;constructor(){const t=Je.bL.wL(qe),s={runtime:{value:(this.#SL=t).pk().ML(),writable:!1}};Object.defineProperties(this,s)}$L(){return this.#SL.r5().map(t=>t.jO())}static BL(t){if(!t)return null;const s=Je.bL.Q6(t);return s?s.U6():null}}}{const Xe=self.Ws,Ye=self.Ks,$e=Xe.Sr(Xe.Yo);self.b5=class{#SL;constructor(t,s){this.#SL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#SL.w5();return t[this.index].cf()}get isActive(){return this.#SL.tW(this.index)}set isActive(t){t=!!t;const s=this.#SL;s.tW(this.index)!==t&&(s.sW(this.index,t),s.iW(),s.pk().ZO())}setParameter(t,s){Ye.Te(t),t=Math.floor(+t);const i=this.#SL,e=i.eW(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Xe.Yo){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");$e.ea(s[0],s[1],s[2]),s=$e}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.hW(this.index,t,s);h&&i.tW(this.index)&&i.pk().ZO()}getParameter(t){Ye.Te(t),t=Math.floor(+t);const s=this.#SL,i=s.eW(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Xe.Yo?[i.fa(),i.ya(),i.Sa()]:i}}}self.rW=class{#SL;constructor(t){this.#SL=t,Object.defineProperties(this,{name:{value:t.cf(),writable:!1}})}get speed(){return this.#SL.nW()}get isLooping(){return this.#SL.oW()}get repeatCount(){return this.#SL.aW()}get lW(){return this.#SL.uW()}get cW(){return this.#SL.fW()}get frameCount(){return this.#SL.dW()}pW(){return this.#SL.mW().map(t=>t.gW())}*frames(){for(const t of this.#SL.mW())yield t.gW()}};self.fk=class{#SL;constructor(t){this.#SL=t}static ck(t){return t.#SL}get width(){return this.#SL.Pm()}get height(){return this.#SL.jm()}getSize(){const t=this.#SL;return[t.Pm(),t.jm()]}yW(t){return t.SW(this)}wW(){return this.#SL.rR().Ol()}};{const Ke=self.Ks;self.bW=class extends self.fk{#SL;constructor(t){super(t.MW()),this.#SL=t,Object.defineProperties(this,{duration:{value:t.vW(),writable:!1},xW:{value:t.GW(),writable:!1},TW:{value:t._W(),writable:!1}})}IW(){const t=this.#SL;return[t.GW(),t._W()]}RW(){return this.#SL.AW()}PW(t){return this.EW(t)[0]}FW(t){return this.EW(t)[1]}EW(t){let s=this.#SL,i=null;if("number"==typeof t)i=s.DW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.OW(t)}return i?[i.jM(),i.HM()]:this.IW()}kW(){const t=this.#SL.LW();return t?t.qu():0}BW(t){return this.NW(t)[0]}WW(t){return this.NW(t)[1]}NW(t){Ke.Te(t),t=Math.floor(t);const s=this.#SL.LW();if(!s||t<0||t>=s.qu())return[0,0];const i=s.Ju(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#SL.jW()}}}{let s=function(t){const s=Qe.get(t);if(s.VW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.Ks,Qe=new WeakMap;self.UW=class{constructor(t){Qe.set(this,t),t.pk().YL(this,t)}pause(){s(this).HW()}resume(){s(this).zW()}stop(){s(this).b0()}w4(t){return s(this).JW(t)}set time(t){Ze.Te(t),s(this).qW(t)}get time(){return s(this).FE()}set totalTime(t){Ze.Te(t),s(this).XW(t)}get totalTime(){return s(this).YW()}set isLooping(t){s(this).$W(!!t)}get isLooping(){return s(this).KW()}set cW(t){s(this).ZW(!!t)}get cW(){return s(this).QW()}set playbackRate(t){Ze.Te(t),s(this).t8(t)}get playbackRate(){return s(this).s8()}get progress(){const t=s(this);return t.FE()/t.YW()}get tags(){return s(this).i8()}get finished(){return s(this).e8()}get isPlaying(){return s(this).IsPlaying()}get h8(){return s(this).r8()}get n8(){return Qe.get(this).VW()}}}{let i=new WeakMap;self.o8=class extends self.UW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.cf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.VW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ks),h=new WeakMap,r=new WeakMap,n=null;self.a8=class extends self.UW{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}l8(t){e.Re(t);const s=self.Ic.Hc(n(t));i(this).u8(s)}get X6(){const t=i(this).c8();return t?t.jO():null}get f8(){return i(this).d8()}set f8(t){i(this).p8(!!t)}get value(){const t=i(this);if("value"!==t.m8())throw new Error("not a value tween");return t.y8("value").g8()}}}self.S8=class extends self.yL{constructor(){super()}};{const th=self.Ws,sh=self.Ks,ih=th.Vs();self.w8=class extends self.S8{#SL;#P4;#b8=0;#M8=new Map;constructor(t){if(super(),this.#SL=th.bL.wL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#P4=t.domComponentId,this.v8("elem-focused",t=>t.x8()),this.v8("elem-blurred",t=>{t&&t.G8()})}T8(t){const s=this.#b8++;return this.#M8.set(s,t),s}_8(t){this.#M8.delete(t)}v8(t,i){const s=this.#SL.pk();s.U4(this.#P4,t,t=>{const s=this.#M8.get(t.elementId);i(s,t)})}I8(t){sh.He(t);for(const[s,i]of t)this.I8(s,i)}}}{const eh=self.Ws,hh=(new WeakMap,eh.Vs());self.C8=class extends self.JL{#SL;constructor(){super(),this.#SL=eh.bL.wL(hh)}A8(){}P8(){return this.#SL.MW().E8()}F8(t){}D8(t){}O8(){}k8(t){}}}{const rh=self.Ws,nh=(new WeakMap,rh.Vs());self.L8=class extends self.F6{#SL;#B8=null;#N8=null;constructor(t){super(t),this.#SL=rh.bL.wL(nh)}h4(){if(super.h4(),this.#B8){const t=this.#SL.pk().Qf();t.removeEventListener("renderercontextlost",this.#B8),t.removeEventListener("renderercontextrestored",this.#N8),this.#B8=null,this.#N8=null}}W8(){if(!this.#B8){this.#B8=()=>this.j8(),this.#N8=()=>this.V8();const t=this.#SL.pk().Qf();t.addEventListener("renderercontextlost",this.#B8),t.addEventListener("renderercontextrestored",this.#N8)}}j8(){}V8(){}U8(t){}}}{const oh=self.Ws,ah=oh.Sr(oh.Rect),lh=new WeakMap,uh=oh.Vs();self.H8=class extends self.L8{#z8=-1;#J8=!0;#q8=!1;#X8=!1;#Y8=-.2;#K8=oh.Sr(oh.Rect,0,0,-1,-1);#Z8=0;#Q8=0;#tj=-1;#sj=-1;#ij=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.bL.wL(uh),i=(lh.set(this,s),this.#z8=this.qL.T8(this),s.pk().eL());this.#Z8=i.ej(),this.#Q8=i.hj(),this.F4(!0)}h4(){super.h4(),this.qL._8(this.#z8),this.rj("destroy"),this.#z8=-1,lh.delete(this)}nj(){const t=lh.get(this).pk();if(t.pD())throw new Error("not valid in worker mode");return this.oj("get-element")}rj(t,s){(s=s||{}).elementId=this.#z8,this.z4(t,s)}oj(t,s){return(s=s||{}).elementId=this.#z8,this.q4(t,s)}aj(t,s){return(s=s||{}).elementId=this.#z8,this.J4(t,s)}lj(t){t=t||{};const s=lh.get(this).zO();t.elementId=this.#z8,t.isVisible=s.lB(),t.htmlIndex=s.JO().uj(),t.htmlZIndex=s.cj(),Object.assign(t,this.fj()),this.#J8=!!t.isVisible,this.q4("create",t),this.pj(!0)}mj(t){this.#J8!==(t=!!t)&&(this.#J8=t,this.rj("set-visible",{isVisible:t}))}X4(){this.pj(!1)}gj(){const t=lh.get(this).pk(),s=t.eL().yj();return"Android"===oh.di.mi&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}pj(u){const c=lh.get(this);if(!c.Sj()){let t=c.zO(),s=t.JO(),i=t.xN(),[e,h]=s.HB(i.Pl(),i.El()),[r,n]=s.HB(i.Fl(),i.Dl()),o=c.pk().eL(),a=o.oL(),l=o.lL();if(t.lB()&&s.lB())if(!this.gj()&&(r<=0||n<=0||a<=e||l<=h))this.mj(!1);else{ah.set(e,h,r,n);const f=o.ej(),d=o.hj(),p=s.uj(),m=t.cj();if(!u&&ah.equals(this.#K8)&&this.#Z8===f&&this.#Q8===d&&this.#tj===p&&this.#sj===m)this.mj(!0);else{this.#K8.I(ah),this.#Z8=f,this.#Q8=d,this.#tj=p,this.#sj=m,this.mj(!0);let t=null;this.#X8&&(t=s.wj()+this.#Y8),this.rj("update-position",{left:Math.round(this.#K8.Pl()),top:Math.round(this.#K8.El()),width:Math.round(this.#K8.width()),height:Math.round(this.#K8.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.mj(!1)}}bj(){this.oj("focus",{focus:!0})}Mj(){this.oj("focus",{focus:!1})}x8(){this.#q8=!0}G8(){this.#q8=!1}vj(){return this.#q8}xj(t,s){this.postToDOMElement("set-css-style",{prop:oh.Jo(t),val:s})}Gj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}Tj(t){this.postToDOMElement("remove-attribute",{name:t})}_j(){this.#ij||(this.#ij=!0,Promise.resolve().then(()=>{this.#ij=!1,this.rj("update-state",this.fj())}))}fj(){}Ij(){return this.#z8}}}self.Cj=class extends self.Z6{constructor(){super()}};self.Rj=class extends globalThis.K6{constructor(){super()}A8(){}};{const ch=self.Ws,fh=new WeakMap,dh=ch.Vs();self.Aj=class extends self.V6{#I4=!1;#R4=!1;#Pj=!1;constructor(){super(),fh.set(this,ch.bL.wL(dh))}h4(){super.h4(),this.F4(!1),this.D4(!1),this.Ej(!1),fh.delete(this)}O4(){return ch.bL.L4()}Fj(){}B4(t){const s=fh.get(this);s.pk().N4(t,s.Y6(),s.q6())}W4(t){const s=fh.get(this);return s.pk().j4(t,s.Y6(),s.q6())}F4(t){if(this.#I4!==(t=!!t)){this.#I4=t;const s=fh.get(this).pk();t?s.Dj(this):s.Oj(this)}}Y4(){return this.#I4}X4(){}D4(t){if(this.#R4!==(t=!!t)){this.#R4=t;const s=fh.get(this).pk();t?s.kj(this):s.Lj(this)}}Z4(){return this.#R4}K4(){}Ej(t){if(this.#Pj!==(t=!!t)){this.#Pj=t;const s=fh.get(this).pk();t?s.Bj(this):s.Nj(this)}}Wj(){return this.#Pj}jj(){}Q4(){return[]}tN(){return null}sN(t){}}}{let e=self.Ks,h=null;self.TD=class{constructor(t){h=t}hk(t){h.rk(t)}aN(t,s,i){e.Re(t),e.Re(s),e.Je(i),h.Vj(t,s,i)}uN(t,s,i){return e.Re(t),e.Re(s),e.Je(i),h.Uj(t,s,i)}Hj(t){return e.Ae(t),new self.zj(h,t)}set Jj(t){h.qj(!!t)}get Jj(){return h.Xj()}Yj(t){h.$j(!!t)}Kj(t){e.we(t);const s=h.Zj(t);return s?s.VL():null}}}self.zj=class{#Qj;#tV;#sV;#iV;#eV;#hV;constructor(t,s){const i=(this.#Qj=t).AD(),e=t.kD(),h=(this.#tV=e,this.#sV=e.rV(),t.UD()),r=(this.#iV=h.nV(),this.#eV=h.oV(e),i.aV()),n=r.oV();this.#hV=n,s&&n.lV(s),t.uV(!1)}cV(){const t=this.#Qj.AD(),s=this.#sV,i=this.#hV;t.fV(s),this.#tV.dV(this.#iV,this.#eV),t.pV(s),i.mV(i.QF()+1)}get gV(){return this.#hV.yV()}release(){const t=this.#Qj,s=t.UD(),i=t.AD().aV();t.uV(!0),i.SV(),s.SV()}};{let d=self.Ws,h=self.Ks,p=null,r=null;self.wV=class{constructor(t,s){r=t,p=s}bV(){p.dP()}MV(t){p.cP(t)}vV(){p.lw()}xV(){p.iw()}GV(){p.Sw()}setColor(t){p.rP(t[0],t[1],t[2],t[3])}TV(t,s,i,e){p.rP(t,s,i,e)}_V(){p.oP()}IV(t){p.nP(t)}CV(t){p.Ww(t)}RV(){p.jw()}rect(t){p.gP(t.left,t.top,t.right,t.bottom)}AV(t,s,i,e){p.gP(t,s,i,e)}PV(t){p.ou(d.ou._u(t))}EV(t,s,i,e,h,r,n,o){p.Tb(t,s,i,e,h,r,n,o)}FV(t,s){p.Kw(d.ou._u(t),d.Rect.kl(s))}DV(t,s){p.wP(d.ou._u(t),d.ou._u(s))}OV(t,s,i,e,h,r,n,o,a,l,u,c,f){p.bP(t,s,i,e,h,r,n,o,a,l,u,c,d.Rect.kl(f))}kV(t,s,i,e,h,r,n,o,a,l,u,c,f){p.Jw(t,s,i,e,h,r,n,o,a,l,u,c,d.ou._u(f))}LV(t,s,i){p.MP(t,s,i)}BV(t){p.Gb(t)}line(t,s,i,e){p.Jm(t,s,i,e)}NV(t,s,i,e,h,r){p.qw(t,s,i,e,h,r)}WV(t,s,i,e){p.Zw(t,s,i,e)}jV(t){p.ib(d.Rect.kl(t))}VV(t){p.eb(d.ou._u(t))}UV(t){p.lb(t)}HV(){p.ub()}zV(t){p.mb(t)}JV(){p.wb()}qV(t){h.ah(t,self.XV);const s=t?r.L5(t):null;p.lP(s)}YV(t,s){const i=self.fk.ck(t);if(i)return i.$V(p,{Vv:s?.Vv??"clamp-to-edge",Uv:s?.Uv??"clamp-to-edge",Hv:s?.Hv??"trilinear",qv:s?.qv??!0});throw new Error("invalid IImageInfo")}KV(t){const s=self.fk.ck(t);if(!s)throw new Error("invalid IImageInfo");s.$I()}SW(t){const s=self.fk.ck(t);if(!s)throw new Error("invalid IImageInfo");const i=s.yx();return self.XV.ZV(r,i)}QV(t,s,i){h.Te(t),h.Te(s);const e=p.Q2(t,s,{Vv:i?.Vv??"clamp-to-edge",Uv:i?.Uv??"clamp-to-edge",Hv:i?.Hv??"trilinear",qv:i?.qv??!0});return self.XV.ZV(r,e)}tU(t,s,i){h.oh(s,self.XV);const e=r.L5(s);p.hR(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.oh(t,self.XV);const s=r.L5(t);p.nx(s)}sU(){const t=p.Wb();return new self.iU(r,t)}eU(){r.eL().hU(p)}rU(t){h.oh(t,globalThis.k5);const s=r.L5(t);s.nU(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.XV=class{constructor(t,s){ph.set(this,{runtime:t,oU:s}),mh.set(s,this),t.YL(this,s),Object.defineProperties(this,{width:{value:s.Pm(),writable:!1},height:{value:s.jm(),writable:!1}})}static ZV(t,s){if(!s)return null;const i=mh.get(s);return i||new self.XV(t,s)}}}{let e=function(t){return yh.get(t).aU};e;const gh=self.Ks,yh=new WeakMap;self.iU=class{constructor(t,s){yh.set(this,{runtime:t,aU:s}),t.YL(this,s)}release(){e(this).wr()}set lU(t){gh.Re(t),e(this).hC(t)}get lU(){return e(this).nI()}set uU(t){gh.Te(t),e(this).rC(t)}get uU(){return e(this).nC()}set lineHeight(t){gh.Te(t),e(this).aC(t)}get lineHeight(){return e(this).lC()}set cU(t){e(this).uC(t)}get cU(){return e(this).cC()}set fU(t){e(this).fC(t)}get fU(){return e(this).dC()}setColor(t){gh.He(t),this.dU(t[0],t[1],t[2])}dU(t,s,i){e(this).SC(t,s,i)}pU(t){gh.Re(t),e(this).PM(t)}set mU(t){e(this).wC(t)}get mU(){return e(this).bC()}set verticalAlign(t){e(this).MC(t)}get verticalAlign(){return e(this).vC()}set gU(t){e(this).xC(t)}get gU(){return e(this).GC()}set yU(t){e(this).TC(t)}get yU(){return e(this)._C()}set text(t){gh.Re(t),e(this).Gf(t)}get text(){return e(this).IC()}M5(t,s,i){gh.Te(t),gh.Te(s),gh.Te(i),e(this).CC(t,s,i)}yW(){const{runtime:t,aU:s}=yh.get(this),i=s.yx();return self.XV.ZV(t,i)}wW(){return e(this).rR().Ol()}SU(t){gh.Ze(t),e(this).ZI=t}wU(){e(this).$I()}get bU(){return e(this).AC()}get MU(){return e(this).EC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.Ws,Sh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.vU=class extends d.dr{constructor(t,s){super();const i=s.exportType,e=(this.bf=t,this.xU="folders",this.GU=new Map,this.TU="cordova"===i,this._U=!!s.isiOSCordova,this.IU=!!s.isFileProtocol,this.CU=s.swClientId,this.RU=s.supportedAudioFormats||{},this.AU=new Map,this.PU=!1,this.EU=s.scriptFolder,this.FU="",this.DU="",this.OU="",this.kU=s.fileMap||new Map,this.LU=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.BU=e?"remote":"local",this.NU=new Map,this.WU=[],this.jU=[],this.VU=!1,this.UU=0,this.HU=0,this.zU=0,this.JU=!1,this.qU=d.Sr(d.Ld,()=>this.XU(),50),this.YU=d.Sr(d.Cd,Math.max(d.hardwareConcurrency,8)),this.$U=d.Sr(d.Cd,20),this.KU=new self.nk(this)}wr(){for(const t of this.NU.values())t.wr();this.NU.clear(),d.Hn(this.jU),this.bf=null}pk(){return this.bf}ZU(t){this.xU=t}vk(){return this.xU}QU(){return this.EU}tH(t){this.FU=t}Tk(){return this.FU}sH(t){this.DU=t}iH(){return this.DU}eH(t){this.OU=t}hH(){return this.OU}rH(){return this.IU}Ao(t,s){return s=s||this.BU,d.To(t)?("flat"===this.xU&&(t=t.toLowerCase()),this.TU&&this.IU?this.nH(t):"playable-ad-single-file"===this.bf.Qk()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.YU:this.$U).Gc(()=>d.Ao(t))):d.Ao(t)}Po(t){return d.To(t)?("flat"===this.xU&&(t=t.toLowerCase()),this.TU&&this.IU?this.oH(t):"playable-ad-single-file"===this.bf.Qk()?d.Fo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.BU?this.YU:this.$U).Gc(()=>d.Po(t))):d.Po(t)}Co(t){return d.To(t)?("flat"===this.xU&&(t=t.toLowerCase()),this.TU&&this.IU?this.aH(t):"playable-ad-single-file"===this.bf.Qk()?d.Do(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.BU?this.YU:this.$U).Gc(()=>d.Co(t))):d.Co(t)}async Ro(t){const s=await this.Co(t);return JSON.parse(s)}lH(t,s){return"flat"===this.xU&&(t=t.toLowerCase()),this.bf.sk("runtime","cordova-fetch-local-file",{filename:t,as:s})}aH(t){return this.lH(t,"text")}async nH(t){const s=await this.lH(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async uH(t){"flat"===this.xU&&(t=t.toLowerCase());let s=this.GU.get(t);if(!s){const i=await this.nH(t);s=URL.createObjectURL(i),this.GU.set(t,s)}return s}oH(t){return this.lH(t,"buffer")}xk(t){"flat"===this.xU&&(t=t.toLowerCase());let s=this.FU+t;return"Gecko"===d.di.bi&&"preview"===this.bf.Qk()?this.cH(s):s}bk(t){return d.Go(t)?Promise.resolve(t):this.TU&&this.IU?this.uH(t):"playable-ad-single-file"===this.bf.Qk()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.xU&&(t=t.toLowerCase()),Promise.resolve(t))}fH(s){if(d.Go(s)||"preview"!==this.bf.Qk()||!this.CU||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.CU),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}dH(t){return this.bk(t)}pH(t){if(t.mH&&!Sh.has(t.mH))throw new Error("invalid load policy");let s=this.NU.get(t.url);return s||(s=d.Sr(d.gH,this,{url:t.url,size:t.size||0,mH:t.mH||this.BU}),this.NU.set(s.yH(),s),this.VU)||(this.UU+=s.yc(),this.jU.push(s.SH().then(()=>this.wH(s.yc())))),s}bH(t){this.NU.delete(t.yH())}async MH(){try{await Promise.all(this.jU),this.zU=1}catch(t){console.error("Error loading: ",t),this.JU=!0,this.XU()}}vH(){this.VU=!0}xH(){return this.JU}wH(t){this.HU+=t,this.qU.Yd()}XU(){const t=d.Sr(d.Event,"loadingprogress");this.zU=d.Tr(this.HU/this.UU,0,1),t.progress=this.zU,this.bf.Qf().dispatchEvent(t)}GH(){return this.zU}TH(t){d.Xn(this.WU,t),this.WU.length&&this.jU.push(this._H())}async _H(){const t=[],s=[];for(const[i,e,h]of this.WU)this.UU+=h,t.push(this.IH(i,e,s).then(()=>this.wH(h)));await Promise.all(t),this.bf.pD()&&0<s.length&&await this.bf.sk("runtime","load-webfonts",{webfonts:s})}async IH(s,i,e){try{let t=await this.bk(i);"Gecko"===d.di.bi&&(s=`'${s}'`),("Gecko"===d.di.bi&&"preview"===this.bf.Qk()||"playable-ad-single-file"===this.bf.Qk())&&(t=this.cH(t));const h=new FontFace(s,`url('${t}')`);(this.bf.pD()?self:document).fonts.add(h),await h.load(),this.bf.pD()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}lk(t){return!!this.RU[t]}CH(t,s){this.PU=!!s;for(const[i,e,h]of t)this.AU.set(i,{fileName:i,RH:e.map(t=>({type:t[0],AH:t[1],PH:i+t[1],fileSize:t[2]})),isMusic:h})}EH(t){"flat"===this.xU&&(t=t.toLowerCase());const s=this.AU.get(t);if(!s)return null;let i=null;for(const e of s.RH)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.lk(e.type))return e;return i}FH(t){const s=this.EH(t);return s?{url:this.xk(s.PH),type:s.type}:null}DH(){if(this.PU){const t=[];for(const s of this.AU.values())if(!s.isMusic){const i=this.EH(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.xk(i.PH),type:i.type,fileSize:i.fileSize})}return t}return[]}OH(t){return"preview"===this.bf.Qk()&&(t=new URL(t,location.href).toString()),this.kU.get(t)||null}cH(t){let s=this.LU.get(t);if(!s){const i=this.OH(t);if(!i)return t;s=URL.createObjectURL(i),this.LU.set(t,s)}return s}iD(){return this.KU}async Rk(...t){const s=await Promise.all(t.map(t=>this.bk(t)));if(this.bf.pD())if(1===t.length){const i=t[0];await import((d.To(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.To(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async Pk(t){if(WebAssembly.compileStreaming){const s=await this.bk(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Po(t);return WebAssembly.compile(i)}}async Fk(t){const s=await this.bk(t);return this.bf.sk("runtime","add-stylesheet",{url:s})}}}{const bh=self.Ws;bh.kH=class extends bh.dr{constructor(t,s){super(),this.LH=t,this.bf=t.pk(),this.BH=s.url||"",this.NH=s.size,this.WH=s.mH,this.jH=s.blob||null,this.VH=!!this.jH,this.hy=null}wr(){this.hy=null,this.LH=null,this.bf=null,this.jH=null}yH(){return this.BH}yc(){return this.NH}SH(){return"local"===this.WH||this.jH?(this.VH=!0,Promise.resolve()):(this.hy||(this.hy=this.LH.Ao(this.BH,this.WH).then(t=>(this.VH=!0,this.hy=null,this.jH=t)).catch(t=>{console.error("Error loading resource: ",t),this.hy=null})),this.hy)}UH(){return this.VH}HH(){return this.jH?Promise.resolve(this.jH):this.hy||this.LH.Ao(this.BH,this.WH)}}}{const ar=self.Ws,lr=new ar.Cd,ur=new Set;ar.gH=class extends ar.kH{constructor(t,s){super(t,s),this.zH=null,this.JH=null,this.A1=0,this.qH=-1,this.XH=-1,ur.add(this)}wr(){if(0!==this.A1)throw new Error("released image asset which still has texture references");this.LH.bH(this),this.zH=null,ur.delete(this),super.wr()}static YH(){for(const t of ur)t.zH=null,t.JH=null,t.A1=0}$V(t,s){return s=s||{},this.A1++,this.JH?Promise.resolve(this.JH):(this.zH||(s.zv=this.bf.eL().$H(),this.zH=this.KH(t,s)),this.zH)}async KH(s,i){try{const e=await this.HH();return 0===this.A1?this.zH=null:await lr.Gc(async()=>{const t=await s.JP(e,i);return this.zH=null,0===this.A1?(s.nx(t),null):(this.JH=t,this.qH=t.Pm(),this.XH=t.jm(),this.JH)})}catch(t){throw console.error("Failed to load texture: ",t),t}}$I(){if(this.A1<=0)throw new Error("texture released too many times");if(this.A1--,0===this.A1&&this.JH){const t=this.JH.uM();t.nx(this.JH),this.JH=null}}ZH(){return this.A1}yx(){return this.JH}Pm(){return this.qH}jm(){return this.XH}async QH(){const t=await this.HH();return ar.Hi.ImageBitmap?createImageBitmap(t):ar.ko(t)}}}{let t=function(t,s){return t.zO().t7()-s.zO().t7()};t;const cr=self.Ws;cr.s7=class extends cr.dr{constructor(t,s,i){super(),this.i7=t,this.al=s,this.ll=i,this.e7=[],this.h7=!0,this.r7=new Set,this.n7=!1}wr(){cr.Hn(this.e7),this.r7.clear(),this.i7=null}b0(){cr.Hn(this.e7),this.h7=!0,this.r7.clear(),this.n7=!1}o7(){this.h7=!1}uc(){if(this.e7.length){if(this.e7.length>this.r7.size)return!1;this.a7()}return!0}l7(t){this.r7.has(t)?(this.r7.delete(t),0===this.r7.size&&(this.n7=!1)):(this.e7.push(t),this.h7=1===this.e7.length)}E0(t){this.r7.add(t),this.n7=!0,50<=this.r7.size&&this.a7()}a7(){this.n7&&(this.e7.length===this.r7.size?this.b0():(cr.Qn(this.e7,this.r7),this.r7.clear(),this.n7=!1))}u7(){this.h7||(this.e7.sort(t),this.h7=!0)}c7(t){this.a7(),this.u7(),this.e7.length&&t.push(this.e7)}}}{const fr=self.Ws;fr.f7=class extends fr.dr{constructor(t,s){super(),this.d7=t,this.p7=s,this.m7=fr.Sr(fr.oc)}wr(){this.m7.wr(),this.m7=null}g7(t,s,i){let e=this.m7.ni(t,s);return e||(i?(e=fr.Sr(fr.s7,this,t,s),this.m7.Set(t,s,e),e):null)}y7(t){return Math.floor(t/this.d7)}S7(t){return Math.floor(t/this.p7)}w7(e,h,r){if(h)for(let i=h.Pl(),t=h.Fl();i<=t;++i)for(let t=h.El(),s=h.Dl();t<=s;++t)if(!r||!r.eu(i,t)){const n=this.g7(i,t,!1);n&&(n.E0(e),n.uc())&&this.m7.fc(i,t)}if(r)for(let i=r.Pl(),t=r.Fl();i<=t;++i)for(let t=r.El(),s=r.Dl();t<=s;++t)h&&h.eu(i,t)||this.g7(i,t,!0).l7(e)}b7(t,s){let i=this.y7(t.Pl()),e=this.S7(t.El()),h=this.y7(t.Fl()),r=this.S7(t.Dl());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.g7(i,t,!1);n&&n.c7(s)}}M7(t){let s=t.Pl(),i=t.El(),e=t.Fl(),h=t.Dl();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.g7(s,t,!1);r&&r.o7()}}}}{let n=function(t,s){return t.zO().t7()-s.zO().t7()},t=function(t,s){return t.zO().JM()-s.zO().JM()};n,t;const w=self.Ws,dr=new w.Rect,pr=new w.ou,mr=[],gr=(new w.Rect,new w.Rect,self.xs),Gh=gr.Ps,Vh=gr.Es,xh=gr.Is,yr=xh.create(),Sr=Gh.create(),wr=Vh.create(),br=Gh.create(),Mr=Gh.create(),vr=Gh.create(),xr=w.Sr(w.ol),Gr=(w.Sr(w.Rect),[]),Tr=[],_r=[],Ir={name:"",sid:-1,v7:!1,isVisible:!0,isInteractive:!0,fB:!1,backgroundColor:[1,1,1,1],IB:!0,x7:[1,1],opacity:1,AB:!1,G7:!1,T7:!1,_7:!1,scaleRate:1,Z3:0,_B:0,I7:[],C7:[],R7:[]};w.A7=class extends w.dr{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.P7=t,this.bf=t.pk(),this.E7=s,this.vr=i.name,this.by=-1,this.F7=!!i.fB,this.D7=-1,this.O7=i.sid,this.k7=!!i.v7,this.L7=!!i.isVisible,this.B7=!!i.isInteractive,this.N7=w.Sr(w.Yo),this.N7.Ka(i.backgroundColor),this.W7=!!i.IB,this.j7=i.x7[0],this.V7=i.x7[1],this.IM=w.Sr(w.Yo,1,1,1,i.opacity),this.U7=w.Sr(w.Yo),this.H7=!!i.AB,this.z7=!!i.G7,this.J7=!!i.T7,this.q7=!!i._7,this.X7=i.scaleRate,this._M=i.Z3,this.Y7=null,this.K7=1,this.CM=i._B,this.Z7=0,this.Q7=0,this.sz=0,this.iz=!1,this.HR=w.Sr(w.Rect),this.ez=w.Sr(w.Rect),this.hz=w.Sr(w.Rect),this.rz=!0,this.J2=xh.create(),this.nz=!0,this.B3=xh.create(),this.oz=!0,this.az=w.Sr(w.Cy.Ey),this.lz=!0,this.uz=[],this.cz=i.I7,this.fz=[],this.pz=[],this.mz=new Map,this.e7=[],this.gz=!1,this.yz=!1,this.Sz=!1;const h=this.bf.eL();this.wz=w.Sr(w.bz,this,i.C7),this.YF=w.Sr(w.Cy.JE,h.Mz(),{OE:(t,s)=>{const i=s.jF(),e=i.VP();t.PM(i.vz()),t.$P(e),t.KP(e),h.xz(e)},LE:t=>this.S5().Gz(t)}),this.Tz=!0,this._z=!0,this.Iz=null,this.Cz=[],this.Rz=!1,this.Az=w.Sr(w.Rect,0,0,-1,-1),this.Pz=w.Sr(w.Rect,0,0,-1,-1),this.Ez=new self.k5(this),this.Fz(),this.Dz()&&(this.Iz=w.Sr(w.f7,this.bf.gD(),this.bf.SD())),this.Oz=i.R7.map(t=>w.A7.kz(this.P7,this,t))}Lz(){for(const t of this.cz){const s=this.bf.Bz(t[1]);this.P7.Nz(s),s.Wz()||(s.jz(t),s.Vz(this.by)),this.fz.push(t),this.mz.set(t[2],t)}w.Xn(this.uz,this.fz),this.cz=null}static kz(t,s,i){return w.Sr(w.A7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],fB:i[19],backgroundColor:i[4].map(t=>t/255),IB:i[5],x7:[i[6],i[7]],opacity:i[8],AB:i[9],G7:i[17],T7:i[18],_7:i[10],scaleRate:i[11],Z3:i[12],_B:i[16],I7:i[14],C7:i[15],R7:i[20]})}wr(){for(const t of this.Oz)t.wr();w.Hn(this.Oz);for(const s of this.e7)this.bf.r4(s);w.Hn(this.e7),this.wz.wr(),this.wz=null,this.YF.wr(),this.YF=null,this.Ez=null,this.E7=null,this.P7=null,this.bf=null}Uz(t){return this.mz.get(t)}zz(h){let r=this.P7.Jz(),n=0,o=this.fz;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.bf.Bz(t[1]),i=!0;if(!s.qz()||r){const a=this.bf.Xz(t,this,!0);h.push(a),s.Yz()&&(i=!1,this.pz.push(a.f4()))}i&&(o[n]=o[e],++n)}w.Un(o,n),this.bf.g5(),this.KO()}$z(t,s){if(!t.XL().TL())throw new Error("instance is not of world type");const i=t.zO();if(i.JO()!==this)throw new Error("instance added to wrong layer");this.e7.push(t),0!==i.JM()&&(this.Sz=!0),s&&this.Dz()&&t.zO().mN(),this.KO(t)}Kz(t){this.e7.includes(t)||(this.e7.push(t),0!==t.zO().JM()&&(this.Sz=!0),this.KO(t))}Zz(t,s){const i=t.zO();if(i.JO()!==this)throw new Error("instance added to wrong layer");this.e7.unshift(t),0!==i.JM()&&(this.Sz=!0),this.KO(t),s&&this.Dz()&&t.zO().mN()}Qz(t,s){const i=this.e7.indexOf(t);i<0||(s&&this.Dz()&&t.zO().tJ(),this.e7.splice(i,1),this.KO(t),this.sJ())}iJ(){this.Sz=!0}sJ(){0===this.e7.length&&(this.Sz=!1)}eJ(t){if(t){const s=new Set;for(const i of this.e7){const e=i.zO().t7();0<=e&&s.add(e)}let t=-1;for(const h of this.e7){const r=h.zO();if(!(0<=r.t7())){for(++t;s.has(t);)++t;r.hJ(t)}}}this.e7.sort(n)}rJ(){}nJ(){for(const t of this.e7)t.QB().Yz()||this.bf.r4(t);this.bf.g5(),w.Hn(this.e7),this.Sz=!1,this.KO()}oJ(s,t,i,e,h,r){const n=this.bf.AD(),o=this.bf.aJ(),a=s.lJ(),l=[];for(const u of this.fz){const c=u[0],f=c[0],d=c[1];if(t.eu(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.uJ(p))continue}let t=h;if(!t){const y=this.bf.UO();t=this.IO()===y?this:(t=y.cJ(this.cf()))||y.XO(this.QF())}const m=this.bf.Xz(u,t,!1,void 0,void 0,!1,r),g=(t.c5(m),m.zO());g.wN(i,e),g.mN(),n.f5(!0),m.d5(),n.f5(!1),l.push(m)}}return l}a5(){return this.e7.length}IO(){return this.P7}cf(){return this.vr}fJ(t){this.by=t}QF(){return this.by}dJ(t){this.D7=t}uj(){return this.D7}dB(){return this.F7}pB(t){this.F7!==(t=!!t)&&(this.F7=t,this.P7.pJ(),this.bf.ZO())}mJ(){let t=this.tB();return(t?t.eB():this.IO().gJ()).indexOf(this)}yJ(){return this.O7}pk(){return this.bf}SJ(){return this.k7}wJ(){for(const t of this.sB())if(t.SJ())return!0;return!1}pL(){return this.bf.pL()}S5(){return this.wz}ZF(){return this.bJ(),this.YF}bJ(){const t=this.MJ();if(this.Tz||t!==this._z||this.YF.N3()){const s=this.S5().vJ();this.YF.W3(s.map(t=>t.BG()),{NE:s.map(t=>t.QF()),WE:!t,zE:!0}),this.Tz=!1,this._z=t}}iW(){this.S5().iW(),this.Tz=!0}Dz(){return this.q7&&!this.J7}xJ(){return this.Iz}GJ(){this.Rz=!1}lB(){for(const t of this.TJ())if(!t.nB())return!1;return!0}nB(){return this.L7}oB(t){this.L7!==(t=!!t)&&(this.L7=t,this.bf.ZO())}cB(t){this.B7=!!t}uB(){return this.B7}gB(){for(const t of this.TJ())if(!t.uB())return!1;return!0}kB(t){if(this.iz!==(t=!!t)){if(this.iz=t){const s=this.IO();this.Q7=s._5(),this.sz=s.C5()}this._J(),this.bf.ZO()}}IJ(){return this.iz}T5(t){const s=this.IO(),i=s.CJ(),e=s.RJ();this.Q7!==(t=(t=e<t?e:t)<i?i:t)&&(this.Q7=t,this.IJ())&&(this._J(),this.bf.ZO())}I5(t){const s=this.IO(),i=s.AJ(),e=s.PJ();this.sz!==(t=(t=e<t?e:t)<i?i:t)&&(this.sz=t,this.IJ())&&(this._J(),this.bf.ZO())}_5(){return this.IJ()?this.Q7:this.IO()._5()}C5(){return this.IJ()?this.sz:this.IO().C5()}BB(){return this.EJ(),this.HR}FJ(){return this.EJ(),this.ez}DJ(){return this.EJ(),this.hz}X5(){const t=this.IO();return[t.OJ(),t.kJ()]}ES(t){return this.bf.ES(t)}LJ(c,e){const h=this.FJ();if(0===c)e.I(h);else{let o=h.Nl(),a=h.Wl(),t=this.BJ(c),s=h.width()/t,i=h.height()/t,[l,u]=this.X5();if(.5!==l||.5!==u){let t=this.NJ(),s=this.bf,i=this.ES()/t,e=(l-.5)*s.WJ()/i,h=(u-.5)*s.jJ()/i,r=this.GetAngle(),n=(0!==r&&(xr.set(e,h),xr.rotate(r),e=xr.fl(),h=xr.pl()),w.Nr(t,0,c));o+=w.kt(e,0,n),a+=w.kt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}hP(){return this.IM.wa()}nP(t){t=w.Tr(t,0,1),this.IM.wa()!==t&&(this.IM.ua(t),this.Fz(),this.bf.ZO())}Fz(){this.U7.I(this.IM),this.U7.Aa()}vz(){return this.U7}MJ(){return this.IM._a(1,1,1,1)}bB(){return this.X7}wB(t){this.X7!==t&&(this.X7=t,this._J(),this.bf.ZO())}xB(){return this.j7}TB(){return this.V7}VJ(t,s){this.j7===t&&this.V7===s||(this.j7=t,this.V7=s,this._J(),this.bf.ZO())}vB(t){this.VJ(t,this.TB())}GB(t){this.VJ(this.xB(),t)}qM(t){this.CM!==t&&(this.CM=t,this.bf.ZO())}JM(){return this.CM}G5(t){t=w._r(t),this.Z7!==t&&(this.Z7=t,this._J(),this.bf.ZO())}GetAngle(){return w._r(this.P7.GetAngle()+this.Z7)}MB(){return this.Z7}UJ(){return 0<this.e7.length}YO(){return this.e7}HJ(){return this.zJ()&&this.J7?(w.Xn(_r,this.YO()),_r.sort((t,s)=>this.JJ(t,s)),_r):this.YO()}qJ(t){w.Qh(t,this.HJ());for(const s of this.Oz)s.lB()&&0<s.hP()&&s.qJ(t)}JJ(t,s){const i=this.IO().XJ(),e=i[0],h=i[1],r=i[2],n=t.zO(),o=s.zO(),a=n.jM()-e,l=n.HM()-h,u=n.JM()-r,c=o.jM()-e,f=o.HM()-h,d=o.JM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}OB(){return this.N7}RB(){return this.W7}CB(t){this.W7!==(t=!!t)&&(this.W7=t,this.bf.ZO())}EB(){return this.H7}PB(t){this.H7!==(t=!!t)&&(this.H7=t,this.bf.ZO())}YJ(){return!this.pk().$J()||!this.z7}zJ(){return!this.YJ()}KJ(){return this.zJ()&&this.IO().ZJ()}QJ(){if(!this.KJ())return!1;for(const t of this.Oz)if(!t.QJ())return!1;return!0}AM(t){this._M!==t&&(this._M=t,this.bf.ZO())}DB(){return this._M}t9(){return!this.E7}tB(){return this.E7}s9(t){this.E7=t}eB(){return this.Oz}i9(){return 0<this.Oz.length}e9(t,s=!0){s?this.Oz.push(t):this.Oz.unshift(t)}h9(t,s,i){let e=this.Oz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Oz.splice(e,0,t)}r9(t){const s=this.Oz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Oz.splice(s,1)}n9(){for(const t of this.Oz)if(t.o9())return!0;return!1}*rB(){for(const t of this.Oz)yield*t.rB();yield this}*sB(){let t=this.tB();for(;t;)yield t,t=t.tB()}*TJ(){yield this,yield*this.sB()}a9(t){for(const s of this.sB())if(s===t)return!0;return!1}l9(t){return this===t||this.j7===t.j7&&this.V7===t.V7&&this.K7===t.K7&&this.X7===t.X7&&this.Z7===t.Z7&&this._5()===t._5()&&this.C5()===t.C5()}u9(){return{parallaxX:this.xB(),parallaxY:this.TB(),scale:this.SB(),scaleRate:this.bB(),angle:this.MB(),hasOwnScroll:this.IJ(),scrollX:this._5(),scrollY:this.C5()}}c9(t){this.VJ(t.parallaxX,t.parallaxY),this.yB(t.scale),this.wB(t.scaleRate),this.G5(t.angle),this.kB(t.hasOwnScroll),this.T5(t.scrollX),this.I5(t.scrollY),this.EJ()}f9(t){if(0!==t.size){const s=w.Qn(this.e7,t);0<s&&(this.sJ(),this.KO())}}KO(t){this.gz=!1,this.Rz=!1,t&&!t.QB().XL().IL()||(this.yz=!1)}d9(){if(!this.gz){if(this.e7.sort(t),this.Dz())for(let t=0,s=this.e7.length;t<s;++t){const i=this.e7[t].zO();i.hJ(t),this.Iz.M7(i.p9())}else for(let t=0,s=this.e7.length;t<s;++t)this.e7[t].zO().hJ(t);this.gz=!0}}m9(){if(!this.yz){let t=this.P7.g9(this.uj()),s=t.map(t=>[...t.rB()]).flat(),i=0;for(const e of s){for(const h of e.YO())h.QB().XL().IL()&&h.zO().y9(i++);e.S9()}}}S9(){this.yz=!0}w9(){return{isVisible:this.lB(),opacity:this.hP(),isInteractive:this.uB()}}b9(t,s,i){const e=t.zO(),h=s.zO();if(e.JO()!==this||h.JO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.qO(),n=h.qO();return r!==n+(i?1:-1)&&(w.Yn(this.e7,r),r<n&&n--,i&&n++,n===this.e7.length?this.e7.push(t):this.e7.splice(n,0,t),this.KO(t),!0)}M9(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.zO().t7()<a.zO().t7()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}v9(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.M9(h,r))}return e%2==1&&i.push(s[e-1]),i}x9(t){for(;1<t.length;)t=this.v9(t);return t[0]}G9(){return this.d9(),w.Hn(mr),this.Iz.b7(this.BB(),mr),mr.length?1===mr.length?mr[0]:this.x9(mr):[]}o9(){return this.lB()&&0<this.hP()&&this.T9()}T9(){if(this.UJ()||!this.RB())return!0;for(const t of this.Oz)if(t.T9())return!0;return!1}_9(){return this.EB()||!this.MJ()||0!==this.DB()||this.wz.I9()}C9(){if(this._9())return!0;for(const t of this.Oz)if(t.C9())return!0;return!1}VP(){return this.Y7}BJ(t){if(this.P7.Z5())return 1;{const s=this.R9();return s/(s-t)}}A9(t){const s=this.bf.$B();if(this.P7.Z5())return s;{const i=this.R9(),e=this.ES();return e/Math.abs(i-t)*s}}_J(){this.oz=!0,this.lz=!0,this.rz=!0}P9(t){return this.oz&&(this.E9(t,this.B3,0,0,null),this.oz=!1),this.B3}NJ(t){return this.ES(t)/this.F9()}R9(){return this.KJ()?this.IO().XJ()[2]:this.NJ()}D9(){if(this.KJ()){const t=this.IO().XJ();return[t[0],t[1],t[2]]}return this.O9()}O9(t=0,s=0,h=0){let r=this.bf,i=this.IO(),e=r.k9(),n=r.L9(),o=(this._5()-e)*this.j7+e,a=(this.C5()-n)*this.V7+n,l=(r.MD()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.Z5()?this.ES(h):this.NJ(h),[f,d]=this.X5();if(.5!==f||.5!==d){let t=this.ES(h)/c,s=(f-.5)*r.WJ()/t,i=(d-.5)*r.jJ()/t,e=this.GetAngle();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.fl(),i=xr.pl()),l+=s,u+=i}return[l,u,c]}E9(t,s,i,e,h){const r=this.bf,n=this.IO();if(this.KJ()){Gh.I(br,n.XJ()),Gh.I(Mr,n.B9()),Gh.I(vr,n.N9());const o=r.k9(),a=r.L9(),l=Mr[0]-br[0],u=Mr[1]-br[1],c=Mr[2]-br[2];br[0]=(br[0]-o)*this.j7+o,br[1]=(br[1]-a)*this.V7+a,br[2]*=Math.max(this.j7,this.V7),Mr[0]=br[0]+l,Mr[1]=br[1]+u,Mr[2]=br[2]+c}else{const[f,d,p]=this.O9(i,e,h),m=(Gh.set(br,f,d,p),Gh.set(Mr,f,d,p-100),this.GetAngle());0===m?Gh.set(vr,0,1,0):Gh.set(vr,Math.sin(m),Math.cos(m),0)}t.XS(s,br,Mr,vr,h||r.jJ())}W9(){this.nz=!0,this.lz=!0,this.rz=!0}j9(t){return this.nz&&(this.V9(t),this.nz=!1),this.J2}V9(t){const s=this.bf.eL(),[i,e]=this.X5();if(this.P7.Z5())t.qS(this.J2,s.U9(),s.H9());else if(.5===i&&.5===e)xh.I(this.J2,s.z9());else{const h=s.U9(),r=s.H9();t.zS(this.J2,h/r,i,e)}}nU(t,s=!0,i=0,e=0,h=0){s&&t.qA(this.j9(t));let r;r=0===i&&0===e&&0===h?this.P9(t):(this.E9(t,yr,i,e,h),yr),t.QA(r)}J9(t){this.nU(t),t.Bw(this.JM())}q9(t){let s=null;if(t.Ob()&&this.bf.X9()){const i=this.bf.eL().Y9(this);i&&(s=i.PR(),t.eE(s))}return s}K9(t){if(t.JS()&&this.bf.X9()){const s=2*(this.QF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}Fv(t,s,i){let e=this.bf.eL(),h=this._9(),r=null,n=this.q9(t);if(this.K9(t),h){const o={Hv:this.bf.wD(),F2:!0,Z9:!!t.JS()&&this.bf.Q9()};"low"===e.tq()&&(o.width=e.U9(),o.height=e.H9()),r=this.bf.sq(o),this.Y7=r,t.XP(r),this.RB()&&t.OP(0,0,0,0)}else this.Y7=s,t.XP(s);if(this.RB()||t.lc(this.N7),this.P7.iq(t,this.Y7,this.Oz,h&&this.RB()),this.K9(t),this.nU(t),t.Bw(this.JM()),t.BP(this.zJ()),this.F9()>Number.EPSILON){this.d9();const a=this.Dz()&&0===this.JM()&&!this.Sz;this.KJ()?this.eq(t):a?this.hq(t):this.rq(t,this.HJ())}t.Bw(0),t.Ww(0),h&&(t.BP(!1),this.nq(t,r,s,i)),n&&t.rE(n),this.Y7=null}rq(i,e){let h=this.BB(),r=this.Y7,n=this.IO().Z5(),o=this.IO().oq(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).zO();u.lB()&&u.aq(h,o,n)&&this.lq(l,u,i,r)}}}eq(e){const h=this.Y7,r=this.uq(),n=Gr,o=Tr,a=this.HJ();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.zO();if(u.lB()&&u.cq(r)){(!l.fq()||0<u.pq())&&o.push(l);const c=l.zO().MN();n.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.zO();if(d.lB()&&d.cq(r)){if(d.MN()!==c)break;(f.fq()?(0<d.pq()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].mq()){this.gq(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.zO();m.yq(!0),this.lq(p,m,e,h),m.yq(!1)}}else{this.lq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.zO(),S=y.JO();S.lq(g,y,e,h)}}}s=t,w.Hn(n),w.Hn(o)}else++s}}gq(i,e){const h=this.Y7;i.QP();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.zO();n.Sq(!0),this.wq(r,n,i)}i.tE();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.zO();this.lq(o,a,i,h),a.Sq(!1)}i.iE()}hq(t){let s=this.Iz,i=this.Pz,e=this.Az,h=this.BB(),r;i.set(s.y7(h.Pl()),s.S7(h.El()),s.y7(h.Fl()),s.S7(h.Dl())),this.Rz&&i.equals(e)?r=this.Cz:(r=this.G9(),this.Rz=!0,e.I(i)),this.rq(t,r),r!==this.Cz&&w.Xn(this.Cz,r)}lq(t,s,i,e){s.I9()?this.bq(t,s,i,e):this.wq(t,s,i)}wq(t,s,i){const e=s.Mq();i.bw()!==e&&e.RM(),t.Fv(i)}bq(t,s,i,e){this.vq(t,s,i,e,null)&&this.nU(i)}vq(t,s,i,e,h){const r=s.dN().ZF();return r.Y3(i,e,{K3:t,Z3:s.DB(),devicePixelRatio:this.bf.xq(),time:t.Gq(),Q3:this.bf.Tq()*this.F9(),tF:this.GetAngle(),MF:s.xN(),vF:r.NF()?null:this._q(s),rF:h&&h.rF,nF:h&&h.nF,oF:h&&h.oF,aF:h&&h.aF}),i.Bw(this.JM()),r.sP()}nq(t,s,i,e){const h=this.wz.vJ(),r=this.bf;0===h.length?(t.XP(i),t.iw(),e&&0===this._M&&this.MJ()?t.YP(s):(t.AM(this._M),t.PM(this.U7),t.$P(s)),t.KP(s),r.xz(s)):this.ZF().Y3(t,i,{K3:this,Z3:this.DB(),devicePixelRatio:r.xq(),Q3:r.Tq()*this.F9(),tF:this.GetAngle(),MF:this.BB(),vF:null,BE:!0})}SB(){return this.K7}yB(t){this.K7!==t&&(this.K7=t,this.P7.Iq(),this._J(),this.bf.ZO())}$B(){return this.F9()*this.bf.$B()}wj(){return this.F9()*this.bf.wj()}F9(){return(this.K7*this.P7.x5()-1)*this.X7+1}EJ(){if(this.rz){this.rz=!1;let t=this.bf.k9(),s=this.bf.L9(),i=(this._5()-t)*this.j7+t,e=(this.C5()-s)*this.V7+s,h=this.F9(),r=this.bf.WJ()/h,n=this.bf.jJ()/h,o=i-r/2,a=e-n/2;this.bf.MD()&&(o=Math.round(o),a=Math.round(a));const l=this.ez,u=(l.set(o,a,o+r,a+n),this.GetAngle()),c=(0!==u&&(dr.I(l),dr.offset(-l.Nl(),-l.Wl()),pr.Ru(dr,u),pr.Pu(dr),dr.offset(l.Nl(),l.Wl()),l.I(dr)),this.CM);this.LJ(c,this.HR),this.KJ()?this.Cq(c,this.hz):this.hz.I(this.HR)}}Cq(t,s){let i=this.bf.eL(),e=i.oL(),h=i.lL(),[r,n]=this.WB(0,0,t),[o,a]=this.WB(e,0,t),[l,u]=this.WB(e,h,t),[c,f]=this.WB(0,h,t),d=Math.min(r,o,l,c),p=Math.min(n,a,u,f),m=Math.max(r,o,l,c),g=Math.max(n,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}WB(t,s,i=0){return this.Rq(t,s,i,this.wj())}JB(t,s,i=0){return this.Rq(t,s,i,this.$B()*this.pL())}Rq(t,s,i,e){const h=this.bf,r=h.uM(),n=this.F9(),o=h.WJ()/n,a=h.jJ()/n,l=wr,u=(Vh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.j9(r)),c=this.P9(r),f=Sr,d=w.Cy.Py(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}Aq(t,s){const i=this.K7,e=this.X7,h=this.j7,r=this.V7,n=this.Z7,o=(this.K7=1,this.X7=1,this.j7=1,this.V7=1,this.Z7=0,this._J(),this.WB(t,s));return this.K7=i,this.X7=e,this.j7=h,this.V7=r,this.Z7=n,this._J(),o}HB(t,s,i=0){return this.Pq(t,s,i,this.wj())}XB(t,s,i=0){return this.Pq(t,s,i,this.$B()*this.pL())}Pq(t,s,i,e){const h=this.bf,r=h.uM(),n=this.F9(),o=h.WJ()/n,a=h.jJ()/n,l=wr,u=(Vh.set(l,0,0,o,a),this.j9(r)),c=this.P9(r),f=Sr,d=w.Cy.Ry(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Eq(t,s){return t*=this.$B()*this.pL(),0!==s&&(t*=this.BJ(s)),t}_q(t){const s=t.xN(),i=t.MN(),e=t.pq(),l=i+e,u=s.Pl(),c=s.El(),f=s.Fl(),d=s.Dl();if(this.KJ()){if(this.Fq(u,c,i)||this.Fq(f,c,i)||this.Fq(f,d,i)||this.Fq(u,d,i))return null;if(0<e&&(this.Fq(u,c,l)||this.Fq(f,c,l)||this.Fq(f,d,l)||this.Fq(u,d,l)))return null}else if(l>=this.NJ())return null;let[p,m]=this.XB(u,c,i),[g,y]=this.XB(f,d,i);if(0!==this.GetAngle()||0<e||this.KJ()){const[S,w]=this.XB(f,c,i),[b,M]=this.XB(u,d,i);if(0<e){let[t,s]=this.XB(u,c,l),[i,e]=this.XB(f,c,l),[h,r]=this.XB(f,d,l),[n,o]=this.XB(u,d,l),a=Math.min(p,g,S,b,t,i,h,n);g=Math.max(p,g,S,b,t,i,h,n),p=a,a=Math.min(m,y,w,M,s,e,r,o),y=Math.max(m,y,w,M,s,e,r,o),m=a}else{let t=Math.min(p,g,S,b);g=Math.max(p,g,S,b),p=t,t=Math.min(m,y,w,M),y=Math.max(m,y,w,M),m=t}}return dr.set(p,m,g,y),dr}uq(){return this.lz&&(this.Dq(),this.lz=!1),this.az}Dq(){const t=this.bf.uM(),s=this.j9(t),i=this.P9(t);this.az.Ny(i,s)}Fq(t,s,i){return this.uq().jy(t,s,i)}Oq(){const t={d:this.SJ(),s:this.SB(),a:this.MB(),v:this.nB(),i:this.uB(),html:this.dB(),bc:this.N7.toJSON(),t:this.RB(),sx:this.Q7,sy:this.sz,hosp:this.iz,px:this.xB(),py:this.TB(),c:this.IM.toJSON(),sr:this.bB(),fx:this.wz.tv(),cg:this.pz};return t}kq(t){this.k7=!!t.d,this.K7=t.s,this.Z7=t.a,this.L7=!!t.v,this.B7=!t.hasOwnProperty("i")||t.i,this.F7=!!t.html,this.N7.Ka(t.bc),this.W7=!!t.t,t.hasOwnProperty("sx")&&(this.Q7=t.sx),t.hasOwnProperty("sy")&&(this.sz=t.sy),t.hasOwnProperty("hosp")&&(this.iz=!!t.hosp),this.j7=t.px,this.V7=t.py,this.IM.Ka(t.c),this.Fz(),this.X7=t.sr,w.Xn(this.pz,t.cg),w.Xn(this.fz,this.uz);let i=new Set(this.pz),e=0;for(let t=0,s=this.fz.length;t<s;++t)i.has(this.fz[t][2])||(this.fz[e]=this.fz[t],++e);w.Un(this.fz,e),this.wz.sv(t.fx),this.Tz=!0}Lq(){this.eJ(!1),this.KO(),this._J(),this.W9()}P5(){return this.Ez}c5(t,s=!1){if(this.e7.includes(t))s&&this.e7.sort((t,s)=>{const i=t.zO().Bq(),e=s.zO().Bq();return i-e});else if(t.Nq()){const i=[...t.KN()];i.push(t),i.sort((t,s)=>{const i=t.zO().Bq(),e=s.zO().Bq();return i-e});for(const e of i)if(e.u4())for(const h of e.c4())if(!i.includes(h)){const r=[...h.KN()];r.push(h),r.sort((t,s)=>{const i=t.zO().Bq(),e=s.zO().Bq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.XL().TL()&&this.$z(n,!0)}else if(t.XL().TL()&&this.$z(t,!0),t.u4())for(const o of t.c4()){const a=[...o.KN()];if(a.push(o),a.sort((t,s)=>{const i=t.zO().Bq(),e=s.zO().Bq();return i-e}),a&&a.length)for(const l of a)l.XL().TL()&&this.$z(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},M=function(t,s){I!==t&&(t.J9(s),I=t)},v=(l,M,self.Ws),e=self.C3Debugger,h=(v.Sr(v.Rect),v.Sr(v.Rect),v.Sr(v.Rect)),x=v.Sr(v.Yo),t=self.xs,u=t.Ps,a=[],G=[],T=[],_=[],I=null;v.Wq=class extends v.dr{constructor(t,s,i){super(),this.jq=t,this.bf=t.pk(),this.vr=i[0],this.Vq=i[1],this.Uq=i[2],this.pg=i[1],this.mg=i[2],this.Hq=!!i[3],this.zq=!!i[4],this.Jq=i[5],this.qq=i[6],this.Xq=i[7],this.Yq=null,this.O7=i[8],this.by=s,this.Q7=0,this.sz=0,this.K7=1,this.Z7=0,this.$q=new Set,this.Kq=new Set,this.Zq=new Set,this.Qq=[],this.tX=[],this.sX=new Map,this.iX=new Map,this.eX=[],this.hX=!1,this.rX=u.create(),this.nX=u.create(),this.aX=u.create(),this.lX=[],this.uX=[],this.cX=new Map,this.fX=new Map,this.dX=-1;const h=this.bf.eL();this.wz=v.Sr(v.bz,this,i[11]),this.YF=v.Sr(v.Cy.JE,h.Mz(),{OE:(t,s)=>{const i=s.jF(),e=i.VP();t.oP(),t.$P(e),t.KP(e),h.xz(e)},LE:t=>this.S5().Gz(t)}),this.Tz=!0,this.pX=!1,this.Y7=null,this.mX={},this.gX=new Map,this.yX=!0,this.SX=new self.y5(this),this.wX=v.Sr(v.Event.Qf);for(const e of i[9])this.lX.push(v.A7.kz(this,null,e));this.bX();for(const r of this.D5())r.Lz();for(const n of i[10]){const o=this.bf.Bz(n[1]);if(!o)throw new Error("missing nonworld object class");o.Wz()||o.jz(n),this.eX.push(n),this.Nz(o)}}wr(){for(const t of this.uX)t.wr();v.Hn(this.uX),this.Zq.clear(),this.Yq=null,this.jq=null,this.bf=null}pk(){return this.bf}cf(){return this.vr}yJ(){return this.O7}QF(){return this.by}S5(){return this.wz}ZF(){return this.bJ(),this.YF}bJ(){const t="low"===this.bf.eL().tq();if(this.Tz||this.pX!==t||this.YF.N3()){const s=this.S5().vJ();this.YF.W3(s.map(t=>t.BG()),{NE:s.map(t=>t.QF()),jE:t,zE:!0}),this.Tz=!1,this.pX=t}}iW(){this.S5().iW(),this.Tz=!0}MX(){let i=this.uX[0].F9();for(let t=1,s=this.uX.length;t<s;++t){const e=this.uX[t];0===e.xB()&&0===e.TB()||(i=Math.min(i,e.F9()))}return i}vX(){return.5*this.bf.WJ()/this.MX()}xX(){return.5*this.bf.jJ()/this.MX()}CJ(){return this.GX()?-1/0:this.vX()}RJ(){return this.GX()?1/0:this.Pm()-this.vX()}AJ(){return this.GX()?-1/0:this.xX()}PJ(){return this.GX()?1/0:this.jm()-this.xX()}T5(t){const s=this.CJ(),i=this.RJ();this.Q7!==(t=(t=i<t?i:t)<s?s:t)&&(this.Q7=t,this.TX(),this.bf.ZO())}_5(){return this.Q7}I5(t){const s=this.AJ(),i=this.PJ();this.sz!==(t=(t=i<t?i:t)<s?s:t)&&(this.sz=t,this.TX(),this.bf.ZO())}C5(){return this.sz}GX(){return this.Hq}Iq(){this.T5(this._5()),this.I5(this.C5());for(const t of this.uX)t.IJ()&&(t.T5(t._5()),t.I5(t.C5()))}J5(t,s){this.Jq===t&&this.qq===s||(this.Jq=t,this.qq=s,this._X()&&(this.IX(),this.TX(),this.bf.ZO()))}OJ(){return this.Z5()?.5:this.Jq}kJ(){return this.Z5()?.5:this.qq}oq(){const t=this.OJ(),s=this.kJ();return t<0||1<t||s<0||1<s}Y5(){this.zq&&(this.zq=!1,this.IX(),this.TX(),this.bf.ZO())}K5(){this.zq||(this.zq=!0,this.IX(),this.TX(),this.bf.ZO())}Z5(){return this.zq}_X(){return!this.Z5()}CX(t){this.hX!==(t=!!t)&&(this.hX=t,this.TX(),this.bf.ZO())}ZJ(){return this.hX}RX(t,s,i,e,h,r,n,o,a){l(this.rX,t,s,i)&&l(this.nX,e,h,r)&&l(this.aX,n,o,a)||(u.set(this.rX,t,s,i),u.set(this.nX,e,h,r),u.set(this.aX,n,o,a),this.AX())}AX(){this.TX(),this.bf.ZO()}XJ(){return this.rX}B9(){return this.nX}N9(){return this.aX}x5(){return this.K7}v5(t){this.K7!==t&&(this.K7=t,this.TX(),this.Iq(),this.bf.ZO())}G5(t){t=v._r(t),this.Z7!==t&&(this.Z7=t,this.TX(),this.bf.ZO())}GetAngle(){return this.Z7}Pm(){return this.pg}Bm(t){!isFinite(t)||t<1||(this.pg=t)}jm(){return this.mg}Em(t){!isFinite(t)||t<1||(this.mg=t)}PX(){return this.Yq}gJ(){return this.lX}*D5(){for(const t of this.lX)yield*t.rB()}F5(){return this.uX}EX(){return this.uX.length}JO(t){return"number"==typeof t?this.XO(t):this.cJ(t.toString())}XO(t){return t=v.Tr(Math.floor(t),0,this.uX.length-1),this.uX[t]}cJ(t){return this.cX.get(t.toLowerCase())||null}FX(t){return!!this.cJ(t)}DX(t){return this.fX.get(t)||null}IX(){for(const t of this.uX)t.W9()}TX(){for(const t of this.uX)t._J()}B5(t,s,i){if(this.FX(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.tB(),h=v.Sr(v.A7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),v7:!0});this.OX(h,s,i),this.pk().ZO(),this.pJ()}W5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.kX(t),this.OX(t,s,i),this.pk().ZO(),this.pJ())}V5(t){if(this.kX(t)){const s=this.bf.AD();s.f5(!0),t.wr(),s.f5(!1),this.pk().ZO(),this.pJ()}}H5(){const t=new Set;for(const s of this.D5())s.SJ()&&!s.wJ()&&t.add(s);if(0!==t.size){const i=this.bf.AD();i.f5(!0);for(const e of t)this.kX(e),e.wr();i.f5(!1),this.pk().ZO(),this.pJ()}}OX(s,i,e){if(2<=e)if(i){if(i===s||i.a9(s))throw new Error(`cannot move layer '${s.cf()}' to sub-layer of itself`);i.e9(s,2===e),s.s9(i)}else 2===e?this.lX.push(s):this.lX.unshift(s),s.s9(null);else{const t=i.tB();if(t){if(i.a9(s))throw new Error(`cannot move layer '${s.cf()}' to sub-layer of itself`);t.h9(s,i,0===e),s.s9(t)}else{let t=this.lX.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.lX.splice(t,0,s),s.s9(null)}}}kX(t){const s=t.tB();if(s)return s.r9(t),!0;if(1<this.lX.length){const i=this.lX.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.lX.splice(i,1),!0}return!1}bX(){this.uX=[...this.D5()],this.cX.clear(),this.fX.clear();for(let t=0,s=this.uX.length;t<s;++t){const i=this.uX[t];i.fJ(t),this.cX.set(i.cf().toLowerCase(),i),this.fX.set(i.yJ(),i)}}LX(){let t=0;for(const s of this.lX){for(const i of s.rB())i.dJ(t);s.dB()&&t++}}BX(){return this.lX.at(-1).uj()+1}async pJ(){this.bX(),this.LX(),this.dX=this.BX()}NX(){return this.dX}WX(){this.dX=-1}g9(t){const s=[];for(const i of this.lX){const e=i.uj();if(e===t)s.push(i);else if(t<e)break}return s}u9(){return{scrollX:this._5(),scrollY:this.C5(),scale:this.x5(),angle:this.GetAngle(),vpX:this.OJ(),vpY:this.kJ()}}c9(t){this.T5(t.scrollX),this.I5(t.scrollY),this.v5(t.scale),this.G5(t.angle),this.J5(t.vpX,t.vpY)}jX(){let t=this.lX.filter(t=>t.o9())[0];for(;t;){if(!t.RB())return x.ca(t.OB()),x.ua(1),x;if(t._9())return x.ta(0,0,0,0),x;t=t.eB().filter(t=>t.o9())[0]}return x.ta(0,0,0,0),x}Jz(){return this.yX}VX(){return[...this.$q]}Nz(t){if(t.u4())for(const s of t.HX().UX())this.$q.add(s);else this.$q.add(t)}zX(){return[...this.Kq]}JX(t,s){if(t===this||!s)return Promise.resolve();t&&(v.jo(this.Kq,t.Kq),t.Kq.clear());const i=[];for(const e of this.$q)this.Kq.has(e)||(i.push(e.qX(s)),this.Kq.add(e));return Promise.all(i)}async XX(t){if(t.lJ())throw new Error("cannot load textures for family");const s=this.bf.uM();if(s&&!s.eR()&&!this.Kq.has(t)){this.Kq.add(t);const i=t.qX(s);this.YX(i),await i,t.$X(),this.bf.ZO()}}YX(t){this.Zq.add(t),t.then(()=>this.Zq.delete(t)).catch(()=>this.Zq.delete(t))}KX(){return Promise.all([...this.Zq])}ZX(t){if(t.lJ()||0<t.a5())throw new Error("cannot unload textures");const s=this.bf.uM();s&&this.Kq.has(t)&&(this.Kq.delete(t),t.QX(s))}tY(t,s){if(t!==this&&s)for(const i of this.Kq)i.Yz()||t.$q.has(i)||(i.QX(),this.Kq.delete(i))}sY(){this.Kq.clear()}async iY(t){const s=this.bf,i=this.jq,e=s.AD(),h=(this.Xq&&(this.Yq=e.eY(this.Xq),this.Yq.hY()),i.rY(this),this.pg=this.Vq,this.mg=this.Uq,this.Q7=s.gD()/2,this.sz=s.SD()/2,this.Iq(),this.IX(),this.TX(),this.LX(),await this.bf.eL().nY(this.BX(),!0),this.aY(t),this.bf.lY(!0),this.uY(),this.yX||this.cY(),this.fY(this.Qq),this.fY(this.tX),this.dY(),i.pY(),s.g5(),this.bf.lY(!1),this.bf.mY());if(await Promise.all(h),v.Hn(h),!s.gY()){for(const r of this.Qq)r.yY();for(const n of this.tX)n.SY(this.sX,this.iX);for(const[o,a]of Object.entries(this.mX)){const l=this.bf.Zj(parseInt(o,10));l&&!l.lJ()&&l.qz()&&v.Hn(a)}for(const u of this.Qq)u.wY();for(const c of this.tX)c.wY()}v.Hn(this.Qq),v.Hn(this.tX),this.sX.clear(),this.iX.clear(),await Promise.all([...this.$q].map(t=>t.bY(this.bf.uM()))),t&&(s.Qf().dispatchEvent(new v.Event("beforefirstlayoutstart")),await s.MY(new v.Event("beforeprojectstart"))),await this.vY(new v.Event("beforeanylayoutstart")),s.Qf().dispatchEvent(new v.Event("beforelayoutstart")),await this.MY(new v.Event("beforelayoutstart")),s.gY()||await s.j4(v._Y.TY.GY.xY,null,null),s.Qf().dispatchEvent(new v.Event("afterlayoutstart")),await this.MY(new v.Event("afterlayoutstart")),await this.vY(new v.Event("afteranylayoutstart")),t&&(s.Qf().dispatchEvent(new v.Event("afterfirstlayoutstart")),await s.MY(new v.Event("afterprojectstart"))),e.IY(i),await this.KX(),this.yX=!1}aY(t){for(const s of this.bf.aJ())if(!s.lJ()&&s.TL())for(const i of s.r5()){const e=i.zO(),h=e.JO(),r=v.Tr(h.QF(),0,this.uX.length-1),n=this.uX[r];e.$O(n,!0),n.Kz(i)}if(!t)for(const o of this.uX)o.eJ(!1)}uY(){for(const t of this.uX)t.zz(this.Qq),t.rJ()}cY(){let s=!1;for(const[t,i]of Object.entries(this.mX)){const e=this.bf.Zj(parseInt(t,10));if(e&&!e.lJ()&&e.qz())for(const h of i){let t=null;if(!e.TL()||(t=h.hasOwnProperty("instJson")?this.DX(h.instJson.w.l):this.DX(h.w.l))){const r=this.bf.Xz(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.sv(h.instJson):r.sv(h),s=!0,this.tX.push(r),h.hasOwnProperty("instJson")&&(this.sX.set(r,h),this.iX.set(h.index,r))}}}for(const n of this.uX)n.eJ(!0),n.KO();s&&(this.bf.g5(),this.bf.CY())}fY(s){for(const i of s)if(i.u4()){const e=i.zO(),t=i.RY();for(const h of i.QB().HX().AY())if(h!==i.QB()){const r=h.r5();if(r.length>t)i.PY(r[t]);else{let t;t=e?this.bf.Xz(h,e.JO(),!0,e.jM(),e.HM(),!0):this.bf.Xz(h,null,!0,0,0,!0),this.bf.g5(),h.EY(),i.PY(t),s.push(t)}}}}dY(){for(const t of this.eX){const s=this.bf.Bz(t[1]);s.u4()||this.bf.Xz(t,null,!0)}}FY(){let i=[],e=this.eX,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.bf.Bz(r[1]);n.Yz()?n.u4()&&n.HX().DY()||i.push(this.bf.Xz(r,null,!0)):(e[h]=r,++h)}v.Un(e,h),this.bf.g5(),this.fY(i)}oJ(t,s,i,e,h,r,n){if(i)return i.oJ(t,s,h,r,e,n);{const o=[];for(const a of this.uX)o.push(a.oJ(t,s,h,r,e,n));return o.flat()}}async OY(){const t=this.jq;this.bf.gY()||(await this.vY(new v.Event("beforeanylayoutend")),await this.MY(new v.Event("beforelayoutend")),await this.bf.j4(v._Y.TY.GY.kY,null,null),await this.MY(new v.Event("afterlayoutend")),await this.vY(new v.Event("afteranylayoutend"))),t.LY(!0),this.bf.AD().BY(),this.yX||this.NY();for(const s of this.uX)s.nJ();for(const i of this.bf.aJ())if(!(i.Yz()||i.TL()||i.XL().xL()||i.lJ())){for(const e of i.r5())this.bf.r4(e);this.bf.g5()}t.LY(!1),t.xO()===this&&t.rY(null)}WY(t,s){const i=t.QB().yJ().toString(),e=(this.mX.hasOwnProperty(i)||(this.mX[i]=[]),this.mX[i]),h={index:s,instJson:t.tv(),sceneGraphJson:{children:[]}};e.push(h),this.gX.set(t,h)}jY(t){const s=this.gX.get(t);for(const i of t.VY()){const e=this.gX.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:v.HY.UY(i.zO())})}}NY(){this.gX.clear();let t=0;for(const s of this.uX){s.d9();for(const i of s.YO()){const e=i.QB();!e.Yz()&&e.qz()&&(this.WY(i,t),t++)}}for(const h of this.uX)for(const r of h.YO()){const n=r.QB();!n.Yz()&&n.qz()&&this.jY(r)}this.gX.clear()}zY(){this.mX={},this.yX=!0}VP(){return this.Y7}_9(){const t=this.bf,s=t.uM().Ob();return"low"===t.eL().tq()||s&&t.Q9()||this.wz.I9()||s&&t.$J()}JY(t){const s=this.bf.eL();if(this._9()){t.XP(null),t.OP(0,0,0,0);const i={Hv:this.bf.wD(),F2:t.JS()||this.bf.Q9()||this.wz.I9(),Z9:!!t.JS()&&this.bf.Q9()};"low"===s.tq()&&(i.width=s.U9(),i.height=s.H9()),this.Y7=this.bf.sq(i)}else this.Y7=null}qY(t){this.bf.XY(t)&&(t.BP(!1),t.XP(null),t.iw(),t.YP(this.Y7))}YY(t){this._9()&&(t.BP(!1),this.$Y(t,this.Y7))}KY(t){t.XP(this.Y7),t.lc(this.jX()),this.bf.$J()&&t.LP();const s=this.g9(0);this.iq(t,this.Y7,s,!0),t.JS()&&t.StartMeasuringRenderPassTime(0,1),this.YY(t),this.Y7=null}ZY(t,s){let i=null;this.bf.XY(t)&&(i=this.Y7),t.XP(i),t.OP(0,0,0,0),this.bf.$J()&&t.LP();const e=this.g9(s);this.iq(t,i,e,!0),this.qY(t),t.Cb(),this.bf.eL().QY(s)}iq(t,e,s,h){const r=s.filter(t=>t.o9());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.QJ()&&!n.C9()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.QJ()||o.C9())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].n9()){this.t$(t,e,a),s+=a.length,v.Hn(a);continue}v.Hn(a)}n.Fv(t,e,h&&0===s),++s}}$Y(t,s){const i=this.wz.vJ(),e=this.bf;0===i.length?(t.XP(null),t.iw(),t.YP(s),t.KP(s),e.xz(s)):(h.set(0,0,e.WJ(),e.jJ()),this.ZF().Y3(t,null,{K3:this,Z3:3,devicePixelRatio:this.bf.xq(),Q3:this.bf.Tq()*this.x5(),tF:this.GetAngle(),MF:h,vF:null,BE:!0}))}t$(e,h,t){t[0].RB()||(x.ca(t[0].OB()),x.ua(1),e.lc(x)),this.bf.eL(),e.BP(!0);const r=G,n=T,o=_;for(const a of t)a.d9(),a.qJ(r);const s=t[0],i=s.q9(e);s.K9(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.zO(),c=u.JO();if(u.lB()&&u.cq(c.uq())){(!l.fq()||0<u.pq())&&o.push(l);const f=l.zO().MN();n.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.zO();if(p.lB()&&p.cq(p.JO().uq())){if(p.MN()!==f)break;(d.fq()?(0<p.pq()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].mq()){this.s$(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.zO(),y=g.JO();g.yq(!0),M(y,e),y.lq(m,g,e,h),g.yq(!1)}}else{M(c,e),c.lq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const S=o[t];if(S!==l){const w=S.zO(),b=w.JO();M(b,e),b.lq(S,w,e,h)}}}s=t,v.Hn(n),v.Hn(o)}else++s}i&&e.rE(i),v.Hn(r),I=null}s$(i,e,h){i.QP();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.zO(),o=n.JO();n.Sq(!0),M(o,i),o.wq(r,n,i)}i.tE();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.zO(),u=l.JO();M(u,i),u.lq(a,l,i,e),l.Sq(!1)}i.iE()}Oq(){const t={sx:this._5(),sy:this.C5(),s:this.x5(),a:this.GetAngle(),w:this.Pm(),h:this.jm(),ortho:this.Z5(),vpX:this.OJ(),vpY:this.kJ(),fv:this.yX,persist:this.mX,fx:this.wz.tv(),layers:{},dynamicLayers:[]};for(const s of this.uX)if(s.SJ()){const i=s.tB();t.dynamicLayers.push({sid:s.yJ(),name:s.cf(),parentSid:i?i.yJ():null,siblingIndex:s.mJ(),data:s.Oq()})}else t.layers[s.yJ().toString()]=s.Oq();return t}kq(t){this.Q7=t.sx,this.sz=t.sy,this.K7=t.s,this.Z7=t.a,this.pg=t.w,this.mg=t.h,this.zq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Jq=t.vpX),t.hasOwnProperty("vpY")&&(this.qq=t.vpY),this.yX=!!t.fv,this.mX=t.persist,this.wz.sv(t.fx),this.Tz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.DX(e);h&&h.kq(i)}if(t.hasOwnProperty("dynamicLayers")){this.H5(),this.bf.g5();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.bX(),!this.FX(l)&&!this.DX(a)){let t,s;if(null===u)t=null,s=this.lX;else{if(!(t=this.DX(u)))continue;s=t.eB()}const d=v.Sr(v.A7,this,t,{name:l,sid:a,v7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({pN:d,siblingIndex:c}),d.kq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.pN,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.pJ(),this.IX(),this.TX()}GO(){return this.SX}_D(){return this.wX}i$(t){t.layout=this.GO();const s=this.bf,i=s.e$()&&!s.AD().p5();i&&e.StartMeasuringScriptTime(),this.wX.dispatchEvent(t),i&&e.AddScriptTime()}MY(t){return t.layout=this.GO(),this.wX.o0(t)}vY(t){return t.layout=this.GO(),this.bf.MY(t)}h$(){this.r$(this.lX)}r$(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.cf()),this.r$(e.eB(),s+1)}}}{const Cr=self.Ws;Cr.n$=class extends Cr.dr{#Qj;#o$=[];#a$=new Map;#l$=new Map;#u$=null;#c$=[];#f$=null;#d$=0;#p$=null;constructor(t){super(),this.#Qj=t}wr(){this.#Qj=null,this.#u$=null,this.#f$=null,this.#p$=null,Cr.Hn(this.#o$),this.#a$.clear(),this.#l$.clear(),Cr.Hn(this.#c$)}Bx(t){const s=Cr.Sr(Cr.Wq,this,this.#o$.length,t);this.#o$.push(s),this.#a$.set(s.cf().toLowerCase(),s),this.#l$.set(s.yJ(),s)}pk(){return this.#Qj}m$(t){this.#f$=t}g$(){if(this.#f$)return this.#f$;if(this.#o$.length)return this.#o$[0];throw new Error("no first layout")}y$(t){return this.#a$.get(t.toLowerCase())||null}S$(t){return this.#l$.get(t)||null}w$(t){return t=Cr.Tr(Math.floor(t),0,this.#o$.length-1),this.#o$[t]}IO(t){return"number"==typeof t?this.w$(t):this.y$(t.toString())}RO(){return this.#o$}rY(t){this.#u$=t}xO(){return this.#u$}b$(t){if(this.#c$.includes(t))throw new Error("layout already running");this.#c$.push(t)}M$(t){const s=this.#c$.indexOf(t);if(-1===s)throw new Error("layout not running");this.#c$.splice(s,1)}*v$(){this.#u$&&(yield this.#u$),this.#c$.length&&(yield*this.#c$)}x$(t){return this.#u$===t||this.#c$.includes(t)}LY(t){if(t)this.#d$++;else{if(this.#d$<=0)throw new Error("already unset");this.#d$--}}m5(){return 0<this.#d$}EO(t){this.#p$=t}pY(){this.#p$=null}PO(){return!!this.#p$}G$(){return this.#p$}T$(){const t=this.xO();t&&t.IX()}_$(){const t=this.xO();t&&t.TX()}}}{const Rr=self.Ws,Ar=new RegExp("<(.+?)>","g");Rr.I$=class extends Rr.dr{constructor(t){super(),this.bf=t,this.C$=Rr.Sr(Rr.R$),this.A$=null,this.P$=[],this.E$=new Map,this.F$=new Map,this.D$=new Map,this.O$=[],this.k$=[],this.L$=[],this.B$=!1,this.N$=!1,this.W$=!1,this.j$=()=>this.V$(),this.U$=()=>this.H$(),this.z$=()=>this.J$(),this.q$=()=>this.X$(),this.Y$=t=>this.$$(t.X6),this.K$=t=>this.Z$(),this.Q$=t=>this.tK(),this.sK=t=>this.iK(),this.eK=[],this.hK=0}wr(){this.rK(),this.j$=null,this.U$=null,this.z$=null,this.q$=null,this.Y$=null,this.Q$=null;for(const t of this.P$)t.HW(),t.wr();Rr.Hn(this.P$),this.P$=null,this.C$.wr(),this.C$=null,Rr.Hn(this.O$),this.O$=null,Rr.Hn(this.k$),this.k$=null,Rr.Hn(this.L$),this.L$=null,this.E$.clear(),this.E$=null,this.F$.clear(),this.F$=null,this.D$.clear(),this.D$=null,Rr.Hn(this.eK),this.eK=null,this.bf=null}nK(){const t=this.bf.Qf();t.addEventListener("pretick",this.j$),t.addEventListener("tick2",this.U$),t.addEventListener("beforelayoutchange",this.z$),t.addEventListener("layoutchange",this.q$),t.addEventListener("instancedestroy",this.Y$),t.addEventListener("beforeload",this.K$),t.addEventListener("afterload",this.Q$),t.addEventListener("afterlayoutstart",this.sK)}rK(){const t=this.bf.Qf();t.removeEventListener("pretick",this.j$),t.removeEventListener("tick2",this.U$),t.removeEventListener("beforelayoutchange",this.z$),t.removeEventListener("layoutchange",this.q$),t.removeEventListener("instancedestroy",this.Y$),t.removeEventListener("beforeload",this.K$),t.removeEventListener("afterload",this.Q$),t.removeEventListener("afterlayoutstart",this.sK)}Bx(t){this.C$.Gc(t);const s=Rr.aK.oK(t,this);this.Gc(s),this.lK(s),this.D$.set(s.cf(),0)}uK(t){const s=this.cK(),i=t.m4(),e=s.ni(i),h=Rr.aK.uK(i+":"+this.D$.get(i),e,this);return this.fK(i),this.Gc(h),h}fK(t){this.D$.set(t,this.D$.get(t)+1)}dK(){for(const t of this.P$)if(!t.pK()){const s=t.m4();this.fK(s)}}mK(){for(const t of this.D$.keys())this.D$.set(t,0)}Gc(t){this.P$.push(t),this.E$.set(t.cf().toLowerCase(),t)}E0(t){t.gK(),t.pK()||(Rr.$n(this.P$,t),Rr.$n(this.O$,t),Rr.$n(this.k$,t),Rr.$n(this.L$,t),this.E$.delete(t.cf().toLowerCase()),this.yK(t),t.VW())||t.wr()}N4(t){this.bf.N4(t,this.A$,null)}pk(){return this.bf}cK(){return this.C$}SK(t){this.A$=t}wK(){return this.A$}*bK(){for(const t of this.P$)yield t}*MK(){for(const t of this.k$)yield t}vK(t,s){this.F$.has(t)||this.F$.set(t,new Set),this.F$.get(t).add(s)}lK(t){for(const s of t.xK())this.vK(s,t)}yK(t){for(const[s,i]of this.F$.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.F$.delete(s)}GK(t){if(this.F$.has(t))return this.F$.get(t)}TK(t,s){if(s)for(const i of this.P$){const e=s.every(t=>i._K(t.X6,t.trackId));if(e&&i.cf().includes(t.cf()))return i}}IK(t){return this.E$.get(t.toLowerCase())||null}CK(t){for(const s of this.O$)if(s.cf()===t)return s;for(const i of this.k$)if(i.cf()===t)return i;return null}*RK(i){if(Ar.test(i)){Ar.lastIndex=0;let t,s=new Set;do{if(t=Ar.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.IK(r);n&&(yield n)}s.clear()}else{const t=this.IK(i);t&&(yield t)}}*AK(t){for(const s of this.P$)s.JW(t)&&(yield s)}PK(t){this.O$.includes(t)||this.O$.push(t),this.EK()}FK(t){Rr.$n(this.k$,t),this.DK()}kK(t){this.k$.includes(t)?(t.LK(!0),t.BK(!1),t.NK(!1)):(t.LK(!1),t.BK(!0),t.NK(!1),this.O$.includes(t)||this.O$.push(t)),this.EK()}WK(t){t.LK(!1),t.BK(!1),t.jK(),Rr.$n(this.O$,t),this.DK()}VK(t){t.LK(!1),t.BK(!1),this.k$.includes(t)&&(t.NK(!0),this.L$.push(t),Rr.$n(this.k$,t)),this.O$.includes(t)&&t.NK(!0)}UK(t){t.LK(!1),t.BK(!1),t.NK(!1),t.t8(1),Rr.$n(this.k$,t)}HK(t){this.VK(t),t.jK()}V$(){if(!this.pk().gY()&&this.B$&&!this.N$){for(this.W$=!0;this.O$.length;){const t=this.O$.pop();(t.zK()?(t.JK(),this.L$):(t.qK(),this.k$)).push(t),0!==t.XK()&&(this.hK=1)}const s=this.bf.YK(),i=this.bf.$K(),e=this.bf.hO();for(let t=this.k$.length-1;0<=t;t--){const h=this.k$[t];h&&h.KK(s,e,i)}this.W$=!1,0!==this.hK&&this.pk().ZO()}}H$(){if(!this.pk().gY()&&this.B$&&!this.N$){let i;for(let t=0,s=this.L$.length;t<s;t++){const e=this.L$[t];i=i||new Set,e.gK(),this.ZK(e),i.add(e)}if(i){Rr.Qn(this.L$,i);for(let t=this.hK=0,s=this.k$.length;t<s;t++)if(0!==this.k$[t].XK()){this.hK=1;break}}this.DK()}}ZK(t){t.VW()||t.QK()&&t.tZ()&&t.sZ()&&t.iZ()}EK(){this.B$||(this.B$=!0)}DK(){this.L$.length||this.k$.length||this.O$.length||this.W$||(this.B$=!1)}J$(){for(this.N$=!0;this.O$.length;)this.WK(this.O$.pop());const t=new Set;for(const s of this.k$){const i=s.J$();i&&(s.gK(),t.add(s))}Rr.Qn(this.k$,t),t.clear();for(const e of this.L$){const h=e.J$();h&&(e.gK(),t.add(e))}Rr.Qn(this.L$,t),this.DK();for(const r of this.P$)r.eZ()}X$(){this.N$=!1}$$(t){const s=t.QB(),i=this.GK(s);if(i)if(this.bf.gY())this.eK.push(t);else for(const e of i)e.pK()||(e.VW()?this.E0(e):e.QK()||(this.ZK(e),this.E0(e)))}Z$(){for(const t of this.O$.map(t=>t))this.ZK(t),this.E0(t);for(const s of this.k$.map(t=>t))this.ZK(s),this.E0(s)}tK(){for(const t of this.eK)this.$$(t);Rr.Hn(this.eK);for(const s of this.P$)s.tK()}iK(){const t=this.bf._O(),s=t.xO();if(s)for(const i of this.P$){const e=i.hZ();e&&s.cf()===e&&this.kK(i)}}Oq(){return{timelinesJson:this.rZ(),scheduledTimelinesJson:this.nZ(),playingTimelinesJson:this.oZ(),markedForRemovalTimelinesJson:this.aZ(),hasRuntimeListeners:this.B$,changingLayout:this.N$,isTickingTimelines:this.W$}}kq(t){t&&(this.mK(),this.lZ(t.timelinesJson),this.uZ(t.scheduledTimelinesJson),this.cZ(t.playingTimelinesJson),this.fZ(t.markedForRemovalTimelinesJson),this.B$=!t.hasRuntimeListeners,this.N$=!!t.changingLayout,this.W$=!!t.isTickingTimelines,this.dK(),this.EK(),this.DK())}rZ(){return this.P$.map(t=>t.Oq())}lZ(t){for(const s of t){let t=this.IK(s.name);if(t)t.kq(s);else{const i=this.dZ(s);if(!i)continue;const e=this.IK(i);(t=this.uK(e)).kq(s)}t.pZ()||this.E0(t)}}dZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}nZ(){return this.mZ(this.O$)}uZ(t){this.gZ(t,this.O$)}oZ(){return this.mZ(this.k$)}cZ(t){this.gZ(t,this.k$)}aZ(){return this.mZ(this.L$)}fZ(t){this.gZ(t,this.L$)}yZ(t,s){if(s)for(const i of s)if(i===t.cf())return!0;return!1}mZ(t){return t.map(t=>t.cf())}gZ(t,s){const i=new Set;for(const e of s)this.yZ(e,t)||i.add(e);if(Rr.Qn(s,i),t)for(const h of t){const r=this.IK(h);if(r){const n=s.find((s=>t=>t.cf()===s)(h));n||s.push(r)}}}}}{const Pr=self.Ws,Er=[0,0],Fr=[0,0],Dr=[0,0],Or=[0,0,0,0,0],kr=new Array(4),Lr=[{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0}],Br={x:0,y:0,t:0,At:0};Pr.SZ=class{constructor(t,s){this.wZ=!1,this.bZ=t,this.MZ=[];let i=null;if(i=s?this.bZ.vZ(s):Pr.first(this.bZ.xZ())){const e=i.y8("offsetX"),h=i.y8("offsetY");if(e&&h){this.GZ=e,this.TZ=h;const r=e._Z(),n=h._Z();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.IZ(),o.CZ()),l=n[t],u=(l.IZ(),l.CZ());a&&"cubic-bezier"===a.RZ()&&u&&"cubic-bezier"===u.RZ()?this.MZ.push(Pr.Sr(Pr.AZ,a,u,o,l,this.MZ.length)):(a&&"line"===a.RZ()&&u&&u.RZ(),this.MZ.push(Pr.Sr(Pr.PZ,o,l,this.MZ.length)))}this.wZ=!0}}}wr(){for(const t of this.MZ)t.wr();Pr.Hn(this.MZ),this.MZ=null,this.bZ=null,this.GZ=null,this.TZ=null}EZ(){return this.wZ}FZ(){return this.MZ}DZ(t){const s="relative"===this.GZ.OZ()?t.jM():0,i="relative"===this.TZ.OZ()?t.HM():0;for(const e of this.MZ)e.DZ(s,i)}Ry(s,i,t){let e=NaN,h=this.MZ.length;for(let t=0;t<h;t++){const r=this.MZ[t];if("cubic-bezier"===r.jG()){const n=r.Ry(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Dr[0]=n[2],Dr[1]=r.QF())}}return Dr}kZ(s,i,t){const e=t.LZ;Pr.Se(e[0])||(e[0]=0),Pr.Se(e[1])||(e[1]=1);let h=NaN,r=this.MZ.length;for(let t=0;t<r;t++){const n=this.MZ[t];if("cubic-bezier"===n.jG()){const o=n.BZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Dr[0]=o[2],Dr[1]=n.QF())}}return Dr}NZ(t,s){return this.MZ[s].NZ(t)}WZ(t,s){return this.MZ[s].WZ(t)}},Pr.AZ=class{constructor(t,s,i,e,h){this.by=h;const r=t.jZ("cubic-bezier"),n=i.jZ("cubic-bezier"),o=s.jZ("cubic-bezier"),a=e.jZ("cubic-bezier");this.VZ=t.UZ(),this.HZ=s.UZ(),this.zZ=t.UZ()+r.JZ(),this.qZ=s.UZ()+o.JZ(),this.XZ=i.UZ()+n.YZ(),this.$Z=e.UZ()+a.YZ(),this.KZ=i.UZ(),this.ZZ=e.UZ(),this.QZ=0,this.tQ=0,this.sQ=0,this.iQ=0,this.eQ=0,this.hQ=0,this.rQ=0,this.nQ=0,this.oQ=0,this.aQ=0,this.lQ=0,this.uQ=0,this.cQ=0,this.fQ=0,this.dQ=0,this.pQ=0,this.mQ=0,this.gQ=0,this.yQ=0,this.SQ=0,this.wQ=NaN,this.wZ=!1,this.bQ=100,this.MQ=new Array(this.bQ+1),this.MQ[0]=0,this.vQ=0,this.xQ=[],this.GQ=[];for(let t=0;t<100;t++)this.GQ.push({x:0,y:0,t:0,At:0});this.TQ()}wr(){Pr.Hn(this.MQ),this.MQ=null,Pr.Hn(this.xQ),this.xQ=null,Pr.Hn(this.GQ),this.GQ=null}jG(){return"cubic-bezier"}QF(){return this.by}_Q(){return Math.floor(this.vQ/25)}IQ(){return 1/this._Q()}DZ(t,s){this.CQ=t,this.RQ=s,this.MQ=new Array(this.bQ+1),this.MQ[0]=0,this.TQ(),this.QZ=this.VZ+this.CQ,this.tQ=this.HZ+this.RQ,this.sQ=this.zZ+this.CQ,this.iQ=this.qZ+this.RQ,this.eQ=this.XZ+this.CQ,this.hQ=this.$Z+this.RQ,this.rQ=this.KZ+this.CQ,this.nQ=this.ZZ+this.RQ,this.oQ=3*(this.sQ-this.QZ),this.aQ=3*(this.iQ-this.tQ),this.lQ=3*(this.eQ-this.sQ),this.uQ=3*(this.hQ-this.iQ),this.cQ=3*(this.rQ-this.eQ),this.fQ=3*(this.nQ-this.hQ),this.dQ=3*(this.sQ-this.QZ),this.pQ=3*(this.QZ+this.eQ-2*this.sQ),this.mQ=this.rQ-this.QZ+3*(this.sQ-this.eQ),this.gQ=3*(this.iQ-this.tQ),this.yQ=3*(this.tQ+this.hQ-2*this.iQ),this.SQ=this.nQ-this.tQ+3*(this.iQ-this.hQ)}Map(t){if(!this.wZ)return NaN;const s=this.AQ(t);return Fr[0]=this.PQ(s),Fr[1]=this.EQ(s),Fr}Ry(t,s){const i=this.FQ(100),e=this.DQ(t,s,i),h=this.OQ(t,s,i,e);return Or[0]=h.x,Or[1]=h.y,Or[2]=h.t,Or[3]=h.At,Or}BZ(t,s,i){const e=this.FQ(100),h=this.kQ(t,s,e,i),r=this.OQ(t,s,e,h);return Or[0]=r.x,Or[1]=r.y,Or[2]=r.t,Or[3]=r.At,Or}NZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.oQ+e*this.lQ+h*this.cQ,n=i*this.aQ+e*this.uQ+h*this.fQ,o=Math.hypot(r,n);return Er[0]=r/o,Er[1]=n/o,Er}WZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.oQ+e*this.lQ+h*this.cQ,n=i*this.aQ+e*this.uQ+h*this.fQ;return Math.atan2(n,r)}AQ(h){if(this.wZ){let t=h*this.MQ[this.bQ],s=0,i=this.bQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.MQ[e]<t?s=e+1:i=e;this.MQ[e]>t&&e--;const r=this.MQ[e];return r===t?e/this.bQ:(e+(t-r)/(this.MQ[e+1]-r))/this.bQ}}PQ(t){return this.wZ?self.Ic.Vc("cubicbezier")(t,this.VZ+this.CQ,this.zZ+this.CQ,this.XZ+this.CQ,this.KZ+this.CQ):NaN}EQ(t){return this.wZ?self.Ic.Vc("cubicbezier")(t,this.HZ+this.RQ,this.qZ+this.RQ,this.$Z+this.RQ,this.ZZ+this.RQ):NaN}FQ(s){if(!(this.xQ.length>=(s=s||100))){this.xQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.dQ*i,n=this.pQ*e,o=this.mQ*h,a=this.gQ*i,l=this.yQ*e,u=this.SQ*h,c=this.QZ+r+n+o,f=this.tQ+a+l+u;this.GQ[t].x=c,this.GQ[t].y=f,this.GQ[t].t=i,this.GQ[t].At=0,this.xQ[t]=this.GQ[t]}}return this.xQ}DQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.wQ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.At=o*o+a*a,n.At<h&&(h=n.At,r=t)}else{for(let t=this.wQ;t<this.wQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.At=u*u+c*c,l.At<h&&(h=l.At,r=t)}for(let t=this.wQ;t>this.wQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.At=d*d+p*p,f.At<h&&(h=f.At,r=t)}}return this.wQ=r}kQ(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.wQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.At=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.At<r&&(r=o.At,n=t)}else{for(let t=this.wQ;t<this.wQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.At=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.At<r&&(r=u.At,n=t)}for(let t=this.wQ;t>this.wQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.At=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.At<r&&(r=d.At,n=t)}}return this.wQ=n}OQ(n,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;kr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.dQ*f,g=this.pQ*d,y=this.mQ*p,S=this.gQ*f,w=this.yQ*d,b=this.SQ*p,M=this.QZ+m+g+y,v=this.tQ+S+w+b,x=M-n,G=v-o,T=x*x+G*G;if(T<c){c=T,l=t,Br.x=M,Br.y=v,Br.t=f,Br.At=T,u=Br;break t}const _=Lr[t-1];_.x=M,_.y=v,_.t=f,_.At=T,kr[t]=_}kr[3]=a[i],a=kr}while(t++<20);return u}TQ(){this.wZ=!0;let s=this.PQ(0),i=this.EQ(0),e=0;for(let t=1;t<=this.bQ;t++){const h=this.PQ(.01*t),r=this.EQ(.01*t),n=s-h,o=i-r;e+=Math.hypot(n,o),this.MQ[t]=e,s=h,i=r}this.vQ=e}},Pr.PZ=class{constructor(t,s,i){this.by=i,this.LQ=t.UZ(),this.BQ=s.UZ(),this.CQ=0,this.RQ=0}wr(){}jG(){return"line"}QF(){return this.by}DZ(t,s){this.CQ=t,this.RQ=s}jM(){return this.LQ+this.CQ}HM(){return this.BQ+this.RQ}}}{const b=self.Ws;b.aK=class extends b.dr{constructor(t,s,i){super(),this.bf=i.pk(),this.NQ=i,this.WQ=s,this.vr=t,this.jQ=[],this.VQ=0,this.UQ=null,this.HQ=0,this.zQ(),this.JQ=null,this.qQ=null,this.XQ=0,this.YQ=0,this.$Q=1,this.KQ=0,this.ZQ=1,this.QQ=!1,this.ttt=!1,this.stt=!1,this.itt=!0,this.ett=!1,this.htt=!1,this.ntt=-1,this.ott=!1,this.att=!1,this.ltt=!1,this.utt=!1,this.ctt=NaN,this.ftt=[""],this.dtt="",this.ptt=!1,this.hK=0,this.mtt=0,this.gtt=null}static oK(t,s){const i=s.cK(),e=i.ytt(),h=i.ni(t[e]),r=b.Sr(b.aK,t[e],h,s);return r.Stt(!0),r}static uK(t,s,i){return b.Sr(b.aK,t,s,i)}wr(){if(!this.VW()){const t=this.bf.Qf();this.NQ.WK(this),this.NQ.HK(this);for(const s of this.jQ)s.wr();b.Hn(this.jQ),this.jQ=null,this.bf=null,this.NQ=null,this.WQ=null,this.ett=!0,this.JQ=null,this.qQ=null,this.wtt(t)}}wtt(t){const s=b.Sr(b.Event,"timelinestatereleased");s.btt=this,t.dispatchEvent(s)}jG(){return 0}zQ(){for(const t of this.WQ.vtt().Mtt())this.VQ=this.jQ.push(b.xtt.Bx(this,t))}Gtt(){return this.NQ}pk(){return this.bf}xZ(){return this.jQ}Ttt(e,h,r,n){if(this.mtt){let i;for(let s=0;s<this.jQ.length;s++){let t=this.jQ[s];if(e===t.c8()){const o=t.y8(r);o&&h.constructor===o._tt().constructor&&o.OZ()===n.OZ()&&(i=i||[]).push(o)}}return i}}pZ(){return!!this.jQ.length}vZ(t){for(const s of this.jQ)if(b.Gh(s.m8(),t))return s;return null}Itt(t){for(const s of this.jQ)if(!s.Ctt()&&b.Gh(s.cf(),t))return s;return null}lV(t){this.vr=t}cf(){return this.vr}Rtt(){return this.WQ}m4(){return this.WQ.cf()}YW(){return this.WQ.YW()}XW(t){this.WQ.XW(t)}Att(){return this.WQ.Att()}Ptt(t){this.WQ.Ptt(t)}Ett(){return this.WQ.Ett()}Ftt(t){this.WQ.Ftt(t)}OZ(){return this.WQ.OZ()}Dtt(t){this.WQ.OZ(t)}u8(t){for(const s of this.xZ())s.u8(t)}KW(){return this.WQ.KW()}$W(t){return this.WQ.$W(t)}QW(){return this.WQ.QW()}ZW(t){return this.WQ.ZW(t)}aW(){return this.WQ.aW()}Ott(t){return this.WQ.Ott(t)}t8(t){return this.$Q=t}s8(){return this.$Q}hZ(){return this.WQ.hZ()}ktt(){return this.WQ.ktt()}Ltt(){return this.WQ.Ltt()}Btt(){return this.KQ}Ntt(){return!this.IsPlaying()||0<this.$Q}e8(){return this.JQ||(this.JQ=new Promise(t=>{this.qQ=t})),this.JQ}jK(){this.JQ&&(this.qQ(),this.JQ=null,this.qQ=null)}Wtt(t){this.ftt=b.aK.jtt(t),this.ptt=!0}i8(){return this.ftt}Vtt(){return this.ptt&&(this.dtt=this.ftt.join(" ")),this.ptt=!1,this.dtt}JW(t){if(!this.ftt)return!1;if(!this.ftt.length)return!1;const s=b.aK.jtt(t);return!!s&&!!s.length&&s.every(b.aK.Utt,this)}Htt(){b._Y.Timeline&&this.constructor===b.aK&&(b._Y.Timeline.GY.PushTriggerTimeline(this),this.NQ.N4(b._Y.Timeline.GY.OnTimelineStarted),this.NQ.N4(b._Y.Timeline.GY.OnTimelineStartedByName),this.NQ.N4(b._Y.Timeline.GY.OnTimelineStartedByTags),this.NQ.N4(b._Y.Timeline.GY.OnAnyTimelineStarted),b._Y.Timeline.GY.PopTriggerTimeline())}ztt(){this.ntt=this.bf.Jtt()}iZ(){this.ltt||(this.ltt=!0,b._Y.Timeline&&this.constructor===b.aK&&(b._Y.Timeline.GY.PushTriggerTimeline(this),this.NQ.N4(b._Y.Timeline.GY.OnTimelineFinished),this.NQ.N4(b._Y.Timeline.GY.OnTimelineFinishedByName),this.NQ.N4(b._Y.Timeline.GY.OnTimelineFinishedByTags),this.NQ.N4(b._Y.Timeline.GY.OnAnyTimelineFinished),b._Y.Timeline.GY.PopTriggerTimeline()))}LK(t){this.QQ=t}qtt(){return this.ntt===this.bf.Jtt()}IsPlaying(t=!1){return!!this.qtt()||!(!this.Xtt()||t)||this.QQ}Ytt(){return this.IsPlaying(!0)}r8(){return this.$tt()}$tt(){return!(this.VW()||this.Xtt()||this.Ytt()||this.tZ())}BK(t){this.ttt=t}Xtt(){return this.ttt}Ktt(t){this.itt=t;const s=this.FE();(s<=0||s>=this.YW())&&(this.itt=!0)}tZ(){return this.itt}VW(){return this.ett}NK(t){this.htt=t}zK(){return this.htt}Ztt(t){this.ott=t}Qtt(){return this.ott}Stt(t){this.att=!!t}pK(){return this.att}sZ(){return this.stt}FE(){return this.XQ}qW(t){const s=this.FE();this.tst(t),this.Ktt(!1),this.tZ()||this.Ztt(!0),!this.Ytt()&&!this.Xtt()&&this.stt||(this.Ytt()||this.Xtt()||this.stt?this.Ytt()?this.HW():this.Xtt()&&(this.NQ.WK(this),this.sst()):this.sst()),this.ist(),this.est(this.FE(),!1,!0,!0,s),this.hst(),this.hK&&this.pk().ZO(),this.rst()}tst(t){(t=b.Se(t)?t:this.YW())<0?this.XQ=0:t>=this.YW()?this.XQ=this.YW():this.XQ=t}nst(t){(t=b.Se(t)?t:this.YW())<0?this.XQ=0:t>=this.YW()?this.XQ=this.YW():this.XQ=t;for(const s of this.jQ)s.ost()}rst(){b._Y.Timeline&&this.constructor===b.aK&&(b._Y.Timeline.GY.PushTriggerTimeline(this),this.NQ.N4(b._Y.Timeline.GY.OnTimeSet),this.NQ.N4(b._Y.Timeline.GY.OnTimeSetByName),this.NQ.N4(b._Y.Timeline.GY.OnTimeSetByTags),b._Y.Timeline.GY.PopTriggerTimeline())}ast(){if(!this.KW())if(this.QW()&&1===this.KQ){if(this.Ntt()){if(this.FE()>=this.YW())return!1}else if(this.FE()<=0)return!1}else if(!this.KW()&&!this.QW())if(this.Ntt()){if(this.FE()>=this.YW())return!1}else if(this.FE()<=0)return!1;return!0}zW(){this.VW()||this.ast()&&this.Play(!0)}Play(t=!1){return!this.VW()&&!this.Xtt()&&(this.Ytt()&&this.qtt()?this.lst():!this.Ytt()&&!!(this.tZ()||t||this.Qtt())&&this.ust())}lst(){return this.Ztt(!1),this.NQ.FK(this),this.NQ.kK(this),this.e8(),!0}ust(){return this.Ztt(!1),this.NQ.kK(this),this.e8(),!0}HW(t=!1){this.VW()||(this.Ktt(t),this.NQ.VK(this),this.tZ()&&this.jK())}b0(t=!0,s=!1){if(!this.VW()){if(!this.Ytt()&&this.Xtt())return this.NQ.WK(this);if(!this.tZ()){this.HW(!0),this.Ntt()?this.tst(0):this.tst(this.YW());const i=this.FE();this.ist(),s?this.cst(i):this.est(i,!1,!1,!0),t&&this.rst(),this.hst(),this.hK&&t&&this.pk().ZO()}}}fst(){this.b0(!1,!0)}cst(t){this.est(t,!1,!1,!0,NaN,!1,!0)}J$(){if(!this.VW()){if(!this.pk().gY()&&this.dst())return!1;this.NQ.UK(this),this.pk().gY()||this.fst()}return!0}sst(){this.qK(!0)}JK(){this.qK(!1,!0),this.LK(!1),this.BK(!1)}qK(t=!1,s=!1){if(!this.zK()||s){if(t){this.ltt=!1,this.stt=!0,this.utt=!0,this.ist();for(const i of this.jQ)i.qK()}else if(this.LK(!0),this.BK(!1),this.Htt(),this.tZ()){this.ntt=-1,0!==this.KQ&&(this.$Q=Math.abs(this.$Q)),this.KQ=0,this.ZQ=1,this.itt=!1,this.ltt=!1,this.stt=!0,this.utt=!0,this.Ntt()?this.tst(0):this.tst(this.YW()),this.ist();for(const e of this.jQ)e.qK()}else{this.utt=!0,this.ltt=!1,this.ist();for(const h of this.jQ)h.pst()}this.hst()}}XK(){return this.hK}ist(){this.mtt=0;for(const t of this.jQ)t.TR()&&(this.mtt=1)}hst(){this.hK=0;for(const t of this.jQ)t.mst(),0===this.hK&&1===t.XK()&&(this.hK=1),this.UQ||1!==t.gst()||(this.UQ||(this.UQ=[]),this.HQ=this.UQ.push(t))}KK(t,s,i){if(this.Ltt()){if(0===t&&0===this.ctt)return;this.ctt=t,t=i}else{if(0===i&&0===this.ctt)return;t=this.ctt=i,s=1}const e=this.XQ+this.YQ,h=t*s*this.$Q,r=e+h,n=this.WQ.yst;r<0?(this.XQ=0,this.YQ=-r):n<=r?(this.XQ=n,this.YQ=this.XQ-r):(this.XQ=r,this.YQ=0);let o=!1,a=!1,l=this.KW(),u=this.QW();l||u?l&&!u?0<this.$Q?this.XQ>=n&&(this.nst(0),a=!0):this.XQ<=0&&(this.nst(n),a=!0):!l&&u?0<this.$Q?this.XQ>=n&&(this.tst(n),this.t8(-1*this.s8()),a=!0,1===this.KQ?this.ZQ<this.aW()?(this.ZQ++,this.KQ=0):o=!0:0===this.KQ&&(this.KQ=1)):this.XQ<=0&&(this.tst(0),this.t8(-1*this.s8()),a=!0,1===this.KQ?this.ZQ<this.aW()?(this.ZQ++,this.KQ=0):o=!0:0===this.KQ&&(this.KQ=1)):l&&u&&(0<this.$Q?this.XQ>=n&&(this.tst(n),this.t8(-1*this.s8()),a=!0,this.KQ++,b.wrap(this.KQ,0,2)):this.XQ<=0&&(this.tst(0),this.t8(-1*this.s8()),a=!0,this.KQ++,b.wrap(this.KQ,0,2))):0<this.$Q?this.XQ>=n&&(this.ZQ<this.aW()?(this.ZQ++,this.nst(0),a=!0):(this.tst(n),o=!0)):this.XQ<=0&&(this.ZQ<this.aW()?(this.ZQ++,this.nst(n),a=!0):(this.tst(0),o=!0));let c,f=this.VQ;if(o){for(c=0;c<f;c++)this.jQ[c].Sst();this.HW(!0),this.ztt()}else{const d=this.HQ;for(c=0;c<d;c++)this.UQ[c].wst();if(1===this.mtt)for(c=0;c<f;c++){const p=this.jQ[c],m=p.bst(),g=this.XQ-m,y=e-m;g<0&&0<y?(this.XQ=m<0?0:n<=m?n:m,p.Zc(m,!0,!1,a,this.utt,!1)):p.Zc(this.XQ,!0,!1,a,this.utt,!1)}else for(c=0;c<f;c++)this.jQ[c].Zc(this.XQ,!0,!1,a,this.utt,!1);for(c=0;c<d;c++)this.UQ[c].Mst();this.utt&&(this.utt=!1)}}est(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.jQ)o.wst();for(const a of this.jQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.FE(),u=l-a.bst(),c=r-a.bst();u<0&&0<c&&(t=a.bst(),this.tst(t))}a.Zc(t,i,e,h,this.utt,n)}for(const f of this.jQ)f.Mst();this.utt&&t&&(this.utt=!1)}vst(){const t=this.WQ.vtt().xst(),s=b.xtt.Bx(this,t);return this.VQ=this.jQ.push(s),s}gK(){if(!this.VW())for(const t of this.jQ)t.Gst()}eZ(){for(const t of this.jQ)t.eZ()}Tst(){for(const t of this.jQ)t._st()}Ist(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.jQ[i];return e?(e.Cst(s),void this.NQ.vK(s.QB(),this)):void 0}for(const h of this.jQ)if(h.Ctt())if(t){if(h.m8()===t){h.Cst(s),this.NQ.vK(s.QB(),this);break}}else if(!h.Rst()){h.Cst(s),this.NQ.vK(s.QB(),this);break}}}_K(t,s){for(const i of this.jQ)if(i.Ctt())if(s){if(s===i.m8()&&t===i.c8())return!0}else if(t===i.c8())return!0;return!1}QK(){return this.jQ.some(t=>!t.Ctt()||t.Ast())}dst(){return this.jQ.some(t=>{if(t.Ctt()){if(!t.Ast())return!1;const s=t.QB();return!!s&&s.Yz()}return!1})}y8(t){for(const s of this.xZ())for(const i of s.Pst())if(i.Est()===t)return i}Fst(t){for(const s of this.jQ)if(t===s.c8())return s;return null}Dst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.xZ())for(const h of e.Ost()){const r=s.every(t=>h.kst(t));if(r)return h}}xK(){const t=[];for(const s of this.xZ())t.push(s.QB());return t.filter(t=>t)}tK(){for(const t of this.xZ())t.tK()}Oq(){return{tracksJson:this.Lst(),name:this.vr,playheadTime:this.FE(),playbackRate:this.$Q,pingPongState:this.KQ,currentRepeatCount:this.ZQ,isPlaying:this.QQ,isScheduled:this.ttt,initialStateSet:this.stt,finishedTriggers:this.ltt,complete:this.itt,released:this.ett,markedForRemoval:this.htt,completedTick:this.ntt,implicitPause:this.ott,isTemplate:this.att,tags:this.ftt.join(" "),stringTags:this.dtt,tagsChanged:this.ptt,firstTick:this.utt}}kq(t){t&&(this.Bst(t.tracksJson),this.vr=t.name,this.XQ=t.playheadTime,this.$Q=t.playbackRate,this.KQ=t.pingPongState,this.ZQ=t.currentRepeatCount,this.QQ=!!t.isPlaying,this.ttt=!!t.isScheduled,this.stt=!!t.initialStateSet,this.ltt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.itt=!!t.complete,this.ett=!!t.released,this.htt=!!t.markedForRemoval,this.ntt=t.completedTick,this.ott=!!t.implicitPause,this.att=!!t.isTemplate,this.ftt=t.tags.split(" "),this.dtt=t.stringTags,this.ptt=!!t.tagsChanged,this.utt=!!t.firstTick)}Lst(){return this.jQ.map(t=>t.Oq())}Bst(t){this.Tst(),t.forEach((t,s)=>{const i=this.jQ[s];i.kq(t)}),this.jQ.filter(t=>t.Ast())}static Utt(t){const s=this.i8();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static jtt(t){if(b.Ue(t))return t.slice(0);if(b.Ce(t))return t.split(" ");throw new Error("invalid tags")}Nst(){return this.gtt||(this.gtt=b.Sr(self.o8,this)),this.gtt}}}{const Nr=self.Ws;Nr.xtt=class extends Nr.dr{constructor(t,s){super(),this.bZ=t,this.Wst=s,this.jst=s.vtt(),this.Vst=NaN,this.Ust=NaN,this.Hst=null,this.zst=null,this.Jst=!1,this.wR=0<s.bst(),this.qst=!1,this.Xst=!1,this.Yst=NaN,this.$st=null,this.Kst=this.Wst.Qst().Zst(),this.tit=[],this.sit(),this.iit=0,this.hK=0,this.eit=0}static Bx(t,s){return Nr.Sr(Nr.xtt,t,s)}wr(){this.Kst=null;for(const t of this.tit)t.wr();Nr.Hn(this.tit),this.tit=null,this.bZ=null,this.Hst=null,this.zst=null,this.Wst=null,this.$st=null}sit(){for(const t of this.Wst.rit().hit())this.tit.push(Nr.nit.Bx(this,t))}Gst(){for(const t of this.tit)t.Gst()}eZ(){for(const t of this.tit)t.eZ();this.Hst=null,this.zst=null}oit(){return this.bZ}pk(){return this.bZ.pk()}Ost(){return this.Kst||(this.Kst=this.Wst.Qst().Zst()),this.Kst}Pst(){return this.tit}y8(s){for(let t=0;t<this.tit.length;t++){const i=this.tit[t];if(i.Est()===s)return i}}ait(){this.Hst||this.c8()}lit(){return!!this.Hst&&!this.Hst.Sj()}Ast(){if(!this.Ctt())return!1;const t=this.uit(),s=this.pk().WO(t);return!!s&&!s.Sj()}QB(){if(this.Ctt()){const t=this.cit();if(-1!==t)return this.pk().Bz(t)}}fit(){return this.bZ.xZ().indexOf(this)}_st(){this.Hst=null,this.Vst=NaN,this.zst=null,this.Ust=NaN,this.Jst=!0}Rst(){return!!this.Hst}c8(){if(!this.Jst){if(!this.Hst||!this.lit()){const t=this.uit();this.Hst=this.pk().WO(t)}return this.Hst}}Cst(t){if(this.Jst=!1,this.Hst!==t){this.eZ(),this.Hst=t,this.Ust=t.QB().QF(),this.Vst=t.f4(),this.zst=t.zO();for(const s of this.dit()){const i=s.pit,e=s.mit,h=i.git();switch(h){case"instance-variable":{e.yit();const r=t.QB(),n=r.Sit(s.name),o=r.wit(n),a=r.bit(n);o===s.name&&a===s.type&&e.Mit(n);break}case"behavior":{const l=s.z6,u=this.QB(),c=t.QB(),f=e.q6(c);if(l&&f){const d=l.cf();u.vit(d),c.vit(d),e.yit(),e.xit(f.yJ())}break}}}}}*dit(){for(const t of this.tit){const s=t._tt(),i=this.QB(),e={pit:t,mit:s};switch(t.git()){case"world-instance":e.property=t.Est();break;case"instance-variable":{const h=s.yit();e.name=i.wit(h),e.type=i.bit(h);break}case"effect":{const r=i.S5(),n=s.Git(r);e.Tit=n;break}case"behavior":{const o=s.q6(i);e.z6=o;break}case"plugin":e.qL=i.XL()}yield e}}zO(){if(!this.zst||!this.lit()){const t=this.c8();t&&(this.zst=t.zO())}return this.zst}_it(){return this.Wst}uit(){return isNaN(this.Vst)?this.Wst.uit():this.Vst}Iit(t){this.Wst.Iit(t)}Ett(){return this.Wst.Ett()}Ftt(t){this.Wst.Ftt(t)}OZ(){return this.Wst.OZ()}m8(){return this.Wst.m8()}bst(){return this.Wst.bst()}Cit(){return this.Wst.Cit()}Rit(t){this.Wst.Rit(t)}Dtt(t){this.Wst.Dtt(t)}u8(t){for(const s of this.Ost())s.u8(t);for(const i of this.Pst())i.u8(t)}Ait(){return this.Wst.Ait()}Pit(t){this.Wst.Pit(t)}cit(){return isNaN(this.Ust)?this.Wst.cit():this.Ust}Eit(t){this.Wst.Eit(t)}Fit(t){this.Wst.Fit(t)}Dit(){const t=this.c8();if(t){const s=t.L6();if(s.Oit())return t.L6().Dit()}return this.Wst.Dit()}kit(t){this.Wst.kit(t)}Lit(){const t=this.c8();if(t){const s=t.L6();if(s.Oit())return t.L6().Lit()}return this.Wst.Lit()}jG(){return this.Wst.jG()}cf(){return this.Wst.cf()}Ctt(){return 0===this.jG()}Bit(){return 1===this.jG()}Nit(){return 2===this.jG()}Wit(){return this.iit}XK(){return this.hK}gst(){return this.eit}TR(){return this.wR}ost(){for(const t of this.tit)t.ost()}qK(){if(this.ait(),this.lit()||!this.Ctt()){const t=this.oit(),s=t.Ntt(),i=s?0:this.Cit();for(const h of this.tit)h.qK(i),0===this.iit&&1===h.Wit()&&(this.iit=1),0===this.hK&&1===h.XK()&&(this.hK=1);this.eit=0;const e=this.tit.some(t=>t.gst());e&&(this.eit=1),this.$st=this.jit(i),this.qst=!1,this.Xst=!1,this.Zc(i),this.Vit(this.jit(i))}}pst(){if(this.ait(),this.lit()||!this.Ctt()){this.bZ.Ntt();const t=this.bZ.FE()-this.bst();this.$st=this.jit(t);for(const s of this.tit)s.pst(t)}}Sst(){if(!this.oit().tZ()&&(this.ait(),this.lit()||!this.Ctt())&&!this.wR){const t=this.bZ.FE(),s=this.bst()+this.Cit();s<=t?this.Zc(this.Cit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Zc(0,!0,!1,!0,!1,!1,!0)}}mst(){for(let t=0,s=this.tit.length;t<s;t++){const i=this.tit[t];i.mst(),0===this.iit&&1===i.Wit()&&(this.iit=1),0===this.hK&&1===i.XK()&&(this.hK=1)}}wst(){const s=this.tit.length;for(let t=0;t<s;t++)this.tit[t].wst()}Zc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.Hst||this.c8();const o=this.Hst&&!this.Hst.Sj(),a=0===this.Wst.Cf;if((o||!a)&&!(r&&a&&this.QB().Yz()||(i-=this.bst())<0)){this.Uit(i,t),this.Hit(i,t,s);for(let t=0,s=this.tit.length;t<s;t++)this.tit[t].Zc(i,e,h,n);this.zit(i,t),0!==this.iit&&(this.zst||(this.zst=this.Hst.zO()),this.zst)&&this.zst.mN()}}Mst(){const s=this.tit.length;for(let t=0;t<s;t++)this.tit[t].Mst()}Uit(t,s){if(s&&this.wR&&!this.qst){const i=this.oit();if(i.Ntt()){if(t<0)return}else if(t>this.Cit())return;for(const e of this.tit)e.qK();this.qst=!0}}zit(t,s){if(s&&this.wR&&!this.Xst){const i=this.oit();if(i.Ntt()){if(t>=this.Cit()){for(const e of this.tit)e.Zc(this.Cit(),!1,!0);this.Xst=!0}}else if(t<=0){for(const h of this.tit)h.Zc(0,!1,!0);this.Xst=!0}}}Hit(t,s,i){if(!i&&s&&Nr._Y.Timeline){const e=this.oit(),h=this.$st.IZ(),r=this.$st.FE(),n=h?h.FE():e.YW();if(t<=r||n<=t)if(this.$st=this.jst.Jit(t,this.Wst),e.Ntt())h&&this.Vit(this.$st);else{const o=this.$st.IZ();o&&this.Vit(o)}}}jit(t){const s=this.jst.qit(t,this.Wst);return s||this.jst.Jit(t,this.Wst)}Vit(t){if(Nr._Y.Timeline){const s=this.oit(),i=s.Gtt();Nr._Y.Timeline.GY.PushTriggerTimeline(s),Nr._Y.Timeline.GY.PushTriggerKeyframe(t),i.N4(Nr._Y.Timeline.GY.OnAnyKeyframeReached),i.N4(Nr._Y.Timeline.GY.Vit),Nr._Y.Timeline.GY.PopTriggerTimeline(s),Nr._Y.Timeline.GY.PopTriggerKeyframe(t)}}Xit(){const t=this.Wst.Qst(),s=t.Yit();return s}$it(){const t=this.Wst.rit(),s=t.Kit(),i=Nr.nit.Bx(this,s);return this.tit.push(i),i}Zit(t){const s=this.Wst.Qst();s.Qit(t)}tet(t){for(const s of this.tit)s.tet(t)}iet(){for(const t of this.tit)t.iet()}eet(){if(this.ait(),this.lit()||!this.Ctt())for(const t of this.tit)t.eet()}het(){if(this.ait(),this.lit()||!this.Ctt()){let t=!1;for(const s of this.tit){const i=s.het();!t&&i&&(t=!0)}if(t){const e=this.Xit();e.qW(this.oit().FE()),e.u8("noease"),e.Pit(!0),e.Wtt("")}}}tK(){isNaN(this.Yst)||this.ret(this.Yst),this.Yst=NaN}Oq(){const t=this.c8(),s=t?t.f4():this.uit();return{propertyTracksJson:this.net(),lastKeyframeDataItemJson:this.oet(),initialStateOfNestedSet:this.qst,endStateOfNestedSet:this.Xst,instanceUid:s,cleared:this.Jst}}kq(t){if(t){this.aet(t.propertyTracksJson),this.let(t.lastKeyframeDataItemJson),this.Yst=t.instanceUid,this.qst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.qst=t.initialStateOfNestedSet),this.Xst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Xst=t.endStateOfNestedSet),this.Jst=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.tit)0===this.iit&&1===s.Wit()&&(this.iit=1),0===this.hK&&1===s.XK()&&(this.hK=1);this.eit=0,this.tit.some(t=>t.gst())&&(this.eit=1)}}oet(){const t=this.Wst.Qst();return t.uet(this.$st)}net(){return this.tit.map(t=>t.Oq())}aet(t){t.forEach((t,s)=>{const i=this.tit[s];i.kq(t)})}ret(t){if(Nr.Se(t)){const s=this.pk().WO(t);if(s){const i=this.oit();i.Ist(this.Wst.m8(),s,this.fit())}}}let(t){const s=this.Wst.Qst();this.$st=s.cet(t)}}}{const Wr=self.Ws;Wr.nit=class extends Wr.dr{constructor(t,s){super(),this.fet=t,this.det=s,this.pet=s.rit(),this.iit=0,this.hK=0,this.eit=0,this.met=this._tt(),this.yet=this.det.bet().wet(),this.Met=null,this.vet=null}static Bx(t,s){return Wr.Sr(Wr.nit,t,s)}wr(){this.fet=null,this.met&&(this.met.wr(),this.met=null),this.yet=null,this.det=null,this.pet=null}Wit(){return this.iit}XK(){return this.hK}gst(){return this.eit}xet(){return!!this.vet}Get(t){this.vet=t}Tet(){return this.vet}_et(){return this.fet}Iet(){return this.det}rit(){return this.pet}oit(){return this.fet.oit()}pk(){return this.fet.pk()}c8(){return this.fet.c8()}_tt(){if(!this.met){let t=this.det.git(),s;switch(t){case"behavior":s=new Wr.nit.Cet(this);break;case"effect":s=new Wr.nit.Ret(this),this.hK=1;break;case"instance-variable":s=new Wr.nit.Aet(this);break;case"plugin":s=new Wr.nit.Pet(this),this.hK=1;break;case"world-instance":s=new Wr.nit.Eet(this),this.hK=1,this.iit=1;break;case"value":s=new Wr.nit.Fet(this);break;case"audio":s=new Wr.nit.Det(this)}this.met=s}return this.met}git(){return this.det.git()}Oet(t){this.det.Oet(t)}ket(){return this.det.Let()}Bet(t){this.det.Net(t)}g8(){return this._tt().Wet()}Est(){return this.det.jet()}Vet(t){this.det.Uet(t)}Het(){return this.det.jG()}zet(t){this.det.SetType(t)}Jet(){return this.rit().qet(this.det).jG()}Xet(){return this.det.Xet()}Yet(t){this.det.Yet(t)}$et(){return this.det.$et()}Ket(t){this.det.Ket(t)}Ait(){return this.det.Ait()}Pit(t){this.det.Pit(t)}Ett(){return this.det.Ett()}Ftt(t){this.det.Ftt(t)}OZ(){return this.det.OZ()}Dtt(t){this.det.Dtt(t)}u8(t){for(const s of this.Zet())s.u8(t)}Qet(){return this.det.Qet()}Zet(){return this.yet||(this.yet=this.det.bet().wet()),this.yet}_Z(){return this.det.bet()._Z()}tht(t){return this.pet.tht(t,this.det)}sht(t){return this.pet.sht(t,this.det)}iht(t){let s=this.pet.tht(t,this.det),i;return i=s?this.pet.eht(t,this.det):(s=this.pet.sht(t,this.det),this.pet.hht(t,this.det)),{start:s,end:i}}*rht(){for(const t of this.Zet())yield t.UZ()}*nht(){for(const t of this.Zet())yield t.FE()}Gst(){this._tt().Gst()}eZ(){this._tt().eZ()}oht(){return this._tt().oht()}ost(){this._tt().ost()}qK(t){this._tt().qK(),this.Met=this.aht(t),this.mst()}pst(t){this._tt().pst(),this.Met=this.aht(t)}mst(){const t=this._et();if(this.eit=0,t.Ctt()){const s=this.oit(),i=t.c8(),e=this._tt(),h=this.Est(),r=e.lht();if(r){const n=s.Ttt(i,e,h,this);n&&n.length&&(this.eit=1)}else this.eit=0}}aht(t){const s=this.oit(),i=this.pet.tht(t,this.det);return i||(s.Ntt()?this.pet.sht(t,this.det):this.pet.hht(t,this.det))}wst(){this.met.wst()}Zc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.pet.sht(t,this.det);else{if(this.Met){const o=this.oit(),a=this.Met.IZ(),l=this.Met.FE(),u=a?a.FE():o.YW();(t<=l||u<=t)&&(this.Met=this.pet.sht(t,this.det),n=!0)}else this.Met=this.pet.sht(t,this.det),n=!0;h=this.Met}h&&(r=h.IZ()),this.met.Zc(t,h,r,s,i,e,n)}uht(t){if(this.Met){const e=this.oit(),h=this.Met.IZ(),r=this.Met.FE(),n=h?h.FE():e.YW();(t<=r||n<=t)&&(this.Met=this.pet.sht(t,this.det))}else this.Met=this.pet.sht(t,this.det);const s=this.Met,i=s.IZ();return this.met.uht(t,s,i)}cht(t,s,i){return this.met.uht(t,s,i)}Mst(){this.met.Mst()}static fht(t,s){const i=s.Iet(),e=s.pet;return e.sht(t,i)}static dht(t,s){const i=s.Iet(),e=s.pet;return e.hht(t,i)}pht(){const t=this.det.bet(),s=t.mht();return this.Met=null,s}tet(t){this.Met=null;const s=this.det.bet();s.ght(t)}iet(){this._tt().iet()}eet(){const t=this._tt().eet();if(t){const s=this.pet.qet(this.det),i=this._tt().oht();s.yht(i)}}het(){const t=this._tt().het();return t&&this.Sht(),this._tt().wht(),t}Sht(){const t=this.oit().FE(),s=this._tt(),i=Wr.nit.fht(t,this),e=this.pht();e.SetType(i.jG()),e.qW(t),e.u8(i.bht()),e.Pit(!0),e.Mht(s.vht()),e.yht(s.oht())}Oq(){return{sourceAdapterJson:this._tt().Oq()}}kq(t){t&&this._tt().kq(t.sourceAdapterJson)}}}{const jr=self.Ws,Vr=jr.nit;Vr.Eet=class{constructor(t){this.xht=t,this.Ght=null,this.Tht()}wr(){this.Ght&&(this.Ght.wr(),this.Ght=null),this.xht=null}lht(){return this.Ght.lht()}y8(){return this.xht}Gst(){this.Ght&&this.Ght.Gst()}eZ(){this.Ght&&this.Ght.eZ()}Tht(){return this.Ght||(this.Ght=this._ht()),this.Ght}yit(){}QF(){return this.yit()}Iht(){}ost(){this.Tht().ost()}qK(){this.Tht().qK()}pst(){this.Tht().pst()}wst(){this.Ght.Cht()}Zc(t,s,i,e,h,r,n){let o=this.xht.Jet(),a;switch(o){case"numeric":a=Vr.Rht.Zc(t,s,i,this.xht);break;case"angle":a=Vr.Aht.Zc(t,s,i,this.xht);break;case"boolean":a=Vr.Pht.Zc(t,s,i,this.xht);break;case"color":a=Vr.Eht.Zc(t,s,i,this.xht);break;case"text":a=Vr.Fht.Zc(t,s,i,this.xht)}this.Ght.Dht(t,a,s,i,e,h,r,n)}uht(t,s,i){switch(this.xht.Jet()){case"numeric":return Vr.Rht.Zc(t,s,i,this.xht);case"angle":return Vr.Aht.Zc(t,s,i,this.xht);case"boolean":return Vr.Pht.Zc(t,s,i,this.xht);case"color":return Vr.Eht.Zc(t,s,i,this.xht);case"text":return Vr.Fht.Zc(t,s,i,this.xht)}}Mst(){this.Ght.Oht()}iet(){this.Tht().kht()}wht(){this.Tht().wht()}oht(){return this.Tht().oht()}eet(){return this.Tht().eet()}het(){return this.Tht().het()}vht(){const t=this.xht,s=t._et(),i=s.oit().FE(),e=Vr.fht(i,t),h=e.IZ(),r=t.Jet();switch(r){case"numeric":return Vr.Rht.Zc(i,e,h,t);case"angle":return Vr.Aht.Zc(i,e,h,t);case"boolean":return Vr.Pht.Zc(i,e,h,t);case"color":return Vr.Eht.Zc(i,e,h,t);case"text":return Vr.Fht.Zc(i,e,h,t)}}_ht(){const t=this.xht,s=t.Qet()?t.Jet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Vr.Bht.Lht(this);case"numeric":case"number":case"angle":return new("combo"===this.xht.Het()?Vr.Bht.Lht:Vr.Bht.Nht)(this);case"color":case"offsetColor":return new Vr.Bht.Wht(this);default:return new Vr.Bht.Nht(this)}}Oq(){return{propertyAdapterJson:this.Tht().Oq()}}kq(t){t&&this.Tht().kq(t.propertyAdapterJson)}}}{const Ur=self.Ws;class Hr extends Ur.nit.Eet{constructor(t){super(t),this.jht=NaN}yit(){return this.xht.Iet().Let()[0]}QF(){return this.jht||super.QF()}Iht(){return this.xht._et().c8()}Mit(t){const s=this.xht.Iet().Let()[0];s!==t&&(this.jht=t)}Zc(t,s,i,e,h,r,n){this.Tht().Vht(s.Wet())&&super.Zc(t,s,i,e,h,r,n)}uht(t,s,i){if(this.Tht().Vht(s.Wet()))return super.uht(t,s,i)}Oq(){return Object.assign(super.Oq(),{index:this.jht})}kq(t){t&&(super.kq(t),this.jht=t.index)}}Ur.nit.Aet=Hr}{const zr=self.Ws;class Jr extends zr.nit.Eet{constructor(t){super(t),this.O7=NaN}yit(){const t=this.xht.Iet();return t.Let()[1]}Iht(){const t=this.xht.Iet(),s=this.xht._et(),i=this.O7||t.Let()[0],e=s.c8(),h=e.Uht(i),r=e.Hht()[h];return r.L6()}q6(t){const s=this.xht.Iet(),i=s.Let()[2];return t.zht(i)}xit(t){const s=this.xht.Iet();s.Let()[0]!==t&&(this.O7=t)}Zc(t,s,i,e,h,r,n){const o=this.xht._et(),a=o.c8();this.q6(a.QB())&&super.Zc(t,s,i,e,h,r,n)}uht(t,s,i){const e=this.xht._et(),h=e.c8();if(this.q6(h.QB()))return super.uht(t,s,i)}Oq(){return Object.assign(super.Oq(),{sid:this.O7})}kq(t){t&&(super.kq(t),this.O7=t.sid)}}zr.nit.Cet=Jr}{const qr=self.Ws;class Xr extends qr.nit.Eet{constructor(t){super(t)}yit(){return this.xht.Iet().Let()[1]}Iht(){const t=this.xht,s=t._et(),i=s.zO(),e=i.dN(),h=e.S5(),r=this.Git(h),n=r.QF();return e.tW(n)?e.Jht(n):null}Git(t){const s=this.xht,i=s.Iet().Let()[0];return t.qht(i)}Zc(t,s,i,e,h,r,n){this.Xht()&&super.Zc(t,s,i,e,h,r,n)}uht(t,s,i){if(this.Xht())return super.uht(t,s,i)}Xht(){const t=this.xht,s=t._et(),i=s.zO(),e=i.dN(),h=e.S5(),r=this.Git(h);if(r){const n=r.QF();return e.tW(n)}}}qr.nit.Ret=Xr}{const Yr=self.Ws;class $r extends Yr.nit.Eet{constructor(t){super(t)}yit(){return this.xht.Iet().Let()[0]}Iht(){return this.xht._et().c8().L6()}Zc(t,s,i,e,h,r,n){const o=this.xht._et(),a=o.QB().XL(),l=o.c8().QB().XL();a===l&&super.Zc(t,s,i,e,h,r,n)}uht(t,s,i){const e=this.xht._et(),h=e.QB().XL(),r=e.c8().QB().XL();if(h===r)return super.uht(t,s,i)}Yht(){const t=this.xht._et(),s=t.QB().XL();if(Yr._Y.$ht&&s instanceof Yr._Y.$ht&&("initial-frame"===this.xht.Est()||"initial-animation"===this.xht.Est()))switch(this.xht.OZ()){case"relative":case"absolute":return null}}}Yr.nit.Pet=$r}{const Kr=self.Ws;class Zr extends Kr.nit.Eet{constructor(t){super(t),this.Kht=0,this.Zht=!1}lht(){return!1}qK(){let t=this.xht.rit(),s=this.xht.Iet();s=t.qet(s),this.Kht=s.UZ()}pst(){}Wet(){return this.Zht||this.xht.Zc(0),this.Kht}Zc(t,s,i,e,h,r,n){this.Kht=Kr.nit.Rht.Zc(t,s,i,this.xht),this.Zht=!0}iet(){}wht(){}oht(){return this.Kht}eet(){return!1}het(){return!1}Oq(){return{value:this.Kht,init:this.Zht}}kq(t){t&&(this.Kht=t.value,this.Zht=!t.hasOwnProperty("init")||t.init)}}Kr.nit.Fet=Zr}{const Qr=self.Ws;class tn extends Qr.nit.Eet{constructor(t){super(t),this.Qht=!1,this.trt=null,this.srt=null,this.irt=null,this.bZ=this.xht.oit(),this.fet=this.xht._et(),this.ert=this.xht.ket(),this.hrt=this.ert[0],this.rrt=this.ert[1],this.ert[3]?this.nrt=this.ert[3]:this.nrt=Math.random().toString(36).slice(2),this.ort=NaN,this.art=NaN,this.lrt=NaN,this.urt=null,this.crt()}wr(){super.wr(),this.trt=null,this.srt=null,this.irt=null,this.bZ=null,this.fet=null,this.ert=null,this.hrt=null,this.urt=null}crt(){if(self.Ws._Y.Audio){const t=this.xht.pk(),s=t.frt(self.Ws._Y.Audio);s&&(this.trt=s.zL().L6()),this.srt=self.Ws._Y.Audio.drt,this.irt=self.Ws._Y.Audio.prt}}mrt(){if(!this.urt){const t=this.xht._et(),s=t.y8("audioSource");s&&(this.urt=s._tt())}}grt(){const t=this.xht._et(),s=t.y8("volume");return(s?s._tt():this).art}Gst(){super.Gst(),this.Qht=!1,this.trt&&(this.irt&&(this.ort=this.irt.yrt.call(this.trt,this.nrt),this.art=this.irt.Srt.call(this.trt,this.nrt)),this.srt)&&this.srt.HW.call(this.trt,this.nrt)}wrt(){return this.nrt}brt(){return this.lrt}Mrt(t){this.lrt=t}qK(){super.qK(),this.ort=NaN,this.Qht=!1}pst(){super.pst();const t=this.xht.oit(),s=t.FE();switch(this.ort=s-this.rrt,this.xht.Est()){case"audioSource":break;case"volume":this.art=this.xht.uht(s)}this.Qht=!1}Zc(t,s,i,e,h,r,n){if(this.trt)switch(this.xht.Est()){case"audioSource":{if(!this.bZ.Ntt())return;if(e)return void(this.srt&&this.srt.HW.call(this.trt,this.nrt));if(t<this.rrt)return void(this.Qht=!1);const o=this.irt.vrt.call(this.trt,this.nrt),a=this.bZ.s8();if(a!==o&&this.srt.t8.call(this.trt,this.nrt,a),this.Qht)return;if(!this.xht.oit().IsPlaying())return;if(this.Qht=!0,isNaN(this.ort)){const l=self.performance.now(),u=t-this.rrt,c=this.trt.xrt();if("suspended"===c)return void(this.Qht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.srt){let t=this.brt();isNaN(t)?(this.Mrt(0),t=0):this.Mrt(t),this.srt.Grt.call(this.trt,this.hrt,t,this.nrt,p)}}else{const m=this.ort,g=(this.ort=NaN,this.grt()),y=(this.art=NaN,this.trt.xrt());if("suspended"===y)return void(this.Qht=!1);this.srt&&(this.Mrt(g),this.srt.Grt.call(this.trt,this.hrt,g,this.nrt,m))}break}case"volume":this.mrt(),super.Zc(t,s,i,e,h,r,n)}}uht(t,s,i){if(this.trt)switch(this.xht.Est()){case"audioSource":return;case"volume":return this.mrt(),super.uht(t,s,i)}}Trt(t,s){return this.urt?this.urt.brt():0}_rt(t,s,i,e){this.urt&&this.urt.Mrt(this.Trt()+s),this.srt&&this.urt&&this.srt.Mrt.call(this.trt,this.urt.wrt(),this.urt.brt())}Irt(t,s,i){this.urt&&this.urt.Mrt(s),this.srt&&this.urt&&this.srt.Mrt.call(this.trt,this.urt.wrt(),this.urt.brt())}Crt(){return!0}Oq(){return{audioPlaybackStarted:this.Qht,audioTag:this.nrt,pauseTime:this.ort,pauseVolume:this.art,volume:this.lrt}}kq(t){t&&(this.Qht=t.audioPlaybackStarted,this.nrt=t.audioTag,this.ort=t.pauseTime,this.art=t.pauseVolume,this.lrt=t.volume,this.crt())}}Qr.nit.Det=tn}{const sn=self.Ws;sn.nit.Bht=class{constructor(t){this.met=t,this.xht=t.y8(),this.zst=this.xht._et().zO(),this.Rrt=this.xht.Est(),this.Art=!1,this.Prt=null,this.Ert=null}wr(){this.met=null,this.xht=null,this.zst=null,this.Prt=null,this.Ert=null}lht(){return!1}Gst(){}eZ(){this.zst=null,this.Prt=null,this.Ert=null}_tt(){return this.met}y8(){return this.xht}zO(){return this.zst||(this.zst=this.xht._et().zO()),this.zst}Frt(t){this.Art=!!t}Drt(){return this.Art}ost(){}qK(){}pst(){}kht(){this.Prt=this.oht()}wht(){this.Prt=null}oht(){}eet(){}het(){}Vht(t){const s=typeof this.Ort(),i=typeof t;return s==i}Cht(){}Dht(t,s,i,e,h,r,n,o){}Oht(){}krt(){const t=this.Lrt(()=>{const t=this.xht.Iet(),s=this.xht.rit();return s.qet(t)},()=>{const t=this.xht.Iet(),s=this.xht.rit();return s.Brt(t)});return t.Nrt()}Wrt(){const t=this.xht.oit(),e=t.FE()-this.xht._et().bst(),s=this.Lrt(()=>{const t=this.xht.Iet(),s=this.xht.rit();return s.sht(e,t)},()=>{const t=this.xht.Iet(),s=this.xht.rit(),i=s.hht(e,t);return i||s.Brt(t)});return s.Nrt()}Lrt(t,s){const i=this.xht.oit();return(i.Ntt()?t:s)()}jrt(t,s){const i=this.xht.OZ();return("relative"===i?t:s)()}Vrt(t,s){return(this.Drt()?(this.Frt(!1),t):s)()}Urt(t){}Hrt(){return this.met.QF()}zrt(){return this.Ert||(this.Ert=this.met.Iht()),this.Ert}Jrt(t,s,i,e,h,r){const n=this.xht.git();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}Oq(){return{firstAbsoluteUpdate:this.Art,saveState:this.Prt}}kq(t){t&&(this.Art=t.firstAbsoluteUpdate,this.Prt=t.saveState)}qrt(t,s=!1){const i=[];for(const e of t){const h=e._et().bst();for(const r of e.Zet())(s&&0===r.FE()||!s)&&i.push({time:h+r.FE(),value:r.Nrt()})}return i.sort((t,s)=>t.time-s.time)}Xrt(t,s,i){return this.Yrt(s,i)}Yrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.Ws,hn=new Map,rn=[0,0,0];class nn extends en.nit.Bht{constructor(t){super(t)}ost(){}qK(){}pst(){}oht(){const t=this.xht.git(),s=this.zrt(),i=this.Hrt();switch(t){case"behavior":return this.$rt(s.Krt(i));case"effect":return this.$rt(s[i]);case"plugin":return this.$rt(s.Krt(i));case"world-instance":return this.$rt(this.Ort())}}eet(){const t=this.krt();return!this.Zrt(t,this.Ort())}het(){return!en.ve(this.Prt)&&!this.Zrt(this.Prt,this.Ort())}Zrt(t,s){return t=this.Qrt(t),s=this.Qrt(s),t.Ga(s)}krt(){const t=super.krt();return this.Qrt(t)}Wrt(){const t=super.Wrt();return this.Qrt(t)}Urt(t){}$rt(t){return(en.rh(t,en.Yo)?t.toArray():t).slice(0,3)}Qrt(t){return en.rh(t,en.Yo)?t:new en.Yo(t[0],t[1],t[2],1)}Vht(t){return!0}lht(){return!0}Cht(){const t=this.xht.oit(),s=this.xht.c8(),i=this.xht._tt(),e=t.Ttt(s,i,this.Rrt,this.xht);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.xht.git(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Rrt)||n.set(this.Rrt,{tnt:!1,color:new en.Yo(0,0,0,1)})}}snt(t,s,i){const e=hn.get(t).get(s).get(i);return e.tnt=!0,e.color}Dht(t,s,i,e,h,r,n,o){const a=this.xht.oit(),l=this.xht._et(),u=this.xht.c8(),c=this.xht._tt(),f=this.xht.git(),d=this.Rrt,p=a.Ttt(u,c,d,this.xht);if(p&&1<p.length){const m=this.qrt(p,!0),g=this.Xrt(a,a.FE(),m);if(g){const y=l.bst(),S=g.time-y;if(0==S)this.snt(u,f,this.Rrt).ra(s[0],s[1],s[2]);else if(!(S<0)){const w=s[0],b=s[1],M=s[2],v=this.xht.Zc(S,!1,!0),x=en.Yo.sl(w,v[0]),G=en.Yo.sl(b,v[1]),T=en.Yo.sl(M,v[2]);this.snt(u,f,this.Rrt).ra(x,G,T)}}}else this.int(s[0],s[1],s[2])}Oht(){const t=this.xht.c8();if(hn.has(t)){const s=hn.get(t),i=this.xht.git();if(s.has(i)){const e=s.get(i);if(e.has(this.Rrt)){const h=e.get(this.Rrt),r=h.tnt,n=h.color;r&&this.int(n.fa(),n.ya(),n.Sa()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Ort(){const t=this.xht.git(),s=this.zrt(),i=this.Hrt();switch(t){case"behavior":return this.Qrt(s.Krt(i));case"effect":return s[i].clone();case"plugin":return this.Qrt(s.Krt(i));case"world-instance":return this.zO().RN().clone()}}int(t,s,i){const e=this.xht.git(),h=this.zrt(),r=this.Hrt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.ent(r,rn);break;case"effect":h[r].ea(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.ent(r,rn);break;case"world-instance":this.zO().hnt(t,s,i)}}Oq(){}kq(t){}}en.nit.Bht.Wht=nn}{const on=self.Ws,an=on.nit;class ln extends on.nit.Bht{constructor(t){super(t)}ost(){}qK(){}pst(){}oht(){return this.Ort()}eet(){const t=this.krt();return t!==this.oht()}het(){return!on.ve(this.Prt)&&this.Prt!==this.oht()}lht(){return!1}Dht(t,s,i,e,h,r,n,o){const a=this.xht,l=a._et(),u=a.git(),c=a.oit(),f=l.c8(),d=a._tt(),p=this.Rrt,m=c.Ttt(f,d,p,a);if(m&&1<m.length){const y=this.qrt(m),S=t+l.bst(),w=this.Xrt(c,S,y);w&&(s=w.value)}const g=a.Jet();switch(g){case"numeric":if(an.Rht.rnt(this.Hrt(),this.zrt(),s,u))break;return;case"angle":if(an.Aht.rnt(this.Hrt(),this.zrt(),s,u))break;return;case"boolean":if(an.Pht.rnt(this.Hrt(),this.zrt(),s,u))break;return;case"color":if(an.Eht.rnt(this.Hrt(),this.zrt(),s,u))break;return;case"text":if(!an.Fht.rnt(this.Hrt(),this.zrt(),s,u))return}this.int(s)}Ort(){const t=this.xht.git(),s=this.zrt(),i=this.Hrt();switch(t){case"behavior":return s.Krt(i);case"effect":return s[i];case"instance-variable":return s.nnt(i);case"plugin":return s.Krt(i)}}int(t){const s=this.xht.git(),i=this.zrt(),e=this.Hrt();switch(s){case"behavior":i.ent(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.ont(e,t);break;case"plugin":i.ent(e,t)}}}on.nit.Bht.Lht=ln}{const un=self.Ws,cn=(un.nit.Bht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{ant:s,lnt:i,unt:e,round:h,cnt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.xht.OZ()?t.fnt(s,i.oit().ktt()):t.fnt(s)},(t,s)=>t.VM(s),t=>t.jM(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.xht.OZ()?t.dnt(s,i.oit().ktt()):t.dnt(s)},(t,s)=>t.zM(s),t=>t.HM(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.xht.OZ(),l=1===i.pnt.jG();if((h||l)&&s.i6()&&s.l6()){if(isNaN(i.mnt)){let e=[],t=s.UN();for(;t;)e.push(t),t=t.UN();e.reverse();let a=(t,s)=>s.oit().Fst(t.c8()),h=(t,s)=>{const i=a(t,s);if(i)return i.Dit();const e=t.c8().L6();return e.Oit()?e.Dit():t.ynt().gnt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.y8(i);if(!r)return e;const n=r.Iet().bet();if(!n)return e;const o=n.Brt();return o?o.Wet():e},n;if(l){let t=e[e.length-1];n=t.Pm()}else{let s=e[0],t=s.ynt().gnt(),i=s.ynt().Snt();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).ynt().Snt();n=(n=(n*=u)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.mnt=0===n?Number.EPSILON:n}e||s.lg(t/i.mnt,!0)}else s.lg(t)}},(t,s)=>t.Bm(s),t=>t.Pm(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.xht.OZ(),a=1===i.pnt.jG();if((h||a)&&s.i6()&&s.c6()){if(isNaN(i.mnt)){let e=[],t=s.UN();for(;t;)e.push(t),t=t.UN();e.reverse();let h=(t,s)=>{e=t;const i=s.oit().Fst(e.c8());var e;if(i)return i.Lit();const h=t.c8().L6();return h.Oit()?h.Lit():t.ynt().wnt()},r=(t,s,i,e=0)=>{const h=s.oit().Fst(t.c8());if(!h)return e;const r=h.y8(i);if(!r)return e;const n=r.Iet().bet();if(!n)return e;const o=n.Brt();return o?o.Wet():e},n;if(a){let t=e[e.length-1];n=t.jm()}else{let s=e[0],t=s.ynt().wnt(),i=s.ynt().bnt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).ynt().bnt();n=(n=(n*=l)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.mnt=0===n?Number.EPSILON:n}e||s.Mnt(t/i.mnt,!0)}else s.Mnt(t)}},(t,s)=>t.Em(s),t=>t.jm(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.vnt(s)},(t,s)=>t.G5(s),t=>t.GetAngle(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.xnt||1,n=(s/=r,t.hP()),o=n+s;if(0===e.Gnt)1<o?e.Gnt+=o-1:o<0&&(e.Gnt+=o),t.Tnt(s);else{const a=t.hP()+s;0<s&&0<e.Gnt?1<a&&(e.Gnt+=a-1):0<s&&e.Gnt<0?(e.Gnt+=s,0<e.Gnt&&(t.Tnt(e.Gnt),e.Gnt=0)):s<0&&0<e.Gnt?(e.Gnt+=s,e.Gnt<0&&(t.Tnt(e.Gnt),e.Gnt=0)):s<0&&e.Gnt<0&&a<0&&(e.Gnt+=a)}},(t,s)=>{t.nP(s)},t=>t.hP(),!1,!0,(r,h,n)=>{switch(r.Gnt=0,r.xht.OZ()){case"relative":{r.xht.rit();let t=r.xht.Iet(),s=t.bet(),i=s.wet(),e=r.zO().hP(),h=e;for(const o of i){const a=o.FE(),l=r.xht.uht(a);h=e+l,h=un.Tr(h,0,1)}r._nt=e-h,r._nt=Math.round(100*(r._nt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].FE(),c=r.xht.uht(u);h-=c,h=un.Tr(h,0,1)}r.Int=h,r.Int=Math.round(100*(r.Int+Number.EPSILON))/100;break}}const t="relative"===r.xht.OZ(),s=1===r.pnt.jG();if((t||s)&&h.i6()&&h.y6()){let s=[],t=h.UN();for(;t;)s.push(t),t=t.UN();s.reverse();let i=(t,s,i)=>{const e=s.oit().Fst(t.c8());if(!e)return 0;const h=e.y8(i);if(!h)return 0;const r=h.Iet().bet();if(!r)return 0;const n=r.Brt();return n?n.Wet():0},e=s[0].ynt().Cnt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.xnt=0===e?1:e}},i=>{switch(i.xht.OZ()){case"relative":{i.Gnt=0;let t=i.zO(),s=t.hP();s=Math.round(100*(s+Number.EPSILON))/100,i.xht.oit().Ntt()?(t.nP(s+i._nt),i.RT=0):(t.nP(s-i.Int),i.RT=i._tt().vht());break}}}),fn("offsetOriginX",(t,s)=>t.Rnt(s),(t,s)=>t.Ant(s),t=>t.GW(),!1),fn("offsetOriginY",(t,s)=>t.Pnt(s),(t,s)=>t.Ent(s),t=>t._W(),!1),fn("offsetZElevation",(t,s)=>t.Fnt(s),(t,s)=>t.qM(s),t=>t.JM(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Pm()<0?-1:1;if("relative"===e.xht.OZ()&&t.i6()&&t.l6()){const r=i.Dit()*h*s;isNaN(e.mnt)&&cn.get("offsetWidth").ant(t,1,i,e,!0),t.lg(r/e.mnt,!0)}else t.lg(i.Dit()*h*s)}},(t,s,i)=>{t.Bm(i.Dit()*s)},(e,h)=>{const r=e.Pm()<0?-1:1;if(e.l6()){let t=e.UN(),s=h.oit().Fst(t.c8()),i=NaN;if(s)i=t.Pm()/s.Dit();else{const n=t.c8().L6();i=n.Oit()?t.Pm()/n.Dit():1}return e.Pm()*r/(h.Dit()*i)}return e.Pm()*r/h.Dit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.jm()<0?-1:1;if("relative"===e.xht.OZ()&&t.i6()&&t.c6()){const r=i.Lit()*h*s;isNaN(e.mnt)&&cn.get("offsetHeight").ant(t,1,i,e,!0),t.Mnt(r/e.mnt,!0)}else t.Mnt(i.Lit()*h*s)}},(t,s,i)=>{t.Em(i.Lit()*s)},(e,h)=>{const r=e.jm()<0?-1:1;if(e.c6()){let t=e.UN(),s=h.oit().Fst(t.c8()),i=NaN;if(s)i=t.jm()/s.Lit();else{const n=t.c8().L6();i=n.Oit()?t.jm()/n.Lit():1}return e.jm()*r/(h.Lit()*i)}return e.jm()*r/h.Lit()},!1);class dn extends un.nit.Bht{constructor(t){super(t),this.RT=0,this.Gnt=0,this._nt=0,this.Int=0,this.xnt=NaN,this.mnt=NaN,this.Dnt=void 0,this.Ont=void 0,this.knt=null,this.Lnt=null,this.Bnt=null,this.Nnt=null,this.Wnt=null,this.jnt=null,this.Vnt=null,this.Unt=null,this.Hnt=!1,this.znt=!1,un.rh(this.xht.oit(),un.Jnt)?this.pnt=new un.nit.Bht.qnt(this):this.pnt=new un.nit.Bht.Xnt(this);const s=this.xht.Est();switch(this.xht.git()){case"world-instance":{const i=cn.get(s);this.knt=i.unt,this.Lnt=i.ant,this.Bnt=i.lnt,this.Hnt=i.round,this.znt=i.cnt,this.Wnt=i.init,this.Nnt=i.reset;break}case"audio":this.jnt=t.Trt,this.Vnt=t._rt,this.Unt=t.Irt,this.Hnt=!!t.Crt(),this.znt=!1}}wr(){this.pnt=null,this.knt=null,this.Lnt=null,this.Bnt=null,this.Nnt=null,this.Wnt=null,this.jnt=null,this.Vnt=null,this.Unt=null,super.wr()}lht(){return this.pnt.lht()}Ynt(){return this.RT}$nt(t){this.RT=t}ost(){this.Nnt&&this.Nnt(this)}qK(){const t=this.pnt.qK();if("number"==typeof t&&(this.RT=t),this.Wnt){const s=this.zO(),i=this.xht._et();this.Wnt(this,s,i)}}pst(){const t=this.pnt.pst();"number"==typeof t&&(this.RT=t)}oht(){return this.Ort()}eet(){const t=this.krt();return t!==this.oht()}het(){return!un.ve(this.Prt)&&this.Prt!==this.oht()}Cht(){this.pnt.Cht()}Dht(t,s,i,e,h,r,n,o){return this.pnt.Dht(t,s,i,e,h,r,n,o)}Oht(){this.pnt.Oht()}Ort(){const t=this.zrt(),s=this.Hrt(),i=this.zO(),e=this.xht._et(),h=this.xht.git();switch(h){case"behavior":return t.Krt(s);case"effect":return t[s];case"instance-variable":return t.nnt(s);case"plugin":return t.Krt(s);case"world-instance":return this.knt(i,e);case"audio":return this.jnt.call(this._tt(),i,e)}}int(t,s,i){const e=this.zrt(),h=this.Hrt(),r=this.zO(),n=this.xht._et(),o=this.xht.git();switch(o){case"behavior":e.Knt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Znt(h,t);break;case"plugin":e.Knt(h,t,this._tt().Yht());break;case"world-instance":this.Lnt(r,t,n,this);break;case"audio":this.Vnt.call(this._tt(),r,t,n,this)}}Qnt(t,s,i){let e=this.xht.Ett();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.xht.oit(),u=l.FE(),c=this.xht.tht(u);if(!c)return}const h=this.zrt(),r=this.Hrt(),n=this.zO(),o=this.xht._et(),a=this.xht.git();switch(a){case"behavior":h.ent(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.ont(r,t);break;case"plugin":h.ent(r,t,this._tt().Yht());break;case"world-instance":this.Bnt(n,t,o);break;case"audio":this.Unt.call(this._tt(),n,t,o)}}}tot(t,s,i,e,h,r,n,o){this.pnt.tot(t,s,i,e,h,r,n,o)}sot(t,s,i,e,h){let r=(t="angle"===this.xht.Het()?un.Cr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Ort(),l;switch(l=0===o?this.Hnt?Math.round(a):this.znt?"angle"===this.xht.Het()?un.Ir(Math.round(un.Cr(a))):Number(un.toFixed(a,2)):a:this.Hnt?Number(un.toFixed(a,o)):(this.znt,a),this.int(l-a,s,i),this.xht.Est()){case"offsetWidth":case"offsetScaleX":{const u=this.zO(),c=u.Pm(),f=Number(un.toFixed(c,2));u.lg(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.zO(),p=d.jm(),m=Number(un.toFixed(p,2));d.Mnt(m-p);break}}}Oq(){return Object.assign(super.Oq(),{v:this.RT,a:this.Gnt,fod:this._nt,bod:this.Int,of:this.xnt,sf:this.mnt,armorf:this.Dnt,armandf:this.Ont})}kq(t){t&&(super.kq(t),this.RT=t.v,this.Gnt=t.a,this._nt=un.Se(t.fod)?t.fod:0,this.Int=un.Se(t.bod)?t.bod:0,this.xnt=un.Se(t.of)?t.of:NaN,this.mnt=un.Se(t.sf)?t.sf:NaN,this.Dnt=un.Se(t.armorf)?t.armorf:void 0,this.Ont=un.Se(t.armandf)?t.armandf:void 0)}}un.nit.Bht.Nht=dn}{const pn=self.Ws;class mn{constructor(t){this.iot=!1,this.Kht=0,this.eot=!1,this.hot=!1,this.tit=t;for(let t=0,s=this.tit.length;t<s;t++)this.tit[t].Get(this)}Pst(){return this.tit}rot(){this.iot=!0}not(){return this.iot}Mht(t){this.Kht=t}Wet(){return this.Kht}oot(t){this.eot=t}aot(){return this.eot}Sst(t){this.hot=t}lot(){return this.hot}b0(){this.iot=!1,this.Kht=0,this.eot=!1,this.hot=!1}}class gn{constructor(t){this.uot=t}wr(){this.uot=null}jG(){return 0}qK(){const t=this.uot;return this.uot.y8(),t.jrt(()=>t.Lrt(()=>0,()=>t._tt().vht()),()=>{})}pst(){}lht(){this.uot;const t=this.uot.y8();switch(t.OZ()){case"relative":return!1;case"absolute":return!0}}Cht(){this.uot;const t=this.uot.y8(),s=t.Est();switch(t.OZ()){case"relative":break;case"absolute":if(t.xet()){const i=t.Tet();i.b0()}else{const e=t.oit(),h=t.c8(),r=t._tt(),n=e.Ttt(h,r,s,t);n&&1<n.length&&new mn(n)}}}Dht(t,s,i,e,h,r,n,o){const a=this.uot,l=this.uot.y8();switch(l.OZ()){case"relative":{const u=a.Ynt();a.int(s-u,i,e),r&&this.tot(t,i,e,h,u,s),a.$nt(s);break}case"absolute":{const c=l.oit(),f=l._et();if(l.c8(),l._tt(),l.xet()){const d=l.Tet(),p=d.Pst(),m=a.qrt(p,!0),g=a.Xrt(c,c.FE(),m);if(g){const y=f.bst(),S=g.time-y;if(0==S)d.Sst(n),d.oot(o),d.rot(),d.Mht(d.Wet()+s);else{if(S<0)return;const w=l.uht(S);d.Sst(n),d.oot(o),d.rot(),d.Mht(d.Wet()+(s-w))}}}else a.Qnt(s,o,n);break}}}Oht(){const t=this.uot,s=this.uot.y8();switch(s.OZ()){case"relative":break;case"absolute":if(s.xet()){const i=s.Tet();i.not()&&t.Qnt(i.Wet(),i.aot(),i.lot())}}}tot(t,s,i,e,h,r){const n=this.uot;e||(s&&t===s.FE()?n.sot(s.UZ(),s,i):i&&t===i.FE()?n.sot(i.UZ(),s,i):r-h==0&&n.sot(s.UZ(),s,i))}}pn.nit.Bht.Xnt=gn}{const yn=self.Ws;class Sn{constructor(t){this.uot=t}wr(){this.uot=null}jG(){return 1}qK(){const t=this.uot;return t.Frt(!0),this.Urt(t.krt())}pst(){const t=this.uot;if(t.krt()!==t.Wrt())return t.Frt(!0),this.Urt(t.Wrt())}lht(){return!1}Cht(){}Dht(t,s,i,e,h,r,n,o){const a=this.uot,l=a.Ynt();switch(a.y8().OZ()){case"relative":a.int(s-l,i,e),r&&this.tot(t,i,e,h,l,s,!1,n);break;case"absolute":a.Drt()?(a.Frt(!1),a.int(l,i,e)):0===t&&0===a.y8().oit().YW()?a.Qnt(s,!0,!1):(a.int(s-l,i,e),r&&this.tot(t,i,e,h,l,s,this.cot(),n))}a.$nt(s)}Oht(){}Urt(t){const s=this.uot;return t-s.oht()}cot(){let t=this.uot,s=t.zO().c8(),i=t.y8().pk(),e=i.Gtt(),h=0;for(const r of e.MK())0===r.jG()?r._K(s)&&h++:1===r.jG()&&r.c8()===s&&h++;return h<=1}tot(t,s,i,e,h,r,n,o){const a=this.uot;e?s&&t===s.FE()?a.sot(s.UZ(),s,i,n,o):i&&t===i.FE()?a.sot(i.UZ(),s,i,n,o):i||a.sot(s.UZ(),s,i,n,o):s&&t===s.FE()?a.sot(s.UZ(),s,i,n,o):i&&t===i.FE()?a.sot(i.UZ(),s,i,n,o):r-h==0&&a.sot(s.UZ(),s,i,n,o)}}yn.nit.Bht.qnt=Sn}{const wn=self.Ws,bn=self.Ic;wn.nit.Rht=class{constructor(){}static rnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Krt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.nnt(t);break;case"plugin":h=s.Krt(t)}return h!==i}static Zc(r,n,o,a){if(!o){let t=a.Iet(),s=a.rit();return(t=s.Brt(t)).UZ()}let l=a.Ett();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Het()?"discrete":l))return n.UZ();if("continuous"===l||"step"===l){const u=a.oit().Att();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=n.UZ(),f=o.UZ(),d=n.jZ("cubic-bezier"),p=o.jZ("cubic-bezier"),m=d&&d.fot()&&p&&p.dot();if(!m&&c===f)return c;let t=n.FE(),s=o.FE(),i=("step"===l&&0!==u&&(r=wn.Tr(r,t,s)),wn.normalize(r,t,s)),e=n.bht(),h;if(m){const y=s-t;h=bn.Vc(e)(y*i,0,1,y),h=bn.Vc("cubicbezier")(h,c,c+d.JZ(),f+p.YZ(),f)}else h=bn.Vc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Het()?Math.floor(h):h}}}}{const Mn=self.Ws;Mn.nit.Aht=class{constructor(){}static rnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Krt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.nnt(t);break;case"plugin":h=s.Krt(t)}return h!==i}static Zc(t,s,i,e){if(!i){let t=e.Iet(),s=e.rit();return(t=s.Brt(t)).UZ()}let h=e.Ett();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Het()?"discrete":h))return s.UZ();if("continuous"===h||"step"===h){const r=e.oit().Att();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.FE(),o=i.FE(),a=s.UZ(),l=i.UZ(),u=("step"===h&&0!==r&&(t=Mn.Tr(t,n,o)),s.jZ("angle"));if(!u){if(a===l)return a;const f=Mn.normalize(t,n,o),d=self.Ic.Vc(s.bht());return Mn.Or(a,l,d(f,0,1,1))}{const p=u.pot();if(a===l&&0===p)return a;const m=Mn.normalize(t,n,o),g=self.Ic.Vc(s.bht()),y=g(m,0,1,1);switch(u.mot()){case"closest":return Mn.Or(a,l,y,p);case"clockwise":return Mn.kr(a,l,y,p);case"anti-clockwise":return Mn.Lr(a,l,y,p)}}}}}}{const vn=self.Ws;vn.nit.Pht=class{constructor(){}static rnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Krt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.nnt(t);break;case"plugin":h=s.Krt(t)}return!!h!=!!i}static Zc(t,s,i,e){if(i)return s.UZ()?1:0;{let t=e.Iet(),s=e.rit();return(t=s.Brt(t)).UZ()?1:0}}}}{const xn=self.Ws,Gn=[0,0,0],Tn=[0,0,0],_n=[0,0,0];xn.nit.Eht=class{constructor(){}static rnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Krt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.nnt(t);break;case"plugin":h=s.Krt(t)}return Array.isArray(i)?(Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2]):(_n.Na(i),Gn[0]=Math.floor(255*_n.fa()),Gn[1]=Math.floor(255*_n.ya()),Gn[2]=Math.floor(255*_n.Sa())),Array.isArray(h)?(Tn[0]=h[0],Tn[1]=h[1],Tn[2]=h[2]):(_n.Na(h),Tn[0]=Math.floor(255*_n.fa()),Tn[1]=Math.floor(255*_n.ya()),Tn[2]=Math.floor(255*_n.Sa())),Gn[0]!==Tn[0]||Gn[1]!==Tn[1]||Gn[2]!==Tn[2]}static Zc(t,s,i,e){if(!i){let t=e.Iet(),s=e.rit(),i=(t=s.Brt(t)).UZ();return Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2],Gn}let h=e.Ett();if("discrete"===(h="default"===h?"continuous":h)){const r=s.UZ();return Gn[0]=r[0],Gn[1]=r[1],Gn[2]=r[2],Gn}if("continuous"===h||"step"===h){const n=e.oit().Att();if("step"===h&&0!==n){const v=1/n;t=Math.floor(t*v)/v}const o=s.FE(),a=i.FE(),l=s.UZ(),u=i.UZ(),c=("step"===h&&0!==n&&(t=xn.Tr(t,o,a)),xn.normalize(t,o,a)),f=s.bht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],S=u[2],w=self.Ic.Vc(f),b=a-o,M=b*c;return Gn[0]=d===g?d:w(M,d,g-d,b),Gn[1]=p===y?p:w(M,p,y-p,b),Gn[2]=m===S?m:w(M,m,S-m,b),Gn}}}}{const In=self.Ws;In.nit.Fht=class{constructor(){}static rnt(t,s,i,e){let h;switch(e){case"behavior":h=s.Krt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.nnt(t);break;case"plugin":h=s.Krt(t)}return h!==i}static Zc(t,s,i,e){if(i)return s.UZ();{let t=e.Iet(),s=e.rit();return(t=s.Brt(t)).UZ()}}}}{const Cn=self.Ws;Cn.R$=class{constructor(){this.got=new Map}wr(){for(const t of this.got.values())t.wr();this.got.clear(),this.got=null}Gc(t){const s=new Cn.yot(t),i=s.cf();this.got.set(i,s)}ni(t){return this.got.get(t)}ytt(){return 0}static Sot(t,s,i,e){if(s)for(const h of s)Cn.R$.wot("create",h,t,i,e)}static bot(t,s,i,e){if(s)for(const h of s)Cn.R$.wot("create-including-disabled",h,t,i,e)}static Mot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].kq(t)}):t.forEach(t=>{Cn.R$.wot("load",t,i,s,e)})}static wot(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.kq(s),i.push(r);break;case"create":if("function"==typeof r.Ait&&!r.Ait())return r.wr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Rn=self.Ws;Rn.yot=class{constructor(t){this.vr="",this.yst=NaN,this.vot=0,this.xot="default",this.Got="default",this.Tot=!1,this._ot=!1,this.Iot=1,this.jst=null,this.Cot="",this.Rot=!1,this.Aot=!0,t&&(this.vr=t[0],this.yst=t[1],this.vot=t[2],this.xot=t[3],this.Got=t[4],this.Tot=!!t[6],this._ot=!!t[7],this.Iot=t[8],this.Cot=t[9],this.Rot=!!t[10],this.Aot=!!t[11],this.jst=new Rn.Pot(t[5],this))}wr(){this.jst.wr(),this.jst=null}vtt(){return this.jst||(this.jst=new Rn.Pot(null,this)),this.jst}cf(){return this.vr}lV(t){this.vr=t}YW(){return this.yst}XW(t){this.yst=t}Att(){return this.vot}Ptt(t){this.vot=t}Ett(){return this.xot}Ftt(t){this.xot=t}OZ(){return this.Got}Dtt(t){this.Got=t}KW(){return this.Tot}$W(t){this.Tot=t}QW(){return this._ot}ZW(t){this._ot=t}aW(){return this.Iot}Ott(t){this.Iot=t}hZ(){return this.Cot}ktt(){return this.Rot}Ltt(){return this.Aot}Oq(){return{trackDataJson:this.jst.Oq(),name:this.vr,totalTime:this.yst,step:this.vot,interpolationMode:this.xot,resultMode:this.Got,loop:this.Tot,pingPong:this._ot,repeatCount:this.Iot,startOnLayout:this.Cot,transformWithSceneGraph:!!this.Rot,useSystemTimescale:this.Aot}}kq(t){t&&(this.vtt().kq(t.trackDataJson),this.vr=t.name,this.yst=t.totalTime,this.vot=t.step,this.xot=t.interpolationMode,this.Got=t.resultMode,this.Tot=t.loop,this._ot=t.pingPong,this.Iot=t.repeatCount,this.Cot=t.startOnLayout,this.Rot=!!t.transformWithSceneGraph,this.Aot=!!t.useSystemTimescale)}}}{const An=self.Ws;class Pn{constructor(t,s){this.jst=s,this.Eot=null,this.Fot=null,this.Vst=NaN,this.Ust=NaN,this.xot="default",this.Got="default",this.zu=!1,this.Dot=null,this.pet=null,this.vf="",this.Oot=null,this.kot=0,this.Lot=this.jst.Rtt().YW(),this.Cf=0,this.vr="",t&&(t[0]&&(this.Eot=t[0],this.Vst=t[0][2],this.Ust=t[0][1]),this.xot=t[1],this.Got=t[2],this.zu=!!t[3],t[6]&&(this.vf=t[6]),t[7]&&(this.Oot=t[7],this.kot=t[7][0],this.Lot=t[7][1]),t[8]&&(this.Fot=t[8]),t[8]&&(this.Fot=t[8]),t[9]&&(this.Cf=t[9]),t[10]&&(this.vr=t[10]),this.Dot=new An.Bot(t[4],this),this.pet=new An.Not(t[5],this))}wr(){this.Eot=null,this.jst=null,this.Dot&&(this.Dot.wr(),this.Dot=null),this.pet&&(this.pet.wr(),this.pet=null),this.Oot=null}vtt(){return this.jst}Qst(){return this.Dot||(this.Dot=new An.Bot(null,this)),this.Dot}rit(){return this.pet||(this.pet=new An.Not(null,this)),this.pet}Wot(){return this.Eot}cit(){return this.Ust}Eit(t){this.Ust=t}uit(){return this.Vst}Iit(t){this.Vst=t}Ett(){return this.xot}Ftt(t){this.xot=t}OZ(){return this.Got}Dtt(t){this.Got=t}Ait(){return this.zu}Pit(t){this.zu=!!t}m8(){return this.vf}bst(){return this.kot}Cit(){return this.Lot}Rit(t){this.Lot=t}Dit(){return this.Fot[0]}Fit(t){this.Fot||(this.Fot=[]),this.Fot[0]=t}Lit(){return this.Fot||(this.Fot=[]),this.Fot[1]}kit(t){this.Fot||(this.Fot=[]),this.Fot[1]=t}jG(){return this.Cf}cf(){return this.vr}Oq(){return{keyframeDataJson:this.Dot.Oq(),propertyTrackDataJson:this.pet.Oq(),instanceData:this.Eot,additionalInstanceData:this.Fot,instanceUid:this.Vst,objectClassIndex:this.Ust,interpolationMode:this.xot,resultMode:this.Got,enabled:this.zu,id:this.vf,nestedData:this.Oot,type:this.Cf,name:this.vr}}kq(t){t&&(this.Eot=t.instanceData,this.Vst=t.instanceUid,this.Ust=t.objectClassIndex,this.xot=t.interpolationMode,this.Got=t.resultMode,this.zu=t.enabled,this.vf=t.id,this.Cf=t.type||0,this.vr=t.name||"",this.Lot=this.jst.Rtt().YW(),t.nestedData&&(this.Oot=t.nestedData,this.kot=this.Oot[0],this.Lot=this.Oot[1]),t.additionalInstanceData&&(this.Fot=t.additionalInstanceData),this.Qst().kq(t.keyframeDataJson),this.rit().kq(t.propertyTrackDataJson))}}An.Pot=class{constructor(t,s){this.WQ=s,this.jot=[],An.R$.Sot(this.jot,t,Pn,this)}wr(){this.WQ=null;for(const t of this.jot)t.wr();An.Hn(this.jot),this.jot=null}Rtt(){return this.WQ}xst(){const t=new Pn(null,this);return this.jot.push(t),t}Vot(t){return t.Qst().Zst()[0]}Uot(t){const s=t.Qst().Zst();return s.at(-1)}qit(s,t){const i=t.Qst().Zst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.FE()===s)return h}}Hot(s,t){const i=t.Qst().Zst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.FE()>s)return h}}zot(s,t){const i=t.Qst().Zst(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.FE()>=s)return h}}Jit(s,t){const i=t.Qst().Zst();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.FE()<=s)return e}}*Mtt(){for(const t of this.jot)yield t}Oq(){return{trackDataItemsJson:this.jot.map(t=>t.Oq())}}kq(t){t&&An.R$.Mot(this.jot,t.trackDataItemsJson,Pn,this)}}}{const En=self.Ws;class Fn{constructor(t,s){this.pet=s,this.Jot="",this.qot=null,this.Rrt=null,this.Cf=null,this.Xot=NaN,this.Yot=NaN,this.xot="default",this.Got="default",this.zu=!1,this.$ot=null,this.Kot=!0,t&&(this.Jot=t[0][0],this.qot=t[0].slice(1),this.Rrt=t[1],this.Cf=t[2],this.Xot=t[3],this.Yot=t[4],this.xot=t[5],this.Got=t[6],this.zu=!!t[7],this.$ot=new En.Zot(t[8],this),this.Kot=t[9])}wr(){this.$ot.wr(),this.$ot=null,this.pet=null,this.qot=null}rit(){return this.pet}bet(){return this.$ot||(this.$ot=new En.Zot(null,this)),this.$ot}git(){return this.Jot}Oet(t){this.Jot=t}Let(){return this.qot}Net(t){this.qot=t}jet(){return this.Rrt}Uet(t){this.Rrt=t}jG(){return this.Cf}SetType(t){this.Cf=t}Xet(){return this.Xot}Yet(t){this.Xot=t}$et(){return this.Yot}Ket(t){this.Yot=t}Ett(){return this.xot}Ftt(t){this.xot=t}OZ(){return this.Got}Dtt(t){this.Got=t}Ait(){return this.zu}Pit(t){this.zu=!!t}Qet(){return!!this.Kot}Oq(){return{propertyKeyframeDataJson:this.$ot.Oq(),sourceAdapterId:this.Jot,sourceAdapterArguments:this.qot,property:this.Rrt,type:this.Cf,min:this.Xot,max:this.Yot,interpolationMode:this.xot,resultMode:this.Got,enabled:this.zu,canHavePropertyKeyframes:this.Kot}}kq(t){t&&(this.Jot=t.sourceAdapterId,this.qot=t.sourceAdapterArguments,this.Rrt=t.property,this.Cf=t.type,this.Xot=t.min,this.Yot=t.max,this.xot=t.interpolationMode,this.Got=t.resultMode,this.zu=t.enabled,this.Kot=t.canHavePropertyKeyframes,this.bet().kq(t.propertyKeyframeDataJson))}}En.Not=class{constructor(t,s){this.Wst=s,this.Qot=[],En.R$.Sot(this.Qot,t,Fn,this)}wr(){this.Wst=null;for(const t of this.Qot)t.wr();En.Hn(this.Qot),this.Qot=null}_it(){return this.Wst}Kit(){const t=new Fn(null,this);return this.Qot.push(t),t}qet(t){const s=t.bet();return s.wet()[0]}Brt(t){const s=t.bet(),i=s.wet();return i.at(-1)}tht(s,t){const i=t.bet(),e=i.wet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.FE()===s)return r}}eht(s,t){const i=t.bet(),e=i.wet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.FE()>s)return r}}hht(s,t){const i=t.bet(),e=i.wet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.FE()>=s)return r}}sht(s,t){const i=t.bet(),e=i.wet();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.FE()<=s)return h}}*hit(){for(const t of this.Qot)yield t}Oq(){return{propertyTrackDataItemsJson:this.Qot.map(t=>t.Oq())}}kq(t){t&&En.R$.Mot(this.Qot,t.propertyTrackDataItemsJson,Fn,this)}}}{const Dn=self.Ws;class On{constructor(t,s){if(this.Dot=s,this.P3=-1,this.tat="noease",this.sat=!1,this.ftt=null,this.iat=null,t){this.P3=t[0],this.tat=t[1],this.sat=!!t[2];const i=t[3];this.ftt=i?i.split(" "):[],this.iat=new Set(this.ftt.map(t=>t.toLowerCase())),this.eat=null}}wr(){this.Dot=null,Dn.Hn(this.ftt),this.ftt=null,this.iat.clear(),this.iat=null,this.eat=null}Qst(){return this.Dot}IZ(){return this.eat}hat(t){this.eat=t}FE(){return this.P3}qW(t){this.P3=t,this.Dot.rat()}bht(){return this.tat}u8(t){this.tat=t}Ait(){return this.sat}Pit(t){this.sat=!!t}i8(){return this.ftt}Wtt(t){this.ftt=t?t.split(" "):[],this.iat=new Set(this.ftt.map(t=>t.toLowerCase()))}nat(){return this.iat}kst(t){return this.iat.has(t.toLowerCase())}Oq(){return{time:this.P3,ease:this.tat,enable:this.sat,tags:this.ftt}}kq(t){t&&(this.P3=t.time,this.tat=t.ease,this.sat=t.enable,this.ftt=t.tags,this.iat=new Set(this.ftt.map(t=>t.toLowerCase())))}}Dn.Bot=class{constructor(t,s){this.Wst=s,this.Kst=[],Dn.R$.Sot(this.Kst,t,On,this),this.rat()}wr(){this.Wst=null;for(const t of this.Kst)t.wr();Dn.Hn(this.Kst),this.Kst=null}rat(){this.Kst.sort((t,s)=>t.FE()-s.FE());for(let t=0;t<this.Kst.length;t++){const s=this.Kst[t];s.hat(this.Kst[t+1])}}_it(){return this.Wst}oat(){return this.Kst.length}Zst(){return this.Kst}Yit(){const t=new On(null,this);return this.Kst.push(t),this.rat(),t}Qit(t){for(const s of this.Kst)if(t(s)){const i=this.Kst.indexOf(s);-1!==i&&(s.wr(),this.Kst.splice(i,1))}this.aat(),this.rat()}aat(){this.Kst.sort((t,s)=>t.FE()-s.FE())}uet(t){return this.Kst.indexOf(t)}cet(t){return this.Kst[t]}*lat(){for(const t of this.Kst)yield t}*uat(){for(let t=this.Kst.length-1;0<=t;t--)yield this.Kst[t]}Oq(){return{keyframeDataItemsJson:this.Kst.map(t=>t.Oq())}}kq(t){t&&(Dn.R$.Mot(this.Kst,t.keyframeDataItemsJson,On,this),this.rat())}}}{const kn=self.Ws;class Ln{constructor(t,s){this.$ot=s,this.Kht=null,this.cat=null,this.Cf="",this.P3=NaN,this.tat="noease",this.sat=!1,this.fat=null,this.dat=void 0,this.pat="line",t&&(this.Kht=t[0][0],this.cat=t[0][1],this.Cf=t[0][2],this.P3=t[1],this.tat=t[2],this.sat=!!t[3],this.pat=t[5],this.fat=null,t[4]&&(this.fat=new kn.mat(t[4],this)),this.eat=null,this.gat=null)}wr(){this.$ot=null,this.fat&&(this.fat.wr(),this.fat=null),this.eat=null,this.gat=null}yat(){return this.fat}hat(t){this.eat=t}IZ(){return this.eat}Sat(t){this.gat=t}CZ(){return this.gat}Wet(){return this.Kht}Mht(t){"color"===this.Cf&&kn.Se(t)?(this.Kht[0]=kn.Qr(t),this.Kht[1]=kn.tn(t),this.Kht[2]=kn.sn(t)):this.Kht=t}Nrt(){return this.cat}yht(t){"color"===this.Cf&&kn.Se(t)?(this.cat[0]=kn.Qr(t),this.cat[1]=kn.tn(t),this.cat[2]=kn.sn(t)):this.cat=t}UZ(){const t=this.$ot.Iet().OZ();return"relative"===t?this.Wet():"absolute"===t?this.Nrt():void 0}jG(){return this.Cf}SetType(t){this.Cf=t}FE(){return this.P3}qW(t){this.P3=t,this.$ot.wat()}bht(){return this.tat}u8(t){this.tat=t}Ait(){return this.sat}Pit(t){this.sat=!!t}RZ(){return this.pat}jZ(s){if(this.fat){if(!this.dat&&null!==this.dat){const i=this.fat.bat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.m8()===s)return this.dat=h,this.dat}}this.dat=null}return this.dat}}Oq(){const t=this.fat;return{addonDataJson:t&&t.Oq(),value:this.Kht,aValue:this.cat,type:this.Cf,time:this.P3,ease:this.tat,enable:this.sat}}kq(t){t&&(t.addonDataJson&&this.fat._SetFromJson(t.addonDataJson),this.Kht=t.value,this.cat=t.aValue,this.Cf=t.type,this.P3=t.time,this.tat=t.ease,this.sat=t.enable)}}kn.Zot=class{constructor(t,s){this.det=s,this.yet=[],this.Mat=[],kn.R$.Sot(this.yet,t,Ln,this),kn.R$.bot(this.Mat,t,Ln,this),this.wat()}wr(){this.det=null;for(const t of this.yet)t.wr();kn.Hn(this.yet),this.yet=null;for(const s of this.Mat)s.wr();kn.Hn(this.Mat),this.Mat=null}wat(){let s=this.yet;s.sort((t,s)=>t.FE()-s.FE());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.hat(s[t+1]),0<=t-1&&i.Sat(s[t-1])}(s=this.Mat).sort((t,s)=>t.FE()-s.FE());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.hat(s[t+1]),0<=t-1&&e.Sat(s[t-1])}}mht(){const t=new Ln(null,this);return this.yet.push(t),this.wat(),t}ght(t){for(const s of this.yet)if(t(s)){const i=this.yet.indexOf(s);-1!==i&&(s.wr(),this.yet.splice(i,1))}this.vat(),this.wat()}vat(){this.yet.sort((t,s)=>t.FE()-s.FE())}Iet(){return this.det}xat(){return this.yet.length}Brt(){return this.yet[this.yet.length-1]}wet(){return this.yet}_Z(){return this.Mat}*Gat(){for(const t of this.yet)yield t}*Tat(){for(let t=this.yet.length-1;0<=t;t--)yield this.yet[t]}Oq(){const t=this.yet,s=this.Mat;return{propertyKeyframeDataItemsJson:t.map(t=>t.Oq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.Oq())}}kq(t){t&&(kn.R$.Mot(this.yet,t.propertyKeyframeDataItemsJson,Ln,this),kn.R$.Mot(this.Mat,t.propertyKeyframeDataItemsIncludingDisabledJson,Ln,this),this.wat())}}}{const Bn=self.Ws;class Nn{constructor(t,s){this.fat=s,this.vf=t[0],this._at=t[1]}wr(){this.fat=null,this._at=null}yat(){return this.fat}m8(){return this.vf}Oq(){return{id:this.vf,data:this._at}}kq(t){t&&(this.vf=t.id,this._at=t.data)}}class Wn extends Nn{constructor(t,s){super(t,s),this.Iat=this._at[0],this.Cat=!!this._at[1],this.Rat=this._at[2],this.Aat=!!this._at[3]}wr(){super.wr()}JZ(){return this.Iat}fot(){return this.Cat}YZ(){return this.Rat}dot(){return this.Aat}Oq(){return Object.assign(super.Oq(),{startAnchor:this.Iat,startEnable:!!this.Cat,endAnchor:this.Rat,endEnable:!!this.Aat})}kq(t){t&&(super.kq(t),this.Iat=t.startAnchor,this.Cat=!!t.startEnable,this.Rat=t.endAnchor,this.Aat=!!t.endEnable)}}class jn extends Nn{constructor(t,s){super(t,s),this.Pat=this._at[0],this.Eat=this._at[1]}wr(){super.wr()}mot(){return this.Pat}pot(){return this.Eat}Oq(){return Object.assign(super.Oq(),{direction:this.Pat,revolutions:this.Eat})}kq(t){t&&(super.kq(t),this.Pat=t.direction,this.Eat=t.revolutions)}}Bn.mat=class{constructor(t,s){this.Fat=s,this.Dat=[],Bn.R$.Sot(this.Dat,t,{prop:0,map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}wr(){this.Fat=null;for(const t of this.Dat)t.wr();Bn.Hn(this.Dat),this.Dat=null}Oat(){return this.Fat}bat(){return this.Dat}*kat(){for(const t of this.Dat)yield t}Oq(){return{addonDataItemsJson:this.Dat.map(t=>t.Oq())}}kq(t){t&&Bn.R$.Mot(this.Dat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}}}{let m=self.Ws,i=0;m.Jnt=class extends m.aK{constructor(t,s){super("tween-"+i++,t,s),this.vf="",this.Lat=!1,this.Bat="start-value",this.Hst=null,this.Nat=null,this.Wat=null,this.fet=null,this.jat=null}wtt(t){const s=m.Sr(m.Event,"tweenstatereleased");s.Vat=this,t.dispatchEvent(s)}jG(){return 1}zQ(){for(const t of this.WQ.vtt().Mtt())this.jQ.push(m.Uat.Bx(this,t));this.fet=this.jQ[0]}vst(){const t=this.WQ.vtt().xst(),s=m.Uat.Bx(this,t);return this.jQ.push(s),this.Hat(),s}Hat(){this.fet=this.jQ[0]}y8(t){return this.fet.Pst()[0]}zet(t){this.zat=t}c8(){const t=this.xZ();if(t&&t.length){const s=t[0];if(this.fet=s){const i=s.c8();return s.lit()?i:void 0}}}Jat(t){this.Wat||(this.Wat=[]),this.Wat.push(t)}qat(t){this.Nat||(this.Nat=[]),this.Nat.push(t)}Xat(t){if(this.Wat){const s=this.Wat.indexOf(t);-1!==s&&this.Wat.splice(s,1)}}Yat(t){if(this.Nat){const s=this.Nat.indexOf(t);-1!==s&&this.Nat.splice(s,1)}}$at(t,s){for(const i of this.jQ)for(const e of i.tit)if(e.Est()===s){const h=e.rit(),r=e.Iet(),n=h.qet(r);n.Mht(t),n.yht(t)}}Kat(t){for(const s of this.jQ)for(const i of s.tit)if(i.Est()===t)return i}Zat(t){for(const s of t){const i=this.Kat(s);this.$at(i.oht(),s)}if(this.Ntt()){const e=this.YW()-this.FE();this.XW(e);for(const h of this.jQ)h.Rit(e);this.tst(0)}else{const r=this.FE();this.XW(r);for(const n of this.jQ)n.Rit(r);this.tst(r)}this.sst()}Qat(t,s){const i=this.Kat(s),e=i.rit(),h=i.Iet(),r=e.Brt(h);r.qW(this.YW()),r.Mht(t),r.yht(t)}tlt(t){this.vf=t}m8(){return this.vf}slt(t){this.Bat=t}ilt(){return this.Bat}p8(t){this.Lat=t}d8(){return this.Lat}Htt(){if(this.Wat)for(const t of this.Wat)t(this);if(!this.tZ())for(const s of this.jQ)s.het()}ztt(){this.ntt=this.bf.Jtt()}iZ(){if(!this.ltt&&(this.ltt=!0,this.Nat))for(const t of this.Nat)t(this)}qW(t){this.elt(),super.qW(t)}nst(t){(t=m.Se(t)?t:this.YW())<0?this.XQ=0:t>=this.YW()?this.XQ=this.YW():this.XQ=t,this.fet.ost()}qK(t){if(!this.sZ()&&"current-state"===this.ilt())for(const s of this.jQ)s.eet();super.qK(t)}HW(t=!1){if(super.HW(t),!this.tZ())for(const s of this.jQ)s.iet()}b0(t=!0,s=!1){this.elt(),super.b0(t,s)}elt(){for(const t of this.jQ){const s=t=>{const s=t.FE(),i=this.YW();return 0!==s&&s!==i};t.Zit(s),t.tet(s)}}J$(){if(!this.VW()){const t=this.c8();if(t&&t.QB().Yz())return!1;this.NQ.UK(this),this.fst()}return!0}KK(h,t,s){if(this.Hst||(this.Hst=this.c8()),!this.Hst||this.Hst.Sj())this.HW(!0),this.ztt();else{const i=this.Hst.hO();if(0!==(h=-1!==i?s*i:h)||0!==this.ctt){this.ctt=h;const r=this.XQ+this.YQ,n=h*this.$Q,o=r+n,a=this.WQ.yst;o<0?(this.XQ=0,this.YQ=-o):a<=o?(this.XQ=a,this.YQ=this.XQ-o):(this.XQ=o,this.YQ=0);let t=!1,s=!1,i=this.KW(),e=this.QW();i||e?i&&!e?0<this.$Q?this.XQ>=a&&(this.nst(0),this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),s=!0):this.XQ<=0&&(this.nst(a),this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),s=!0):!i&&e?0<this.$Q?this.XQ>=a&&(this.tst(a),this.t8(-1*this.s8()),s=!0,1===this.KQ?this.ZQ<this.aW()?(this.ZQ++,this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong),this.KQ=0):(this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong),t=!0):0===this.KQ&&(this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong),this.KQ=1)):this.XQ<=0&&(this.tst(0),this.t8(-1*this.s8()),s=!0,1===this.KQ?this.ZQ<this.aW()?(this.ZQ++,this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong),this.KQ=0):(t=!0,this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong)):0===this.KQ&&(this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong),this.KQ=1)):i&&e&&(0<this.$Q?this.XQ>=a&&(this.tst(a),this.t8(-1*this.s8()),s=!0,0===this.KQ&&(this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong)),1===this.KQ&&(this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong)),this.KQ++,this.KQ=m.wrap(this.KQ,0,2)):this.XQ<=0&&(this.tst(0),this.t8(-1*this.s8()),s=!0,0===this.KQ&&(this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong)),1===this.KQ&&(this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),this.hlt(m.rlt.Tween.GY.OnAnyTweenPingPong),this.hlt(m.rlt.Tween.GY.OnTweensPingPong)),this.KQ++,this.KQ=m.wrap(this.KQ,0,2))):0<this.$Q?this.XQ>=a&&(this.ZQ<this.aW()?(this.ZQ++,this.nst(0),this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),s=!0):(this.tst(a),t=!0)):this.XQ<=0&&(this.ZQ<this.aW()?(this.ZQ++,this.nst(a),this.hlt(m.rlt.Tween.GY.OnAnyTweenLoop),this.hlt(m.rlt.Tween.GY.OnTweensLoop),s=!0):(this.tst(0),t=!0)),t?(this.fet.Sst(),this.HW(!0),this.ztt()):(this.fet.Zc(this.XQ,!0,!1,s,this.utt,!1),this.utt&&(this.utt=!1))}}}hlt(t){const s=this.c8(),i=s.nlt(m.rlt.Tween);i.PushTriggerTween(this),this.bf.N4(t,s,i.q6()),i.PopTriggerTween()}Oq(){const t=super.Oq(),s=this.Rtt();return Object.assign(t,{tweenDataItemJson:s.Oq(),id:this.vf,destroyInstanceOnComplete:this.Lat,initialValueMode:this.Bat})}kq(t){if(t){const s=this.Rtt();s.kq(t.tweenDataItemJson),super.kq(t),this.vf=t.id,this.Lat=t.destroyInstanceOnComplete,this.Bat=t.initialValueMode,this.Hat()}}static IsPlaying(t){return t.IsPlaying()}static r8(t){return t.r8()}static olt(t){return!!t.QW()&&0===t.Btt()}static llt(t){return!!t.QW()&&1===t.Btt()}static ult(t){const s=t.runtime.Gtt(),i=new m.yot;if(t.json){i.kq(t.json.tweenDataItemJson);const e=new m.Jnt(i,s);return e.kq(t.json),e}{const h=new m.Jnt(i,s),r=(m.Ue(t.clt)||(t.clt=[t.clt]),h.tlt(t.id),h.Wtt(t.tags),h.slt(t.initialValueMode),h.p8(t.releaseOnComplete),h.$W(t.loop),h.ZW(t.pingPong),h.XW(t.time),h.Ptt(0),h.Ftt("default"),h.Dtt(t.clt[0].resultMode),h.Ott(t.repeatCount),h.vst()),n=(r.Iit(t.X6.f4()),r.Ftt("default"),r.Dtt(t.clt[0].resultMode),r.Pit(!0),r.Eit(t.X6.QB().QF()),t.X6.L6()),o=n.Oit()?n.Dit():t.X6.zO().Pm(),a=n.Oit()?n.Lit():t.X6.zO().jm(),l=(r.Fit(o),r.kit(a),r.Xit()),u=(l.qW(0),l.u8("noease"),l.Pit(!0),l.Wtt(""),r.Xit());u.qW(t.time),u.u8("noease"),u.Pit(!0),u.Wtt("");for(const c of t.clt){const f=r.$it(),d=(f.Oet(c.sourceId),f.Bet(c.sourceArgs),f.Vet(c.property),f.zet(c.type),f.Yet(NaN),f.Ket(NaN),f.Ftt("default"),f.Dtt(c.resultMode),f.Pit(!0),f.pht()),p=(d.SetType(c.valueType),d.qW(0),d.u8(c.ease),d.Pit(!0),d.Mht(c.startValue),d.yht(c.startValue),f.pht());p.SetType(c.valueType),p.qW(t.time),p.u8(c.ease),p.Pit(!0),p.Mht(c.endValue),p.yht(c.endValue),f._tt()}return h}}static Iit(t,s){if(!isNaN(s))for(const i of t.xZ())i.Iit(s)}flt(t,s){return this.jat||(this.jat=m.Sr(self.a8,this,t,s)),this.jat}}}{const Vn=self.Ws;Vn.Uat=class extends Vn.xtt{constructor(t,s){super(t,s),this.dlt=null,this.plt=null}static Bx(t,s){return Vn.Sr(Vn.Uat,t,s)}mlt(){1===this.tit.length?this.dlt=this.tit[0]:(this.dlt=this.tit[0],this.plt=this.tit[1])}sit(){for(const t of this.Wst.rit().hit())this.tit.push(Vn.glt.Bx(this,t));this.mlt()}$it(){const t=this.Wst.rit(),s=t.Kit(),i=Vn.glt.Bx(this,s);return this.tit.push(i),this.mlt(),i}qK(){if(this.ait(),this.lit()||!this.Ctt()){const t=this.oit(),s=t.Ntt(),i=s?0:this.Cit();for(const h of this.tit)h.qK(i),0===this.iit&&1===h.Wit()&&(this.iit=1),0===this.hK&&1===h.XK()&&(this.hK=1);this.eit=0;const e=this.tit.some(t=>t.gst());e&&(this.eit=1),this.$st=this.jit(i),this.qst=!1,this.Xst=!1,this.Zc(i)}}wst(){}Zc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.Hst||this.c8(),this.Hst){const o=!this.Hst.Sj();return o&&(!r||!this.QB().Yz())&&((this.plt?(this.dlt.Zc(t,i,e,n),this.plt):this.dlt).Zc(t,i,e,n),void(0!==this.dlt.Wit()&&(this.zst||(this.zst=this.Hst.zO()),this.zst)&&this.zst.mN()))}}Mst(){}kq(t){super.kq(t),this.mlt()}}}{const Un=self.Ws;Un.glt=class extends Un.nit{constructor(t,s){super(t,s),this.ylt=!1}static Bx(t,s){return Un.Sr(Un.glt,t,s)}Zc(t,s=!1,i=!1,e=!1){let h,r;if(this.ylt)h=this.yet[0],r=this.yet[1];else{if(s)h=this.pet.sht(t,this.det);else{if(this.Met){const n=this.oit(),o=this.Met.IZ(),a=this.Met.FE(),l=o?o.FE():n.YW();(t<=a||l<=t)&&(this.Met=this.pet.sht(t,this.det))}else this.Met=this.pet.sht(t,this.det);h=this.Met}r=h.IZ()}this.met.Zc(t,h,r,s,i,e)}pht(){const t=this.det.bet(),s=t.mht();return this.Met=null,this.ylt=this.Zet().length<=2,s}tet(t){this.Met=null;const s=this.det.bet();s.ght(t),this.ylt=this.Zet().length<=2}Oq(){return{sourceAdapterJson:this._tt().Oq(),basic:this.ylt}}kq(t){t&&(this._tt().kq(t.sourceAdapterJson),this.ylt=t.basic)}}}{const Hn=self.Ws,zn=self.Ic;Hn.Qc=class extends Hn.dr{constructor(t,s=!0){super(),this.vr=t[0],this.Slt=t[2],this.wlt=[];for(const i of t[1]){const e=Hn.blt.Bx(this,i);this.wlt.push(e)}for(let t=0;t<this.wlt.length;t++){const h=this.wlt[t],r=this.wlt[t+1],n=this.wlt[t-1];h.hat(r),h.Sat(n)}this.Mlt=new Map,this.vlt=new Map,this.xlt(),s&&zn.if(this.vr,(t,s,i,e)=>this.Zc(t,s,i,e),null,{transition:this})}static Bx(t){return Hn.Sr(Hn.Qc,t)}wr(){for(const t of this.wlt)t.wr();Hn.Hn(this.wlt),this.wlt=null,this.Mlt.clear(),this.Mlt=null,this.vlt.clear(),this.vlt=null}tf(t){this.Slt=!!t}Glt(t){const s=this.vlt.get(t);if(s)return s;for(const i of this.wlt)if(i.Tlt()===t)return this.vlt.set(t,i),i}_lt(s){for(let t=this.wlt.length-1;0<=t;t--){const i=this.wlt[t],e=i.Tlt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.CZ();if(!h)break;if(h.Tlt()!==t.Tlt())break;t=h}return t}}}}Zc(t,s,i,e){let h=t/e;if(this.Slt){const S=this.Glt(0),w=this.Glt(1),b=s+(s+i)*S.Ilt(),M=(s+i)*w.Ilt(),v=M-b;return 0===e?b+v:zn.hf(t,b,v,e)}0===e&&(h=1);let r=this._lt(h),n=r.IZ();if(!n){const x=r.CZ(),G=r;r=x,n=G}const o=n.Tlt()-r.Tlt(),a=Hn.Gr(h,r.Tlt(),n.Tlt(),0,o);if(r.Clt()||0==o){const T=s+(s+i)*r.Ilt(),_=(s+i)*n.Ilt(),I=_-T;return 0==o?1===a?T+I:T:zn.hf(a,T,I,o)}let l=r.Tlt(),u=r.Ilt(),c=r.Tlt()+r.Rlt(),f=r.Ilt()+r.Alt(),d=n.Tlt()+n.Plt(),p=n.Ilt()+n.Elt(),m=n.Tlt(),g=n.Ilt(),y=zn.Vc("spline")(a,l,u,c,f,d,p,m,g,this.Mlt.get(r));return(1-(y+=r.Ilt()))*s+y*(s+i)}xlt(){this.Mlt.clear();for(let t=0;t<this.wlt.length-1;t++){const s=this.wlt[t];if(s.fot()){const i=s,e=this.wlt[t+1];if(e.dot()){const h=i.Tlt(),r=i.Tlt()+i.Rlt(),n=e.Tlt()+e.Plt(),o=e.Tlt();this.Mlt.set(i,zn.rf(h,r,n,o))}}}}}}{const Jn=self.Ws;Jn.blt=class extends Jn.dr{constructor(t,s){super(),this.Flt=t,this.Dlt=s[0],this.Olt=s[1],this.klt=s[2],this.Llt=s[3],this.Blt=s[4],this.Nlt=s[5],this.Cat=s[6],this.Aat=s[7],this.Wlt=s[8],this.eat=null,this.gat=null}wr(){this.Flt=null}static Bx(t,s){return Jn.Sr(Jn.blt,t,s)}hat(t){this.eat=t}IZ(){return this.eat}Sat(t){this.gat=t}CZ(){return this.gat}Tlt(){return this.Dlt}Ilt(){return this.Olt}Rlt(){return this.klt}Alt(){return this.Llt}Plt(){return this.Blt}Elt(){return this.Nlt}fot(){return this.Cat}dot(){return this.Aat}Clt(){return"linear"===this.Wlt}jlt(){return"cubic"===this.Wlt}}}{const qn=self.Ws;qn.Vlt=class extends qn.dr{constructor(t){super(),this.bf=t,this.Ult=[]}wr(){for(const t of this.Ult)t.wr();qn.Hn(this.Ult),this.Ult=null}Bx(t){this.Ult.push(qn.Qc.Bx(t))}}}{const Xn=self.Ws;Xn.Hlt=class extends Xn.dr{constructor(t){super(),this.bf=t,this.zlt=null,this.Jlt=null,this.Y$=t=>this.$$(t.X6)}wr(){if(this.rK(),this.zlt){for(const t of this.zlt.values())t.clear();this.zlt.clear()}this.zlt=null,this.bf=null}Bx(t){if(this.zlt||(this.zlt=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.zlt.has(e)||this.zlt.set(e,new Map),this.zlt.get(e));h.set(i,t)}}nK(){const t=this.bf.Qf();t&&t.addEventListener("instancedestroy",this.Y$)}rK(){const t=this.bf.Qf();t&&t.removeEventListener("instancedestroy",this.Y$)}qlt(){return!!this.zlt&&0!==this.zlt.size}Xlt(t,s){let i;if(i=t instanceof Xn.Ylt?t.QF():t,this.zlt.has(i)){const e=this.zlt.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}$lt(t,s){this.Jlt||(this.Jlt=new WeakMap),this.Jlt.has(t)||this.Jlt.set(t,s)}Klt(t){if(!this.Jlt)return"";const s=this.Jlt.get(t);return s||""}$$(t){this.Jlt&&this.Jlt.has(t)&&this.Jlt.delete(t)}}}{const Yn=self.Ws;Yn.Zlt=class{constructor(t){this.bf=t,this.Qlt=new Yn.tut}wr(){this.Qlt.wr(),this.Qlt=null,this.bf=null}pk(){return this.bf}Bx(t){this.Qlt.Gc(t)}sut(t){return this.Qlt.ni(t)}iut(){return this.Qlt.iut()}}}{const $n=self.Ws;$n.eut=class{constructor(t,s,i,e,h,r,n){this.bf=h.pk(),this.hut=h,this.rut=t,this.nut=i,this.out=e,this.My=s,this.A$=r,this.aut=n??r.c8().f4(),this.lut(),this.uut=this.fut?.cut()??-1,this.dut=[],this.mut=null,this.gut=NaN,this.yut=null,this.Sut=null,this.wut=null,this.but="",this.Mut=null,this.vut="",this.xut="",this.Gut=0,this.Tut=!1,this.ett=!1}wr(){this.ett||($n.Hn(this.dut),this.dut=null,this.bf=null,this.hut=null,this.out=null,this.A$=null,this.mut=null,this.gut=NaN,this.yut&&this.yut.clear(),this.yut=null,this.Sut=null,this.wut=null,this.but="",this.Mut=null,this.vut="",this.xut="",this.ett=!0)}br(){return this.ett}_ut(){return this.hut}pk(){return this.bf}cf(){return this.rut}Iut(){return this.out}jW(){return this.My}wK(){return this.A$||(this.A$=this.bf.WO(this.aut).L6()),this.A$}Cut(){return this.Rut(this.uut)}Aut(){const t=this.Cut();return t?t.jW():""}Put(){const t=this.Cut();return t?t.i8():[]}Eut(t){const s=this.Put();if(!s)return!1;if(!s.length)return!1;const i=$n.eut.jtt(t);return!(!i||!i.length)&&i.every($n.eut.Utt,s)}Fut(t,s){const i=this.Put();if(!i)return!1;if(!i.length)return!1;const e=$n.eut.jtt(t);return!(!e||!e.length)&&e.every(t=>$n.eut.Dut.call(i,t,s))}static Utt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static jtt(t){return t.trim().split(" ")}static Dut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>$n.compare(t.trim(),i,s.trim()))}Out(t){const s=this.Cut();if(s){if($n.Se(t)){const i=s.kut(),e=i?i[t]:void 0;if($n.Se(e))return this.Rut(e)}if("string"==typeof t)for(const h of s.kut()){const r=this.Rut(h);if(r.JW(t))return this.Rut(r.cut())}}}Lut(t){const s=this.Out(t);return s?s.jW():""}But(t){const s=this.Out(t);return s?s.i8():""}Nut(t){const s=this.Cut();if(!s)return-1;const i=s.kut();if(!i)return-1;const e=this.Out(t);return e?i.indexOf(e.cut()):-1}Wut(){const t=this.Cut();if(!t)return 0;const s=t.kut();return s?s.length:0}Rut(t){return this.out.Rut(t)}b0(){const t=this.jut();t.Vut(!0)}Vut(t){if(this.Uut()){for(const[s,i]of this.Uut().entries())i.Vut(!1);this.Uut().clear()}if(this.yut=null,this.mut=null,this.Hut=null,this.Sut=null,this.but="",this.Mut=null,this.vut="",this.xut="",this.dut=[],t){this.hut.zut(this);const e=this.fut.cut();e!==this.uut&&this.Jut(e)}else this.uut=this.fut.cut()}qut(){const t=this.out.Rut(this.uut);return t?t.Yut().Xut():0}$ut(t){const s=this.Kut(t);return s?s.cf():""}Zut(t){let s;return $n.Se(t)&&(s=this.Kut(t)),"string"==typeof t&&(s=this.Qut(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Wet():""}tct(t){let s;if($n.Se(t)&&(s=this.Kut(t)),s="string"==typeof t?this.Qut(t):s){const i=s.sct();$n.Se(i)&&(this.dut.push(this.uut),this.Jut(i))}}ict(t){const s=this.out.ect(t);if(s){const i=this.out.Rut(s.cut());i&&(this.dut.push(this.uut),this.Jut(i.cut()))}}hct(){const t=this.dut.pop();$n.Se(t)?this.Jut(t):this.rct()&&(this.hut.zut(this.rct(),!0,!1,!1),this.rct().Jut(this.nct()),this.jut().oct(this.rct()))}lct(t){const s=this.Cut();if(s){s.cut();const i=this.Out(t);i&&(this.dut.push(this.uut),this.Jut(i.cut()))}}uct(s){if($n.Se(s)){const t=this.out.Rut(this.uut),i=t.Yut().cct();return!!i[s]}if("string"==typeof s){const e=this.out.Rut(this.uut),h=e.Yut().cct();for(let t=0;t<h.length;t++)if(h[t].cf()===s)return!0}return!1}fct(){this.Tut=!0}dct(){return 0<this.Gut}pct(){this.Gut++}mct(){this.Gut--,0===this.Gut&&this.Tut&&this.hut.gct(this)}Jut(t){const i=this.uut,s=this.wK().c8();if(this.pct(),this.hut.yct(this),this.bf.N4($n._Y.Flowchart.GY.OnBeforeAnyNodeChange,s),this.bf.N4($n._Y.Flowchart.GY.OnBeforeTaggedNodeChange,s),this.bf.N4($n._Y.Flowchart.GY.OnBeforeAnyNodeChangeInFlowchart,s),this.bf.N4($n._Y.Flowchart.GY.OnBeforeTaggedNodeChangeInFlowchart,s),this.uut=t,this.bf.N4($n._Y.Flowchart.GY.OnAnyNodeChange,s),this.bf.N4($n._Y.Flowchart.GY.OnTaggedNodeChange,s),this.bf.N4($n._Y.Flowchart.GY.OnAnyNodeChangeInFlowchart,s),this.bf.N4($n._Y.Flowchart.GY.OnTaggedNodeChangeInFlowchart,s),this.hut.Sct(),this.mct(),!this.br()){const e=this.Rut(this.uut);if("reference"===e.jG()){const h=e.wct();if(this.bct(e)){this.dut.pop();const r=this.Mct(e),n=(this.hut.zut(r,!0,!0,!1),r.vct(this,i),this.jut());n.oct(r)}else{const o=e.xct();if(h){this.dut.pop();let s=e.Gct();if(s){let t=this.hut.Tct(s);for(;t;)s=$n.pp(s),t=this.hut.Tct(s)}else{s=h+"-ref";let t=this.hut.Tct(s);for(;t;)s=$n.pp(s),t=this.hut.Tct(s)}const a=this.hut._ct(h,o,s,this.A$,!0),l=(a.vct(this,i),this.Ict(e,a),this.jut());a.Cct(l),l.oct(a)}}}}}Kut(t){const s=this.out.Rut(this.uut);if(!s)return null;const i=s.Yut().cct();if(!i)return null;const e=i[t];return e||null}Qut(t){const s=this.out.Rut(this.uut);if(!s)return null;const i=s.Yut().Rct(t);return i||null}lut(s){if("number"==typeof s){let t=this.Rut(s);t=t||this.out.Act(),this.fut=t}else{let t=this.out.ect(this.nut);t=t||this.out.Act(),this.fut=t}}Oq(){return this.Tut?null:{flowchartName:this.rut,flowchartTag:this.My,startNodeTag:this.nut,currentNodeId:this.uut,previousNodeIds:this.dut,pluginUID:this.A$.c8().f4(),reference:{previousFlowchartTag:this.rct()?this.rct().jW():"",previousStartNodeId:$n.Se(this.nct())?this.nct():NaN,referencesJson:this.Pct(),currentReferenceFlowchartTag:this.Ect()?this.Ect().jW():"",rootFlowchartTag:this.jut()?this.jut().jW():""}}}Pct(){if(!this.Fct())return null;const t=[];for(const[s,i]of this.Uut().entries())t.push({flowchartElementId:s.cut(),flowchartStateTag:i.jW()});return t.length?t:null}kq(t){if(t){if(this.rut=t.flowchartName,this.My=t.flowchartTag,this.nut=t.startNodeTag,this.uut=t.currentNodeId,this.dut=t.previousNodeIds,this.aut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.but=s.previousFlowchartTag,this.gut=s.previousStartNodeId,this.Mut=s.referencesJson,this.vut=s.currentReferenceFlowchartTag,this.xut=s.rootFlowchartTag}this.lut()}}rct(){return"string"==typeof this.but&&this.but&&(this.mut=this.hut.Tct(this.but),this.but=""),this.mut}nct(){return this.gut}vct(t,s){this.mut=t,this.gut=s}Ect(){return"string"==typeof this.vut&&this.vut&&(this.Sut=this.hut.Tct(this.vut),this.vut=""),this.Sut}oct(t){this.Sut=t,this.Sut===this&&(this.Sut=null)}jut(){return"string"==typeof this.xut&&this.xut&&(this.wut=this.hut.Tct(this.xut),this.xut=""),this.wut||this}Cct(t){this.wut=t}Fct(){return this.Dct(),!!this.yut}bct(t){return this.Dct(),this.yut&&this.yut.has(t)}Dct(){if(this.Mut){this.yut&&this.yut.clear(),this.yut||(this.yut=new Map);for(const t of this.Mut){const s=this.hut.Tct(t.flowchartStateTag),i=s.Rut(t.flowchartElementId);this.yut.set(i,s)}this.Mut=null}}Uut(){return this.Dct(),this.yut}Mct(t){return this.Dct(),this.yut.get(t)}Ict(t,s){this.yut||(this.yut=new Map),this.yut.set(t,s)}}}{const Kn=self.Ws;Kn.Oct=class{constructor(t){this.bf=t,this.kct=new Map,this.Lct=null,this.Bct=[],this.Nct=()=>this.tK(),this.Wct=null}wr(){Kn.Hn(this.Bct),this.Bct=null,this.kct.clear(),this.kct=null,this.Lct=null,this.bf=null,this.Wct=null}pk(){return this.bf}_ct(t,s,i,e,h,r){const n=this.bf._ut().sut(t);if(n){if(!this.kct.has(i)){const o=new Kn.eut(t,i,s,n,this,e,r);return this.kct.set(i,o),h&&this.zut(o,!0),o}{const a=this.kct.get(i);a&&this.gct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}gct(t){if(t.fct(),!t.dct()){const s=t.jW();this.kct.delete(s),t.wr(),this.Lct===t&&(this.Lct=null)}}jct(t){t.b0()}Tct(t){return this.kct.get(t)}yct(t){this.Bct.push(t)}Sct(){this.Bct.pop()}zut(t,s=!1,i=!1,e=!0){if(e){const h=t.Ect();t=h||t}t!==this.Lct&&(this.Vct(),this.Uct(t,s,i))}Hct(t){return"string"==typeof t?this.Tct(t):this.Bct.length?this.Bct[this.Bct.length-1]:this.Lct}Vct(){if(this.Lct&&!this.Lct.br()){const t=this.Lct.wK().c8();this.Lct.pct(),this.yct(this.Lct),this.bf.N4(Kn._Y.Flowchart.GY.OnBeforeFlowchartChange,t),this.Sct(),this.Lct.mct()}}Uct(t,s=!1,i=!1){if(this.Lct=t,this.Lct&&!this.Lct.br()){const e=this.Lct.wK().c8();this.Lct.pct(),this.yct(this.Lct),this.bf.N4(Kn._Y.Flowchart.GY.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Lct.lut(i),s&&(this.bf.N4(Kn._Y.Flowchart.GY.OnAnyNodeChange,e),this.bf.N4(Kn._Y.Flowchart.GY.OnTaggedNodeChange,e)),this.Sct(),this.Lct.mct()}}Oq(){return{flowchartJsonObjects:[...this.kct.values()].map(t=>t.Oq()),currentFlowchartTag:this.Lct?this.Lct.jW():null}}kq(t){if(t){this.Wct=t;const s=new Map;for(const i of this.Wct.flowchartJsonObjects){const e=i.flowchartTag;if(this.kct.has(e)){const h=this.kct.get(e);h.kq(i),s.set(e,h)}else{const r=this._ct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.kq(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.kct.entries())s.has(n)||o.wr();this.kct.clear(),this.kct=s,this.bf.gY()?this.bf.Qf().addEventListener("afterload",this.Nct):this.tK()}}tK(){this.bf.Qf().removeEventListener("afterload",this.Nct);const t=this.kct.get(this.Wct.currentFlowchartTag);t&&this.zut(t,!0),this.Wct=null}}}{const Zn=self.Ws;Zn.tut=class{constructor(){this.zct=new Map}wr(){for(const t of this.zct.values())t.wr();this.zct.clear(),this.zct=null}Gc(t){const s=new Zn.Jct(t),i=s.cf();this.zct.set(i,s)}ni(t){return this.zct.get(t)}iut(){return!!this.zct.size}static qct(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Qn=self.Ws;Qn.Jct=class{constructor(t){this.vr=t[0],this.Xct=new Qn.Yct(t[1],this)}wr(){this.Xct.wr(),this.Xct=null}$ct(){return this.Xct}Rut(t){return this.Xct.Rut(t)}ect(t){return this.Xct.ect(t)}Act(){return this.Xct.Act()}cf(){return this.vr}}}{const to=self.Ws;class so{constructor(t,s){this.Xct=s,this.Cf=t[7],this.Kct=t[0],this.My=t[1],this.My?this.ftt=this.My.trim().split(" ").map(t=>t.trim()):this.ftt=[],this.Zct=t[2],this.Qct=null,this.tft=null,"dictionary"===this.Cf&&(this.Qct=t[3],this.tft=t[4]),this.ift=t[6],this.eft=null,this.hft=null,this.rft=null,"reference"===this.Cf&&(this.eft=t[8],this.hft=t[9],this.rft=t[10]),this.nft=new to.oft(t[5],this)}wr(){this.Xct=null}$ct(){return this.Xct}Yut(){return this.nft}cut(){return this.Kct}jW(){return this.My}i8(){return this.ftt}JW(t){if(!this.ftt)return!1;if(!this.ftt.length)return!1;const s=to.eut.jtt(t);return!(!s||!s.length)&&s.every(to.eut.Utt,this.ftt)}aft(){return this.ift}kut(){return this.Zct}lft(){return this.Qct}uft(){return this.tft}jG(){return this.Cf}wct(){return this.eft}xct(){return this.hft}Gct(){return this.rft}}to.Yct=class{constructor(t,s){this.out=s,this.cft=[],this.fft=new Map,this.dft=new Map,this.pft=null,to.tut.qct(this.cft,t,so,this);for(const i of this.cft){const e=i.cut(),h=i.jW(),r=i.i8(),n=i.aft();if(this.fft.set(e,i),h)for(const a of r)this.dft.has(a)||this.dft.set(a,new Set),this.dft.get(a).add(i);n&&(this.pft=i);const o=i.Yut();for(const l of o.mft()){const u=l.cut();this.fft.set(u,l)}}}wr(){this.out=null;for(const t of this.cft)t.wr();to.Hn(this.cft),this.cft=null}Iut(){return this.out}Rut(t){return this.fft.get(t)}ect(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.dft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Act(){return this.pft}*gft(){for(const t of this.cft)yield t}}}{const io=self.Ws;class eo{constructor(t,s){this.nft=s,this.Kct=t[0],this.vr=t[1],this.Kht=t[2],this.yft=t[3]}wr(){this.nft=null}Yut(){return this.nft}cut(){return this.Kct}cf(){return this.vr}Wet(){return this.Kht}sct(){return this.yft}}io.oft=class{constructor(t,s){this.Sft=s,this.wft=[],this.bft=new Map,io.tut.qct(this.wft,t,eo,this);for(const i of this.wft)this.bft.set(i.cf(),i)}wr(){this.Sft=null;for(const t of this.wft)t.wr();io.Hn(this.wft),this.wft=null}Mft(){return this.Sft}Xut(){return this.wft.length}cct(){return this.wft}Rct(t){return this.bft.get(t)}*mft(){for(const t of this.wft)yield t}}}{const ho=self.Ws;ho.vft=class extends ho.dr{constructor(t){super(),this.xft=t,this.Gft=[],this.Gft.push(ho.Sr(ho.Tft,this)),this.by=0,this._ft=this.Gft[0]}wr(){for(const t of this.Gft)t.wr();ho.Hn(this.Gft),this._ft=null,this.xft=null}QB(){return this.xft}n5(){return this._ft}Ift(){return this.Gft[this.by-1]}lc(){this.n5().lc()}Cft(){const t=this.Gft,s=++this.by;if(s===t.length){const i=ho.Sr(ho.Tft,this);t.push(i),this._ft=i}else{const e=t[s];e.b0(),this._ft=e}}Rft(){const t=this.Gft,s=++this.by,i=(s===t.length&&t.push(ho.Sr(ho.Tft,this)),t[s]);i.N0(t[s-1]),this._ft=i}SV(){this._ft=this.Gft[--this.by]}Aft(i){const e=this.Gft;for(let t=0,s=e.length;t<s;++t)e[t].Aft(i)}}}{const ro=self.Ws;ro.Tft=class extends ro.dr{constructor(t){super(),this.Gft=t,this.xft=this.Gft.QB(),this.Pft=this.xft.pk().UD(),this.Eft=!0,this.e7=[],this.Fft=[]}wr(){this.Dft(),this.Gft=null,this.xft=null,this.Pft=null}Dft(){ro.Hn(this.e7),ro.Hn(this.Fft)}QB(){return this.xft}Oft(){return this.Eft}kft(){return this.Eft?!!this.xft.a5():!!this.e7.length}r5(){return this.Eft?this.xft.r5():this.e7}Lft(){return!!this.Fft.length}Bft(){return this.Fft}Nft(){const t=this.r5();return t.length?t:this.Fft}b0(){this.Eft=!0,ro.Hn(this.Fft)}lc(){this.Eft=!0}N0(t){t.Oft()?this.b0():(this.Eft=!1,ro.Xn(this.e7,t.e7),ro.Hn(this.Fft))}Wft(t){this.e7.push(t)}jft(t){this.Fft.push(t)}Vft(t){this.Eft=!!t}Uft(){return this.e7}Hft(){return this.Fft}zft(t){this.Eft=!1,ro.Hn(this.e7),this.e7.push(t)}Jft(t){this.Eft=!1,ro.Xn(this.e7,t)}qft(t){this.Eft=!1,ro.Hn(this.e7);for(const s of t)this.e7.push(s)}Xft(t,s){for(const i of s)t.has(i)||this.Fft.push(i)}Yft(t){for(const s of t)this.e7.push(s);ro.Qn(this.Fft,t)}$ft(){ro.Hn(this.Fft)}Kft(t){if(t)if(this.Pft.nV().kD().Zft()){this.Oft()&&(ro.Hn(this.e7),ro.Xn(this.Fft,t.QB().r5()),this.Eft=!1);const s=this.Fft.indexOf(t);-1!==s&&(this.e7.push(this.Fft[s]),this.Fft.splice(s,1))}else this.zft(t)}Aft(t){ro.Qn(this.e7,t),ro.Qn(this.Fft,t)}}}{const no=self.Ws;no.Qft=class extends no.dr{constructor(t){super(),this.t0t=t,this.bf=this.t0t.pk(),this.Gft=[],this.Gft.push(no.Sr(no.s0t,this,null)),this.by=0,this.i0t=[]}wr(){for(const t of this.Gft)t.wr();no.Hn(this.Gft),no.Hn(this.i0t),this.t0t=null,this.bf=null}AD(){return this.t0t}pk(){return this.bf}nV(){return this.Gft[this.by]}e0t(){return this.Gft}h0t(){return this.by}oV(t){const s=this.Gft,i=++this.by;if(i===s.length){const e=no.Sr(no.s0t,this,t);return s.push(e),e}{const h=s[i];return h.b0(t),h}}SV(){--this.by}r0t(t){this.i0t.push(t)}n0t(){this.i0t.pop()}VD(){const t=this.i0t;return 0===t.length?null:t.at(-1)}}}{const oo=self.Ws;oo.s0t=class extends oo.dr{constructor(t,s){super(),this.Gft=t,this.bf=this.Gft.pk(),this.o0t=s,this.a0t=0,this.l0t=0,this.u0t=!1,this.c0t=!1,this.f0t=null,this.d0t=0,this.p0t=0,this.m0t=null}wr(){this.b0(null),this.Gft=null,this.bf=null}b0(t){this.o0t=t,this.a0t=0,this.l0t=0,this.u0t=!1,this.c0t=!1,this.m0t=null}g0t(t,s){this.o0t=t,this.a0t=0,this.l0t=s}y0t(){this.a0t=0,this.l0t=0}kD(){return this.o0t}S0t(t){this.o0t=t}w0t(){return this.a0t}b0t(t){this.a0t=t}M0t(){return this.l0t}v0t(t){this.l0t=t}x0t(t){this.u0t=!!t}G0t(){return this.u0t}T0t(t){this.c0t=!!t}_0t(){return this.c0t}I0t(t){this.f0t=t}C0t(){return this.f0t}R0t(t,s){this.d0t=t,this.p0t=s}HD(){return this.d0t}zD(t){this.p0t=t}A0t(){return this.p0t}P0t(){const t=this.o0t;return!!t.E0t()||this.a0t<t.F0t()-1&&!!t.rV().length}D0t(t){this.m0t=t}O0t(){return this.m0t}}}{const ao=self.Ws;ao.k0t=class extends ao.dr{constructor(t){super(),this.t0t=t,this.bf=this.t0t.pk(),this.Gft=[],this.by=-1,this._ft=null,this.L0t=[]}wr(){ao.Hn(this.Gft),this.t0t=null,this.bf=null}B0t(t){this.L0t=t;const s=this.L0t.slice(0);this.Gft.push(s),this.by=0,this._ft=s}AD(){return this.t0t}pk(){return this.bf}N0t(){return this._ft}oV(){const t=++this.by,s=this.Gft;t===s.length?s.push(this.L0t.slice(0)):ao.Xn(s[t],this.L0t),this._ft=s[t]}SV(){this._ft=this.Gft[--this.by]}}}{const lo=self.Ws;lo.W0t=class extends lo.dr{constructor(t){super(),this.t0t=t,this.bf=this.t0t.pk(),this.Gft=[],this.by=-1}wr(){lo.Hn(this.Gft),this.t0t=null,this.bf=null}AD(){return this.t0t}pk(){return this.bf}j0t(){return 0<=this.by}N0t(){return this.Gft[this.by]}oV(){if(++this.by,this.by===this.Gft.length){const t=lo.Sr(lo.V0t,this);return this.Gft.push(t),t}{const s=this.Gft[this.by];return s.b0(),s}}SV(){--this.by}U0t(s){const i=this.Gft;for(let t=this.by;0<=t;--t){const e=i[t];if(e.cf()===s)return e}return null}H0t(){return this.Gft.slice(0,this.by+1)}}}{const uo=self.Ws;uo.V0t=class extends uo.dr{constructor(t){super(),this.z0t=t,this.vr="",this.by=0,this.J0t=!1,this.q0t=NaN}b0(){this.vr="",this.by=0,this.J0t=!1,this.q0t=NaN}lV(t){this.vr=t}cf(){return this.vr}mV(t){this.by=t}QF(){return this.by}HW(){this.J0t=!0}yV(){return this.J0t}X0t(t){this.q0t=t}Y0t(){return this.q0t}}}{const co=self.Ws;co.$0t=class extends co.dr{constructor(){super(),this.Gft=[],this.by=-1}wr(){co.Hn(this.Gft)}N0t(){return this.Gft[this.by]}oV(){if(++this.by,this.by!==this.Gft.length)return this.Gft[this.by];{const t=[];return this.Gft.push(t),t}}SV(){--this.by}}}{let t=function(t,s){return t.QF()-s.QF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const fo=self.Ws;fo.K0t=class extends fo.dr{constructor(t){super(),this.bf=t,this.Z0t=[],this.Q0t=new Map,this.tdt=[],this.sdt=new Map,this.idt=new Map,this.edt=new Map,this.hdt=new Map,this.rdt=new Map,this.ndt=new Map,this.odt=0,this.adt=[],this.ldt=[],this.udt=[],this.cdt=new Map,this.fdt=new Map,this.Pft=fo.Sr(fo.Qft,this),this.ddt=fo.Sr(fo.k0t,this),this.z0t=fo.Sr(fo.W0t,this),this.pdt=[],this.mdt=[],this.gdt=[],this.ydt=0,this.Sdt=0,this.wdt=0,this.bdt=[],this.Mdt=[],this.vdt=[],this.xdt=new Map,this.Gdt=new Map,self.c3_callFunction=(t,s)=>this.Tdt(t,s)}wr(){this.BY(),this.Pft.wr(),this.Pft=null,this.ddt.wr(),this.ddt=null,fo.Hn(this.mdt),fo.Hn(this.gdt),this.bf=null,fo.Hn(this.Z0t),this.Q0t.clear()}Bx(t){const s=fo.Sr(fo._dt,this,t);this.Z0t.push(s),this.Q0t.set(s.cf().toLowerCase(),s)}Idt(t){this.pdt.push(t)}Cdt(){for(const t of this.fdt.values())t.Rdt();for(const s of this.cdt.values())s.Cdt();for(const i of this.fdt.values())i.Cdt();for(const e of this.Z0t)e.Cdt();for(const h of this.Z0t)h.hY();for(const r of this.pdt)r.Cdt(!1);fo.Hn(this.pdt),this.ddt.B0t(this.udt)}pk(){return this.bf}eY(t){return this.Q0t.get(t.toLowerCase())||null}Adt(t){this.tdt.push(t),this.sdt.set(t.Pdt(),t)}Edt(t){this.idt.set(t.yJ(),t)}Fdt(t){this.edt.set(t.yJ(),t)}Ddt(t){this.hdt.set(t.yJ(),t)}Odt(t){switch(t.kdt()){case 0:this.cdt.set(t.Ldt().toLowerCase(),t);break;case 1:this.fdt.set(t.Ldt().toLowerCase(),t)}}Bdt(t){this.ndt.set(t.yJ(),t),(t.Yz()?this.adt:this.ldt).push(t)}Ndt(i){2<=i.length&&i.sort(t);let e=this.rdt.get(i.length);e||(e=[],this.rdt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}Wdt(t){return this.udt.push(t.jdt()),this.odt++}UD(){return this.Pft}Vdt(){return this.UD().nV()}kD(){return this.Vdt().kD()}Udt(){const t=this.Vdt(),s=t.kD();return s.Hdt(t.w0t())}zdt(){const t=this.Vdt(),s=t.kD();return s.Jdt(t.M0t())}qdt(){return this.ddt}aV(){return this.z0t}Xdt(t){const s=[];for(t=t.Ydt();t;)fo.Qh(s,t.$dt()),t=t.Ydt();return s}Kdt(t){const s={};for(const i of this.Xdt(t))s[i.Zdt()]=i.Qdt();return Object.create(Object.prototype,s)}t1t(t){return this.ndt.get(t)||null}s1t(t){return this.idt.get(t)||null}i1t(t){return this.edt.get(t)||null}e1t(t){return this.hdt.get(t)||null}PD(t){return this.cdt.get(t.toLowerCase())||null}h1t(t,s){let i=this.fdt.get((t.cf()+"."+s).toLowerCase());if(i)return i;if(!t.lJ())for(const e of t.r1t())if(i=this.fdt.get((e.cf()+"."+s).toLowerCase()))return i;return null}n1t(){return this.adt}o1t(){return this.ldt}a1t(t){for(const s of this.adt)s.l1t();if(t)for(const i of this.ldt)i.A2()&&i.l1t()}u1t(t){return this.sdt.get(t.toLowerCase())||null}c1t(t){const s=this.idt.get(t);return s&&s.f1t()?s:null}d1t(){return this.tdt}p1t(){for(const t of this.tdt)t.m1t()}g1t(){for(const t of this.Z0t)t.y1t()}S1t(t){this.g1t(),this.ydt++;for(const s of t.v$()){const i=s.PX();i&&(this.bf.w1t(s),i.hI(),this.bf.b1t())}this.ydt--}async M1t(t){this.g1t(),this.ydt++;for(const s of this.v1t(t))await this.bf.x1t(s);this.ydt--}*v1t(t){for(const s of t.v$()){const i=s.PX();i&&(this.bf.w1t(s),yield*i.G1t(),this.bf.b1t())}}T1t(t,s,i,e){let h=!1;if(!t.xO())return this._1t(s,i,e);this.Sdt++;for(const r of t.v$()){const n=r.PX();if(n){this.bf.w1t(r);for(const a of n.I1t()){const l=a.T1t(s,i,e);h=h||l}const o=n.T1t(s,i,e);h=h||o,this.bf.b1t()}}return this.Sdt--,h}*C1t(t,s,i,e){let h=!1;if(!t.xO())return this._1t(s,i,e);this.Sdt++;for(const r of t.v$()){const n=r.PX();if(n){this.bf.w1t(r);for(const a of n.I1t()){const l=yield*a.C1t(s,i,e);h=h||l}const o=yield*n.C1t(s,i,e);h=h||o,this.bf.b1t()}}return this.Sdt--,h}_1t(t,s,i){return this.mdt.push([t,s,i]),!1}R1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.gdt.push([t,s,i,e]),h}*A1t(){if(this.bf.P1t())throw new Error("should not be in breakpoint");const t=this.bf._O();for(;this.gdt.length;){const[s,i,e,h]=this.gdt.shift(),r=yield*this.C1t(t,s,i,e);h(r)}}async E1t(){for(const t of this.A1t())await this.bf.x1t(t)}F1t(t,i,e,h){let r=!1,s=t.xO(),n=s.PX();if(n){this.Sdt++,this.bf.w1t(s);const o=n.I1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].F1t(i,e,h);r=r||l}const a=n.F1t(i,e,h);return r=r||a,this.bf.b1t(),this.Sdt--,r}}*D1t(t,i,e,h){let r=!1,s=t.xO(),n=s.PX();if(n){this.Sdt++,this.bf.w1t(s);const o=n.I1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].D1t(i,e,h);r=r||l}const a=yield*n.D1t(i,e,h);return r=r||a,this.bf.b1t(),this.Sdt--,r}}O1t(){return this.Sdt}k1t(){return 0<this.O1t()}L1t(){return++this.Sdt}B1t(){--this.Sdt}N1t(){return 0<this.ydt}p5(){return this.N1t()||this.k1t()}IY(t){for(const[s,i,e]of this.mdt)this.T1t(t,s,i,e);fo.Hn(this.mdt)}f5(t){t?this.wdt++:this.wdt--}n4(){return 0<this.wdt}W1t(i){for(let t=0,s=i.length;t<s;++t)i[t].j1t().lc()}V1t(i){for(let t=0,s=i.length;t<s;++t)i[t].j1t().Cft()}fV(i){for(let t=0,s=i.length;t<s;++t)i[t].j1t().Rft()}pV(i){for(let t=0,s=i.length;t<s;++t)i[t].j1t().SV()}LD(s){const i=new Set,e=this.Pft.e0t(),h=this.Pft.h0t();for(let t=0;t<=h;++t){const r=e[t].O0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}U1t(t){const s=new Set([...t]),i=this.LD(s);if(0<i.size){for(const e of i)e.j1t().Cft();return[...i]}return null}H1t(){const t=fo.Sr(fo.z1t,this);return this.bdt.push(t),t}J1t(){return this.bdt}q1t(){if(this.bdt.length){let i=this.Vdt(),e=!1;this.ydt++;for(let t=0,s=this.bdt.length;t<s;++t){const h=this.bdt[t];h.X1t()&&h.Y1t(i),h.$1t()&&(e=!0)}e&&(this.K1t(),i.b0(null)),this.ydt--}}async Z1t(){if(this.bdt.length){let i=this.Vdt(),e=!1;this.ydt++;for(let t=0,s=this.bdt.length;t<s;++t){const h=this.bdt[t];h.X1t()&&await h.Q1t(i),h.$1t()&&(e=!0)}e&&(this.K1t(),i.b0(null)),this.ydt--}}K1t(){const t=fo.Zn(this.bdt,t=>t.$1t());for(const s of t)s.wr()}BY(){for(const t of this.bdt)t.wr();fo.Hn(this.bdt)}tpt(t){for(const s of this.bdt)s.Aft(t);for(const i of t){const e=this.Gdt.get(i);if(this.Gdt.delete(i),e)for(const{resolve:h}of e.spt.values())h(!0)}}ipt(t){this.Mdt.push({promise:t,ept:this.O1t()})}hpt(){fo.Hn(this.Mdt)}rpt(){const s=this.O1t();this.Mdt=this.Mdt.filter(t=>t.ept<=s)}npt(){const t=Promise.all(this.Mdt.map(t=>t.promise));return this.Mdt=[],t}JD(t){const s=t.toLowerCase();this.vdt.push(s),this.bf.N4(fo._Y.TY.GY.opt,null),this.vdt.pop();for(const e of this.bf.AD().J1t())e.apt()&&e.lpt()===s&&e.upt();const i=this.xdt.get(s);i&&(i.resolve(),this.xdt.delete(s))}XD(t){const i=t.toLowerCase(),s=this.xdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.xdt.set(i,{promise:t,resolve:s}),t}}cpt(){if(0===this.vdt.length)throw new Error("not in a signal");return this.vdt.at(-1)}fpt(t){let s=this.Gdt.get(t);return s||(s={dpt:[],spt:new Map},this.Gdt.set(t,s)),s}G4(t,s){const i=this.fpt(t),e=s.toLowerCase();i.dpt.push(e),this.bf.N4(t.XL().mpt().GY.ppt,t),i.dpt.pop();for(const r of this.bf.AD().J1t())r.gpt()&&r.lpt()===e&&r.ypt(t);const h=i.spt.get(e);h&&(h.resolve(!1),i.spt.delete(e)),0===i.dpt.length&&0===i.spt.size&&this.Gdt.delete(t)}T4(t,s){const i=this.fpt(t),e=s.toLowerCase(),h=i.spt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.spt.set(e,{promise:t,resolve:s}),t}}Spt(t){const s=this.fpt(t);if(s&&0!==s.dpt.length)return s.dpt.at(-1);throw new Error("not in a signal")}Oq(){return{groups:this.wpt(),cnds:this.bpt(),acts:this.Mpt(),vars:this.vpt(),waits:this.xpt()}}kq(t){this.Gpt(t.groups),this.Tpt(t.cnds),this._pt(t.acts),this.Ipt(t.vars),this.Cpt(t.waits)}wpt(){const t={};for(const s of this.d1t())t[s.yJ().toString()]=s.Rpt();return t}Gpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.c1t(e);h&&h.Apt(i)}}bpt(){const t={};for(const[s,i]of this.edt){const e=i.Oq();e&&(t[s.toString()]=e)}return t}Tpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.edt)r.kq(s.get(h)||null)}Mpt(){const t={};for(const[s,i]of this.hdt){const e=i.Oq();e&&(t[s.toString()]=e)}return t}_pt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.hdt)r.kq(s.get(h)||null)}vpt(){const t={};for(const[s,i]of this.ndt)i.Ppt()||!i.Yz()&&!i.A2()||(t[s.toString()]=i.Wet());return t}Ipt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.t1t(e);h&&h.Mht(i)}}xpt(){return this.bdt.filter(t=>!t.Ept()).map(t=>t.Oq())}Cpt(t){this.BY();for(const s of t){const i=fo.z1t.Fpt(this,s);i&&this.bdt.push(i)}}Dpt(){return[...this.bf._O().v$()].map(t=>t.PX()).filter(t=>t).map(t=>t.Opt())}kpt(t){for(;t;){const s=t.Ydt();if(s instanceof fo.Lpt)return s;t=s}return null}Tdt(t,s){Array.isArray(s)||(s=[]);const i=this.PD(t.toLowerCase());if(!i)return null;if(!i.nc())return i.ED();const e=i.Bpt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].jdt()),s.length<e.length;);const h=i.DD();return h.BD(h.OD(),!1,i.WD(),i.ED(),...s)}}}{const po=self.Ws;po._dt=class extends po.dr{constructor(t,s){super(),this.t0t=t,this.bf=t.pk(),this.vr=s[0],this.Npt=[],this.Wpt=new Map,this.jpt=new Map,this.Vpt=new Map,this.Upt=!1,this.Hpt=[],this.zpt=[],this.Jpt=new Set;for(const i of s[1])this.qpt(i,null,this.Npt);this.Xpt=this.bf.e$()?{type:"sheet",name:this.vr,Ypt:0,children:[]}:null}wr(){this.t0t=null,this.bf=null}qpt(t,s,i){switch(t[0]){case 0:case 3:this.$pt(t,s,i);break;case 1:this.Kpt(t,s,i);break;case 2:this.Zpt(t,s,i);break;case 4:this.Qpt(t,s);break;case 5:this.tmt(t,s,i);break;case 6:this.smt(t,s);break;default:throw new Error("invalid event type")}}$pt(t,s,i){const e=po.imt.Bx(this,s,t);if(e.Zft()){i.push(e);const h=e.emt();for(let t=0,s=h.length;t<s;++t)h[t].hmt()&&this.rmt(e,t)}else e.hmt()?this.rmt(e,0):i.push(e)}Qpt(t,s){const i=po.Lpt.nmt(this,s,t);this.t0t.Odt(i)}smt(t,s){const i=po.Lpt.omt(this,s,t);this.t0t.Odt(i)}Kpt(t,s,i){const e=po.amt.Bx(this,s,t);i.push(e)}Zpt(t,s,i){const e=po.lmt.Bx(this,s,t);i.push(e)}tmt(t,s,i){const e=po.umt.Bx(this,s,t);i.push(e)}rmt(h,r){h.Zft()||this.t0t.Idt(h);const n=h.Hdt(r),o=n.cmt(),a=n.QB();if(n.fmt()){let t=this.jpt.get(a),s=(t||(t=new Map,this.jpt.set(a,t)),n.dmt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.Wpt.get(a),s=(t||(t={pmt:new Map,mmt:new Map},this.Wpt.set(a,t)),n.q6()),i,e=(s?(i=t.mmt.get(s))||(i=new Map,t.mmt.set(s,i)):i=t.pmt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}Cdt(){const i=this.Npt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof po.imt&&i[t+1].gmt();i[t].Cdt(e)}}ymt(t){this.Hpt.push(t)}hY(){po.Hn(this.zpt),this.Smt(this),this.Jpt.clear()}Smt(t){const s=t.zpt,i=t.Jpt;for(const e of this.Hpt){const h=e.wmt();e.bmt()&&t!==h&&!i.has(h)&&(i.add(h),h.Smt(t),s.push(h))}}I1t(){return this.zpt}AD(){return this.t0t}pk(){return this.bf}cf(){return this.vr}Mmt(t,s){this.Vpt.set(s,t)}vmt(t){return this.Vpt.get(t)||null}y1t(){this.Upt=!1}hI(){if(!this.Upt){const t=this.bf,s=t.xmt(),i=s?performance.now():0,e=(this.Upt=!0,this.AD()),h=e.Vdt();for(const r of this.Npt)r.hI(h),e.W1t(r.rV()),e.hpt(),t.g5();h.b0(null),s&&(this.Xpt.Ypt+=performance.now()-i)}}*G1t(){if(!this.Upt){this.Upt=!0;const t=this.bf,s=this.AD(),i=s.Vdt();for(const e of this.Npt)yield*e.G1t(i),s.W1t(e.rV()),s.hpt(),t.g5();i.b0(null)}}T1t(e,h,r){if(!h)return this.Gmt(e,h,null,null);{let t=h.QB(),s=!1,i=this.Gmt(e,h,t,r);s=s||i;for(const n of t.r1t())i=this.Gmt(e,h,n,r),s=s||i}}Gmt(t,s,i,e){const h=this.Wpt.get(i);if(!h)return!1;const r=e?h.mmt.get(e):h.pmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){const u=this.Tmt(s,a,l);o=o||u}return o}*C1t(e,h,r){if(!h)return yield*this._mt(e,h,null,null);{let t=h.QB(),s=!1,i=yield*this._mt(e,h,t,r);s=s||i;for(const n of t.r1t())i=yield*this._mt(e,h,n,r),s=s||i}}*_mt(t,s,i,e){const h=this.Wpt.get(i);if(!h)return!1;const r=e?h.mmt.get(e):h.pmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){let t;t=a.Imt()?this.Tmt(s,a,l):yield*this.Cmt(s,a,l),o=o||t}return o}F1t(t,s,i){const e=s.QB(),h=this.jpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=this.Tmt(null,a[0],a[1]);o=o||l}return o}*D1t(t,s,i){const e=s.QB(),h=this.jpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Imt()?this.Tmt(null,s,i):yield*this.Cmt(null,s,i),o=o||e}return o}Tmt(t,s,i){let e=this.bf,h=this.t0t,r=h.kD(),n=h.UD(),o=h.O1t(),a=!1;r&&h.V1t(r.OD()),h.V1t(s.OD());const l=1<o,u=(l&&h.qdt().oV(),n.oV(s));if(t){const f=s.emt()[i].QB(),d=f.n5();d.zft(t),t.u4()&&t.Rmt()}let c=!0;if(s.UN()){const p=s.Amt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Pmt(u)){c=!1;break}}return c&&(s.Zft()?s.Emt(u,i):s.hI(u),a=u.G0t()),n.SV(),l&&h.qdt().SV(),h.pV(s.OD()),r&&h.pV(r.OD()),r||1!==o||(h.hpt(),h.n4())||e.g5(),a}*Cmt(t,s,i){let e=this.bf,h=this.t0t,r=h.kD(),n=h.UD(),o=h.O1t(),a=!1;r&&h.V1t(r.OD()),h.V1t(s.OD());const l=1<o,u=(l&&h.qdt().oV(),n.oV(s));if(t){const f=s.emt()[i].QB(),d=f.n5();d.zft(t),t.u4()&&t.Rmt()}let c=!0;if(s.UN()){const p=s.Amt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].Fmt(u))){c=!1;break}}return c&&(s.Zft()?yield*s.Dmt(u,i):yield*s.G1t(u),a=u.G0t()),n.SV(),l&&h.qdt().SV(),h.pV(s.OD()),r&&h.pV(r.OD()),r||1!==o||(h.hpt(),h.n4())||e.g5(),a}Opt(){return this.Xpt}}}{let u=function(t,s){return!0};u;const mo=self.Ws,go=[];function*N(t,s){return!0}mo.imt=class extends mo.dr{constructor(t,s,i){super(),this.Yq=t,this.bf=t.pk(),this.Omt=s,this.kmt=null,this.Pft=this.bf.AD().UD(),this.Lmt=[],this.Bmt=[],this.Nmt=!1,this.Wmt=!1,this.jmt=!1,this.Vmt=!1,this.Umt=!!i[2],this.Hmt=!1,this.zmt=null,this.Jmt=[],this.srt=[],this.qmt=[],this.Xmt=u,this.Ymt=N,this.$mt=!1,this.Kmt=!1,this.Zmt="",this.Qmt=!1,this.tgt=null,this.Xpt=null,this.O7=i[4],this.sgt=i[5],this.Yq.Mmt(this,this.sgt),this.igt=this.bf.e$()?{egt:i[3][0],hgt:i[3][1],rgt:!1,ngt:!1,ogt:!1,agt:!1}:null,this.AD().Edt(this),3===i[0]&&this.lgt(i[1]);let e=0;for(const h of i[6]){const r=mo.ugt.Bx(this,h,e++);this.Jmt.push(r),this.cgt(r.QB())}e=0;for(const n of i[7]){const o=mo.fgt.Bx(this,n,e++);this.srt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.Yq.qpt(l,this,this.qmt)}this.Jmt.length&&(this.Hmt=null===this.Jmt[0].QB()&&this.Jmt[0].cmt()===mo._Y.TY.GY.dgt),0===this.Jmt.length&&(this.Jmt=go),0===this.srt.length&&(this.srt=go),0===this.qmt.length&&(this.qmt=go)}static Bx(t,s,i){return mo.Sr(mo.imt,t,s,i)}lgt(t){this.$mt=!0,this.Kmt=!!t[0],this.Qmt=this.Kmt,this.Zmt=t[1].toLowerCase(),this.tgt=[],this.AD().Adt(this),this.bf.e$()&&(this.Xpt={type:"group",name:t[1],Ypt:0,children:[]})}pgt(t){this.tgt.push(t)}mgt(t,s){for(const i of t.HX().AY())s.includes(i)||s.push(i)}ggt(t,s){if(t)if(s.includes(t)||s.push(t),t.lJ())for(const i of t.ygt())i.u4()&&this.mgt(i,s);else t.u4()&&this.mgt(t,s)}cgt(t){this.ggt(t,this.Lmt)}Sgt(t){this.ggt(t,this.Bmt)}wgt(){this.Lmt=this.bf.aJ()}Cdt(t){this.Vmt=!!t,this.bgt(),this.Mgt();for(const s of this.Jmt)s.Cdt();if(0<this.srt.length){let t=!1;for(const e of this.srt)e.Cdt(),e.vgt()&&(t=!0);t?(this.Xmt=this.xgt,this.Ymt=this.Ggt):(this.Xmt=this.Tgt,this.Ymt=this._gt)}const i=this.qmt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof mo.imt&&i[t+1].gmt();i[t].Cdt(h)}this.igt&&this.Igt(),this.Xpt&&this.Cgt().Opt().children.push(this.Xpt)}Opt(){return this.Xpt}Cgt(){let t=this.UN();for(;t;){if(t.f1t())return t;t=t.UN()}return this.Yq}Igt(){const t=this.igt;t.rgt=this.Jmt.every(t=>t.Imt()),t.ngt=this.srt.every(t=>t.Imt()),t.ogt=this.qmt.every(t=>t.Imt()),t.agt=t.rgt&&t.ngt&&t.ogt}Rgt(){let t=this;for(;t.Igt(),t=t.UN(););}bgt(){if(this.f1t()){let t=this.UN();for(this.jmt=!0;t;){if(!t.f1t()){this.jmt=!1;break}t=t.UN()}}}Agt(){const t=this.bf.aJ();if(this.Lmt===t)this.Bmt=t;else{this.Bmt=mo.ro(this.Lmt);let t=this.UN();for(;t;){for(const i of t.Lmt)this.Sgt(i);t=t.UN()}const s=this.AD();this.Lmt=s.Ndt(this.Lmt),this.Bmt=s.Ndt(this.Bmt)}}Mgt(){if(this.Pgt()){this.zmt=[];let t=this.UN();for(;t;)this.zmt.push(t),t=t.UN();this.zmt.reverse()}}Egt(){this.Wmt=!0,this.Omt&&this.Omt.Egt()}E0t(){return this.Wmt}rV(){return this.Lmt}OD(){return this.Nmt||(this.Nmt=!0,this.Agt()),this.Bmt}Fgt(t){return this.Lmt.includes(t)}Amt(){return this.zmt}PX(){return this.Yq}AD(){return this.Yq.AD()}pk(){return this.bf}UN(){return this.Omt}Dgt(t){this.kmt=t}Ydt(){return this.kmt||this.Omt}Ogt(){return this.sgt}kgt(){return this.igt&&this.igt.hgt}Lgt(){return this.kgt()&&this.igt.egt}Bgt(t){this.igt.egt=!!t,this.Rgt()}f1t(){return this.$mt}Ngt(){return this.jmt}gmt(){return this.Hmt}Wgt(){return this.Vmt}Pdt(){return this.Zmt}Rpt(){return this.Qmt}m1t(){this.Apt(this.Kmt)}Apt(t){if(t=!!t,!this.$mt)throw new Error("not a group");if(this.Qmt!==t){this.Qmt=t;for(const s of this.tgt)s.jgt();if(this.tgt.length){const i=this.bf.UO(),e=i.PX();e&&e.hY()}}}yJ(){return this.O7}Zft(){return this.Umt}hmt(){return this.Jmt.length&&this.Jmt[0].hmt()}Vgt(){return this.kmt&&this.kmt instanceof mo.Lpt}Pgt(){return this.Vgt()||this.Jmt.some(t=>t.hmt())}emt(){return this.Jmt}F0t(){return this.Jmt.length}Hdt(t){if((t=Math.floor(t))<0||t>=this.Jmt.length)throw new RangeError("invalid condition index");return this.Jmt[t]}Ugt(t){return this.Hdt(t)}Hgt(t){let s=t.QF();if(0!==s){--s;const i=t.zgt()?t.Jgt():t.QB();for(;0<=s;--s){const e=this.Jmt[s];if(i===e.QB()||e.zgt()&&e.Jgt()===i)return!1}}return!0}qgt(){return this.srt}Xgt(){return this.srt.length}Jdt(t){if((t=Math.floor(t))<0||t>=this.srt.length)throw new RangeError("invalid action index");return this.srt[t]}Ygt(s){s=Math.floor(s);const t=this.srt.find(t=>t.$gt()===s);if(t)return t;throw new RangeError("invalid action debug index")}Kgt(t){return 0<=(t=Math.floor(t))&&t<this.srt.length}Zgt(){return this.qmt}$dt(){return this.qmt.filter(t=>t instanceof mo.amt)}Pmt(i){i.S0t(this);let e=this.Jmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.b0t(t),r.oW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.hI())h=!0;else if(!this.Umt)return!1}return!this.Umt||h}Emt(t,s){t.S0t(this),t.b0t(s),this.Jmt[s].hI()&&(this.Xmt(t,0)&&this.Qgt(t),t.x0t(!0))}*Fmt(i){i.S0t(this);let e=this.Jmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.b0t(t),r.oW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Imt()?r.hI():yield*r.G1t())h=!0;else if(!this.Umt)return!1}return!this.Umt||h}*Dmt(t,s){t.S0t(this),t.b0t(s);let i=this.Jmt[s];if(i.Imt()?i.hI():yield*i.G1t())(this.tyt()?this.Xmt(t,0):yield*this.Ymt(t,0))&&(this.syt()?this.Qgt():yield*this.iyt()),t.x0t(!0)}hI(t){t.S0t(this),this.Hmt||t.T0t(!1),this.Umt?this.eyt(t):this.hyt(t)}*G1t(t){(this.Lgt()||this.bf.ryt())&&(yield this),t.S0t(this),this.Hmt||t.T0t(!1),this.Umt?yield*this.nyt(t):yield*this.oyt(t)}eyt(i){let e=this.Jmt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.hmt()){i.b0t(t);const n=r.hI();h=h||n}}i.x0t(h),h&&(this.Xmt(i,0)&&this.Qgt(i),this.Vmt)&&i.T0t(!0)}*nyt(i){let e=this.Jmt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.hmt()){i.b0t(s);let t;t=r.Imt()?r.hI():yield*r.G1t(),h=h||t}}if(i.x0t(h),h)(this.tyt()?this.Xmt(i,0):yield*this.Ymt(i,0))&&(this.syt()?this.Qgt():yield*this.iyt()),this.Vmt&&i.T0t(!0)}hyt(i){const e=this.Jmt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.b0t(t),h.hI());if(!r)return void i.x0t(!1)}i.x0t(!0),this.Xmt(i,0)&&this.Qgt(i),i.G0t()&&this.Vmt&&i.T0t(!0)}*oyt(i){const e=this.Jmt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.b0t(t);if(!(h.Imt()?h.hI():yield*h.G1t()))return void i.x0t(!1)}i.x0t(!0);(this.tyt()?this.Xmt(i,0):yield*this.Ymt(i,0))&&(this.syt()?this.Qgt():yield*this.iyt()),i.G0t()&&this.Vmt&&i.T0t(!0)}Tgt(i,e){const h=this.srt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.v0t(t),r.hI()}return!0}*_gt(i,e){const h=this.srt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.v0t(t),r.Imt()?r.hI():yield*r.G1t()}return!0}xgt(i,e){const h=this.AD(),r=this.srt;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.v0t(t),n.hI());if(n.ayt()&&!0===o)return!1;n.lyt()&&o instanceof Promise&&h.ipt(o)}return!0}*Ggt(i,e){const h=this.AD(),r=this.srt;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.v0t(s);let t;if(t=n.Imt()?n.hI():yield*n.G1t(),n.ayt()&&!0===t)return!1;n.lyt()&&t instanceof Promise&&h.ipt(t)}return!0}uyt(t){this.Xmt(t,t.M0t())&&this.Qgt()}*cyt(t){(yield*this.Ymt(t,t.M0t()))&&(yield*this.iyt())}Qgt(){if(this.qmt.length){const t=this.f1t()&&this.bf.xmt(),s=t?performance.now():0,i=this.Pft,e=i.oV(this);this.Wmt?this.fyt(e):this.dyt(e),i.SV(),t&&(this.Xpt.Ypt+=performance.now()-s)}}fyt(e){const h=this.$mt,r=this.jmt,n=this.AD(),o=this.qmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.rV(),u=!r||!h&&t<i;u&&n.fV(l),a.hI(e),u?n.pV(l):n.W1t(l)}}dyt(i){const e=this.qmt;for(let t=0,s=e.length;t<s;++t)e[t].hI(i)}*iyt(){if(this.qmt.length){const t=this.Pft,s=t.oV(this);this.Wmt?yield*this.pyt(s):yield*this.myt(s),t.SV()}}*pyt(e){const h=this.$mt,r=this.jmt,n=this.AD(),o=this.qmt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.rV(),u=!r||!h&&t<i;u&&n.fV(l),yield*a.G1t(e),u?n.pV(l):n.W1t(l)}}*myt(i){const e=this.qmt;for(let t=0,s=e.length;t<s;++t)yield*e[t].G1t(i)}dV(i,e){e.y0t();const h=this.Jmt;if(!this.Zft())for(let t=i.w0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.b0t(t),r.hI());if(!n)return!1}return this.Xmt(e,0)&&this.Qgt(e),!0}*gyt(i,e){e.y0t();const h=this.Jmt;if(!this.Zft())for(let t=i.w0t()+1,s=h.length;t<s;++t){const r=h[t];e.b0t(t);if(!(r.Imt()?r.hI():yield*r.G1t()))return!1}return(this.tyt()?this.Xmt(e,0):yield*this.Ymt(e,0))&&(this.syt()?this.Qgt():yield*this.iyt()),!0}Imt(){return!this.Lgt()&&!this.bf.ryt()&&this.igt.agt}tyt(){return!this.bf.ryt()&&this.igt.ngt}syt(){return!this.bf.ryt()&&this.igt.ogt}yyt(i){if(this.UN()){const e=this.Amt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Pmt(i))return!1}return!0}*Syt(i){if(this.UN()){const e=this.Amt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].Fmt(i)))return!1}return!0}wyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ni(0));t.qdt().oV(),this.kmt.byt(e)}else this.kmt.Myt(s);else i&&t.qdt().oV()}vyt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.bf,l=this.Pft,u=a.AD(),c=this.kmt,f=c.lyt(),d=u.L1t(),p=1<d;if(this.wyt(u,s,p),n&&(i?u.fV(t):u.V1t(t)),null!==e){if(e.xyt){const g=i?e.xyt.n5():e.xyt.j1t().Ift(),y=e.Gyt.n5();y.Jft(g.r5()),y.$ft(),i||e.Gyt.Tyt()}else if(e._yt){const S=e._yt.n5();S.Jft(e.Iyt),S.$ft()}e.Cyt&&(o=u.U1t(t))}const m=l.oV(this);return i&&m.D0t(t),this.yyt(m)&&(m.S0t(this),f&&([r,h]=c.Ryt()),this.hyt(m),f)&&c.Ayt(r),l.SV(),p&&u.qdt().SV(),null!==o&&u.pV(o),n&&u.pV(t),u.B1t(),f||u.rpt(),h}*Pyt(t,s,i,e){let h,r,n=((this.Lgt()||this.bf.ryt())&&(yield this),0<t.length),o=null,a=this.bf,l=this.Pft,u=a.AD(),c=this.kmt,f=c.lyt(),d=u.L1t(),p=1<d;if(this.wyt(u,s,p),n&&(i?u.fV(t):u.V1t(t)),null!==e){if(e.xyt){const g=i?e.xyt.n5():e.xyt.j1t().Ift(),y=e.Gyt.n5();y.Jft(g.r5()),y.$ft(),i||e.Gyt.Tyt()}else if(e._yt){const S=e._yt.n5();S.Jft(e.Iyt),S.$ft()}e.Cyt&&(o=u.U1t(t))}const m=l.oV(this);return i&&m.D0t(t),(yield*this.Syt(m))&&(m.S0t(this),f&&([r,h]=c.Ryt()),yield*this.oyt(m),f)&&c.Ayt(r),l.SV(),p&&u.qdt().SV(),null!==o&&u.pV(o),n&&u.pV(t),u.B1t(),f||u.rpt(),h}Eyt(t,s){const i=this.OD(),e=0<i.length,h=this.bf,r=this.Pft,n=h.AD(),o=n.L1t(),a=1<o,l=(a&&n.qdt().oV(),this.kmt.byt(t),e&&(s?n.fV(i):n.V1t(i)),r.oV(this));this.yyt(l)&&(l.S0t(this),this.hyt(l)),r.SV(),a&&n.qdt().SV(),e&&n.pV(i),n.B1t(),n.rpt()}*Fyt(t,s){(this.Lgt()||this.bf.ryt())&&(yield this);const i=this.OD(),e=0<i.length,h=this.bf,r=this.Pft,n=h.AD(),o=n.L1t(),a=1<o,l=(a&&n.qdt().oV(),this.kmt.byt(t),e&&(s?n.fV(i):n.V1t(i)),r.oV(this));(yield*this.Syt(l))&&(l.S0t(this),yield*this.oyt(l)),r.SV(),a&&n.qdt().SV(),e&&n.pV(i),n.B1t(),n.rpt()}BD(t,s,i,e,...h){let r,n,o=0<t.length,a=this.bf,l=this.Pft,u=a.AD(),c=this.kmt,f=c.lyt(),d=u.L1t(),p=1<d,m=(p&&u.qdt().oV(),0<h.length&&this.kmt.byt(h),o&&(s?u.fV(t):u.V1t(t)),l.oV(this));return m.R0t(i,e),l.r0t(m),a.uV(!1),this.yyt(m)&&(m.S0t(this),f&&([n,r]=c.Ryt()),this.hyt(m),f)&&c.Ayt(n),a.uV(!0),l.SV(),l.n0t(),p&&u.qdt().SV(),o&&u.pV(t),u.B1t(),f||u.rpt(),r||m.A0t()}}}{let e=self.Ws,t=[],s=!1;e.umt=class extends e.dr{constructor(t,s,i){super();const e=t.pk(),h=t.AD(),r=(this.Yq=t,this.t0t=h,this.bf=t.pk(),this.Omt=s,e.Dyt(i[1]));this.Oyt=r,this.sgt=i[2],this.Yq.Mmt(this,this.sgt),this.igt=e.e$()?{egt:i[3][0],hgt:i[3][1]}:null}static Bx(t,s,i){return e.Sr(e.umt,t,s,i)}Cdt(){const t=this.Oyt,s=this.bf.AD().Kdt(this);this.Oyt=t.bind(null,this.bf.ML(),s)}UN(){return this.Omt}Ydt(){return this.Omt}PX(){return this.Yq}Ogt(){return this.sgt}kgt(){return this.igt&&this.igt.hgt}Lgt(){return this.kgt()&&this.igt.egt}Bgt(t){this.igt.egt=!!t}gmt(){return!1}rV(){return t}OD(){return this.Omt?this.Omt.OD():t}hI(t){t.S0t(this),this.t0t.ipt(this.kyt())}async kyt(){try{await this.Oyt()}catch(t){console.error(`Unhandled exception running script %c${this.PX().cf()}, event ${this.Ogt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*G1t(t){t.S0t(this),(this.Lgt()||this.bf.ryt())&&(yield this),this.hI(t)}Imt(){return!this.Lgt()&&!this.bf.ryt()}static Lyt(){return s}static Byt(){s=!0}}}{const yo=self.Ws;yo.Lpt=class extends yo.dr{constructor(t,s,i){super(),this.Yq=t,this.bf=t.pk(),this.Omt=s,this.Nyt=0,this.Wyt="",this.jyt=0,this.Vyt=[],this.Uyt=!0,this.Hyt="",this.xft=null,this.zyt=!1,this.Jyt=[],this.qyt=!1,this.Xyt=!1,this.Yyt=0,this.$yt=-1,this.Kyt=new Map,this.Zyt=yo.imt.Bx(t,s,i),this.Zyt.Dgt(this)}Qyt(t){this.Nyt=0,this.Wyt=t[0],this.jyt=t[1],this.Vyt=t[2].map(t=>yo.amt.Bx(this.Yq,this,t)),this.Uyt=t[3],this.Xyt=t[4],this.qyt=t[5]}tSt(t){this.Nyt=1,this.Hyt=t[1],this.xft=this.bf.Bz(t[2]),this.Zyt.cgt(this.xft),this.Wyt=this.xft.cf()+"."+this.Hyt,this.jyt=t[3],this.Vyt=t[4].map(t=>yo.amt.Bx(this.Yq,this,t)),this.Uyt=t[5],this.Xyt=t[6],this.qyt=t[7],this.xft.sSt(this)}static nmt(t,s,i){const e=yo.Sr(yo.Lpt,t,s,i),h=i[1];return e.Qyt(h),e}static omt(t,s,i){const e=yo.Sr(yo.Lpt,t,s,i),h=i[1];return e.tSt(h),e}Rdt(){if(this.xft&&this.xft.lJ())for(const t of this.xft.ygt())if(t.iSt(this.Hyt)){this.zyt=!0;break}}Cdt(){for(const t of this.Vyt)t.Cdt();this.Zyt.Cdt(!1)}kdt(){return this.Nyt}$dt(){return this.Vyt}Bpt(){return this.Vyt}FD(){return this.Vyt.length}eSt(t){this.Jyt.push(t)}hSt(){return this.Jyt}Myt(i){const e=this.Vyt;for(let t=0,s=e.length;t<s;++t)e[t].Mht(i[t].ni(0))}byt(i){const e=this.Vyt;for(let t=0,s=e.length;t<s;++t)e[t].Mht(i[t])}rSt(){return this.Vyt.map(t=>t.Wet())}UN(){return this.Omt}Ydt(){return this.Omt}Ldt(){return this.Wyt}nSt(){return this.Hyt}oSt(){return this.zyt}WD(){return this.jyt}QB(){return this.xft}nc(){return this.Uyt}ED(){switch(this.jyt){case 0:return null;case 2:return"";default:return 0}}DD(){return this.Zyt}ND(){return this.qyt}lyt(){return this.Xyt}Ryt(){const t=this.Yyt++;this.$yt=t;let s,i=new Promise(t=>s=t);return this.Kyt.set(t,{resolve:s,aSt:0}),[t,i]}Ayt(t){const s=this.Kyt.get(t);0===s.aSt&&(s.resolve(),this.Kyt.delete(t)),this.$yt=-1}lSt(){const t=this.Kyt.get(this.$yt);return t.aSt++,this.$yt}uSt(t){this.$yt=t;const s=this.Kyt.get(t);s.aSt--}cSt(t,s){const i=new Map,e=[];for(const h of this.xft.n5().r5()){const r=h.QB();if(r.iSt(this.Hyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.Zyt.vyt(t,s,this.qyt,{_yt:this.xft,Iyt:e}),0<i.size)for(const[o,a]of i){const l=o.fSt(this.Hyt).DD(),u=[...new Set([...t,...l.rV()])];l.vyt(u,s,this.qyt,{_yt:o,Iyt:a})}}*dSt(t,s){const i=new Map,e=[];for(const h of this.xft.n5().r5()){const r=h.QB();if(r.iSt(this.Hyt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.Zyt.Pyt(t,s,this.qyt,{_yt:this.xft,Iyt:e})),0<i.size)for(const[o,a]of i){const l=o.fSt(this.Hyt).DD(),u=[...new Set([...t,...l.rV()])];yield*l.Pyt(u,s,this.qyt,{_yt:o,Iyt:a})}}}}{const So=self.Ws,wo=[];So.amt=class extends So.dr{constructor(t,s,i){super();const e=t.AD();this.Yq=t,this.t0t=e,this.bf=t.pk(),this.Omt=s,this.ddt=e.qdt(),this.vr=i[1],this.Cf=i[2],this.pSt=i[3],this.Zv=!!i[4],this.mSt=!!i[5],this.gSt=s instanceof So.Lpt,this.O7=i[6],this.ySt=this.bf.Zdt(i[8]),this.SSt=t=>this.Mht(t),this.wSt=()=>this.Wet(),this.bSt=!this.Omt||this.Zv||this.mSt,this.Kht=this.pSt,this.MSt=-1,this.vSt()&&(this.Kht=this.Kht?1:0),!this.xSt()||this.A2()||this.Ppt()||(this.MSt=e.Wdt(this)),e.Bdt(this)}static Bx(t,s,i){return So.Sr(So.amt,t,s,i)}Cdt(){if(this.xSt()&&!this.A2()&&!this.Ppt()&&!this.GSt()){const t=this.t0t.kpt(this);t&&t.eSt(this)}}cf(){return this.vr}Zdt(){return this.ySt}UN(){return this.Omt}Ydt(){return this.UN()}Yz(){return!this.UN()}xSt(){return!this.Yz()}GSt(){return this.gSt}A2(){return this.Zv}Ppt(){return this.mSt}ye(){return 0===this.Cf}Ce(){return 1===this.Cf}vSt(){return 2===this.Cf}gmt(){return!1}yJ(){return this.O7}jdt(){return this.pSt}rV(){return wo}hI(t){!this.xSt()||this.A2()||this.Ppt()||this.Mht(this.jdt())}Imt(){return!0}*G1t(t){this.hI(t)}Mht(t){this.ye()?"number"!=typeof t&&(t=parseFloat(t)):this.Ce()?"string"!=typeof t&&(t=t.toString()):this.vSt()&&(t=t?1:0),this.bSt?this.Kht=t:this.ddt.N0t()[this.MSt]=t}Wet(){return this.bSt?this.Kht:this.ddt.N0t()[this.MSt]}TSt(){let t=this.Wet();return this.vSt()?!!t:t}l1t(){this.Kht=this.pSt}Qdt(){return{configurable:!1,enumerable:!0,get:this.wSt,set:this.SSt}}}}{const bo=self.Ws,Mo=[];bo.lmt=class extends bo.dr{constructor(t,s,i){super();const e=t.AD();this.Yq=t,this.t0t=e,this.bf=t.pk(),this.Omt=s,this._St=null,this.ISt=i[1],this.w0=!0}static Bx(t,s,i){return bo.Sr(bo.lmt,t,s,i)}Cdt(){this._St=this.t0t.eY(this.ISt),this.Yq.ymt(this);let t=this.UN();for(;t;)t instanceof bo.imt&&t.f1t()&&t.pgt(this),t=t.UN();this.jgt(),this.bf.e$()&&this.Yq.Opt().children.push(this._St.Opt())}UN(){return this.Omt}rV(){return Mo}wmt(){return this._St}hI(t){const s=!!this.UN(),i=this.bf.aJ();s&&this.t0t.V1t(i),this._St.hI(),s&&this.t0t.pV(i)}*G1t(t){const s=!!this.UN(),i=this.bf.aJ();s&&this.t0t.V1t(i),yield*this._St.G1t(),s&&this.t0t.pV(i)}Imt(){return!1}bmt(){return this.w0}jgt(){let t=this.UN();for(;t;){if(t instanceof bo.imt&&t.f1t()&&!t.Rpt())return void(this.w0=!1);t=t.UN()}this.w0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const vo=self.Ws;vo.CSt=class extends vo.dr{constructor(t){super(),this.uv=t,this.bf=t.pk()}Cdt(){}static RSt(t,s){const i=s[0],e=[Io,To,_o,Co,xo,Go];return vo.Sr(e[i],t,s)}};class xo extends vo.CSt{constructor(t,s){super(t),this.ASt=this.bf.PSt(),this.Oyt=this.bf.Dyt(s[1]),this.Oyt!==vo._Y.TY.prt.random&&this.Oyt!==vo._Y.TY.prt.ESt||this.uv.FSt()}DSt(){return this.ASt.OSt(this.Oyt,this.ASt)}}class Go extends vo.CSt{constructor(t,s){super(t),this.kSt=null,this.Wyt=s[1],this.uv.FSt()}Cdt(){const t=this.bf.AD(),s=(this.kSt=t.PD(this.Wyt),this.Wyt=null,this.uv.DD()),i=this.kSt.DD();this.LSt=[...new Set([...s.OD(),...i.OD()])],this.LSt=t.Ndt(this.LSt)}DSt(){const t=this.kSt;if(t.nc()){const s=t.DD();return vo.imt.prototype.BD.bind(s,this.LSt,t.ND(),t.WD(),t.ED())}{const i=t.ED();return()=>i}}}class To extends vo.CSt{constructor(t,s){super(t),this.xft=this.bf.Bz(s[1]),this.Oyt=this.bf.Dyt(s[2]),this.BSt=!!s[3],this.Pft=this.bf.AD().UD(),this.uv.NSt(this.xft)}DSt(){return this.xft.XL().OSt(this.Oyt,this.xft.zL().L6())}WSt(...t){const s=this.xft,i=s.n5().Nft(),e=i.length;if(0===e)return this.BSt?"":0;const h=a(this.uv.jSt(),e);return this.Pft.nV().I0t(s),this.Oyt.apply(i[h].L6(),t)}VSt(t,...s){const i=this.xft,e=i.r5(),h=e.length;if(0===h)return this.BSt?"":0;const r=a(t,h);return this.Pft.nV().I0t(i),this.Oyt.apply(e[r].L6(),s)}}class _o extends vo.CSt{constructor(t,s){super(t),this.xft=this.bf.Bz(s[1]),this.USt=s[3],this.BSt=!!s[2],this.uv.NSt(this.xft)}HSt(){const t=this.xft.n5().Nft(),s=t.length;if(0===s)return this.BSt?"":0;const i=a(this.uv.jSt(),s);return t[i].zSt(this.USt)}JSt(){const t=this.xft,s=t.n5().Nft(),i=s.length;if(0===i)return this.BSt?"":0;const e=a(this.uv.jSt(),i),h=s[e],r=h.QB().qSt(t.XSt());return h.zSt(this.USt+r)}YSt(t){const s=this.xft,i=s.r5(),e=i.length;if(0===e)return this.BSt?"":0;let h=a(t,e),r=i[h],n=0;return s.lJ()&&(n=r.QB().qSt(s.XSt())),r.zSt(this.USt+n)}}class Io extends vo.CSt{constructor(t,s){super(t),this.xft=this.bf.Bz(s[1]),this.$St=this.xft.zht(s[2]),this.KSt=this.xft.vit(s[2]),this.Oyt=this.bf.Dyt(s[3]),this.BSt=!!s[4],this.Pft=this.bf.AD().UD(),this.uv.NSt(this.xft)}ZSt(...t){const s=this.xft,i=s.n5().Nft(),e=i.length;if(0===e)return this.BSt?"":0;let h=a(this.uv.jSt(),e),r=(this.Pft.nV().I0t(s),i[h]),n=0;return s.lJ()&&(n=r.QB().QSt(s.XSt())),this.Oyt.apply(r.Hht()[this.KSt+n].L6(),t)}twt(t,...s){const i=this.xft,e=i.r5(),h=e.length;if(0===h)return this.BSt?"":0;let r=a(t,h),n=(this.Pft.nV().I0t(i),e[r]),o=0;return i.lJ()&&(o=n.QB().QSt(i.XSt())),this.Oyt.apply(n.Hht()[this.KSt+o].L6(),s)}}class Co extends vo.CSt{constructor(t,s){super(t),this.swt=null,this.iwt=s[1]}Cdt(){this.swt=this.bf.AD().t1t(this.iwt)}ewt(){return this.swt}}}{let r=function(t){const s=self.hwt[t];if(s)return s;throw new Error("invalid expression number")};r;const Ro=self.Ws;Ro.rwt=class extends Ro.dr{constructor(t,s,i){super(),this.uv=t,this.by=i,this.Cf=s,this.ni=null,this.nwt=!1,this.mSt=!1}static Bx(t,s,i){const e=s[0],h=[Ao,Po,Bo,Fo,Oo,Eo,ko,Ao,Fo,Fo,No,Wo,Bo,Vo,Po,Lo,Do,jo,Uo,Ho,zo,Jo];return Ro.Sr(h[e],t,e,i,s)}Cdt(){}FSt(){this.nwt=!0}NSt(t){this.nwt||!t||t.XL().xL()||(this.nwt=!0)}owt(){return this.nwt}QF(){return this.by}pk(){return this.uv.pk()}DD(){return this.uv.DD()}Ppt(){return this.mSt}awt(){return 4===this.Cf}};class Ao extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.lwt=0;const h=e[1];this.uwt=h[0],this.cwt=[],this.fwt=null;for(let t=1,s=h.length;t<s;++t)this.cwt.push(Ro.CSt.RSt(this,h[t]));this.cwt.length?this.ni=this.dwt:(this.ni=r(this.uwt),this.mSt=!0)}pwt(t){if(t<0||t>=this.cwt.length)throw new RangeError("invalid numbered node");return this.cwt[t]}Cdt(){for(const s of this.cwt)s.Cdt();const t=r(this.uwt);this.cwt.length?this.fwt=t(this):this.fwt=t}jSt(){return this.lwt}dwt(t){return this.lwt=t,this.fwt()}}class Po extends Ao{constructor(t,s,i,e){super(t,s,i,e),this.ni=this.mwt,14===s&&(this.DD().wgt(),this.uv instanceof Ro.fgt)&&this.DD().Egt()}mwt(t){this.lwt=t;const s=this.fwt();return"string"==typeof s?s:""}gwt(){return r(this.uwt)()}}class Eo extends Ao{constructor(t,s,i,e){super(t,s,i,e),2<=t.ywt()?this.ni=this.P5:this.ni=this.JO,this.mSt=!1}JO(t){this.lwt=t;const s=this.fwt(),i=this.pk().UO();return i.JO(s)}P5(t){const s=this.JO(t);return s?s.P5():null}}class Fo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.Swt=e[1],this.ni=this.wwt,this.mSt=!0}wwt(){return this.Swt}}class Do extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.bwt=e[1],this.ni=this.Mwt,this.mSt=!0}Mwt(){return this.bwt}}class Oo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.xft=this.pk().Bz(e[1]),2<=t.ywt()?this.ni=this.VL:this.ni=this.QB;const h=this.DD();h.cgt(this.xft),this.uv instanceof Ro.fgt?h.Egt():h.UN()&&h.UN().Egt(),this.mSt=!0}QB(){return this.xft}VL(){return this.xft?this.xft.VL():null}}class ko extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.P7=this.pk()._O().y$(e[1]),2<=t.ywt()?this.ni=this.GO:this.ni=this.IO,this.mSt=!0}IO(){return this.P7}GO(){return this.P7?this.P7.GO():null}}class Lo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.bZ=this.pk().Gtt().IK(e[1]),2<=t.ywt()?this.ni=this.Nst:this.ni=this.oit,this.mSt=!0}oit(){return this.bZ}Nst(){return this.bZ?this.bZ.Nst():null}}class Bo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.vwt=e[1],this.ni=this.xwt,this.mSt=!0}xwt(){return this.vwt}}class No extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.Gwt=e[1];const h=this.uv.QB();this.uv instanceof Ro.ugt&&this.uv.A2()||!h||!h.lJ()?(this.ni=this.Twt,this.mSt=!0):(this.ni=this._wt,this.FSt())}Twt(){return this.Gwt}_wt(t){t=t||0;let s=this.uv.QB(),i=s.n5(),e=i.r5(),h=null;if(e.length)h=e[t%e.length].QB();else if(i.Lft()){const r=i.Bft();h=r[t%r.length].QB()}else{if(!(0<s.a5()))return 0;{const n=s.r5();h=n[t%n.length].QB()}}return this.Gwt+h.qSt(s.XSt())}}class Wo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.iwt=e[1],this.swt=null,2<=t.ywt()?this.ni=this.Iwt:this.ni=this.Cwt,this.mSt=!0}Cdt(){this.swt=this.pk().AD().t1t(this.iwt)}Cwt(){return this.swt}Iwt(){return null}}class jo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.Rwt=e[1],this.kSt=null,2<=t.ywt()?this.ni=this.Awt:this.ni=this.Pwt,this.mSt=!0}Cdt(){this.kSt=this.pk().AD().PD(this.Rwt),this.Rwt=null}Pwt(){return this.kSt}Awt(){return null}}class Vo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.Ewt=[],this.Fwt=[],this.mSt=!0;for(let t=1,s=e.length;t<s;++t){const h=Ro.rwt.Bx(this.uv,e[t],0);this.Ewt.push(h),this.Fwt.push(0),h.Ppt()||(this.mSt=!1)}this.ni=this.Dwt}Cdt(){for(const t of this.Ewt)t.Cdt()}Dwt(){const i=this.Ewt,e=this.Fwt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0);return e}}class Uo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.Owt=e[1],this.ni=this.bht,this.mSt=!0}bht(){return this.Owt}}class Ho extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.kwt=e[1],this.ni=this.Lwt,this.mSt=!0}Lwt(){return this.kwt}}class zo extends Ao{constructor(t,s,i,e){super(t,s,i,e),this.ni=this.m4,this.mSt=!1}m4(){return this.fwt()}}class Jo extends Ro.rwt{constructor(t,s,i,e){super(t,s,i),this.out=this.pk()._ut().sut(e[1]),this.ni=this.Bwt,this.mSt=!0}Bwt(){return this.out.cf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0)};e;const qo=self.Ws,Xo=[],Yo=function(){};qo.ugt=class extends qo.dr{constructor(t,i,s){if(super(),this.Zyt=t,this.bf=t.pk(),this.by=s,this.Oyt=this.bf.Dyt(i[1]),this.Nwt=0<i[3],this.Wwt=2===i[3],this.jwt=!!i[4],this.Vwt=!!i[5],this.Zv=!!i[6],this.O7=i[7],this.Uwt=this.Zyt.Zft(),this.xft=null,this.$St=null,this.KSt=-1,this.ASt=null,this.hI=Yo,this.G1t=Yo,this.ti=[],this.Hwt=[],this.zwt=!1,this.Jwt=null,this.qwt=null,this.igt=this.bf.e$()?{egt:i[8][0],Xwt:i[8][1]}:null,-1===i[0]?this.ASt=this.bf.PSt():(this.xft=this.bf.Bz(i[0]),i[2]&&(this.$St=this.xft.zht(i[2]),this.KSt=this.xft.vit(i[2])),this.Zyt.UN()&&this.Zyt.UN().Egt()),10===i.length){let s=i[9];for(let t of s)this.ti.push(qo.rwt.Bx(this,t,this.ti.length)),this.Hwt.push(0)}0===this.ti.length&&(this.ti=Xo,this.Hwt=Xo),this.Zyt.AD().Fdt(this)}static Bx(t,s,i){return qo.Sr(qo.ugt,t,s,i)}Cdt(){for(const t of this.ti)t.Cdt(),t.owt()&&(this.zwt=!0);this.Wwt?(this.hI=this.Ywt,this.G1t=this.$wt):this.ASt?(this.Kwt(),this.G1t=this.Zwt):this.xft.XL().xL()?(this.Qwt(),this.G1t=this.tbt):this.Zv?(this.hI=this.sbt,this.G1t=this.ibt):(this.hI=this.ebt,this.G1t=this.hbt)}Kwt(){const t=this.ASt,s=this.ASt;this.rbt(t,s,this.nbt)}Qwt(){const t=this.xft.XL(),s=this.xft.zL().L6();this.rbt(t,s,this.obt)}rbt(t,s,i){const e=this.Oyt,h=this.Vwt,r=this.ti;if(0===r.length){const n=t.OSt(e,s);h?this.hI=function(){return qo.xor(n(),h)}:this.hI=n}else if(1===r.length){const o=r[0];if(!h&&o.Ppt())this.hI=t.abt(e,s,o.ni(0));else{const a=t.OSt(e,s);this.hI=function(){return qo.xor(a(o.ni(0)),h)}}}else if(2===r.length){const l=r[0],u=r[1];if(!h&&l.Ppt()&&u.Ppt())this.hI=t.lbt(e,s,l.ni(0),u.ni(0));else{const c=t.OSt(e,s);this.hI=function(){return qo.xor(c(l.ni(0),u.ni(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Ppt()&&d.Ppt()&&p.Ppt())this.hI=t.ubt(e,s,f.ni(0),d.ni(0),p.ni(0));else{const m=t.OSt(e,s);this.hI=function(){return qo.xor(m(f.ni(0),d.ni(0),p.ni(0)),h)}}}else this.hI=i}yJ(){return this.O7}cmt(){return this.Oyt}QB(){return this.xft}q6(){return this.$St}cbt(){return this.$St?this.$St.H6():this.xft?this.xft.XL():null}ywt(){const t=this.cbt();return t?t.fbt():1}DD(){return this.Zyt}pk(){return this.bf}QF(){return this.by}$gt(){return this.QF()}hmt(){return this.Nwt}fmt(){return this.Wwt}dbt(){return this.Vwt}oW(){return this.jwt}A2(){return this.Zv}pbt(){return this.igt.egt}mbt(){return!!this.ASt}zgt(){return this.mbt()||this.xft.XL().xL()}Jgt(){for(const t of this.ti)if(t.awt())return t.QB();return null}gbt(t){this.igt.egt=!!t,this.Zyt.Rgt()}ybt(){return this.igt.Xwt}Imt(){return!this.pbt()&&!this.bf.ryt()&&!this.ybt()}Sbt(){return this.Jwt||(this.Jwt=new Map),this.Jwt}wbt(){return this.qwt||(this.qwt=new Map),this.qwt}nbt(){const t=this.Hwt;return e(this.ti,t),qo.xor(this.Oyt.apply(this.ASt,t),this.Vwt)}*Zwt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const s=this.Hwt;e(this.ti,s);let t=this.Oyt.apply(this.ASt,s);return qo.qo(t)&&(t=yield*t),qo.xor(t,this.Vwt)}return this.hI()}obt(){const t=this.Hwt,s=(e(this.ti,t),this.xft.zL().L6());return qo.xor(this.Oyt.apply(s,t),this.Vwt)}*tbt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){let t=this.Hwt,s=(e(this.ti,t),this.xft.zL().L6()),i=this.Oyt.apply(s,t);return qo.qo(i)&&(i=yield*i),qo.xor(i,this.Vwt)}return this.hI()}Ywt(){return!0}*$wt(){return(this.pbt()||this.bf.ryt())&&(yield this),!0}bbt(){if(this.$St){if(2<=this.$St.H6().fbt())throw new Error("not yet implemented");return this.$St}return 2<=this.xft.XL().fbt()?this.xft.VL():this.xft}sbt(){const t=this.Hwt,s=(e(this.ti,t),this.Oyt.apply(this.bbt(),t));return this.xft.Tyt(),s}*ibt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const s=this.Hwt;e(this.ti,s);let t=this.Oyt.apply(this.bbt(),s);return qo.qo(t)&&(t=yield*t),this.xft.Tyt(),t}return this.hI()}ebt(){const i=this.ti,e=this.Hwt,t=this.xft.n5();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.owt()||(e[t]=h.ni(0))}return t.Oft()?this.Mbt(t):this.vbt(t)}*hbt(){return(this.pbt()||this.bf.ryt())&&(yield this),this.ebt()}xbt(i){const e=this.ti,h=this.Hwt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.owt()&&(h[t]=r.ni(i))}}Mbt(i){const t=this.xft,e=t.lJ(),h=t.XSt(),r=this.KSt,n=0<=r,o=t.r5(),a=this.zwt,l=this.Hwt,u=this.Oyt,c=this.Vwt,f=this.Uwt&&!this.Nwt;i.Dft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.xbt(s);let t;if(n){const p=e?d.QB().QSt(h):0;t=u.apply(d.Hht()[r+p].L6(),l)}else t=u.apply(d.L6(),l);qo.xor(t,c)?i.Wft(d):f&&i.jft(d)}return t.Gbt(!0),i.Vft(!1),t.Tyt(),i.kft()}vbt(t){let s=this.xft,i=s.lJ(),e=s.XSt(),h=s.u4(),r=this.KSt,n=0<=r,o=this.zwt,a=this.Hwt,l=this.Oyt,u=this.Vwt,c=this.Uwt&&!this.Nwt,f=t.Uft(),d=t.Hft(),p=c&&!this.Zyt.Hgt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.xbt(s);let t;if(n){const b=i?w.QB().QSt(e):0;t=l.apply(w.Hht()[r+b].L6(),a)}else t=l.apply(w.L6(),a);qo.xor(t,u)?(y=!0,p?(f.push(w),h&&w.Tbt()):(m[g]=w,h&&w._bt(g),++g)):p?(m[g]=w,h&&w.Ibt(g),++g):c&&(d.push(w),h)&&w.Cbt()}qo.Un(m,g),h&&s.Rbt(p,g);const S=y;return p&&!y&&(y=this.Abt(f)),s.Gbt(S||c),c?y:t.kft()}Abt(i){const t=this.xft,e=t.lJ(),h=t.XSt(),r=this.zwt,n=this.KSt,o=0<=n,a=this.Hwt,l=this.Oyt,u=this.Vwt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.xbt(s);let t;if(o){const f=e?c.QB().QSt(h):0;t=l.apply(c.Hht()[n+f].L6(),a)}else t=l.apply(c.L6(),a);if(qo.xor(t,u))return!0}return!1}Pbt(t,s){return this.ti[t].ni(s)}dmt(){const t=this.ti;if(t.length)return t[0].gwt();throw new Error("no parameters")}Oq(){if(!this.Jwt||!this.Jwt.size)return null;const s={};for(const[i,e]of this.Jwt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].f4(),t[1].f4(),t[2]])),s[i]=t}return{ex:s}}kq(t){if(this.Jwt&&(this.Jwt.clear(),this.Jwt=null),t){const s=this.bf,i=t.ex;if(i){const e=this.Sbt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=qo.Sr(qo.oc,r.map(t=>[s.WO(t[0]),s.WO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0)};h;const $o=self.Ws,Ko=[],Zo=function(){},Qo=function*(){};$o.fgt=class extends $o.dr{constructor(t,s,i){super();const e=(this.Zyt=t).pk(),h=(this.bf=e,this.by=i,this.O7=4<=s.length?s[3]:-1,this.Ebt=5<=s.length?255&s[4]:0,this.Fbt=5<=s.length?s[4]>>8:0,this.Oyt=null,this.xft=null,this.$St=null,this.KSt=-1,this.ASt=null,this.Dbt="",this.Obt=null,this.kbt=null,this.hI=Zo,this.G1t=Zo,this.ti=[],this.Hwt=[],this.zwt=!1,this.Jwt=null,this.qwt=null,-3===s[0]),r=h?s[2]:s[5];if(this.igt=e.e$()||h?{egt:r[0],Xwt:r[1],index:r[2]}:null,-1===s[0])this.ASt=e.PSt(),this.Oyt=e.Dyt(s[1]);else if(-2===s[0])this.Dbt=s[1];else if(h){const n=e.Dyt(s[1]);this.Oyt=n,this.hI=this.Lbt,this.G1t=this.Bbt,this.Fbt|=8}else this.xft=e.Bz(s[0]),4&this.Fbt?(this.Dbt=s[1],this.Obt=e.Bz(s[2])):(s[2]&&(this.$St=this.xft.zht(s[2]),this.KSt=this.xft.vit(s[2])),this.Oyt=e.Dyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.ti.push($o.rwt.Bx(this,a,this.ti.length)),this.Hwt.push(0)}0===this.ti.length&&(this.ti=Ko,this.Hwt=Ko),this.Nbt()&&(this.Zyt.wgt(),this.Zyt.Egt()),this.Zyt.AD().Ddt(this)}static Bx(t,s,i){return $o.Sr($o.fgt,t,s,i)}Cdt(){for(const t of this.ti)t.Cdt(),t.owt()&&(this.zwt=!0);if(this.ASt)this.Kwt(),this.G1t=this.Zwt;else if(this.Dbt)4&this.Fbt?this.Wbt():this.jbt(),this.Dbt="",this.Obt=null;else if(this.hI===this.Lbt){const s=this.Oyt,i=this.bf.AD().Kdt(this.Zyt);this.Oyt=s.bind(null,this.bf.ML(),i)}else this.$St?this.lyt()?(this.hI=this.Vbt,this.G1t=this.Ubt):(this.hI=this.Hbt,this.G1t=this.zbt):this.xft.XL().xL()?(this.Qwt(),this.G1t=this.tbt):this.A2()?(this.hI=this.Jbt,this.G1t=this.qbt):this.lyt()?(this.hI=this.Xbt,this.G1t=this.Ybt):this.$bt()?(this.hI=this.Kbt,this.G1t=this.Zbt):this.ti.length?this.ti.every(t=>t.owt())?(this.hI=this.Qbt,this.G1t=this.tMt):this.zwt?(this.hI=this.sMt,this.G1t=this.iMt):this.ti.every(t=>t.Ppt())?(h(this.ti,this.Hwt),this.hI=this.eMt,this.G1t=this.hMt):(this.hI=this.rMt,this.G1t=this.nMt):(this.hI=this.eMt,this.G1t=this.hMt)}Kwt(){const t=this.ASt,s=this.ASt;this.rbt(t,s,this.nbt)}Qwt(){const t=this.xft.XL(),s=this.xft.zL().L6();this.rbt(t,s,this.obt)}jbt(){const t=this.Zyt.AD(),i=t.PD(this.Dbt);if(i.nc()){const e=0!=(2&this.Fbt);this.kbt=i.DD();let s=[...new Set([...this.Zyt.OD(),...this.kbt.OD()])];s=t.Ndt(s);const h=!i.ND()&&this.oMt()?{Cyt:!0}:null;if(this.hI=$o.imt.prototype.vyt.bind(this.kbt,s,this.ti,e,h),this.bf.e$()){const r=this;this.G1t=function*(){(r.pbt()||r.bf.ryt())&&(yield r);const t=yield*r.kbt.Pyt(s,r.ti,e,h);return t}}else this.G1t=Qo}else this.hI=Zo,this.G1t=Qo}Wbt(){const r=this.Zyt.AD(),n=r.h1t(this.Obt,this.Dbt);if(n.nc()){const o=0!=(2&this.Fbt);this.kbt=n.DD();let s=[...new Set([...this.Zyt.OD(),...this.kbt.OD(),this.xft,n.QB()])],t=(s=r.Ndt(s),!this.xft.lJ()&&!n.QB().lJ()),i=!this.xft.lJ()&&n.QB().lJ(),e=this.xft.lJ(),h=null;if(!n.ND()&&this.oMt()&&((h=h||{}).Cyt=!0),!i&&o||((h=h||{}).xyt=this.xft,h.Gyt=n.QB()),t||i||e&&!n.oSt()?this.hI=$o.imt.prototype.vyt.bind(this.kbt,s,this.ti,o,h):e&&(this.hI=$o.Lpt.prototype.cSt.bind(n,s,this.ti)),this.bf.e$()){const a=this;t||i||e&&!n.oSt()?this.G1t=function*(){(a.pbt()||a.bf.ryt())&&(yield a);const t=yield*a.kbt.Pyt(s,a.ti,o,h);return t}:e&&(this.G1t=function*(){(a.pbt()||a.bf.ryt())&&(yield a);const t=yield*n.dSt(s,a.ti);return t})}else this.G1t=Qo}else this.hI=Zo,this.G1t=Qo}rbt(t,s,i){const e=this.Oyt,h=this.ti;if(0===h.length)this.hI=t.OSt(e,s);else if(1===h.length){const r=h[0];if(r.Ppt())this.hI=t.abt(e,s,r.ni(0));else{const n=t.OSt(e,s);this.hI=function(){return n(r.ni(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Ppt()&&a.Ppt())this.hI=t.lbt(e,s,o.ni(0),a.ni(0));else{const l=t.OSt(e,s);this.hI=function(){return l(o.ni(0),a.ni(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.Ppt()&&c.Ppt()&&f.Ppt())this.hI=t.ubt(e,s,u.ni(0),c.ni(0),f.ni(0));else{const d=t.OSt(e,s);this.hI=function(){return d(u.ni(0),c.ni(0),f.ni(0))}}}else this.hI=i}yJ(){return this.O7}lyt(){return 0!=(8&this.Fbt)}ayt(){return 0!=(16&this.Fbt)}$bt(){return 1===this.Ebt}A2(){return 2===this.Ebt}Nbt(){return 0!=(1&this.Fbt)}vgt(){return this.lyt()||this.ayt()}QB(){return this.xft}cbt(){return this.$St?this.$St.H6():this.xft?this.xft.XL():null}ywt(){const t=this.cbt();return t?t.fbt():1}DD(){return this.Zyt}oMt(){let t=this.Zyt;do{if(t instanceof $o.Lpt&&t.ND())return!0}while(t=t.Ydt());return!1}pk(){return this.bf}QF(){return this.by}$gt(){return this.igt.index}pbt(){return this.igt.egt}gbt(t){this.igt.egt=!!t,this.Zyt.Rgt()}ybt(){return this.igt.Xwt}Imt(){return!this.pbt()&&!this.bf.ryt()&&!this.ybt()}Sbt(){return this.Jwt||(this.Jwt=new Map),this.Jwt}wbt(){return this.qwt||(this.qwt=new Map),this.qwt}nbt(){const t=this.Hwt;return h(this.ti,t),this.Oyt.apply(this.ASt,t)}*Zwt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const t=this.Hwt,s=(h(this.ti,t),yield*this.Oyt.apply(this.ASt,t));return s}return this.hI()}obt(){const t=this.Hwt;return h(this.ti,t),this.Oyt.apply(this.xft.zL().L6(),t)}*tbt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const t=this.Hwt,s=(h(this.ti,t),yield*this.Oyt.apply(this.xft.zL().L6(),t));return s}return this.hI()}eMt(){const i=this.Hwt,e=this.xft.n5().r5();for(let t=0,s=e.length;t<s;++t)this.Oyt.apply(e[t].L6(),i)}*hMt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const i=this.Hwt,e=this.xft.n5().r5();for(let t=0,s=e.length;t<s;++t)yield*this.Oyt.apply(e[t].L6(),i)}else this.eMt()}rMt(){const i=this.Hwt,e=(h(this.ti,i),this.xft.n5().r5());for(let t=0,s=e.length;t<s;++t)this.Oyt.apply(e[t].L6(),i)}*nMt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const i=this.Hwt,e=(h(this.ti,i),this.xft.n5().r5());for(let t=0,s=e.length;t<s;++t)yield*this.Oyt.apply(e[t].L6(),i)}else this.rMt()}Qbt(){const e=this.ti,h=this.Hwt,s=this.Oyt,r=this.xft.n5().r5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);s.apply(n.L6(),h)}}*tMt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const e=this.ti,h=this.Hwt,s=this.Oyt,r=this.xft.n5().r5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);yield*s.apply(n.L6(),h)}}else this.Qbt()}sMt(){const e=this.ti,h=this.Hwt,s=this.Oyt,r=this.xft.n5().r5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.owt()||(h[t]=i.ni(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.owt()&&(h[t]=o.ni(i))}s.apply(n.L6(),h)}}*iMt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const e=this.ti,h=this.Hwt,s=this.Oyt,r=this.xft.n5().r5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.owt()||(h[t]=i.ni(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.owt()&&(h[t]=o.ni(i))}yield*s.apply(n.L6(),h)}}else this.sMt()}Kbt(){const e=this.ti,h=this.Hwt,s=this.Oyt,t=this.xft,i=t.aMt(),r=t.n5().r5();i.lMt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);s.apply(n.L6(),h)}i.uMt(s)}*Zbt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const e=this.ti,h=this.Hwt,s=this.Oyt,t=this.xft,i=t.aMt(),r=t.n5().r5();i.lMt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);yield*s.apply(n.L6(),h)}i.uMt(s)}else this.Kbt()}Jbt(){const t=this.Hwt;return h(this.ti,t),this.Oyt.apply(this.$St||this.xft,t)}*qbt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const s=this.Hwt;h(this.ti,s);let t=this.Oyt.apply(this.$St||this.xft,s);return $o.qo(t)?yield*t:t}return this.Jbt()}Hbt(){const t=this.xft,s=t.lJ(),e=t.XSt(),h=this.ti,r=this.zwt,n=this.Hwt,o=this.Oyt,a=this.KSt,l=t.n5().r5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.owt()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.owt()&&(n[t]=f.ni(i))}const c=s?u.QB().QSt(e):0;o.apply(u.Hht()[a+c].L6(),n)}}*zbt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const t=this.xft,s=t.lJ(),e=t.XSt(),h=this.ti,r=this.zwt,n=this.Hwt,o=this.Oyt,a=this.KSt,l=t.n5().r5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.owt()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.owt()&&(n[t]=f.ni(i))}const c=s?u.QB().QSt(e):0;yield*o.apply(u.Hht()[a+c].L6(),n)}}else this.Hbt()}Xbt(){const e=this.ti,h=this.Hwt,s=this.Oyt,r=this.xft.n5().r5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);n.push(s.apply(o.L6(),h))}return Promise.all(n)}*Ybt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const e=this.ti,h=this.Hwt,s=this.Oyt,r=this.xft.n5().r5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);n.push(yield*s.apply(o.L6(),h))}return Promise.all(n)}return this.Xbt()}Vbt(){const t=this.xft,s=t.lJ(),e=t.XSt(),h=this.ti,r=this.Hwt,n=this.Oyt,o=this.KSt,a=t.n5().r5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ni(i);const c=s?u.QB().QSt(e):0;l.push(n.apply(u.Hht()[o+c].L6(),r))}return Promise.all(l)}*Ubt(){if((this.pbt()||this.bf.ryt())&&(yield this),this.ybt()){const t=this.xft,s=t.lJ(),e=t.XSt(),h=this.ti,r=this.Hwt,n=this.Oyt,o=this.KSt,a=t.n5().r5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ni(i);const c=s?u.QB().QSt(e):0;l.push(yield*n.apply(u.Hht()[o+c].L6(),r))}return Promise.all(l)}return this.Vbt()}async Lbt(){try{await this.Oyt()}catch(t){console.error(`Unhandled exception running script %c${this.Zyt.PX().cf()}, event ${this.Zyt.Ogt()}, action ${this.$gt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),$o.umt.Lyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$o.umt.Byt())}}*Bbt(){return(this.pbt()||this.bf.ryt())&&(yield this),this.Lbt()}Oq(){return this.Jwt&&this.Jwt.size?{ex:$o.Ho(this.Jwt)}:null}kq(t){if(this.Jwt&&(this.Jwt.clear(),this.Jwt=null),t){const s=t.ex;s&&(this.Jwt=$o.zo(s))}}}}{let d=function(t){return t instanceof n?S.L5(t):t.c8()},u=function(t){return d(t).zO()},h=function(t){return S.L5(t)},C=function(t,s,i,e){const h=s.f4(),r=i.f4();h<r?t.Set(s,i,e):t.Set(i,s,e)},R=function(t,s,i){const e=s.f4(),h=i.f4();e<h?t.fc(s,i):t.fc(i,s)},A=function(t,s){t.mc(s)},P=function(t,s,i){const e=s.f4(),h=i.f4();return e<h?t.ni(s,i):t.ni(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.zO(),n=S.nD(),o=S.Udt(),a=o.DD().Zft(),l=o.QB(),u=o.dbt(),c=s.n5(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.Oft()?(w.I(r.xN()),w.offset(i,e),n.cMt(r.JO(),s,w,b),d=b):!a||S.fMt()&&!c.Hft().length&&c.Uft().length?d=c.Uft():(d=c.Hft(),I=!0),h&&(p=r.jM(),m=r.HM(),r.wN(i,e),r.mN());for(const y of d)if(n.kk(t,y)){if(g=!0,u)break;f&&D.add(y)}return h&&(r.gN(p,m),r.mN()),E.Hn(b),g},i=function(t){const s=S.kD().Zft(),i=_.n5(),e=i.Uft(),h=i.Hft();i.Oft()?(i.qft(D),s&&(E.Hn(h),i.Xft(D,_.r5()))):s?I?i.Yft(D):(i.Xft(D,e),i.qft(D)):i.qft(D),_.Tyt()},M=function(t,s){T&&(s&&i(),D.clear(),_=null,T=!1)},s=function(t,s){const i=S.WO(s);if(i){const e=t.n5();if(e.Oft()||e.Uft().includes(i))if(t.lJ()){if(i.QB().dMt(t))return e.Kft(i),t.Tyt(),!0}else if(i.QB()===t)return e.Kft(i),t.Tyt(),!0}return!1},r=function(t,h){const r=t.n5();if(r.Oft()){r.Vft(!1),r.Dft();const i=t.r5();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.f4()===h?r.jft(e):r.Wft(e)}return t.Tyt(),!!r.Uft().length}{let i=r.Uft(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).f4()===h?r.jft(n):++e}return E.Un(i,e),t.Tyt(),!!i.length}},E=(d,u,h,C,R,A,P,e,i,M,s,r,self.Ws),l=new E.Yo,v={},x={},G={},S=null,n=(E.pMt=function(t){S=t},self.KB),w=(x.mMt=function(t,s){return E.compare(this.zO().jM(),t,s)},G.mMt=function(t,s){return E.compare(this.x,t,s)},x.gMt=function(t,s){return E.compare(this.zO().HM(),t,s)},G.gMt=function(t,s){return E.compare(this.y,t,s)},x.yMt=function(){return this.zO().IN()},G.yMt=function(){return this._N()},v.SMt=function(){const t=u(this),s=t.IO(),i=t.xN();return i.Fl()<0||i.Dl()<0||i.Pl()>s.Pm()||i.El()>s.jm()},v.wMt=function(i,e,h){const t=this.n5(),r=t.r5();if(!r.length)return!1;let n=r[0],o=n.zO(),a=n,l=E.Ar(o.jM(),o.HM(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.zO();const u=E.Ar(o.jM(),o.HM(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=n)}return t.Kft(a),!0},x.VM=function(t){const s=this.zO();s.jM()!==t&&(s.VM(t),s.mN())},G.VM=function(t){this.x=+t},x.zM=function(t){const s=this.zO();s.HM()!==t&&(s.zM(t),s.mN())},G.zM=function(t){this.y=+t},x.bMt=function(t,s){const i=this.zO();i.MMt(t,s)||(i.gN(t,s),i.mN())},G.bMt=function(t,s){this.setPosition(t,s)},v.vMt=function(t,s){if(t){const i=d(this),e=t.e5(i);if(e){const[h,r]=e.xMt(s),n=i.zO();n.jM()===h&&n.HM()===r||(n.gN(h,r),n.mN())}}},v.GMt=function(t){if(0!==t){const s=u(this);s.wN(s.TMt()*t,s._Mt()*t),s.mN()}},x.IMt=function(t,s){if(0!==s){const i=this.zO();t=E.Ir(t),i.wN(Math.cos(t)*s,Math.sin(t)*s),i.mN()}},G.IMt=function(t,s){0!==s&&(t=E.Ir(t),this.SN(Math.cos(t)*s,Math.sin(t)*s))},x.jM=function(){return this.zO().jM()},G.jM=function(){return this.x},x.HM=function(){return this.zO().HM()},G.HM=function(){return this.y},v.ZD=function(){return S.ZD(d(this))},x.CMt=function(t,s){return E.compare(this.zO().Pm(),t,s)},G.CMt=function(t,s){return E.compare(this.width,t,s)},x.RMt=function(t,s){return E.compare(this.zO().jm(),t,s)},G.RMt=function(t,s){return E.compare(this.height,t,s)},x.Bm=function(t){const s=this.zO();s.Pm()!==t&&(s.Bm(t),s.mN())},G.Bm=function(t){this.width=t},x.Em=function(t){const s=this.zO();s.jm()!==t&&(s.Em(t),s.mN())},G.Em=function(t){this.height=t},x.CC=function(t,s){const i=u(this);i.Pm()===t&&i.jm()===s||(i.CC(t,s),i.mN())},G.CC=function(t,s){this.M5(t,s)},x.Pm=function(){return this.zO().Pm()},G.Pm=function(){return this.width},x.jm=function(){return this.zO().jm()},G.jm=function(){return this.height},v.AMt=function(){return u(this).xN().Pl()},v.PMt=function(){return u(this).xN().El()},v.EMt=function(){return u(this).xN().Fl()},v.FMt=function(){return u(this).xN().Dl()},v.DMt=function(){const t=u(this).xN();return(t.Pl()+t.Fl())/2},v.OMt=function(){const t=u(this).xN();return(t.El()+t.Dl())/2},v.kMt=function(t,s){return E.Er(u(this).GetAngle(),E.Ir(s))<=E.Ir(t)},v.LMt=function(t){return E.Dr(u(this).GetAngle(),E.Ir(t))},v.BMt=function(t,s){const i=E.Ir(t),e=E.Ir(s),h=u(this).GetAngle(),r=!E.Dr(e,i);return r?!(!E.Dr(h,i)&&E.Dr(h,e)):E.Dr(h,i)&&!E.Dr(h,e)},x.G5=function(t){const s=this.zO(),i=E._r(E.Ir(t));isNaN(i)||s.GetAngle()===i||(s.G5(i),s.mN())},G.G5=function(t){this.vN=t},v.NMt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.G5(s.GetAngle()+E.Ir(t)),s.mN()}},v.WMt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.G5(s.GetAngle()-E.Ir(t)),s.mN()}},v.jMt=function(t,s){const i=u(this),e=i.GetAngle(),h=E.Fr(e,E.Ir(s),E.Ir(t));isNaN(h)||e===h||(i.G5(h),i.mN())},v.VMt=function(t,s,i){const e=u(this),h=e.GetAngle(),r=s-e.jM(),n=i-e.HM(),o=Math.atan2(n,r),a=E.Fr(h,o,E.Ir(t));isNaN(a)||h===a||(e.G5(a),e.mN())},v.UMt=function(t,s){const i=u(this),e=i.GetAngle(),h=t-i.jM(),r=s-i.HM(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.G5(n),i.mN())},x.GetAngle=function(){return E.Cr(this.zO().GetAngle())},G.GetAngle=function(){return this.vN},v.HMt=function(t,s){return E.compare(E.Xr(100*u(this).hP(),6),t,s)},x.lB=function(){return this.zO().lB()},G.lB=function(){return this.isVisible},v.oB=function(t){const s=u(this);t=2===t?!s.lB():0!==t,s.lB()!==t&&(s.oB(t),S.ZO())},v.nP=function(t){const s=E.Tr(t/100,0,1),i=u(this);if(i.y6()){if(i.ynt().zMt()===s)return}else if(i.hP()===s)return;i.nP(s),S.ZO()},v.JMt=function(t){l.Ea(t);const s=u(this);s.RN().Ga(l)||(s.AN(l),S.ZO())},v.aP=function(){const t=u(this).RN();return E.Kr(t.fa(),t.ya(),t.Sa(),t.wa())},v.hP=function(){return E.Xr(100*u(this).hP(),6)},v.qMt=function(t){return!!t&&u(this).JO()===t},v.XMt=function(i){const t=this.n5(),e=t.r5();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],n=r.zO(),o=h.zO(),a=n.JO().QF(),l=o.JO().QF();0===i?(l<a||a===l&&n.qO()>o.qO())&&(h=r):(a<l||a===l&&n.qO()<o.qO())&&(h=r)}return t.Kft(h),!0},x.YMt=function(t,s,i){const e=this.zO(),h=0===t?e.JM():e.MN();return E.compare(h,s,i)},G.YMt=function(t,s,i){const e=0===t?this._B:this.bN;return E.compare(e,s,i)},x.$Mt=function(){this.zO().EN()},G.$Mt=function(){this.PN()},x.KMt=function(){this.zO().DN()},G.KMt=function(){this.FN()},v.ZMt=function(t){t&&u(this).kN(t)},v.QMt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.tvt(e);h&&e.zO().BN(h,i)}},x.qM=function(t){const s=this.zO();s.JM()!==t&&(s.qM(t),S.ZO())},G.qM=function(t){this._B=t},v.svt=function(){return u(this).JO().QF()},v.ivt=function(){return u(this).JO().cf()},x.evt=function(){return this.zO().qO()},G.evt=function(){return this.zIndex},x.hvt=function(){return this.zO().JM()},G.hvt=function(){return this._B},x.rvt=function(){return this.zO().MN()},G.rvt=function(){return this.bN},v.nvt=function(t){const s=d(this),i=s.QB().S5().qht(t);if(i){const e=i.QF(),h=s.zO().dN();return h.tW(e)}},v.ovt=function(t,s){const i=d(this),e=i.QB().S5().qht(s);if(e){const h=e.QF(),r=1===t,n=i.zO().dN();n.tW(h)!==r&&(n.sW(h,r),n.iW(),S.ZO())}},v.avt=function(t,s,i){const e=d(this),h=e.QB().S5().qht(t);if(h){s=Math.floor(s);const r=h.BG().WG(s);if(r){"color"===r?(l.Ea(i),i=l):"percent"===r&&(i/=100);const n=h.QF(),o=e.zO().dN(),a=o.hW(n,s,i);a&&o.tW(n)&&S.ZO()}}},E.Sr(E.Rect)),F=[],b=[],T=!1,_=null,I=!1,D=new Set;v.lvt=function(S){if(this.bf.uvt())return function*(S){if(S){let t=this.bf,s=t.nD(),e=t.AD(),i=e.UD(),h=e.Udt(),r=h.QB(),n=h.Sbt(),o=h.wbt(),a=i.nV(),l=t.Jtt(),u=l-1,c=a.kD(),f=i.oV(c),d=n.get("collmemory"),p=(d||(d=E.Sr(E.oc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Qf().addEventListener("instancedestroy",t=>A(d,t.X6))),r.n5()),m=S.n5(),g=p.r5(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Oft()?(s.cMt(w.zO().JO(),S,w.zO().xN(),F),y=F,s.cvt(w,S,y)):y=m.r5();for(let t=0;t<y.length;++t){const b=y[t];if(s.kk(w,b)||s.fvt(w,b)){let t=P(d,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<u;if(C(d,w,b,l),M){const v=c.rV(),x=(e.fV(v),r.n5()),G=S.n5();if(x.Vft(!1),G.Vft(!1),r===S){const T=x.Uft();E.Hn(T),T.push(w),T.push(b),r.Tyt()}else{const _=x.Uft(),I=G.Uft();E.Hn(_),E.Hn(I),_.push(w),I.push(b),r.Tyt(),S.Tyt()}yield*c.gyt(a,f),e.pV(v)}}else R(d,w,b)}E.Hn(F)}i.SV()}return!1}.call(this,S);if(S){let t=this.bf,s=t.nD(),e=t.AD(),i=e.UD(),h=e.Udt(),r=h.QB(),n=h.Sbt(),o=h.wbt(),a=i.nV(),l=t.Jtt(),u=l-1,c=a.kD(),f=i.oV(c),d=n.get("collmemory"),p=(d||(d=E.Sr(E.oc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Qf().addEventListener("instancedestroy",t=>A(d,t.X6))),r.n5()),m=S.n5(),g=p.r5(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Oft()?(s.cMt(w.zO().JO(),S,w.zO().xN(),F),y=F,s.cvt(w,S,y)):y=m.r5();for(let t=0;t<y.length;++t){const b=y[t];if(s.kk(w,b)||s.fvt(w,b)){let t=P(d,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<u;if(C(d,w,b,l),M){const v=c.rV(),x=(e.fV(v),r.n5()),G=S.n5();if(x.Vft(!1),G.Vft(!1),r===S){const T=x.Uft();E.Hn(T),T.push(w),T.push(b),r.Tyt()}else{const _=x.Uft(),I=G.Uft();E.Hn(_),E.Hn(I),_.push(w),I.push(b),r.Tyt(),S.Tyt()}c.dV(a,f),e.pV(v)}}else R(d,w,b)}E.Hn(F)}i.SV()}return!1},v.dvt=function(t){return e(d(this),t,0,0)},v.pvt=function(t,s,i){return e(d(this),t,s,i)},v.i6=function(){return u(this).i6()},v.Nq=function(){return u(this).Nq()},v.mvt=function(i,e){const t=this.n5(),h=t.r5();if(0===h.length)return!1;let s=i.n5(),r=s.r5();if(s.Oft()){const a=[...this.bf.gvt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.Oft()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];if(1===e)for(const u of l.JN())u.yvt(i)&&(null===n||n.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.UN()))continue}else t=l.zN();t.yvt(i)&&(null===n||n.has(t))&&o.add(t)}}return 0!==o.size&&(s.qft(o),i.Tyt(),!0)},v.Svt=function(i,e){const t=this.n5(),h=t.r5();if(0===h.length)return!1;let s=i.n5(),r=s.r5();if(s.Oft()){const a=[...this.bf.gvt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.Oft()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];2!==e||l.Nq()||!l.yvt(i)||null!==n&&!n.has(l)||o.add(l);for(const u of 0===e?l.children():l.KN())2===e&&u.Nq()||u.yvt(i)&&(null===n||n.has(u))&&o.add(u)}return 0!==o.size&&(s.qft(o),i.Tyt(),!0)},v.wvt=function(i,e,h){const t=this.n5(),r=t.r5();if(0===r.length)return!1;let s=i.n5(),n=s.r5();if(s.Oft()){const l=[...this.bf.gvt(i)];0<l.length&&(n=n.concat(l))}if(0===n.length)return!1;const o=s.Oft()?null:new Set(n),a=[];for(let t=0,s=r.length;t<s;++t){const u=r[t];if(0===e){const c=u.$N(h);null!==c&&c.yvt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.yvt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.Jft(a),i.Tyt(),!0)},v.bvt=function(t,s,i){const e=d(this);switch(t){case 0:default:return E.compare(e.XN(),s,i);case 1:return E.compare(e.Mvt(),s,i)}},v.QN=function(t,s,i,e,h,r,n,o,a,l){const u=d(this),c=S.zdt().QB();for(const f of t.vvt(u,c)){if(!f.XL().OL())return;u.QN(f,{h6:s,n6:i,a6:e,u6:h,f6:r,g6:n,p6:o,S6:a,b6:l})}},v.t6=function(t){const s=d(this),i=S.zdt().QB();for(const e of t.vvt(s,i))s.t6(e)},v.xvt=function(){const t=d(this);if(t.i6()){const s=t.UN();s.t6(t)}},v.Gvt=function(){return d(this).XN()},v.Tvt=function(){return d(this).Mvt()},v._vt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.T6(),i.mN()):i.x6(t,s)},v.I6=function(t,s,i,e,h,r,n,o){const a=u(this),l=a.I6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,_B:r,u:n,v:o});l&&a.mN()},v.Ivt=function(){const t=u(this);return t.R6()?t.A6().bv():0},v.Cvt=function(){const t=u(this);return t.R6()?t.A6().Mv():0},v.Rvt=function(t){const s=u(this);t=2===t?!s.lB():0!==t,s.lB()!==t&&s.oB(t)},v.j6=function(t,s){this instanceof self.KB?this.xj(t,s):this.j6(t,s)},v.Avt=function(t,s){this instanceof self.KB?this.Gj(t,""+s):this.Avt(t,""+s)},v.Pvt=function(t){this instanceof self.KB?this.Tj(t):this.Pvt(t)},v.Evt=function(){this instanceof self.KB?this.bj():this.B6()},v.Fvt=function(){this instanceof self.KB?this.Mj():this.N6()},v.Dvt=function(){return this instanceof self.KB?this.vj():this.Dvt()},v.Ovt=function(t){this instanceof self.KB?this._setEnabled(0!==t):this.kvt(0!==t)},v.Lvt=function(){return this instanceof self.KB?this.Uyt():this.Bvt()},x.Nvt=function(t,s,i){return E.compare(this.c8().nnt(t),s,i)},G.Nvt=function(t,s,i){return E.compare(h(this).nnt(t),s,i)},x.Wvt=function(t){return!!this.c8().nnt(t)},G.Wvt=function(t){return!!h(this).nnt(t)},v.jvt=function(i,e){const t=this.n5(),h=t.r5();if(!h.length)return!1;let r=this.lJ(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=r?a.QB().qSt(this.XSt()):0,u=a.nnt(l+e);(null===n||0===i&&u<o||1===i&&u>o)&&(o=u,n=a)}return t.Kft(n),!0},v.Vvt=function(t){return(this.bf.Udt().dbt()?r:s)(this,t)},v.JW=function(t){const s=new Set(E.lo(t)),i=d(this).b4();return s.isSubsetOf(i)},v.Uvt=function(){return d(this).Hvt()},v.zvt=function(){return d(this).b4().size},v.Jvt=function(t){return d(this).qvt(t)},v.Xvt=function(t,s){const i=E.lo(s);if(0!==i.length){const e=d(this),h=new Set(e.b4());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.v4(h)}},v.Yvt=function(){S.r4(d(this))},v.$vt=function(){return!0},v.Kvt=function(){return!0},x.Zvt=function(t,s){this.c8().ont(t,s)},G.Zvt=function(t,s){h(this).ont(t,s)},x.Qvt=function(t,s){const i=this.c8(),e=i.nnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ont(t,e+s)},G.Qvt=function(t,s){const i=h(this),e=i.nnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.ont(t,e+s)},x.t2t=function(t,s){const i=this.c8(),e=i.nnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ont(t,e-s))},G.t2t=function(t,s){const i=h(this),e=i.nnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.ont(t,e-s))},x.s2t=function(t,s){this.c8().ont(t,s?1:0)},G.s2t=function(t,s){h(this).ont(t,s?1:0)},x.i2t=function(t){const s=this.c8();s.ont(t,0===s.nnt(t)?1:0)},G.i2t=function(t){const s=h(this);s.ont(t,0===s.nnt(t)?1:0)},v.e2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);S.h2t(),i.Z$("state"),i.sv(s,"state"),S.r2t("state",{n2t:!0})},v.o2t=function(){return JSON.stringify(d(this).tv("state"))},v.a2t=function(){return d(this).QB().cf()},v.l2t=function(){let t=S.Vdt().C0t(),s=t.a5();for(const i of S.gvt(t))++s;return s},v.u2t=function(){return S.Vdt().C0t().n5().r5().length},x.RY=function(){return this.c8().RY()},G.RY=function(){return h(this).RY()},x.f4=function(){return this.c8().f4()},G.f4=function(){return h(this).f4()},v.ppt=function(t){const s=d(this);return t.toLowerCase()===S.AD().Spt(s)},v.G4=function(t){const s=d(this);S.AD().G4(s,t)},v.c2t=function(t){return S.AD().H1t().f2t(this.n5().r5(),t),!0},v.d2t=function(){return d(this).m4()},E.p2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.GY,S=s.drt,w=s.prt,b=Object.assign({},v,2<=i?G:x);h&&(y.mMt=b.mMt,y.gMt=b.gMt,y.yMt=b.yMt,y.SMt=b.SMt,y.wMt=b.wMt,S.VM=b.VM,S.zM=b.zM,S.bMt=b.bMt,S.vMt=b.vMt,S.GMt=b.GMt,S.IMt=b.IMt,w.m2t=b.jM,w.g2t=b.HM,w.KD=b.ZD),r&&(y.CMt=b.CMt,y.RMt=b.RMt,S.Bm=b.Bm,S.Em=b.Em,S.CC=b.CC,w.y2t=b.Pm,w.S2t=b.jm,w.w2t=b.AMt,w.b2t=b.PMt,w.M2t=b.EMt,w.v2t=b.FMt,w.x2t=b.DMt,w.G2t=b.OMt),n&&(y.T2t=b.kMt,y._2t=b.LMt,y.BMt=b.BMt,S.G5=b.G5,S.NMt=b.NMt,S.WMt=b.WMt,S.jMt=b.jMt,S.VMt=b.VMt,S.UMt=b.UMt,w.I2t=b.GetAngle),o&&(y.lB=b.lB,y.HMt=b.HMt,S.oB=b.oB,S.nP=b.nP,S.JMt=b.JMt,w.Opacity=b.hP,w.C2t=b.aP),a&&(y.qMt=b.qMt,y.XMt=b.XMt,y.YMt=b.YMt,S.$Mt=b.$Mt,S.KMt=b.KMt,S.ZMt=b.ZMt,S.QMt=b.QMt,S.qM=b.qM,w.svt=b.svt,w.ivt=b.ivt,w.evt=b.evt,w.hvt=b.hvt,w.rvt=b.rvt),l&&(y.nvt=b.nvt,S.ovt=b.ovt,S.avt=b.avt),d&&(y.i6=b.i6,y.Nq=b.Nq,y.mvt=b.mvt,y.Svt=b.Svt,y.wvt=b.wvt,y.bvt=b.bvt,S.QN=b.QN,S.t6=b.t6,S.xvt=b.xvt,w.Gvt=b.Gvt,w.Tvt=b.Tvt),p&&(S._vt=b._vt,S.I6=b.I6,w.Ivt=b.Ivt,w.Cvt=b.Cvt),u&&(y.lB=b.lB,S.oB=b.Rvt,S.R2t=b.j6,S.A2t=b.Avt,S.P2t=b.Pvt),c&&(y.E2t=b.Dvt,S.F2t=b.Evt,S.D2t=b.Fvt),f&&(y.nc=b.Lvt,S.O2t=b.Ovt),m&&(y.lvt=b.lvt,y.dvt=b.dvt,y.pvt=b.pvt,s.k2t=M),e||(y.Nvt=b.Nvt,y.Wvt=b.Wvt,y.jvt=b.jvt,y.Vvt=b.Vvt,y.JW=b.JW,S.Zvt=b.Zvt,S.Qvt=b.Qvt,S.t2t=b.t2t,S.s2t=b.s2t,S.i2t=b.i2t,S.Xvt=b.Xvt,y.$vt=b.$vt,y.Kvt=b.Kvt,S.Yvt=b.Yvt,S.e2t||(S.e2t=b.e2t),w.o2t||(w.o2t=b.o2t),w.l2t=b.l2t,w.u2t=b.u2t,w.L2t=b.RY,w.B2t=b.f4,w.a2t=b.a2t,w.Uvt=b.Uvt,w.zvt=b.zvt,w.Jvt=b.Jvt,y.ppt=b.ppt,S.G4=b.G4,S.c2t=b.c2t),g&&(w.d2t=b.d2t)}}{const ta=self.Ws;ta.z1t=class extends ta.dr{constructor(t){super(),this.t0t=t,this.Cf="",this.P3=-1,this.N2t="",this.W2t=!1,this.j2t=null,this.l0t=0,this.Lmt=[],this.m0t=null,this.V2t=new Map,this.U2t=null,this.H2t=null,this.z2t=-1,this.Vyt=null,this.J2t=null,this.q2t=!1}wr(){this.Cf="",this.P3=-1,this.N2t="",this.j2t=null,this.H2t=null,this.Vyt=null,this.J2t=null,this.z2t=-1,ta.Hn(this.Lmt),this.m0t&&(this.m0t.clear(),this.m0t=null);for(const t of this.V2t.values())t.wr();this.V2t.clear(),this.U2t=null}WM(){const t=this.t0t,s=t.pk().aJ(),i=t.Vdt(),e=(this.j2t=i.kD(),this.l0t=i.M0t()+1,t.kpt(this.j2t));e&&(this.H2t=e,this.Vyt=e.rSt(),this.J2t=e.hSt().map(t=>t.Wet()),e.lyt())&&(this.z2t=e.lSt());for(const r of s){const n=r.n5();n.Oft()&&!this.j2t.Fgt(r)||(this.Lmt.push(r),this.V2t.set(r,ta.Sr(ta.X2t,n)))}const h=t.LD();this.m0t=0<h.size?h:null}Y2t(t){this.Cf="timer",this.WM(),this.P3=this.t0t.pk().sO()+t}$2t(t){this.Cf="signal",this.WM(),this.N2t=t.toLowerCase()}f2t(t,s){this.Cf="instance-signals",this.WM(),this.N2t=s.toLowerCase(),this.U2t=new Set(t)}K2t(t){this.Cf="promise",this.WM(),t.then(()=>this.upt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.upt()})}Z2t(){return"timer"===this.Cf}apt(){return"signal"===this.Cf}gpt(){return"instance-signals"===this.Cf}Ept(){return"promise"===this.Cf}lpt(){return this.N2t}Q2t(){return this.W2t}upt(){this.W2t=!0}ypt(t){this.U2t.delete(t),0===this.U2t.size&&this.upt()}X1t(){return this.Z2t()?this.P3<=this.t0t.pk().sO():this.Q2t()}txt(t){t.g0t(this.j2t,this.l0t);for(const[i,e]of this.V2t.entries()){const h=i.n5();e.g0t(h)}this.m0t&&t.D0t([...this.m0t]);const s=this.H2t;s&&(s.byt(this.Vyt),s.hSt().map((t,s)=>t.Mht(this.J2t[s])),s.lyt())&&s.uSt(this.z2t)}Y1t(t){this.txt(t),this.j2t.uyt(t),this.H2t&&this.H2t.lyt()&&this.H2t.Ayt(this.z2t),this.t0t.W1t(this.Lmt),this.q2t=!0}async Q1t(t){this.txt(t);for(const s of this.j2t.cyt(t))await this.t0t.pk().x1t(s);this.H2t&&this.H2t.lyt()&&this.H2t.Ayt(this.z2t),this.t0t.W1t(this.Lmt),this.q2t=!0}$1t(){return this.q2t}Aft(t){for(const s of this.V2t.values())s.Aft(t);if("instance-signals"===this.Cf){for(const i of t)this.U2t.delete(i);0===this.U2t.size&&this.upt()}}Oq(){const t={},s={wt:this.Cf,t:this.P3,st:this.N2t,s:this.W2t,ev:this.j2t.yJ(),sm:this.Lmt.map(t=>t.yJ()),dsm:this.m0t?[...this.m0t].map(t=>t.yJ()):null,sols:t};this.j2t.Kgt(this.l0t)&&(s.act=this.j2t.Jdt(this.l0t).yJ());for(const[i,e]of this.V2t)t[i.yJ().toString()]=e.Oq();return"instance-signals"===this.Cf&&(s.pi=[...this.U2t].map(t=>t.f4())),s}static Fpt(t,s){const i=t.pk(),e=t.s1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.e1t(s.act);if(!n)return null;h=n.QF()}const r=ta.Sr(ta.z1t,t);r.P3=s.t,s.hasOwnProperty("wt")?r.Cf=s.wt:r.Cf=-1===r.P3?"signal":"timer",r.N2t=s.st,r.W2t=s.s,r.j2t=e,r.l0t=h;for(const o of s.sm){const a=i.Zj(o);a&&r.Lmt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.Zj(l);u&&(r.m0t||(r.m0t=new Set),r.m0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.Zj(d);if(p){const m=ta.Sr(ta.X2t,null);m.kq(t,f),r.V2t.set(p,m)}}if("instance-signals"===r.Cf){r.U2t=new Set;for(const g of s.pi){const y=i.WO(g);y&&r.U2t.add(y)}}return r}}}{const sa=self.Ws;sa.X2t=class extends sa.dr{constructor(t){super(),this.xft=null,this.sxt=!0,this.e7=[],t&&(this.xft=t.QB(),this.sxt=t.Oft(),sa.Xn(this.e7,t.Uft()))}wr(){this.xft=null,sa.Hn(this.e7)}g0t(t){t.Vft(this.sxt),sa.Xn(t.Uft(),this.e7)}Aft(t){sa.Qn(this.e7,t)}Oq(){return{sa:this.sxt,insts:this.e7.map(t=>t.f4())}}kq(t,s){const i=t.pk();this.sxt=!!s.sa,sa.Hn(this.e7);for(const e of s.insts){const h=i.WO(e);h&&this.e7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ia=self.Ws;ia.ixt=class extends ia.dr{constructor(t){super(),this.bf=t.runtime,this.hxt=!!t.vL,this.rxt=!!t.nxt,this.oxt=!!t.CL,this.axt=!!t.lxt,this.uxt=!!t.AL,this.cxt=!!t.fxt,this.dxt=!!t.kL,this.pxt=!!t._L,this.mxt=!!t.EL,this.gxt=t.yxt,this.Sxt=null,this.wxt=new Map,this.bxt=new Map,this.Mxt=new Map,this.vxt=new Map,this.xxt=t.Gxt,this.Txt=null}wr(){this.bf=null}pk(){return this.bf}_xt(){}mpt(){return(2<=this.fbt()?this.Txt:this).constructor}fbt(){return this.gxt}Ixt(t=!1){let s=this.xxt;return t&&"function"!=typeof s&&2<=this.fbt()?globalThis.S8:s}xL(){return this.hxt}TL(){return this.rxt}IL(){return this.pxt}FL(){return this.mxt}RL(){return this.oxt}mM(){return this.axt}PL(){return this.uxt}OL(){return this.cxt}LL(){return this.dxt}OSt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.wxt.get(t);return i||(i=t.bind(s),this.wxt.set(t,i)),i}abt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.bxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}lbt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Mxt,t),r=l(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}ubt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=l(this.vxt,t),n=l(r,i),o=l(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Cxt(t){if(!this.xL())throw new Error("must be single-global plugin");this.Sxt=t}UL(){if(this.xL())return this.Sxt;throw new Error("must be single-global plugin")}zL(){if(this.xL())return this.Sxt.zL();throw new Error("must be single-global plugin")}Rxt(){const t=this.fbt(),s=(ia.bL.Axt(this,t),this.Ixt(!0));if(s){if(this.Txt=new s,!(this.Txt instanceof self.yL))throw new TypeError("plugin class must derive from IPlugin")}else this.Txt=new self.yL;ia.bL.Pxt(t)}WL(){return this.Txt}}}{const ea=self.Ws;ea.Ext=class extends ea.ixt{constructor(t,s){super(t),this.Fxt=s,this.Dxt=0,this.Oxt=new Map,this.kxt("elem-focused",t=>t.Lxt()),this.kxt("elem-blurred",t=>{t&&t.Bxt()})}wr(){super.wr()}Nxt(t){const s=this.Dxt++;return this.Oxt.set(s,t),s}Wxt(t){this.Oxt.delete(t)}kxt(t,i){this.bf.U4(this.Fxt,t,t=>{const s=this.Oxt.get(t.elementId);i(s,t)})}}}{const ha=self.Ws;ha.jxt=class extends ha.dr{constructor(t){super(),this.xft=t,this.bf=t.pk(),this.Vxt=t.XL()}wr(){this.xft=null,this.bf=null,this.Vxt=null}QB(){return this.xft}pk(){return this.bf}XL(){return this.Vxt}MW(){return this.xft.MW()}_xt(){}Gbt(t){}lMt(t){}uMt(t){}qX(t){}QX(){}$X(){}bY(t){}Uxt(){}Ixt(){return null}Hxt(t,s,i){const e=ha.Sr(ha.Event,t,s);e.zxt=this,i&&Object.assign(e,i),this.QB().i$(e)}}}{const ra=self.Ws;ra.Jxt=class extends ra.dr{constructor(t,s){super(),this.Ci=t,this.Fxt=s,this.qxt=null,this.bf=t.pk(),this.xft=this.Ci.QB(),this.Xxt=this.xft.aMt(),this.j$=null,this.U$=null,this.Y4=!1,this.Z4=!1,this.P0=null,this.QI=!1}wr(){this.QI=!0,this.Yxt(),this.$xt(),this.j$=null,this.U$=null,this.P0&&(this.P0.wr(),this.P0=null),this.Ci=null,this.bf=null,this.xft=null,this.Xxt=null}br(){return this.QI}c8(){return this.Ci}pk(){return this.bf}QB(){return this.xft}XL(){return this.Xxt.XL()}aMt(){return this.Xxt}Kxt(){return this.Ci.jO()}N4(t){return this.bf.N4(t,this.Ci,null)}Zxt(t){return this.bf.Zxt(t,this.Ci,null)}j4(t){return this.bf.j4(t,this.Ci,null)}Qxt(t,s){return this.bf.Qxt(t,this.Ci,s)}tGt(t,s){return this.bf.tGt(t,this.Ci,s)}sGt(t){return this.bf.sGt(t)}iGt(t,s){this.bf.U4(this.Fxt,t,s)}eGt(t){for(const[s,i]of t)this.iGt(s,i)}hGt(t,s){this.bf.xf(this.Fxt,t,s)}rGt(t,s){return this.bf.sk(this.Fxt,t,s)}nGt(t,s){if(!this.bf.pD())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.Fxt,handler:t,data:s,responseId:null});this.hGt(t,s)}oGt(t){if(!t)throw new Error("cannot set empty component id");this.qxt=t}aGt(){if(this.qxt)return this.bf.eN(this.qxt);throw new Error("wrapper extension component id not set")}rN(t,s){if(!this.qxt)throw new Error("wrapper extension component id not set");this.bf.rN(this.qxt,t,s)}lGt(t){for(const[s,i]of t)this.rN(s,i)}Vj(t,s){if(!this.qxt)throw new Error("wrapper extension component id not set");this.bf.Vj(this.qxt,t,s)}Uj(t,s){if(this.qxt)return this.bf.Uj(this.qxt,t,s);throw new Error("wrapper extension component id not set")}KK(){}uGt(){}cGt(){this.Y4||(this.j$||(this.j$=()=>this.KK()),this.bf.Qf().addEventListener("tick",this.j$),this.Y4=!0)}Yxt(){this.Y4&&(this.bf.Qf().removeEventListener("tick",this.j$),this.Y4=!1)}fGt(){return this.Y4}dGt(){this.Z4||(this.U$||(this.U$=()=>this.uGt()),this.bf.Qf().addEventListener("tick2",this.U$),this.Z4=!0)}$xt(){this.Z4&&(this.bf.Qf().removeEventListener("tick2",this.U$),this.Z4=!1)}pGt(){return this.Z4}mGt(){return[]}tv(){return null}sv(t){}Krt(t){}ent(t,s){}Knt(t,s,i){if(0!==s){const e=this.Krt(t);if("number"!=typeof e)throw new Error("expected number");this.ent(t,e+s,i)}}gGt(t,s,i,e){}yGt(t,...s){t.call(this,...s)}SGt(t,...s){return t.call(this,...s)}Ixt(){return null}Hxt(t,s,i){if(this.Ci.wGt()){const e=this.Kxt(),h=ra.Sr(ra.Event,t,s);h.X6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}mM(){return!1}}}{const na=self.Ws;na.bGt=class extends na.Jxt{constructor(t,s){super(t,s),this.zst=t.zO(),this.MGt=null,this.vGt=null}wr(){if(this.MGt){const t=this.bf.Qf();t.removeEventListener("renderercontextlost",this.MGt),t.removeEventListener("renderercontextrestored",this.vGt),this.MGt=null,this.vGt=null}this.zst=null,super.wr()}xGt(){this.GGt()}TGt(){}_Gt(){}GGt(){if(!this.MGt){this.MGt=()=>this.YH(),this.vGt=()=>this.IGt();const t=this.bf.Qf();t.addEventListener("renderercontextlost",this.MGt),t.addEventListener("renderercontextrestored",this.vGt)}}YH(){this.TGt()}IGt(){this._Gt()}zO(){return this.zst}Oit(){return!1}Dit(){if(!this.Oit())throw new Error("original size not known");const t=this.CGt();if(t)return t.Pm()}Lit(){if(!this.Oit())throw new Error("original size not known");const t=this.CGt();if(t)return t.jm()}CGt(){return null}RGt(){const t=this.CGt();if(t){const s=t.yx();if(s)return[s.Pm(),s.jm()]}return[100,100]}AGt(){const t=this.CGt();return t?t.rR():null}PGt(){const t=this.CGt();return t?t.EGt():null}FGt(){const t=this.CGt();return!!t&&t.DGt()}xMt(t){const s=this.Ci.zO();return[s.jM(),s.HM(),s.MN()]}Uxt(t,s,i){}OGt(t,s){}fq(){return!0}}}{const oa=self.Ws,aa=oa.Sr(oa.Rect);oa.kGt=class extends oa.bGt{constructor(t,s){super(t,s),this.LGt=this.XL().Nxt(this),this.BGt=!0,this.NGt=!1,this.WGt=!1,this.jGt=-.2,this.VGt=oa.Sr(oa.Rect,0,0,-1,-1);const i=this.bf.eL();this.UGt=i.ej(),this.HGt=i.hj(),this.zGt=-1,this.JGt=-1,this.qGt=!1,this.cGt()}wr(){this.XL().Wxt(this.LGt),this.XGt("destroy"),this.LGt=-1,super.wr()}k6(){if(this.bf.pD())throw new Error("not valid in worker mode");return this.YGt("get-element")}XGt(t,s){(s=s||{}).elementId=this.LGt,this.hGt(t,s)}YGt(t,s){return(s=s||{}).elementId=this.LGt,this.nGt(t,s)}$Gt(t,s){return(s=s||{}).elementId=this.LGt,this.rGt(t,s)}KGt(t){t=t||{};const s=this.zO();t.elementId=this.LGt,t.isVisible=s.lB(),t.htmlIndex=s.JO().uj(),t.htmlZIndex=s.cj(),Object.assign(t,this.ZGt()),this.BGt=!!t.isVisible,this.nGt("create",t),this.QGt(!0)}Rvt(t){this.BGt!==(t=!!t)&&(this.BGt=t,this.XGt("set-visible",{isVisible:t}))}KK(){this.QGt(!1)}tTt(){const t=this.bf.eL().yj();return"Android"===oa.di.mi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}QGt(u){if(!this.c8().Sj()){let t=this.zO(),s=t.JO(),i=t.xN(),[e,h]=s.HB(i.Pl(),i.El()),[r,n]=s.HB(i.Fl(),i.Dl()),o=this.bf.eL(),a=o.oL(),l=o.lL();if(t.lB()&&s.lB())if(!this.tTt()&&(r<=0||n<=0||a<=e||l<=h))this.Rvt(!1);else{aa.set(e,h,r,n);const c=o.ej(),f=o.hj(),d=s.uj(),p=t.cj();if(!u&&aa.equals(this.VGt)&&this.UGt===c&&this.HGt===f&&this.zGt===d&&this.JGt===p)this.Rvt(!0);else{this.VGt.I(aa),this.UGt=c,this.HGt=f,this.zGt=d,this.JGt=p,this.Rvt(!0);let t=null;this.WGt&&(t=s.wj()+this.jGt),this.XGt("update-position",{left:Math.round(this.VGt.Pl()),top:Math.round(this.VGt.El()),width:Math.round(this.VGt.width()),height:Math.round(this.VGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.Rvt(!1)}}B6(){this.YGt("focus",{focus:!0})}N6(){this.YGt("focus",{focus:!1})}Lxt(){this.NGt=!0}Bxt(){this.NGt=!1}Dvt(){return this.NGt}j6(t,s){this.XGt("set-css-style",{prop:oa.Jo(t),val:s})}Avt(t,s){this.XGt("set-attribute",{name:t,val:s})}Pvt(t){this.XGt("remove-attribute",{name:t})}sTt(){this.qGt||(this.qGt=!0,Promise.resolve().then(()=>{this.qGt=!1,this.XGt("update-state",this.ZGt())}))}ZGt(){}iTt(){return this.LGt}}}{const la=self.Ws,ua=self.Z6;la.eTt=class extends la.dr{constructor(t){super(),this.bf=t.runtime,this.hTt=la.Sr(la.wc),this.rTt=la.Sr(la.wc),this.gxt=t.yxt,this.xxt=t.Gxt,this.nTt=null}wr(){this.rTt.wr(),this.hTt.wr(),this.bf=null}pk(){return this.bf}_xt(){}fbt(){return this.gxt}Ixt(t=!1){let s=this.xxt;return t&&"function"!=typeof s&&2<=this.fbt()?globalThis.Cj:s}oTt(t){this.hTt.Gc(t)}xK(){return this.hTt.Tc()}$z(t){this.rTt.Gc(t)}Qz(t){this.rTt.fc(t)}r5(){return this.rTt.Tc()}Rxt(){const t=this.fbt(),s=(la.bL.Axt(this,t),this.Ixt(!0));if(s){if(this.nTt=new s,!(this.nTt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.nTt=new ua;la.bL.Pxt(t)}U6(){return this.nTt}}}{const ca=self.Ws;ca.aTt=class extends ca.dr{constructor(t){super(),this.bf=t.pk(),this.$St=t,this.xft=t.QB(),this.lTt=t.H6(),this.lTt.oTt(this.xft)}wr(){this.bf=null,this.$St=null,this.xft=null,this.lTt=null}_xt(){}q6(){return this.$St}QB(){return this.xft}pk(){return this.bf}H6(){return this.lTt}}}{const fa=self.Ws;fa.uTt=class extends fa.dr{constructor(t,s){super(),this.cTt=t,this.Fxt=s,this.Ci=t.Y6(),this.bf=t.pk(),this.$St=t.q6(),this.Xxt=this.$St.aMt(),this.Y4=!1,this.Z4=!1,this.Wj=!1,this.P0=null}wr(){this.Yxt(),this.$xt(),this.fTt(),this.P0&&(this.P0.wr(),this.P0=null),this.cTt=null,this.Ci=null,this.bf=null,this.$St=null,this.Xxt=null}H6(){return this.$St.H6()}dTt(){return this.cTt}Y6(){return this.Ci}QB(){return this.Ci.QB()}zO(){return this.Ci.zO()}pk(){return this.bf}q6(){return this.$St}aMt(){return this.Xxt}Kxt(){return this.cTt.Kxt()}N4(t){return this.bf.N4(t,this.Ci,this.$St)}Zxt(t){return this.bf.Zxt(t,this.Ci,this.$St)}j4(t){return this.bf.j4(t,this.Ci,this.$St)}pTt(){}KK(){}uGt(){}mTt(){}cGt(){this.Y4||(this.bf.Dj(this),this.Y4=!0)}Yxt(){this.Y4&&(this.bf.Oj(this),this.Y4=!1)}fGt(){return this.Y4}dGt(){this.Z4||(this.bf.kj(this),this.Z4=!0)}$xt(){this.Z4&&(this.bf.Lj(this),this.Z4=!1)}pGt(){return this.Z4}gTt(){this.Wj||(this.bf.Bj(this),this.Wj=!0)}fTt(){this.Wj&&(this.bf.Nj(this),this.Wj=!1)}yTt(){return this.Wj}mGt(){return[]}iGt(t,s){this.bf.U4(this.Fxt,t,s)}STt(t,s){}tv(){return null}sv(t){}Krt(t){}ent(t,s){}Knt(t,s){if(0!==s){const i=this.Krt(t);if("number"!=typeof i)throw new Error("expected number");this.ent(t,i+s)}}gGt(t,s,i,e){}yGt(t,...s){t.call(this,...s)}SGt(t,...s){return t.call(this,...s)}Ixt(){return null}Hxt(t,s,i){if(this.cTt.wGt()){const e=this.Kxt(),h=fa.Sr(fa.Event,t,s);h.wTt=e,h.X6=e.X6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Ws),i=(r._Y={},r.rlt={},r.Vs()),e=[],h=[],n=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.bL=class extends r.dr{constructor(t,s){super(),this.bf=t,this.bTt=[],this.ASt=null,this.MTt=[],this.vTt=new Map,this.xTt=null,this.GTt=null,this.TTt=new Set(s)}_Tt(t){const s=t[19],i=this.bf.Dyt(t[0]);if(!i)throw new Error("missing plugin");r.p2t(t,i,s);const e=2<=s?r.ixt:i,h=r.Sr(e,{runtime:this.bf,vL:t[1],nxt:t[2],CL:t[5],AL:t[8],lxt:t[9],fxt:t[13],kL:t[14],_L:t[17],EL:t[18],yxt:s,Gxt:2<=s?i:null});h._xt(),this.bTt.push(h),u.set(i,h)}ITt(){this.ASt=r.Sr(r._Y.TY,{runtime:this.bf,vL:!0}),this.ASt._xt()}CTt(t){const i=t[1],e=this.bf.Dyt(t[0]);if(!e)throw new Error("missing behavior");this.vTt.set(e,()=>{const t=2<=i?r.eTt:e,s=r.Sr(t,{runtime:this.bf,yxt:i,Gxt:2<=i?e:null});s._xt(),this.MTt.push(s),c.set(e,s),!this.xTt&&r.rlt.RTt&&s instanceof r.rlt.RTt?this.xTt=s:!this.GTt&&r.rlt.ATt&&s instanceof r.rlt.ATt&&(this.GTt=s),s.Rxt()})}PTt(t){const s=this.vTt.get(t);s&&(s(),this.vTt.delete(t))}static Axt(t,s=1){if(r.bL.Axt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Pxt(t=1){if(r.bL.Pxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static e4(){if(r.bL.e4!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static wL(t){if(r.bL.wL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static ETt(t){n.push(t)}static FTt(){n.pop()}static L4(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}DTt(){for(const t of this.bTt)t.Rxt()}static NL(t){return u.get(t)||null}static Q6(t){return c.get(t)||null}PSt(){return this.ASt}OTt(){return this.xTt}kTt(){return this.GTt}eN(t){return this.TTt.has(t)}},o=r.bL.Axt,a=r.bL.Pxt,t=r.bL.e4,l=r.bL.wL}{const da=self.Ws,pa=new Set;da.LTt=class extends da.dr{constructor(){super(),this.BTt=0,this.BH="",this.NH=0,this.NTt=0,this.WTt=0,this.pg=0,this.mg=0,this.jTt=!1,this.VTt=!1,this.UTt=null,this.HTt="",this.qI=da.Sr(da.Rect),this.zTt=da.Sr(da.ou),this.JTt="",this.qTt=new self.fk(this),pa.add(this)}wr(){this.$I(),this.UTt&&0===this.UTt.ZH()&&this.UTt.wr(),this.UTt=null,pa.delete(this),this.XTt()}static YH(){for(const t of pa)t.HTt="",t.qI.set(0,0,0,0),t.zTt.Cu(t.qI)}YTt(t){this.BH=t[0],this.NH=t[1],this.NTt=t[2],this.WTt=t[3],this.pg=t[4],this.mg=t[5],this.jTt=t[6],this.VTt=!0}$Tt(t,s){if(this.UTt)throw new Error("already loaded asset");this.BH=s;const i={};return da.Go(s)&&(i.mH="remote"),this.dk(t,i),this.UTt.SH()}KTt(t,s){if(this.UTt)throw new Error("already loaded asset");this.BH="",this.NH=s.size,this.UTt=da.Sr(da.gH,t.eD(),{blob:s,size:this.NH,mH:"local"})}ZTt(t){if(t===this)throw new Error("cannot replace with self");this.BTt++,this.$I(),this.BH=t.BH,this.NH=t.NH,this.NTt=t.NTt,this.WTt=t.WTt,this.pg=t.pg,this.mg=t.mg,this.jTt=t.jTt,this.VTt=t.VTt,this.UTt=t.UTt,this.HTt=t.HTt,this.qI=t.qI,this.zTt=t.zTt,this.XTt()}yH(){return this.BH}yc(){return this.NH}QTt(){return this.NTt}t_t(){return this.WTt}DGt(){return this.jTt}Pm(){return this.pg}jm(){return this.mg}s_t(){return this.UTt.Pm()}i_t(){return this.UTt.jm()}dk(t,s){if(this.UTt)throw new Error("already got asset");s=Object.assign({},s,{url:this.yH(),size:this.yc()}),this.UTt=t.pH(s)}UH(){return this.UTt&&this.UTt.UH()}async $V(t,s){if(!this.UTt)throw new Error("no asset");if(this.HTt)throw new Error("already loaded texture");const i=this.BTt,e=(this.HTt="loading",await this.UTt.$V(t,s));if(this.BTt!==i)return null;if(!e)return this.HTt="",null;this.HTt="loaded",this.VTt||(this.pg=e.Pm(),this.mg=e.jm(),this.VTt=!0);const h=this.jTt?this.mg:this.pg,r=this.jTt?this.pg:this.mg;return this.qI.set(this.NTt,this.WTt,this.NTt+h,this.WTt+r),this.qI.Ct(e.Pm(),e.jm()),this.zTt.Cu(this.qI),this.jTt&&this.zTt.Du(),e}$I(){this.HTt&&(this.UTt&&this.UTt.$I(),this.HTt="",this.qI.set(0,0,0,0),this.zTt.Cu(this.qI))}yx(){return this.UTt&&"loaded"===this.HTt?this.UTt.yx():null}rR(){return this.qI}EGt(){return this.zTt}E8(){return this.qTt}e_t(){return this.UTt}async h_t(t){t=t||await this.UTt.QH();const s=da.Lo(this.pg,this.mg),i=s.getContext("2d");return this.jTt?(i.rotate(Math.PI/-2),i.translate(-this.mg,0),i.drawImage(t,this.NTt,this.WTt,this.mg,this.pg,0,0,this.mg,this.pg)):i.drawImage(t,this.NTt,this.WTt,this.pg,this.mg,0,0,this.pg,this.mg),s}async r_t(t){if(!this.JTt){const s=await this.h_t(t),i=await da.Bo(s);this.JTt=URL.createObjectURL(i)}return this.JTt}XTt(){this.JTt&&(URL.revokeObjectURL(this.JTt),this.JTt="")}}}{const ma=self.Ws;ma.n_t=class extends ma.dr{constructor(t){super(),this.vr=t[0],this.o_t=t[1],this.jwt=!!t[2],this.Iot=t[3],this.a_t=t[4],this.l_t=!!t[5],this.O7=t[6],this.u_t=t[7].map(t=>ma.Sr(ma.c_t,t)),this.f_t=new self.rW(this)}static d_t(t,s){const i=ma.Sr(ma.n_t,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.u_t.push(ma.c_t.d_t(t)),i}wr(){for(const t of this.u_t)t.wr();ma.Hn(this.u_t)}p_t(t){for(const s of this.u_t)s.MW().dk(t)}m_t(s,i){return Promise.all(this.u_t.map(t=>t.MW().$V(s,i)))}g_t(){for(const t of this.u_t)t.MW().$I()}cf(){return this.vr}yJ(){return this.O7}dW(){return this.u_t.length}mW(){return this.u_t}y_t(t){if((t=Math.floor(t))<0||t>=this.u_t.length)throw new RangeError("invalid frame");return this.u_t[t]}S_t(t,s){(s=Math.floor(s))<0?this.u_t.unshift(t):s>=this.u_t.length?this.u_t.push(t):this.u_t.splice(s,0,t)}w_t(t){if((t=Math.floor(t))<0||t>=this.u_t.length)throw new RangeError("invalid frame");this.u_t[t].wr(),this.u_t.splice(t,1)}b_t(i){for(let t=0,s=this.u_t.length;t<s;++t)if(ma.Gh(this.u_t[t].jW(),i))return t;return-1}M_t(t){if("string"!=typeof t)return t;{const s=this.b_t(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}nW(){return this.o_t}oW(){return this.jwt}aW(){return this.Iot}uW(){return this.a_t}fW(){return this.l_t}v_t(){return this.f_t}}}{const ga=self.Ws,ya=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ga.c_t=class extends ga.dr{constructor(t){super(),this.x_t=ga.Sr(ga.LTt),this.x_t.YTt(t),this.G_t=t[7],this.T_t=ga.Sr(ga.ol,t[8],t[9]),this.__t=t[10].map(t=>ga.Sr(ga.I_t,this,t)),this.C_t=new Map;for(const i of this.__t)this.C_t.set(i.cf().toLowerCase(),i);this.R_t=null;const s=t[11];6<=s.length&&(this.R_t=ga.Sr(ga.ju,s)),this.My=t[12]||"",this.A_t=new self.bW(this)}static d_t(t){const s=ga.Sr(ga.c_t,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.x_t.KTt(t,ya),s}wr(){this.R_t&&(this.R_t.wr(),this.R_t=null),this.x_t.wr(),this.x_t=null}MW(){return this.x_t}vW(){return this.G_t}GW(){return this.T_t.fl()}_W(){return this.T_t.pl()}LW(){return this.R_t}OW(t){return this.C_t.get(t.toLowerCase())||null}DW(t){return(t=Math.floor(t))<0||t>=this.__t.length?null:this.__t[t]}AW(){return this.__t.length}jW(){return this.My}gW(){return this.A_t}}}{const Sa=self.Ws;Sa.I_t=class extends Sa.dr{constructor(t,s){super(),this.P_t=t,this.vr=s[0],this.E_t=Sa.Sr(Sa.ol,s[1],s[2])}wr(){}cf(){return this.vr}jM(){return this.E_t.fl()}HM(){return this.E_t.pl()}F_t(){return this.E_t}}}{const g=self.Ws,wa=self.C3Debugger,ba=self.JL;g.Ylt=class extends g.dr{constructor(s,t,i){super();const e=s.Dyt(i[1]),[h,r]=(this.bf=s,this.Vxt=g.bL.NL(e),this.Xxt=null,this.D_t=e.Instance,this.by=t,this.O7=i[11],this.vr=i[0],this.ySt=this.bf.Zdt(i[14]),this.O_t=!!i[9],this.k_t=!!i[2],this.L_t=!!i[10],this.B_t=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],N_t:s.Zdt(t[3])})),this.W_t=i[4],this.j_t=i[5],this.rxt=this.Vxt.TL(),this.V_t=g.Sr(g.Event.Qf),this.wz=null,s.nD().Uk());if(this.U_t=g.Sr(g.H_t,h,r),this.z_t=!0,this.J_t=null,this.q_t=null,this.X_t=-1,this.Y_t=null,this.$_t=null,this.K_t=null,this.Z_t=null,this.Q_t=null,this.tIt=!1,this.sIt=null,this.iIt=i[8].map(t=>g.eIt.Bx(this,t)),this.hIt=[],this.rIt=new Map,this.nIt=new Map,this.oIt=new Set,this.aIt=new Map,this.lIt=g.Sr(g.vft,this),this.uIt=null,this.cIt=0,this.fIt=!1,this.sIt=null,this.x_t=null,this.dIt=null,this.pIt=null,this.mIt=null,this.gIt=0,this.Jwt=new Map,this.qwt=new Map,this.e7=[],this.yIt=new Map,this.SIt=!0,this.Vxt.PL()&&(this.wz=g.Sr(g.bz,this,i[12])),i[6]&&(this.x_t=g.Sr(g.LTt),this.x_t.YTt(i[6])),i[7]){this.dIt=i[7].map(t=>g.Sr(g.n_t,t)),this.pIt=new Map,this.mIt=new Map;for(const a of this.dIt)this.pIt.set(a.cf().toLowerCase(),a),this.mIt.set(a.yJ(),a)}this.k_t?(this.J_t=[],this.q_t=new Set,this.X_t=this.bf.wIt()):(this.Y_t=[],this.$_t=new Set,this.K_t=[],this.Z_t=[],this.Q_t=[]);const n=this.Vxt.fbt();if(n<2&&(this.Xxt=g.Sr(e.bIt,this,i[15]),!(this.Xxt instanceof g.jxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.MIt=null,this.vIt=null,this.wX=g.Sr(g.Event.Qf),g.bL.Axt(this,n);let o;if(o=2<=n?(o=e.bIt)||globalThis.C8:this.Xxt.Ixt()){if(this.MIt=new o(n<2?this:null),n<2&&!(this.MIt instanceof ba))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.MIt instanceof globalThis.C8))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.MIt=new ba;if(g.bL.Pxt(n),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.Xxt.Uxt(u,c,f)}}this.bf.xIt()&&!this.k_t&&!this.L_t&&this.rxt||this._xt(),this.Vxt.xL()&&(this.Vxt.Cxt(this),this.GIt(i)),this.TIt=null}static Bx(t,s,i){return g.Sr(g.Ylt,t,s,i)}wr(){if(this.V_t.wr(),this.V_t=null,this.x_t&&(this.x_t.wr(),this.x_t=null),this.dIt){for(const t of this.dIt)t.wr();g.Hn(this.dIt),this.pIt.clear(),this.mIt.clear()}this.TIt=null,this.lIt.wr(),this.lIt=null,this.Jwt.clear(),this.qwt.clear(),this.sIt=null,this.bf=null}_It(i){for(let t=1,s=i.length;t<s;++t){const e=this.bf.Bz(i[t]);this.J_t.push(e),this.q_t.add(e),e.Y_t.push(this),e.$_t.add(this)}}IIt(t){this.tIt=!0,this.sIt=t}u4(){return this.tIt}HX(){return this.sIt}CIt(){let t=0;if(!this.k_t)for(const s of this.Y_t)for(const i of s.RIt()){const e=i.cf().toLowerCase();this.rIt.set(e,i),this.nIt.set(e,t),this.hIt.push(i),++t}for(const h of this.RIt()){const r=h.cf().toLowerCase();this.rIt.set(r,h),this.nIt.set(r,t),this.hIt.push(h),++t}for(const n of this.hIt)this.oIt.add(n.H6().constructor);if(!this.k_t&&this.Y_t.length){let t=this.bf.AIt(),s=(g.Jn(this.K_t,t,0),g.Jn(this.Z_t,t,0),g.Jn(this.Q_t,t,0),[]),i=0,e=0,h=0;for(const o of this.Y_t){const a=o.XSt(),l=(this.K_t[a]=i,i+=o.PIt(),this.Z_t[a]=e,e+=o.EIt(),this.Q_t[a]=h,h+=o.FIt(),o.S5());if(l&&this.wz)for(const u of l.w5())s.push(u.DIt(this.wz))}this.wz&&this.wz.OIt(s)}}GIt(t){const s=this.bf.kIt(),i=g.Sr(g.Instance,{runtime:this.bf,ZB:this,uid:s});i.LIt(t[16],[]),this.bf.BIt(s,i),this.e7.push(i)}aMt(){return this.Xxt}NIt(){return this.L_t}Qf(){return this.V_t}_xt(){this.k_t||(this.Xxt?this.Xxt._xt():this.MIt.A8())}WIt(){return 0<this.gIt}async qX(t){this.k_t||(this.gIt++,1===this.gIt&&(this.Xxt?await this.Xxt.qX(t):await this.MIt.F8(this.bf.eL().jIt())))}QX(){if(!this.k_t){if(this.gIt--,this.gIt<0)throw new Error("released textures too many times");0===this.gIt&&(this.Xxt?this.Xxt.QX():this.MIt.D8(this.bf.eL().jIt()))}}$X(){if(this.k_t)throw new Error("not applicable to family");this.Xxt?this.Xxt.$X():this.MIt.O8()}async bY(t){this.k_t||(this.Xxt?await this.Xxt.bY(t):await this.MIt.k8(this.bf.eL().jIt()))}pk(){return this.bf}XL(){return this.Vxt}VIt(){return this.D_t}cf(){return this.vr}Zdt(){return this.ySt}QF(){return this.by}yJ(){return this.O7}lJ(){return this.k_t}Yz(){return this.O_t}TL(){return this.rxt}XSt(){return this.X_t}RIt(){return this.iIt}EIt(){return this.W_t}UIt(t){return t&&this.oIt.has(t)}PIt(){return this.B_t.length}HIt(){return this.B_t.map(t=>t.sid)}zIt(s){return this.B_t.findIndex(t=>t.sid===s)}Sit(s){return this.B_t.findIndex(t=>t.name===s)}JIt(){return this.B_t.map(t=>t.name)}qIt(){return this.B_t.map(t=>t.N_t)}bit(t){if((t=Math.floor(t))<0||t>=this.B_t.length)throw new RangeError("invalid instance variable index");return this.B_t[t].type}wit(t){if((t=Math.floor(t))<0||t>=this.B_t.length)throw new RangeError("invalid instance variable index");return this.B_t[t].name}FIt(){return this.j_t}XIt(){return this.hIt}zht(t){return this.rIt.get(t.toLowerCase())||null}vit(t){const s=this.nIt.get(t.toLowerCase());return void 0===s?-1:s}S5(){return this.wz}PL(){return this.Vxt.PL()}YIt(){return this.wz&&this.wz.$It()}j1t(){return this.lIt}n5(){return this.lIt.n5()}MW(){return this.x_t}jz(t){this.uIt=t}Wz(){return this.uIt}Vz(t){this.cIt=t}KIt(){return this.cIt}ZIt(){return this.dIt}QIt(){return this.dIt.length}r1t(){return this.Y_t}dMt(t){return this.$_t.has(t)}ygt(){return this.J_t}uJ(t){return this.q_t.has(t)}QSt(t){return this.Z_t[t]}qSt(t){return this.K_t[t]}sSt(t){this.aIt.set(t.nSt().toLowerCase(),t)}iSt(t){return!!this.fSt(t)}fSt(t){const s=this.aIt.get(t.toLowerCase());return s&&s.nc()?s:null}tCt(){return this.dIt}sCt(t){if(this.dIt)return this.pIt.get(t.toLowerCase())||null;throw new Error("no animations")}iCt(t){if(this.dIt)return this.mIt.get(t)||null;throw new Error("no animations")}eCt(t){if(this.sCt(t))throw new Error(`animation name '${t}' already exists`);const s=g.n_t.d_t(this.pk(),t);return this.dIt.push(s),this.pIt.set(s.cf().toLowerCase(),s),this.mIt.set(s.yJ(),s),s}hCt(t){const s=this.sCt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.dIt.length)throw new Error("cannot remove last animation");const i=this.dIt.indexOf(s);this.dIt.splice(i,1),this.pIt.delete(s.cf().toLowerCase()),this.mIt.delete(s.yJ()),s.wr()}rCt(){if(this.dIt)return this.dIt[0];throw new Error("no animations")}nCt(){return this.rCt().y_t(0)}oCt(){if(this.dIt){const t=this.nCt().MW();return[t.Pm(),t.jm()]}return this.x_t?[this.x_t.Pm(),this.x_t.jm()]:[100,100]}zL(){if(this.Vxt.xL())return this.e7[0];throw new Error("not a single-global plugin")}r5(){return this.e7}*instances(){yield*this.e7}*h5(){yield*this.e7,yield*this.bf.gvt(this)}a5(){return this.e7.length}$z(t){this.e7.push(t)}aCt(){this.SIt=!0}EY(){if(this.SIt&&!this.k_t){let s=this.e7,i=0;for(let t=s.length;i<t;++i)s[i].lCt(i);const t=this.bf.uCt();for(const e of t)e.QB()===this&&e.lCt(i++);this.SIt=!1}}cCt(t){const s=this.e7;if(t<s.length)return s[t];t-=s.length;const i=this.bf.uCt();for(const e of i)if(e.QB()===this){if(0===t)return e;--t}return null}tvt(t){if(t&&t.u4()&&t.QB()!==this)for(const i of t.c4())if(i.QB()===this)return i;const s=this.n5().r5();return s.length?s[0]:null}e5(t){const s=this.n5().r5();return 0<s.length?s[t.RY()%s.length]:null}*vvt(t,s){let i=this.n5().r5(),e=i.length,h=s.n5(),r=s.n5().r5(),n=r.length,o=t.RY(),a=(!s.lJ()&&h.Oft()||(o=r.indexOf(t)),Math.ceil(e/n)),l=e%n,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}Gbt(t){this.Xxt?.Gbt(t)}Tyt(){if(this.tIt&&!this.k_t){this.EY();const t=this.n5(),s=t.Uft(),i=t.Oft(),e=this.bf.Vdt(),h=e&&e.kD()&&e.kD().Zft();for(const r of this.sIt.AY())if(r!==this){r.EY();const n=r.n5();if(n.Vft(i),!i){const o=n.Uft();g.Hn(o);for(const a of s)o.push(r.cCt(a.RY()));if(h){const l=t.Hft(),u=n.Hft();g.Hn(u);for(const c of l)u.push(r.cCt(c.RY()))}}}}}Rbt(t,s){for(const i of this.HX().AY()){const e=i.n5();t?g.Un(e.Hft(),s):g.Un(e.Uft(),s)}}fCt(){return this.U_t}dCt(t){this.z_t=!!t}pCt(){if(this.z_t&&this.rxt){for(const t of this.e7)t.zO().mCt();for(const s of this.bf.uCt())s.QB()===this&&s.zO().mCt();this.z_t=!1}}gCt(s,t,i){if(t){const e=this.yIt.get(t);e&&(e.delete(s),0===e.size)&&this.yIt.delete(t)}if(i){let t=this.yIt.get(i);t||(t=new Set,this.yIt.set(i,t)),t.add(s)}}yCt(){if(this.lJ()){const t=new Set;for(const s of this.J_t)for(const i of s.yCt())t.add(i);return t.values()}return this.yIt.keys()}Sbt(){return this.Jwt||(this.Jwt=new Map),this.Jwt}wbt(){return this.qwt||(this.qwt=new Map),this.qwt}SCt(){return this.UIt(g.rlt.RTt)}wCt(){return this.UIt(g.rlt.ATt)}bCt(){return this.UIt(g.rlt.NoSave)}qz(){return this.UIt(g.rlt.Persist)}Oq(){const t={instances:this.e7.map(t=>t.tv())};return this.Jwt&&this.Jwt.size&&(t.ex=g.Ho(this.Jwt)),t}kq(t,e){this.Jwt&&(this.Jwt.clear(),this.Jwt=null);const s=t.ex,h=(s&&(this.Jwt=g.zo(s)),this.e7),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].sv(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.bf.r4(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.TL()||(s=this.bf.xO().DX(t.w.l))){const n=this.bf.Xz(this.uIt||this,s,!1,0,0,!0);n.sv(t),e&&e.add(n)}}this.TIt=r,this.aCt()}MCt(){return this.TIt}vCt(){this.TIt=null}xCt(){for(let t=0,s=this.e7;t<s;++t)this.e7[t].xCt()}VL(){return this.MIt}_D(){return this.wX}GCt(){return this.vIt}l5(t){this.vIt=t}i$(t){const s=this.bf,i=s.e$()&&!s.AD().p5();i&&wa.StartMeasuringScriptTime(),this.wX.dispatchEvent(t),i&&wa.AddScriptTime()}}}{const Ma=self.Ws;Ma.TCt=class extends Ma.dr{constructor(t,s){super(),this.bf=t,this._Ct=s;for(const i of this._Ct)i.IIt(this)}wr(){this.bf=null}pk(){return this.bf}UX(){return this._Ct}AY(){return this._Ct}DY(){return this._Ct.some(t=>t.TL())}}}{let w=self.Ws,h=self.C3Debugger,n=w.bL,o=[],a=0,b=new WeakMap,e=new WeakMap;w.Instance=class extends w.dr{constructor(t){if(w.bL!==n)throw new Error("invalid addon manager");super(),this.bf=t.runtime,this.ICt=t.ZB,this.zst=null,this.CCt=null,this.RCt=null,this.ACt=0,this.PCt=t.uid,this.ECt=a++,this.Fbt=0,this.FCt=null;const s=w.lo(t.tags),i=(0<s.length&&(this.FCt=new Set(s)),this.DCt=o,this.OCt=o,this.ICt.XIt()),e=(0<i.length&&(this.OCt=i.map((t,s)=>w.Sr(w.kCt,{runtime:this.bf,z6:t,X6:this,index:s}))),this.LCt=this.ICt.u4()?[]:null,this.BCt=-1,this.V_t=null,this.XL());if(e.mM()&&(this.Fbt|=4),e.TL())if(this.zst=w.Sr(w.NCt,this,t.pN),t.WCt)this.zst.jCt(t.WCt);else{this.zst.VCt();const[h,r]=this.ICt.oCt();this.zst.CC(h,r),this.QB().YIt()&&this.zst.dN().UCt()}t.HCt?this.zCt(t.HCt):this.JCt()}wr(){if(this.RCt&&(this.RCt.h4(),this.RCt=null),0<this.OCt.length){for(const i of this.OCt)i.wr();w.Hn(this.OCt)}this.CCt&&(this.CCt.wr(),this.CCt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.LCt&&w.Hn(this.LCt),this.V_t&&(this.V_t.wr(),this.V_t=null),this.FCt&&this.FCt.clear(),this.FCt=null,this.bf=null,this.ICt=null,0<this.DCt.length&&w.Hn(this.DCt),this.zst&&(this.zst.wr(),this.zst=null)}zCt(t){0<t.length&&(this.DCt=[],w.Xn(this.DCt,t))}JCt(){const s=this.ICt.PIt();if(0!==s){this.DCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.DCt.push(i[this.ICt.bit(t)])}}LIt(t,i){if(this.CCt)throw new Error("already got sdk instance");for(let t=0,s=this.OCt.length;t<s;++t){const e=this.OCt[t];e.LIt(i?i[t]:null)}const s=this.XL().fbt();if(s<2){if(this.CCt=w.Sr(this.ICt.VIt(),this,t),!(this.CCt instanceof w.Jxt))throw new Error("sdk type must derive from SDKInstanceBase");!this.XL().TL()&&this.ICt.GCt()&&this.jO()}else{const h=this.XL().Ixt();this.qCt(h.Instance,t)}}L6(){return this.CCt??this.RCt}zO(){return this.zst}pk(){return this.bf}hO(){return this.BCt}g4(){const t=this.BCt;return-1===t?this.pk().hO():t}rO(t){((t=+t)<0||!isFinite(t))&&(t=0),this.BCt=t,this.QB().YIt()&&this.bf.XCt(this,!0)}S4(){this.BCt=-1,this.QB().YIt()&&this.bf.XCt(this,!1)}Gq(){return this.bf.YCt(this)}Qf(){return this.V_t||(this.V_t=w.Sr(w.Event.Qf)),this.V_t}Fv(t){this.CCt?this.CCt.Fv(t):this.RCt.U8(this.bf.eL().jIt())}_xt(t){this.CCt._xt(t)}$Ct(){this.Fbt|=2}KCt(){return 0!=(2&this.Fbt)}ZCt(){this.Fbt|=1}Sj(){return 0!=(1&this.Fbt)}mM(){return 0!=(4&this.Fbt)||this.CCt.mM()}QCt(){this.Fbt|=32}mq(){return 0!=(32&this.Fbt)}tRt(){return 0!=(8&this.Fbt)}sRt(t){t?this.Fbt|=8:this.Fbt&=-9}iRt(){return 0!=(16&this.Fbt)}eRt(t){t?this.Fbt|=16:this.Fbt&=-17}hRt(){return 0!=(64&this.Fbt)}rRt(t){t?this.Fbt|=64:this.Fbt&=-65}nRt(t,s){t<<=16,s?this.Fbt|=t:this.Fbt&=~t}oRt(t){return 0!=(this.Fbt&t<<16)}CGt(){return this.CCt.CGt()}RGt(){return this.CCt.RGt()}AGt(){return this.CCt.AGt()}PGt(){return this.CCt.PGt()}FGt(){return this.CCt.FGt()}xMt(t){return this.CCt.xMt(t)}QB(){return this.ICt}fq(){return this.CCt.fq()}yvt(t){return t.lJ()?t.uJ(this.QB()):this.QB()===t}aRt(h,t,s){const i=(t,s)=>{const i=s||t.QB(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.u4())for(const e of this.c4())i(e);if(s)for(const r of this.KN())i(r)}lRt(){if(!this.XL().OL())throw new Error("object does not support scene graph")}i6(){return null!==this.UN()}UN(){const t=this.zO();if(!t)return null;const s=t.UN();return s?s.c8():null}zN(){const t=this.zO();if(!t)return null;const s=t.zN();return s?s.c8():null}*JN(){const t=this.zO();if(t)for(const s of t.JN())yield s.c8()}uRt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}Nq(){const t=this.zO();return!!t&&t.Nq()}cRt(t){const s=this.zO();if(!s)return[];const i=t.cf();return s.VY().map(t=>t.c8()).filter(t=>t.QB().cf()===i)}VY(){const t=this.zO();return t?t.VY().map(t=>t.c8()):[]}*children(){const t=this.zO();if(t)for(const s of t.children())yield s.c8()}*KN(){const t=this.zO();if(t)for(const s of t.KN())yield s.c8()}XN(){const t=this.zO();return t?t.XN():0}fRt(){return[...this.JN()].length}Mvt(){const t=this.zO();return t?t.Mvt():0}$N(t){const s=this.zO();if(!s)return null;const i=s.$N(t);return i?i.c8():null}dRt(){const t=this.zO();if(!t)return NaN;const s=t.UN();return s?s.pRt(t):NaN}mRt(t){for(const s of this.zO().VY())if(s.c8().f4()===t)return!0;return!1}QN(t,s){this.lRt(),t.lRt(),this.zO().QN(t.zO(),s||{})}t6(t){const s=this.zO();s&&s.t6(t.zO())}M6(){const t=this.zO();return!!t&&t.M6()}yY(){const t=this.zO();if(t){const s=t.gRt();if(s)for(const i of s){const e=this.bf.WO(i[2]);if(e){const h=i[3];this.QN(e,{h6:!!(h>>0&1),n6:!!(h>>1&1),a6:!!(h>>2&1),u6:!!(h>>3&1),f6:!!(h>>4&1),b6:!!(h>>5&1),p6:!!(h>>6&1),g6:!!(h>>7&1),S6:!!(h>>8&1)})}}}}SY(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.QN(h,{h6:!!(r>>0&1),n6:!!(r>>1&1),a6:!!(r>>2&1),u6:!!(r>>3&1),f6:!!(r>>4&1),b6:!!(r>>5&1),p6:!!(r>>6&1),g6:!!(r>>7&1),S6:!!(r>>8&1)})}}}m4(){const t=this.bf.yRt();return t?t.Klt(this):""}u4(){return null!==this.LCt}PY(t){this.LCt.push(t)}a4(){return this.LCt}SRt(t){return!!this.wRt(t)}wRt(t){const s=this.c4();if(null===s||0===s.length)return!1;for(const i of s)if(i.QB()===t)return i;return null}c4(){return this.LCt}Rmt(){for(const t of this.c4())t.QB().n5().zft(t)}Tbt(){for(const t of this.c4())t.QB().n5().Wft(t)}_bt(t){for(const s of this.c4())s.QB().n5().Uft()[t]=s}Cbt(){for(const t of this.c4())t.QB().n5().jft(t)}Ibt(t){for(const s of this.c4())s.QB().n5().Hft()[t]=s}XL(){return this.ICt.XL()}lCt(t){this.ACt=t}RY(){return this.ICt.EY(),this.ACt}f4(){return this.PCt}bRt(){return this.ECt}MRt(t){t?this.v4(new Set(t)):this.FCt=null}v4(t){if(0===t.size)this.FCt=null;else{this.FCt?this.FCt.clear():this.FCt=new Set;for(const s of t)this.FCt.add(s)}}b4(){return this.FCt??new Set}Hvt(){return Array.from(this.b4()).join(" ")}qvt(t){t=Math.floor(t);for(const s of this.b4()){if(0===t)return s;--t}return""}Hht(){return this.OCt}vRt(t){if(t)for(const s of this.OCt)if(s.H6()instanceof t)return s;return null}nlt(t){if(!t)return null;const s=this.vRt(t);return s?s.L6():null}Uht(i){const e=this.OCt;for(let t=0,s=e.length;t<s;++t)if(e[t].q6().yJ()===i)return t;return-1}xRt(){return this.DCt}JIt(){return this.ICt.JIt()}GRt(){return this.DCt.length}nnt(t){const s=this.DCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}zSt(t){return this.DCt[t]}TRt(t){const s=this.DCt[t];return 0===this.ICt.bit(t)?!!s:s}ont(t,s){const i=this.DCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.ICt.bit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Znt(t,s){if(0!==s){const i=this.DCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}Sbt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}wbt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}_Rt(t){const s=this.QB();if(s._D().h0(t))return!0;for(const i of s.r1t())if(i._D().h0(t))return!0;return!!this.bf._D().h0(t)}d5(){const t=new Set,s=(t.add(this),this.zO());if(s&&s.Nq())for(const i of this.KN())if(t.add(i),i.u4())for(const e of i.c4())t.add(e);if(this.u4())for(const h of this.c4())t.add(h);for(const r of t.values())r.wY()}IRt(){this.ICt.GCt()&&this.jO();for(const t of this.OCt)t.pTt()}CRt(){this.IRt()}wY(){if(this.IRt(),this._Rt("instancecreate")){const t=this.QB(),s=new w.Event("instancecreate");s.X6=this.jO(),t.i$(s);for(const i of t.r1t())i.i$(s);this.bf.i$(s)}this.bf.N4(this.XL().mpt().GY.$vt,this,null)}RRt(){this.bf.N4(this.XL().mpt().GY.Kvt,this,null)}ARt(t){if(this.RCt){const s=new w.Event("destroy");s.PRt=t,this.i$(s)}if(this._Rt("instancedestroy")){const i=this.QB(),e=new w.Event("instancedestroy");e.X6=this.jO(),e.PRt=t,i.i$(e);for(const h of i.r1t())h.i$(e);this.bf.i$(e)}}ERt(){return this.CCt?this.CCt.mGt():this.RCt.Q4()}tv(t="full",s=null){const i={},e=("full"===t?i.uid=this.f4():i.c3=!0,this.b4());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=w.Ho(r)),-1!==this.hO()&&(i.mts=this.hO()),0<this.ICt.PIt()){const n={},o=this.ICt.HIt();for(let t=0,s=this.DCt.length;t<s;++t)n[o[t].toString()]=this.DCt[t];i.ivs=n}if(this.OCt.length){const a={};for(const l of this.OCt){const u=l.tv(t);u&&(a[l.q6().yJ().toString()]=u)}i.behs=a}}this.zst&&(i.w=this.zst.Oq(t,s));const h=this.CCt?this.CCt.tv():this.RCt.tN();return h&&(i.data=h),i}Z$(t="full",s){this.zst&&this.zst.Z$(t)}tK(t,s="full",i=null){this.zst&&this.zst.tK(t,s,i)}FRt(t,s="full",i=null){this.zst&&this.zst.FRt(t,s,i)}xCt(){this.XL().TL()&&this.zst.xCt()}sv(s,t="full",i){if("full"===t)this.PCt=s.uid;else if(!s.c3)return;if(this.MRt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=w.zo(h),b.set(this,t)),this.BCt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),l=this.ICt.zIt(a);if(!(l<0||l>=this.DCt.length)){let t=o;null===t&&(t=NaN),this.DCt[l]=t}}}if(this.XL().TL()){const u=s.w;if(u){const c=u.l;if(this.zst.JO().yJ()!==c){const f=this.zst.JO(),d=f.IO().DX(c);d?(this.zst.$O(d),f.Qz(this,!0),d.$z(this,!0),d.KO(this),this.zst.mN()):"full"===t&&this.bf.r4(this)}this.zst.kq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),S=this.Uht(y);S<0||S>=this.OCt.length||this.OCt[S].sv(g,t)}}const e=s.data;e&&(this.CCt?this.CCt.sv(e,t):this.RCt.sN(e))}jO(){return this.RCt||this.qCt()}wGt(){return!!this.RCt}qCt(t,s){const i=this.zst?t?self.L8:self.E6:t?self._4:self.KB,e=t||this.CCt.Ixt(),h=this.ICt.GCt(),r=h||e||i,n=this.XL().fbt();if(w.bL.Axt(this,n),w.bL.ETt(s),this.RCt=new r,w.bL.FTt(),w.bL.Pxt(n),e&&!(this.RCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.RCt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.RCt}t4(t){if(0!==this.DCt.length){const i={},e=this.ICt.qIt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.TRt.bind(this,t),set:w.Instance.prototype.ont.bind(this,t)};const s=Object.create(Object.prototype,i);t.DRt={value:s,writable:!1}}}s4(t){const s=this.OCt;if(0!==s.length){const i={};for(const h of s)i[h.q6().Zdt()]={value:h.Kxt(),writable:!1};const e=Object.create(Object.prototype,i);t.mmt={value:e,writable:!1}}}i$(t){if(this.wGt()){const s=this.jO(),i=(t.X6=s,this.bf),e=i.e$()&&!i.AD().p5();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const va=self.Ws;va.HY=class extends va.dr{constructor(e){super(),this.uv=e,this.Omt=null,this.ORt=[],this.kRt=e.Pm(),this.LRt=e.jm(),this.BRt=1,this.NRt=1,this.WRt=0,this.jRt=1,this.VRt=e.hP(),this.URt=null,this.HRt=null,this.zRt=NaN,this.JRt=!1,this.Vq=NaN,this.Uq=NaN,this.qRt=t=>{if(t.X6===this.Omt.c8()){const s=e.pk(),i=(s.Qf().removeEventListener("instancecreate",this.qRt),this.Omt.c8().L6());this.JRt=!!i.Oit(),this.Vq=this.JRt?i.Dit():NaN,this.Uq=this.JRt?i.Lit():NaN}}}wr(){this.Omt=null,this.URt=null,this.HRt=null,this.zRt=NaN,this.JRt=!1,this.Vq=NaN,this.Uq=NaN,va.Hn(this.ORt)}XRt(t){if(this.jRt=this.uv.hP(),this.VRt=this.jRt,this.Omt=t,this.WRt=t?t.GetAngle():0,this.Omt){const s=this.uv,i=s.pk(),e=this.Omt.c8().XL().fbt();if(e<2){const h=this.Omt.c8().L6();h?(this.JRt=!!h.Oit(),this.Vq=this.JRt?h.Dit():NaN,this.Uq=this.JRt?h.Lit():NaN):this.Omt.c8().Sj()||i.Qf().addEventListener("instancecreate",this.qRt)}else this.JRt=!1,this.Vq=NaN,this.Uq=NaN}else this.JRt=!1,this.Vq=NaN,this.Uq=NaN}UN(){return this.Omt}Nq(){return 0<this.ORt.length}VY(){return this.ORt}YRt(){this.Nq()&&1!==this.ORt.length&&(this.HRt?this.ORt.sort((t,s)=>{const i=this.HRt.get(t.c8()),e=this.HRt.get(s.c8());return va.Se(i)&&va.Se(e)?i-e:0}):this.ORt.sort((t,s)=>{const i=t.ynt().$Rt(),e=s.ynt().$Rt();return va.Se(i)&&va.Se(e)?i-e:0}))}$Rt(){return this.zRt}Snt(){return this.BRt}KRt(t){this.BRt=t}bnt(){return this.NRt}ZRt(t){this.NRt=t}Cnt(){return this.VRt}zMt(){return this.jRt}QRt(t){this.jRt=t}gnt(){return 0===this.kRt?Number.EPSILON:this.kRt}wnt(){return 0===this.LRt?Number.EPSILON:this.LRt}tAt(){if(this.uv.l6()){let t=this.Omt,s=t.Pm(),i=t.ynt().gnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.JRt?1+s/this.Vq:s/i}return 1}sAt(){if(this.uv.c6()){let t=this.Omt,s=t.jm(),i=t.ynt().wnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.JRt?1+s/this.Uq:s/i}return 1}iAt(){return 0}eAt(){return{sw:this.kRt,sh:this.LRt,sx:this.BRt,sy:this.NRt,psa:this.WRt,oo:this.jRt,so:this.VRt,pi:this.uv.c8().dRt()}}Oq(t,s=null){const i=this.eAt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.hAt(t),c:this.rAt(t)})}nAt(t){let s="";return t.r6()&&(s+="x"),t.o6()&&(s+="y"),t.l6()&&(s+="w"),t.c6()&&(s+="h"),t.d6()&&(s+="a"),t.m6()&&(s+="z"),t.M6()&&(s+="d"),t.y6()&&(s+="o"),t.w6()&&(s+="v"),s}hAt(t){return this.Omt&&this.Omt.c8()&&!this.Omt.c8().Sj()?this.oAt(this.Omt,this.uv,t):null}rAt(s){return this.ORt.map(t=>this.oAt(t,t,s)).filter(t=>t)}oAt(t,s,i){const e=t.c8();if(e&&e.Sj())return null;const h={};return h.uid=e.f4(),h.f=this.nAt(s),h.offsets=s.aAt(),h.data=va.HY.lAt(e),h.oci=e.QB().QF(),"state"===i?(h.inst=e.tv("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.QB().r5().indexOf(e),h.inst=null),h}kq(t){this.kRt=t.sw,this.LRt=t.sh,this.BRt=t.sx,this.NRt=t.sy,this.WRt=t.psa,this.jRt=t.oo,this.VRt=t.so,this.zRt=va.Se(t.pi)?t.pi:NaN}uAt(t,s){if(!t&&!s&&this.URt)for(const i of this.URt)i.Sj()||i.i6()||i.pk().r4(i);this.URt=t,this.HRt=s}tK(t,s){const i=this.uv,e=i.pk(),h=new Set;if(t.p&&!this.Omt){const o=t.p.uid,a=e.WO(o);if(s?.n2t,a){const l=a.zO();if(a.uRt(i.c8()))this.Omt=l;else{a.mRt(i.c8().f4())?e.r4(i.c8()):a.QN(i.c8(),this.cAt(t.p.f)),h.has(i)||(i.fAt(t.p.offsets),this.dAt(a,t.p,s)),h.add(i);const u=a.zO();u.ynt().YRt()}}else if(va.Se(t.p.oci)){const c=e.Bz(t.p.oci),f=(e.PSt(),e.u5(c,i.JO(),0,0,!0));if(s?.n2t,f){const d=this.pAt(t.p,e),p=(d&&f.sv(d),f.zO()),m=(p.JO().c5(f),f.QN(i.c8(),this.cAt(t.p.f)),f.zO());m.ynt().YRt()}}}const r=[];for(const g of t.c){const y=g.uid,S=e.WO(y);S&&r.push(S)}let n=0;for(const w of t.c){const b=w.uid,M=e.WO(b);if(s?.n2t,M){if(this.URt){if(this.URt.includes(M)){const T=M;if(T.QB()!==M.QB()){n++;continue}if(T.Sj()){n++;continue}const _=t.c[n];if(!s?.n2t&&this.mAt(T,r,i)){this.gAt(n,_,i,h,s),n++;continue}if(T.i6()&&T.UN()!==i.c8()){const I=this.yAt(_,s);this.SAt(I,_,h,s),n++;continue}this.SAt(T.zO(),_,h,s,!0),n++;continue}if(this.URt[n]){const C=this.URt[n];if(C.QB()!==M.QB()){n++;continue}if(C.Sj()){n++;continue}const R=t.c[n];if(!s?.n2t&&this.mAt(C,r,i)){this.gAt(n,R,i,h,s),n++;continue}if(C.i6()&&C.UN()!==i.c8()){const A=this.yAt(R,s);this.SAt(A,R,h,s),n++;continue}this.SAt(C.zO(),R,h,s,!0),n++;continue}}const v=M.QB(),x=this.wAt(r,v),G=i.c8().cRt(v).length;if(x===G){const P=i.c8().$N(n);if(P){const E=P.zO();E&&(h.has(E)||(E.fAt(w.offsets),this.dAt(P,w,s)),h.add(E))}n++;continue}if(M.i6()&&M.UN()!==i.c8()){const F=this.yAt(w,s);this.SAt(F,w,h,s),n++;continue}this.SAt(M.zO(),w,h,s)}else if(this.URt&&this.URt[n]){const D=this.URt[n],k=e.Bz(this.bAt(w));if(D.QB()!==k){n++;continue}if(D.Sj()){n++;continue}const O=t.c[n];if(!s?.n2t&&this.mAt(D,r,i)){this.gAt(n,O,i,h,s),n++;continue}if(D.i6()&&D.UN()!==i.c8()){const L=this.yAt(O,s);this.SAt(L,O,h,s),n++;continue}this.SAt(D.zO(),O,h,s)}else{const B=this.yAt(w,s);this.SAt(B,w,h,s)}n++}}mAt(t,s,i){const e=t.QB(),h=this.wAt(s,e),r=i.c8().cRt(e).length;return h===r}gAt(t,s,i,e,h){const r=i.c8().$N(t,s);if(r){const n=r.zO();n&&(e.has(n)||(n.fAt(s.offsets),this.dAt(r,s,h)),e.add(n))}}cAt(t){const s={};return s.h6=t.includes("x"),s.n6=t.includes("y"),s.a6=t.includes("w"),s.u6=t.includes("h"),s.f6=t.includes("a"),s.p6=t.includes("z"),s.b6=t.includes("d"),s.g6=t.includes("o"),s.S6=t.includes("v"),s}bAt(t){return va.Se(t.oci)?t.oci:t[1]}yAt(e,h){if(va.Se(e.oci)){let t=this.uv,s=t.pk(),i;if(e.data)i=s.Xz(e.data,t.JO(),!1,0,0,!1,!0);else{const r=s.Bz(e.oci);i=s.u5(r,t.JO(),0,0,!0)}if(h?.n2t,i){const n=this.pAt(e,s),o=(n&&i.sv(n),i.zO());return o.JO().c5(i,!0),o}}}SAt(t,s,i,e,h=!0){const r=this.uv,n=r.QN(t,this.cAt(s.f));n&&h&&(i.has(t)||(t.fAt(s.offsets),this.dAt(t.c8(),s,e)),i.add(t)),this.YRt()}dAt(t,s,i){let e=this.pAt(s,this.uv.pk());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.sv(e))}wAt(t,s){return t.filter(t=>t.QB().cf()===s.cf()).length}pAt(t,s){if(va.Se(t.instIndex)){const i=s.Bz(t.oci),e=i.MCt();return e?e[t.instIndex]:null}return va.Ce(t.inst)?JSON.parse(t.inst):t.inst||void 0}static lAt(t){let s=t.zO().JO().Uz(t.f4());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.VY()]){const h=e.zO();i.push([h.IO().yJ(),h.JO().QF(),e.f4(),va.HY.UY(h),e.QB().u4()?1:0,h.qO(),va.HY.lAt(e)])}return va.Ue(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=va.HY.MAt(),s[0][14][1]=i,s[0][14][2]=t.zO().qO()),s}static UY(t){let s=0;return(s|=Number(t.w6())<<8)|Number(t.y6())<<7|Number(t.m6())<<6|Number(t.M6())<<5|Number(t.d6())<<4|Number(t.c6())<<3|Number(t.l6())<<2|Number(t.o6())<<1|Number(t.r6())<<0}static MAt(t){let s=0;return s,511}}}{let d=self.Ws,t=self.xs,r=(t.Ps,d.Sr(d.Rect)),n=d.Sr(d.ou),s=d.Sr(d.Event,"bboxchange",!1),f=d.Sr(d.Yo,0,0,0,0),u=d.Sr(d.ju),i=d.Sr(d.Yo,1,1,1,1),o=d.Sr(d.Rect,0,0,-1,-1),h=d.Sr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.NCt=class extends d.dr{constructor(t,s){super(),this.Ci=t,this.xft=t.QB(),this.bf=t.pk(),this.vAt=s,this.xft.gCt(this,null,s),this.xAt=-1,this.GAt=-1,this.Fbt=196635,this.xft.XL().RL()&&(this.Fbt|=128),this.al=NaN,this.ll=NaN,this.CM=NaN,this.TAt=NaN,this._At=NaN,this.U2=NaN,this.Qo=NaN,this.IAt=NaN,this.CAt=NaN,this.RAt=NaN,this.AAt=NaN,this.PAt=d.Sr(d.Rect),this.EAt=d.Sr(d.ou),this.FAt=h,this.DAt=o,this.OAt=null,this.kAt=null,this.LAt=null,this.IM=i,this.BAt=i,this.NAt=null,this.WAt=null,this.Ci.QB().YIt()&&(this.WAt=d.Sr(d.jAt,this.Ci,this)),this.VAt=null,this.URt=null,this.HRt=null,this.UAt=-1,this.HAt=null}ZCt(){this.Fbt|=256}wr(){if(this.xft.gCt(this,this.vAt,null),this.NAt&&(this.bf.uM()._w(this.NAt),this.NAt=null),this.OAt=null,this.kAt&&(this.kAt.zAt.wr(),this.kAt=null),this.LAt&&(this.LAt.clear(),this.LAt=null),this.T6(),this.WAt&&this.WAt.wr(),this.i6()&&this.UN().t6(this),this.Nq()){const t=[...this.VY()];for(const s of t)this.t6(s)}this.JAt(),this.qAt(),g.delete(this),a.delete(this),this.Ci=null,this.xft=null,this.bf=null,this.vAt=null}jCt(t){if(m=!1,this.gN(t[0],t[1]),this.qM(t[2]),this.CC(t[3],t[4]),this.U2=0,this.RL()?this.G5(t[6]):this.Qo=0,f.Ka(t[7]),this.XAt(f),this.Ant(t[8]),this.Ent(t[9]),this.AM(t[10]),this.WAt&&this.WAt.YAt(t[12]),t[14]&&g.set(this,{$At:t[14][1],KAt:t[14][2]}),t[15]){const s=t[15],e=(this.x6(s[0],s[1]),this.A6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.Pv(t,i);o.VM(n[0]),o.zM(n[1]),o.qM(n[2]),o.YM(n[3]),o.KM(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.bf.yRt();l&&c&&c.$lt(this.c8(),a),u&&c&&c.$lt(this.c8(),i)}m=!0,this.ZAt()}VCt(){this.al=0,this.ll=0,this.CM=0,this.TAt=0,this._At=0,this.U2=0,this.Qo=0,this.IAt=0,this.CAt=1,this.RAt=0,this.AAt=0,this.ZAt()}pk(){return this.bf}QB(){return this.xft}c8(){return this.Ci}QAt(){return this.d6()?this.tPt(this.UN().sPt()-this.VAt.iAt()):0}VM(t){if(t=+t,this.r6()){const s=this.VAt,i=t-this.jM(),e=-this.QAt();0==e?this.al+=i/s.tAt():(this.al+=Math.cos(e)*i/s.tAt(),this.o6()&&(this.ll+=Math.sin(e)*i/s.sAt()))}else this.al=t}fnt(t,s=!1){t=+t,!s&&this.r6()?this.VM(this.jM()+t):this.al+=t}jM(){if(this.r6()){let t=this.al,s=this.VAt,i=this.UN(),e=this.QAt();return 0===e?t*=s.tAt():(t=t*s.tAt()*Math.cos(e),this.o6()&&(t-=this.ll*s.sAt()*Math.sin(e))),i.jM()+t}return this.al}zM(t){if(t=+t,this.o6()){const s=this.VAt,i=t-this.HM(),e=-this.QAt();0==e?this.ll+=i/s.sAt():(this.r6()&&(this.al-=Math.sin(e)*i/s.tAt()),this.ll+=Math.cos(e)*i/s.sAt())}else this.ll=t}dnt(t,s=!1){t=+t,!s&&this.o6()?this.zM(this.HM()+t):this.ll+=t}HM(){if(this.o6()){let t=this.ll,s=this.VAt,i=this.UN(),e=this.QAt();return 0===e?t*=s.sAt():(t=t*s.sAt()*Math.cos(e),this.r6()&&(t+=this.al*s.tAt()*Math.sin(e))),i.HM()+t}return this.ll}gN(t,s){if(t=+t,s=+s,this.iPt()){const i=this.r6(),e=this.o6(),h=this.VAt,r=t-this.jM(),n=s-this.HM(),o=-this.QAt();if(0==o)i?this.al+=r/h.tAt():this.al=t,e?this.ll+=n/h.sAt():this.ll=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.al+=e?(l*r-a*n)/h.tAt():l*r/h.tAt():this.al=t,e?this.ll+=i?(a*r+l*n)/h.sAt():l*n/h.sAt():this.ll=s}}else this.al=t,this.ll=s}ePt(){return[this.jM(),this.HM()]}wN(t,s){t=+t,s=+s,this.iPt()?this.gN(this.jM()+t,this.HM()+s):(this.al+=t,this.ll+=s)}MMt(t,s){return this.jM()===t&&this.HM()===s}qM(t){if(t=+t,this.m6()&&(t-=this.UN().JM()),this.CM!==t){this.CM=t,this.hPt();const s=this.JO();0!==this.CM&&s.iJ(),s.KO(this)}}hPt(){if(this.ZAt(),this.Nq()){const i=this.VY();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.m6()&&e.hPt()}}}Fnt(t){this.qM(this.JM()+t)}JM(){return this.m6()?this.UN().JM()+this.CM:this.CM}MN(){return this.JO().JM()+this.JM()}Oit(){const t=this.c8().XL().fbt();return t<2&&this.c8().L6().Oit()}Bm(t){if(t=+t,this.l6()){const s=this.Pm();0===s?this.TAt=Number.EPSILON:this.TAt*=t/s}else this.TAt=t;this.rPt()}lg(t,s){t=+t,!s&&this.l6()?this.Bm(this.Pm()+t):this.TAt+=t,this.rPt()}Pm(){if(this.l6()){const t=this.UN(),s=t.Pm(),i=t.ynt().gnt();return i===Number.EPSILON?(this.ynt().gnt()+s)*this.TAt:s*this.TAt}return this.TAt}Em(t){if(t=+t,this.c6()){const s=this.jm();0===s?this._At=Number.EPSILON:this._At*=t/s}else this._At=t;this.rPt()}Mnt(t,s){t=+t,!s&&this.c6()?this.Em(this.jm()+t):this._At+=t,this.rPt()}jm(){if(this.c6()){const t=this.UN(),s=t.jm(),i=t.ynt().wnt();return i===Number.EPSILON?(this.ynt().wnt()+s)*this._At:s*this._At}return this._At}CC(t,s){if(t=+t,s=+s,this.l6()){const i=this.Pm();0===i?this.TAt=Number.EPSILON:this.TAt*=t/i}else this.TAt=t;if(this.c6()){const e=this.jm();0===e?this._At=Number.EPSILON:this._At*=s/e}else this._At=s;this.rPt()}yc(){return[this.Pm(),this.jm()]}pq(){return this.U2}nPt(t){if(t<0)throw new RangeError("invalid depth");this.U2=t}oPt(){if(this.i6()){const t=this.VAt;return Math.min(t.tAt(),t.sAt())}return 1}RL(){return 0!=(128&this.Fbt)}G5(t){t=+t,this.RL()&&(this.d6()&&(t-=this.UN().GetAngle()),t=d._r(t),this.Qo!==t)&&(this.Qo=t,this.rPt())}vnt(t){0!=(t=+t)&&this.RL()&&(this.Qo=d._r(this.Qo+t),this.rPt())}rPt(){if(this.Fbt|=1<<18,this.Nq()){const i=this.VY();for(let t=0,s=i.length;t<s;t++)i[t].rPt()}}GetAngle(){return this.d6()&&this.RL()?this.tPt(d._r(this.UN().sPt()+this.Qo)):this.Qo}sPt(){return this.d6()&&this.RL()?d._r(this.UN().sPt()+this.Qo):this.Qo}tPt(t){return this.l6()&&this.zN().Pm()<0&&(t=d._r(d.Br(t,this.zN().GetAngle()+Math.PI))),this.c6()&&this.zN().jm()<0?d.Br(t,this.zN().GetAngle()):t}aPt(){const t=this.UN();return!!(this.l6()&&t.Pm()<0)||!!(this.c6()&&t.jm()<0)}lPt(){const t=this.UN();return!!(this.l6()&&t.Pm()<0&&this.c6()&&t.jm()<0)}uPt(){const t=this.Fbt;if(0!=(t&1<<18)){const s=this.GetAngle();this.IAt=Math.sin(s),this.CAt=Math.cos(s),this.Fbt=-262145&t}}_Mt(){return this.uPt(),this.IAt}TMt(){return this.uPt(),this.CAt}Ant(t){this.RAt=+t}Rnt(t){this.RAt+=+t}GW(){return this.RAt}Ent(t){this.AAt=+t}Pnt(t){this.AAt+=+t}_W(){return this.AAt}XAt(t){this.IM.equals(t)||(this.IM===i?(this.IM=d.Sr(d.Yo,t),this.BAt=d.Sr(d.Yo,t),this.BAt.Aa()):t._a(1,1,1,1)?(this.IM=i,this.BAt=i):(this.IM.set(t),this.BAt.set(t),this.BAt.Aa()),this.ZAt())}nP(t){if(t=d.Tr(+t,0,1),this.y6()){if(this.ynt().zMt()===t)return;this.ynt().QRt(t),t=this.hP()}else if(this.IM.a===t)return;this.cPt(t)}fPt(){if(this.Nq()){const i=this.VY();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.cPt(e.hP())}}}cPt(t){f.ca(this.IM),f.a=t,this.XAt(f),this.fPt()}Tnt(t){this.y6()?this.nP(this.ynt().zMt()+t):this.nP(this.hP()+t)}hP(){return this.y6()?this.UN().hP()*this.ynt().zMt():this.IM.a}AN(t){this.IM.Ga(t)||(f.ca(t),f.a=this.hP(),this.XAt(f))}hnt(t,s,i){f.ea(t,s,i),this.AN(f)}dPt(t,s,i){0===t&&0===s&&0===i||(f.ca(this.IM),f.r+=t,f.g+=s,f.b+=i,this.AN(f))}RN(){return this.IM}vz(){return this.BAt}M6(){return 0!=(512&this.Fbt)}pPt(t){this.mPt(512,t)}r6(){return 0!=(1024&this.Fbt)}gPt(t){this.mPt(1024,t)}o6(){return 0!=(2048&this.Fbt)}iPt(){return 0!=(3072&this.Fbt)}yPt(t){this.mPt(2048,t)}l6(){return 0!=(4096&this.Fbt)}SPt(t){this.mPt(4096,t)}c6(){return 0!=(8192&this.Fbt)}wPt(t){this.mPt(8192,t)}d6(){return 0!=(16384&this.Fbt)}bPt(t){this.mPt(16384,t)}m6(){return 0!=(32768&this.Fbt)}MPt(t){this.mPt(32768,t)}y6(){return 0!=(this.Fbt&1<<22)}vPt(t){this.mPt(1<<22,t)}w6(){return 0!=(this.Fbt&1<<23)}xPt(t){this.mPt(1<<23,t)}GPt(){this.Fbt&=-12647937}QN(t,s){if(t===this)return!1;if(t.i6())return!1;if(this.TPt(t))return!1;if(this._Pt(t))return!1;const i=t.jM(),e=t.HM(),h=t.Pm(),r=t.jm(),n=t.GetAngle(),o=t.JM(),a=t.hP(),l=(t.IPt(this),t.gPt(s.h6),t.yPt(s.n6),t.SPt(s.a6),t.wPt(s.u6),t.bPt(s.f6),t.MPt(s.p6),t.vPt(s.g6),t.xPt(s.S6),t.pPt(s.b6),i-this.jM()),u=e-this.HM(),c=-this.GetAngle(),f=Math.cos(c),d=Math.sin(c);if(s.h6&&(s.f6?t.al=l*f-u*d:t.al=l,s.a6)){const p=this.Pm()/this.VAt.gnt();0!=p&&(t.al/=p)}if(s.n6&&(s.f6?t.ll=l*d+u*f:t.ll=u,s.u6)){const m=this.jm()/this.VAt.wnt();0!=m&&(t.ll/=m)}if(s.a6){const g=this.Pm();0===g||g===Number.EPSILON?(t.TAt=1,t.VAt.KRt(1)):(t.TAt=h/this.Pm(),t.VAt.KRt(t.TAt))}if(s.u6){const y=this.jm();0===y||y===Number.EPSILON?(t._At=1,t.VAt.ZRt(1)):(t._At=r/this.jm(),t.VAt.ZRt(t._At))}return s.f6&&(t.Qo=n-this.GetAngle()),s.p6&&(t.CM=o-this.JM()),s.g6&&t.VAt.QRt(a),s.S6&&t.oB(this.lB()),this.CPt(t),this.mN(),this.fPt(),!0}t6(t){if(t.UN()===this){const s=t.jM(),i=t.HM(),e=t.Pm(),h=t.jm(),r=t.GetAngle(),n=t.JM(),o=t.hP();t.IPt(null),t.GPt(),t.gN(s,i),t.CC(e,h),t.G5(r),t.qM(n),t.nP(o),this.RPt(t),this.mN()}}APt(){return this.UAt}PPt(){this.EPt();const t=[...this.children()];for(const i of t)this.t6(i);const s=this.UN();s&&s.t6(this),this.GPt()}EPt(){if(this.FPt(),!this.URt){const s=[...this.children()];s.length&&(this.URt=[],this.HRt=new WeakMap);let t=0;for(const i of s){const e=i.c8();this.URt.push(e),this.HRt.set(e,t),t++}}const t=this.UN();t&&t.EPt()}FPt(){if(-1===this.UAt){const t=[...this.JN()];this.UAt=t.length;for(const i of t)i.FPt();const s=[...this.children()];for(const e of s)e.FPt()}}qAt(){this.URt&&(this.URt.length=0),this.URt=null,this.HRt=null;const t=this.UN();t&&t.qAt(),this.UAt=-1}i6(){return null!==this.UN()}UN(){const t=this.VAt;return null!==t?t.UN():null}zN(){let t=this;for(;t.i6();)t=t.UN();return t}*JN(){let t=this.UN();for(;t;)yield t,t=t.UN()}uRt(t){return this.VY().includes(t)}Nq(){const t=this.VAt;return null!==t&&t.Nq()}VY(){const t=this.VAt;return null!==t?t.VY():e}children(){return this.VY()}*KN(){for(const t of this.children())yield t,yield*t.KN()}XN(){return this.VY().length}Mvt(){return[...this.KN()].length}$N(t){const s=this.VY();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}pRt(s){if(s){const i=this.VY();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}DPt(t){this.VAt||(this.VAt=d.Sr(d.HY,this)),t&&this.VAt.XRt(t)}ynt(){return this.VAt}JAt(){this.VAt&&(this.VAt.wr(),this.VAt=null)}IPt(t){t?(t.DPt(null),this.DPt(t)):(this.VAt&&this.VAt.XRt(null),this.Nq()||this.JAt())}_Pt(t){if(!this.i6())return!1;const s=this.UN();return s===t||s._Pt(t)}TPt(t){if(this.uRt(t))return!0;for(const s of this.VY())if(s.TPt(t))return!0;return!1}CPt(t){this.VAt.VY().push(t)}RPt(t){const s=this.VAt.VY(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.i6()||this.JAt(),t.Nq()||t.JAt()}gRt(){const t=g.get(this);return t?t.$At:null}OPt(){const t=g.get(this);return t?t.KAt:NaN}Bq(){const t=a.get(this);return d.Se(t)?t:NaN}kPt(t){a.set(this,t)}LPt(){this.mPt(1<<19,!0),this.ZAt()}ZAt(){if(m){const s=this.bf.uM();this.NAt&&s._w(this.NAt);let t;t=0!=(this.Fbt&1<<19)?s.hw()||"<point>":s.QS()||"<default>",this.NAt=s.Mw(t,this.DB(),this.BAt,this.JM())}}Mq(){return this.NAt}MJ(){return this.IM===i}AM(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.DB()!==t&&(this.Fbt=this.Fbt&~(31<<26)|t<<26,this.ZAt())}DB(){return(this.Fbt&31<<26)>>26}$O(t,s){const i=s&&this.vAt!==t;i&&this.tJ(),this.xft.gCt(this,this.vAt,t),this.vAt=t,i&&this.BPt(),0!==this.JM()&&this.vAt.iJ()}JO(){return this.vAt}IO(){return this.JO().IO()}hJ(t){this.xAt=0|t}qO(){return this.vAt.d9(),this.xAt}y9(t){this.GAt=0|t}cj(){return this.vAt.m9(),this.GAt}t7(){return this.xAt}mPt(t,s){s?this.Fbt|=t:this.Fbt&=~t}lB(){return 0!=(1&this.Fbt)}oB(t){if(this.mPt(1,t),this.Nq())for(const s of this.VY())s.w6()&&s.oB(t)}WN(){return 0!=(8&this.Fbt)}jN(t){t=!!t,this.WN()!==t&&(this.mPt(8,t),t?this.mN():this.NPt())}WPt(t,s){if(this.mPt(32,t),this.LAt&&this.LAt.clear(),s.trim()){this.LAt||(this.LAt=new Set);for(const i of s.split(" "))i&&this.LAt.add(i.toLowerCase())}else this.LAt=null}jPt(t){const s=0!=(32&this.Fbt),i=this.LAt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}mN(){if(this.Fbt|=65554,this.xft.dCt(!0),this.bf.ZO(),this.vAt.Dz()&&(this.VPt(this.PAt,this.EAt,!0),this.Fbt&=-3,this.BPt()),0!=(4&this.Fbt)&&this.Ci.Qf().dispatchEvent(s),null!==this.VAt){const i=this.VAt.VY();for(let t=0,s=i.length;t<s;++t)i[t].mN()}}VPt(t,s,i){const e=this.jM(),h=this.HM(),r=this.Pm(),n=this.jm(),o=this.GetAngle();t.xl(e-this.RAt*r,h-this.AAt*n,r,n),i&&this.R6()&&this.UPt(t),0===o?s.Cu(t):(t.offset(-e,-h),s.Au(t,this._Mt(),this.TMt()),s.offset(e,h),s.Pu(t)),t.normalize()}HPt(){const t=this.Fbt;0!=(2&t)&&(this.VPt(this.PAt,this.EAt,!0),this.Fbt=-3&t)}xN(){return this.HPt(),this.PAt}TN(){return this.HPt(),this.EAt}zPt(t){const s=this.jM(),i=this.HM(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.I(t),n.offset(e,h),n)}JPt(t){this.PAt.I(t),this.EAt.Cu(this.PAt),this.Fbt&=-3,this.mCt(),this.BPt()}qPt(t){this.mPt(4,t)}XPt(){return 0!=(4&this.Fbt)}aq(t,s,i){return s&&0!==this.pq()?this.cq(this.JO().uq()):0===this.JM()||i?t.su(this.xN()):this.YPt()}YPt(){const t=this.JO(),s=this.MN();return!(s>=t.NJ())&&(t.LJ(s,r),r.su(this.xN()))}cq(t){const s=this.xN(),i=s.Pl(),e=s.Fl(),h=s.El(),r=s.Dl(),n=this.MN(),o=n+this.pq();return t.Wy(i,h,n,e,r,o)}IN(){const t=this.JO();if(t.KJ())return this.cq(t.uq());{const s=t.IO();return this.aq(t.BB(),s.oq(),s.Z5())}}Sq(t){this.mPt(1<<20,t)}yq(t){this.mPt(1<<21,t)}$Pt(){return 0!=(this.Fbt&1<<20)}KPt(){return 0!=(this.Fbt&1<<21)}ZPt(t){this.OAt=t,this.QPt(),this.R6()&&(this.HAt.tEt=null)}sEt(){return this.OAt}iEt(){return null!==this.OAt||this.R6()}eEt(){return this.hEt(this.Pm(),this.jm(),this.GetAngle(),this._Mt(),this.TMt())}rEt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.hEt(t,s,i,e,h)}hEt(h,r,t,n,o){let s=this.kAt;null===s&&(s={zAt:d.Sr(d.ju),width:NaN,height:NaN,angle:NaN},this.kAt=s);const a=s.zAt;if(s.width!==h||s.height!==r||s.angle!==t){const l=this.OAt;if(this.R6()){let t=this.GW(),s=this._W(),i=this.A6(),e=this.HAt.tEt;e||(l?(u.I(l),u.offset(t,s)):u.Yu(),e=i.Ov(u),this.HAt.tEt=e),i.kv(e,a),a.offset(-t,-s),a.Qu(h,r,n,o)}else l?(a.I(l),a.Qu(h,r,n,o)):a.Zu(this.TN(),-this.jM(),-this.HM());s.width=h,s.height=r,s.angle=t}return a}QPt(){this.nEt(!0);const t=this.kAt;null!==t&&(t.width=NaN)}x6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.c8().XL().LL())throw new Error("object does not support mesh");this.T6(),this.HAt={oEt:d.Sr(d.Cy.ov,t,s),aEt:d.Sr(d.Cy.ov,t,s),tEt:null}}R6(){return null!==this.HAt}A6(){if(this.R6())return this.HAt.oEt;throw new Error("no mesh")}lEt(){if(this.R6())return this.HAt.aEt;throw new Error("no mesh")}uEt(t){this.mPt(65536,t)}cEt(){return 0!=(65536&this.Fbt)}nEt(t){this.mPt(1<<17,t)}fEt(){return 0!=(this.Fbt&1<<17)}UPt(t){const s=this.HAt.oEt,i=Math.min(s.Tv(),0),e=Math.min(s._v(),0),h=Math.max(s.Iv(),1),r=Math.max(s.Cv(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.jl((h-1)*n),t.Vl((r-1)*o),this.U2=s.Rv()}T6(){this.HAt&&(this.HAt.oEt.wr(),this.HAt.aEt.wr(),this.HAt=null,this.QPt())}I6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i._B,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.R6())return!1;const u=this.A6(),c=u.Pv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.JM()!==o&&(c.qM(o),f=!0),h&&(r+=t/(u.bv()-1),n+=s/(u.Mv()-1)),a=-1!==a||h?(h&&(a+=t/(u.bv()-1)),d.Tr(a,0,1)):c.XM(),l=-1!==l||h?(h&&(l+=s/(u.Mv()-1)),d.Tr(l,0,1)):c.$M(),c.jM()===r&&c.HM()===n&&c.XM()===a&&c.$M()===l?f:(c.VM(r),c.zM(n),c.YM(a),c.KM(l),this.QPt(),!0)}KCt(){return this.Ci.KCt()}VN(t,s){return!!this.xN().eu(t,s)&&!!this.TN().eu(t,s)&&(this.KCt()?this.Ci.L6().OGt(t,s):!this.iEt()||this.eEt().eu(t-this.jM(),s-this.HM()))}dEt(){return 0!=(16&this.Fbt)}mCt(){if(this.dEt()&&this.WN()&&0==(256&this.Fbt)){const t=this.xN(),s=this.xft.fCt(),i=this.FAt;if(r.set(s.y7(t.Pl()),s.S7(t.El()),s.y7(t.Fl()),s.S7(t.Dl())),!i.equals(r)){const e=this.Ci;i===h?(s.w7(e,null,r),this.FAt=d.Sr(d.Rect,r)):(s.w7(e,i,r),i.I(r)),this.Fbt&=-17}}}pEt(){this.Fbt|=16}NPt(){const t=this.FAt;t!==h&&(this.xft.fCt().w7(this.Ci,t,null),this.FAt=h)}BPt(){const t=this.JO();if(t.Dz()&&0==(256&this.Fbt)){const s=t.xJ(),i=this.xN(),e=this.DAt;if(r.set(s.y7(i.Pl()),s.S7(i.El()),s.y7(i.Fl()),s.S7(i.Dl())),!e.equals(r)){const h=this.Ci;e===o?(s.w7(h,null,r),this.DAt=d.Sr(d.Rect,r)):(s.w7(h,e,r),e.I(r)),t.GJ()}}}tJ(){const t=this.DAt;t!==o&&(this.JO().xJ().w7(this.Ci,t,null),this.DAt=o)}p9(){return this.DAt}EN(){const t=this.Ci,s=this.vAt,i=s.YO();i.length&&i.at(-1)===t||(s.Qz(t,!1),s.$z(t,!1),this.bf.ZO())}DN(){const t=this.Ci,s=this.vAt,i=s.YO();i.length&&i[0]===t||(s.Qz(t,!1),s.Zz(t,!1),this.bf.ZO())}kN(t){const s=this.Ci,i=this.vAt;if(i.IO()!==t.IO())throw new Error("layer from different layout");t!==i&&(i.Qz(s,!0),this.$O(t),t.$z(s,!0),this.bf.ZO())}BN(t,s){let i=this.Ci,e=!1,h=this.vAt;if(t.f4()!==i.f4()){const r=t.zO();if(!r)throw new Error("expected world instance");const n=r.JO(),o=(h.QF()!==n.QF()&&(h.Qz(i,!0),this.$O(n),n.$z(i,!0),e=!0),n.b9(i,t,!!s));(e||o)&&this.bf.ZO()}}dN(){return this.WAt}mEt(t){this.mPt(64,t)}I9(){return 0!=(64&this.Fbt)}Oq(t,s=null){const i={x:this.jM(),y:this.HM(),w:this.Pm(),h:this.jm(),l:this.JO().yJ(),zi:this.qO()},e=(0!==this.JM()&&(i.ze=this.JM()),0!==this.GetAngle()&&(i.a=this.sPt()),this.MJ()||(i.c=this.IM.toJSON()),.5!==this.GW()&&(i.oX=this.GW()),.5!==this._W()&&(i.oY=this._W()),0!==this.DB()&&(i.bm=this.DB()),this.lB()||(i.v=this.lB()),this.WN()||(i.ce=this.WN()),this.XPt()&&(i.be=this.XPt()),this.WAt&&(i.fx=this.WAt.Oq()),0!=(32&this.Fbt));return e&&(i.sfi=e),this.LAt&&(i.sft=[...this.LAt].join(" ")),this.VAt&&"visual-state"!==t&&(i.sgi=this.VAt.Oq(t,s),g.has(this))&&(i.sgcd=g.get(this).$At,i.sgzid=g.get(this).KAt),this.R6()&&(i.mesh=this.A6().tv()),i}aAt(){return{x:this.al,y:this.ll,z:this.CM,w:this.TAt,h:this._At,a:this.Qo,sgi:this.ynt()?this.ynt().eAt():null}}fAt(t){t&&(this.al=t.x,this.ll=t.y,this.CM=t.z,this.TAt=t.w,this._At=t.h,this.Qo=t.a,t.sgi&&this.ynt()&&this.ynt().kq(t.sgi),this.rPt(),this.mN())}xCt(){this.qAt(),this.PPt(),this.DPt(null),this.VAt&&this.VAt.uAt(this.URt,this.HRt)}Z$(t){"visual-state"!==t&&this.PPt()}tK(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Fbt)&&this.VAt.tK(t.sgi,i)}FRt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Fbt)&&(this.VAt.uAt(null,null),this.qAt(),this.mN())}kq(t,s){if(m=!1,this.VM(t.x),this.zM(t.y),this.Bm(t.w),this.Em(t.h),this.hJ(t.zi),this.qM(t.hasOwnProperty("ze")?t.ze:0),this.G5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.Ka(t.c):t.hasOwnProperty("o")?(f.ca(this.IM),f.a=t.o):f.ta(1,1,1,1),this.XAt(f),this.Ant(t.hasOwnProperty("oX")?t.oX:.5),this.Ent(t.hasOwnProperty("oY")?t.oY:.5),this.AM(t.hasOwnProperty("bm")?t.bm:0),this.oB(!t.hasOwnProperty("v")||t.v),this.jN(!t.hasOwnProperty("ce")||t.ce),this.qPt(!!t.hasOwnProperty("be")&&t.be),this.WPt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.WAt&&t.hasOwnProperty("fx")&&this.WAt.kq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.URt)for(const i of this.URt)i.Sj()||this.bf.r4(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.DPt(null);const e=this.VAt,h=t.sgi;e.kq(h),e.uAt(this.URt,this.HRt),t.sgcd&&d.Se(t.sgzid)&&g.set(this,{$At:t.sgcd,KAt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.x6(r.cols,r.rows),this.A6().sv(r)}else this.T6();this.mN(),m=!0,this.ZAt(),"visual-state"!==s&&this.bf.gEt(this.c8(),t)}}}{const xa=self.Ws;xa.eIt=class extends xa.dr{constructor(t,s){super();const i=t.pk(),e=i.Dyt(s[1]),h=(i.yEt().PTt(e),this.bf=i,this.xft=t,this.lTt=xa.bL.Q6(e),this.Xxt=null,this.SEt=null,this.D_t=e.Instance,this.O7=s[2],this.vr=s[0],this.ySt=this.bf.Zdt(s[3]),this.lTt.fbt());if(h<2&&(this.Xxt=xa.Sr(e.bIt,this),!(this.Xxt instanceof xa.aTt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(xa.bL.Axt(this,h),2<=h){const r=e.bIt??globalThis.Rj;if(this.SEt=new r,!(this.SEt instanceof globalThis.Rj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.SEt=new globalThis.K6;xa.bL.Pxt(h),this._xt()}static Bx(t,s){return xa.Sr(xa.eIt,t,s)}wr(){this.bf=null,this.lTt=null,this.Xxt&&(this.Xxt.wr(),this.Xxt=null),this.D_t=null}aMt(){return this.Xxt}_xt(){this.Xxt?this.Xxt._xt():this.SEt&&this.SEt.A8()}pk(){return this.bf}QB(){return this.xft}H6(){return this.lTt}VIt(){return this.D_t}cf(){return this.vr}yJ(){return this.O7}J6(){return this.SEt}Zdt(){return this.ySt}}}{const Ga=self.Ws,Ta=self.V6;Ga.kCt=class extends Ga.dr{constructor(t){super(),this.bf=t.runtime,this.$St=t.z6,this.lTt=this.$St.H6(),this.Ci=t.X6,this.by=t.index,this.CCt=null,this.RCt=null,this.lTt.$z(this.Ci)}wr(){this.RCt&&(this.RCt.h4(),this.RCt=null),this.lTt.Qz(this.Ci),this.CCt&&(this.CCt.wr(),this.CCt=null),this.bf=null,this.$St=null,this.lTt=null,this.Ci=null}LIt(t){if(this.CCt)throw new Error("already got sdk instance");const s=this.H6().fbt();if(s<2){if(this.CCt=Ga.Sr(this.$St.VIt(),this,t),!(this.CCt instanceof Ga.uTt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.H6().Ixt();this.Rxt(i.Instance,t)}}L6(){return this.CCt??this.RCt}Y6(){return this.Ci}pk(){return this.bf}q6(){return this.$St}H6(){return this.lTt}Hrt(){return this.by}pTt(){this.CCt?this.CCt.pTt():this.RCt.Fj()}STt(t,s){this.CCt&&this.CCt.STt(t,s)}ERt(){return this.CCt?this.CCt.mGt():this.RCt.Q4()}tv(t="full"){return this.CCt?this.CCt.tv(t):this.RCt.tN(t)}sv(t,s="full"){if(this.CCt)return this.CCt.sv(t,s);this.RCt.sN(t,s)}static wEt(t,s,i){let e=globalThis.Aj,h,r;h=s instanceof e?t.L5(s):s.dTt(),r=i instanceof e?t.L5(i):i.dTt();const n=h.Y6(),o=r.Y6(),a=n.QB().QF(),l=o.QB().QF();if(a!==l)return a-l;const u=n.bRt(),c=o.bRt();return u!==c?u-c:h.Hrt()-r.Hrt()}Rxt(t,s){const i=Ta,e=t??this.CCt.Ixt(),h=e||i,r=this.H6().fbt();if(Ga.bL.Axt(this,r),Ga.bL.ETt(s),this.RCt=new h,Ga.bL.FTt(),Ga.bL.Pxt(r),!e||this.RCt instanceof i)return this.RCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}Kxt(){return this.RCt||this.Rxt()}wGt(){return!!this.RCt}}}{const _a=self.Ws;_a.bz=class extends _a.dr{constructor(t,s){super(),this.uv=t,this.bEt=[],this.MEt=[],this.vEt=new Map,this.xEt=[],this.GEt=[],this.TEt=new Set,this.Zb=!0;for(const i of s){const e=_a.Sr(_a._Et,this,i,this.bEt.length);this.bEt.push(e),this.vEt.set(e.cf().toLowerCase(),e),3<=i.length&&this.xEt.push(this.IEt(e,i[2]))}this.pk().CEt(this)}wr(){this.pk().REt(this);for(const t of this.GEt)t.wr();_a.Hn(this.GEt),_a.Hn(this.bEt),_a.Hn(this.MEt),this.vEt.clear(),_a.Hn(this.xEt),this.uv=null}AEt(t){this.TEt.add(t)}PEt(t){this.TEt.delete(t)}EEt(t){t.JS()&&(this.GEt=this.bEt.map(t=>{const s=t.BG();return 0<s.GetCustomParametersByteSize()?_a.Sr(_a.Cy.WebGPUEffectCustomParamsBuffer,s):null}),this.FEt());for(const s of this.TEt)s.EEt(t)}OIt(t){if(t.length){this.bEt=t.concat(this.bEt);for(const s of t)this.vEt.set(s.cf().toLowerCase(),s);for(let t=0,s=this.bEt.length;t<s;++t)this.bEt[t].fJ(t)}}IEt(t,s){t.DEt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=_a.Sr(_a.Yo);h.Ka(e),i[t]=h}}return i}vv(){return this.uv}pk(){return this.uv.pk()}iW(){_a.Hn(this.MEt);let t=!0;for(const s of this.bEt)s.bmt()&&(this.MEt.push(s),s.BG().gM()||(t=!1));this.Zb=t}w5(){return this.bEt}$It(){return 0<this.bEt.length}qht(t){return this.vEt.get(t.toLowerCase())||null}OEt(t){if((t=Math.floor(+t))<0||t>=this.bEt.length)throw new RangeError("invalid effect type index");return this.bEt[t]}tW(t){return this.OEt(t).bmt()}sW(t,s){this.OEt(t).DEt(s)}vJ(){return this.MEt}I9(){return 0<this.MEt.length}gM(){return this.Zb}Jht(t){return this.xEt[t]}Gz(t){return(t<this.GEt.length?this.GEt:this.xEt)[t]}eW(t,s){if(t<0||t>=this.xEt.length)return null;const i=this.xEt[t];return s<0||s>=i.length?null:i[s]}hW(t,s,i){if(t<0||t>=this.xEt.length)return!1;const e=this.xEt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof _a.Yo){if(h.Ga(i))return!1;h.ca(i)}else{if(h===i)return!1;e[s]=i}return t<this.GEt.length&&this.GEt[t].SetParameterValue(s,i),!0}FEt(){const i=this.xEt,e=this.GEt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static kEt(t){return t&&t instanceof _a.Yo?{t:"color",v:t.toJSON()}:t}static LEt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=_a.Sr(_a.Yo);return i.Ka(t.v),i}}}static BEt(t){return t.map(_a.bz.kEt)}static NEt(t){return t.map(_a.bz.LEt)}tv(){return this.bEt.map(t=>({name:t.cf(),active:t.bmt(),params:_a.bz.BEt(this.xEt[t.QF()])}))}sv(t){for(const s of t){const i=this.qht(s.name);i&&(i.DEt(s.active),this.xEt[i.QF()]=_a.bz.NEt(s.params))}this.iW(),this.FEt()}}}{const Ia=self.Ws;Ia._Et=class extends Ia.dr{constructor(t,s,i){super(),this.wz=t,this.vf=s[0],this.vr=s[1],this.by=i,this.GM=null,this.w0=!0}wr(){this.wz=null,this.GM=null}DIt(t){const s=Ia.Sr(Ia._Et,t,[this.vf,this.vr],-1);return s.GM=this.GM,s.w0=this.w0,s}EEt(t){const s=t.ZS(this.vf);if(!s)throw new Error("failed to find shader program '"+this.vf+"'");this.GM=s}S5(){return this.wz}cf(){return this.vr}fJ(t){this.by=t}QF(){return this.by}vv(){return this.wz.vv()}pk(){return this.wz.pk()}DEt(t){this.w0=!!t}bmt(){return this.w0}BG(){return this.GM}WEt(){const i=[];for(let t=0,s=this.GM.NG();t<s;++t){const e=this.GM.WG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.Sr(Ia.Yo,1,1,1,1))}}return i}}}{const Ca=self.Ws;Ca.jAt=class extends Ca.dr{constructor(t,s){super(),this.Ci=t,this.jEt=s,this.wz=t.QB().S5(),this.VEt=!0,this._z=!0,this.UEt=!1,this.HEt=!1,this.zEt=!1,this.JEt=!1,this.YF=Ca.Sr(Ca.Cy.JE,t.pk().eL().Mz(),{OE:(t,s)=>{const i=s.jF(),e=i.zO();t.PM(e.vz()),t.Ww(e.MN()),i.Fv(t),t.Ww(0)},kE:t=>{const s=t.AGt(),[i,e]=t.RGt();return{DF:s,OF:i,kF:e}},LE:t=>this.Gz(t)}),this.qEt=[],this.MEt=[],this.Zb=!0,this.xEt=[],this.GEt=[],this.EEt(t.pk().uM());for(let t=0,s=this.wz.w5().length;t<s;++t)this.qEt.push(!0);this.iW(),this.wz.AEt(this)}wr(){this.wz.PEt(this);for(const t of this.GEt)t&&t.wr();Ca.Hn(this.GEt),this.YF.wr(),this.YF=null,Ca.Hn(this.qEt),Ca.Hn(this.MEt),Ca.Hn(this.xEt),this.Ci=null,this.wz=null}EEt(t){t.JS()&&(this.GEt=this.wz.w5().map(t=>{const s=t.BG();return 0<s.GetCustomParametersByteSize()?Ca.Sr(Ca.Cy.WebGPUEffectCustomParamsBuffer,s):null}))}YAt(t){let s=0;for(const i of t)this.xEt.push(this.IEt(s,i)),++s;this.FEt(),this.iW()}IEt(t,s){this.qEt[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.Sr(Ca.Yo);h.Ka(e),i[t]=h}}return i}UCt(){for(const t of this.wz.w5())this.xEt.push(t.WEt());this.FEt()}vv(){return this.uv}S5(){return this.wz}ZF(){return this.bJ(),this.YF}pk(){return this.Ci.pk()}iW(){Ca.Hn(this.MEt);let t=this.jEt,i=this.wz.w5(),e=this.MEt,h=this.qEt,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.BG().gM()||(r=!1)}this.Zb=r,t.mEt(!!e.length),this.VEt=!0}bJ(){const t=this.Ci,s=this.jEt,i=s.MJ(),e=t.XL().FL(),h=0!==s.GetAngle()||0!==s.JO().GetAngle()||s.Pm()<0||s.jm()<0,r=t.FGt(),n=t.mM();(this.VEt||i!==this._z||e!==this.UEt||h!==this.HEt||r!==this.zEt||n!==this.JEt||this.YF.N3())&&(this.YF.W3(this.MEt.map(t=>t.BG()),{NE:this.MEt.map(t=>t.QF()),WE:!i||n,VE:e,UE:r,HE:h}),this.VEt=!1,this._z=i,this.UEt=e,this.HEt=h,this.zEt=r,this.JEt=n)}vJ(){return this.MEt}Jht(t){return this.xEt[t]}Gz(t){return(t<this.GEt.length?this.GEt:this.xEt)[t]}eW(t,s){if(t<0||t>=this.xEt.length)return null;const i=this.xEt[t];return s<0||s>=i.length?null:i[s]}hW(t,s,i){if(t<0||t>=this.xEt.length)return!1;const e=this.xEt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.Yo){if(h.Ga(i))return!1;h.ca(i)}else{if(h===i)return!1;e[s]=i}return t<this.GEt.length&&this.GEt[t].SetParameterValue(s,i),!0}FEt(){const i=this.xEt,e=this.GEt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}gM(){return this.Zb}XEt(){return this.MEt.some(t=>t.BG().wM())}tW(t){return this.qEt[t]}sW(t,s){this.qEt[t]=!!s}w5(){return this.wz.w5()}Oq(){return this.wz.w5().map(t=>({name:t.cf(),active:this.qEt[t.QF()],params:Ca.bz.BEt(this.xEt[t.QF()])}))}kq(t){for(const s of t){const i=this.wz.qht(s.name);i&&(this.qEt[i.QF()]=s.active,this.xEt[i.QF()]=Ca.bz.NEt(s.params))}this.iW(),this.FEt()}}}{let _=self.Ws,r=[],b=[],n=[],M=_.Sr(_.ju),S=_.Sr(_.ju),v=_.Sr(_.ou),d=_.Sr(_.Rect),p=_.Sr(_.Rect),m=null,g=null,y=null;_.YEt=class extends _.dr{constructor(t){super(),this.bf=t,this.$Et=0,this.KEt=0,this.ZEt=[],this.QEt=0,this.t3t=0,this.s3t=0,this.i3t=0,this.e3t=new self.Dk(this)}wr(){this.bf=null}pk(){return this.bf}rD(){return this.e3t}h3t(){this.t3t=this.QEt,this.QEt=0,this.i3t=this.s3t,this.s3t=0}r3t(){return this.t3t}n3t(){return this.i3t}o3t(t,s){const i=t.zO(),e=s.zO();i&&e&&i.WN()&&e.WN()&&this.ZEt.push([t,s])}cvt(s,i,e){for(const[h,r]of this.ZEt){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.yvt(i)&&!e.includes(t)&&e.push(t)}}fvt(t,s){if(this.ZEt.length)for(const[i,e]of this.ZEt)if(t===i&&s===e||t===e&&s===i)return!0;return!1}a3t(){_.Hn(this.ZEt)}kk(t,s){if(!t||!s||t===s)return!1;const i=t.zO(),e=s.zO();if(!i.WN()||!e.WN())return!1;this.QEt++;const h=i.JO(),r=e.JO(),n=h.l9(r);return n?this.l3t(i,e):this.u3t(i,e)}l3t(t,s){if(!t.xN().su(s.xN()))return!1;if(this.s3t++,!t.TN().Fu(s.TN()))return!1;if(t.KCt()&&s.KCt())return!1;if(t.KCt())return this.c3t(t,s);if(s.KCt())return this.c3t(s,t);if(!t.iEt()&&!s.iEt())return!0;const i=t.eEt(),e=s.eEt();return i.tc(e,s.jM()-t.jM(),s.HM()-t.HM())}u3t(i,e){const t=i.KCt(),s=e.KCt();if(t&&!s)return this.f3t(i,e);if(s&&!t)return this.f3t(e,i);if(s||t)return!1;{const h=i.JO(),r=e.JO(),n=(M.I(i.eEt()),S.I(e.eEt()),M.Ju());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,l=n[t],u=n[a],[c,f]=h.HB(l+i.jM(),u+i.HM());n[t]=c,n[a]=f}const o=S.Ju();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.HB(p+e.jM(),m+e.HM());o[t]=g,o[d]=y}return M.$u(),S.$u(),this.s3t++,M.tc(S,0,0)}}f3t(t,s){const i=t.JO(),e=s.JO(),h=(m=m||_.Sr(_.ju),g=g||_.Sr(_.Rect),y=y||_.Sr(_.ou),s.jM()),r=s.HM(),[n,o]=e.HB(h,r),[a,l]=i.WB(n,o),u=a-h,c=l-r;if(g.I(s.xN()),g.offset(u,c),!t.xN().su(g))return!1;if(y.I(s.TN()),y.offset(u,c),this.s3t++,!t.TN().Fu(y))return!1;m.I(s.eEt());const f=m.Ju();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.$u(),this.c3t(t,s,a,l,m,g,y)}c3t(t,e,s,i,h,r,n){const o=void 0!==r?r:e.xN(),a=t.jM(),l=t.HM(),u=t.c8().L6(),c=void 0!==s?s:e.jM(),f=void 0!==i?i:e.HM(),d=e.iEt(),p=void 0!==n?n:e.TN(),m=b;u.d3t(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.p3t();if(this.QEt++,o.iu(y,a,l)&&(v.Cu(y),v.offset(a,l),v.Fu(p)))if(d){let t=void 0!==h?h:e.eEt(),s=c,i=f;void 0!==h&&(s=e.jM(),i=e.HM());const S=g.m3t();if(S){if(this.s3t++,S.tc(t,s-(a+y.Pl()),i-(l+y.El())))return _.Hn(m),!0}else if(M.Zu(v,0,0),M.tc(t,s,i))return _.Hn(m),!0}else{const w=g.m3t();if(!w)return _.Hn(m),!0;if(M.Zu(p,0,0),w.tc(M,-(a+y.Pl()),-(l+y.El())))return _.Hn(m),!0}}return _.Hn(m),!1}g3t(t,o,a){const l=t.n5(),s=this.bf.kD();if(!s)throw new Error("cannot call outside event");const u=s.Zft(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.gB(),i.set(t,s)),s};if(l.Oft()){a||(l.Vft(!1),_.Hn(l.Uft())),u&&_.Hn(l.Hft());for(const e of t.r5()){let h=e.zO(),r=h.JO();if(!(!c(r)||!h.IN())&&o.some(([t,s])=>{const[i,e]=r.WB(t,s,h.MN());return h.VN(i,e)})){if(a)return!1;l.Wft(e)}else u&&l.jft(e)}}else{let i,e=!1,n=(!u||s.Hgt(this.bf.Udt())||this.bf.fMt()&&!l.Hft().length&&l.Uft().length?i=l.Uft():(i=l.Hft(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.zO(),r=h.JO();if(!(!c(r)||!h.IN())&&o.some(([t,s])=>{const[i,e]=r.WB(t,s,h.MN());return h.VN(i,e)})){if(a)return!1;e?l.Wft(t):i[n++]=t}else e?i[n++]=t:u&&l.jft(t)}a||(i.length=n)}return t.Tyt(),i.clear(),!!a||l.kft()}y3t(t,s){if(t)for(const i of s.yCt())if(!t.l9(i))return!1;return!0}cMt(t,s,i,e){if(s.lJ())for(const h of s.ygt())this.y3t(t,h)?(h.pCt(),h.fCt().b7(i,e)):_.Qh(e,h.r5());else this.y3t(t,s)?(s.pCt(),s.fCt().b7(i,e)):_.Qh(e,s.r5())}Jk(t,s,i,e){for(const h of s)this.cMt(t,h,i,e)}S3t(t,s,i){const e=this.bf.OTt();e&&this.Jk(t,e.xK(),s,i)}w3t(t,s,i){const e=this.bf.kTt();e&&this.Jk(t,e.xK(),s,i)}jPt(t,s){return t.tRt()&&(!s||s.zO().jPt(t.Sbt().get("solidTags")))}Nk(t){const s=t.zO();this.S3t(s.JO(),s.xN(),r);for(const i of r)if(this.jPt(i,t)&&this.kk(t,i))return _.Hn(r),i;return _.Hn(r),null}b3t(t,s){this.S3t(null,t,r);for(const i of r)if(this.jPt(i,s)&&this.M3t(t,i))return _.Hn(r),i;return _.Hn(r),null}v3t(t,s){let i=null;s&&(i=n,_.Hn(i));const e=t.zO();this.w3t(e.JO(),e.xN(),r);for(const h of r)if(h.iRt()&&this.kk(t,h)){if(!s)return _.Hn(r),h;i.push(h)}return _.Hn(r),i}x3t(s,i,e,h,r){h=h||50;const n=s.zO(),o=n.jM(),a=n.HM();for(let t=0;t<h;++t)if(n.gN(o+i*t,a+e*t),n.mN(),!this.kk(s,r))return!0;return n.gN(o,a),n.mN(),!1}G3t(s,i,e,h,r,n){h=h||50;let o=s.zO(),a=o.jM(),l=o.HM(),u=null,c=null;for(let t=0;t<h;++t)if(o.gN(a+i*t,l+e*t),o.mN(),!this.kk(s,u))if(u=this.Nk(s))c=u;else if(r&&(u=n?this.kk(s,n)?n:null:this.v3t(s))&&(c=u),!u)return c&&this.T3t(s,i,e,c,16,!0),!0;return o.gN(a,l),o.mN(),!1}_3t(i,e,h,t){t=t||50;let r=i.zO(),n=r.jM(),o=r.HM(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.gN(n+e*s*u,o+h*s*u),r.mN(),!this.kk(i,a)){if(!(a=this.Nk(i)))return l&&this.T3t(i,e*u,h*u,l,16,!0),!0;l=a}}return r.gN(n,o),r.mN(),!1}T3t(t,s,i,e,h,r){let n=2,o=!1,a=!1,l=t.zO(),u=l.jM(),c=l.HM();for(;n<=h;){const f=1/n;n*=2,l.wN(s*f*(o?1:-1),i*f*(o?1:-1)),l.mN(),this.kk(t,e)||r&&this.Nk(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.jM(),c=l.HM())}a&&(l.gN(u,c),l.mN())}I3t(i,t=100){let e=0,h=i.zO(),r=h.jM(),n=h.HM(),o=0,a=this.Nk(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.gN(Math.floor(r+t*e),Math.floor(n+s*e)),h.mN(),!this.kk(i,a)&&!(a=this.Nk(i)))return!0}return h.gN(r,n),h.mN(),!1}C3t(t,s,i,e){const h=t.zO(),r=h.jM(),n=h.HM(),o=Math.max(10,_.Rr(s,i,r,n)),a=_.Pr(s,i,r,n),l=e||this.Nk(t);if(!l)return _._r(a+Math.PI);let u=l,c=0,f=0,d=_.Ir(5),p;for(p=1;p<36;++p){const G=a-p*d;if(h.gN(s+Math.cos(G)*o,i+Math.sin(G)*o),h.mN(),!this.kk(t,u)&&!(u=e?null:this.Nk(t))){c=G;break}}for(36===p&&(c=_._r(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(h.gN(s+Math.cos(T)*o,i+Math.sin(T)*o),h.mN(),!this.kk(t,u)&&!(u=e?null:this.Nk(t))){f=T;break}}if(36===p&&(f=_._r(a+Math.PI)),h.gN(r,n),h.mN(),f===c)return f;let m=_.Er(f,c)/2,g;g=_.Dr(f,c)?_._r(c+m+Math.PI):_._r(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),b=Math.sin(g),M=y*w+S*b,v=y-2*M*w,x=S-2*M*b;return _.Pr(0,0,v,x)}R3t(t,s,i,e,h){if(!h)return!1;const r=h.zO();if(!r.WN())return!1;if(this.QEt++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.xN().su(d))return!1;if(h.KCt())return this.A3t(t,s,i,e,h,r);if(this.s3t++,!r.TN().Eu(t,s,i,e))return!1;if(!r.iEt())return!0;const n=r.eEt();return n.Eu(r.jM(),r.HM(),t,s,i,e)}A3t(i,e,h,r,t,s){const n=s.jM(),o=s.HM(),a=t.L6(),l=b;p.set(i,e,h,r),p.normalize(),a.d3t(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.p3t();if(this.QEt++,d.iu(c,n,o)&&(v.Cu(c),v.offset(n,o),v.Eu(i,e,h,r))){const f=u.m3t();if(!f)return _.Hn(l),!0;if(this.s3t++,f.Eu(n+c.Pl(),o+c.El(),i,e,h,r))return _.Hn(l),!0}}return _.Hn(l),!1}M3t(t,s){if(!s)return!1;const i=s.zO();if(!i.WN())return!1;if(this.QEt++,!i.xN().su(t))return!1;if(s.KCt())return this.P3t(t,s,i);if(this.s3t++,v.Cu(t),!i.TN().Fu(v))return!1;if(!i.iEt())return!0;const e=M,h=(e.Cu(t,i.jM(),i.HM()),i.eEt());return e.tc(h,0,0)}P3t(i,t,s){const e=s.jM(),h=s.HM(),r=t.L6(),n=b;r.d3t(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.p3t();if(this.QEt++,i.iu(a,e,h)){const l=o.m3t();if(!l)return _.Hn(n),!0;if(this.s3t++,M.Cu(i,0,0),l.tc(M,-(e+a.Pl()),-(h+a.El())))return _.Hn(n),!0}}return _.Hn(n),!1}E3t(t,s){if(t){const i=t.zO();i.WN()&&(this.QEt++,i.xN().su(s.rect))&&(t.KCt()?this.F3t(t,i,s):(this.s3t++,i.iEt()?s.D3t(t,i.jM(),i.HM(),i.eEt()):s.O3t(t,i.TN())))}}F3t(i,e,h){const r=e.jM(),n=e.HM(),o=b;i.L6().d3t(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.p3t();if(this.QEt++,h.rect.iu(l,r,n)){const u=a.m3t();this.s3t++,u?h.D3t(i,r+l.Pl(),n+l.El(),u):h.k3t(i,e.jM(),e.HM(),l)}}_.Hn(o)}jk(t,s){if(t!==this.$Et||s!==this.KEt){this.$Et=t,this.KEt=s;const i=this.bf.aJ();for(const e of i)if(e.TL()){for(const h of e.h5())h.zO().NPt();e.fCt().L3t(t,s),e.dCt();for(const r of e.h5()){const n=r.zO();n.pEt(),n.mCt()}}}}Uk(){return[this.$Et,this.KEt]}B3t(t,s){this.$Et=t,this.KEt=s}}}{const Ra=self.Ws;Ra.H_t=class extends Ra.dr{constructor(t,s){super(),this.d7=t,this.p7=s,this.m7=Ra.Sr(Ra.oc)}wr(){this.m7.wr(),this.m7=null}L3t(t,s){if(!this.m7.uc())throw new Error("grid not empty");this.d7=t,this.p7=s}g7(t,s,i){let e=this.m7.ni(t,s);return e||(i?(e=Ra.Sr(Ra.N3t,this,t,s),this.m7.Set(t,s,e),e):null)}y7(t){const s=Math.floor(t/this.d7);return isFinite(s)?s:0}S7(t){const s=Math.floor(t/this.p7);return isFinite(s)?s:0}w7(e,h,r){if(h)for(let i=h.Pl(),t=h.Fl();i<=t;++i)for(let t=h.El(),s=h.Dl();t<=s;++t)if(!r||!r.eu(i,t)){const n=this.g7(i,t,!1);n&&(n.E0(e),n.uc())&&this.m7.fc(i,t)}if(r)for(let i=r.Pl(),t=r.Fl();i<=t;++i)for(let t=r.El(),s=r.Dl();t<=s;++t)h&&h.eu(i,t)||this.g7(i,t,!0).l7(e)}b7(t,s){let i=this.y7(t.Pl()),e=this.S7(t.El()),h=this.y7(t.Fl()),r=this.S7(t.Dl());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.g7(i,t,!1);n&&n.c7(s)}}}}{const Aa=self.Ws;Aa.N3t=class extends Aa.dr{constructor(t,s,i){super(),this.i7=t,this.al=s,this.ll=i,this.e7=Aa.Sr(Aa.wc)}wr(){this.e7.wr(),this.e7=null,this.i7=null}uc(){return this.e7.uc()}l7(t){this.e7.Gc(t)}E0(t){this.e7.fc(t)}c7(t){Aa.Qh(t,this.e7.Tc())}}}{const Pa=self.Ws;Pa.W3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Pa.Rect,this.j3t=2,this.V3t=null,this.U3t=0,this.H3t=0,this.z3t=0,this.J3t=0,this.q3t=0,this.At=0,this.X3t=1,this.Y3t=0,this.$3t=1,this.K3t=0}Z3t(){return this.j3t<1+1e-6}b0(){this.j3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.j3t=2,this.V3t=null,this.U3t=0,this.H3t=0,this.z3t=0,this.J3t=0,this.q3t=0,this.At=0,this.X3t=1,this.Y3t=0,this.$3t=1,this.K3t=0,this}Q3t(){if(!1!==this.Z3t()){const t=this.dx*this.j3t,s=this.dy*this.j3t,i=Math.hypot(t,s),e=t/i,h=s/i,r=(this.At=i-1e-6,this.J3t=this.x1+e*this.At,this.q3t=this.y1+h*this.At,this.U3t=Math.atan2(this.z3t,this.H3t)+Math.PI/2,this.X3t=Math.cos(this.U3t),this.Y3t=Math.sin(this.U3t),e*this.X3t+h*this.Y3t);if(this.$3t=e-2*this.X3t*r,this.K3t=h-2*this.Y3t*r,0<r){const n=Math.PI;this.U3t=Pa._r(this.U3t+n),this.X3t=-this.X3t,this.Y3t=-this.Y3t}}}tFt(t,s,i,e,h){const r=Pa.bn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.j3t&&(this.j3t=r,this.V3t=t.f4(),this.H3t=s-e,this.z3t=i-h)}k3t(t,s,i,e){const h=s+e.Pl(),r=s+e.Fl(),n=i+e.El(),o=i+e.Dl();this.tFt(t,h,n,r,n),this.tFt(t,r,n,r,o),this.tFt(t,r,o,h,o),this.tFt(t,h,o,h,n)}O3t(t,s){const i=s.cn(),e=s.fn(),h=s.dn(),r=s.pn(),n=s.mn(),o=s.gn(),a=s.yn(),l=s.Sn();this.tFt(t,i,e,h,r),this.tFt(t,h,r,n,o),this.tFt(t,n,o,a,l),this.tFt(t,a,l,i,e)}D3t(i,e,h,t){const r=t.Ju();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,l=r[n]+e,u=r[1+n]+h;this.tFt(i,o,a,l,u)}}}}{const M=self.Ws,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Fa=new Set(["high","low"]),Da=self.xs,xh=Da.Is,Gh=Da.Ps,Oa=xh.create(),ka=M.Sr(M.ou),v=M.Sr(M.Rect);M.sFt=class extends M.dr{constructor(t){super(),this.bf=t,this.iFt=[],this.eFt=!1,this.hFt=null,this.rFt=null,this.nFt=null,this.oFt="high-performance",this.aFt=!1,this.lFt=0,this.uFt=0,this.cFt="",this.fFt=0,this.dFt=0,this.pFt=0,this.mFt=0,this.gFt=0,this.yFt=0,this.Yy="normalized",this.SFt=0,this.wFt=1,this.bFt=1e4,this.TS=!0,this.MFt=0,this.w3=0,this.b3=0,this.vFt="letterbox-scale",this.xFt="letterbox-scale",this.GFt=0,this.TFt=0,this._Ft=xh.create(),this.IFt="high",this.CFt=this.IFt,this.RFt=!1,this.AFt=[],this.PFt=new Set,this.EFt=self.C3_Shaders,this.FFt=M.Sr(M.Cy.ME,{yE:()=>[this.U9(),this.H9()],SE:()=>this.DFt(),wE:t=>this.OFt(t),getTime:()=>this.pk().sO(),bE:()=>this.pk().ZO()}),this.kFt=0,this.LFt=0,this.BFt=NaN,this.NFt=null,this.WFt=new Map,this.jFt=NaN,this.VFt=new Map,this.UFt="",this.HFt=1,this.zFt=M.Sr(M.Rect),this.JFt="",this.qFt=null,this.XFt=null,this.YFt=0,this.$Ft=0,this.KFt=-1,this.ZFt=0,this.QFt=t=>this.ZFt=t.progress,this.tDt=null,this.sDt={iDt:null,eDt:null,hDt:null},this.rDt=0,this.nDt=0,this.oDt=0,this.aDt="fade-in",this.lDt=null,this.uDt=new Promise(t=>this.lDt=t)}cDt(t){this.oFt=t}fDt(t){this.eFt=!!t}dDt(t){this.Yy=t}pDt(){return this.Yy}mDt(t){this.SFt=t}gDt(t,s){this.wFt=t,this.bFt=s}yDt(t){this.aFt=!!t}async Lo(t){let s=t.canvas,i=(this.iFt.push({canvas:s,SDt:null}),this.bf.U4("runtime","window-resize",t=>this.wDt(t)),this.bf.U4("runtime","fullscreenchange",t=>this.bDt(t)),this.bf.U4("runtime","fullscreenerror",t=>this.MDt(t)),s.addEventListener("webglcontextlost",t=>this.vDt(t)),s.addEventListener("webglcontextrestored",t=>this.xDt(t)),this.RFt=!!t.isFullscreen,this.cFt=t.cssDisplayMode,navigator.gpu&&this.eFt),e=!1;if(i)try{await this.GDt(!0)}catch(t){this.TDt("WebGPU",t),this.rFt=null}if(!this.uM())try{await this._Dt(!0)}catch(t){this.TDt("WebGL",t),this.hFt=null}if(this.uM()||(e=!0),!this.uM()&&i)try{await this.GDt(!1)}catch(t){this.TDt("WebGPU",t),this.rFt=null}if(!this.uM())try{await this._Dt(!1)}catch(t){this.TDt("WebGL",t),this.hFt=null}const h=this.uM();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Fb(e),this.rFt&&(this.rFt.IDt=()=>this.CDt(),this.rFt.RDt=()=>this.ADt()),"normalized"===this.Yy?h.VS():(h.US(),h.WS(this.SFt)),this.CC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.EEt()}TDt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async GDt(t){const s={Vy:this.wFt,Uy:this.bFt},i={powerPreference:this.oFt,depth:this.bf.$J(),failIfMajorPerformanceCaveat:t,PDt:this.bf.Q9(),EDt:this.bf.FDt(),LR:this.bf.DDt()};this.rFt=M.Sr(M.Cy.WebGPURenderer,s),await this.rFt.Bx(this.iFt[0].canvas,i)}async _Dt(t){const s={alpha:!0,powerPreference:this.oFt,kR:"xbox-uwp-webview2"!==this.bf.Qk(),depth:this.bf.$J(),LR:this.bf.DDt(),failIfMajorPerformanceCaveat:t,Vy:this.wFt,Uy:this.bFt};this.aFt&&(s.BR=1),this.hFt=M.Sr(M.Cy.jR,this.iFt[0].canvas,s),await this.hFt.AS()}async ODt(){if(this.EFt){const t=[];for(const[s,i]of Object.entries(this.EFt)){i.src=i.kDt;const e=M.Cy.WebGPUShaderProgram.hT();t.push(this.rFt.HA(Object.assign({Ox:e,name:s},i)))}await Promise.all(t)}}async LDt(){if(this.EFt){const s=[];for(const[i,e]of Object.entries(this.EFt)){let t;if(e.BDt&&2<=this.hFt.u2())e.src=e.BDt,t=M.Cy.Fx.rT();else{if(!e.NDt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.NDt,t=M.Cy.Fx.hT()}s.push(this.hFt.HA(Object.assign({Ox:t,name:i},e)))}await Promise.all(s),this.hFt.zA(),this.hFt.iw()}this.hFt.hE()&&(this.NFt=M.Sr(M.Cy._R,this.hFt))}async EEt(){this.rFt?await this.ODt():this.hFt&&await this.LDt();const t=this.uM();t.Pb(this.TS),t.hE()&&(this.BFt=0);for(const s of this.bf.WDt()){for(const i of s.w5())i.EEt(t);s.EEt(t),s.iW()}this.nFt=new self.wV(this.bf,t)}wr(){this.bf=null,this.hFt=null,this.iFt.length=0}pD(){return this.bf.pD()}wDt(t){const s=this.bf;if(!s.jDt()){const i=t.devicePixelRatio,e=(this.pD()&&(self.devicePixelRatio=i),s.VDt(i),this.RFt=!!t.isFullscreen,this.cFt=t.cssDisplayMode,this.CC(t.innerWidth,t.innerHeight),s.ZO(),new M.Event("window-resize")),h=(e.data=t,s.Qf().l0(e),new M.Event("resize"));h.UDt=this.oL(),h.HDt=this.lL(),h.zDt=this.cL(),h.JDt=this.dL(),s.i$(h),s.e$()&&(s.P1t()||self.C3Debugger.IsDebuggerPaused())&&s.Y3()}}bDt(t){this.RFt=!!t.isFullscreen,this.CC(t.innerWidth,t.innerHeight,!0),this.bf.ZO()}MDt(t){this.RFt=!!t.isFullscreen,this.CC(t.innerWidth,t.innerHeight,!0),this.bf.ZO()}CC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.lFt!==t||this.uFt!==s||i){this.lFt=t,this.uFt=s;const e=this.qDt();"letterbox-scale"===e?this.XDt(t,s):"letterbox-integer-scale"===e?this.YDt(t,s):"off"===e?this.$Dt(t,s):this.KDt(t,s),this.ZDt(e);for(const{canvas:n}of this.iFt)n.width=this.pFt,n.height=this.mFt;this.bf.xf("canvas","update-size",{marginLeft:this.gFt,marginTop:this.yFt,styleWidth:this.fFt,styleHeight:this.dFt,displayScale:this.wj()});const h=this.uM();h.CC(this.pFt,this.mFt,!0);for(const o of this.AFt)h.ZP(o);M.Hn(this.AFt),this.QDt();const r=this.bf._O();r.T$(),r._$()}}QDt(){this.uM().zS(this._Ft,this.U9()/this.H9())}z9(){return this._Ft}XDt(t,s){const i=this.bf.pL(),e=this.bf.gD(),h=this.bf.SD(),r=e/h,n=t/s;if(r<n){const o=s*r;this.fFt=Math.round(o),this.dFt=s,this.gFt=Math.floor((t-this.fFt)/2),this.yFt=0}else{const a=t/r;this.fFt=t,this.dFt=Math.round(a),this.gFt=0,this.yFt=Math.floor((s-this.dFt)/2)}this.pFt=Math.round(this.fFt*i),this.mFt=Math.round(this.dFt*i),this.bf.tOt(e,h)}YDt(t,s){let i=this.bf.pL(),e=(1!==i&&(t+=1,s+=1),this.bf.gD()),h=this.bf.SD(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.pFt=Math.round(e*o),this.mFt=Math.round(h*o),this.fFt=this.pFt/i,this.dFt=this.mFt/i,this.gFt=Math.max(Math.floor((t-this.fFt)/2),0),this.yFt=Math.max(Math.floor((s-this.dFt)/2),0),this.bf.tOt(e,h)}KDt(t,s){const i=this.bf.pL(),e=(this.fFt=t,this.dFt=s,this.pFt=Math.round(this.fFt*i),this.mFt=Math.round(this.dFt*i),this.gFt=0,this.yFt=0,this.wj());this.bf.tOt(this.fFt/e,this.dFt/e)}$Dt(t,s){const i=this.bf.pL();this.fFt=this.bf.WJ(),this.dFt=this.bf.jJ(),this.pFt=Math.round(this.fFt*i),this.mFt=Math.round(this.dFt*i),this.sOt()?(this.gFt=Math.floor((t-this.fFt)/2),this.yFt=Math.floor((s-this.dFt)/2)):(this.gFt=0,this.yFt=0),this.bf.tOt(this.bf.WJ(),this.bf.jJ())}ZDt(i){if("high"===this.IFt)this.w3=this.pFt,this.b3=this.mFt,this.CFt="high";else{let t,s;if(s="off"===this.qDt()?(t=this.bf.WJ(),this.bf.jJ()):(t=this.bf.gD(),this.bf.SD()),this.pFt<t||this.mFt<s)this.w3=this.pFt,this.b3=this.mFt,this.CFt="high";else if(this.w3=t,this.b3=s,this.CFt="low","scale-inner"===i){const e=t/s,h=this.lFt/this.uFt;h<e?this.w3=this.b3*h:e<h&&(this.b3=this.w3/h)}else if("scale-outer"===i){const r=t/s,n=this.lFt/this.uFt;r<n?this.w3=this.b3*n:n<r&&(this.b3=this.w3/n)}}}pk(){return this.bf}iOt(){return this.iFt[0].canvas}Mz(){return this.FFt}sOt(){return this.RFt}eOt(){return this.cFt}hOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.vFt=t;const s=this.bf._O();s.T$(),s._$()}yj(){return this.vFt}rOt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.xFt=t;const s=this.bf._O();s.T$(),s._$()}nOt(){return this.xFt}qDt(){return this.sOt()?this.nOt():this.yj()}oOt(t){if(!Fa.has(t))throw new Error("invalid fullscreen scaling quality");this.IFt=t,this.bf._O().T$()}aOt(){return this.IFt}tq(){return this.CFt}static lOt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}ej(){return this.lFt}hj(){return this.uFt}U9(){return this.w3}H9(){return this.b3}Pb(t){this.TS=!!t}uOt(t){this.MFt=t}$H(){return this.MFt}cOt(){return this.uM().eR()}vDt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.AFt=[],this.PFt.clear(),this.FFt.EM(),this.hFt.EM(),this.bf.sY()}CDt(){console.log("[Construct] WebGPU device lost"),this.AFt=[],this.PFt.clear(),this.FFt.EM(),this.bf.sY()}async xDt(t){await this.hFt.FM(),await this.EEt(),await this.bf.fOt(),console.log("[Construct] WebGL context restored")}async ADt(){await this.EEt(),await this.bf.fOt(),console.log("[Construct] WebGPU device restored")}dOt(){return this.hFt}pOt(){return this.rFt}uM(){return this.rFt||this.hFt}jIt(){return this.nFt}iL(){let t="";return t=this.bf.pOt()?"webgpu":"webgl"+this.bf.dOt().u2(),this.bf.uM().Db()&&(t+="-software"),t}rL(){return this.bf.pOt()?this.bf.pOt().GetAdapterInfoString():this.bf.dOt().dE()}$B(){return"low"===this.CFt?1/this.bf.pL():this.wj()}wj(){const t=this.qDt();if("off"===t||"crop"===t)return 1;const s=this.bf.gD(),i=this.bf.SD(),e=s/i,h=this.pFt/this.mFt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.dFt/i:this.fFt/s}Tq(){return"low"===this.tq()?1:this.wj()}xq(){return"low"===this.tq()?1:this.bf.pL()}mOt(t,s){this.GFt=t,this.TFt=s}hU(s,i,e,t=!0){i=i||this.w3,e=e||this.b3;const h=i/2+this.GFt,r=e/2+this.TFt;if(t){let t=this.z9();i===this.w3&&e===this.b3||(s.zS(Oa,i/e),t=Oa),s.qA(t)}const n=s.YS(h,r,s.ES(e),h,r,0,e);s.QA(n)}gOt(t,s=!0){const i=this.oL(),e=this.lL(),h=i/2,r=e/2,n=(s&&t.qA(this.z9()),t.YS(h,r,t.ES(e),h,r,0,e));t.QA(n)}cL(){return this.pFt}dL(){return this.mFt}oL(){return this.fFt}lL(){return this.dFt}jB(){return this.gFt}VB(){return this.yFt}BX(){return this.iFt.length}yOt(){return"undefined"!=typeof OffscreenCanvas&&this.iOt()instanceof OffscreenCanvas&&("Chromium"!==M.di.bi||124<=M.di.wi)}async nY(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.iFt.length!==e){let t=this.bf._O().xO(),s={count:e,layersDomState:t.gJ().filter(t=>t.dB()).map(t=>t.w9()),immediate:h,marginLeft:this.gFt,marginTop:this.yFt,styleWidth:this.fFt,styleHeight:this.dFt},i;if(i=this.pD()?await this.bf.sk("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.iFt.length)this.iFt.length=e;else for(const r of i.addedCanvases){r.width=this.pFt,r.height=this.mFt;const n=this.yOt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.iFt.push({canvas:r,SDt:o})}this.bf.ZO()}}QY(t){if(!(t>=this.iFt.length)){const s=this.iOt(),i=this.iFt[t].SDt;this.yOt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}sq(s){s.depth=this.bf.$J();let t=this.AFt,i=t.findIndex(t=>t.Ix(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.uM().qP(s),this.PFt.add(e),e}xz(t){if(!this.PFt.has(t))throw new Error("render target not in use");this.PFt.delete(t),this.AFt.push(t)}DFt(){const t={Hv:this.bf.wD()};return"low"===this.tq()&&(t.width=this.U9(),t.height=this.H9()),this.sq(t)}OFt(t){this.xz(t)}*SOt(){for(const t of this.bf._O().v$())for(const s of t.F5()){const i=this.WFt.get(s);i&&(yield i)}}Y9(t){if(!this.uM().hE())return null;let s=this.WFt.get(t);return s||(s={pN:t,name:t.cf(),wOt:M.Sr(M.Cy._R,this.hFt),bOt:0,MOt:0,vOt:0},this.WFt.set(t,s)),s.wOt}xOt(){const t=this.uM();if(t.hE()&&0===this.LFt){this.LFt=t.Rb(),this.jFt=NaN;for(const s of this.SOt())s.bOt=NaN}}GOt(){this.hFt&&this.hFt.hE()&&this.TOt(),this.rFt&&this.rFt.hE()&&this._Ot()}TOt(){if(isNaN(this.jFt)&&(this.jFt=this.NFt.FR(this.kFt,this.LFt),!isNaN(this.jFt))){if(this.bf.e$())for(const t of this.SOt())if(t.bOt=t.wOt.FR(this.kFt,this.LFt),isNaN(t.bOt))return;if(this.NFt.DR(this.LFt),this.BFt=Math.min(this.jFt,1),this.bf.e$()){const i=new Map;for(const h of this.SOt())h.wOt.DR(this.LFt),h.MOt=Math.min(h.bOt,1),i.set(h.pN,h.MOt);for(const r of this.SOt()){const n=r.pN,o=i.get(n)||0,a=o-n.eB().reduce((t,s)=>t+(i.get(s)||0),0);r.vOt=M.Tr(a,0,1)}const s=this.bf.xO(),e=this.BFt-s.gJ().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Tr(e,0,1),this.BFt,[...this.SOt()])}this.kFt=this.LFt,this.LFt=0}}IOt(){return this.NFt}_Ot(){if(0!==this.LFt){for(let t=this.kFt;t<this.LFt;++t){const i=this.VFt.get(t);if(i&&!i.mR())return}let t=this.bf.xO(),n=M.Xo(t.EX()+1,0),s=0;for(let t=this.kFt;t<this.LFt;++t){const o=this.VFt.get(t);if(o){let i=o.gR(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;n[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.BFt=M.Tr(s,0,1),this.bf.e$()){const e=t.F5(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,S]of h){const w=[...y.rB()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.cf(),vOt:M.Tr(S,0,1),MOt:M.Tr(w,0,1)})}const m=this.BFt-t.gJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Tr(m,0,1),this.BFt,r)}for(let t=this.kFt;t<this.LFt;++t)this.VFt.delete(t);this.kFt=this.LFt,this.LFt=0}}COt(t){this.VFt.set(this.rFt.Rb(),t)}fO(){return this.BFt}ROt(t,s,i,e,h,r){return this.UFt=t,this.HFt=s,this.zFt.xl(i,e,h,r),this.qFt||(this.qFt=new Promise(t=>{this.XFt=t})),this.qFt}AOt(){if(this.UFt){let t=this.iOt(),s=this.zFt,i=M.Tr(Math.floor(s.Pl()),0,t.width),e=M.Tr(Math.floor(s.El()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:M.Tr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:M.Tr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=M.Lo(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}M.Bo(t,this.UFt,this.HFt).then(t=>{this.JFt&&URL.revokeObjectURL(this.JFt),this.JFt=URL.createObjectURL(t),this.qFt=null,this.XFt(this.JFt)}),this.UFt="",this.HFt=1}}POt(){return this.JFt}EOt(t){t?this.YFt++:this.YFt--}FOt(){return 0<this.YFt}DOt(t){const s=this.uM();if(2===t)this.tDt=M.Sr(M.Cy.jb,this.uM()),this.tDt.hC("Arial"),this.tDt.rC(16),this.tDt.wC("center"),this.tDt.MC("center"),this.tDt.CC(300,200);else if(0===t){const i=this.bf.OOt();i&&i.$V(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.kOt("splash-images/splash-logo.svg").then(t=>{"done"===this.aDt?s.nx(t):this.sDt.iDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.LOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.aDt?s.nx(t):this.sDt.eDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.LOt("splash-images/splash-website-512.png").then(t=>{"done"===this.aDt?s.nx(t):this.sDt.hDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async kOt(t){t=new URL(t,this.bf.BOt()).toString();const s=await M.Ao(t),i=await this.bf.NOt(s,2048,2048);return this.uM().JP(i,{Xv:"high"})}async LOt(t){t=new URL(t,this.bf.BOt()).toString();const s=await M.Ao(t);return this.uM().JP(s,{Xv:"high"})}WOt(){this.bf.xf("runtime","hide-cordova-splash")}jOt(){this.$Ft=Date.now(),this.bf.Qf().addEventListener("loadingprogress",this.QFt),this.KFt=requestAnimationFrame(()=>this.VOt());const t=this.bf.UOt();3!==t&&this.WOt()}async HOt(){const t=this.uM(),s=(this.ZFt=1,this.bf.UOt());4===s&&await this.uDt,this.lDt=null,this.uDt=null,-1!==this.KFt&&(cancelAnimationFrame(this.KFt),this.KFt=-1),this.bf.Qf().removeEventListener("loadingprogress",this.QFt),this.QFt=null,this.tDt&&(this.tDt.wr(),this.tDt=null),this.bf.zOt(),t.kP(),this.sDt.iDt&&(t.nx(this.sDt.iDt),this.sDt.iDt=null),this.sDt.eDt&&(t.nx(this.sDt.eDt),this.sDt.eDt=null),this.sDt.hDt&&(t.nx(this.sDt.hDt),this.sDt.hDt=null),t.OP(0,0,0,0),t.Ib(),this.aDt="done",this.kFt=t.Rb(),3===s&&this.WOt()}VOt(){if(-1!==this.KFt){const t=this.uM(),s=(t.kP(),this.KFt=-1,this.bf.eD().xH()),i=this.bf.UOt();if(3!==i&&(this.gOt(t),t.OP(0,0,0,0),t.oP(),t.iw(),t.lP(null)),0===i)this.JOt(s);else if(1===i)this.qOt(s,120,0);else if(2===i)this.XOt(s);else if(3===i)M.Wn();else{if(4!==i)throw new Error("invalid loader style");this.YOt(s)}t.Ib(),this.KFt=requestAnimationFrame(()=>this.VOt())}}XOt(t){t?this.tDt.SC(1,0,0):this.tDt.SC(.6,.6,.6),this.tDt.Gf(Math.round(100*this.ZFt)+"%");const s=this.fFt/2,i=this.dFt/2,e=(ka.gu(s-150,i-100,150+s,100+i),this.uM());e.lP(this.tDt.yx()),e.Kw(ka,this.tDt.rR())}qOt(t,s,i){const e=this.uM(),h=(e.lw(),t?e.rP(1,0,0,1):e.rP(.118,.565,1,1),this.fFt/2),r=this.dFt/2,n=s/2;v.xl(h-n,r-4+i,Math.floor(s*this.ZFt),8),e.Rect(v),v.xl(h-n,r-4+i,s,8),v.offset(-.5,-.5),v.Hl(.5,.5),e.rP(0,0,0,1),e.ib(v),v.Hl(1,1),e.rP(1,1,1,1),e.ib(v)}JOt(t){const s=this.uM(),i=this.bf.OOt();if(i){const e=i.yx();if(e){const h=e.Pm(),r=e.jm(),n=this.fFt/2,o=this.dFt/2,a=h/2,l=r/2;ka.gu(n-a,o-l,n+a,o+l),s.lP(e),s.ou(ka),this.qOt(t,h,16+l)}else this.qOt(t,120,0)}else this.qOt(t,120,0)}YOt(t){let s=this.uM(),i=this.sDt.iDt,e=this.sDt.eDt,h=this.sDt.hDt,r=Date.now(),n=(0===this.rDt&&(this.$Ft=r),this.bf.$Ot()||this.bf.KOt()&&!this.bf.ZOt()),o=n?0:200,a=n?0:3e3,l=1,u=("fade-in"===this.aDt?l=Math.min((r-this.$Ft)/300,1):"fade-out"===this.aDt&&(l=Math.max(1-(r-this.oDt)/300,0)),s.lw(),s.rP(.231*l,.251*l,.271*l,l),v.set(0,0,this.fFt,this.dFt),s.Rect(v),Math.ceil(this.fFt)),c=Math.ceil(this.dFt),f,d;256<this.dFt?(s.rP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),v.xl(0,.8*c-d/2,f,d),s.Rect(v),t?s.rP(l,0,0,l):s.rP(.161*l,.953*l,.816*l,l),f=u*this.ZFt,v.xl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(v),s.rP(l,l,l,l),s.iw(),e&&(f=1.5*M.Tr(.22*c,105,.6*u),d=f/8,v.xl(.5*u-f/2,.2*c-d/2,f,d),s.lP(e),s.Rect(v)),i&&(f=Math.min(.395*c,.95*u),d=f,v.xl(.5*u-f/2,.485*c-d/2,f,d),s.lP(i),s.Rect(v)),h&&(f=1.5*M.Tr(.22*c,105,.6*u),d=f/8,v.xl(.5*u-f/2,.868*c-d/2,f,d),s.lP(h),s.Rect(v))):(s.rP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),v.xl(0,.85*c-d/2,f,d),s.Rect(v),t?s.rP(l,0,0,l):s.rP(.161*l,.953*l,.816*l,l),f=u*this.ZFt,v.xl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(v),s.rP(l,l,l,l),s.iw(),i&&(f=.55*c,d=f,v.xl(.5*u-f/2,.45*c-d/2,f,d),s.lP(i),s.Rect(v))),this.rDt++,"fade-in"===this.aDt&&300<=r-this.$Ft&&2<=this.rDt&&(this.aDt="wait",this.nDt=r),"wait"===this.aDt&&r-this.nDt>=a&&1<=this.ZFt&&(this.aDt="fade-out",this.oDt=r),("fade-out"===this.aDt&&r-this.oDt>=300+o||n&&1<=this.ZFt&&r-this.$Ft<500)&&this.lDt()}}}{let V=self.Ws,U=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;V.QOt=class extends V.dr{constructor(t){t=Object.assign({},i,t),super(),this.tkt=t.messagePort,this.skt=t.runtimeBaseUrl,this.ikt=t.previewUrl,this.ekt=!!t.headless,this.hkt=!!t.hasDom,this.rkt=!!t.isInWorker,n=t.ife,this.nkt=!!t.useAudio,this.okt=t.exportType,this.akt=t.isNWjs,this._U=!!t.isiOSCordova,this.lkt=!!t.isiOSWebView,this.ukt=!!t.isWindowsWebView2,this.ckt=!!t.isAnyWebView2Wrapper,this.fkt=!!t.isFBInstantAvailable,this.dkt=!("preview"!==this.okt||!t.isDebug),this.pkt=this.dkt,this.mkt=this.dkt,this.gkt=0,this.ykt=[],this.Skt=[],this.wkt=!1,this.bkt="",this.Mkt="",this.vkt="",this.xkt="",this.Gkt=0,this.Tkt=0,this.C3=self.devicePixelRatio,this._kt=0,this.Ikt=0,this.Ckt=0,this.Rkt=0,this.Akt=0,this.Pkt=!1,this.ey=!0,this.Ekt=!1,this.Fkt=!1,this.Dkt=!1,this.Okt=null,this.LH=V.Sr(V.vU,this,t),this.jq=V.Sr(V.n$,this),this.t0t=V.Sr(V.K0t,this),this.kkt=V.Sr(V.bL,this,t.wrapperComponentIds),this.Lkt=V.Sr(V.YEt,this),this.NQ=V.Sr(V.I$,this),this.Bkt=V.Sr(V.Vlt,this),this.Nkt=V.Sr(V.Hlt,this),this.hut=V.Sr(V.Zlt,this),this.Kg=V.Sr(V.Ng,{Vg:t=>this.Wkt(t),Hg:t=>this.jkt(t)}),this.Vkt=new Map,this.Ukt=[],this.Hkt=new Map,this.zkt=new Map,this.Jkt=0,this.qkt=[],this.Xkt=new Set,this.Ykt=[],this.$kt=[],this.Kkt=new Map,this.Zkt=!1,this.Qkt=!1,this.tLt=0,this.sLt=0,this.iLt=new Map,this.eLt=new Set,this.hLt=new Set,this.rLt=[],this.nLt=[],this.oLt=null,this.aLt=!1,this.lLt="vsync",this.s2="trilinear",this.uLt=!1,this.cLt=!0,this.fLt=!1,this.dLt=!1,this.pLt=null,this.mLt={gLt:t=>{this.KFt=-1,this.yLt=-1,this.KK(t)},SLt:t=>{this.yLt=-1,this.KK(t,!1,"skip-render")},wLt:()=>{this.KFt=-1,this.Y3()}},this.KFt=-1,this.yLt=-1,this.bLt=0,this.MLt=0,this.vLt=!1,this.xLt=!1,this.GLt=!1,this.TLt=!0,this._Lt=!0,this.ILt=!1,this.CLt=0,this.RLt=new V.Cd(1),this.ALt=()=>Math.random(),this.PLt=0,this.ELt=0,this.FLt=0,this.DLt=0,this.OLt=0,this.BCt=1,this.kLt=1/30,this.LLt=0,this.BLt=V.Sr(V.D0),this.NLt=V.Sr(V.D0),this.WLt=V.Sr(V.D0),this.jLt=new Map,this.VLt=-1,this.ULt=0,this.HLt=0,this.zLt=-1,this.JLt=0,this.qLt=0,this.XLt=0,this.YLt=!1,this.$Lt="",this.KLt=!1,this.ZLt="",this.sN=null,this.QLt="",this.t5t=null,this.s5t=null,this.V_t=V.Sr(V.Event.Qf),this.i5t=new Map,this.e5t=new Map,this.h5t=0,this.r5t=!1,this.n5t=!1,this.o5t=!1,this.a5t=[],this.l5t={pretick:V.Sr(V.Event,"pretick",!1),tick:V.Sr(V.Event,"tick",!1),tick2:V.Sr(V.Event,"tick2",!1),instancecreate:V.Sr(V.Event,"instancecreate",!1),instancedestroy:V.Sr(V.Event,"instancedestroy",!1),beforelayoutchange:V.Sr(V.Event,"beforelayoutchange",!1),layoutchange:V.Sr(V.Event,"layoutchange",!1)},this.l5t.instancecreate.X6=null,this.l5t.instancedestroy.X6=null,this.wX=V.Sr(V.Event.Qf),this.u5t=null;const s=(t,s)=>V.kCt.wEt(this,t,s);this.c5t=V.Sr(V.U0,s),this.f5t=V.Sr(V.U0,s),this.d5t=V.Sr(V.U0,s),this.p5t=V.Sr(V.m5t,this,t.jobScheduler),t.canvas&&(this.oLt=V.Sr(V.sFt,this)),this.tkt.onmessage=t=>this._OnMessageFromDOM(t.data),this.U4("runtime","visibilitychange",t=>this.g5t(t)),this.U4("runtime","wrapper-extension-message",t=>this.y5t(t)),this.U4("runtime","opus-decode",t=>this.Ik(t.arrayBuffer)),this.U4("runtime","get-remote-preview-status-info",()=>this.S5t()),this.U4("runtime","js-invoke-function",t=>this.Tdt(t)),this.U4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.U4("runtime","offline-audio-render-completed",t=>this.w5t(t)),this.V_t.addEventListener("window-blur",t=>this.b5t(t)),this.V_t.addEventListener("window-focus",()=>this.M5t()),this.NQ.nK(),this.Nkt.nK(),this.v5t=null,this.x5t=new WeakMap,this.G5t={keyboard:null,DO:null,OO:null,kO:null},this.T5t=new WeakMap,this._5t=[]}static Bx(t){return V.Sr(V.QOt,t)}wr(){V.Hn(this.Ukt),this.Hkt.clear(),this.zkt.clear(),this.jq.wr(),this.jq=null,this.t0t.wr(),this.t0t=null,this.kkt.wr(),this.kkt=null,this.LH.wr(),this.LH=null,this.Lkt.wr(),this.Lkt=null,this.NQ.wr(),this.NQ=null,this.Bkt.wr(),this.Bkt=null,this.Nkt.wr(),this.Nkt=null,this.hut.wr(),this.hut=null,this.Kg.wr(),this.Kg=null,this.oLt&&(this.oLt.wr(),this.oLt=null),this.V_t.wr(),this.V_t=null,this.I5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.C5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.R5t(t)}}C5t(t){if(this.o5t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new V.Event(i);l.data=e,this.V_t.l0(l)}if(n){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.i$(u)}}const a=this.i5t.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.A5t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.A5t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.A5t(o,!1,""+t)}):this.A5t(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.a5t.push(t)}A5t(t,s,i){this.tkt.postMessage({type:"result",responseId:t,isOk:s,result:i})}R5t(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.e5t.get(s);i?h.resolve(e):h.reject(e),this.e5t.delete(s)}U4(t,s,i){let e=this.i5t.get(t);if(e||(e=new Map,this.i5t.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}xf(t,s,i,e){this.tkt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}sk(t,s,i,e){const h=this.h5t++,r=new Promise((t,s)=>{this.e5t.set(h,{resolve:t,reject:s})});return this.tkt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}Vj(t,s,i,e=-1){this.xf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}Uj(t,s,i){const e=this.h5t++,h=new Promise((t,s)=>{this.e5t.set(e,{resolve:t,reject:s})});return this.Vj(t,s,i,e),h}y5t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.e5t.get(s);i.resolve(t.params),this.e5t.delete(s)}else this.C5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}rN(t,s,i){this.U4("wrapper-extension:"+t,s,i)}eN(t){return this.kkt.eN(t)}P5t(t){if(!this.e$())throw new Error("not in debug mode");this.xf("runtime","post-to-debugger",t)}async jCt(t){V.pMt(this),this.e$()?await U.jCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.LH.Ro("data.json"),this.E5t(),this.p5t.jCt()]);if(await this.F5t(s),await this.D5t(t),this.$Ot()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.dOt()){const i=this.dOt();console.info(`[C3 runtime] Hosted in ${this.pD()?"worker":"DOM"}, rendering with WebGL ${i.u2()} [${i.dE()}]`)}else this.pOt()&&console.info(`[C3 runtime] Hosted in ${this.pD()?"worker":"DOM"}, rendering with WebGPU [${this.pOt().GetAdapterInfoString()}]`);this.uM().Db()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.o5t=!0;for(const e of this.a5t)this.C5t(e);V.Hn(this.a5t),this.oLt&&this.oLt.jOt();for(const h of t.runOnStartupFunctions)this.ykt.push(this.O5t(h));if(await Promise.all([this.LH.MH(),...this.ykt]),V.Hn(this.ykt),!this.LH.xH())return this.oLt&&await this.oLt.HOt(),await this.V_t.o0(new V.Event("beforeruntimestart")),await this.kP(),this.tkt.postMessage({type:"runtime-ready"}),this;this.oLt&&this.oLt.WOt()}async O5t(t){try{await t(this.v5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async F5t(t){const s=t.project,i=(this.bkt=s[0],this.Mkt=s[16],this.vkt=s[31],this.xkt=s[38],s[39]||"loading-logo.png"),e=(this.uLt=!!s[9],this.Gkt=this.Ckt=s[10],this.Tkt=this.Rkt=s[11],this.Lkt.B3t(this.Gkt,this.Tkt),this._kt=this.Gkt/2,this.Ikt=this.Tkt/2,this.lLt=s[37],this.aLt=!!s[40],this.s2=s[14],this.Ekt=s[15],this.Fkt=s[42],this.Dkt=s[17],this.Pkt=!!s[18],this.Akt=s[19],this.sLt=s[21],this.fLt=s[22],this.LH);if(e.ZU(s[45]),e.CH(s[7],s[25]),e.tH(s[8]),e.sH(s[32]),e.eH(s[28]),e.TH(s[29]),0===this.Akt){let t;(t="flat"===e.vk()?e.hH()+i:i)&&(this.Okt=e.pH({url:t}))}this.oLt&&(this.oLt.hOt(V.sFt.lOt(s[12])),this.oLt.oOt(s[23]?"high":"low"),this.oLt.Pb(0!==s[24]),this.oLt.cDt(s[34]),this.oLt.uOt(s[41]),this.oLt.fDt(s[13]),this.oLt.dDt(s[30]),this.oLt.gDt(s[46],s[47]),this.oLt.mDt(s[26]),this.oLt.yDt(s[48]));const h=s[43],r=(h&&await this.k5t(h),this.L5t(),this.kkt.ITt(),this.rLt=self.B5t(),s[2]);for(const l of r[1])this.kkt.CTt(l);for(const u of r[0])this.kkt._Tt(u);this.rLt=self.B5t(),this.N5t(),this.kkt.DTt();for(const c of s[3]){const f=V.Ylt.Bx(this,this.Ukt.length,c);this.Ukt.push(f),this.Hkt.set(f.cf().toLowerCase(),f),this.zkt.set(f.yJ(),f)}for(const d of s[4]){const p=this.Ukt[d[0]];p._It(d)}for(const m of s[27]){const g=m.map(t=>this.Ukt[t]);this.qkt.push(V.Sr(V.TCt,this,g))}this.W5t();for(const y of this.Ukt)y.CIt();for(const S of s[5])this.jq.Bx(S);const n=s[1];if(n){const w=this.jq.y$(n);w&&this.jq.m$(w)}for(const b of s[35])this.Bkt.Bx(b);for(const M of s[33])this.NQ.Bx(M);for(const v of s[44])this.Nkt.Bx(v);this.Nkt.qlt()||(this.Nkt.wr(),this.Nkt=null);for(const x of s[49])this.hut.Bx(x);this.hut.iut()||(this.hut.wr(),this.hut=null);for(const G of s[6])this.t0t.Bx(G);this.t0t.Cdt(),this.j5t(),V.Hn(this.rLt),this.g5();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.xf("runtime","set-target-orientation",{targetOrientation:o})}async k5t(t){const s=t.format;"image-sequence"===s?this.pLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.pLt=new self.C3ExportToGIF(this,t):"webm"===s?this.pLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.pLt=new self.C3ExportToMP4Video(this,t)),this.lLt="unlimited-frame",this.oLt.hOt("off"),this.C3=1,self.devicePixelRatio=1,await this.sk("runtime","set-exporting-to-video",{message:this.pLt.GetExportingMessageForPercent(0),duration:this.pLt.vW()})}UOt(){return this.Akt}jDt(){return null!==this.pLt}V5t(){return this.pLt.vW()}U5t(){return this.pLt.GetFramerate()}H5t(){return this.pLt.jCt({width:this.oLt.cL(),height:this.oLt.dL()})}z5t(){const t=this.bLt/this.U5t();return this.pLt.AddFrame(this.oLt.iOt(),t)}J5t(){this.pLt&&this.pLt.Xit()}w5t(t){this.pLt.OnOfflineAudioRenderCompleted(t)}q5t(){return this.pLt.Ib()}KOt(){return this.fkt}uy(){return this.ey}rk(t){this.ykt.push(t)}lY(t){this.wkt=!!t}X5t(t){this.wkt&&this.Skt.push(t)}mY(){return this.Skt}wIt(){return this.Jkt++}AIt(){return this.Jkt}CEt(t){this.Xkt.add(t)}REt(t){this.Xkt.delete(t)}WDt(){return this.Xkt}async D5t(t){this.oLt&&(await this.oLt.Lo(t),this.oLt.DOt(this.Akt))}async E5t(){const h=this.LH;if(!h.lk("audio/webm; codecs=opus")){let t=null,s=h.QU(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.Y5t()&&h.rH()?await h.oH(e):await h.Po(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.$5t(t,"opus-decoder-wasm"),await this.K5t([i])}}async Ik(t){const s=await this.Z5t("OpusDecode",{arrayBuffer:t},[t]);return s}async kP(){this.vLt=!0,this.PLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.Pkt){for(const h of this.Ukt)h.lJ()||h.NIt()||!h.TL()||h._xt();(async()=>{await this.LH.MH(),await t,this.ey=!1,this.Q5t()})()}else this.ey=!1;this.LH.vH(),this.e$()&&U.RuntimeInit(n);for(const r of this.jq.RO())r.FY();this.jDt()&&await this.H5t();const i=this.jq.g$(),e=(await i.JX(null,this.uM()),await i.iY(!0),this.ULt=performance.now(),s(),this.Pkt||this.Q5t(),await this.sk("runtime","before-start-ticking"));e.isSuspended&&!this.jDt()?(this.CLt++,this.ILt=!0):this.KK()}Q5t(){this.N4(V._Y.TY.GY.tBt,null,null),this.xf("runtime","register-sw")}Dyt(t){t=Math.floor(t);const s=this.rLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}N5t(){for(const t of self.sBt){const s=V.first(Object.keys(t));this.nLt.push(s)}}Zdt(t){t=Math.floor(t);const s=this.nLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}iBt(){return this.hkt}eBt(){return this.ekt}pD(){return this.rkt}BOt(){return this.skt}hBt(){return this.ikt}AD(){return this.t0t}UD(){return this.t0t.UD()}Vdt(){return this.t0t.Vdt()}kD(){return this.t0t.kD()}Udt(){return this.t0t.Udt()}fMt(){return 0===this.Vdt().w0t()}zdt(){return this.t0t.zdt()}yEt(){return this.kkt}PSt(){return this.kkt.PSt()}Bz(t){if((t=Math.floor(t))<0||t>=this.Ukt.length)throw new RangeError("invalid index");return this.Ukt[t]}rBt(t){return this.Hkt.get(t.toLowerCase())||null}Zj(t){return this.zkt.get(t)||null}frt(t){const s=V.bL.NL(t);return s?s.UL():null}aJ(){return this.Ukt}*nBt(){for(const t of this.Ukt)t.lJ()||(yield*t.instances())}Qf(){return this.V_t}_D(){return this.wX}i$(t){t.runtime=this.ML();const s=this.e$()&&!this.t0t.p5();s&&U.StartMeasuringScriptTime(),this.wX.dispatchEvent(t),s&&U.AddScriptTime()}MY(t){return t.runtime=this.ML(),this.wX.o0(t)}gD(){return this.Gkt}SD(){return this.Tkt}oBt(t,s){if(this.Gkt!==t||this.Tkt!==s){this.Gkt=t,this.Tkt=s;const i=this._O();i.T$(),i._$()}}WJ(){return this.Ckt}jJ(){return this.Rkt}tOt(t,s){if(this.Ckt!==t||this.Rkt!==s){this.Ckt=t,this.Rkt=s;const i=this._O();i.T$(),i._$()}}VDt(t){this.jDt()||(this.C3=t)}pL(){return this.C3}k9(){return this._kt}L9(){return this.Ikt}eL(){return this.oLt}U9(){return this.oLt?this.oLt.U9():this.Ckt}H9(){return this.oLt?this.oLt.H9():this.Rkt}$B(){return this.oLt?this.oLt.$B():1}wj(){return this.oLt?this.oLt.wj():1}Tq(){return this.oLt?this.oLt.Tq():1}xq(){return this.oLt?this.oLt.xq():1}jB(){return this.oLt?this.oLt.jB():0}VB(){return this.oLt?this.oLt.VB():0}aBt(){return this.oLt?this.oLt.oL():0}lBt(){return this.oLt?this.oLt.lL():0}yj(){return this.oLt?this.oLt.yj():"off"}sq(t){return this.oLt?this.oLt.sq(t):null}xz(t){this.oLt&&this.oLt.xz(t)}Q9(){return this.Ekt}FDt(){return this.Fkt}DDt(){return this.Dkt}fO(){return this.oLt?this.oLt.fO():NaN}wx(){return"nearest"!==this.wD()}pO(){return this.lLt}mO(t){this.lLt!==t&&(this.lLt=t,-1!==this.KFt||-1!==this.yLt)&&(this.uBt(),this.cBt())}wD(){return this.s2}xIt(){return this.Pkt}OOt(){return this.Okt}zOt(){this.Okt&&(this.Okt.$I(),this.Okt.wr(),this.Okt=null)}_O(){return this.jq}xO(){return this.jq.xO()}Gtt(){return this.NQ}fBt(){return this.Bkt}yRt(){return this.Nkt}_ut(){return this.hut}eD(){return this.LH}pH(t){return this.LH.pH(t)}u5(t,s,i,e,h,r){if(r&&this.Nkt){if(t instanceof V.Ylt&&t.lJ()){const o=t.ygt(),a=Math.floor(this.vO()*o.length);return this.u5(o[a],s,i,e,h,r)}const n=this.Nkt.Xlt(t,r);if(n){const l=this.Xz(n,s,!1,i,e,!1,h,void 0,h);return this.Nkt.$lt(l,r),l}}return this.Xz(t,s,!1,i,e,!1,h,void 0,h)}Xz(t,s,i,e,h,r,n,o,a){let l=null,u=null;if(t instanceof V.Ylt){if((u=t).lJ()){const b=u.ygt(),M=Math.floor(this.vO()*b.length);u=b[M]}l=u.Wz()}else l=t,u=this.Bz(l[1]);const c=u.XL().TL();if(this.ey&&c&&!u.NIt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.iLt.has(l[2])?l[2]:this.sLt++;const p=l?l[0]:null,m=V.Sr(V.Instance,{runtime:this,ZB:u,pN:s,WCt:p,HCt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.iLt.set(d,m);let g=null,y=(c&&(g=m.zO(),void 0!==e&&void 0!==h&&(g.VM(e),g.zM(h)),u.dCt(!0)),s&&(a||s.$z(m,!0),s.IO().XX(u)),this.tLt++,!0);if(o){const v=o.QB();if(v.u4()&&u.u4()){const x=u.HX(),G=v.HX();x===G&&(y=!1)}}if(u.u4()&&!i&&!r&&y){const T=new Set;for(const _ of u.HX().AY())if(_!==u){const I=this.dBt(_,g,T);if(I){const C=this.Xz(I,f,!1,g?g.jM():e,g?g.HM():h,!0,!1,void 0,a);m.PY(C)}else{const B=this.Xz(_,f,!1,g?g.jM():e,g?g.HM():h,!0,!1,void 0,a);m.PY(B)}}for(const R of m.c4()){R.PY(m);for(const A of m.c4())R!==A&&R.PY(A)}}if(c&&!i&&n&&this.pBt(m,p,g,s,e,h,a),u.u4()&&!i&&!r&&n)for(const P of m.c4()){const E=P.zO();if(E){const N=P.XL(),F=P.QB().Wz()[0];N.TL()?this.pBt(P,F,E,s,E.jM(),E.HM(),a):this.pBt(P,F,E,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const D=g.zN(),W=e-g.jM()+D.jM(),j=h-g.HM()+D.HM();D.gN(W,j)}u.aCt();const k=l?V.ro(l[5]):null,L=l?l[4].map(t=>V.ro(t)):null,S=c&&p&&p[13];if(S&&m.$Ct(),m.LIt(k,L),S){const O=p[13];m.L6().Uxt(O[2],O[0],O[1])}this.$kt.push(m),this.Zkt=!0,this.e$()&&U.InstanceCreated(m);const w=this.l5t.instancecreate;return w.X6=m,this.V_t.dispatchEvent(w),m}pAt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.jq.S$(s),n=r.JO(i);return n.Uz(e)}dBt(t,s,i){const e=s?.gRt()??[];for(const h of e){const r=this.pAt(h),n=!!h[4],o=this.Bz(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}pBt(a,t,s,l,u,c,f){const i=s.OPt(),e=s.gRt();if(a.zO().kPt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.jq.S$(t),M=b.JO(s);o=M.Uz(i)}const y=this.Bz(o[1]),S=a.SRt(y),w=d.has(y);if(S&&!w&&h){const v=a.wRt(y),x=(v.zO().jCt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;v.zO().gN(x,G),v.zO().kPt(r),a.QN(v,{h6:!!(e>>0&1),n6:!!(e>>1&1),a6:!!(e>>2&1),u6:!!(e>>3&1),f6:!!(e>>4&1),b6:!!(e>>5&1),p6:!!(e>>6&1),g6:!!(e>>7&1),S6:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.Xz(o,l,!1,T,_,!1,!0,a,f);I.zO().kPt(r),a.QN(I,{h6:!!(e>>0&1),n6:!!(e>>1&1),a6:!!(e>>2&1),u6:!!(e>>3&1),f6:!!(e>>4&1),b6:!!(e>>5&1),p6:!!(e>>6&1),g6:!!(e>>7&1),S6:!!(e>>8&1)})}}}}r4(i){if(!this.eLt.has(i)){let t=i.QB(),s=this.Kkt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.Kkt.set(t,s);if(this.e$()&&U.InstanceDestroyed(i),i.ZCt(),this.Zkt=!0,i.u4())for(const e of i.c4())this.r4(e);for(const h of i.children())h.M6()&&this.r4(h);if(!this.jq.m5()&&!this.YLt){const r=this.AD();r.f5(!0),i.RRt(),r.f5(!1)}i.ARt(this.jq.m5())}}g5(){this.Zkt&&(this.Qkt=!0,this.mBt(),this.gBt(),this.Qkt=!1,this.Zkt=!1,this.ZO())}mBt(){for(const t of this.$kt){const s=t.QB();s.$z(t);for(const i of s.r1t())i.$z(t),i.aCt()}V.Hn(this.$kt)}gBt(){this.V_t.Jf(!0);for(const[t,s]of this.Kkt.entries())this.yBt(t,s),s.clear();this.Kkt.clear(),this.V_t.Jf(!1)}yBt(t,s){for(const i of s){const e=this.l5t.instancedestroy,h=(e.X6=i,this.V_t.dispatchEvent(e),this.iLt.delete(i.f4()),this.jLt.delete(i),i.zO());h&&(h.NPt(),h.tJ(),h.ZCt()),this.eLt.add(i),this.tLt--}V.Qn(t.r5(),s),t.aCt(),this.hLt.add(t);for(const r of t.r1t())V.Qn(r.r5(),s),r.aCt(),this.hLt.add(r);if(t.XL().TL()){const n=new Set([...s].map(t=>t.zO().JO()));for(const o of n)o.f9(s)}}uCt(){return this.$kt}*gvt(t){for(const s of this.uCt())t.lJ()?s.QB().dMt(t)&&(yield s):s.QB()===t&&(yield s)}kIt(){return this.sLt++}BIt(t,s){this.iLt.set(t,s)}qj(t){this._Lt!==(t=!!t)&&(this._Lt=!!t,this._Lt)&&this.ILt&&(this.$j(!1),this.ILt=!1)}Xj(){return this._Lt}sY(){this.V_t.dispatchEvent(V.Sr(V.Event,"renderercontextlost")),this.$j(!0);for(const s of this.Ukt)!s.lJ()&&s.WIt()&&s.QX();const t=this.xO();t&&t.sY(),V.LTt.YH(),V.gH.YH()}async fOt(){await this.xO().JX(null,this.uM()),this.V_t.dispatchEvent(V.Sr(V.Event,"renderercontextrestored")),this.$j(!1),this.ZO()}g5t(t){if(this._Lt){const s=t.hidden;this.$j(s),(this.ILt=s)||this.ZO()}}b5t(t){this.$Ot()&&this.fLt&&!V.di.xi&&!t.data.parentHasFocus&&(this.$j(!0),this.dLt=!0)}M5t(){this.dLt&&(this.$j(!1),this.dLt=!1)}cBt(){const t=this.mLt;"vsync"===this.lLt?-1===this.KFt&&(this.KFt=self.requestAnimationFrame(t.gLt)):"unlimited-tick"===this.lLt?(-1===this.yLt&&(this.yLt=V.So(t.SLt)),-1===this.KFt&&(this.KFt=self.requestAnimationFrame(t.wLt))):-1===this.yLt&&(this.yLt=V.So(t.gLt))}uBt(){-1!==this.KFt&&(self.cancelAnimationFrame(this.KFt),this.KFt=-1),-1!==this.yLt&&(V.wo(this.yLt),this.yLt=-1)}$D(){return 0<this.CLt}$j(t){if(!this.jDt()){const s=this.$D(),i=(this.CLt+=t?1:-1,this.CLt<0&&(this.CLt=0),this.$D());if(!s&&i)console.log("[Construct] Suspending"),this.uBt(),this.V_t.dispatchEvent(V.Sr(V.Event,"suspend")),this.N4(V._Y.TY.GY.SBt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.ELt=e,this.ULt=e,this.VLt=0,this.HLt=0,this.zLt=0,this.JLt=0,this.XLt=0,this.qLt=0,this.V_t.dispatchEvent(V.Sr(V.Event,"resume")),this.N4(V._Y.TY.GY.wBt,null,null),this.P1t()||this.KK(e)}}}Dj(t){this.c5t.Gc(t)}Bj(t){this.f5t.Gc(t)}kj(t){this.d5t.Gc(t)}Oj(t){this.c5t.E0(t)}Nj(t){this.f5t.E0(t)}Lj(t){this.d5t.E0(t)}bBt(){const t=globalThis.Aj;this.c5t._d(!0);for(const s of this.c5t)s instanceof t?s.X4():s.KK();this.c5t._d(!1)}MBt(){const t=globalThis.Aj;this.f5t._d(!0);for(const s of this.f5t)s instanceof t?s.jj():s.mTt();this.f5t._d(!1)}vBt(){const t=globalThis.Aj;this.d5t._d(!0);for(const s of this.d5t)s instanceof t?s.K4():s.uGt();this.d5t._d(!1)}*xBt(){const s=globalThis.Aj;this.c5t._d(!0);for(const i of this.c5t){let t;t=i instanceof s?i.X4():i.KK(),V.qo(t)&&(yield*t)}this.c5t._d(!1)}*GBt(){const s=globalThis.Aj;this.f5t._d(!0);for(const i of this.f5t){let t;t=i instanceof s?i.jj():i.mTt(),V.qo(t)&&(yield*t)}this.f5t._d(!1)}*TBt(){const s=globalThis.Aj;this.d5t._d(!0);for(const i of this.d5t){let t;t=i instanceof s?i.K4():i.uGt(),V.qo(t)&&(yield*t)}this.d5t._d(!1)}async KK(a,t,s){this.GLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this._O(),f=this.eL();if(this.vLt&&(!this.$D()||t||l)){let t=performance.now(),s=(this.xLt=!0,this._Bt(a||0),this.zLt++,this.IBt(),this.CBt()),i=(this.uvt()&&await s,this.V_t.a0(this.l5t.pretick)),e=(i instanceof Promise&&await i,this.RBt()),h=(this.uvt()&&await e,this.ABt()&&await this.PBt(),c.PO()&&await this.EBt(),this.FBt()),r=(this.uvt()&&await h,c.xO()),n=r.NX(),o=!1;if(-1!==n&&(r.WX(),f.BX()!==n)){const d=this.eL().nY(n);this.pD()&&(o=!0,await d)}this.xf("canvas","update-html-layer-dom-state",{layersDomState:r.gJ().filter(t=>t.dB()).map(t=>t.w9())}),u&&this.Y3(),o&&this.xf("canvas","cleanup-html-layers"),this.jDt()&&(await this.z5t(),this.sO()>=this.V5t())?this.q5t():(this.$D()||l||this.cBt(),this.bLt++,this.MLt++,this.xLt=!1,this.qLt+=performance.now()-t)}}async CBt(){const t=this.t0t,s=this.e$();this.g5(),t.f5(!0),this.w1t(this.xO()),s&&U.StartMeasuringTime(),this.uvt()?await t.Z1t():t.q1t(),s&&U.AddEventsTime(),this.b1t(),t.f5(!1),this.g5(),t.f5(!0)}async RBt(){const t=this.e$(),s=this.uvt(),i=this.V_t,e=this.l5t,h=this.u5t;t&&U.StartMeasuringTime(),s?await this.DBt(this.xBt()):this.bBt(),s?await this.DBt(this.GBt()):this.MBt(),t&&U.AddBehaviorTickTime(),t&&U.StartMeasuringTime(),s?await this.OBt(e.tick):i.dispatchEvent(e.tick),t&&U.AddPluginTickTime(),this.t0t.f5(!1),this.i$(h.tick)}async FBt(){const t=this.t0t,s=this.V_t,i=this.l5t,e=this.e$(),h=this.uvt();e&&U.StartMeasuringTime(),h?await t.M1t(this.jq):t.S1t(this.jq),e&&U.AddEventsTime(),this.Lkt.a3t(),this.IBt(),this.TLt=!1,t.f5(!0),e&&U.StartMeasuringTime(),h?await this.DBt(this.TBt()):this.vBt(),e&&U.AddBehaviorTickTime(),e&&U.StartMeasuringTime(),h?await this.OBt(i.tick2):s.dispatchEvent(i.tick2),e&&U.AddPluginTickTime(),t.f5(!1),h&&await t.E1t()}IBt(){if(0!==this.eLt.size){const t=this.V_t;t.Jf(!0);for(const s of this.hLt)s.j1t().Aft(this.eLt);this.hLt.clear(),this.t0t.tpt(this.eLt);for(const i of this.eLt)i.wr();this.eLt.clear(),t.Jf(!1)}}async EBt(){let t=this._O(),s=0;for(;t.PO()&&s++<10;)await this.kBt(t.G$())}_Bt(t){let s=0;if(this.jDt())s=1/this.U5t(),this.FLt=s,this.DLt=s;else if(0!==this.ELt){const i=Math.max(t-this.ELt,0);.5<(s=i/1e3)&&(s=0),this.FLt=s,this.DLt=V.Tr(s,this.LLt,this.kLt)}this.ELt=t,this.OLt=this.DLt*this.BCt,this.BLt.Gc(this.OLt),this.NLt.Gc(s*this.BCt),this.WLt.Gc(this.DLt);for(const[e,h]of this.jLt)h.Gc(this.DLt*e.hO());this.oLt&&this.oLt.GOt(),1e3<=t-this.ULt&&(this.ULt+=1e3,1e3<=t-this.ULt&&(this.ULt=t),this.HLt=this.VLt,this.VLt=0,this.JLt=this.zLt,this.zLt=0,this.XLt=Math.min(this.qLt/1e3,1),this.qLt=0,this.oLt&&this.oLt.xOt(),this.Lkt.h3t(),this.e$())&&U.Update1sPerfStats()}XCt(t,s){if(s){if(!this.jLt.has(t)){const i=V.Sr(V.D0);i.N0(this.BLt),this.jLt.set(t,i)}}else this.jLt.delete(t)}YCt(t){const s=this.jLt.get(t);return s?s.ni():this.sO()}async kBt(t){const s=this.V_t,i=this._O(),e=i.xO();await e.OY(),e.tY(t,this.uM()),e===t&&this.t0t.BY(),this.Lkt.a3t(),this.IBt(),s.dispatchEvent(this.l5t.beforelayoutchange),V.Xf.c0(!0),await t.JX(e,this.uM()),V.Xf.c0(!1),await t.iY(!1),s.dispatchEvent(this.l5t.layoutchange),this.ZO(),this.TLt=!0,this.g5(),this.J5t()}ZO(){this.cLt=!0}dOt(){return this.oLt?this.oLt.dOt():null}pOt(){return this.oLt?this.oLt.pOt():null}uM(){return this.oLt?this.oLt.uM():null}Y3(){const i=this.oLt;if(i&&!i.cOt()){const e=this.uM(),t=e.hE(),h=t&&e.Ob(),r=t&&e.JS();if(h&&e.HP(),this.cLt||this.jDt()){const n=this.jq.xO(),o=(this.VLt++,e.kP(),this.e$());o&&U.StartMeasuringTime(),this.cLt=!1;let t=null,s=(h&&(t=i.IOt().PR(),e.eE(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.EX())),e.StartMeasuringRenderPassTime(0,1)),this.$J()&&"low"===i.tq()?e.YA(i.U9(),i.H9()):e.$A(),this.LBt(this.uM(),n),t&&e.rE(t),r&&(e.StopMeasuringRenderPassTime(),this.oLt.COt(s)),e.Ib(),o&&(U.AddDrawCallsTime(),U.UpdateInspectHighlight()),i&&i.AOt()}else e.Ab()}}XY(t){return"low"===this.eL().tq()||t.Ob()&&(this.Q9()||this.$J())}LBt(s,i){s.iw(),s.dP(),s.rP(1,1,1,1),s.XP(null),s.lP(null),s.BP(this.$J()),this.XY(s)&&i.JY(s);const e=i.BX();for(let t=1;t<e;++t)i.ZY(s,t),s.JS()&&s.Restart();this.XY(s)||i.JY(s),i.KY(s)}N4(t,s,i){if(!this.vLt)return!1;let e=!this.xLt&&!this.t0t.k1t(),h=0;e&&(h=performance.now());const r=this.e$(),n=(r&&this.uV(!1),this.t0t.T1t(this.jq,t,s,i));if(e){const o=performance.now()-h;this.qLt+=o,r&&U.AddTriggersTime(o)}return r&&this.uV(!0),n}Zxt(t,s,i){if(!this.uvt())return this.N4(t,s,i);if(this.P1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.xLt||this.t0t.k1t())return this.t0t.C1t(this.jq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async j4(t,s,i){if(!this.uvt())return this.N4(t,s,i);if(!this.vLt)return!1;if(this.P1t())return this.t0t.R1t(t,s,i);if(!this.xO())return this.t0t._1t(t,s,i);let e=performance.now(),h=this.t0t.C1t(this.jq,t,s,i),r=h.next();for(;!r.done;)await this.x1t(r.value),r=h.next();return this.$D()||this.t0t.k1t()||(await this.t0t.E1t(),this.GLt&&!this.xLt&&this.cBt()),this.qLt+=performance.now()-e,r.value}Qxt(t,s,i){const e=this.e$(),h=(e&&this.uV(!1),this.t0t.F1t(this.jq,t,s,i));return e&&this.uV(!0),h}tGt(t,s,i){return this.t0t.D1t(this.jq,t,s,i)}sGt(t){return this.RLt.Gc(t)}w1t(t){this.Ykt.push(t)}b1t(){if(!this.Ykt.length)throw new Error("layout stack empty");this.Ykt.pop()}UO(){return this.Ykt.length?this.Ykt.at(-1):this.xO()}ZD(t){return t&&-1!==t.hO()?this.DLt*t.hO():this.OLt}YK(){return this.OLt}$K(){return this.DLt}tO(){return this.FLt}hO(){return this.BCt}rO(t){(isNaN(t)||t<0)&&(t=0),this.BCt=t}SO(t){this.LLt=Math.max(t,0)}yO(){return this.LLt}MO(t){this.kLt=Math.max(t,0)}bO(){return this.kLt}nO(){return this.HLt}aO(){return this.JLt}uO(){return this.XLt}BBt(){return this.PLt}sO(){return this.BLt.ni()}NBt(){return this.NLt.ni()}eO(){return this.WLt.ni()}Jtt(){return this.bLt}WBt(){return this.MLt}jBt(){return this.tLt}uD(){return this.bkt}fD(){return this.Mkt}VBt(){return this.vkt}UBt(){return this.xkt}WO(t){if(this.YLt)throw new Error("cannot call while loading state - wait until afterload event");return this.iLt.get(t)||null}CY(){this.iLt.clear();for(const t of this.Ukt)if(!t.lJ())for(const s of t.r5())this.iLt.set(s.f4(),s)}$Ot(){return"preview"===this.okt}e$(){return this.dkt}Qk(){return this.okt}tL(){return"nwjs"===this.Qk()||this.akt}ZOt(){return"cordova"===this.okt}HBt(){return"Android"===V.di.mi&&("cordova"===this.okt||"playable-ad-single-file"===this.okt||"playable-ad-zip"===this.okt||"instant-games"===this.okt)}Y5t(){return this._U}zBt(){return this.lkt}sL(){return this.ukt}JBt(){return this.ckt}nD(){return this.Lkt}OTt(){return this.kkt.OTt()}kTt(){return this.kkt.kTt()}$J(){return this.aLt}qBt(){return this.uM().OS(this.jJ())}ES(t){return this.uM().ES(t||this.jJ())}XBt(){return this.TLt}YBt(t){this.uLt!==(t=!!t)&&(this.uLt=t,this._O()._$(),this.ZO())}MD(){return this.uLt}$Bt(t){if(!this.Vkt.has(t)){const i=()=>this.KBt(t);this.Vkt.set(t,i),t.Qf().addEventListener("animationframeimagechange",i)}const s=this.Kg.zg(t);return s.ly()||s.my().then(()=>this.ZO()),s}KBt(t){this.Kg.Yg(t)}Wkt(t){const s=[];for(const i of t.ZIt())for(const e of i.mW()){const h=e.MW();s.push({source:e,width:h.Pm(),height:h.jm(),tag:e.jW()})}return{ny:s}}async jkt(t){const s=V.Sr(V.Cd),i=[],h=new Map;for(const n of t.ZIt())for(const o of n.mW()){const a=o.MW().e_t();h.has(a)||(h.set(a,null),i.push(s.Gc(async()=>{const t=await a.QH();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.ZIt())for(const u of l.mW())e.push(s.Gc(async()=>{const t=u.MW(),s=h.get(t.e_t()),i=await t.h_t(s),e=await createImageBitmap(i);return{yy:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{ny:r}}ZBt(t){this.$Lt=t,this.KLt=!1}QBt(){this.$Lt="",this.KLt=!0}t4t(t){this.ZLt=t}e2t(t){this.sN=t}s4t(){return this.QLt}ABt(){return!!(this.$Lt||this.KLt||this.ZLt||null!==this.sN)}async PBt(){if(this.$Lt&&(this.g5(),await this.i4t(this.$Lt),this.e4t()),this.ZLt&&(await this.h4t(this.ZLt),this.e4t(),this.e$())&&U.StepIfPausedInDebugger(),this.KLt){const t=await this.r4t();this.QLt=t,await this.j4(V._Y.TY.GY.n4t,null),this.QLt="",this.e4t()}if(null!==this.sN){this.g5();try{await this.o4t(this.sN),this.QLt=this.sN,await this.j4(V._Y.TY.GY.a4t,null),this.QLt=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.j4(V._Y.TY.GY.l4t,null)}this.e4t()}}e4t(){this.$Lt="",this.KLt=!1,this.ZLt="",this.sN=null}gL(){return this.t5t||(this.t5t=localforage.Wi({name:"c3-localstorage-"+this.VBt(),description:this.uD()})),this.t5t}u4t(){return this.s5t||(this.s5t=localforage.Wi({name:"c3-savegames-"+this.VBt(),description:this.uD()})),this.s5t}async i4t(t){const s=await this.r4t();try{await this.u4t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.QLt=s,await this.j4(V._Y.TY.GY.n4t,null),this.QLt=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.j4(V._Y.TY.GY.c4t,null)}}async h4t(t){try{const s=await this.u4t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.o4t(s),this.QLt=s,await this.j4(V._Y.TY.GY.a4t,null),this.QLt=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.j4(V._Y.TY.GY.l4t,null)}}async r4t(){const t={c3save:!0,version:1,rt:{time:this.sO(),timeRaw:this.NBt(),walltime:this.eO(),timescale:this.hO(),tickcount:this.Jtt(),next_uid:this.sLt,running_layout:this.xO().yJ(),start_time_offset:Date.now()-this.PLt},types:{},layouts:{},events:this.t0t.Oq(),timelines:this.NQ.Oq(),user_script_data:null};for(const i of this.Ukt)i.lJ()||i.bCt()||(t.types[i.yJ().toString()]=i.Oq());for(const e of this.jq.RO())t.layouts[e.yJ().toString()]=e.Oq();const s=this.f4t("save");return s.saveData=null,await this.MY(s),t.user_script_data=s.saveData,JSON.stringify(t)}gY(){return this.YLt}async o4t(t){const s=this._O(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.h2t(),this.V_t.dispatchEvent(V.Sr(V.Event,"beforeload"));for(const a of this.nBt()){const l=a.QB();l.bCt()||a.Z$()}let e=i.rt,h=(this.BLt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.NLt.Set(e.timeRaw),this.WLt.Set(e.walltime),this.BCt=e.timescale,this.bLt=e.tickcount,this.PLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.YLt=!0);if(h!==this.xO().yJ()){const u=s.S$(h);if(!u)return;await this.kBt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.S$(d);p&&p.kq(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),S=this.Zj(y);!S||S.lJ()||S.bCt()||S.kq(g,n)}for(const w of this.jq.RO())for(const b of w.D5())b.Lq();if(this.g5(),this.CY(),this.YLt=!1,r){for(const M of this.nBt())M.yY();for(const[v,x]of Object.entries(i.types)){const G=parseInt(v,10),T=this.Zj(G);!T||T.lJ()||T.bCt()||T.xCt(x)}}this.sLt=e.next_uid,this.t0t.kq(i.events);for(const _ of this.Ukt)if(!_.lJ()&&_.u4())for(const I of _.r5()){const C=I.RY();for(const R of _.HX().AY())if(R!==_){const A=R.r5();if(C<0||C>=A.length)throw new Error("missing sibling instance");I.PY(A[C])}}this.NQ.kq(i.timelines),s.T$(),s._$();for(const P of n)P.CRt();this.r2t(),this.V_t.dispatchEvent(V.Sr(V.Event,"afterload")),this.i$(this.f4t("afterload"));for(const[E,F]of Object.entries(i.types)){const D=parseInt(E,10),O=this.Zj(D);O&&O.vCt()}const o=this.f4t("load");o.saveData=i.user_script_data,await this.MY(o),this.ZO()}d4t(t,s){return t.zO().APt()-s.zO().APt()}gEt(t,s){t.zO()&&!this.T5t.has(t)&&(this.T5t.set(t,s),this._5t.push(t))}h2t(){this.T5t=new WeakMap,V.Hn(this._5t)}r2t(t="full",s=null){this._5t.sort(this.d4t);for(const i of this._5t)i.tK(this.T5t.get(i),t,s);for(const e of this._5t)e.FRt(this.T5t.get(e),t,s);this.h2t()}async K5t(t){const s=await Promise.all(t.map(async t=>{const s=this.ZOt()&&this.LH.rH();if(s||"playable-ad-single-file"===this.Qk()){const i=await this.LH.Ao(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.p5t.p4t(s)}m4t(t,s){this.p5t.g4t(t,s)}$5t(t,s){this.p5t.y4t(t,s)}Z5t(t,s,i,e){return this.p5t.Z5t(t,s,i,null,null,e)}S4t(t,s,i,e){return this.p5t.S4t(t,s,i,e)}w4t(){return this.p5t.b4t()}BO(t,s){this.xf("runtime","invoke-download",{url:t,filename:s})}async NOt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.pD()){const n=await this.sk("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async M4t(t){return this.pD()?this.sk("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}v4t(){this.r5t||(this.r5t=!0,this.xf("runtime","enable-device-orientation"))}x4t(){this.n5t||(this.n5t=!0,this.xf("runtime","enable-device-motion"))}vO(){return this.ALt()}G4t(t){this.ALt=t}S5t(){const t=this.uM();return{fps:this.nO(),tps:this.aO(),cpu:this.uO(),gpu:this.fO(),layout:this.xO()?this.xO().cf():"",renderer:t.Ob()?t.dE():t.GetAdapterInfoString()}}P1t(){return!!this.e$()&&U.P1t()}x1t(t){return this.uvt()?U.x1t(t):Promise.resolve()}ryt(){return!!this.uvt()&&U.BreakNext()}T4t(t){this.pkt=!!t,this._4t()}I4t(){return this.pkt}uvt(){return this.mkt}uV(t){t?this.gkt--:this.gkt++,this._4t()}_4t(){this.mkt=this.e$()&&this.pkt&&0===this.gkt}xmt(){return this.e$()&&U.xmt()}X9(){return this.e$()&&this.uM().hE()&&U.X9()}async DBt(t){if(t)for(const s of t)await this.x1t(s)}OBt(t){return this.DBt(this.V_t.u0(t))}Tdt(t){return this.t0t.Tdt(t.name,t.params)}ek(t){if(this.pD())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}ML(){return this.v5t}f4t(t){const s=V.Sr(V.Event,t,!1);return s.runtime=this.v5t,s}L5t(){this.v5t=new self.tD(this),this.u5t={tick:this.f4t("tick")}}W5t(){const t={};for(const s of this.Ukt)t[s.Zdt()]={value:s.VL(),enumerable:!0,writable:!1};this.v5t.ID(t)}j5t(){const t={};for(const s of this.AD().n1t())t[s.Zdt()]=s.Qdt();this.v5t.CD(t)}FO(){return this.G5t}YL(t,s){this.x5t.set(t,s)}L5(t){return this.x5t.get(t)}zk(t){if(!(t instanceof self.JL))throw new TypeError("expected IObjectClass");const s=this.L5(t);if(s&&s instanceof V.Ylt)return s;throw new Error("invalid IObjectClass")}i5(t){if(!(t instanceof self.KB))throw new TypeError("expected IInstance");const s=this.L5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}HO(t){if(!(t instanceof self.E6))throw new TypeError("expected IWorldInstance");const s=this.L5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.QOt.Bx,self.C3_InitRuntime=(t,s)=>t.jCt(s)}{const La=self.Ws;La.m5t=class extends La.dr{constructor(t,s){super(),this.bf=t,this.C4t=new Map,this.R4t=0,this.A4t=s.inputPort,s.outputPort.onmessage=t=>this.P4t(t),this.E4t=s.maxNumWorkers,this.F4t=1,this.D4t=!1,this.O4t=!1}async jCt(){}b4t(){return this.E4t}p4t(t){this.A4t.postMessage({type:"_import_scripts",scripts:t})}g4t(t,s){this.A4t.postMessage({type:"_send_blob",blob:t,id:s})}y4t(t,s){this.A4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}Z5t(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.R4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.C4t.set(n,{resolve:t,progress:e,reject:s,k4t:!1,maxWorkerNum:r})});return h&&h.A0(()=>this.L4t(n)),this.A4t.postMessage(o,i),this.B4t(),a}S4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.R4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.A4t.postMessage(r,i)}L4t(t){const s=this.C4t.get(t);s&&(s.k4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.A4t.postMessage({type:"_cancel",jobId:t}))}P4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.N4t(e,s.result);break;case"progress":this.W4t(e,s.progress);break;case"error":this.j4t(e,s.error);break;case"ready":this.V4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}N4t(t,s){const i=this.C4t.get(t);if(!i)throw new Error("invalid job ID");i.k4t||i.resolve(s),this.C4t.delete(t)}W4t(t,s){const i=this.C4t.get(t);if(!i)throw new Error("invalid job ID");!i.k4t&&i.progress&&i.progress(s)}j4t(t,s){const i=this.C4t.get(t);if(!i)throw new Error("invalid job ID");i.k4t||i.reject(s),this.C4t.delete(t)}V4t(){this.D4t&&(this.D4t=!1,this.F4t++,this.F4t<this.E4t?this.B4t():this.A4t.postMessage({type:"_no_more_workers"}))}U4t(){let t=0,s=[...this.C4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async B4t(){if(!(this.F4t>=this.E4t||this.D4t||this.O4t||this.U4t()<=this.F4t))try{this.D4t=!0;const t=await this.bf.sk("runtime","create-job-worker");t.outputPort.onmessage=t=>this.P4t(t)}catch(t){this.O4t=!0,this.D4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.F4t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.tint={NDt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 tintColor;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\ngl_FragColor = front * vec4(tintColor.r, tintColor.g, tintColor.b, 1.0);\n}",BDt:"",kDt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ntintColor : vec3<f32>\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput {\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar output : FragmentOutput;\noutput.color = front * vec4<f32>(shaderParams.tintColor, 1.0);\nreturn output;\n}",rM:!1,oM:!1,zb:0,qb:0,Yb:!1,Kb:!1,Qb:!0,sM:!1,eM:!1,parameters:[["tintColor",0,"color"]]};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(w,self.Ws),i=null,e="",h="",r=[],n="",o="",a="",M=b.Sr(b.$0t);b._Y.TY=class extends b.ixt{constructor(t){super(t),this.z0t=this.bf.AD().aV(),this.Pft=this.bf.AD().UD(),this.H4t=0,this.z4t=0,this.J4t=new Map}wr(){super.wr()}ZO(){this.bf.ZO()}N4(t){this.bf.N4(t,null,null)}q4t(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}X4t(t,s,i){if(t!==n||s!==o||i!==a){const e=this.q4t(s,i);r=t.match(e),n=t,o=s,a=i}return r}async Y4t(t,s){if(s.length){this.H4t+=s.length;const i=[];for(const e of s)i.push(t.XX(e));await b.po(i,()=>{this.z4t++}),this.z4t++,this.z4t===this.H4t&&(this.z4t=0,this.H4t=0,this.bf.N4(b._Y.TY.GY.$4t,null,null))}}K4t(t,s){for(const i of s)0===i.a5()&&t.ZX(i)}Z4t(){return M}Q4t(s){const i=this.bf.AD(),t=i.UD(),e=t.nV(),h=e.kD(),r=h.rV(),n=e.P0t(),o=t.oV(h),a=i.aV(),l=a.oV();if(l.X0t(s),n)for(let t=0;t<s&&!l.yV();++t)i.fV(r),l.mV(t),h.dV(e,o),i.pV(r);else for(let t=0;t<s&&!l.yV();++t)l.mV(t),h.dV(e,o);return t.SV(),a.SV(),!1}*tNt(s){const i=this.bf.AD(),t=i.UD(),e=t.nV(),h=e.kD(),r=h.rV(),n=e.P0t(),o=t.oV(h),a=i.aV(),l=a.oV();if(l.X0t(s),n)for(let t=0;t<s&&!l.yV();++t)i.fV(r),l.mV(t),yield*h.gyt(e,o),i.pV(r);else for(let t=0;t<s&&!l.yV();++t)l.mV(t),yield*h.gyt(e,o);return t.SV(),a.SV(),!1}sNt(){const s=this.bf.AD(),t=s.UD(),i=t.nV(),e=i.kD(),h=e.rV(),r=i.P0t(),n=t.oV(e),o=s.aV(),a=o.oV();if(r)for(let t=0;!a.yV();++t)s.fV(h),a.mV(t),e.dV(i,n)||a.HW(),s.pV(h);else for(let t=0;!a.yV();++t)a.mV(t),e.dV(i,n)||a.HW();return t.SV(),o.SV(),!1}*iNt(){const s=this.bf.AD(),t=s.UD(),i=t.nV(),e=i.kD(),h=e.rV(),r=i.P0t(),n=t.oV(e),o=s.aV(),a=o.oV();if(r)for(let t=0;!a.yV();++t){s.fV(h),a.mV(t);const l=yield*e.gyt(i,n);l||a.HW(),s.pV(h)}else for(let t=0;!a.yV();++t){a.mV(t);const u=yield*e.gyt(i,n);u||a.HW()}return t.SV(),o.SV(),!1}eNt(t,s,i){const e=this.bf.AD(),h=e.UD(),r=h.nV(),n=r.kD(),o=n.rV(),a=r.P0t(),l=h.oV(n),u=e.aV(),c=u.oV();if(c.lV(t),c.X0t(i),i<s)if(a)for(let t=s;t>=i&&!c.yV();--t)e.fV(o),c.mV(t),n.dV(r,l),e.pV(o);else for(let t=s;t>=i&&!c.yV();--t)c.mV(t),n.dV(r,l);else if(a)for(let t=s;t<=i&&!c.yV();++t)e.fV(o),c.mV(t),n.dV(r,l),e.pV(o);else for(let t=s;t<=i&&!c.yV();++t)c.mV(t),n.dV(r,l);return h.SV(),u.SV(),!1}*hNt(t,s,i){const e=this.bf.AD(),h=e.UD(),r=h.nV(),n=r.kD(),o=n.rV(),a=r.P0t(),l=h.oV(n),u=e.aV(),c=u.oV();if(c.lV(t),c.X0t(i),i<s)if(a)for(let t=s;t>=i&&!c.yV();--t)e.fV(o),c.mV(t),yield*n.gyt(r,l),e.pV(o);else for(let t=s;t>=i&&!c.yV();--t)c.mV(t),yield*n.gyt(r,l);else if(a)for(let t=s;t<=i&&!c.yV();++t)e.fV(o),c.mV(t),yield*n.gyt(r,l),e.pV(o);else for(let t=s;t<=i&&!c.yV();++t)c.mV(t),yield*n.gyt(r,l);return h.SV(),u.SV(),!1}rNt(i){const t=i.n5(),s=t.r5();if(0!==s.length){const e=this.bf.AD(),h=e.UD(),r=h.nV(),n=r.kD(),o=n.rV(),a=r.P0t(),l=h.oV(n),u=e.aV(),c=u.oV(),f=i.u4(),d=M.oV();if(b.Xn(d,s),c.X0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.yV();++t){e.fV(o);const p=d[t];i.n5().zft(p),f&&p.Rmt(),c.mV(t),n.dV(r,l),e.pV(o)}else{t.Vft(!1);const m=t.Uft();b.Hn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.yV();++t){const g=d[t];m[0]=g,f&&g.Rmt(),c.mV(t),n.dV(r,l)}}h.SV(),u.SV(),b.Hn(d),M.SV()}return!1}*nNt(i){const t=i.n5(),s=t.r5();if(0!==s.length){const e=this.bf.AD(),h=e.UD(),r=h.nV(),n=r.kD(),o=n.rV(),a=r.P0t(),l=h.oV(n),u=e.aV(),c=u.oV(),f=i.u4(),d=M.oV();if(b.Xn(d,s),c.X0t(d.length),a)for(let t=0,s=d.length;t<s&&!c.yV();++t){e.fV(o);const p=d[t];i.n5().zft(p),f&&p.Rmt(),c.mV(t),yield*n.gyt(r,l),e.pV(o)}else{t.Vft(!1);const m=t.Uft();b.Hn(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.yV();++t){const g=d[t];m[0]=g,f&&g.Rmt(),c.mV(t),yield*n.gyt(r,l)}}h.SV(),u.SV(),b.Hn(d),M.SV()}return!1}oNt(i,t){const s=i.n5(),e=s.r5();if(0!==e.length){const h=this.bf.AD(),r=h.UD(),n=h.Udt(),o=r.nV(),a=o.kD(),l=a.rV(),u=o.P0t(),c=r.oV(a),f=h.aV(),d=f.oV(),p=i.u4(),m=M.oV();b.Hn(m),d.X0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Pbt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.yV();++t){h.fV(l);const g=m[t][0];i.n5().zft(g),p&&g.Rmt(),d.mV(t),a.dV(o,c),h.pV(l)}else{s.Vft(!1);const y=s.Uft();b.Hn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.yV();++t){const S=m[t][0];y[0]=S,p&&S.Rmt(),d.mV(t),a.dV(o,c)}}r.SV(),f.SV(),b.Hn(m),M.SV()}return!1}*aNt(i,t){const s=i.n5(),e=s.r5();if(0!==e.length){const h=this.bf.AD(),r=h.UD(),n=h.Udt(),o=r.nV(),a=o.kD(),l=a.rV(),u=o.P0t(),c=r.oV(a),f=h.aV(),d=f.oV(),p=i.u4(),m=M.oV();b.Hn(m),d.X0t(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Pbt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.yV();++t){h.fV(l);const g=m[t][0];i.n5().zft(g),p&&g.Rmt(),d.mV(t),yield*a.gyt(o,c),h.pV(l)}else{s.Vft(!1);const y=s.Uft();b.Hn(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.yV();++t){const S=m[t][0];y[0]=S,p&&S.Rmt(),d.mV(t),yield*a.gyt(o,c)}}r.SV(),f.SV(),b.Hn(m),M.SV()}return!1}lNt(t,s){let i=this.J4t.get(t);if(!i){if(!s)return null;i={uNt:null,cNt:new Map},this.J4t.set(t,i)}return i}fNt(t,s,i,e,h){s.DD().Eyt(i,s.ND()),e&&t.pV(h)}*dNt(t,s,i,e,h){yield*s.DD().Fyt(i,s.ND()),e&&t.pV(h)}}}{const Ba=self.Ws;Ba._Y.TY.bIt=class extends Ba.dr{constructor(t){super(),this.xft=t,this.bf=t.pk(),this.Vxt=t.XL()}_xt(){}wr(){this.xft=null,this.bf=null,this.Vxt=null}}}{const Na=self.Ws;Na._Y.TY.Instance=class extends Na.dr{constructor(t,s){super(),this.Ci=t,this.xft=this.Ci.QB(),this.Xxt=this.xft.aMt(),this.bf=this.Ci.pk()}wr(){this.Ci=null,this.xft=null,this.Xxt=null,this.bf=null}}}{const x=self.Ws,Wa=[];x._Y.TY.GY={pNt(){return!0},xY(){return!0},kY(){return!0},SBt(){return!0},wBt(){return!0},$D(){return this.bf.$D()},dgt(){const t=this.bf.Vdt();return!t._0t()&&!t.G0t()},mNt(){let t=this.bf.Udt(),s=t.Sbt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.bf.Jtt();return s.set("TriggerOnce_lastTick",e),this.bf.XBt()||i!==e-1},gNt(t){const s=this.bf.Udt(),i=s.Sbt(),e=i.get("Every_lastTime")||0,h=this.bf.sO(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Rpt(t){const s=this.bf.AD().u1t(t);return s&&s.Rpt()},$Ot(){return this.bf.$Ot()},xi(){return x.di.xi},tBt(){return!0},yNt(){return!0},SNt(){return!0},n4t(){return!0},c4t(){return!0},a4t(){return!0},l4t(){return!0},wNt(t){return!!this.bf.WO(t)},bNt(t){switch(t){case 0:return"browser"===x.di.Mi;case 1:return"iOS"===x.di.mi;case 2:return"Android"===x.di.mi;case 8:return"cordova"===x.di.Mi;case 9:return"scirra-arcade"===this.bf.Qk();case 10:return"nwjs"===x.di.Mi;case 13:return"windows-uwp"===this.bf.Qk();default:return!1}},MNt(t,s,i){const e=this.q4t(s,i);return e.test(t)},vNt(t,s,i){return x.compare(t,s,i)},xNt(t,s,i){return s<=t&&t<=i},GNt(t,s,i){return x.compare(t.Wet(),s,i)},TNt(t){return!!t.Wet()},_Nt(t,s){const i=this.bf.sO();if(0!==t)return x.compare(i,t,s);{const e=this.bf.Udt(),h=e.Sbt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},INt(t){return isNaN(t)},T2t(t,s,i){return x.Er(x.Ir(t),x.Ir(i))<=x.Ir(s)},_2t(t,s){return x.Dr(x.Ir(t),x.Ir(s))},BMt(t,s,i){let e=x.Ir(t),h=x.Ir(s),r=x.Ir(i),n=!x.Dr(r,h);return n?!(!x.Dr(e,h)&&x.Dr(e,r)):x.Dr(e,h)&&!x.Dr(e,r)},CNt(t,s){return"number"==typeof t?0===s:1===s},RNt(t){return!!t},opt(t){return t.toLowerCase()===this.bf.AD().cpt()},ANt(t,i,e,h){if(!t)return!1;let s=this.Z4t(),r=s.oV(),n=t.n5(),o=(x.Xn(r,n.r5()),n.Oft()&&x.Hn(n.Hft()),this.bf.Udt()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.Pbt(1,t),h=o.Pbt(3,t),x.compare(i,e,h)?++a:n.jft(u)}x.Un(r,a),n.Jft(r);const l=!!r.length;return x.Hn(r),s.SV(),t.Tyt(),l},PNt(t,s){if(!t)return!1;let i=this.Z4t(),e=i.oV(),h=t.n5(),r=(x.Xn(e,h.r5()),h.Oft()&&x.Hn(h.Hft()),this.bf.Udt()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.Pbt(1,t)?++n:h.jft(a)}x.Un(e,n),h.Jft(e);const o=!!e.length;return x.Hn(e),i.SV(),t.Tyt(),o},ENt(t,i,e){if(!t)return!1;const s=t.n5(),h=s.r5();if(0===h.length)return!1;let r=this.bf.Udt(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.Pbt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.Kft(n),t.Tyt(),!0},FNt(t,s){if(!t)return!1;const i=t.n5(),e=i.r5();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.Kft(h),t.Tyt(),!0},DNt(t){if(!t)return!1;const s=t.n5(),i=s.r5(),e=Math.floor(this.bf.vO()*i.length);if(e>=i.length)return!1;const h=i[e];return s.Kft(h),t.Tyt(),!0},ONt(t){if(!t)return!1;if(!t.a5())return!1;const s=t.n5();return s.Vft(!0),t.Tyt(),!0},kNt(t,i,e){if(!t)return!1;const h=t.n5(),s=h.r5(),r=this.bf.kD(),n=r.Zft(),o=this.bf.Udt().dbt();h.Oft()?(x.Xn(Wa,s),h.Dft(),h.Vft(!1)):n?(x.Xn(Wa,h.Hft()),x.Hn(h.Hft())):(x.Xn(Wa,h.Uft()),x.Hn(h.Uft()));for(let t=0,s=Wa.length;t<s;++t){const a=Wa[t];x.xor(a.zO().VN(i,e),o)?h.Wft(a):h.jft(a)}return t.Tyt(),x.xor(!!h.Uft().length,o)},LNt(s){if(!s)return!1;let i=s.lJ(),e=null,h=this.bf.uCt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.QB().dMt(s)){e=r;break}}else if(r.QB()===s){e=r;break}}if(!e){const n=s.r5();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.n5();return t.Kft(e),s.Tyt(),!0},BNt(t){return this.bf.uvt()?this.tNt(t):this.Q4t(t)},NNt(){return this.bf.uvt()?this.iNt():this.sNt()},WNt(t,s,i){return this.bf.uvt()?this.hNt(t,s,i):this.eNt(t,s,i)},Id(t){return this.bf.uvt()?this.nNt(t):this.rNt(t)},jNt(t,s,i){return this.bf.uvt()?this.aNt(t,i):this.oNt(t,i)},VNt(t){return!!t&&t.lB()},UNt(t){return!!t&&t.gB()},HNt(t){return!!t&&t.dB()},zNt(t){return!!t&&!t.a5()},JNt(t,s,i){return!!t&&x.compare(100*t.hP(),s,i)},qNt(t){const s=this.bf.xO();return!!s&&s.FX(t)},$4t(){return!0},XNt(){return 0<this.H4t},YNt(t,s){const i=this.bf.yRt();return!!i&&!!s&&!!i.Xlt(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const ja=self.Ws,Va=[],Ua=[],Ha=ja.Sr(ja.Rect),za=ja.Sr(ja.Yo),Ja=[];ja._Y.TY.drt={$Nt(t,s){t.Mht(s)},KNt(t,s){t.ye()&&"number"!=typeof s&&(s=parseFloat(s)),t.Mht(t.Wet()+s)},ZNt(t,s){t.ye()&&t.Mht(t.Wet()-s)},QNt(t,s){t.Mht(!!s)},t6t(t){t.Mht(!t.Wet())},s6t(t){t.Mht(t.jdt())},i6t(t){this.bf.AD().a1t(t)},e6t(t,s,i,e,h,r){if(t&&s){const n=this.bf.u5(t,s,i,e,h,r);if(n){h&&s.c5(n);const o=this.bf.AD(),a=(o.f5(!0),n.d5(),o.f5(!1),new Map);n.aRt(a,t,h);for(const[l,u]of a)l.n5().qft(u)}}},h6t(t,s,i,e,h,r){if(t&&s){const n=this.bf.rBt(t);n&&ja._Y.TY.drt.e6t.call(this,n,s,i,e,h,r)}},oJ(h,r,n,o,a,t,l,u,c,f,d){if(h){let s=this.bf.UO(),i=s;if(t){const p=this.bf._O().y$(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.JO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.JO(u))){Ha.set(r,n,o,a);const m=i.oJ(h,Ha,e,t,c,f,d);h.n5().Jft(m),h.Tyt()}}}},r6t(){const t=this.z0t;t.j0t()&&t.N0t().HW()},Apt(t,s){const i=this.bf.AD().u1t(t);i&&(0===s?i.Apt(!1):1===s?i.Apt(!0):i.Apt(!i.Rpt()))},n6t(t){this.bf.rO(t)},o6t(t,s){if(s<0&&(s=0),t){const i=t.n5(),e=i.r5();for(const h of e)h.rO(s)}},a6t(t){if(t){const s=t.n5(),i=s.r5();for(const e of i)e.S4()}},Bn(t){if(!(t<0))return this.bf.AD().H1t().Y2t(t),!0},XD(t){return this.bf.AD().H1t().$2t(t),!0},l6t(){const t=this.bf.AD();return t.H1t().K2t(t.npt()),!0},JD(t){this.bf.AD().JD(t)},async ROt(t,s,i,e,h,r){const n=this.bf.eL();n&&(this.ZO(),await n.ROt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.bf.j4(ja._Y.TY.GY.yNt,null))},u6t(t,s){if(!(t<=0||s<=0)){this.bf.tOt(t,s),this.bf.UO().Iq();const i=this.bf.eL();i&&("off"!==i.qDt()&&this.bf.oBt(t,s),i.CC(i.ej(),i.hj(),!0),this.bf.ZO())}},c6t(t){const s=this.bf.eL();s&&"off"!==s.qDt()&&(s.oOt(0!==t?"high":"low"),s.CC(s.ej(),s.hj(),!0))},iet(t){this.bf.ZBt(t)},f6t(){this.bf.QBt()},d6t(t){this.bf.t4t(t)},p6t(t){this.bf.e2t(t)},m6t(t){},g6t(){for(const t of this.bf._O().RO())t.zY()},y6t(t){this.bf.YBt(0!==t)},S6t(t,s){this.bf.MO(1/t),this.bf.SO(1/s)},w6t(t,s){this.bf.SO(t),this.bf.MO(s)},b6t(t){this.bf.mO(["vsync","unlimited-tick","unlimited-frame"][t])},M6t(t,i){if(t){const s=t.n5(),e=s.r5(),h=Va,r=Ua,n=this.bf.UO(),o=t.lJ(),a=t.XSt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.zO();if(u){let t;t=o?l.nnt(i+l.QB().qSt(a)):l.nnt(i),h.push([u.JO().QF(),u.qO()]),r.push([l,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.XO(h[t][0]),d=h[t][1],p=f.YO();p[d]!==c&&((p[d]=c).zO().$O(f,!0),f.KO(c),i=!0)}i&&this.bf.ZO(),ja.Hn(Va),ja.Hn(Ua)}}},jk(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.bf.nD().jk(t,s)},v6t(t){if(!this.bf.uy()){const s=this.bf._O();s.PO()||s.EO(t)}},x6t(t){if(!this.bf.uy()){const s=this.bf._O();if(!s.PO()){const i=s.y$(t);i&&s.EO(i)}}},G6t(t){if(!this.bf.uy()){const s=this.bf._O();if(!s.PO()){const i=s.RO(),e=i.indexOf(s.xO());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.EO(h)}}}},T6t(){if(!this.bf.uy()){const t=this.bf._O();t.PO()||(t.EO(t.xO()),this.bf.AD().p1t())}},_6t(t,s){t&&t.oB(s)},I6t(t,s){t&&t.cB(s)},C6t(t,s){t&&t.pB(s)},R6t(t,s){t&&t.nP(s/100)},A6t(t,s){t&&t.yB(s)},P6t(t,s){t&&t.wB(s)},E6t(t,s){t&&t.G5(ja.Ir(+s))},F6t(t,s,i){t&&(t.kB(!0),t.T5(s),t.I5(i))},D6t(t){t&&t.kB(!1)},O6t(t,s,i){t&&t.VJ(s/100,i/100)},k6t(t,s){t&&t.qM(+s)},L6t(t,s){if(t){za.Ea(s),za.Tr();const i=t.OB();i.Ga(za)||(i.ca(za),this.ZO())}},B6t(t,s){t&&t.CB(s)},N6t(t,s){t&&t.AM(s)},W6t(t,s,i){if(t){const e=t.S5(),h=e.qht(i);if(h){const r=1===s;h.bmt()!==r&&(h.DEt(r),t.iW(),this.bf.ZO())}}},j6t(t,s,i,e){if(t){const h=t.S5(),r=h.qht(s);if(r){i=Math.floor(i);const n=r.BG().WG(i);if(n){"color"===n?(za.Ea(e),e=za):"percent"===n&&(e/=100);const o=h.hW(r.QF(),i,e);o&&r.bmt()&&this.bf.ZO()}}}},V6t(t,s){t&&t.PB(s)},U6t(t){this.bf.UO().v5(+t)},H6t(t){this.bf.UO().G5(ja.Ir(+t))},z6t(t,s){const i=this.bf.UO(),e=i.S5(),h=e.qht(s);if(h){const r=1===t;h.bmt()!==r&&(h.DEt(r),i.iW(),this.bf.ZO())}},J6t(t,s,i){const e=this.bf.UO(),h=e.S5(),r=h.qht(t);if(r){s=Math.floor(s);const n=r.BG().WG(s);if(n){"color"===n?(za.Ea(i),i=za):"percent"===n&&(i/=100);const o=h.hW(r.QF(),s,i);o&&r.bmt()&&this.bf.ZO()}}},q6t(t,s){const i=this.bf.UO();i.J5(t/100,s/100)},X6t(t){const s=this.bf.UO();0===t?s.Y5():s.K5()},Y6t(t){const s=this.bf.UO();s.T5(t)},$6t(t){const s=this.bf.UO();s.I5(t)},K6t(t,s){const i=this.bf.UO();i.T5(t),i.I5(s)},Z6t(t){if(t){const s=t.tvt();if(s){const i=s.zO();if(i){const e=this.bf.UO();e.T5(i.jM()),e.I5(i.HM())}}}},B5(t,s,i){const e=this.bf.UO();try{e.B5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},W5(t,s,i){if(t){const e=this.bf.UO();try{e.W5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},V5(t){if(t){const s=this.bf.UO();s.V5(t)}},H5(){this.bf.UO().H5()},async Q6t(t){const s=this.bf.xO();if(s&&t&&!this.bf.uy()){const i=t.lJ()?t.ygt():[t];await this.Y4t(s,i)}},async tWt(t){await ja._Y.TY.drt.Q6t.call(this,this.bf.rBt(t))},sWt(t){const s=this.bf.xO();if(s&&t){const i=t.lJ()?t.ygt():[t];this.K4t(s,i)}},iWt(t){ja._Y.TY.drt.sWt.call(this,this.bf.rBt(t))},eWt(){const t=this.bf.xO();if(t){const s=t.zX();this.K4t(t,s)}},async hWt(t){const s=this.bf.xO();t&&s&&!this.bf.uy()&&await this.Y4t(s,t.VX())},async rWt(t){const s=this.bf.xO(),i=this.bf._O().y$(t);i&&s&&!this.bf.uy()&&await this.Y4t(s,i.VX())},zD(t){const s=this.Pft.VD();if(s)switch(s.HD()){case 1:"number"==typeof t&&s.zD(t);break;case 2:"string"==typeof t&&s.zD(t);break;case 3:s.zD(t)}},nWt(t,s,i){const e=this.lNt(t.toLowerCase(),!0),h=e.cNt,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),ja.first(h.values())||e.uNt);if(n){const o=0!==n.WD(),a=0!==i.WD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},oWt(t,s){const i=this.lNt(t.toLowerCase(),!0),e=(i.uNt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),ja.first(i.cNt.values())||i.uNt);if(e){const h=0!==e.WD(),r=0!==s.WD();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.uNt=s},aWt(t,s,i){const e=this.bf,h=e.uvt()?Ja:null,r=(i=Math.floor(i),this.lNt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.cNt.get(s.toLowerCase());if(!n){if(!r.uNt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.uNt,i=0}if(!n.nc())return h;if(0!==n.WD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.AD(),a=o.kD(),l=a.OD(),u=0<l.length,c=(u&&(n.ND()?o.fV(l):o.V1t(l)),[]),f=o.kpt(a);if(f){const p=f.Bpt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Wet())}const d=n.Bpt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].jdt());return e.uvt()?this.dNt(o,n,c,u,l):this.fNt(o,n,c,u,l)}}}{const G=self.Ws;G._Y.TY.prt={lWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},Jt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.bf.vO()*t:this.bf.vO()*(s-t)+t},ESt(...t){const s=Math.floor(this.bf.vO()*t.length);return t[s]},uWt(t,...s){return"number"!=typeof t&&(t=0),s[t=G.Tr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},cWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},fWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(G.Ir(t))},cos(t){return Math.cos(G.Ir(t))},tan(t){return Math.tan(G.Ir(t))},asin(t){return G.Cr(Math.asin(t))},acos(t){return G.Cr(Math.acos(t))},atan(t){return G.Cr(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Tr(t,s,i){return G.Tr(t,s,i)},At(t,s,i,e){return G.Rr(t,s,i,e)},angle(t,s,i,e){return G.Cr(G.Pr(t,s,i,e))},kt(t,s,i){return G.kt(t,s,i)},Nr(t,s,i){return G.Nr(t,s,i)},jr(t,s,i,e){return G.jr(t,s,i,e)},Vr(t,s,i,e,h){return G.Vr(t,s,i,e,h)},Ur(t,s,i){return G.Ur(t,s,i)},dWt(t,s){return G.Cr(G.Er(G.Ir(t),G.Ir(s)))},pWt(t,s,i){return G.Cr(G.Or(G.Ir(t),G.Ir(s),i))},mWt(t,s,i){return G.Cr(G.Fr(G.Ir(t),G.Ir(s),G.Ir(i)))},gWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},yWt(t,s){return(t|=0)^1<<(0|s)},SWt(t,s){return(t|=0)&1<<(0|s)?1:0},wWt(){return"\n"},bWt(t){return"string"==typeof t?t.toUpperCase():""},MWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},vWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},xWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.me(s),"i")):-1},GWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(G.me(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(G.me(s),"gi"),i):"string"==typeof t?t:""},TWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},_Wt(t,s,i){const e=this.q4t(s,i);return t?t.search(e):-1},IWt(t,s,i,e){const h=this.q4t(s,i);return t?t.replace(h,e):""},CWt(t,s,i){const e=this.X4t(t.toString(),s,i);return e?e.length:0},RWt(t,s,i,e){e=Math.floor(e);const h=this.X4t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},AWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},PWt(t){return encodeURIComponent(t)},EWt(t){return decodeURIComponent(t)},KD(){return this.bf.YK()},timescale(){return this.bf.hO()},FWt(){return(Date.now()-this.bf.BBt())/1e3},DWt(){return Date.now()},time(){return this.bf.sO()},tickcount(){return this.bf.Jtt()},OWt(){return this.bf.jBt()},fps(){return this.bf.nO()},kWt(){return this.bf.uO()},LWt(){return this.bf.fO()},BWt(){return this.bf.eL().cL()},NWt(){return this.bf.eL().dL()},WWt(){return this.bf.gD()},jWt(){return this.bf.SD()},VWt(){return this.bf.gD()},UWt(){return this.bf.SD()},HWt(){return this.bf.UO()._5()},zWt(){return this.bf.UO().C5()},JWt(){return this.bf.UO().cf()},qWt(){return this.bf.UO().x5()},XWt(){return G.Cr(this.bf.UO().GetAngle())},YWt(){return this.bf.UO().Pm()},$Wt(){return this.bf.UO().jm()},KWt(){return 100*this.bf.UO().OJ()},ZWt(){return 100*this.bf.UO().kJ()},QWt(t){const s=this.bf.UO().JO(t);return s?s.DJ().Pl():0},t8t(t){const s=this.bf.UO().JO(t);return s?s.DJ().El():0},s8t(t){const s=this.bf.UO().JO(t);return s?s.DJ().Fl():0},i8t(t){const s=this.bf.UO().JO(t);return s?s.DJ().Dl():0},e8t(t){const s=this.bf.UO().JO(t);return s?s.DJ().width():0},h8t(t){const s=this.bf.UO().JO(t);return s?s.DJ().height():0},r8t(t){const s=this.bf.UO().JO(t);if(s){const i=s.DJ();return(i.Pl()+i.Fl())/2}return 0},n8t(t){const s=this.bf.UO().JO(t);if(s){const i=s.DJ();return(i.El()+i.Dl())/2}return 0},o8t(t,s,i){const e=this.bf.UO().JO(t);return e?e.WB(s,i)[0]:0},a8t(t,s,i){const e=this.bf.UO().JO(t);return e?e.WB(s,i)[1]:0},l8t(t,s,i){const e=this.bf.UO().JO(t);return e?e.HB(s,i)[0]:0},u8t(t,s,i){const e=this.bf.UO().JO(t);return e?e.HB(s,i)[1]:0},c8t(t,s,i,e){const h=this.bf.UO(),r=h.JO(t),n=h.JO(s);if(!r||!n||r===n)return i;const[o,a]=r.HB(i,e);return n.WB(o,a)[0]},f8t(t,s,i,e){const h=this.bf.UO(),r=h.JO(t),n=h.JO(s);if(!r||!n||r===n)return e;const[o,a]=r.HB(i,e);return n.WB(o,a)[1]},d8t(t){const s=this.bf.UO().JO(t);return s?s.SB():0},p8t(t){const s=this.bf.UO().JO(t);return s?G.Cr(s.MB()):0},m8t(t){const s=this.bf.UO().JO(t);return s?100*s.hP():0},g8t(t){const s=this.bf.UO().JO(t);return s?s.bB():0},y8t(t){const s=this.bf.UO().JO(t);return s?s._5():0},S8t(t){const s=this.bf.UO().JO(t);return s?s.C5():0},w8t(t){const s=this.bf.UO().JO(t);return s?100*s.xB():0},b8t(t){const s=this.bf.UO().JO(t);return s?100*s.TB():0},M8t(t){const s=this.bf.UO().JO(t);return s?s.JM():0},v8t(t){const s=this.bf.UO().JO(t);return s?s.QF():-1},x8t(){const t=this.bf.eL();return t?t.POt():""},G8t(t){const s=this.z0t;if(!s.j0t())return 0;if(t){const i=s.U0t(t);return i?i.QF():0}return s.N0t().QF()},T8t(){return this.bf.s4t()},_8t(t,s,...i){const e=this.lNt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.cNt.get(s.toLowerCase());if(!h){if(!e.uNt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.uNt}const r=h.WD(),n=h.ED();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.nc())return n;const o=this.bf,a=o.AD(),l=a.kD(),u=l.OD(),c=0<u.length,f=(c&&(h.ND()?a.fV(u):a.V1t(u)),h.Bpt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].jdt());const d=h.DD(),p=d.BD(d.OD(),h.ND(),r,n,...i);return c&&a.pV(u),p},I8t(){return this.bf.eD().GH()},C8t(){return 0===this.H4t?1:this.z4t/this.H4t},renderer(){return this.bf.pOt()?"webgpu":"webgl"},R8t(){return this.bf.pOt()?this.bf.pOt().GetAdapterInfoString():this.bf.dOt().dE()},A8t(){let t=this.bf.uM().Bb();return Math.round(100*t/1048576)/100},P8t(t,s,i){return G.$r(t,s,i)},E8t(t,s,i){return G.Zr(t/100,s/100,i/100)},F8t(t,s,i,e){return G.Kr(t/100,s/100,i/100,e/100)},D8t(t,s,i){return G.Zr(t/255,s/255,i/255)},O8t(t,s,i,e){return G.Kr(t/255,s/255,i/255,e/255)},k8t(){return this.bf.uD()},L8t(){return this.bf.fD()},B8t(){return this.bf.kD().PX().cf()},N8t(){return this.bf.kD().Ogt()}}}{const qa=self.Ws;qa._Y.W8t=class extends qa.ixt{constructor(t){super(t)}wr(){super.wr()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const Xa=self.Ws;Xa._Y.W8t.bIt=class extends Xa.jxt{constructor(t,s){super(t),this.Qv="repeat",this.t2="repeat",s&&(this.Qv=i(s[0]),this.t2=i(s[1]))}wr(){super.wr()}_xt(){this.MW().dk(this.bf)}qX(t){return this.MW().$V(t,{Hv:this.bf.wD(),Vv:this.Qv,Uv:this.t2})}QX(){this.MW().$I()}j8t(){return this.Qv}V8t(){return this.t2}}}{const Ya=self.Ws,$a=self.Ks,Ka=Ya.Sr(Ya.Rect),Za=Ya.Sr(Ya.ou),Qa=Ya.Sr(Ya.Rect),tl=Ya.Sr(Ya.ou),T=(Ya._Y.W8t.Instance=class extends Ya.bGt{constructor(t,s){super(t),this.U8t=0,this.H8t=0,this.z8t=1,this.J8t=1,this.q8t=0,this.X8t=!1,this.Y8t=0,this.$8t=0,this.K8t=0,this.Z8t=0,this.Q8t=0,this.tjt=null,s&&(this.zO().oB(!!s[0]),this.U8t=s[4],this.H8t=s[5],this.z8t=s[6],this.J8t=s[7],this.q8t=Ya.Ir(s[8]),this.X8t=!!s[9],this.Y8t=s[10],this.$8t=s[11],this.K8t=s[12],this.Z8t=s[13],this.Q8t=s[14])}wr(){this.sjt(),super.wr()}sjt(){this.tjt&&(this.tjt.wr(),this.tjt=null)}ijt(t,s,i){const e=this.CGt(),h=e.Pm(),r=e.jm(),n=this.U8t/h,o=this.H8t/r,a=this.q8t;Qa.set(0,0,t/(h*this.z8t),s/(r*this.J8t)),Qa.offset(-n,-o),0===a?i.Cu(Qa):i.Ru(Qa,-a)}ejt(t,s=!0){if(this.X8t){const i=this.CGt();t.aw(),t.EP(i.Pm()*this.z8t,i.jm()*this.J8t,this.Y8t,this.$8t,this.K8t,this.Z8t,this.Q8t)}else s&&t.iw()}Fv(t){const s=this.CGt(),i=s.yx();if(null!==i){this.ejt(t),t.lP(i);const e=s.Pm(),h=s.jm(),r=this.U8t/e,n=this.H8t/h,o=this.zO();Qa.set(0,0,o.Pm()/(e*this.z8t),o.jm()/(h*this.J8t)),Qa.offset(-r,-n),o.R6()?this.hjt(o,t):this.rjt(o,t)}}rjt(t,s){let i=t.TN();this.bf.MD()&&(i=t.zPt(i)),0===this.q8t?s.Kw(i,Qa):(tl.Ru(Qa,-this.q8t),s.wP(i,tl))}hjt(i,t){const e=i.lEt();if(i.cEt()){i.VPt(Ka,Za,!1);let t=Za,s=(this.bf.MD()&&(t=i.zPt(t)),Qa);0!==this.q8t&&(tl.Ru(Qa,-this.q8t),s=tl),e.Ev(i.A6(),t,s),i.uEt(!1)}e.Fv(t)}CGt(){return this.tjt||this.xft.MW()}Oit(){return!0}yx(){return this.CGt().yx()}njt(){this.zO().uEt(!0)}ojt(t){this.U8t!==t&&(this.U8t=t,this.bf.ZO(),this.njt())}ajt(){return this.U8t}ljt(t){this.H8t!==t&&(this.H8t=t,this.bf.ZO(),this.njt())}ujt(){return this.H8t}cjt(t){this.z8t!==t&&(this.z8t=t,this.bf.ZO(),this.njt())}fjt(){return this.z8t}djt(t){this.J8t!==t&&(this.J8t=t,this.bf.ZO(),this.njt())}pjt(){return this.J8t}mjt(t){this.q8t!==t&&(this.q8t=t,this.bf.ZO(),this.njt())}gjt(){return this.q8t}yjt(t){this.X8t!==(t=!!t)&&(this.X8t=t,this.bf.ZO())}Sjt(){return this.X8t}wjt(t){this.Y8t!==t&&(this.Y8t=t,this.Sjt())&&this.bf.ZO()}bjt(){return this.Y8t}Mjt(t){this.$8t!==t&&(this.$8t=t,this.Sjt())&&this.bf.ZO()}vjt(){return this.$8t}xjt(t){this.K8t!==t&&(this.K8t=t,this.Sjt())&&this.bf.ZO()}Gjt(){return this.K8t}Tjt(t){this.Z8t!==t&&(this.Z8t=t,this.Sjt())&&this.bf.ZO()}_jt(){return this.Z8t}Ijt(t){this.Q8t!==t&&(this.Q8t=t,this.Sjt())&&this.bf.ZO()}Cjt(){return this.Q8t}tv(){const t={};return 0!==this.U8t&&(t.iox=this.U8t),0!==this.H8t&&(t.ioy=this.H8t),1!==this.z8t&&(t.isx=this.z8t),1!==this.J8t&&(t.isy=this.J8t),0!==this.q8t&&(t.ia=this.q8t),this.X8t&&(t.tr=!0),1!==this.Y8t&&(t.trx=this.Y8t),1!==this.$8t&&(t.try=this.$8t),1!==this.K8t&&(t.tra=this.K8t),.1!==this.Z8t&&(t.trbmx=this.Z8t),.1!==this.Q8t&&(t.trbmy=this.Q8t),t}sv(t){this.U8t=t.iox||0,this.H8t=t.ioy||0,this.z8t=t.hasOwnProperty("isx")?t.isx:1,this.J8t=t.hasOwnProperty("isy")?t.isy:1,this.q8t=t.ia||0,this.X8t=!!t.tr,this.Y8t=t.hasOwnProperty("trx")?t.trx:1,this.$8t=t.hasOwnProperty("try")?t.try:1,this.K8t=t.hasOwnProperty("tra")?t.tra:1,this.Z8t=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.Q8t=t.hasOwnProperty("trbmy")?t.trbmy:.1}mGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.ajt(),Rjt:t=>this.ojt(t)},{name:t+".image-offset-y.name",value:this.ujt(),Rjt:t=>this.ljt(t)},{name:t+".image-scale-x.name",value:100*this.fjt(),Rjt:t=>this.cjt(t/100)},{name:t+".image-scale-y.name",value:100*this.pjt(),Rjt:t=>this.djt(t/100)},{name:t+".image-angle.name",value:Ya.Cr(this.gjt()),Rjt:t=>this.mjt(Ya.Ir(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.Sjt(),Rjt:t=>this.yjt(t)},{name:t+".x-random.name",value:100*this.bjt(),Rjt:t=>this.wjt(t/100)},{name:t+".y-random.name",value:100*this.vjt(),Rjt:t=>this.Mjt(t/100)},{name:t+".angle-random.name",value:100*this.Gjt(),Rjt:t=>this.xjt(t/100)},{name:t+".blend-margin-x.name",value:100*this._jt(),Rjt:t=>this.Tjt(t/100)},{name:t+".blend-margin-y.name",value:100*this.Cjt(),Rjt:t=>this.Ijt(t/100)}]}]}Krt(t){switch(t){case 4:return this.ajt();case 5:return this.ujt();case 6:return this.fjt();case 7:return this.pjt();case 8:return this.gjt();case 9:return this.Sjt();case 10:return this.bjt();case 11:return this.vjt();case 12:return this.Gjt();case 13:return this._jt();case 14:return this.Cjt()}}ent(t,s){switch(t){case 4:this.ojt(s);break;case 5:this.ljt(s);break;case 6:this.cjt(s);break;case 7:this.djt(s);break;case 8:this.mjt(s);break;case 9:this.yjt(!!s);break;case 10:this.wjt(s);break;case 11:this.Mjt(s);break;case 12:this.xjt(s);break;case 13:this.Tjt(s);break;case 14:this.Ijt(s)}}Ixt(){return self.Ajt}},new WeakMap);self.Ajt=class extends self.E6{constructor(){super(),T.set(this,self.KB.i4().L6())}set Pjt(t){$a.Te(t),T.get(this).ojt(t)}get Pjt(){return T.get(this).ajt()}set Ejt(t){$a.Te(t),T.get(this).ljt(t)}get Ejt(){return T.get(this).ujt()}Fjt(t,s){$a.Te(t),$a.Te(s);const i=T.get(this);i.ojt(t),i.ljt(s)}Djt(){const t=T.get(this);return[t.ajt(),t.ujt()]}set Ojt(t){$a.Te(t),T.get(this).cjt(t)}get Ojt(){return T.get(this).fjt()}set kjt(t){$a.Te(t),T.get(this).djt(t)}get kjt(){return T.get(this).pjt()}Ljt(t,s){$a.Te(t),$a.Te(s);const i=T.get(this);i.cjt(t),i.djt(s)}Bjt(){const t=T.get(this);return[t.fjt(),t.pjt()]}set Njt(t){$a.Te(t),T.get(this).mjt(t)}get Njt(){return T.get(this).gjt()}set Wjt(t){$a.Te(t),T.get(this).mjt(Ya.Ir(t))}get Wjt(){return Ya.Cr(T.get(this).gjt())}get imageWidth(){return T.get(this).CGt().Pm()}get imageHeight(){return T.get(this).CGt().jm()}jjt(){const t=T.get(this).CGt();return[t.Pm(),t.jm()]}set Vjt(t){T.get(this).yjt(!!t)}get Vjt(){return T.get(this).Sjt()}set Ujt(t){$a.Te(t),T.get(this).wjt(t)}get Ujt(){return T.get(this).bjt()}set Hjt(t){$a.Te(t),T.get(this).Mjt(t)}get Hjt(){return T.get(this).vjt()}zjt(t,s){$a.Te(t),$a.Te(s);const i=T.get(this);i.wjt(t),i.Mjt(s)}Jjt(){const t=T.get(this);return[t.bjt(),t.vjt()]}set qjt(t){$a.Te(t),T.get(this).xjt(t)}get qjt(){return T.get(this).Gjt()}set Xjt(t){$a.Te(t),T.get(this).Tjt(t)}get Xjt(){return T.get(this)._jt()}set Yjt(t){$a.Te(t),T.get(this).Ijt(t)}get Yjt(){return T.get(this).Cjt()}$jt(t,s){$a.Te(t),$a.Te(s);const i=T.get(this);i.Tjt(t),i.Ijt(s)}Kjt(){const t=T.get(this);return[t._jt(),t.Cjt()]}async Zjt(t){$a.oh(t,Blob);const s=T.get(this),i=s.pk(),e=Ya.Sr(Ya.LTt);e.KTt(i,t),await e.$V(i.uM(),{Hv:i.wD(),Vv:s.aMt().j8t(),Uv:s.aMt().V8t()}),s.br()?e.wr():(s.sjt(),s.tjt=e,i.ZO())}}}{const sl=self.Ws;sl._Y.W8t.GY={Qjt(){return!0},tVt(){return!0},sVt(){return this.Sjt()}}}{const il=self.Ws;il._Y.W8t.drt={iVt(t){this.ojt(t)},eVt(t){this.ljt(t)},hVt(t){this.cjt(t/100)},rVt(t){this.djt(t/100)},nVt(t){this.mjt(il.Ir(t))},oVt(t){this.yjt(t)},aVt(t,s){this.wjt(t/100),this.Mjt(s/100)},lVt(t){this.xjt(t/100)},uVt(t,s){this.Tjt(t/100),this.Ijt(s/100)},cVt(t){this.zO().AM(t),this.bf.ZO()},async fVt(t,s){if(!this.tjt||this.tjt.yH()!==t){const i=this.bf,e=il.Sr(il.LTt);try{if(await e.$Tt(i,t),!e.UH())throw new Error("image failed to load");if(this.br())return e.wr(),null;const h=await e.$V(i.uM(),{Hv:i.wD(),Vv:this.aMt().j8t(),Uv:this.aMt().V8t()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.br()||this.N4(il._Y.W8t.GY.tVt))}this.br()?e.wr():(this.sjt(),this.tjt=e,i.ZO(),await this.j4(il._Y.W8t.GY.Qjt))}}}}{const el=self.Ws;el._Y.W8t.prt={dVt(){return this.CGt().Pm()},pVt(){return this.CGt().jm()},mVt(){return this.U8t},gVt(){return this.H8t},yVt(){return 100*this.z8t},SVt(){return 100*this.J8t},wVt(){return el.Cr(this.q8t)},bVt(){return 100*this.bjt()},MVt(){return 100*this.vjt()},vVt(){return 100*this.Gjt()},xVt(){return 100*this._jt()},GVt(){return 100*this.Cjt()}}}{const hl=self.Ws;hl._Y.$ht=class extends hl.ixt{constructor(t){super(t)}wr(){super.wr()}}}{const rl=self.Ws,nl=self.Ks,ol=[],al=(rl._Y.$ht.bIt=class extends rl.jxt{constructor(t){super(t),this.dIt=t.ZIt()}wr(){rl.Hn(this.dIt),super.wr()}_xt(){for(const t of this.dIt)t.p_t(this.bf)}qX(s){const i={Hv:this.bf.wD()};return Promise.all(this.dIt.map(t=>t.m_t(s,i)))}QX(){for(const t of this.dIt)t.g_t()}$X(){this.TVt()}TVt(){for(const t of this.xft.h5())t.L6()._Vt()}Gbt(t){rl._Y.$ht.k2t(this,t)}lMt(t){ol.push({zxt:null,IVt:!1,instances:[]})}CVt(t,s,i){const e=ol.at(-1);e.zxt=t,e.IVt=i,e.instances.push(s)}uMt(t){const s=ol.pop(),i=s.zxt,e=s.IVt;if(i){const h=new Map;for(const r of s.instances)r.aRt(h,i,e);for(const[n,o]of h)n.n5().qft(o)}}RVt(t){const s=this.QB().eCt(t),i=this.pk(),e=s.y_t(0);return e.MW().$V(i.uM(),{Hv:i.wD()}).then(()=>this.TVt()),s}AVt(t){for(const s of this.xft.h5())s.L6().PVt(t);this.QB().hCt(t)}EVt(t,s){const i=this.xft.sCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.M_t(s);e<0&&(e+=i.dW()+1);const h=rl.c_t.d_t(this.pk()),r=(i.S_t(h,e),this.pk());h.MW().$V(r.uM(),{Hv:r.wD()}).then(()=>this.TVt());for(const n of this.xft.h5())n.L6().FVt();return h}DVt(t,s){const i=this.xft.sCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.dW())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.M_t(s);e<0&&(e+=i.dW()),i.w_t(e);for(const h of this.xft.h5())h.L6().FVt()}Ixt(){return self.OVt}},new WeakMap);self.OVt=class extends self.JL{constructor(t){super(t),al.set(this,t.aMt())}kVt(t){nl.Re(t);const s=al.get(this).QB().sCt(t);return s?s.v_t():null}LVt(){return al.get(this).QB().tCt().map(t=>t.v_t())}BVt(t){return nl.Re(t),al.get(this).RVt(t).v_t()}NVt(t){nl.Re(t),al.get(this).AVt(t)}WVt(t,s){if(nl.Re(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return al.get(this).EVt(t,s).gW()}jVt(t,s){if(nl.Re(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");al.get(this).DVt(t,s)}}}{const I=self.Ws,ll=self.Ks,ul=I.Sr(I.Rect),cl=I.Sr(I.ou),fl=I.Sr(I.ol),dl=(I._Y.$ht.Instance=class extends I.bGt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.VVt=this.xft.sCt(e)||this.xft.ZIt()[0],this.UVt=I.Tr(h,0,this.VVt.dW()-1),this.HVt=this.VVt.y_t(this.UVt);const n=this.HVt.MW(),o=(this.zVt=n.yx(),this.JVt=n.rR(),this.qVt=n.EGt(),this.GGt(),t.nRt(2,!0),t.nRt(1,0<=this.VVt.nW()),this.XVt=Math.abs(this.VVt.nW()),this.YVt=this.VVt.uW(),this.$Vt=I.Sr(I.D0),this.KVt=0,this.ZVt=0,this.QVt="",this.tUt=-1,this.sUt="",this.iUt=0,this.zO());this.eUt=o.TN(),o.oB(i),o.jN(r),o.Ant(this.HVt.GW()),o.Ent(this.HVt._W()),o.ZPt(this.HVt.LW()),o.mN(),1===this.xft.QIt()&&1===this.xft.ZIt()[0].dW()||0===this.XVt||this.cGt()}wr(){this.VVt=null,this.HVt=null,this.zVt=null,this.$Vt=null,super.wr()}CGt(){return this.HVt.MW()}Oit(){return!0}YH(){this.zVt=null}IGt(){this._Vt()}Fv(t){const s=this.zVt;if(null!==s){t.lP(s);const i=this.zO();i.R6()?this.hjt(i,t):this.rjt(i,t)}}rjt(t,s){let i=this.eUt;this.bf.MD()&&(i=t.zPt(i)),s.wP(i,this.qVt)}hjt(s,t){const i=s.lEt();if(s.cEt()){s.VPt(ul,cl,!1);let t=cl;this.bf.MD()&&(t=s.zPt(t)),i.Ev(s.A6(),t,this.qVt),s.uEt(!1)}i.Fv(t)}hUt(){return this.$Vt.ni()}rUt(){return this.Ci.oRt(2)}nUt(t){this.Ci.nRt(2,t)}oUt(){return this.Ci.oRt(1)}aUt(t){this.Ci.nRt(1,t)}lUt(){return this.Ci.oRt(4)}uUt(t){this.Ci.nRt(4,t)}KK(){this.sUt&&this.cUt(),0<=this.tUt&&this.fUt();const t=this.XVt;if(this.rUt()&&0!==t){const s=this.bf.ZD(this.Ci),i=(this.$Vt.Gc(s),this.hUt()),e=this.HVt,h=e.vW()/t;if(!(i<this.KVt+h)){const r=this.VVt,n=this.YVt,o=r.dW(),a=r.aW(),l=r.oW(),u=r.fW(),c=(this.oUt()?this.UVt++:this.UVt--,this.KVt+=h,this.UVt>=o&&(u?(this.aUt(!1),this.UVt=o-2):!l&&(this.ZVt++,this.ZVt>=a)?this.dUt(!1):this.UVt=n),this.UVt<0&&(u?(this.UVt=1,this.aUt(!0),l||(this.ZVt++,this.ZVt>=a&&this.dUt(!0))):!l&&(this.ZVt++,this.ZVt>=a)?this.dUt(!0):this.UVt=n),this.UVt=I.Tr(this.UVt,0,o-1),r.y_t(this.UVt));i>this.KVt+c.vW()/t&&(this.KVt=i),this.pUt(e,c)}}else this.Yxt()}dUt(t){this.UVt=t?0:this.VVt.dW()-1,this.nUt(!1),this.QVt=this.VVt.cf(),this.uUt(!0),this.Hxt("animationend",!1,{animationName:this.QVt}),this.N4(I._Y.$ht.GY.mUt),this.N4(I._Y.$ht.GY.gUt),this.uUt(!1),this.ZVt=0}pUt(i,e,t){if(i!==e){const s=this.zO(),h=i.MW(),r=e.MW(),n=h.Pm(),o=h.jm(),a=r.Pm(),l=r.jm(),u=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,l):(n!==a&&s.Bm(s.Pm()*(a/n)),o!==l&&s.Em(s.jm()*(l/o))),s.Ant(e.GW()),s.Ent(e._W()),s.ZPt(e.LW()),s.mN(),this.HVt=e,this.zVt=r.yx(),this.JVt=r.rR(),this.qVt=r.EGt(),this.c8().Hht());for(let t=0,s=u.length;t<s;++t)u[t].STt(i,e);this.Hxt("framechange",!1,{animationName:this.VVt.cf(),yUt:this.UVt}),this.N4(I._Y.$ht.GY.SUt),this.bf.ZO()}}wUt(t){this.nUt(!0),this.KVt=this.hUt(),1===t&&0!==this.UVt&&(this.tUt=0,this.lUt()||this.fUt()),this.cGt()}bUt(t,s,i){this.sUt=t,this.iUt=s,this.cGt(),!i&&this.lUt()||this.cUt()}MUt(){return this.VVt}vUt(){return this.sUt||this.VVt.cf()}PVt(t){I.Gh(t,this.vUt())&&this.bUt(this.xft.rCt().cf(),1,!0)}xUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.xft.sCt(this.vUt());if(!s)return;if(-1===(t=s.b_t(t)))return}isFinite(t)&&(this.tUt=t,this.lUt()||this.fUt())}FVt(){if(!this.sUt&&-1===this.tUt){const t=this.HVt,s=this.VVt.y_t(I.Tr(this.UVt,0,this.VVt.dW()-1));t!==s&&this.pUt(t,s),1<this.VVt.dW()&&0<this.XVt&&this.cGt()}}GUt(){return this.UVt}TUt(){return this.HVt.jW()}_Ut(t){this.XVt=Math.abs(t),this.aUt(0<=t),0<this.XVt&&this.cGt()}IUt(){return this.oUt()?this.XVt:-this.XVt}CUt(t){"string"==typeof t&&-1===(t=this.VVt.b_t(t))||(t=I.Tr(Math.floor(t),0,this.VVt.dW()-1),this.YVt=t)}RUt(){return this.YVt}cUt(t){const s=this.HVt,i=this.xft.sCt(this.sUt);if(this.sUt="",i&&(i!==this.VVt||!this.rUt())){this.VVt=i,this.aUt(0<=i.nW()),this.XVt=Math.abs(i.nW()),this.YVt=i.uW(),this.UVt=I.Tr(this.UVt,0,this.VVt.dW()-1),1===this.iUt&&(this.UVt=0),this.nUt(!0),this.KVt=this.hUt();const e=this.VVt.y_t(this.UVt);this.pUt(s,e,t)}}fUt(t){const s=this.HVt,i=this.UVt;if(this.UVt=I.Tr(Math.floor(this.tUt),0,this.VVt.dW()-1),this.tUt=-1,t||i!==this.UVt){const e=this.VVt.y_t(this.UVt);this.pUt(s,e),this.KVt=this.hUt()}}_Vt(){const t=this.HVt.MW();this.zVt=t.yx(),this.JVt=t.rR(),this.qVt=t.EGt(),this.zO().uEt(!0)}yx(){return this.zVt}rR(){return this.JVt}EGt(){return this.qVt}AW(){return this.HVt.AW()}xMt(t){let s=this.HVt,i=this.zO(),e=null;if("string"==typeof t)e=s.OW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.DW(t-1)}let h=i.MN();if(!e)return[i.jM(),i.HM(),h];if(fl.I(e.F_t()),i.R6()){const[r,n,o]=i.A6().Nv(fl.fl(),fl.pl());fl.set(r,n),h+=o}return fl.offset(-s.GW(),-s._W()),fl.scale(i.Pm(),i.jm()),fl.rotate(i.GetAngle()),fl.offset(i.jM(),i.HM()),[fl.fl(),fl.pl(),h]}AUt(){return this.zO().eEt().qu()}PUt(t){t=Math.floor(t);const s=this.zO(),i=s.eEt(),e=i.qu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Ju();return[h[2*t+0]+s.jM(),h[2*t+1]+s.HM()]}mGt(){const s=I._Y.$ht.drt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.VVt.cf(),Rjt:t=>this.yGt(s.EUt,t,0)},{name:t+".current-frame",value:this.UVt,Rjt:t=>this.yGt(s.FUt,t)},{name:t+".is-playing",value:this.rUt(),Rjt:t=>t?this.yGt(s.DUt,0):this.yGt(s.OUt)},{name:t+".speed",value:this.XVt,Rjt:t=>this.yGt(s.kUt,t)},{name:t+".repeats",value:this.ZVt,Rjt:t=>this.ZVt=t}]}]}tv(){const t={a:this.VVt.yJ()},s=(0!==this.KVt&&(t.fs=this.KVt),this.hUt()),i=(0!==s&&(t.at=s),0!==this.UVt&&(t.f=this.UVt),0!==this.XVt&&(t.cas=this.XVt),1!==this.ZVt&&(t.ar=this.ZVt),0!==this.YVt&&(t.rt=this.YVt),this.rUt()||(t.ap=this.rUt()),this.oUt()||(t.af=this.oUt()),this.zO());return i.WN()&&(t.ce=i.WN()),t}sv(t){const s=this.QB().iCt(t.a),i=(s&&(this.VVt=s),this.KVt=t.hasOwnProperty("fs")?t.fs:0,this.$Vt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.UVt=I.Tr(i,0,this.VVt.dW()-1),this.XVt=t.hasOwnProperty("cas")?t.cas:0,this.ZVt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.YVt=I.Tr(e,0,this.VVt.dW()-1),this.nUt(!t.hasOwnProperty("ap")||!!t.ap),this.aUt(!t.hasOwnProperty("af")||!!t.af),this.VVt.y_t(this.UVt)),r=(this.HVt=h,this._Vt(),this.zO());r.Ant(h.GW()),r.Ent(h._W()),r.ZPt(h.LW()),r.jN(!!t.ce),this.rUt()&&this.cGt()}Krt(t){const s=this.zO();switch(t){case 3:return s.WN();case 2:return I.Tr(this.UVt,0,this.VVt.dW()-1);case 1:return this.VVt.cf()}}ent(t,s,i){const e=this.zO();switch(t){case 3:e.jN(!!s);break;case 2:{this.nUt(!1);const h=this.VVt.dW()-1,r=s=I.Tr(s,0,h),n=this.VVt.y_t(this.UVt),o=this.VVt.y_t(r);this.pUt(n,o,i),this.UVt=I.Tr(r,0,h);break}case 1:{this.sUt=s,this.cUt(i);const a=this.VVt.dW();1<a&&0<this.VVt.nW()?this.cGt():this.Yxt();break}}}Ixt(){return self.LUt}},new WeakMap),pl=new Map([["current-frame",0],["beginning",1]]);self.LUt=class extends self.E6{constructor(){super(),dl.set(this,self.KB.i4().L6())}RW(){return dl.get(this).AW()}PW(t){return this.EW(t)[0]}FW(t){return this.EW(t)[1]}BUt(t){return this.EW(t)[2]}EW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return dl.get(this).xMt(t)}kW(){return dl.get(this).AUt()}BW(t){return ll.Te(t),dl.get(this).PUt(t)[0]}WW(t){return ll.Te(t),dl.get(this).PUt(t)[1]}NW(t){return ll.Te(t),dl.get(this).PUt(t)}NUt(){dl.get(this).nUt(!1)}WUt(t="current-frame"){ll.Re(t);const s=pl.get(t);if(void 0===s)throw new Error("invalid mode");dl.get(this).wUt(s)}jUt(t,s="beginning"){ll.Re(t),ll.Re(s);const i=pl.get(s);if(void 0===i)throw new Error("invalid mode");const e=dl.get(this);if(!e.QB().sCt(t))throw new Error(`animation name "${t}" does not exist`);e.bUt(t,i)}kVt(t){ll.Re(t);const s=dl.get(this).QB().sCt(t);return s?s.v_t():null}get animation(){return dl.get(this).MUt().v_t()}get animationName(){return dl.get(this).vUt()}set yUt(t){ll.Te(t),dl.get(this).xUt(t)}get yUt(){return dl.get(this).GUt()}set VUt(t){ll.Re(t),dl.get(this).xUt(t)}get VUt(){return dl.get(this).TUt()}set UUt(t){ll.Te(t),dl.get(this)._Ut(t)}get UUt(){return dl.get(this).IUt()}set HUt(t){ll.Te(t),dl.get(this).CUt(t)}get HUt(){return dl.get(this).RUt()}get imageWidth(){return dl.get(this).CGt().Pm()}get imageHeight(){return dl.get(this).CGt().jm()}jjt(){const t=dl.get(this).CGt();return[t.Pm(),t.jm()]}async zUt(t){ll.oh(t,Blob);const s=dl.get(this),i=s.pk(),e=s.CGt(),h=I.Sr(I.LTt);if(h.KTt(i,t),await h.$V(i.uM(),{Hv:i.wD()}),s.br())h.wr();else{e.ZTt(h);const r=s.aMt();r.TVt(),r.QB().Qf().dispatchEvent(new I.Event("animationframeimagechange")),i.ZO()}}JUt(t,s){ll.Re(s),dl.get(this).zO().WPt(!!t,s)}}}{const ml=self.Ws;ml._Y.$ht.GY={qUt(t){return ml.Gh(this.vUt(),t)},XUt(t,s){return ml.compare(this.UVt,t,s)},YUt(t,s){if("string"!=typeof s)return!1;const i=this.HVt.jW();return ml.compare(i.toLowerCase(),t,s.toLowerCase())},$Ut(t,s){return ml.compare(this.IUt(),t,s)},gUt(t){return ml.Gh(this.QVt,t)},mUt(){return!0},SUt(){return!0},KUt(){return this.zO().Pm()<0},ZUt(){return this.zO().jm()<0},Qjt(){return!0},tVt(){return!0},WN(){return this.zO().WN()}}}{const gl=self.Ws;gl._Y.$ht.drt={QUt(t,s,i,e,h){if(t&&s){const[r,n]=this.xMt(i),o=this.bf.u5(t,s,r,n,e,h);if(o){if(e&&s.c5(o),t.XL().RL()){const l=o.zO();l.G5(this.zO().GetAngle()),l.mN()}const a=this.bf.AD();a.f5(!0),o.d5(),a.f5(!1),t!==this.bf.zdt().QB()&&this.Xxt.CVt(t,o,e)}}},OUt(){this.nUt(!1)},DUt(t){this.wUt(t)},EUt(t,s){this.bUt(t,s)},FUt(t){this.xUt(t)},kUt(t){this._Ut(t)},tHt(t){this.CUt(t)},sHt(s,t){try{0===s?this.aMt().RVt(t):this.aMt().AVt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},iHt(s,t,i){try{0===s?this.aMt().EVt(t,i):this.aMt().DVt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},eHt(t){const s=this.zO(),i=s.Pm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Bm(e),s.mN())},hHt(t){const s=this.zO(),i=s.jm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Em(e),s.mN())},v5(t){const s=this.HVt,i=s.MW(),e=this.zO(),h=e.Pm()<0?-1:1,r=e.jm()<0?-1:1,n=i.Pm()*t*h,o=i.jm()*t*r;e.Pm()===n&&e.jm()===o||(e.CC(n,o),e.mN())},async fVt(t,s,i){const e=this.HVt,h=e.MW(),r=this.zO(),n=this.bf,o=this.Xxt;if(h.yH()===t)0===s&&(r.CC(h.Pm(),h.jm()),r.mN()),this.N4(gl._Y.$ht.GY.Qjt);else{const a=gl.Sr(gl.LTt);try{if(await a.$Tt(n,t),!a.UH())throw new Error("image failed to load");if(this.br())return void a.wr();await a.$V(n.uM(),{Hv:n.wD()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.br()||this.N4(gl._Y.$ht.GY.tVt))}this.br()?a.wr():(h.ZTt(a),o.TVt(),o.QB().Qf().dispatchEvent(new gl.Event("animationframeimagechange")),n.ZO(),0===s&&(r.CC(h.Pm(),h.jm()),r.mN()),await this.j4(gl._Y.$ht.GY.Qjt))}},rHt(t){this.zO().jN(t)},WPt(t,s){this.zO().WPt(0===t,s)},cVt(t){this.zO().AM(t),this.bf.ZO()}}}{const yl=self.Ws;yl._Y.$ht.prt={nHt(){return this.GUt()},oHt(){return this.TUt()},aHt(){return this.VVt.dW()},lHt(){return this.VVt.cf()},uHt(){return this.IUt()},cHt(){return this.VVt.nW()},fHt(t){return this.xMt(t)[0]},dHt(t){return this.xMt(t)[1]},pHt(t){return this.xMt(t)[2]},mHt(){return this.AW()},dVt(){return this.CGt().Pm()},pVt(){return this.CGt().jm()},gHt(t){return this.PUt(t)[0]},yHt(t){return this.PUt(t)[1]},SHt(){return this.AUt()}}}{const Sl=self.Ws;Sl._Y.wHt=class extends Sl.ixt{constructor(t){super(t)}wr(){super.wr()}},Sl._Y.wHt.bHt=-2147483648,Sl._Y.wHt.MHt=1073741824,Sl._Y.wHt.vHt=536870912,Sl._Y.wHt.xHt=3758096384,Sl._Y.wHt.GHt=536870911}{const wl=self.Ws,bl=wl._Y.wHt.bHt,Ml=wl._Y.wHt.MHt,vl=wl._Y.wHt.vHt,xl=wl._Y.wHt.GHt;wl._Y.wHt.bIt=class extends wl.jxt{constructor(t){super(t),this.THt=[],this._Ht=!1,this.IHt=0,this.CHt=[],this.RHt=null}wr(){this.RHt.clear(),this.RHt=null,super.wr()}_xt(){this.MW().dk(this.bf)}qX(t){return this.MW().$V(t,{Hv:this.bf.wD()})}QX(){this.MW().$I()}$X(){for(const t of this.QB().h5())t.L6().AHt()}Uxt(t,s,i){this.IHt=s;for(const e of t)if(e){const h=e[0],r=!!e[1];this.THt.push({zAt:h,use:r,PHt:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.THt.push(null);for(const n of i){const o=n[0],a=n[1],l=n[2];this.CHt.push({name:o,type:a,EHt:l})}}FHt(t,s){this._Ht=!1,this.DHt(t,s)}DHt(i,e){if(!this._Ht){this._Ht=!0;for(let t=0,s=this.THt.length;t<s;++t)this.THt[t]&&(this.OHt(t,i,e,!1,!1,!1),this.OHt(t,i,e,!1,!1,!0),this.OHt(t,i,e,!1,!0,!1),this.OHt(t,i,e,!1,!0,!0),this.OHt(t,i,e,!0,!1,!1),this.OHt(t,i,e,!0,!1,!0),this.OHt(t,i,e,!0,!0,!1),this.OHt(t,i,e,!0,!0,!0))}}OHt(t,s,i,e,h,r){if(!(t<0||t>=this.THt.length)){const n=this.THt[t];if(n){const o=wl.Sr(wl.ju,n.zAt,n.use);o.transform(s,i,0),r&&o.Bu(),e&&o.Ou(s/2),h&&o.Lu(i/2),n.PHt[e?1:0][h?1:0][r?1:0]=null,n.PHt[e?1:0][h?1:0][r?1:0]=o}}}kHt(t){if(-1===t)return null;const s=t&xl;if(s<0||s>=this.THt.length)return null;const i=this.THt[s];if(!i)return null;const e=t&bl?1:0,h=t&Ml?1:0,r=t&vl?1:0;return i.PHt[e][h][r]}LHt(t){return!t||t.nc()}BHt(){return this.IHt}NHt(s){this.RHt||(this.RHt=new Map);const t=this.RHt.get(s);if("number"==typeof t&&0<=t)return this.CHt[t];for(let t=0;t<this.CHt.length;t++)if(this.CHt[t].name===s)return this.RHt.set(s,t),this.CHt[t]}}}{let s=function(t){const e=[],i=t.split(",");for(let t=0,s=i.length;t<s;++t){const h=i[t],r=h.indexOf("x");if(-1<r){let t=parseInt(h.substring(0,r),10),s=h.substring(r+1),i=parseInt(s,10);for(s.includes("h")&&(i|=_l),s.includes("v")&&(i|=Il),s.includes("d")&&(i|=Cl);0<t;--t)e.push(i)}else{let t=parseInt(h,10);h.includes("h")&&(t|=_l),h.includes("v")&&(t|=Il),h.includes("d")&&(t|=Cl),e.push(t)}}return e};s;const Gl=self.Ws,Tl=self.Ks,_l=Gl._Y.wHt.bHt,Il=Gl._Y.wHt.MHt,Cl=Gl._Y.wHt.vHt,Rl=Gl._Y.wHt.xHt,Al=Gl._Y.wHt.GHt,Pl=Gl.Sr(Gl.Rect),El=Gl.Sr(Gl.Rect),Fl=Gl.Sr(Gl.Rect),Dl=(Gl._Y.wHt.Instance=class extends Gl.bGt{constructor(t,s){super(t);const i=this.zO();this.WHt=32,this.jHt=32,this.VHt=0,this.UHt=0,this.HHt=0,this.zHt=0,this.JHt=0,this.qHt=0,this.XHt=i.Pm(),this.YHt=i.jm(),this.d7=0,this.p7=0,this.$Ht=[],this.KHt=new Map,this.ZHt=!0,this.tjt=null,s&&(i.oB(s[0]),this.WHt=Math.max(s[1],1),this.jHt=Math.max(s[2],1),this.VHt=s[3],this.UHt=s[4],this.HHt=s[5],this.zHt=s[6]),this.d7=Math.ceil(this.bf.gD()/this.WHt),this.p7=Math.ceil(this.bf.SD()/this.jHt),this.Xxt.DHt(this.WHt,this.jHt),this.QHt=null}wr(){this.sjt(),Gl.Hn(this.$Ht),this.$Ht=null,this.KHt.clear(),this.KHt=null,super.wr()}sjt(){this.tjt&&(this.tjt.wr(),this.tjt=null)}Uxt(t,s,i){this.JHt=s,this.qHt=i,this.t7t(!0),this.s7t(t),this.i7t()}t7t(t){const[s,h]=this.e7t();if(!(s<=this.JHt&&h<=this.qHt)||t){let i=0,e=0;t?(i=Math.ceil(this.qHt/this.p7),e=Math.ceil(this.JHt/this.d7)):(i=this.$Ht.length,e=Math.ceil(this.JHt/this.d7),h>this.qHt&&(this.qHt=h,i=Math.ceil(this.qHt/this.p7)),s>this.JHt&&(this.JHt=s,e=Math.ceil(this.JHt/this.d7)),this.h7t(),this.r7t(),this.bf.ZO());const r=this.$Ht;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let s=0;s<i;++s){const n=r[s];for(let t=n.length;t<e;++t)n.push(Gl.Sr(Gl._Y.wHt.n7t,this,t,s))}}}s7t(t){let i=s(t),e=0,h=this.JHt,r=this.d7,n=this.p7;for(let s=0,t=this.qHt;s<t;++s)for(let t=0;t<h;++t){const o=i[e++],a=this.o7t(t,s);a&&a.a7t(t%r,s%n,o)}}l7t(){let l="";if(!(this.JHt<=0||this.qHt<=0)){let i=1,e=this.u7t(0,0),[h,t]=this.e7t(),r=-1,n=!1,o=!1,a=!1;for(let s=0;s<t;++s)for(let t=0===s?1:0;t<h;++t){const u=this.u7t(t,s);u===e?++i:(a=-1===e?(r=-1,n=!1,o=!1):(r=e&Al,n=0!=(e&_l),o=0!=(e&Il),0!=(e&Cl)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d"),l+=",",i=1,e=u)}a=-1===e?(r=-1,n=!1,o=!1):(r=e&Al,n=0!=(e&_l),o=0!=(e&Il),0!=(e&Cl)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d")}return l}h7t(){const i=this.$Ht;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].c7t()}this.ZHt=!0}i7t(){if(this.ZHt){this.ZHt=!1;const i=this.$Ht;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].f7t()}}}d7t(){this.ZHt=!0,this.r7t(),this.bf.ZO()}r7t(){this.zO().nEt(!0)}o7t(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.p7);if(i>=this.$Ht.length)return null;const e=this.$Ht[i],h=Math.floor(t/this.d7);return h>=e.length?null:e[h]}p7t(t,s){if(t<0||s<0||s>=this.$Ht.length)return null;const i=this.$Ht[s];return t>=i.length?null:i[t]}u7t(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.JHt||s>=this.qHt)return-1;const i=this.o7t(t,s);return i?i.m7t()[s%this.p7][t%this.d7]:-1}a7t(t,s,i){if(t=Math.floor(t),s=Math.floor(s),!(t<0||s<0||t>=this.JHt||s>=this.qHt||-1!==i&&(i&Al)>this.BHt())){const e=this.o7t(t,s);e&&e.a7t(t%this.d7,s%this.p7,i)}}BHt(){return this.Xxt.BHt()}g7t(t){return Math.floor((t-this.zO().jM())/(this.d7*this.WHt))}y7t(t){return Math.floor((t-this.zO().HM())/(this.p7*this.jHt))}S7t(t){return Math.floor((t-this.zO().jM())/this.WHt)}w7t(t){return Math.floor((t-this.zO().HM())/this.jHt)}b7t(){return this.JHt}M7t(){return this.qHt}v7t(){return Math.floor(this.zO().Pm()/this.x7t())}G7t(){return Math.floor(this.zO().jm()/this.T7t())}e7t(){const t=this.zO();return[Math.floor(t.Pm()/this.x7t()),Math.floor(t.jm()/this.T7t())]}x7t(){return this.WHt}T7t(){return this.jHt}_7t(){return this.d7}I7t(){return this.p7}d3t(t,i){const e=this.g7t(t.Pl()),h=this.y7t(t.El()),r=this.g7t(t.Fl()),n=this.y7t(t.Dl());for(let s=e;s<=r;++s)for(let t=h;t<=n;++t){const o=this.p7t(s,t);o&&(o.f7t(),Gl.Qh(i,o.C7t()))}}OGt(t,s){const i=this.S7t(t),e=this.w7t(s),h=this.u7t(i,e);if(-1===h)return!1;const r=this.Xxt.kHt(h);if(!r)return!0;if(!this.Xxt.LHt(r))return!1;const n=this.zO(),o=Math.floor((t-n.jM())/this.WHt)*this.WHt+n.jM(),a=Math.floor((s-n.HM())/this.jHt)*this.jHt+n.HM();return t-=o,s-=a,r.eu(t,s)}R7t(i){const e=this.$Ht;for(let t=0,s=e.length;t<s;++t){const h=e[t];for(let t=0,s=h.length;t<s;++t){const r=h[t];r.f7t(),Gl.Qh(i,r.C7t())}}}CGt(){return this.tjt||this.xft.MW()}A7t(t){const s=this.KHt,i=s.get(t);if(i)return i;const e=t&Al,h=0!=(t&_l),r=0!=(t&Il),n=0!=(t&Cl),o=this.CGt(),a=o.Pm(),l=this.WHt,u=this.VHt,c=this.HHt,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.QTt()+this.VHt+(this.WHt+this.HHt)*p,y=o.t_t()+this.UHt+(this.jHt+this.zHt)*m,S=(Pl.xl(g,y,this.WHt,this.jHt),Pl.Ct(o.s_t(),o.i_t()),Gl.Sr(Gl.ou));return S.Cu(Pl),n&&S.Bu(),h&&S.Ou(),r&&S.Lu(),S.offset(p,m),s.set(t,S),S}AHt(){this.KHt.clear(),this.h7t()}Fv(h){const t=this.CGt(),s=t.yx();if(s){Pl.I(t.rR()),Pl.offsetLeft(this.VHt/s.Pm()),Pl.offsetTop(this.UHt/s.jm()),h.ow(),h.PP(Pl,s.Pm(),s.jm(),this.WHt,this.jHt,this.HHt,this.zHt),h.lP(s);const r=this.zO(),n=r.JO();r.Pm()===this.XHt&&r.jm()===this.YHt||(this.r7t(),this.h7t(),this.XHt=r.Pm(),this.YHt=r.jm());let i=r.jM(),e=r.HM();this.bf.MD()&&(i=Math.round(i),e=Math.round(e));const o=this.d7*this.WHt,a=this.p7*this.jHt,l=r.MN(),u=El;if(n.KJ()){u.set(-1/0,-1/0,1/0,1/0);const c=Fl,f=n.uq();for(const d of this.$Ht)for(const p of d)p.P7t(c),f.Wy(c.Pl(),c.El(),l,c.Fl(),c.Dl(),l)&&(p.f7t(),p.Fv(h,u,i,e))}else{n.LJ(l,u);const m=Math.floor((u.Pl()-i)/o),g=Math.floor((u.Fl()-i)/o),y=Math.floor((u.El()-e)/a),S=Math.floor((u.Dl()-e)/a);for(let s=m;s<=g;++s)for(let t=y;t<=S;++t){const w=this.p7t(s,t);w&&(w.f7t(),w.Fv(h,u,i,e))}}}}tv(){this.t7t();const[t,s]=this.e7t();return{tw:this.WHt,th:this.jHt,tox:this.VHt,toy:this.UHt,tsx:this.HHt,tsy:this.zHt,w:t,h:s,d:this.l7t()}}sv(t){this.WHt=t.tw,this.jHt=t.th,this.VHt=t.tox,this.UHt=t.toy,this.HHt=t.tsx,this.zHt=t.tsy,this.JHt=t.w,this.qHt=t.h,this.t7t(!0),this.s7t(t.d),this.r7t(),this.h7t()}E7t(){this.t7t();const[t,s]=this.e7t();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.l7t()})}F7t(t){switch(t){case 0:return 0;case 1:return _l;case 2:return Il;case 3:return _l|Cl;case 4:return _l|Il;case 5:return Il|Cl;case 6:return _l|Il|Cl;case 7:return Cl;default:return 0}}Krt(t){switch(t){case 1:return this.WHt;case 2:return this.jHt;case 3:return this.VHt;case 4:return this.UHt;case 5:return this.HHt;case 6:return this.zHt}}ent(t,s){switch(t){case 1:this.WHt!==s&&(this.WHt=Math.max(s,1),this.d7=Math.ceil(this.bf.gD()/this.WHt),this.Xxt.FHt(),this.D7t());break;case 2:this.jHt!==s&&(this.jHt=Math.max(s,1),this.p7=Math.ceil(this.bf.SD()/this.jHt),this.Xxt.FHt(),this.D7t());break;case 3:this.VHt!==s&&(this.VHt=s,this.D7t());break;case 4:this.UHt!==s&&(this.UHt=s,this.D7t());break;case 5:this.HHt!==s&&(this.HHt=s,this.D7t());break;case 6:this.zHt!==s&&(this.zHt=s,this.D7t())}}D7t(){this.KHt.clear(),this.h7t(),this.i7t()}Ixt(){return Ol}},new WeakMap),Ol=self.O7t=class extends self.E6{constructor(){super(),Dl.set(this,self.KB.i4().L6())}get k7t(){return Dl.get(this).b7t()}get L7t(){return Dl.get(this).M7t()}B7t(){const t=Dl.get(this);return[t.b7t(),t.M7t()]}get N7t(){return Dl.get(this).v7t()}get W7t(){return Dl.get(this).G7t()}j7t(){const t=Dl.get(this);return[t.v7t(),t.G7t()]}get V7t(){return Dl.get(this).x7t()}get U7t(){return Dl.get(this).T7t()}H7t(){const t=Dl.get(this);return[t.x7t(),t.T7t()]}z7t(t,s){return Tl.Te(t),Tl.Te(s),Dl.get(this).u7t(t,s)}J7t(t,s,i){Tl.Te(t),Tl.Te(s),Tl.Te(i);const e=Dl.get(this);e.t7t(),e.a7t(t,s,i)}async Zjt(t){Tl.oh(t,Blob);const s=Dl.get(this),i=s.pk(),e=Gl.Sr(Gl.LTt);e.KTt(i,t),await e.$V(i.uM(),{Hv:i.wD()}),s.br()?e.wr():(s.sjt(),s.tjt=e,s.KHt.clear(),s.h7t(),i.ZO())}};Ol.bHt=_l,Ol.MHt=Il,Ol.vHt=Cl,Ol.xHt=Rl,Ol.GHt=Al}{const kl=self.Ws,Ll=kl._Y.wHt.xHt,Bl=kl._Y.wHt.GHt;kl._Y.wHt.GY={q7t(t,s,i,e){let h=this.u7t(t,s);return-1!==h&&(h&=Bl),kl.compare(h,i,e)},X7t(t,s,i){let e=this.u7t(t,s);return(-1!==e?e&Ll:0)===this.F7t(i)},Qjt(){return!0},tVt(){return!0},Y7t(t){return this.QHt||(this.QHt=new kl._Y.wHt.$7t(this,this.Xxt)),this.QHt.Y7t(t)}}}{const Nl=self.Ws,Wl=Nl._Y.wHt.GHt;Nl._Y.wHt.drt={K7t(t,s){this.t7t(),this.a7t(t,s,-1)},Z7t(t,s,i,e){this.t7t(),this.a7t(t,s,i&Wl|this.F7t(e))},Q7t(t,s,i){const e=this.u7t(t,s);-1!==e&&(this.t7t(),this.a7t(t,s,e&Wl|this.F7t(i)))},tzt(t,s,i,e){const h=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),n=Math.floor(Math.min(t+i,this.JHt)),o=Math.floor(Math.min(s+e,this.qHt));for(let s=r;s<o;++s)for(let t=h;t<n;++t)this.a7t(t,s,-1)},szt(t,s,i,e,h,r){this.t7t();const n=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.JHt)),l=Math.floor(Math.min(s+e,this.qHt)),u=h&Wl|this.F7t(r);for(let s=o;s<l;++s)for(let t=n;t<a;++t)this.a7t(t,s,u)},izt(t,s,i,e,h){this.t7t();const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.JHt)),a=Math.floor(Math.min(s+e,this.qHt)),l=this.F7t(h);for(let s=n;s<a;++s)for(let t=r;t<o;++t){const u=this.u7t(t,s);-1!==u&&this.a7t(t,s,u&Wl|l)}},ezt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.JHt=s.width,this.qHt=s.height,this.t7t(!0),this.s7t(s.data),this.h7t(),this.r7t()):console.error("[Construct] Unrecognized JSON data format")},hzt(t){const s=URL.createObjectURL(new Blob([this.E7t()],{type:"application/json"}));this.bf.BO(s,t)},async fVt(t,s){if(!this.tjt||this.tjt.yH()!==t){const i=this.bf,e=Nl.Sr(Nl.LTt);try{if(await e.$Tt(i,t),!e.UH())throw new Error("image failed to load");if(this.br())return e.wr(),null;const h=await e.$V(i.uM(),{Hv:i.wD()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.br()||this.N4(Nl._Y.wHt.GY.tVt))}this.br()?e.wr():(this.sjt(),this.tjt=e,i.ZO(),this.KHt.clear(),this.h7t(),await this.j4(Nl._Y.wHt.GY.Qjt))}},cVt(t){2<=t&&t++,this.zO().AM(t),this.bf.ZO()},rzt(t,s,i){this.t7t(),this.QHt||(this.QHt=new Nl._Y.wHt.$7t(this,this.Xxt)),this.QHt.nzt(t,s,i)},ozt(t,s,i){this.t7t(),this.QHt||(this.QHt=new Nl._Y.wHt.$7t(this,this.Xxt)),this.QHt.azt(t,s,i)},lzt(t,s,i){Nl._Y.wHt.drt.rzt.call(this,t,s,i)},uzt(t,s,i){Nl._Y.wHt.drt.ozt.call(this,t,s,i)}}}{const jl=self.Ws,Vl=jl._Y.wHt.GHt;jl._Y.wHt.prt={czt(t,s){const i=this.u7t(t,s);return-1===i?-1:i&Vl},fzt(t){return this.S7t(t)},dzt(t){return this.w7t(t)},pzt(t){return t*this.WHt+this.zO().jM()+this.WHt/2},mzt(t){return t*this.jHt+this.zO().HM()+this.jHt/2},gzt(t){const s=this.zO().jM();return Math.floor((t-s)/this.WHt)*this.WHt+s+this.WHt/2},yzt(t){const s=this.zO().HM();return Math.floor((t-s)/this.jHt)*this.jHt+s+this.jHt/2},Szt(){return this.E7t()},wzt(){return this.x7t()},bzt(){return this.T7t()},Mzt(){return this.v7t()},vzt(){return this.G7t()}}}{const Ul=self.Ws,Hl=Ul._Y.wHt.bHt,zl=Ul._Y.wHt.MHt,Jl=Ul._Y.wHt.vHt,ql=Ul._Y.wHt.GHt,Xl=Ul.Sr(Ul.Rect),Yl=Ul.Sr(Ul.ou);Ul._Y.wHt.xzt=class extends Ul.dr{constructor(){super(),this.vf=-1,this.Gzt=-1,this.Tzt=!1,this._zt=!1,this.Izt=!1,this.Czt=Ul.Sr(Ul.Rect),this.Rzt=null}w7(t,s,i,e,h,r,n,o){this.vf=t,this.Gzt=t&ql,this.Tzt=0!=(t&Hl),this._zt=0!=(t&zl),this.Izt=0!=(t&Jl),this.Czt.xl(e*s+r,h*i+n,s,i),this.Rzt=o.A7t(this.vf)}Fv(t,s,i,e,h){Xl.I(this.Czt),Xl.offset(i,e),Xl.su(s)&&(Yl.Cu(Xl),t.wP(Yl,this.Rzt))}}}{const $l=self.Ws;$l._Y.wHt.Azt=class extends $l.dr{constructor(){super(),this.vf=-1,this.Pzt=null,this.Czt=$l.Sr($l.Rect)}w7(t,s,i,e,h,r,n,o){this.vf=t,this.Pzt=s,this.Czt.xl(h*i+n,r*e+o,i,e)}Ezt(t){this.Czt.Il(this.Czt.Fl()+t)}Fzt(){return this.vf}Dzt(){return!!this.Pzt}m3t(){return this.Pzt}p3t(){return this.Czt}}}{const Kl=self.Ws,Zl=Kl._Y.wHt.GHt;Kl._Y.wHt.n7t=class extends Kl.dr{constructor(t,s,i){super();const e=t._7t(),h=t.I7t();this.CCt=t,this.al=s,this.ll=i,this.wl=this.al*e*t.x7t(),this.bl=this.ll*h*t.T7t(),this.Ozt=[],this.kzt=[],this.Lzt=[],this.Bzt=!1;for(let t=0;t<h;++t){const r=new Int32Array(e);r.fill(-1),this.Ozt.push(r)}}lc(){const i=this.CCt._7t(),s=this.CCt.I7t(),e=this.Ozt;if(e.length<s)for(let t=e.length;t<s;++t)e.push(new Int32Array(i));else e.length>s&&Kl.Un(e,s);for(let s=0,t=e.length;s<t;++s){let t=e[s];t.length!==i&&(t=new Int32Array(i),e[s]=t),t.fill(-1)}}P7t(t){const s=this.CCt,i=s.zO(),e=s._7t()*s.x7t(),h=s.I7t()*s.T7t(),r=i.jM()+this.wl,n=i.HM()+this.bl;t.set(r,n,r+e,n+h)}c7t(){this.Bzt=!1}f7t(){if(!this.Bzt){const u=this.CCt,c=u.aMt(),s=u.zO(),f=u.x7t(),d=u.T7t(),p=u._7t(),m=u.I7t(),g=this.wl,y=this.bl;if(!(f<=0||d<=0)){let e=Math.min(u.b7t(),Math.floor(s.Pm()/f)),t=Math.min(u.M7t(),Math.floor(s.jm()/d)),h=(e-=g/f,t-=y/d,e>p&&(e=p),t>m&&(t=m),this.Ozt),r=this.kzt,n=0;for(let i=0;i<t;++i){const S=h[i];for(let s=0;s<e;++s){const w=S[s];if(-1!==w){let t=null;n<r.length?t=r[n]:(t=Kl.Sr(Kl._Y.wHt.xzt),r.push(t)),t.w7(w,f,d,s,i,g,y,u),++n}}}n<r.length&&Kl.Un(r,n);let i=null,o=!1,a=this.Lzt;Kl.Hn(a);for(let s=0;s<t;++s){const b=h[s];for(let t=0;t<e;++t){const M=b[t],v=(Zl,c.kHt(M)),x=c.LHt(v);-1!==M&&x?!i||v||o?(i&&a.push(i),(i=Kl.Sr(Kl._Y.wHt.Azt)).w7(M,v,f,d,t,s,g,y),o=!!v):i.Ezt(f):i&&(a.push(i),i=null,o=!1)}i&&(a.push(i),i=null,o=!1)}let l=a.length;for(let s=0;s<l;++s){const G=a[s];if(!G.Dzt()){const T=G.p3t();for(let t=s+1;t<l;++t){const _=a[t],I=_.p3t();I.El()<T.Dl()||I.El()>T.Dl()||I.Fl()>T.Fl()||I.Pl()>T.Pl()||_.Dzt()||I.Pl()===T.Pl()&&I.Fl()===T.Fl()&&(a.splice(t,1),--l,T.Cl(T.Dl()+d),--t)}}}this.Bzt=!0}}}a7t(t,s,i){this.Ozt[s][t]!==i&&(this.Ozt[s][t]=i,this.Bzt=!1,this.CCt.d7t())}m7t(){return this.Ozt}C7t(){return this.Lzt}Fv(i,e,h,r){const n=this.CCt,o=this.kzt;for(let t=0,s=o.length;t<s;++t)o[t].Fv(i,e,h,r,n)}}}{const Ql=self.Ws,tu=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);Ql._Y.wHt.$7t=class{constructor(t,s){this.CCt=t,this.Xxt=s,this.Nzt=[null,null],this.Wzt=[Ql._Y.wHt.jzt,Ql._Y.wHt.Vzt],this.Uzt=new Ql.nf}get Hzt(){return tu}get zzt(){return-999}get Jzt(){return-998}get qzt(){return-1}get Xzt(){return 0}get Yzt(){return 1}$zt(){return this.CCt}aMt(){return this.Xxt}nzt(t,s,i){this.Y7t(i)&&(this.Kzt(i,0),this.Zzt(t,s,this.Qzt(t,s,i)))}azt(t,s,i){this.Y7t(i)&&(this.Kzt(i,1),this.tJt(t,s),this.Zzt(t,s,this.Qzt(t,s,i)))}Y7t(t){return!!this.aMt().NHt(t)}sJt(t,s){return this.$zt().u7t(t,s)}iJt(t,s,i){const e=this.sJt(t,s);return!!this.eJt(e,!0,e,i)}eJt(t,s,i,e){return-1===t||(!s||-998!==t)&&s&&e&&!this.hJt(i,e)?0:1}rJt(t,s,i,e){const h=e.EHt[t];if(!h.length)return-1;if(1===h.length)return h[0][0];const r=this.sJt(s,i);if(this.eJt(r)){const n=h.some(t=>r===t[0]);if(n)return r}this.Uzt.lc();for(let[t,s]of h)"number"!=typeof s&&(s=1),this.Uzt.pf(s,t);return this.Uzt.df()}nJt(t,s,i){-1!==t&&this.$zt().a7t(t,s,i)}tJt(t,s){this.$zt().a7t(t,s,-1)}hJt(t,s){for(const i of s.EHt)for(const[e]of i)if(e===t)return!0;return!1}Zzt(t,s,i){i&&(this.nJt(t-1,s-1,i[0][0]),this.nJt(t,s-1,i[1][0]),this.nJt(t+1,s-1,i[2][0]),this.nJt(t-1,s,i[0][1]),this.nJt(t,s,i[1][1]),this.nJt(t+1,s,i[2][1]),this.nJt(t-1,s+1,i[0][2]),this.nJt(t,s+1,i[1][2]),this.nJt(t+1,s+1,i[2][2]))}oJt(t){const s=this.aMt().NHt(t);return s.type}aJt(t){const s=this.oJt(t);this.Nzt[s]||(this.Nzt[s]=new this.Wzt[s](this))}Kzt(t,s){this.aJt(t);const i=this.oJt(t);this.Nzt[i]&&this.Nzt[i].lJt(s)}Qzt(t,s,i){this.aJt(i);const e=this.aMt().NHt(i);if(this.Nzt[e.type])return this.Nzt[e.type].uJt(t,s,e)}}}{const su=self.Ws;su._Y.wHt.jzt=class{constructor(t){this.cJt=t,this.fJt=t.Xzt}lJt(t){this.fJt=t}uJt(t,s,i){return this.dJt(t,s,i)}dJt(t,s,i){const e=this.fJt===this.cJt.Xzt?this.pJt(t,s,void 0,i):this.cJt.qzt,h=this.mJt(t,s-1,"s",i),r=this.mJt(t-1,s,"e",i),n=this.mJt(t+1,s,"w",i),o=this.mJt(t,s+1,"n",i),a=this.cJt.Hzt;return a[0][0]=this.cJt.zzt,a[1][0]=this.gJt(h,t,s-1,i),a[2][0]=this.cJt.zzt,a[0][1]=this.gJt(r,t-1,s,i),a[1][1]=this.gJt(e,t,s,i),a[2][1]=this.gJt(n,t+1,s,i),a[0][2]=this.cJt.zzt,a[1][2]=this.gJt(o,t,s+1,i),a[2][2]=this.cJt.zzt,a}mJt(t,s,i,e){return this.cJt.iJt(t,s,e)?this.pJt(t,s,i,e):this.cJt.zzt}pJt(t,s,i,e){this.fJt===this.cJt.Yzt&&(i=void 0);const h=this.cJt.sJt(t,s-1),r=this.cJt.sJt(t-1,s),n=this.cJt.sJt(t+1,s),o=this.cJt.sJt(t,s+1),a="n"===i?this.cJt.Jzt:h,l="w"===i?this.cJt.Jzt:r,u="e"===i?this.cJt.Jzt:n,c="s"===i?this.cJt.Jzt:o,f=this.cJt.eJt(a,!0,h,e),d=this.cJt.eJt(l,!0,r,e),p=this.cJt.eJt(u,!0,n,e),m=this.cJt.eJt(c,!0,o,e);return+f+2*d+4*p+8*m}gJt(t,s,i,e){return t===this.cJt.zzt||t===this.cJt.qzt?t:this.cJt.rJt(t,s,i,e)}}}{const iu=self.Ws,eu=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);iu._Y.wHt.Vzt=class{constructor(t){this.cJt=t,this.fJt=t.Xzt}lJt(t){this.fJt=t}uJt(t,s,i){return this.yJt(t,s,i)}yJt(t,s,i){const e=this.fJt===this.cJt.Xzt?this.SJt(t,s,void 0,i):this.cJt.qzt,h=this.wJt(t-1,s-1,"se",i),r=this.wJt(t,s-1,"s",i),n=this.wJt(t+1,s-1,"sw",i),o=this.wJt(t-1,s,"e",i),a=this.wJt(t+1,s,"w",i),l=this.wJt(t-1,s+1,"ne",i),u=this.wJt(t,s+1,"n",i),c=this.wJt(t+1,s+1,"nw",i),f=this.cJt.Hzt;return f[0][0]=this.bJt(h,t-1,s-1,i),f[1][0]=this.bJt(r,t,s-1,i),f[2][0]=this.bJt(n,t+1,s-1,i),f[0][1]=this.bJt(o,t-1,s,i),f[1][1]=this.bJt(e,t,s,i),f[2][1]=this.bJt(a,t+1,s,i),f[0][2]=this.bJt(l,t-1,s+1,i),f[1][2]=this.bJt(u,t,s+1,i),f[2][2]=this.bJt(c,t+1,s+1,i),f}wJt(t,s,i,e){return this.cJt.iJt(t,s,e)?this.SJt(t,s,i,e):this.cJt.zzt}SJt(t,s,i,e){this.fJt===this.cJt.Yzt&&(i=void 0);const h=this.cJt.sJt(t,s-1),r=this.cJt.sJt(t-1,s),n=this.cJt.sJt(t+1,s),o=this.cJt.sJt(t,s+1),a=this.cJt.sJt(t-1,s-1),l=this.cJt.sJt(t+1,s-1),u=this.cJt.sJt(t-1,s+1),c=this.cJt.sJt(t+1,s+1),f="n"===i?this.cJt.Jzt:h,d="w"===i?this.cJt.Jzt:r,p="e"===i?this.cJt.Jzt:n,m="s"===i?this.cJt.Jzt:o,g="nw"===i?this.cJt.Jzt:a,y="ne"===i?this.cJt.Jzt:l,S="sw"===i?this.cJt.Jzt:u,w="se"===i?this.cJt.Jzt:c,b=this.cJt.eJt(f,!0,h,e),M=this.cJt.eJt(d,!0,r,e),v=this.cJt.eJt(p,!0,n,e),x=this.cJt.eJt(m,!0,o,e),G=b&&M?this.cJt.eJt(g,!0,a,e):0,T=b&&v?this.cJt.eJt(y,!0,l,e):0,_=x&&M?this.cJt.eJt(S,!0,u,e):0,I=x&&v?this.cJt.eJt(w,!0,c,e):0;return+G+2*b+4*T+8*M+16*v+32*_+64*x+128*I}bJt(t,s,i,e){return t===this.cJt.zzt||t===this.cJt.qzt?t:this.cJt.rJt(eu.get(t),s,i,e)}}}{const hu=self.Ws;hu._Y.MJt=class extends hu.ixt{constructor(t){super(t)}wr(){super.wr()}}}{const ru=self.Ws;ru._Y.MJt.bIt=class extends ru.jxt{constructor(t){super(t)}wr(){super.wr()}_xt(){this.MW().dk(this.bf)}qX(t){return this.MW().$V(t,{Hv:this.bf.wD()})}QX(){this.MW().$I()}}}{let s=function(t){return lu.get(t).vJt()};s;const nu=self.Ws,ou=self.Ks,au=nu.Sr(nu.Rect),lu=(nu._Y.MJt.Instance=class extends nu.bGt{constructor(t,s){super(t),this.xJt=!0;const i=nu.Sr(self.GJt);(this._Jt=i).TJt=()=>this.IJt(),this.CJt=null,this.RJt=(t,s,i,e,h,r)=>this.AJt(t,s,i,e,h,r),this.PJt=t=>this.EJt(t);let e=this.FJt=!0;s&&(i.DJt(s[0]),i.OJt(nu.Ir(s[1])),i.kJt(s[2]?"one-shot":"continuous-spray"),this.LJt(this.bf.Zj(s[3])),e=s[4],i.BJt(s[5]),i.NJt(s[6]),i.WJt(s[7]/100),i.jJt(s[8]),i.VJt(s[9]),i.UJt(s[10]),i.HJt(s[11]),i.zJt(s[12]),i.JJt(s[13]),i.qJt(s[14]),i.SetGravity(s[15]),i.XJt(s[16]),i.YJt(s[17]),i.$Jt(s[18]),i.KJt(s[19]),i.ZJt(s[20])),this.QJt(),this.CJt&&(this.FJt=!1),"one-shot"===i.t9t()?i.s9t():i.i9t(!0);const h=this.zO();h.oB(e),h.qPt(!0),this.Ci.Qf().addEventListener("bboxchange",()=>{h.JPt(this._Jt.xN())}),this.pk().uM().JS()&&h.LPt(),this.Q$=t=>this.tK(t),this.pk().Qf().addEventListener("afterload",this.Q$),this.cGt()}wr(){this.pk().Qf().removeEventListener("afterload",this.Q$),this.Q$=null,this._Jt.wr(),this._Jt=null,this.RJt=null,this.PJt=null,super.wr()}vJt(){return this._Jt}e9t(t){this._Jt.DJt(t),"one-shot"===this._Jt.t9t()&&this.xJt&&this._Jt.h9t(t)}LJt(t){(t=t===this.QB()?null:t)===this.CJt||(this.CJt=t,this._Jt.r9t=t?t=>this.n9t(t):null,this.CJt)||(this.FJt=!0)}QJt(){const t=this._Jt,s=this.zO();t.o9t(s.hP()),t.y6t(this.bf.MD()),t.a9t(s.jM()),t.l9t(s.HM()),t.u9t(s.GetAngle()),t.c9t(Math.abs(s.oPt()))}IJt(){this.bf.r4(this.Ci)}Fv(t){if(this.FJt){const s=this.xft.MW(),i=s.yx();if(i){const e=this.zO(),h=e.JO(),r=au,n=(this.bf.eL().FOt()?r.set(-1/0,-1/0,1/0,1/0):h.KJ()?h.Cq(e.MN(),r):h.LJ(e.MN(),r),t.lP(i),h.BJ(e.MN()));this._Jt.f9t(h.$B()*n),this._Jt.Fv(t,s.EGt(),r,h.KJ())}}}tv(){const t=this._Jt;return{r:t.d9t(),sc:t.p9t(),st:t.t9t(),isp:t.m9t(),isz:t.g9t(),io:t.y9t(),gr:t.S9t(),xr:t.w9t(),yr:t.b9t(),spr:t.M9t(),szr:t.v9t(),grnd:t.x9t(),acc:t.G9t(),g:t.T9t(),lar:t._9t(),lsr:t.I9t(),lor:t.C9t(),dm:t.R9t(),to:t.A9t(),s:t.P9t(),pcc:t.E9t(),ft:this.xJt,soc:this.CJt?this.CJt.yJ():null,p:t.F9t().map(t=>t.toJSON())}}sv(t,s){const i=this._Jt;if(i.DJt(t.r),i.OJt(t.sc),i.kJt(t.st),i.BJt(t.isp),i.NJt(t.isz),i.WJt(t.io),i.jJt(t.gr),i.VJt(t.xr),i.UJt(t.yr),i.HJt(t.spr),i.zJt(t.szr),i.JJt(t.grnd),i.qJt(t.acc),i.SetGravity(t.g),i.XJt(t.lar),i.YJt(t.lsr),i.$Jt(t.lor),i.KJt(t.dm),i.ZJt(t.to),i.i9t(t.s),i.D9t(t.pcc),this.xJt=t.ft,t.hasOwnProperty("soc")){const r=this.pk().Zj(t.soc);r&&this.LJt(r)}const e=t.p,h=(i.h9t(e.length,!1),i.F9t());for(let t=0,s=h.length;t<s;++t)h[t].Ka(e[t]);"state"===s&&this.CJt&&(i.O9t(),i.k9t(this))}tK(){const t=this._Jt,i=(t.O9t(),t.k9t(this),t.F9t());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.L9t();if(h){const r=h.zO();if(r){const n=r.c8();if(n){const o=e.B9t(),a=n.f4();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.pk(),u=l.WO(o);u&&l.r4(u)}}}}}}KK(){const t=this.bf.ZD(this.Ci);this.QJt(),this.xJt&&"one-shot"===this._Jt.t9t()&&this._Jt.N9t(),this._Jt.KK(t),this._Jt.P9t()&&this.bf.ZO(),this.zO().mN(),this.xJt=!1}W9t(t){for(this.xJt&&"one-shot"===this._Jt.t9t()&&this._Jt.N9t();0<t;)this._Jt.KK(1/60),t-=1/60;this._Jt.P9t()&&this.bf.ZO(),this.zO().mN(),this.xJt=!1}n9t(t,s){let i,e=(i=(i=(i="number"==typeof s?this.bf.WO(s):i)&&i.QB()!==this.CJt?null:i)||this.bf.u5(this.CJt,this.zO().JO(),t.jM(),t.HM())).zO();return e.CC(t.yc(),t.yc()),e.G5(t.GetAngle()),e.nP(t.hP()),e.AN(this.zO().RN()),e.mN(),e.BN(this.c8(),!0),i.wY(),t.j9t(this.RJt),t.V9t(this.PJt),i}AJt(t,s,i,e,h,r){if(!t.Sj()){const n=t.zO();n.wN(s,i),n.CC(n.Pm()+e,n.jm()+e),n.G5(n.GetAngle()+h),n.nP(n.hP()+r),n.mN()}}EJt(t){t.Sj()||this.bf.r4(t)}Krt(t){const s=this._Jt;switch(t){case 0:return s.d9t();case 1:return nu.Cr(s.p9t());case 2:return"one-shot"===s.t9t()?1:0;case 5:return s.m9t();case 6:return s.g9t();case 7:return 100*s.y9t();case 8:return s.S9t();case 9:return s.w9t();case 10:return s.b9t();case 11:return s.M9t();case 12:return s.v9t();case 13:return s.x9t();case 14:return s.G9t();case 15:return s.T9t();case 16:return s._9t();case 17:return s.I9t();case 18:return s.C9t();case 19:return s.R9t();case 20:return s.A9t()}}ent(t,s){const i=this._Jt;switch(t){case 0:i.DJt(s);break;case 1:i.OJt(nu.Ir(s));break;case 2:i.kJt(s?"one-shot":"continuous-spray");break;case 5:i.BJt(s);break;case 6:i.NJt(s);break;case 7:i.WJt(s/100);break;case 8:i.jJt(s);break;case 9:i.VJt(s);break;case 10:i.UJt(s);break;case 11:i.HJt(s);break;case 12:i.zJt(s);break;case 13:i.JJt(s);break;case 14:i.qJt(s);break;case 15:i.SetGravity(s);break;case 16:i.XJt(s);break;case 17:i.YJt(s);break;case 18:i.$Jt(s);break;case 19:i.KJt(s);break;case 20:i.ZJt(s)}}mGt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this._Jt;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.U9t()},{name:s+".type.name",value:[s+".type.items."+e.t9t()]},{name:i+".is-spraying",value:e.P9t(),Rjt:t=>e.i9t(t)},{name:s+".rate.name",value:e.d9t(),Rjt:t=>e.DJt(t)},{name:s+".spray-cone.name",value:nu.Cr(e.p9t()),Rjt:t=>e.OJt(nu.Ir(t))},{name:s+".speed.name",value:e.m9t(),Rjt:t=>e.BJt(t)},{name:s+".size.name",value:e.g9t(),Rjt:t=>e.NJt(t)},{name:s+".opacity.name",value:e.y9t(),Rjt:t=>e.WJt(t)},{name:s+".grow-rate.name",value:e.S9t(),Rjt:t=>e.jJt(t)},{name:s+".x-randomiser.name",value:e.w9t(),Rjt:t=>e.VJt(t)},{name:s+".y-randomiser.name",value:e.b9t(),Rjt:t=>e.UJt(t)},{name:s+".initial-speed-randomiser.name",value:e.M9t(),Rjt:t=>e.HJt(t)},{name:s+".size-randomiser.name",value:e.v9t(),Rjt:t=>e.zJt(t)},{name:s+".grow-rate-randomiser.name",value:e.x9t(),Rjt:t=>e.JJt(t)},{name:s+".acceleration.name",value:e.G9t(),Rjt:t=>e.qJt(t)},{name:s+".gravity.name",value:e.T9t(),Rjt:t=>e.SetGravity(t)},{name:s+".angle-randomiser.name",value:e._9t(),Rjt:t=>e.XJt(t)},{name:s+".life-speed-randomiser.name",value:e.I9t(),Rjt:t=>e.YJt(t)},{name:s+".opacity-randomiser.name",value:e.C9t(),Rjt:t=>e.$Jt(t)},{name:s+".timeout.name",value:e.A9t(),Rjt:t=>e.ZJt(t)}]}]}Ixt(){return self.H9t}},new WeakMap);self.H9t=class extends self.E6{constructor(){super(),lu.set(this,self.KB.i4().L6())}set z9t(t){s(this).i9t(!!t)}get z9t(){return s(this).P9t()}set rate(t){ou.Te(t),lu.get(this).e9t(t)}get rate(){return s(this).d9t()}set J9t(t){ou.Te(t),s(this).OJt(t)}get J9t(){return s(this).p9t()}set q9t(t){ou.Te(t),s(this).BJt(t)}get q9t(){return s(this).m9t()}set X9t(t){ou.Te(t),s(this).NJt(t)}get X9t(){return s(this).g9t()}set Y9t(t){ou.Te(t),s(this).WJt(t)}get Y9t(){return s(this).y9t()}set $9t(t){ou.Te(t),s(this).VJt(t)}get $9t(){return s(this).w9t()}set K9t(t){ou.Te(t),s(this).UJt(t)}get K9t(){return s(this).b9t()}set Z9t(t){ou.Te(t),s(this).HJt(t)}get Z9t(){return s(this).M9t()}set Q9t(t){ou.Te(t),s(this).zJt(t)}get Q9t(){return s(this).v9t()}set tqt(t){ou.Te(t),s(this).jJt(t)}get tqt(){return s(this).S9t()}set sqt(t){ou.Te(t),s(this).JJt(t)}get sqt(){return s(this).x9t()}set acceleration(t){ou.Te(t),s(this).qJt(t)}get acceleration(){return s(this).G9t()}set iqt(t){ou.Te(t),s(this).SetGravity(t)}get iqt(){return s(this).T9t()}set eqt(t){ou.Te(t),s(this).XJt(t)}get eqt(){return s(this)._9t()}set hqt(t){ou.Te(t),s(this).YJt(t)}get hqt(){return s(this).I9t()}set rqt(t){ou.Te(t),s(this).$Jt(t)}get rqt(){return s(this).C9t()}set timeout(t){ou.Te(t),s(this).ZJt(t)}get timeout(){return s(this).A9t()}nqt(t){ou.Te(t),lu.get(this).W9t(t)}oqt(t){const s=lu.get(this);t?s.LJt(s.pk().zk(t)):s.LJt(null)}}}{const uu=self.Ws;uu._Y.MJt.GY={P9t(){return this._Jt.P9t()}}}{const cu=self.Ws;cu._Y.MJt.drt={i9t(t){this._Jt.i9t(0!==t)},DJt(t){this.e9t(t)},aqt(t){this.LJt(t)},lqt(){this.LJt(null)},OJt(t){this._Jt.OJt(cu.Ir(t))},BJt(t){this._Jt.BJt(t)},NJt(t){this._Jt.NJt(t)},WJt(t){this._Jt.WJt(t/100)},jJt(t){this._Jt.jJt(t)},uqt(t){this._Jt.VJt(t)},cqt(t){this._Jt.UJt(t)},fqt(t){this._Jt.HJt(t)},dqt(t){this._Jt.zJt(t)},pqt(t){this._Jt.JJt(t)},mqt(t){this._Jt.qJt(t)},SetGravity(t){this._Jt.SetGravity(t)},gqt(t){this._Jt.XJt(t)},yqt(t){this._Jt.YJt(t)},Sqt(t){this._Jt.$Jt(t)},ZJt(t){this._Jt.ZJt(t)},wqt(t){this.W9t(t)},cVt(t){this.zO().AM(t),this.bf.ZO()}}}{const fu=self.Ws;fu._Y.MJt.prt={bqt(){return this._Jt.U9t()},Mqt(){return this._Jt.d9t()},vqt(){return fu.Cr(this._Jt.p9t())},xqt(){return this._Jt.m9t()},Gqt(){return this._Jt.g9t()},Tqt(){return 100*this._Jt.y9t()},_qt(){return this._Jt.S9t()},Iqt(){return this._Jt.w9t()},Cqt(){return this._Jt.b9t()},Rqt(){return this._Jt.v9t()},Aqt(){return this._Jt.M9t()},Pqt(){return this._Jt.x9t()},Eqt(){return this._Jt.G9t()},Fqt(){return this._Jt.T9t()},Dqt(){return this._Jt._9t()},Oqt(){return this._Jt.I9t()},kqt(){return this._Jt.C9t()},Lqt(){return this._Jt.A9t()}}}{const du=self.Ws,pu=[],mu=new Set(["continuous-spray","one-shot"]),gu=["fade-to-invisible","timeout-expired","particle-stopped"],yu=du.Sr(du.Rect);self.GJt=class{constructor(){this.Bqt=0,this.Nqt=0,this.Wqt="continuous-spray",this.jqt=!1,this.Vqt=0,this.Uqt=!1,this.Hqt=0,this.zqt=0,this.Jqt=0,this.qqt=0,this.Xqt=0,this.Yqt=1,this.$qt=0,this.Kqt=0,this.Zqt=0,this.Qqt=0,this.tXt=0,this.sXt=0,this.iXt=0,this.eXt=0,this.hXt=0,this.rXt=0,this.nXt=0,this.oXt=0,this.aXt=0,this.y0=0,this.lXt=0,this.uXt=1,this.TJt=null,this.r9t=null,this.cXt=[],this.PAt=new du.Rect,this.IM=new du.Yo}wr(){this.M0(),du.Hn(this.cXt),this.cXt=null,this.TJt=null,this.r9t=null,this.PAt=null,this.IM=null}M0(){const i=this.cXt;for(let t=0,s=i.length;t<s;++t)i[t].Yvt();du.Qh(pu,i),du.Hn(i),1e3<pu.length&&du.Un(pu,1e3),this.jqt=!1}s9t(){for(let t=0,s=this.Bqt;t<s;++t)this.fXt();this.cXt.length&&(this.jqt=!0)}fXt(t=!0){let s=null;return pu.length?(s=pu.pop()).dXt(this):s=du.Sr(self.pXt,this),this.cXt.push(s),t?s.jCt(this.r9t):s.jCt(),s}N9t(){const i=this.cXt,e=this.r9t;for(let t=0,s=i.length;t<s;++t)i[t].jCt(e)}O9t(){const i=this.cXt,e=this.r9t;for(let t=0,s=i.length;t<s;++t)i[t].mXt(e)}k9t(i){const e=this.cXt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=h.L9t();if(r){const n=r.zO();n.VM(h.jM()),n.zM(h.HM()),n.CC(h.yc(),h.yc()),n.nP(h.hP()),n.G5(h.GetAngle()),n.AN(i.zO().RN()),n.mN()}}}h9t(t,s=!0){const i=this.cXt;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.Yvt(),pu.push(h)}1e3<pu.length&&du.Un(pu,1e3)}else if(t>i.length){const r=t-i.length;for(let t=0;t<r;++t)this.fXt(s)}}F9t(){return this.cXt}U9t(){return this.cXt.length}KK(t){this.gXt(t),this.yXt(t),this.SXt()}gXt(t){if("continuous-spray"===this.Wqt&&this.jqt){this.lXt+=t*this.Bqt;const s=Math.floor(this.lXt);this.lXt-=s;for(let t=0;t<s;++t)this.fXt()}}D9t(t){this.lXt=t}E9t(){return this.lXt}yXt(i){let e=this.PAt,h=(e.set(this.Hqt,this.zqt,this.Hqt,this.zqt),this.cXt),r=0;for(let t=0,s=h.length;t<s;++t){const n=h[t];(h[r]=n).KK(i),n.bmt()?(++r,e.ru(n.xN())):(n.Yvt(),pu.push(n))}du.Un(h,r),1e3<pu.length&&du.Un(pu,1e3)}SXt(){"one-shot"===this.Wqt&&0===this.cXt.length&&this.jqt&&(this.TJt&&this.TJt(),this.jqt=!1)}Fv(i,e,h,r){yu.set(e.cn(),e.fn(),e.mn(),e.gn()),i.GP(yu),this.IM.I(i.aP());const n=this.cXt;for(let t=0,s=n.length;t<s;++t){const o=n[t];h.su(o.xN())&&o.Fv(i,e,r)}i.TP()}aP(){return this.IM}DJt(t){this.Bqt=+t}d9t(){return this.Bqt}OJt(t){this.Nqt=+t}p9t(){return this.Nqt}kJt(t){if(!mu.has(t))throw new Error("invalid spray type");this.Wqt=t}t9t(){return this.Wqt}i9t(t){this.jqt=!!t}P9t(){return this.jqt}o9t(t){this.Vqt=+t}wXt(){return this.Vqt}y6t(t){this.Uqt=!!t}bXt(){return this.Uqt}a9t(t){this.Hqt=+t}MXt(){return this.Hqt}l9t(t){this.zqt=+t}vXt(){return this.zqt}u9t(t){this.Jqt=+t}xXt(){return this.Jqt}BJt(t){this.qqt=+t}m9t(){return this.qqt}NJt(t){this.Xqt=+t}g9t(){return this.Xqt}c9t(t){this.Yqt=+t}GXt(){return this.Yqt}WJt(t){this.$qt=+t}y9t(){return this.$qt}jJt(t){this.Kqt=+t}S9t(){return this.Kqt}VJt(t){this.Zqt=+t}w9t(){return this.Zqt}UJt(t){this.Qqt=+t}b9t(){return this.Qqt}HJt(t){this.tXt=+t}M9t(){return this.tXt}zJt(t){this.sXt=+t}v9t(){return this.sXt}JJt(t){this.iXt=+t}x9t(){return this.iXt}qJt(t){this.eXt=+t}G9t(){return this.eXt}SetGravity(t){this.hXt=+t}T9t(){return this.hXt}XJt(t){this.rXt=+t}_9t(){return this.rXt}YJt(t){this.nXt=+t}I9t(){return this.nXt}$Jt(t){this.oXt=+t}C9t(){return this.oXt}TXt(t){let s=gu.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.aXt=s}KJt(t){this.TXt(gu[t])}_Xt(){return gu[this.aXt]}R9t(){return this.aXt}ZJt(t){this.y0=+t}A9t(){return this.y0}f9t(t){this.uXt=+t}IXt(){return this.uXt}xN(){return this.PAt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Ws),l=new m.ou,u=new m.Yo,t=self.devicePixelRatio||1,c=!1;self.pXt=class{constructor(t){this.CXt=t,this.w0=!1,this.al=0,this.ll=0,this.o_t=0,this.Z7=0,this.RXt=1,this.AXt=0,this.PXt=0,this.NH=0,this.EXt=0,this.FXt=0,this.DXt=0,this.Uu=new m.Rect,this.OXt=null,this.kXt=NaN,this.LXt=null,this.BXt=null}dXt(t){this.CXt=t}jCt(t){const s=this.CXt;this.w0=!0,this.al=s.MXt()+p(s.w9t()),this.ll=s.vXt()+p(s.b9t()),this.o_t=s.m9t()+p(s.M9t()),this.Z7=s.xXt()+p(s.p9t()),this.RXt=s.y9t(),this.AXt=this.RXt,this.NH=(s.g9t()+p(s.v9t()))*s.GXt(),this.EXt=this.NH/2,this.PXt=s.S9t()+p(s.x9t()),this.FXt=0,this.DXt=0,this.NXt(),t?this.OXt||(this.OXt=t(this)):(this.OXt=null,this.LXt=null,this.BXt=null)}mXt(t){t?this.OXt&&!this.OXt.Sj()||(this.OXt=t(this,this.kXt)):(this.OXt=null,this.LXt=null,this.BXt=null)}j9t(t){this.LXt=t}V9t(t){this.BXt=t}Yvt(){const t=this.BXt;t&&t(this.OXt),this.OXt=null,this.LXt=null,this.BXt=null}toJSON(){let t;return this.OXt&&this.OXt.zO()&&(t=this.OXt.zO().c8().f4()),[this.al,this.ll,this.o_t,this.Z7,this.RXt,this.PXt,this.NH,this.FXt,this.DXt,t]}Ka(t){this.al=t[0],this.ll=t[1],this.o_t=t[2],this.Z7=t[3],this.RXt=t[4],this.AXt=this.RXt,this.PXt=t[5],this.NH=t[6],this.FXt=t[7],this.DXt=t[8],this.kXt=t[9],this.EXt=this.NH/2,this.NXt()}KK(t){let s=this.CXt,i=this.o_t*t,e=this.Z7,h=Math.cos(e)*i,r=Math.sin(e)*i+this.FXt*t,n=(this.al+=h,this.ll+=r,this.PXt*t),o=(this.NH+=n,this.EXt=this.NH/2,this.o_t+=s.G9t()*t,this.FXt+=s.T9t()*t,this.DXt+=t,this.NXt(),s._9t()),a=s.I9t(),l=s.C9t(),u=0;0!==o&&(u=p(o*t),this.Z7+=u),0!==a&&(this.o_t+=p(a*t)),0!==l&&(this.RXt=m.Tr(this.RXt+p(l*t),0,1));const c=1<=this.NH&&(2===s.R9t()?0<this.o_t:this.DXt<s.A9t()),f=this.LXt;if(f&&c){let t=s.wXt()*this.RXt;0===s.R9t()&&(t*=1-this.DXt/s.A9t());const d=t-this.AXt;this.AXt=t,f(this.OXt,h,r,n,u,d)}this.w0=c}bmt(){return this.w0}xN(){return this.Uu}NXt(){const t=this.al,s=this.ll,i=this.EXt;this.Uu.set(t-i,s-i,t+i,s+i)}Fv(h,r,n){if(!this.OXt){let i=this.CXt,e=i.wXt()*this.RXt;if(0===i.R9t()&&(e*=1-this.DXt/i.A9t()),!(e<=0)){const o=this.NH,a=o*i.IXt()*t;if(!(a<1)){let t=this.al,s=this.ll;i.bXt()&&(t=t+.5|0,s=s+.5|0),h.JS()?h._P(t,s,o,e):n||a>h.lE()||a<h.aE()?(u.I(i.aP()),u.Ra(e),h.PM(u),c=!0,l.Cu(this.Uu),h.wP(l,r)):(c&&(h.PM(i.aP()),c=!1),h._P(t,s,a,e))}}}}L9t(){return this.OXt}B9t(){return this.kXt}jM(){return this.al}HM(){return this.ll}yc(){return this.NH}GetAngle(){return this.Z7}hP(){return this.RXt}}}{const Su=self.Ws;Su._Y.WXt=class extends Su.ixt{constructor(t){super(t)}wr(){super.wr()}}}{const wu=self.Ws;wu._Y.WXt.bIt=class extends wu.jxt{constructor(t){super(t),this.jXt=wu.Sr(self.VXt)}wr(){super.wr()}_xt(){this.MW().dk(this.bf)}qX(t){return this.MW().$V(t,{Hv:this.bf.wD()})}QX(){this.MW().$I()}UXt(){return this.jXt}HXt(t,s,i,e){const h=this.MW(),r=this.jXt;r.Bm(h.Pm()),r.Em(h.jm()),r.zXt(t),r.JXt(s),r.qXt(i),r.XXt(e),r.YXt()}}}{const bu=self.Ws,Mu=self.Ks,vu=bu.Sr(bu.ol),xu=["left","center","right"],Gu=["top","center","bottom"],Tu=["word","cjk","character"],_u=(bu._Y.WXt.Instance=class extends bu.bGt{constructor(t,s){super(t),this.Mf="",this.$Xt=!0,this.KXt=16,this.ZXt=16,this.QXt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@°+=*$£€<>";let i="";if(this.tYt=1,this.sYt=0,this.cI=0,this.wI=0,this.bI=0,this.xI="word",this.iYt=!0,this.eYt=!1,this.hYt=null,this.rYt=null,this.nYt=-1,this.oYt=-1,this.aYt=0,s){this.Mf=s[0],this.$Xt=s[1],this.KXt=s[2],this.ZXt=s[3],this.QXt=s[4],i=s[5],this.tYt=s[6],this.sYt=s[7],this.cI=s[8],this.wI=s[9],this.bI=s[10],this.xI=Tu[s[11]];const h=this.zO();h.oB(s[12]),this.eYt=!!s[14]}this.Xxt.HXt(this.KXt,this.ZXt,this.QXt,i),this.rYt=bu.Sr(self.lYt,this.Xxt.UXt());const e=this.zO();this.rYt.CC(e.Pm(),e.jm()),this.uYt(),this.cYt(),this.Ci.QCt()}wr(){this.fYt(),this.hYt&&(this.hYt.wr(),this.hYt=null),this.rYt.wr(),this.rYt=null,super.wr()}uYt(){const t=this.rYt;t&&(t.iC(this.$Xt),t.Gf(this.Mf),t.xC(this.xI),t.dYt(xu[this.wI]),t.pYt(Gu[this.bI]),t.mYt(this.sYt),t.aC(this.cI))}gYt(){const t=this.zO();this.rYt.CC(t.Pm(),t.jm()),this.rYt.v5(this.tYt)}cYt(){if(this.eYt){let t=this.Mf;this.$Xt&&(t=bu.Lh.xm(t)),this.hYt?this.hYt.Gf(t):this.hYt=bu.Sr(bu.wf,this.bf,t)}else this.hYt&&(this.hYt.wr(),this.hYt=null)}Fv(e){const h=this.xft.MW(),r=h.yx();if(r){e.lP(r);let t=this.zO(),s=t.TN(),i=this.rYt;i.v5(this.tYt),i.yYt(t.oPt()),this.bf.MD()&&(s=t.zPt(s)),i.CC(t.Pm(),t.jm()),i.UXt().SYt(h.rR()),i.PM(t.RN()),i.Fv(e,s.cn(),s.fn(),t.GetAngle()),this.iYt=!1}}tv(){const t={t:this.Mf,ebbc:this.$Xt,csc:this.tYt,csp:this.sYt,lh:this.cI,ha:this.wI,va:this.bI,w:this.xI,cw:this.Xxt.UXt().wYt(),ch:this.Xxt.UXt().bYt(),cs:this.Xxt.UXt().MYt(),sd:this.Xxt.UXt().vYt()};return-1!==this.oYt&&(t.tw={st:this.nYt,en:this.oYt,l:this.aYt}),t}sv(t){if(this.fYt(),this.Mf=t.t,this.$Xt=t.ebbc,this.tYt=t.csc,this.sYt=t.csp,this.cI=t.lh,this.wI=t.ha,this.bI=t.va,t.hasOwnProperty("w")){const i=t.w;this.xI="boolean"==typeof i?i?"word":"character":i}else this.xI="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.nYt=e.st,this.oYt=e.en,this.aYt=t.l}const s=this.Xxt.UXt();s.zXt(t.cw),s.JXt(t.ch),s.qXt(t.cs),s.XXt(t.sd),this.uYt(),this.cYt(),-1!==this.oYt&&this.cGt()}Krt(t){switch(t){case 0:return this.IC();case 1:return this.$Xt;case 2:return this.Xxt.UXt().wYt();case 3:return this.Xxt.UXt().bYt();case 4:return this.Xxt.UXt().MYt();case 5:return this.Xxt.UXt().vYt();case 6:return this.xYt();case 7:return this.GYt();case 8:return this.TYt();case 9:return this._Yt();case 10:return this.IYt();case 11:return this.CYt()}}ent(t,s){switch(t){case 0:this.RYt(s);break;case 1:this.$Xt!==!!s&&(this.$Xt=!!s,this.uYt());break;case 2:this.Xxt.UXt().zXt(s);break;case 3:this.Xxt.UXt().JXt(s);break;case 4:this.Xxt.UXt().qXt(s);break;case 5:this.Xxt.UXt().XXt(s);break;case 6:this.AYt(s);break;case 7:this.PYt(s);break;case 8:this.EYt(s);break;case 9:this.FYt(s);break;case 10:this.DYt(s);break;case 11:this.OYt(s)}}RYt(t){this.Mf!==t&&(this.Mf=t,this.rYt.Gf(t),this.cYt(),this.bf.ZO())}IC(){return this.Mf}kYt(t,s){this.RYt(t),this.nYt=this.bf.eO(),this.oYt=this.nYt+s/this.c8().g4(),this.aYt=bu.Op(bu.Lh.xm(t)),this.rYt.pC(0),this.cGt()}fYt(){this.nYt=-1,this.oYt=-1,this.aYt=0,this.rYt.pC(-1),this.Yxt()}LYt(){-1!==this.oYt&&(this.fYt(),this.N4(bu._Y.WXt.GY.BYt),this.bf.ZO())}AYt(t){this.tYt!==t&&(this.tYt=t,this.rYt.v5(this.tYt),this.bf.ZO())}xYt(){return this.tYt}PYt(t){this.sYt!==t&&(this.sYt=t,this.rYt.mYt(this.sYt),this.bf.ZO())}GYt(){return this.sYt}EYt(t){this.cI!==t&&(this.cI=t,this.rYt.aC(this.cI),this.bf.ZO())}TYt(){return this.cI}FYt(t){this.wI!==t&&(this.wI=t,this.uYt(),this.bf.ZO())}_Yt(){return this.wI}DYt(t){this.bI!==t&&(this.bI=t,this.uYt(),this.bf.ZO())}IYt(){return this.bI}NYt(t){this.OYt(Tu[t])}OYt(t){this.xI!==t&&(this.xI=t,this.uYt(),this.bf.ZO())}CYt(){return this.xI}WYt(t){this.eYt=!!t,this.cYt()}jYt(){return this.eYt}VYt(){return this.gYt(),this.rYt.AC()}UYt(){return this.gYt(),this.rYt.EC()}HYt(t,s){this.gYt();const i=this.zO(),e=(vu.set(t-i.jM(),s-i.HM()),vu.rotate(-i.GetAngle()),vu.offset(i.Pm()*i.GW(),i.jm()*i._W()),this.rYt.OC(vu.fl(),vu.pl()));if(e){const h=e.Rg("tag");if(h)return h.param}return""}zYt(t,s,i){const e=this.HYt(s,i);return e&&bu.Gh(t,e)}JYt(t,s){this.gYt(),s=Math.floor(s);const i=this.rYt.LC(t,s);if(!i)return null;const e=this.zO();return vu.set(i.Gg(),i._g()),vu.offset(-e.Pm()*e.GW(),-e.jm()*e._W()),vu.rotate(e.GetAngle()),vu.offset(e.jM(),e.HM()),{x:vu.fl(),y:vu.pl(),width:i.Pm(),height:i.jm()}}qYt(t){return this.gYt(),this.rYt.BC(t)}KK(){const s=this.bf.eO();if(s>=this.oYt)this.fYt(),this.N4(bu._Y.WXt.GY.BYt),this.bf.ZO();else{let t=bu.Wr(this.nYt,this.oYt,s,0,this.aYt);(t=Math.floor(t))!==this.rYt.mC()&&(this.rYt.pC(t),this.bf.ZO())}}mGt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.IC(),Rjt:t=>this.RYt(t)},{name:t+".properties.scale.name",value:this.xYt(),Rjt:t=>this.AYt(t)},{name:t+".properties.character-spacing.name",value:this.GYt(),Rjt:t=>this.PYt(t)},{name:t+".properties.line-height.name",value:this.TYt(),Rjt:t=>this.EYt(t)}]}]}Ixt(){return self.XYt}},new WeakMap),Iu=new Map([["left",0],["center",1],["right",2]]),Cu=new Map([["top",0],["center",1],["bottom",2]]);self.XYt=class extends self.E6{constructor(){super(),_u.set(this,self.KB.i4().L6())}get text(){return _u.get(this).IC()}set text(t){Mu.Re(t);const s=_u.get(this);s.fYt(),s.RYt(t)}YYt(t,s){Mu.Re(t),Mu.Te(s);const i=_u.get(this);i.fYt(),i.kYt(t,s)}$Yt(){_u.get(this).LYt()}set KYt(t){Mu.Te(t),_u.get(this).AYt(t)}get KYt(){return _u.get(this).xYt()}set ZYt(t){Mu.Te(t),_u.get(this).PYt(t)}get ZYt(){return _u.get(this).GYt()}set lineHeight(t){Mu.Te(t),_u.get(this).EYt(t)}get lineHeight(){return _u.get(this).TYt()}set mU(t){Mu.Re(t);const s=Iu.get(t);if(void 0===s)throw new Error("invalid mode");_u.get(this).FYt(s)}get mU(){return xu[_u.get(this)._Yt()]}set verticalAlign(t){Mu.Re(t);const s=Cu.get(t);if(void 0===s)throw new Error("invalid mode");_u.get(this).DYt(s)}get verticalAlign(){return Gu[_u.get(this).IYt()]}set gU(t){if(!Tu.includes(t))throw new Error("invalid mode");_u.get(this).OYt(t)}get gU(){return _u.get(this).CYt()}set QYt(t){_u.get(this).WYt(!!t)}get QYt(){return _u.get(this).jYt()}get bU(){return _u.get(this).VYt()}get MU(){return _u.get(this).UYt()}t$t(){const t=_u.get(this);return[t.VYt(),t.UYt()]}s$t(t,s,i){return Mu.Re(t),Mu.Te(s),Mu.Te(i),_u.get(this).zYt(t,s,i)}i$t(t,s){return Mu.Te(t),Mu.Te(s),_u.get(this).HYt(t,s)}e$t(t,s=0){return Mu.Re(t),Mu.Te(s),_u.get(this).JYt(t,s)}h$t(t){return Mu.Re(t),_u.get(this).qYt(t)}}}{const Ru=self.Ws;Ru._Y.WXt.GY={r$t(t,s){return s?this.Mf===t:Ru.Gh(this.Mf,t)},n$t(){return-1!==this.oYt},BYt(){return!0},o$t(t,s,i){return this.zYt(t,s,i)}}}{const Au=self.Ws;Au._Y.WXt.drt={Gf(t){this.fYt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.RYt(t.toString())},a$t(t){this.fYt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.RYt(this.Mf+t)},l$t(t,s){this.fYt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.kYt(t.toString(),s)},u$t(){this.LYt()},v5(t){this.AYt(t)},c$t(t){this.PYt(t)},aC(t){this.EYt(t)},zXt(t,s){let i=!1,e=this.Xxt.UXt();for(const h of t)if(" "===h)e.f$t(s),i=!0;else{const r=e.d$t(h);r&&(r.p$t(s),i=!0)}i&&e.m$t(),this.bf.ZO()},cVt(t){this.zO().AM(t),this.bf.ZO()},g$t(t){this.FYt(t)},y$t(t){this.DYt(t)},S$t(t){this.NYt(t)},w$t(t){this.WYt(t)}}}{const Pu=self.Ws;Pu._Y.WXt.prt={b$t(t){const s=this.Xxt.UXt().d$t(t);return s?s.M$t():this.Xxt.UXt().wYt()},v$t(){return this.ZXt},x$t(){return this.tYt},G$t(){return this.sYt},T$t(){return this.cI},Text(){return this.Mf},_$t(){return this.$Xt?Pu.Lh.xm(this.Mf):this.Mf},I$t(){return this.VYt()},C$t(){return this.UYt()},R$t(t,s){return this.HYt(t,s)},A$t(t){return this.qYt(t)},P$t(t,s){const i=this.JYt(t,s);return i?i.x:0},E$t(t,s){const i=this.JYt(t,s);return i?i.y:0},F$t(t,s){const i=this.JYt(t,s);return i?i.width:0},D$t(t,s){const i=this.JYt(t,s);return i?i.height:0}}}{const Eu=self.Ws;self.O$t=class{constructor(t,s,i,e){let h=t.wYt(),r=t.bYt();this.jXt=t,this.k$t=s,this.L$t=new Eu.Rect(i,e,i+h,e+r),this.B$t=new Eu.Rect,this.N$t=-1,this.W$t()}wr(){this.jXt=null,this.L$t=null,this.B$t=null}W$t(){let t=this.jXt.Pm(),s=this.jXt.jm();this.B$t.I(this.L$t),this.B$t.Ct(t,s),this.B$t.nu(this.jXt.rR())}UXt(){return this.jXt}j$t(){return this.k$t}rR(){return this.B$t}p$t(t){this.N$t=t}M$t(){return this.N$t<0?this.jXt.wYt():this.N$t}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||R.Lo(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},R=(r,C,self.Ws),A=new R.Rect,P=new R.ou,E=new R.Yo,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.lYt=class{constructor(t){this.jXt=t,this.AI=0,this.EI=0,this.Mf="",this.mI=!1,this.MI=null,this.vI=R.Sr(R.Gm),this.xI="word",this.TI=!1,this._I=!1,this.wI="left",this.bI="top",this.K7=1,this.V$t=1,this.U$t=0,this.cI=0,this.IM=R.Sr(R.Yo),this.CI=-1,this.RI=0,this.zI=t=>this.JI(t),this.jXt.H$t(this)}wr(){this.jXt.z$t(this),this.IM=null,this.zI=null,this.vI.lc(),this.vI=null,this.jXt=null,this.MI=null}JI(t){if(t.Nm())return{width:0,height:0};const s=t.sg(),i=t.Rg("scale"),e=(i?parseFloat(i.param):this.K7)*this.V$t,h=t.Rg("scalex"),r=(h?parseFloat(h.param):1)*e,n=t.Rg("scaley"),o=(n?parseFloat(n.param):1)*e,a=this.jXt.bYt()*o+this.cI,l=this.UXt(),u=l.wYt()*r,c=this.J$t();if(l.q$t()){let i=0,e=0;for(const f of s){let t=u,s=l.d$t(f);s?t=s.M$t()*r:" "===f&&(t=l.X$t()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:u*d+p*c,height:a}}}sC(){this._I=!0}oI(){this.sC(),this.TI=!0,this.vI.lc()}CC(t,s){t<=0||s<=0||this.AI===t&&this.EI===s||(this.AI!==t?this.oI():this.sC(),this.AI=t,this.EI=s)}pC(t){this.CI=Math.floor(t)}mC(){return this.CI}OC(t,s){this.PC();const i=this.vI.Im();for(const e of i)if(s>e._g()&&s<e._g()+e.jm())for(const h of e.qm())if(t>=h.Gg()&&t<h.Gg()+h.Pm())return h;return null}*kC(t){this.PC();const s=this.vI.Im();for(const i of s)for(const e of i.qm()){const h=e.Rg("tag");h&&R.Gh(h.param,t)&&(yield e)}}LC(t,s){for(const i of this.kC(t)){if(0===s)return i;--s}return null}BC(t){let s=0;for(const i of this.kC(t))++s;return s}PC(){this.zC(),this.JC()}zC(){if(this.TI){!this.mI||this.MI&&this.MI.toString()===this.Mf||(this.MI=new R.Lh(this.Mf,{$p:!0}));const t=-this.J$t();this.vI.Gm(this.mI?this.MI.pm():this.Mf,this.zI,this.AI,this.xI,t),this.TI=!1}}JC(){this._I&&(this.qC(),this._I=!1)}qC(){let i=0,e=this.cI,h=R.ro(this.vI.Im());for(const s of h){s.xg(NaN),s.Tg(NaN);for(const r of s.qm())r.xg(NaN),r.Tg(NaN)}const t=h.reduce((t,s)=>t+s.jm(),0)-e;"center"===this.bI?i=Math.max(Math.floor(this.EI/2-t/2),0):"bottom"===this.bI&&(i=Math.floor(this.EI-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.jm();if(0<t&&i>this.EI-(o-e))break;0<=i&&this.ZC(n,i),i+=o}}ZC(t,s){let i=0;"center"===this.wI?i=Math.max(Math.floor((this.AI-t.Pm())/2),0):"right"===this.wI&&(i=Math.max(Math.floor(this.AI-t.Pm()),0)),t.xg(i),t.Tg(s);for(const e of t.qm())e.Nm()||(this.Y$t(e,i,s),i+=e.Pm())}Y$t(t,s,i){const e=t.Rg("offsetx"),h=(s+=e?r(e.param,t.jm()):0,t.Rg("offsety"));i+=h?r(h.param,t.jm()):0,t.xg(s),t.Tg(i)}Fv(t,s,i,e){this.PC(),this.RI=0;const h=R.ro(this.vI.Im()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.$$t(t,o,s,i,r,n)}$$t(t,s,i,e,h,r){const n=s.Gg(),o=s._g();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.jm();for(const l of s.qm())this.sR(t,l,i,e,h,r,a)}}sR(o,a,l,u,c,f,d){let p=a.Gg(),m=a._g();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.sg(),n=a.Pm();if(-1!==this.CI){if(this.RI>=this.CI)return;this.RI+r.length>this.CI&&(r=r.slice(0,this.CI-this.RI),n=this.JI(a).width),this.RI+=r.length}const g=a.Rg("background");if(!(R.np(r)&&!g||a.Ag("hide"))){const y=a.Rg("scale"),S=(y?parseFloat(y.param):this.K7)*this.V$t,w=a.Rg("scalex"),b=(w?parseFloat(w.param):1)*S,M=a.Rg("scaley"),v=(M?parseFloat(M.param):1)*S,x=this.jXt.bYt()*v,G=this.cI;m+=d-G-x;let t=1,s=a.Rg("opacity"),i=(s&&(t=parseFloat(s.param)/100),g&&(o.lw(),E.Ua(C(g.param)),E.ua(E.wa()*t*this.IM.wa()),E.Aa(),o.PM(E),A.set(p,m,p+n,m+x),A.Fl()>this.AI&&A.Il(this.AI),P.Au(A,c,f),P.offset(l,u),o.ou(P),o.iw()),a.Rg("color")),e=(i?(E.Ua(C(i.param)),E.ua(this.IM.wa())):E.I(this.IM),E.ua(E.wa()*t),E.Aa(),o.PM(E),this.jXt.wYt()*b),h=Math.abs(this.J$t());for(const T of r){const _=this.jXt.d$t(T);if(_){const I=_.M$t()*b;if(p+I>this.AI+h+1e-5)return;A.set(p,m,p+e,m+x),P.Au(A,c,f),P.offset(l,u),o.Kw(P,_.rR()),p+=I+this.U$t}else p+=this.jXt.X$t()*b+this.U$t}}}}UXt(){return this.jXt}iC(t){this.mI!==(t=!!t)&&(this.mI=t,this.oI())}rI(){return this.mI}Gf(t){this.Mf!==t&&(this.Mf=t,this.oI())}xC(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.xI!==t&&(this.xI=t,this.oI())}dYt(t){if(!s.has(t))throw new Error("invalid alignment");this.wI!==t&&(this.wI=t,this.sC())}pYt(t){if(!i.has(t))throw new Error("invalid alignment");this.bI!==t&&(this.bI=t,this.sC())}v5(t){this.K7!==t&&(this.K7=t,this.oI())}x5(){return this.K7}yYt(t){this.V$t!==t&&(this.V$t=t,this.oI())}oPt(){return this.V$t}mYt(t){this.U$t!==t&&(this.U$t=t,this.oI())}J$t(){return this.U$t}aC(t){this.cI=t,this.oI()}lC(){return this.cI}nP(t){t=R.Tr(t,0,1),this.IM.a=t}PM(t){this.IM.equals(t)||this.IM.I(t)}aP(){return this.IM}AC(){return this.PC(),this.vI.fg()}EC(){this.PC();const t=this.jXt.bYt()*this.K7,s=this.cI,i=t+s;return this.vI.Cm()*i-s}}}{const Fu=self.Ws,Du={width:256,height:256,K$t:16,Z$t:16,characterSet:""};self.VXt=class{constructor(t){if((t=Object.assign({},Du,t)).width<=0||t.height<=0||t.K$t<=0||t.Z$t<=0)throw new Error("invalid size");this.pg=t.width,this.mg=t.height,this.KXt=t.K$t,this.ZXt=t.Z$t,this.QXt=t.characterSet,this.Q$t="",this.tKt=null,this.sKt=!1,this.iKt=-1,this.B$t=new Fu.Rect(0,0,1,1),this.eKt=new Map,this.hKt=!0,this.rKt=new Set}wr(){this.B$t=null,this.nKt(),this.eKt=null,this.rKt&&this.rKt.clear(),this.rKt=null}nKt(){for(let t of this.eKt.values())t.wr();this.eKt.clear()}H$t(t){this.rKt.add(t)}z$t(t){this.rKt.delete(t)}YXt(){if(this.hKt){this.nKt();let s=Fu.Fp(this.QXt),h=Math.floor(this.pg/this.KXt),t=Math.floor(this.mg/this.ZXt),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.eKt.has(i)){let t=e%h,s=Math.floor(e/h);this.eKt.set(i,Fu.Sr(self.O$t,this,i,t*this.KXt,s*this.ZXt))}}if(this.sKt=!1,this.iKt=-1,Array.isArray(this.tKt))for(let s of this.tKt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.KXt)for(let s of t){let t=this.eKt.get(s);t?(t.p$t(i),this.sKt=!0):" "===s&&(this.iKt=i,this.sKt=!0)}}this.hKt=!1;for(let t of this.rKt)t.oI()}}m$t(){this.sKt=!0;for(const t of this.rKt)t.oI()}d$t(t){return this.YXt(),this.eKt.get(t)||null}q$t(){return this.sKt}Bm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.pg!==t&&(this.pg=t,this.hKt=!0)}Pm(){return this.pg}Em(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.mg!==t&&(this.mg=t,this.hKt=!0)}jm(){return this.mg}SYt(t){if(!this.B$t.equals(t)){this.B$t.I(t);for(const s of this.eKt.values())s.W$t()}}rR(){return this.B$t}zXt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.KXt!==t&&(this.KXt=t,this.hKt=!0)}wYt(){return this.KXt}JXt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.ZXt!==t&&(this.ZXt=t,this.hKt=!0)}bYt(){return this.ZXt}qXt(t){this.QXt!==t&&(this.QXt=t,this.hKt=!0)}MYt(){return this.QXt}XXt(t){if(this.Q$t!==t&&(this.Q$t=t,this.hKt=!0,this.tKt=null,this.Q$t.length))try{this.tKt=JSON.parse(this.Q$t)}catch(t){this.tKt=null}}vYt(){return this.Q$t}f$t(t){this.iKt!==(t=t<0?-1:t)&&(this.iKt=t,0<=this.iKt)&&(this.sKt=!0)}X$t(){return this.iKt<0?this.KXt:this.iKt}}}{const Ou=self.Ws;Ou._Y.oKt=class extends Ou.ixt{constructor(t){super(t)}wr(){super.wr()}}}{const ku=self.Ws;ku._Y.oKt.bIt=class extends ku.jxt{constructor(t){super(t),this.aKt=null,this.xy=null}wr(){this.QX(),super.wr()}_xt(){this.MW().dk(this.bf)}async qX(t){const s=this.MW();this.xy=await s.h_t()}lKt(t,s,i,e){!this.aKt&&this.xy&&(this.aKt=new self.uKt(this),this.aKt.cKt(this.xy,t,s,i,e))}QX(){this.aKt&&(this.aKt.wr(),this.aKt=null)}fKt(){return this.aKt}}}{const Lu=self.Ws,Bu=Lu.Sr(Lu.Rect),Nu=Lu.Sr(Lu.Rect),Wu=Lu.Sr(Lu.ou);Lu._Y.oKt.Instance=class extends Lu.bGt{constructor(t,s){super(t),this.dKt=16,this.pKt=16,this.mKt=16,this.gKt=16,this.yKt=1,this.SKt=1,this.wKt=!0,this.bKt=null,s&&(this.dKt=s[0],this.pKt=s[1],this.mKt=s[2],this.gKt=s[3],this.yKt=s[4],this.SKt=s[5],this.wKt=!!s[8],this.zO().oB(!!s[6])),this.Xxt.lKt(this.dKt,this.pKt,this.mKt,this.gKt)}wr(){super.wr()}MKt(t){this.bKt=t}Fv(t){const s=this.zO(),i=s.TN();this.vKt(t,i.cn(),i.fn(),s.Pm(),s.jm())}vKt(t,s,i,e,h){let r=this.Xxt.fKt();if(r||(this.Xxt.lKt(this.dKt,this.pKt,this.mKt,this.gKt),r=this.Xxt.fKt())){const n=r.xKt(),o=r.GKt(),a=Math.min(this.dKt,n),l=Math.min(this.pKt,n),u=Math.min(this.mKt,o),c=Math.min(this.gKt,o),f=n-l,d=o-c,p=this.wKt?1:0,m=this.yKt,g=this.SKt;if(0<a&&0<u&&this.TKt(t,r.yx(),0,0,a+p,u+p,s,i,a+p,u+p),0<l&&0<u&&this.TKt(t,r.yx(),f-p,0,l+p,u+p,s+e-l-p,i,l+p,u+p),0<l&&0<c&&this.TKt(t,r.yx(),f-p,d-p,l+p,c+p,s+e-l-p,i+h-c-p,l+p,c+p),0<a&&0<c&&this.TKt(t,r.yx(),0,d-p,a+p,c+p,s,i+h-c-p,a+p,c+p),0===m){const y=2===g?0:p;0<a&&u<d&&this._Kt(t,r.IKt(),s,i+u,a+y,h-u-c,0,0),0<l&&u<d&&this._Kt(t,r.CKt(),s+e-l-y,i+u,l+y,h-u-c,y,0),0<u&&a<f&&this._Kt(t,r.RKt(),s+a,i,e-a-l,u+y,0,0),0<c&&a<f&&this._Kt(t,r.AKt(),s+a,i+h-c-y,e-a-l,c+y,0,y)}else 1===m&&(0<a&&u<d&&this.TKt(t,r.yx(),0,u,a,d-u,s,i+u,a,h-u-c),0<l&&u<d&&this.TKt(t,r.yx(),f,u,l,d-u,s+e-l,i+u,l,h-u-c),0<u&&a<f&&this.TKt(t,r.yx(),a,0,f-a,u,s+a,i,e-a-l,u),0<c)&&a<f&&this.TKt(t,r.yx(),a,d,f-a,c,s+a,i+h-c,e-a-l,c);u<d&&a<f&&(0===g?this._Kt(t,r.PKt(),s+a,i+u,e-a-l,h-u-c,0,0):1===g&&this.TKt(t,r.yx(),a,u,f-a,d-u,s+a,i+u,e-a-l,h-u-c))}}TKt(t,s,i,e,h,r,n,o,a,l){const u=s.Pm(),c=s.jm();if(t.lP(s),Bu.set(n,o,n+a,o+l),Nu.set(i/u,e/c,(i+h)/u,(e+r)/c),null===this.bKt){const f=this.zO(),d=f.TN(),p=d.cn(),m=d.fn();Bu.offset(-p,-m),Wu.Ru(Bu,f.GetAngle()),Wu.offset(p,m),t.Kw(Wu,Nu)}else this.bKt(Bu,Nu)}_Kt(t,s,i,e,h,r,n,o){const a=s.Pm(),l=s.jm();if(t.lP(s),Bu.set(i,e,i+h,e+r),Nu.set(-n/a,-o/l,(h-n)/a,(r-o)/l),null===this.bKt){const u=this.zO(),c=u.TN(),f=c.cn(),d=c.fn();Bu.offset(-f,-d),Wu.Ru(Bu,u.GetAngle()),Wu.offset(f,d),t.Kw(Wu,Nu)}else this.bKt(Bu,Nu)}CGt(){this.xft.MW()}Krt(t){}ent(t,s){}}}{const ju=self.Ws;ju._Y.oKt.GY={}}{const Vu=self.Ws;Vu._Y.oKt.drt={cVt(t){this.zO().AM(t),this.bf.ZO()}}}{const Uu=self.Ws;Uu._Y.oKt.prt={}}{let c=function(t){const s=Hu.Lo(t.width,t.height),i=s.getContext("2d");return i.drawImage(t,0,0),s};c;const Hu=self.Ws;self.uKt=class{constructor(t){this.Xxt=t,this.bf=this.Xxt.pk(),this.Kv=null,this.EKt=null,this.FKt=null,this.DKt=null,this.OKt=null,this.kKt=null,this.qH=0,this.XH=0,this.Ub=this.bf.uM(),this.ey=!1,this.QI=!1}wr(){this.Ub.eR()||(this.Ub.nx(this.Kv),this.Ub.nx(this.EKt),this.Ub.nx(this.FKt),this.Ub.nx(this.DKt),this.Ub.nx(this.OKt),this.Ub.nx(this.kKt)),this.Kv=null,this.EKt=null,this.FKt=null,this.DKt=null,this.OKt=null,this.kKt=null,this.Xxt=null,this.Ub=null,this.QI=!0}br(){return this.QI}cKt(t,s,i,e,h){this.LKt(t,s,i,e,h)}BKt(){return!!this.Kv}LKt(t,s,i,e,h){if(!this.QI){const r=t.width,n=t.height,o=(this.qH=r,this.XH=n,s=Math.min(Math.floor(s),r),i=Math.min(Math.floor(i),r),e=Math.min(Math.floor(e),n),r-i),a=n-(h=Math.min(Math.floor(h),n)),l=this.bf.wD(),u=this.bf.eL().$H();this.Kv=this.Ub.zP(c(t),{Hv:l,zv:u}),s<o&&e<a&&(this.EKt=this.Ub.zP(this.NKt(c(t),s,e,o,a),{Vv:"repeat",Uv:"repeat",Hv:l,zv:u})),0<s&&e<a&&(this.FKt=this.Ub.zP(this.NKt(c(t),0,e,s,a),{Uv:"repeat",Hv:l,zv:u})),0<i&&e<a&&(this.DKt=this.Ub.zP(this.NKt(c(t),o,e,r,a),{Uv:"repeat",Hv:l,zv:u})),0<e&&s<o&&(this.OKt=this.Ub.zP(this.NKt(c(t),s,0,o,e),{Vv:"repeat",Hv:l,zv:u})),0<h&&s<o&&(this.kKt=this.Ub.zP(this.NKt(c(t),s,a,o,n),{Vv:"repeat",Hv:l,zv:u}))}}NKt(t,s,i,e,h){const r=e-s,n=h-i,o=Hu.Lo(r,n),a=o.getContext("2d");return a.drawImage(t,s,i,r,n,0,0,r,n),o}xKt(){return this.qH}GKt(){return this.XH}yx(){return this.Kv}PKt(){return this.EKt}IKt(){return this.FKt}CKt(){return this.DKt}RKt(){return this.OKt}AKt(){return this.kKt}}}{const zu=self.Ws,Ju=[];zu._Y.Audio=class extends zu.ixt{constructor(t){super(t)}WKt(t){Ju.push(t)}static async jKt(){await Promise.all(Ju),zu.Hn(Ju)}wr(){super.wr()}}}{let s=function(){return i.zL().L6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const qu=self.Ws,Xu=self.Ks;qu._Y.Audio.bIt=class extends qu.jxt{constructor(t){super(t)}wr(){super.wr()}_xt(){}Ixt(){return self.VKt}};let i=null;self.VKt=class extends self.JL{constructor(t){super(t),i=t}get UKt(){return t().GetAudioContextExtern()}get HKt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().zKt()}set isSilent(t){s().JKt(t)}get masterVolume(){return s().qKt()}set masterVolume(t){Xu.Te(t),s().XKt(t)}YKt(){s().$Kt()}}}{const Yu=self.Ws,$u=["interactive","balanced","playback"];Yu._Y.Audio.Instance=class extends Yu.Jxt{constructor(t,s){super(t,"audio"),this.KKt=0,this.ZKt=[],this.QKt=!0,this.tZt=0,this.sZt=0,this.iZt=!1,this.eZt=1,this.hZt=1,this.rZt=[this.bf.WJ()/2,this.bf.jJ()/2,600],this.nZt=[0,0,-1],this.oZt=[0,1,0],this.aZt=600,this.lZt=1e4,this.uZt=1,this.cZt=null,this.fZt=-1,this.dZt=1,this.pZt=!1,this.mZt=0,this.gZt="suspended",this.yZt=0,this.SZt=new Map,this.wZt=0,this.bZt=0,this.MZt=new Map,this.vZt=new Map;let i="interactive";s&&(this.tZt=s[0],this.sZt=s[1],this.iZt=s[2],i=$u[s[3]],this.QKt=s[4],this.eZt=s[5],this.hZt=s[6],this.rZt[2]=s[7],this.aZt=s[8],this.lZt=s[9],this.uZt=s[10]),this.xZt=[],this.GZt=[],this.TZt=[],this.eGt([["state",t=>this._Zt(t)],["audiocontext-state",t=>this.IZt(t)],["fxstate",t=>this.CZt(t)],["trigger",t=>this.RZt(t)],["buffer-metadata",t=>this.AZt(t)]]);const e=this.pk().Qf(),h=(this.P0=new Yu.C0(Yu.v0.I0(e,"instancedestroy",t=>this.PZt(t.X6)),Yu.v0.I0(e,"afterload",()=>this.tK()),Yu.v0.I0(e,"suspend",()=>this.EZt()),Yu.v0.I0(e,"resume",()=>this.FZt())),"Safari"===Yu.di.yi),r=this.bf.zBt(),n=this.bf.eD().rH(),o="playable-ad-single-file"===this.bf.Qk(),a=h||r||n||o;this.bf.rk(this.rGt("create-audio-context",{preloadList:this.bf.eD().DH().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.tZt,latencyHint:i,panningModel:this.eZt,distanceModel:this.hZt,refDistance:this.aZt,maxDistance:this.lZt,rolloffFactor:this.uZt,listenerPos:this.rZt,usePlayMusicAsSoundWorkaround:a}).then(t=>{this.mZt=t.sampleRate,this.gZt=t.audioContextState,this.yZt=t.outputLatency})),this.cGt()}wr(){this.cZt=null,super.wr()}DZt(t){return this.QKt?t.split(" ").filter(t=>!!t):t?[t]:[]}OZt(s,t){for(const i of t){let t=!1;for(const e of s)if(Yu.Gh(e,i)){t=!0;break}if(!t)return!1}return!0}kZt(t,s){return this.OZt(t,this.DZt(s))}WKt(t){this.XL().WKt(t)}PZt(t){this.cZt===t&&(this.cZt=null)}LZt(t){return Math.pow(10,t/20)}BZt(t){const s=this.LZt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}NZt(t){return Math.log(t)/Math.log(10)*20}WZt(t){return this.NZt(Math.max(Math.min(t,1),0))}EZt(){this.iZt||this.hGt("set-suspended",{isSuspended:!0})}FZt(){this.iZt||this.hGt("set-suspended",{isSuspended:!1})}_Zt(t){const s=t.tickCount,i=(this.yZt=t.outputLatency,this.xZt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.xZt=t.audioInstances,this.TZt=t.analysers,0<i.length&&Yu.Qh(this.xZt,i)}AZt(t){this.MZt.set(t.originalUrl,{duration:t.duration})}IZt(t){this.gZt=t.audioContextState}xrt(){return this.bf.jDt()?"running":this.gZt}CZt(t){this.GZt=t.fxstate}jZt(t){const s=this.DZt(t);for(const i of this.xZt)if(this.OZt(i.tags,s))return i;return null}VZt(t){const s=this.DZt(t);return this.xZt.some(t=>this.OZt(t.tags,s)&&t.isPlaying)}UZt(t,s,i,e,h){if(this.VZt(s))return null;const r=this.MZt.get(t),n={tags:this.DZt(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.xZt.push(n),n}HZt(t){const s=this.DZt(t);for(const i of this.xZt)this.OZt(i.tags,s)&&(i.isPlaying=!1)}async RZt(t){const s=t.type,i=(this.ZKt=t.tags,t.aiid);if("ended"===s){for(const e of this.xZt)if(e.aiid===i){e.isPlaying=!1;break}await this.j4(Yu._Y.Audio.GY.zZt)}else"fade-ended"===s&&await this.j4(Yu._Y.Audio.GY.JZt)}qZt(t){return this.kZt(this.ZKt,t)}KK(){const t={timeScale:this.bf.hO(),gameTime:this.bf.NBt(),instPans:this.XZt(),tickCount:this.bf.WBt()};if(this.cZt){const s=this.cZt.zO();this.rZt[0]=s.jM(),this.rZt[1]=s.HM(),t.listenerPos=this.rZt,t.listenerOrientation=[...this.nZt,...this.oZt]}this.hGt("tick",t)}YZt(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,l=t*n,u=s*n;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}XZt(){return this.xZt.filter(t=>-1!==t.uid).map(t=>this.bf.WO(t.uid)).filter(t=>t).map(t=>{const s=t.zO(),i=s.JO().GetAngle(),[e,h]=this.YZt(s.jM(),s.HM(),-i,this.rZt[0],this.rZt[1]);return{uid:t.f4(),x:e,y:h,z:s.MN(),angle:s.GetAngle()-i}})}$Zt(t,s){for(const i of this.TZt)if(i.index===s&&Yu.Gh(i.tag,t))return i;return null}KZt(t){for(const s of this.DZt(t)){const i=s.toLowerCase();this.SZt.set(i,(this.SZt.get(i)||0)+1)}}zKt(){return this.pZt}JKt(t){this.pZt!==(t=!!t)&&(this.pZt=t,this.hGt("set-silent",{isSilent:t}))}qKt(){return this.dZt}XKt(t){this.dZt!==t&&(this.dZt=t,this.hGt("set-master-volume",{vol:t}))}$Kt(){this.hGt("stop-all");for(const t of this.xZt)t.isPlaying=!1}ZZt(t){return!t.hasOwnProperty("placeholder")&&3!==this.sZt&&!(t.isMusic&&1===this.sZt||!t.isMusic&&2===this.sZt)}tv(){return{isSilent:this.pZt,masterVolume:this.dZt,listenerZ:this.rZt[2],listenerForwardVec:this.nZt,listenerUpVec:this.oZt,listenerUid:this.cZt?this.cZt.f4():-1,remoteUrls:[...this.vZt.entries()],playing:this.xZt.filter(t=>this.ZZt(t)),effects:this.GZt,analysers:this.TZt}}sv(t){if(this.pZt=t.isSilent,this.dZt=t.masterVolume,this.rZt[2]=t.listenerZ,this.cZt=null,this.fZt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.nZt=t.listenerForwardVec:this.nZt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.oZt=t.listenerUpVec:this.oZt=[0,1,0],this.vZt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.vZt.set(s,i);this.xZt=t.playing;for(const e of this.xZt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.GZt=t.effects,this.TZt=t.analysers}tK(){if(-1!==this.fZt&&(this.cZt=this.bf.WO(this.fZt),this.fZt=-1,this.cZt)){const t=this.cZt.zO();this.rZt[0]=t.jM(),this.rZt[1]=t.HM()}for(const s of this.xZt){const i=this.bf.eD().FH(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.GZt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this.bf.eD().FH(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.hGt("load-state",{saveLoadMode:this.sZt,timeScale:this.bf.hO(),gameTime:this.bf.NBt(),listenerPos:this.rZt,listenerOrientation:[...this.nZt,...this.oZt],isSilent:this.pZt,masterVolume:this.dZt,playing:this.xZt.filter(t=>null!==t.bufferUrl),effects:this.GZt})}mGt(){const t=[];for(const[i,e]of Object.entries(this.GZt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.xZt.length},...this.xZt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Ku=self.Ws;Ku._Y.Audio.GY={zZt(t){return this.qZt(t)},JZt(t){return this.qZt(t)},QZt(){return this.bZt===this.wZt},tQt(){return!0},sQt(){return this.zKt()},iQt(){for(const t of this.xZt)if(t.isPlaying)return!0;return!1},eQt(t){return this.VZt(t)}}}{const Zu=self.Ws,Qu=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];Zu._Y.Audio.drt={Play(t,s,i,e,h){const r=Zu._Y.Audio.drt.hQt.call(this,t,s,i,e,h);return this.WKt(r),r},Grt(t,s,i,e){Zu._Y.Audio.drt.hQt.call(this,t,0,s,0,i,e)},async hQt(t,s,i,e,h,r){if(!this.pZt){const n=t[1],o=this.bf.eD().FH(t[0]);if(o){const a=this.KKt,l=(this.KKt=0,this.UZt(t[0],h,n,0!==s,this.BZt(i)));try{await this.rGt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.DZt(h),isLooping:0!==s,vol:this.BZt(i),stereoPan:Zu.Tr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.bf.WBt())}}}},async rQt(t,s,i,e,h,r,n,o,a,l,u){if(!this.pZt){const c=t[1],f=this.bf.eD().FH(t[0]);if(f){const d=this.KKt,p=(this.KKt=0,this.UZt(t[0],u,c,0!==s,this.BZt(i)));try{await this.rGt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.DZt(u),isLooping:0!==s,vol:this.BZt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:Zu.Ir(n),innerAngle:Zu.Ir(o),outerAngle:Zu.Ir(a),outerGain:this.BZt(l)}})}finally{p&&(p.placeholder=this.bf.WBt())}}}},async nQt(t,s,i,e,h,r,n,o){if(!this.pZt&&e){const a=e.tvt();if(a&&a.zO()){const l=a.zO(),u=l.JO().GetAngle(),[c,f]=this.YZt(l.jM(),l.HM(),-u,this.rZt[0],this.rZt[1]),d=t[1],p=this.bf.eD().FH(t[0]);if(p){const m=this.KKt,g=(this.KKt=0,this.UZt(t[0],o,d,0!==s,this.BZt(i)));try{await this.rGt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.DZt(o),isLooping:0!==s,vol:this.BZt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.MN(),angle:l.GetAngle()-u,innerAngle:Zu.Ir(h),outerAngle:Zu.Ir(r),outerGain:this.BZt(n),uid:a.f4()}})}finally{g&&(g.placeholder=this.bf.WBt())}}}}},async oQt(t,s,i,e,h,r){if(!this.pZt){const n=1===t,o=this.bf.eD().FH(s)||this.vZt.get(s.toLowerCase());if(o){const a=this.KKt,l=(this.KKt=0,this.UZt(s,r,n,0!==i,this.BZt(e)));try{await this.rGt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.DZt(r),isLooping:0!==i,vol:this.BZt(e),stereoPan:Zu.Tr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.bf.WBt())}}}},async aQt(t,s,i,e,h,r,n,o,a,l,u,c){if(!this.pZt){const f=1===t,d=this.bf.eD().FH(s)||this.vZt.get(s.toLowerCase());if(d){const p=this.KKt,m=(this.KKt=0,this.UZt(s,c,f,0!==i,this.BZt(e)));try{await this.rGt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.DZt(c),isLooping:0!==i,vol:this.BZt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:Zu.Ir(o),innerAngle:Zu.Ir(a),outerAngle:Zu.Ir(l),outerGain:this.BZt(u)}})}finally{m&&(m.placeholder=this.bf.WBt())}}}},async lQt(t,s,i,e,h,r,n,o,a){if(!this.pZt&&!this.pZt&&h){const l=h.tvt();if(l&&l.zO()){const u=l.zO(),c=u.JO().GetAngle(),[f,d]=this.YZt(u.jM(),u.HM(),-c,this.rZt[0],this.rZt[1]),p=1===t,m=this.bf.eD().FH(s)||this.vZt.get(s.toLowerCase());if(m){const g=this.KKt,y=(this.KKt=0,this.UZt(s,a,p,0!==i,this.BZt(e)));try{await this.rGt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.DZt(a),isLooping:0!==i,vol:this.BZt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.MN(),angle:u.GetAngle()-c,innerAngle:Zu.Ir(r),outerAngle:Zu.Ir(n),outerGain:this.BZt(o),uid:l.f4()}})}finally{y&&(y.placeholder=this.bf.WBt())}}}}},uQt(t,s){this.hGt("set-looping",{tags:this.DZt(t),isLooping:0===s})},cQt(t,s){this.hGt("set-muted",{tags:this.DZt(t),isMuted:0===s})},Mrt(t,s){this.hGt("set-volume",{tags:this.DZt(t),vol:this.BZt(s)})},fQt(t,s,i,e){this.hGt("fade-volume",{tags:this.DZt(t),vol:this.BZt(s),duration:i,stopOnEnd:0===e})},dQt(t,s){this.hGt("set-stereo-pan",{tags:this.DZt(t),p:Zu.Tr(s/100,-1,1)})},async pQt(t){const s=t[1],i=this.bf.eD().FH(t[0]);i&&(this.wZt++,await this.rGt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.bZt++)},async mQt(t,s){const i=1===t,e=this.bf.eD().FH(s)||this.vZt.get(s.toLowerCase());e&&(this.wZt++,await this.rGt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.bZt++)},t8(t,s){this.hGt("set-playback-rate",{tags:this.DZt(t),rate:Math.max(s,0)})},HW(t){this.HZt(t),this.hGt("stop",{tags:this.DZt(t)})},gQt(){this.$Kt()},yQt(t,s){this.hGt("set-paused",{tags:this.DZt(t),paused:0===s})},SQt(t,s){this.hGt("seek",{tags:this.DZt(t),pos:s})},wQt(t){2===t&&(t=this.zKt()?1:0),this.JKt(0===t)},bQt(t){const s=this.BZt(t);this.XKt(s)},MQt(t,s,i,e,h,r,n){const o=Qu[s];this.KZt(t),this.hGt("add-effect",{type:"filter",tags:this.DZt(t),params:[o,i,e,h,r,Zu.Tr(n/100,0,1)]})},vQt(t,s,i,e){this.KZt(t),this.hGt("add-effect",{type:"delay",tags:this.DZt(t),params:[s,this.BZt(i),Zu.Tr(e/100,0,1)]})},xQt(t,s,i,e,h,r){this.KZt(t),this.hGt("add-effect",{type:"flanger",tags:this.DZt(t),params:[s/1e3,i/1e3,e,h/100,Zu.Tr(r/100,0,1)]})},GQt(t,s,i,e,h,r,n){this.KZt(t),this.hGt("add-effect",{type:"phaser",tags:this.DZt(t),params:[s,i,e,h,r,Zu.Tr(n/100,0,1)]})},TQt(t,s,i,e){const h=this.bf.eD().FH(s[0]);h&&(this.KZt(t),this.hGt("add-effect",{type:"convolution",tags:this.DZt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,Zu.Tr(e/100,0,1)]}))},_Qt(t,s){this.KZt(t),this.hGt("add-effect",{type:"gain",tags:this.DZt(t),params:[this.BZt(s)]})},IQt(t,s){this.KZt(t),this.hGt("add-effect",{type:"stereopan",tags:this.DZt(t),params:[Zu.Tr(s/100,-1,1)]})},CQt(t){this.KZt(t),this.hGt("add-effect",{type:"gain",tags:this.DZt(t),params:[0]})},RQt(t,s,i){this.KZt(t),this.hGt("add-effect",{type:"tremolo",tags:this.DZt(t),params:[s,Zu.Tr(i/100,0,1)]})},AQt(t,s,i){this.KZt(t),this.hGt("add-effect",{type:"ringmod",tags:this.DZt(t),params:[s,Zu.Tr(i/100,0,1)]})},PQt(t,s,i,e,h,r){this.KZt(t),this.hGt("add-effect",{type:"distortion",tags:this.DZt(t),params:[this.LZt(s),this.LZt(i),e,this.LZt(h),Zu.Tr(r/100,0,1)]})},EQt(t,s,i,e,h,r){this.KZt(t),this.hGt("add-effect",{type:"compressor",tags:this.DZt(t),params:[s,i,e,h/1e3,r/1e3]})},FQt(t,s,i){this.KZt(t),this.hGt("add-effect",{type:"analyser",tags:this.DZt(t),params:[s,i]})},DQt(t){const s=this.DZt(t);for(const i of s)this.SZt.set(i.toLowerCase(),0);this.hGt("remove-effects",{tags:s}),this.GZt={}},hW(t,s,i,e,h,r){this.hGt("set-effect-param",{tags:this.DZt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},OQt(t){if(t){const s=t.tvt();s&&s.zO()&&(this.cZt=s)}},kQt(t){this.rZt[2]=t},LQt(t,s,i,e,h,r){this.nZt[0]=t,this.nZt[1]=s,this.nZt[2]=-i,this.oZt[0]=e,this.oZt[1]=h,this.oZt[2]=-r},BQt(t){this.KKt=Math.max(t,0)},NQt(t){const s=t[1],i=this.bf.eD().FH(t[0]);i&&this.hGt("unload",{url:i.url,type:i.type,isMusic:s})},WQt(t,s){const i=1===t,e=this.bf.eD().FH(s)||this.vZt.get(s.toLowerCase());e&&this.hGt("unload",{url:e.url,type:e.type,isMusic:i})},jQt(){this.hGt("unload-all")},VQt(t,s,i){this.vZt.set(i.toLowerCase(),{url:t,type:s})}}}{const tc=self.Ws;tc._Y.Audio.prt={UQt(t){const s=this.jZt(t);return s?s.duration:0},yrt(t){const s=this.jZt(t);return s?s.playbackTime:0},vrt(t){const s=this.jZt(t);return s?s.playbackRate:0},Srt(t){const s=this.jZt(t);return s?this.WZt(s.volume):0},HQt(){return this.WZt(this.qKt())},zQt(t){return this.SZt.get(t.toLowerCase())||0},JQt(t,s){const i=this.$Zt(t,Math.floor(s));return i?i.binCount:0},qQt(t,s,i){const e=this.$Zt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},XQt(t,s){const i=this.$Zt(t,Math.floor(s));return i?i.peak:0},YQt(t,s){const i=this.$Zt(t,Math.floor(s));return i?i.rms:0},$Qt(){return this.mZt},KQt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},ZQt(){return this.yZt},QQt(t,s){return 0==(t=tc.Tr(+t,0,100)/100)?-1/0:t<.1?this.WZt(tc.kt(0,this.BZt(s),10*t)):tc.kt(s,0,(t-.1)/.9)}}}{const sc=self.Ws;sc._Y.gamepad=class extends sc.ixt{constructor(t){super(t)}wr(){super.wr()}}}{const ic=self.Ws;ic._Y.gamepad.bIt=class extends ic.jxt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const ec=self.Ws;class hc{constructor(t,s,i){this.by=t,this.vf=s,this.tts=new Set(i),this.sts=new rc,this.its=new rc,this.ets=[],this.hts=[]}rts(){return this.vf}w7(t,s){const i=this.its;this.its=this.sts,this.sts=i,this.sts.w7(t,s),ec.qn(this.ets,this.sts.nts(),!1),ec.qn(this.hts,this.sts.nts(),!1);for(let t=0,s=this.sts.nts();t<s;++t){const e=this.its.ots(t),h=this.sts.ots(t);.5<=h&&e<.5&&(this.ets[t]=!0),h<.5&&.5<=e&&(this.hts[t]=!0)}}nts(){return this.sts.nts()}ats(){return this.sts.ats()}lts(t){return!((t=Math.floor(t))<0||t>=this.ets.length)&&this.ets[t]}uts(t){return!((t=Math.floor(t))<0||t>=this.hts.length)&&this.hts[t]}cts(){this.ets.fill(!1),this.hts.fill(!1)}ots(t){return this.sts.ots(t)}fts(t){return.5<=this.sts.ots(t)}dts(t){return this.sts.dts(t)}QF(){return this.by}pts(){return this.tts}}class rc{constructor(){this.gts=[],this.yts=[]}w7(s,t){let i=this.gts,e=0;for(let t=s.length;e<t;++e){const h=s[e];e===i.length?i.push(h.value):i[e]=h.value}e<i.length&&ec.Un(i,e),ec.Xn(this.yts,t)}nts(){return this.gts.length}ats(){return this.yts.length}ots(t){return(t=Math.floor(t))<0||t>=this.gts.length?0:this.gts[t]}dts(t){return(t=Math.floor(t))<0||t>=this.yts.length?0:this.yts[t]}}ec._Y.gamepad.Instance=class extends ec.Jxt{constructor(t,s){super(t,"gamepad"),this.Sts=25,this.wts=0,this.bts=-1,this.Mts=new Map,s&&(this.Sts=s[0]),this.iGt("gamepad-connected",t=>this.vts(t)),this.iGt("gamepad-disconnected",t=>this.xts(t)),this.iGt("input-update",t=>this.Gts(t));const i=this.pk().Qf();this.P0=new ec.C0(ec.v0.I0(i,"tick2",()=>this.H$()),ec.v0.I0(i,"suspend",()=>this.EZt()),ec.v0.I0(i,"resume",()=>this.FZt())),this.hGt("ready")}wr(){super.wr()}vts(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.Mts.has(s)||(this.Mts.set(s,new hc(s,i,e)),this.bts=s,this.N4(ec._Y.gamepad.GY.Tts),this.bts=-1)}xts(t){const s=t.index;this.bts=s,this.N4(ec._Y.gamepad.GY._ts),this.bts=-1,this.Mts.delete(s)}Gts(t){for(const s of t)this.Its(s)}Its(t){const s=t.index,i=(this.Mts.has(s)||this.vts(t),this.Mts.get(s));i.w7(t.buttons,t.axes);for(let t=0,s=i.nts();t<s;++t)i.lts(t)&&(this.wts=t)}Cts(t){return this.Mts.get(Math.floor(t))||null}Rts(t){if(-1===t)return[...this.Mts.values()];{const s=this.Mts.get(Math.floor(t));return s?[s]:[]}}H$(){for(const t of this.Mts.values())t.cts()}EZt(){this.hGt("suspend")}FZt(){this.hGt("resume")}mGt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.wts},{name:t+".properties.analog-deadzone.name",value:this.Sts}]}]}}}{const nc=self.Ws;nc._Y.gamepad.GY={Tts(){return!0},_ts(){return!0},fts(t,s){const i=this.Cts(t);if(!i)return!1;const e=i.fts(s);return e&&(this.wts=s),e},Ats(t,s){const i=this.Cts(t);if(!i)return!1;const e=i.lts(s);return e&&(this.wts=s),e},Pts(t,s){const i=this.Cts(t);if(!i)return!1;const e=i.uts(s);return e&&(this.wts=s),e},Ets(){return 0<this.Mts.size},Fts(t,s,i,e){s=Math.floor(s);const h=this.Cts(t);if(!h)return!1;let r=h.dts(s),n;return n=s%2==0?h.dts(s+1):h.dts(s-1),r*=100,n*=100,Math.hypot(r,n)<=this.Sts&&(r=0),nc.compare(r,i,e)},Dts(t){const s=this.Rts(t);if(0!==s.length){const i=this.bf,e=i.AD(),h=i.kD(),r=h.rV(),n=i.UD(),o=n.nV(),a=n.oV(h);i.uV(!1);for(const l of s)for(let t=0,s=l.nts();t<s;++t)l.lts(t)&&(this.bts=l.QF(),this.wts=t,e.fV(r),h.dV(o,a),e.pV(r),this.bts=-1);i.uV(!0),n.SV()}return!1},Ots(t){const s=this.Rts(t);if(0!==s.length){const i=this.bf,e=i.AD(),h=i.kD(),r=h.rV(),n=i.UD(),o=n.nV(),a=n.oV(h);i.uV(!1);for(const l of s)for(let t=0,s=l.nts();t<s;++t)l.uts(t)&&(this.bts=l.QF(),this.wts=t,e.fV(r),h.dV(o,a),e.pV(r),this.bts=-1);i.uV(!0),n.SV()}return!1},kts(t,s){s=Math.floor(s);const i=this.Cts(t);if(!i)return!1;const e=i.fts(s);return e&&(this.wts=s),e},Lts(t,s){s=Math.floor(s);const i=this.Cts(t);if(!i)return!1;const e=i.lts(s);return e&&(this.wts=s),e},Bts(t,s){s=Math.floor(s);const i=this.Cts(t);if(!i)return!1;const e=i.uts(s);return e&&(this.wts=s),e},Nts(t,s){const i=this.Cts(t);if(!i)return!1;const e=i.pts();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},Wts(){return!0}}}{const oc=self.Ws;oc._Y.gamepad.drt={jts(t,s,i,e){this.hGt("vibrate-dual-rumble",{index:t,duration:s,weakMag:oc.Tr(i/100,0,1),strongMag:oc.Tr(e/100,0,1)})},Vts(t,s,i,e,h,r){this.hGt("vibrate-trigger-rumble",{index:t,duration:s,weakMag:oc.Tr(i/100,0,1),strongMag:oc.Tr(e/100,0,1),leftMag:oc.Tr(h/100,0,1),rightMag:oc.Tr(r/100,0,1)})},Uts(t){this.hGt("reset-vibrate",{index:t})}}}{const ac=self.Ws;ac._Y.gamepad.prt={Hts(){return this.Mts.size},zts(t){const s=this.Cts(t);return s?s.rts():""},Jts(){return this.bts},qts(t){const i=this.Cts(t);if(!i)return"";let e="";for(let t=0,s=i.ats();t<s;++t)e+=`Axis ${t}: ${Math.round(100*i.dts(t))}
`;return e},Xts(t){const i=this.Cts(t);if(!i)return"";let e="";for(let t=0,s=i.nts();t<s;++t)e+=`Button ${t}: ${Math.round(100*i.ots(t))}
`;return e},Yts(t,s){const i=this.Cts(t);return i?i.ots(Math.floor(s)):0},$ts(t,s){const i=this.Cts(t);return i?i.dts(Math.floor(s)):0},Kts(t){const s=this.Cts(t);return s?s.nts():0},Zts(t){const s=this.Cts(t);return s?s.ats():0},Qts(t,s){const i=this.Cts(t);return i?100*i.ots(Math.floor(s)):0},tss(t,s){s=Math.floor(s);const i=this.Cts(t);if(!i)return 0;let e=i.dts(s),h;return h=s%2==0?i.dts(s+1):i.dts(s-1),e*=100,h*=100,Math.hypot(e,h)<=this.Sts?0:e},sss(){return this.wts},iss(){return this.wts}}}{const lc=self.Ws;lc._Y.Keyboard=class extends lc.ixt{constructor(t){super(t)}wr(){super.wr()}}}{let i=function(){return s.zL().L6()};i;const uc=self.Ws;uc._Y.Keyboard.bIt=class extends uc.jxt{constructor(t){super(t)}wr(){super.wr()}_xt(){}Ixt(){return self.ess}};let s=null;self.ess=class extends self.JL{constructor(t){super(t),(s=t).pk().FO().keyboard=this}hss(t){const s=i();if("string"==typeof t)return s.rss(t);if("number"==typeof t)return s.nss(t);throw new TypeError("expected string or number")}}}{const cc=self.Ws;cc._Y.Keyboard.Instance=class extends cc.Jxt{constructor(t,s){super(t),this.oss=new Set,this.ass=new Set,this.lss=0,this.uss="",this.css="";const i=this.pk().Qf();this.P0=new cc.C0(cc.v0.I0(i,"keydown",t=>this.fss(t.data)),cc.v0.I0(i,"keyup",t=>this.dss(t.data)),cc.v0.I0(i,"window-blur",()=>this.pss()),cc.v0.I0(i,"keyboard-blur",()=>this.pss()))}wr(){super.wr()}fss(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.oss.has(i)||(this.oss.add(i),this.ass.add(s),this.uss=i,this.lss=s,this.css=e,this.N4(cc._Y.Keyboard.GY.mss),this.N4(cc._Y.Keyboard.GY.gss),this.N4(cc._Y.Keyboard.GY.yss),this.N4(cc._Y.Keyboard.GY.Sss))}dss(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.oss.delete(i),this.ass.delete(s),this.uss=i,this.lss=s,this.css=e,this.N4(cc._Y.Keyboard.GY.wss),this.N4(cc._Y.Keyboard.GY.bss),this.N4(cc._Y.Keyboard.GY.Mss),this.N4(cc._Y.Keyboard.GY.vss)}pss(){for(const t of this.ass)this.ass.delete(t),this.lss=t,this.N4(cc._Y.Keyboard.GY.wss),this.N4(cc._Y.Keyboard.GY.bss),this.N4(cc._Y.Keyboard.GY.vss);this.oss.clear()}rss(t){return this.oss.has(t)}nss(t){return this.ass.has(t)}tv(){return{tk:this.lss,tkk:this.css}}sv(t){this.lss=t.tk,t.hasOwnProperty("tkk")&&(this.css=t.tkk)}mGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.lss},{name:t+".debugger.last-key-string",value:cc._Y.Keyboard.prt.xss(this.lss)},{name:t+".debugger.last-typed-key",value:this.css}]}]}}}{const fc=self.Ws,dc=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];fc._Y.Keyboard.GY={rss(t){return this.ass.has(t)},gss(t){return this.lss===t},mss(){return!0},wss(){return!0},bss(t){return this.lss===t},nss(t){return t=Math.floor(t),this.ass.has(t)},Sss(t){return this.lss===t},vss(t){return this.lss===t},yss(t){const s=dc[t];return this.uss===s},Mss(t){const s=dc[t];return this.uss===s},Gss(t){const s=dc[t];return this.oss.has(s)}}}{const pc=self.Ws;pc._Y.Keyboard.drt={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const mc=self.Ws;mc._Y.Keyboard.prt={Tss(){return this.lss},xss(t){return s(t)},_ss(){return this.css}}}{const gc=self.Ws;gc._Y.Iss=class extends gc.ixt{constructor(t){super(t)}wr(){super.wr()}}}{let h=function(){return s.zL().L6()};h;const yc=self.Ws,Sc=self.Ks;yc._Y.Iss.bIt=class extends yc.jxt{constructor(t){super(t)}wr(){super.wr()}_xt(){}Ixt(){return self.Css}};let s=null;self.Css=class extends self.JL{constructor(t){super(t),(s=t).pk().FO().DO=this}Rss(t){return h().Ass(t)[0]}Pss(t){return h().Ass(t)[1]}Ess(t){return h().Ass(t)}Fss(t){return h().Dss(t)}Oss(t){Sc.Re(t),h().kss(t)}Lss(t){const s=h(),i=s.pk(),e=i.zk(t);s.Bss(e)}}}{let n=self.Ws,o=null;n._Y.Iss.Instance=class extends n.Jxt{constructor(t,s){super(t,"mouse"),this.Nss=[!1,!1,!1,!1,!1],this.Wss=0,this.jss=0,this.Vss=0,this.Uss=0,this.Hss=0,this.zss=0,this.Jss=0,this.qss=0,this.Xss=!1,this.Yss=0,this.$ss=0,this.eGt([["pointer-lock-change",t=>this.Kss(t)],["pointer-lock-error",t=>this.Zss(t)]]);const i=this.pk().Qf();this.P0=new n.C0(n.v0.I0(i,"pointermove",t=>this.Qss(t.data)),n.v0.I0(i,"pointerdown",t=>this.tis(t.data)),n.v0.I0(i,"pointerup",t=>this.sis(t.data)),n.v0.I0(i,"dblclick",t=>this.iis(t.data)),n.v0.I0(i,"wheel",t=>this.eis(t.data)),n.v0.I0(i,"window-blur",()=>this.b5t()))}wr(){super.wr()}tis(t){"mouse"===t.pointerType&&(this.Wss=t.pageX-this.bf.jB(),this.jss=t.pageY-this.bf.VB(),this.his(t.lastButtons,t.buttons))}Qss(t){this.Yss=t.movementX,this.$ss=t.movementY,this.N4(n._Y.Iss.GY.ris),this.Yss=0,this.$ss=0,"mouse"===t.pointerType&&(this.Wss=t.pageX-this.bf.jB(),this.jss=t.pageY-this.bf.VB(),this.his(t.lastButtons,t.buttons))}sis(t){"mouse"===t.pointerType&&this.his(t.lastButtons,t.buttons)}his(t,s){this.nis(t,s,1,0),this.nis(t,s,4,1),this.nis(t,s,2,2),this.nis(t,s,8,3),this.nis(t,s,16,4)}nis(t,s,i,e){!(t&i)&&s&i?this.ois(e):t&i&&!(s&i)&&this.ais(e)}ois(t){this.Nss[t]=!0,this.N4(n._Y.Iss.GY.lis),this.Vss=t,this.Uss=0,this.N4(n._Y.Iss.GY.uis),this.N4(n._Y.Iss.GY.cis)}ais(t){this.Nss[t]&&(this.Nss[t]=!1,this.Vss=t,this.N4(n._Y.Iss.GY.fis))}iis(t){this.Vss=t.button,this.Uss=1,this.N4(n._Y.Iss.GY.uis),this.N4(n._Y.Iss.GY.cis)}eis(t){this.Hss=t.deltaY<0?1:0,this.zss=t.deltaX,this.Jss=t.deltaY,this.qss=t.deltaZ,this.N4(n._Y.Iss.GY.dis)}b5t(){for(let t=0,s=this.Nss.length;t<s;++t){if(!this.Nss[t])return;this.Nss[t]=!1,this.Vss=t,this.N4(n._Y.Iss.GY.fis)}}Ass(t){const s=this.bf.xO(),i=this.Wss,e=this.jss;if(void 0===t){const h=s.XO(0);return h.Aq(i,e)}{const r=s.JO(t);return r?r.WB(i,e):[0,0]}}Dss(t){return t=Math.floor(t),!!this.Nss[t]}pis(){return 0<=this.Wss&&0<=this.jss&&this.Wss<this.bf.aBt()&&this.jss<this.bf.lBt()}kss(t){o!==t&&(o=t,this.hGt("cursor",t))}async Bss(t){if(!n.di.xi&&t){const s=t.tvt();if(s){const i=s.zO(),e=s.CGt();if(i&&e&&o!==e){const h=await(o=e).r_t(),r=`url(${h}) ${Math.round(i.GW()*e.Pm())} ${Math.round(i._W()*e.jm())}, auto`;this.hGt("cursor",r)}}}}Kss(t){this.mis(t["has-pointer-lock"])}Zss(t){this.mis(t["has-pointer-lock"]),this.N4(n._Y.Iss.GY.gis)}mis(t){this.Xss!==t&&(this.Xss=t,this.Xss?this.N4(n._Y.Iss.GY.yis):this.N4(n._Y.Iss.GY.Sis))}mGt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.Wss+","+this.jss},{name:t+".debugger.left-button",value:this.Nss[0]},{name:t+".debugger.middle-button",value:this.Nss[1]},{name:t+".debugger.right-button",value:this.Nss[2]},{name:t+".debugger.button-4",value:this.Nss[3]},{name:t+".debugger.button-5",value:this.Nss[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.bf.xO().F5().map(t=>({name:"$"+t.cf(),value:t.WB(this.Wss,this.jss).join(", ")}))}]}}}{const wc=self.Ws;wc._Y.Iss.GY={uis(t,s){return this.Vss===t&&this.Uss===s},lis(){return!0},fts(t){return this.Nss[t]},fis(t){return this.Vss===t},wis(t){const s=this.bf.Udt(),i=s.dbt(),e=[];return this.pis()&&e.push([this.Wss,this.jss]),wc.xor(this.bf.nD().g3t(t,e,i),i)},cis(t,s,i){if(t!==this.Vss||s!==this.Uss)return!1;if(!this.pis())return!1;const e=this.Wss,h=this.jss;return this.bf.nD().g3t(i,[[e,h]],!1)},dis(t){return 2===t||this.Hss===t},yis(){return!0},Sis(){return!0},gis(){return!0},bis(){return this.Xss},ris(){return!0}}}{const bc=self.Ws,Mc=["auto","pointer","text","crosshair","move","help","wait","none"];bc._Y.Iss.drt={Mis(t){this.kss(Mc[t])},vis(t){this.Bss(t)},xis(t){this.nGt("request-pointer-lock",{unadjustedMovement:t})},Gis(){this.hGt("release-pointer-lock")}}}{const vc=self.Ws;vc._Y.Iss.prt={m2t(t){return this.Ass(t)[0]},g2t(t){return this.Ass(t)[1]},Tis(){return this.Wss},_is(){return this.jss},Iis(){return this.Yss},Cis(){return this.$ss},Ris(){return this.zss},Ais(){return this.Jss},Pis(){return this.qss}}}{const xc=self.Ws;xc._Y.Touch=class extends xc.ixt{constructor(t){super(t)}wr(){super.wr()}}}{let i=function(){return s.zL().L6()};i;const Gc=self.Ws,Tc=self.Ks;Gc._Y.Touch.bIt=class extends Gc.jxt{constructor(t){super(t)}wr(){super.wr()}_xt(){}Ixt(){return self.Eis}};let s=null;self.Eis=class extends self.JL{constructor(t){super(t),(s=t).pk().FO().OO=this}requestPermission(t){Tc.Re(t);const s=i();if("orientation"===t)return s.Fis(0);if("motion"===t)return s.Fis(1);throw new Error("invalid type")}}}{const C=self.Ws;C._Y.Touch.Instance=class extends C.Jxt{constructor(t,s){super(t,"touch"),this.Dis=new Map,this.Ois=!1,this.kis=!1,this.Lis=0,this.Bis=0,this.Nis=0,this.Wis=0,this.jis=0,this.Vis=0,this.Uis=0,this.His=0,this.zis=0,this.Jis=0,this.qis=0,this.Xis=0,this.Yis=0,this.$is=0,this.Kis=0,this.Zis=0,this.Uss=0,this.Qis=[],s&&(this.Ois=s[0]),this.iGt("permission-result",t=>this.tes(t));const i=this.pk().Qf();this.P0=new C.C0(C.v0.I0(i,"pointerdown",t=>this.tis(t.data)),C.v0.I0(i,"pointermove",t=>this.Qss(t.data)),C.v0.I0(i,"pointerup",t=>this.sis(t.data,!1)),C.v0.I0(i,"pointercancel",t=>this.sis(t.data,!0)),C.v0.I0(i,"deviceorientation",t=>this.ses(t.data)),C.v0.I0(i,"deviceorientationabsolute",t=>this.ies(t.data)),C.v0.I0(i,"devicemotion",t=>this.ees(t.data)),C.v0.I0(i,"tick2",t=>this.H$()))}wr(){this.Dis.clear(),super.wr()}tis(t){if("mouse"===t.pointerType){if(!this.Ois)return;this.kis=!0}const s=t.pointerId;if(!this.Dis.has(s)){const i=t.pageX-this.bf.jB(),e=t.pageY-this.bf.VB(),h=performance.now(),r=this.Dis.size,n=(this.qis=r,this.Xis=s,C.Sr(C._Y.Touch.hes));n.jCt(h,i,e,s,r),this.Dis.set(s,n),this.N4(C._Y.Touch.GY.res),this.N4(C._Y.Touch.GY.nes),this.$is=i,this.Kis=e,this.Uss=0,this.N4(C._Y.Touch.GY.oes)}}Qss(t){if("mouse"!==t.pointerType||this.kis){const s=this.Dis.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.FE()<2)){const e=t.pageX-this.bf.jB(),h=t.pageY-this.bf.VB();s.w7(i,e,h,t.width,t.height,t.pressure)}}}}sis(t,s){if("mouse"===t.pointerType){if(!this.kis)return;this.kis=!1}const i=performance.now(),e=t.pointerId,h=this.Dis.get(e);if(h){if(this.qis=h.aes(),this.Xis=h.m8(),!s){const r=t.pageX-this.bf.jB(),n=t.pageY-this.bf.VB();this.$is=r,this.Kis=n,this.Uss=1,this.N4(C._Y.Touch.GY.oes)}if(this.N4(C._Y.Touch.GY.les),this.N4(C._Y.Touch.GY.ues),!s){const o=h.ces(i);"single-tap"===o?(this.N4(C._Y.Touch.GY.fes),this.$is=h.jM(),this.Kis=h.HM(),this.N4(C._Y.Touch.GY.des)):"double-tap"===o&&(this.N4(C._Y.Touch.GY.pes),this.$is=h.jM(),this.Kis=h.HM(),this.N4(C._Y.Touch.GY.mes))}h.wr(),this.Dis.delete(e)}}Fis(i){return this.nGt("request-permission",{type:i}),new Promise((t,s)=>{this.Qis.push({type:i,resolve:t,reject:s})})}tes(t){const s=t.result,i=t.type,e=(this.Yis=i,this.Qis.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.Qis=this.Qis.filter(t=>t.type!==i),s?(this.N4(C._Y.Touch.GY.ges),0===i?this.bf.v4t():this.bf.x4t()):this.N4(C._Y.Touch.GY.yes)}ses(t){"number"==typeof t.webkitCompassHeading?this.Lis=t.webkitCompassHeading:t.absolute&&(this.Lis=t.alpha),this.Bis=t.alpha,this.Nis=t.beta,this.Wis=t.gamma}ies(t){this.Lis=t.alpha}ees(t){const s=t.acceleration,i=(s&&(this.jis=s.x,this.Vis=s.y,this.Uis=s.z),t.accelerationIncludingGravity);i&&(this.His=i.x,this.zis=i.y,this.Jis=i.z)}H$(){let t=performance.now(),s=0;for(const i of this.Dis.values())i.FE()<=t-50&&i.Ses(t),i.wes(t)&&(this.qis=i.aes(),this.Xis=i.m8(),this.Zis=s,this.N4(C._Y.Touch.GY.bes),this.$is=i.jM(),this.Kis=i.HM(),this.N4(C._Y.Touch.GY.Mes),this.Zis=0),++s}ves(t){t=Math.floor(t);for(const s of this.Dis.values()){if(0===t)return s;--t}return null}xes(t,s){return 0<=t&&0<=s&&t<this.bf.aBt()&&s<this.bf.lBt()}mGt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.Dis.values()].map(t=>({name:"$"+t.m8(),value:t.jM()+", "+t.HM()}))}]}}}{const _c=self.Ws;_c._Y.Touch.GY={nes(){return!0},ues(){return!0},Ges(){return 0<this.Dis.size},oes(t,s){return!!t&&s===this.Uss&&!!this.xes(this.$is,this.Kis)&&this.bf.nD().g3t(t,[[this.$is,this.Kis]],!1)},Tes(t){if(!t)return!1;const s=this.bf.Udt(),i=s.dbt(),e=[...this.Dis.values()].filter(t=>this.xes(t.jM(),t.HM())).map(t=>[t.jM(),t.HM()]);return _c.xor(this.bf.nD().g3t(t,e,i),i)},_es(t,s,i){const e=this.ves(t);return!!e&&_c.compare(e.nW(),s,i)},Ies(){return!0},Ces(){return!0},Res(t,s,i){this.bf.v4t();let e;return e=0===t?this.Bis:1===t?this.Nis:this.Wis,_c.compare(e,s,i)},Aes(t,s,i){this.bf.x4t();let e;return e=0===t?this.His:1===t?this.zis:2===t?this.Jis:3===t?this.jis:4===t?this.Vis:this.Uis,_c.compare(e,s,i)},res(t){return(t=Math.floor(t))===this.qis},les(t){return(t=Math.floor(t))===this.qis},Pes(t){return t=Math.floor(t),this.Dis.size>=t+1},bes(){return!0},fes(){return!0},pes(){return!0},Mes(t){return!!t&&!!this.xes(this.$is,this.Kis)&&this.bf.nD().g3t(t,[[this.$is,this.Kis]],!1)},des(t){return!!t&&!!this.xes(this.$is,this.Kis)&&this.bf.nD().g3t(t,[[this.$is,this.Kis]],!1)},mes(t){return!!t&&!!this.xes(this.$is,this.Kis)&&this.bf.nD().g3t(t,[[this.$is,this.Kis]],!1)},ges(t){return this.Yis===t},yes(t){return this.Yis===t}}}{const Ic=self.Ws;Ic._Y.Touch.drt={Ees(t){this.Fis(t)}}}{const Cc=self.Ws;Cc._Y.Touch.prt={Fes(){return this.Dis.size},m2t(t){const s=this.ves(this.Zis);return s?s.Des(this.bf.UO(),t,!0):0},g2t(t){const s=this.ves(this.Zis);return s?s.Des(this.bf.UO(),t,!1):0},Oes(t,s){const i=this.ves(t);return i?i.Des(this.bf.UO(),s,!0):0},kes(t,s){const i=this.ves(t);return i?i.Des(this.bf.UO(),s,!1):0},Les(t,s){const i=this.Dis.get(t);return i?i.Des(this.bf.UO(),s,!0):0},Bes(t,s){const i=this.Dis.get(t);return i?i.Des(this.bf.UO(),s,!1):0},Tis(){const t=this.ves(0);return t?t.jM():0},_is(){const t=this.ves(0);return t?t.HM():0},Nes(t){const s=this.ves(t);return s?s.jM():0},Wes(t){const s=this.ves(t);return s?s.HM():0},jes(t){const s=this.Dis.get(t);return s?s.jM():0},Ves(t){const s=this.Dis.get(t);return s?s.HM():0},Ues(t){const s=this.ves(t);return s?s.nW():0},Hes(t){const s=this.Dis.get(t);return s?s.nW():0},zes(t){const s=this.ves(t);return s?Cc.Cr(s.GetAngle()):0},Jes(t){const s=this.Dis.get(t);return s?Cc.Cr(s.GetAngle()):0},qes(){return this.bf.v4t(),this.Lis},Xes(){return this.bf.v4t(),this.Bis},Yes(){return this.bf.v4t(),this.Nis},$es(){return this.bf.v4t(),this.Wis},Kes(){return this.bf.x4t(),this.His},Zes(){return this.bf.x4t(),this.zis},Qes(){return this.bf.x4t(),this.Jis},ths(){return this.bf.x4t(),this.jis},shs(){return this.bf.x4t(),this.Vis},ihs(){return this.bf.x4t(),this.Uis},ehs(){return this.qis},hhs(){return this.Xis},rhs(t){const s=this.Dis.get(t);return s?s.Pm():0},nhs(t){const s=this.Dis.get(t);return s?s.jm():0},ohs(t){const s=this.Dis.get(t);return s?s.ahs():0}}}{let n=self.Ws,s=-1e3,i=-1e3,e=-1e4;n._Y.Touch.hes=class extends n.dr{constructor(){super(),this.lhs=0,this.VT=0,this.PLt=0,this.P3=0,this.uhs=0,this.chs=0,this.fhs=0,this.al=0,this.ll=0,this.dhs=0,this.phs=0,this.pg=0,this.mg=0,this.mhs=0,this.ghs=!1,this.yhs=!1}wr(){}jCt(t,s,i,e,h){this.lhs=e,this.VT=h,this.P3=t,this.uhs=t,this.PLt=t,this.chs=s,this.fhs=i,this.al=s,this.ll=i,this.dhs=s,this.phs=i}w7(t,s,i,e,h,r){this.uhs=this.P3,this.P3=t,this.dhs=this.al,this.phs=this.ll,this.al=s,this.ll=i,this.pg=e,this.mg=h,this.mhs=r,!this.yhs&&15<=n.Rr(this.chs,this.fhs,this.al,this.ll)&&(this.yhs=!0)}m8(){return this.lhs}aes(){return this.VT}FE(){return this.P3}Ses(t){this.uhs=t}jM(){return this.al}HM(){return this.ll}nW(){const t=n.Rr(this.al,this.ll,this.dhs,this.phs),s=(this.P3-this.uhs)/1e3;return 0<s?t/s:0}GetAngle(){return n.Pr(this.dhs,this.phs,this.al,this.ll)}Pm(){return this.pg}jm(){return this.mg}ahs(){return this.mhs}wes(t){return!this.ghs&&500<=t-this.PLt&&!this.yhs&&n.Rr(this.chs,this.fhs,this.al,this.ll)<15&&(this.ghs=!0)}ces(t){return!this.ghs&&t-this.PLt<=333&&!this.yhs&&n.Rr(this.chs,this.fhs,this.al,this.ll)<15?t-e<=666&&n.Rr(s,i,this.al,this.ll)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.al,i=this.ll,e=t,"single-tap"):""}Des(t,s,i){if(void 0===s){const e=t.XO(0);return e.Aq(this.al,this.ll)[i?0:1]}{const h=t.JO(s);return h?h.WB(this.al,this.ll)[i?0:1]:0}}}}{const Rc=self.Ws;Rc.rlt.Shs=class extends Rc.eTt{constructor(t){super(t)}wr(){super.wr()}}}{const Ac=self.Ws;Ac.rlt.Shs.bIt=class extends Ac.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const Pc=self.Ws,Ec=self.Ks,Fc=self.V6,Dc=2*Math.PI,Oc=Math.PI/2,kc=3*Math.PI/2,Lc=[0,1,8,3,4,2,5,6,9,7],Bc=(Pc.rlt.Shs.Instance=class extends Pc.uTt{constructor(t,s){super(t),this.whs=0,this.bhs=0,this.Mhs=0,this.vhs=0,this.xhs=0,this.Uyt=!0,this.Ghs=0,this.Ths=0,this._hs=0,this.Ihs=0,this.Chs=0,this.Rhs=0,this.pSt=0,this.Ahs=0,this.Phs=0,this.Ehs=0,this.Fhs=0,s&&(this.bhs=Lc[s[0]],this.Mhs=s[1],this.Ihs=this.bf.vO()*s[3],this.Ghs=s[2],this.vhs=s[2],this.vhs+=this.Ihs,this.Ths=s[4],0!==this.vhs&&(this.Chs=this.bf.vO()*s[5],this.whs=s[4]/this.vhs*Dc,this.whs+=this.Chs/this.vhs*Dc),this.Rhs=this.bf.vO()*s[7],this._hs=s[6],this.xhs=s[6],this.xhs+=this.Rhs,this.Uyt=!!s[8]),5===this.bhs&&(this.xhs=Pc.Ir(this.xhs)),this.jCt(),this.Uyt&&this.cGt()}wr(){super.wr()}tv(){return{i:this.whs,e:this.Uyt,mv:this.bhs,w:this.Mhs,p:this.vhs,mag:this.xhs,iv:this.pSt,iv2:this.Ahs,r:this.Fhs,lkv:this.Phs,lkv2:this.Ehs}}sv(t){this.whs=t.i,this.kvt(t.e),this.bhs=t.mv,this.Mhs=t.w,this.vhs=t.p,this.xhs=t.mag,this.pSt=t.iv,this.Ahs=t.iv2,this.Fhs=t.r,this.Phs=t.lkv,this.Ehs=t.lkv2}jCt(){const t=this.Ci.zO();switch(this.bhs){case 0:this.pSt=t.jM();break;case 1:this.pSt=t.HM();break;case 2:this.pSt=t.Pm(),this.Fhs=t.jm()/t.Pm();break;case 3:this.pSt=t.Pm();break;case 4:this.pSt=t.jm();break;case 5:this.pSt=t.GetAngle();break;case 6:this.pSt=t.hP();break;case 7:this.pSt=0;break;case 8:this.pSt=t.jM(),this.Ahs=t.HM();break;case 9:this.pSt=t.JM()}this.Phs=this.pSt,this.Ehs=this.Ahs}Dhs(t){switch(t%=Dc,this.Mhs){case 0:return Math.sin(t);case 1:return t<=Oc?t/Oc:t<=kc?1-2*(t-Oc)/Math.PI:(t-kc)/Oc-1;case 2:return 2*t/Dc-1;case 3:return-2*t/Dc+1;case 4:return t<Math.PI?-1:1}return 0}KK(){const t=this.bf.ZD(this.Ci);this.Uyt&&0!==t&&(0===this.vhs?this.whs=0:this.whs=(this.whs+t/this.vhs*Dc)%Dc,this.Ohs())}Ohs(){const t=this.Ci.zO();switch(this.bhs){case 0:t.jM()!==this.Phs&&(this.pSt+=t.jM()-this.Phs),t.VM(this.pSt+this.Dhs(this.whs)*this.xhs),this.Phs=t.jM();break;case 1:t.HM()!==this.Phs&&(this.pSt+=t.HM()-this.Phs),t.zM(this.pSt+this.Dhs(this.whs)*this.xhs),this.Phs=t.HM();break;case 2:t.Bm(this.pSt+this.Dhs(this.whs)*this.xhs),t.Em(t.Pm()*this.Fhs);break;case 3:t.Bm(this.pSt+this.Dhs(this.whs)*this.xhs);break;case 4:t.Em(this.pSt+this.Dhs(this.whs)*this.xhs);break;case 5:t.GetAngle()!==this.Phs&&(this.pSt=Pc._r(this.pSt+(t.GetAngle()-this.Phs))),t.G5(this.pSt+this.Dhs(this.whs)*this.xhs),this.Phs=t.GetAngle();break;case 6:t.nP(this.pSt+this.Dhs(this.whs)*this.xhs/100);break;case 8:t.jM()!==this.Phs&&(this.pSt+=t.jM()-this.Phs),t.HM()!==this.Ehs&&(this.Ahs+=t.HM()-this.Ehs),t.VM(this.pSt+Math.cos(t.GetAngle())*this.Dhs(this.whs)*this.xhs),t.zM(this.Ahs+Math.sin(t.GetAngle())*this.Dhs(this.whs)*this.xhs),this.Phs=t.jM(),this.Ehs=t.HM();break;case 9:t.qM(this.pSt+this.Dhs(this.whs)*this.xhs)}t.mN()}khs(t,s){}Lhs(t){this.vhs=t}Bhs(){return this.vhs}Nhs(t){this.xhs=t}Whs(t){5===this.bhs&&(t=Pc.Ir(t)),this.Nhs(t)}jhs(){return this.xhs}Vhs(){let t=this.jhs();return 5===this.bhs?Pc.Cr(t):t}Uhs(t){5===this.bhs&&5!==t&&(this.xhs=Pc.Cr(this.xhs)),this.bhs=t,this.jCt()}Hhs(){return this.bhs}zhs(t){this.Mhs=t}Jhs(){return this.Mhs}qhs(t){this.whs=Pc.Tr(t,0,2*Math.PI),this.Ohs()}Xhs(){return this.whs}kvt(t){this.Uyt=!!t,this.Uyt?this.cGt():this.Yxt()}Bvt(){return this.Uyt}Krt(t){switch(t){case 0:return this.bhs;case 1:return this.Mhs;case 2:return this.Ghs;case 6:return this._hs;case 8:return this.Uyt}}ent(t,s){switch(t){case 0:this.bhs=Lc[s],this.jCt();break;case 1:this.Mhs=s;break;case 2:this.Ghs=s,this.vhs=this.Ghs+this.Ihs,this.Uyt||(0!==this.vhs?(this.whs=this.Ths/this.vhs*Dc,this.whs+=this.Chs/this.vhs*Dc):this.whs=0);break;case 6:this._hs=s,this.xhs=this._hs+this.Rhs,5===this.bhs&&(this.xhs=Pc.Ir(this.xhs));break;case 8:this.Uyt=!!s}}mGt(){const t="behaviors.sin";return[{title:"$"+this.q6().cf(),properties:[{name:t+".properties.enabled.name",value:this.Bvt(),Rjt:t=>this.kvt(t)},{name:t+".properties.period.name",value:this.Bhs(),Rjt:t=>this.Lhs(t)},{name:t+".properties.magnitude.name",value:this.Vhs(),Rjt:t=>this.Whs(t)},{name:t+".debugger.value",value:this.Dhs(this.Xhs())*this.Vhs()}]}]}Ixt(){return self.Yhs}},new WeakMap),Nc=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],Wc=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.Yhs=class extends Fc{constructor(){super(),Bc.set(this,Fc.i4().L6())}set $hs(t){Ec.Te(t),Bc.get(this).Lhs(t)}get $hs(){return Bc.get(this).Bhs()}set Khs(t){Ec.Te(t),Bc.get(this).Nhs(t)}get Khs(){return Bc.get(this).jhs()}set Zhs(t){Bc.get(this).qhs(t)}get Zhs(){return Bc.get(this).Xhs()}set Qhs(t){Ec.Re(t);const s=Nc.indexOf(t);if(-1===s)throw new Error("invalid movement");Bc.get(this).Uhs(s)}get Qhs(){return Nc[Bc.get(this).Hhs()]}set trs(t){Ec.Re(t);const s=Wc.indexOf(t);if(-1===s)throw new Error("invalid wave");Bc.get(this).zhs(s)}get trs(){return Wc[Bc.get(this).Jhs()]}get value(){const t=Bc.get(this);return t.Dhs(t.Xhs())*t.jhs()}srs(){Bc.get(this).jCt()}set isEnabled(t){Bc.get(this).kvt(!!t)}get isEnabled(){return Bc.get(this).Bvt()}}}{const jc=self.Ws;jc.rlt.Shs.GY={nc(){return this.Bvt()},irs(t){return this.Hhs()===t},ers(t,s){return jc.compare(this.Bhs(),t,s)},hrs(t,s){return jc.compare(this.Vhs(),t,s)},rrs(t){return this.Jhs()===t}}}{const Vc=self.Ws;Vc.rlt.Shs.drt={O2t(t){this.kvt(0!==t)},nrs(t){this.Lhs(t)},ors(t){this.Whs(t)},ars(t){this.Uhs(t)},lrs(t){this.Mhs=t},urs(t){const s=2*Math.PI;this.qhs(t*s%s)},crs(){this.jCt()}}}{const Uc=self.Ws;Uc.rlt.Shs.prt={frs(){return this.Xhs()/(2*Math.PI)},drs(){return this.Bhs()},prs(){return this.Vhs()},mrs(){return this.Dhs(this.Xhs())*this.Vhs()}}}{let h=function(i,e,t){const h=i.Sbt(),r=e.Sbt();if(t){const s=h.get(p),n=(s&&s.delete(e.yJ()),r.get(p));n&&n.delete(i.yJ())}else{let t=h.get(p),s=(t||(t=new Set,h.set(p,t)),r.get(p));s||(s=new Set,r.set(p,s)),t.add(e.yJ()),s.add(i.yJ())}},f=(h,self.Ws),s=self.Ks,i=null,e=null,r=[],d=null,n=null,p="Physics_DisabledCollisions";f.rlt.grs=class extends f.eTt{constructor(t){super(t),(n=this).yrs=null,this.Srs=10,this.wrs=.02,this.brs=null,this.Mrs=-1,this.vrs=1,this.xrs=8,this.Grs=3,this.Trs=!0,this.bf.rk(this._rs())}Ixt(){return self.Irs}async _rs(){const t=await this.bf.eD().bk("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{d=t,this.Crs(),s()})})}Crs(){const h=this.bf.nD(),t=(i=f.rlt.grs.F_t(0,0),e=f.rlt.grs.F_t(0,0),this.yrs=new d.b2World(f.rlt.grs.Rrs(0,this.Srs),!0),new d.JSContactListener),s=(t.BeginContact=t=>{const s=d.wrapPointer(t,d.b2Contact),i=f.rlt.grs.Instance.Ars(s.GetFixtureA().GetBody()),e=f.rlt.grs.Instance.Ars(s.GetFixtureB().GetBody());h.o3t(i.Y6(),e.Y6())},t.EndContact=()=>{},t.PreSolve=()=>{},t.PostSolve=()=>{},this.yrs.SetContactListener(t),new d.JSContactFilter);s.ShouldCollide=(t,s)=>{if(this.Trs)return!0;const i=d.wrapPointer(t,d.b2Fixture),e=d.wrapPointer(s,d.b2Fixture),h=f.rlt.grs.Instance.Ars(i.GetBody()),r=f.rlt.grs.Instance.Ars(e.GetBody()),n=h.Y6().QB(),o=r.Y6().QB(),a=n.yJ(),l=o.yJ(),u=n.Sbt().get(p);if(u&&u.has(l))return!1;const c=o.Sbt().get(p);return!c||!c.has(a)},this.yrs.SetContactFilter(s),this.brs=new d.b2WorldManifold}wr(){super.wr()}Prs(){return d}Ers(){return this.yrs}Frs(){return this.wrs}Drs(){return this.vrs}Ors(t){this.vrs=t}krs(t){this.Mrs=t}Lrs(){return this.Mrs}Brs(t){this.xrs=Math.max(t,1)}Nrs(){return this.xrs}Wrs(t){this.Grs=Math.max(t,1)}jrs(){return this.Grs}Vrs(t,s){this.Brs(t),this.Wrs(s)}T9t(){return this.Srs}SetGravity(t){t!==this.Srs&&(this.yrs.SetGravity(f.rlt.grs.Rrs(0,t)),this.Srs=t,this.Urs())}Urs(){for(const t of this.r5()){const s=f.rlt.grs.Instance.Hrs(t);if(s){const i=s.GetBody();i&&i.SetAwake(!0)}}}zrs(){this.Trs=!1}Jrs(t,s,i){if(i=!!i,t&&s){if(s.lJ())for(const e of s.ygt())h(t,e,i);else h(t,s,i);this.zrs()}}GetWorldManifold(){return this.brs}static qrs(){return p}static F_t(t,s){if(r.length){const i=r.pop();return i.set_x(t),i.set_y(s),i}{const e=d.b2Vec2;return new e(t,s)}}static Xrs(t){r.push(t)}static Rrs(t,s){return i.set_x(t),i.set_y(s),i}static Yrs(t,s){return e.set_x(t),e.set_y(s),e}static $rs(s){let t=d.b2PolygonShape,i=new t,e=d._malloc(8*s.length),h=0;for(let t=0;t<s.length;++t)d.HEAPF32[e+h>>2]=s[t].get_x(),d.HEAPF32[e+(h+4)>>2]=s[t].get_y(),h+=8;const r=d.wrapPointer(e,d.b2Vec2);return i.Set(r,s.length),d._free(e),i}};const Hc=["fixed","variable"];self.Irs=class extends self.Z6{constructor(){super()}set Krs(t){s.Te(t),n.SetGravity(t)}get Krs(){return n.T9t()}set Zrs(t){const s=Hc.indexOf(t);if(s<0)throw new Error("invalid stepping mode");n.Ors(Hc[s])}get Zrs(){return Hc[n.Drs()]}set Qrs(t){s.Te(t),n.Brs(t)}get Qrs(){return n.Nrs()}set tns(t){s.Te(t),n.Wrs(t)}get tns(){return n.jrs()}sns(t,s,i){const e=n.pk(),h=e.zk(t),r=e.zk(s);i=!!i,n.Jrs(h,r,i)}}}{const zc=self.Ws;zc.rlt.grs.bIt=class extends zc.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{let u=function(t,s){const i=P.get(t).pk();return i.HO(s)};u;const R=self.Ws,A=self.Ks,Jc=self.V6,qc=new WeakMap,Xc=new WeakMap,Yc=new WeakMap,$c=R.rlt.grs.Rrs,Kc=R.rlt.grs.Yrs,Zc=R.Sr(R.Rect),Qc=R.Sr(R.ou),P=(R.rlt.grs.Instance=class extends R.uTt{constructor(t,s){super(t);const i=this.H6(),e=this.zO(),h=(this.ins=i.Prs(),this.yrs=i.Ers(),this.wrs=i.Frs(),this.ens=!1,this.hns=0,this.rns=0,this.nns=!1,this.ons=1,this.ans=.5,this.lns=.2,this.uns=0,this.cns=.01,this.fns=!1,this.Uyt=!0,this.dns=null,this.pns=[],this.mns=[],this.gns=[],this.yns=new Set,this.Sns=e.jM(),this.wns=e.HM(),this.bns=e.GetAngle(),this.XHt=0,this.YHt=0,this.Mns=!1,s&&(this.ens=!!s[0],this.hns=s[1],this.nns=!!s[2],this.ons=s[3],this.ans=s[4],this.lns=s[5],this.uns=s[6],this.cns=s[7],this.fns=!!s[8],this.Uyt=!!s[9]),this.bf.Qf());this.P0=new R.C0(R.v0.I0(h,"instancedestroy",t=>this.PZt(t.X6)),R.v0.I0(h,"beforeload",()=>this.Z$()),R.v0.I0(h,"afterload",()=>this.tK())),Xc.set(this.Ci,this),this.Uyt&&this.cGt()}pTt(){this.vns()}wr(){this.xns(),R.Hn(this.gns),this.yns.clear(),this.dns&&(this.Gns(),this.yrs.DestroyBody(this.dns),this.dns=null),super.wr()}Tns(t){if(this.dns){const s=this.dns.CreateFixture(t);return this.pns.push(s),s}}Gns(){if(this.dns){for(const t of this.pns)this.dns.DestroyFixture(t);R.Hn(this.pns)}}_ns(){const t=this.zO();return t.R6()?(t.VPt(Zc,Qc,!1),Qc):t.TN()}Ins(t){this.ins.destroy(t)}vns(){if(this.Uyt){const t=this.ins.b2FixtureDef,i=this.ins.b2BodyDef,e=this.zO(),s=e.iEt();if(this.rns=this.hns,s||this.Ci.KCt()||0!==this.rns||(this.rns=1),!this.dns){const o=new i;o.set_type(this.ens?0:2);let t=e.jM()*this.wrs,s=e.HM()*this.wrs;if(2===this.rns){const a=this._ns();t=a.Nl()*this.wrs,s=a.Wl()*this.wrs}o.set_position(Kc(t,s)),o.set_angle(e.GetAngle()),o.set_fixedRotation(this.nns),o.set_linearDamping(this.uns),o.set_angularDamping(this.cns),o.set_bullet(this.fns),this.dns=this.yrs.CreateBody(o),this.Ins(o),qc.set(this.dns,this)}this.Gns();const h=new t,r=(h.set_density(this.ons),h.set_friction(this.ans),h.set_restitution(this.lns),Math.max(Math.abs(e.Pm()),1)),n=Math.max(Math.abs(e.jm()),1);0===this.rns?this.Ci.KCt()?this.Cns(h):this.Rns(h,r,n):1===this.rns?this.Ans(h,e,r,n):this.Pns(h,r,n),this.XHt=e.Pm(),this.YHt=e.jm(),e.nEt(!1),this.Ins(h)}}Ans(t,s,i,e){let h=this.ins.b2PolygonShape,r=new h,n=i*this.wrs,o=e*this.wrs,a=s.GW(),l=s._W();s.Pm()<0&&(a=1-a),s.jm()<0&&(l=1-l);const u=(.5-a)*n,c=(.5-l)*o,f=R.rlt.grs.F_t(u,c);r.SetAsBox(n/2,o/2,f,0),t.set_shape(r),this.Tns(t),this.Ins(r),R.rlt.grs.Xrs(f)}Pns(t,s,i){const e=this.ins.b2CircleShape,h=new e;h.set_m_radius(Math.min(s,i)*this.wrs*.5),t.set_shape(h),this.Tns(t),this.Ins(h)}Rns(t,s,i){const e=this.zO(),h=e.Pm()<0,r=e.jm()<0,n=this.wrs,o=e.rEt(h?-s:s,r?-i:i,0),a=o.Ju(),l=a.length/2,u=[];for(let t=0;t<l;++t)u.push(R.rlt.grs.F_t(a[2*t],a[2*t+1]));h!=r&&u.reverse();const c=R.rlt.grs.Fns.Ens(u,s*i);for(const f of u)R.rlt.grs.Xrs(f);if(c.length)for(const d of c){for(const m of d)m.set_x(m.get_x()*n),m.set_y(m.get_y()*n);const p=R.rlt.grs.$rs(d);t.set_shape(p),this.Tns(t),this.Ins(p);for(const g of d)R.rlt.grs.Xrs(g)}else this.Ans(t,e,s,i)}Cns(e){const h=this.wrs,r=R.rlt.grs.F_t,n=R.rlt.grs.Xrs,i=[],o=(this.Ci.L6().R7t(i),[]);for(let t=0,s=i.length;t<s;++t){const a=i[t],l=a.p3t(),u=a.m3t();if(u){let i=Yc.get(u);if(!i){const c=u.Ju(),f=u.qu();for(let t=0;t<f;++t)o.push(r(c[2*t],c[2*t+1]));const d=3758096384&a.Fzt();(-2147483648==d||1073741824==d||536870912==d||-2147483648&d&&1073741824&d&&536870912&d)&&o.reverse(),i=R.rlt.grs.Fns.Ens(o,l.width()*l.height()),Yc.set(u,i);for(const p of o)n(p);R.Hn(o)}for(let t=0,s=i.length;t<s;++t){const m=i[t];for(let t=0,s=m.length;t<s;++t)o.push(r((l.Pl()+m[t].get_x())*h,(l.El()+m[t].get_y())*h));const g=R.rlt.grs.$rs(o);e.set_shape(g),this.Tns(e),this.Ins(g);for(const y of o)n(y);R.Hn(o)}}else{o.push(r(l.Pl()*h,l.El()*h)),o.push(r(l.Fl()*h,l.El()*h)),o.push(r(l.Fl()*h,l.Dl()*h)),o.push(r(l.Pl()*h,l.Dl()*h));const S=R.rlt.grs.$rs(o);e.set_shape(S),this.Tns(e),this.Ins(S)}for(const w of o)n(w);R.Hn(o)}}Dns(){this.dns&&(this.xns(),qc.delete(this.dns),this.Gns(),this.yrs.DestroyBody(this.dns),this.dns=null)}xns(){for(const t of this.mns)this.yrs.DestroyJoint(t);R.Hn(this.mns)}Ons(){for(const t of this.gns)switch(t.type){case 0:this.kns(...t.params);break;case 1:this.Lns(...t.params);break;case 2:this.Bns(...t.params);break;case 3:this.Nns(...t.params)}}Wns(t){const s=this.zO();if(-1===t)return[s.jM(),s.HM()];if(0===t&&this.dns){const i=this.dns.GetWorldCenter();return[i.get_x()/this.wrs,i.get_y()/this.wrs]}return this.Ci.xMt(t)}jns(t,s,i,e,h){if(this.Uyt&&s&&s!==this.Ci){const r=R.rlt.grs.Instance.Hrs(s);r&&r.Bvt()&&(this.gns.push({type:0,params:[t,s.f4(),i,e,h]}),this.kns(t,s.f4(),i,e,h))}}kns(t,s,i,e,h){if(this.Uyt){const r=this.bf.WO(s);if(r&&r!==this.Ci){const n=R.rlt.grs.Instance.Hrs(r);if(n&&n.Bvt()){n.yns.add(this.Ci),this.Vns(!1),n.Vns(!1);const[o,a]=this.Wns(t),[l,u]=r.xMt(i),c=o-l,f=a-u,d=this.ins.b2DistanceJointDef,p=this.wrs,m=new d;m.Initialize(this.dns,n.GetBody(),$c(o*p,a*p),Kc(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(h),this.mns.push(this.yrs.CreateJoint(m)),this.Ins(m)}}}}Uns(t,s){if(this.Uyt&&s&&s!==this.Ci){const i=R.rlt.grs.Instance.Hrs(s);i&&i.Bvt()&&(this.gns.push({type:1,params:[t,s.f4()]}),this.Lns(t,s.f4()))}}Lns(t,s){if(this.Uyt){const i=this.bf.WO(s);if(i&&i!==this.Ci){const e=R.rlt.grs.Instance.Hrs(i);if(e&&e.Bvt()){e.yns.add(this.Ci),this.Vns(!1),e.Vns(!1);const[h,r]=this.Wns(t),n=this.ins.b2RevoluteJointDef,o=this.wrs,a=new n;a.Initialize(this.dns,e.GetBody(),$c(h*o,r*o)),this.mns.push(this.yrs.CreateJoint(a)),this.Ins(a)}}}}Hns(t,s,i,e){if(this.Uyt&&s&&s!==this.Ci){const h=R.rlt.grs.Instance.Hrs(s);h&&h.Bvt()&&(i=R.Cr(i),e=R.Cr(e),this.gns.push({type:2,params:[t,s.f4(),i,e]}),this.Bns(t,s.f4(),i,e))}}Bns(t,s,i,e){if(this.Uyt){const h=this.bf.WO(s);if(h&&h!==this.Ci){const r=R.rlt.grs.Instance.Hrs(h);if(r&&r.Bvt()){r.yns.add(this.Ci),this.Vns(!1),r.Vns(!1);const[n,o]=this.Wns(t),a=this.ins.b2RevoluteJointDef,l=this.wrs,u=new a;u.Initialize(this.dns,r.GetBody(),$c(n*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(R.Ir(i)),u.set_upperAngle(R.Ir(e)),this.mns.push(this.yrs.CreateJoint(u)),this.Ins(u)}}}}zns(t,s,i,e,h,r,n,o,a){if(this.Uyt&&s&&s!==this.Ci){const l=R.rlt.grs.Instance.Hrs(s);l&&l.Bvt()&&(i=R.Cr(i),o=R.Cr(o),this.gns.push({type:3,params:[t,s.f4(),i,e,h,r,n,o,a]}),this.Nns(t,s.f4(),i,e,h,r,n,o,a))}}Nns(t,s,i,e,h,r,n,o,a){if(this.Uyt){const l=this.bf.WO(s);if(l&&l!==this.Ci){const u=R.rlt.grs.Instance.Hrs(l);if(u&&u.Bvt()){u.yns.add(this.Ci),this.Vns(!1),u.Vns(!1);const[c,f]=this.Wns(t),d=(i=R.Ir(i),Math.cos(i)),p=Math.sin(i),m=this.ins.b2PrismaticJointDef,g=this.wrs,y=new m;y.Initialize(this.dns,u.GetBody(),$c(c*g,f*g),Kc(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(h*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!n),y.set_motorSpeed(R.Ir(o)),y.set_maxMotorForce(a),this.mns.push(this.yrs.CreateJoint(y)),this.Ins(y)}}}}Jns(){this.Uyt&&(this.xns(),R.Hn(this.gns),this.yns.clear())}qns(){for(const t of this.yns){const s=R.rlt.grs.Instance.Hrs(t);if(!s||!s.Bvt())return;s.Xns(this.Ci)}this.yns.clear()}PZt(t){this.Xns(t)}Xns(t){let i=t.f4(),e=0;for(let t=0,s=this.gns.length;t<s;++t)this.gns[e]=this.gns[t],e<this.mns.length&&(this.mns[e]=this.mns[t]),this.gns[t].params[1]===i?t<this.mns.length&&this.yrs.DestroyJoint(this.mns[t]):++e;R.Un(this.gns,e),e<this.mns.length&&R.Un(this.mns,e),this.yns.delete(t)}GetBody(){return this.dns}static Ars(t){return qc.get(t)||null}static Hrs(t){return Xc.get(t)||null}tv(){const t={e:this.Uyt,im:this.ens,pr:this.nns,d:this.ons,fr:this.ans,re:this.lns,ld:this.uns,ad:this.cns,b:this.fns,mcj:this.gns};if(this.Uyt){const s=this.dns.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.dns.GetAngularVelocity()}return t}Z$(){this.xns(),R.Hn(this.gns),this.yns.clear()}sv(t){this.Dns(),this.Uyt=t.e,t.hasOwnProperty("im")&&(this.ens=!!t.im),this.nns=t.pr,this.ons=t.d,this.ans=t.fr,this.lns=t.re,this.uns=t.ld,this.cns=t.ad,this.fns=t.b,this.gns=t.mcj;const s=this.zO();this.Sns=s.jM(),this.wns=s.HM(),this.bns=s.GetAngle(),this.XHt=s.Pm(),this.YHt=s.jm(),this.Uyt&&(this.vns(),this.dns.SetLinearVelocity($c(t.vx,t.vy)),this.dns.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.dns.SetAwake(!0),this.gns=t.mcj),this.Uyt?this.cGt():this.Yxt()}tK(){this.Uyt&&this.Ons()}KK(){if(this.Uyt){let t=this.bf,i=this.H6(),e=0;0===i.Drs()?e=t.hO()/60:(e=t.ZD(this.Ci))>1/30&&(e=1/30);const h=t.WBt();if(h>i.Lrs()&&0<t.hO()){let t=this.bf.e$(),s=0;t&&(s=performance.now()),0!==e&&this.yrs.Step(e,i.Nrs(),i.jrs()),this.yrs.ClearForces(),t&&self.C3Debugger.AddPhysicsTime(performance.now()-s),i.krs(h)}this.Vns(!0)}}Vns(t){let s=this.Ci,i=s.zO(),e=this.wrs,h=(i.Pm()===this.XHt&&i.jm()===this.YHt&&!i.fEt()||this.vns(),this.dns),r=i.jM(),n=i.HM(),o=r-this.Sns,a=n-this.wns,l=.001<Math.abs(o)||.001<Math.abs(a),u=i.GetAngle()!==this.bns,c=r,f=n;if(2===this.rns){const y=this._ns();c=y.Nl(),f=y.Wl()}l?(u?h.SetTransform($c(c*e,f*e),i.GetAngle()):h.SetTransform($c(c*e,f*e),h.GetAngle()),t&&(h.SetLinearVelocity($c(o,a)),this.Mns=!0),h.SetAwake(!0)):t&&this.Mns&&(this.Mns=!1,h.SetLinearVelocity($c(0,0)),h.SetTransform($c(c*e,f*e),h.GetAngle())),!l&&u&&(h.SetTransform(h.GetPosition(),i.GetAngle()),h.SetAwake(!0));const d=h.GetPosition(),p=d.get_x()/e,m=d.get_y()/e,g=h.GetAngle();if((p!==i.jM()||m!==i.HM()||g!==i.GetAngle())&&(i.gN(p,m),i.G5(g),i.mN(),2===this.rns)){const S=this._ns(),w=S.Nl()-i.jM(),b=S.Wl()-i.HM();0==w&&0==b||(i.wN(-w,-b),i.mN())}this.Sns=i.jM(),this.wns=i.HM(),this.bns=i.GetAngle()}Krt(t){switch(t){case 2:return this.Yns();case 3:return this.$ns();case 4:return this.Kns();case 5:return this.Zns();case 6:return this.Qns();case 7:return this.tos();case 8:return this.ios();case 9:return this.Bvt()}}ent(t,s){switch(t){case 2:this.eos(s);break;case 3:this.hos(s);break;case 4:this.ros(s);break;case 5:this.nos(s);break;case 6:this.oos(s);break;case 7:this.aos(s);break;case 8:this.los(s);break;case 9:this.kvt(s)}}kvt(t){t=!!t,this.Uyt&&!t?(this.qns(),this.Dns(),this.Uyt=!1,this.Yxt()):!this.Uyt&&t&&(this.Uyt=!0,this.vns(),this.cGt())}Bvt(){return this.Uyt}mGt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.Bvt(),Rjt:t=>this.kvt(t)},{name:t+".properties.immovable.name",value:this.uos(),Rjt:t=>this.fos(t)},{name:t+".properties.density.name",value:this.$ns(),Rjt:t=>this.hos(t)},{name:t+".properties.friction.name",value:this.Kns(),Rjt:t=>this.ros(t)},{name:t+".properties.elasticity.name",value:this.Zns(),Rjt:t=>this.nos(t)},{name:t+".properties.linear-damping.name",value:this.Qns(),Rjt:t=>this.oos(t)},{name:t+".properties.angular-damping.name",value:this.tos(),Rjt:t=>this.aos(t)}];return this.Uyt&&(s.push({name:t+".debugger.is-sleeping",value:!this.dos()}),s.push({name:t+".debugger.velocity-x",value:this.mos(),Rjt:t=>this.gos(t,this.yos())}),s.push({name:t+".debugger.velocity-y",value:this.yos(),Rjt:t=>this.gos(this.mos(),t)}),s.push({name:t+".debugger.angular-velocity",value:R.Cr(this.Sos()),Rjt:t=>this.wos(R.Ir(t))}),s.push({name:t+".debugger.mass",value:this.bos()})),[{title:"$"+this.q6().cf(),properties:s}]}Mos(t,s,i){const[e,h]=this.Wns(i);this.vos(t,s,e,h)}xos(t,s,i,e){const[h,r]=this.Wns(e),n=R.Pr(h,r,s,i);this.vos(Math.cos(n)*t,Math.sin(n)*t,h,r)}Gos(t,s,i){const[e,h]=this.Wns(i);this.vos(Math.cos(s)*t,Math.sin(s)*t,e,h)}vos(t,s,i,e){if(this.Uyt){const h=this.wrs;this.dns.ApplyForce($c(t,s),Kc(i*h,e*h),!0)}}Tos(t,s,i){const[e,h]=this.Wns(i);this._os(t,s,e,h)}Ios(t,s,i,e){const[h,r]=this.Wns(e),n=R.Pr(h,r,s,i);this._os(Math.cos(n)*t,Math.sin(n)*t,h,r)}Cos(t,s,i){const[e,h]=this.Wns(i);this._os(Math.cos(s)*t,Math.sin(s)*t,e,h)}_os(t,s,i,e){if(this.Uyt){const h=this.wrs,r=(this.dns.ApplyLinearImpulse($c(t,s),Kc(i*h,e*h),!0),this.zO());this.Sns=r.jM(),this.wns=r.HM(),this.Mns=!1}}Ros(t){this.Uyt&&this.dns.ApplyTorque(t,!0)}Aos(t,s){const i=R.Dr(this.zO().GetAngle(),s)?-1:1;this.Ros(t*i)}Pos(t,s,i){const e=this.zO(),h=R.Pr(e.jM(),e.HM(),s,i),r=R.Dr(e.GetAngle(),h)?-1:1;this.Ros(t*r)}wos(t){this.Uyt&&(this.dns.SetAngularVelocity(t),this.dns.SetAwake(!0))}Sos(){return this.Uyt?this.dns.GetAngularVelocity():0}gos(t,s){if(this.Uyt){const i=this.wrs,e=(this.dns.SetLinearVelocity($c(t*i,s*i)),this.dns.SetAwake(!0),this.zO());this.Sns=e.jM(),this.wns=e.HM(),this.Mns=!1}}Eos(){if(!this.Uyt)return[0,0];const t=this.wrs,s=this.dns.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}mos(){return this.Uyt?this.dns.GetLinearVelocity().get_x()/this.wrs:0}yos(){return this.Uyt?this.dns.GetLinearVelocity().get_y()/this.wrs:0}Fos(t,s){if(this.Uyt){const i=this.wrs,e=(this.dns.SetTransform($c(t*i,s*i),this.dns.GetAngle()),this.zO());e.gN(t,s),e.mN(),this.Sns=e.jM(),this.wns=e.HM()}}hos(t){if(this.Uyt&&this.ons!==t){this.ons=t;for(const s of this.pns)s.SetDensity(t);this.dns.ResetMassData()}}$ns(){return this.Uyt?this.ons:0}ros(t){if(this.Uyt&&this.ans!==t){this.ans=t;for(const s of this.pns)s.SetFriction(t);if(this.dns)for(let t=this.dns.GetContactList();this.ins.getPointer(t);t=t.get_next()){const i=t.get_contact();i&&i.ResetFriction()}}}Kns(){return this.Uyt?this.ans:0}nos(t){if(this.Uyt&&this.lns!==t){this.lns=t;for(const s of this.pns)s.SetRestitution(t)}}Zns(){return this.Uyt?this.lns:0}oos(t){this.Uyt&&this.uns!==t&&(this.uns=t,this.dns.SetLinearDamping(t))}Qns(){return this.Uyt?this.uns:0}aos(t){this.Uyt&&this.cns!==t&&(this.cns=t,this.dns.SetAngularDamping(t))}tos(){return this.Uyt?this.cns:0}fos(t){this.Uyt&&this.ens!==(t=!!t)&&(this.ens=t,this.dns.SetType(this.ens?0:2),this.dns.SetAwake(!0))}uos(){return this.ens}eos(t){this.Uyt&&this.nns!==(t=!!t)&&(this.nns=t,this.dns.SetFixedRotation(this.nns),this.dns.SetAngularVelocity(0),this.dns.SetAwake(!0))}Yns(){return this.nns}los(t){this.Uyt&&this.fns!==(t=!!t)&&(this.fns=t,this.dns.SetBullet(this.fns),this.dns.SetAwake(!0))}ios(){return this.fns}Dos(t){this.Uyt&&this.dns.SetAwake(!!t)}dos(){return!!this.Uyt&&this.dns.IsAwake()}bos(){return this.Uyt?this.dns.GetMass()/this.wrs:0}Oos(){return this.Uyt?this.dns.GetWorldCenter().get_x()/this.wrs:0}kos(){return this.Uyt?this.dns.GetWorldCenter().get_y()/this.wrs:0}Los(){if(!this.Uyt)return[0,0];const t=this.dns.GetWorldCenter(),s=this.wrs;return[t.get_x()/s,t.get_y()/s]}Bos(){if(!this.Uyt)return 0;let s=0;for(let t=this.dns.GetContactList();this.ins.getPointer(t);t=t.get_next()){const i=t.get_contact();if(i){const e=i.GetManifold(),h=e.get_pointCount();s+=h}}return s}Nos(i){if(i=Math.floor(i),this.Uyt){let s=0;for(let t=this.dns.GetContactList();this.ins.getPointer(t);t=t.get_next()){const e=t.get_contact();if(e){const h=e.GetManifold(),r=h.get_pointCount();if(i>=s&&i<s+r){const n=i-s,o=this.H6().GetWorldManifold(),a=(e.GetWorldManifold(o),o.get_points(n));return[a.get_x()/this.wrs,a.get_y()/this.wrs]}s+=r}}}return[0,0]}Ixt(){return self.Wos}},new WeakMap);self.Wos=class extends Jc{constructor(){super(),P.set(this,Jc.i4().L6())}get isEnabled(){return P.get(this).Bvt()}set isEnabled(t){P.get(this).kvt(t)}jos(t,s,i=0){A.Te(t),A.Te(s),P.get(this).Mos(t,s,i)}Vos(t,s,i,e=0){A.Te(t),A.Te(s),A.Te(i),P.get(this).xos(t,s,i,e)}Uos(t,s,i=0){A.Te(t),A.Te(s),P.get(this).Gos(t,s,i)}Hos(t,s,i=0){A.Te(t),A.Te(s),P.get(this).Tos(t,s,i)}zos(t,s,i,e=0){A.Te(t),A.Te(s),A.Te(i),P.get(this).Ios(t,s,i,e)}Jos(t,s,i=0){A.Te(t),A.Te(s),P.get(this).Cos(t,s,i)}qos(t){A.Te(t),P.get(this).Ros(t)}Xos(t,s){A.Te(t),A.Te(s),P.get(this).Aos(t,s)}Yos(t,s,i){A.Te(t),A.Te(s),A.Te(i),P.get(this).Pos(t,s,i)}set angularVelocity(t){A.Te(t),P.get(this).wos(t)}get angularVelocity(){return P.get(this).Sos()}setVelocity(t,s){A.Te(t),A.Te(s),P.get(this).gos(t,s)}$os(){return P.get(this).mos()}Kos(){return P.get(this).yos()}Zos(){return P.get(this).Eos()}Qos(t,s){A.Te(t),A.Te(s),P.get(this).Fos(t,s)}set tas(t){A.Te(t),P.get(this).hos(t)}get tas(){return P.get(this).$ns()}set sas(t){A.Te(t),P.get(this).ros(t)}get sas(){return P.get(this).Kns()}set ias(t){A.Te(t),P.get(this).nos(t)}get ias(){return P.get(this).Zns()}set eas(t){A.Te(t),P.get(this).oos(t)}get eas(){return P.get(this).Qns()}set ras(t){A.Te(t),P.get(this).aos(t)}get ras(){return P.get(this).tos()}set nas(t){P.get(this).fos(t)}get nas(){return P.get(this).uos()}set oas(t){P.get(this).eos(t)}get oas(){return P.get(this).Yns()}set aas(t){P.get(this).los(t)}get aas(){return P.get(this).ios()}get las(){return P.get(this).bos()}uas(){return P.get(this).Oos()}fas(){return P.get(this).kos()}das(){return P.get(this).Los()}pas(){return P.get(this).Bos()}mas(t){return A.Te(t),P.get(this).Nos(t)[0]}gas(t){return A.Te(t),P.get(this).Nos(t)[1]}yas(t){return A.Te(t),P.get(this).Nos(t)}set Sas(t){P.get(this).Dos(!!t)}get Sas(){return P.get(this).dos()}get was(){return!P.get(this).dos()}bas(t,s,i,e,h){A.Te(e),A.Te(h);const r=u(this,s);P.get(this).jns(t,r,i,e,h)}Mas(t,s){const i=u(this,s);P.get(this).Uns(t,i)}vas(t,s,i,e){A.Te(i),A.Te(e);const h=u(this,s);P.get(this).Hns(t,h,i,e)}xas(t,s,i,e,h,r,n,o,a){const l=u(this,s);P.get(this).zns(t,l,i,e,h,r,n,o,a)}Gas(){P.get(this).Jns()}}}{const tf=self.Ws;tf.rlt.grs.GY={Tas(){return!this.dos()},_as(t,s,i){if(!this.Uyt)return!1;let e=0;if(0===t)e=this.mos();else if(1===t)e=this.yos();else{const[h,r]=this.Eos();e=Math.hypot(h,r)}return tf.compare(e,s,i)},Ias(t,s){if(!this.Uyt)return!1;const i=tf.Cr(this.Sos());return tf.compare(i,t,s)},Cas(t,s){if(!this.Uyt)return!1;const i=this.bos();return tf.compare(i,t,s)},nc(){return this.Bvt()}}}{const sf=self.Ws;sf.rlt.grs.drt={ApplyForce(t,s,i){this.Mos(t,s,i)},Ras(t,s,i,e){this.xos(t,s,i,e)},Aas(t,s,i){this.Gos(t,sf.Ir(s),i)},Pas(t,s,i){this.Tos(t,s,i)},Eas(t,s,i,e){this.Ios(t,s,i,e)},Fas(t,s,i){this.Cos(t,sf.Ir(s),i)},ApplyTorque(t){this.Ros(sf.Ir(t))},Das(t,s){this.Aos(sf.Ir(t),sf.Ir(s))},Oas(t,s,i){this.Pos(sf.Ir(t),s,i)},SetAngularVelocity(t){this.wos(sf.Ir(t))},kas(t,s,i,e,h){if(s){const r=s.tvt(this.Ci);this.jns(t,r,i,e,h)}},Las(t,s){if(s){const i=s.tvt(this.Ci);this.Uns(t,i)}},Bas(t,s,i,e){if(s){const h=s.tvt(this.Ci);this.Hns(t,h,sf.Ir(i),sf.Ir(e))}},Nas(t,s,i,e,h,r,n,o,a){if(s){const l=s.tvt(this.Ci);this.zns(t,l,sf.Ir(i),e,h,r,n,sf.Ir(o),a)}},Was(){this.Jns()},jas(t){this.H6().SetGravity(t)},Ors(t){this.H6().Ors(t)},Vrs(t,s){this.H6().Vrs(t,s)},Vas(t,s){this.gos(t,s)},Uas(t,s){this.Fos(t,s)},SetDensity(t){this.hos(t)},SetFriction(t){this.ros(t)},Has(t){this.nos(t)},SetLinearDamping(t){this.oos(t)},SetAngularDamping(t){this.aos(t)},zas(t){this.fos(t)},Jas(t,s){this.H6().Jrs(this.QB(),t,0!==s)},qas(t){this.eos(0!==t)},SetBullet(t){this.los(0!==t)},SetAwake(t){this.Dos(!!t)},O2t(t){this.kvt(0!==t)}}}{const ef=self.Ws;ef.rlt.grs.prt={Xas(){return this.mos()},Yas(){return this.yos()},$as(){return ef.Cr(this.Sos())},Kas(){return this.bos()},Zas(){return this.Oos()},Qas(){return this.kos()},tls(){return this.$ns()},sls(){return this.Kns()},ils(){return this.Zns()},els(){return this.Qns()},hls(){return this.tos()},rls(){return this.Bos()},nls(t){return this.Nos(t)[0]},ols(t){return this.Nos(t)[1]}}}{let n=function(t){return nf(t.get_x(),t.get_y())},s=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,e(i));return s},e=function(i){let e=[],h=(e.push(i.splice(0,8)),e[0][0]),r=e[0][7];for(;i.length;){let t=i.splice(0,Math.min(i.length,6)),s=t.at(-1);t.push(n(h)),t.push(n(r)),e.push(t),r=s}return e};n,s,e;const hf=self.Ws,rf={},nf=(hf.rlt.grs.Fns=rf,hf.rlt.grs.F_t),of=hf.rlt.grs.Xrs;rf.als=function(t,s,i,e,h,r){return t*e+i*r+h*s-s*i-e*h-r*t},rf.lls=function(t,s,i,e,h,r,n,o){const a=h-t,l=r-s,u=i-t,c=e-s,f=n-h,d=o-r,p=c*f-u*d,m=(f*l-d*a)/p,g=t+m*u,y=s+m*c,S=rf.uls(i,e,t,s,g,y),w=rf.uls(g,y,h,r,n,o);return S&&w?nf(g,y):null},rf.uls=function(t,s,i,e,h,r){const n=t<=i+.1&&h-.1<=t||i-.1<=t&&t<=h+.1,o=s<=e+.1&&r-.1<=s||e-.1<=s&&s<=r+.1;return n&&o&&rf.cls(t,s,i,e,h,r)},rf.cls=function(t,s,i,e,h,r){if(.1<Math.abs(h-i)){const n=(r-e)/(h-i),o=n*(t-i)+e,a=Math.abs(o-s);return a<.1}return Math.abs(t-i)<.1},rf.fls=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},rf.Ens=function(t,r){let n=rf.dls(t),o=[];for(let t=0,s=n.length;t<s;++t){let i=n[t],e=[],h=0;for(let t=0,s=i.length;t<s;++t){const a=i[t],l=i[(t+1)%s];h+=a.get_x()*l.get_y()-a.get_y()*l.get_x(),e.push(nf(a.get_x(),a.get_y()))}if((h=Math.abs(h/2))>=.001*r)o.push(e);else for(let t=0,s=e.length;t<s;t++)of(e[t])}return o=s(o)},rf.dls=function(t){let s=[],i=0,e,h=0,r,n,o,a=0,l,u,c,f,d,p,m,g,y,S,w=0,b=0,M=0,v=0,x=[],G=[],T=!1,_=[],I=[],C=!1;for(I.push(t);I.length;){for(e=(s=I[0]).length,T=!0,i=0;i<e;i++)if(u=(l=i)<e-1?i+1:i+1-e,c=i<e-2?i+2:i+2-e,f=s[l],d=s[u],p=s[c],rf.als(f.get_x(),f.get_y(),d.get_x(),d.get_y(),p.get_x(),p.get_y())<0){for(T=!1,a=1e9,h=0;h<e;h++)h!==l&&h!==u&&(w=h,b=h<e-1?h+1:0,m=s[w],g=s[b],y=rf.lls(f.get_x(),f.get_y(),d.get_x(),d.get_y(),m.get_x(),m.get_y(),g.get_x(),g.get_y()))&&((r=(n=d.get_x()-y.get_x())*n+(o=d.get_y()-y.get_y())*o)<a?(v=w,M=b,S=y,a=r):of(y));if(1e9===a)return[];for(x=[],G=[],w=v,b=M,m=s[w],g=s[b],C=!1,rf.fls(S.get_x(),S.get_y(),g.get_x(),g.get_y())||(x.push(S),C=!0),rf.fls(S.get_x(),S.get_y(),m.get_x(),m.get_y())||(G.push(S),C=!0),C||of(S),v=-1,M=l;;){if(M===b){if(v<0||v>=e)return[];rf.uls(g.get_x(),g.get_y(),s[v].get_x(),s[v].get_y(),f.get_x(),f.get_y())||x.push(s[M]);break}x.push(s[M]),(v=M)-1<0?M=e-1:M--}for(x.reverse(),v=-1,M=u;;){if(M===w){if(v<0||v>=e)return[];M!==w||rf.uls(m.get_x(),m.get_y(),s[v].get_x(),s[v].get_y(),d.get_x(),d.get_y())||G.push(s[M]);break}G.push(s[M]),(v=M)+1>e-1?M=0:M++}I.push(x,G),I.shift();break}T&&_.push(I.shift())}return _}}{const af=self.Ws;af.rlt.pls=class extends af.eTt{constructor(t){super(t),this.mls=0,this.gls=0,this.yls=0,this.Sls=0}wr(){super.wr()}wls(t){this.mls=t}bls(){return this.mls}Mls(t){this.gls=t}vls(){return this.gls}xls(t){this.yls=t}Gls(){return this.yls}Tls(t){this.Sls=t}_ls(){return this.Sls}}}{const lf=self.Ws;lf.rlt.pls.bIt=class extends lf.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const uf=self.Ws;uf.rlt.pls.Instance=class extends uf.uTt{constructor(t,s){super(t),this.Uyt=!0,s&&(this.Uyt=s[0]),this.Uyt&&this.dGt()}wr(){super.wr()}tv(){const t=this.H6();return{e:this.Uyt,smg:t.bls(),ss:t.vls(),se:t.Gls(),smd:t._ls()}}sv(t){const s=this.H6();s.wls(t.smg),s.Mls(t.ss),s.xls(t.se),s.Tls(t.smd),this.Uyt=t.e,this.Uyt?this.dGt():this.$xt()}kvt(t){this.Uyt=!!t,this.Uyt?this.dGt():this.$xt()}nc(){return this.Uyt}uGt(){if(this.nc()){this.bf.ZD(this.Ci);let s=this.H6(),t=s.r5(),i=0,e=0,h=0;for(const l of t){const u=l.vRt(uf.rlt.pls);if(u&&u.L6().nc()){const c=l.zO();i+=c.jM(),e+=c.HM(),++h}}let r=this.Ci.zO().IO(),n=this.bf.sO(),o=0,a=0;if(n>=s.vls()&&n<s.Gls()){let t=s.bls()*Math.min(this.bf.hO(),1);0===s._ls()&&(t*=1-(n-s.vls())/(s.Gls()-s.vls()));const f=this.bf.vO()*Math.PI*2,d=this.bf.vO()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.T5(i/h+o),r.I5(e/h+a)}}Krt(t){if(0===t)return this.Uyt}ent(t,s){0===t&&(this.Uyt=!!s,this.Uyt?this.dGt():this.$xt())}mGt(){return[{title:"$"+this.q6().cf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.nc(),Rjt:t=>this.kvt(t)}]}]}}}{const cf=self.Ws;cf.rlt.pls.GY={nc(){return this.nc()}}}{const ff=self.Ws;ff.rlt.pls.drt={Ils(t,s,i){const e=this.H6();e.wls(t),e.Mls(this.bf.sO()),e.xls(this.bf.sO()+s),e.Tls(i)},O2t(t){this.kvt(0!==t)}}}{const df=self.Ws;df.rlt.pls.prt={}}{const pf=self.Ws;pf.rlt.di=class extends pf.eTt{constructor(t){super(t)}wr(){super.wr()}}}{const mf=self.Ws;mf.rlt.di.bIt=class extends mf.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{let v=function(t,s,i,e,h){const r=s*h,n=i*h;return gf.Tr(t*h+.5*e*h*h,r,n)};v;const gf=self.Ws,yf=self.Ks,Sf=self.V6,E=(gf.rlt.di.Instance=class extends gf.uTt{constructor(t,s){super(t),this.Cls=null,this.Rls=!1,this.Als=!1,this.Pls=!1,this.Els=!1,this.Fls=!1,this.Dls=!1,this.Ols=!1,this.kls=!1,this.Lls=!1,this.Bls=!1,this.Nls=null,this.Wls=-1,this.jls=0,this.Vls=0,this.Uls=!1,this.Hls=!1,this.zls=this.bf.nD().v3t(this.Ci),this.Jls=-1,this.qls="stopped",this.Xls=-1,this.xJt=!0,this.Yls=0,this.$ls=0,this.Kls=0,this.Zls=0,this.Qls=0,this.tus=0,this.Ko=1500,this.ius=1500,this.eus=gf.Ir(90),this.hus=330,this.rus=1500,this.nus=1500,this.ous=650,this.aus=1e3,this.lus=!1,this.uus=0,this.cus=0,this.fus=!0,this.dus=0,this.Uyt=!0,s&&(this.hus=s[0],this.rus=s[1],this.nus=s[2],this.ous=s[3],this.Ko=s[4],this.aus=s[5],this.lus=!!s[6],this.uus=s[7]/1e3,this.fus=!!s[8],this.Uyt=!!s[9]);const i=this.bf.Qf();this.P0=new gf.C0(gf.v0.I0(i,"instancedestroy",t=>this.PZt(t.X6)),gf.v0.I0(i,"afterload",t=>this.tK())),this.fus&&this.pus(),this.Uyt&&this.gTt(),this.mus()}wr(){this.Cls&&(this.Cls.wr(),this.Cls=null),this.Nls=null,this.zls=null,super.wr()}pus(){if(!this.Cls){const t=this.bf.Qf();this.Cls=new gf.C0(gf.v0.I0(t,"keydown",t=>this.fss(t.data)),gf.v0.I0(t,"keyup",t=>this.dss(t.data)),gf.v0.I0(t,"window-blur",()=>this.pss()),gf.v0.I0(t,"keyboard-blur",()=>this.pss()))}}gus(){this.Cls&&(this.Cls.wr(),this.Cls=null)}PZt(t){this.Nls===t&&(this.Nls=null),this.zls===t&&(this.zls=null)}fss(t){switch(t.key){case"ArrowLeft":this.Rls=!0;break;case"ArrowRight":this.Als=!0;break;case"ArrowUp":this.Pls=!0}}dss(t){switch(t.key){case"ArrowLeft":this.Rls=!1;break;case"ArrowRight":this.Als=!1;break;case"ArrowUp":this.Pls=!1,this.Els=!1}}pss(){this.Rls=!1,this.Als=!1,this.Pls=!1,this.Els=!1}tv(){return{ii:this.Ols,lfx:this.jls,lfy:this.Vls,lfo:this.Nls?this.Nls.f4():-1,am:this.qls,en:this.Uyt,fallt:this.Xls,ft:this.xJt,dx:this.Yls,dy:this.$ls,ms:this.hus,acc:this.rus,dec:this.nus,js:this.ous,g:this.Ko,g1:this.ius,mf:this.aus,wof:this.Hls,woj:this.zls?this.zls.f4():-1,ga:this.eus,edj:this.lus,cdj:this.Dls,dj:this.Fls,sus:this.uus,dc:this.fus,cc:this.dus}}sv(t){this.Ols=t.ii,this.jls=t.lfx,this.Vls=t.lfy,this.Wls=t.lfo,this.qls=t.am;const s=t.en;this.Xls=t.fallt||-1,this.xJt=t.ft,this.Yls=t.dx,this.$ls=t.dy,this.hus=t.ms,this.rus=t.acc,this.nus=t.dec,this.ous=t.js,this.Ko=t.g,this.ius=t.g1,this.aus=t.mf,this.Hls=t.wof,this.Jls=t.woj,this.eus=t.ga,this.lus=t.edj,this.Dls=t.cdj,this.Fls=t.dj,this.uus=t.sus,this.fus=t.dc,this.dus=t.cc||0,this.Rls=!1,this.Als=!1,this.Pls=!1,this.Els=!1,this.kls=!1,this.Lls=!1,this.Bls=!1,this.cus=0,this.fus?this.pus():this.gus(),this.kvt(s),this.mus()}tK(){-1===this.Wls?this.Nls=null:this.Nls=this.bf.WO(this.Wls),-1===this.Jls?this.zls=null:this.zls=this.bf.WO(this.Jls)}yus(t){if(this.Nls=t){const s=t.zO();this.jls=s.jM(),this.Vls=s.HM()}}Sus(){return this.bf.sO()>this.Xls+.05}mus(){this.Kls=Math.cos(this.eus),this.Zls=Math.sin(this.eus),this.Qls=Math.cos(this.eus-Math.PI/2),this.tus=Math.sin(this.eus-Math.PI/2),this.Kls=gf.Xr(this.Kls,6),this.Zls=gf.Xr(this.Zls,6),this.Qls=gf.Xr(this.Qls,6),this.tus=gf.Xr(this.tus,6),this.ius=this.Ko,this.Ko<0&&(this.Kls*=-1,this.Zls*=-1,this.Ko=Math.abs(this.Ko))}wus(){return this.Ko<0?-1:1}bus(){const s=this.Ci.zO(),h=this.bf.nD(),r=this.Ci,t=this.Nls,i=s.jM(),n=s.HM();if(s.wN(this.Kls,this.Zls),s.mN(),!t||!h.kk(r,t)||t.QB().SCt()&&!h.jPt(t,r)||t.QB().wCt()&&!t.iRt()){let t=h.Nk(r),e=null;if(!t&&this.Sus()&&(e=h.v3t(r,!0)),s.gN(i,n),s.mN(),t)return h.kk(r,t)?null:(this.Uls=!1,t);if(e&&e.length){let i=0;for(let t=0,s=e.length;t<s;++t)e[i]=e[t],h.kk(r,e[t])||++i;if(1<=i)return this.Uls=!0,e[0]}return null}return s.gN(i,n),s.mN(),t}mTt(){if(this.Uyt){const c=this.bf.ZD(this.Ci);this.Pls||this.Bls||(this.Els=!1);let e=this.Rls||this.kls,h=this.Als||this.Lls,r=this.Pls||this.Bls,n=r&&!this.Els,[o,,a]=(this.kls=!1,this.Lls=!1,this.Bls=!1,this.Ols&&(e=!1,h=!1,r=!1,n=!1),r||(this.cus=0),this.Mus(),this.vus()),l=this.bus(),u=l&&!this.Hls,t=!1;if([t,l]=this.xus(l),!t){this.Gus(l,a,o,r),n=this.Tus(l,n,r),l||this._us(n,r,c),this.Hls=!!l;let t=this.Ius(e,h),s=!1,i=0;if(0!==this.Yls&&([s,l]=this.Cus(c,t,l,n)),0!==this.$ls){const[f,d]=this.Rus(c,l);s=s||f,i=d}!s&&u&&this.$ls<0&&0<i&&(this.$ls=0,s=!0),this.Aus(e,h,t,c),l&&!n||s||(this.$ls=Math.min(this.$ls+this.Ko*c,this.aus)),this.Pus(l,s,n),this.zls=this.bf.nD().v3t(this.Ci)}}}Mus(){if(this.xJt){const t=this.Ci,s=this.bf.nD();(s.Nk(t)||s.v3t(t))&&s.G3t(t,-this.Kls,-this.Zls,4,!0),this.xJt=!1}}vus(){let t=this.Nls,s=t?t.zO():null,i=0,e=0,h=!1;if(t&&0===this.$ls&&(s.HM()!==this.Vls||s.jM()!==this.jls)){const r=this.Ci,n=r.zO(),o=this.bf.nD(),a=s.jM(),l=s.HM(),u=(i=a-this.jls,e=l-this.Vls,n.wN(i,e),n.mN(),this.jls=a,this.Vls=l,h=!0,o.Nk(r));u&&(o.o3t(r,u),o.G3t(r,-i,-e,2.5*Math.hypot(i,e)))}return[i,e,h]}xus(t){let s=!1,i=this.Ci,e=i.zO(),h=this.bf.nD(),r=h.Nk(i);if(!r)return[!1,t];const n=Math.abs(e.Pm()),o=Math.abs(e.jm());return h.G3t(i,-this.Kls,-this.Zls,o/8)?(h.o3t(i,r),this.yus(t=r),this.Uls=!1,this.$ls=0):h._3t(i,this.Qls,this.tus,n/2)||h._3t(i,this.Kls,this.Zls,o/2)||h.I3t(i,Math.max(n,o)/2)?h.o3t(i,r):s=!0,[s,t]}Gus(t,s,i,e){const h=this.Ci,r=this.bf.nD();if(t){const n=this.Kls,o=this.Zls,a=this.Qls,l=this.tus;if(this.Fls=!1,this.Dls=!1,0<this.$ls&&(this.Hls||(r.T3t(h,-n,-o,t,16),this.Hls=!0),this.$ls=0),this.Nls!==t)this.yus(t),r.o3t(h,t);else if(s){const u=r.Nk(h);u&&(r.o3t(h,u),0!==i&&(0<i?r.G3t(h,-a,-l):r.G3t(h,a,l)),r.G3t(h,-n,-o))}}else e||(this.Dls=!0)}Tus(t,s,i){if(t&&s||!t&&this.lus&&i&&this.Dls&&!this.Fls){const e=this.Ci,h=e.zO(),r=this.bf.nD(),n=h.jM(),o=h.HM();h.wN(-this.Kls,-this.Zls),h.mN(),r.Nk(e)?s=!1:(this.cus=this.uus,this.N4(gf.rlt.di.GY.Eus),this.qls="jumping",this.$ls=-this.ous,s=!0,t?this.Els=!0:this.Fls=!0),h.gN(n,o),h.mN()}return s}_us(t,s,i){s&&0<this.cus?(this.$ls=-this.ous,this.cus-=i):this.Nls=null,t&&(this.Els=!0)}Ius(t,s){let i=0,e=this.rus,h=this.nus;return t&&!s&&(i=0<this.Yls?-(e+h):-e),i=s&&!t?this.Yls<0?e+h:e:i}Aus(t,s,i,e){const h=this.nus,r=(t===s&&(this.Yls<0?this.Yls=Math.min(this.Yls+h*e,0):0<this.Yls&&(this.Yls=Math.max(this.Yls-h*e,0))),this.Yls=gf.Tr(this.Yls+i*e,-this.hus,this.hus),this.bf.nD()),n=this.Yls<0?this.Fus(0,1,1):null;if(n)this.Yls=0,r.o3t(this.Ci,n);else{const o=0<this.Yls?this.Fus(1,1,1):null;o&&(this.Yls=0,r.o3t(this.Ci,o))}}Cus(e,t,h,s){let r=this.Ci,n=r.zO(),o=this.bf.nD(),a=this.Kls,l=this.Zls,i=this.Qls,u=this.tus,c=this.hus,f=!1,d=new Set(o.v3t(r,!0)),p=n.jM(),m=n.HM(),g=v(this.Yls,-c,c,t,e)*i,y=v(this.Yls,-c,c,t,e)*u,S=(n.wN(i*(1<this.Yls?1:-1)-a,u*(1<this.Yls?1:-1)-l),n.mN(),!1),w=o.Nk(r),b=(n.gN(p+g,m+y),n.mN(),o.Nk(r));if(!b&&h&&this.Uls&&(b=o.v3t(r),d.has(b)?b=null:S=!0),b){let t=Math.abs(this.Yls*e)+2;w||!o.G3t(r,-a,-l,t,S,b)?(o.o3t(r,b),t=Math.max(Math.abs(this.Yls*e*2.5),Math.floor(n.Pm())),o.G3t(r,i*(this.Yls<0?1:-1),u*(this.Yls<0?1:-1),t,!1)&&(!h||S||this.Uls||(p=n.jM(),m=n.HM(),n.wN(a,l),o.Nk(r)&&o.G3t(r,-a,-l,3,!1)))||(n.gN(p,m),n.mN()),S||(this.Yls=0)):!w&&!s&&Math.abs(this.$ls)<Math.abs(this.ous/4)&&(this.$ls=0,h||(f=!0))}else{const M=this.bus();if(h&&!M){let t=Math.ceil(Math.abs(this.Yls*e))+2,s=(p=n.jM(),m=n.HM(),n.wN(a*t,l*t),n.mN(),o.v3t(r)),i=!1;s&&!d.has(s)&&o.G3t(r,-a,-l,t+2,!0,s)&&(this.yus(h=s),this.Uls=!0,i=!0),i||(o.Nk(r)?o.G3t(r,-a,-l,t+2,!1):(n.gN(p,m),n.mN()))}else M&&(!h&&this.Uls&&(this.yus(M),this.$ls=0,f=!0),0===this.$ls)&&o.T3t(r,-a,-l,M,16)}return[f,h]}Rus(s,t){let e=this.Ci,h=e.zO(),r=this.bf.nD(),i=this.Kls,n=this.Zls,o=!1,a=h.jM(),l=h.HM(),u=v(this.$ls,-1/0,this.aus,this.Ko,s),c=(h.wN(u*i,u*n),h.jM()),f=h.HM(),d=(h.mN(),r.Nk(e)),p=!1;if(!d&&0<this.$ls&&!t){const m=this.Sus()?r.v3t(e,!0):null;if(m&&m.length){if(this.zls){h.gN(a,l),h.mN();let i=0;for(let t=0,s=m.length;t<s;++t)m[i]=m[t],r.kk(e,m[t])||++i;gf.Un(m,i),h.gN(c,f),h.mN()}1<=m.length&&(d=m[0])}p=!!d}if(d){r.o3t(e,d),this.cus=0;let t=1.1;p&&!this.zls&&(t=2);const g=Math.max(Math.abs(this.$ls*s*t),2);r.G3t(e,i*(this.$ls<0?1:-1),n*(this.$ls<0?1:-1),g,p,d)?(this.yus(d),this.Uls=p,0<this.$ls&&(o=!0),(0<this.$ls||0===this.dus)&&(this.$ls=0),this.$ls<0&&1===this.dus&&r.T3t(e,i,n,d,32)):(h.gN(a,l),h.mN(),this.Hls=!0,p||(this.$ls=0))}return[o,u]}Pus(t,s,i){"falling"!==this.qls&&0<this.$ls&&!t&&(this.N4(gf.rlt.di.GY.Dus),this.qls="falling"),(t||s)&&0<=this.$ls&&("falling"===this.qls||s||i&&0===this.$ls?(this.N4(gf.rlt.di.GY.Ous),0===this.Yls&&0===this.$ls?this.qls="stopped":this.qls="moving"):("stopped"!==this.qls&&0===this.Yls&&0===this.$ls&&(this.N4(gf.rlt.di.GY.kus),this.qls="stopped"),"moving"===this.qls||0===this.Yls&&0===this.$ls||i||(this.N4(gf.rlt.di.GY.Lus),this.qls="moving")))}Bus(){return 0!==this.Nus()||0!==this.Wus()}jus(){if(0===this.$ls){let e=this.Ci,t=this.zO(),h=this.bf.nD(),s=t.jM(),i=t.HM(),r=(t.wN(this.Kls,this.Zls),t.mN(),h.Nk(e)),n=null;if(!r&&this.Sus()&&(n=h.v3t(e,!0)),t.gN(s,i),t.mN(),r)return!h.kk(e,r);if(n&&n.length){let i=0;for(let t=0,s=n.length;t<s;++t)n[i]=n[t],h.kk(e,n[t])||i++;if(1<=i)return!0}}return!1}Vus(t,s=2,i=3){return!!this.Fus(t,s,i)}Fus(t,s=2,i=3){const e=this.Ci,h=this.zO(),r=this.bf.nD(),n=h.jM(),o=h.HM();if(0===t?h.wN(-this.Qls*s,-this.tus*s):h.wN(this.Qls*s,this.tus*s),h.mN(),!r.Nk(e))return h.gN(n,o),h.mN(),null;h.wN(-this.Kls*i,-this.Zls*i),h.mN();const a=r.Nk(e);return h.gN(n,o),h.mN(),a}Uus(){const t=this.zO(),s=t.jM(),i=t.HM(),e=(t.wN(this.Kls,this.Zls),t.mN(),this.bf.nD().v3t(this.Ci,!1));t.gN(s,i),t.mN(),e&&(this.Xls=this.bf.sO(),this.Nls=null)}Hus(t){this.Fls=!t}zus(){return Math.hypot(this.Yls,this.$ls)}Jus(){return Math.atan2(this.$ls,this.Yls)}qus(){return this.$ls<0}Xus(){return 0<this.$ls}Yus(t){this.hus=Math.max(t,0)}$us(){return this.hus}Kus(t){this.rus=Math.max(t,0)}Zus(){return this.rus}Qus(t){this.nus=Math.max(t,0)}tcs(){return this.nus}scs(t){this.ous=Math.max(t,0)}ics(){return this.ous}ecs(t){this.aus=Math.max(t,0)}hcs(){return this.aus}rcs(t){if(this.ius!==t){this.Ko=t,this.mus();const s=this.bf.nD(),i=this.zO();s.Nk(this.Ci)&&(s.G3t(this.Ci,this.Kls,this.Zls,10),i.wN(2*this.Kls,2*this.Zls),i.mN()),this.Nls=null}}ncs(){return this.Ko}ocs(t){t=gf._r(t),this.eus!==t&&(this.eus=t,this.mus(),this.Nls=null)}acs(){return this.eus}lcs(t){this.lus=!!t}ucs(){return this.lus}ccs(t){this.uus=t}fcs(){return this.uus}dcs(t){this.dus=t}pcs(){return this.dus}mcs(t){this.Yls=t}Nus(){return this.Yls}gcs(t){this.$ls=t}Wus(){return this.$ls}ycs(t){if(this.Uyt)switch(t){case 0:this.kls=!0;break;case 1:this.Lls=!0;break;case 2:this.Bls=!0}}Scs(t){this.fus!==(t=!!t)&&(this.fus=t,this.fus?this.pus():(this.gus(),this.pss()))}wcs(){return this.fus}bcs(t){this.Ols=!!t}Mcs(){return this.Ols}kvt(t){this.Uyt!==(t=!!t)&&(this.Uyt=t,this.Uyt?this.gTt():(this.fTt(),this.Nls=null,this.kls=!1,this.Lls=!1,this.Bls=!1))}Bvt(){return this.Uyt}Krt(t){switch(t){case 0:return this.$us();case 1:return this.Zus();case 2:return this.tcs();case 3:return this.ics();case 4:return this.ncs();case 5:return this.hcs();case 6:return this.ucs();case 7:return 1e3*this.fcs();case 8:return this.wcs();case 9:return this.Bvt()}}ent(t,s){switch(t){case 0:this.Yus(s);break;case 1:this.Kus(s);break;case 2:this.Qus(s);break;case 3:this.scs(s);break;case 4:this.rcs(s);break;case 5:this.ecs(s);break;case 6:this.lcs(!!s);break;case 7:this.ccs(s/1e3);break;case 8:this.Scs(!!s);break;case 9:this.kvt(!!s)}}mGt(){const t="behaviors.platform";return[{title:"$"+this.q6().cf(),properties:[{name:t+".debugger.vector-x",value:this.Nus(),Rjt:t=>this.mcs(t)},{name:t+".debugger.vector-y",value:this.Wus(),Rjt:t=>this.gcs(t)},{name:t+".properties.max-speed.name",value:this.$us(),Rjt:t=>this.Yus(t)},{name:t+".properties.acceleration.name",value:this.Zus(),Rjt:t=>this.Kus(t)},{name:t+".properties.deceleration.name",value:this.tcs(),Rjt:t=>this.Qus(t)},{name:t+".properties.jump-strength.name",value:this.ics(),Rjt:t=>this.scs(t)},{name:t+".properties.gravity.name",value:this.ncs(),Rjt:t=>this.rcs(t)},{name:t+".debugger.gravity-angle",value:gf.Cr(this.acs()),Rjt:t=>this.ocs(gf.Ir(t))},{name:t+".properties.max-fall-speed.name",value:this.hcs(),Rjt:t=>this.ecs(t)},{name:t+".properties.double-jump.name",value:this.ucs(),Rjt:t=>this.lcs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.fcs(),Rjt:t=>this.ccs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.qls]},{name:t+".properties.enabled.name",value:this.Bvt(),Rjt:t=>this.kvt(t)}]}]}Ixt(){return self.vcs}},new WeakMap),wf=new Map([["left",0],["right",1],["jump",2]]);self.vcs=class extends Sf{constructor(){super(),E.set(this,Sf.i4().L6())}xcs(){E.get(this).Uus()}Gcs(t){E.get(this).Hus(!!t)}Tcs(t){yf.Re(t);const s=wf.get(t);if("number"!=typeof s)throw new Error("invalid control");E.get(this).ycs(s)}get speed(){return E.get(this).zus()}get _cs(){return E.get(this).$us()}set _cs(t){yf.Te(t),E.get(this).Yus(t)}get acceleration(){return E.get(this).Zus()}set acceleration(t){yf.Te(t),E.get(this).Kus(t)}get Ics(){return E.get(this).tcs()}set Ics(t){yf.Te(t),E.get(this).Qus(t)}get Ccs(){return E.get(this).ics()}set Ccs(t){yf.Te(t),E.get(this).scs(t)}get Rcs(){return E.get(this).hcs()}set Rcs(t){yf.Te(t),E.get(this).ecs(t)}get iqt(){return E.get(this).ncs()}set iqt(t){yf.Te(t),E.get(this).rcs(t)}get Acs(){return E.get(this).acs()}set Acs(t){yf.Te(t),E.get(this).ocs(t)}get Pcs(){return E.get(this).ucs()}set Pcs(t){E.get(this).lcs(!!t)}get Ecs(){return E.get(this).fcs()}set Ecs(t){yf.Te(t),E.get(this).ccs(t)}get Fcs(){const t=E.get(this).pcs();return 0===t?"stop":"preserve-momentum"}set Fcs(t){yf.Re(t);const s=E.get(this);if("stop"===t)s.dcs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.dcs(1)}}get Dcs(){return E.get(this).jus()}Ocs(t){yf.Re(t);const s=E.get(this);if("left"===t)return s.Vus(0);if("right"===t)return s.Vus(1);throw new Error("invalid side")}get kcs(){return E.get(this).Bus()}get Lcs(){return E.get(this).qus()}get Bcs(){return E.get(this).Xus()}get Ncs(){return E.get(this).Nus()}set Ncs(t){yf.Te(t),E.get(this).mcs(t)}get Wcs(){return E.get(this).Wus()}set Wcs(t){yf.Te(t),E.get(this).gcs(t)}jcs(t,s){yf.Te(t),yf.Te(s);const i=E.get(this);i.mcs(t),i.gcs(s)}Vcs(){const t=E.get(this);return[t.Nus(),t.Wus()]}get Ucs(){return E.get(this).wcs()}set Ucs(t){E.get(this).Scs(!!t)}get Hcs(){return E.get(this).Mcs()}set Hcs(t){E.get(this).bcs(!!t)}get isEnabled(){return E.get(this).Bvt()}set isEnabled(t){E.get(this).kvt(!!t)}}}{const bf=self.Ws;bf.rlt.di.GY={zcs(){return this.Bus()},Jcs(t,s){return bf.compare(this.zus(),t,s)},qcs(){return this.jus()},Xcs(t){return this.Vus(t)},Ycs(){return this.qus()},$cs(){return this.Xus()},Kcs(){return this.ucs()},Eus(){return!0},Dus(){return!0},kus(){return!0},Lus(){return!0},Ous(){return!0},nc(){return this.Bvt()}}}{const Mf=self.Ws;Mf.rlt.di.drt={Zcs(t){this.Yus(t)},qJt(t){this.Kus(t)},Qcs(t){this.Qus(t)},tfs(t){this.scs(t)},sfs(t){this.ecs(t)},SetGravity(t){this.rcs(t)},ifs(t){this.ycs(t)},efs(t){this.bcs(!!t)},hfs(t){this.mcs(t)},rfs(t){this.gcs(t)},nfs(t){this.ocs(Mf.Ir(t))},O2t(t){this.kvt(0!==t)},ofs(){this.Uus()},afs(t){this.lcs(0!==t)},lfs(t){this.ccs(t/1e3)},ufs(t){this.dcs(t)},cfs(t){this.Scs(t)},ffs(t){this.Hus(t)}}}{const vf=self.Ws;vf.rlt.di.prt={dfs(){return this.zus()},pfs(){return this.$us()},mfs(){return this.Zus()},gfs(){return this.tcs()},yfs(){return this.ics()},Fqt(){return this.ncs()},Sfs(){return vf.Cr(this.acs())},wfs(){return this.hcs()},bfs(){return vf.Cr(this.Jus())},Mfs(){return this.Nus()},vfs(){return this.Wus()},xfs(){return 1e3*this.fcs()}}}{const xf=self.Ws;xf.rlt.Gfs=class extends xf.eTt{constructor(t){super(t)}wr(){super.wr()}}}{const Gf=self.Ws;Gf.rlt.Gfs.bIt=class extends Gf.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const Tf=self.Ws;Tf.rlt.Gfs.Instance=class extends Tf.uTt{constructor(t,s){super(t),this.Tfs=null,this._fs=-1,this.fJt="",this.Ifs=new Set,this.Cfs=0,this.Rfs=0,this.Afs=0,this.Yls=0,this.$ls=0,this.Pfs=0,this.Efs=0,this.Ffs=0,this.Dfs=0,this.bns=0,this.Ofs=!1,s&&(this.Ofs=s[0]);const i=this.bf.Qf();this.P0=new Tf.C0(Tf.v0.I0(i,"instancedestroy",t=>this.PZt(t.X6)),Tf.v0.I0(i,"afterload",t=>this.tK()))}wr(){this.Tfs=null,super.wr()}kfs(t){t?(this.Tfs=t,this.dGt()):(this.Tfs=null,this.$xt())}Lfs(t,s,i){if(t){const e=t.tvt(this.Ci);if(e){this.fJt=s,this.kfs(e);const h=this.Ci.zO(),r=e.zO();if("properties"===this.fJt){const n=this.Ifs;n.clear();for(const o of i)n.add(o);this.Yls=h.jM()-r.jM(),this.$ls=h.HM()-r.HM(),this.Ffs=h.GetAngle()-r.GetAngle(),this.bns=h.GetAngle(),this.Dfs=h.JM()-r.JM(),n.has("x")&&n.has("y")&&(this.Rfs=Tf.Pr(r.jM(),r.HM(),h.jM(),h.HM())-r.GetAngle(),this.Cfs=Tf.Rr(r.jM(),r.HM(),h.jM(),h.HM())),n.has("width-abs")?this.Pfs=h.Pm()-r.Pm():n.has("width-scale")&&(this.Pfs=h.Pm()/r.Pm()),n.has("height-abs")?this.Efs=h.jm()-r.jm():n.has("height-scale")&&(this.Efs=h.jm()/r.jm())}else this.Cfs=Tf.Rr(r.jM(),r.HM(),h.jM(),h.HM())}}}tv(){const t=this.Ifs,s=this.fJt,i={uid:this.Tfs&&!this.Tfs.Sj()?this.Tfs.f4():-1,m:s,d:this.Ofs};return"rope"===s||"bar"===s?i.pd=this.Cfs:"properties"===s&&(i.ps=[...this.Ifs],t.has("imagepoint")?i.ip=this.Afs:t.has("x")&&t.has("y")?(i.pa=this.Rfs,i.pd=this.Cfs):(t.has("x")&&(i.dx=this.Yls),t.has("y")&&(i.dy=this.$ls)),t.has("angle")&&(i.da=this.Ffs,i.lka=this.bns),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.Pfs),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.Efs),t.has("z"))&&(i.dz=this.Dfs),i}sv(t){const s=t.m,i=this.Ifs;if(i.clear(),this._fs=t.uid,"number"==typeof s)this.Bfs(t);else if(this.fJt=s,t.hasOwnProperty("d")&&(this.Ofs=!!t.d),"rope"===s||"bar"===s)this.Cfs=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.Afs=t.ip:i.has("x")&&i.has("y")?(this.Rfs=t.pa,this.Cfs=t.pd):(i.has("x")&&(this.Yls=t.dx),i.has("y")&&(this.$ls=t.dy)),i.has("angle")&&(this.Ffs=t.da,this.bns=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.Pfs=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.Efs=t.dh),i.has("z")&&(this.Dfs=t.dz)}}Bfs(t){const s=this.Ifs,i=t.msa,e=t.tsa,h=t.pa,r=t.pd,n=t.m;switch(n){case 0:this.fJt="properties",s.add("x").add("y").add("angle"),this.Rfs=h,this.Cfs=r,this.Ffs=i-e,this.bns=t.lka;break;case 1:this.fJt="properties",s.add("x").add("y"),this.Rfs=h,this.Cfs=r;break;case 2:this.fJt="properties",s.add("angle"),this.Ffs=i-e,this.bns=t.lka;break;case 3:this.fJt="rope",this.Cfs=t.pd;break;case 4:this.fJt="bar",this.Cfs=t.pd}}tK(){-1===this._fs?this.kfs(null):(this.kfs(this.bf.WO(this._fs)),this._fs=-1)}PZt(t){this.Tfs===t&&(this.kfs(null),this.Ofs)&&this.bf.r4(this.Ci)}uGt(){const r=this.Tfs;if(r&&!r.Sj()){let i=r.zO(),t=this.Ci,e=t.zO(),s=this.fJt,h=!1;if("rope"===s||"bar"===s){const n=Tf.Rr(e.jM(),e.HM(),i.jM(),i.HM());if(n>this.Cfs||"bar"===s&&n<this.Cfs){const o=Tf.Pr(i.jM(),i.HM(),e.jM(),e.HM());e.gN(i.jM()+Math.cos(o)*this.Cfs,i.HM()+Math.sin(o)*this.Cfs),h=!0}}else{let t=this.Ifs,s=0;if(t.has("imagepoint")){const[a,l]=r.xMt(this.Afs);e.MMt(a,l)||(e.gN(a,l),h=!0)}else if(t.has("x")&&t.has("y")){const u=i.jM()+Math.cos(i.GetAngle()+this.Rfs)*this.Cfs,c=i.HM()+Math.sin(i.GetAngle()+this.Rfs)*this.Cfs;e.MMt(u,c)||(e.gN(u,c),h=!0)}else s=i.jM()+this.Yls,t.has("x")&&s!==e.jM()&&(e.VM(s),h=!0),s=i.HM()+this.$ls,t.has("y")&&s!==e.HM()&&(e.zM(s),h=!0);t.has("angle")&&(this.bns!==e.GetAngle()&&(this.Ffs=Tf._r(this.Ffs+(e.GetAngle()-this.bns))),(s=Tf._r(i.GetAngle()+this.Ffs))!==e.GetAngle()&&(e.G5(s),h=!0),this.bns=e.GetAngle()),t.has("width-abs")&&(s=i.Pm()+this.Pfs)!==e.Pm()&&(e.Bm(s),h=!0),t.has("width-scale")&&(s=i.Pm()*this.Pfs)!==e.Pm()&&(e.Bm(s),h=!0),t.has("height-abs")&&(s=i.jm()+this.Efs)!==e.jm()&&(e.Em(s),h=!0),t.has("height-scale")&&(s=i.jm()*this.Efs)!==e.jm()&&(e.Em(s),h=!0),t.has("z")&&(s=i.JM()+this.Dfs)!==e.JM()&&(e.qM(s),this.bf.ZO())}h&&e.mN()}}mGt(){const t="behaviors.pin.debugger";return[{title:"$"+this.q6().cf(),properties:[{name:t+".is-pinned",value:!!this.Tfs},{name:t+".pinned-uid",value:this.Tfs?this.Tfs.f4():0}]}]}}}{const _f=self.Ws;_f.rlt.Gfs.GY={Nfs(){return!!this.Tfs},Wfs(){return this.Ofs}}}{const If=self.Ws;If.rlt.Gfs.drt={jfs(t,s){this.Lfs(t,0===s?"rope":"bar")},Vfs(t,s,i,e,h,r,n){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),n&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.Lfs(t,"properties",o)},Ufs(t,s,i,e,h,r){const n=["imagepoint"];i&&n.push("angle"),r&&n.push("z"),1===e?n.push("width-abs"):2===e&&n.push("width-scale"),1===h?n.push("height-abs"):2===h&&n.push("height-scale"),this.Afs=s,this.Lfs(t,"properties",n)},Hfs(t){"rope"!==this.fJt&&"bar"!==this.fJt||(this.Cfs=Math.max(t,0))},zfs(t){this.Ofs=t},Jfs(){this.kfs(null),this.fJt="",this.Ifs.clear(),this.Afs=""},Gfs(t,s){switch(s){case 0:this.Lfs(t,"properties",["x","y","angle"]);break;case 1:this.Lfs(t,"properties",["x","y"]);break;case 2:this.Lfs(t,"properties",["angle"]);break;case 3:this.Lfs(t,"rope");break;case 4:this.Lfs(t,"bar")}}}}{const Cf=self.Ws;Cf.rlt.Gfs.prt={qfs(){return this.Tfs?this.Tfs.f4():-1}}}{const Rf=self.Ws;Rf.rlt.ATt=class extends Rf.eTt{constructor(t){super(t)}wr(){super.wr()}}}{const Af=self.Ws;Af.rlt.ATt.bIt=class extends Af.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const Pf=self.Ws,Ef=self.V6,Ff=(Pf.rlt.ATt.Instance=class extends Pf.uTt{constructor(t,s){super(t),this.O2t(!0),s&&this.O2t(s[0])}wr(){super.wr()}O2t(t){this.Ci.eRt(!!t)}nc(){return this.Ci.iRt()}tv(){return{e:this.nc()}}sv(t){this.O2t(t.e)}Krt(t){if(0===t)return this.nc()}ent(t,s){0===t&&this.O2t(s)}mGt(){return[{title:"$"+this.q6().cf(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this.nc(),Rjt:t=>this.O2t(t)}]}]}Ixt(){return self.Xfs}},new WeakMap);self.Xfs=class extends Ef{constructor(){super(),Ff.set(this,Ef.i4().L6())}set isEnabled(t){Ff.get(this).O2t(!!t)}get isEnabled(){return Ff.get(this).nc()}}}{const Df=self.Ws;Df.rlt.ATt.GY={nc(){return this.nc()}}}{const Of=self.Ws;Of.rlt.ATt.drt={O2t(t){this.O2t(t)}}}{const kf=self.Ws;kf.rlt.ATt.prt={}}{const Lf=self.Ws;Lf.rlt.RTt=class extends Lf.eTt{constructor(t){super(t)}wr(){super.wr()}}}{const Bf=self.Ws;Bf.rlt.RTt.bIt=class extends Bf.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const Nf=self.Ws,Wf=self.Ks,jf=self.V6,Vf=new Set,Uf=(Nf.rlt.RTt.Instance=class extends Nf.uTt{constructor(t,s){super(t),this.O2t(!0),s&&(this.O2t(s[0]),this.Wtt(s[1]))}wr(){super.wr()}O2t(t){this.Ci.sRt(!!t)}nc(){return this.Ci.tRt()}Wtt(s){const i=this.Ci.Sbt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}i8(){return this.Ci.Sbt().get("solidTags")||Vf}Yfs(){return[...this.i8()].join(" ")}tv(){return{e:this.nc()}}sv(t){this.O2t(t.e)}Krt(t){if(0===t)return this.nc()}ent(t,s){0===t&&this.O2t(s)}mGt(){return[{title:"$"+this.q6().cf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.nc(),Rjt:t=>this.O2t(t)},{name:"behaviors.solid.properties.tags.name",value:this.Yfs(),Rjt:t=>this.Wtt(t)}]}]}Ixt(){return self.$fs}},new WeakMap);self.$fs=class extends jf{constructor(){super(),Uf.set(this,jf.i4().L6())}set isEnabled(t){Uf.get(this).O2t(!!t)}get isEnabled(){return Uf.get(this).nc()}set tags(t){Wf.Re(t),Uf.get(this).Wtt(t)}get tags(){return Uf.get(this).Yfs()}}}{const Hf=self.Ws;Hf.rlt.RTt.GY={nc(){return this.nc()}}}{const zf=self.Ws;zf.rlt.RTt.drt={O2t(t){this.O2t(t)},Wtt(t){this.Wtt(t)}}}{const Jf=self.Ws;Jf.rlt.RTt.prt={}}{const qf=self.Ws;qf.rlt.Kfs=class extends qf.eTt{constructor(t){super(t)}wr(){super.wr()}}}{const Xf=self.Ws;Xf.rlt.Kfs.bIt=class extends Xf.aTt{constructor(t){super(t)}wr(){super.wr()}_xt(){}}}{const Yf=self.Ws,$f=self.Ks,Kf=self.V6,F=(Yf.rlt.Kfs.Instance=class extends Yf.uTt{constructor(t,s){super(t),this.hus=200,this.rus=600,this.nus=600,this.Zfs=0,this.Qfs=!0,this.t0s=!1,this.Uyt=!0,this.o_t=0,this.s0s=this.zO().GetAngle(),this.i0s=[],s&&(this.hus=s[0],this.rus=s[1],this.nus=s[2],this.Zfs=Yf.Ir(s[3]),this.Qfs=s[4],this.t0s=s[5],this.Uyt=s[6]),this.e0s=null,this.h0s=NaN,this.r0s=NaN,this.n0s=[0,0],this.o0s={LZ:this.n0s}}wr(){this.e0s&&(this.e0s.wr(),this.e0s=null),this.h0s=NaN,this.r0s=NaN,this.n0s=null,this.o0s=null,super.wr()}tv(){return{ms:this.hus,acc:this.rus,dec:this.nus,rs:this.Zfs,sa:this.Qfs,sos:this.t0s,s:this.o_t,ma:this.s0s,wp:this.i0s.map(t=>({x:t.x,y:t.y})),e:this.Uyt}}sv(t){this.hus=t.ms,this.rus=t.acc,this.nus=t.dec,this.Zfs=t.rs,this.Qfs=t.sa,this.t0s=t.sos,this.o_t=t.s,this.s0s=t.ma,this.i0s=t.wp.map(t=>({x:t.x,y:t.y})),this.kvt(t.e),this.Uyt&&0<this.i0s.length&&this.cGt()}a0s(t,s,i,e){i&&Yf.Hn(this.i0s),this.i0s.push({x:t,y:s,opts:e}),this.Uyt&&this.cGt()}l0s(){return this.i0s.length}u0s(t){return(t=Math.floor(t))<0||t>=this.i0s.length?0:this.i0s[t].x}c0s(t){return(t=Math.floor(t))<0||t>=this.i0s.length?0:this.i0s[t].y}Bus(){return 0<this.i0s.length}f0s(){Yf.Hn(this.i0s),this.o_t=0,this.Yxt()}d0s(){return 0<this.i0s.length?this.i0s[0].x:0}p0s(){return 0<this.i0s.length?this.i0s[0].y:0}m0s(){if(0<this.i0s.length){const t=this.i0s[0];if(t.opts)return t.opts.g0s}return!1}y0s(){if(0<this.i0s.length){const t=this.i0s[0];if(t.opts)return t.opts.g0s&&t.opts.S0s}return!1}w0s(){if(0<this.i0s.length){const t=this.i0s[0];if(t.opts)return t.opts.b0s}return NaN}M0s(){if(0<this.i0s.length){const t=this.i0s[0];if(t.opts)return t.opts.v0s}return NaN}x0s(t){this.Bus()&&(this.o_t=Math.min(t,this.hus))}zus(){return this.o_t}Yus(t){this.hus=Math.max(t,0),this.x0s(this.o_t)}$us(){return this.hus}G0s(){return this.Uyt&&this.Bus()&&this.m0s()?!!this.y0s():0!==this.Zfs}KK(){if(this.Uyt&&this.Bus()){let t=this.bf.ZD(this.Ci),r=this.Ci.zO(),s=r.jM(),i=r.HM(),e=r.GetAngle(),h=this.o_t,n=this.hus,o=this.rus,a=this.nus,l=this.d0s(),u=this.p0s(),c=Yf.Pr(s,i,l,u),f=!1;if(0<a&&1===this.i0s.length){const m=.5*h*h/a*1.0001;if(f=Yf.Ar(s,i,l,u)<=m*m){const g=Yf.Rr(s,i,l,u);h=Math.sqrt(2*a*g),n=h,this.o_t=h}}if(this.G0s()){const y=Yf.Er(this.s0s,c);if(y>Number.EPSILON){const S=y/this.Zfs,w=Yf.Rr(r.jM(),r.HM(),l,u),b=w/(2*Math.sin(y)),M=b*y;n=Math.min(n,Yf.Tr(M/S,0,this.hus))}}let d=f?-a:o,p=Math.min(h*t+.5*d*t*t,n*t);if(f){if(0<a&&(this.o_t=Math.max(this.o_t-a*t,0),0===this.o_t))return void this.T0s(r,l,u)}else this.o_t=0===o?n:Math.min(this.o_t+o*t,n);if(Yf.Ar(r.jM(),r.HM(),l,u)<=p*p)this.T0s(r,l,u);else{if(this.G0s()?this.s0s=Yf.Fr(this.s0s,c,this.Zfs*t):this.s0s=c,r.wN(Math.cos(this.s0s)*p,Math.sin(this.s0s)*p),this.Qfs){const v=this.m0s(),x=this.y0s();if(v&&!x){let t=this.M0s(),s=this.w0s(),i=r.jM(),e=r.HM();self.isNaN(this.r0s)&&(this.r0s=0),self.isNaN(t)&&(t=0);let h;h=this.r0s===t?(this.n0s[0]=this.h0s,this.n0s[1]=s,this.e0s.kZ(i,e,this.o0s)):this.e0s.Ry(i,e),r.G5(this.e0s.WZ(h[0],h[1]))}else r.G5(this.s0s),this.h0s=NaN,this.r0s=NaN}r.mN(),this._0s(s,i,e)}}}T0s(t,s,i){t.gN(s,i),t.mN();const e=this.i0s[0];e.opts&&e.opts.g0s?(this.h0s=e.opts.b0s,this.r0s=e.opts.v0s):(this.h0s=NaN,this.r0s=NaN),this.i0s.shift(),0===this.i0s.length&&(this.e0s&&(this.e0s.wr(),this.e0s=null,this.h0s=NaN,this.r0s=NaN),this.o_t=0,this.Yxt()),this.Hxt("arrived"),this.N4(Yf.rlt.Kfs.GY.I0s)}_0s(t,s,i){const e=this.bf.nD();if(this.t0s&&e.Nk(this.Ci)){this.f0s();const h=this.Ci.zO(),r=h.jM(),n=h.HM(),o=Yf.Pr(r,n,t,s),a=Yf.Rr(r,n,t,s);e.G3t(this.Ci,Math.cos(o),Math.sin(o),Math.max(a,1))||(h.gN(t,s),h.G5(i),h.mN()),this.Hxt("hitsolid"),this.N4(Yf.rlt.Kfs.GY.C0s)}}R0s(){return this.Qfs}A0s(t){this.Qfs=!!t}P0s(t){if(this.s0s=t,this.Uyt&&this.Qfs&&!this.Bus()){const s=this.zO();s.G5(this.s0s),s.mN()}}E0s(){return this.s0s}Kus(t){this.rus=Math.max(t,0)}Zus(){return this.rus}Qus(t){this.nus=Math.max(t,0)}tcs(){return this.nus}F0s(t){this.Zfs=Math.max(t,0)}D0s(){return this.Zfs}O0s(t){this.t0s=!!t}k0s(){return this.t0s}kvt(t){this.Uyt!==(t=!!t)&&(this.Uyt=t,this.Uyt&&this.Bus()?this.cGt():this.Yxt())}Bvt(){return this.Uyt}Krt(t){switch(t){case 0:return this.$us();case 1:return this.Zus();case 2:return this.tcs();case 3:return Yf.Cr(this.D0s());case 4:return this.R0s();case 5:return this.k0s();case 6:return this.Bvt()}}ent(t,s){switch(t){case 0:this.Yus(s);break;case 1:this.Kus(s);break;case 2:this.Qus(s);break;case 3:this.F0s(Yf.Ir(s));break;case 4:this.A0s(s);break;case 5:this.O0s(s);break;case 6:this.kvt(s)}}mGt(){const t="behaviors.moveto";return[{title:"$"+this.q6().cf(),properties:[{name:t+".debugger.speed",value:this.zus(),Rjt:t=>this.x0s(t)},{name:t+".debugger.angle-of-motion",value:Yf.Cr(this.E0s()),Rjt:t=>this.s0s=Yf.Ir(t)},{name:t+".debugger.target-x",value:this.d0s()},{name:t+".debugger.target-y",value:this.p0s()},{name:t+".debugger.waypoint-count",value:this.l0s()},{name:t+".properties.max-speed.name",value:this.$us(),Rjt:t=>this.Yus(t)},{name:t+".properties.acceleration.name",value:this.Zus(),Rjt:t=>this.Kus(t)},{name:t+".properties.deceleration.name",value:this.tcs(),Rjt:t=>this.Qus(t)},{name:t+".properties.rotate-speed.name",value:Yf.Cr(this.D0s()),Rjt:t=>this.F0s(Yf.Ir(t))},{name:t+".properties.enabled.name",value:this.Bvt(),Rjt:t=>this.kvt(t)}]}]}Ixt(){return self.L0s}},new WeakMap);self.L0s=class extends Kf{constructor(){super(),F.set(this,Kf.i4().L6())}B0s(t,s,i=!0){$f.Te(t),$f.Te(s),F.get(this).a0s(t,s,!!i)}N0s(){return F.get(this).d0s()}W0s(){return F.get(this).p0s()}j0s(){const t=F.get(this);return[t.d0s(),t.p0s()]}V0s(){return F.get(this).l0s()}U0s(t){return $f.Te(t),F.get(this).u0s(t)}H0s(t){return $f.Te(t),F.get(this).c0s(t)}z0s(t){$f.Te(t);const s=F.get(this);return[s.u0s(t),s.c0s(t)]}stop(){F.get(this).f0s()}get kcs(){return F.get(this).Bus()}get speed(){return F.get(this).zus()}set speed(t){$f.Te(t),F.get(this).x0s(t)}get _cs(){return F.get(this).$us()}set _cs(t){$f.Te(t),F.get(this).Yus(t)}get acceleration(){return F.get(this).Zus()}set acceleration(t){$f.Te(t),F.get(this).Kus(t)}get Ics(){return F.get(this).tcs()}set Ics(t){$f.Te(t),F.get(this).Qus(t)}get J0s(){return F.get(this).E0s()}set J0s(t){$f.Te(t),F.get(this).P0s(t)}get q0s(){return F.get(this).D0s()}set q0s(t){$f.Te(t),F.get(this).F0s(t)}get X0s(){return F.get(this).k0s()}set X0s(t){F.get(this).O0s(t)}get isEnabled(){return F.get(this).Bvt()}set isEnabled(t){F.get(this).kvt(t)}}}{const Zf=self.Ws;Zf.rlt.Kfs.GY={zcs(){return this.Bus()},Jcs(t,s){return Zf.compare(this.zus(),t,s)},nc(){return this.Bvt()},I0s(){return!0},C0s(){return!0}}}{const Qf=self.Ws;Qf.rlt.Kfs.drt={Y0s(t,s,i){this.a0s(t,s,0===i)},$0s(t,s,i){if(t){const e=t.e5(this.Ci);if(e&&e.zO()){const[h,r]=e.xMt(s);this.a0s(h,r,0===i)}}},K0s(i){const t=this.Ci.nlt(Qf.rlt.Pathfinding);if(t){const e=t._GetPath();if(0!==e.length)for(let t=0,s=e.length;t<s;++t){const h=e[t];this.a0s(h.x,h.y,0===t&&0===i)}}},Z0s(t,s,i){const e=Qf.Sr(Qf.SZ,t,s);if(e.EZ()){e.DZ(this.Ci.zO());let s=!0;for(const h of e.FZ())switch(h.jG()){case"line":{const r=h.jM(),n=h.HM();this.a0s(r,n,s&&0===i),s=!1;break}case"cubic-bezier":for(let t=0;t<=h._Q();t++){const o=t*h.IQ(),a=h.Map(o),l=a[0],u=a[1];this.a0s(l,u,s&&0===i,{g0s:!0,S0s:s,b0s:h.AQ(o),v0s:h.QF()}),s=!1}}this.e0s=e}else e.wr()},Q0s(t,s,i){const e=this.bf.Gtt().IK(t);e&&Qf.rlt.Kfs.drt.Z0s.call(this,e,s,i)},HW(){this.f0s()},tds(t){this.P0s(Qf.Ir(t))},sds(t){this.x0s(t)},Zcs(t){this.Yus(t)},qJt(t){this.Kus(t)},Qcs(t){this.Qus(t)},ids(t){this.F0s(Qf.Ir(t))},eds(t){this.O0s(t)},O2t(t){this.kvt(t)}}}{const t0=self.Ws;t0.rlt.Kfs.prt={dfs(){return this.zus()},pfs(){return this.$us()},mfs(){return this.Zus()},gfs(){return this.tcs()},bfs(){return t0.Cr(this.E0s())},hds(){return t0.Cr(this.D0s())},rds(){return this.d0s()},nds(){return this.p0s()},ods(){return this.l0s()},ads(t){return this.u0s(t)},lds(t){return this.c0s(t)}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},e=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,e,0;const s0=self.Ws;self.hwt=[()=>"LevelSystem",()=>0,()=>-10,()=>10,()=>"Robot Boundary",t=>{const s=t.pwt(0);return()=>s.WSt()},t=>{const s=t.pwt(0);return()=>s.WSt()+4},t=>{const s=t.pwt(0);return()=>s.WSt()+10},t=>{const s=t.pwt(0);return()=>s.WSt()+2},t=>{const s=t.pwt(0);return()=>s.WSt()-10},()=>"x",()=>1,()=>106.75,()=>"y",()=>60,t=>{const s=t.pwt(0).DSt();return()=>s("x")},t=>{const s=t.pwt(0).DSt();return()=>s("y")},t=>{const s=t.pwt(0).DSt();return()=>16*s("x")+8},t=>{const s=t.pwt(0).DSt();return()=>16*s("y")+7},()=>"",()=>7,t=>{const s=t.pwt(0).DSt();return()=>16*s("x")},t=>{const s=t.pwt(0).DSt();return()=>16*s("y")},()=>8,t=>{const s=t.pwt(0).DSt();return()=>16*s("x")+12},t=>{const s=t.pwt(0).DSt();return()=>16*s("y")+6},()=>2,t=>{const s=t.pwt(0).DSt();return()=>16*s("x")+4},t=>{const s=t.pwt(0);return()=>s.WSt()+32},t=>{const s=t.pwt(0);return()=>s.WSt()-32},t=>{const s=t.pwt(0);return()=>s.WSt()-16},t=>{const s=t.pwt(0),i=t.pwt(1),e=t.pwt(2),h=t.pwt(3).ewt();return()=>s.WSt()+(i.WSt()-e.WSt())/h.Wet()},t=>{const s=t.pwt(0);return()=>16*Math.round(s.WSt()/16)+8},()=>-100,()=>1e3,()=>"whee",t=>{const s=t.pwt(0);return()=>s0.Tr(Math.sqrt(Math.abs(s.ZSt()))/5,0,1.25)},t=>{const s=t.pwt(0),i=t.pwt(1).DSt();return()=>s0.Tr(s.ZSt()-2e3*i(),200,600)},t=>{const s=t.pwt(0),i=t.pwt(1).DSt();return()=>s0.Tr(s.ZSt()-2e3*i(),400,1500)},t=>{const s=t.pwt(0),i=t.pwt(1).DSt();return()=>s0.Tr(s.ZSt()+2e3*i(),0,1500)},t=>{const s=t.pwt(0);return()=>s.ZSt()},t=>{const s=t.pwt(0).DSt();return()=>100*s()},t=>{const s=t.pwt(0).ewt();return()=>s.Wet()/100*14},t=>{const s=t.pwt(0),i=t.pwt(1);return()=>s.HSt()/i.HSt()*14},t=>{const s=t.pwt(0).DSt(),i=t.pwt(1).DSt();return()=>s0.Tr(s()+i(),0,1)},()=>"Horimovement",()=>"Vertimovement",()=>"Roman",()=>"Walljump",()=>-1,()=>25,()=>"cling 1",t=>{const s=t.pwt(0);return()=>s.WSt()-.1},()=>-400,()=>200,()=>"Jump 1",()=>3,()=>100,()=>"cling 2",t=>{const s=t.pwt(0);return()=>s.WSt()+.1},()=>-200,()=>"Jump 2",()=>"Looks/Sound",t=>{const s=t.pwt(0).ewt();return()=>e("run ",s.Wet())},t=>{const s=t.pwt(0);return()=>s.ZSt()/15},t=>{const s=t.pwt(0).ewt();return()=>e("still ",s.Wet())},()=>.1,t=>{const s=t.pwt(0).ewt();return()=>e("Jump ",s.Wet())},t=>{const s=t.pwt(0).DSt();return()=>0+s(-10,-5)},()=>"swist 1",()=>"scrr",()=>"swist 2",()=>-1e3,t=>{const s=t.pwt(0).ewt();return()=>e("Fall ",s.Wet())},t=>{const s=t.pwt(0).ewt();return()=>2*(1.5-s.Wet())},t=>{const s=t.pwt(0),i=t.pwt(1).ewt();return()=>s.WSt()+2*(1.5-i.Wet())},()=>"LevelTransit",()=>-15,()=>15,()=>"Combat",t=>{const s=t.pwt(0).DSt();return()=>2*s()},t=>{const s=t.pwt(0).ewt();return()=>e("Up ",s.Wet())},()=>-350,()=>500,()=>5,()=>90,()=>.4,t=>{const s=t.pwt(0).ewt();return()=>e("Sair ",s.Wet())},()=>.5,t=>{const s=t.pwt(0).ewt();return()=>e("Nair ",s.Wet())},()=>"Sair 1",()=>250,()=>600,()=>-5,()=>"Sair 2",()=>-250,()=>1500,t=>{const s=t.pwt(0).ewt();return()=>e("Jab ",s.Wet())},t=>{const s=t.pwt(0);return()=>s0.Tr(s.ZSt(),-5,5)},()=>.2,()=>"Animation 1",t=>{const s=t.pwt(0).DSt(),i=t.pwt(1).DSt();return()=>s0.Tr(s()+10*i(),0,1)},()=>"Robot",()=>"RoboStart",t=>{const s=t.pwt(0);return()=>s.HSt()},t=>{const s=t.pwt(0).DSt();return()=>e("",Math.round(s(1,23)))},t=>{const s=t.pwt(0).DSt();return()=>1+s(-.5,.5)},()=>"RobotMovement",t=>{const s=t.pwt(0);return()=>s.WSt()+100},t=>{const s=t.pwt(0);return()=>s.WSt()-100},()=>150,t=>{const s=t.pwt(0);return()=>s.WSt()+3},t=>{const s=t.pwt(0);return()=>s.WSt()-3},t=>{const s=t.pwt(0);return()=>s.HSt()-50},t=>{const s=t.pwt(0);return()=>s.HSt()+50},t=>{const s=t.pwt(0).DSt();return()=>s(1,5)},t=>{const s=t.pwt(0).DSt();return()=>s(-50,50)},t=>{const s=t.pwt(0),i=t.pwt(1);return()=>s.HSt()+i.HSt()+2},t=>{const s=t.pwt(0),i=t.pwt(1);return()=>s.HSt()+i.HSt()-2},()=>"RoboLooks",t=>{const s=t.pwt(0),i=t.pwt(1);return()=>e(e("Walk ",s.HSt())+" ",i.HSt())},()=>"RoboAttack",t=>{const s=t.pwt(0);return()=>e("Attack ",s.HSt())+" 1"},()=>-300,t=>{const s=t.pwt(0);return()=>e("Attack ",s.HSt())+" 2"},()=>"RoboHurt",()=>175,t=>{const s=t.pwt(0).ewt(),i=t.pwt(1);return()=>2*-(s.Wet()-1.5)*200-s0.Tr(Math.round(400*Math.abs(i.ZSt())),0,100)},t=>{const s=t.pwt(0);return()=>-300+s0.Tr(Math.round(400*Math.abs(s.ZSt())),0,400)},t=>{const s=t.pwt(0);return()=>75+s0.Tr(Math.abs(100*s.ZSt()),0,50)},t=>{const s=t.pwt(0),i=t.pwt(1).ewt();return()=>e(e("Hurt ",s.HSt())+" ",i.Wet())},()=>.25,()=>"c",()=>20,t=>{const s=t.pwt(0);return()=>+s.ZSt()},()=>75,()=>30,()=>50,t=>{const s=t.pwt(0);return()=>s.ZSt()/3},t=>{const s=t.pwt(0),i=t.pwt(1).DSt();return()=>s.WSt()+i(-6,6)},t=>{const s=t.pwt(0),i=t.pwt(1).DSt();return()=>s.WSt()+i(-16,16)},t=>{const s=t.pwt(0),i=t.pwt(1).DSt();return()=>s.ZSt()+i(-40,40)},()=>"Text",t=>{const s=t.pwt(0),i=t.pwt(1).ewt();return()=>s.HSt()-i.Wet()},()=>"SystemEnd",()=>"System",t=>{const s=t.pwt(0),i=t.pwt(1).ewt(),e=t.pwt(2).DSt();return()=>s.WSt()+i.Wet()*e()},()=>"Controls",()=>"Animation 2",()=>.15,t=>{const s=t.pwt(0);return()=>s.WSt()+480},t=>{const s=t.pwt(0);return()=>s.WSt()-480},()=>"BackgroundScrolling",()=>-411,t=>{const s=t.pwt(0);return()=>s.WSt()-320},()=>-535,()=>-1035,t=>{const s=t.pwt(0);return()=>s.WSt()-330}]}var t=self.Ws;self.B5t=function(){return[t._Y.W8t,t._Y.$ht,t.rlt.Shs,t._Y.wHt,t._Y.MJt,t.rlt.grs,t.rlt.pls,t.rlt.di,t._Y.WXt,t.rlt.Gfs,t.rlt.ATt,t.rlt.RTt,t._Y.oKt,t._Y.Audio,t._Y.gamepad,t._Y.Keyboard,t._Y.Iss,t._Y.Touch,t.rlt.Kfs,t._Y.TY.GY.Rpt,t._Y.TY.GY.xY,t.rlt.grs.drt.Jas,t.rlt.grs.drt.Bas,t._Y.$ht.drt.WPt,t._Y.$ht.drt.bMt,t._Y.$ht.prt.m2t,t._Y.$ht.prt.g2t,t.rlt.Gfs.drt.Vfs,t._Y.MJt.drt.bMt,t.rlt.Gfs.drt.zfs,t._Y.TY.GY.WNt,t._Y.wHt.GY.q7t,t._Y.TY.prt.G8t,t._Y.TY.drt.e6t,t._Y.$ht.drt.cVt,t._Y.Audio.GY.eQt,t._Y.Audio.drt.Play,t._Y.TY.GY.TNt,t._Y.TY.drt.QNt,t._Y.TY.GY.pNt,t._Y.wHt.drt.szt,t._Y.Audio.drt.t8,t.rlt.di.prt.vfs,t.rlt.di.drt.Zcs,t.rlt.di.prt.pfs,t._Y.TY.prt.KD,t.rlt.di.drt.qJt,t.rlt.di.prt.mfs,t.rlt.di.drt.SetGravity,t.rlt.di.prt.Fqt,t._Y.$ht.drt.Zvt,t.rlt.di.prt.Mfs,t._Y.$ht.drt.t2t,t._Y.$ht.drt.FUt,t._Y.TY.drt.n6t,t._Y.TY.prt.timescale,t._Y.TY.drt.ZNt,t._Y.Keyboard.GY.gss,t._Y.TY.drt.Apt,t._Y.TY.GY.vNt,t._Y.$ht.prt.l2t,t.rlt.RTt.drt.O2t,t._Y.TY.GY.dgt,t._Y.$ht.GY.pvt,t._Y.WXt.drt.oB,t.rlt.di.drt.sfs,t._Y.$ht.drt.EUt,t._Y.TY.drt.$Nt,t.rlt.di.drt.afs,t._Y.TY.GY.NNt,t._Y.$ht.GY.dvt,t._Y.$ht.drt.VM,t.rlt.di.drt.rfs,t.rlt.di.drt.hfs,t._Y.Keyboard.GY.rss,t._Y.TY.GY.mNt,t._Y.Audio.drt.HW,t.rlt.di.GY.zcs,t.rlt.di.GY.qcs,t._Y.$ht.drt.kUt,t.rlt.di.prt.dfs,t._Y.Audio.drt.fQt,t.rlt.di.GY.Eus,t._Y.$ht.GY.XUt,t._Y.TY.prt.random,t._Y.$ht.drt.QUt,t._Y.TY.GY.GNt,t._Y.MJt.drt.vMt,t.rlt.di.GY.$cs,t._Y.$ht.GY.lvt,t._Y.TY.drt.G6t,t.rlt.pls.drt.O2t,t.rlt.di.drt.efs,t._Y.TY.drt.Bn,t._Y.TY.drt.T6t,t.rlt.grs.drt.Vas,t._Y.$ht.drt.Yvt,t._Y.TY.drt.KNt,t._Y.$ht.drt.G5,t._Y.$ht.GY.qUt,t.rlt.di.GY.Ous,t._Y.$ht.GY.gUt,t._Y.$ht.drt.rHt,t._Y.$ht.GY.$vt,t._Y.$ht.GY.mMt,t._Y.$ht.GY.Wvt,t._Y.$ht.drt.s2t,t.rlt.di.drt.ifs,t._Y.TY.GY.gNt,t._Y.TY.GY.Id,t.rlt.di.GY.Xcs,t._Y.$ht.GY.Nvt,t._Y.MJt.drt.i9t,t._Y.MJt.drt.DJt,t._Y.TY.GY.BNt,t.rlt.grs.drt.jas,t._Y.$ht.drt.oB,t.rlt.di.drt.O2t,t._Y.WXt.GY.n$t,t._Y.WXt.drt.u$t,t._Y.WXt.drt.l$t,t._Y.W8t.drt.VM,t._Y.W8t.prt.m2t,t._Y.Touch.GY.des,t._Y.Iss.GY.cis,t.rlt.Kfs.GY.zcs,t.rlt.Kfs.drt.Y0s,t._Y.TY.drt.v6t,t._Y.W8t.GY.mMt]},self.sBt=[{uds:0},{cds:0},{fds:0},{dds:0},{pds:0},{mds:0},{gds:0},{yds:0},{Sds:0},{wds:0},{bds:0},{Mds:0},{$ht:0},{vds:0},{grs:0},{head:0},{xds:0},{Body:0},{Gds:0},{di:0},{Tds:0},{_ds:0},{Ids:0},{Cds:0},{Rds:0},{Ads:0},{Pds:0},{Eds:0},{Fds:0},{Dds:0},{Ods:0},{kds:0},{Gfs:0},{Lds:0},{Bds:0},{Nds:0},{Wds:0},{jds:0},{Vds:0},{Uds:0},{Hds:0},{zds:0},{Jds:0},{qds:0},{Xds:0},{Yds:0},{$ds:0},{Kds:0},{Zds:0},{Qds:0},{t1s:0},{Audio:0},{Gamepad:0},{Keyboard:0},{Iss:0},{Touch:0},{s1s:0},{i1s:0},{e1s:0},{h1s:0},{r1s:0},{n1s:0},{o1s:0},{a1s:0},{Text:0},{Kfs:0},{l1s:0},{u1s:0},{c1s:0},{f1s:0},{d1s:0},{p1s:0},{m1s:0},{rds:0},{g1s:0},{y1s:0},{S1s:0},{w1s:0},{b1s:0},{M1s:0},{v1s:0},{bIt:0},{x1s:0},{G1s:0},{T1s:0},{MJt:0},{_1s:0},{I1s:0},{C1s:0},{R1s:0},{A1s:0},{P1s:0},{E1s:0},{F1s:0},{D1s:0},{O1s:0},{k1s:0},{L1s:0},{B1s:0},{N1s:0},{W1s:0},{j1s:0},{V1s:0},{U1s:0},{H1s:0},{z1s:0},{J1s:0},{q1s:0}],self.X1s={uds:class extends self.Ajt{},cds:class extends self.Ajt{},fds:class extends self.Ajt{},pds:class extends self.LUt{},mds:class extends self.O7t{},gds:class extends self.LUt{},yds:class extends self.H9t{},Sds:class extends self.LUt{},wds:class extends self.LUt{},bds:class extends self.LUt{},Mds:class extends self.O7t{},$ht:class extends self.LUt{},vds:class extends self.LUt{},head:class extends self.LUt{},Body:class extends self.LUt{},Gds:class extends self.LUt{},Tds:class extends self.LUt{},Ads:class extends self.LUt{},Pds:class extends self.LUt{},Eds:class extends self.XYt{},Fds:class extends self.LUt{},Dds:class extends self.LUt{},Ods:class extends self.LUt{},kds:class extends self.LUt{},Lds:class extends self.LUt{},Bds:class extends self.LUt{},Nds:class extends self.LUt{},Wds:class extends self.XYt{},Vds:class extends self.O7t{},Hds:class extends self.O7t{},zds:class extends self.E6{},Jds:class extends self.E6{},qds:class extends self.E6{},Xds:class extends self.E6{},Yds:class extends self.LUt{},$ds:class extends self.LUt{},Kds:class extends self.LUt{},Zds:class extends self.H9t{},Qds:class extends self.H9t{},t1s:class extends self.LUt{},Audio:class extends self.KB{},Gamepad:class extends self.KB{},Keyboard:class extends self.KB{},Iss:class extends self.KB{},Touch:class extends self.KB{},e1s:class extends self.LUt{},h1s:class extends self.LUt{},r1s:class extends self.LUt{},n1s:class extends self.LUt{},o1s:class extends self.LUt{},a1s:class extends self.E6{},Text:class extends self.XYt{},l1s:class extends self.LUt{},G1s:class extends self.LUt{},T1s:class extends self.LUt{},MJt:class extends self.H9t{},_1s:class extends self.LUt{},I1s:class extends self.LUt{}};