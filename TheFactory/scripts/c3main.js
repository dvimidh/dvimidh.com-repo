import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let O=function(t){vh=t},L=function(t){return t*Oh},B=function(t,s){return Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},N=function(){var t=new vh(4);return vh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},j=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},V=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},U=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},H=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},X=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},$=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new vh(6);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new vh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new vh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=h*a+n*l,t[2]=e*u+r*c,t[3]=h*u+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},St=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},wt=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},Mt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},vt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Gt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Tt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=Mh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=Mh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=Mh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(r-u)<=Mh*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=Mh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new vh(9);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Rt=function(t){var s=new vh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},At=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Pt=function(t,s,i,e,h,r,n,o,a){var l=new vh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=r,l[6]=n,l[7]=o,l[8]=a,l},Et=function(t,s,i,e,h,r,n,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Dt=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},kt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*n-o*l,c=-s*r+o*a,f=l*r-n*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},Ot=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=n*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*l-n*a,t[7]=e*a-i*l,t[8]=i*n-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],S=i[7],i=i[8];return t[0]=c*e+f*n+d*l,t[1]=c*h+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*l,t[4]=p*h+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+S*n+i*l,t[7]=y*h+S*o+i*u,t[8]=y*r+S*a+i*s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+l,t[7]=c*h+i*o+u,t[8]=c*r+i*a+s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},jt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},Vt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-S*(c=c*s-d*m)+w*T+b*(u=u*s-d*p)-M*G+v*x)?(t[0]=(o*f-a*c+l*T)*(d=1/d),t[1]=(a*u-n*f-l*G)*d,t[2]=(n*c-o*u+l*x)*d,t[3]=(h*c-e*f-r*T)*d,t[4]=(i*f-h*u+r*G)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*v-g*M+s*b)*d,t[7]=(g*w-p*v-s*S)*d,t[8]=(p*M-m*w+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Xt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Yt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},$t=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=Mh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=Mh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=Mh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=Mh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=Mh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=Mh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=Mh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=Mh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new vh(16);return vh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new vh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m){var g=new vh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,R=y*C-S*I+w*_+b*T-M*G+v*x;return R?(t[0]=(o*C-a*I+l*_)*(R=1/R),t[1]=(h*I-e*C-r*_)*R,t[2]=(m*v-g*M+s*b)*R,t[3]=(f*M-c*v-d*b)*R,t[4]=(a*T-n*C-l*G)*R,t[5]=(i*C-h*T+r*G)*R,t[6]=(g*w-p*v-s*S)*R,t[7]=(u*v-f*w+d*S)*R,t[8]=(n*I-o*T+l*x)*R,t[9]=(e*T-i*I-r*x)*R,t[10]=(p*M-m*w+s*y)*R,t[11]=(c*w-u*M-d*y)*R,t[12]=(o*G-n*_-a*x)*R,t[13]=(i*_-e*G+h*x)*R,t[14]=(m*S-p*b-g*y)*R,t[15]=(u*b-c*S+f*y)*R,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,S=i*a-h*n,w=i*l-r*n,b=e*a-h*o,M=e*l-r*o,v=h*l-r*a,x=u*m-c*p,G=u*g-f*p,T=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-r*_,t[2]=m*v-g*M+s*b,t[3]=f*M-c*v-d*b,t[4]=a*T-n*C-l*G,t[5]=i*C-h*T+r*G,t[6]=g*w-p*v-s*S,t[7]=u*v-f*w+d*S,t[8]=n*I-o*T+l*x,t[9]=e*T-i*I-r*x,t[10]=p*M-m*w+s*y,t[11]=c*w-u*M-d*y,t[12]=o*G-n*_-a*x,t[13]=i*_-e*G+h*x,t[14]=m*S-p*b-g*y,t[15]=u*b-c*S+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*u,y=o*f-l*u,S=a*f-l*c;return t[7]*(s*S-i*y+e*g)-t[3]*(h*S-r*y+n*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],S=i[0],w=i[1],b=i[2],M=i[3];return t[0]=S*e+w*o+b*c+M*m,t[1]=S*h+w*a+b*f+M*g,t[2]=S*r+w*l+b*d+M*y,t[3]=S*n+w*u+b*p+M*s,t[4]=(S=i[4])*e+(w=i[5])*o+(b=i[6])*c+(M=i[7])*m,t[5]=S*h+w*a+b*f+M*g,t[6]=S*r+w*l+b*d+M*y,t[7]=S*n+w*u+b*p+M*s,t[8]=(S=i[8])*e+(w=i[9])*o+(b=i[10])*c+(M=i[11])*m,t[9]=S*h+w*a+b*f+M*g,t[10]=S*r+w*l+b*d+M*y,t[11]=S*n+w*u+b*p+M*s,t[12]=(S=i[12])*e+(w=i[13])*o+(b=i[14])*c+(M=i[15])*m,t[13]=S*h+w*a+b*f+M*g,t[14]=S*r+w*l+b*d+M*y,t[15]=S*n+w*u+b*p+M*s,t},us=function(t,s,i){var e,h,r,n,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=n*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,l,u,c,f,d,p,m,g,y,S,w,b,M,v,x,G=e[0],T=e[1],e=e[2],_=Math.hypot(G,T,e);return _<Mh?null:(G*=_=1/_,T*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],S=G*T*(h=1-i)-e*_,w=T*T*h+i,b=e*T*h+G*_,M=G*e*h+T*_,v=T*e*h-G*_,x=e*e*h+i,t[0]=r*(i=G*G*h+i)+(l=s[4])*(y=T*G*h+e*_)+(d=s[8])*(e=e*G*h-T*_),t[1]=n*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*S+l*w+d*b,t[5]=n*S+u*w+p*b,t[6]=o*S+c*w+m*b,t[7]=a*S+f*w+g*b,t[8]=r*M+l*v+d*x,t[9]=n*M+u*v+p*x,t[10]=o*M+c*v+m*x,t[11]=a*M+f*v+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+l*e,t[6]=n*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-r*e,t[10]=u*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-l*e,t[2]=n*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+l*i,t[10]=n*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+l*e,t[2]=n*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-r*e,t[6]=u*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ss=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<Mh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},ws=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Ms=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},vs=function(t,s){var i=new vh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+u*e+a*r-l*h)/c,i[1]=2*(a*n+u*h+l*e-o*r)/c,i[2]=2*(l*n+u*r+o*h-a*e)/c):(i[0]=2*(o*n+u*e+a*r-l*h),i[1]=2*(a*n+u*h+l*e-o*r),i[2]=2*(l*n+u*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},l=function(t,s){var i=new vh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(u=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(h-n)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-n)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Gs=function(t,s,i,e){var h=(n=s[0])*(u=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ts=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,S=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=S,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(S*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),l=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Rs=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),l=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*l,t[15]=1,t},As=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},Ps=function(t,s,i,e){var h,r,n,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<Mh&&Math.abs(l-d)<Mh&&Math.abs(s-i)<Mh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,r=i*h-f*u,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+r*l+n*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Es=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-n*i)*e+(n=n*l-o*a)*n)&&(c*=u=1/Math.sqrt(u),e*=u,n*=u),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=l*n-i*e,t[5]=i*c-a*n,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Ds=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},ks=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},Os=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Bs=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Ns=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],S=s[1],w=s[2],b=s[3],M=s[4],v=s[5],x=s[6],G=s[7],T=s[8],_=s[9],I=s[10],C=s[11],R=s[12],A=s[13],P=s[14],s=s[15];return Math.abs(i-y)<=Mh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-S)<=Mh*Math.max(1,Math.abs(e),Math.abs(S))&&Math.abs(h-w)<=Mh*Math.max(1,Math.abs(h),Math.abs(w))&&Math.abs(r-b)<=Mh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-M)<=Mh*Math.max(1,Math.abs(n),Math.abs(M))&&Math.abs(o-v)<=Mh*Math.max(1,Math.abs(o),Math.abs(v))&&Math.abs(a-x)<=Mh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-G)<=Mh*Math.max(1,Math.abs(l),Math.abs(G))&&Math.abs(u-T)<=Mh*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(c-_)<=Mh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=Mh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=Mh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-R)<=Mh*Math.max(1,Math.abs(p),Math.abs(R))&&Math.abs(m-A)<=Mh*Math.max(1,Math.abs(m),Math.abs(A))&&Math.abs(g-P)<=Mh*Math.max(1,Math.abs(g),Math.abs(P))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new vh(3);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},js=function(t){var s=new vh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},Vs=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new vh(3);return e[0]=t,e[1]=s,e[2]=i,e},Us=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Hs=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Xs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Ys=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},$s=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},S=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},w=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(S(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},li=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,l=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*n,t},ui=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,l=o*n;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Dh()*Math.PI,e=2*Dh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,l=e*n-h*r,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=r+(o*=h)+(u*=2),t[1]=n+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},Si=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&S(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},wi=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},Mi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},vi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=Mh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=Mh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new vh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Gi=function(t,s,i,e){var h=new vh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Ti=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Ri=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ai=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Pi=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ei=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Di=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},ki=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},Oi=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Bi=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Ni=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},M=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},v=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},ji=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},Vi=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Ui=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*n-s*r,t[2]=e*a-l*n+s*h,t[3]=-e*o+l*r-u*h,t},Hi=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Dh()-1)*i+(e=2*Dh()-1)*e););for(;1<=(o=(h=2*Dh()-1)*h+(r=2*Dh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*h,u=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=l*i+(e=-n*e-o*h-a*r)*-n+u*-a-c*-o,t[1]=u*i+e*-o+c*-n-l*-a,t[2]=c*i+e*-a+l*-o-u*-n,t[3]=s[3],t},Xi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Yi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},$i=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=Mh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=Mh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=Mh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},G=function(){var t=new vh(4);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},T=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return Mh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},R=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},A=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return A(t,s),Hh(t,t,i),R(t,t),t},P=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=n*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=Mh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Dh(),i=Dh(),e=Dh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},E=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:kh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"xzy":t[0]=n*l*c-o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c+n*a*u;break;case"yxz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;case"yzx":t[0]=n*l*c+o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c-n*a*u;break;case"zxy":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"zyx":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-Mh},ue=function(){var t=new vh(8);return vh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new vh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new vh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new vh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=G(),e=(l(i,s),new vh(3));return a(e,s),F(t,i,e),t},D=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},Se=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},we=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},Me=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},ve=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+l,t[5]=n*a+r*o-e*i+u,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return _(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return I(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return C(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],l=s[3];return t[0]=n*i+l*e+o*r-a*h,t[1]=o*i+l*h+a*e-n*r,t[2]=a*i+l*r+n*h-o*e,t[3]=l*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+l*h+a*e-n*r,t[6]=a*i+l*r+n*h-o*e,t[7]=l*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*n+h*a-r*o,t[1]=h*l+s*o+r*n-e*a,t[2]=r*l+s*a+e*o-h*n,t[3]=s*l-e*n-h*o-r*a,t[4]=e*(l=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*l+s*o+r*n-e*a,t[6]=r*l+s*a+e*o-h*n,t[7]=s*l-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,l;return Math.abs(e)<Mh?D(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/l,r=n*i[1]/l,n=n*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-l*n,t[2]=a*i+e*n+l*r-o*h,t[3]=e*i-l*h-o*r-a*n,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+l*r+a*h-e*n,t[6]=a*i+l*n+e*r-o*h,t[7]=l*i-e*h-o*r-a*n,t)},Re=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ae=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*u+n*o+h*l-r*a+c*i+s*p+f*g-d*m,t[5]=h*u+n*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+n*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*u-e*o-h*a-r*l+s*i-c*p-f*m-d*g,t},Pe=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Ee=function(t,s,i,e){var h=1-e;return $h(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},De=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},ke=function(t,s){var i,e,h,r,n,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(n=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-r*l)/u),t},Oe=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Be=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=Mh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=Mh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=Mh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=Mh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=Mh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=Mh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=Mh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))},k=function(){var t=new vh(2);return vh!=Float32Array&&(t[0]=0,t[1]=0),t},Ne=function(t){var s=new vh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new vh(2);return i[0]=t,i[1]=s,i},je=function(t,s){return t[0]=s[0],t[1]=s[1],t},Ve=function(t,s,i){return t[0]=s,t[1]=i,t},Ue=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},He=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Xe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Ye=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},$e=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Dh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},Sh=function(t){return"vec2("+t[0]+", "+t[1]+")"},wh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=Mh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=Mh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,S,w,b,x,G,T,_,I,C,R,A,P,E,F,D,k,Mh=1e-6,vh="undefined"!=typeof Float32Array?Float32Array:Array,Dh=Math.random,kh="zyx",Oh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:Mh,get S(){return vh},M:Dh,G:kh,T:O,_:L,equals:B},Bh=Object.freeze({__proto__:null,create:N,clone:W,I:j,identity:V,C:U,set:H,R:z,A:J,P:q,F:X,multiply:t,rotate:Y,scale:$,D:K,O:Z,L:Q,B:tt,N:st,add:it,W:s,j:et,equals:ht,V:rt,U:nt,mul:t,sub:s}),Nh=Object.freeze({__proto__:null,create:ot,clone:at,I:lt,identity:ut,C:ct,set:ft,A:dt,F:pt,multiply:i,rotate:mt,scale:gt,translate:yt,D:St,O:wt,H:bt,L:Mt,B:vt,add:xt,W:e,V:Gt,U:Tt,j:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,J:Ct,clone:Rt,I:At,C:Pt,set:Et,identity:Ft,R:Dt,A:kt,P:Ot,F:Lt,multiply:r,translate:Bt,rotate:Nt,scale:Wt,H:jt,D:Vt,O:Ut,X:Ht,Y:zt,$:Jt,K:qt,L:Xt,B:Yt,add:$t,W:n,V:Kt,U:Zt,j:Qt,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,I:es,C:hs,set:rs,identity:p,R:ns,A:os,P:as,F:ls,multiply:o,translate:us,scale:cs,rotate:fs,Z:ds,tt:ps,it:ms,H:gs,O:ys,D:Ss,et:ws,ht:bs,nt:Ms,ot:f,lt:vs,ut:a,ct:d,dt:l,gt:xs,yt:Gs,St:Ts,Y:_s,bt:Is,Mt:u,perspective:u,vt:Cs,xt:Rs,Gt:c,ortho:c,Tt:As,_t:Ps,It:Es,L:Fs,B:Ds,add:ks,W:Os,V:Ls,U:Bs,j:Ns,equals:Ws,mul:o,sub:Os}),Yh=Js,Zh=qs,Uh=Xs,Qh=ii,tr=ei,jh=Vs,sr=hi,Fh=m(),Gh=Object.freeze({__proto__:null,create:m,clone:js,length:Vs,C:g,I:Us,set:Hs,add:zs,W:Js,multiply:qs,Ct:Xs,ceil:Ys,floor:$s,min:Ks,max:Zs,round:Qs,scale:ti,Rt:si,At:ii,Pt:ei,Et:hi,Ft:ri,inverse:ni,normalize:y,Dt:S,kt:w,Ot:oi,Lt:ai,Bt:li,Nt:ui,random:ci,Wt:fi,jt:di,Vt:pi,Z:mi,tt:gi,it:yi,angle:Si,Ut:wi,L:bi,j:Mi,equals:vi,sub:Yh,mul:Zh,div:Uh,Ht:Qh,zt:tr,Jt:jh,qt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),Yh=Ci,Zh=Ri,Uh=Ai,Qh=Bi,tr=Ni,sr=M,ir=v,Eh=b(),Vh=Object.freeze({__proto__:null,create:b,clone:xi,C:Gi,I:Ti,set:_i,add:Ii,W:Ci,multiply:Ri,Ct:Ai,ceil:Pi,floor:Ei,min:Fi,max:Di,round:ki,scale:Oi,Rt:Li,At:Bi,Pt:Ni,length:M,Et:v,Ft:Wi,inverse:ji,normalize:Vi,Dt:x,kt:Ui,Ot:Hi,random:zi,Wt:Ji,Vt:qi,Ut:Xi,L:Yi,j:$i,equals:Ki,sub:Yh,mul:Zh,div:Uh,Ht:Qh,zt:tr,Jt:sr,qt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Eh[0]=t[n],Eh[1]=t[n+1],Eh[2]=t[n+2],Eh[3]=t[n+3],h(Eh,Eh,r),t[n]=Eh[0],t[n+1]=Eh[1],t[n+2]=Eh[2],t[n+3]=Eh[3];return t}}),Yh=xi,Zh=Gi,Uh=Ti,Qh=_i,tr=Ii,sr=se,Hh=Oi,zh=x,ir=Hi,er=Jh=M,hr=qh=v,Xh=Vi,rr=$i,Rh=m(),Ah=g(1,0,0),Ph=g(0,1,0),nr=function(t,s,i){var e=S(s,i);return e<-.999999?(w(Rh,Ah,s),jh(Rh)<1e-6&&w(Rh,Ph,s),y(Rh,Rh),T(t,Rh,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(w(Rh,s,i),t[0]=Rh[0],t[1]=Rh[1],t[2]=Rh[2],t[3]=1+e,Xh(t,t))},Ih=G(),Ch=G(),or=function(t,s,i,e,h,r){return P(Ih,s,h,r),P(Ch,i,e,r),P(t,Ih,Ch,2*r*(1-r)),t},_h=h(),Yh=Object.freeze({__proto__:null,create:G,identity:Zi,Xt:T,Yt:Qi,$t:te,multiply:se,Z:_,tt:I,it:C,Kt:ie,exp:R,Zt:A,pow:ee,Lt:P,random:he,A:re,Qt:ne,ts:E,es:oe,L:ae,clone:Yh,C:Zh,I:Uh,set:Qh,add:tr,mul:sr,scale:Hh,Dt:zh,Ot:ir,length:Jh,Jt:er,Et:qh,qt:hr,normalize:Xh,j:rr,equals:le,hs:nr,ns:or,os:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],Xh(t,E(t,_h))}}),$h=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,C:fe,ls:de,ot:F,H:pe,D:me,J:ge,I:D,identity:ye,set:Se,us:Uh,ds:we,gs:Uh,ys:be,ut:Me,translate:ve,Z:xe,tt:Ge,it:Te,Ss:_e,ws:Ie,bs:Ce,add:Re,multiply:Ae,mul:Ae,scale:Pe,Dt:$h,Ot:Ee,A:Fe,Qt:De,length:Jh,Jt:Jh,Et:Kh,qt:Zh,normalize:ke,L:Oe,j:Le,equals:Be}),tr=ih,sr=He,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Th=k(),or=Object.freeze({__proto__:null,create:k,clone:Ne,C:We,I:je,set:Ve,add:Ue,W:He,multiply:ze,Ct:Je,ceil:qe,floor:Xe,min:Ye,max:$e,round:Ke,scale:Ze,Rt:Qe,At:th,Pt:sh,length:ih,Et:eh,Ft:hh,inverse:rh,normalize:nh,Dt:oh,kt:ah,Ot:lh,random:uh,Ms:ch,vs:fh,jt:dh,Wt:ph,rotate:mh,angle:gh,Ut:yh,L:Sh,j:wh,equals:bh,Jt:tr,sub:sr,mul:ir,div:er,Ht:hr,zt:rr,qt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Th[0]=t[n],Th[1]=t[n+1],h(Th,Th,r),t[n]=Th[0],t[n+1]=Th[1];return t}}),globalThis.xs=Lh,globalThis.xs.Gs=Bh,globalThis.xs.Ts=Nh,globalThis.xs._s=Wh,globalThis.xs.Is=xh,globalThis.xs.Cs=Yh,globalThis.xs.Rs=Qh,globalThis.xs.As=or,globalThis.xs.Ps=Gh,globalThis.xs.Es=Vh}var Th,_h,Ih,Ch,Rh,Ah,Ph,Eh,Fh,Mh,vh,Dh,kh,Oh,Lh,Bh,Nh,Wh,xh,jh,Gh,Vh,Uh,Hh,zh,Jh,qh,Xh,Yh,$h,Kh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,D,k,O,L;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},G=function(t,s,i){return 0<=o(t,s,i)},T=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=k,(r=D)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},R=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},A=function(t,s){return T(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=O,r=L;if(G(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&G(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},P=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(A(t,r))for(var n=0;n<t.length;++n)if(u(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},E=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],S=[],w=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var M=0;M<t.length;++M)if(A(w,M)){i.push(w[M]);for(var u=c=Number.MAX_VALUE,v=0;v<t.length;++v)x(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M-1),C(w,M),C(w,v-1))&&(l=E(C(w,M-1),C(w,M),C(w,v),C(w,v-1)),T(C(w,M+1),C(w,M),l))&&(f=I(w[M],l))<c&&(c=f,a=l,m=v),x(C(w,M+1),C(w,M),C(w,v+1))&&_(C(w,M+1),C(w,M),C(w,v))&&(l=E(C(w,M+1),C(w,M),C(w,v),C(w,v+1)),x(C(w,M-1),C(w,M),l))&&(f=I(w[M],l))<u&&(u=f,o=l,p=v);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),M<p?(R(y,w,M,p+1),y.push(l),S.push(l),0!==m&&R(S,w,m,w.length),R(S,w,0,M+1)):(0!==M&&R(y,w,M,w.length),R(y,w,0,p+1),y.push(l),S.push(l),R(S,w,m,M+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(v=m;v<=p;++v)G(C(w,M-1),C(w,M),C(w,v))&&_(C(w,M+1),C(w,M),C(w,v))&&(f=I(C(w,M),C(w,v)))<d&&P(w,M,v)&&(d=f,g=v%t.length);M<g?(R(y,w,M,g+1),0!==g&&R(S,w,g,b.length),R(S,w,0,M+1)):(0!==M&&R(y,w,M,b.length),R(y,w,0,g+1),R(S,w,g,M+1))}return y.length<S.length?(F(y,s,i,e,h,r,n),F(S,s,i,e,h,r,n)):(F(S,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,G,T,_,r,I,C,n,R,l,A,u,P,c,f,d,E,F,m,g,D=[],k=[],O=[],L=[],self.Fs={Ds:s,ks:F,Os:i,Ls:e,Bs:p,Ns:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Ws=class{constructor(){throw TypeError("static class can't be instantiated")}static Vs(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Us(){t=!0}static Hs(){return t}static zs(){s=!0}static Js(){return s}static qs(t){i=t}static Xs(){return i}static Ys(){return"final"===i}};r.isDebug=!1,r.$s=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.Ks={}}{const s=self.Ws;s.Zs=class{constructor(t){this.Qs=t,this.ti=new Map,this.si()}si(){let t=this.Qs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.ei(i)}ei(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.ti.set(i,e)}else this.ti.set(t,null)}hi(){for(const t of this.ti)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ri(t){return this.ti.has(t)}ni(t){const s=this.ti.get(t);return void 0===s?null:s}oi(){history.replaceState("",document.title,location.pathname+location.search)}ai(t){this.Qs=t,this.ti.clear(),this.si()}},s.li=new s.Zs(location.search),s.ci=new s.Zs(location.hash),s.li.ri("perf")&&(s.fi=!0),"dev"!==s.li.ni("mode")&&s.qs("final")}{let e=function(t){const s=parseFloat(t),i=j.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Ws,W="(unknown)",j=(a.di={mi:W,gi:W,yi:W,Si:W,wi:NaN,bi:W,Mi:"browser",vi:!0,xi:!1,Gi:!1,Ti:!1,_i:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),V=navigator.userAgent,U=navigator.userAgentData;if(U&&0<U.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=H.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.di.yi="Chromium",a.di.Si=h),a.di.yi=s||W,a.di.Si=i||W,a.di.bi=e||W};s,a.di.mi=U.platform,a.di.xi=U.mobile,a.di.vi=!a.di.xi;const H=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(U.brands);let i=!1;a.di._i=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.di.mi?a.di.gi=e(t.platformVersion):a.di.gi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(V);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.di.mi="Windows";const s=t[1];a.di.gi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.di.mi="macOS",a.di.gi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.di.mi="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.di.mi="Linux"}),t(/android/i,()=>{a.di.mi="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.di.mi="Android",a.di.gi=t[1]}),a.di.mi===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.di.mi="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.di.mi="iOS",a.di.gi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(V),q=/chromium\//i.test(V),X=/edg\//i.test(V),Y=/OPR\//.test(V),$=/nwjs/i.test(V),K=/safari\//i.test(V),Z=/webkit/i.test(V),Q=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.di.yi="Chrome",a.di.Si=t[1],a.di.bi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.di.yi="Edge",a.di.Si=t[1],a.di.bi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.di.yi="Opera",a.di.Si=t[1],a.di.bi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.di.yi="Chromium",a.di.Si=t[1],a.di.bi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.di.yi="NW.js",a.di.Si=t[1],a.di.bi="Chromium",a.di.Mi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.di.yi="Firefox",a.di.Si=t[1],a.di.bi="Gecko"}),!K||J||q||X||Y||$||(a.di.yi="Safari",a.di.bi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.di.Si=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.di.yi="Chrome for iOS",a.di.Si=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.di.yi="Firefox for iOS",a.di.Si=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.di.yi="Edge for iOS",a.di.Si=t[1]})),a.di.bi===W&&Z&&(a.di.bi="WebKit"),"Android"===a.di.mi&&"Safari"===a.di.yi&&(a.di.yi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.di.mi)||"nwjs"===a.di.Mi;a.di.vi=tt,a.di.xi=!tt}"Chrome"===a.di.yi&&"browser"===a.di.Mi&&/wv\)/.test(V)&&(a.di.Mi="webview"),"nwjs"!==a.di.Mi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.di.Mi="webapp"),a.di.wi=parseFloat(a.di.Si);const i="macOS"===a.di.mi&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.di.mi="iOS",a.di.gi=a.di.Si,a.di.vi=!1,a.di.xi=!0,a.di.Ti=!0),a.di.Gi="macOS"===a.di.mi||"iOS"===a.di.mi}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return B(t,s)},s=function(t,s){return B(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function B(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),B(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Ii=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.Ii,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Ci=t,this.Ri=!this.Ci,this.Ri||"undefined"!=typeof indexedDB||(this.Ri=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ai=new Map}Pi(t){if(!this.Ri)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ri=!0;break}}async Ei(t){const s=this.Ai.get(t),i=await h(s);return void 0===i?null:i}async Fi(t,s){s=await h(s),this.Ai.set(t,s)}Di(t){this.Ai.delete(t)}ki(){this.Ai.clear()}Oi(){return Array.from(this.Ai.keys())}Li(){return this.Ri}Bi(){return this.Ai}Ni(t){this.Ai=t}async getItem(s,t){if(e(t),this.Ri)return this.Ei(s);let i;try{i=await this.Ci.get(s)}catch(t){return this.Pi(t),this.Ri?this.Ei(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ri)await this.Fi(s,i);else try{await this.Ci.set(s,i)}catch(t){if(this.Pi(t),!this.Ri)throw t;await this.Fi(s,i)}}async removeItem(s,t){if(e(t),this.Ri)this.Di(s);else try{await this.Ci.delete(s)}catch(t){this.Pi(t),this.Ri?this.Di(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ri)this.ki();else try{await this.Ci.clear()}catch(t){this.Pi(t),this.Ri?this.ki():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ri)return this.Oi();let s=[];try{s=await this.Ci.keys()}catch(t){if(this.Pi(t),this.Ri)return this.Oi();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ri?Promise.resolve(!0):this.Ci.ready()}Wi(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}ji(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Vi(t){i("localforage.defineDriver()")}Ui(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Ws;if(e.Hi={},e.Hi.Ji=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Hi.Xi="undefined"!=typeof HTMLDialogElement,e.Hi.Yi=!!self.requestIdleCallback,e.Hi.ImageBitmap=!!self.createImageBitmap,e.Hi.ImageBitmapOptions=!1,e.Hi.$i=!1,e.Hi.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Hi.ImageBitmapOptions=!0}).catch(()=>{e.Hi.ImageBitmapOptions=!1})}catch(t){e.Hi.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Hi.$i=10===t.width&&10===t.height}).catch(()=>{e.Hi.$i=!1})}catch(t){e.Hi.$i=!1}}if(e.Hi.Ki=!(!navigator.clipboard||!navigator.clipboard.readText),e.Hi.Zi=!(!navigator.permissions||!navigator.permissions.query),e.Hi.Qi=!1,e.Hi.Zi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Hi.Qi=!0}).catch(()=>{e.Hi.Qi=!1})}e.Hi.te=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Hi.ie="undefined"!=typeof Proxy,e.Hi.he=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Hi.ne="function"==typeof fetch,e.Hi.oe=!!(self.isSecureContext&&"Opera"!==e.di.yi&&navigator.storage&&navigator.storage.persist),e.Hi.ae=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Hi.le=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.di.mi)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Hi.ImageDecoder=void 0!==self.ImageDecoder,e.Hi.ue=!!self.VideoEncoder,e.Hi.fe=!!self.showOpenFilePicker,e.Hi.de=!!self.queryLocalFonts,e.Hi.UserActivation=!!navigator.userActivation,e.Hi.pe=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Hi.pe=i&&"image/webp"===i.type}catch(t){e.Hi.pe=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Ws;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.me(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.isSubsetOf||(Set.prototype.isSubsetOf=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.ge(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Ws;self.assert=function(t,s){t||i(s)}}{const h=self.Ws,mt=self.Ks,gt=(h.ye=function(t){return"number"==typeof t},h.Se=function(t){return h.ye(t)&&isFinite(t)},h.we=function(t){if(!h.ye(t))throw new TypeError("expected number")},h.Me=function(t){h.ve(t)},h.xe=function(t,s,i){if(!h.ye(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h.Ge=function(...s){for(let t of s);},h.Te=function(t){if(!h.Se(t))throw new TypeError("expected finite number")},h._e=function(t){h.ve(t)},h.Ie=function(...s){for(let t of s);},h.Ce=function(t){return"string"==typeof t},h.Re=function(t){if(!h.Ce(t))throw new TypeError("expected string")},h.Ae=function(t){h.ve(t)},h.Pe=function(...s){for(let t of s);},h.Ee=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.Fe=function(t){if(!h.Ee(t))throw new TypeError("expected simple object")},h.De=function(t){if(!h.ve(t)&&!h.Ee(t))throw new TypeError("expected simple object")},h.ke=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Oe=function(t){if(!h.ke(t))throw new TypeError("expected object")},h.Le=function(t){h.ve(t)},h.Be=function(...s){for(let t of s);},h.Ne=function(t){return h.We(t,Blob)&&"string"==typeof t.name},h.je=function(t){if(!h.Ne(t))throw new TypeError("expected file")},h.Ve=function(t){h.ve(t)},h.Ue=function(t){return Array.isArray(t)},h.He=function(t){if(!h.Ue(t))throw new TypeError("expected array")},h.Je=function(t){h.ve(t)},h.qe=function(...s){for(let t of s);},h.Xe=function(t){return!(!h.Ue(t)||t.length&&!h.Ue(t[0]))},h.Ye=function(s){if(!h.Xe(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Ue(t))throw new TypeError("expected 2d array")},h.$e=function(t){h.ve(t)},h.Ke=function(t){return"function"==typeof t},h.Ze=function(t,s){if(!h.Ke(t))throw new TypeError("expected function");if(!h.ve(s)&&t!==s)throw new TypeError("expected same function reference")},h.Qe=function(t){h.ve(t)},h.ih=function(...s){for(let t of s);},h.eh=function(s,...i){if(!h.Ke(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.ve(t)&&s===t)return;throw new TypeError("expected same function reference")},h.hh=function(...s){if(!h.ve(s))for(let t of s);},h.rh=function(t,s){return t instanceof s},h.nh=function(s,...i){for(let t of i)if(h.rh(s,t))return!0;return!1},h.oh=function(t,s){if(!h.rh(t,s))throw new TypeError("unexpected type")},h.ah=function(t,s){h.ve(t)},h.uh=function(t,...s){for(let t of s);},h.fh=function(t,...s){if(!h.nh(t,...s))throw new TypeError("unexpected type")},h.ph=function(t,...s){if(!h.ve(t)&&!h.nh(t,...s))throw new TypeError("unexpected type")},h.mh=function(s,i){for(let t of s)if(!h.rh(t,i))return!1;return!0},h.gh=function(s){for(let t of s)if(!h.Se(t))return!1;return!0},h.yh=function(s,t){for(let t of s);},h.Sh=function(s,t){if(!h.ve(s))for(let t of s);},h.wh=function(s,t){if(!h.ve(s))for(let t of s);},h.bh=function(s){for(let t of s);},h.Mh=function(s){if(!h.ve(s))for(let t of s);},h.xh=function(t,s){return!(h.ve(t)||!h.Ce(t.nodeName))&&(!s||h.Gh(t.nodeName,s))},h.Th=function(t,s){if(h.ve(t)||!h.Ce(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Gh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h._h=function(t,s){h.ve(t)},h.Ih=function(t,s){return!(h.ve(t)||!h.Ce(t.tagName))&&(!s||h.Gh(t.tagName,s))},h.Ch=function(t,s){if(h.ve(t)||!h.Ce(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Gh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Rh=function(t,s){h.ve(t)},h.Ah=function(t){return h.Ih(t,"img")||h.Ih(t,"canvas")||h.Ih(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Ph=function(t){if(!h.Ah(t))throw new TypeError("expected drawable")},h.Eh=function(t){h.ve(t)},h.Fh=function(t){return t instanceof ImageData||h.Ah(t)},h.Dh=function(t){if(!h.Fh(t))throw new TypeError("expected drawable or image data")},h.kh=function(t){if(!h.ve(t)&&!h.Fh(t))throw new TypeError("expected drawable or image data")},h.Oh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Lh},h.Bh=function(t){if(!h.Oh(t))throw new TypeError("expected string-like")},h.Nh=function(t){h.ve(t)},h.Wh=function(...s){for(let t of s);},h.jh=function(){throw new Error("must be overridden")},h.Vh=function(){throw new Error("not yet implemented")},h.Uh=function(t){return t.constructor===function*(){}.constructor},h.Hh=function(t){if(!h.Uh(t))throw new Error("expected generator function")},h.zh=function(t){return"function"===t[Symbol.iterator]},h.Jh=function(t){if(!h.zh(t))throw new Error("expected iterable")},h.qh=function(t){return!h.ve(t)},h.ve=function(t){return null==t},h.Xh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.Yh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.$h=function(t){return h.rh(t,gt)},h.Kh=function(t){},h.Zh=function(t){h.Qh(t,gt)},h.ir=function(t,...s){if(!h.er(t,...s))throw new TypeError("unexpected type")},h.er=function(t,...s){for(const i of s)if(h.We(t,i))return!0;return!1},h.Qh=function(t,s){if(!h.We(t,s))throw new TypeError("unexpected type")},h.We=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.we=h.we,mt.Me=h.Me,mt.Te=h.Te,mt._e=h._e,mt.Re=h.Re,mt.Ae=h.Ae,mt.Oe=h.Oe,mt.Le=h.Le,mt.He=h.He,mt.Je=h.Je,mt.Ze=h.Ze,mt.Qe=h.Qe,mt.oh=h.oh,mt.ah=h.ah,mt.ve=h.ve}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.ge())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.hr(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.rr(s,[...i]),s.length&&console.warn(`[Defence] '${p.hr(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Ws,yt=new Map;p.nr=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.lr=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.ur=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,cr:0,dr:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.cr.toPrecision(3)} :: calls => `+this.dr}})},p.mr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.cr=i.total/i.dr,console.log(i.toString()),i.dr++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.ge=function(){return(new Error).stack},p.Sr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.hr=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.ye(t)?"<number>":p.Ce(t)?"<string>":p.Ue(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Ke(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.wr={};const St=new Set(["then","splice"]);p.wr.get=function(t,s){return s in t||"symbol"==typeof s||St.has(s)||h(`Accessed missing property '${s}' from defended object '${p.hr(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!St.has(s)&&h(`Accessed property '${s}' on a released object '${p.hr(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.wr.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.hr(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.hr(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.hr(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.wr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.hr(t)}'`)},p.wr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.hr(t)}'`)},p.wr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.hr(t)}'`)};let f=-1,d=(p.br=class{constructor(){if(p.$s&&p.Hi.ie){let t=Object.create(new.target.prototype),s=new Proxy(t,p.wr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.Mr=function(s){if(p.$s&&p.Hi.ie&&s instanceof p.br){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.vr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.$s&&n(t,i),p.Mr(i)},p.Gr=function(t){let s=u.get(t);s&&c.set(s,p.ge())},p.Tr=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p._r=class{constructor(t){this.Ir="",t&&this.start(t)}start(t){p.fi&&(this.Ir=t,performance.mark(this.Ir+"-Start"))}end(){p.fi&&(performance.mark(this.Ir+"-End"),performance.measure(this.Ir,this.Ir+"-Start",this.Ir+"-End"))}next(t){p.fi&&(this.end(),this.Ir=t,performance.mark(this.Ir+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Ws,wt=2*Math.PI,bt=Math.PI/180,Mt=180/Math.PI,vt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Cr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Rr=function(t,s,i){return t<s?s:i<t?i:t},y.Ar=function(t){return(t%=wt)<0&&(t+=wt),t},y.Pr=function(t){return t*bt},y.Er=function(t){return t*Mt},y.Fr=function(t,s){return Math.sqrt(t*t+s*s)},y.Dr=function(t,s,i){return Math.sqrt(t*t+s*s+i*i)},y.kr=function(t,s,i,e){return y.Fr(i-t,e-s)},y.Or=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Lr=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Br=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Nr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y.Ar(t+i):y.Ar(t-i):y.Ar(s)},y.Wr=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.jr=function(t,s,i,e=0){let h=y.Br(t,s),r=wt*e;return y.Wr(s,t)?y.Ar(t+(h+r)*i):y.Ar(t-(h+r)*i)},y.Vr=function(t,s,i,e=0){const h=y.Br(t,s),r=wt*e;return y.Wr(s,t)?y.Ar(t+(h+r)*i):y.Ar(t+(wt-h+r)*i)},y.Ur=function(t,s,i,e=0){const h=y.Br(t,s),r=wt*e;return y.Wr(s,t)?y.Ar(t-(-wt+h-r)*i):y.Ar(t-(h+r)*i)},y.Hr=function(t,s){const i=y.Br(t,s);return y.Wr(t,s)?y.Ar(s-i):y.Ar(s+i)},y.Ot=function(t,s,i){return t+i*(s-t)},y.zr=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Jr=function(t,s,i,e,h){return y.Ot(e,h,y.zr(t,s,i))},y.qr=function(t,s,i,e){return y.Ot(y.Ot(t,s,e),y.Ot(s,i,e),e)},y.Xr=function(t,s,i,e,h){return y.Ot(y.qr(t,s,i,h),y.qr(s,i,e,h),h)},y.Yr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.$r=function(t){return 0<t&&0==(t-1&t)},y.Kr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Zr=function(t,s){return Math.round(t*s)/s},y.Qr=function(t,s){return Math.floor(t*s)/s},y.tn=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.sn=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.hn=function(t,s,i){return y.Rr(t,0,255)|y.Rr(s,0,255)<<8|y.Rr(i,0,255)<<16},1024),xt=16384,Gt=8191,Tt=(y.rn=function(t,s,i,e){return t=y.Rr(Math.floor(1024*t),-8192,Gt),s=y.Rr(Math.floor(1024*s),-8192,Gt),i=y.Rr(Math.floor(1024*i),-8192,Gt),e=y.Rr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*vt+s*xt*vt+i*vt+e)},y.nn=function(t,s,i){return y.rn(t,s,i,1)},y.an=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*vt));return t>Gt&&(t-=xt),t/1024}},y.ln=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*vt)/(xt*vt));return t>Gt&&(t-=xt),t/1024}},y.un=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*vt)/vt);return t>Gt&&(t-=xt),t/1024}},y.cn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%vt);return s/1023}},y.fn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.dn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Tt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.fn(i,e);return[i/t,e/t]},y.pn=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,n),c=Math.max(h,n);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,S=i-t,w=e-s,b=n-h,M=o-r,v=Math.abs(w*b-M*S),x=b*y-M*g;if(Math.abs(x)>v)return!1;const G=S*y-w*g;return Math.abs(G)<=v},y.mn=function(t,s,i,e,h,r,n,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<n)return!1;const g=a-t+u-i,y=l-s+c-e,S=i-t,w=e-s,b=u-a,M=c-l,v=Math.abs(w*b-M*S),x=b*y-M*g;if(Math.abs(x)>v)return!1;const G=S*y-w*g;return Math.abs(G)<=v},y.gn=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.yn(),u=h.Sn(),c=h.wn(),f=h.bn(),d=h.Mn(),p=h.vn(),m=h.xn(),g=h.Gn();return y.mn(t,s,i,e,r,n,o,a,l,u,c,f)||y.mn(t,s,i,e,r,n,o,a,c,f,d,p)||y.mn(t,s,i,e,r,n,o,a,d,p,m,g)||y.mn(t,s,i,e,r,n,o,a,m,g,l,u)},y.Tn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.mn(s,i,e,h,n,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.mn(s,i,e,h,n,o,a,l,r[u],r[u+1],r[0],r[1])};y._n=function(t,s,i,e,h,r,n,o){const a=i-t,l=e-s,u=n-h,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.In=function(t,s,i,e,h,r,n,o,a){const l=(n-h)*a,u=(o-r)*a;return y._n(t,s,i,e,h-l,r-u,n+l,o+u)},y.Cn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,S=u*f+c*d,w=1/(p*y-m*m),b=(y*g-m*S)*w,M=(p*S-m*g)*w;return 0<=b&&0<=M&&b+M<=1},y.Rn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,S=f*u+d*c,w=p*g-m*m,b=(g*y-m*S)/w,M=(p*S-m*y)/w,v=1-b-M;return[v,b,M]},y.An=function(t,s,i,e,h,r,n,o,a,l,u,c){return[t*e+s*n+i*l,t*h+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Ws,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.Pn=function(){return i},l.En=function(){if(!s)return"";const t=s.location;return l.Fn(t.origin+t.pathname)+i},l.Fn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Dn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.kn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.On=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.Ln=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Bn=function(t){return t.replace(/\\/g,"/")},l.Nn=function(t,s){const i=t?l.kn(t).slice(1):"";return s===i},l.Wn=function(t,s){let i,e;return l.Ne(t)&&(i=l.Ln(t.name)),l.Ce(t)&&(i=l.Ln(t)),l.Ne(s)&&(e=l.Ln(s.name)),l.Ce(s)&&(e=l.Ln(s)),i===e},l.jn=function(t){t=l.Bn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,Vn:h,name:r,root:s,ext:n,Un:a}},l.Hn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.zn=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Jn=function(){},l.Gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.qn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.Xn=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Yn=function(t,s){t.length=s},l.$n=function(t){t&&0!==t.length&&l.Yn(t,0)},l.Kn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Yn(t,0)}l.Yn(i,0)}},l.Zn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.Qn=function(t,s,i){const e=t.length;(s|=0)<e?l.Yn(t,s):e<s&&l.Zn(t,s,i)},l.eo=function(t,s){l.$n(t),l.rr(t,s)},l.rr=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.ho=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Yn(i,s)}},l.ro=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.no=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.ao=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return l.Yn(i,r),h},l.lo=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Yn(i,h),t-h},l.uo=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.co=function(t,s){if(!l.uo(t,s))throw new RangeError("array index out of bounds")},l.fo=function(t){return t.slice()},l.do=function(t,i){let e=[];for(let s of t)if(l.ke(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Ue(s)?e.push(l.do(s,i)):e.push(s);return e},l.po=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.mo=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.yo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.So=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.wo=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.bo=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.Mo=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.vo=function(t){e.push(t)},l.xo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.Go=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},l.To=function(t){r.delete(t)},l._o=l.Go,l.Io=function(){return new Promise(t=>l._o(t))},new Set);l.Co=function(s){const i=self.requestAnimationFrame(async t=>{await l.Io(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.Ro=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Ws;r.Ao=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r.Po=function(t){return!r.Ao(t)},r.Eo=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Fo=function(t,s){return fetch(t,s).then(t=>(r.Eo(t),t))},r.Do=function(t){return r.Fo(t).then(t=>t.text())},r.ko=function(t){return r.Fo(t).then(t=>t.json())},r.Oo=function(t){return r.Fo(t).then(t=>t.blob())},r.Lo=function(t){return r.Fo(t).then(t=>t.arrayBuffer())},r.Bo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.No=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Wo=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.jo=function(t){return r.Wo(t).then(t=>JSON.parse(t))},r.Vo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Bo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.Uo=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Ho=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Rr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.zo=function(t,s,i){const e=r.Uo(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.Ho(e,s,i)},r.Jo=function(t,s,i){if(r.Hi.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.zo(t,s,i));if(r.Hi.ImageBitmap)return createImageBitmap(t).then(t=>r.zo(t,s,i));{const e=r.Uo(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.Ho(e,s,i)}},r.qo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Xo=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Yo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.$o=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Ko=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.Zo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Qo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.ta=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Ws,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.ea=class{constructor(t,s,i,e){this.ra=NaN,this.na=NaN,this.oa=NaN,this.aa=NaN,this.ra=0,this.na=0,this.oa=0,this.aa=0,t instanceof u.ea?this.set(t):this.la(t||0,s||0,i||0,e||0)}ua(t,s,i){return this.ra=+t,this.na=+s,this.oa=+i,this.Rr(),this}la(t,s,i,e){return this.ra=+t,this.na=+s,this.oa=+i,this.aa=+e,this.Rr(),this}set(t){return this.ra=t.ra,this.na=t.na,this.oa=t.oa,this.aa=t.aa,this}I(t){return this.set(t)}add(t){this.ra+=t.ra,this.na+=t.na,this.oa+=t.oa,this.aa+=t.aa,this.Rr()}ca(t,s,i,e=0){this.ra+=+t,this.na+=+s,this.oa+=+i,this.aa+=+e,this.Rr()}fa(t){this.ya(Math.max(this.ra,t.ra)-Math.min(this.ra,t.ra)),this.Sa(Math.max(this.na,t.na)-Math.min(this.na,t.na)),this.wa(Math.max(this.oa,t.oa)-Math.min(this.oa,t.oa)),this.ba(Math.max(this.aa,t.aa)-Math.min(this.aa,t.aa)),this.Rr()}Ma(t){this.ra=t.ra,this.na=t.na,this.oa=t.oa}ya(t){this.ra=u.Rr(+t,0,1)}xa(){return this.ra}Sa(t){this.na=u.Rr(+t,0,1)}Ga(){return this.na}wa(t){this.oa=u.Rr(+t,0,1)}Ta(){return this.oa}ba(t){this.aa=u.Rr(+t,0,1)}_a(){return this.aa}clone(){return u.vr(u.ea,this.ra,this.na,this.oa,this.aa)}toArray(){return[this.ra,this.na,this.oa,this.aa]}Ia(){return new Float64Array(this.toArray())}Ca(t,s){t[s++]=this.ra,t[s++]=this.na,t[s++]=this.oa,t[s]=this.aa}Ra(t,s){t[s++]=this.ra,t[s++]=this.na,t[s]=this.oa}equals(t){return this.ra===t.ra&&this.na===t.na&&this.oa===t.oa&&this.aa===t.aa}Aa(t){return this.ra===t.ra&&this.na===t.na&&this.oa===t.oa}Pa(t,s,i){return this.ra===t&&this.na===s&&this.oa===i}Ea(t,s,i,e){return this.ra===t&&this.na===s&&this.oa===i&&this.aa===e}Fa(t,s){return t[s]===Math.fround(this.ra)&&t[s+1]===Math.fround(this.na)&&t[s+2]===Math.fround(this.oa)&&t[s+3]===Math.fround(this.aa)}Da(t,s){return t[s]===Math.fround(this.ra)&&t[s+1]===Math.fround(this.na)&&t[s+2]===Math.fround(this.oa)}multiply(t){this.ra*=t.ra,this.na*=t.na,this.oa*=t.oa,this.aa*=t.aa}ka(t){this.ra*=t,this.na*=t,this.oa*=t,this.aa*=t}Oa(){return this.ra*=this.aa,this.na*=this.aa,this.oa*=this.aa,this}La(){return this.ra/=this.aa,this.na/=this.aa,this.oa/=this.aa,this}Rr(){return this.ra=u.Rr(this.ra,0,1),this.na=u.Rr(this.na,0,1),this.oa=u.Rr(this.oa,0,1),this.aa=u.Rr(this.aa,0,1),this}Ba(t){this.ra=u.an(t),this.na=u.ln(t),this.oa=u.un(t),this.aa=u.cn(t)}Na(t,s,i){const e=u.Se(t)?t:this.xa(),h=u.Se(s)?s:this.Ga(),r=u.Se(i)?i:this.Ta();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Wa(t,s,i,e){const h=u.Se(t)?t:this.xa(),r=u.Se(s)?s:this.Ga(),n=u.Se(i)?i:this.Ta(),o=u.Se(e)?e:this._a();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}ja(){const t=Math.round(255*this.xa()),s=Math.round(255*this.Ga()),i=Math.round(255*this.Ta());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Va(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.ya(s),isFinite(i)&&this.Sa(i),isFinite(e)&&this.wa(e),this.ba(1),!0}Ua(){const t=Math.round(255*this.xa()),s=Math.round(255*this.Ga()),i=Math.round(255*this.Ta());return t+`, ${s}, `+i}Ha(){const t=Math.round(255*this.xa()),s=Math.round(255*this.Ga()),i=Math.round(255*this.Ta());return[t,s,i]}za(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.ya(i),isFinite(e)&&this.Sa(e),isFinite(h)&&this.wa(h),this.ba(1),!0}Ja(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.ya(i),isFinite(e)&&this.Sa(e),isFinite(h)&&this.wa(h),this.ba(1),!0}qa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.ya(i),isFinite(e)&&this.Sa(e),isFinite(h)&&this.wa(h),isFinite(r)&&this.ba(r),!0}Xa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.ya(i),isFinite(e)&&this.Sa(e),isFinite(h)&&this.wa(h),isFinite(r)&&this.ba(r),!0}Ya(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ja(t):this.za(t);if(t.startsWith("rgba("))return t.includes("%")?this.Xa(t):this.qa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.$a(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ja(t):4===s.length&&this.Xa(t):3===s.length?this.za(t):4===s.length&&this.qa(t)}}return this.Va(t)}toJSON(){return[this.ra,this.na,this.oa,this.aa]}Ka(t,s,i,e){let h,r,n;if(t%=360,s=u.Rr(s,0,100),i=u.Rr(i,0,100),e=u.Rr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),r=l(a,o,t),n=l(a,o,t-1/3)}return this.ya(h),this.Sa(r),this.wa(n),this.ba(e),this}$a(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.Ka(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Ka(+i[1],+i[2],+i[3],+i[4]),0))}Za(){const t=this.ra,s=this.na,i=this.oa,e=this.aa,h=u.ea.Qa(t,s,i),r=u.ea.tl(t,s,i),n=u.ea.sl(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}il(){const t=this.ra,s=this.na,i=this.oa;return[u.ea.Qa(t,s,i),u.ea.tl(t,s,i),u.ea.sl(t,s,i),this.aa]}el(t){!Array.isArray(t)||t.length<3||(this.ra=t[0],this.na=t[1],this.oa=t[2],this.aa=4<=t.length?t[3]:1)}set r(t){this.ya(t)}get r(){return this.xa()}set g(t){this.Sa(t)}get g(){return this.Ga()}set b(t){this.wa(t)}get b(){return this.Ta()}set a(t){this.ba(t)}get a(){return this._a()}hl(t,s){switch(t){case 0:this.ya(s);break;case 1:this.Sa(s);break;case 2:this.wa(s);break;case 3:this.ba(s);break;default:throw new RangeError("invalid color index")}}rl(t){switch(t){case 0:return this.xa();case 1:return this.Ga();case 2:return this.Ta();case 3:return this._a();default:throw new RangeError("invalid color index")}}static nl(t,s){let i,e;if(Array.isArray(t))(i=new u.ea).el(t);else{if(!(t instanceof u.ea))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.ea).el(s);else{if(!(s instanceof u.ea))throw new Error("unexpected type");e=s}return i.equals(e)}static ol(t,s){return u.Rr(Math.max(t,s)-Math.min(t,s),0,1)}static al(t,s){const i=new u.ea;return i.ya(Math.max(t.ra,s.ra)-Math.min(t.ra,s.ra)),i.Sa(Math.max(t.na,s.na)-Math.min(t.na,s.na)),i.wa(Math.max(t.oa,s.oa)-Math.min(t.oa,s.oa)),i.ba(Math.max(t.aa,s.aa)-Math.min(t.aa,s.aa)),i}static ll(t,s){const i=new u.ea(0,0,0,1);return i.ya(Math.max(t.ra,s.ra)-Math.min(t.ra,s.ra)),i.Sa(Math.max(t.na,s.na)-Math.min(t.na,s.na)),i.wa(Math.max(t.oa,s.oa)-Math.min(t.oa,s.oa)),i}static Qa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static tl(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static sl(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},u.ea.ul=Object.freeze(u.vr(u.ea,1,1,1,1)),u.ea.cl=Object.freeze(u.vr(u.ea,0,0,0,1)),u.ea.fl=Object.freeze(u.vr(u.ea,0,0,0,0))}{const Rt=self.Ws;Rt.dl=class{constructor(t,s){this.pl=0,this.ml=0,t instanceof Rt.dl?this.I(t):this.set(t||0,s||0)}set(t,s){this.pl=+t,this.ml=+s}I(t){this.pl=t.pl,this.ml=t.ml}equals(t){return this.pl===t.pl&&this.ml===t.ml}gl(t,s){return this.pl===t&&this.ml===s}Fa(t,s){return t[s]===Math.fround(this.pl)&&t[s+1]===Math.fround(this.ml)}yl(t){this.pl=+t}Sl(){return this.pl}wl(t){this.ml=+t}bl(){return this.ml}toArray(){return[this.pl,this.ml]}Ia(){return new Float64Array(this.toArray())}Ca(t,s){t[s++]=this.pl,t[s]=this.ml}offset(t,s){this.pl+=+t,this.ml+=+s}scale(t,s){this.pl*=t,this.ml*=s}Ct(t,s){this.pl/=t,this.ml/=s}round(){this.pl=Math.round(this.pl),this.ml=Math.round(this.ml)}floor(){this.pl=Math.floor(this.pl),this.ml=Math.floor(this.ml)}ceil(){this.pl=Math.ceil(this.pl),this.ml=Math.ceil(this.ml)}angle(){return Rt.Lr(0,0,this.pl,this.ml)}Ml(){return this.pl*this.pl+this.ml*this.ml}length(){return Rt.Fr(this.pl,this.ml)}vl(t,s){const i=this.pl*s-this.ml*t;this.ml=this.ml*s+this.pl*t,this.pl=i}rotate(t){0!==t&&this.vl(Math.sin(t),Math.cos(t))}xl(t,s,i){0===t||s===this.pl&&i===this.ml||(this.pl-=s,this.ml-=i,this.vl(Math.sin(t),Math.cos(t)),this.pl+=+s,this.ml+=+i)}move(t,s){0!==s&&(this.pl+=Math.cos(t)*s,this.ml+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.pl/=t,this.ml/=t)}Rr(t,s){this.pl=Rt.Rr(this.pl,t,s),this.ml=Rt.Rr(this.ml,t,s)}Dt(t){return this.pl*t.pl+this.ml*t.ml}reverse(){this.pl=-this.pl,this.ml=-this.ml}Gl(){let t=this.pl;return this.pl=this.ml,this.ml=-t,this}}}{const At=self.Ws;At.Rect=class{constructor(t,s,i,e){this.Tl=NaN,this._l=NaN,this.Il=NaN,this.Cl=NaN,this.Tl=0,this._l=0,this.Il=0,this.Cl=0,t instanceof At.Rect?this.I(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Tl=+t,this._l=+s,this.Il=+i,this.Cl=+e}Rl(t,s,i,e){s=+s,this.Tl=t=+t,this._l=s,this.Il=t+ +i,this.Cl=s+ +e}I(t){this.Tl=+t.Tl,this._l=+t._l,this.Il=+t.Il,this.Cl=+t.Cl}clone(){return new At.Rect(this.Tl,this._l,this.Il,this.Cl)}static Al(t,s){const i=new At.Rect;return i.Pl(Math.min(t.Tl,s.Tl)),i.El(Math.min(t._l,s._l)),i.Fl(Math.max(t.Il,s.Il)),i.Dl(Math.max(t.Cl,s.Cl)),i}static kl(t){return new At.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Tl===t.Tl&&this._l===t._l&&this.Il===t.Il&&this.Cl===t.Cl}Ol(t,s,i,e){return this.Tl===t&&this._l===s&&this.width()===i&&this.height()===e}Fa(t,s){return t[s]===Math.fround(this.Tl)&&t[s+1]===Math.fround(this._l)&&t[s+2]===Math.fround(this.Il)&&t[s+3]===Math.fround(this.Cl)}Pl(t){this.Tl=+t}Ll(){return this.Tl}El(t){this._l=+t}Bl(){return this._l}Fl(t){this.Il=+t}Nl(){return this.Il}Dl(t){this.Cl=+t}Wl(){return this.Cl}toArray(){return[this.Tl,this._l,this.Il,this.Cl]}Ia(){return new Float64Array(this.toArray())}jl(){return new DOMRect(this.Tl,this._l,this.width(),this.height())}static Vl(t){return At.vr(At.Rect,t.left,t.top,t.right,t.bottom)}Ca(t,s){t[s++]=this.Tl,t[s++]=this._l,t[s++]=this.Il,t[s]=this.Cl}Ul(t,s){t[s++]=this.Tl,t[s++]=this._l,t[s++]=this.Il,t[s++]=this._l,t[s++]=this.Il,t[s++]=this.Cl,t[s++]=this.Tl,t[s]=this.Cl}Hl(t,s,i){t[s++]=this.Tl,t[s++]=this._l,t[s++]=i,t[s++]=this.Il,t[s++]=this._l,t[s++]=i,t[s++]=this.Il,t[s++]=this.Cl,t[s++]=i,t[s++]=this.Tl,t[s++]=this.Cl,t[s]=i}width(){return this.Il-this.Tl}height(){return this.Cl-this._l}zl(){return(this.Tl+this.Il)/2}Jl(){return(this._l+this.Cl)/2}offset(t,s){s=+s,this.Tl+=t=+t,this._l+=s,this.Il+=t,this.Cl+=s}offsetLeft(t){this.Tl+=+t}offsetTop(t){this._l+=+t}ql(t){this.Il+=+t}Xl(t){this.Cl+=+t}Yl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this._l<this.Cl?this.Tl<this.Il?this.Cl=this._l+this.width():this.Cl=this._l-this.width():this.Tl<this.Il?this.Cl=this._l-this.width():this.Cl=this._l+this.width()}$l(t,s){s=+s,this.Tl-=t=+t,this._l-=s,this.Il+=t,this.Cl+=s}Kl(t,s){s=+s,this.Tl+=t=+t,this._l+=s,this.Il-=t,this.Cl-=s}multiply(t,s){this.Tl*=t,this._l*=s,this.Il*=t,this.Cl*=s}Ct(t,s){this.Tl/=t,this._l/=s,this.Il/=t,this.Cl/=s}Zl(t){this.Tl=+t-this.Tl,this.Il=+t-this.Il}Ql(t){this._l=+t-this._l,this.Cl=+t-this.Cl}tu(t,s){const i=this.width(),e=this.height(),h=this.Ll()+i*t,r=this.Bl()+e*s;this.Rl(h-e*s,r-i*t,e,i)}su(){const t=this.Tl;this.Tl=this.Il,this.Il=t}iu(){const t=this._l;this._l=this.Cl,this.Cl=t}eu(t){const s=this._l;this._l=+t-this.Cl,this.Cl=+t-s}round(){this.Tl=Math.round(this.Tl),this._l=Math.round(this._l),this.Il=Math.round(this.Il),this.Cl=Math.round(this.Cl)}hu(){this.Tl=Math.ceil(this.Tl),this._l=Math.ceil(this._l),this.Il=Math.floor(this.Il),this.Cl=Math.floor(this.Cl)}ru(){this.Tl=Math.floor(this.Tl),this._l=Math.floor(this._l),this.Il=Math.ceil(this.Il),this.Cl=Math.ceil(this.Cl)}floor(){this.Tl=Math.floor(this.Tl),this._l=Math.floor(this._l),this.Il=Math.floor(this.Il),this.Cl=Math.floor(this.Cl)}ceil(){this.Tl=Math.ceil(this.Tl),this._l=Math.ceil(this._l),this.Il=Math.ceil(this.Il),this.Cl=Math.ceil(this.Cl)}Rr(t,s,i,e){this.Tl=Math.max(this.Tl,+t),this._l=Math.max(this._l,+s),this.Il=Math.min(this.Il,+i),this.Cl=Math.min(this.Cl,+e)}nu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Tl=At.Rr(this.Tl,t,i),this._l=At.Rr(this._l,s,e),this.Il=At.Rr(this.Il,t,i),this.Cl=At.Rr(this.Cl,s,e)}normalize(){this.Tl>this.Il&&this.su(),this._l>this.Cl&&this.iu()}ou(t){return!(t.Il<this.Tl||t.Cl<this._l||t.Tl>this.Il||t._l>this.Cl)}au(t,s,i){return!(t.Il+s<this.Tl||t.Cl+i<this._l||t.Tl+s>this.Il||t._l+i>this.Cl)}lu(t,s){return t>=this.Tl&&t<=this.Il&&s>=this._l&&s<=this.Cl}uu(t){return t.Tl>=this.Tl&&t._l>=this._l&&t.Il<=this.Il&&t.Cl<=this.Cl}cu(t){t.Tl<this.Tl&&(this.Tl=+t.Tl),t._l<this._l&&(this._l=+t._l),t.Il>this.Il&&(this.Il=+t.Il),t.Cl>this.Cl&&(this.Cl=+t.Cl)}fu(t){this.Tl=At.Ot(t.Tl,t.Il,this.Tl),this._l=At.Ot(t._l,t.Cl,this._l),this.Il=At.Ot(t.Tl,t.Il,this.Il),this.Cl=At.Ot(t._l,t.Cl,this.Cl)}}}{const Pt=self.Ws;Pt.du=class{constructor(t,s,i,e,h,r,n,o){this.pu=NaN,this.mu=NaN,this.gu=NaN,this.yu=NaN,this.Su=NaN,this.wu=NaN,this.bu=NaN,this.Mu=NaN,this.pu=0,this.mu=0,this.gu=0,this.yu=0,this.Su=0,this.wu=0,this.bu=0,this.Mu=0,t instanceof Pt.du?this.I(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.pu=+t,this.mu=+s,this.gu=+i,this.yu=+e,this.Su=+h,this.wu=+r,this.bu=+n,this.Mu=+o}vu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}I(t){this.pu=t.pu,this.mu=t.mu,this.gu=t.gu,this.yu=t.yu,this.Su=t.Su,this.wu=t.wu,this.bu=t.bu,this.Mu=t.Mu}equals(t){return this.pu===t.pu&&this.mu===t.mu&&this.gu===t.gu&&this.yu===t.yu&&this.Su===t.Su&&this.wu===t.wu&&this.bu===t.bu&&this.Mu===t.Mu}xu(t){this.pu=+t}yn(){return this.pu}Gu(t){this.mu=+t}Sn(){return this.mu}Tu(t){this.gu=+t}wn(){return this.gu}_u(t){this.yu=+t}bn(){return this.yu}Iu(t){this.Su=+t}Mn(){return this.Su}Cu(t){this.wu=+t}vn(){return this.wu}Ru(t){this.bu=+t}xn(){return this.bu}Au(t){this.Mu=+t}Gn(){return this.Mu}Pu(){return new DOMQuad(new DOMPoint(this.pu,this.mu),new DOMPoint(this.gu,this.yu),new DOMPoint(this.Su,this.wu),new DOMPoint(this.bu,this.Mu))}static Eu(t){return Pt.vr(Pt.du,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.pu,this.mu,this.gu,this.yu,this.Su,this.wu,this.bu,this.Mu]}Ia(){return new Float64Array(this.toArray())}Ca(t,s){t[s++]=this.pu,t[s++]=this.mu,t[s++]=this.gu,t[s++]=this.yu,t[s++]=this.Su,t[s++]=this.wu,t[s++]=this.bu,t[s]=this.Mu}Fu(t,s,i){t[s++]=this.pu,t[s++]=this.mu,t[s++]=i,t[s++]=this.gu,t[s++]=this.yu,t[s++]=i,t[s++]=this.Su,t[s++]=this.wu,t[s++]=i,t[s++]=this.bu,t[s++]=this.Mu,t[s]=i}offset(t,s){s=+s,this.pu+=t=+t,this.mu+=s,this.gu+=t,this.yu+=s,this.Su+=t,this.wu+=s,this.bu+=t,this.Mu+=s}round(){this.pu=Math.round(this.pu),this.mu=Math.round(this.mu),this.gu=Math.round(this.gu),this.yu=Math.round(this.yu),this.Su=Math.round(this.Su),this.wu=Math.round(this.wu),this.bu=Math.round(this.bu),this.Mu=Math.round(this.Mu)}floor(){this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu),this.gu=Math.floor(this.gu),this.yu=Math.floor(this.yu),this.Su=Math.floor(this.Su),this.wu=Math.floor(this.wu),this.bu=Math.floor(this.bu),this.Mu=Math.floor(this.Mu)}ceil(){this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu),this.gu=Math.ceil(this.gu),this.yu=Math.ceil(this.yu),this.Su=Math.ceil(this.Su),this.wu=Math.ceil(this.wu),this.bu=Math.ceil(this.bu),this.Mu=Math.ceil(this.Mu)}Du(t){this.pu=t.Tl,this.mu=t._l,this.gu=t.Il,this.yu=t._l,this.Su=t.Il,this.wu=t.Cl,this.bu=t.Tl,this.Mu=t.Cl}ku(t,s){0===s?this.Du(t):this.Ou(t,Math.sin(s),Math.cos(s))}Ou(t,s,i){const e=t.Tl*s,h=t._l*s,r=t.Il*s,n=t.Cl*s,o=t.Tl*i,a=t._l*i,l=t.Il*i,u=t.Cl*i;this.pu=o-h,this.mu=a+e,this.gu=l-h,this.yu=a+r,this.Su=l-n,this.wu=u+r,this.bu=o-n,this.Mu=u+e}Lu(t){t.set(Math.min(this.pu,this.gu,this.Su,this.bu),Math.min(this.mu,this.yu,this.wu,this.Mu),Math.max(this.pu,this.gu,this.Su,this.bu),Math.max(this.mu,this.yu,this.wu,this.Mu))}lu(t,s){let i=this.gu-this.pu,e=this.yu-this.mu,h=this.Su-this.pu,r=this.wu-this.mu,n=t-this.pu,o=s-this.mu,a=i*i+e*e,l=i*h+e*r,u=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.bu-this.pu)*i+(e=this.Mu-this.mu)*e)*f-(l=i*h+e*r)*(u=i*n+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}zl(){return(this.pu+this.gu+this.Su+this.bu)/4}Jl(){return(this.mu+this.yu+this.wu+this.Mu)/4}Bu(t,s,i,e){return!(!this.lu(t,s)&&!this.lu(i,e))||Pt.gn(t,s,i,e,this)}Nu(t){let s=t.zl(),i=t.Jl();if(this.lu(s,i))return!0;if(s=this.zl(),i=this.Jl(),t.lu(s,i))return!0;const e=this.pu,h=this.mu,r=this.gu,n=this.yu,o=this.Su,a=this.wu,l=this.bu,u=this.Mu;return Pt.gn(e,h,r,n,t)||Pt.gn(r,n,o,a,t)||Pt.gn(o,a,l,u,t)||Pt.gn(l,u,e,h,t)}Wu(){const t=this.pu,s=this.mu;this.pu=this.gu,this.mu=this.yu,this.gu=this.Su,this.yu=this.wu,this.Su=this.bu,this.wu=this.Mu,this.bu=t,this.Mu=s}ju(){this.Vu(0,2),this.Vu(1,3),this.Vu(6,4),this.Vu(7,5)}Uu(){this.Vu(0,6),this.Vu(1,7),this.Vu(2,4),this.Vu(3,5)}Hu(){this.Vu(2,6),this.Vu(3,7)}Vu(t,s){const i=this.zu(t);this.Ju(t,this.zu(s)),this.Ju(s,i)}zu(t){switch(t){case 0:return this.pu;case 1:return this.mu;case 2:return this.gu;case 3:return this.yu;case 4:return this.Su;case 5:return this.wu;case 6:return this.bu;case 7:return this.Mu;default:throw new RangeError("invalid quad point index")}}Ju(t,s){switch(s=+s,t){case 0:this.pu=s;break;case 1:this.mu=s;break;case 2:this.gu=s;break;case 3:this.yu=s;break;case 4:this.Su=s;break;case 5:this.wu=s;break;case 6:this.bu=s;break;case 7:this.Mu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Et=self.Ws,Ft=[0,0,1,0,1,1,0,1],Dt=Et.vr(Et.du);Et.qu=class extends Et.br{constructor(t,s=!0){super(),t=t||Ft,this.Xu=Float64Array.from(t),this.Yu=new Et.Rect,this.$u=!0,this.Ku=s}Gr(){}Zu(){return this.Xu}Qu(){return this.Xu.length/2}tc(t){this.Xu.length===t.length?this.Xu.set(t):this.Xu=Float64Array.from(t),this.$u=!0}ic(){this.tc(Ft)}I(t){this.tc(t.Xu)}ec(){this.$u=!0}hc(){if(this.$u){let i=this.Xu,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Yu.set(e,h,r,n),this.$u=!1}}Du(t,s,i){let e=this.Xu;8!==e.length&&(e=new Float64Array(8),this.Xu=e),e[0]=t.Ll()-s,e[1]=t.Bl()-i,e[2]=t.Nl()-s,e[3]=t.Bl()-i,e[4]=t.Nl()-s,e[5]=t.Wl()-i,e[6]=t.Ll()-s,e[7]=t.Wl()-i,this.Yu.I(t),0===s&&0===i||this.Yu.offset(-s,-i),this.$u=!1}rc(t,s,i){Dt.I(t),Dt.offset(s,i),this.tc(Dt.toArray()),this.$u=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.nc(t,s,e,h)}nc(i,e,h,r){const n=this.Xu;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,l=n[o]*e;n[t]=a*r-l*h,n[o]=l*r+a*h}this.$u=!0}offset(i,e){const h=this.Xu;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}lu(i,e){const h=this.Xu;if(i===h[0]&&e===h[1])return!0;this.hc();let t=this.Yu,r=t.Ll()-110,n=t.Bl()-101,o=t.Nl()+131,a=t.Wl()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=n<e?(u=n,e):(u=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),S=0;for(let t=0,s=h.length;t<s;t+=2){const w=(t+2)%s,b=h[t],M=h[t+1],v=h[w],x=h[1+w];Et.mn(r,n,i,e,l,c,u,f,b,M,v,x)&&++y,Et.mn(o,a,i,e,d,m,p,g,b,M,v,x)&&++S}return y%2==1||S%2==1}oc(t,c,f){const d=t.Xu,p=this.Xu;if(this.lu(d[0]+c,d[1]+f))return!0;if(t.lu(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,l;a=i<h?(n=i,h):(n=h,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,S=d[m]+c,w=d[1+m]+f;if(Et.mn(i,e,h,r,n,a,o,l,g,y,S,w))return!0}}return!1}Bu(i,e,h,r,n,o){if(this.lu(h-i,r-e))return!0;if(this.lu(n-i,o-e))return!0;let a=0,l=0,u,c;u=h<n?(a=h,n):(a=n,h),c=r<o?(l=r,o):(l=o,r);const f=this.Xu;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Et.mn(h,r,n,o,a,u,l,c,p,m,g,y))return!0}return!1}ju(i){const e=this.Xu;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.$u=!0}Uu(i){const e=this.Xu;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.$u=!0}Hu(){const i=this.Xu;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.$u=!0}ac(){let i=this.Xu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.Qu()}lc(){let i=this.Xu,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.Qu()}uc(){return this.Xu}fc(){return this.Qu()}mc(){return this.Ku}}}{const kt=self.Ws;kt.yc=class extends kt.br{constructor(t){if(super(),this.Sc=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Gr(){this.wc(),this.Sc=null}Mc(){return 0===this.Sc.size}wc(){const t=this.Sc;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.Sc,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ni(t,s){const i=this.Sc.get(t);return i&&i.get(s)}ri(t,s){const i=this.Sc.get(t);return!!i&&i.has(s)}vc(t,s){const i=this.Sc,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}xc(t){const s=this.Sc,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}Gc(){let t=0;for(const s of this.Sc.values())t+=s.size;return t}*values(){for(const t of this.Sc.values())yield*t.values()}*Tc(){for(const[t,s]of this.Sc.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.Sc.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const Ot=self.Ws;Ot._c=class extends Ot.br{constructor(){super(),this.Ic=new Set,this.Cc=[],this.Rc=!1}Gr(){this.wc()}wc(){this.Ic.clear(),Ot.$n(this.Cc),this.Rc=!1}Ac(t){this.Ic.has(t)||(this.Ic.add(t),this.Rc)||this.Cc.push(t)}ri(t){return this.Ic.has(t)}vc(t){this.Ic.delete(t)&&(this.Rc=!0)}Gc(){return this.Ic.size}Mc(){return 0===this.Ic.size}Pc(){return this.Rc&&(this.Ec(),this.Rc=!1),this.Cc}Ec(){const t=this.Cc;Ot.$n(t);for(const s of this.Ic)t.push(s)}}}{const Lt=self.Ws,Bt=new Map,Nt=new Map,Wt=new Map,jt=new Map,Vt=new Map,Ut=new Map,Ht=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),$t=(self.Fc=class hs{constructor(){}static Dc(){return"default"}static kc(){return"noease"}static Oc(t){return Yt.get(t)}static Lc(s,...i){this.Bc();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.Nc(t,s)||hs.Nc(t,s).transition.IsForAnyPurpose())):[...(t=Vt).keys()]).sort();return[...Nt.keys()].concat(e).filter(t=>!i.includes(t))}static Wc(){this.Bc();const t=[...Vt.keys()];return t.sort(),[...Nt.keys()].concat(t)}static jc(){this.Bc();const t=[...Vt.keys()];return t.sort(),t}static Vc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static Uc(t){return this.Bc(),[...Nt.keys()].includes(t)}static Hc(t){const s=Jt.get(t);return s?Bt.get(s):hs.Uc(t)?Bt.get(t):Ht.has(t)?Ht.get(t):void 0}static zc(t){return this.Bc(),zt.get(t)}static Jc(t,s){this.Bc();const i=hs.Hc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static Nc(t,s){this.Bc();const i=jt.get(s);if(i)return i.get(t)}static qc(t,s){this.Bc();const i=hs.Hc(t);return!!i||!!Wt.get(s).get(t)}static Xc(t){this.Bc();const s=hs.Hc(t);return s||Vt.get(t)}static Yc(t){return this.Bc(),Ut.get(t)}static $c(t){this.Bc();const s=this.Wc();return s[t]}static Kc(t,s){this.Bc();const i=this.Lc(s);return i.indexOf(t)}static Zc(t){return this.Kc(t)}static Bc(){0===Bt.size&&(this.Qc("default",()=>{}),this.Qc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Qc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Qc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Qc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Qc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Qc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Qc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Qc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Qc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Qc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Qc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Qc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Qc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Qc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Qc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Qc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Qc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Qc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Qc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Qc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Qc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Qc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Qc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Qc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.tf("cubicbezier",this.if),this.tf("spline",this.ef))}static Qc(t,s,i=!1){if("function"==typeof s)hs.hf(t,s,"predefined");else{if(!Lt.Ue(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Lt.vr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.hf(t,(t,s,i,e)=>h.rf(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=Lt.vr(Lt.nf,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.lf(i),hs.hf(t,(t,s,i,e)=>r.rf(t,s,i,e),"predefined")}}}static tf(t,s){hs.hf(t,s,"private")}static uf(t,s,i,e){this.Bc(),hs.hf(t,s,"custom",i,e)}static cf(t,s){if(!this.Uc(t)&&![...Ht.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),jt.get(s));e&&e.delete(t)}}static hf(t,s,i,e,h){switch(i){case"predefined":Bt.set(t,s),Nt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),jt.has(e)||jt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),jt.get(e));n.set(t,h)}else Vt.set(t,s),Ut.set(t,h);break;case"private":Bt.set(t,s),Ht.set(t,s);break;default:throw new Error("unexpected ease mode")}}static ff(t,s,i,e){return 0===e?s:i*t/e+s}static if(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static ef(t,s,i,e,h,r,n,o,a,l){if(e===h&&r===n)return t;const u=es(t,s,e,r,o,l),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(u,c,f,d)}static df(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<$t;++t){const a=ss(t*Kt,r,n,o);h.push(a)}return h}},11),Kt=1/($t-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],l=$t-1;for($t;r!=l&&a<=n;)r++,a=h[r],o+=Kt;r--;let u=(n-(a=h[r]))/(h[r+1]-a),c=o+u*Kt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Ce(t)};o;const rs=self.Ws;rs.pf=class{constructor(t){this.gf=[],this.Ir=t||"",this.yf=0}Gr(){this.wc(),this.gf=null}Sf(){return this.Ir}wc(){rs.Kn(this.gf),this.yf=0}wf(){return this.yf}bf(t=Math.random()*this.wf()){let s=0;for(const[i,e]of this.gf)if(t<(s+=i))return e;return 0}Mf(t,s){o(s),this.yf+=t,this.gf.push([t,s])}vf(s,i){o(i);const e=0===s;for(let t=0;t<this.gf.length;t++){const h=this.gf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.gf.splice(t,1),this.yf-=h[0];break}}}xf(){return JSON.stringify(this.gf)}static Gf(t,s){const i=new rs.pf(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.Mf(r,n)}return i}}}{let t=self.Ws,i=0;t.Tf=class{constructor(t,s){this._f=t,this.If=s,this.Cf=i++,this._f.Rf("runtime","screen-reader-text",{type:"create",id:this.Cf,text:this.If})}Gr(){this._f.Rf("runtime","screen-reader-text",{type:"release",id:this.Cf}),this._f=null,this.If="",this.Cf=-1}Af(t){this.If!==t&&(this.If=t,this._f.Rf("runtime","screen-reader-text",{type:"update",id:this.Cf,text:this.If}))}}}{const ns=self.Ws;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Pf=!1,this.Ef=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Ef)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Pf=!0}}}{const os=self.Ws;os.Event.Ff=class extends os.br{constructor(t){super(),this.Df=t,this.kf=[],this.Of=new Set,this.Lf=[],this.Bf=new Set,this.Nf=0,this.Wf=[]}Gr(){0<this.Nf||(os.$n(this.kf),this.Of.clear(),os.$n(this.Lf),this.Bf.clear(),os.$n(this.Wf),os.Gr(this))}jf(t,s){this.Vf()?this.Wf.push({Uf:"add",Hf:t,capture:s}):s?this.Of.has(t)||(this.kf.push(t),this.Of.add(t)):this.Bf.has(t)||(this.Lf.push(t),this.Bf.add(t))}zf(t,s){this.Vf()?this.Wf.push({Uf:"remove",Hf:t,capture:s}):s?this.Of.has(t)&&(this.Of.delete(t),os.ro(this.kf,t)):this.Bf.has(t)&&(this.Bf.delete(t),os.ro(this.Lf,t))}Jf(){return!this.kf.length&&!this.Lf.length}Vf(){return 0<this.Nf}qf(){const t=new Set,s=new Set;for(const i of this.Wf)if("add"===i.Uf)this.jf(i.Hf,i.capture),(i.capture?s:t).delete(i.Hf);else{if("remove"!==i.Uf)throw new Error("invalid op");(i.capture?(this.Of.delete(i.Hf),s):(this.Bf.delete(i.Hf),t)).add(i.Hf)}os.lo(this.Lf,t),os.lo(this.kf,s),os.$n(this.Wf)}Xf(i){this.Yf();let e=!1;for(let t=0,s=this.kf.length;t<s;++t)if(this.kf[t](i),i.Pf){e=!0;break}if(!e)for(let t=0,s=this.Lf.length;t<s&&(this.Lf[t](i),!i.Pf);++t);return this.$f(),!i.defaultPrevented}Kf(i){this.Yf();for(let t=0,s=this.kf.length;t<s;++t)this.kf[t](i);for(let t=0,s=this.Lf.length;t<s;++t)this.Lf[t](i);return this.$f(),!0}Yf(){this.Nf++}$f(){this.Nf--,0===this.Nf&&0<this.Wf.length&&this.qf()}Zf(t){t?this.Yf():this.$f()}Qf(i){let e=[];for(let s=0,t=this.kf.length;s<t;++s){let t=this.kf[s];e.push(os.t0(()=>t(i)))}for(let s=0,t=this.Lf.length;s<t;++s){let t=this.Lf[s];e.push(os.t0(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}s0(i){const e=[];this.Yf();for(let t=0,s=this.kf.length;t<s;++t){const h=this.kf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Lf.length;t<s;++t){const r=this.Lf[t](i);r instanceof Promise&&e.push(r)}return this.$f(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async i0(t){return this.s0(t)}async e0(i){this.Yf();for(let t=0,s=this.kf.length;t<s;++t){const e=this.kf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Lf.length;t<s;++t){const h=this.Lf[t](i);h instanceof Promise&&await h}return this.$f(),!i.defaultPrevented}*h0(i){this.Yf();for(let t=0,s=this.kf.length;t<s;++t){const e=this.kf[t](i);os.Qo(e)&&(yield*e)}for(let t=0,s=this.Lf.length;t<s;++t){const h=this.Lf[t](i);os.Qo(h)&&(yield*h)}this.$f()}}}{const as=self.Ws;as.Event.r0=class extends as.br{constructor(){super(),this.n0=new Map,this.o0=!1}Gr(){if(this.o0)throw new Error("already released");this.a0(),this.o0=!0,as.Gr(this)}Tr(){return this.o0}a0(){if(this.n0){for(let t of this.n0.values())t.Gr();this.n0.clear()}}l0(t,s){let i=this.n0.get(t);return i||(s?(i=as.vr(as.Event.Ff,t),this.n0.set(t,i),i):null)}u0(t){return this.n0.has(t)}addEventListener(t,s,i){let e=this.l0(t,!0);e.jf(s,!!i)}removeEventListener(t,s,i){let e=this.l0(t,!1);e&&(e.zf(s,!!i),e.Jf())&&this.n0.delete(t)}dispatchEvent(t){const s=this.l0(t.type,!1);return!s||(t.cancelable?s.Xf(t):s.Kf(t))}c0(t){const s=this.l0(t.type,!1);return s?(t.Ef=!0,s.Qf(t)):Promise.resolve(!0)}async f0(t){const s=this.l0(t.type,!1);if(!s)return!0;this.n0.delete(t.type),t.Ef=!0;const i=await s.Qf(t);return s.Gr(),i}async d0(t){const s=this.l0(t.type,!1);return!s||s.i0(t)}p0(t){const s=this.l0(t.type,!1);return!s||s.s0(t)}async m0(t){const s=this.l0(t.type,!1);return!s||s.e0(t)}g0(t){const s=this.l0(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.h0(t)}Zf(t){for(const s of this.n0.values())s.Zf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;n(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Hf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Ws),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.li.ri("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.t0=function(i){let e=null;return t.isDebug&&(e=t.ge()),new Promise((t,s)=>{u.push({Hf:i,resolve:t,reject:s,stack:e}),h?n(u.pop()):-1===c&&r(a)})},t.t0.y0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.S0(i)){let t=s.w0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Ws),e=1e3,h=100,r=-1,n=(i.b0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.M0=class{constructor(t,s){this.v0=t,this.x0=1e3*s,this.G0=0,this.T0=!1}_0(){let t=i.b0();this.G0=t+this.x0,this.T0||(a.add(this),this.T0=!0),-1===n?(o=this.G0,n=self.setTimeout(s,this.x0+h)):this.G0<o&&o>t+e&&(self.clearTimeout(n),o=this.G0,n=self.setTimeout(s,this.x0+h))}S0(t){return!(t>=this.G0)||(this.v0()?(this.G0=t+this.x0,!0):this.T0=!1)}w0(){return this.G0}I0(){this.T0&&(a.delete(this),this.T0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}Gr(){this.I0(),this.v0=null}}}{const ls=self.Ws;ls.C0=class us{constructor(t){this.R0=!1,this.A0=t}P0(){this.R0||(this.R0=!0,this.A0&&(this.A0(),this.A0=null))}E0(){return this.R0}Gr(){this.P0()}static Gr(t){return new us(()=>t.Gr())}static F0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.D0;for(let t of i)s.addEventListener(t,e,h),r.Ac(ls.vr(ls.C0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),ls.vr(ls.C0,()=>s.removeEventListener(i,e,h))}},ls.k0=class extends ls.C0{O0(t){this.A0=t}},ls.D0=class extends ls.C0{constructor(...s){super(),this.L0=new Set;for(let t of s)this.Ac(t)}Ac(...s){if(this.R0)throw new Error("already disposed");for(let t of s)this.L0.add(t)}B0(t){if(this.R0)throw new Error("already disposed");this.L0.delete(t)}N0(){if(this.R0)throw new Error("already disposed");if(this.L0){for(let t of this.L0)t.P0();this.L0.clear()}}E0(){return this.R0}P0(){if(this.R0)throw new Error("already disposed");this.R0=!0;for(let t of this.L0)t.P0();this.L0.clear(),this.L0=null}Gr(){this.P0()}}}{const cs=self.Ws;cs.W0=class extends cs.br{constructor(){super(),this.j0=0,this.ml=0,this.V0=0,this.U0=0}Ac(t){this.ml=(t=+t)-this.j0,this.V0=this.U0+this.ml,this.j0=this.V0-this.U0-this.ml,this.U0=this.V0}H0(t){this.U0-=+t}ni(){return this.U0}_0(){this.j0=0,this.ml=0,this.V0=0,this.U0=0}Set(t){this.j0=0,this.ml=0,this.V0=0,this.U0=+t}z0(t){this.j0=t.j0,this.ml=t.ml,this.V0=t.V0,this.U0=t.U0}Gr(){}}}{const fs=self.Ws,n={};n.J0=function(t){this.q0=t,this.right=this.q0.X0,this.left=this.q0.X0,this.parent=null,this.color=!1,this.key=null},n.Y0=function(t){this.size=0,this.X0=new n.J0(this),this.X0.color=!1,this.root=this.X0,this.root.parent=this.X0,this.compare=t||this.$0},n.Y0.prototype.$0=function(t,s){return t<s?-1:s<t?1:0},n.Y0.prototype.clone=function(){var t=new n.Y0(this.compare);return t.K0(this),t},n.Y0.prototype.clear=function(){this.size=0,this.X0=new n.J0(this),this.X0.color=!1,this.root=this.X0,this.root.parent=this.X0},n.Y0.prototype.Z0=function(t){var s=t.right;t.right=s.left,s.left!=this.X0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.X0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.Y0.prototype.Q0=function(t){var s=t.left;t.left=s.right,s.right!=this.X0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.X0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.Y0.prototype.td=function(t){if(this.contains(t))this.ed(t).key=t;else{for(var s=new n.J0(this),i=(s.key=t,this.X0),e=this.root;e!=this.X0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.X0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.X0,s.right=this.X0,s.color=!0,this.hd(s),this.size++}},n.Y0.prototype.hd=function(t){for(;t!=this.X0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.Z0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.X0&&this.Q0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.Q0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.X0&&this.Z0(t.parent.parent))}this.root.color=!1},n.Y0.prototype.rd=function(t){var s=t.left==this.X0||t.right==this.X0?t:this.nd(t),i=s.left!=this.X0?s.left:s.right;i.parent=s.parent,s.parent==this.X0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.od(i),this.size--},n.Y0.prototype.od=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.Z0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.Q0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.Z0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.Q0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.Z0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.Q0(t.parent),this.root))}t.color=!1},n.Y0.prototype.remove=function(t){var s;return(t=this.ed(t))!=this.X0?(s=t.key,this.rd(t),s):null},n.Y0.prototype.ud=function(t,s){this.remove(s)},n.Y0.prototype.min=function(t){for(;t.left!=this.X0;)t=t.left;return t},n.Y0.prototype.max=function(t){for(;t.right!=this.X0;)t=t.right;return t},n.Y0.prototype.nd=function(t){if(t.right!=this.X0)return this.min(t.right);for(var s=t.parent;s!=this.X0&&t==s.right;)s=(t=s).parent;return s},n.Y0.prototype.fd=function(t){if(t.left!=this.X0)return this.max(t.left);for(var s=t.parent;s!=this.X0&&t==s.left;)s=(t=s).parent;return s},n.Y0.prototype.dd=function(t){if(0<this.size){var s=this.ed(t);if(s==this.X0)return null;if(s.right!=this.X0)return this.min(s.right).key;for(var i=s.parent;i!=this.X0&&s==i.right;)i=(s=i).parent;return i!=this.X0?i.key:null}return null},n.Y0.prototype.md=function(t){if(0<this.size){var s=this.ed(t);if(s==this.X0)return null;if(s.left!=this.X0)return this.max(s.left).key;for(var i=s.parent;i!=this.X0&&s==i.left;)i=(s=i).parent;return i!=this.X0?i.key:null}return null},n.Y0.prototype.gd=function(){return this.min(this.root).key},n.Y0.prototype.yd=function(){return this.max(this.root).key},n.Y0.prototype.ed=function(t){for(var s=this.root;s!=this.X0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.Y0.prototype.contains=function(t){return null!=this.ed(t).key},n.Y0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.Y0.prototype.K0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.td(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.td,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.td(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.td(t[e])},n.Y0.prototype.Sd=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.ud,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.Y0.prototype.wd=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.Y0.prototype.range=function(t,s){var i=[];return this.bd(function(t){i.push(t)},t,s),i},n.Y0.prototype.Md=function(t,s){if(!this.vd())for(var i=this.min(this.root);i!=this.X0;){if(t.call(s,i.key,this))return;i=this.nd(i)}},n.Y0.prototype.xd=function(t,s,i){if(!this.vd())for(var e=this.ed(s);e!=this.X0;){if(t.call(i,e.key,this))return;e=this.nd(e)}},n.Y0.prototype.Gd=function(t,s,i){if(!this.vd())for(var e=this.min(this.root),h=this.ed(s);e!=h;){if(t.call(i,e.key,this))return;e=this.nd(e)}},n.Y0.prototype.bd=function(t,s,i,e){if(!this.vd())for(var h=this.ed(s),r=this.ed(i);h!=r;){if(t.call(e,h.key,this))return;h=this.nd(h)}},n.Y0.prototype.Td=function(t,s){if(!this.vd())for(var i=this.max(this.root);i!=this.X0;){if(t.call(s,i.key,this))return;i=this.fd(i)}},n.Y0.prototype.forEach=function(t,s){if(!this.vd())for(var i=this.min(this.root);i!=this.X0;i=this.nd(i))t.call(s,i.key,i.key,this)},n.Y0.prototype.some=function(t,s){if(!this.vd())for(var i=this.min(this.root);i!=this.X0;i=this.nd(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.Y0.prototype.every=function(t,s){if(this.vd())return!1;for(var i=this.min(this.root);i!=this.X0;i=this.nd(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.Y0.prototype.map=function(t,s){var i=[];if(!this.vd())for(var e=this.min(this.root);e!=this.X0;e=this.nd(e))i.push(t.call(s,e.key,e.key,this));return i},n.Y0.prototype.filter=function(t,s){var i=[];if(!this.vd())for(var e=this.min(this.root);e!=this.X0;e=this.nd(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.Y0.prototype.getCount=function(){return this.size},n.Y0.prototype.vd=function(){return 0==this.size},n.Y0.prototype.isSubsetOf=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.vd())return!0;for(var e=this.min(this.root);e!=this.X0;e=this.nd(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.Y0.prototype.intersection=function(t){var s=new n.Y0(this.compare);if(!this.vd())for(var i=this.min(this.root);i!=this.X0;i=this.nd(i))t.contains.call(t,i.key,i.key,this)&&s.td(i.key);return s},fs.Y0=class extends fs.br{constructor(t){super(),this._d=new n.Y0(t),this.Id=!1,this.Cd=new Set,this.Rd=new Set}Ac(t){this.Id?this._d.contains(t)?this.Rd.delete(t):this.Cd.add(t):this._d.td(t)}B0(t){this.Id?this._d.contains(t)?this.Rd.add(t):this.Cd.delete(t):this._d.remove(t)}ri(t){return this.Id?!!this.Cd.has(t)||!this.Rd.has(t)&&this._d.contains(t):this._d.contains(t)}wc(){this._d.clear(),this.Cd.clear(),this.Rd.clear()}toArray(){if(this.Id)throw new Error("cannot be used in queueing mode");return this._d.getValues()}Gc(){return this._d.getCount()+this.Cd.size-this.Rd.size}Mc(){return 0===this.Gc()}Ad(){if(this.Mc())throw new Error("empty set");if(this.Id)throw new Error("cannot be used in queueing mode");const t=this._d,s=t.min(t.root);return s.key}Pd(){if(this.Mc())throw new Error("empty set");if(this.Id)throw new Error("cannot be used in queueing mode");const t=this.Ad();return this.B0(t),t}Ed(t){if(this.Id!==(t=!!t)&&!(this.Id=t)){for(const s of this.Rd)this._d.remove(s);this.Rd.clear();for(const i of this.Cd)this._d.td(i);this.Cd.clear()}}Fd(t){this._d.forEach(t)}*values(){if(!this.Mc()){const s=this._d;for(let t=s.min(s.root);t!=s.X0;t=s.nd(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Ws;ds.Dd=class{constructor(t=ds.hardwareConcurrency){this.kd=t,this.Od=[],this.Ld=0}Ac(i){return new Promise((t,s)=>{this.Od.push({Hf:i,resolve:t,reject:s}),this.Bd()})}Nd(i){for(let t=0,s=this.Od.length;t<s;++t)if(this.Od[t].Hf===i)return t;return-1}Wd(t,s){const i=this.Nd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Od[i].resolve(s),this.Od.splice(i,1)}jd(t,s){const i=this.Nd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Od[i].reject(s),this.Od.splice(i,1)}async Bd(){if(this.Od.length&&!(this.Ld>=this.kd)){this.Ld++;const s=this.Od.shift();try{const t=await s.Hf();s.resolve(t)}catch(t){s.reject(t)}this.Ld--,this.Bd()}}static async Vd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Ws;ps.Ud=class{constructor(t,s,i){this.v0=t,this.Hd=s,this.zd=i||2*s,this.Jd=-1,this.qd=-1/0,this.Xd=()=>this.Yd(),this.$d=!1,this.Kd=!1,this.Zd=null}Qd(t){this.Kd=!!t}t1(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.zd:this.Hd}s1(...e){if(-1===this.Jd){this.Zd=e;let t=ps.b0(),s=t-this.qd,i=this.t1();i<=s&&this.Kd?(this.qd=t,this.i1()):this.Jd=self.setTimeout(this.Xd,Math.max(i-s,4))}}i1(){this.$d=!0;const t=this.Zd;this.Zd=null,t?this.v0(...t):this.v0(),this.$d=!1}_0(){this.$d||(this.e1(),this.Zd=null,this.qd=ps.b0())}Yd(){this.Jd=-1,this.qd=ps.b0(),this.i1()}e1(){-1!==this.Jd&&(self.clearTimeout(this.Jd),this.Jd=-1)}Gr(){this.e1(),this.v0=null,this.Zd=null,this.Xd=null}}}{const ms=self.Ws;ms.h1=class{constructor(){this.n1=new Map,this.o1=!1,this.a1=null,this.l1=null,this.u1=null,this.c1=null}f1(t){this.o1=!!t}d1(){return this.o1}m1(t){this.a1=t}S1(t){if(this.a1)return this.a1(t);throw new Error("no get base size callback set")}w1(t){this.l1=t}b1(t,s,i,e,h,r){if(this.l1)return this.l1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}M1(t){this.u1=t}v1(t){if(!this.u1)throw new Error("no release result callback set");this.u1(t)}G1(t){this.c1=t}T1(){if(!this.c1)throw new Error("no redraw callback set");this.c1()}_1(t){let s=this.n1.get(t);return s||(s=ms.vr(ms.I1,this,t),this.n1.set(t,s)),s.C1(),s}R1(t){this.n1.delete(t.A1())}P1(){for(const t of this.n1.values())t.E1(),t.F1()}}}{const gs=self.Ws;gs.I1=class{constructor(t,s){this.D1=t,this.O1=s,this.L1=0,this.B1=0,this.N1=0,this.W1=this.D1.S1(s).then(t=>{this.D1&&(this.B1=t[0],this.N1=t[1],this.D1.T1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.j1=!0,this.D1&&this.D1.T1()}),this.V1=0,this.U1=0,this.H1=0,this.z1=0,this.J1=!1,this.q1=null,this.X1=!1,this.j1=!1}Gr(){if(this.L1<=0)throw new Error("already released");this.L1--,0===this.L1&&this.Y1()}E1(){this.q1&&(this.D1.v1(this.q1),this.q1=null)}Y1(){this.E1(),this.D1.R1(this),this.D1=null}A1(){return this.O1}C1(){this.L1++}K1(){return 0<this.L1}Z1(){return this.q1}F1(){this.X1=!0}async Q1(e,h,r){if(0!==h&&0!==r&&!this.j1&&!this.J1){let t=gs.Kr(Math.ceil(h)),s=gs.Kr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.D1.d1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.V1&&s<=this.U1)||this.X1){this.J1=!0,this.V1=t,this.U1=s;const l=await this.D1.b1(this.O1,e,this.V1,this.U1,h,r);this.D1&&(this.E1(),this.q1=l,this.H1=h,this.z1=r,this.J1=!1,this.X1=!1,this.D1.T1())}}}tp(){return this.W1}sp(){return this.B1}ep(){return this.N1}hp(){return this.H1}rp(){return this.z1}np(){return this.j1}}}{let s=function(t){return bs.get(t)};s;const c=self.Ws,ys=(c.op="\ufeff",new Set("0123456789")),Ss=(c.lp=function(t){return ys.has(t)},new Set(" \t\n\r            ​\u2028\u2029  　"));c.up=function(t){return Ss.has(t)},c.cp=function(t){return[...t].filter(t=>!c.up(t)).join("")},c.fp=function(t){for(const s of t)if(!c.up(s))return!1;return!0},c.pp=function(t){for(const s of t)if(!c.up(s))return!1;return!0},c.mp=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.gp=function(t){return[...t].filter(t=>!c.mp(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.yp=function(t){return!c.up(t)&&i&&i.test(t)};const ws=new Set("0123456789.+-e"),bs=(c.Sp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!ws.has(t))return!1;return!0},c.bp=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.lp(t))break;--i}return s.substr(0,i)},c.Mp=function(t){let s=c.bp(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),Ms=/[&<>"']/g,vs=(c.vp=function(t){return t.replace(Ms,s)},c.xp=function(t){let s=c.Gp(t,"\\","\\\\");return s=c.Gp(s,'"','\\"'),s=c.Gp(s,"\t","\\t"),s=c.Gp(s,"\r",""),c.Gp(s,"\n","\\n")},c.Tp=function(t){let s=c.Gp(t,"&","&amp;");return s=c.Gp(s,"<","&lt;"),s=c.Gp(s,">","&gt;"),c.Gp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.me=function(t){return t.replace(vs,"\\$&")},c._p=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.Ip=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.Gp=function(t,s,i){return t.replaceAll(s,()=>i)},c.Cp=function(t,s,i){return t.replace(new RegExp(c.me(s),"gi"),()=>i)},c.Rp=function(t,s){"string"==typeof s?t.textContent=s:s.Ap()?t.textContent=s.toString():(t.innerHTML=s.Pp(),s instanceof c.Lh&&s.Ep(t))},c.Fp=function(t,s){return t instanceof c.HtmlString||t instanceof c.Lh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Lh?s.equals(t):t===s},c.Dp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.kp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Op=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Lp=function(t,s){return s<t?1:t<s?-1:0},c.Bp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Gs=(c.Np=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Wp=function*(t){for(const s of xs.segment(t))yield s.segment},c.jp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Ts=1024*Gs,_s={Vp:!(c.Up=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Gs){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Ts){let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Hp:!0,zp:!0,Jp:!0,qp:!0};c.Xp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Hp){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.zp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Jp){const a=Math.floor(t/60);(0<a||i.length||!s.qp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.qp){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const r=(s.Vp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Yp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.$p=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.Kp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.Qn(i,4,"0"),c.Qn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Zp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.Qp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.tm=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.Gp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Ws),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Lh=class{constructor(t,s){if(this.hm=s&&s.rm?t:f.vp(t),this.nm="",this.lm=!1,this.um=[],this.fm=[],s){if(this.lm=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.um=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.fm=s.tips}}this.pm=this.hm.includes("["),this.gm=this.lm&&this.hm.includes("\n"),this.ym=!this.pm&&!this.gm&&!this.hm.includes("&"),this.Sm=!1,this.wm=[]}toString(){return this.hm}valueOf(){return this.hm}Ap(){return this.ym}Mm(){return this.pm?this.hm.replace(i,""):this.hm}Pp(){if(this.ym)return this.hm;if(!this.nm&&this.hm){let t=this.hm;this.pm&&(u=0,a=this.um,l=this.fm,t=t.replace(i,s),a=null,l=null),this.gm&&(t=t.replace(e,"<br>")),this.nm=t}return this.nm}Ep(i){if(this.um.length)for(let t=0,s=this.um.length;t<s;++t){const e=this.um[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Pp()===t.Pp():t instanceof f.Lh?this.hm===t.hm:this.hm===t}vm(){if(!this.Sm){let e=[],t=this.hm,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+n.length,l&&e.push({text:l,xm:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,xm:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),xm:h.slice(0)});for(const c of e)c.text&&(c.text=this.Gm(c.text));this.wm=e.map(t=>t.icon?f.vr(f.Tm,{icon:t.icon,xm:t.xm}):f.vr(f._m,{Im:f.Np(t.text),xm:t.xm})),this.Sm=!0}return this.wm}Gm(t){return t=f.Gp(t,"\\[","["),f.Gp(t,"\\\\","\\")}static Cm(t){return f.vr(f.Lh,t,{rm:!0}).Mm()}static Rm(t){return t.replace(p,"")}}}{let l=function(t){return" "!==t&&" "!==t&&S.up(t)},a=function(t){return Is.has(t)},u=function(t){return S.yp(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const S=self.Ws,Is=new Set("〈《「『【〔〖〘〚〝");S.Am=class{constructor(){this.Pm=[],this.Em=null}Fm(){return this.Pm}Dm(){return this.Pm.length}km(t){this.Em=t}Om(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Lm()){const a=s(o);o.Bm(a.height),o.Nm(a.fontBoundingBoxAscent||0),o.Wm(a.fontBoundingBoxDescent||0),o.jm(a.Vm||0),o.Um()?o.Hm(a.width):o.zm()&&o.Jm(this.Em)}i+=o.Lm(),e=Math.max(e,o.qm()),h=Math.max(h,o.Xm()),r=Math.max(r,o.Ym()),n=Math.max(n,o.$m())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,Vm:n}}Km(t,s,i,e,h,r){this.Pm.push(S.vr(S.Am.Zm,{Qm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Vm:r}))}Am(s,r,n,i,o){if("string"==typeof s&&(s=[S.vr(S._m,{Im:S.Np(s)})]),S.$n(this.Pm),!(!s.length||1===s.length&&s[0].Um()&&s[0].Mc()||n<2)){if(1===s.length){const a=s[0];if(a.Um()&&a.tg()<=100&&!a.sg()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Vm:h}=r(a);if(t+=o,a.Hm(t),a.Bm(s),a.Nm(i||0),a.Wm(e||0),a.jm(h||0),t<=n)return void this.Km([a],t,s,i,e,h)}}let t;t="word"===i?this.ig(s):"cjk"===i?this.eg(s):this.hg(s),this.rg(t,r,n,o)}}ig(t){let s=[],i=[],e=!1;for(const h of t){const r=h.ng();if(h.zm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.og())if(y(n))0<i.length&&s.push(i),s.push([S.vr(S._m,{Im:["\n"],xm:r})]),i=[];else if(0===i.length)i.push(S.vr(S._m,{Im:[n],xm:r})),e=l(n);else{const o=l(n);if(o===e){const a=i.at(-1);a.ng()===r?a.ag(n):i.push(S.vr(S._m,{Im:[n],xm:r}))}else s.push(i),i=[S.vr(S._m,{Im:[n],xm:r})],e=o}}return 0<i.length&&s.push(i),s}eg(t){let s=[],i=[],e=!1;for(const h of t){const r=h.ng();if(h.zm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.og())if(y(n))0<i.length&&s.push(i),s.push([S.vr(S._m,{Im:["\n"],xm:r})]),i=[];else{if(0===i.length)i.push(S.vr(S._m,{Im:[n],xm:r}));else if(e||u(n)){const o=i.at(-1);o.ng()===r?o.ag(n):i.push(S.vr(S._m,{Im:[n],xm:r}))}else s.push(i),i=[S.vr(S._m,{Im:[n],xm:r})];e=a(n)}}return 0<i.length&&s.push(i),s}hg(t){const s=[];for(const i of t)if(i.Um()){const e=i.og();S.rr(s,e.map(t=>[S.vr(S._m,{Im:[t],xm:i.ng()})]))}else s.push([i]);return s}lg(t){return t.map(t=>t.ug())}fg(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.Um()&&i[0].Um()&&i[0].ng()===t.ng()&&(t.dg(i[0].og()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.ug())}}rg(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].Um()&&1===u[0].tg()&&y(u[0].og()[0])){if(0===n){const c=S.vr(S._m,{Im:[" "],xm:u[0].ng()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Vm||0}this.Km(h,r,n,o,a,l),h=[],r=0,n=0,o=0,a=0,l=0}else{const d=this.lg(h),p=(this.fg(d,u),this.Om(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Km(h,r,n,o,a,l),h=[],u[0].Um()&&S.pp(u[0].og()))r=0,n=0,o=0,a=0,l=0;else{this.fg(h,u);const g=this.Om(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Vm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Vm}0<h.length&&this.Km(h,r,n,o,a,l),this.pg(s,e)}pg(s,i){for(const e of this.Pm){const h=e.mg();if(h.length){let t=h.at(-1);if(t.Um()){const r=t.og(),n=r.slice(0);if(c(n),0===n.length)e.gg(-t.Lm()),h.pop();else if(n.length<r.length){t.yg(n);const o=s(t).width,a=t.Lm()-o;t.Hm(o),e.gg(-a)}0!==i&&0<h.length&&((t=h.at(-1)).gg(i),e.gg(i))}}}}wc(){S.$n(this.Pm)}Sg(){return this.Pm.reduce((t,s)=>Math.max(t,s.Lm()),0)}wg(){return this.Pm.reduce((t,s)=>t+s.qm(),0)}}}{const Cs=self.Ws;Cs.Am.Zm=class{constructor(t){this.wm=t.Qm||[],this.bg=t.width||-1,this.Mg=t.height||-1,this.vg=t.fontBoundingBoxAscent||-1,this.xg=t.fontBoundingBoxDescent||-1,this.Gg=t.Vm||-1,this.Tg=0,this._g=0}Qm(){return this.wm.values()}*Ig(){const s=this.wm;for(let t=s.length-1;0<=t;--t)yield s[t]}mg(){return this.wm}gg(t){this.bg+=t}Lm(){return this.bg}qm(){return this.Mg}Cg(){return this.vg}Ym(){return this.xg}$m(){return this.Gg}Rg(t){this.Tg=t}Ag(){return this.Tg}Pg(t){this._g=t}Eg(){return this._g}}}{const Rs=self.Ws;Rs.Fg=class{constructor(t){this.Dg=t.xm||[],this.bg=t.width||-1,this.Mg=t.height||-1,this.vg=t.fontBoundingBoxAscent||-1,this.xg=t.fontBoundingBoxDescent||-1,this.Gg=t.Vm||-1,this.Tg=0,this._g=0}Um(){return!1}zm(){return!1}ng(){return this.Dg}kg(s){const i=this.Dg;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Og(t){return!!this.kg(t)}Lg(){const t=new Map;for(const s of this.Dg)t.set(s.tag,s.param);return t}gg(t){this.bg+=t}Hm(t){this.bg=t}Lm(){return this.bg}Bm(t){this.Mg=t}qm(){return this.Mg}Nm(t){this.vg=t}Xm(){return this.vg}Wm(t){this.xg=t}Ym(){return this.xg}jm(t){this.Gg=t}$m(){return this.Gg}Rg(t){this.Tg=t}Ag(){return this.Tg}Pg(t){this._g=t}Eg(){return this._g}}}{const As=self.Ws;As._m=class extends As.Fg{constructor(t){super(t),this.Bg=t.Im}Um(){return!0}dg(t){As.rr(this.Bg,t),this.bg=-1,this.Mg=-1,this.vg=-1,this.xg=-1,this.Gg=-1}ag(t){this.Bg.push(t)}ug(){return As.vr(As._m,{Im:this.Bg.slice(0),xm:this.Dg,width:this.bg,height:this.Mg,fontBoundingBoxAscent:this.vg,fontBoundingBoxDescent:this.xg,Vm:this.Gg})}og(){return this.Bg}yg(t){this.Bg=t}tg(){return this.Bg.length}Mc(){return 0===this.Bg.length}sg(){return this.Bg.includes("\n")}}}{const Ps=self.Ws;Ps.Tm=class extends Ps.Fg{constructor(t){super(t),this.Ng=t.icon}zm(){return!0}Wg(){return this.Ng}ug(){return Ps.vr(Ps.Tm,{icon:this.Ng,xm:this.Dg,width:this.bg,height:this.Mg,fontBoundingBoxAscent:this.vg,fontBoundingBoxDescent:this.xg,Vm:this.Gg})}jg(t){if(!t)return null;let s=Number(this.Ng);return String(s)===this.Ng?(s=Math.floor(s),t.Vg(s)):t.Ug(this.Ng)}Jm(t){const s=this.jg(t);this.bg=s?this.Mg*s.Lm()/s.qm():0}Hg(t){const s=this.jg(t);return s?s.Hg():null}tg(){return 1}}}{const Es=self.Ws;Es.zg=class{constructor(t){this.Jg=new Map,this.qg=t.Xg,this.Yg=t.$g}Gr(){for(const t of this.Jg.values())t.Gr();this.Jg.clear()}Kg(t){let s=this.Jg.get(t);if(!s){const i=this.qg(t);s=Es.vr(Es.Zg,this,{source:t,Qg:i}),this.Jg.set(t,s)}return s}ty(t){return this.Jg.has(t)}iy(t){const s=this.Jg.get(t);s&&s.Gr(),this.Jg.delete(t)}async ey(t){return this.Yg(t)}}}{const Fs=self.Ws;Fs.Zg=class{constructor(t,s){this.hy=t,this.ny=s.source,this.oy=[],this.ly=new Map,this.uy=!1,this.my=!1,this.gy=null;const i=s.Qg.yy;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.vr(Fs.Sy,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.oy.push(h),e.tag&&this.ly.set(e.tag.toLowerCase(),h)}}Gr(){for(const t of this.oy)t.Gr();Fs.$n(this.oy),this.ly.clear(),this.hy=null,this.ny=null}wy(){return this.uy}by(){return this.my}My(){return this.gy||(this.gy=this.xy()),this.gy}async xy(){if(!this.uy){this.uy=!0,this.my=!0;const t=await this.hy.ey(this.ny);if(this.hy){const i=t.yy;for(let t=0,s=Math.min(i.length,this.oy.length);t<s;++t){const e=i[t].Gy;this.oy[t].Ty(e)}this.my=!1}}}Vg(t){return(t=Math.floor(t))<0||t>=this.oy.length?null:this.oy[t]}Ug(t){return this.ly.get(t.toLowerCase())||null}}}{const Ds=self.Ws;Ds.Sy=class{constructor(t,s){this._y=t,this.ny=s.source||null,this.Iy=s.index,this.Cy=s.tag,this.bg=s.width,this.Mg=s.height,this.Ry=null}Gr(){this.bg=0,this.Mg=0,this._y=null}Ay(){return this.ny}Lm(){return this.bg}qm(){return this.Mg}Ty(t){this.Ry=t}Hg(){return this.Ry}}}{let e=function(t,s,i,e){const h=Ns;Gh.W(Ls,i,s),Gh.W(Bs,t,s),Gh.kt(h,Ls,Bs),Gh.normalize(h,h),e.set(h[0],h[1],h[2],Gh.Dt(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,l=n.z,u=n.w,c=n.Py,f=n.Ey,d=n.Fy,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*r*g;if(u<=y)return!0;const S=o*e*c+o*t*p+a*h*f+a*s*m+l*r*d+l*i*g;return u<S},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const ks=self.Ws,Os=self.xs,Gh=Os.Ps,Vh=Os.Es,xh=Os.Is,Ls=Gh.create(),Bs=Gh.create(),Ns=Gh.create(),Ws=Vh.create(),js=xh.create(),Vs=Gh.create(),Us=Gh.create(),Hs=Gh.create(),zs=Gh.create(),Js=Gh.create(),qs=Gh.create(),Xs=Gh.create(),Ys=Gh.create(),$s=Vh.C(0,0,1,1);ks.Dy={ky(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Oy(t,s,i,e,h,r,n){const o=js,a=Ws;return xh.multiply(o,h,e),null!==xh.A(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,Vh.Wt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Ly(t,s,i,e,h,r,n){const o=Ls,a=Bs;if(!ks.Dy.Oy(t,s,0,e,h,r,o))return!1;if(!ks.Dy.Oy(t,s,1,e,h,r,a))return!1;let l=Bs,u=(Gh.W(l,a,o),Ns),c=(Gh.set(u,0,0,1),-i),f=Gh.Dt(u,l),d=0;if(0===f){const p=Gh.Dt(u,o)+c;if(0!==p)return!1}else if((d=-(Gh.Dt(o,u)+c)/f)<0)return!1;return Gh.Rt(n,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Py=NaN,this.Ey=NaN,this.Fy=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Py=0<t?1:0,this.Ey=0<s?1:0,this.Fy=0<i?1:0}}ks.Dy.By=class{constructor(){this.Ny=new Ks,this.Wy=new Ks,this.jy=new Ks,this.Vy=new Ks,this.Uy=new Ks,this.Hy=new Ks}zy(t,s){const i=$s;ks.Dy.Oy(0,1,0,t,s,i,Vs),ks.Dy.Oy(1,1,0,t,s,i,Us),ks.Dy.Oy(0,0,0,t,s,i,Hs),ks.Dy.Oy(1,0,0,t,s,i,zs),ks.Dy.Oy(0,1,1,t,s,i,Js),ks.Dy.Oy(1,1,1,t,s,i,qs),ks.Dy.Oy(0,0,1,t,s,i,Xs),ks.Dy.Oy(1,0,1,t,s,i,Ys),e(Hs,Vs,Js,this.Ny),e(Vs,Us,qs,this.Wy),e(Us,zs,Ys,this.jy),e(zs,Hs,Xs,this.Vy),e(Xs,Js,qs,this.Hy),e(zs,Us,Vs,this.Uy)}Jy(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Ny)&&n(t,s,i,e,h,r,this.Wy)&&n(t,s,i,e,h,r,this.jy)&&n(t,s,i,e,h,r,this.Vy)&&n(t,s,i,e,h,r,this.Uy)&&n(t,s,i,e,h,r,this.Hy)}qy(t,s,i){return!h(t,s,i,this.Uy)}}}{const Zs=self.Ws,Qs=self.xs,Gh=Qs.Ps,Vh=Qs.Es,xh=Qs.Is,ti=xh.create(),si=Gh.C(0,0,0),ii=Gh.C(0,0,0),ei=Gh.C(0,0,0),hi=Gh.C(0,1,0),ri=(Vh.C(0,0,0,0),new Zs.du),ni=new Zs.Rect,oi=new Zs.du(0,0,1,0,1,1,0,1),ai={Xy:1,Yy:1e4},li=xh.C(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Dy.$y=class{constructor(t){t=Object.assign({},ai,t),this.bg=0,this.Mg=0,this.Ky=Zs.Pr(45),this.Zy=Math.tan(this.Ky/2),this.Qy=xh.create(),this.tS=xh.create(),this.sS=!1,this.iS=t.Xy,this.eS=t.Yy,this.hS=[],this.rS=new Map,this.nS=null,this.oS=null,this.aS=null,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.SS=new Map,this.wS=null,this.bS=[],this.MS=new Map,this.vS=0,this.xS=0,this.GS=1,this.TS=[this.GS],this._S=1,this.IS=[this._S],this.CS=.5,this.RS=[this.CS],this.AS=0,this.PS=!0,this.ES=!1}FS(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}DS(){this.vS=0,this.xS=0,this.nS=null,this.oS=null,this.aS=null,this.lS=null,this.uS=null,this.cS=null,this.fS=null,this.dS=null,this.pS=null,this.mS=null,this.gS=null,this.yS=null,this.kS()}OS(){this.DS(),this.wS=null}LS(){for(const t of this.hS)t.Gr();this.DS()}Lm(){return this.bg}qm(){return this.Mg}BS(t){return this.NS()?100:t/(2*this.WS())}jS(t){if(this.NS()){const s=t/(2*this.WS());return s/this.BS(t)}return 1}VS(t){this.iS=t}US(){return this.iS}HS(t){this.eS=t}zS(){return this.eS}JS(t){this.Ky=t,this.Zy=Math.tan(this.Ky/2)}qS(){return this.Ky}WS(){return this.Zy}XS(){this.sS=!1}YS(){this.sS=!0}NS(){return!this.sS}$S(){return this.sS}KS(t,s,i=.5,e=.5){const h=this.US(),r=this.zS(),n=this.qS();if(.5===i&&.5===e)this.ZS()?xh.vt(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.WS()*h,f=c*s;xh.bt(t,o*f,a*f,l*c,u*c,h,r),this.ZS()&&xh.mul(t,li,t)}}QS(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.BS(i)*h*this.WS()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,l=n,u=-o,c=o;this.ZS()?xh.Tt(t,a,l,u,c,this.US(),this.zS()):xh.ortho(t,a,l,u,c,this.US(),this.zS())}iw(t,s,i,e,h,r=1){let n=1;this.NS()&&(n=200*this.WS()/h);const o=ei,a=(Gh.set(o,n,-n,1),si),l=ii;Gh.multiply(a,s,o),Gh.multiply(l,i,o),xh._t(t,a,l,e||hi),o[2]=r,xh.scale(t,t,o)}ew(t,s,i,e,h,r,n,o){return Gh.set(si,t,s,i),Gh.set(ii,e,h,r),this.iw(ti,si,ii,hi,n,o),ti}hw(t){this.hS.push(t),this.rS.set(t.Sf(),t)}rw(t){const s=this.hS.indexOf(t);-1!==s&&this.hS.splice(s,1),this.rS.delete(t.Sf())}kS(){Zs.$n(this.hS),this.rS.clear()}ow(t){return this.rS.get(t)||null}aw(){return this.nS}lw(){this.uw(this.nS)}fw(){return this.oS}pw(){this.uw(this.oS)}mw(){this.uw(this.aS)}gw(){this.uw(this.lS)}yw(){this.uw(this.uS)}Sw(){this.uw(this.cS)}ww(){this.uw(this.fS)}bw(){this.uw(this.dS)}Mw(){this.uw(this.pS)}xw(){this.uw(this.mS)}Gw(){this.uw(this.gS)}Tw(){this.uw(this.yS)}_w(t){this.wS=t}Iw(){return this.wS}Cw(t,s,i,e){let h=Zs.Dy.Aw.Rw(t,s,i,e),r=this.SS.get(h);return r||(r=Zs.vr(Zs.Dy.Aw,this,t,s,i,e),this.SS.set(h,r)),r.Pw(),r}Ew(t){t.Fw(),0===t.Dw()&&(this.wS===t&&(this.wS=null),this.SS.delete(t.kw()),t.Gr())}Ow(t){Zs.$n(this.bS),this.MS.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.bS.push([h,r]),this.MS.set(e,{number:s,Lw:h,Bw:r}),s++}}Nw(t){return this.bS[t]}Ww(t){return this.Nw(t)[0]}jw(t){return this.Nw(t)[1]}Vw(t){const s=this.MS.get(t);if(void 0===s)throw new Error("invalid blend name");return s}Uw(t){const s=this.MS.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}Hw(t){this.vS=t}zw(){return this.vS}Jw(t){this.xS=t,this.wS=null}qw(){return this.xS}Zm(t,s,i,e){const h=Zs.Lr(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.GS,a=r*o,l=n*o,u=this._S;2===u?this.Xw(t,s,0,i,e,0,a,l):1===u?this.Yw(t,s,0,i,e,0,a,l):this.$w(t,s,0,i,e,0,a,l)}Kw(t,s,i,e,h,r){const n=Zs.Lr(t,s,e,h),o=Math.sin(n),a=Math.cos(n),l=.5*this.GS,u=o*l,c=a*l,f=this._S;2===f?this.Xw(t,s,i,e,h,r,u,c):1===f?this.Yw(t,s,i,e,h,r,u,c):this.$w(t,s,i,e,h,r,u,c)}Xw(t,s,i,e,h,r,n,o){const a=this.CS,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=l+n,g=u-o,y=l-n+d,S=u+o+p,w=c+n,b=f-o,M=c-n-d,v=f+o-p;this.Zw(m,g,i,w,b,r,M,v,r,y,S,i,oi)}Yw(t,s,i,e,h,r,n,o){const a=this.CS,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.Zw(d,p,i,y,S,r,w,b,r,m,g,i,oi)}$w(t,s,i,e,h,r,n,o){const a=this.CS,l=t+a,u=s+a,c=e+a,f=h+a,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,S=f-o,w=c-n,b=f+o;this.Zw(d,p,i,y,S,r,w,b,r,m,g,i,oi)}Qw(t,s,i,e,h,r){const n=Zs.Lr(t,s,i,e),o=Math.sin(n),a=Math.cos(n),l=.5*this.GS,u=o*l,c=a*l,f=this._S;2===f?this.tb(t,s,i,e,u,c,h,r):1===f?this.sb(t,s,i,e,u,c,h,r):this.ib(t,s,i,e,u,c,h,r)}tb(t,s,i,e,h,r,n,o){const a=this.CS,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=l+h,g=u-r,y=l-h+d,S=u+r+p,w=c+h,b=f-r,M=c-h-d,v=f+r-p;ri.set(m,g,w,b,M,v,y,S),ni.set(n,0,o,0),this.eb(ri,ni)}sb(t,s,i,e,h,r,n,o){const a=this.CS,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.eb(ri,ni)}ib(t,s,i,e,h,r,n,o){const a=this.CS,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,S=f-r,w=c-h,b=f+r;ri.set(d,p,y,S,w,b,m,g),ni.set(n,0,o,0),this.eb(ri,ni)}hb(t,s,i,e){const h=.5*this.GS,r=this._S;2===r?this.rb(t,s,i,e,h):1===r?this.nb(t,s,i,e,h):this.ob(t,s,i,e,h)}rb(t,s,i,e,h){this.Xw(t,s,0,i,s,0,0,h),this.Xw(i,s,0,i,e,0,h,0),this.Xw(i,e,0,t,e,0,0,-h),this.Xw(t,e,0,t,s,0,-h,0)}nb(t,s,i,e,h){this.Yw(t,s,0,i,s,0,0,h),this.Yw(i,s,0,i,e,0,h,0),this.Yw(i,e,0,t,e,0,0,-h),this.Yw(t,e,0,t,s,0,-h,0)}ob(t,s,i,e,h){this.$w(t,s,0,i,s,0,0,h),this.$w(i,s,0,i,e,0,h,0),this.$w(i,e,0,t,e,0,0,-h),this.$w(t,e,0,t,s,0,-h,0)}ab(t){this.hb(t.Ll(),t.Bl(),t.Nl(),t.Wl())}lb(t){const s=Zs.Lr(t.yn(),t.Sn(),t.wn(),t.bn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.GS,r=i*h,n=e*h,o=this._S;2===o?this.ub(t,r,n):1===o?this.cb(t,r,n):this.fb(t,r,n)}ub(t,s,i){this.Xw(t.yn(),t.Sn(),0,t.wn(),t.bn(),0,s,i),this.Xw(t.wn(),t.bn(),0,t.Mn(),t.vn(),0,i,-s),this.Xw(t.Mn(),t.vn(),0,t.xn(),t.Gn(),0,-s,-i),this.Xw(t.xn(),t.Gn(),0,t.yn(),t.Sn(),0,-i,s)}cb(t,s,i){this.Yw(t.yn(),t.Sn(),0,t.wn(),t.bn(),0,s,i),this.Yw(t.wn(),t.bn(),0,t.Mn(),t.vn(),0,i,-s),this.Yw(t.Mn(),t.vn(),0,t.xn(),t.Gn(),0,-s,-i),this.Yw(t.xn(),t.Gn(),0,t.yn(),t.Sn(),0,-i,s)}fb(t,s,i){this.$w(t.yn(),t.Sn(),0,t.wn(),t.bn(),0,s,i),this.$w(t.wn(),t.bn(),0,t.Mn(),t.vn(),0,i,-s),this.$w(t.Mn(),t.vn(),0,t.xn(),t.Gn(),0,-s,-i),this.$w(t.xn(),t.Gn(),0,t.yn(),t.Sn(),0,-i,s)}pb(t){this.GS=t,this.TS[this.TS.length-1]=t}mb(){return this.GS}gb(t){if(100<=this.TS.length)throw new Error("pushed too many line widths - check push/pop pairs");this.TS.push(t),this.GS=t}yb(){if(this.TS.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.TS.pop(),this.GS=this.TS.at(-1)}Sb(){this._S=0,this.IS[this.IS.length-1]=0}wb(){this._S=1,this.IS[this.IS.length-1]=0}bb(){this._S=2,this.IS[this.IS.length-1]=0}Mb(t){if("butt"===t)this.vb();else if("square"===t)this.xb();else{if("zag"!==t)throw new Error("invalid line cap");this.Gb()}}vb(){if(100<=this.IS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.IS.push(0),this._S=0}xb(){if(100<=this.IS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.IS.push(1),this._S=1}Gb(){if(100<=this.IS.length)throw new Error("pushed too many line caps - check push/pop pairs");this.IS.push(2),this._S=2}Tb(){if(this.IS.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.IS.pop(),this._S=this.IS.at(-1)}_b(t){this.CS=t,this.RS[this.RS.length-1]=t}Ib(){return this.CS}Cb(t){if(100<=this.RS.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.RS.push(t),this.CS=t}Rb(){if(this.RS.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.RS.pop(),this.CS=this.RS.at(-1)}Ab(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],l=s[4+n],u=s[5+n];if(t===e)this.Pb(h,r,o,a,l,u,l,u);else{const c=s[6+n],f=s[7+n];this.Pb(h,r,o,a,l,u,c,f)}}}Eb(){return 3}Fb(){this.Db(!0),this.AS++}kb(){return this.AS}Ob(){this.AS++}Lb(t){this.PS=!!t}Bb(){return this.PS}Nb(t){this.ES=!!t}Wb(){return this.ES}jb(){return!1}ZS(){return!1}Vb(){}Ub(){}Hb(){}zb(){return this.Vb()+this.Ub()+this.Hb()}Jb(){return Zs.vr(Zs.Dy.qb,this)}}}{const ui=self.Ws;ui.Dy.Xb=class{constructor(t,s){this.Ir=s.name,this.Yb=t,this.$b=s.Kb||0,this.Zb=s.Qb||0,this.tM=!!s.sM,this.iM=!!s.eM,this.hM=!!s.rM,this.nM=!!s.oM,this.aM=!!s.lM,this.uM=!!s.cM,this.fM=!!s.dM,this.pM=!1,this.mM=this.tM||this.uM||0!==this.$b||0!==this.Zb}Gr(){this.Yb=null}gM(){return this.Yb}Sf(){return this.Ir}yM(){return 0!==this.$b||0!==this.Zb}SM(){return this.$b}wM(){return this.Zb}bM(){return this.tM}MM(){return this.iM}vM(){return this.hM}xM(){return this.nM}GM(){return this.aM}TM(){return this.uM}_M(){return this.fM}IM(){return this.pM}CM(){return this.mM}RM(){return!1}}}{const ci=self.Ws;ci.Dy.Aw=class{constructor(t,s,i,e,h){this.Yb=t,this.L1=0,this.AM=null,this.PM="",this.EM=i,this.FM=ci.vr(ci.ea),this.FM.set(e),this.DM=h,"string"==typeof s?this.PM=s:(this.AM=s,this.PM=this.AM.Sf())}Gr(){if(0<this.L1)throw new Error("releasing state group still in use");this.Yb=null,this.AM=null,this.PM=""}kM(){const t=this.Yb;t.uw(this.AM),t.OM(this.EM),t.LM(this.FM),t.Jw(this.DM),t._w(this)}kw(){return ci.Dy.Aw.Rw(this.PM,this.EM,this.FM,this.DM)}Pw(){++this.L1}Fw(){--this.L1}Dw(){return this.L1}BM(){this.AM=null}NM(t){if(this.AM=t.ow(this.PM),!this.AM)throw new Error("failed to restore shader program")}static Rw(t,s,i,e){const h="string"==typeof t?t:t.Sf();return h+","+s+","+i.xa()+","+i.Ga()+","+i.Ta()+","+i._a()+","+e}}}{let e=function(t,s,i){const e=i.yn(),h=i.Sn(),r=i.wn()-e,n=i.bn()-h,o=i.xn()-e,a=i.Gn()-h,l=r*t,u=n*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Ws,fi=_.vr(_.du);_.Dy.WM=class{constructor(t,s,i){this.jM=t,this.VM=s,this.UM=i,this.pl=NaN,this.ml=NaN,this.DM=NaN,this.HM=NaN,this.zM=NaN,this.pl=0,this.ml=0,this.DM=0,this.HM=0,this.zM=0}JM(t,s,i,e){this.pl=t,this.ml=s,this.HM=i,this.zM=e}qM(){return this.pl}XM(t){this.pl!==t&&(this.pl=t,this.jM.YM())}$M(){return this.ml}KM(t){this.ml!==t&&(this.ml=t,this.jM.YM())}ZM(){return this.DM}QM(t){this.DM!==t&&(this.DM=Math.max(t,0),this.jM.YM())}tv(){return this.HM}sv(t){this.HM=t}hv(){return this.zM}rv(t){this.zM=t}nv(t,s,i){[this.pl,this.ml]=e(t.pl,t.ml,s),this.DM=t.DM,this.HM=_.Ot(i.Ll(),i.Nl(),t.HM),this.zM=_.Ot(i.Bl(),i.Wl(),t.zM)}ov(t,s,i){[this.pl,this.ml]=e(t.pl,t.ml,s),this.DM=t.DM,[this.HM,this.zM]=e(t.HM,t.zM,i)}av(){return{x:this.qM(),y:this.$M(),z:this.ZM(),u:this.tv(),v:this.hv()}}lv(t){this.XM(t.x),this.KM(t.y),t.hasOwnProperty("z")&&this.QM(t.z),this.sv(t.u),this.rv(t.v)}uv(){return this.jM}cv(){return this.VM}dv(){return this.UM}},_.Dy.pv=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.gv=i,this.yv=t,this.Sv=s||null,this.wv=[],this.bv=0,this.Mv=0,this.vv=1,this.xv=1,this.Gv=0,this.Tv=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.vr(_.Dy.WM,this,t,s),o=t/e,a=s/h;n.JM(o,a,o,a),r.push(n)}this.wv.push(r)}}Gr(){_.$n(this.wv)}_v(){return this.gv}Iv(){return this.yv}Cv(){return this.Sv}Rv(){return this.wv}YM(){this.Tv=!0}Av(){if(this.Tv){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.wv)for(const n of r){const o=n.qM(),a=n.$M();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.ZM())}this.bv=t,this.Mv=s,this.vv=i,this.xv=e,this.Gv=h,this.Tv=!1}}Pv(){return this.Av(),this.bv}Ev(){return this.Av(),this.Mv}Fv(){return this.Av(),this.vv}Dv(){return this.Av(),this.xv}kv(){return this.Av(),this.Gv}Ov(){return 0<this.kv()}Lv(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.gv||s<0||s>=this.yv?null:this.wv[s][t]}Bv(t,i,e){const h=e instanceof _.Rect;if(t._v()!==this._v()||t.Iv()!==this.Iv())throw new Error("source mesh wrong size");const r=t.wv,n=this.wv;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.nv(l,i,e):u.ov(l,i,e)}}}Nv(r){let n=this.wv,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.tv(),e.hv(),a.tv(),a.hv(),l.tv(),l.hv(),h.tv(),h.hv()),r.Zw(e.qM(),e.$M(),e.ZM(),a.qM(),a.$M(),a.ZM(),l.qM(),l.$M(),l.ZM(),h.qM(),h.$M(),h.ZM(),fi),e=a,h=l}o=i}}Wv(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.wv,l=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.qM(),e.$M(),e.ZM()),[m,g,y]=a(u.qM(),u.$M(),u.ZM()),[S,w,b]=a(c.qM(),c.$M(),c.ZM()),[M,v,x]=a(h.qM(),h.$M(),h.ZM());o.Kw(f,d,p,m,g,y),o.Kw(f,d,p,S,w,b),o.Kw(f,d,p,M,v,x),t===s-1&&o.Kw(m,g,y,S,w,b),r===n-1&&o.Kw(M,v,x,S,w,b),e=u,h=c}l=i}}jv(t){let i=.99999999,e=t.Zu(),h=[],r=this._v()-1,n=this.Iv()-1,o=1/r,a=1/n,l=r-1,u=n-1,c=e[0],f=e[1],d=_.Rr(Math.floor(c*r),0,l),p=_.Rr(Math.floor(f*n),0,u),m=!0,g=0,y=0,S=0,w=-1,b=()=>{c=_.Rr(_.Ot(c,g,S),0,1),f=_.Rr(_.Ot(f,y,S),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.Rr(Math.floor(c*r),0,l),p=_.Rr(Math.floor(f*n),0,u);const M=(t+2)%s;for(g=e[M],y=e[1+M],w=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const v=d*o,x=p*a,G=(d+1)*o,T=(p+1)*a;if(m=_.Cn(c,f,v,x,G,x,G,T),0!==w&&0<=(S=_.In(c,f,g,y,v,x,G,T,-.001))&&S<=i)b(),m=!m,w=0;else if(0<p&&2!==w&&0<=(S=_.In(c,f,g,y,v,x,G,x,.001))&&S<=i)b(),p--,m=!1,w=4;else if(d<l&&3!==w&&0<=(S=_.In(c,f,g,y,G,x,G,T,.001))&&S<=i)b(),d++,m=!1,w=1;else if(0<d&&1!==w&&0<=(S=_.In(c,f,g,y,v,x,v,T,.001))&&S<=i)b(),d--,m=!0,w=3;else{if(!(p<u&&4!==w&&0<=(S=_.In(c,f,g,y,v,T,G,T,.001))&&S<=i))break;b(),p++,m=!0,w=2}}}return _.vr(_.qu,h)}Vv(t,s){const i=this.Uv(t);this.Hv(i),s.tc(i)}Uv(t){const i=[],e=t.Zu();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.zv(h,r);i.push(n,o)}return i}zv(t,s){const i=this._v()-1,e=this.Iv()-1,h=1/i,r=1/e,n=_.Rr(Math.floor(t*i),0,i-1),o=_.Rr(Math.floor(s*e),0,e-1),a=n*h,l=o*r,u=(n+1)*h,c=(o+1)*r,f=this.Lv(n,o),d=this.Lv(n+1,o+1),p=_.Cn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+r,y=this.Lv(n+(p?1:0),o+(p?0:1)),[S,w,b]=_.Rn(t,s,a,l,m,g,u,c);return _.An(S,w,b,f.qM(),f.$M(),f.ZM(),y.qM(),y.$M(),y.ZM(),d.qM(),d.$M(),d.ZM())}Hv(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=l,r=u,n=c,o=f}6<=e.length&&e.length<i.length&&_.eo(i,e)}av(){return{cols:this._v(),rows:this.Iv(),points:this.wv.map(t=>t.map(t=>t.av()))}}lv(t){const i=this._v(),e=this.Iv();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.Lv(t,s);n.lv(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{Jv:i,qv:e,format:h,type:r}};d;const di=self.Ws,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),Si={Xv:"clamp-to-edge",Yv:"clamp-to-edge",$v:"trilinear",Kv:0,Zv:"rgba8",Qv:!0,t2:"default",premultiplyAlpha:!0,s2:!1,width:-1,height:-1},wi={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Dy.i2=class{constructor(t){this.Yb=t,this.e2=null,this.bg=0,this.Mg=0,this.h2=!0,this.n2="clamp-to-edge",this.o2="clamp-to-edge",this.a2="trilinear",this.l2=0,this.u2="rgba8",this.c2=!1,this.f2="default",this.L1=0}d2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},Si,t),this.e2)throw new Error("already created texture");if(this.n2=t.Xv,this.o2=t.Yv,this.a2=t.$v,this.l2=t.Kv,this.u2=t.Zv,this.c2=!!t.Qv&&this.Yb.Bb(),this.f2=t.t2,!yi.has(this.n2)||!yi.has(this.o2))throw new Error("invalid wrap mode");if(!mi.has(this.a2))throw new Error("invalid sampling");if(!pi.has(this.u2))throw new Error("invalid pixel format");if(!gi.has(this.f2))throw new Error("invalid mipmap quality");if(this.h2=!0,s instanceof ArrayBuffer||null===s||t.s2){if(this.bg=t.width,this.Mg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.bg*this.Mg*4)throw new Error("ArrayBuffer wrong size")}else this.bg=s.width,this.Mg=s.height;if(this.bg<=0||this.Mg<=0)throw new Error("invalid texture data size");if(t.s2){const o=di.Uo(this.bg,this.Mg),a=o.getContext("2d");a.drawImage(s,0,0,this.bg,this.Mg),s=o}const i=di.$r(this.bg)&&di.$r(this.Mg),e=this.Yb.m2();if(this.bg>e||this.Mg>e)throw new Error("texture data exceeds maximum texture size");const h=this.Yb.g2(),r=this.Yb.S2(),n=(this.e2=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.e2),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.u2,h));if(this.Yb.w2()||i||!this.b2())if(2<=r){let t;t=this.c2?Math.floor(Math.log2(Math.max(this.bg,this.Mg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.Jv,this.bg,this.Mg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.bg,this.Mg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.qv,this.bg,this.Mg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.qv,this.bg,this.Mg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.qv,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.bg,this.Mg):s)instanceof ImageData){const c=di.Uo(this.bg,this.Mg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.Uo(di.Kr(this.bg),di.Kr(this.Mg)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.a2,u.drawImage(s,0,0,this.bg,this.Mg,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,n.qv,n.format,n.type,l)}null!==s&&this.M2(h),h.bindTexture(h.TEXTURE_2D,null),this.Yb.v2(),this.L1=1,bi.add(this)}G2(t,s,i){if(i=Object.assign({},Si,i),this.e2)throw new Error("already created texture");if(this.n2=i.Xv,this.o2=i.Yv,this.a2=i.$v,this.u2=i.Zv,this.c2=!!i.Qv&&this.Yb.Bb(),this.f2=i.t2,!yi.has(this.n2)||!yi.has(this.o2))throw new Error("invalid wrap mode");if(!mi.has(this.a2))throw new Error("invalid sampling");if(!pi.has(this.u2))throw new Error("invalid pixel format");if(!gi.has(this.f2))throw new Error("invalid mipmap quality");this.h2=!1,this.bg=Math.floor(t),this.Mg=Math.floor(s);const e=di.$r(this.bg)&&di.$r(this.Mg),h=this.Yb.m2();if(this.bg<=0||this.Mg<=0)throw new Error("invalid texture size");if(this.bg>h||this.Mg>h)throw new Error("texture exceeds maximum texture size");if(!this.Yb.w2()&&this.b2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Yb.g2(),n=this.Yb.S2(),o=(this.e2=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.e2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.u2,r)),a=2<=n?o.Jv:o.qv;r.texImage2D(r.TEXTURE_2D,0,a,this.bg,this.Mg,0,o.format,o.type,null),this.M2(r),r.bindTexture(r.TEXTURE_2D,null),this.Yb.v2(),this.L1=1,bi.add(this)}T2(t){if("default"===this.f2)return this.h2?t.NICEST:t.FASTEST;if("low"===this.f2)return t.FASTEST;if("high"===this.f2)return t.NICEST;throw new Error("invalid mipmap quality")}b2(){return"clamp-to-edge"!==this.n2||"clamp-to-edge"!==this.o2}_2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}M2(t){const s=di.$r(this.bg)&&di.$r(this.Mg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this._2(t,this.n2)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this._2(t,this.o2)),"nearest"===this.a2)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.c2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Yb.w2())&&this.c2){t.hint(t.GENERATE_MIPMAP_HINT,this.T2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.a2&&!this.Yb.Wb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.c2=!1;const i=this.Yb.I2();i&&0<this.l2&&"nearest"!==this.a2&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.l2,this.Yb.C2()))}R2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.e2||this.L1<=0)throw new Error("texture not created");if(this.h2)throw new Error("cannot update static texture");s=Object.assign({},wi,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.Yb.S2(),r=this.Yb.g2(),n=(r.bindTexture(r.TEXTURE_2D,this.e2),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.u2,r)),o=2<=h?n.Jv:n.qv;try{if(this.bg===i&&this.Mg===e){const a=di.$r(this.bg)&&di.$r(this.Mg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.Yb.w2())&&this.c2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.T2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.bg=i,this.Mg=e;const l=di.$r(this.bg)&&di.$r(this.Mg);if(!this.Yb.w2()&&this.b2()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(l||this.Yb.w2())&&this.c2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.T2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Yb.v2()}A2(){if(0<this.L1)throw new Error("texture still has references");if(!this.e2)throw new Error("already deleted texture");bi.delete(this);const t=this.Yb.g2();t.deleteTexture(this.e2),this.e2=null}P2(){return!!this.e2}E2(){return this.e2}gM(){return this.Yb}F2(){this.L1++}D2(){if(this.L1<=0)throw new Error("no more references");this.L1--}O2(){return this.L1}Lm(){return this.bg}qm(){return this.Mg}L2(){return this.h2}B2(){let t=this.bg*this.Mg;switch(this.u2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.c2&&(t+=Math.floor(t/3)),t}static BM(){bi.clear()}static N2(){return bi.values()}}}{const Mi=self.Ws,vi=self.xs,Gh=vi.Ps,xh=vi.Is,xi=new Set(["nearest","bilinear","trilinear"]),Gi={$v:"trilinear",alpha:!0,depth:!1,W2:!0,j2:!0,V2:0},Ti=new Set;Mi.Dy.U2=class{constructor(t){this.Yb=t,this.H2=null,this.z2=null,this.e2=null,this.J2=null,this.bg=0,this.Mg=0,this.q2=!0,this.a2="trilinear",this.X2=!0,this.Y2=!1,this.K2=!0,this.Z2=0,this.Q2=xh.create(),this.tx=0,this.ix=0,this.hx=0}nx(t,s,i){i=Object.assign({},Gi,i);const e=this.Yb.S2();if(this.e2||this.J2)throw new Error("already created render target");if(this.a2=i.$v,this.X2=!!i.alpha,this.Y2=!!i.depth,this.K2=!!i.W2,this.q2=!!i.j2,this.Z2=i.V2,!xi.has(this.a2))throw new Error("invalid sampling");if(0<this.Z2&&(e<2||this.K2))throw new Error("invalid use of multisampling");if(e<2&&(this.K2=!0),this.bg=t,this.Mg=s,this.bg<=0||this.Mg<=0)throw new Error("invalid render target size");this.ox();const h=this.Yb.g2();if(this.H2=h.createFramebuffer(),this.Y2&&(this.z2=h.createFramebuffer()),this.K2){this.e2=this.Yb.lx(this.bg,this.Mg,{$v:this.a2,Zv:this.X2?"rgba8":"rgb8",Qv:!1});const n=this.e2.E2();h.bindFramebuffer(h.FRAMEBUFFER,this.H2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.Y2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.z2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.J2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.J2);const o=this.X2?h.RGBA8:h.RGB8;if(0<this.Z2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.Z2>l&&(this.Z2=l)}else this.Z2=0}0===this.Z2?h.renderbufferStorage(h.RENDERBUFFER,o,this.bg,this.Mg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.Z2,o,this.bg,this.Mg),h.bindFramebuffer(h.FRAMEBUFFER,this.H2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.J2),this.Y2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.z2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.J2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.Yb.ux();this.Y2&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.H2),this.Yb.mx()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Ti.add(this)}gx(t,s){if(this.bg!==t||this.Mg!==s){this.bg=t,this.Mg=s,this.ox();const i=this.Yb.g2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.H2),this.e2?this.e2.R2(new ImageData(this.bg,this.Mg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.J2),i.renderbufferStorage(i.RENDERBUFFER,this.X2?i.RGBA8:i.RGB8,this.bg,this.Mg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Yb.ux());this.Y2&&e&&(this.Yb.mx()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}A2(){if(!this.e2&&!this.J2)throw new Error("already deleted render target");Ti.delete(this);const t=this.Yb.g2(),s=(this.e2?(t.bindFramebuffer(t.FRAMEBUFFER,this.H2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.Y2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.z2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Yb.yx(this.e2),this.e2=null):this.J2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.H2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.Y2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.z2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.J2),this.J2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Yb.S2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.H2),this.Y2&&t.deleteFramebuffer(this.z2),this.Yb.Sx());s.wx=null,this.H2=s.bx=null}ox(){this.Yb.KS(this.Q2,this.bg/this.Mg),this.tx=this.Yb.qS(),this.ix=this.Yb.US(),this.hx=this.Yb.zS()}Mx(){return this.H2}xx(){return this.z2}gM(){return this.Yb}Gx(){return this.e2}Tx(){return this.Yb.qS()===this.tx&&this.Yb.US()===this.ix&&this.Yb.zS()===this.hx||this.ox(),this.Q2}_x(){return"nearest"!==this.a2}Ix(){return this.X2}Cx(){return this.K2}Rx(){return this.Y2}Lm(){return this.bg}qm(){return this.Mg}Ax(){return this.q2}Px(){return this.Z2}Ex(){const t={$v:this.a2,alpha:this.X2,W2:this.K2};return this.q2||(t.width=this.bg,t.height=this.Mg),t}Fx(t){return"nearest"!==(t=Object.assign({},Gi,t)).$v===this._x()&&!!t.alpha===this.Ix()&&!!t.depth===this.Rx()&&!(2<=this.Yb.S2()&&!!t.W2!==this.Cx())&&("number"==typeof t.width||"number"==typeof t.height?!this.Ax()&&this.Lm()===Math.floor(t.width)&&this.qm()===Math.floor(t.height):this.Ax())}Dx(){return this.e2?this.e2.E2():null}B2(){return this.e2?this.e2.B2():this.bg*this.Mg*(this.X2?4:3)}static async kx(t,s){const i=await t.Ox(s,!0);return Mi.Jo(i)}static BM(){Ti.clear()}static Lx(){return Ti.values()}static Bx(t,s){for(const i of Ti)i.Ax()&&i.gx(t,s)}}}{const m=self.Ws,_i=self.xs,Gh=_i.Ps,xh=_i.Is,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Dy.Nx=class extends m.Dy.Xb{static async Wx(t,s){const i=t.g2(),e=s.src,h=s.jx,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Vx());if(l?await t.Ux(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Hn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.gp(i.getProgramInfoLog(a)||"").trim();return u&&!m.fp(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(n),i.deleteShader(o),a}static async Hx(t,s){const i=await m.Dy.Nx.Wx(t,s);return new m.Dy.Nx(t,i,s)}constructor(t,s,i){super(t,i);const e=t.g2(),h=t.Sx(),r=(t.Db(),e.useProgram(s),this.zx=e,this.AM=s,this.Jx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.qx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Xx),e.vertexAttribPointer(r,t.Eb(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Yx),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.qx&&(e.bindBuffer(e.ARRAY_BUFFER,t.$x),e.vertexAttribPointer(this.qx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.qx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Kx=new m.Dy.Zx(this,"matP","mat4"),this.Qx=new m.Dy.Zx(this,"matMV","mat4"),this.tG=new m.Dy.Zx(this,"color","vec4"),this.sG=new m.Dy.Zx(this,"samplerFront","sampler"),this.iG=new m.Dy.Zx(this,"pointTexStart","vec2"),this.eG=new m.Dy.Zx(this,"pointTexEnd","vec2"),this.hG=new m.Dy.Zx(this,"zElevation","float"),this.rG=new m.Dy.Zx(this,"tileSize","vec2"),this.nG=new m.Dy.Zx(this,"tileSpacing","vec2"),this.oG=new m.Dy.Zx(this,"color2_","vec4"),this.aG=new m.Dy.Zx(this,"outlineThickness","float"),this.lG=new m.Dy.Zx(this,"samplerBack","sampler"),this.uG=new m.Dy.Zx(this,"samplerDepth","sampler"),this.cG=new m.Dy.Zx(this,"destStart","vec2"),this.fG=new m.Dy.Zx(this,"destEnd","vec2"),this.dG=new m.Dy.Zx(this,"srcStart","vec2"),this.pG=new m.Dy.Zx(this,"srcEnd","vec2"),this.mG=new m.Dy.Zx(this,"srcOriginStart","vec2"),this.gG=new m.Dy.Zx(this,"srcOriginEnd","vec2"),this.yG=new m.Dy.Zx(this,"pixelSize","vec2"),this.SG=new m.Dy.Zx(this,"seconds","float"),this.wG=new m.Dy.Zx(this,"devicePixelRatio","float"),this.bG=new m.Dy.Zx(this,"layerScale","float"),this.MG=new m.Dy.Zx(this,"layerAngle","float"),this.vG=new m.Dy.Zx(this,"layoutStart","vec2"),this.xG=new m.Dy.Zx(this,"layoutEnd","vec2"),this.GG=new m.Dy.Zx(this,"zNear","float"),this.TG=new m.Dy.Zx(this,"zFar","float"),this._G=!!(this.yG.IG()||this.SG.IG()||this.lG.IG()||this.cG.IG()||this.fG.IG()||this.dG.IG()||this.pG.IG()||this.mG.IG()||this.gG.IG()||this.wG.IG()||this.bG.IG()||this.MG.IG()||this.vG.IG()||this.xG.IG()),i.parameters||[]);this.CG=[],this.pM=this.yG.IG()||this.dG.IG()||this.pG.IG()||this.mG.IG()||this.gG.IG(),this.AG=!1,this.PG=!1,this.tG.EG(1,1,1,1),this.oG.EG(1,1,1,1),this.sG.FG(0),this.lG.FG(1),this.uG.FG(2),this.iG.DG(0,0),this.eG.DG(1,1),this.hG.kG(0),this.rG.DG(0,0),this.nG.DG(0,0),this.cG.DG(0,0),this.fG.DG(1,1),this.dG.DG(0,0),this.pG.DG(0,0),this.mG.DG(0,0),this.gG.DG(0,0),this.yG.DG(0,0),this.wG.kG(1),this.GG.kG(t.US()),this.TG.kG(t.zS()),this.bG.kG(1),this.MG.kG(0),this.SG.kG(0),this.vG.DG(0,0),this.xG.DG(0,0),this.aG.kG(1);for(const l of o){const u=l[0],c=l[2],f=new m.Dy.Zx(this,u,c);"color"===c?f.OG(0,0,0):f.kG(0),this.CG.push(f)}this.Jx?this.LG(h.BG):(this.NG(h.BG,!0),this.WG(h.jG,!0));const a=h.VG;e.useProgram(a?a.AM:null)}Gr(){this.zx.deleteProgram(this.AM),this.AM=null,this.Yb.rw(this),this.zx=null,super.Gr()}UG(){return this.zx}HG(){return this.AM}zG(){return this.CG.length}JG(t){return t<0||t>=this.CG.length?null:this.CG[t].qG()}XG(i){for(let t=0,s=i.length;t<s;++t)if(!this.CG[t].YG(i[t]))return!1;return!0}$G(i){for(let t=0,s=i.length;t<s;++t)this.CG[t].KG(i[t])}ZG(t,s,i,e,h,r,n,o,a,l){return!this.lG.IG()&&!(this.yG.IG()&&!this.yG.QG(h,r)||this.cG.IG()&&!this.cG.QG(t.Ll(),t.Bl())||this.fG.IG()&&!this.fG.QG(t.Nl(),t.Wl())||this.wG.IG()&&!this.wG.tT(n)||this.bG.IG()&&!this.bG.tT(o)||this.MG.IG()&&!this.MG.tT(a)||this.dG.IG()&&!this.dG.QG(s.Ll(),s.Bl())||this.pG.IG()&&!this.pG.QG(s.Nl(),s.Wl())||this.mG.IG()&&!this.mG.QG(i.Ll(),i.Bl())||this.gG.IG()&&!this.gG.QG(i.Nl(),i.Wl())||this.vG.IG()&&!this.vG.QG(e.Ll(),e.Bl())||this.xG.IG()&&!this.xG.QG(e.Bl(),e.Wl())||this.SG.IG()&&!this.SG.tT(l))}sT(t,s,i,e,h,r,n,o,a,l){this.lG.IG()||(this.yG.IG()&&this.yG.iT(h,r),this.cG.IG()&&this.cG.iT(t.Ll(),t.Bl()),this.fG.IG()&&this.fG.iT(t.Nl(),t.Wl()),this.wG.IG()&&this.wG.eT(n),this.bG.IG()&&this.bG.eT(o),this.MG.IG()&&this.MG.eT(a),this.dG.IG()&&this.dG.iT(s.Ll(),s.Bl()),this.pG.IG()&&this.pG.iT(s.Nl(),s.Wl()),this.mG.IG()&&this.mG.iT(i.Ll(),i.Bl()),this.gG.IG()&&this.gG.iT(i.Nl(),i.Wl()),this.vG.IG()&&this.vG.iT(e.Ll(),e.Bl()),this.xG.IG()&&this.xG.iT(e.Bl(),e.Wl()),this.SG.IG()&&this.SG.eT(l))}NG(t,s){this.AG&&!s||this.Jx||(this.Kx.IG()&&this.Kx.hT(t),this.AG=!0)}rT(){this.AG=!1}WG(t,s){this.PG&&!s||this.Jx||(this.Qx.IG()&&this.Qx.hT(t),this.PG=!0)}nT(){this.PG=!1}LG(t){if(!this.Jx)throw new Error("not device transform shader");this.Kx.hT(t);const s=this.Yb,i=s.Lm()/2,e=s.qm()/2,h=s.ew(i,e,s.BS(s.qm()),i,e,0,s.qm());this.Qx.hT(h)}oT(t){this.tG.IG()&&this.tG.aT(t[0],t[1],t[2],t[3])}static lT(){return Ii}static uT(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static cT(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static fT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static dT(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static pT(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static mT(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static gT(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static yT(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static ST(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static wT(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static bT(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static MT(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static vT(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static xT(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static GT(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static TT(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static _T(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static IT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static CT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static RT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static AT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static PT(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Ws,Ri=self.xs,xh=Ri.Is,Ai=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Dy.Zx=class{constructor(t,s,i){if(!Ai.has(i))throw new Error("invalid uniform type");this.Sv=t,this.zx=this.Sv.UG(),this.Ir=s,this.Df=i,this.ET="color"===this.Df,this.FT=this.zx.getUniformLocation(this.Sv.HG(),s),this.DT=!!this.FT;const e=Ai.get(i);this.kT=new Float32Array(e),this.OT=new Float32Array(e)}Gr(){this.Sv=null,this.zx=null,this.FT=null}IG(){return this.DT}qG(){return this.Df}LT(){return this.ET}kG(t){this.IG()&&(this.kT[0]=t,this.OT.set(this.kT),this.zx.uniform1f(this.FT,t))}FG(t){this.IG()&&(this.kT[0]=t,this.OT.set(this.kT),this.zx.uniform1i(this.FT,t))}DG(t,s){this.IG()&&(this.kT[0]=t,this.kT[1]=s,this.OT.set(this.kT),this.zx.uniform2f(this.FT,t,s))}OG(t,s,i){this.IG()&&(this.kT[0]=t,this.kT[1]=s,this.kT[2]=i,this.OT.set(this.kT),this.zx.uniform3f(this.FT,t,s,i))}EG(t,s,i,e){this.IG()&&(this.kT[0]=t,this.kT[1]=s,this.kT[2]=i,this.kT[3]=e,this.OT.set(this.kT),this.zx.uniform4f(this.FT,t,s,i,e))}BT(t){t=Math.fround(t);const s=this.kT;s[0]!==t&&(s[0]=t,this.zx.uniform1f(this.FT,t))}NT(t){const s=this.kT;s[0]!==t&&this.zx.uniform1i(this.FT,s[0]=t)}WT(t,s){t=Math.fround(t),s=Math.fround(s);const i=this.kT;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.zx.uniform2f(this.FT,t,s))}jT(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this.kT;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.zx.uniform3f(this.FT,t,s,i))}aT(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this.kT;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.zx.uniform4f(this.FT,t,s,i,e))}hT(t){const s=this.kT;xh.j(s,t)||(Ci.Xn(s,t,0),this.zx.uniformMatrix4fv(this.FT,!1,t))}YG(t){const s=this.OT;return this.LT()?s[0]===Math.fround(t.xa())&&s[1]===Math.fround(t.Ga())&&s[2]===Math.fround(t.Ta()):s[0]===Math.fround(t)}KG(t){const s=this.OT;this.LT()?(s[0]=t.xa(),s[1]=t.Ga(),s[2]=t.Ta()):s[0]=t}tT(t){return this.OT[0]===Math.fround(t)}QG(t,s){const i=this.OT;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}eT(t){this.OT[0]=t}iT(t,s){const i=this.OT;i[0]=t,i[1]=s}}}{const Pi=self.Ws,Ei=self.xs,Vh=Ei.Es,xh=Ei.Is;Pi.Dy.VT=class{constructor(t){this.renderer=t,this.jG=xh.create(),this.BG=xh.create(),this.wx=null,this.bx=null,this.UT=!1,this.HT=Vh.C(1,1,1,1),this.VG=null,this.zT=new Pi.Rect,this.clearColor=Pi.vr(Pi.ea,0,0,0,0)}},Pi.Dy.JT=class{constructor(t){const s=new ArrayBuffer(96);this.Df=0,this.qT=t,this.zx=t.renderer.g2(),this.XT=0,this.YT=0,this.$T=null,this.KT=new Float32Array(s,0,16),this.ZT=new Float32Array(s,64,4),this.QT=new Float32Array(s,80,4),this.t_=[]}s_(t,s){this.Df=1,this.XT=t,this.YT=s}i_(){const t=this.zx;t.drawElements(t.TRIANGLES,this.YT,t.UNSIGNED_SHORT,this.XT)}e_(t){this.Df=2,this.$T=t}h_(){const t=this.zx,s=this.$T;t.bindTexture(t.TEXTURE_2D,s?s.E2():null)}r_(t){this.Df=3,t.Ca(this.ZT,0)}n_(){const t=this.ZT,s=this.qT;Vh.I(s.HT,t),s.VG.oT(t)}o_(t){this.Df=21,t.Ca(this.ZT,0)}a_(){const t=this.ZT,s=this.qT.VG;s.oG.IG()&&s.oG.aT(t[0],t[1],t[2],t[3])}l_(t,s){this.Df=4,this.XT=t,this.YT=s}u_(){this.zx.blendFunc(this.XT,this.YT)}c_(t,s,i,e){this.Df=5;const h=this.ZT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}f_(){const t=this.ZT;this.zx.viewport(t[0],t[1],t[2],t[3])}d_(t){this.Df=6,xh.I(this.KT,t)}p_(){const t=this.qT,i=t.renderer.hS,e=t.VG,h=this.KT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.NG(h,!0):r.rT()}xh.I(t.BG,h)}m_(t){this.Df=7,xh.I(this.KT,t)}g_(){const t=this.qT,i=t.renderer.hS,e=t.VG,h=this.KT;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.WG(h,!0):r.nT()}xh.I(t.jG,h)}y_(t){this.Df=8,this.$T=t}S_(){const t=this.zx,s=this.$T,i=this.qT;s?(i.wx=s.Mx(),i.bx=s.xx(),i.UT&&i.bx?t.bindFramebuffer(t.FRAMEBUFFER,i.bx):t.bindFramebuffer(t.FRAMEBUFFER,i.wx)):(i.wx=null,i.bx=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}w_(t){this.Df=9,t.Ca(this.KT,0)}b_(t,s,i,e){this.Df=9;const h=this.KT;h[0]=t,h[1]=s,h[2]=i,h[3]=e}M_(){const t=this.zx,s=this.KT,i=this.qT,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.Ea(h,r,n,o)||(t.clearColor(h,r,n,o),e.la(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}v_(t){this.Df=15,t.Ca(this.KT,0)}x_(){const t=this.KT;this.qT.zT.set(t[0],t[1],t[2],t[3])}G_(t,s){this.Df=10,this.XT=t,this.YT=1,this.KT[0]=s}T_(){const t=this.zx,s=this.qT,i=s.renderer,e=i.oS,h=(t.useProgram(e.AM),e.NG(s.BG,!1),e.WG(s.jG,!1),s.zT),r=(e.iG.IG()&&e.iG.WT(h.Ll(),h.Bl()),e.eG.IG()&&e.eG.WT(h.Nl(),h.Wl()),this.KT[0]);if(e.hG.IG()&&e.hG.BT(r),e.tG.IG()){const n=s.HT;e.tG.aT(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.XT/4,this.YT),t.useProgram(s.VG.AM)}__(t){this.Df=11,this.$T=t}I_(){const t=this.zx,s=this.qT,i=this.$T;if(s.VG=i,t.useProgram(i.AM),i.NG(s.BG,!1),i.WG(s.jG,!1),i.tG.IG()){const e=s.HT;i.tG.aT(e[0],e[1],e[2],e[3])}}C_(){this.Df=12}R_(){const t=this.qT.VG,s=this.zx,i=this.KT,e=this.ZT,h=this.QT;if(t.lG.IG()){const r=this.qT.renderer,n=this.$T;r.A_!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.E2():null),r.A_=n,s.activeTexture(s.TEXTURE0))}t.yG.IG()&&t.yG.WT(i[0],i[1]),t.cG.IG()&&t.cG.WT(i[2],i[3]),t.fG.IG()&&t.fG.WT(i[4],i[5]),t.wG.IG()&&t.wG.BT(this.YT),t.bG.IG()&&t.bG.BT(i[6]),t.MG.IG()&&t.MG.BT(i[7]),t.dG.IG()&&t.dG.WT(i[12],i[13]),t.pG.IG()&&t.pG.WT(i[14],i[15]),t.mG.IG()&&t.mG.WT(h[0],h[1]),t.gG.IG()&&t.gG.WT(h[2],h[3]),t.vG.IG()&&t.vG.WT(e[0],e[1]),t.xG.IG()&&t.xG.WT(e[2],e[3]),t.SG.IG()&&t.SG.BT(this.XT)}P_(){this.Df=13}E_(){const t=this.qT.VG,i=t.CG,e=this.t_;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.LT()?h.jT(r.xa(),r.Ga(),r.Ta()):h.BT(r)}}F_(t){this.Df=14,this.$T=t}D_(){const t=this.zx,s=this.$T,i=this.qT.wx;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}k_(t,s,i){this.Df=17;const e=this.KT,h=this.qT.renderer,r=(e[0]=t.Lm(),e[1]=t.qm(),e[2]=(s||h).Lm(),e[3]=(s||h).qm(),e[4]=t._x()?1:0,e[5]="stretch"===i,this.t_);Pi.$n(r),r.push(t.Mx()),r.push(s?s.Mx():null)}O_(){const t=this.KT,s=this.t_,i=this.zx,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}L_(t){this.Df=18,this.$T=t}B_(){this.$T.N_(),this.$T=null}W_(t){this.Df=19,this.$T=t}j_(){this.$T.V_(),this.$T=null}U_(t,s,i){this.Df=20;const e=this.KT;e[0]=t,e[1]=s,e[2]=i}H_(){const t=this.qT.VG,s=this.KT;t.yG.IG()&&t.yG.WT(s[0],s[1]),t.aG.IG()&&t.aG.BT(s[2])}z_(t,s,i,e,h,r,n){this.Df=16;const o=this.KT;t.Ca(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}J_(){const t=this.qT.VG,s=this.KT;t.dG.IG()&&t.dG.WT(s[0],s[1]),t.yG.IG()&&t.yG.WT(s[4],s[5]),t.rG.IG()&&t.rG.WT(s[6],s[7]),t.nG.IG()&&t.nG.WT(s[8],s[9])}q_(t,s,i,e,h,r,n){this.Df=29;const o=this.KT;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}X_(){const t=this.qT.VG,s=this.KT;t.yG.IG()&&t.yG.WT(s[0],s[1]),t.rG.IG()&&t.rG.WT(s[2],s[3]),t.aG.IG()&&t.aG.BT(s[4]),t.nG.IG()&&t.nG.WT(s[5],s[6])}Y_(t){this.Df=22,this.XT=t?1:0}K_(){const t=this.zx,s=0!==this.XT;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}Z_(t){this.Df=23,this.XT=t?1:0}Q_(){const t=this.zx;0===this.XT?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}tI(t){this.Df=24,this.XT=t?1:0}sI(){const t=this.zx,s=this.qT,i=s.renderer,e=0!==this.XT;s.UT=e,t.activeTexture(t.TEXTURE2),e?(s.bx&&t.bindFramebuffer(t.FRAMEBUFFER,s.bx),t.bindTexture(t.TEXTURE_2D,i.ux())):(t.bindTexture(t.TEXTURE_2D,null),s.bx&&t.bindFramebuffer(t.FRAMEBUFFER,s.wx)),t.activeTexture(t.TEXTURE0)}iI(){this.Df=25}eI(){const t=this.zx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}hI(){this.Df=26}rI(){const t=this.zx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}nI(){this.Df=27}oI(){const t=this.zx;t.disable(t.STENCIL_TEST)}aI(t,s,i,e,h){this.Df=28,this.XT=t?1:0;const r=this.KT;r[0]=s,r[1]=i,r[2]=e,r[3]=h}lI(){const t=this.zx,s=this.KT;1===this.XT?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}uI(){switch(this.Df){case 1:return void this.i_();case 2:return void this.h_();case 3:return void this.n_();case 4:return void this.u_();case 5:return void this.f_();case 6:return void this.p_();case 7:return void this.g_();case 8:return void this.S_();case 9:return void this.M_();case 10:return void this.T_();case 11:return void this.I_();case 12:return void this.R_();case 13:return void this.E_();case 14:return void this.D_();case 15:return void this.x_();case 16:return void this.J_();case 17:return void this.O_();case 18:return void this.B_();case 19:return void this.j_();case 20:return void this.H_();case 21:return void this.a_();case 22:return void this.K_();case 23:return void this.Q_();case 24:return void this.sI();case 25:return void this.eI();case 26:return void this.rI();case 27:return void this.oI();case 28:return void this.lI();case 29:return void this.X_()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Ws,Di=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),ki={timeout:60},Oi=new Fi.ea(0,0,0,1),Li=new Set(["left","center","right"]),Bi=new Set(["top","center","bottom"]),Ni=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),ji=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.Sf();for(const i of ji)(i.cI()||Fi.Gh(i.fI(),s))&&i.dI()});let s=!1,i=!1;Fi.Dy.qb=class{constructor(t,s){s=Object.assign({},ki,s),this.Yb=t,this.pI="Arial",this.mI=16,this.gI=1,this.yI=0,this.SI=!1,this.wI=!1,this.bI="black",this.MI=!1,this.Em=null,this.vI=!0,this.xI=null,this.GI=new Set,this.TI="left",this._I="top",this.If="",this.II=null,this.CI=Fi.vr(Fi.Am),this.RI="word",this.AI="ltr",this.EI=!1,this.FI=!1,this.DI=!1,this.kI=-1,this.OI=0,this.LI=0,this.BI=0,this.bg=0,this.Mg=0,this.NI=1,this.WI=null,this.jI=null,this.VI=null,this.UI=null,this.HI=-1,this.zI=-1,this.JI="",this.qI="",this.XI="",this.YI=1,this.$I=1,this.KI=t=>this.ZI(t),this.e2=null,this.QI=new Fi.Rect,this.tC=1,this.sC=new Fi.M0(()=>{this.iC(),this.eC(8,8)},s.timeout),this.hC=null,this.rC=!1,ji.add(this)}Gr(){this.xI=null,this.GI.clear(),this.Em=null,this.II=null,this.WI=null,this.jI=null,this.VI=null,this.UI=null,this.KI=null,this.sC.Gr(),this.hC=null,this.iC(),this.CI.wc(),this.CI=null,this.Yb=null,this.rC=!0,ji.delete(this)}nC(){this.DI=!0}oC(){this.nC(),this.FI=!0}dI(){this.oC(),this.EI=!0}aC(t){if(this.MI!==(t=!!t)){this.MI=t;const s=this.MI?"alphabetic":"top";this.jI&&(this.jI.textBaseline=s),this.VI&&(this.VI.textBaseline=s),this.dI()}}cI(){return this.MI}km(t){this.Em!==t&&(this.Em=t,this.CI.km(t),this.Em&&this.Em.by()&&this.Em.My().then(()=>this.nC()),this.dI())}lC(t){this.vI!==(t=!!t)&&(this.vI=t,this.nC())}uC(t){this.pI!==(t=t||"serif")&&(this.pI=t,this.dI())}fI(){return this.pI}cC(t){this.mI!==(t=t<.1?.1:t)&&(this.mI=t,this.dI())}fC(){return this.mI}dC(t){this.gI!==t&&(this.gI=t,this.dI())}pC(t){this.yI!==t&&(this.yI=t,this.oC())}mC(){return this.yI}gC(t){this.SI!==(t=!!t)&&(this.SI=t,this.dI())}yC(){return this.SI}SC(t){this.wI!==(t=!!t)&&(this.wI=t,this.dI())}wC(){return this.wI}bC(t){t=Math.floor(t),this.kI!==t&&(this.kI=t,this.nC())}MC(){return this.kI}vC(t,s){let i=[];(this.SI||s.Og("b"))&&i.push("bold"),(this.wI||s.Og("i"))&&i.push("italic");const e=s.kg("size"),h=(e?parseFloat(e.param):this.mI)*this.gI;i.push(t?h+"pt":h*this.xC()+"pt");let r=this.pI,n=s.kg("font");return n&&n.param&&(r=n.param,this.xI)&&!this.GI.has(r)&&(this.xI(r),this.GI.add(r)),r&&(Di.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}LM(t){t instanceof Fi.ea&&(t=t.Na()),this.bI!==t&&(this.bI=t,this.nC())}GC(t,s,i){Oi.ua(t,s,i),this.LM(Oi)}TC(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.TI!==t&&(this.TI=t,this.oC())}_C(){return this.TI}IC(t){if(!Bi.has(t))throw new Error("invalid vertical alignment");this._I!==t&&(this._I=t,this.oC())}CC(){return this._I}RC(t){if(!Ni.has(t))throw new Error("invalid word wrap mode");this.RI!==t&&(this.RI=t,this.dI())}AC(){return this.RI}PC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.AI!==t&&(this.AI=t,this.jI&&(this.jI.direction=this.AI),this.VI&&(this.VI.direction=this.AI),this.dI())}EC(){return this.AI}Af(t){this.If!==t&&(this.If=t,this.dI())}FC(){return this.If}xC(){return this.tC*this.NI*self.devicePixelRatio}DC(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.LI===r&&this.BI===n&&this.NI===o)){let t=this.LI,s=(this.LI=r,this.BI=n,this.NI=o,self.devicePixelRatio),i=(this.bg=this.LI*this.NI*s,this.Mg=this.BI*this.NI*s,Math.max(this.bg,this.Mg)),e=Math.min(this.Yb.m2(),4096),h=1;e<i&&(h=e/i,this.bg=Math.min(this.bg*h,e),this.Mg=Math.min(this.Mg*h,e)),this.tC=h,this.LI!==t?this.dI():this.oC()}}Lm(){return this.bg}qm(){return this.Mg}kC(){return this.NI}OC(){return this.LC(),this.CI.Sg()}BC(){return this.LC(),this.CI.wg()+this.CI.Dm()*(this.yI+4)-this.yI}NC(){this.LC();let t=0;for(const s of this.CI.Fm())for(const i of s.Qm())t+=i.tg();return t}Gx(){return this.sC._0(),this.WC(),this.e2}jC(t,s){this.LC();const i=this.xC(),e=this.CI.Fm();for(const h of e){const r=h.Ym()*i;if(s>=h.Eg()-h.qm()*i+r&&s<h.Eg()+r)for(const n of h.Qm())if(t>=n.Ag()&&t<n.Ag()+n.Lm()*i)return n}return null}*VC(t){this.LC();const s=this.CI.Fm();for(const i of s)for(const e of i.Qm()){const h=e.kg("tag");h&&Fi.Gh(h.param,t)&&(yield e)}}UC(t,s){for(const i of this.VC(t)){if(0===s)return i;--s}return null}HC(t){let s=0;for(const i of this.VC(t))++s;return s}WC(){this.e2&&!this.DI&&!this.FI&&!this.EI||this.rC||this.bg<=0||this.Mg<=0||(this.DI=!1,this.zC())}zC(){this.rC||(this.LC(),this.eC(Math.max(Fi.Kr(Math.ceil(this.bg)),128),Math.max(Fi.Kr(Math.ceil(this.Mg)),64)),this.JC(),this.qC(),this.sC._0())}eC(t,s){this.WI||(this.WI=Fi.Uo(16,16));let i=!1;this.HI===t&&this.zI===s||(this.HI=t,this.zI=s,this.WI.width=t,this.WI.height=s,i=!0),this.jI||(this.jI=this.WI.getContext("2d"),i=!0),i?(this.jI.textBaseline=this.MI?"alphabetic":"top",this.jI.direction=this.AI,this.jI.font=this.JI,this.jI.fillStyle=this.XI,this.jI.strokeStyle=this.XI,this.jI.globalAlpha=this.YI,this.jI.lineWidth=this.$I):this.jI.clearRect(0,0,t,s)}XC(){this.VI||(this.VI=Fi.Uo(16,16).getContext("2d"),this.UI=Fi.Uo(16,16).getContext("2d"),this.VI.textBaseline=this.MI?"alphabetic":"top",this.UI.textBaseline="top",this.VI.direction=this.AI,this.UI.direction=this.AI)}YC(t){this.qI!==t&&(this.qI=t,this.VI.font=t,this.UI.font=t)}$C(){if(!s){s=!0,this.XC();const t=this.VI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}LC(){this.KC(),this.ZC()}KC(){this.EI&&(this.XC(),!this.MI||this.II&&this.II.toString()===this.If||(this.II=new Fi.Lh(this.If,{rm:!0})),this.CI.Am(this.MI?this.II.vm():this.If,this.KI,this.LI,this.RI,0),this.EI=!1)}ZC(){this.FI&&(this.QC(),this.FI=!1)}ZI(t){let s=t.Um()?t.og().join(""):" ",i=(this.YC(this.vC(!0,t)),t.kg("size")),e=(i?parseFloat(i.param):this.mI)*this.gI,h=this.VI.measureText(s),r=0;if(this.MI&&this.$C()){const n=this.UI.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Vm:r}}tR(t){this.JI!==t&&(this.JI=t,this.jI.font=t)}sR(t){this.XI!==t&&(this.XI=t,this.jI.fillStyle=t,this.jI.strokeStyle=t)}iR(t){this.YI!==t&&(this.YI=t,this.jI.globalAlpha=t)}eR(t){this.$I!==t&&(this.$I=t,this.jI.lineWidth=t)}QC(){let e=this.xC(),h=(4+this.yI)*e,r=0,n=this.CI.Fm();if(0!==n.length){for(const s of n){s.Rg(NaN),s.Pg(NaN);for(const o of s.Qm())o.Rg(NaN),o.Pg(NaN)}let t=this.MI&&this.$C(),i=n[0].qm()*e;if("center"===this._I){const a=n.reduce((t,s)=>t+s.qm()*e+h,0)-h;r=Math.max(this.Mg/2-a/2,0),t&&(i=n[0].$m()*e)}else if("bottom"===this._I){const l=n.reduce((t,s)=>t+s.qm()*e+h,0)-this.yI*e,u=t?n.at(-1).Ym()*e:0;r=this.Mg-l-u-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.qm()*e,d=r;if(this.MI){if(r+=0===t?i:f,0<t&&r>this.Mg-4*e)break}else if(0<t&&r>=this.Mg-f)break;0<=d&&this.hR(c,r,e),this.MI||(r+=f),r+=h}}}hR(t,s,i){let e=0;"center"===this.TI?e=Math.floor((this.bg-t.Lm()*i)/2):"right"===this.TI&&(e=this.bg-t.Lm()*i),t.Rg(e),t.Pg(s);for(const h of"ltr"===this.AI?t.Qm():t.Ig())this.rR(h,e,s,i),e+=h.Lm()*i}rR(t,s,i,e){const h=t.kg("offsetx"),r=(s+=h?o(h.param,t.qm())*e:0,t.kg("offsety"));if(i+=r?o(r.param,t.qm())*e:0,t.zm()){const n=t.kg("iconoffsety");i+=n?o(n.param,t.qm())*e:.2*t.qm()*e}t.Rg(s),t.Pg(i)}JC(){this.jI.imageSmoothingEnabled=this.vI,this.jI.imageSmoothingQuality="high",this.OI=0;const t=this.xC(),s=this.CI.Fm();for(const i of s)this.nR(i,t)}nR(t,s){const i=t.Ag(),e=t.Eg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.AI?t.Qm():t.Ig())this.oR(h,s,t.qm())}oR(n,o,a){const l=this.jI,u=n.Ag(),c=n.Eg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=n.Lm()*o,i=n.qm()*o,e=n.qm()/16,h=(4+this.yI)*o,r=n.Um()?n.og():null;if(-1!==this.kI){if(this.OI>=this.kI)return;n.Um()&&this.OI+r.length>this.kI&&(r=r.slice(0,this.kI-this.OI),s=this.ZI(n).width*o),this.OI+=n.tg()}const f=n.kg("background"),d=n.Og("u"),p=n.Og("s");if((!n.Um()||!Fi.pp(r)||f||d||p)&&!n.Og("hide")){const m=n.kg("color"),g=n.kg("opacity"),y=(this.iR(g?parseFloat(g.param)/100:1),f&&(this.sR(f.param),l.fillRect(u,c-i,s,i+h)),n.kg("linethickness")),S=y?parseFloat(y.param):1,w=n.Og("stroke");if(w&&this.eR(.5*e*S*this.xC()),n.Um()){const b=r.join("");if(this.tR(this.vC(!1,n)),!w){this.eR(.5*e*S*this.xC());const M=n.kg("outlineback");M&&(this.sR(M.param),this.aR(!0,b,u,c,s))}if(this.sR(m?m.param:this.bI),this.aR(w,b,u,c,s),!w){this.eR(.5*e*S*this.xC());const v=n.kg("outline");v&&(this.sR(v.param),this.aR(!0,b,u,c,s))}}else if(n.zm()&&0<n.Lm()){const x=n.Hg(this.Em);x&&l.drawImage(x,u,c-i,s,i)}if(this.sR(m?m.param:this.bI),d&&I(l,w,u,c+o*t,s,o*t*S),p){const G=c-i/4,T=o*e,_=G+T/2;l.fillRect(u,_-T*S/2,s,T*S)}}}}aR(t,s,i,e,h){"rtl"===this.AI&&(i+=h),t?"Gecko"===Fi.di.bi?this.jI.strokeText(s,i,e,h):this.jI.strokeText(s,i,e):"Gecko"===Fi.di.bi?this.jI.fillText(s,i,e,h):this.jI.fillText(s,i,e)}qC(){this.Yb.lR()||(this.e2||(this.e2=this.Yb.lx(this.WI.width,this.WI.height,{Qv:!0,t2:"high"})),this.Yb.uR(this.WI,this.e2),this.QI.set(0,0,this.bg/this.e2.Lm(),this.Mg/this.e2.qm()),this.hC&&this.hC())}cR(){return this.QI}iC(){this.e2&&(this.Yb.lR()||this.Yb.yx(this.e2),this.e2=null)}static BM(){for(const t of ji)t.iC()}static fR(){return ji.values()}}}{const Vi=self.Ws;class Ui{constructor(t){this.zx=t.g2(),this.dR=t.S2(),this.pR=t.mR(),this.gR=null,this.T0=!1,this.yR=!1,this.SR=0,1===this.dR?this.gR=this.pR.createQueryEXT():this.gR=this.zx.createQuery()}Gr(){this.wR(),this.zx=null,this.pR=null,this.yR=!1}wR(){this.gR&&(1===this.dR?this.pR.deleteQueryEXT(this.gR):this.zx.deleteQuery(this.gR),this.gR=null)}N_(){if(this.T0)throw new Error("query already active");1===this.dR?this.pR.beginQueryEXT(this.pR.TIME_ELAPSED_EXT,this.gR):this.zx.beginQuery(this.pR.TIME_ELAPSED_EXT,this.gR),this.T0=!0}V_(){if(!this.T0)throw new Error("query not active");1===this.dR?this.pR.endQueryEXT(this.pR.TIME_ELAPSED_EXT):this.zx.endQuery(this.pR.TIME_ELAPSED_EXT),this.T0=!1}bR(){if(this.gR&&!this.yR&&!this.T0){let t;t=1===this.dR?this.pR.getQueryObjectEXT(this.gR,this.pR.QUERY_RESULT_AVAILABLE_EXT):this.zx.getQueryParameter(this.gR,this.zx.QUERY_RESULT_AVAILABLE);const s=this.zx.getParameter(this.pR.GPU_DISJOINT_EXT);t&&!s&&(1===this.dR?this.SR=this.pR.getQueryObjectEXT(this.gR,this.pR.QUERY_RESULT_EXT):this.SR=this.zx.getQueryParameter(this.gR,this.zx.QUERY_RESULT),this.SR/=1e9,this.yR=!0),(t||s)&&this.wR()}}MR(){return this.yR}vR(){if(this.yR)return this.SR;throw new Error("no result available")}}Vi.Dy.xR=class{constructor(t){this.Yb=t,this.AS=t.kb(),this.T0=!1,this.GR=null,this.TR=!1,this._R=null,this.IR=[]}Gr(){for(const t of this.IR)t instanceof Ui&&t.Gr();Vi.$n(this.IR),this.GR=null,this._R=null,this.Yb=null}N_(){if(this.T0)throw new Error("query already active");const t=this.Yb.CR();0<t.length?(this.TR=!0,this.GR=t.at(-1),this.GR.RR(),this.GR.IR.push(this)):(this.TR=!1,this.GR=null),this.T0=!0,t.push(this),this.AR()}V_(){if(!this.T0)throw new Error("query not active");const t=this.Yb.CR().pop();if(t!==this)throw new Error("can only end most nested query");this.T0=!1,this.RR(),this.GR&&(this.GR.AR(),this.GR=null)}AR(){this._R=Vi.vr(Ui,this.Yb),this.IR.push(this._R),this._R.N_()}RR(){this._R.V_(),this._R=null}bR(){for(const t of this.IR)t.bR()}PR(){return this.TR}MR(){return this.IR.every(t=>t.MR())}vR(){return this.IR.reduce((t,s)=>t+s.vR(),0)}kb(){return this.AS}}}{const Hi=self.Ws;Hi.Dy.ER=class{constructor(t,s=1e3){this.Yb=t,this.FR=s,this.DR=[],this.Yb.kR(this)}Gr(){this.wc(),this.Yb.OR(this),this.Yb=null}wc(){for(const t of this.DR)t.Gr();Hi.$n(this.DR)}LR(){const t=new Hi.Dy.xR(this.Yb);if(this.DR.push(t),this.DR.length>this.FR){const s=this.DR.shift();s.Gr()}return t}BR(t){for(const s of this.DR){if(s.kb()>=t)return;if(s.PR())return;s.bR()}}NR(t,s){if(s<=t)return NaN;let i=0;for(const e of this.DR){if(e.kb()>=s)break;if(!(e.kb()<t)){if(!e.MR())return NaN;i+=e.vR()}}return i}WR(i){for(let t=0,s=this.DR.length;t<s;++t){const e=this.DR[t];if(!(e.kb()<i))return void(0<t&&this.DR.splice(0,t));e.Gr()}}}}{let i=function(){h=-1;for(const t of e)t.jR()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Ws),t=self.xs,M=(t.Ps,t.Es),y=t.Is,r={powerPreference:"default",VR:!0,alpha:!1,depth:!1,UR:!1,HR:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.du(0,0,1,0,1,1,0,1),S=y.create(),w=y.create(),v=new b.du,x=new b.Rect,G=null,e=(b.isDebug&&(self.zR=function(){G?G.loseContext():console.warn("WEBGL_lose_context not supported")},self.JR=function(){G?G.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Dy.qR=class extends b.Dy.$y{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.HR&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.zx=e,this.YR=e.getContextAttributes(),this.$R=e.getParameter(e.VERSION),this.dR=h,this.KR=M.create(),this.ZR=!1,this.QR=y.create(),this.tA=!!s.depth,this.sA=!(!s.depth||!s.UR),this.iA=this.tA,this.eA=!1,this.hA=null,this.rA=!0,this.nA=0,this.oA=0,this.Xx=null,this.Yx=null,this.aA=null,this.$x=null,this.lA=new Float32Array(8e3*this.Eb()),this.uA=new Uint16Array(12e3),this.cA=new Float32Array(16e3),this.fA=new Float32Array(32e3),this.dA=0,this.pA=0,this.mA=0,this.gA=0,this.yA=null,this.SA=null,this.wA=[],this.bA=0,this.MA=0,this.vA=null,this.xA=0,this.qT=b.vr(b.Dy.VT,this),this.GA=b.vr(b.ea,1,1,1,1),this.TA=null,this.A_=null,this._A=0,this.IA=0,this.CA=new b.Rect,this.RA=b.vr(b.Rect,0,0,-1,-1),this.AA=0,this.PA=-1,this.EA=0,this.FA=0,this.DA=0,this.kA="(unavailable)",this.OA="(unavailable)",this.LA=[],this.BA=!1,this.NA=null,this.WA=null,this.jA=null,this.VA=null,this.UA=null,this.HA=null,this.zA=0,this.JA=!!s.VR,this.pR=null,this.qA=new Set,this.XA=[],this.FS(this.uA)}jb(){return!0}async OS(){super.OS();const t=this.zx,s=this.Eb(),i=(this.GA.la(1,1,1,1),this.TA=null,this.A_=null,this.dA=0,this.mA=0,this.gA=8e3*s-4*s,b.$n(this.wA),this.bA=0,this.MA=0,this.yA=null,this.vA=null,this.CA.set(0,0,1,1),this.xA=0,this.qT),e=(i.VG=null,i.wx=null,i.bx=null,M.set(i.HT,1,1,1,1),i.clearColor.la(0,0,0,0),i.zT.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this._A=t.ONE,this.IA=t.ONE_MINUS_SRC_ALPHA,this.YA(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.tA?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.iA=this.tA,this.eA=!1,this.$x=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.$x),t.bufferData(t.ARRAY_BUFFER,this.fA.byteLength,t.DYNAMIC_DRAW),this.Xx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Xx),t.bufferData(t.ARRAY_BUFFER,this.lA.byteLength,t.DYNAMIC_DRAW),this.Yx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Yx),t.bufferData(t.ARRAY_BUFFER,this.cA.byteLength,t.DYNAMIC_DRAW),this.aA=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.aA),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.uA,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.PA=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.EA=e[0],this.FA=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.DA=h&&r?Math.min(h.precision,r.precision):0,2048<this.FA&&(this.FA=2048),this.LA=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this.kA=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.OA=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.NA=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(G=t.getExtension("WEBGL_lose_context")),this.JA&&(1===this.S2()?this.pR=t.getExtension("EXT_disjoint_timer_query"):this.pR=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.WA=t.getExtension("EXT_texture_filter_anisotropic"),this.WA?this.zA=t.getParameter(this.WA.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.zA=0,this.S2()<2&&this.tA&&this.sA&&(this.jA=t.getExtension("WEBGL_depth_texture"),!this.jA))throw new Error("no depth texture support");this.S2()<2&&(this.VA=t.getExtension("EXT_frag_depth"),this.UA=t.getExtension("OES_standard_derivatives"),this.HA=t.getExtension("EXT_shader_texture_lod"));let o=b.Dy.Nx,a=o.uT(!1),l=o.fT(),u=a,c=o.MT(),f=o.wT(),d=o.mT(),p=o.uT(!0),m=!1;this.tA&&(this.S2()<2?this.VA&&(l=o.dT(),c=o.vT(),d=o.gT(),m=!0):(u=o.cT(),l=o.pT(),c=o.xT(),f=o.bT(),d=o.yT(),p=o.cT(!0)));const g=o.ST(this.S2(),m,this.UA&&this.HA),y=2<=this.S2()?o.cT():a,S=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.GT(),a,"<fill>"],[o.TT(),a,"<lineargradient>"],[o._T(),a,"<penumbra>"],[o.CT(),a,"<hardellipse>"],[o.RT(),a,"<hardellipseoutline>"],[o.AT(),a,"<smoothellipse>"],[o.PT(),a,"<smoothellipseoutline>"],[o.IT(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],w=await Promise.all(S.map(t=>this.$A({src:t[0],jx:t[1],name:t[2]})));this.nS=w[0],this.SA=w[1],this.oS=w[2],this.uS=w[3],this.cS=w[4],this.fS=w[5],this.dS=w[6],this.pS=w[7],this.mS=w[8],this.gS=w[9],this.yS=w[10],this.aS=w[11],this.lS=w[12],this.lw()}async $A(t){const s=await b.Dy.Nx.Hx(this,t);return this.hw(s),s}KA(){this.yA=null}DC(t,s,i){if(this.bg!==t||this.Mg!==s||i){this.Db();const e=this.zx,h=this.qT;this.bg=t,this.Mg=s,this.ZA(0,0,t,s),this.KS(this.QR,t/s),this.QA(this.QR),this.SA&&(e.useProgram(this.SA.HG()),this.SA.LG(this.Qy),this.yA=this.SA,this.qT.VG=this.SA),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.TA=null,this.A_=null,this.tA&&this.rA&&this.tP(this.bg,this.Mg),this.vA&&this.vA.gx(this.bg,this.Mg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.vA=null,h.wx=null,h.bx=null}}tP(t,s){const i=this.zx;this.hA&&this.nA===t&&this.oA===s||(this.sA?(this.hA&&i.deleteTexture(this.hA),this.hA=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.hA),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.S2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.jA&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.jA.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.hA&&i.deleteRenderbuffer(this.hA),this.hA=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.hA),i.renderbufferStorage(i.RENDERBUFFER,2<=this.dR?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.nA=t,this.oA=s)}sP(t,s){this.tA&&(this.rA=!1,this.tP(t,s))}iP(){this.tA&&(this.rA=!0,this.tP(this.bg,this.Mg))}ZA(t,s,i,e){const h=this.KR;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.eP();r.c_(t,s,i,e),M.set(h,t,s,i,e),this.MA=0}}JS(t){super.JS(t),this.KS(this.QR,this.bg/this.Mg)}VS(t){super.VS(t),this.KS(this.QR,this.bg/this.Mg)}HS(t){super.HS(t),this.KS(this.QR,this.bg/this.Mg)}QA(t){if(!y.j(this.Qy,t)){const s=this.eP();s.d_(t),y.I(this.Qy,t),this.MA=0,this.ZR=!0}}hP(){let t,s,i,e=this.vA;i=(null===e?(t=this.QR,s=this.Lm(),this):(t=e.Tx(),s=e.Lm(),e)).qm(),this.QA(t),this.ZA(0,0,s,i)}rP(t){if(!y.j(this.tS,t)){const s=this.eP();s.m_(t),y.I(this.tS,t),this.MA=0,this.ZR=!0}}nP(){this.ZR=!1}oP(){return this.ZR}Sx(){return this.qT}eP(){const t=this.wA;return this.bA===t.length&&t.push(new b.Dy.JT(this.qT)),t[this.bA++]}Db(){0===this.bA||this.lR()||(this.aP(),this.lP(),this.bA=0,this.dA=0,this.pA=0,this.mA=0,this.MA=0)}aP(){const t=this.zx;0<this.mA&&(t.bindBuffer(t.ARRAY_BUFFER,this.$x),t.bufferSubData(t.ARRAY_BUFFER,0,this.fA.subarray(0,this.mA))),0<this.dA&&(t.bindBuffer(t.ARRAY_BUFFER,this.Xx),t.bufferSubData(t.ARRAY_BUFFER,0,this.lA.subarray(0,this.dA)),t.bindBuffer(t.ARRAY_BUFFER,this.Yx),t.bufferSubData(t.ARRAY_BUFFER,0,this.cA.subarray(0,this.pA)))}lP(){const i=this.wA;for(let t=0,s=this.bA;t<s;++t)i[t].uI()}uP(){return this.GA._a()}cP(t,s,i,e){const h=this.GA;if(!h.Ea(t,s,i,e)){h.la(t,s,i,e);const r=this.eP();r.r_(h),this.MA=0,this.wS=null}}fP(t){const s=this.GA;if(s._a()!==t){s.ba(t);const i=this.eP();i.r_(s),this.MA=0,this.wS=null}}LM(t){const s=this.GA;if(!s.equals(t)){s.set(t);const i=this.eP();i.r_(s),this.MA=0,this.wS=null}}dP(){this.cP(1,1,1,1)}pP(){return this.GA}mP(t){if(t!==this.TA){const s=this.eP();s.e_(t),this.TA=t,this.MA=0}}v2(){this.TA=null}OM(t){const s=this.Nw(t);this.gP(s[0],s[1])}yP(t){const s=this.Vw(t);this.gP(s.Lw,s.Bw)}gP(t,s){if(t!==this._A||s!==this.IA){const i=this.eP();i.l_(t,s),this._A=t,this.IA=s,this.MA=0,this.wS=null}}SP(){return this._A===this.zx.ONE&&this.IA===this.zx.ONE_MINUS_SRC_ALPHA}wP(){this.gP(this.zx.ONE,this.zx.ONE_MINUS_SRC_ALPHA)}bP(){this.gP(this.zx.SRC_ALPHA,this.zx.ONE_MINUS_SRC_ALPHA)}MP(){this.gP(this.zx.ONE,this.zx.ZERO)}Rect(t){this.vP(t.Ll(),t.Bl(),t.Nl(),t.Wl())}vP(t,s,i,e){this.Pb(t,s,i,s,i,e,t,e)}xP(){let t=this.dA;if(t>=this.gA&&(this.Db(),t=0),1===this.MA)this.wA[this.bA-1].YT+=6;else{const s=this.eP();s.s_(t,6),this.MA=1}}GP(t){t.Fu(this.lA,this.dA,this.vS+this.xS),this.dA+=12}du(t){this.xP(),this.GP(t),c.Ca(this.cA,this.pA),this.pA+=8}Pb(t,s,i,e,h,r,n,o){this.xP();let a=this.lA,l=this.dA,u=this.vS+this.xS;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=r,a[l++]=u,a[l++]=n,a[l++]=o,a[l++]=u,this.dA=l,c.Ca(this.cA,this.pA),this.pA+=8}eb(t,s){this.xP(),this.GP(t),s.Ul(this.cA,this.pA),this.pA+=8}TP(t,s){this.xP(),this.GP(t),s.Ca(this.cA,this.pA),this.pA+=8}_P(t,s,i,e,h,r,n,o,a,l,u,c,f){this.xP();let d=this.lA,p=this.dA,m=this.vS+this.xS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.dA=p,f.Ul(this.cA,this.pA),this.pA+=8}Zw(t,s,i,e,h,r,n,o,a,l,u,c,f){this.xP();let d=this.lA,p=this.dA,m=this.vS+this.xS;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.dA=p,f.Ca(this.cA,this.pA),this.pA+=8}IP(e,h,r){const n=this.lA,o=this.cA;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.xP();let t=this.dA,s=this.pA;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.dA=t,this.pA=s}}CP(t,s){this.Jw(0),y.I(S,this.Qy),y.I(w,this.tS),this.hP();const[i,e]=this.RP(this.vA),h=this.ew(0,0,this.BS(e),0,0,0,e);if(this.rP(h),"crop"===t&&this.vA&&s){const r=this.bg/2,n=this.Mg/2,o=s.Lm(),a=s.qm(),l=this.vA.Lm(),u=this.vA.qm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,n-p,-r+c,n-f-p),v.Du(x),x.set(0,d,c,f+d),x.Ct(o,a),this.eb(v,x)}else{const m=i/2,g=e/2;this.vP(-m,g,m,-g)}this.QA(S),this.rP(w)}AP(t){if(!this.CA.equals(t)){this.CA.I(t);const s=this.eP();s.v_(t),this.MA=0}}PP(){}EP(t,s,i,e){7996<=this.mA&&this.Db();let h=this.mA,r=this.vS+this.xS;if(2===this.MA&&this.xA===r)this.wA[this.bA-1].YT++;else{const o=this.eP();o.G_(h,r),this.MA=2,this.xA=r}const n=this.fA;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.mA=h}uw(t){if(this.yA!==t){const s=this.eP();s.__(t),this.yA=t,this.MA=0,this.wS=null}}FP(){return this.yA}DP(){this.uw(this.SA)}kP(t){const s=this.eP();s.o_(t),this.MA=0}OP(t,s,i=1){const e=this.eP();e.U_(t,s,i),this.MA=0}LP(t,s,i,e,h,r,n){if(this.yA!==this.aS)throw new Error("must set tilemap fill mode first");const o=this.eP();o.z_(t,s,i,e,h,r,n),this.MA=0}BP(t,s,i,e,h,r,n){if(this.yA!==this.lS)throw new Error("must set tile randomization mode first");const o=this.eP();o.q_(t,s,i,e,h,r,n),this.MA=0}NP(t,s,i,e,h,r,n,o,a,l,u){const c=this.yA;if(u%=10800,c._G&&!c.ZG(s,i,e,h,r,n,o,a,l,u)){const f=this.eP(),d=(f.C_(),c.sT(s,i,e,h,r,n,o,a,l,u),f.KT),p=(d[0]=r,d[1]=n,s.Ca(d,2),d[6]=a,d[7]=l,i.Ca(d,12),f.ZT),m=(h.Ca(p,0),p[1]);p[1]=p[3],p[3]=m,e.Ca(f.QT,0),f.XT=u,f.YT=o,c.lG.IG()?f.$T=t?t.Gx():null:f.$T=null,this.MA=0}}WP(t){const s=this.yA;if(0!==t.length&&!s.XG(t)){const i=this.eP();i.P_(),s.$G(t),b.eo(i.t_,t),this.MA=0}}jP(t,s,i,e){const h=this.eP();h.b_(t,s,i,e),this.MA=0}wc(t){const s=this.eP();s.w_(t),this.MA=0}VP(){}Fb(){super.Fb(),this.zx.flush()}UP(){if(this.tA&&this.vA&&this.vA.Rx()){const t=this.eP();t.Y_(this.iA),this.MA=0}}HP(t){if(this.iA!==(t=!!t)&&this.tA){this.iA=t;const s=this.eP();s.Z_(t),this.MA=0}}zP(){return this.iA}ux(){return this.hA}mx(){return this.sA}JP(t){if(t=!!t,this.sA&&this.eA!==t){if(t&&this.zP())throw new Error("depth still enabled");this.eA=t;const s=this.eP();s.tI(t),this.MA=0}}qP(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.RA.Ol(t,s,i,e)){this.RA.Rl(t,s,i,e);const r=h||this.RP(this.XP())[1],n=(s=r-s-e,this.eP());n.aI(!0,t,s,i,e),this.MA=0}}YP(){if(-1!==this.RA.Nl()){this.RA.set(0,0,-1,-1);const t=this.eP();t.aI(!1,0,0,0,0),this.MA=0}}$P(){for(const t of this.qA)t.BR(this.AS)}lR(){return!this.zx||this.zx.isContextLost()||this.BA}BM(){super.LS(),b.Dy.i2.BM(),b.Dy.U2.BM(),b.Dy.qb.BM();for(const t of this.qA)t.wc();this.LA=[],this.pR=null,this.NA=null,this.WA=null,this.jA=null,this.VA=null,this.UA=null,this.HA=null,this.zA=0,this.kA="(unavailable)",this.OA="(unavailable)",this.yA=null,this.SA=null,this.hA=null;for(const s of this.SS.values())s.BM()}async NM(){this.BA=!0,await this.OS(),this.BA=!1;for(const t of this.SS.values())t.NM(this);this.DC(this.bg,this.Mg,!0)}KP(t,s){if(this.lR())throw new Error("context lost");this.Db();const i=b.vr(b.Dy.i2,this);return i.d2(t,s),i}async ZP(e,h){if(this.lR())throw new Error("context lost");if(h=Object.assign({},h),b.Hi.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.Xv&&"clamp-to-edge"!==h.Xv||h.Yv&&"clamp-to-edge"!==h.Yv,i=b.$r(t.width)&&b.$r(t.height);return this.w2()||i||!s?h.premultiplyAlpha=!1:b.Hi.$i?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.Kr(t.width),resizeHeight:b.Kr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.t0(()=>this.KP(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Vo(e);e=t}return b.t0(()=>this.KP(e,h))}lx(t,s,i){this.Db();const e=b.vr(b.Dy.i2,this);return e.G2(t,s,i),e}uR(t,s,i){this.Db(),s.R2(t,i)}yx(t){t&&(t.D2(),0<t.O2()||(this.Db(),t===this.TA&&(this.zx.bindTexture(this.zx.TEXTURE_2D,null),this.TA=null),t===this.A_&&(this.zx.activeTexture(this.zx.TEXTURE1),this.zx.bindTexture(this.zx.TEXTURE_2D,null),this.zx.activeTexture(this.zx.TEXTURE0),this.A_=null),t.A2()))}QP(t){let s=this.bg,i=this.Mg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this.Db();const h=b.vr(b.Dy.U2,this);return h.nx(s,i,Object.assign({j2:e},t)),this.vA=null,this.qT.wx=null,this.qT.bx=null,h}tE(t,s=!0){if(t!==this.vA){t&&t.Ax()&&t.gx(this.bg,this.Mg);const i=this.eP();i.y_(t),this.vA=t,this.MA=0,s&&this.hP()}}XP(){return this.vA}RP(t){return t?[t.Lm(),t.qm()]:[this.bg,this.Mg]}sE(t,s="stretch"){if(this.dR<2||this.vA&&0<this.vA.Px())this.MP(),this.dP(),this.iE(t,s);else{const i=this.eP();i.k_(t,this.vA,s),this.MA=0}}iE(t,s="stretch"){const i=t.Gx();if(!i)throw new Error("not a texture-backed render target");this.mP(i),this.CP(s,i)}eE(t){if(!(this.dR<2)){const s=this.eP();s.F_(t.Mx()),this.MA=0}}hE(t){this.tE(null),this.Db();const s=t.Gx();s===this.TA&&(this.zx.bindTexture(this.zx.TEXTURE_2D,null),this.TA=null),s===this.A_&&(this.zx.activeTexture(this.zx.TEXTURE1),this.zx.bindTexture(this.zx.TEXTURE_2D,null),this.zx.activeTexture(this.zx.TEXTURE0),this.A_=null),t.A2()}async Ox(t,s,i){this.Db();let e=this.vA,h,r,n,o=(n=t?(h=t.Lm(),r=t.qm(),t.Mx()):(h=this.Lm(),r=this.qm(),null),0),a=0,l=h,u=r;if(i){o=b.Rr(Math.floor(i.Ll()),0,h-1),a=b.Rr(Math.floor(i.Bl()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.Rr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.Rr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.zx,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.vA=null,this.qT.wx=null,this.qT.bx=null,this.tE(e)}),d;if(!s&&2<=this.S2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Ux(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}rE(){this.HP(!0);const t=this.eP();t.iI(),this.MA=0,this.AA=1}nE(){this.HP(!1);const t=this.eP();t.hI(),this.MA=0,this.AA=2}oE(){return 2===this.AA}aE(){this.HP(!0);const t=this.eP();t.nI(),this.MA=0,this.AA=0}lE(t){if(this.uE()){const s=this.eP();s.L_(t),this.MA=0}}cE(t){if(this.uE()){const s=this.eP();s.W_(t),this.MA=0}}Ux(s){const t=new Promise(t=>e.add({resolve:t,jR:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}Vb(){return this.bg*this.Mg*(this.YR.alpha?4:3)}Ub(){let t=0;for(const s of b.Dy.U2.Lx())s.Gx()||(t+=s.B2());return t}Hb(){let t=0;for(const s of b.Dy.i2.N2())t+=s.B2();return t}fE(){return this.$R}S2(){return this.dR}dE(){return"webgl"+this.S2()}w2(){return 2<=this.S2()}m2(){return this.PA}pE(){return this.EA}mE(){return this.FA}gE(){return 0!==this.DA}yE(){return this.DA}SE(){return this.kA}wE(){return this.OA}bE(){if(2<=this.S2())return"webgl2";{const t=[];return this.VA&&t.push("EXT_frag_depth"),this.UA&&t.push("OES_standard_derivatives"),this.HA&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}ME(){return this.LA}uE(){return!!this.pR}mR(){return this.pR}Vx(){return this.NA}I2(){return this.WA}C2(){return this.zA}kR(t){this.qA.add(t)}OR(t){this.qA.delete(t)}CR(){return this.XA}g2(){return this.zx}YA(t){this.Ow([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}vE(){return this.Jb()}}}{const zi=self.Ws,Ji={xE:null,GE:null,TE:null,getTime:null,_E:null};zi.Dy.IE=class{constructor(t){t=Object.assign({},Ji,t),this.CE=t.xE,this.RE=t.GE,this.AE=t.TE,this.PE=t.getTime,this.EE=t._E,this.FE=null,this.DE=new Set}kE(t){this.DE.add(t)}OE(t){this.DE.delete(t)}BM(){this.FE=null;for(const t of this.DE)t.BM()}LE(t){return this.CE?this.CE(t):[t.Lm(),t.qm()]}XP(t){return this.RE(t)}BE(t,s){this.AE(t,s)}NE(){return this.PE()}T1(t){this.EE(t)}WE(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.FE||this.FE.Lm()===s&&this.FE.qm()===i||(t.yx(this.FE),this.FE=null),null===this.FE&&(this.FE=t.KP(null,{width:s,height:i,$v:"nearest",Qv:!1})),this.FE}}}{const o=self.Ws,qi=self.xs,xh=qi.Is,Xi=o.vr(o.Rect),Yi=o.vr(o.Rect),$i=o.vr(o.Rect),Ki=o.vr(o.Rect),Zi=xh.create(),Qi=xh.create(),te={jE:null,VE:null,UE:null,HE:!1},se={zE:null,JE:!1,qE:!1,XE:!1,YE:!1,$E:!1,KE:!1};o.Dy.ZE=class{constructor(t,s){s=Object.assign({},te,s),this.D1=t,this.QE=s.jE,this.t3=s.VE,this.s3=s.UE,this.i3=null,this.e3=[],this.h3=[],this.r3=[],this.n3=!1,this.EM=0,this.o3=!1,this.a3=!1,this.l3=!1,this.u3=!1,this.f3=!1,this.d3=!1,this.ZR=!1,this.m3=!1,this.g3=!1,this.y3=!1,this.S3=!1,this.w3=!1,this.b3=0,this.M3=[null,null,null],this.v3=!!s.HE,this.x3=0,this.G3=0,this.T3=0,this._3=0,this.I3=null,this.C3=null,this.R3=o.vr(o.Rect),this.A3=o.vr(o.Rect),this.P3=o.vr(o.Rect),this.E3=o.vr(o.Rect),this.F3=o.vr(o.Rect),this.D3=1,this.O3=1,this.L3=0,this.B3=0,this.N3=null,this.W3=null,this.j3=0,this.V3=0,this.U3=!1,this.Q2=xh.create(),this.H3=xh.create(),this.D1.kE(this)}Gr(){this.D1.OE(this),o.$n(this.r3),o.$n(this.e3),o.$n(this.h3),this.I3=null,this.C3=null,this.QE=null,this.t3=null,this.s3=null}BM(){this.n3=!0,o.$n(this.r3),o.$n(this.e3),o.$n(this.h3)}z3(){return this.n3}J3(h,t){if(t=Object.assign({},se,t),o.$n(this.r3),this.x3=0,this.G3=0,this.o3=!1,this.a3=!1,this.l3=!1,this.u3=!1,this.f3=!1,this.d3=!1,this.b3=0,this.w3=!!t.YE,this.S3=!!t.KE,this.n3=!1,o.eo(this.e3,h),0!==h.length){if(t.zE){if(t.zE.length!==h.length)throw new Error("incorrect indexMap length");o.eo(this.h3,t.zE)}else{o.$n(this.h3);for(let t=0,s=h.length;t<s;++t)this.h3.push(t)}for(const s of h)this.x3+=s.SM(),this.G3+=s.wM(),s.GM()&&(this.o3=!0),s._M()&&(this.a3=!0),s.TM()&&(this.l3=!0),s.bM()&&(this.u3=!0),s.RM()&&(this.f3=!0);this.d3=this.q3(h[0].gM());const r=this.X3(h[0],t),n=this.Y3(h.at(-1),t);if(1!==h.length||r||n){this.y3=!1;let e=0;r&&(this.b3=1,this.r3.push(o.vr(o.Dy.ZE.Step.K3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.b3=Math.max(this.b3,t),this.r3.push(o.vr(o.Dy.ZE.Step.Z3,this,e,t,s)),e=t}else this.b3=1,this.r3.push(o.vr(o.Dy.ZE.Step.Q3,this,-1,1,s)),e=1;n&&this.r3.push(o.vr(o.Dy.ZE.Step.tF,this,e,0))}else this.y3=!0}}X3(t,s){return!!(s.JE||t.MM()||s.XE&&!t.xM()||t._M()&&!this.S3||0!==this.x3||0!==this.G3)||(t.gM().jb()?t.TM()&&(s.$E||s.YE)||t.IM()&&s.YE:t.TM()&&!this.d3&&s.$E)}Y3(t,s){return!!s.qE||(t.gM().jb()?t.TM()||t.bM():(t.TM()||t.bM())&&this.sF())}q3(t){return t.ZS()&&this.l3&&!this.u3}iF(t,s,i){t.ZS()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.N3=s,this.I3=i.eF||null,this.C3=i.contextObject||null,this.EM=i.hF||0,this.D3=i.devicePixelRatio||1,this.O3=i.rF||1,this.L3=i.nF||0,this.B3="number"==typeof i.time?i.time:this.D1.NE(),this.ZR=!1,t.nP(),this.o3&&this.oF();let e=!1;if(this.aF()&&(this.lF(t,i),e=!0,this.W3=this.D1.WE(t,this.T3,this._3),Xi.I(this.A3),Xi.ru(),t.ZS()&&t._MaybeDoPendingClearRenderPass(this.N3),t.CopyTextureToTexture(this.N3.Gx(),this.W3,Xi.Ll(),Xi.Bl(),Xi.width(),Xi.height())),this.y3)this.uF(t,i);else if(e||this.lF(t,i),0!==this.P3.width()||0!==this.P3.height()){t.wP(),t.dP(),t.Hw(0),t.Jw(0),this.i3=i.cF||null,this.j3=i.fF||0,this.V3=i.dF||0,this.U3=!!i.pF,this.mF(t),this.M3[0]=s,this.M3[1]=1<=this.b3?this.gF():null,this.M3[2]=2===this.b3?this.gF():null;for(const h of this.r3){const r=this.yF(h.SF()),n=this.yF(h.wF());t.ZS()?h.bF(t,r,n):h.MF(t,r,n)}t.mP(null),this.M3[1]&&this.vF(this.M3[1]),this.M3[2]&&this.vF(this.M3[2]),this.M3.fill(null),this.xF(t),this.N3=null,this.W3=null,this.I3=null,this.C3=null,this.i3=null}}lF(t,s){const[i,e]=this.D1.LE(t);this.GF(t,i,e),this.TF(s)}GF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.T3===s&&this._3===i||this._F(t,s,i,0,0,this.Q2,this.H3),this.T3=s,this._3=i}_F(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,l=(t.KS(r,s/i),t.ew(o,a,t.BS(i),o,a,0,i));xh.I(n,l)}TF(t){this.R3.I(t.IF),t.CF?this.A3.I(t.CF):this.A3.set(0,0,this.T3,this._3),this.P3.I(this.A3),this.P3.Ct(this.T3,this._3);const s=this.O3*this.D3;this.A3.$l(this.x3*s,this.G3*s),this.F3.I(this.A3),this.F3.Ct(this.T3,this._3),this.A3.nu(0,0,this.T3,this._3),this.E3.I(this.A3),this.E3.Ct(this.T3,this._3)}mF(t){if(this.m3=t.zP(),this.g3=t.oE(),this.S3)t.HP(!1),this.a3&&t.JP(!0);else{if(Xi.I(this.A3),t.jb()){const s=this.O3*this.D3;Xi.$l(Math.max(this.x3,1)*s,Math.max(this.G3,1)*s),Xi.ru(),Xi.Rr(0,0,this.T3,this._3)}else Xi.ru();t.qP(Xi.Ll(),Xi.Bl(),Xi.width(),Xi.height(),this._3)}}RF(t){t.dP(),this.S3||(this.g3&&t.aE(),t.HP(!1),this.a3&&t.JP(!0)),t.ZS()&&t.SetNormalizedCoordsProgramVariant(!0)}xF(t){t.JP(!1),this.g3&&t.nE(),t.HP(this.m3),this.S3||t.YP(),t.ZS()&&t.SetNormalizedCoordsProgramVariant(!1),this.ZR=t.oP()}AF(){this.F3.Rr(0,0,1,1)}yF(t){return t<0?null:this.M3[t]}gF(){return this.D1.XP(this)}PF(){return this.N3}vF(t){this.D1.BE(t,this)}EF(t){return this.e3[t]}FF(t){this.i3?this.i3(this,t,()=>this.QE(t,this)):this.QE(t,this),this.y3||this.RF(t)}DF(t){if(this.S3)return!0;if(0!==this.j3||0!==this.V3)return!1;const[s,i]=t.RP(t.XP());return s===this.T3&&i===this._3}kF(t,s){let i=this.Q2,e=this.H3;if(s&&!this.DF(t)){i=Zi,e=Qi;const[h,r]=t.RP(t.XP());this._F(t,h,r,this.j3,this.V3,i,e),this.S3||t.YP()}t.QA(i),t.rP(e)}oF(){this.D1.T1(this)}OF(t,s){return this.s3(this.h3[t],s)}LF(t,s){let i=this.F3,e=this.E3,h=this.P3;t.jb()&&(Yi.I(i),Yi.Ql(1),i=Yi,$i.I(e),$i.Ql(1),e=$i,Ki.I(h),Ki.Ql(1),h=Ki),this.BF(t,s,e,h,i,1/this.T3,1/this._3)}NF(t,s){let e=this.E3,h=this.P3,r=1/this.T3,n=1/this._3;if(this.t3){let{WF:t,jF:s,VF:i}=this.t3(this.I3);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.T3,i=i||this._3,e=t,h=t,r=1/s,n=1/i}else t.jb()&&($i.I(e),$i.Ql(1),e=$i,Ki.I(h),Ki.Ql(1),h=Ki);let i=this.F3;t.jb()&&((i=Yi).I(this.F3),i.Ql(1)),this.BF(t,s,e,h,i,r,n),t.ZS()&&this.f3&&t.SetProgramParameter_IsSrcTexRotated(this.w3)}UF(t){return this.l3?t.ZS()?this.aF()?this.W3:this.N3.Gx():this.N3:null}BF(t,s,i,e,h,r,n){t.NP(this.UF(t),h,i,e,this.R3,r,n,this.D3,this.O3,this.L3,this.B3),t.WP(this.OF(s,t))}uF(t,s){const i=this.e3[0],e=t.zP(),h=i._M();h&&(t.HP(!1),t.JP(!0),this.F3.set(0,0,1,1),this.P3.set(0,0,1,1)),t.uw(i),t.OM(this.EM),t.tE(this.N3);let r=0,n=1;if(this.P3.set(0,0,1,1),i.IM()&&this.t3){const{WF:o,jF:a,VF:l}=this.t3(this.I3);o&&this.P3.I(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(l)?1/l:0}else{const[u,c]=this.D1.LE(t);r=1/u,n=1/c}s.IF?this.R3.I(s.IF):this.R3.set(0,0,0,0),t.NP(this.UF(t),this.F3,this.P3,this.P3,this.R3,r,n,this.D3,this.O3,this.L3,this.B3),t.WP(this.OF(0,t)),t.ZS()&&this.f3&&t.SetProgramParameter_IsSrcTexRotated(this.w3),t.Hw(0),this.FF(t),h&&(t.JP(!1),t.HP(e))}aF(){return this.d3}sF(){return!this.d3}HF(){return this.l3}zF(){return!!this.y3&&!this.aF()}JF(){return this.S3}qF(){return this.I3}XF(){return this.C3}YF(){return this.EM}$F(){return this.U3}oP(){return this.ZR}KF(){return this.A3}ZF(){return this.E3}QF(){return this.v3}async tD(t,s,i){}}}{const ie=self.Ws;ie.Dy.ZE.Step=class{constructor(t,s,i,e=-1){this.sD=t,this.iD=s,this.eD=i,this.Iy=e}hD(){return this.sD}SF(){return this.iD}wF(){return this.eD}rD(){return this.Iy}HG(){return this.hD().EF(this.rD())}MF(t,s,i){}bF(t,s,i){}}}{const ee=self.Ws;ee.Dy.ZE.Step.K3=class extends ee.Dy.ZE.Step{constructor(t,s,i,e){super(t,s,i,e)}MF(t,s,i){const e=this.hD();t.wP(),t.lw(),t.tE(i,e.$F()),t.jP(0,0,0,0),e.FF(t),e.AF()}bF(t,s,i){const e=this.hD();t.wP(),t.lw(),t.tE(i,!1),t.jP(0,0,0,0),e.FF(t),e.AF()}}}{const he=self.Ws,re=he.vr(he.Rect),ne=he.vr(he.du);he.Dy.ZE.Step.tF=class extends he.Dy.ZE.Step{constructor(t,s,i,e){super(t,s,i,e)}MF(t,s,i){const e=this.hD();t.lw(),t.tE(i),e.kF(t,!0),t.OM(e.YF()),t.mP(s.Gx()),ne.Du(e.KF()),re.I(e.ZF()),re.Ql(1),t.eb(ne,re),e.QF()&&t.eE(s)}bF(t,s,i){const e=this.hD();t.lw(),t.tE(i,!1),e.DF(t)?ne.Du(e.ZF()):(t.SetNormalizedCoordsProgramVariant(!1),e.kF(t,!0),ne.Du(e.KF())),t.SetBackTexture(null),t.OM(e.YF()),t.mP(s.Gx()),e.JF()?t.CP():t.eb(ne,e.ZF())}}}{const oe=self.Ws;oe.Dy.ZE.Step.Q3=class extends oe.Dy.ZE.Step{constructor(t,s,i,e){super(t,s,i,e)}MF(t,s,i){const e=this.hD();t.tE(i,e.$F()),t.jP(0,0,0,0),t.MP(),t.uw(this.HG()),e.NF(t,this.rD()),e.FF(t),e.AF()}bF(t,s,i){const e=this.hD();t.tE(i,!1),t.jP(0,0,0,0),t.MP(),t.uw(this.HG()),e.NF(t,this.rD()),e.FF(t),e.AF()}}}{const ae=self.Ws,le=ae.vr(ae.Rect),ue=ae.vr(ae.du);ae.Dy.ZE.Step.Z3=class extends ae.Dy.ZE.Step{constructor(t,s,i,e){super(t,s,i,e)}MF(t,s,i){const e=this.hD(),h=(t.tE(i),0===this.wF());h?t.OM(e.YF()):(t.jP(0,0,0,0),t.MP()),t.uw(this.HG()),e.LF(t,this.rD()),t.mP(s.Gx()),e.kF(t,h),ue.Du(e.KF()),le.I(e.ZF()),le.Ql(1),t.eb(ue,le),e.QF()&&t.eE(s)}bF(t,s,i){const e=this.hD(),h=(t.tE(i,!1),0===this.wF());h?(t.OM(e.YF()),t.SetBackTexture(null),e.DF(t)?ue.Du(e.ZF()):(t.SetNormalizedCoordsProgramVariant(!1),e.kF(t,!0),ue.Du(e.KF()))):(t.jP(0,0,0,0),t.MP(),ue.Du(e.ZF())),t.uw(this.HG()),e.LF(t,this.rD()),t.mP(s.Gx()),e.JF()?t.CP():t.eb(ue,e.ZF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(u,self.Ws),f=self.Ks,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.nD=class{constructor(t){d=t,Object.defineProperties(this,{oD:{value:d.lD().aD(),writable:!1},uD:{value:d.fD().cD(),writable:!1},dD:{value:{},writable:!1},pD:{value:{},writable:!1},mD:{value:d.gD(),writable:!1},yD:{value:d.SD(),writable:!1},wD:{value:new Date(d.bD()),writable:!1},storage:{value:new self.MD(d),writable:!1},isInWorker:{value:d.vD(),writable:!1},xD:{value:d.GD(),writable:!1},TD:{value:d._D(),writable:!1},$v:{value:d.ID(),writable:!1},CD:{value:d.RD(),writable:!1},AD:{value:new self.PD(t),writable:!1},ED:{value:new self.FD(t),writable:!1}}),d.DD().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.DD().addEventListener("keyup",t=>s.delete(t.key)),d.r0().addEventListener("window-blur",()=>s.clear()),d.vD()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}kD(t){Object.defineProperties(this.dD,t)}OD(t){Object.defineProperties(this.pD,t)}addEventListener(t,s){d.DD().addEventListener(t,s)}removeEventListener(t,s){d.DD().removeEventListener(t,s)}LD(t,...s){f.Re(t);const i=d.BD(),e=i.ND(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.mc())return e.WD();if(s.length<e.jD())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.jD()} expected)`);let h=e.VD(),r=h.UD(),n=i.HD();if(n){r=r.slice(0);const a=new Set(r);for(const l of n.UD())a.has(l)||(r.push(l),a.add(l));for(const u of i.zD())a.has(u)||(r.push(u),a.add(u))}const o=h.JD(r,e.qD(),e.XD(),e.WD(),...s);return o}YD(t){const s=d.KD().$D();if(!s)throw new Error("not in a function which returns a value");switch(s.ZD()){case 1:"number"==typeof t&&s.QD(t);break;case 2:"string"==typeof t&&s.QD(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.QD(t)}}signal(t){f.Re(t),d.BD().sk(t)}ik(t){return f.Re(t),d.BD().ek(t)}hk(){return[d.GD(),d._D()]}get isSuspended(){return d.rk()}get nk(){return d.ak()}get lk(){return d.uk()}get gameTime(){return d.ck()}get fk(){return d.dk()}get timeScale(){return d.pk()}set timeScale(t){f.Te(t),d.mk(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.gk()}get framesPerSecond(){return d.gk()}get yk(){return d.Sk()}get wk(){return d.bk()}get Mk(){return d.vk()}get xk(){return d.Gk()}set xk(t){if(!e.has(t))throw new Error("invalid framerate mode");d.Tk(t)}get _k(){return d.Ik()}set _k(t){f.Te(t),d.Ck(t)}get Rk(){return d.Ak()}set Rk(t){d.Pk(t)}get Ek(){return d.lD().Fk()}get Dk(){return d.lD().kk()}random(){return d.Ok()}get layout(){const t=d.Lk();if(t)return t.Bk();throw new Error("no layout is running - make sure a layout is loaded before accessing")}Nk(t){let s=d.Wk(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.jk(t))return i.Bk();throw new Error("invalid layout")}Vk(){return d.Wk().Uk().map(t=>t.Bk())}Hk(t){let s=d.Wk(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.jk(t)))throw new Error("invalid layout");s.zk()||s.Jk(i)}get keyboard(){const t=d.qk().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get Xk(){const t=d.qk().Xk;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get Yk(){const t=d.qk().Yk;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get $k(){const t=d.qk().$k;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}Kk(t,s){f.Re(t),f.Re(s),d.Zk(t,s)}Qk(t){f.Te(t);const s=d.tO(t);return s?s.sO():null}iO(t,e){f.Ze(e);const h=d.eO();for(const s of t){const i=d.hO(s),r=i.rO();p.push([r.nO().rD(),r.oO()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.sO(),s.sO()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.aO(p[t][0]),a=p[t][1],l=o.lO();l[a]!==n&&((l[a]=n).rO().uO(o,!0),o.cO(n),i=!0)}i&&d.fO(),c.$n(p),c.$n(m)}}async dO(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.pO("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.pO("runtime","alert",{message:t+(d.vD()?" [via Web Worker]":"")})}mO(t){return f.Te(t),d.gO(t)}yO(t){d.SO(t)}}}{let s=self.Ws,i=null;self.wO=class{constructor(t){i=t,Object.defineProperties(this,{bO:{value:!0,writable:!1}})}MO(t){const s=self.xO.vO(t);if(!s)throw new Error("invalid IImageInfo");s.GO(i.TO())}_O(t){return i.Do(t)}IO(t){return i.ko(t)}CO(t){return i.Oo(t)}RO(t){return i.Lo(t)}AO(t){return i.PO(t)}EO(t){return"flat"===i.FO()&&s.Po(t)&&(t=t.toLowerCase()),i.DO(t)}get kO(){return i.OO()}async LO(t,s){throw new Error("decodeWebMOpus() is no longer supported - use Web Audio's decodeAudioData() directly as all supported platforms now support WebM Opus")}BO(...t){return i.NO(...t)}WO(t){return i.jO(t)}VO(t){return i.UO(t)}}}{let n=self.Ws,i=self.Ks,o=null;self.HO=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.TO(),writable:!1}})}zO(t,s){const i=o.TO(),e=i.hO(t),h=i.hO(s);return o.JO(e,h)}qO(t,s){const i=o.TO(),e=i.hO(t);for(const h of s){const r=i.hO(h);if(o.JO(e,r))return h}return null}XO(t){const s=o.TO().hO(t),i=o.YO(s);return i?i.sO():null}$O(t,s){if(i.Te(t),i.Te(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.KO(t,s)}ZO(){return o.QO()}tL(t,s){let i=o.TO(),e;e=Array.isArray(t)?t.map(t=>i.sL(t)):[i.sL(t)];const h=n.Rect.kl(s),r=[];return o.iL(null,e,h,r),r.map(t=>t.sO())}}}{let s=self.Ws,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.PD=class{constructor(t){i=t,Object.defineProperties(this,{eL:{value:s.di.xi,writable:!1},hL:{value:e.get(s.di.mi)||"unknown",writable:!1},rL:{value:s.di.gi,writable:!1},nL:{value:h.get(s.di.yi)||"unknown",writable:!1},oL:{value:s.di.Si,writable:!1},aL:{value:r.get(s.di.bi)||"unknown",writable:!1}})}get exportType(){let t=i.lL();return i.uL()?t="nwjs":i.cL()?t="windows-webview2":"cordova"===t?t="Android"===s.di.mi?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.dL().fL()}get pL(){return i.dL().mL()}get gL(){return i.dL().yL()}get SL(){return i.dL().wL()}get bL(){return i.dL().ML()}get vL(){return i.dL().xL()}get devicePixelRatio(){return i.GL()}}}{const ce=self.Ks;self.MD=class{constructor(t){this.TL=t._L()}getItem(t){return ce.Re(t),this.TL.getItem(t)}setItem(t,s){return ce.Re(t),this.TL.setItem(t,s)}removeItem(t){return ce.Re(t),this.TL.removeItem(t)}clear(){return this.TL.clear()}keys(){return this.TL.keys()}}}{const fe=self.Ws,de=fe.Vs();self.IL=class{#CL;constructor(){const t=fe.AL.RL(de);this.#CL=t,Object.defineProperties(this,{runtime:{value:t.TO().PL(),writable:!1},EL:{value:t.FL(),writable:!1},DL:{value:t.kL(),writable:!1},OL:{value:t.LL(),writable:!1},BL:{value:t.NL(),writable:!1},WL:{value:t.jL(),writable:!1},VL:{value:t.UL(),writable:!1},HL:{value:t.zL(),writable:!1},JL:{value:t.qL(),writable:!1}}),t.TO().XL(this,t)}static YL(t){if(!t)return null;const s=fe.AL.$L(t);return s?s.KL():null}ZL(){return this.#CL.t5().QL()}s5(){return this.#CL.i5().sO()}}}{const pe=self.Ws,me=self.Ks,ge=pe.Vs();self.e5=class{#CL;constructor(){const t=pe.AL.RL(ge);this.#CL=t,Object.defineProperties(this,{name:{value:t.Sf(),writable:!1},runtime:{value:t.TO().PL(),writable:!1},h5:{value:t.r5().KL(),writable:!1}}),t.TO().XL(this,t)}addEventListener(t,s){me.Re(t),me.Ze(s),this.#CL.DD().addEventListener(t,s)}removeEventListener(t,s){me.Re(t),me.Ze(s),this.#CL.DD().removeEventListener(t,s)}n5(){return[...this.instances()]}o5(){return pe.first(this.instances())}a5(){return[...this.l5()]}u5(){return pe.first(this.l5())}c5(t){const s=this.#CL,i=s.TO().f5(t),e=s.d5(i);return e?e.sO():null}*instances(){for(const t of this.#CL.p5())yield t.sO()}*l5(){for(const t of this.#CL.g5().m5())yield t.sO()}y5(t){me.Ze(t);const s=this.#CL;if(0<s.S5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.w5(t)}Wi(t,s,i,e,h){if(me.we(s),me.we(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#CL,n=r.TO(),o=n.Lk().nO(t);if(!o)throw new Error("invalid layer");const a=n.b5(r,o,s,i,e,h),l=(e&&o.M5(a),n.BD());return l.v5(!0),a.x5(),l.v5(!1),l.G5()||n.Wk().T5()||n._5(),a.sO()}}}{const ye=self.Ks,l=new WeakMap,Se=["above","below","top-sublayer","bottom-sublayer"];self.I5=class{constructor(t){l.set(this,t);const s=[],i=t.C5(),e=i.R5().length;for(let t=0;t<e;++t)s.push(new self.A5(i,t));Object.defineProperties(this,{name:{value:t.Sf(),writable:!1},index:{value:t.rD(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Re(t),ye.Ze(s),l.get(this).DD().addEventListener(t,s)}removeEventListener(t,s){ye.Re(t),ye.Ze(s),l.get(this).DD().removeEventListener(t,s)}get width(){return l.get(this).Lm()}set width(t){ye.Te(t),l.get(this).Hm(t)}get height(){return l.get(this).qm()}set height(t){ye.Te(t),l.get(this).Bm(t)}P5(t,s){ye.Te(t),ye.Te(s);const i=l.get(this);i.Hm(t),i.Bm(s)}getSize(){const t=l.get(this);return[t.Lm(),t.qm()]}set scale(t){ye.Te(t),l.get(this).E5(t)}get scale(){return l.get(this).F5()}set angle(t){ye.Te(t),l.get(this).D5(t)}get angle(){return l.get(this).GetAngle()}set scrollX(t){ye.we(t),l.get(this).k5(t)}get scrollX(){return l.get(this).O5()}set scrollY(t){ye.we(t),l.get(this).L5(t)}get scrollY(){return l.get(this).B5()}scrollTo(t,s){ye.we(t),ye.we(s);const i=l.get(this);i.k5(t),i.L5(s)}N5(){const t=l.get(this);return[t.O5(),t.B5()]}W5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.nO(t))?i.j5():null}V5(){return l.get(this).U5().map(t=>t.j5())}*H5(){for(const t of l.get(this).H5())yield t.j5()}z5(t,s,i){const e=l.get(this),h=self.J5,r=(ye.Re(t),ye.ah(s,h),s?e.TO().q5(s):null),n=Se.indexOf(i);if(n<0)throw new Error("invalid location");e.X5(t,r,n)}Y5(t,s,i){const e=l.get(this),h=e.TO(),r=self.J5,n=(ye.oh(t,r),h.q5(t));if(!n)throw new Error("invalid layer");ye.ah(s,r);const o=s?h.q5(s):null,a=Se.indexOf(i);if(a<0)throw new Error("invalid location");e.K5(n,o,a)}Z5(t){const s=l.get(this),i=self.J5,e=(ye.oh(t,i),s.TO().q5(t));if(!e)throw new Error("invalid layer");const h=e.TO();s.Q5(e),h.BD().G5()||h._5()}tB(){const t=l.get(this),s=t.TO();t.sB(),s.BD().G5()||s._5()}iB(t,s){ye.Te(t),ye.Te(s),l.get(this).eB(t,s)}hB(){return l.get(this).rB()}set K(t){ye.Re(t);const s=l.get(this);if("perspective"===t)s.nB();else{if("orthographic"!==t)throw new Error("invalid projection");s.oB()}}get K(){return l.get(this).aB()?"orthographic":"perspective"}}}{const we=self.Ws,be=self.Ks,f=new WeakMap,Me=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),ve=new Map([...Me.entries()].map(t=>[t[1],t[0]])),xe=we.vr(we.ea);self.J5=class{constructor(t){f.set(this,t);const s=[],i=t.C5(),e=i.R5().length;for(let t=0;t<e;++t)s.push(new self.A5(i,t));Object.defineProperties(this,{name:{value:t.Sf(),writable:!1},layout:{value:t.jk().Bk(),writable:!1},effects:{value:s,writable:!1}}),t.TO().XL(this,t)}get lB(){const t=f.get(this).uB();return t?t.j5():null}*cB(){for(const t of f.get(this).cB())yield t.j5()}*fB(){for(const t of f.get(this).dB())yield t.j5()}*pB(){for(const t of f.get(this).dB())for(const s of t.mB())yield s.j5()}get index(){return f.get(this).rD()}get isVisible(){return f.get(this).gB()}set isVisible(t){f.get(this).yB(t)}get SB(){return f.get(this).wB()}get isInteractive(){return f.get(this).bB()}set isInteractive(t){f.get(this).MB(t)}get vB(){return f.get(this).xB()}set vB(t){f.get(this).GB(!!t)}get TB(){return f.get(this)._B()}get opacity(){return f.get(this).uP()}set opacity(t){t=we.Rr(+t,0,1),isNaN(t)||f.get(this).fP(t)}set scale(t){be.Te(t),f.get(this).IB(t)}get scale(){return f.get(this).CB()}set scaleRate(t){be.Te(t),f.get(this).RB(t)}get scaleRate(){return f.get(this).AB()}set angle(t){be.Te(t),f.get(this).D5(t)}get angle(){return f.get(this).PB()}set parallaxX(t){be.Te(t),f.get(this).EB(t)}get parallaxX(){return f.get(this).DB()}set parallaxY(t){be.Te(t),f.get(this).kB(t)}get parallaxY(){return f.get(this).OB()}set LB(t){be.Te(t),f.get(this).QM(t)}get LB(){return f.get(this).ZM()}set BB(t){f.get(this).NB(t)}get BB(){return f.get(this).WB()}set jB(t){f.get(this).VB(t)}get jB(){return f.get(this).UB()}set hF(t){be.Re(t);const s=Me.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).OM(s)}get hF(){return ve.get(f.get(this).HB())}set backgroundColor(t){if(be.He(t),t.length<3)throw new Error("expected 3 elements");xe.ua(t[0],t[1],t[2]);const s=f.get(this),i=s.zB();i.Aa(xe)||(i.Ma(xe),s.TO().fO())}get backgroundColor(){const t=f.get(this).zB();return[t.xa(),t.Ga(),t.Ta()]}set scrollX(t){be.we(t);const s=f.get(this);s.JB(!0),s.k5(t)}get scrollX(){return f.get(this).O5()}set scrollY(t){be.we(t);const s=f.get(this);s.JB(!0),s.L5(t)}get scrollY(){return f.get(this).B5()}scrollTo(t,s){be.we(t),be.we(s);const i=f.get(this);i.JB(!0),i.k5(t),i.L5(s)}N5(){const t=f.get(this);return[t.O5(),t.B5()]}qB(){f.get(this).JB(!1)}getViewport(){return f.get(this).XB().jl()}YB(t,s,i=0){be.we(t),be.we(s),be.we(i);const e=f.get(this),h=e.TO();return e.$B(t-h.KB(),s-h.ZB(),i)}QB(t,s,i=0){be.we(t),be.we(s),be.we(i);const e=f.get(this),h=e.TO(),[r,n]=e.tN(t,s,i);return[r+h.KB(),n+h.ZB()]}sN(t,s,i=0){return be.we(t),be.we(s),be.we(i),f.get(this).iN(t,s,i)}eN(t,s,i=0){return be.we(t),be.we(s),be.we(i),f.get(this).hN(t,s,i)}get rN(){return f.get(this).nN()}}}{let e=function(t){let s=_e.get(t);return s||(s=Ge.vr(Ge.Event.r0),_e.set(t,s)),s};e;const Ge=self.Ws,Te=self.Ks,_e=new WeakMap,Ie=Ge.Vs();self.oN=class{#CL;constructor(){const t=Ge.AL.RL(Ie),s={runtime:{value:(this.#CL=t).TO().PL(),writable:!1},aN:{value:t.lN().QL(),writable:!1},h5:{value:t.r5().KL(),writable:!1}};t.uN(s),t.cN(s),Object.defineProperties(this,s),t.TO().XL(this,t)}static fN(){return Ge.AL.dN()}pN(){const t=_e.get(this);t&&(t.Gr(),_e.delete(this))}addEventListener(t,s,i){Te.Re(t),Te.Ze(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Te.Re(t),Te.Ze(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}destroy(){const t=this.#CL,s=t.TO();s.mN(t),s.BD().G5()||s.Wk().T5()||s.BD().gN()||s._5()}yN(){const t=this.#CL.SN();return t?t.map(t=>t.sO()):[]}*wN(){const t=this.#CL;if(t.bN())for(const s of t.MN())yield s.sO()}get uid(){return this.#CL.vN()}get xN(){return this.#CL.GN()}get TN(){return this.#CL._N()}set timeScale(t){Te.Te(t),this.#CL.mk(t)}get timeScale(){return this.#CL.IN()}CN(){this.#CL.RN()}get nk(){const t=this.#CL;return t.TO().ak(t)}AN(...t){Te.He(t);const s=new Set(t),i=this.#CL.PN();return s.isSubsetOf(i)}EN(t){Te.oh(t,Set),this.#CL.FN(t)}DN(){return new Set(this.#CL.PN())}signal(t){Te.Re(t);const s=this.#CL;s.TO().BD().kN(s,t)}ik(t){Te.Re(t);const s=this.#CL;return s.TO().BD().ON(s,t)}}}{const Ce=self.Ws,Re=self.Ks,Ae=Ce.Vs();self.LN=class extends self.oN{#CL;#BN=!1;#NN=null;#WN=!1;#jN=null;#VN;#UN;constructor(t){super(),this.#CL=Ce.AL.RL(Ae),this.#BN=!1,this.#NN=null,this.#WN=!1,this.#jN=null,this.#VN=t?.domComponentId,this.#UN=t?.wrapperComponentId}pN(){this.HN(!1),this.zN(!1),super.pN()}JN(){return Ce.AL.qN()}XN(t){const s=this.#CL;s.TO().YN(t,s)}$N(t){const s=this.#CL;return s.TO().KN(t,s)}ZN(t,s){if(Re.Re(t),Re.Ze(s),!this.#VN)throw new Error("no DOM component id set");const i=this.#CL.TO();i.QN(this.#VN,t,s)}t4(t){Re.He(t);for(const[s,i]of t)this.ZN(s,i)}s4(t,s){if(Re.Re(t),!this.#VN)throw new Error("no DOM component id set");const i=this.#CL.TO();i.Rf(this.#VN,t,s)}i4(t,s){if(Re.Re(t),!this.#VN)throw new Error("no DOM component id set");const i=this.#CL.TO();return i.pO(this.#VN,t,s)}e4(t,s){const i=this.#CL.TO();if(!i.vD())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#VN,handler:t,data:s,responseId:null});this.s4(t,s)}HN(t){if(this.#BN!==(t=!!t)){this.#BN=t;const s=this.#CL.TO();if(t){if(!this.#NN)if(this.#CL.TO().h4()){const i=globalThis.C3Debugger,e=this.h5;this.#NN=()=>{const t=performance.now();this.r4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#NN=()=>this.r4();s.r0().addEventListener("tick",this.#NN)}else s.r0().removeEventListener("tick",this.#NN)}}n4(){return this.#BN}r4(){}zN(t){if(this.#WN!==(t=!!t)){this.#WN=t;const s=this.#CL.TO();if(t){if(!this.#jN)if(this.#CL.TO().h4()){const i=globalThis.C3Debugger,e=this.h5;this.#jN=()=>{const t=performance.now();this.o4(),i.AddIndividualPluginTickTime(e,performance.now()-t)}}else this.#jN=()=>this.o4();s.r0().addEventListener("tick2",this.#jN)}else s.r0().removeEventListener("tick2",this.#jN)}}a4(){return this.#WN}o4(){}l4(){return[]}u4(){return null}c4(t){}f4(){if(!this.#UN)throw new Error("no wrapper component id set");const t=this.#CL.TO();return t.d4(this.#UN)}m4(t,s){if(Re.Re(t),Re.Ze(s),!this.#UN)throw new Error("no wrapper component id set");const i=this.#CL.TO();i.g4(this.#UN,t,s)}y4(t){Re.He(t);for(const[s,i]of t)this.m4(s,i)}S4(t,s){if(!this.#UN)throw new Error("no wrapper component id set");this.runtime.ED.w4(this.#UN,t,s)}b4(t,s){if(this.#UN)return this.runtime.ED.M4(this.#UN,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#v4;#x4;constructor(t){super(t);const s=Pe.AL.RL(ke),i=s.rO(),e=(this.#v4=s,this.#x4=i,De.set(this,s),[]),h=i.G4();if(h){const n=i.lN().C5().R5().length;for(let t=0;t<n;++t)e.push(new self.A5(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#x4.jk().Bk()}get T4(){return this.#x4.nO().j5()}get x(){return this.#x4.qM()}set x(t){t=+t;const s=this.#x4;isNaN(t)||s.qM()===t||(s.XM(t),s._4())}get y(){return this.#x4.$M()}set y(t){t=+t;const s=this.#x4;isNaN(t)||s.$M()===t||(s.KM(t),s._4())}setPosition(t,s){t=+t,s=+s;const i=this.#x4;isNaN(t)||isNaN(s)||i.qM()===t&&i.$M()===s||(i.I4(t,s),i._4())}C4(){const t=this.#x4;return[t.qM(),t.$M()]}R4(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#x4;i.A4(t,s),i._4()}}get LB(){return this.#x4.ZM()}set LB(t){t=+t;const s=this.#v4,i=this.#x4;isNaN(t)||i.ZM()===t||(i.QM(t),s.TO().fO())}get P4(){return this.#x4.E4()}get width(){return this.#x4.Lm()}set width(t){t=+t;const s=this.#x4;isNaN(t)||s.Lm()===t||(s.Hm(t),s._4())}get height(){return this.#x4.qm()}set height(t){t=+t;const s=this.#x4;isNaN(t)||s.qm()===t||(s.Bm(t),s._4())}P5(t,s){t=+t,s=+s;const i=this.#x4;isNaN(t)||isNaN(s)||i.Lm()===t&&i.qm()===s||(i.DC(t,s),i._4())}getSize(){const t=this.#x4;return[t.Lm(),t.qm()]}get angle(){return this.#x4.GetAngle()}set angle(t){t=Pe.Ar(+t);const s=this.#x4;isNaN(t)||s.GetAngle()===t||(s.D5(t),s._4())}get F4(){return Pe.Er(this.angle)}set F4(t){this.angle=Pe.Pr(t)}Lu(){return this.#x4.D4().jl()}O4(){return this.#x4.L4().Pu()}B4(){return this.#x4.N4()}get isVisible(){return this.#x4.wB()}set isVisible(t){t=!!t;const s=this.#v4,i=this.#x4;i.wB()!==t&&(i.yB(t),s.TO().fO())}get opacity(){return this.#x4.uP()}set opacity(t){t=Pe.Rr(+t,0,1);const s=this.#v4,i=this.#x4;isNaN(t)||i.uP()===t||(i.fP(t),s.TO().fO())}set W4(t){if(Ee.He(t),t.length<3)throw new Error("expected 3 elements");Be.ua(t[0],t[1],t[2]);const s=this.#v4,i=this.#x4;i.j4().Aa(Be)||(i.V4(Be),s.TO().fO())}get W4(){const t=this.#x4.j4();return[t.xa(),t.Ga(),t.Ta()]}set hF(t){Ee.Re(t);const s=Oe.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#v4,e=this.#x4;e.OM(s),i.TO().fO()}get hF(){return Le.get(this.#x4.HB())}U4(){this.#x4.H4()}z4(){this.#x4.J4()}q4(t){Ee.oh(t,Fe);const s=this.#v4,i=s.TO().q5(t);if(!i)throw new Error("invalid layer");s.rO().X4(i)}Y4(t,s){Ee.oh(t,h),this.#x4.K4(De.get(t),s)}get zIndex(){return this.#x4.oO()}get Z4(){return this.#x4.Q4()}set Z4(t){this.#x4.t6(!!t)}lu(t,s){return Ee.we(t),Ee.we(s),this.#x4.s6(+t,+s)}zO(t){Ee.oh(t,h);const s=this.#v4,i=De.get(t);return s.TO().fD().JO(s,i)}XO(){const t=this.#v4,s=t.TO().fD().YO(t);return s?s.sO():null}getParent(){const t=this.#v4.i6();return t?t.sO():null}e6(){const t=this.#v4.h6();return t?t.sO():null}*r6(){for(const t of this.#v4.r6())yield t.sO()}n6(){return this.#v4.o6()}a6(t){const s=this.#v4.l6(t);return s?s.sO():null}*children(){for(const t of this.#v4.children())yield t.sO()}*u6(){for(const t of this.#v4.u6())yield t.sO()}c6(t,s){Ee.oh(t,h),Ee.Le(s),s=s||{};const i=this.#v4,e=De.get(t);i.f6(e,s)}removeChild(t){Ee.oh(t,h);const s=this.#v4,i=De.get(t);s.d6(i)}p6(){const t=this.#v4;if(t.m6()){const s=t.i6();s.d6(t)}}g6(){const t=this.#x4;return{y6:t.S6(),w6:t.b6(),M6:t.v6(),x6:t.G6(),T6:t._6(),I6:t.C6(),R6:t.A6(),P6:t.E6(),F6:t.D6()}}k6(t,s){Ee.Te(t),Ee.Te(s),this.#x4.O6(t,s)}L6(){const t=this.#x4;t.B6(),t._4()}N6(t,s,i){Ee.Te(t),Ee.Te(s),Ee.Oe(i);const e=this.#x4;e.W6(t,s,i)&&e._4()}j6(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#x4;if(o.V6()){const a=o.U6(),l=a.Lv(t,s);null!==l&&(i=l.qM(),e=l.$M(),h=l.ZM(),r=l.tv(),n=l.hv())}return{x:i,y:e,LB:h,u:r,v:n}}H6(){const t=this.#x4;if(!t.V6())return[0,0];const s=t.U6();return[s._v(),s.Iv()]}}};0;const Pe=self.Ws,Ee=self.Ks,Fe=self.J5,De=new WeakMap,ke=Pe.Vs(),Oe=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...Oe.entries()].map(t=>[t[1],t[0]])),Be=Pe.vr(Pe.ea);self.z6=t(self.oN),self.J6=t(self.LN)}{const Ne=self.Ks;self.q6=class extends self.z6{#CL;constructor(){super(),this.#CL=self.oN.fN()}X6(){return this.#CL.K6().Y6()}focus(){this.#CL.K6().Z6()}blur(){this.#CL.K6().Q6()}tW(t,s){Ne.Re(t),this.#CL.K6().sW(t,s)}}}{let e=function(t){let s=Ve.get(t);return s||(s=We.vr(We.Event.r0),Ve.set(t,s)),s};e;const We=self.Ws,je=self.Ks,Ve=new WeakMap,Ue=We.Vs();self.iW=class{#CL;constructor(){const t=We.AL.RL(Ue),s={runtime:{value:(this.#CL=t).TO().PL(),writable:!1},behavior:{value:t.hW().eW(),writable:!1},rW:{value:t.oW().nW(),writable:!1}};Object.defineProperties(this,s),t.TO().XL(this,t)}static fN(){return We.AL.dN()}get aW(){return this.#CL.lW().sO()}pN(){const t=Ve.get(this);t&&(t.Gr(),Ve.delete(this))}addEventListener(t,s,i){je.Re(t),je.Ze(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){je.Re(t),je.Ze(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const He=self.Ws,ze=He.Vs();self.uW=class{constructor(){const t=He.AL.RL(ze),s={runtime:{value:t.TO().PL(),writable:!1},behavior:{value:t.hW().eW(),writable:!1},name:{value:t.Sf(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Ws,qe=Je.Vs();self.cW=class{#CL;constructor(){const t=Je.AL.RL(qe),s={runtime:{value:(this.#CL=t).TO().PL(),writable:!1}};Object.defineProperties(this,s),t.TO().XL(this,t)}n5(){return this.#CL.m5().map(t=>t.sO())}static YL(t){if(!t)return null;const s=Je.AL.fW(t);return s?s.eW():null}}}{const Xe=self.Ws,Ye=self.Ks,$e=Xe.vr(Xe.ea);self.A5=class{#CL;constructor(t,s){this.#CL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#CL.R5();return t[this.index].Sf()}get isActive(){return this.#CL.dW(this.index)}set isActive(t){t=!!t;const s=this.#CL;s.dW(this.index)!==t&&(s.pW(this.index,t),s.mW(),s.TO().fO())}setParameter(t,s){Ye.Te(t),t=Math.floor(+t);const i=this.#CL,e=i.gW(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Xe.ea){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");$e.ua(s[0],s[1],s[2]),s=$e}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.yW(this.index,t,s);h&&i.dW(this.index)&&i.TO().fO()}getParameter(t){Ye.Te(t),t=Math.floor(+t);const s=this.#CL,i=s.gW(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Xe.ea?[i.xa(),i.Ga(),i.Ta()]:i}}}self.SW=class{#CL;constructor(t){this.#CL=t,Object.defineProperties(this,{name:{value:t.Sf(),writable:!1}})}get speed(){return this.#CL.wW()}get isLooping(){return this.#CL.bW()}get repeatCount(){return this.#CL.MW()}get vW(){return this.#CL.xW()}get GW(){return this.#CL.TW()}get frameCount(){return this.#CL._W()}IW(){return this.#CL.RW().map(t=>t.AW())}*frames(){for(const t of this.#CL.RW())yield t.AW()}};self.xO=class{#CL;constructor(t){this.#CL=t}static vO(t){return t.#CL}get width(){return this.#CL.Lm()}get height(){return this.#CL.qm()}getSize(){const t=this.#CL;return[t.Lm(),t.qm()]}PW(t){return t.EW(this)}FW(){return this.#CL.cR().jl()}};{const Ke=self.Ks;self.DW=class extends self.xO{#CL;constructor(t){super(t.kW()),this.#CL=t,Object.defineProperties(this,{duration:{value:t.OW(),writable:!1},LW:{value:t.BW(),writable:!1},NW:{value:t.WW(),writable:!1}})}jW(){const t=this.#CL;return[t.BW(),t.WW()]}VW(){return this.#CL.UW()}HW(t){return this.zW(t)[0]}JW(t){return this.zW(t)[1]}zW(t){let s=this.#CL,i=null;if("number"==typeof t)i=s.qW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.XW(t)}return i?[i.qM(),i.$M()]:this.jW()}YW(){const t=this.#CL.$W();return t?t.Qu():0}KW(t){return this.ZW(t)[0]}QW(t){return this.ZW(t)[1]}ZW(t){Ke.Te(t),t=Math.floor(t);const s=this.#CL.$W();if(!s||t<0||t>=s.Qu())return[0,0];const i=s.Zu(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#CL.t8()}}}{let s=function(t){const s=Qe.get(t);if(s.s8())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.Ks,Qe=new WeakMap;self.i8=class{constructor(t){Qe.set(this,t),t.TO().XL(this,t)}pause(){s(this).e8()}resume(){s(this).h8()}stop(){s(this)._0()}AN(t){return s(this).r8(t)}set time(t){Ze.Te(t),s(this).n8(t)}get time(){return s(this).NE()}set totalTime(t){Ze.Te(t),s(this).o8(t)}get totalTime(){return s(this).a8()}set isLooping(t){s(this).l8(!!t)}get isLooping(){return s(this).u8()}set GW(t){s(this).c8(!!t)}get GW(){return s(this).f8()}set playbackRate(t){Ze.Te(t),s(this).d8(t)}get playbackRate(){return s(this).p8()}get progress(){const t=s(this);return t.NE()/t.a8()}get tags(){return s(this).m8()}get finished(){return s(this).g8()}get isPlaying(){return s(this).IsPlaying()}get y8(){return s(this).S8()}get w8(){return Qe.get(this).s8()}}}{let i=new WeakMap;self.b8=class extends self.i8{constructor(t){super(t),i.set(this,t);const s={name:{value:t.Sf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.s8())throw new Error("tween was released and is no longer valid");return s},e=(i,self.Ks),h=new WeakMap,r=new WeakMap,n=null;self.M8=class extends self.i8{constructor(t,s,i){super(t),n=n||i.easeToIndexFunc,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.ReleaseTween(t)}v8(t){e.Re(t);const s=self.Fc.$c(n(t));i(this).x8(s)}get aW(){const t=i(this).G8();return t?t.sO():null}get T8(){return i(this)._8()}set T8(t){i(this).I8(!!t)}get value(){const t=i(this);if("value"!==t.C8())throw new Error("not a value tween");return t.P8("value").A8()}}}self.E8=class extends self.IL{constructor(){super()}};{const th=self.Ws,sh=self.Ks,ih=th.Vs();self.F8=class extends self.E8{#CL;#VN;#D8=0;#k8=new Map;constructor(t){if(super(),this.#CL=th.AL.RL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#VN=t.domComponentId,this.O8("elem-focused",t=>t.L8()),this.O8("elem-blurred",t=>{t&&t.B8()})}N8(t){const s=this.#D8++;return this.#k8.set(s,t),s}W8(t){this.#k8.delete(t)}O8(t,i){const s=this.#CL.TO();s.QN(this.#VN,t,t=>{const s=this.#k8.get(t.elementId);i(s,t)})}j8(t){sh.He(t);for(const[s,i]of t)this.j8(s,i)}}}{const eh=self.Ws,hh=(new WeakMap,eh.Vs());self.V8=class extends self.e5{#CL;constructor(){super(),this.#CL=eh.AL.RL(hh)}U8(){}H8(){return this.#CL.kW().z8()}J8(t){}q8(t){}X8(){}Y8(t){}}}{const rh=self.Ws,nh=(new WeakMap,rh.Vs());self.K8=class extends self.J6{#CL;#Z8=null;#Q8=null;constructor(t){super(t),this.#CL=rh.AL.RL(nh)}pN(){if(super.pN(),this.#Z8){const t=this.#CL.TO().r0();t.removeEventListener("renderercontextlost",this.#Z8),t.removeEventListener("renderercontextrestored",this.#Q8),this.#Z8=null,this.#Q8=null}}tj(){if(!this.#Z8){this.#Z8=()=>this.sj(),this.#Q8=()=>this.ij();const t=this.#CL.TO().r0();t.addEventListener("renderercontextlost",this.#Z8),t.addEventListener("renderercontextrestored",this.#Q8)}}sj(){}ij(){}ej(t){}}}{const oh=self.Ws,ah=oh.vr(oh.Rect),lh=new WeakMap,uh=oh.Vs();self.hj=class extends self.K8{#rj=-1;#nj=!0;#oj=!1;#aj=!1;#lj=-.2;#uj=oh.vr(oh.Rect,0,0,-1,-1);#cj=0;#fj=0;#pj=-1;#mj=-1;#gj=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.AL.RL(uh),i=(lh.set(this,s),this.#rj=this.h5.N8(this),s.TO().dL());this.#cj=i.yj(),this.#fj=i.Sj(),this.HN(!0)}pN(){super.pN(),this.h5.W8(this.#rj),this.wj("destroy"),this.#rj=-1,lh.delete(this)}bj(){const t=lh.get(this).TO();if(t.vD())throw new Error("not valid in worker mode");return this.Mj("get-element")}wj(t,s){(s=s||{}).elementId=this.#rj,this.s4(t,s)}Mj(t,s){return(s=s||{}).elementId=this.#rj,this.e4(t,s)}vj(t,s){return(s=s||{}).elementId=this.#rj,this.i4(t,s)}xj(t){t=t||{};const s=lh.get(this).rO();t.elementId=this.#rj,t.isVisible=s.wB(),t.htmlIndex=s.nO().Gj(),t.htmlZIndex=s.Tj(),Object.assign(t,this._j()),this.#nj=!!t.isVisible,this.e4("create",t),this.Ij(!0)}Cj(t){this.#nj!==(t=!!t)&&(this.#nj=t,this.wj("set-visible",{isVisible:t}))}r4(){this.Ij(!1)}Rj(){const t=lh.get(this).TO(),s=t.dL().Aj();return"Android"===oh.di.mi&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}Ij(u){const c=lh.get(this);if(!c.Pj()){let t=c.rO(),s=t.nO(),i=t.D4(),[e,h]=s.tN(i.Ll(),i.Bl()),[r,n]=s.tN(i.Nl(),i.Wl()),o=c.TO().dL(),a=o.yL(),l=o.wL();if(t.wB()&&s.wB())if(!this.Rj()&&(r<=0||n<=0||a<=e||l<=h))this.Cj(!1);else{ah.set(e,h,r,n);const f=o.yj(),d=o.Sj(),p=s.Gj(),m=t.Tj();if(!u&&ah.equals(this.#uj)&&this.#cj===f&&this.#fj===d&&this.#pj===p&&this.#mj===m)this.Cj(!0);else{this.#uj.I(ah),this.#cj=f,this.#fj=d,this.#pj=p,this.#mj=m,this.Cj(!0);let t=null;this.#aj&&(t=s.Ej()+this.#lj),this.wj("update-position",{left:Math.round(this.#uj.Ll()),top:Math.round(this.#uj.Bl()),width:Math.round(this.#uj.width()),height:Math.round(this.#uj.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.Cj(!1)}}Fj(){this.Mj("focus",{focus:!0})}Dj(){this.Mj("focus",{focus:!1})}L8(){this.#oj=!0}B8(){this.#oj=!1}kj(){return this.#oj}Oj(t,s){this.postToDOMElement("set-css-style",{prop:oh.Zo(t),val:s})}Lj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}Bj(t){this.postToDOMElement("remove-attribute",{name:t})}Nj(){this.#gj||(this.#gj=!0,Promise.resolve().then(()=>{this.#gj=!1,this.wj("update-state",this._j())}))}_j(){}Wj(){return this.#rj}}}self.jj=class extends self.cW{constructor(){super()}};self.Vj=class extends globalThis.uW{constructor(){super()}U8(){}};{const ch=self.Ws,fh=new WeakMap,dh=ch.Vs();self.Uj=class extends self.iW{#BN=!1;#WN=!1;#Hj=!1;constructor(){super(),fh.set(this,ch.AL.RL(dh))}pN(){super.pN(),this.HN(!1),this.zN(!1),this.zj(!1),fh.delete(this)}JN(){return ch.AL.qN()}Jj(){}XN(t){const s=fh.get(this);s.TO().YN(t,s.lW(),s.oW())}$N(t){const s=fh.get(this);return s.TO().KN(t,s.lW(),s.oW())}HN(t){if(this.#BN!==(t=!!t)){this.#BN=t;const s=fh.get(this).TO();t?s.qj(this):s.Xj(this)}}n4(){return this.#BN}r4(){}zN(t){if(this.#WN!==(t=!!t)){this.#WN=t;const s=fh.get(this).TO();t?s.Yj(this):s.$j(this)}}a4(){return this.#WN}o4(){}zj(t){if(this.#Hj!==(t=!!t)){this.#Hj=t;const s=fh.get(this).TO();t?s.Kj(this):s.Zj(this)}}Qj(){return this.#Hj}tV(){}l4(){return[]}u4(){return null}c4(t){}}}{let e=self.Ks,h=null;self.FD=class{constructor(t){h=t}yO(t){h.SO(t)}w4(t,s,i){e.Re(t),e.Re(s),e.Je(i),h.sV(t,s,i)}M4(t,s,i){return e.Re(t),e.Re(s),e.Je(i),h.iV(t,s,i)}eV(t){return e.Ae(t),new self.hV(h,t)}set rV(t){h.nV(!!t)}get rV(){return h.oV()}aV(t){h.lV(!!t)}uV(t){e.we(t);const s=h.cV(t);return s?s.QL():null}}}self.hV=class{#fV;#dV;#pV;#mV;#gV;#yV;constructor(t,s){const i=(this.#fV=t).BD(),e=t.HD(),h=(this.#dV=e,this.#pV=e.SV(),t.KD()),r=(this.#mV=h.wV(),this.#gV=h.bV(e),i.MV()),n=r.bV();this.#yV=n,s&&n.vV(s),t.xV(!1)}GV(){const t=this.#fV.BD(),s=this.#pV,i=this.#yV;t.TV(s),this.#dV._V(this.#mV,this.#gV),t.IV(s),i.CV(i.rD()+1)}get RV(){return this.#yV.AV()}release(){const t=this.#fV,s=t.KD(),i=t.BD().MV();t.xV(!0),i.PV(),s.PV()}};{let d=self.Ws,h=self.Ks,p=null,r=null;self.EV=class{constructor(t,s){r=t,p=s}FV(){p.wP()}DV(t){p.yP(t)}kV(){p.yw()}OV(){p.lw()}LV(){p.Tw()}setColor(t){p.cP(t[0],t[1],t[2],t[3])}BV(t,s,i,e){p.cP(t,s,i,e)}NV(){p.dP()}WV(t){p.fP(t)}jV(t){p.Jw(t)}VV(){p.qw()}rect(t){p.vP(t.left,t.top,t.right,t.bottom)}UV(t,s,i,e){p.vP(t,s,i,e)}HV(t){p.du(d.du.Eu(t))}zV(t,s,i,e,h,r,n,o){p.Pb(t,s,i,e,h,r,n,o)}JV(t,s){p.eb(d.du.Eu(t),d.Rect.Vl(s))}qV(t,s){p.TP(d.du.Eu(t),d.du.Eu(s))}XV(t,s,i,e,h,r,n,o,a,l,u,c,f){p._P(t,s,i,e,h,r,n,o,a,l,u,c,d.Rect.Vl(f))}YV(t,s,i,e,h,r,n,o,a,l,u,c,f){p.Zw(t,s,i,e,h,r,n,o,a,l,u,c,d.du.Eu(f))}$V(t,s,i){p.IP(t,s,i)}KV(t){p.Ab(t)}line(t,s,i,e){p.Zm(t,s,i,e)}ZV(t,s,i,e,h,r){p.Qw(t,s,i,e,h,r)}QV(t,s,i,e){p.hb(t,s,i,e)}tU(t){p.ab(d.Rect.Vl(t))}sU(t){p.lb(d.du.Eu(t))}iU(t){p.gb(t)}eU(){p.yb()}hU(t){p.Mb(t)}rU(){p.Tb()}nU(t){h.ah(t,self.oU);const s=t?r.q5(t):null;p.mP(s)}aU(t,s){const i=self.xO.vO(t);if(i)return i.lU(p,{Xv:s?.Xv??"clamp-to-edge",Yv:s?.Yv??"clamp-to-edge",$v:s?.$v??"trilinear",Qv:s?.Qv??!0});throw new Error("invalid IImageInfo")}uU(t){const s=self.xO.vO(t);if(!s)throw new Error("invalid IImageInfo");s.iC()}EW(t){const s=self.xO.vO(t);if(!s)throw new Error("invalid IImageInfo");const i=s.Gx();return self.oU.cU(r,i)}fU(t,s,i){h.Te(t),h.Te(s);const e=p.lx(t,s,{Xv:i?.Xv??"clamp-to-edge",Yv:i?.Yv??"clamp-to-edge",$v:i?.$v??"trilinear",Qv:i?.Qv??!0});return self.oU.cU(r,e)}dU(t,s,i){h.oh(s,self.oU);const e=r.q5(s);p.uR(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.oh(t,self.oU);const s=r.q5(t);p.yx(s)}pU(){const t=p.Jb();return new self.mU(r,t)}gU(){r.dL().yU(p)}SU(t){h.oh(t,globalThis.J5);const s=r.q5(t);s.wU(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.oU=class{constructor(t,s){ph.set(this,{runtime:t,bU:s}),mh.set(s,this),t.XL(this,s),Object.defineProperties(this,{width:{value:s.Lm(),writable:!1},height:{value:s.qm(),writable:!1}})}static cU(t,s){if(!s)return null;const i=mh.get(s);return i||new self.oU(t,s)}}}{let e=function(t){return yh.get(t).MU};e;const gh=self.Ks,yh=new WeakMap;self.mU=class{constructor(t,s){yh.set(this,{runtime:t,MU:s}),t.XL(this,s)}release(){e(this).Gr()}set vU(t){gh.Re(t),e(this).uC(t)}get vU(){return e(this).fI()}set xU(t){gh.Te(t),e(this).cC(t)}get xU(){return e(this).fC()}set lineHeight(t){gh.Te(t),e(this).pC(t)}get lineHeight(){return e(this).mC()}set GU(t){e(this).gC(t)}get GU(){return e(this).yC()}set TU(t){e(this).SC(t)}get TU(){return e(this).wC()}setColor(t){gh.He(t),this._U(t[0],t[1],t[2])}_U(t,s,i){e(this).GC(t,s,i)}IU(t){gh.Re(t),e(this).LM(t)}set CU(t){e(this).TC(t)}get CU(){return e(this)._C()}set verticalAlign(t){e(this).IC(t)}get verticalAlign(){return e(this).CC()}set RU(t){e(this).RC(t)}get RU(){return e(this).AC()}set AU(t){e(this).PC(t)}get AU(){return e(this).EC()}set text(t){gh.Re(t),e(this).Af(t)}get text(){return e(this).FC()}P5(t,s,i){gh.Te(t),gh.Te(s),gh.Te(i),e(this).DC(t,s,i)}PW(){const{runtime:t,MU:s}=yh.get(this),i=s.Gx();return self.oU.cU(t,i)}FW(){return e(this).cR().jl()}PU(t){gh.Ze(t),e(this).hC=t}EU(){e(this).iC()}get FU(){return e(this).OC()}get DU(){return e(this).BC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return wh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.Ws,Sh=new Set(["local","remote"]),wh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.kU=class extends d.br{constructor(t,s){super();const i=s.exportType,e=(this._f=t,this.OU="folders",this.LU=new Map,this.BU="cordova"===i,this.NU=!!s.isiOSCordova,this.WU=!!s.isFileProtocol,this.jU=s.swClientId,this.VU=s.supportedAudioFormats||{},this.UU=new Map,this.HU=!1,this.zU=s.scriptFolder,this.JU="",this.qU="",this.XU="",this.YU=s.fileMap||new Map,this.$U=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.KU=e?"remote":"local",this.ZU=new Map,this.QU=[],this.tH=[],this.sH=!1,this.iH=0,this.eH=0,this.hH=0,this.rH=!1,this.nH=d.vr(d.Ud,()=>this.oH(),50),this.aH=d.vr(d.Dd,Math.max(d.hardwareConcurrency,8)),this.lH=d.vr(d.Dd,20),this.uH=new self.wO(this)}Gr(){for(const t of this.ZU.values())t.Gr();this.ZU.clear(),d.$n(this.tH),this._f=null}TO(){return this._f}cH(t){this.OU=t}FO(){return this.OU}fH(){return this.zU}dH(t){this.JU=t}OO(){return this.JU}pH(t){this.qU=t}mH(){return this.qU}gH(t){this.XU=t}yH(){return this.XU}SH(){return this.WU}Oo(t,s){return s=s||this.KU,d.Po(t)?("flat"===this.OU&&(t=t.toLowerCase()),this.BU&&this.WU?this.wH(t):"playable-ad-single-file"===this._f.lL()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.aH:this.lH).Ac(()=>d.Oo(t))):d.Oo(t)}Lo(t){return d.Po(t)?("flat"===this.OU&&(t=t.toLowerCase()),this.BU&&this.WU?this.bH(t):"playable-ad-single-file"===this._f.lL()?d.No(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.KU?this.aH:this.lH).Ac(()=>d.Lo(t))):d.Lo(t)}Do(t){return d.Po(t)?("flat"===this.OU&&(t=t.toLowerCase()),this.BU&&this.WU?this.MH(t):"playable-ad-single-file"===this._f.lL()?d.Wo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.KU?this.aH:this.lH).Ac(()=>d.Do(t))):d.Do(t)}async ko(t){const s=await this.Do(t);return JSON.parse(s)}vH(t,s){return"flat"===this.OU&&(t=t.toLowerCase()),this._f.pO("runtime","cordova-fetch-local-file",{filename:t,as:s})}MH(t){return this.vH(t,"text")}async wH(t){const s=await this.vH(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async xH(t){"flat"===this.OU&&(t=t.toLowerCase());let s=this.LU.get(t);if(!s){const i=await this.wH(t);s=URL.createObjectURL(i),this.LU.set(t,s)}return s}bH(t){return this.vH(t,"buffer")}DO(t){"flat"===this.OU&&(t=t.toLowerCase());let s=this.JU+t;return"Gecko"===d.di.bi&&"preview"===this._f.lL()?this.GH(s):s}PO(t){return d.Ao(t)?Promise.resolve(t):this.BU&&this.WU?this.xH(t):"playable-ad-single-file"===this._f.lL()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.OU&&(t=t.toLowerCase()),Promise.resolve(t))}TH(s){if(d.Ao(s)||"preview"!==this._f.lL()||!this.jU||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.jU),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}_H(t){return this.PO(t)}IH(t){if(t.CH&&!Sh.has(t.CH))throw new Error("invalid load policy");let s=this.ZU.get(t.url);return s||(s=d.vr(d.RH,this,{url:t.url,size:t.size||0,CH:t.CH||this.KU}),this.ZU.set(s.AH(),s),this.sH)||(this.iH+=s.Gc(),this.tH.push(s.PH().then(()=>this.EH(s.Gc())))),s}FH(t){this.ZU.delete(t.AH())}async DH(){try{await Promise.all(this.tH),this.hH=1}catch(t){console.error("Error loading: ",t),this.rH=!0,this.oH()}}kH(){this.sH=!0}OH(){return this.rH}EH(t){this.eH+=t,this.nH.s1()}oH(){const t=d.vr(d.Event,"loadingprogress");this.hH=d.Rr(this.eH/this.iH,0,1),t.progress=this.hH,this._f.r0().dispatchEvent(t)}Fk(){return this.hH}kk(){return this._f.BH().LH()}NH(t){d.eo(this.QU,t),this.QU.length&&this.tH.push(this.WH())}async WH(){const t=[],s=[];for(const[i,e,h]of this.QU)this.iH+=h,t.push(this.jH(i,e,s).then(()=>this.EH(h)));await Promise.all(t),this._f.vD()&&0<s.length&&await this._f.pO("runtime","load-webfonts",{webfonts:s})}async jH(s,i,e){try{let t=await this.PO(i);"Gecko"===d.di.bi&&(s=`'${s}'`),("Gecko"===d.di.bi&&"preview"===this._f.lL()||"playable-ad-single-file"===this._f.lL())&&(t=this.GH(t));const h=new FontFace(s,`url('${t}')`);(this._f.vD()?self:document).fonts.add(h),await h.load(),this._f.vD()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}VH(t){return!!this.VU[t]}UH(t,s){this.HU=!!s;for(const[i,e,h]of t)this.UU.set(i,{fileName:i,HH:e.map(t=>({type:t[0],zH:t[1],JH:i+t[1],fileSize:t[2]})),isMusic:h})}qH(t){"flat"===this.OU&&(t=t.toLowerCase());const s=this.UU.get(t);if(!s)return null;let i=null;for(const e of s.HH)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.VH(e.type))return e;return i}XH(t){const s=this.qH(t);return s?{url:this.DO(s.JH),type:s.type}:null}YH(){if(this.HU){const t=[];for(const s of this.UU.values())if(!s.isMusic){const i=this.qH(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.DO(i.JH),type:i.type,fileSize:i.fileSize})}return t}return[]}$H(t){return"preview"===this._f.lL()&&(t=new URL(t,location.href).toString()),this.YU.get(t)||null}GH(t){let s=this.$U.get(t);if(!s){const i=this.$H(t);if(!i)return t;s=URL.createObjectURL(i),this.$U.set(t,s)}return s}aD(){return this.uH}async NO(...t){const s=await Promise.all(t.map(t=>this.PO(t)));if(this._f.vD())if(1===t.length){const i=t[0];await import((d.Po(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d.Po(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async jO(t){if(WebAssembly.compileStreaming){const s=await this.PO(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Lo(t);return WebAssembly.compile(i)}}async UO(t){const s=await this.PO(t);return this._f.pO("runtime","add-stylesheet",{url:s})}}}{const bh=self.Ws;bh.KH=class extends bh.br{constructor(t,s){super(),this.ZH=t,this._f=t.TO(),this.QH=s.url||"",this.t7=s.size,this.s7=s.CH,this.i7=s.blob||null,this.e7=!!this.i7,this.gy=null}Gr(){this.gy=null,this.ZH=null,this._f=null,this.i7=null}AH(){return this.QH}Gc(){return this.t7}PH(){return"local"===this.s7||this.i7?(this.e7=!0,Promise.resolve()):(this.gy||(this.gy=this.ZH.Oo(this.QH,this.s7).then(t=>(this.e7=!0,this.gy=null,this.i7=t)).catch(t=>{console.error("Error loading resource: ",t),this.gy=null})),this.gy)}h7(){return this.e7}r7(){return this.i7?Promise.resolve(this.i7):this.gy||this.ZH.Oo(this.QH,this.s7)}}}{const ar=self.Ws,lr=new ar.Dd,ur=new Set;ar.RH=class extends ar.KH{constructor(t,s){super(t,s),this.n7=null,this.o7=null,this.L1=0,this.a7=-1,this.l7=-1,ur.add(this)}Gr(){if(0!==this.L1)throw new Error("released image asset which still has texture references");this.ZH.FH(this),this.n7=null,ur.delete(this),super.Gr()}static u7(){for(const t of ur)t.n7=null,t.o7=null,t.L1=0}lU(t,s){return s=s||{},this.L1++,this.o7?Promise.resolve(this.o7):(this.n7||(s.Kv=this._f.dL().c7(),this.n7=this.f7(t,s)),this.n7)}async f7(s,i){try{const e=await this.r7();return 0===this.L1?this.n7=null:await lr.Ac(async()=>{const t=await s.ZP(e,i);return this.n7=null,0===this.L1?(s.yx(t),null):(this.o7=t,this.a7=t.Lm(),this.l7=t.qm(),this.o7)})}catch(t){throw console.error("Failed to load texture: ",t),t}}iC(){if(this.L1<=0)throw new Error("texture released too many times");if(this.L1--,0===this.L1&&this.o7){const t=this.o7.gM();t.yx(this.o7),this.o7=null}}d7(){return this.L1}Gx(){return this.o7}Lm(){return this.a7}qm(){return this.l7}async p7(){const t=await this.r7();return ar.Hi.ImageBitmap?createImageBitmap(t):ar.Vo(t)}}}{let t=function(t,s){return t.rO().m7()-s.rO().m7()};t;const cr=self.Ws;cr.g7=class extends cr.br{constructor(t,s,i){super(),this.y7=t,this.pl=s,this.ml=i,this.S7=[],this.w7=!0,this.b7=new Set,this.M7=!1}Gr(){cr.$n(this.S7),this.b7.clear(),this.y7=null}_0(){cr.$n(this.S7),this.w7=!0,this.b7.clear(),this.M7=!1}v7(){this.w7=!1}Mc(){if(this.S7.length){if(this.S7.length>this.b7.size)return!1;this.x7()}return!0}G7(t){this.b7.has(t)?(this.b7.delete(t),0===this.b7.size&&(this.M7=!1)):(this.S7.push(t),this.w7=1===this.S7.length)}B0(t){this.b7.add(t),this.M7=!0,50<=this.b7.size&&this.x7()}x7(){this.M7&&(this.S7.length===this.b7.size?this._0():(cr.lo(this.S7,this.b7),this.b7.clear(),this.M7=!1))}T7(){this.w7||(this.S7.sort(t),this.w7=!0)}_7(t){this.x7(),this.T7(),this.S7.length&&t.push(this.S7)}}}{const fr=self.Ws;fr.I7=class extends fr.br{constructor(t,s){super(),this.C7=t,this.R7=s,this.A7=fr.vr(fr.yc)}Gr(){this.A7.Gr(),this.A7=null}P7(t,s,i){let e=this.A7.ni(t,s);return e||(i?(e=fr.vr(fr.g7,this,t,s),this.A7.Set(t,s,e),e):null)}E7(t){return Math.floor(t/this.C7)}F7(t){return Math.floor(t/this.R7)}D7(e,h,r){if(h)for(let i=h.Ll(),t=h.Nl();i<=t;++i)for(let t=h.Bl(),s=h.Wl();t<=s;++t)if(!r||!r.lu(i,t)){const n=this.P7(i,t,!1);n&&(n.B0(e),n.Mc())&&this.A7.vc(i,t)}if(r)for(let i=r.Ll(),t=r.Nl();i<=t;++i)for(let t=r.Bl(),s=r.Wl();t<=s;++t)h&&h.lu(i,t)||this.P7(i,t,!0).G7(e)}k7(t,s){let i=this.E7(t.Ll()),e=this.F7(t.Bl()),h=this.E7(t.Nl()),r=this.F7(t.Wl());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.P7(i,t,!1);n&&n._7(s)}}O7(t){let s=t.Ll(),i=t.Bl(),e=t.Nl(),h=t.Wl();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.P7(s,t,!1);r&&r.v7()}}}}{let n=function(t,s){return t.rO().m7()-s.rO().m7()},t=function(t,s){return t.rO().ZM()-s.rO().ZM()};n,t;const w=self.Ws,dr=new w.Rect,pr=new w.du,mr=[],gr=(new w.Rect,new w.Rect,self.xs),Gh=gr.Ps,Vh=gr.Es,xh=gr.Is,yr=xh.create(),Sr=Gh.create(),wr=Vh.create(),br=Gh.create(),Mr=Gh.create(),vr=Gh.create(),xr=w.vr(w.dl),Gr=(w.vr(w.Rect),[]),Tr=[],_r=[],Ir={name:"",sid:-1,L7:!1,isVisible:!0,isInteractive:!0,vB:!1,backgroundColor:[1,1,1,1],BB:!0,B7:[1,1],opacity:1,jB:!1,N7:!1,W7:!1,j7:!1,scaleRate:1,hF:0,LB:0,V7:[],U7:[],H7:[]};w.z7=class extends w.br{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.J7=t,this._f=t.TO(),this.q7=s,this.Ir=i.name,this.Iy=-1,this.X7=!!i.vB,this.Y7=-1,this.K7=i.sid,this.Z7=!!i.L7,this.Q7=!!i.isVisible,this.sz=!!i.isInteractive,this.iz=w.vr(w.ea),this.iz.el(i.backgroundColor),this.ez=!!i.BB,this.hz=i.B7[0],this.rz=i.B7[1],this.FM=w.vr(w.ea,1,1,1,i.opacity),this.nz=w.vr(w.ea),this.oz=!!i.jB,this.az=!!i.N7,this.lz=!!i.W7,this.uz=!!i.j7,this.cz=i.scaleRate,this.EM=i.hF,this.fz=null,this.pz=1,this.DM=i.LB,this.mz=0,this.gz=0,this.yz=0,this.Sz=!1,this.KR=w.vr(w.Rect),this.wz=w.vr(w.Rect),this.bz=w.vr(w.Rect),this.Mz=!0,this.Q2=xh.create(),this.vz=!0,this.H3=xh.create(),this.xz=!0,this.Gz=w.vr(w.Dy.By),this.Tz=!0,this._z=[],this.Iz=i.V7,this.Cz=[],this.Rz=[],this.Az=new Map,this.S7=[],this.Pz=!1,this.Ez=!1,this.Fz=!1;const h=this._f.dL();this.Dz=w.vr(w.kz,this,i.U7),this.sD=w.vr(w.Dy.ZE,h.Oz(),{jE:(t,s)=>{const i=s.qF(),e=i.XP();t.LM(i.Lz()),t.iE(e),t.eE(e),h.Bz(e)},UE:t=>this.C5().Nz(t)}),this.Wz=!0,this.jz=!0,this.Vz=null,this.Uz=[],this.zz=!1,this.Jz=w.vr(w.Rect,0,0,-1,-1),this.qz=w.vr(w.Rect,0,0,-1,-1),this.Xz=new self.J5(this),this.Yz(),this.$z()&&(this.Vz=w.vr(w.I7,this._f.GD(),this._f._D())),this.Kz=i.H7.map(t=>w.z7.Zz(this.J7,this,t))}Qz(){for(const t of this.Iz){const s=this._f.tJ(t[1]);this.J7.sJ(s),s.iJ()||(s.eJ(t),s.hJ(this.Iy)),this.Cz.push(t),this.Az.set(t[2],t)}w.eo(this._z,this.Cz),this.Iz=null}static Zz(t,s,i){return w.vr(w.z7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],vB:i[19],backgroundColor:i[4].map(t=>t/255),BB:i[5],B7:[i[6],i[7]],opacity:i[8],jB:i[9],N7:i[17],W7:i[18],j7:i[10],scaleRate:i[11],hF:i[12],LB:i[16],V7:i[14],U7:i[15],H7:i[20]})}Gr(){for(const t of this.Kz)t.Gr();w.$n(this.Kz);for(const s of this.S7)this._f.mN(s);w.$n(this.S7),this.Dz.Gr(),this.Dz=null,this.sD.Gr(),this.sD=null,this.Xz=null,this.q7=null,this.J7=null,this._f=null}rJ(t){return this.Az.get(t)}nJ(h){let r=this.J7.oJ(),n=0,o=this.Cz;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this._f.tJ(t[1]),i=!0;if(!s.aJ()||r){const a=this._f.lJ(t,this,!0);h.push(a),s.uJ()&&(i=!1,this.Rz.push(a.vN()))}i&&(o[n]=o[e],++n)}w.Yn(o,n),this._f._5(),this.cO()}cJ(t,s){if(!t.r5().kL())throw new Error("instance is not of world type");const i=t.rO();if(i.nO()!==this)throw new Error("instance added to wrong layer");this.S7.push(t),0!==i.ZM()&&(this.Fz=!0),s&&this.$z()&&t.rO()._4(),this.cO(t)}fJ(t){this.S7.includes(t)||(this.S7.push(t),0!==t.rO().ZM()&&(this.Fz=!0),this.cO(t))}dJ(t,s){const i=t.rO();if(i.nO()!==this)throw new Error("instance added to wrong layer");this.S7.unshift(t),0!==i.ZM()&&(this.Fz=!0),this.cO(t),s&&this.$z()&&t.rO()._4()}pJ(t,s){const i=this.S7.indexOf(t);i<0||(s&&this.$z()&&t.rO().mJ(),this.S7.splice(i,1),this.cO(t),this.gJ())}yJ(){this.Fz=!0}gJ(){0===this.S7.length&&(this.Fz=!1)}SJ(t){if(t){const s=new Set;for(const i of this.S7){const e=i.rO().m7();0<=e&&s.add(e)}let t=-1;for(const h of this.S7){const r=h.rO();if(!(0<=r.m7())){for(++t;s.has(t);)++t;r.wJ(t)}}}this.S7.sort(n)}bJ(){}MJ(){for(const t of this.S7)t.lN().uJ()||this._f.mN(t);this._f._5(),w.$n(this.S7),this.Fz=!1,this.cO()}vJ(s,t,i,e,h,r){const n=this._f.BD(),o=this._f.xJ(),a=s.GJ(),l=[];for(const u of this.Cz){const c=u[0],f=c[0],d=c[1];if(t.lu(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.TJ(p))continue}let t=h;if(!t){const y=this._f.eO();t=this.jk()===y?this:(t=y._J(this.Sf()))||y.aO(this.rD())}const m=this._f.lJ(u,t,!1,void 0,void 0,!1,r),g=(t.M5(m),m.rO());g.A4(i,e),g._4(),n.v5(!0),m.x5(),n.v5(!1),l.push(m)}}return l}S5(){return this.S7.length}jk(){return this.J7}Sf(){return this.Ir}IJ(t){this.Iy=t}rD(){return this.Iy}CJ(t){this.Y7=t}Gj(){return this.Y7}xB(){return this.X7}GB(t){this.X7!==(t=!!t)&&(this.X7=t,this.J7.RJ(),this._f.fO())}AJ(){let t=this.uB();return(t?t.dB():this.jk().PJ()).indexOf(this)}EJ(){return this.K7}TO(){return this._f}FJ(){return this.Z7}DJ(){for(const t of this.cB())if(t.FJ())return!0;return!1}GL(){return this._f.GL()}C5(){return this.Dz}hD(){return this.kJ(),this.sD}kJ(){const t=this.OJ();if(this.Wz||t!==this.jz||this.sD.z3()){const s=this.C5().LJ();this.sD.J3(s.map(t=>t.HG()),{zE:s.map(t=>t.rD()),JE:!t,KE:!0}),this.Wz=!1,this.jz=t}}mW(){this.C5().mW(),this.Wz=!0}$z(){return this.uz&&!this.lz}BJ(){return this.Vz}NJ(){this.zz=!1}wB(){for(const t of this.WJ())if(!t.gB())return!1;return!0}gB(){return this.Q7}yB(t){this.Q7!==(t=!!t)&&(this.Q7=t,this._f.fO())}MB(t){this.sz=!!t}bB(){return this.sz}_B(){for(const t of this.WJ())if(!t.bB())return!1;return!0}JB(t){if(this.Sz!==(t=!!t)){if(this.Sz=t){const s=this.jk();this.gz=s.O5(),this.yz=s.B5()}this.jJ(),this._f.fO()}}VJ(){return this.Sz}k5(t){const s=this.jk(),i=s.UJ(),e=s.HJ();this.gz!==(t=(t=e<t?e:t)<i?i:t)&&(this.gz=t,this.VJ())&&(this.jJ(),this._f.fO())}L5(t){const s=this.jk(),i=s.zJ(),e=s.JJ();this.yz!==(t=(t=e<t?e:t)<i?i:t)&&(this.yz=t,this.VJ())&&(this.jJ(),this._f.fO())}O5(){return this.VJ()?this.gz:this.jk().O5()}B5(){return this.VJ()?this.yz:this.jk().B5()}XB(){return this.qJ(),this.KR}XJ(){return this.qJ(),this.wz}YJ(){return this.qJ(),this.bz}rB(){const t=this.jk();return[t.$J(),t.KJ()]}BS(t){return this._f.BS(t)}ZJ(c,e){const h=this.XJ();if(0===c)e.I(h);else{let o=h.zl(),a=h.Jl(),t=this.QJ(c),s=h.width()/t,i=h.height()/t,[l,u]=this.rB();if(.5!==l||.5!==u){let t=this.t9(),s=this._f,i=this.BS()/t,e=(l-.5)*s.s9()/i,h=(u-.5)*s.i9()/i,r=this.GetAngle(),n=(0!==r&&(xr.set(e,h),xr.rotate(r),e=xr.Sl(),h=xr.bl()),w.zr(t,0,c));o+=w.Ot(e,0,n),a+=w.Ot(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}uP(){return this.FM._a()}fP(t){t=w.Rr(t,0,1),this.FM._a()!==t&&(this.FM.ba(t),this.Yz(),this._f.fO())}Yz(){this.nz.I(this.FM),this.nz.Oa()}Lz(){return this.nz}OJ(){return this.FM.Ea(1,1,1,1)}AB(){return this.cz}RB(t){this.cz!==t&&(this.cz=t,this.jJ(),this._f.fO())}DB(){return this.hz}OB(){return this.rz}e9(t,s){this.hz===t&&this.rz===s||(this.hz=t,this.rz=s,this.jJ(),this._f.fO())}EB(t){this.e9(t,this.OB())}kB(t){this.e9(this.DB(),t)}QM(t){this.DM!==t&&(this.DM=t,this._f.fO())}ZM(){return this.DM}D5(t){t=w.Ar(t),this.mz!==t&&(this.mz=t,this.jJ(),this._f.fO())}GetAngle(){return w.Ar(this.J7.GetAngle()+this.mz)}PB(){return this.mz}h9(){return 0<this.S7.length}lO(){return this.S7}r9(){return this.n9()&&this.lz?(w.eo(_r,this.lO()),_r.sort((t,s)=>this.o9(t,s)),_r):this.lO()}a9(t){w.rr(t,this.r9());for(const s of this.Kz)s.wB()&&0<s.uP()&&s.a9(t)}o9(t,s){const i=this.jk().l9(),e=i[0],h=i[1],r=i[2],n=t.rO(),o=s.rO(),a=n.qM()-e,l=n.$M()-h,u=n.ZM()-r,c=o.qM()-e,f=o.$M()-h,d=o.ZM()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}zB(){return this.iz}WB(){return this.ez}NB(t){this.ez!==(t=!!t)&&(this.ez=t,this._f.fO())}UB(){return this.oz}VB(t){this.oz!==(t=!!t)&&(this.oz=t,this._f.fO())}u9(){return!this.TO().c9()||!this.az}n9(){return!this.u9()}f9(){return this.n9()&&this.jk().d9()}p9(){if(!this.f9())return!1;for(const t of this.Kz)if(!t.p9())return!1;return!0}OM(t){this.EM!==t&&(this.EM=t,this._f.fO())}HB(){return this.EM}m9(){return!this.q7}uB(){return this.q7}g9(t){this.q7=t}dB(){return this.Kz}y9(){return 0<this.Kz.length}S9(t,s=!0){s?this.Kz.push(t):this.Kz.unshift(t)}w9(t,s,i){let e=this.Kz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Kz.splice(e,0,t)}b9(t){const s=this.Kz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Kz.splice(s,1)}M9(){for(const t of this.Kz)if(t.v9())return!0;return!1}*mB(){for(const t of this.Kz)yield*t.mB();yield this}*cB(){let t=this.uB();for(;t;)yield t,t=t.uB()}*WJ(){yield this,yield*this.cB()}x9(t){for(const s of this.cB())if(s===t)return!0;return!1}G9(t){return this===t||this.hz===t.hz&&this.rz===t.rz&&this.pz===t.pz&&this.cz===t.cz&&this.mz===t.mz&&this.O5()===t.O5()&&this.B5()===t.B5()}T9(){return{parallaxX:this.DB(),parallaxY:this.OB(),scale:this.CB(),scaleRate:this.AB(),angle:this.PB(),hasOwnScroll:this.VJ(),scrollX:this.O5(),scrollY:this.B5()}}_9(t){this.e9(t.parallaxX,t.parallaxY),this.IB(t.scale),this.RB(t.scaleRate),this.D5(t.angle),this.JB(t.hasOwnScroll),this.k5(t.scrollX),this.L5(t.scrollY),this.qJ()}I9(t){if(0!==t.size){const s=w.lo(this.S7,t);0<s&&(this.gJ(),this.cO())}}cO(t){this.Pz=!1,this.zz=!1,t&&!t.lN().r5().LL()||(this.Ez=!1)}C9(){if(!this.Pz){if(this.S7.sort(t),this.$z())for(let t=0,s=this.S7.length;t<s;++t){const i=this.S7[t].rO();i.wJ(t),this.Vz.O7(i.R9())}else for(let t=0,s=this.S7.length;t<s;++t)this.S7[t].rO().wJ(t);this.Pz=!0}}A9(){if(!this.Ez){let t=this.J7.P9(this.Gj()),s=t.map(t=>[...t.mB()]).flat(),i=0;for(const e of s){for(const h of e.lO())h.lN().r5().LL()&&h.rO().E9(i++);e.F9()}}}F9(){this.Ez=!0}D9(){return{isVisible:this.wB(),opacity:this.uP(),isInteractive:this.bB()}}k9(t,s,i){const e=t.rO(),h=s.rO();if(e.nO()!==this||h.nO()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.oO(),n=h.oO();return r!==n+(i?1:-1)&&(w.ho(this.S7,r),r<n&&n--,i&&n++,n===this.S7.length?this.S7.push(t):this.S7.splice(n,0,t),this.cO(t),!0)}O9(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.rO().m7()<a.rO().m7()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}L9(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.O9(h,r))}return e%2==1&&i.push(s[e-1]),i}B9(t){for(;1<t.length;)t=this.L9(t);return t[0]}N9(){return this.C9(),w.$n(mr),this.Vz.k7(this.XB(),mr),mr.length?1===mr.length?mr[0]:this.B9(mr):[]}v9(){return this.wB()&&0<this.uP()&&this.W9()}W9(){if(this.h9()||!this.WB())return!0;for(const t of this.Kz)if(t.W9())return!0;return!1}j9(){return this.UB()||!this.OJ()||0!==this.HB()||this.Dz.V9()}U9(){if(this.j9())return!0;for(const t of this.Kz)if(t.U9())return!0;return!1}XP(){return this.fz}QJ(t){if(this.J7.aB())return 1;{const s=this.H9();return s/(s-t)}}z9(t){const s=this._f.nN();if(this.J7.aB())return s;{const i=this.H9(),e=this.BS();return e/Math.abs(i-t)*s}}jJ(){this.xz=!0,this.Tz=!0,this.Mz=!0}J9(t){return this.xz&&(this.q9(t,this.H3,0,0,null),this.xz=!1),this.H3}t9(t){return this.BS(t)/this.X9()}H9(){return this.f9()?this.jk().l9()[2]:this.t9()}Y9(){if(this.f9()){const t=this.jk().l9();return[t[0],t[1],t[2]]}return this.K9()}K9(t=0,s=0,h=0){let r=this._f,i=this.jk(),e=r.Z9(),n=r.Q9(),o=(this.O5()-e)*this.hz+e,a=(this.B5()-n)*this.rz+n,l=(r.RD()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.aB()?this.BS(h):this.t9(h),[f,d]=this.rB();if(.5!==f||.5!==d){let t=this.BS(h)/c,s=(f-.5)*r.s9()/t,i=(d-.5)*r.i9()/t,e=this.GetAngle();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.Sl(),i=xr.bl()),l+=s,u+=i}return[l,u,c]}q9(t,s,i,e,h){const r=this._f,n=this.jk();if(this.f9()){Gh.I(br,n.l9()),Gh.I(Mr,n.tq()),Gh.I(vr,n.sq());const o=r.Z9(),a=r.Q9(),l=Mr[0]-br[0],u=Mr[1]-br[1],c=Mr[2]-br[2];br[0]=(br[0]-o)*this.hz+o,br[1]=(br[1]-a)*this.rz+a,br[2]*=Math.max(this.hz,this.rz),Mr[0]=br[0]+l,Mr[1]=br[1]+u,Mr[2]=br[2]+c}else{const[f,d,p]=this.K9(i,e,h),m=(Gh.set(br,f,d,p),Gh.set(Mr,f,d,p-100),this.GetAngle());0===m?Gh.set(vr,0,1,0):Gh.set(vr,Math.sin(m),Math.cos(m),0)}t.iw(s,br,Mr,vr,h||r.i9())}iq(){this.vz=!0,this.Tz=!0,this.Mz=!0}eq(t){return this.vz&&(this.hq(t),this.vz=!1),this.Q2}hq(t){const s=this._f.dL(),[i,e]=this.rB();if(this.J7.aB())t.QS(this.Q2,s.rq(),s.nq());else if(.5===i&&.5===e)xh.I(this.Q2,s.oq());else{const h=s.rq(),r=s.nq();t.KS(this.Q2,h/r,i,e)}}wU(t,s=!0,i=0,e=0,h=0){s&&t.QA(this.eq(t));let r;r=0===i&&0===e&&0===h?this.J9(t):(this.q9(t,yr,i,e,h),yr),t.rP(r)}aq(t){this.wU(t),t.Hw(this.ZM())}lq(t){let s=null;if(t.jb()&&this._f.uq()){const i=this._f.dL().cq(this);i&&(s=i.LR(),t.lE(s))}return s}fq(t){if(t.ZS()&&this._f.uq()){const s=2*(this.rD()+1);t.StartMeasuringRenderPassTime(s,1+s)}}Nv(t,s,i){let e=this._f.dL(),h=this.j9(),r=null,n=this.lq(t);if(this.fq(t),h){const o={$v:this._f.ID(),W2:!0,pq:!!t.ZS()&&this._f.mq()};"low"===e.gq()&&(o.width=e.rq(),o.height=e.nq()),r=this._f.yq(o),this.fz=r,t.tE(r),this.WB()&&t.jP(0,0,0,0)}else this.fz=s,t.tE(s);if(this.WB()||t.wc(this.iz),this.J7.Sq(t,this.fz,this.Kz,h&&this.WB()),this.fq(t),this.wU(t),t.Hw(this.ZM()),t.HP(this.n9()),this.X9()>Number.EPSILON){this.C9();const a=this.$z()&&0===this.ZM()&&!this.Fz;this.f9()?this.wq(t):a?this.bq(t):this.Mq(t,this.r9())}t.Hw(0),t.Jw(0),h&&(t.HP(!1),this.vq(t,r,s,i)),n&&t.cE(n),this.fz=null}Mq(i,e){let h=this.XB(),r=this.fz,n=this.jk().aB(),o=this.jk().xq(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).rO();u.wB()&&u.Gq(h,o,n)&&this.Tq(l,u,i,r)}}}wq(e){const h=this.fz,r=this._q(),n=Gr,o=Tr,a=this.r9();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.rO();if(u.wB()&&u.Iq(r)){(!l.Cq()||0<u.Rq())&&o.push(l);const c=l.rO().E4();n.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.rO();if(d.wB()&&d.Iq(r)){if(d.E4()!==c)break;(f.Cq()?(0<d.Rq()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].Aq()){this.Pq(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.rO();m.Eq(!0),this.Tq(p,m,e,h),m.Eq(!1)}}else{this.Tq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.rO(),S=y.nO();S.Tq(g,y,e,h)}}}s=t,w.$n(n),w.$n(o)}else++s}}Pq(i,e){const h=this.fz;i.rE();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.rO();n.Fq(!0),this.Dq(r,n,i)}i.nE();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.rO();this.Tq(o,a,i,h),a.Fq(!1)}i.aE()}bq(t){let s=this.Vz,i=this.qz,e=this.Jz,h=this.XB(),r;i.set(s.E7(h.Ll()),s.F7(h.Bl()),s.E7(h.Nl()),s.F7(h.Wl())),this.zz&&i.equals(e)?r=this.Uz:(r=this.N9(),this.zz=!0,e.I(i)),this.Mq(t,r),r!==this.Uz&&w.eo(this.Uz,r)}Tq(t,s,i,e){s.V9()?this.kq(t,s,i,e):this.Dq(t,s,i)}Dq(t,s,i){const e=s.Oq();i.Iw()!==e&&e.kM(),t.Nv(i)}kq(t,s,i,e){this.Lq(t,s,i,e,null)&&this.wU(i)}Lq(t,s,i,e,h){const r=s.G4().hD();return r.iF(i,e,{eF:t,hF:s.HB(),devicePixelRatio:this._f.Bq(),time:t.Nq(),rF:this._f.Wq()*this.X9(),nF:this.GetAngle(),IF:s.D4(),CF:r.zF()?null:this.jq(s),cF:h&&h.cF,fF:h&&h.fF,dF:h&&h.dF,pF:h&&h.pF}),i.Hw(this.ZM()),r.oP()}vq(t,s,i,e){const h=this.Dz.LJ(),r=this._f;0===h.length?(t.tE(i),t.lw(),e&&0===this.EM&&this.OJ()?t.sE(s):(t.OM(this.EM),t.LM(this.nz),t.iE(s)),t.eE(s),r.Bz(s)):this.hD().iF(t,i,{eF:this,hF:this.HB(),devicePixelRatio:r.Bq(),rF:r.Wq()*this.X9(),nF:this.GetAngle(),IF:this.XB(),CF:null,HE:!0})}CB(){return this.pz}IB(t){this.pz!==t&&(this.pz=t,this.J7.Vq(),this.jJ(),this._f.fO())}nN(){return this.X9()*this._f.nN()}Ej(){return this.X9()*this._f.Ej()}X9(){return(this.pz*this.J7.F5()-1)*this.cz+1}qJ(){if(this.Mz){this.Mz=!1;let t=this._f.Z9(),s=this._f.Q9(),i=(this.O5()-t)*this.hz+t,e=(this.B5()-s)*this.rz+s,h=this.X9(),r=this._f.s9()/h,n=this._f.i9()/h,o=i-r/2,a=e-n/2;this._f.RD()&&(o=Math.round(o),a=Math.round(a));const l=this.wz,u=(l.set(o,a,o+r,a+n),this.GetAngle()),c=(0!==u&&(dr.I(l),dr.offset(-l.zl(),-l.Jl()),pr.ku(dr,u),pr.Lu(dr),dr.offset(l.zl(),l.Jl()),l.I(dr)),this.DM);this.ZJ(c,this.KR),this.f9()?this.Uq(c,this.bz):this.bz.I(this.KR)}}Uq(t,s){let i=this._f.dL(),e=i.yL(),h=i.wL(),[r,n]=this.$B(0,0,t),[o,a]=this.$B(e,0,t),[l,u]=this.$B(e,h,t),[c,f]=this.$B(0,h,t),d=Math.min(r,o,l,c),p=Math.min(n,a,u,f),m=Math.max(r,o,l,c),g=Math.max(n,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}$B(t,s,i=0){return this.Hq(t,s,i,this.Ej())}iN(t,s,i=0){return this.Hq(t,s,i,this.nN()*this.GL())}Hq(t,s,i,e){const h=this._f,r=h.gM(),n=this.X9(),o=h.s9()/n,a=h.i9()/n,l=wr,u=(Vh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.eq(r)),c=this.J9(r),f=Sr,d=w.Dy.Ly(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}zq(t,s){const i=this.pz,e=this.cz,h=this.hz,r=this.rz,n=this.mz,o=(this.pz=1,this.cz=1,this.hz=1,this.rz=1,this.mz=0,this.jJ(),this.$B(t,s));return this.pz=i,this.cz=e,this.hz=h,this.rz=r,this.mz=n,this.jJ(),o}tN(t,s,i=0){return this.Jq(t,s,i,this.Ej())}hN(t,s,i=0){return this.Jq(t,s,i,this.nN()*this.GL())}Jq(t,s,i,e){const h=this._f,r=h.gM(),n=this.X9(),o=h.s9()/n,a=h.i9()/n,l=wr,u=(Vh.set(l,0,0,o,a),this.eq(r)),c=this.J9(r),f=Sr,d=w.Dy.ky(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}qq(t,s){return t*=this.nN()*this.GL(),0!==s&&(t*=this.QJ(s)),t}jq(t){const s=t.D4(),i=t.E4(),e=t.Rq(),l=i+e,u=s.Ll(),c=s.Bl(),f=s.Nl(),d=s.Wl();if(this.f9()){if(this.Xq(u,c,i)||this.Xq(f,c,i)||this.Xq(f,d,i)||this.Xq(u,d,i))return null;if(0<e&&(this.Xq(u,c,l)||this.Xq(f,c,l)||this.Xq(f,d,l)||this.Xq(u,d,l)))return null}else if(l>=this.t9())return null;let[p,m]=this.hN(u,c,i),[g,y]=this.hN(f,d,i);if(0!==this.GetAngle()||0<e||this.f9()){const[S,w]=this.hN(f,c,i),[b,M]=this.hN(u,d,i);if(0<e){let[t,s]=this.hN(u,c,l),[i,e]=this.hN(f,c,l),[h,r]=this.hN(f,d,l),[n,o]=this.hN(u,d,l),a=Math.min(p,g,S,b,t,i,h,n);g=Math.max(p,g,S,b,t,i,h,n),p=a,a=Math.min(m,y,w,M,s,e,r,o),y=Math.max(m,y,w,M,s,e,r,o),m=a}else{let t=Math.min(p,g,S,b);g=Math.max(p,g,S,b),p=t,t=Math.min(m,y,w,M),y=Math.max(m,y,w,M),m=t}}return dr.set(p,m,g,y),dr}_q(){return this.Tz&&(this.Yq(),this.Tz=!1),this.Gz}Yq(){const t=this._f.gM(),s=this.eq(t),i=this.J9(t);this.Gz.zy(i,s)}Xq(t,s,i){return this._q().qy(t,s,i)}$q(){const t={d:this.FJ(),s:this.CB(),a:this.PB(),v:this.gB(),i:this.bB(),html:this.xB(),bc:this.iz.toJSON(),t:this.WB(),sx:this.gz,sy:this.yz,hosp:this.Sz,px:this.DB(),py:this.OB(),c:this.FM.toJSON(),sr:this.AB(),fx:this.Dz.av(),cg:this.Rz};return t}Kq(t){this.Z7=!!t.d,this.pz=t.s,this.mz=t.a,this.Q7=!!t.v,this.sz=!t.hasOwnProperty("i")||t.i,this.X7=!!t.html,this.iz.el(t.bc),this.ez=!!t.t,t.hasOwnProperty("sx")&&(this.gz=t.sx),t.hasOwnProperty("sy")&&(this.yz=t.sy),t.hasOwnProperty("hosp")&&(this.Sz=!!t.hosp),this.hz=t.px,this.rz=t.py,this.FM.el(t.c),this.Yz(),this.cz=t.sr,w.eo(this.Rz,t.cg),w.eo(this.Cz,this._z);let i=new Set(this.Rz),e=0;for(let t=0,s=this.Cz.length;t<s;++t)i.has(this.Cz[t][2])||(this.Cz[e]=this.Cz[t],++e);w.Yn(this.Cz,e),this.Dz.lv(t.fx),this.Wz=!0}Zq(){this.SJ(!1),this.cO(),this.jJ(),this.iq()}j5(){return this.Xz}M5(t,s=!1){if(this.S7.includes(t))s&&this.S7.sort((t,s)=>{const i=t.rO().Qq(),e=s.rO().Qq();return i-e});else if(t.tX()){const i=[...t.u6()];i.push(t),i.sort((t,s)=>{const i=t.rO().Qq(),e=s.rO().Qq();return i-e});for(const e of i)if(e.bN())for(const h of e.MN())if(!i.includes(h)){const r=[...h.u6()];r.push(h),r.sort((t,s)=>{const i=t.rO().Qq(),e=s.rO().Qq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.r5().kL()&&this.cJ(n,!0)}else if(t.r5().kL()&&this.cJ(t,!0),t.bN())for(const o of t.MN()){const a=[...o.u6()];if(a.push(o),a.sort((t,s)=>{const i=t.rO().Qq(),e=s.rO().Qq();return i-e}),a&&a.length)for(const l of a)l.r5().kL()&&this.cJ(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},M=function(t,s){I!==t&&(t.aq(s),I=t)},v=(l,M,self.Ws),e=self.C3Debugger,h=(v.vr(v.Rect),v.vr(v.Rect),v.vr(v.Rect)),x=v.vr(v.ea),t=self.xs,u=t.Ps,a=[],G=[],T=[],_=[],I=null;v.sX=class extends v.br{constructor(t,s,i){super(),this.iX=t,this._f=t.TO(),this.Ir=i[0],this.eX=i[1],this.hX=i[2],this.bg=i[1],this.Mg=i[2],this.rX=!!i[3],this.nX=!!i[4],this.aX=i[5],this.lX=i[6],this.uX=i[7],this.cX=null,this.K7=i[8],this.Iy=s,this.gz=0,this.yz=0,this.pz=1,this.mz=0,this.fX=new Set,this.dX=new Set,this.pX=new Set,this.mX=[],this.gX=[],this.yX=new Map,this.SX=new Map,this.wX=[],this.bX=!1,this.MX=u.create(),this.vX=u.create(),this.xX=u.create(),this.GX=[],this.TX=[],this._X=new Map,this.IX=new Map,this.CX=-1;const h=this._f.dL();this.Dz=v.vr(v.kz,this,i[11]),this.sD=v.vr(v.Dy.ZE,h.Oz(),{jE:(t,s)=>{const i=s.qF(),e=i.XP();t.dP(),t.iE(e),t.eE(e),h.Bz(e)},UE:t=>this.C5().Nz(t)}),this.Wz=!0,this.RX=!1,this.fz=null,this.AX={},this.PX=new Map,this.EX=!0,this.FX=new self.I5(this),this.DX=v.vr(v.Event.r0);for(const e of i[9])this.GX.push(v.z7.Zz(this,null,e));this.kX();for(const r of this.H5())r.Qz();for(const n of i[10]){const o=this._f.tJ(n[1]);if(!o)throw new Error("missing nonworld object class");o.iJ()||o.eJ(n),this.wX.push(n),this.sJ(o)}}Gr(){for(const t of this.TX)t.Gr();v.$n(this.TX),this.pX.clear(),this.cX=null,this.iX=null,this._f=null}TO(){return this._f}Sf(){return this.Ir}EJ(){return this.K7}rD(){return this.Iy}C5(){return this.Dz}hD(){return this.kJ(),this.sD}kJ(){const t="low"===this._f.dL().gq();if(this.Wz||this.RX!==t||this.sD.z3()){const s=this.C5().LJ();this.sD.J3(s.map(t=>t.HG()),{zE:s.map(t=>t.rD()),qE:t,KE:!0}),this.Wz=!1,this.RX=t}}mW(){this.C5().mW(),this.Wz=!0}OX(){let i=this.TX[0].X9();for(let t=1,s=this.TX.length;t<s;++t){const e=this.TX[t];0===e.DB()&&0===e.OB()||(i=Math.min(i,e.X9()))}return i}LX(){return.5*this._f.s9()/this.OX()}BX(){return.5*this._f.i9()/this.OX()}UJ(){return this.NX()?-1/0:this.LX()}HJ(){return this.NX()?1/0:this.Lm()-this.LX()}zJ(){return this.NX()?-1/0:this.BX()}JJ(){return this.NX()?1/0:this.qm()-this.BX()}k5(t){const s=this.UJ(),i=this.HJ();this.gz!==(t=(t=i<t?i:t)<s?s:t)&&(this.gz=t,this.WX(),this._f.fO())}O5(){return this.gz}L5(t){const s=this.zJ(),i=this.JJ();this.yz!==(t=(t=i<t?i:t)<s?s:t)&&(this.yz=t,this.WX(),this._f.fO())}B5(){return this.yz}NX(){return this.rX}Vq(){this.k5(this.O5()),this.L5(this.B5());for(const t of this.TX)t.VJ()&&(t.k5(t.O5()),t.L5(t.B5()))}eB(t,s){this.aX===t&&this.lX===s||(this.aX=t,this.lX=s,this.jX()&&(this.VX(),this.WX(),this._f.fO()))}$J(){return this.aB()?.5:this.aX}KJ(){return this.aB()?.5:this.lX}xq(){const t=this.$J(),s=this.KJ();return t<0||1<t||s<0||1<s}nB(){this.nX&&(this.nX=!1,this.VX(),this.WX(),this._f.fO())}oB(){this.nX||(this.nX=!0,this.VX(),this.WX(),this._f.fO())}aB(){return this.nX}jX(){return!this.aB()}UX(t){this.bX!==(t=!!t)&&(this.bX=t,this.WX(),this._f.fO())}d9(){return this.bX}HX(t,s,i,e,h,r,n,o,a){l(this.MX,t,s,i)&&l(this.vX,e,h,r)&&l(this.xX,n,o,a)||(u.set(this.MX,t,s,i),u.set(this.vX,e,h,r),u.set(this.xX,n,o,a),this.zX())}zX(){this.WX(),this._f.fO()}l9(){return this.MX}tq(){return this.vX}sq(){return this.xX}F5(){return this.pz}E5(t){this.pz!==t&&(this.pz=t,this.WX(),this.Vq(),this._f.fO())}D5(t){t=v.Ar(t),this.mz!==t&&(this.mz=t,this.WX(),this._f.fO())}GetAngle(){return this.mz}Lm(){return this.bg}Hm(t){!isFinite(t)||t<1||(this.bg=t)}qm(){return this.Mg}Bm(t){!isFinite(t)||t<1||(this.Mg=t)}JX(){return this.cX}PJ(){return this.GX}*H5(){for(const t of this.GX)yield*t.mB()}U5(){return this.TX}qX(){return this.TX.length}nO(t){return"number"==typeof t?this.aO(t):this._J(t.toString())}aO(t){return t=v.Rr(Math.floor(t),0,this.TX.length-1),this.TX[t]}_J(t){return this._X.get(t.toLowerCase())||null}XX(t){return!!this._J(t)}YX(t){return this.IX.get(t)||null}VX(){for(const t of this.TX)t.iq()}WX(){for(const t of this.TX)t.jJ()}X5(t,s,i){if(this.XX(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.uB(),h=v.vr(v.z7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),L7:!0});this.$X(h,s,i),this.TO().fO(),this.RJ()}K5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.KX(t),this.$X(t,s,i),this.TO().fO(),this.RJ())}Q5(t){if(this.KX(t)){const s=this._f.BD();s.v5(!0),t.Gr(),s.v5(!1),this.TO().fO(),this.RJ()}}sB(){const t=new Set;for(const s of this.H5())s.FJ()&&!s.DJ()&&t.add(s);if(0!==t.size){const i=this._f.BD();i.v5(!0);for(const e of t)this.KX(e),e.Gr();i.v5(!1),this.TO().fO(),this.RJ()}}$X(s,i,e){if(2<=e)if(i){if(i===s||i.x9(s))throw new Error(`cannot move layer '${s.Sf()}' to sub-layer of itself`);i.S9(s,2===e),s.g9(i)}else 2===e?this.GX.push(s):this.GX.unshift(s),s.g9(null);else{const t=i.uB();if(t){if(i.x9(s))throw new Error(`cannot move layer '${s.Sf()}' to sub-layer of itself`);t.w9(s,i,0===e),s.g9(t)}else{let t=this.GX.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.GX.splice(t,0,s),s.g9(null)}}}KX(t){const s=t.uB();if(s)return s.b9(t),!0;if(1<this.GX.length){const i=this.GX.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.GX.splice(i,1),!0}return!1}kX(){this.TX=[...this.H5()],this._X.clear(),this.IX.clear();for(let t=0,s=this.TX.length;t<s;++t){const i=this.TX[t];i.IJ(t),this._X.set(i.Sf().toLowerCase(),i),this.IX.set(i.EJ(),i)}}ZX(){let t=0;for(const s of this.GX){for(const i of s.mB())i.CJ(t);s.xB()&&t++}}QX(){return this.GX.at(-1).Gj()+1}async RJ(){this.kX(),this.ZX(),this.CX=this.QX()}tY(){return this.CX}sY(){this.CX=-1}P9(t){const s=[];for(const i of this.GX){const e=i.Gj();if(e===t)s.push(i);else if(t<e)break}return s}T9(){return{scrollX:this.O5(),scrollY:this.B5(),scale:this.F5(),angle:this.GetAngle(),vpX:this.$J(),vpY:this.KJ()}}_9(t){this.k5(t.scrollX),this.L5(t.scrollY),this.E5(t.scale),this.D5(t.angle),this.eB(t.vpX,t.vpY)}iY(){let t=this.GX.filter(t=>t.v9())[0];for(;t;){if(!t.WB())return x.Ma(t.zB()),x.ba(1),x;if(t.j9())return x.la(0,0,0,0),x;t=t.dB().filter(t=>t.v9())[0]}return x.la(0,0,0,0),x}oJ(){return this.EX}eY(){return[...this.fX]}sJ(t){if(t.bN())for(const s of t.rY().hY())this.fX.add(s);else this.fX.add(t)}nY(){return[...this.dX]}aY(t,s){if(t===this||!s)return Promise.resolve();t&&(v.qo(this.dX,t.dX),t.dX.clear());const i=[];for(const e of this.fX)this.dX.has(e)||(i.push(e.lY(s)),this.dX.add(e));return Promise.all(i)}async uY(t){if(t.GJ())throw new Error("cannot load textures for family");const s=this._f.gM();if(s&&!s.lR()&&!this.dX.has(t)){this.dX.add(t);const i=t.lY(s);this.cY(i),await i,t.fY(),this._f.fO()}}cY(t){this.pX.add(t),t.then(()=>this.pX.delete(t)).catch(()=>this.pX.delete(t))}dY(){return Promise.all([...this.pX])}pY(t){if(t.GJ()||0<t.S5())throw new Error("cannot unload textures");const s=this._f.gM();s&&this.dX.has(t)&&(this.dX.delete(t),t.mY(s))}gY(t,s){if(t!==this&&s)for(const i of this.dX)i.uJ()||t.fX.has(i)||(i.mY(),this.dX.delete(i))}yY(){this.dX.clear()}async SY(t){const s=this._f,i=this.iX,e=s.BD(),h=(this.uX&&(this.cX=e.wY(this.uX),this.cX.bY()),i.MY(this),this.bg=this.eX,this.Mg=this.hX,this.gz=s.GD()/2,this.yz=s._D()/2,this.Vq(),this.VX(),this.WX(),this.ZX(),await this._f.dL().vY(this.QX(),!0),this.xY(t),this._f.GY(!0),this.TY(),this.EX||this._Y(),this.IY(this.mX),this.IY(this.gX),this.CY(),i.RY(),s._5(),this._f.GY(!1),this._f.AY());if(await Promise.all(h),v.$n(h),!s.PY()){for(const r of this.mX)r.EY();for(const n of this.gX)n.FY(this.yX,this.SX);for(const[o,a]of Object.entries(this.AX)){const l=this._f.cV(parseInt(o,10));l&&!l.GJ()&&l.aJ()&&v.$n(a)}for(const u of this.mX)u.DY();for(const c of this.gX)c.DY();for(const f of this.mX)f.m6()||f.kY();for(const d of this.gX)d.m6()||d.kY()}v.$n(this.mX),v.$n(this.gX),this.yX.clear(),this.SX.clear(),await Promise.all([...this.fX].map(t=>t.OY(this._f.gM()))),t&&(s.r0().dispatchEvent(new v.Event("beforefirstlayoutstart")),await s.LY(new v.Event("beforeprojectstart"))),await this.BY(new v.Event("beforeanylayoutstart")),s.r0().dispatchEvent(new v.Event("beforelayoutstart")),await this.LY(new v.Event("beforelayoutstart")),s.PY()||await s.KN(v.VY.jY.WY.NY,null,null),s.r0().dispatchEvent(new v.Event("afterlayoutstart")),await this.LY(new v.Event("afterlayoutstart")),await this.BY(new v.Event("afteranylayoutstart")),t&&(s.r0().dispatchEvent(new v.Event("afterfirstlayoutstart")),await s.LY(new v.Event("afterprojectstart"))),e.UY(i),await this.dY(),this.EX=!1}xY(t){for(const s of this._f.xJ())if(!s.GJ()&&s.kL())for(const i of s.m5()){const e=i.rO(),h=e.nO(),r=v.Rr(h.rD(),0,this.TX.length-1),n=this.TX[r];e.uO(n,!0),n.fJ(i)}if(!t)for(const o of this.TX)o.SJ(!1)}TY(){for(const t of this.TX)t.nJ(this.mX),t.bJ()}_Y(){let s=!1;for(const[t,i]of Object.entries(this.AX)){const e=this._f.cV(parseInt(t,10));if(e&&!e.GJ()&&e.aJ())for(const h of i){let t=null;if(!e.kL()||(t=h.hasOwnProperty("instJson")?this.YX(h.instJson.w.l):this.YX(h.w.l))){const r=this._f.lJ(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.lv(h.instJson):r.lv(h),s=!0,this.gX.push(r),h.hasOwnProperty("instJson")&&(this.yX.set(r,h),this.SX.set(h.index,r))}}}for(const n of this.TX)n.SJ(!0),n.cO();s&&(this._f._5(),this._f.HY())}IY(s){for(const i of s)if(i.bN()){const e=i.rO(),t=i.GN();for(const h of i.lN().rY().zY())if(h!==i.lN()){const r=h.m5();if(r.length>t)i.JY(r[t]);else{let t;t=e?this._f.lJ(h,e.nO(),!0,e.qM(),e.$M(),!0):this._f.lJ(h,null,!0,0,0,!0),this._f._5(),h.qY(),i.JY(t),s.push(t)}}}}CY(){for(const t of this.wX){const s=this._f.tJ(t[1]);s.bN()||this._f.lJ(t,null,!0)}}XY(){let i=[],e=this.wX,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this._f.tJ(r[1]);n.uJ()?n.bN()&&n.rY().YY()||i.push(this._f.lJ(r,null,!0)):(e[h]=r,++h)}v.Yn(e,h),this._f._5(),this.IY(i)}vJ(t,s,i,e,h,r,n){if(i)return i.vJ(t,s,h,r,e,n);{const o=[];for(const a of this.TX)o.push(a.vJ(t,s,h,r,e,n));return o.flat()}}async $Y(){const t=this.iX;this._f.PY()||(await this.BY(new v.Event("beforeanylayoutend")),await this.LY(new v.Event("beforelayoutend")),await this._f.KN(v.VY.jY.WY.KY,null,null),await this.LY(new v.Event("afterlayoutend")),await this.BY(new v.Event("afteranylayoutend"))),t.ZY(!0),this._f.BD().QY(),this.EX||this.t$();for(const s of this.TX)s.MJ();for(const i of this._f.xJ())if(!(i.uJ()||i.kL()||i.r5().FL()||i.GJ())){for(const e of i.m5())this._f.mN(e);this._f._5()}t.ZY(!1),t.Lk()===this&&t.MY(null)}s$(t,s){const i=t.lN().EJ().toString(),e=(this.AX.hasOwnProperty(i)||(this.AX[i]=[]),this.AX[i]),h={index:s,instJson:t.av(),sceneGraphJson:{children:[]}};e.push(h),this.PX.set(t,h)}i$(t){const s=this.PX.get(t);for(const i of t.e$()){const e=this.PX.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:v.r$.h$(i.rO())})}}t$(){this.PX.clear();let t=0;for(const s of this.TX){s.C9();for(const i of s.lO()){const e=i.lN();!e.uJ()&&e.aJ()&&(this.s$(i,t),t++)}}for(const h of this.TX)for(const r of h.lO()){const n=r.lN();!n.uJ()&&n.aJ()&&this.i$(r)}this.PX.clear()}n$(){this.AX={},this.EX=!0}XP(){return this.fz}j9(){const t=this._f,s=t.gM().jb();return"low"===t.dL().gq()||s&&t.mq()||this.Dz.V9()||s&&t.c9()}o$(t){const s=this._f.dL();if(this.j9()){t.tE(null),t.jP(0,0,0,0);const i={$v:this._f.ID(),W2:t.ZS()||this._f.mq()||this.Dz.V9(),pq:!!t.ZS()&&this._f.mq()};"low"===s.gq()&&(i.width=s.rq(),i.height=s.nq()),this.fz=this._f.yq(i)}else this.fz=null}a$(t){this._f.l$(t)&&(t.HP(!1),t.tE(null),t.lw(),t.sE(this.fz))}u$(t){this.j9()&&(t.HP(!1),this.c$(t,this.fz))}f$(t){t.tE(this.fz),t.wc(this.iY()),this._f.c9()&&t.UP();const s=this.P9(0);this.Sq(t,this.fz,s,!0),t.ZS()&&t.StartMeasuringRenderPassTime(0,1),this.u$(t),this.fz=null}d$(t,s){let i=null;this._f.l$(t)&&(i=this.fz),t.tE(i),t.jP(0,0,0,0),this._f.c9()&&t.UP();const e=this.P9(s);this.Sq(t,i,e,!0),this.a$(t),t.Db(),this._f.dL().p$(s)}Sq(t,e,s,h){const r=s.filter(t=>t.v9());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.p9()&&!n.U9()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.p9()||o.U9())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].M9()){this.m$(t,e,a),s+=a.length,v.$n(a);continue}v.$n(a)}n.Nv(t,e,h&&0===s),++s}}c$(t,s){const i=this.Dz.LJ(),e=this._f;0===i.length?(t.tE(null),t.lw(),t.sE(s),t.eE(s),e.Bz(s)):(h.set(0,0,e.s9(),e.i9()),this.hD().iF(t,null,{eF:this,hF:3,devicePixelRatio:this._f.Bq(),rF:this._f.Wq()*this.F5(),nF:this.GetAngle(),IF:h,CF:null,HE:!0}))}m$(e,h,t){t[0].WB()||(x.Ma(t[0].zB()),x.ba(1),e.wc(x)),this._f.dL(),e.HP(!0);const r=G,n=T,o=_;for(const a of t)a.C9(),a.a9(r);const s=t[0],i=s.lq(e);s.fq(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.rO(),c=u.nO();if(u.wB()&&u.Iq(c._q())){(!l.Cq()||0<u.Rq())&&o.push(l);const f=l.rO().E4();n.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.rO();if(p.wB()&&p.Iq(p.nO()._q())){if(p.E4()!==f)break;(d.Cq()?(0<p.Rq()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].Aq()){this.g$(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.rO(),y=g.nO();g.Eq(!0),M(y,e),y.Tq(m,g,e,h),g.Eq(!1)}}else{M(c,e),c.Tq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const S=o[t];if(S!==l){const w=S.rO(),b=w.nO();M(b,e),b.Tq(S,w,e,h)}}}s=t,v.$n(n),v.$n(o)}else++s}i&&e.cE(i),v.$n(r),I=null}g$(i,e,h){i.rE();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.rO(),o=n.nO();n.Fq(!0),M(o,i),o.Dq(r,n,i)}i.nE();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.rO(),u=l.nO();M(u,i),u.Tq(a,l,i,e),l.Fq(!1)}i.aE()}$q(){const t={sx:this.O5(),sy:this.B5(),s:this.F5(),a:this.GetAngle(),w:this.Lm(),h:this.qm(),ortho:this.aB(),vpX:this.$J(),vpY:this.KJ(),fv:this.EX,persist:this.AX,fx:this.Dz.av(),layers:{},dynamicLayers:[]};for(const s of this.TX)if(s.FJ()){const i=s.uB();t.dynamicLayers.push({sid:s.EJ(),name:s.Sf(),parentSid:i?i.EJ():null,siblingIndex:s.AJ(),data:s.$q()})}else t.layers[s.EJ().toString()]=s.$q();return t}Kq(t){this.gz=t.sx,this.yz=t.sy,this.pz=t.s,this.mz=t.a,this.bg=t.w,this.Mg=t.h,this.nX=!!t.ortho,t.hasOwnProperty("vpX")&&(this.aX=t.vpX),t.hasOwnProperty("vpY")&&(this.lX=t.vpY),this.EX=!!t.fv,this.AX=t.persist,this.Dz.lv(t.fx),this.Wz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.YX(e);h&&h.Kq(i)}if(t.hasOwnProperty("dynamicLayers")){this.sB(),this._f._5();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.kX(),!this.XX(l)&&!this.YX(a)){let t,s;if(null===u)t=null,s=this.GX;else{if(!(t=this.YX(u)))continue;s=t.dB()}const d=v.vr(v.z7,this,t,{name:l,sid:a,L7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({T4:d,siblingIndex:c}),d.Kq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.T4,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.RJ(),this.VX(),this.WX()}Bk(){return this.FX}DD(){return this.DX}y$(t){t.layout=this.Bk();const s=this._f,i=s.h4()&&!s.BD().G5();i&&e.StartMeasuringScriptTime(),this.DX.dispatchEvent(t),i&&e.AddScriptTime()}LY(t){return t.layout=this.Bk(),this.DX.d0(t)}BY(t){return t.layout=this.Bk(),this._f.LY(t)}S$(){this.w$(this.GX)}w$(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.Sf()),this.w$(e.dB(),s+1)}}}{const Cr=self.Ws;Cr.b$=class extends Cr.br{#fV;#M$=[];#v$=new Map;#x$=new Map;#G$=null;#T$=[];#_$=null;#I$=0;#C$=null;constructor(t){super(),this.#fV=t}Gr(){this.#fV=null,this.#G$=null,this.#_$=null,this.#C$=null,Cr.$n(this.#M$),this.#v$.clear(),this.#x$.clear(),Cr.$n(this.#T$)}Hx(t){const s=Cr.vr(Cr.sX,this,this.#M$.length,t);this.#M$.push(s),this.#v$.set(s.Sf().toLowerCase(),s),this.#x$.set(s.EJ(),s)}TO(){return this.#fV}R$(t){this.#_$=t}A$(){if(this.#_$)return this.#_$;if(this.#M$.length)return this.#M$[0];throw new Error("no first layout")}P$(t){return this.#v$.get(t.toLowerCase())||null}E$(t){return this.#x$.get(t)||null}F$(t){return t=Cr.Rr(Math.floor(t),0,this.#M$.length-1),this.#M$[t]}jk(t){return"number"==typeof t?this.F$(t):this.P$(t.toString())}Uk(){return this.#M$}MY(t){this.#G$=t}Lk(){return this.#G$}D$(t){if(this.#T$.includes(t))throw new Error("layout already running");this.#T$.push(t)}k$(t){const s=this.#T$.indexOf(t);if(-1===s)throw new Error("layout not running");this.#T$.splice(s,1)}*O$(){this.#G$&&(yield this.#G$),this.#T$.length&&(yield*this.#T$)}L$(t){return this.#G$===t||this.#T$.includes(t)}ZY(t){if(t)this.#I$++;else{if(this.#I$<=0)throw new Error("already unset");this.#I$--}}T5(){return 0<this.#I$}Jk(t){this.#C$=t}RY(){this.#C$=null}zk(){return!!this.#C$}B$(){return this.#C$}N$(){const t=this.Lk();t&&t.VX()}W$(){const t=this.Lk();t&&t.WX()}}}{const Rr=self.Ws,Ar=new RegExp("<(.+?)>","g");Rr.j$=class extends Rr.br{constructor(t){super(),this._f=t,this.V$=Rr.vr(Rr.U$),this.H$=null,this.z$=[],this.J$=new Map,this.q$=new Map,this.X$=new Map,this.Y$=[],this.$$=[],this.K$=[],this.Z$=!1,this.Q$=!1,this.tK=!1,this.sK=()=>this.iK(),this.eK=()=>this.hK(),this.rK=()=>this.nK(),this.oK=()=>this.aK(),this.lK=t=>this.uK(t.aW),this.cK=t=>this.fK(),this.dK=t=>this.pK(),this.mK=t=>this.gK(),this.yK=[],this.SK=0}Gr(){this.wK(),this.sK=null,this.eK=null,this.rK=null,this.oK=null,this.lK=null,this.dK=null;for(const t of this.z$)t.e8(),t.Gr();Rr.$n(this.z$),this.z$=null,this.V$.Gr(),this.V$=null,Rr.$n(this.Y$),this.Y$=null,Rr.$n(this.$$),this.$$=null,Rr.$n(this.K$),this.K$=null,this.J$.clear(),this.J$=null,this.q$.clear(),this.q$=null,this.X$.clear(),this.X$=null,Rr.$n(this.yK),this.yK=null,this._f=null}bK(){const t=this._f.r0();t.addEventListener("pretick",this.sK),t.addEventListener("tick2",this.eK),t.addEventListener("beforelayoutchange",this.rK),t.addEventListener("layoutchange",this.oK),t.addEventListener("instancedestroy",this.lK),t.addEventListener("beforeload",this.cK),t.addEventListener("afterload",this.dK),t.addEventListener("afterlayoutstart",this.mK)}wK(){const t=this._f.r0();t.removeEventListener("pretick",this.sK),t.removeEventListener("tick2",this.eK),t.removeEventListener("beforelayoutchange",this.rK),t.removeEventListener("layoutchange",this.oK),t.removeEventListener("instancedestroy",this.lK),t.removeEventListener("beforeload",this.cK),t.removeEventListener("afterload",this.dK),t.removeEventListener("afterlayoutstart",this.mK)}Hx(t){this.V$.Ac(t);const s=Rr.vK.MK(t,this);this.Ac(s),this.xK(s),this.X$.set(s.Sf(),0)}GK(t){const s=this.TK(),i=t._N(),e=s.ni(i),h=Rr.vK.GK(i+":"+this.X$.get(i),e,this);return this._K(i),this.Ac(h),h}_K(t){this.X$.set(t,this.X$.get(t)+1)}IK(){for(const t of this.z$)if(!t.CK()){const s=t._N();this._K(s)}}RK(){for(const t of this.X$.keys())this.X$.set(t,0)}Ac(t){this.z$.push(t),this.J$.set(t.Sf().toLowerCase(),t)}B0(t){t.AK(),t.CK()||(Rr.ro(this.z$,t),Rr.ro(this.Y$,t),Rr.ro(this.$$,t),Rr.ro(this.K$,t),this.J$.delete(t.Sf().toLowerCase()),this.PK(t),t.s8())||t.Gr()}YN(t){this._f.YN(t,this.H$,null)}TO(){return this._f}TK(){return this.V$}EK(t){this.H$=t}FK(){return this.H$}*DK(){for(const t of this.z$)yield t}*kK(){for(const t of this.$$)yield t}LK(t,s){this.q$.has(t)||this.q$.set(t,new Set),this.q$.get(t).add(s)}xK(t){for(const s of t.BK())this.LK(s,t)}PK(t){for(const[s,i]of this.q$.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.q$.delete(s)}NK(t){if(this.q$.has(t))return this.q$.get(t)}WK(t,s){if(s)for(const i of this.z$){const e=s.every(t=>i.jK(t.aW,t.trackId));if(e&&i.Sf().includes(t.Sf()))return i}}VK(t){return this.J$.get(t.toLowerCase())||null}UK(t){for(const s of this.Y$)if(s.Sf()===t)return s;for(const i of this.$$)if(i.Sf()===t)return i;return null}*HK(i){if(Ar.test(i)){Ar.lastIndex=0;let t,s=new Set;do{if(t=Ar.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.VK(r);n&&(yield n)}s.clear()}else{const t=this.VK(i);t&&(yield t)}}*zK(t){for(const s of this.z$)s.r8(t)&&(yield s)}JK(t){this.Y$.includes(t)||this.Y$.push(t),this.qK()}XK(t){Rr.ro(this.$$,t),this.YK()}$K(t){this.$$.includes(t)?(t.KK(!0),t.ZK(!1),t.QK(!1)):(t.KK(!1),t.ZK(!0),t.QK(!1),this.Y$.includes(t)||this.Y$.push(t)),this.qK()}tZ(t){t.KK(!1),t.ZK(!1),t.sZ(),Rr.ro(this.Y$,t),this.YK()}iZ(t){t.KK(!1),t.ZK(!1),this.$$.includes(t)&&(t.QK(!0),this.K$.push(t),Rr.ro(this.$$,t)),this.Y$.includes(t)&&t.QK(!0)}eZ(t){t.KK(!1),t.ZK(!1),t.QK(!1),t.d8(1),Rr.ro(this.$$,t)}hZ(t){this.iZ(t),t.sZ()}iK(){if(!this.TO().PY()&&this.Z$&&!this.Q$){for(this.tK=!0;this.Y$.length;){const t=this.Y$.pop();(t.rZ()?(t.nZ(),this.K$):(t.oZ(),this.$$)).push(t),0!==t.aZ()&&(this.SK=1)}const s=this._f.lZ(),i=this._f.uZ(),e=this._f.pk();for(let t=this.$$.length-1;0<=t;t--){const h=this.$$[t];h&&h.cZ(s,e,i)}this.tK=!1,0!==this.SK&&this.TO().fO()}}hK(){if(!this.TO().PY()&&this.Z$&&!this.Q$){let i;for(let t=0,s=this.K$.length;t<s;t++){const e=this.K$[t];i=i||new Set,e.AK(),this.fZ(e),i.add(e)}if(i){Rr.lo(this.K$,i);for(let t=this.SK=0,s=this.$$.length;t<s;t++)if(0!==this.$$[t].aZ()){this.SK=1;break}}this.YK()}}fZ(t){t.s8()||t.dZ()&&t.pZ()&&t.mZ()&&t.gZ()}qK(){this.Z$||(this.Z$=!0)}YK(){this.K$.length||this.$$.length||this.Y$.length||this.tK||(this.Z$=!1)}nK(){for(this.Q$=!0;this.Y$.length;)this.tZ(this.Y$.pop());const t=new Set;for(const s of this.$$){const i=s.nK();i&&(s.AK(),t.add(s))}Rr.lo(this.$$,t),t.clear();for(const e of this.K$){const h=e.nK();h&&(e.AK(),t.add(e))}Rr.lo(this.K$,t),this.YK();for(const r of this.z$)r.yZ()}aK(){this.Q$=!1}uK(t){const s=t.lN(),i=this.NK(s);if(i)if(this._f.PY())this.yK.push(t);else for(const e of i)e.CK()||(e.s8()?this.B0(e):e.dZ()||(this.fZ(e),this.B0(e)))}fK(){for(const t of this.Y$.map(t=>t))this.fZ(t),this.B0(t);for(const s of this.$$.map(t=>t))this.fZ(s),this.B0(s)}pK(){for(const t of this.yK)this.uK(t);Rr.$n(this.yK);for(const s of this.z$)s.pK()}gK(){const t=this._f.Wk(),s=t.Lk();if(s)for(const i of this.z$){const e=i.SZ();e&&s.Sf()===e&&this.$K(i)}}$q(){return{timelinesJson:this.wZ(),scheduledTimelinesJson:this.bZ(),playingTimelinesJson:this.MZ(),markedForRemovalTimelinesJson:this.vZ(),hasRuntimeListeners:this.Z$,changingLayout:this.Q$,isTickingTimelines:this.tK}}Kq(t){t&&(this.RK(),this.xZ(t.timelinesJson),this.GZ(t.scheduledTimelinesJson),this.TZ(t.playingTimelinesJson),this._Z(t.markedForRemovalTimelinesJson),this.Z$=!t.hasRuntimeListeners,this.Q$=!!t.changingLayout,this.tK=!!t.isTickingTimelines,this.IK(),this.qK(),this.YK())}wZ(){return this.z$.map(t=>t.$q())}xZ(t){for(const s of t){let t=this.VK(s.name);if(t)t.Kq(s);else{const i=this.IZ(s);if(!i)continue;const e=this.VK(i);(t=this.GK(e)).Kq(s)}t.CZ()||this.B0(t)}}IZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}bZ(){return this.RZ(this.Y$)}GZ(t){this.AZ(t,this.Y$)}MZ(){return this.RZ(this.$$)}TZ(t){this.AZ(t,this.$$)}vZ(){return this.RZ(this.K$)}_Z(t){this.AZ(t,this.K$)}PZ(t,s){if(s)for(const i of s)if(i===t.Sf())return!0;return!1}RZ(t){return t.map(t=>t.Sf())}AZ(t,s){const i=new Set;for(const e of s)this.PZ(e,t)||i.add(e);if(Rr.lo(s,i),t)for(const h of t){const r=this.VK(h);if(r){const n=s.find((s=>t=>t.Sf()===s)(h));n||s.push(r)}}}}}{const Pr=self.Ws,Er=[0,0],Fr=[0,0],Dr=[0,0],kr=[0,0,0,0,0],Or=new Array(4),Lr=[{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0},{x:0,y:0,t:0,At:0}],Br={x:0,y:0,t:0,At:0};Pr.EZ=class{constructor(t,s){this.FZ=!1,this.DZ=t,this.kZ=[];let i=null;if(i=s?this.DZ.OZ(s):Pr.first(this.DZ.LZ())){const e=i.P8("offsetX"),h=i.P8("offsetY");if(e&&h){this.BZ=e,this.NZ=h;const r=e.WZ(),n=h.WZ();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.jZ(),o.VZ()),l=n[t],u=(l.jZ(),l.VZ());a&&"cubic-bezier"===a.UZ()&&u&&"cubic-bezier"===u.UZ()?this.kZ.push(Pr.vr(Pr.HZ,a,u,o,l,this.kZ.length)):(a&&"line"===a.UZ()&&u&&u.UZ(),this.kZ.push(Pr.vr(Pr.zZ,o,l,this.kZ.length)))}this.FZ=!0}}}Gr(){for(const t of this.kZ)t.Gr();Pr.$n(this.kZ),this.kZ=null,this.DZ=null,this.BZ=null,this.NZ=null}JZ(){return this.FZ}qZ(){return this.kZ}XZ(t){const s="relative"===this.BZ.YZ()?t.qM():0,i="relative"===this.NZ.YZ()?t.$M():0;for(const e of this.kZ)e.XZ(s,i)}ky(s,i,t){let e=NaN,h=this.kZ.length;for(let t=0;t<h;t++){const r=this.kZ[t];if("cubic-bezier"===r.qG()){const n=r.ky(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Dr[0]=n[2],Dr[1]=r.rD())}}return Dr}$Z(s,i,t){const e=t.KZ;Pr.Se(e[0])||(e[0]=0),Pr.Se(e[1])||(e[1]=1);let h=NaN,r=this.kZ.length;for(let t=0;t<r;t++){const n=this.kZ[t];if("cubic-bezier"===n.qG()){const o=n.ZZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Dr[0]=o[2],Dr[1]=n.rD())}}return Dr}QZ(t,s){return this.kZ[s].QZ(t)}tQ(t,s){return this.kZ[s].tQ(t)}},Pr.HZ=class{constructor(t,s,i,e,h){this.Iy=h;const r=t.sQ("cubic-bezier"),n=i.sQ("cubic-bezier"),o=s.sQ("cubic-bezier"),a=e.sQ("cubic-bezier");this.iQ=t.eQ(),this.hQ=s.eQ(),this.rQ=t.eQ()+r.nQ(),this.oQ=s.eQ()+o.nQ(),this.aQ=i.eQ()+n.lQ(),this.uQ=e.eQ()+a.lQ(),this.cQ=i.eQ(),this.fQ=e.eQ(),this.dQ=0,this.pQ=0,this.mQ=0,this.gQ=0,this.yQ=0,this.SQ=0,this.wQ=0,this.bQ=0,this.MQ=0,this.vQ=0,this.xQ=0,this.GQ=0,this.TQ=0,this._Q=0,this.IQ=0,this.CQ=0,this.RQ=0,this.AQ=0,this.PQ=0,this.EQ=0,this.FQ=NaN,this.FZ=!1,this.DQ=100,this.kQ=new Array(this.DQ+1),this.kQ[0]=0,this.OQ=0,this.LQ=[],this.BQ=[];for(let t=0;t<100;t++)this.BQ.push({x:0,y:0,t:0,At:0});this.NQ()}Gr(){Pr.$n(this.kQ),this.kQ=null,Pr.$n(this.LQ),this.LQ=null,Pr.$n(this.BQ),this.BQ=null}qG(){return"cubic-bezier"}rD(){return this.Iy}WQ(){return Math.floor(this.OQ/25)}jQ(){return 1/this.WQ()}XZ(t,s){this.VQ=t,this.UQ=s,this.kQ=new Array(this.DQ+1),this.kQ[0]=0,this.NQ(),this.dQ=this.iQ+this.VQ,this.pQ=this.hQ+this.UQ,this.mQ=this.rQ+this.VQ,this.gQ=this.oQ+this.UQ,this.yQ=this.aQ+this.VQ,this.SQ=this.uQ+this.UQ,this.wQ=this.cQ+this.VQ,this.bQ=this.fQ+this.UQ,this.MQ=3*(this.mQ-this.dQ),this.vQ=3*(this.gQ-this.pQ),this.xQ=3*(this.yQ-this.mQ),this.GQ=3*(this.SQ-this.gQ),this.TQ=3*(this.wQ-this.yQ),this._Q=3*(this.bQ-this.SQ),this.IQ=3*(this.mQ-this.dQ),this.CQ=3*(this.dQ+this.yQ-2*this.mQ),this.RQ=this.wQ-this.dQ+3*(this.mQ-this.yQ),this.AQ=3*(this.gQ-this.pQ),this.PQ=3*(this.pQ+this.SQ-2*this.gQ),this.EQ=this.bQ-this.pQ+3*(this.gQ-this.SQ)}Map(t){if(!this.FZ)return NaN;const s=this.HQ(t);return Fr[0]=this.zQ(s),Fr[1]=this.JQ(s),Fr}ky(t,s){const i=this.qQ(100),e=this.XQ(t,s,i),h=this.YQ(t,s,i,e);return kr[0]=h.x,kr[1]=h.y,kr[2]=h.t,kr[3]=h.At,kr}ZZ(t,s,i){const e=this.qQ(100),h=this.$Q(t,s,e,i),r=this.YQ(t,s,e,h);return kr[0]=r.x,kr[1]=r.y,kr[2]=r.t,kr[3]=r.At,kr}QZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.MQ+e*this.xQ+h*this.TQ,n=i*this.vQ+e*this.GQ+h*this._Q,o=Pr.Fr(r,n);return Er[0]=r/o,Er[1]=n/o,Er}tQ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.MQ+e*this.xQ+h*this.TQ,n=i*this.vQ+e*this.GQ+h*this._Q;return Math.atan2(n,r)}HQ(h){if(this.FZ){let t=h*this.kQ[this.DQ],s=0,i=this.DQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.kQ[e]<t?s=e+1:i=e;this.kQ[e]>t&&e--;const r=this.kQ[e];return r===t?e/this.DQ:(e+(t-r)/(this.kQ[e+1]-r))/this.DQ}}zQ(t){return this.FZ?self.Fc.Xc("cubicbezier")(t,this.iQ+this.VQ,this.rQ+this.VQ,this.aQ+this.VQ,this.cQ+this.VQ):NaN}JQ(t){return this.FZ?self.Fc.Xc("cubicbezier")(t,this.hQ+this.UQ,this.oQ+this.UQ,this.uQ+this.UQ,this.fQ+this.UQ):NaN}qQ(s){if(!(this.LQ.length>=(s=s||100))){this.LQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.IQ*i,n=this.CQ*e,o=this.RQ*h,a=this.AQ*i,l=this.PQ*e,u=this.EQ*h,c=this.dQ+r+n+o,f=this.pQ+a+l+u;this.BQ[t].x=c,this.BQ[t].y=f,this.BQ[t].t=i,this.BQ[t].At=0,this.LQ[t]=this.BQ[t]}}return this.LQ}XQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.FQ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.At=o*o+a*a,n.At<h&&(h=n.At,r=t)}else{for(let t=this.FQ;t<this.FQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.At=u*u+c*c,l.At<h&&(h=l.At,r=t)}for(let t=this.FQ;t>this.FQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.At=d*d+p*p,f.At<h&&(h=f.At,r=t)}}return this.FQ=r}$Q(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.FQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.At=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.At<r&&(r=o.At,n=t)}else{for(let t=this.FQ;t<this.FQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.At=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.At<r&&(r=u.At,n=t)}for(let t=this.FQ;t>this.FQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.At=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.At<r&&(r=d.At,n=t)}}return this.FQ=n}YQ(n,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;Or[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.IQ*f,g=this.CQ*d,y=this.RQ*p,S=this.AQ*f,w=this.PQ*d,b=this.EQ*p,M=this.dQ+m+g+y,v=this.pQ+S+w+b,x=M-n,G=v-o,T=x*x+G*G;if(T<c){c=T,l=t,Br.x=M,Br.y=v,Br.t=f,Br.At=T,u=Br;break t}const _=Lr[t-1];_.x=M,_.y=v,_.t=f,_.At=T,Or[t]=_}Or[3]=a[i],a=Or}while(t++<20);return u}NQ(){this.FZ=!0;let s=this.zQ(0),i=this.JQ(0),e=0;for(let t=1;t<=this.DQ;t++){const h=this.zQ(.01*t),r=this.JQ(.01*t),n=s-h,o=i-r;e+=Pr.Fr(n,o),this.kQ[t]=e,s=h,i=r}this.OQ=e}},Pr.zZ=class{constructor(t,s,i){this.Iy=i,this.KQ=t.eQ(),this.ZQ=s.eQ(),this.VQ=0,this.UQ=0}Gr(){}qG(){return"line"}rD(){return this.Iy}XZ(t,s){this.VQ=t,this.UQ=s}qM(){return this.KQ+this.VQ}$M(){return this.ZQ+this.UQ}}}{const b=self.Ws;b.vK=class extends b.br{constructor(t,s,i){super(),this._f=i.TO(),this.QQ=i,this.ttt=s,this.Ir=t,this.stt=[],this.itt=0,this.ett=null,this.htt=0,this.ntt(),this.ott=null,this.att=null,this.ltt=0,this.utt=0,this.ctt=1,this.ftt=0,this.dtt=1,this.ptt=!1,this.mtt=!1,this.gtt=!1,this.ytt=!0,this.Stt=!1,this.wtt=!1,this.btt=-1,this.Mtt=!1,this.vtt=!1,this.xtt=!1,this.Gtt=!1,this.Ttt=NaN,this._tt=[""],this.Itt="",this.Ctt=!1,this.SK=0,this.Rtt=0,this.Att=null}static MK(t,s){const i=s.TK(),e=i.Ptt(),h=i.ni(t[e]),r=b.vr(b.vK,t[e],h,s);return r.Ett(!0),r}static GK(t,s,i){return b.vr(b.vK,t,s,i)}Gr(){if(!this.s8()){const t=this._f.r0();this.QQ.tZ(this),this.QQ.hZ(this);for(const s of this.stt)s.Gr();b.$n(this.stt),this.stt=null,this._f=null,this.QQ=null,this.ttt=null,this.Stt=!0,this.ott=null,this.att=null,this.Ftt(t)}}Ftt(t){const s=b.vr(b.Event,"timelinestatereleased");s.Dtt=this,t.dispatchEvent(s)}qG(){return 0}ntt(){for(const t of this.ttt.Ott().ktt())this.itt=this.stt.push(b.Ltt.Hx(this,t))}Btt(){return this.QQ}TO(){return this._f}LZ(){return this.stt}Ntt(e,h,r,n){if(this.Rtt){let i;for(let s=0;s<this.stt.length;s++){let t=this.stt[s];if(e===t.G8()){const o=t.P8(r);o&&h.constructor===o.Wtt().constructor&&o.YZ()===n.YZ()&&(i=i||[]).push(o)}}return i}}CZ(){return!!this.stt.length}OZ(t){for(const s of this.stt)if(b.Gh(s.C8(),t))return s;return null}jtt(t){for(const s of this.stt)if(!s.Vtt()&&b.Gh(s.Sf(),t))return s;return null}vV(t){this.Ir=t}Sf(){return this.Ir}Utt(){return this.ttt}_N(){return this.ttt.Sf()}a8(){return this.ttt.a8()}o8(t){this.ttt.o8(t)}Htt(){return this.ttt.Htt()}ztt(t){this.ttt.ztt(t)}Jtt(){return this.ttt.Jtt()}qtt(t){this.ttt.qtt(t)}YZ(){return this.ttt.YZ()}Xtt(t){this.ttt.YZ(t)}x8(t){for(const s of this.LZ())s.x8(t)}u8(){return this.ttt.u8()}l8(t){return this.ttt.l8(t)}f8(){return this.ttt.f8()}c8(t){return this.ttt.c8(t)}MW(){return this.ttt.MW()}Ytt(t){return this.ttt.Ytt(t)}d8(t){return this.ctt=t}p8(){return this.ctt}SZ(){return this.ttt.SZ()}$tt(){return this.ttt.$tt()}Ktt(){return this.ttt.Ktt()}Ztt(){return this.ftt}Qtt(){return!this.IsPlaying()||0<this.ctt}g8(){return this.ott||(this.ott=new Promise(t=>{this.att=t})),this.ott}sZ(){this.ott&&(this.att(),this.ott=null,this.att=null)}tst(t){this._tt=b.vK.sst(t),this.Ctt=!0}m8(){return this._tt}ist(){return this.Ctt&&(this.Itt=this._tt.join(" ")),this.Ctt=!1,this.Itt}r8(t){if(!this._tt)return!1;if(!this._tt.length)return!1;const s=b.vK.sst(t);return!!s&&!!s.length&&s.every(b.vK.est,this)}hst(){b.VY.Timeline&&this.constructor===b.vK&&(b.VY.Timeline.WY.PushTriggerTimeline(this),this.QQ.YN(b.VY.Timeline.WY.OnTimelineStarted),this.QQ.YN(b.VY.Timeline.WY.OnTimelineStartedByName),this.QQ.YN(b.VY.Timeline.WY.OnTimelineStartedByTags),this.QQ.YN(b.VY.Timeline.WY.OnAnyTimelineStarted),b.VY.Timeline.WY.PopTriggerTimeline())}rst(){this.btt=this._f.nst()}gZ(){this.xtt||(this.xtt=!0,b.VY.Timeline&&this.constructor===b.vK&&(b.VY.Timeline.WY.PushTriggerTimeline(this),this.QQ.YN(b.VY.Timeline.WY.OnTimelineFinished),this.QQ.YN(b.VY.Timeline.WY.OnTimelineFinishedByName),this.QQ.YN(b.VY.Timeline.WY.OnTimelineFinishedByTags),this.QQ.YN(b.VY.Timeline.WY.OnAnyTimelineFinished),b.VY.Timeline.WY.PopTriggerTimeline()))}KK(t){this.ptt=t}ost(){return this.btt===this._f.nst()}IsPlaying(t=!1){return!!this.ost()||!(!this.ast()||t)||this.ptt}lst(){return this.IsPlaying(!0)}S8(){return this.ust()}ust(){return!(this.s8()||this.ast()||this.lst()||this.pZ())}ZK(t){this.mtt=t}ast(){return this.mtt}cst(t){this.ytt=t;const s=this.NE();(s<=0||s>=this.a8())&&(this.ytt=!0)}pZ(){return this.ytt}s8(){return this.Stt}QK(t){this.wtt=t}rZ(){return this.wtt}fst(t){this.Mtt=t}dst(){return this.Mtt}Ett(t){this.vtt=!!t}CK(){return this.vtt}mZ(){return this.gtt}NE(){return this.ltt}n8(t){const s=this.NE();this.pst(t),this.cst(!1),this.pZ()||this.fst(!0),!this.lst()&&!this.ast()&&this.gtt||(this.lst()||this.ast()||this.gtt?this.lst()?this.e8():this.ast()&&(this.QQ.tZ(this),this.mst()):this.mst()),this.gst(),this.yst(this.NE(),!1,!0,!0,s),this.Sst(),this.SK&&this.TO().fO(),this.wst()}pst(t){(t=b.Se(t)?t:this.a8())<0?this.ltt=0:t>=this.a8()?this.ltt=this.a8():this.ltt=t}bst(t){(t=b.Se(t)?t:this.a8())<0?this.ltt=0:t>=this.a8()?this.ltt=this.a8():this.ltt=t;for(const s of this.stt)s.Mst()}wst(){b.VY.Timeline&&this.constructor===b.vK&&(b.VY.Timeline.WY.PushTriggerTimeline(this),this.QQ.YN(b.VY.Timeline.WY.OnTimeSet),this.QQ.YN(b.VY.Timeline.WY.OnTimeSetByName),this.QQ.YN(b.VY.Timeline.WY.OnTimeSetByTags),b.VY.Timeline.WY.PopTriggerTimeline())}vst(){if(!this.u8())if(this.f8()&&1===this.ftt){if(this.Qtt()){if(this.NE()>=this.a8())return!1}else if(this.NE()<=0)return!1}else if(!this.u8()&&!this.f8())if(this.Qtt()){if(this.NE()>=this.a8())return!1}else if(this.NE()<=0)return!1;return!0}h8(){this.s8()||this.vst()&&this.Play(!0)}Play(t=!1){return!this.s8()&&!this.ast()&&(this.lst()&&this.ost()?this.xst():!this.lst()&&!!(this.pZ()||t||this.dst())&&this.Gst())}xst(){return this.fst(!1),this.QQ.XK(this),this.QQ.$K(this),this.g8(),!0}Gst(){return this.fst(!1),this.QQ.$K(this),this.g8(),!0}e8(t=!1){this.s8()||(this.cst(t),this.QQ.iZ(this),this.pZ()&&this.sZ())}_0(t=!0,s=!1){if(!this.s8()){if(!this.lst()&&this.ast())return this.QQ.tZ(this);if(!this.pZ()){this.e8(!0),this.Qtt()?this.pst(0):this.pst(this.a8());const i=this.NE();this.gst(),s?this.Tst(i):this.yst(i,!1,!1,!0),t&&this.wst(),this.Sst(),this.SK&&t&&this.TO().fO()}}}_st(){this._0(!1,!0)}Tst(t){this.yst(t,!1,!1,!0,NaN,!1,!0)}nK(){if(!this.s8()){if(!this.TO().PY()&&this.Ist())return!1;this.QQ.eZ(this),this.TO().PY()||this._st()}return!0}mst(){this.oZ(!0)}nZ(){this.oZ(!1,!0),this.KK(!1),this.ZK(!1)}oZ(t=!1,s=!1){if(!this.rZ()||s){if(t){this.xtt=!1,this.gtt=!0,this.Gtt=!0,this.gst();for(const i of this.stt)i.oZ()}else if(this.KK(!0),this.ZK(!1),this.hst(),this.pZ()){this.btt=-1,0!==this.ftt&&(this.ctt=Math.abs(this.ctt)),this.ftt=0,this.dtt=1,this.ytt=!1,this.xtt=!1,this.gtt=!0,this.Gtt=!0,this.Qtt()?this.pst(0):this.pst(this.a8()),this.gst();for(const e of this.stt)e.oZ()}else{this.Gtt=!0,this.xtt=!1,this.gst();for(const h of this.stt)h.Cst()}this.Sst()}}aZ(){return this.SK}gst(){this.Rtt=0;for(const t of this.stt)t.PR()&&(this.Rtt=1)}Sst(){this.SK=0;for(const t of this.stt)t.Rst(),0===this.SK&&1===t.aZ()&&(this.SK=1),this.ett||1!==t.Ast()||(this.ett||(this.ett=[]),this.htt=this.ett.push(t))}cZ(t,s,i){if(this.Ktt()){if(0===t&&0===this.Ttt)return;this.Ttt=t,t=i}else{if(0===i&&0===this.Ttt)return;t=this.Ttt=i,s=1}const e=this.ltt+this.utt,h=t*s*this.ctt,r=e+h,n=this.ttt.Pst;r<0?(this.ltt=0,this.utt=-r):n<=r?(this.ltt=n,this.utt=this.ltt-r):(this.ltt=r,this.utt=0);let o=!1,a=!1,l=this.u8(),u=this.f8();l||u?l&&!u?0<this.ctt?this.ltt>=n&&(this.bst(0),a=!0):this.ltt<=0&&(this.bst(n),a=!0):!l&&u?0<this.ctt?this.ltt>=n&&(this.pst(n),this.d8(-1*this.p8()),a=!0,1===this.ftt?this.dtt<this.MW()?(this.dtt++,this.ftt=0):o=!0:0===this.ftt&&(this.ftt=1)):this.ltt<=0&&(this.pst(0),this.d8(-1*this.p8()),a=!0,1===this.ftt?this.dtt<this.MW()?(this.dtt++,this.ftt=0):o=!0:0===this.ftt&&(this.ftt=1)):l&&u&&(0<this.ctt?this.ltt>=n&&(this.pst(n),this.d8(-1*this.p8()),a=!0,this.ftt++,b.wrap(this.ftt,0,2)):this.ltt<=0&&(this.pst(0),this.d8(-1*this.p8()),a=!0,this.ftt++,b.wrap(this.ftt,0,2))):0<this.ctt?this.ltt>=n&&(this.dtt<this.MW()?(this.dtt++,this.bst(0),a=!0):(this.pst(n),o=!0)):this.ltt<=0&&(this.dtt<this.MW()?(this.dtt++,this.bst(n),a=!0):(this.pst(0),o=!0));let c,f=this.itt;if(o){for(c=0;c<f;c++)this.stt[c].Est();this.e8(!0),this.rst()}else{const d=this.htt;for(c=0;c<d;c++)this.ett[c].Fst();if(1===this.Rtt)for(c=0;c<f;c++){const p=this.stt[c],m=p.Dst(),g=this.ltt-m,y=e-m;g<0&&0<y?(this.ltt=m<0?0:n<=m?n:m,p.rf(m,!0,!1,a,this.Gtt,!1)):p.rf(this.ltt,!0,!1,a,this.Gtt,!1)}else for(c=0;c<f;c++)this.stt[c].rf(this.ltt,!0,!1,a,this.Gtt,!1);for(c=0;c<d;c++)this.ett[c].kst();this.Gtt&&(this.Gtt=!1)}}yst(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.stt)o.Fst();for(const a of this.stt){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.NE(),u=l-a.Dst(),c=r-a.Dst();u<0&&0<c&&(t=a.Dst(),this.pst(t))}a.rf(t,i,e,h,this.Gtt,n)}for(const f of this.stt)f.kst();this.Gtt&&t&&(this.Gtt=!1)}Ost(){const t=this.ttt.Ott().Lst(),s=b.Ltt.Hx(this,t);return this.itt=this.stt.push(s),s}AK(){if(!this.s8())for(const t of this.stt)t.Bst()}yZ(){for(const t of this.stt)t.yZ()}Nst(){for(const t of this.stt)t.Wst()}jst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.stt[i];return e?(e.Vst(s),void this.QQ.LK(s.lN(),this)):void 0}for(const h of this.stt)if(h.Vtt())if(t){if(h.C8()===t){h.Vst(s),this.QQ.LK(s.lN(),this);break}}else if(!h.Ust()){h.Vst(s),this.QQ.LK(s.lN(),this);break}}}jK(t,s){for(const i of this.stt)if(i.Vtt())if(s){if(s===i.C8()&&t===i.G8())return!0}else if(t===i.G8())return!0;return!1}dZ(){return this.stt.some(t=>!t.Vtt()||t.Hst())}Ist(){return this.stt.some(t=>{if(t.Vtt()){if(!t.Hst())return!1;const s=t.lN();return!!s&&s.uJ()}return!1})}P8(t){for(const s of this.LZ())for(const i of s.zst())if(i.Jst()===t)return i}qst(t){for(const s of this.stt)if(t===s.G8())return s;return null}Xst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.LZ())for(const h of e.Yst()){const r=s.every(t=>h.$st(t));if(r)return h}}BK(){const t=[];for(const s of this.LZ())t.push(s.lN());return t.filter(t=>t)}pK(){for(const t of this.LZ())t.pK()}$q(){return{tracksJson:this.Kst(),name:this.Ir,playheadTime:this.NE(),playbackRate:this.ctt,pingPongState:this.ftt,currentRepeatCount:this.dtt,isPlaying:this.ptt,isScheduled:this.mtt,initialStateSet:this.gtt,finishedTriggers:this.xtt,complete:this.ytt,released:this.Stt,markedForRemoval:this.wtt,completedTick:this.btt,implicitPause:this.Mtt,isTemplate:this.vtt,tags:this._tt.join(" "),stringTags:this.Itt,tagsChanged:this.Ctt,firstTick:this.Gtt}}Kq(t){t&&(this.Zst(t.tracksJson),this.Ir=t.name,this.ltt=t.playheadTime,this.ctt=t.playbackRate,this.ftt=t.pingPongState,this.dtt=t.currentRepeatCount,this.ptt=!!t.isPlaying,this.mtt=!!t.isScheduled,this.gtt=!!t.initialStateSet,this.xtt=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.ytt=!!t.complete,this.Stt=!!t.released,this.wtt=!!t.markedForRemoval,this.btt=t.completedTick,this.Mtt=!!t.implicitPause,this.vtt=!!t.isTemplate,this._tt=t.tags.split(" "),this.Itt=t.stringTags,this.Ctt=!!t.tagsChanged,this.Gtt=!!t.firstTick)}Kst(){return this.stt.map(t=>t.$q())}Zst(t){this.Nst(),t.forEach((t,s)=>{const i=this.stt[s];i.Kq(t)}),this.stt.filter(t=>t.Hst())}static est(t){const s=this.m8();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static sst(t){if(b.Ue(t))return t.slice(0);if(b.Ce(t))return t.split(" ");throw new Error("invalid tags")}Qst(){return this.Att||(this.Att=b.vr(self.b8,this)),this.Att}}}{const Nr=self.Ws;Nr.Ltt=class extends Nr.br{constructor(t,s){super(),this.DZ=t,this.tit=s,this.sit=s.Ott(),this.iit=NaN,this.eit=NaN,this.hit=null,this.rit=null,this.nit=!1,this.TR=0<s.Dst(),this.oit=!1,this.ait=!1,this.lit=NaN,this.uit=null,this.cit=this.tit.dit().fit(),this.pit=[],this.mit(),this.git=0,this.SK=0,this.yit=0}static Hx(t,s){return Nr.vr(Nr.Ltt,t,s)}Gr(){this.cit=null;for(const t of this.pit)t.Gr();Nr.$n(this.pit),this.pit=null,this.DZ=null,this.hit=null,this.rit=null,this.tit=null,this.uit=null}mit(){for(const t of this.tit.wit().Sit())this.pit.push(Nr.bit.Hx(this,t))}Bst(){for(const t of this.pit)t.Bst()}yZ(){for(const t of this.pit)t.yZ();this.hit=null,this.rit=null}Mit(){return this.DZ}TO(){return this.DZ.TO()}Yst(){return this.cit||(this.cit=this.tit.dit().fit()),this.cit}zst(){return this.pit}P8(s){for(let t=0;t<this.pit.length;t++){const i=this.pit[t];if(i.Jst()===s)return i}}vit(){this.hit||this.G8()}xit(){return!!this.hit&&!this.hit.Pj()}Hst(){if(!this.Vtt())return!1;const t=this.Git(),s=this.TO().tO(t);return!!s&&!s.Pj()}lN(){if(this.Vtt()){const t=this.Tit();if(-1!==t)return this.TO().tJ(t)}}_it(){return this.DZ.LZ().indexOf(this)}Wst(){this.hit=null,this.iit=NaN,this.rit=null,this.eit=NaN,this.nit=!0}Ust(){return!!this.hit}G8(){if(!this.nit){if(!this.hit||!this.xit()){const t=this.Git();this.hit=this.TO().tO(t)}return this.hit}}Vst(t){if(this.nit=!1,this.hit!==t){this.yZ(),this.hit=t,this.eit=t.lN().rD(),this.iit=t.vN(),this.rit=t.rO();for(const s of this.Iit()){const i=s.Cit,e=s.Rit,h=i.Ait();switch(h){case"instance-variable":{e.Pit();const r=t.lN(),n=r.Eit(s.name),o=r.Fit(n),a=r.Dit(n);o===s.name&&a===s.type&&e.kit(n);break}case"behavior":{const l=s.rW,u=this.lN(),c=t.lN(),f=e.oW(c);if(l&&f){const d=l.Sf();u.Oit(d),c.Oit(d),e.Pit(),e.Lit(f.EJ())}break}}}}}*Iit(){for(const t of this.pit){const s=t.Wtt(),i=this.lN(),e={Cit:t,Rit:s};switch(t.Ait()){case"world-instance":e.property=t.Jst();break;case"instance-variable":{const h=s.Pit();e.name=i.Fit(h),e.type=i.Dit(h);break}case"effect":{const r=i.C5(),n=s.Bit(r);e.Nit=n;break}case"behavior":{const o=s.oW(i);e.rW=o;break}case"plugin":e.h5=i.r5()}yield e}}rO(){if(!this.rit||!this.xit()){const t=this.G8();t&&(this.rit=t.rO())}return this.rit}Wit(){return this.tit}Git(){return isNaN(this.iit)?this.tit.Git():this.iit}jit(t){this.tit.jit(t)}Jtt(){return this.tit.Jtt()}qtt(t){this.tit.qtt(t)}YZ(){return this.tit.YZ()}C8(){return this.tit.C8()}Dst(){return this.tit.Dst()}Vit(){return this.tit.Vit()}Uit(t){this.tit.Uit(t)}Xtt(t){this.tit.Xtt(t)}x8(t){for(const s of this.Yst())s.x8(t);for(const i of this.zst())i.x8(t)}Hit(){return this.tit.Hit()}zit(t){this.tit.zit(t)}Tit(){return isNaN(this.eit)?this.tit.Tit():this.eit}Jit(t){this.tit.Jit(t)}qit(t){this.tit.qit(t)}Xit(){const t=this.G8();if(t){const s=t.K6();if(s.Yit())return t.K6().Xit()}return this.tit.Xit()}$it(t){this.tit.$it(t)}Kit(){const t=this.G8();if(t){const s=t.K6();if(s.Yit())return t.K6().Kit()}return this.tit.Kit()}qG(){return this.tit.qG()}Sf(){return this.tit.Sf()}Vtt(){return 0===this.qG()}Zit(){return 1===this.qG()}Qit(){return 2===this.qG()}tet(){return this.git}aZ(){return this.SK}Ast(){return this.yit}PR(){return this.TR}Mst(){for(const t of this.pit)t.Mst()}oZ(){if(this.vit(),this.xit()||!this.Vtt()){const t=this.Mit(),s=t.Qtt(),i=s?0:this.Vit();for(const h of this.pit)h.oZ(i),0===this.git&&1===h.tet()&&(this.git=1),0===this.SK&&1===h.aZ()&&(this.SK=1);this.yit=0;const e=this.pit.some(t=>t.Ast());e&&(this.yit=1),this.uit=this.iet(i),this.oit=!1,this.ait=!1,this.rf(i),this.eet(this.iet(i))}}Cst(){if(this.vit(),this.xit()||!this.Vtt()){this.DZ.Qtt();const t=this.DZ.NE()-this.Dst();this.uit=this.iet(t);for(const s of this.pit)s.Cst(t)}}Est(){if(!this.Mit().pZ()&&(this.vit(),this.xit()||!this.Vtt())&&!this.TR){const t=this.DZ.NE(),s=this.Dst()+this.Vit();s<=t?this.rf(this.Vit(),!0,!1,!0,!1,!1,!0):t<=0&&this.rf(0,!0,!1,!0,!1,!1,!0)}}Rst(){for(let t=0,s=this.pit.length;t<s;t++){const i=this.pit[t];i.Rst(),0===this.git&&1===i.tet()&&(this.git=1),0===this.SK&&1===i.aZ()&&(this.SK=1)}}Fst(){const s=this.pit.length;for(let t=0;t<s;t++)this.pit[t].Fst()}rf(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.hit||this.G8();const o=this.hit&&!this.hit.Pj(),a=0===this.tit.Df;if((o||!a)&&!(r&&a&&this.lN().uJ()||(i-=this.Dst())<0)){this.het(i,t),this.ret(i,t,s);for(let t=0,s=this.pit.length;t<s;t++)this.pit[t].rf(i,e,h,n);this.net(i,t),0!==this.git&&(this.rit||(this.rit=this.hit.rO()),this.rit)&&this.rit._4()}}kst(){const s=this.pit.length;for(let t=0;t<s;t++)this.pit[t].kst()}het(t,s){if(s&&this.TR&&!this.oit){const i=this.Mit();if(i.Qtt()){if(t<0)return}else if(t>this.Vit())return;for(const e of this.pit)e.oZ();this.oit=!0}}net(t,s){if(s&&this.TR&&!this.ait){const i=this.Mit();if(i.Qtt()){if(t>=this.Vit()){for(const e of this.pit)e.rf(this.Vit(),!1,!0);this.ait=!0}}else if(t<=0){for(const h of this.pit)h.rf(0,!1,!0);this.ait=!0}}}ret(t,s,i){if(!i&&s&&Nr.VY.Timeline){const e=this.Mit(),h=this.uit.jZ(),r=this.uit.NE(),n=h?h.NE():e.a8();if(t<=r||n<=t)if(this.uit=this.sit.oet(t,this.tit),e.Qtt())h&&this.eet(this.uit);else{const o=this.uit.jZ();o&&this.eet(o)}}}iet(t){const s=this.sit.aet(t,this.tit);return s||this.sit.oet(t,this.tit)}eet(t){if(Nr.VY.Timeline){const s=this.Mit(),i=s.Btt();Nr.VY.Timeline.WY.PushTriggerTimeline(s),Nr.VY.Timeline.WY.PushTriggerKeyframe(t),i.YN(Nr.VY.Timeline.WY.OnAnyKeyframeReached),i.YN(Nr.VY.Timeline.WY.eet),Nr.VY.Timeline.WY.PopTriggerTimeline(s),Nr.VY.Timeline.WY.PopTriggerKeyframe(t)}}let(){const t=this.tit.dit(),s=t.uet();return s}cet(){const t=this.tit.wit(),s=t.fet(),i=Nr.bit.Hx(this,s);return this.pit.push(i),i}det(t){const s=this.tit.dit();s.pet(t)}met(t){for(const s of this.pit)s.met(t)}yet(){for(const t of this.pit)t.yet()}wet(){if(this.vit(),this.xit()||!this.Vtt())for(const t of this.pit)t.wet()}bet(){if(this.vit(),this.xit()||!this.Vtt()){let t=!1;for(const s of this.pit){const i=s.bet();!t&&i&&(t=!0)}if(t){const e=this.let();e.n8(this.Mit().NE()),e.x8("noease"),e.zit(!0),e.tst("")}}}pK(){isNaN(this.lit)||this.Met(this.lit),this.lit=NaN}$q(){const t=this.G8(),s=t?t.vN():this.Git();return{propertyTracksJson:this.vet(),lastKeyframeDataItemJson:this.xet(),initialStateOfNestedSet:this.oit,endStateOfNestedSet:this.ait,instanceUid:s,cleared:this.nit}}Kq(t){if(t){this.Get(t.propertyTracksJson),this.Tet(t.lastKeyframeDataItemJson),this.lit=t.instanceUid,this.oit=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.oit=t.initialStateOfNestedSet),this.ait=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.ait=t.endStateOfNestedSet),this.nit=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.pit)0===this.git&&1===s.tet()&&(this.git=1),0===this.SK&&1===s.aZ()&&(this.SK=1);this.yit=0,this.pit.some(t=>t.Ast())&&(this.yit=1)}}xet(){const t=this.tit.dit();return t._et(this.uit)}vet(){return this.pit.map(t=>t.$q())}Get(t){t.forEach((t,s)=>{const i=this.pit[s];i.Kq(t)})}Met(t){if(Nr.Se(t)){const s=this.TO().tO(t);if(s){const i=this.Mit();i.jst(this.tit.C8(),s,this._it())}}}Tet(t){const s=this.tit.dit();this.uit=s.Iet(t)}}}{const Wr=self.Ws;Wr.bit=class extends Wr.br{constructor(t,s){super(),this.Cet=t,this.Ret=s,this.Aet=s.wit(),this.git=0,this.SK=0,this.yit=0,this.Pet=this.Wtt(),this.Eet=this.Ret.Det().Fet(),this.ket=null,this.Oet=null}static Hx(t,s){return Wr.vr(Wr.bit,t,s)}Gr(){this.Cet=null,this.Pet&&(this.Pet.Gr(),this.Pet=null),this.Eet=null,this.Ret=null,this.Aet=null}tet(){return this.git}aZ(){return this.SK}Ast(){return this.yit}Let(){return!!this.Oet}Bet(t){this.Oet=t}Net(){return this.Oet}Wet(){return this.Cet}jet(){return this.Ret}wit(){return this.Aet}Mit(){return this.Cet.Mit()}TO(){return this.Cet.TO()}G8(){return this.Cet.G8()}Wtt(){if(!this.Pet){let t=this.Ret.Ait(),s;switch(t){case"behavior":s=new Wr.bit.Vet(this);break;case"effect":s=new Wr.bit.Uet(this),this.SK=1;break;case"instance-variable":s=new Wr.bit.Het(this);break;case"plugin":s=new Wr.bit.zet(this),this.SK=1;break;case"world-instance":s=new Wr.bit.Jet(this),this.SK=1,this.git=1;break;case"value":s=new Wr.bit.qet(this);break;case"audio":s=new Wr.bit.Xet(this)}this.Pet=s}return this.Pet}Ait(){return this.Ret.Ait()}Yet(t){this.Ret.Yet(t)}$et(){return this.Ret.Ket()}Zet(t){this.Ret.Qet(t)}A8(){return this.Wtt().tht()}Jst(){return this.Ret.sht()}iht(t){this.Ret.eht(t)}hht(){return this.Ret.qG()}rht(t){this.Ret.SetType(t)}nht(){return this.wit().oht(this.Ret).qG()}aht(){return this.Ret.aht()}lht(t){this.Ret.lht(t)}uht(){return this.Ret.uht()}cht(t){this.Ret.cht(t)}Hit(){return this.Ret.Hit()}zit(t){this.Ret.zit(t)}Jtt(){return this.Ret.Jtt()}qtt(t){this.Ret.qtt(t)}YZ(){return this.Ret.YZ()}Xtt(t){this.Ret.Xtt(t)}x8(t){for(const s of this.fht())s.x8(t)}dht(){return this.Ret.dht()}fht(){return this.Eet||(this.Eet=this.Ret.Det().Fet()),this.Eet}WZ(){return this.Ret.Det().WZ()}pht(t){return this.Aet.pht(t,this.Ret)}mht(t){return this.Aet.mht(t,this.Ret)}ght(t){let s=this.Aet.pht(t,this.Ret),i;return i=s?this.Aet.yht(t,this.Ret):(s=this.Aet.mht(t,this.Ret),this.Aet.Sht(t,this.Ret)),{start:s,end:i}}*wht(){for(const t of this.fht())yield t.eQ()}*bht(){for(const t of this.fht())yield t.NE()}Bst(){this.Wtt().Bst()}yZ(){this.Wtt().yZ()}Mht(){return this.Wtt().Mht()}Mst(){this.Wtt().Mst()}oZ(t){this.Wtt().oZ(),this.ket=this.vht(t),this.Rst()}Cst(t){this.Wtt().Cst(),this.ket=this.vht(t)}Rst(){const t=this.Wet();if(this.yit=0,t.Vtt()){const s=this.Mit(),i=t.G8(),e=this.Wtt(),h=this.Jst(),r=e.xht();if(r){const n=s.Ntt(i,e,h,this);n&&n.length&&(this.yit=1)}else this.yit=0}}vht(t){const s=this.Mit(),i=this.Aet.pht(t,this.Ret);return i||(s.Qtt()?this.Aet.mht(t,this.Ret):this.Aet.Sht(t,this.Ret))}Fst(){this.Pet.Fst()}rf(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.Aet.mht(t,this.Ret);else{if(this.ket){const o=this.Mit(),a=this.ket.jZ(),l=this.ket.NE(),u=a?a.NE():o.a8();(t<=l||u<=t)&&(this.ket=this.Aet.mht(t,this.Ret),n=!0)}else this.ket=this.Aet.mht(t,this.Ret),n=!0;h=this.ket}h&&(r=h.jZ()),this.Pet.rf(t,h,r,s,i,e,n)}Ght(t){if(this.ket){const e=this.Mit(),h=this.ket.jZ(),r=this.ket.NE(),n=h?h.NE():e.a8();(t<=r||n<=t)&&(this.ket=this.Aet.mht(t,this.Ret))}else this.ket=this.Aet.mht(t,this.Ret);const s=this.ket,i=s.jZ();return this.Pet.Ght(t,s,i)}Tht(t,s,i){return this.Pet.Ght(t,s,i)}kst(){this.Pet.kst()}static _ht(t,s){const i=s.jet(),e=s.Aet;return e.mht(t,i)}static Iht(t,s){const i=s.jet(),e=s.Aet;return e.Sht(t,i)}Cht(){const t=this.Ret.Det(),s=t.Rht();return this.ket=null,s}met(t){this.ket=null;const s=this.Ret.Det();s.Aht(t)}yet(){this.Wtt().yet()}wet(){const t=this.Wtt().wet();if(t){const s=this.Aet.oht(this.Ret),i=this.Wtt().Mht();s.Pht(i)}}bet(){const t=this.Wtt().bet();return t&&this.Eht(),this.Wtt().Fht(),t}Eht(){const t=this.Mit().NE(),s=this.Wtt(),i=Wr.bit._ht(t,this),e=this.Cht();e.SetType(i.qG()),e.n8(t),e.x8(i.Dht()),e.zit(!0),e.kht(s.Oht()),e.Pht(s.Mht())}$q(){return{sourceAdapterJson:this.Wtt().$q()}}Kq(t){t&&this.Wtt().Kq(t.sourceAdapterJson)}}}{const jr=self.Ws,Vr=jr.bit;Vr.Jet=class{constructor(t){this.Lht=t,this.Bht=null,this.Nht()}Gr(){this.Bht&&(this.Bht.Gr(),this.Bht=null),this.Lht=null}xht(){return this.Bht.xht()}P8(){return this.Lht}Bst(){this.Bht&&this.Bht.Bst()}yZ(){this.Bht&&this.Bht.yZ()}Nht(){return this.Bht||(this.Bht=this.Wht()),this.Bht}Pit(){}rD(){return this.Pit()}jht(){}Mst(){this.Nht().Mst()}oZ(){this.Nht().oZ()}Cst(){this.Nht().Cst()}Fst(){this.Bht.Vht()}rf(t,s,i,e,h,r,n){let o=this.Lht.nht(),a;switch(o){case"numeric":a=Vr.Uht.rf(t,s,i,this.Lht);break;case"angle":a=Vr.Hht.rf(t,s,i,this.Lht);break;case"boolean":a=Vr.zht.rf(t,s,i,this.Lht);break;case"color":a=Vr.Jht.rf(t,s,i,this.Lht);break;case"text":a=Vr.qht.rf(t,s,i,this.Lht)}this.Bht.Xht(t,a,s,i,e,h,r,n)}Ght(t,s,i){switch(this.Lht.nht()){case"numeric":return Vr.Uht.rf(t,s,i,this.Lht);case"angle":return Vr.Hht.rf(t,s,i,this.Lht);case"boolean":return Vr.zht.rf(t,s,i,this.Lht);case"color":return Vr.Jht.rf(t,s,i,this.Lht);case"text":return Vr.qht.rf(t,s,i,this.Lht)}}kst(){this.Bht.Yht()}yet(){this.Nht().$ht()}Fht(){this.Nht().Fht()}Mht(){return this.Nht().Mht()}wet(){return this.Nht().wet()}bet(){return this.Nht().bet()}Oht(){const t=this.Lht,s=t.Wet(),i=s.Mit().NE(),e=Vr._ht(i,t),h=e.jZ(),r=t.nht();switch(r){case"numeric":return Vr.Uht.rf(i,e,h,t);case"angle":return Vr.Hht.rf(i,e,h,t);case"boolean":return Vr.zht.rf(i,e,h,t);case"color":return Vr.Jht.rf(i,e,h,t);case"text":return Vr.qht.rf(i,e,h,t)}}Wht(){const t=this.Lht,s=t.dht()?t.nht():"";switch(s){case"combo":case"boolean":case"text":case"string":return new Vr.Zht.Kht(this);case"numeric":case"number":case"angle":return new("combo"===this.Lht.hht()?Vr.Zht.Kht:Vr.Zht.Qht)(this);case"color":case"offsetColor":return new Vr.Zht.trt(this);default:return new Vr.Zht.Qht(this)}}$q(){return{propertyAdapterJson:this.Nht().$q()}}Kq(t){t&&this.Nht().Kq(t.propertyAdapterJson)}}}{const Ur=self.Ws;class Hr extends Ur.bit.Jet{constructor(t){super(t),this.srt=NaN}Pit(){return this.Lht.jet().Ket()[0]}rD(){return this.srt||super.rD()}jht(){return this.Lht.Wet().G8()}kit(t){const s=this.Lht.jet().Ket()[0];s!==t&&(this.srt=t)}rf(t,s,i,e,h,r,n){this.Nht().irt(s.tht())&&super.rf(t,s,i,e,h,r,n)}Ght(t,s,i){if(this.Nht().irt(s.tht()))return super.Ght(t,s,i)}$q(){return Object.assign(super.$q(),{index:this.srt})}Kq(t){t&&(super.Kq(t),this.srt=t.index)}}Ur.bit.Het=Hr}{const zr=self.Ws;class Jr extends zr.bit.Jet{constructor(t){super(t),this.K7=NaN}Pit(){const t=this.Lht.jet();return t.Ket()[1]}jht(){const t=this.Lht.jet(),s=this.Lht.Wet(),i=this.K7||t.Ket()[0],e=s.G8(),h=e.ert(i),r=e.hrt()[h];return r.K6()}oW(t){const s=this.Lht.jet(),i=s.Ket()[2];return t.rrt(i)}Lit(t){const s=this.Lht.jet();s.Ket()[0]!==t&&(this.K7=t)}rf(t,s,i,e,h,r,n){const o=this.Lht.Wet(),a=o.G8();this.oW(a.lN())&&super.rf(t,s,i,e,h,r,n)}Ght(t,s,i){const e=this.Lht.Wet(),h=e.G8();if(this.oW(h.lN()))return super.Ght(t,s,i)}$q(){return Object.assign(super.$q(),{sid:this.K7})}Kq(t){t&&(super.Kq(t),this.K7=t.sid)}}zr.bit.Vet=Jr}{const qr=self.Ws;class Xr extends qr.bit.Jet{constructor(t){super(t)}Pit(){return this.Lht.jet().Ket()[1]}jht(){const t=this.Lht,s=t.Wet(),i=s.rO(),e=i.G4(),h=e.C5(),r=this.Bit(h),n=r.rD();return e.dW(n)?e.nrt(n):null}Bit(t){const s=this.Lht,i=s.jet().Ket()[0];return t.ort(i)}rf(t,s,i,e,h,r,n){this.art()&&super.rf(t,s,i,e,h,r,n)}Ght(t,s,i){if(this.art())return super.Ght(t,s,i)}art(){const t=this.Lht,s=t.Wet(),i=s.rO(),e=i.G4(),h=e.C5(),r=this.Bit(h);if(r){const n=r.rD();return e.dW(n)}}}qr.bit.Uet=Xr}{const Yr=self.Ws;class $r extends Yr.bit.Jet{constructor(t){super(t)}Pit(){return this.Lht.jet().Ket()[0]}jht(){return this.Lht.Wet().G8().K6()}rf(t,s,i,e,h,r,n){const o=this.Lht.Wet(),a=o.lN().r5(),l=o.G8().lN().r5();a===l&&super.rf(t,s,i,e,h,r,n)}Ght(t,s,i){const e=this.Lht.Wet(),h=e.lN().r5(),r=e.G8().lN().r5();if(h===r)return super.Ght(t,s,i)}lrt(){const t=this.Lht.Wet(),s=t.lN().r5();if(Yr.VY.urt&&s instanceof Yr.VY.urt&&("initial-frame"===this.Lht.Jst()||"initial-animation"===this.Lht.Jst()))switch(this.Lht.YZ()){case"relative":case"absolute":return null}}}Yr.bit.zet=$r}{const Kr=self.Ws;class Zr extends Kr.bit.Jet{constructor(t){super(t),this.crt=0,this.frt=!1}xht(){return!1}oZ(){let t=this.Lht.wit(),s=this.Lht.jet();s=t.oht(s),this.crt=s.eQ()}Cst(){}tht(){return this.frt||this.Lht.rf(0),this.crt}rf(t,s,i,e,h,r,n){this.crt=Kr.bit.Uht.rf(t,s,i,this.Lht),this.frt=!0}yet(){}Fht(){}Mht(){return this.crt}wet(){return!1}bet(){return!1}$q(){return{value:this.crt,init:this.frt}}Kq(t){t&&(this.crt=t.value,this.frt=!t.hasOwnProperty("init")||t.init)}}Kr.bit.qet=Zr}{const Qr=self.Ws;class tn extends Qr.bit.Jet{constructor(t){super(t),this.drt=!1,this.prt=null,this.mrt=null,this.grt=null,this.DZ=this.Lht.Mit(),this.Cet=this.Lht.Wet(),this.yrt=this.Lht.$et(),this.Srt=this.yrt[0],this.wrt=this.yrt[1],this.yrt[3]?this.brt=this.yrt[3]:this.brt=Math.random().toString(36).slice(2),this.Mrt=NaN,this.vrt=NaN,this.xrt=NaN,this.Grt=null,this.Trt()}Gr(){super.Gr(),this.prt=null,this.mrt=null,this.grt=null,this.DZ=null,this.Cet=null,this.yrt=null,this.Srt=null,this.Grt=null}Trt(){if(self.Ws.VY.Audio){const t=this.Lht.TO(),s=t._rt(self.Ws.VY.Audio);s&&(this.prt=s.i5().K6()),this.mrt=self.Ws.VY.Audio.Irt,this.grt=self.Ws.VY.Audio.Crt}}Rrt(){if(!this.Grt){const t=this.Lht.Wet(),s=t.P8("audioSource");s&&(this.Grt=s.Wtt())}}Art(){const t=this.Lht.Wet(),s=t.P8("volume");return(s?s.Wtt():this).vrt}Bst(){super.Bst(),this.drt=!1,this.prt&&(this.grt&&(this.Mrt=this.grt.Prt.call(this.prt,this.brt),this.vrt=this.grt.Ert.call(this.prt,this.brt)),this.mrt)&&this.mrt.e8.call(this.prt,this.brt)}Frt(){return this.brt}Drt(){return this.xrt}krt(t){this.xrt=t}oZ(){super.oZ(),this.Mrt=NaN,this.drt=!1}Cst(){super.Cst();const t=this.Lht.Mit(),s=t.NE();switch(this.Mrt=s-this.wrt,this.Lht.Jst()){case"audioSource":break;case"volume":this.vrt=this.Lht.Ght(s)}this.drt=!1}rf(t,s,i,e,h,r,n){if(this.prt)switch(this.Lht.Jst()){case"audioSource":{if(!this.DZ.Qtt())return;if(e)return void(this.mrt&&this.mrt.e8.call(this.prt,this.brt));if(t<this.wrt)return void(this.drt=!1);const o=this.grt.Ort.call(this.prt,this.brt),a=this.DZ.p8();if(a!==o&&this.mrt.d8.call(this.prt,this.brt,a),this.drt)return;if(!this.Lht.Mit().IsPlaying())return;if(this.drt=!0,isNaN(this.Mrt)){const l=self.performance.now(),u=t-this.wrt,c=this.prt.Lrt();if("suspended"===c)return void(this.drt=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.mrt){let t=this.Drt();isNaN(t)?(this.krt(0),t=0):this.krt(t),this.mrt.Brt.call(this.prt,this.Srt,t,this.brt,p)}}else{const m=this.Mrt,g=(this.Mrt=NaN,this.Art()),y=(this.vrt=NaN,this.prt.Lrt());if("suspended"===y)return void(this.drt=!1);this.mrt&&(this.krt(g),this.mrt.Brt.call(this.prt,this.Srt,g,this.brt,m))}break}case"volume":this.Rrt(),super.rf(t,s,i,e,h,r,n)}}Ght(t,s,i){if(this.prt)switch(this.Lht.Jst()){case"audioSource":return;case"volume":return this.Rrt(),super.Ght(t,s,i)}}Nrt(t,s){return this.Grt?this.Grt.Drt():0}Wrt(t,s,i,e){this.Grt&&this.Grt.krt(this.Nrt()+s),this.mrt&&this.Grt&&this.mrt.krt.call(this.prt,this.Grt.Frt(),this.Grt.Drt())}jrt(t,s,i){this.Grt&&this.Grt.krt(s),this.mrt&&this.Grt&&this.mrt.krt.call(this.prt,this.Grt.Frt(),this.Grt.Drt())}Vrt(){return!0}$q(){return{audioPlaybackStarted:this.drt,audioTag:this.brt,pauseTime:this.Mrt,pauseVolume:this.vrt,volume:this.xrt}}Kq(t){t&&(this.drt=t.audioPlaybackStarted,this.brt=t.audioTag,this.Mrt=t.pauseTime,this.vrt=t.pauseVolume,this.xrt=t.volume,this.Trt())}}Qr.bit.Xet=tn}{const sn=self.Ws;sn.bit.Zht=class{constructor(t){this.Pet=t,this.Lht=t.P8(),this.rit=this.Lht.Wet().rO(),this.Urt=this.Lht.Jst(),this.Hrt=!1,this.zrt=null,this.Jrt=null}Gr(){this.Pet=null,this.Lht=null,this.rit=null,this.zrt=null,this.Jrt=null}xht(){return!1}Bst(){}yZ(){this.rit=null,this.zrt=null,this.Jrt=null}Wtt(){return this.Pet}P8(){return this.Lht}rO(){return this.rit||(this.rit=this.Lht.Wet().rO()),this.rit}qrt(t){this.Hrt=!!t}Xrt(){return this.Hrt}Mst(){}oZ(){}Cst(){}$ht(){this.zrt=this.Mht()}Fht(){this.zrt=null}Mht(){}wet(){}bet(){}irt(t){const s=typeof this.Yrt(),i=typeof t;return s==i}Vht(){}Xht(t,s,i,e,h,r,n,o){}Yht(){}$rt(){const t=this.Krt(()=>{const t=this.Lht.jet(),s=this.Lht.wit();return s.oht(t)},()=>{const t=this.Lht.jet(),s=this.Lht.wit();return s.Zrt(t)});return t.Qrt()}tnt(){const t=this.Lht.Mit(),e=t.NE()-this.Lht.Wet().Dst(),s=this.Krt(()=>{const t=this.Lht.jet(),s=this.Lht.wit();return s.mht(e,t)},()=>{const t=this.Lht.jet(),s=this.Lht.wit(),i=s.Sht(e,t);return i||s.Zrt(t)});return s.Qrt()}Krt(t,s){const i=this.Lht.Mit();return(i.Qtt()?t:s)()}snt(t,s){const i=this.Lht.YZ();return("relative"===i?t:s)()}int(t,s){return(this.Xrt()?(this.qrt(!1),t):s)()}ent(t){}hnt(){return this.Pet.rD()}rnt(){return this.Jrt||(this.Jrt=this.Pet.jht()),this.Jrt}nnt(t,s,i,e,h,r){const n=this.Lht.Ait();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}$q(){return{firstAbsoluteUpdate:this.Hrt,saveState:this.zrt}}Kq(t){t&&(this.Hrt=t.firstAbsoluteUpdate,this.zrt=t.saveState)}ont(t,s=!1){const i=[];for(const e of t){const h=e.Wet().Dst();for(const r of e.fht())(s&&0===r.NE()||!s)&&i.push({time:h+r.NE(),value:r.Qrt()})}return i.sort((t,s)=>t.time-s.time)}ant(t,s,i){return this.lnt(s,i)}lnt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.Ws,hn=new Map,rn=[0,0,0];class nn extends en.bit.Zht{constructor(t){super(t)}Mst(){}oZ(){}Cst(){}Mht(){const t=this.Lht.Ait(),s=this.rnt(),i=this.hnt();switch(t){case"behavior":return this.unt(s.cnt(i));case"effect":return this.unt(s[i]);case"plugin":return this.unt(s.cnt(i));case"world-instance":return this.unt(this.Yrt())}}wet(){const t=this.$rt();return!this.fnt(t,this.Yrt())}bet(){return!en.ve(this.zrt)&&!this.fnt(this.zrt,this.Yrt())}fnt(t,s){return t=this.dnt(t),s=this.dnt(s),t.Aa(s)}$rt(){const t=super.$rt();return this.dnt(t)}tnt(){const t=super.tnt();return this.dnt(t)}ent(t){}unt(t){return(en.rh(t,en.ea)?t.toArray():t).slice(0,3)}dnt(t){return en.rh(t,en.ea)?t:new en.ea(t[0],t[1],t[2],1)}irt(t){return!0}xht(){return!0}Vht(){const t=this.Lht.Mit(),s=this.Lht.G8(),i=this.Lht.Wtt(),e=t.Ntt(s,i,this.Urt,this.Lht);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.Lht.Ait(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Urt)||n.set(this.Urt,{pnt:!1,color:new en.ea(0,0,0,1)})}}mnt(t,s,i){const e=hn.get(t).get(s).get(i);return e.pnt=!0,e.color}Xht(t,s,i,e,h,r,n,o){const a=this.Lht.Mit(),l=this.Lht.Wet(),u=this.Lht.G8(),c=this.Lht.Wtt(),f=this.Lht.Ait(),d=this.Urt,p=a.Ntt(u,c,d,this.Lht);if(p&&1<p.length){const m=this.ont(p,!0),g=this.ant(a,a.NE(),m);if(g){const y=l.Dst(),S=g.time-y;if(0==S)this.mnt(u,f,this.Urt).ca(s[0],s[1],s[2]);else if(!(S<0)){const w=s[0],b=s[1],M=s[2],v=this.Lht.rf(S,!1,!0),x=en.ea.ol(w,v[0]),G=en.ea.ol(b,v[1]),T=en.ea.ol(M,v[2]);this.mnt(u,f,this.Urt).ca(x,G,T)}}}else this.gnt(s[0],s[1],s[2])}Yht(){const t=this.Lht.G8();if(hn.has(t)){const s=hn.get(t),i=this.Lht.Ait();if(s.has(i)){const e=s.get(i);if(e.has(this.Urt)){const h=e.get(this.Urt),r=h.pnt,n=h.color;r&&this.gnt(n.xa(),n.Ga(),n.Ta()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Yrt(){const t=this.Lht.Ait(),s=this.rnt(),i=this.hnt();switch(t){case"behavior":return this.dnt(s.cnt(i));case"effect":return s[i].clone();case"plugin":return this.dnt(s.cnt(i));case"world-instance":return this.rO().j4().clone()}}gnt(t,s,i){const e=this.Lht.Ait(),h=this.rnt(),r=this.hnt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.ynt(r,rn);break;case"effect":h[r].ua(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.ynt(r,rn);break;case"world-instance":this.rO().Snt(t,s,i)}}$q(){}Kq(t){}}en.bit.Zht.trt=nn}{const on=self.Ws,an=on.bit;class ln extends on.bit.Zht{constructor(t){super(t)}Mst(){}oZ(){}Cst(){}Mht(){return this.Yrt()}wet(){const t=this.$rt();return t!==this.Mht()}bet(){return!on.ve(this.zrt)&&this.zrt!==this.Mht()}xht(){return!1}Xht(t,s,i,e,h,r,n,o){const a=this.Lht,l=a.Wet(),u=a.Ait(),c=a.Mit(),f=l.G8(),d=a.Wtt(),p=this.Urt,m=c.Ntt(f,d,p,a);if(m&&1<m.length){const y=this.ont(m),S=t+l.Dst(),w=this.ant(c,S,y);w&&(s=w.value)}const g=a.nht();switch(g){case"numeric":if(an.Uht.wnt(this.hnt(),this.rnt(),s,u))break;return;case"angle":if(an.Hht.wnt(this.hnt(),this.rnt(),s,u))break;return;case"boolean":if(an.zht.wnt(this.hnt(),this.rnt(),s,u))break;return;case"color":if(an.Jht.wnt(this.hnt(),this.rnt(),s,u))break;return;case"text":if(!an.qht.wnt(this.hnt(),this.rnt(),s,u))return}this.gnt(s)}Yrt(){const t=this.Lht.Ait(),s=this.rnt(),i=this.hnt();switch(t){case"behavior":return s.cnt(i);case"effect":return s[i];case"instance-variable":return s.bnt(i);case"plugin":return s.cnt(i)}}gnt(t){const s=this.Lht.Ait(),i=this.rnt(),e=this.hnt();switch(s){case"behavior":i.ynt(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.Mnt(e,t);break;case"plugin":i.ynt(e,t)}}}on.bit.Zht.Kht=ln}{const un=self.Ws,cn=(un.bit.Zht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{vnt:s,xnt:i,Gnt:e,round:h,Tnt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.Lht.YZ()?t._nt(s,i.Mit().$tt()):t._nt(s)},(t,s)=>t.XM(s),t=>t.qM(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.Lht.YZ()?t.Int(s,i.Mit().$tt()):t.Int(s)},(t,s)=>t.KM(s),t=>t.$M(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Lht.YZ(),l=1===i.Cnt.qG();if((h||l)&&s.m6()&&s.v6()){if(isNaN(i.Rnt)){let e=[],t=s.i6();for(;t;)e.push(t),t=t.i6();e.reverse();let a=(t,s)=>s.Mit().qst(t.G8()),h=(t,s)=>{const i=a(t,s);if(i)return i.Xit();const e=t.G8().K6();return e.Yit()?e.Xit():t.Pnt().Ant()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.P8(i);if(!r)return e;const n=r.jet().Det();if(!n)return e;const o=n.Zrt();return o?o.tht():e},n;if(l){let t=e[e.length-1];n=t.Lm()}else{let s=e[0],t=s.Pnt().Ant(),i=s.Pnt().Ent();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).Pnt().Ent();n=(n=(n*=u)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.Rnt=0===n?Number.EPSILON:n}e||s.gg(t/i.Rnt,!0)}else s.gg(t)}},(t,s)=>t.Hm(s),t=>t.Lm(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Lht.YZ(),a=1===i.Cnt.qG();if((h||a)&&s.m6()&&s.G6()){if(isNaN(i.Rnt)){let e=[],t=s.i6();for(;t;)e.push(t),t=t.i6();e.reverse();let h=(t,s)=>{e=t;const i=s.Mit().qst(e.G8());var e;if(i)return i.Kit();const h=t.G8().K6();return h.Yit()?h.Kit():t.Pnt().Fnt()},r=(t,s,i,e=0)=>{const h=s.Mit().qst(t.G8());if(!h)return e;const r=h.P8(i);if(!r)return e;const n=r.jet().Det();if(!n)return e;const o=n.Zrt();return o?o.tht():e},n;if(a){let t=e[e.length-1];n=t.qm()}else{let s=e[0],t=s.Pnt().Fnt(),i=s.Pnt().Dnt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).Pnt().Dnt();n=(n=(n*=l)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.Rnt=0===n?Number.EPSILON:n}e||s.knt(t/i.Rnt,!0)}else s.knt(t)}},(t,s)=>t.Bm(s),t=>t.qm(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.Ont(s)},(t,s)=>t.D5(s),t=>t.GetAngle(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.Lnt||1,n=(s/=r,t.uP()),o=n+s;if(0===e.Bnt)1<o?e.Bnt+=o-1:o<0&&(e.Bnt+=o),t.Nnt(s);else{const a=t.uP()+s;0<s&&0<e.Bnt?1<a&&(e.Bnt+=a-1):0<s&&e.Bnt<0?(e.Bnt+=s,0<e.Bnt&&(t.Nnt(e.Bnt),e.Bnt=0)):s<0&&0<e.Bnt?(e.Bnt+=s,e.Bnt<0&&(t.Nnt(e.Bnt),e.Bnt=0)):s<0&&e.Bnt<0&&a<0&&(e.Bnt+=a)}},(t,s)=>{t.fP(s)},t=>t.uP(),!1,!0,(r,h,n)=>{switch(r.Bnt=0,r.Lht.YZ()){case"relative":{r.Lht.wit();let t=r.Lht.jet(),s=t.Det(),i=s.Fet(),e=r.rO().uP(),h=e;for(const o of i){const a=o.NE(),l=r.Lht.Ght(a);h=e+l,h=un.Rr(h,0,1)}r.Wnt=e-h,r.Wnt=Math.round(100*(r.Wnt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].NE(),c=r.Lht.Ght(u);h-=c,h=un.Rr(h,0,1)}r.jnt=h,r.jnt=Math.round(100*(r.jnt+Number.EPSILON))/100;break}}const t="relative"===r.Lht.YZ(),s=1===r.Cnt.qG();if((t||s)&&h.m6()&&h.A6()){let s=[],t=h.i6();for(;t;)s.push(t),t=t.i6();s.reverse();let i=(t,s,i)=>{const e=s.Mit().qst(t.G8());if(!e)return 0;const h=e.P8(i);if(!h)return 0;const r=h.jet().Det();if(!r)return 0;const n=r.Zrt();return n?n.tht():0},e=s[0].Pnt().Vnt();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.Lnt=0===e?1:e}},i=>{switch(i.Lht.YZ()){case"relative":{i.Bnt=0;let t=i.rO(),s=t.uP();s=Math.round(100*(s+Number.EPSILON))/100,i.Lht.Mit().Qtt()?(t.fP(s+i.Wnt),i.kT=0):(t.fP(s-i.jnt),i.kT=i.Wtt().Oht());break}}}),fn("offsetOriginX",(t,s)=>t.Unt(s),(t,s)=>t.Hnt(s),t=>t.BW(),!1),fn("offsetOriginY",(t,s)=>t.znt(s),(t,s)=>t.Jnt(s),t=>t.WW(),!1),fn("offsetZElevation",(t,s)=>t.qnt(s),(t,s)=>t.QM(s),t=>t.ZM(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Lm()<0?-1:1;if("relative"===e.Lht.YZ()&&t.m6()&&t.v6()){const r=i.Xit()*h*s;isNaN(e.Rnt)&&cn.get("offsetWidth").vnt(t,1,i,e,!0),t.gg(r/e.Rnt,!0)}else t.gg(i.Xit()*h*s)}},(t,s,i)=>{t.Hm(i.Xit()*s)},(e,h)=>{const r=e.Lm()<0?-1:1;if(e.v6()){let t=e.i6(),s=h.Mit().qst(t.G8()),i=NaN;if(s)i=t.Lm()/s.Xit();else{const n=t.G8().K6();i=n.Yit()?t.Lm()/n.Xit():1}return e.Lm()*r/(h.Xit()*i)}return e.Lm()*r/h.Xit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.qm()<0?-1:1;if("relative"===e.Lht.YZ()&&t.m6()&&t.G6()){const r=i.Kit()*h*s;isNaN(e.Rnt)&&cn.get("offsetHeight").vnt(t,1,i,e,!0),t.knt(r/e.Rnt,!0)}else t.knt(i.Kit()*h*s)}},(t,s,i)=>{t.Bm(i.Kit()*s)},(e,h)=>{const r=e.qm()<0?-1:1;if(e.G6()){let t=e.i6(),s=h.Mit().qst(t.G8()),i=NaN;if(s)i=t.qm()/s.Kit();else{const n=t.G8().K6();i=n.Yit()?t.qm()/n.Kit():1}return e.qm()*r/(h.Kit()*i)}return e.qm()*r/h.Kit()},!1);class dn extends un.bit.Zht{constructor(t){super(t),this.kT=0,this.Bnt=0,this.Wnt=0,this.jnt=0,this.Lnt=NaN,this.Rnt=NaN,this.Xnt=void 0,this.Ynt=void 0,this.$nt=null,this.Knt=null,this.Znt=null,this.Qnt=null,this.tot=null,this.sot=null,this.iot=null,this.eot=null,this.hot=!1,this.rot=!1,un.rh(this.Lht.Mit(),un.not)?this.Cnt=new un.bit.Zht.oot(this):this.Cnt=new un.bit.Zht.aot(this);const s=this.Lht.Jst();switch(this.Lht.Ait()){case"world-instance":{const i=cn.get(s);this.$nt=i.Gnt,this.Knt=i.vnt,this.Znt=i.xnt,this.hot=i.round,this.rot=i.Tnt,this.tot=i.init,this.Qnt=i.reset;break}case"audio":this.sot=t.Nrt,this.iot=t.Wrt,this.eot=t.jrt,this.hot=!!t.Vrt(),this.rot=!1}}Gr(){this.Cnt=null,this.$nt=null,this.Knt=null,this.Znt=null,this.Qnt=null,this.tot=null,this.sot=null,this.iot=null,this.eot=null,super.Gr()}xht(){return this.Cnt.xht()}lot(){return this.kT}uot(t){this.kT=t}Mst(){this.Qnt&&this.Qnt(this)}oZ(){const t=this.Cnt.oZ();if("number"==typeof t&&(this.kT=t),this.tot){const s=this.rO(),i=this.Lht.Wet();this.tot(this,s,i)}}Cst(){const t=this.Cnt.Cst();"number"==typeof t&&(this.kT=t)}Mht(){return this.Yrt()}wet(){const t=this.$rt();return t!==this.Mht()}bet(){return!un.ve(this.zrt)&&this.zrt!==this.Mht()}Vht(){this.Cnt.Vht()}Xht(t,s,i,e,h,r,n,o){return this.Cnt.Xht(t,s,i,e,h,r,n,o)}Yht(){this.Cnt.Yht()}Yrt(){const t=this.rnt(),s=this.hnt(),i=this.rO(),e=this.Lht.Wet(),h=this.Lht.Ait();switch(h){case"behavior":return t.cnt(s);case"effect":return t[s];case"instance-variable":return t.bnt(s);case"plugin":return t.cnt(s);case"world-instance":return this.$nt(i,e);case"audio":return this.sot.call(this.Wtt(),i,e)}}gnt(t,s,i){const e=this.rnt(),h=this.hnt(),r=this.rO(),n=this.Lht.Wet(),o=this.Lht.Ait();switch(o){case"behavior":e.cot(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.fot(h,t);break;case"plugin":e.cot(h,t,this.Wtt().lrt());break;case"world-instance":this.Knt(r,t,n,this);break;case"audio":this.iot.call(this.Wtt(),r,t,n,this)}}dot(t,s,i){let e=this.Lht.Jtt();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.Lht.Mit(),u=l.NE(),c=this.Lht.pht(u);if(!c)return}const h=this.rnt(),r=this.hnt(),n=this.rO(),o=this.Lht.Wet(),a=this.Lht.Ait();switch(a){case"behavior":h.ynt(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.Mnt(r,t);break;case"plugin":h.ynt(r,t,this.Wtt().lrt());break;case"world-instance":this.Znt(n,t,o);break;case"audio":this.eot.call(this.Wtt(),n,t,o)}}}pot(t,s,i,e,h,r,n,o){this.Cnt.pot(t,s,i,e,h,r,n,o)}mot(t,s,i,e,h){let r=(t="angle"===this.Lht.hht()?un.Er(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Yrt(),l;switch(l=0===o?this.hot?Math.round(a):this.rot?"angle"===this.Lht.hht()?un.Pr(Math.round(un.Er(a))):Number(un.toFixed(a,2)):a:this.hot?Number(un.toFixed(a,o)):(this.rot,a),this.gnt(l-a,s,i),this.Lht.Jst()){case"offsetWidth":case"offsetScaleX":{const u=this.rO(),c=u.Lm(),f=Number(un.toFixed(c,2));u.gg(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.rO(),p=d.qm(),m=Number(un.toFixed(p,2));d.knt(m-p);break}}}$q(){return Object.assign(super.$q(),{v:this.kT,a:this.Bnt,fod:this.Wnt,bod:this.jnt,of:this.Lnt,sf:this.Rnt,armorf:this.Xnt,armandf:this.Ynt})}Kq(t){t&&(super.Kq(t),this.kT=t.v,this.Bnt=t.a,this.Wnt=un.Se(t.fod)?t.fod:0,this.jnt=un.Se(t.bod)?t.bod:0,this.Lnt=un.Se(t.of)?t.of:NaN,this.Rnt=un.Se(t.sf)?t.sf:NaN,this.Xnt=un.Se(t.armorf)?t.armorf:void 0,this.Ynt=un.Se(t.armandf)?t.armandf:void 0)}}un.bit.Zht.Qht=dn}{const pn=self.Ws;class mn{constructor(t){this.got=!1,this.crt=0,this.yot=!1,this.Sot=!1,this.pit=t;for(let t=0,s=this.pit.length;t<s;t++)this.pit[t].Bet(this)}zst(){return this.pit}wot(){this.got=!0}bot(){return this.got}kht(t){this.crt=t}tht(){return this.crt}Mot(t){this.yot=t}vot(){return this.yot}Est(t){this.Sot=t}xot(){return this.Sot}_0(){this.got=!1,this.crt=0,this.yot=!1,this.Sot=!1}}class gn{constructor(t){this.Got=t}Gr(){this.Got=null}qG(){return 0}oZ(){const t=this.Got;return this.Got.P8(),t.snt(()=>t.Krt(()=>0,()=>t.Wtt().Oht()),()=>{})}Cst(){}xht(){this.Got;const t=this.Got.P8();switch(t.YZ()){case"relative":return!1;case"absolute":return!0}}Vht(){this.Got;const t=this.Got.P8(),s=t.Jst();switch(t.YZ()){case"relative":break;case"absolute":if(t.Let()){const i=t.Net();i._0()}else{const e=t.Mit(),h=t.G8(),r=t.Wtt(),n=e.Ntt(h,r,s,t);n&&1<n.length&&new mn(n)}}}Xht(t,s,i,e,h,r,n,o){const a=this.Got,l=this.Got.P8();switch(l.YZ()){case"relative":{const u=a.lot();a.gnt(s-u,i,e),r&&this.pot(t,i,e,h,u,s),a.uot(s);break}case"absolute":{const c=l.Mit(),f=l.Wet();if(l.G8(),l.Wtt(),l.Let()){const d=l.Net(),p=d.zst(),m=a.ont(p,!0),g=a.ant(c,c.NE(),m);if(g){const y=f.Dst(),S=g.time-y;if(0==S)d.Est(n),d.Mot(o),d.wot(),d.kht(d.tht()+s);else{if(S<0)return;const w=l.Ght(S);d.Est(n),d.Mot(o),d.wot(),d.kht(d.tht()+(s-w))}}}else a.dot(s,o,n);break}}}Yht(){const t=this.Got,s=this.Got.P8();switch(s.YZ()){case"relative":break;case"absolute":if(s.Let()){const i=s.Net();i.bot()&&t.dot(i.tht(),i.vot(),i.xot())}}}pot(t,s,i,e,h,r){const n=this.Got;e||(s&&t===s.NE()?n.mot(s.eQ(),s,i):i&&t===i.NE()?n.mot(i.eQ(),s,i):r-h==0&&n.mot(s.eQ(),s,i))}}pn.bit.Zht.aot=gn}{const yn=self.Ws;class Sn{constructor(t){this.Got=t}Gr(){this.Got=null}qG(){return 1}oZ(){const t=this.Got;return t.qrt(!0),this.ent(t.$rt())}Cst(){const t=this.Got;if(t.$rt()!==t.tnt())return t.qrt(!0),this.ent(t.tnt())}xht(){return!1}Vht(){}Xht(t,s,i,e,h,r,n,o){const a=this.Got,l=a.lot();switch(a.P8().YZ()){case"relative":a.gnt(s-l,i,e),r&&this.pot(t,i,e,h,l,s,!1,n);break;case"absolute":a.Xrt()?(a.qrt(!1),a.gnt(l,i,e)):0===t&&0===a.P8().Mit().a8()?a.dot(s,!0,!1):(a.gnt(s-l,i,e),r&&this.pot(t,i,e,h,l,s,this.Tot(),n))}a.uot(s)}Yht(){}ent(t){const s=this.Got;return t-s.Mht()}Tot(){let t=this.Got,s=t.rO().G8(),i=t.P8().TO(),e=i.Btt(),h=0;for(const r of e.kK())0===r.qG()?r.jK(s)&&h++:1===r.qG()&&r.G8()===s&&h++;return h<=1}pot(t,s,i,e,h,r,n,o){const a=this.Got;e?s&&t===s.NE()?a.mot(s.eQ(),s,i,n,o):i&&t===i.NE()?a.mot(i.eQ(),s,i,n,o):i||a.mot(s.eQ(),s,i,n,o):s&&t===s.NE()?a.mot(s.eQ(),s,i,n,o):i&&t===i.NE()?a.mot(i.eQ(),s,i,n,o):r-h==0&&a.mot(s.eQ(),s,i,n,o)}}yn.bit.Zht.oot=Sn}{const wn=self.Ws,bn=self.Fc;wn.bit.Uht=class{constructor(){}static wnt(t,s,i,e){let h;switch(e){case"behavior":h=s.cnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.bnt(t);break;case"plugin":h=s.cnt(t)}return h!==i}static rf(r,n,o,a){if(!o){let t=a.jet(),s=a.wit();return(t=s.Zrt(t)).eQ()}let l=a.Jtt();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.hht()?"discrete":l))return n.eQ();if("continuous"===l||"step"===l){const u=a.Mit().Htt();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=n.eQ(),f=o.eQ(),d=n.sQ("cubic-bezier"),p=o.sQ("cubic-bezier"),m=d&&d._ot()&&p&&p.Iot();if(!m&&c===f)return c;let t=n.NE(),s=o.NE(),i=("step"===l&&0!==u&&(r=wn.Rr(r,t,s)),wn.normalize(r,t,s)),e=n.Dht(),h;if(m){const y=s-t;h=bn.Xc(e)(y*i,0,1,y),h=bn.Xc("cubicbezier")(h,c,c+d.nQ(),f+p.lQ(),f)}else h=bn.Xc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.hht()?Math.floor(h):h}}}}{const Mn=self.Ws;Mn.bit.Hht=class{constructor(){}static wnt(t,s,i,e){let h;switch(e){case"behavior":h=s.cnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.bnt(t);break;case"plugin":h=s.cnt(t)}return h!==i}static rf(t,s,i,e){if(!i){let t=e.jet(),s=e.wit();return(t=s.Zrt(t)).eQ()}let h=e.Jtt();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.hht()?"discrete":h))return s.eQ();if("continuous"===h||"step"===h){const r=e.Mit().Htt();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.NE(),o=i.NE(),a=s.eQ(),l=i.eQ(),u=("step"===h&&0!==r&&(t=Mn.Rr(t,n,o)),s.sQ("angle"));if(!u){if(a===l)return a;const f=Mn.normalize(t,n,o),d=self.Fc.Xc(s.Dht());return Mn.jr(a,l,d(f,0,1,1))}{const p=u.Cot();if(a===l&&0===p)return a;const m=Mn.normalize(t,n,o),g=self.Fc.Xc(s.Dht()),y=g(m,0,1,1);switch(u.Rot()){case"closest":return Mn.jr(a,l,y,p);case"clockwise":return Mn.Vr(a,l,y,p);case"anti-clockwise":return Mn.Ur(a,l,y,p)}}}}}}{const vn=self.Ws;vn.bit.zht=class{constructor(){}static wnt(t,s,i,e){let h;switch(e){case"behavior":h=s.cnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.bnt(t);break;case"plugin":h=s.cnt(t)}return!!h!=!!i}static rf(t,s,i,e){if(i)return s.eQ()?1:0;{let t=e.jet(),s=e.wit();return(t=s.Zrt(t)).eQ()?1:0}}}}{const xn=self.Ws,Gn=[0,0,0],Tn=[0,0,0],_n=[0,0,0];xn.bit.Jht=class{constructor(){}static wnt(t,s,i,e){let h;switch(e){case"behavior":h=s.cnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.bnt(t);break;case"plugin":h=s.cnt(t)}return Array.isArray(i)?(Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2]):(_n.za(i),Gn[0]=Math.floor(255*_n.xa()),Gn[1]=Math.floor(255*_n.Ga()),Gn[2]=Math.floor(255*_n.Ta())),Array.isArray(h)?(Tn[0]=h[0],Tn[1]=h[1],Tn[2]=h[2]):(_n.za(h),Tn[0]=Math.floor(255*_n.xa()),Tn[1]=Math.floor(255*_n.Ga()),Tn[2]=Math.floor(255*_n.Ta())),Gn[0]!==Tn[0]||Gn[1]!==Tn[1]||Gn[2]!==Tn[2]}static rf(t,s,i,e){if(!i){let t=e.jet(),s=e.wit(),i=(t=s.Zrt(t)).eQ();return Gn[0]=i[0],Gn[1]=i[1],Gn[2]=i[2],Gn}let h=e.Jtt();if("discrete"===(h="default"===h?"continuous":h)){const r=s.eQ();return Gn[0]=r[0],Gn[1]=r[1],Gn[2]=r[2],Gn}if("continuous"===h||"step"===h){const n=e.Mit().Htt();if("step"===h&&0!==n){const v=1/n;t=Math.floor(t*v)/v}const o=s.NE(),a=i.NE(),l=s.eQ(),u=i.eQ(),c=("step"===h&&0!==n&&(t=xn.Rr(t,o,a)),xn.normalize(t,o,a)),f=s.Dht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],S=u[2],w=self.Fc.Xc(f),b=a-o,M=b*c;return Gn[0]=d===g?d:w(M,d,g-d,b),Gn[1]=p===y?p:w(M,p,y-p,b),Gn[2]=m===S?m:w(M,m,S-m,b),Gn}}}}{const In=self.Ws;In.bit.qht=class{constructor(){}static wnt(t,s,i,e){let h;switch(e){case"behavior":h=s.cnt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.bnt(t);break;case"plugin":h=s.cnt(t)}return h!==i}static rf(t,s,i,e){if(i)return s.eQ();{let t=e.jet(),s=e.wit();return(t=s.Zrt(t)).eQ()}}}}{const Cn=self.Ws;Cn.U$=class{constructor(){this.Aot=new Map}Gr(){for(const t of this.Aot.values())t.Gr();this.Aot.clear(),this.Aot=null}Ac(t){const s=new Cn.Pot(t),i=s.Sf();this.Aot.set(i,s)}ni(t){return this.Aot.get(t)}Ptt(){return 0}static Eot(t,s,i,e){if(s)for(const h of s)Cn.U$.Fot("create",h,t,i,e)}static Dot(t,s,i,e){if(s)for(const h of s)Cn.U$.Fot("create-including-disabled",h,t,i,e)}static kot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].Kq(t)}):t.forEach(t=>{Cn.U$.Fot("load",t,i,s,e)})}static Fot(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.Kq(s),i.push(r);break;case"create":if("function"==typeof r.Hit&&!r.Hit())return r.Gr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Rn=self.Ws;Rn.Pot=class{constructor(t){this.Ir="",this.Pst=NaN,this.Oot=0,this.Lot="default",this.Bot="default",this.Not=!1,this.Wot=!1,this.jot=1,this.sit=null,this.Vot="",this.Uot=!1,this.Hot=!0,t&&(this.Ir=t[0],this.Pst=t[1],this.Oot=t[2],this.Lot=t[3],this.Bot=t[4],this.Not=!!t[6],this.Wot=!!t[7],this.jot=t[8],this.Vot=t[9],this.Uot=!!t[10],this.Hot=!!t[11],this.sit=new Rn.zot(t[5],this))}Gr(){this.sit.Gr(),this.sit=null}Ott(){return this.sit||(this.sit=new Rn.zot(null,this)),this.sit}Sf(){return this.Ir}vV(t){this.Ir=t}a8(){return this.Pst}o8(t){this.Pst=t}Htt(){return this.Oot}ztt(t){this.Oot=t}Jtt(){return this.Lot}qtt(t){this.Lot=t}YZ(){return this.Bot}Xtt(t){this.Bot=t}u8(){return this.Not}l8(t){this.Not=t}f8(){return this.Wot}c8(t){this.Wot=t}MW(){return this.jot}Ytt(t){this.jot=t}SZ(){return this.Vot}$tt(){return this.Uot}Ktt(){return this.Hot}$q(){return{trackDataJson:this.sit.$q(),name:this.Ir,totalTime:this.Pst,step:this.Oot,interpolationMode:this.Lot,resultMode:this.Bot,loop:this.Not,pingPong:this.Wot,repeatCount:this.jot,startOnLayout:this.Vot,transformWithSceneGraph:!!this.Uot,useSystemTimescale:this.Hot}}Kq(t){t&&(this.Ott().Kq(t.trackDataJson),this.Ir=t.name,this.Pst=t.totalTime,this.Oot=t.step,this.Lot=t.interpolationMode,this.Bot=t.resultMode,this.Not=t.loop,this.Wot=t.pingPong,this.jot=t.repeatCount,this.Vot=t.startOnLayout,this.Uot=!!t.transformWithSceneGraph,this.Hot=!!t.useSystemTimescale)}}}{const An=self.Ws;class Pn{constructor(t,s){this.sit=s,this.Jot=null,this.qot=null,this.iit=NaN,this.eit=NaN,this.Lot="default",this.Bot="default",this.Ku=!1,this.Xot=null,this.Aet=null,this.Cf="",this.Yot=null,this.$ot=0,this.Kot=this.sit.Utt().a8(),this.Df=0,this.Ir="",t&&(t[0]&&(this.Jot=t[0],this.iit=t[0][2],this.eit=t[0][1]),this.Lot=t[1],this.Bot=t[2],this.Ku=!!t[3],t[6]&&(this.Cf=t[6]),t[7]&&(this.Yot=t[7],this.$ot=t[7][0],this.Kot=t[7][1]),t[8]&&(this.qot=t[8]),t[8]&&(this.qot=t[8]),t[9]&&(this.Df=t[9]),t[10]&&(this.Ir=t[10]),this.Xot=new An.Zot(t[4],this),this.Aet=new An.Qot(t[5],this))}Gr(){this.Jot=null,this.sit=null,this.Xot&&(this.Xot.Gr(),this.Xot=null),this.Aet&&(this.Aet.Gr(),this.Aet=null),this.Yot=null}Ott(){return this.sit}dit(){return this.Xot||(this.Xot=new An.Zot(null,this)),this.Xot}wit(){return this.Aet||(this.Aet=new An.Qot(null,this)),this.Aet}tat(){return this.Jot}Tit(){return this.eit}Jit(t){this.eit=t}Git(){return this.iit}jit(t){this.iit=t}Jtt(){return this.Lot}qtt(t){this.Lot=t}YZ(){return this.Bot}Xtt(t){this.Bot=t}Hit(){return this.Ku}zit(t){this.Ku=!!t}C8(){return this.Cf}Dst(){return this.$ot}Vit(){return this.Kot}Uit(t){this.Kot=t}Xit(){return this.qot[0]}qit(t){this.qot||(this.qot=[]),this.qot[0]=t}Kit(){return this.qot||(this.qot=[]),this.qot[1]}$it(t){this.qot||(this.qot=[]),this.qot[1]=t}qG(){return this.Df}Sf(){return this.Ir}$q(){return{keyframeDataJson:this.Xot.$q(),propertyTrackDataJson:this.Aet.$q(),instanceData:this.Jot,additionalInstanceData:this.qot,instanceUid:this.iit,objectClassIndex:this.eit,interpolationMode:this.Lot,resultMode:this.Bot,enabled:this.Ku,id:this.Cf,nestedData:this.Yot,type:this.Df,name:this.Ir}}Kq(t){t&&(this.Jot=t.instanceData,this.iit=t.instanceUid,this.eit=t.objectClassIndex,this.Lot=t.interpolationMode,this.Bot=t.resultMode,this.Ku=t.enabled,this.Cf=t.id,this.Df=t.type||0,this.Ir=t.name||"",this.Kot=this.sit.Utt().a8(),t.nestedData&&(this.Yot=t.nestedData,this.$ot=this.Yot[0],this.Kot=this.Yot[1]),t.additionalInstanceData&&(this.qot=t.additionalInstanceData),this.dit().Kq(t.keyframeDataJson),this.wit().Kq(t.propertyTrackDataJson))}}An.zot=class{constructor(t,s){this.ttt=s,this.sat=[],An.U$.Eot(this.sat,t,Pn,this)}Gr(){this.ttt=null;for(const t of this.sat)t.Gr();An.$n(this.sat),this.sat=null}Utt(){return this.ttt}Lst(){const t=new Pn(null,this);return this.sat.push(t),t}iat(t){return t.dit().fit()[0]}eat(t){const s=t.dit().fit();return s.at(-1)}aet(s,t){const i=t.dit().fit(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.NE()===s)return h}}hat(s,t){const i=t.dit().fit(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.NE()>s)return h}}rat(s,t){const i=t.dit().fit(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.NE()>=s)return h}}oet(s,t){const i=t.dit().fit();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.NE()<=s)return e}}*ktt(){for(const t of this.sat)yield t}$q(){return{trackDataItemsJson:this.sat.map(t=>t.$q())}}Kq(t){t&&An.U$.kot(this.sat,t.trackDataItemsJson,Pn,this)}}}{const En=self.Ws;class Fn{constructor(t,s){this.Aet=s,this.nat="",this.oat=null,this.Urt=null,this.Df=null,this.aat=NaN,this.lat=NaN,this.Lot="default",this.Bot="default",this.Ku=!1,this.uat=null,this.cat=!0,t&&(this.nat=t[0][0],this.oat=t[0].slice(1),this.Urt=t[1],this.Df=t[2],this.aat=t[3],this.lat=t[4],this.Lot=t[5],this.Bot=t[6],this.Ku=!!t[7],this.uat=new En.fat(t[8],this),this.cat=t[9])}Gr(){this.uat.Gr(),this.uat=null,this.Aet=null,this.oat=null}wit(){return this.Aet}Det(){return this.uat||(this.uat=new En.fat(null,this)),this.uat}Ait(){return this.nat}Yet(t){this.nat=t}Ket(){return this.oat}Qet(t){this.oat=t}sht(){return this.Urt}eht(t){this.Urt=t}qG(){return this.Df}SetType(t){this.Df=t}aht(){return this.aat}lht(t){this.aat=t}uht(){return this.lat}cht(t){this.lat=t}Jtt(){return this.Lot}qtt(t){this.Lot=t}YZ(){return this.Bot}Xtt(t){this.Bot=t}Hit(){return this.Ku}zit(t){this.Ku=!!t}dht(){return!!this.cat}$q(){return{propertyKeyframeDataJson:this.uat.$q(),sourceAdapterId:this.nat,sourceAdapterArguments:this.oat,property:this.Urt,type:this.Df,min:this.aat,max:this.lat,interpolationMode:this.Lot,resultMode:this.Bot,enabled:this.Ku,canHavePropertyKeyframes:this.cat}}Kq(t){t&&(this.nat=t.sourceAdapterId,this.oat=t.sourceAdapterArguments,this.Urt=t.property,this.Df=t.type,this.aat=t.min,this.lat=t.max,this.Lot=t.interpolationMode,this.Bot=t.resultMode,this.Ku=t.enabled,this.cat=t.canHavePropertyKeyframes,this.Det().Kq(t.propertyKeyframeDataJson))}}En.Qot=class{constructor(t,s){this.tit=s,this.dat=[],En.U$.Eot(this.dat,t,Fn,this)}Gr(){this.tit=null;for(const t of this.dat)t.Gr();En.$n(this.dat),this.dat=null}Wit(){return this.tit}fet(){const t=new Fn(null,this);return this.dat.push(t),t}oht(t){const s=t.Det();return s.Fet()[0]}Zrt(t){const s=t.Det(),i=s.Fet();return i.at(-1)}pht(s,t){const i=t.Det(),e=i.Fet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.NE()===s)return r}}yht(s,t){const i=t.Det(),e=i.Fet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.NE()>s)return r}}Sht(s,t){const i=t.Det(),e=i.Fet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.NE()>=s)return r}}mht(s,t){const i=t.Det(),e=i.Fet();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.NE()<=s)return h}}*Sit(){for(const t of this.dat)yield t}$q(){return{propertyTrackDataItemsJson:this.dat.map(t=>t.$q())}}Kq(t){t&&En.U$.kot(this.dat,t.propertyTrackDataItemsJson,Fn,this)}}}{const Dn=self.Ws;class kn{constructor(t,s){if(this.Xot=s,this.B3=-1,this.pat="noease",this.mat=!1,this._tt=null,this.gat=null,t){this.B3=t[0],this.pat=t[1],this.mat=!!t[2];const i=t[3];this._tt=i?i.split(" "):[],this.gat=new Set(this._tt.map(t=>t.toLowerCase())),this.yat=null}}Gr(){this.Xot=null,Dn.$n(this._tt),this._tt=null,this.gat.clear(),this.gat=null,this.yat=null}dit(){return this.Xot}jZ(){return this.yat}Sat(t){this.yat=t}NE(){return this.B3}n8(t){this.B3=t,this.Xot.wat()}Dht(){return this.pat}x8(t){this.pat=t}Hit(){return this.mat}zit(t){this.mat=!!t}m8(){return this._tt}tst(t){this._tt=t?t.split(" "):[],this.gat=new Set(this._tt.map(t=>t.toLowerCase()))}bat(){return this.gat}$st(t){return this.gat.has(t.toLowerCase())}$q(){return{time:this.B3,ease:this.pat,enable:this.mat,tags:this._tt}}Kq(t){t&&(this.B3=t.time,this.pat=t.ease,this.mat=t.enable,this._tt=t.tags,this.gat=new Set(this._tt.map(t=>t.toLowerCase())))}}Dn.Zot=class{constructor(t,s){this.tit=s,this.cit=[],Dn.U$.Eot(this.cit,t,kn,this),this.wat()}Gr(){this.tit=null;for(const t of this.cit)t.Gr();Dn.$n(this.cit),this.cit=null}wat(){this.cit.sort((t,s)=>t.NE()-s.NE());for(let t=0;t<this.cit.length;t++){const s=this.cit[t];s.Sat(this.cit[t+1])}}Wit(){return this.tit}Mat(){return this.cit.length}fit(){return this.cit}uet(){const t=new kn(null,this);return this.cit.push(t),this.wat(),t}pet(t){for(const s of this.cit)if(t(s)){const i=this.cit.indexOf(s);-1!==i&&(s.Gr(),this.cit.splice(i,1))}this.vat(),this.wat()}vat(){this.cit.sort((t,s)=>t.NE()-s.NE())}_et(t){return this.cit.indexOf(t)}Iet(t){return this.cit[t]}*xat(){for(const t of this.cit)yield t}*Gat(){for(let t=this.cit.length-1;0<=t;t--)yield this.cit[t]}$q(){return{keyframeDataItemsJson:this.cit.map(t=>t.$q())}}Kq(t){t&&(Dn.U$.kot(this.cit,t.keyframeDataItemsJson,kn,this),this.wat())}}}{const On=self.Ws;class Ln{constructor(t,s){this.uat=s,this.crt=null,this.Tat=null,this.Df="",this.B3=NaN,this.pat="noease",this.mat=!1,this._at=null,this.Iat=void 0,this.Cat="line",t&&(this.crt=t[0][0],this.Tat=t[0][1],this.Df=t[0][2],this.B3=t[1],this.pat=t[2],this.mat=!!t[3],this.Cat=t[5],this._at=null,t[4]&&(this._at=new On.Rat(t[4],this)),this.yat=null,this.Aat=null)}Gr(){this.uat=null,this._at&&(this._at.Gr(),this._at=null),this.yat=null,this.Aat=null}Pat(){return this._at}Sat(t){this.yat=t}jZ(){return this.yat}Eat(t){this.Aat=t}VZ(){return this.Aat}tht(){return this.crt}kht(t){"color"===this.Df&&On.Se(t)?(this.crt[0]=On.an(t),this.crt[1]=On.ln(t),this.crt[2]=On.un(t)):this.crt=t}Qrt(){return this.Tat}Pht(t){"color"===this.Df&&On.Se(t)?(this.Tat[0]=On.an(t),this.Tat[1]=On.ln(t),this.Tat[2]=On.un(t)):this.Tat=t}eQ(){const t=this.uat.jet().YZ();return"relative"===t?this.tht():"absolute"===t?this.Qrt():void 0}qG(){return this.Df}SetType(t){this.Df=t}NE(){return this.B3}n8(t){this.B3=t,this.uat.Fat()}Dht(){return this.pat}x8(t){this.pat=t}Hit(){return this.mat}zit(t){this.mat=!!t}UZ(){return this.Cat}sQ(s){if(this._at){if(!this.Iat&&null!==this.Iat){const i=this._at.Dat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.C8()===s)return this.Iat=h,this.Iat}}this.Iat=null}return this.Iat}}$q(){const t=this._at;return{addonDataJson:t&&t.$q(),value:this.crt,aValue:this.Tat,type:this.Df,time:this.B3,ease:this.pat,enable:this.mat}}Kq(t){t&&(t.addonDataJson&&this._at._SetFromJson(t.addonDataJson),this.crt=t.value,this.Tat=t.aValue,this.Df=t.type,this.B3=t.time,this.pat=t.ease,this.mat=t.enable)}}On.fat=class{constructor(t,s){this.Ret=s,this.Eet=[],this.kat=[],On.U$.Eot(this.Eet,t,Ln,this),On.U$.Dot(this.kat,t,Ln,this),this.Fat()}Gr(){this.Ret=null;for(const t of this.Eet)t.Gr();On.$n(this.Eet),this.Eet=null;for(const s of this.kat)s.Gr();On.$n(this.kat),this.kat=null}Fat(){let s=this.Eet;s.sort((t,s)=>t.NE()-s.NE());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.Sat(s[t+1]),0<=t-1&&i.Eat(s[t-1])}(s=this.kat).sort((t,s)=>t.NE()-s.NE());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.Sat(s[t+1]),0<=t-1&&e.Eat(s[t-1])}}Rht(){const t=new Ln(null,this);return this.Eet.push(t),this.Fat(),t}Aht(t){for(const s of this.Eet)if(t(s)){const i=this.Eet.indexOf(s);-1!==i&&(s.Gr(),this.Eet.splice(i,1))}this.Oat(),this.Fat()}Oat(){this.Eet.sort((t,s)=>t.NE()-s.NE())}jet(){return this.Ret}Lat(){return this.Eet.length}Zrt(){return this.Eet[this.Eet.length-1]}Fet(){return this.Eet}WZ(){return this.kat}*Bat(){for(const t of this.Eet)yield t}*Nat(){for(let t=this.Eet.length-1;0<=t;t--)yield this.Eet[t]}$q(){const t=this.Eet,s=this.kat;return{propertyKeyframeDataItemsJson:t.map(t=>t.$q()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.$q())}}Kq(t){t&&(On.U$.kot(this.Eet,t.propertyKeyframeDataItemsJson,Ln,this),On.U$.kot(this.kat,t.propertyKeyframeDataItemsIncludingDisabledJson,Ln,this),this.Fat())}}}{const Bn=self.Ws;class Nn{constructor(t,s){this._at=s,this.Cf=t[0],this.Wat=t[1]}Gr(){this._at=null,this.Wat=null}Pat(){return this._at}C8(){return this.Cf}$q(){return{id:this.Cf,data:this.Wat}}Kq(t){t&&(this.Cf=t.id,this.Wat=t.data)}}class Wn extends Nn{constructor(t,s){super(t,s),this.jat=this.Wat[0],this.Vat=!!this.Wat[1],this.Uat=this.Wat[2],this.Hat=!!this.Wat[3]}Gr(){super.Gr()}nQ(){return this.jat}_ot(){return this.Vat}lQ(){return this.Uat}Iot(){return this.Hat}$q(){return Object.assign(super.$q(),{startAnchor:this.jat,startEnable:!!this.Vat,endAnchor:this.Uat,endEnable:!!this.Hat})}Kq(t){t&&(super.Kq(t),this.jat=t.startAnchor,this.Vat=!!t.startEnable,this.Uat=t.endAnchor,this.Hat=!!t.endEnable)}}class jn extends Nn{constructor(t,s){super(t,s),this.zat=this.Wat[0],this.Jat=this.Wat[1]}Gr(){super.Gr()}Rot(){return this.zat}Cot(){return this.Jat}$q(){return Object.assign(super.$q(),{direction:this.zat,revolutions:this.Jat})}Kq(t){t&&(super.Kq(t),this.zat=t.direction,this.Jat=t.revolutions)}}Bn.Rat=class{constructor(t,s){this.qat=s,this.Xat=[],Bn.U$.Eot(this.Xat,t,{prop:0,map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}Gr(){this.qat=null;for(const t of this.Xat)t.Gr();Bn.$n(this.Xat),this.Xat=null}Yat(){return this.qat}Dat(){return this.Xat}*$at(){for(const t of this.Xat)yield t}$q(){return{addonDataItemsJson:this.Xat.map(t=>t.$q())}}Kq(t){t&&Bn.U$.kot(this.Xat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Wn],["angle",jn]])},this)}}}{let m=self.Ws,i=0;m.not=class extends m.vK{constructor(t,s){super("tween-"+i++,t,s),this.Cf="",this.Kat=!1,this.Zat="start-value",this.hit=null,this.Qat=null,this.tlt=null,this.Cet=null,this.slt=null}Ftt(t){const s=m.vr(m.Event,"tweenstatereleased");s.ilt=this,t.dispatchEvent(s)}qG(){return 1}ntt(){for(const t of this.ttt.Ott().ktt())this.stt.push(m.elt.Hx(this,t));this.Cet=this.stt[0]}Ost(){const t=this.ttt.Ott().Lst(),s=m.elt.Hx(this,t);return this.stt.push(s),this.hlt(),s}hlt(){this.Cet=this.stt[0]}P8(t){return this.Cet.zst()[0]}rht(t){this.rlt=t}G8(){const t=this.LZ();if(t&&t.length){const s=t[0];if(this.Cet=s){const i=s.G8();return s.xit()?i:void 0}}}nlt(t){this.tlt||(this.tlt=[]),this.tlt.push(t)}olt(t){this.Qat||(this.Qat=[]),this.Qat.push(t)}llt(t){if(this.tlt){const s=this.tlt.indexOf(t);-1!==s&&this.tlt.splice(s,1)}}ult(t){if(this.Qat){const s=this.Qat.indexOf(t);-1!==s&&this.Qat.splice(s,1)}}clt(t,s){for(const i of this.stt)for(const e of i.pit)if(e.Jst()===s){const h=e.wit(),r=e.jet(),n=h.oht(r);n.kht(t),n.Pht(t)}}flt(t){for(const s of this.stt)for(const i of s.pit)if(i.Jst()===t)return i}dlt(t){for(const s of t){const i=this.flt(s);this.clt(i.Mht(),s)}if(this.Qtt()){const e=this.a8()-this.NE();this.o8(e);for(const h of this.stt)h.Uit(e);this.pst(0)}else{const r=this.NE();this.o8(r);for(const n of this.stt)n.Uit(r);this.pst(r)}this.mst()}plt(t,s){const i=this.flt(s),e=i.wit(),h=i.jet(),r=e.Zrt(h);r.n8(this.a8()),r.kht(t),r.Pht(t)}mlt(t){this.Cf=t}C8(){return this.Cf}glt(t){this.Zat=t}ylt(){return this.Zat}I8(t){this.Kat=t}_8(){return this.Kat}hst(){if(this.tlt)for(const t of this.tlt)t(this);if(!this.pZ())for(const s of this.stt)s.bet()}rst(){this.btt=this._f.nst()}gZ(){if(!this.xtt&&(this.xtt=!0,this.Qat))for(const t of this.Qat)t(this)}n8(t){this.Slt(),super.n8(t)}bst(t){(t=m.Se(t)?t:this.a8())<0?this.ltt=0:t>=this.a8()?this.ltt=this.a8():this.ltt=t,this.Cet.Mst()}oZ(t){if(!this.mZ()&&"current-state"===this.ylt())for(const s of this.stt)s.wet();super.oZ(t)}e8(t=!1){if(super.e8(t),!this.pZ())for(const s of this.stt)s.yet()}_0(t=!0,s=!1){this.Slt(),super._0(t,s)}Slt(){for(const t of this.stt){const s=t=>{const s=t.NE(),i=this.a8();return 0!==s&&s!==i};t.det(s),t.met(s)}}nK(){if(!this.s8()){const t=this.G8();if(t&&t.lN().uJ())return!1;this.QQ.eZ(this),this._st()}return!0}cZ(h,t,s){if(this.hit||(this.hit=this.G8()),!this.hit||this.hit.Pj())this.e8(!0),this.rst();else{const i=this.hit.pk();if(0!==(h=-1!==i?s*i:h)||0!==this.Ttt){this.Ttt=h;const r=this.ltt+this.utt,n=h*this.ctt,o=r+n,a=this.ttt.Pst;o<0?(this.ltt=0,this.utt=-o):a<=o?(this.ltt=a,this.utt=this.ltt-o):(this.ltt=o,this.utt=0);let t=!1,s=!1,i=this.u8(),e=this.f8();i||e?i&&!e?0<this.ctt?this.ltt>=a&&(this.bst(0),this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),s=!0):this.ltt<=0&&(this.bst(a),this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),s=!0):!i&&e?0<this.ctt?this.ltt>=a&&(this.pst(a),this.d8(-1*this.p8()),s=!0,1===this.ftt?this.dtt<this.MW()?(this.dtt++,this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong),this.ftt=0):(this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong),t=!0):0===this.ftt&&(this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong),this.ftt=1)):this.ltt<=0&&(this.pst(0),this.d8(-1*this.p8()),s=!0,1===this.ftt?this.dtt<this.MW()?(this.dtt++,this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong),this.ftt=0):(t=!0,this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong)):0===this.ftt&&(this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong),this.ftt=1)):i&&e&&(0<this.ctt?this.ltt>=a&&(this.pst(a),this.d8(-1*this.p8()),s=!0,0===this.ftt&&(this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong)),1===this.ftt&&(this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong)),this.ftt++,this.ftt=m.wrap(this.ftt,0,2)):this.ltt<=0&&(this.pst(0),this.d8(-1*this.p8()),s=!0,0===this.ftt&&(this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong)),1===this.ftt&&(this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),this.wlt(m.blt.Tween.WY.OnAnyTweenPingPong),this.wlt(m.blt.Tween.WY.OnTweensPingPong)),this.ftt++,this.ftt=m.wrap(this.ftt,0,2))):0<this.ctt?this.ltt>=a&&(this.dtt<this.MW()?(this.dtt++,this.bst(0),this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),s=!0):(this.pst(a),t=!0)):this.ltt<=0&&(this.dtt<this.MW()?(this.dtt++,this.bst(a),this.wlt(m.blt.Tween.WY.OnAnyTweenLoop),this.wlt(m.blt.Tween.WY.OnTweensLoop),s=!0):(this.pst(0),t=!0)),t?(this.Cet.Est(),this.e8(!0),this.rst()):(this.Cet.rf(this.ltt,!0,!1,s,this.Gtt,!1),this.Gtt&&(this.Gtt=!1))}}}wlt(t){const s=this.G8(),i=s.Mlt(m.blt.Tween);i.PushTriggerTween(this),this._f.YN(t,s,i.oW()),i.PopTriggerTween()}$q(){const t=super.$q(),s=this.Utt();return Object.assign(t,{tweenDataItemJson:s.$q(),id:this.Cf,destroyInstanceOnComplete:this.Kat,initialValueMode:this.Zat})}Kq(t){if(t){const s=this.Utt();s.Kq(t.tweenDataItemJson),super.Kq(t),this.Cf=t.id,this.Kat=t.destroyInstanceOnComplete,this.Zat=t.initialValueMode,this.hlt()}}static IsPlaying(t){return t.IsPlaying()}static S8(t){return t.S8()}static vlt(t){return!!t.f8()&&0===t.Ztt()}static xlt(t){return!!t.f8()&&1===t.Ztt()}static Glt(t){const s=t.runtime.Btt(),i=new m.Pot;if(t.json){i.Kq(t.json.tweenDataItemJson);const e=new m.not(i,s);return e.Kq(t.json),e}{const h=new m.not(i,s),r=(m.Ue(t.Tlt)||(t.Tlt=[t.Tlt]),h.mlt(t.id),h.tst(t.tags),h.glt(t.initialValueMode),h.I8(t.releaseOnComplete),h.l8(t.loop),h.c8(t.pingPong),h.o8(t.time),h.ztt(0),h.qtt("default"),h.Xtt(t.Tlt[0].resultMode),h.Ytt(t.repeatCount),h.Ost()),n=(r.jit(t.aW.vN()),r.qtt("default"),r.Xtt(t.Tlt[0].resultMode),r.zit(!0),r.Jit(t.aW.lN().rD()),t.aW.K6()),o=n.Yit()?n.Xit():t.aW.rO().Lm(),a=n.Yit()?n.Kit():t.aW.rO().qm(),l=(r.qit(o),r.$it(a),r.let()),u=(l.n8(0),l.x8("noease"),l.zit(!0),l.tst(""),r.let());u.n8(t.time),u.x8("noease"),u.zit(!0),u.tst("");for(const c of t.Tlt){const f=r.cet(),d=(f.Yet(c.sourceId),f.Zet(c.sourceArgs),f.iht(c.property),f.rht(c.type),f.lht(NaN),f.cht(NaN),f.qtt("default"),f.Xtt(c.resultMode),f.zit(!0),f.Cht()),p=(d.SetType(c.valueType),d.n8(0),d.x8(c.ease),d.zit(!0),d.kht(c.startValue),d.Pht(c.startValue),f.Cht());p.SetType(c.valueType),p.n8(t.time),p.x8(c.ease),p.zit(!0),p.kht(c.endValue),p.Pht(c.endValue),f.Wtt()}return h}}static jit(t,s){if(!isNaN(s))for(const i of t.LZ())i.jit(s)}_lt(t,s){return this.slt||(this.slt=m.vr(self.M8,this,t,s)),this.slt}}}{const Vn=self.Ws;Vn.elt=class extends Vn.Ltt{constructor(t,s){super(t,s),this.Ilt=null,this.Clt=null}static Hx(t,s){return Vn.vr(Vn.elt,t,s)}Rlt(){1===this.pit.length?this.Ilt=this.pit[0]:(this.Ilt=this.pit[0],this.Clt=this.pit[1])}mit(){for(const t of this.tit.wit().Sit())this.pit.push(Vn.Alt.Hx(this,t));this.Rlt()}cet(){const t=this.tit.wit(),s=t.fet(),i=Vn.Alt.Hx(this,s);return this.pit.push(i),this.Rlt(),i}oZ(){if(this.vit(),this.xit()||!this.Vtt()){const t=this.Mit(),s=t.Qtt(),i=s?0:this.Vit();for(const h of this.pit)h.oZ(i),0===this.git&&1===h.tet()&&(this.git=1),0===this.SK&&1===h.aZ()&&(this.SK=1);this.yit=0;const e=this.pit.some(t=>t.Ast());e&&(this.yit=1),this.uit=this.iet(i),this.oit=!1,this.ait=!1,this.rf(i)}}Fst(){}rf(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.hit||this.G8(),this.hit){const o=!this.hit.Pj();return o&&(!r||!this.lN().uJ())&&((this.Clt?(this.Ilt.rf(t,i,e,n),this.Clt):this.Ilt).rf(t,i,e,n),void(0!==this.Ilt.tet()&&(this.rit||(this.rit=this.hit.rO()),this.rit)&&this.rit._4()))}}kst(){}Kq(t){super.Kq(t),this.Rlt()}}}{const Un=self.Ws;Un.Alt=class extends Un.bit{constructor(t,s){super(t,s),this.Plt=!1}static Hx(t,s){return Un.vr(Un.Alt,t,s)}rf(t,s=!1,i=!1,e=!1){let h,r;if(this.Plt)h=this.Eet[0],r=this.Eet[1];else{if(s)h=this.Aet.mht(t,this.Ret);else{if(this.ket){const n=this.Mit(),o=this.ket.jZ(),a=this.ket.NE(),l=o?o.NE():n.a8();(t<=a||l<=t)&&(this.ket=this.Aet.mht(t,this.Ret))}else this.ket=this.Aet.mht(t,this.Ret);h=this.ket}r=h.jZ()}this.Pet.rf(t,h,r,s,i,e)}Cht(){const t=this.Ret.Det(),s=t.Rht();return this.ket=null,this.Plt=this.fht().length<=2,s}met(t){this.ket=null;const s=this.Ret.Det();s.Aht(t),this.Plt=this.fht().length<=2}$q(){return{sourceAdapterJson:this.Wtt().$q(),basic:this.Plt}}Kq(t){t&&(this.Wtt().Kq(t.sourceAdapterJson),this.Plt=t.basic)}}}{const Hn=self.Ws,zn=self.Fc;Hn.nf=class extends Hn.br{constructor(t,s=!0){super(),this.Ir=t[0],this.Elt=t[2],this.Flt=[];for(const i of t[1]){const e=Hn.Dlt.Hx(this,i);this.Flt.push(e)}for(let t=0;t<this.Flt.length;t++){const h=this.Flt[t],r=this.Flt[t+1],n=this.Flt[t-1];h.Sat(r),h.Eat(n)}this.klt=new Map,this.Olt=new Map,this.Llt(),s&&zn.uf(this.Ir,(t,s,i,e)=>this.rf(t,s,i,e),null,{transition:this})}static Hx(t){return Hn.vr(Hn.nf,t)}Gr(){for(const t of this.Flt)t.Gr();Hn.$n(this.Flt),this.Flt=null,this.klt.clear(),this.klt=null,this.Olt.clear(),this.Olt=null}lf(t){this.Elt=!!t}Blt(t){const s=this.Olt.get(t);if(s)return s;for(const i of this.Flt)if(i.Nlt()===t)return this.Olt.set(t,i),i}Wlt(s){for(let t=this.Flt.length-1;0<=t;t--){const i=this.Flt[t],e=i.Nlt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t.VZ();if(!h)break;if(h.Nlt()!==t.Nlt())break;t=h}return t}}}}rf(t,s,i,e){let h=t/e;if(this.Elt){const S=this.Blt(0),w=this.Blt(1),b=s+(s+i)*S.jlt(),M=(s+i)*w.jlt(),v=M-b;return 0===e?b+v:zn.ff(t,b,v,e)}0===e&&(h=1);let r=this.Wlt(h),n=r.jZ();if(!n){const x=r.VZ(),G=r;r=x,n=G}const o=n.Nlt()-r.Nlt(),a=Hn.Cr(h,r.Nlt(),n.Nlt(),0,o);if(r.Vlt()||0==o){const T=s+(s+i)*r.jlt(),_=(s+i)*n.jlt(),I=_-T;return 0==o?1===a?T+I:T:zn.ff(a,T,I,o)}let l=r.Nlt(),u=r.jlt(),c=r.Nlt()+r.Ult(),f=r.jlt()+r.Hlt(),d=n.Nlt()+n.zlt(),p=n.jlt()+n.Jlt(),m=n.Nlt(),g=n.jlt(),y=zn.Xc("spline")(a,l,u,c,f,d,p,m,g,this.klt.get(r));return(1-(y+=r.jlt()))*s+y*(s+i)}Llt(){this.klt.clear();for(let t=0;t<this.Flt.length-1;t++){const s=this.Flt[t];if(s._ot()){const i=s,e=this.Flt[t+1];if(e.Iot()){const h=i.Nlt(),r=i.Nlt()+i.Ult(),n=e.Nlt()+e.zlt(),o=e.Nlt();this.klt.set(i,zn.df(h,r,n,o))}}}}}}{const Jn=self.Ws;Jn.Dlt=class extends Jn.br{constructor(t,s){super(),this.qlt=t,this.Xlt=s[0],this.Ylt=s[1],this.$lt=s[2],this.Klt=s[3],this.Zlt=s[4],this.Qlt=s[5],this.Vat=s[6],this.Hat=s[7],this.tut=s[8],this.yat=null,this.Aat=null}Gr(){this.qlt=null}static Hx(t,s){return Jn.vr(Jn.Dlt,t,s)}Sat(t){this.yat=t}jZ(){return this.yat}Eat(t){this.Aat=t}VZ(){return this.Aat}Nlt(){return this.Xlt}jlt(){return this.Ylt}Ult(){return this.$lt}Hlt(){return this.Klt}zlt(){return this.Zlt}Jlt(){return this.Qlt}_ot(){return this.Vat}Iot(){return this.Hat}Vlt(){return"linear"===this.tut}sut(){return"cubic"===this.tut}}}{const qn=self.Ws;qn.iut=class extends qn.br{constructor(t){super(),this._f=t,this.eut=[]}Gr(){for(const t of this.eut)t.Gr();qn.$n(this.eut),this.eut=null}Hx(t){this.eut.push(qn.nf.Hx(t))}}}{const Xn=self.Ws;Xn.hut=class extends Xn.br{constructor(t){super(),this._f=t,this.rut=null,this.nut=null,this.lK=t=>this.uK(t.aW)}Gr(){if(this.wK(),this.rut){for(const t of this.rut.values())t.clear();this.rut.clear()}this.rut=null,this._f=null}Hx(t){if(this.rut||(this.rut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.rut.has(e)||this.rut.set(e,new Map),this.rut.get(e));h.set(i,t)}}bK(){const t=this._f.r0();t&&t.addEventListener("instancedestroy",this.lK)}wK(){const t=this._f.r0();t&&t.removeEventListener("instancedestroy",this.lK)}out(){return!!this.rut&&0!==this.rut.size}aut(t,s){let i;if(i=t instanceof Xn.lut?t.rD():t,this.rut.has(i)){const e=this.rut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}uut(t,s){this.nut||(this.nut=new WeakMap),this.nut.has(t)||this.nut.set(t,s)}cut(t){if(!this.nut)return"";const s=this.nut.get(t);return s||""}uK(t){this.nut&&this.nut.has(t)&&this.nut.delete(t)}}}{const Yn=self.Ws;Yn.fut=class{constructor(t){this._f=t,this.dut=new Yn.mut}Gr(){this.dut.Gr(),this.dut=null,this._f=null}TO(){return this._f}Hx(t){this.dut.Ac(t)}gut(t){return this.dut.ni(t)}yut(){return this.dut.yut()}}}{const $n=self.Ws;$n.Sut=class{constructor(t,s,i,e,h,r,n){this._f=h.TO(),this.wut=h,this.but=t,this.Mut=i,this.vut=e,this.Cy=s,this.H$=r,this.xut=n??r.G8().vN(),this.Gut(),this.Tut=this.Iut?._ut()??-1,this.Cut=[],this.Rut=null,this.Aut=NaN,this.Put=null,this.Eut=null,this.Fut=null,this.Dut="",this.kut=null,this.Out="",this.Lut="",this.But=0,this.Nut=!1,this.Stt=!1}Gr(){this.Stt||($n.$n(this.Cut),this.Cut=null,this._f=null,this.wut=null,this.vut=null,this.H$=null,this.Rut=null,this.Aut=NaN,this.Put&&this.Put.clear(),this.Put=null,this.Eut=null,this.Fut=null,this.Dut="",this.kut=null,this.Out="",this.Lut="",this.Stt=!0)}Tr(){return this.Stt}Wut(){return this.wut}TO(){return this._f}Sf(){return this.but}jut(){return this.vut}t8(){return this.Cy}FK(){return this.H$||(this.H$=this._f.tO(this.xut).K6()),this.H$}Vut(){return this.Uut(this.Tut)}Hut(){const t=this.Vut();return t?t.t8():""}zut(){const t=this.Vut();return t?t.m8():[]}Jut(t){const s=this.zut();if(!s)return!1;if(!s.length)return!1;const i=$n.Sut.sst(t);return!(!i||!i.length)&&i.every($n.Sut.est,s)}qut(t,s){const i=this.zut();if(!i)return!1;if(!i.length)return!1;const e=$n.Sut.sst(t);return!(!e||!e.length)&&e.every(t=>$n.Sut.Xut.call(i,t,s))}static est(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static sst(t){return t.trim().split(" ")}static Xut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>$n.compare(t.trim(),i,s.trim()))}Yut(t){const s=this.Vut();if(s){if($n.Se(t)){const i=s.$ut(),e=i?i[t]:void 0;if($n.Se(e))return this.Uut(e)}if("string"==typeof t)for(const h of s.$ut()){const r=this.Uut(h);if(r.r8(t))return this.Uut(r._ut())}}}Kut(t){const s=this.Yut(t);return s?s.t8():""}Zut(t){const s=this.Yut(t);return s?s.m8():""}Qut(t){const s=this.Vut();if(!s)return-1;const i=s.$ut();if(!i)return-1;const e=this.Yut(t);return e?i.indexOf(e._ut()):-1}tct(){const t=this.Vut();if(!t)return 0;const s=t.$ut();return s?s.length:0}Uut(t){return this.vut.Uut(t)}_0(){const t=this.sct();t.ict(!0)}ict(t){if(this.ect()){for(const[s,i]of this.ect().entries())i.ict(!1);this.ect().clear()}if(this.Put=null,this.Rut=null,this.hct=null,this.Eut=null,this.Dut="",this.kut=null,this.Out="",this.Lut="",this.Cut=[],t){this.wut.rct(this);const e=this.Iut._ut();e!==this.Tut&&this.nct(e)}else this.Tut=this.Iut._ut()}oct(){const t=this.vut.Uut(this.Tut);return t?t.uct().lct():0}cct(t){const s=this.fct(t);return s?s.Sf():""}dct(t){let s;return $n.Se(t)&&(s=this.fct(t)),"string"==typeof t&&(s=this.pct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.tht():""}mct(t){let s;if($n.Se(t)&&(s=this.fct(t)),s="string"==typeof t?this.pct(t):s){const i=s.gct();$n.Se(i)&&(this.Cut.push(this.Tut),this.nct(i))}}yct(t){const s=this.vut.Sct(t);if(s){const i=this.vut.Uut(s._ut());i&&(this.Cut.push(this.Tut),this.nct(i._ut()))}}wct(){const t=this.Cut.pop();$n.Se(t)?this.nct(t):this.bct()&&(this.wut.rct(this.bct(),!0,!1,!1),this.bct().nct(this.Mct()),this.sct().vct(this.bct()))}xct(t){const s=this.Vut();if(s){s._ut();const i=this.Yut(t);i&&(this.Cut.push(this.Tut),this.nct(i._ut()))}}Gct(s){if($n.Se(s)){const t=this.vut.Uut(this.Tut),i=t.uct().Tct();return!!i[s]}if("string"==typeof s){const e=this.vut.Uut(this.Tut),h=e.uct().Tct();for(let t=0;t<h.length;t++)if(h[t].Sf()===s)return!0}return!1}_ct(){this.Nut=!0}Ict(){return 0<this.But}Cct(){this.But++}Rct(){this.But--,0===this.But&&this.Nut&&this.wut.Act(this)}nct(t){const i=this.Tut,s=this.FK().G8();if(this.Cct(),this.wut.Pct(this),this._f.YN($n.VY.Flowchart.WY.OnBeforeAnyNodeChange,s),this._f.YN($n.VY.Flowchart.WY.OnBeforeTaggedNodeChange,s),this._f.YN($n.VY.Flowchart.WY.OnBeforeAnyNodeChangeInFlowchart,s),this._f.YN($n.VY.Flowchart.WY.OnBeforeTaggedNodeChangeInFlowchart,s),this.Tut=t,this._f.YN($n.VY.Flowchart.WY.OnAnyNodeChange,s),this._f.YN($n.VY.Flowchart.WY.OnTaggedNodeChange,s),this._f.YN($n.VY.Flowchart.WY.OnAnyNodeChangeInFlowchart,s),this._f.YN($n.VY.Flowchart.WY.OnTaggedNodeChangeInFlowchart,s),this.wut.Ect(),this.Rct(),!this.Tr()){const e=this.Uut(this.Tut);if("reference"===e.qG()){const h=e.Fct();if(this.Dct(e)){this.Cut.pop();const r=this.kct(e),n=(this.wut.rct(r,!0,!0,!1),r.Oct(this,i),this.sct());n.vct(r)}else{const o=e.Lct();if(h){this.Cut.pop();let s=e.Bct();if(s){let t=this.wut.Nct(s);for(;t;)s=$n.Mp(s),t=this.wut.Nct(s)}else{s=h+"-ref";let t=this.wut.Nct(s);for(;t;)s=$n.Mp(s),t=this.wut.Nct(s)}const a=this.wut.Wct(h,o,s,this.H$,!0),l=(a.Oct(this,i),this.jct(e,a),this.sct());a.Vct(l),l.vct(a)}}}}}fct(t){const s=this.vut.Uut(this.Tut);if(!s)return null;const i=s.uct().Tct();if(!i)return null;const e=i[t];return e||null}pct(t){const s=this.vut.Uut(this.Tut);if(!s)return null;const i=s.uct().Uct(t);return i||null}Gut(s){if("number"==typeof s){let t=this.Uut(s);t=t||this.vut.Hct(),this.Iut=t}else{let t=this.vut.Sct(this.Mut);t=t||this.vut.Hct(),this.Iut=t}}$q(){return this.Nut?null:{flowchartName:this.but,flowchartTag:this.Cy,startNodeTag:this.Mut,currentNodeId:this.Tut,previousNodeIds:this.Cut,pluginUID:this.H$.G8().vN(),reference:{previousFlowchartTag:this.bct()?this.bct().t8():"",previousStartNodeId:$n.Se(this.Mct())?this.Mct():NaN,referencesJson:this.zct(),currentReferenceFlowchartTag:this.Jct()?this.Jct().t8():"",rootFlowchartTag:this.sct()?this.sct().t8():""}}}zct(){if(!this.qct())return null;const t=[];for(const[s,i]of this.ect().entries())t.push({flowchartElementId:s._ut(),flowchartStateTag:i.t8()});return t.length?t:null}Kq(t){if(t){if(this.but=t.flowchartName,this.Cy=t.flowchartTag,this.Mut=t.startNodeTag,this.Tut=t.currentNodeId,this.Cut=t.previousNodeIds,this.xut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Dut=s.previousFlowchartTag,this.Aut=s.previousStartNodeId,this.kut=s.referencesJson,this.Out=s.currentReferenceFlowchartTag,this.Lut=s.rootFlowchartTag}this.Gut()}}bct(){return"string"==typeof this.Dut&&this.Dut&&(this.Rut=this.wut.Nct(this.Dut),this.Dut=""),this.Rut}Mct(){return this.Aut}Oct(t,s){this.Rut=t,this.Aut=s}Jct(){return"string"==typeof this.Out&&this.Out&&(this.Eut=this.wut.Nct(this.Out),this.Out=""),this.Eut}vct(t){this.Eut=t,this.Eut===this&&(this.Eut=null)}sct(){return"string"==typeof this.Lut&&this.Lut&&(this.Fut=this.wut.Nct(this.Lut),this.Lut=""),this.Fut||this}Vct(t){this.Fut=t}qct(){return this.Xct(),!!this.Put}Dct(t){return this.Xct(),this.Put&&this.Put.has(t)}Xct(){if(this.kut){this.Put&&this.Put.clear(),this.Put||(this.Put=new Map);for(const t of this.kut){const s=this.wut.Nct(t.flowchartStateTag),i=s.Uut(t.flowchartElementId);this.Put.set(i,s)}this.kut=null}}ect(){return this.Xct(),this.Put}kct(t){return this.Xct(),this.Put.get(t)}jct(t,s){this.Put||(this.Put=new Map),this.Put.set(t,s)}}}{const Kn=self.Ws;Kn.Yct=class{constructor(t){this._f=t,this.$ct=new Map,this.Kct=null,this.Zct=[],this.Qct=()=>this.pK(),this.tft=null}Gr(){Kn.$n(this.Zct),this.Zct=null,this.$ct.clear(),this.$ct=null,this.Kct=null,this._f=null,this.tft=null}TO(){return this._f}Wct(t,s,i,e,h,r){const n=this._f.Wut().gut(t);if(n){if(!this.$ct.has(i)){const o=new Kn.Sut(t,i,s,n,this,e,r);return this.$ct.set(i,o),h&&this.rct(o,!0),o}{const a=this.$ct.get(i);a&&this.Act(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Act(t){if(t._ct(),!t.Ict()){const s=t.t8();this.$ct.delete(s),t.Gr(),this.Kct===t&&(this.Kct=null)}}ift(t){t._0()}Nct(t){return this.$ct.get(t)}Pct(t){this.Zct.push(t)}Ect(){this.Zct.pop()}rct(t,s=!1,i=!1,e=!0){if(e){const h=t.Jct();t=h||t}t!==this.Kct&&(this.eft(),this.hft(t,s,i))}rft(t){return"string"==typeof t?this.Nct(t):this.Zct.length?this.Zct[this.Zct.length-1]:this.Kct}eft(){if(this.Kct&&!this.Kct.Tr()){const t=this.Kct.FK().G8();this.Kct.Cct(),this.Pct(this.Kct),this._f.YN(Kn.VY.Flowchart.WY.OnBeforeFlowchartChange,t),this.Ect(),this.Kct.Rct()}}hft(t,s=!1,i=!1){if(this.Kct=t,this.Kct&&!this.Kct.Tr()){const e=this.Kct.FK().G8();this.Kct.Cct(),this.Pct(this.Kct),this._f.YN(Kn.VY.Flowchart.WY.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Kct.Gut(i),s&&(this._f.YN(Kn.VY.Flowchart.WY.OnAnyNodeChange,e),this._f.YN(Kn.VY.Flowchart.WY.OnTaggedNodeChange,e)),this.Ect(),this.Kct.Rct()}}$q(){return{flowchartJsonObjects:[...this.$ct.values()].map(t=>t.$q()),currentFlowchartTag:this.Kct?this.Kct.t8():null}}Kq(t){if(t){this.tft=t;const s=new Map;for(const i of this.tft.flowchartJsonObjects){const e=i.flowchartTag;if(this.$ct.has(e)){const h=this.$ct.get(e);h.Kq(i),s.set(e,h)}else{const r=this.Wct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.Kq(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.$ct.entries())s.has(n)||o.Gr();this.$ct.clear(),this.$ct=s,this._f.PY()?this._f.r0().addEventListener("afterload",this.Qct):this.pK()}}pK(){this._f.r0().removeEventListener("afterload",this.Qct);const t=this.$ct.get(this.tft.currentFlowchartTag);t&&this.rct(t,!0),this.tft=null}}}{const Zn=self.Ws;Zn.mut=class{constructor(){this.nft=new Map}Gr(){for(const t of this.nft.values())t.Gr();this.nft.clear(),this.nft=null}Ac(t){const s=new Zn.oft(t),i=s.Sf();this.nft.set(i,s)}ni(t){return this.nft.get(t)}yut(){return!!this.nft.size}static aft(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Qn=self.Ws;Qn.oft=class{constructor(t){this.Ir=t[0],this.lft=new Qn.uft(t[1],this)}Gr(){this.lft.Gr(),this.lft=null}cft(){return this.lft}Uut(t){return this.lft.Uut(t)}Sct(t){return this.lft.Sct(t)}Hct(){return this.lft.Hct()}Sf(){return this.Ir}}}{const to=self.Ws;class so{constructor(t,s){this.lft=s,this.Df=t[7],this.fft=t[0],this.Cy=t[1],this.Cy?this._tt=this.Cy.trim().split(" ").map(t=>t.trim()):this._tt=[],this.dft=t[2],this.pft=null,this.mft=null,"dictionary"===this.Df&&(this.pft=t[3],this.mft=t[4]),this.gft=t[6],this.yft=null,this.Sft=null,this.wft=null,"reference"===this.Df&&(this.yft=t[8],this.Sft=t[9],this.wft=t[10]),this.bft=new to.Mft(t[5],this)}Gr(){this.lft=null}cft(){return this.lft}uct(){return this.bft}_ut(){return this.fft}t8(){return this.Cy}m8(){return this._tt}r8(t){if(!this._tt)return!1;if(!this._tt.length)return!1;const s=to.Sut.sst(t);return!(!s||!s.length)&&s.every(to.Sut.est,this._tt)}vft(){return this.gft}xft(t){this.gft=!!t}Gft(){if("dictionary"===this.Df)return!0;if("reference"===this.Df)return!1;throw new Error("unexpected flowchart node type: "+this.Df)}$ut(){return this.dft}Tft(){return this.pft}_ft(){return this.mft}qG(){return this.Df}Fct(){return this.yft}Lct(){return this.Sft}Bct(){return this.wft}}to.uft=class{constructor(t,s){this.vut=s,this.Ift=[],this.Cft=new Map,this.Rft=new Map,this.Aft=null,to.mut.aft(this.Ift,t,so,this);for(const i of this.Ift){const e=i._ut(),h=i.t8(),r=i.m8(),n=i.vft();if(this.Cft.set(e,i),h)for(const a of r)this.Rft.has(a)||this.Rft.set(a,new Set),this.Rft.get(a).add(i);n&&(this.Aft=i);const o=i.uct();for(const l of o.Pft()){const u=l._ut();this.Cft.set(u,l)}}this.Aft||this.Eft()}Gr(){this.vut=null;for(const t of this.Ift)t.Gr();to.$n(this.Ift),this.Ift=null}jut(){return this.vut}Uut(t){return this.Cft.get(t)}Sct(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Rft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}Hct(){return this.Aft}*Fft(){for(const t of this.Ift)yield t}Eft(){let t=0;for(const s of this.Fft())s.vft()&&t++;if(0===t){for(const i of this.Fft())if(i.Gft()&&!i.vft())return void i.xft(!0)}else{if(1===t)return;if(1<t){let t=!0;for(const e of this.Fft())e.Gft()&&(e.vft()&&t?t=!1:e.vft()&&!t&&e.xft(!1))}}for(const h of this.Fft())if(h.Gft()&&h.vft())return void(this.Aft=h)}}}{const io=self.Ws;class eo{constructor(t,s){this.bft=s,this.fft=t[0],this.Ir=t[1],this.crt=t[2],this.Dft=t[3]}Gr(){this.bft=null}uct(){return this.bft}_ut(){return this.fft}Sf(){return this.Ir}tht(){return this.crt}gct(){return this.Dft}}io.Mft=class{constructor(t,s){this.kft=s,this.Oft=[],this.Lft=new Map,io.mut.aft(this.Oft,t,eo,this);for(const i of this.Oft)this.Lft.set(i.Sf(),i)}Gr(){this.kft=null;for(const t of this.Oft)t.Gr();io.$n(this.Oft),this.Oft=null}Bft(){return this.kft}lct(){return this.Oft.length}Tct(){return this.Oft}Uct(t){return this.Lft.get(t)}*Pft(){for(const t of this.Oft)yield t}}}{const ho=self.Ws;ho.Nft=class extends ho.br{constructor(t){super(),this.Wft=t,this.jft=[],this.jft.push(ho.vr(ho.Vft,this)),this.Iy=0,this.Uft=this.jft[0]}Gr(){for(const t of this.jft)t.Gr();ho.$n(this.jft),this.Uft=null,this.Wft=null}lN(){return this.Wft}g5(){return this.Uft}Hft(){return this.jft[this.Iy-1]}wc(){this.g5().wc()}zft(){const t=this.jft,s=++this.Iy;if(s===t.length){const i=ho.vr(ho.Vft,this);t.push(i),this.Uft=i}else{const e=t[s];e._0(),this.Uft=e}}Jft(){const t=this.jft,s=++this.Iy,i=(s===t.length&&t.push(ho.vr(ho.Vft,this)),t[s]);i.z0(t[s-1]),this.Uft=i}PV(){this.Uft=this.jft[--this.Iy]}qft(i){const e=this.jft;for(let t=0,s=e.length;t<s;++t)e[t].qft(i)}}}{const ro=self.Ws;ro.Vft=class extends ro.br{constructor(t){super(),this.jft=t,this.Wft=this.jft.lN(),this.Xft=this.Wft.TO().KD(),this.Yft=!0,this.S7=[],this.$ft=[]}Gr(){this.Kft(),this.jft=null,this.Wft=null,this.Xft=null}Kft(){ro.$n(this.S7),ro.$n(this.$ft)}lN(){return this.Wft}Zft(){return this.Yft}Qft(){return this.Yft?!!this.Wft.S5():!!this.S7.length}m5(){return this.Yft?this.Wft.m5():this.S7}t0t(){return!!this.$ft.length}s0t(){return this.$ft}i0t(){const t=this.m5();return t.length?t:this.$ft}_0(){this.Yft=!0,ro.$n(this.$ft)}wc(){this.Yft=!0}z0(t){t.Zft()?this._0():(this.Yft=!1,ro.eo(this.S7,t.S7),ro.$n(this.$ft))}e0t(t){this.S7.push(t)}h0t(t){this.$ft.push(t)}r0t(t){this.Yft=!!t}n0t(){return this.S7}o0t(){return this.$ft}a0t(t){this.Yft=!1,ro.$n(this.S7),this.S7.push(t)}l0t(t){this.Yft=!1,ro.eo(this.S7,t)}u0t(t){this.Yft=!1,ro.$n(this.S7);for(const s of t)this.S7.push(s)}c0t(t,s){for(const i of s)t.has(i)||this.$ft.push(i)}f0t(t){for(const s of t)this.S7.push(s);ro.lo(this.$ft,t)}d0t(){ro.$n(this.$ft)}p0t(t){if(t)if(this.Xft.wV().HD().m0t()){this.Zft()&&(ro.$n(this.S7),ro.eo(this.$ft,t.lN().m5()),this.Yft=!1);const s=this.$ft.indexOf(t);-1!==s&&(this.S7.push(this.$ft[s]),this.$ft.splice(s,1))}else this.a0t(t)}qft(t){ro.lo(this.S7,t),ro.lo(this.$ft,t)}}}{const no=self.Ws;no.g0t=class extends no.br{constructor(t){super(),this.y0t=t,this._f=this.y0t.TO(),this.jft=[],this.jft.push(no.vr(no.S0t,this,null)),this.Iy=0,this.w0t=[]}Gr(){for(const t of this.jft)t.Gr();no.$n(this.jft),no.$n(this.w0t),this.y0t=null,this._f=null}BD(){return this.y0t}TO(){return this._f}wV(){return this.jft[this.Iy]}b0t(){return this.jft}M0t(){return this.Iy}bV(t){const s=this.jft,i=++this.Iy;if(i===s.length){const e=no.vr(no.S0t,this,t);return s.push(e),e}{const h=s[i];return h._0(t),h}}PV(){--this.Iy}v0t(t){this.w0t.push(t)}x0t(){this.w0t.pop()}$D(){const t=this.w0t;return 0===t.length?null:t.at(-1)}}}{const oo=self.Ws;oo.S0t=class extends oo.br{constructor(t,s){super(),this.jft=t,this._f=this.jft.TO(),this.G0t=s,this.T0t=0,this._0t=0,this.I0t=!1,this.C0t=!1,this.R0t=null,this.A0t=0,this.P0t=0,this.E0t=null}Gr(){this._0(null),this.jft=null,this._f=null}_0(t){this.G0t=t,this.T0t=0,this._0t=0,this.I0t=!1,this.C0t=!1,this.E0t=null}F0t(t,s){this.G0t=t,this.T0t=0,this._0t=s}D0t(){this.T0t=0,this._0t=0}HD(){return this.G0t}k0t(t){this.G0t=t}O0t(){return this.T0t}L0t(t){this.T0t=t}B0t(){return this._0t}N0t(t){this._0t=t}W0t(t){this.I0t=!!t}j0t(){return this.I0t}V0t(t){this.C0t=!!t}U0t(){return this.C0t}H0t(t){this.R0t=t}z0t(){return this.R0t}J0t(t,s){this.A0t=t,this.P0t=s}ZD(){return this.A0t}QD(t){this.P0t=t}q0t(){return this.P0t}X0t(){const t=this.G0t;return!!t.Y0t()||this.T0t<t.$0t()-1&&!!t.SV().length}K0t(t){this.E0t=t}Z0t(){return this.E0t}}}{const ao=self.Ws;ao.Q0t=class extends ao.br{constructor(t){super(),this.y0t=t,this._f=this.y0t.TO(),this.jft=[],this.Iy=-1,this.Uft=null,this.tdt=[]}Gr(){ao.$n(this.jft),this.y0t=null,this._f=null}sdt(t){this.tdt=t;const s=this.tdt.slice(0);this.jft.push(s),this.Iy=0,this.Uft=s}BD(){return this.y0t}TO(){return this._f}idt(){return this.Uft}bV(){const t=++this.Iy,s=this.jft;t===s.length?s.push(this.tdt.slice(0)):ao.eo(s[t],this.tdt),this.Uft=s[t]}PV(){this.Uft=this.jft[--this.Iy]}}}{const lo=self.Ws;lo.edt=class extends lo.br{constructor(t){super(),this.y0t=t,this._f=this.y0t.TO(),this.jft=[],this.Iy=-1}Gr(){lo.$n(this.jft),this.y0t=null,this._f=null}BD(){return this.y0t}TO(){return this._f}hdt(){return 0<=this.Iy}idt(){return this.jft[this.Iy]}bV(){if(++this.Iy,this.Iy===this.jft.length){const t=lo.vr(lo.rdt,this);return this.jft.push(t),t}{const s=this.jft[this.Iy];return s._0(),s}}PV(){--this.Iy}ndt(s){const i=this.jft;for(let t=this.Iy;0<=t;--t){const e=i[t];if(e.Sf()===s)return e}return null}odt(){return this.jft.slice(0,this.Iy+1)}}}{const uo=self.Ws;uo.rdt=class extends uo.br{constructor(t){super(),this.adt=t,this.Ir="",this.Iy=0,this.ldt=!1,this.udt=NaN}_0(){this.Ir="",this.Iy=0,this.ldt=!1,this.udt=NaN}vV(t){this.Ir=t}Sf(){return this.Ir}CV(t){this.Iy=t}rD(){return this.Iy}e8(){this.ldt=!0}AV(){return this.ldt}cdt(t){this.udt=t}fdt(){return this.udt}}}{const co=self.Ws;co.ddt=class extends co.br{constructor(){super(),this.jft=[],this.Iy=-1}Gr(){co.$n(this.jft)}idt(){return this.jft[this.Iy]}bV(){if(++this.Iy,this.Iy!==this.jft.length)return this.jft[this.Iy];{const t=[];return this.jft.push(t),t}}PV(){--this.Iy}}}{let t=function(t,s){return t.rD()-s.rD()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const fo=self.Ws;fo.pdt=class extends fo.br{constructor(t){super(),this._f=t,this.mdt=[],this.gdt=new Map,this.ydt=[],this.Sdt=new Map,this.wdt=new Map,this.bdt=new Map,this.Mdt=new Map,this.vdt=new Map,this.xdt=new Map,this.Gdt=0,this.Tdt=[],this._dt=[],this.Idt=[],this.Cdt=new Map,this.Rdt=new Map,this.Xft=fo.vr(fo.g0t,this),this.Adt=fo.vr(fo.Q0t,this),this.adt=fo.vr(fo.edt,this),this.Pdt=[],this.Edt=[],this.Fdt=[],this.Ddt=0,this.kdt=0,this.Odt=0,this.Ldt=[],this.Bdt=[],this.Ndt=[],this.Wdt=new Map,this.jdt=new Map,self.c3_callFunction=(t,s)=>this.Vdt(t,s)}Gr(){this.QY(),this.Xft.Gr(),this.Xft=null,this.Adt.Gr(),this.Adt=null,fo.$n(this.Edt),fo.$n(this.Fdt),this._f=null,fo.$n(this.mdt),this.gdt.clear()}Hx(t){const s=fo.vr(fo.Udt,this,t);this.mdt.push(s),this.gdt.set(s.Sf().toLowerCase(),s)}Hdt(t){this.Pdt.push(t)}zdt(){for(const t of this.Rdt.values())t.Jdt();for(const s of this.Cdt.values())s.zdt();for(const i of this.Rdt.values())i.zdt();for(const e of this.mdt)e.zdt();for(const h of this.mdt)h.bY();for(const r of this.Pdt)r.zdt(!1);fo.$n(this.Pdt),this.Adt.sdt(this.Idt)}TO(){return this._f}wY(t){return this.gdt.get(t.toLowerCase())||null}qdt(t){this.ydt.push(t),this.Sdt.set(t.Xdt(),t)}Ydt(t){this.wdt.set(t.EJ(),t)}$dt(t){this.bdt.set(t.EJ(),t)}Kdt(t){this.Mdt.set(t.EJ(),t)}Zdt(t){switch(t.Qdt()){case 0:this.Cdt.set(t.t1t().toLowerCase(),t);break;case 1:this.Rdt.set(t.t1t().toLowerCase(),t)}}s1t(t){this.xdt.set(t.EJ(),t),(t.uJ()?this.Tdt:this._dt).push(t)}i1t(i){2<=i.length&&i.sort(t);let e=this.vdt.get(i.length);e||(e=[],this.vdt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}e1t(t){return this.Idt.push(t.h1t()),this.Gdt++}KD(){return this.Xft}r1t(){return this.KD().wV()}HD(){return this.r1t().HD()}n1t(){const t=this.r1t(),s=t.HD();return s.o1t(t.O0t())}a1t(){const t=this.r1t(),s=t.HD();return s.l1t(t.B0t())}u1t(){return this.Adt}MV(){return this.adt}c1t(t){const s=[];for(t=t.f1t();t;)fo.rr(s,t.d1t()),t=t.f1t();return s}p1t(t){const s={};for(const i of this.c1t(t))s[i.m1t()]=i.g1t();return Object.create(Object.prototype,s)}y1t(t){return this.xdt.get(t)||null}S1t(t){return this.wdt.get(t)||null}w1t(t){return this.bdt.get(t)||null}b1t(t){return this.Mdt.get(t)||null}ND(t){return this.Cdt.get(t.toLowerCase())||null}M1t(t,s){let i=this.Rdt.get((t.Sf()+"."+s).toLowerCase());if(i)return i;if(!t.GJ())for(const e of t.v1t())if(i=this.Rdt.get((e.Sf()+"."+s).toLowerCase()))return i;return null}x1t(){return this.Tdt}G1t(){return this._dt}T1t(t){for(const s of this.Tdt)s._1t();if(t)for(const i of this._dt)i.L2()&&i._1t()}I1t(t){return this.Sdt.get(t.toLowerCase())||null}C1t(t){const s=this.wdt.get(t);return s&&s.R1t()?s:null}A1t(){return this.ydt}P1t(){for(const t of this.ydt)t.E1t()}F1t(){for(const t of this.mdt)t.D1t()}k1t(t){this.F1t(),this.Ddt++;for(const s of t.O$()){const i=s.JX();i&&(this._f.O1t(s),i.uI(),this._f.L1t())}this.Ddt--}async B1t(t){this.F1t(),this.Ddt++;for(const s of this.N1t(t))await this._f.W1t(s);this.Ddt--}*N1t(t){for(const s of t.O$()){const i=s.JX();i&&(this._f.O1t(s),yield*i.j1t(),this._f.L1t())}}V1t(t,s,i,e){let h=!1;if(!t.Lk())return this.U1t(s,i,e);this.kdt++;for(const r of t.O$()){const n=r.JX();if(n){this._f.O1t(r);for(const a of n.H1t()){const l=a.V1t(s,i,e);h=h||l}const o=n.V1t(s,i,e);h=h||o,this._f.L1t()}}return this.kdt--,h}*z1t(t,s,i,e){let h=!1;if(!t.Lk())return this.U1t(s,i,e);this.kdt++;for(const r of t.O$()){const n=r.JX();if(n){this._f.O1t(r);for(const a of n.H1t()){const l=yield*a.z1t(s,i,e);h=h||l}const o=yield*n.z1t(s,i,e);h=h||o,this._f.L1t()}}return this.kdt--,h}U1t(t,s,i){return this.Edt.push([t,s,i]),!1}J1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.Fdt.push([t,s,i,e]),h}*q1t(){if(this._f.X1t())throw new Error("should not be in breakpoint");const t=this._f.Wk();for(;this.Fdt.length;){const[s,i,e,h]=this.Fdt.shift(),r=yield*this.z1t(t,s,i,e);h(r)}}async Y1t(){for(const t of this.q1t())await this._f.W1t(t)}$1t(t,i,e,h){let r=!1,s=t.Lk(),n=s.JX();if(n){this.kdt++,this._f.O1t(s);const o=n.H1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].$1t(i,e,h);r=r||l}const a=n.$1t(i,e,h);return r=r||a,this._f.L1t(),this.kdt--,r}}*K1t(t,i,e,h){let r=!1,s=t.Lk(),n=s.JX();if(n){this.kdt++,this._f.O1t(s);const o=n.H1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].K1t(i,e,h);r=r||l}const a=yield*n.K1t(i,e,h);return r=r||a,this._f.L1t(),this.kdt--,r}}Z1t(){return this.kdt}Q1t(){return 0<this.Z1t()}tpt(){return++this.kdt}spt(){--this.kdt}ipt(){return 0<this.Ddt}G5(){return this.ipt()||this.Q1t()}UY(t){for(const[s,i,e]of this.Edt)this.V1t(t,s,i,e);fo.$n(this.Edt)}v5(t){t?this.Odt++:this.Odt--}gN(){return 0<this.Odt}ept(i){for(let t=0,s=i.length;t<s;++t)i[t].hpt().wc()}rpt(i){for(let t=0,s=i.length;t<s;++t)i[t].hpt().zft()}TV(i){for(let t=0,s=i.length;t<s;++t)i[t].hpt().Jft()}IV(i){for(let t=0,s=i.length;t<s;++t)i[t].hpt().PV()}zD(s){const i=new Set,e=this.Xft.b0t(),h=this.Xft.M0t();for(let t=0;t<=h;++t){const r=e[t].Z0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}npt(t){const s=new Set([...t]),i=this.zD(s);if(0<i.size){for(const e of i)e.hpt().zft();return[...i]}return null}opt(){const t=fo.vr(fo.apt,this);return this.Ldt.push(t),t}lpt(){return this.Ldt}upt(){if(this.Ldt.length){let i=this.r1t(),e=!1;this.Ddt++;for(let t=0,s=this.Ldt.length;t<s;++t){const h=this.Ldt[t];h.cpt()&&h.fpt(i),h.dpt()&&(e=!0)}e&&(this.ppt(),i._0(null)),this.Ddt--}}async mpt(){if(this.Ldt.length){let i=this.r1t(),e=!1;this.Ddt++;for(let t=0,s=this.Ldt.length;t<s;++t){const h=this.Ldt[t];h.cpt()&&await h.gpt(i),h.dpt()&&(e=!0)}e&&(this.ppt(),i._0(null)),this.Ddt--}}ppt(){const t=fo.ao(this.Ldt,t=>t.dpt());for(const s of t)s.Gr()}QY(){for(const t of this.Ldt)t.Gr();fo.$n(this.Ldt)}ypt(t){for(const s of this.Ldt)s.qft(t);for(const i of t){const e=this.jdt.get(i);if(this.jdt.delete(i),e)for(const{resolve:h}of e.Spt.values())h(!0)}}wpt(t){this.Bdt.push({promise:t,bpt:this.Z1t()})}Mpt(){fo.$n(this.Bdt)}vpt(){const s=this.Z1t();this.Bdt=this.Bdt.filter(t=>t.bpt<=s)}xpt(){const t=Promise.all(this.Bdt.map(t=>t.promise));return this.Bdt=[],t}sk(t){const s=t.toLowerCase();this.Ndt.push(s),this._f.YN(fo.VY.jY.WY.Gpt,null),this.Ndt.pop();for(const e of this._f.BD().lpt())e.Tpt()&&e._pt()===s&&e.Ipt();const i=this.Wdt.get(s);i&&(i.resolve(),this.Wdt.delete(s))}ek(t){const i=t.toLowerCase(),s=this.Wdt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.Wdt.set(i,{promise:t,resolve:s}),t}}Cpt(){if(0===this.Ndt.length)throw new Error("not in a signal");return this.Ndt.at(-1)}Rpt(t){let s=this.jdt.get(t);return s||(s={Apt:[],Spt:new Map},this.jdt.set(t,s)),s}kN(t,s){const i=this.Rpt(t),e=s.toLowerCase();i.Apt.push(e),this._f.YN(t.r5().Ept().WY.Ppt,t),i.Apt.pop();for(const r of this._f.BD().lpt())r.Fpt()&&r._pt()===e&&r.Dpt(t);const h=i.Spt.get(e);h&&(h.resolve(!1),i.Spt.delete(e)),0===i.Apt.length&&0===i.Spt.size&&this.jdt.delete(t)}ON(t,s){const i=this.Rpt(t),e=s.toLowerCase(),h=i.Spt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.Spt.set(e,{promise:t,resolve:s}),t}}kpt(t){const s=this.Rpt(t);if(s&&0!==s.Apt.length)return s.Apt.at(-1);throw new Error("not in a signal")}$q(){return{groups:this.Opt(),cnds:this.Lpt(),acts:this.Bpt(),vars:this.Npt(),waits:this.Wpt()}}Kq(t){this.jpt(t.groups),this.Vpt(t.cnds),this.Upt(t.acts),this.Hpt(t.vars),this.zpt(t.waits)}Opt(){const t={};for(const s of this.A1t())t[s.EJ().toString()]=s.Jpt();return t}jpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.C1t(e);h&&h.qpt(i)}}Lpt(){const t={};for(const[s,i]of this.bdt){const e=i.$q();e&&(t[s.toString()]=e)}return t}Vpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.bdt)r.Kq(s.get(h)||null)}Bpt(){const t={};for(const[s,i]of this.Mdt){const e=i.$q();e&&(t[s.toString()]=e)}return t}Upt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.Mdt)r.Kq(s.get(h)||null)}Npt(){const t={};for(const[s,i]of this.xdt)i.Xpt()||!i.uJ()&&!i.L2()||(t[s.toString()]=i.tht());return t}Hpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.y1t(e);h&&h.kht(i)}}Wpt(){return this.Ldt.filter(t=>!t.Ypt()).map(t=>t.$q())}zpt(t){this.QY();for(const s of t){const i=fo.apt.$pt(this,s);i&&this.Ldt.push(i)}}Kpt(){return[...this._f.Wk().O$()].map(t=>t.JX()).filter(t=>t).map(t=>t.Zpt())}Qpt(t){for(;t;){const s=t.f1t();if(s instanceof fo.tmt)return s;t=s}return null}Vdt(t,s){Array.isArray(s)||(s=[]);const i=this.ND(t.toLowerCase());if(!i)return null;if(!i.mc())return i.WD();const e=i.smt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].h1t()),s.length<e.length;);const h=i.VD();return h.JD(h.UD(),!1,i.XD(),i.WD(),...s)}}}{const po=self.Ws;po.Udt=class extends po.br{constructor(t,s){super(),this.y0t=t,this._f=t.TO(),this.Ir=s[0],this.imt=[],this.emt=new Map,this.hmt=new Map,this.rmt=new Map,this.nmt=!1,this.omt=[],this.amt=[],this.lmt=new Set;for(const i of s[1])this.umt(i,null,this.imt);this.cmt=this._f.h4()?{type:"sheet",name:this.Ir,fmt:0,children:[]}:null}Gr(){this.y0t=null,this._f=null}umt(t,s,i){switch(t[0]){case 0:case 3:this.dmt(t,s,i);break;case 1:this.pmt(t,s,i);break;case 2:this.mmt(t,s,i);break;case 4:this.gmt(t,s);break;case 5:this.ymt(t,s,i);break;case 6:this.Smt(t,s);break;default:throw new Error("invalid event type")}}dmt(t,s,i){const e=po.wmt.Hx(this,s,t);if(e.m0t()){i.push(e);const h=e.bmt();for(let t=0,s=h.length;t<s;++t)h[t].Mmt()&&this.vmt(e,t)}else e.Mmt()?this.vmt(e,0):i.push(e)}gmt(t,s){const i=po.tmt.xmt(this,s,t);this.y0t.Zdt(i)}Smt(t,s){const i=po.tmt.Gmt(this,s,t);this.y0t.Zdt(i)}pmt(t,s,i){const e=po.Tmt.Hx(this,s,t);i.push(e)}mmt(t,s,i){const e=po._mt.Hx(this,s,t);i.push(e)}ymt(t,s,i){const e=po.Imt.Hx(this,s,t);i.push(e)}vmt(h,r){h.m0t()||this.y0t.Hdt(h);const n=h.o1t(r),o=n.Cmt(),a=n.lN();if(n.Rmt()){let t=this.hmt.get(a),s=(t||(t=new Map,this.hmt.set(a,t)),n.Amt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.emt.get(a),s=(t||(t={Pmt:new Map,Emt:new Map},this.emt.set(a,t)),n.oW()),i,e=(s?(i=t.Emt.get(s))||(i=new Map,t.Emt.set(s,i)):i=t.Pmt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}zdt(){const i=this.imt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof po.wmt&&i[t+1].Fmt();i[t].zdt(e)}}Dmt(t){this.omt.push(t)}bY(){po.$n(this.amt),this.kmt(this),this.lmt.clear()}kmt(t){const s=t.amt,i=t.lmt;for(const e of this.omt){const h=e.Omt();e.Lmt()&&t!==h&&!i.has(h)&&(i.add(h),h.kmt(t),s.push(h))}}H1t(){return this.amt}BD(){return this.y0t}TO(){return this._f}Sf(){return this.Ir}Bmt(t,s){this.rmt.set(s,t)}Nmt(t){return this.rmt.get(t)||null}D1t(){this.nmt=!1}uI(){if(!this.nmt){const t=this._f,s=t.Wmt(),i=s?performance.now():0,e=(this.nmt=!0,this.BD()),h=e.r1t();for(const r of this.imt)r.uI(h),e.ept(r.SV()),e.Mpt(),t._5();h._0(null),s&&(this.cmt.fmt+=performance.now()-i)}}*j1t(){if(!this.nmt){this.nmt=!0;const t=this._f,s=this.BD(),i=s.r1t();for(const e of this.imt)yield*e.j1t(i),s.ept(e.SV()),s.Mpt(),t._5();i._0(null)}}V1t(e,h,r){if(!h)return this.jmt(e,h,null,null);{let t=h.lN(),s=!1,i=this.jmt(e,h,t,r);s=s||i;for(const n of t.v1t())i=this.jmt(e,h,n,r),s=s||i}}jmt(t,s,i,e){const h=this.emt.get(i);if(!h)return!1;const r=e?h.Emt.get(e):h.Pmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){const u=this.Vmt(s,a,l);o=o||u}return o}*z1t(e,h,r){if(!h)return yield*this.Umt(e,h,null,null);{let t=h.lN(),s=!1,i=yield*this.Umt(e,h,t,r);s=s||i;for(const n of t.v1t())i=yield*this.Umt(e,h,n,r),s=s||i}}*Umt(t,s,i,e){const h=this.emt.get(i);if(!h)return!1;const r=e?h.Emt.get(e):h.Pmt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){let t;t=a.Hmt()?this.Vmt(s,a,l):yield*this.zmt(s,a,l),o=o||t}return o}$1t(t,s,i){const e=s.lN(),h=this.hmt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=this.Vmt(null,a[0],a[1]);o=o||l}return o}*K1t(t,s,i){const e=s.lN(),h=this.hmt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Hmt()?this.Vmt(null,s,i):yield*this.zmt(null,s,i),o=o||e}return o}Vmt(t,s,i){let e=this._f,h=this.y0t,r=h.HD(),n=h.KD(),o=h.Z1t(),a=!1;r&&h.rpt(r.UD()),h.rpt(s.UD());const l=1<o,u=(l&&h.u1t().bV(),n.bV(s));if(t){const f=s.bmt()[i].lN(),d=f.g5();d.a0t(t),t.bN()&&t.Jmt()}let c=!0;if(s.i6()){const p=s.qmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Xmt(u)){c=!1;break}}return c&&(s.m0t()?s.Ymt(u,i):s.uI(u),a=u.j0t()),n.PV(),l&&h.u1t().PV(),h.IV(s.UD()),r&&h.IV(r.UD()),r||1!==o||(h.Mpt(),h.gN())||e._5(),a}*zmt(t,s,i){let e=this._f,h=this.y0t,r=h.HD(),n=h.KD(),o=h.Z1t(),a=!1;r&&h.rpt(r.UD()),h.rpt(s.UD());const l=1<o,u=(l&&h.u1t().bV(),n.bV(s));if(t){const f=s.bmt()[i].lN(),d=f.g5();d.a0t(t),t.bN()&&t.Jmt()}let c=!0;if(s.i6()){const p=s.qmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].$mt(u))){c=!1;break}}return c&&(s.m0t()?yield*s.Kmt(u,i):yield*s.j1t(u),a=u.j0t()),n.PV(),l&&h.u1t().PV(),h.IV(s.UD()),r&&h.IV(r.UD()),r||1!==o||(h.Mpt(),h.gN())||e._5(),a}Zpt(){return this.cmt}}}{let u=function(t,s){return!0};u;const mo=self.Ws,go=[];function*N(t,s){return!0}mo.wmt=class extends mo.br{constructor(t,s,i){super(),this.cX=t,this._f=t.TO(),this.Zmt=s,this.Qmt=null,this.Xft=this._f.BD().KD(),this.tgt=[],this.sgt=[],this.igt=!1,this.egt=!1,this.hgt=!1,this.rgt=!1,this.ngt=!!i[2],this.ogt=!1,this.agt=null,this.lgt=[],this.mrt=[],this.ugt=[],this.cgt=u,this.fgt=N,this.dgt=!1,this.pgt=!1,this.mgt="",this.ggt=!1,this.ygt=null,this.cmt=null,this.K7=i[4],this.Sgt=i[5],this.cX.Bmt(this,this.Sgt),this.wgt=this._f.h4()?{bgt:i[3][0],Mgt:i[3][1],vgt:!1,xgt:!1,Ggt:!1,Tgt:!1}:null,this.BD().Ydt(this),3===i[0]&&this._gt(i[1]);let e=0;for(const h of i[6]){const r=mo.Igt.Hx(this,h,e++);this.lgt.push(r),this.Cgt(r.lN())}e=0;for(const n of i[7]){const o=mo.Rgt.Hx(this,n,e++);this.mrt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.cX.umt(l,this,this.ugt)}this.lgt.length&&(this.ogt=null===this.lgt[0].lN()&&this.lgt[0].Cmt()===mo.VY.jY.WY.Agt),0===this.lgt.length&&(this.lgt=go),0===this.mrt.length&&(this.mrt=go),0===this.ugt.length&&(this.ugt=go)}static Hx(t,s,i){return mo.vr(mo.wmt,t,s,i)}_gt(t){this.dgt=!0,this.pgt=!!t[0],this.ggt=this.pgt,this.mgt=t[1].toLowerCase(),this.ygt=[],this.BD().qdt(this),this._f.h4()&&(this.cmt={type:"group",name:t[1],fmt:0,children:[]})}Pgt(t){this.ygt.push(t)}Egt(t,s){for(const i of t.rY().zY())s.includes(i)||s.push(i)}Fgt(t,s){if(t)if(s.includes(t)||s.push(t),t.GJ())for(const i of t.Dgt())i.bN()&&this.Egt(i,s);else t.bN()&&this.Egt(t,s)}Cgt(t){this.Fgt(t,this.tgt)}kgt(t){this.Fgt(t,this.sgt)}Ogt(){this.tgt=this._f.xJ()}zdt(t){this.rgt=!!t,this.Lgt(),this.Bgt();for(const s of this.lgt)s.zdt();if(0<this.mrt.length){let t=!1;for(const e of this.mrt)e.zdt(),e.Ngt()&&(t=!0);t?(this.cgt=this.Wgt,this.fgt=this.jgt):(this.cgt=this.Vgt,this.fgt=this.Ugt)}const i=this.ugt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof mo.wmt&&i[t+1].Fmt();i[t].zdt(h)}this.wgt&&this.Hgt(),this.cmt&&this.zgt().Zpt().children.push(this.cmt)}Zpt(){return this.cmt}zgt(){let t=this.i6();for(;t;){if(t.R1t())return t;t=t.i6()}return this.cX}Hgt(){const t=this.wgt;t.vgt=this.lgt.every(t=>t.Hmt()),t.xgt=this.mrt.every(t=>t.Hmt()),t.Ggt=this.ugt.every(t=>t.Hmt()),t.Tgt=t.vgt&&t.xgt&&t.Ggt}Jgt(){let t=this;for(;t.Hgt(),t=t.i6(););}Lgt(){if(this.R1t()){let t=this.i6();for(this.hgt=!0;t;){if(!t.R1t()){this.hgt=!1;break}t=t.i6()}}}qgt(){const t=this._f.xJ();if(this.tgt===t)this.sgt=t;else{this.sgt=mo.fo(this.tgt);let t=this.i6();for(;t;){for(const i of t.tgt)this.kgt(i);t=t.i6()}const s=this.BD();this.tgt=s.i1t(this.tgt),this.sgt=s.i1t(this.sgt)}}Bgt(){if(this.Xgt()){this.agt=[];let t=this.i6();for(;t;)this.agt.push(t),t=t.i6();this.agt.reverse()}}Ygt(){this.egt=!0,this.Zmt&&this.Zmt.Ygt()}Y0t(){return this.egt}SV(){return this.tgt}UD(){return this.igt||(this.igt=!0,this.qgt()),this.sgt}$gt(t){return this.tgt.includes(t)}qmt(){return this.agt}JX(){return this.cX}BD(){return this.cX.BD()}TO(){return this._f}i6(){return this.Zmt}Kgt(t){this.Qmt=t}f1t(){return this.Qmt||this.Zmt}Zgt(){return this.Sgt}Qgt(){return this.wgt&&this.wgt.Mgt}tyt(){return this.Qgt()&&this.wgt.bgt}syt(t){this.wgt.bgt=!!t,this.Jgt()}R1t(){return this.dgt}iyt(){return this.hgt}Fmt(){return this.ogt}eyt(){return this.rgt}Xdt(){return this.mgt}Jpt(){return this.ggt}E1t(){this.qpt(this.pgt)}qpt(t){if(t=!!t,!this.dgt)throw new Error("not a group");if(this.ggt!==t){this.ggt=t;for(const s of this.ygt)s.hyt();if(this.ygt.length){const i=this._f.eO(),e=i.JX();e&&e.bY()}}}EJ(){return this.K7}m0t(){return this.ngt}Mmt(){return this.lgt.length&&this.lgt[0].Mmt()}ryt(){return this.Qmt&&this.Qmt instanceof mo.tmt}Xgt(){return this.ryt()||this.lgt.some(t=>t.Mmt())}bmt(){return this.lgt}$0t(){return this.lgt.length}o1t(t){if((t=Math.floor(t))<0||t>=this.lgt.length)throw new RangeError("invalid condition index");return this.lgt[t]}nyt(t){return this.o1t(t)}oyt(t){let s=t.rD();if(0!==s){--s;const i=t.ayt()?t.lyt():t.lN();for(;0<=s;--s){const e=this.lgt[s];if(i===e.lN()||e.ayt()&&e.lyt()===i)return!1}}return!0}uyt(){return this.mrt}cyt(){return this.mrt.length}l1t(t){if((t=Math.floor(t))<0||t>=this.mrt.length)throw new RangeError("invalid action index");return this.mrt[t]}fyt(s){s=Math.floor(s);const t=this.mrt.find(t=>t.dyt()===s);if(t)return t;throw new RangeError("invalid action debug index")}pyt(t){return 0<=(t=Math.floor(t))&&t<this.mrt.length}myt(){return this.ugt}d1t(){return this.ugt.filter(t=>t instanceof mo.Tmt)}Xmt(i){i.k0t(this);let e=this.lgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.L0t(t),r.bW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.uI())h=!0;else if(!this.ngt)return!1}return!this.ngt||h}Ymt(t,s){t.k0t(this),t.L0t(s),this.lgt[s].uI()&&(this.cgt(t,0)&&this.gyt(t),t.W0t(!0))}*$mt(i){i.k0t(this);let e=this.lgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.L0t(t),r.bW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Hmt()?r.uI():yield*r.j1t())h=!0;else if(!this.ngt)return!1}return!this.ngt||h}*Kmt(t,s){t.k0t(this),t.L0t(s);let i=this.lgt[s];if(i.Hmt()?i.uI():yield*i.j1t())(this.yyt()?this.cgt(t,0):yield*this.fgt(t,0))&&(this.Syt()?this.gyt():yield*this.wyt()),t.W0t(!0)}uI(t){t.k0t(this),this.ogt||t.V0t(!1),this.ngt?this.byt(t):this.Myt(t)}*j1t(t){(this.tyt()||this._f.vyt())&&(yield this),t.k0t(this),this.ogt||t.V0t(!1),this.ngt?yield*this.xyt(t):yield*this.Gyt(t)}byt(i){let e=this.lgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.Mmt()){i.L0t(t);const n=r.uI();h=h||n}}i.W0t(h),h&&(this.cgt(i,0)&&this.gyt(i),this.rgt)&&i.V0t(!0)}*xyt(i){let e=this.lgt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.Mmt()){i.L0t(s);let t;t=r.Hmt()?r.uI():yield*r.j1t(),h=h||t}}if(i.W0t(h),h)(this.yyt()?this.cgt(i,0):yield*this.fgt(i,0))&&(this.Syt()?this.gyt():yield*this.wyt()),this.rgt&&i.V0t(!0)}Myt(i){const e=this.lgt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.L0t(t),h.uI());if(!r)return void i.W0t(!1)}i.W0t(!0),this.cgt(i,0)&&this.gyt(i),i.j0t()&&this.rgt&&i.V0t(!0)}*Gyt(i){const e=this.lgt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.L0t(t);if(!(h.Hmt()?h.uI():yield*h.j1t()))return void i.W0t(!1)}i.W0t(!0);(this.yyt()?this.cgt(i,0):yield*this.fgt(i,0))&&(this.Syt()?this.gyt():yield*this.wyt()),i.j0t()&&this.rgt&&i.V0t(!0)}Vgt(i,e){const h=this.mrt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.N0t(t),r.uI()}return!0}*Ugt(i,e){const h=this.mrt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.N0t(t),r.Hmt()?r.uI():yield*r.j1t()}return!0}Wgt(i,e){const h=this.BD(),r=this.mrt;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.N0t(t),n.uI());if(n.Tyt()&&!0===o)return!1;n._yt()&&o instanceof Promise&&h.wpt(o)}return!0}*jgt(i,e){const h=this.BD(),r=this.mrt;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.N0t(s);let t;if(t=n.Hmt()?n.uI():yield*n.j1t(),n.Tyt()&&!0===t)return!1;n._yt()&&t instanceof Promise&&h.wpt(t)}return!0}Iyt(t){this.cgt(t,t.B0t())&&this.gyt()}*Cyt(t){(yield*this.fgt(t,t.B0t()))&&(yield*this.wyt())}gyt(){if(this.ugt.length){const t=this.R1t()&&this._f.Wmt(),s=t?performance.now():0,i=this.Xft,e=i.bV(this);this.egt?this.Ryt(e):this.Ayt(e),i.PV(),t&&(this.cmt.fmt+=performance.now()-s)}}Ryt(e){const h=this.dgt,r=this.hgt,n=this.BD(),o=this.ugt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.SV(),u=!r||!h&&t<i;u&&n.TV(l),a.uI(e),u?n.IV(l):n.ept(l)}}Ayt(i){const e=this.ugt;for(let t=0,s=e.length;t<s;++t)e[t].uI(i)}*wyt(){if(this.ugt.length){const t=this.Xft,s=t.bV(this);this.egt?yield*this.Pyt(s):yield*this.Eyt(s),t.PV()}}*Pyt(e){const h=this.dgt,r=this.hgt,n=this.BD(),o=this.ugt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.SV(),u=!r||!h&&t<i;u&&n.TV(l),yield*a.j1t(e),u?n.IV(l):n.ept(l)}}*Eyt(i){const e=this.ugt;for(let t=0,s=e.length;t<s;++t)yield*e[t].j1t(i)}_V(i,e){e.D0t();const h=this.lgt;if(!this.m0t())for(let t=i.O0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.L0t(t),r.uI());if(!n)return!1}return this.cgt(e,0)&&this.gyt(e),!0}*Fyt(i,e){e.D0t();const h=this.lgt;if(!this.m0t())for(let t=i.O0t()+1,s=h.length;t<s;++t){const r=h[t];e.L0t(t);if(!(r.Hmt()?r.uI():yield*r.j1t()))return!1}return(this.yyt()?this.cgt(e,0):yield*this.fgt(e,0))&&(this.Syt()?this.gyt():yield*this.wyt()),!0}Hmt(){return!this.tyt()&&!this._f.vyt()&&this.wgt.Tgt}yyt(){return!this._f.vyt()&&this.wgt.xgt}Syt(){return!this._f.vyt()&&this.wgt.Ggt}Dyt(i){if(this.i6()){const e=this.qmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Xmt(i))return!1}return!0}*kyt(i){if(this.i6()){const e=this.qmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].$mt(i)))return!1}return!0}Oyt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ni(0));t.u1t().bV(),this.Qmt.Lyt(e)}else this.Qmt.Byt(s);else i&&t.u1t().bV()}Nyt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this._f,l=this.Xft,u=a.BD(),c=this.Qmt,f=c._yt(),d=u.tpt(),p=1<d;if(this.Oyt(u,s,p),n&&(i?u.TV(t):u.rpt(t)),null!==e){if(e.Wyt){const g=i?e.Wyt.g5():e.Wyt.hpt().Hft(),y=e.jyt.g5();y.l0t(g.m5()),y.d0t(),i||e.jyt.Vyt()}else if(e.Uyt){const S=e.Uyt.g5();S.l0t(e.Hyt),S.d0t()}e.zyt&&(o=u.npt(t))}const m=l.bV(this);return i&&m.K0t(t),this.Dyt(m)&&(m.k0t(this),f&&([r,h]=c.Jyt()),this.Myt(m),f)&&c.qyt(r),l.PV(),p&&u.u1t().PV(),null!==o&&u.IV(o),n&&u.IV(t),u.spt(),f||u.vpt(),h}*Xyt(t,s,i,e){let h,r,n=((this.tyt()||this._f.vyt())&&(yield this),0<t.length),o=null,a=this._f,l=this.Xft,u=a.BD(),c=this.Qmt,f=c._yt(),d=u.tpt(),p=1<d;if(this.Oyt(u,s,p),n&&(i?u.TV(t):u.rpt(t)),null!==e){if(e.Wyt){const g=i?e.Wyt.g5():e.Wyt.hpt().Hft(),y=e.jyt.g5();y.l0t(g.m5()),y.d0t(),i||e.jyt.Vyt()}else if(e.Uyt){const S=e.Uyt.g5();S.l0t(e.Hyt),S.d0t()}e.zyt&&(o=u.npt(t))}const m=l.bV(this);return i&&m.K0t(t),(yield*this.kyt(m))&&(m.k0t(this),f&&([r,h]=c.Jyt()),yield*this.Gyt(m),f)&&c.qyt(r),l.PV(),p&&u.u1t().PV(),null!==o&&u.IV(o),n&&u.IV(t),u.spt(),f||u.vpt(),h}Yyt(t,s){const i=this.UD(),e=0<i.length,h=this._f,r=this.Xft,n=h.BD(),o=n.tpt(),a=1<o,l=(a&&n.u1t().bV(),this.Qmt.Lyt(t),e&&(s?n.TV(i):n.rpt(i)),r.bV(this));this.Dyt(l)&&(l.k0t(this),this.Myt(l)),r.PV(),a&&n.u1t().PV(),e&&n.IV(i),n.spt(),n.vpt()}*$yt(t,s){(this.tyt()||this._f.vyt())&&(yield this);const i=this.UD(),e=0<i.length,h=this._f,r=this.Xft,n=h.BD(),o=n.tpt(),a=1<o,l=(a&&n.u1t().bV(),this.Qmt.Lyt(t),e&&(s?n.TV(i):n.rpt(i)),r.bV(this));(yield*this.kyt(l))&&(l.k0t(this),yield*this.Gyt(l)),r.PV(),a&&n.u1t().PV(),e&&n.IV(i),n.spt(),n.vpt()}JD(t,s,i,e,...h){let r,n,o=0<t.length,a=this._f,l=this.Xft,u=a.BD(),c=this.Qmt,f=c._yt(),d=u.tpt(),p=1<d,m=(p&&u.u1t().bV(),0<h.length&&this.Qmt.Lyt(h),o&&(s?u.TV(t):u.rpt(t)),l.bV(this));return m.J0t(i,e),l.v0t(m),a.xV(!1),this.Dyt(m)&&(m.k0t(this),f&&([n,r]=c.Jyt()),this.Myt(m),f)&&c.qyt(n),a.xV(!0),l.PV(),l.x0t(),p&&u.u1t().PV(),o&&u.IV(t),u.spt(),f||u.vpt(),r||m.q0t()}}}{let e=self.Ws,t=[],s=!1;e.Imt=class extends e.br{constructor(t,s,i){super();const e=t.TO(),h=t.BD(),r=(this.cX=t,this.y0t=h,this._f=t.TO(),this.Zmt=s,e.Kyt(i[1]));this.Zyt=r,this.Sgt=i[2],this.cX.Bmt(this,this.Sgt),this.wgt=e.h4()?{bgt:i[3][0],Mgt:i[3][1]}:null}static Hx(t,s,i){return e.vr(e.Imt,t,s,i)}zdt(){const t=this.Zyt,s=this._f.BD().p1t(this);this.Zyt=t.bind(null,this._f.PL(),s)}i6(){return this.Zmt}f1t(){return this.Zmt}JX(){return this.cX}Zgt(){return this.Sgt}Qgt(){return this.wgt&&this.wgt.Mgt}tyt(){return this.Qgt()&&this.wgt.bgt}syt(t){this.wgt.bgt=!!t}Fmt(){return!1}SV(){return t}UD(){return this.Zmt?this.Zmt.UD():t}uI(t){t.k0t(this),this.y0t.wpt(this.Qyt())}async Qyt(){try{await this.Zyt()}catch(t){console.error(`Unhandled exception running script %c${this.JX().Sf()}, event ${this.Zgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*j1t(t){t.k0t(this),(this.tyt()||this._f.vyt())&&(yield this),this.uI(t)}Hmt(){return!this.tyt()&&!this._f.vyt()}static tSt(){return s}static sSt(){s=!0}}}{const yo=self.Ws;yo.tmt=class extends yo.br{constructor(t,s,i){super(),this.cX=t,this._f=t.TO(),this.Zmt=s,this.iSt=0,this.eSt="",this.hSt=0,this.rSt=[],this.nSt=!0,this.oSt="",this.Wft=null,this.aSt=!1,this.lSt=[],this.uSt=!1,this.cSt=!1,this.fSt=0,this.dSt=-1,this.pSt=new Map,this.mSt=yo.wmt.Hx(t,s,i),this.mSt.Kgt(this)}gSt(t){this.iSt=0,this.eSt=t[0],this.hSt=t[1],this.rSt=t[2].map(t=>yo.Tmt.Hx(this.cX,this,t)),this.nSt=t[3],this.cSt=t[4],this.uSt=t[5]}ySt(t){this.iSt=1,this.oSt=t[1],this.Wft=this._f.tJ(t[2]),this.mSt.Cgt(this.Wft),this.eSt=this.Wft.Sf()+"."+this.oSt,this.hSt=t[3],this.rSt=t[4].map(t=>yo.Tmt.Hx(this.cX,this,t)),this.nSt=t[5],this.cSt=t[6],this.uSt=t[7],this.Wft.SSt(this)}static xmt(t,s,i){const e=yo.vr(yo.tmt,t,s,i),h=i[1];return e.gSt(h),e}static Gmt(t,s,i){const e=yo.vr(yo.tmt,t,s,i),h=i[1];return e.ySt(h),e}Jdt(){if(this.Wft&&this.Wft.GJ())for(const t of this.Wft.Dgt())if(t.wSt(this.oSt)){this.aSt=!0;break}}zdt(){for(const t of this.rSt)t.zdt();this.mSt.zdt(!1)}Qdt(){return this.iSt}d1t(){return this.rSt}smt(){return this.rSt}jD(){return this.rSt.length}bSt(t){this.lSt.push(t)}MSt(){return this.lSt}Byt(i){const e=this.rSt;for(let t=0,s=e.length;t<s;++t)e[t].kht(i[t].ni(0))}Lyt(i){const e=this.rSt;for(let t=0,s=e.length;t<s;++t)e[t].kht(i[t])}vSt(){return this.rSt.map(t=>t.tht())}i6(){return this.Zmt}f1t(){return this.Zmt}t1t(){return this.eSt}xSt(){return this.oSt}GSt(){return this.aSt}XD(){return this.hSt}lN(){return this.Wft}mc(){return this.nSt}WD(){switch(this.hSt){case 0:return null;case 2:return"";default:return 0}}VD(){return this.mSt}qD(){return this.uSt}_yt(){return this.cSt}Jyt(){const t=this.fSt++;this.dSt=t;let s,i=new Promise(t=>s=t);return this.pSt.set(t,{resolve:s,TSt:0}),[t,i]}qyt(t){const s=this.pSt.get(t);0===s.TSt&&(s.resolve(),this.pSt.delete(t)),this.dSt=-1}_St(){const t=this.pSt.get(this.dSt);return t.TSt++,this.dSt}ISt(t){this.dSt=t;const s=this.pSt.get(t);s.TSt--}CSt(t,s){const i=new Map,e=[];for(const h of this.Wft.g5().m5()){const r=h.lN();if(r.wSt(this.oSt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.mSt.Nyt(t,s,this.uSt,{Uyt:this.Wft,Hyt:e}),0<i.size)for(const[o,a]of i){const l=o.RSt(this.oSt).VD(),u=[...new Set([...t,...l.SV()])];l.Nyt(u,s,this.uSt,{Uyt:o,Hyt:a})}}*ASt(t,s){const i=new Map,e=[];for(const h of this.Wft.g5().m5()){const r=h.lN();if(r.wSt(this.oSt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.mSt.Xyt(t,s,this.uSt,{Uyt:this.Wft,Hyt:e})),0<i.size)for(const[o,a]of i){const l=o.RSt(this.oSt).VD(),u=[...new Set([...t,...l.SV()])];yield*l.Xyt(u,s,this.uSt,{Uyt:o,Hyt:a})}}}}{const So=self.Ws,wo=[];So.Tmt=class extends So.br{constructor(t,s,i){super();const e=t.BD();this.cX=t,this.y0t=e,this._f=t.TO(),this.Zmt=s,this.Adt=e.u1t(),this.Ir=i[1],this.Df=i[2],this.PSt=i[3],this.h2=!!i[4],this.ESt=!!i[5],this.FSt=s instanceof So.tmt,this.K7=i[6],this.DSt=this._f.m1t(i[8]),this.kSt=t=>this.kht(t),this.OSt=()=>this.tht(),this.LSt=!this.Zmt||this.h2||this.ESt,this.crt=this.PSt,this.BSt=-1,this.NSt()&&(this.crt=this.crt?1:0),!this.WSt()||this.L2()||this.Xpt()||(this.BSt=e.e1t(this)),e.s1t(this)}static Hx(t,s,i){return So.vr(So.Tmt,t,s,i)}zdt(){if(this.WSt()&&!this.L2()&&!this.Xpt()&&!this.jSt()){const t=this.y0t.Qpt(this);t&&t.bSt(this)}}Sf(){return this.Ir}m1t(){return this.DSt}i6(){return this.Zmt}f1t(){return this.i6()}uJ(){return!this.i6()}WSt(){return!this.uJ()}jSt(){return this.FSt}L2(){return this.h2}Xpt(){return this.ESt}ye(){return 0===this.Df}Ce(){return 1===this.Df}NSt(){return 2===this.Df}Fmt(){return!1}EJ(){return this.K7}h1t(){return this.PSt}SV(){return wo}uI(t){!this.WSt()||this.L2()||this.Xpt()||this.kht(this.h1t())}Hmt(){return!0}*j1t(t){this.uI(t)}kht(t){this.ye()?"number"!=typeof t&&(t=parseFloat(t)):this.Ce()?"string"!=typeof t&&(t=t.toString()):this.NSt()&&(t=t?1:0),this.LSt?this.crt=t:this.Adt.idt()[this.BSt]=t}tht(){return this.LSt?this.crt:this.Adt.idt()[this.BSt]}VSt(){let t=this.tht();return this.NSt()?!!t:t}_1t(){this.crt=this.PSt}g1t(){return{configurable:!1,enumerable:!0,get:this.OSt,set:this.kSt}}}}{const bo=self.Ws,Mo=[];bo._mt=class extends bo.br{constructor(t,s,i){super();const e=t.BD();this.cX=t,this.y0t=e,this._f=t.TO(),this.Zmt=s,this.USt=null,this.HSt=i[1],this.T0=!0}static Hx(t,s,i){return bo.vr(bo._mt,t,s,i)}zdt(){this.USt=this.y0t.wY(this.HSt),this.cX.Dmt(this);let t=this.i6();for(;t;)t instanceof bo.wmt&&t.R1t()&&t.Pgt(this),t=t.i6();this.hyt(),this._f.h4()&&this.cX.Zpt().children.push(this.USt.Zpt())}i6(){return this.Zmt}SV(){return Mo}Omt(){return this.USt}uI(t){const s=!!this.i6(),i=this._f.xJ();s&&this.y0t.rpt(i),this.USt.uI(),s&&this.y0t.IV(i)}*j1t(t){const s=!!this.i6(),i=this._f.xJ();s&&this.y0t.rpt(i),yield*this.USt.j1t(),s&&this.y0t.IV(i)}Hmt(){return!1}Lmt(){return this.T0}hyt(){let t=this.i6();for(;t;){if(t instanceof bo.wmt&&t.R1t()&&!t.Jpt())return void(this.T0=!1);t=t.i6()}this.T0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const vo=self.Ws;vo.zSt=class extends vo.br{constructor(t){super(),this.Sv=t,this._f=t.TO()}zdt(){}static JSt(t,s){const i=s[0],e=[Io,To,_o,Co,xo,Go];return vo.vr(e[i],t,s)}};class xo extends vo.zSt{constructor(t,s){super(t),this.qSt=this._f.BH(),this.Zyt=this._f.Kyt(s[1]),this.Zyt!==vo.VY.jY.Crt.random&&this.Zyt!==vo.VY.jY.Crt.XSt||this.Sv.YSt()}$St(){return this.qSt.KSt(this.Zyt,this.qSt)}}class Go extends vo.zSt{constructor(t,s){super(t),this.ZSt=null,this.eSt=s[1],this.Sv.YSt()}zdt(){const t=this._f.BD(),s=(this.ZSt=t.ND(this.eSt),this.eSt=null,this.Sv.VD()),i=this.ZSt.VD();this.QSt=[...new Set([...s.UD(),...i.UD()])],this.QSt=t.i1t(this.QSt)}$St(){const t=this.ZSt;if(t.mc()){const s=t.VD();return vo.wmt.prototype.JD.bind(s,this.QSt,t.qD(),t.XD(),t.WD())}{const i=t.WD();return()=>i}}}class To extends vo.zSt{constructor(t,s){super(t),this.Wft=this._f.tJ(s[1]),this.Zyt=this._f.Kyt(s[2]),this.twt=!!s[3],this.Xft=this._f.BD().KD(),this.Sv.swt(this.Wft)}$St(){return this.Wft.r5().KSt(this.Zyt,this.Wft.i5().K6())}iwt(...t){const s=this.Wft,i=s.g5().i0t(),e=i.length;if(0===e)return this.twt?"":0;const h=a(this.Sv.ewt(),e);return this.Xft.wV().H0t(s),this.Zyt.apply(i[h].K6(),t)}hwt(t,...s){const i=this.Wft,e=i.m5(),h=e.length;if(0===h||"number"!=typeof t)return this.twt?"":0;const r=a(t,h);return this.Xft.wV().H0t(i),this.Zyt.apply(e[r].K6(),s)}}class _o extends vo.zSt{constructor(t,s){super(t),this.Wft=this._f.tJ(s[1]),this.rwt=s[3],this.twt=!!s[2],this.Sv.swt(this.Wft)}nwt(){const t=this.Wft.g5().i0t(),s=t.length;if(0===s)return this.twt?"":0;const i=a(this.Sv.ewt(),s);return t[i].owt(this.rwt)}awt(){const t=this.Wft,s=t.g5().i0t(),i=s.length;if(0===i)return this.twt?"":0;const e=a(this.Sv.ewt(),i),h=s[e],r=h.lN().lwt(t.uwt());return h.owt(this.rwt+r)}cwt(t){const s=this.Wft,i=s.m5(),e=i.length;if(0===e||"number"!=typeof t)return this.twt?"":0;let h=a(t,e),r=i[h],n=0;return s.GJ()&&(n=r.lN().lwt(s.uwt())),r.owt(this.rwt+n)}}class Io extends vo.zSt{constructor(t,s){super(t),this.Wft=this._f.tJ(s[1]),this.fwt=this.Wft.rrt(s[2]),this.dwt=this.Wft.Oit(s[2]),this.Zyt=this._f.Kyt(s[3]),this.twt=!!s[4],this.Xft=this._f.BD().KD(),this.Sv.swt(this.Wft)}pwt(...t){const s=this.Wft,i=s.g5().i0t(),e=i.length;if(0===e)return this.twt?"":0;let h=a(this.Sv.ewt(),e),r=(this.Xft.wV().H0t(s),i[h]),n=0;return s.GJ()&&(n=r.lN().mwt(s.uwt())),this.Zyt.apply(r.hrt()[this.dwt+n].K6(),t)}gwt(t,...s){const i=this.Wft,e=i.m5(),h=e.length;if(0===h||"number"!=typeof t)return this.twt?"":0;let r=a(t,h),n=(this.Xft.wV().H0t(i),e[r]),o=0;return i.GJ()&&(o=n.lN().mwt(i.uwt())),this.Zyt.apply(n.hrt()[this.dwt+o].K6(),s)}}class Co extends vo.zSt{constructor(t,s){super(t),this.ywt=null,this.Swt=s[1]}zdt(){this.ywt=this._f.BD().y1t(this.Swt)}wwt(){return this.ywt}}}{let r=function(t){const s=self.bwt[t];if(s)return s;throw new Error("invalid expression number")};r;const Ro=self.Ws;Ro.Mwt=class extends Ro.br{constructor(t,s,i){super(),this.Sv=t,this.Iy=i,this.Df=s,this.ni=null,this.vwt=!1,this.ESt=!1}static Hx(t,s,i){const e=s[0],h=[Ao,Po,Bo,Fo,ko,Eo,Oo,Ao,Fo,Fo,No,Wo,Bo,Vo,Po,Lo,Do,jo,Uo,Ho,zo,Jo];return Ro.vr(h[e],t,e,i,s)}zdt(){}YSt(){this.vwt=!0}swt(t){this.vwt||!t||t.r5().FL()||(this.vwt=!0)}xwt(){return this.vwt}rD(){return this.Iy}TO(){return this.Sv.TO()}VD(){return this.Sv.VD()}Xpt(){return this.ESt}Gwt(){return 4===this.Df}};class Ao extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Twt=0;const h=e[1];this._wt=h[0],this.Iwt=[],this.Cwt=null;for(let t=1,s=h.length;t<s;++t)this.Iwt.push(Ro.zSt.JSt(this,h[t]));this.Iwt.length?this.ni=this.Rwt:(this.ni=r(this._wt),this.ESt=!0)}Awt(t){if(t<0||t>=this.Iwt.length)throw new RangeError("invalid numbered node");return this.Iwt[t]}zdt(){for(const s of this.Iwt)s.zdt();const t=r(this._wt);this.Iwt.length?this.Cwt=t(this):this.Cwt=t}ewt(){return this.Twt}Rwt(t){return this.Twt=t,this.Cwt()}}class Po extends Ao{constructor(t,s,i,e){super(t,s,i,e),this.ni=this.Pwt,14===s&&(this.VD().Ogt(),this.Sv instanceof Ro.Rgt)&&this.VD().Ygt()}Pwt(t){this.Twt=t;const s=this.Cwt();return"string"==typeof s?s:""}Ewt(){return r(this._wt)()}}class Eo extends Ao{constructor(t,s,i,e){super(t,s,i,e),2<=t.Fwt()?this.ni=this.j5:this.ni=this.nO,this.ESt=!1}nO(t){this.Twt=t;const s=this.Cwt(),i=this.TO().eO();return i.nO(s)}j5(t){const s=this.nO(t);return s?s.j5():null}}class Fo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Dwt=e[1],this.ni=this.kwt,this.ESt=!0}kwt(){return this.Dwt}}class Do extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Owt=e[1],this.ni=this.Lwt,this.ESt=!0}Lwt(){return this.Owt}}class ko extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Wft=this.TO().tJ(e[1]),2<=t.Fwt()?this.ni=this.QL:this.ni=this.lN;const h=this.VD();h.Cgt(this.Wft),this.Sv instanceof Ro.Rgt?h.Ygt():h.i6()&&h.i6().Ygt(),this.ESt=!0}lN(){return this.Wft}QL(){return this.Wft?this.Wft.QL():null}}class Oo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.J7=this.TO().Wk().P$(e[1]),2<=t.Fwt()?this.ni=this.Bk:this.ni=this.jk,this.ESt=!0}jk(){return this.J7}Bk(){return this.J7?this.J7.Bk():null}}class Lo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.DZ=this.TO().Btt().VK(e[1]),2<=t.Fwt()?this.ni=this.Qst:this.ni=this.Mit,this.ESt=!0}Mit(){return this.DZ}Qst(){return this.DZ?this.DZ.Qst():null}}class Bo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Bwt=e[1],this.ni=this.Nwt,this.ESt=!0}Nwt(){return this.Bwt}}class No extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Wwt=e[1];const h=this.Sv.lN();this.Sv instanceof Ro.Igt&&this.Sv.L2()||!h||!h.GJ()?(this.ni=this.jwt,this.ESt=!0):(this.ni=this.Vwt,this.YSt())}jwt(){return this.Wwt}Vwt(t){t=t||0;let s=this.Sv.lN(),i=s.g5(),e=i.m5(),h=null;if(e.length)h=e[t%e.length].lN();else if(i.t0t()){const r=i.s0t();h=r[t%r.length].lN()}else{if(!(0<s.S5()))return 0;{const n=s.m5();h=n[t%n.length].lN()}}return this.Wwt+h.lwt(s.uwt())}}class Wo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Swt=e[1],this.ywt=null,2<=t.Fwt()?this.ni=this.Uwt:this.ni=this.Hwt,this.ESt=!0}zdt(){this.ywt=this.TO().BD().y1t(this.Swt)}Hwt(){return this.ywt}Uwt(){return null}}class jo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.zwt=e[1],this.ZSt=null,2<=t.Fwt()?this.ni=this.Jwt:this.ni=this.qwt,this.ESt=!0}zdt(){this.ZSt=this.TO().BD().ND(this.zwt),this.zwt=null}qwt(){return this.ZSt}Jwt(){return null}}class Vo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Xwt=[],this.Ywt=[],this.ESt=!0;for(let t=1,s=e.length;t<s;++t){const h=Ro.Mwt.Hx(this.Sv,e[t],0);this.Xwt.push(h),this.Ywt.push(0),h.Xpt()||(this.ESt=!1)}this.ni=this.$wt}zdt(){for(const t of this.Xwt)t.zdt()}$wt(){const i=this.Xwt,e=this.Ywt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0);return e}}class Uo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Kwt=e[1],this.ni=this.Dht,this.ESt=!0}Dht(){return this.Kwt}}class Ho extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.Zwt=e[1],this.ni=this.Qwt,this.ESt=!0}Qwt(){return this.Zwt}}class zo extends Ao{constructor(t,s,i,e){super(t,s,i,e),this.ni=this._N,this.ESt=!1}_N(){return this.Cwt()}}class Jo extends Ro.Mwt{constructor(t,s,i,e){super(t,s,i),this.vut=this.TO().Wut().gut(e[1]),this.ni=this.tbt,this.ESt=!0}tbt(){return this.vut.Sf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0)};e;const qo=self.Ws,Xo=[],Yo=function(){};qo.Igt=class extends qo.br{constructor(t,i,s){if(super(),this.mSt=t,this._f=t.TO(),this.Iy=s,this.Zyt=this._f.Kyt(i[1]),this.sbt=0<i[3],this.ibt=2===i[3],this.ebt=!!i[4],this.hbt=!!i[5],this.h2=!!i[6],this.K7=i[7],this.rbt=this.mSt.m0t(),this.Wft=null,this.fwt=null,this.dwt=-1,this.qSt=null,this.uI=Yo,this.j1t=Yo,this.ti=[],this.nbt=[],this.obt=!1,this.abt=null,this.lbt=null,this.wgt=this._f.h4()?{bgt:i[8][0],ubt:i[8][1]}:null,-1===i[0]?this.qSt=this._f.BH():(this.Wft=this._f.tJ(i[0]),i[2]&&(this.fwt=this.Wft.rrt(i[2]),this.dwt=this.Wft.Oit(i[2])),this.mSt.i6()&&this.mSt.i6().Ygt()),10===i.length){let s=i[9];for(let t of s)this.ti.push(qo.Mwt.Hx(this,t,this.ti.length)),this.nbt.push(0)}0===this.ti.length&&(this.ti=Xo,this.nbt=Xo),this.mSt.BD().$dt(this)}static Hx(t,s,i){return qo.vr(qo.Igt,t,s,i)}zdt(){for(const t of this.ti)t.zdt(),t.xwt()&&(this.obt=!0);this.ibt?(this.uI=this.cbt,this.j1t=this.fbt):this.qSt?(this.dbt(),this.j1t=this.pbt):this.Wft.r5().FL()?(this.mbt(),this.j1t=this.gbt):this.h2?(this.uI=this.ybt,this.j1t=this.Sbt):(this.uI=this.wbt,this.j1t=this.bbt)}dbt(){const t=this.qSt,s=this.qSt;this.Mbt(t,s,this.vbt)}mbt(){const t=this.Wft.r5(),s=this.Wft.i5().K6();this.Mbt(t,s,this.xbt)}Mbt(t,s,i){const e=this.Zyt,h=this.hbt,r=this.ti;if(0===r.length){const n=t.KSt(e,s);h?this.uI=function(){return qo.xor(n(),h)}:this.uI=n}else if(1===r.length){const o=r[0];if(!h&&o.Xpt())this.uI=t.Gbt(e,s,o.ni(0));else{const a=t.KSt(e,s);this.uI=function(){return qo.xor(a(o.ni(0)),h)}}}else if(2===r.length){const l=r[0],u=r[1];if(!h&&l.Xpt()&&u.Xpt())this.uI=t.Tbt(e,s,l.ni(0),u.ni(0));else{const c=t.KSt(e,s);this.uI=function(){return qo.xor(c(l.ni(0),u.ni(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Xpt()&&d.Xpt()&&p.Xpt())this.uI=t._bt(e,s,f.ni(0),d.ni(0),p.ni(0));else{const m=t.KSt(e,s);this.uI=function(){return qo.xor(m(f.ni(0),d.ni(0),p.ni(0)),h)}}}else this.uI=i}EJ(){return this.K7}Cmt(){return this.Zyt}lN(){return this.Wft}oW(){return this.fwt}Ibt(){return this.fwt?this.fwt.hW():this.Wft?this.Wft.r5():null}Fwt(){const t=this.Ibt();return t?t.Cbt():1}VD(){return this.mSt}TO(){return this._f}rD(){return this.Iy}dyt(){return this.rD()}Mmt(){return this.sbt}Rmt(){return this.ibt}Rbt(){return this.hbt}bW(){return this.ebt}L2(){return this.h2}Abt(){return this.wgt.bgt}Pbt(){return!!this.qSt}ayt(){return this.Pbt()||this.Wft.r5().FL()}lyt(){for(const t of this.ti)if(t.Gwt())return t.lN();return null}Ebt(t){this.wgt.bgt=!!t,this.mSt.Jgt()}Fbt(){return this.wgt.ubt}Hmt(){return!this.Abt()&&!this._f.vyt()&&!this.Fbt()}Dbt(){return this.abt||(this.abt=new Map),this.abt}kbt(){return this.lbt||(this.lbt=new Map),this.lbt}vbt(){const t=this.nbt;return e(this.ti,t),qo.xor(this.Zyt.apply(this.qSt,t),this.hbt)}*pbt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const s=this.nbt;e(this.ti,s);let t=this.Zyt.apply(this.qSt,s);return qo.Qo(t)&&(t=yield*t),qo.xor(t,this.hbt)}return this.uI()}xbt(){const t=this.nbt,s=(e(this.ti,t),this.Wft.i5().K6());return qo.xor(this.Zyt.apply(s,t),this.hbt)}*gbt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){let t=this.nbt,s=(e(this.ti,t),this.Wft.i5().K6()),i=this.Zyt.apply(s,t);return qo.Qo(i)&&(i=yield*i),qo.xor(i,this.hbt)}return this.uI()}cbt(){return!0}*fbt(){return(this.Abt()||this._f.vyt())&&(yield this),!0}Obt(){return this.fwt?2<=this.fwt.hW().Cbt()?this.fwt.nW():this.fwt:2<=this.Wft.r5().Cbt()?this.Wft.QL():this.Wft}ybt(){const t=this.nbt,s=(e(this.ti,t),this.Zyt.apply(this.Obt(),t));return this.Wft.Vyt(),s}*Sbt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const s=this.nbt;e(this.ti,s);let t=this.Zyt.apply(this.Obt(),s);return qo.Qo(t)&&(t=yield*t),this.Wft.Vyt(),t}return this.uI()}wbt(){const i=this.ti,e=this.nbt,t=this.Wft.g5();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.xwt()||(e[t]=h.ni(0))}return t.Zft()?this.Lbt(t):this.Bbt(t)}*bbt(){return(this.Abt()||this._f.vyt())&&(yield this),this.wbt()}Nbt(i){const e=this.ti,h=this.nbt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.xwt()&&(h[t]=r.ni(i))}}Lbt(i){const t=this.Wft,e=t.GJ(),h=t.uwt(),r=this.dwt,n=0<=r,o=t.m5(),a=this.obt,l=this.nbt,u=this.Zyt,c=this.hbt,f=this.rbt&&!this.sbt;i.Kft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Nbt(s);let t;if(n){const p=e?d.lN().mwt(h):0;t=u.apply(d.hrt()[r+p].K6(),l)}else t=u.apply(d.K6(),l);qo.xor(t,c)?i.e0t(d):f&&i.h0t(d)}return t.Wbt(!0),i.r0t(!1),t.Vyt(),i.Qft()}Bbt(t){let s=this.Wft,i=s.GJ(),e=s.uwt(),h=s.bN(),r=this.dwt,n=0<=r,o=this.obt,a=this.nbt,l=this.Zyt,u=this.hbt,c=this.rbt&&!this.sbt,f=t.n0t(),d=t.o0t(),p=c&&!this.mSt.oyt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const w=m[s];o&&this.Nbt(s);let t;if(n){const b=i?w.lN().mwt(e):0;t=l.apply(w.hrt()[r+b].K6(),a)}else t=l.apply(w.K6(),a);qo.xor(t,u)?(y=!0,p?(f.push(w),h&&w.jbt()):(m[g]=w,h&&w.Vbt(g),++g)):p?(m[g]=w,h&&w.Ubt(g),++g):c&&(d.push(w),h)&&w.Hbt()}qo.Yn(m,g),h&&s.zbt(p,g);const S=y;return p&&!y&&(y=this.Jbt(f)),s.Wbt(S||c),c?y:t.Qft()}Jbt(i){const t=this.Wft,e=t.GJ(),h=t.uwt(),r=this.obt,n=this.dwt,o=0<=n,a=this.nbt,l=this.Zyt,u=this.hbt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.Nbt(s);let t;if(o){const f=e?c.lN().mwt(h):0;t=l.apply(c.hrt()[n+f].K6(),a)}else t=l.apply(c.K6(),a);if(qo.xor(t,u))return!0}return!1}qbt(t,s){return this.ti[t].ni(s)}Amt(){const t=this.ti;if(t.length)return t[0].Ewt();throw new Error("no parameters")}$q(){if(!this.abt||!this.abt.size)return null;const s={};for(const[i,e]of this.abt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].vN(),t[1].vN(),t[2]])),s[i]=t}return{ex:s}}Kq(t){if(this.abt&&(this.abt.clear(),this.abt=null),t){const s=this._f,i=t.ex;if(i){const e=this.Dbt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=qo.vr(qo.yc,r.map(t=>[s.tO(t[0]),s.tO(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0)};h;const $o=self.Ws,Ko=[],Zo=function(){},Qo=function*(){};$o.Rgt=class extends $o.br{constructor(t,s,i){super();const e=(this.mSt=t).TO(),h=(this._f=e,this.Iy=i,this.K7=4<=s.length?s[3]:-1,this.Xbt=5<=s.length?255&s[4]:0,this.Ybt=5<=s.length?s[4]>>8:0,this.Zyt=null,this.Wft=null,this.fwt=null,this.dwt=-1,this.qSt=null,this.$bt="",this.Kbt=null,this.Zbt=null,this.uI=Zo,this.j1t=Zo,this.ti=[],this.nbt=[],this.obt=!1,this.abt=null,this.lbt=null,-3===s[0]),r=h?s[2]:s[5];if(this.wgt=e.h4()||h?{bgt:r[0],ubt:r[1],index:r[2]}:null,-1===s[0])this.qSt=e.BH(),this.Zyt=e.Kyt(s[1]);else if(-2===s[0])this.$bt=s[1];else if(h){const n=e.Kyt(s[1]);this.Zyt=n,this.uI=this.Qbt,this.j1t=this.tMt,this.Ybt|=8}else this.Wft=e.tJ(s[0]),4&this.Ybt?(this.$bt=s[1],this.Kbt=e.tJ(s[2])):(s[2]&&(this.fwt=this.Wft.rrt(s[2]),this.dwt=this.Wft.Oit(s[2])),this.Zyt=e.Kyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.ti.push($o.Mwt.Hx(this,a,this.ti.length)),this.nbt.push(0)}0===this.ti.length&&(this.ti=Ko,this.nbt=Ko),this.sMt()&&(this.mSt.Ogt(),this.mSt.Ygt()),this.mSt.BD().Kdt(this)}static Hx(t,s,i){return $o.vr($o.Rgt,t,s,i)}zdt(){for(const t of this.ti)t.zdt(),t.xwt()&&(this.obt=!0);if(this.qSt)this.dbt(),this.j1t=this.pbt;else if(this.$bt)4&this.Ybt?this.iMt():this.eMt(),this.$bt="",this.Kbt=null;else if(this.uI===this.Qbt){const s=this.Zyt,i=this._f.BD().p1t(this.mSt);this.Zyt=s.bind(null,this._f.PL(),i)}else this.fwt?this._yt()?(this.uI=this.hMt,this.j1t=this.rMt):(this.uI=this.nMt,this.j1t=this.oMt):this.Wft.r5().FL()?(this.mbt(),this.j1t=this.gbt):this.L2()?(this.uI=this.aMt,this.j1t=this.lMt):this._yt()?(this.uI=this.uMt,this.j1t=this.cMt):this.fMt()?(this.uI=this.dMt,this.j1t=this.pMt):this.ti.length?this.ti.every(t=>t.xwt())?(this.uI=this.mMt,this.j1t=this.gMt):this.obt?(this.uI=this.yMt,this.j1t=this.SMt):this.ti.every(t=>t.Xpt())?(h(this.ti,this.nbt),this.uI=this.wMt,this.j1t=this.bMt):(this.uI=this.MMt,this.j1t=this.vMt):(this.uI=this.wMt,this.j1t=this.bMt)}dbt(){const t=this.qSt,s=this.qSt;this.Mbt(t,s,this.vbt)}mbt(){const t=this.Wft.r5(),s=this.Wft.i5().K6();this.Mbt(t,s,this.xbt)}eMt(){const t=this.mSt.BD(),i=t.ND(this.$bt);if(i.mc()){const e=0!=(2&this.Ybt);this.Zbt=i.VD();let s=[...new Set([...this.mSt.UD(),...this.Zbt.UD()])];s=t.i1t(s);const h=!i.qD()&&this.xMt()?{zyt:!0}:null;if(this.uI=$o.wmt.prototype.Nyt.bind(this.Zbt,s,this.ti,e,h),this._f.h4()){const r=this;this.j1t=function*(){(r.Abt()||r._f.vyt())&&(yield r);const t=yield*r.Zbt.Xyt(s,r.ti,e,h);return t}}else this.j1t=Qo}else this.uI=Zo,this.j1t=Qo}iMt(){const r=this.mSt.BD(),n=r.M1t(this.Kbt,this.$bt);if(n.mc()){const o=0!=(2&this.Ybt);this.Zbt=n.VD();let s=[...new Set([...this.mSt.UD(),...this.Zbt.UD(),this.Wft,n.lN()])],t=(s=r.i1t(s),!this.Wft.GJ()&&!n.lN().GJ()),i=!this.Wft.GJ()&&n.lN().GJ(),e=this.Wft.GJ(),h=null;if(!n.qD()&&this.xMt()&&((h=h||{}).zyt=!0),!i&&o||((h=h||{}).Wyt=this.Wft,h.jyt=n.lN()),t||i||e&&!n.GSt()?this.uI=$o.wmt.prototype.Nyt.bind(this.Zbt,s,this.ti,o,h):e&&(this.uI=$o.tmt.prototype.CSt.bind(n,s,this.ti)),this._f.h4()){const a=this;t||i||e&&!n.GSt()?this.j1t=function*(){(a.Abt()||a._f.vyt())&&(yield a);const t=yield*a.Zbt.Xyt(s,a.ti,o,h);return t}:e&&(this.j1t=function*(){(a.Abt()||a._f.vyt())&&(yield a);const t=yield*n.ASt(s,a.ti);return t})}else this.j1t=Qo}else this.uI=Zo,this.j1t=Qo}Mbt(t,s,i){const e=this.Zyt,h=this.ti;if(0===h.length)this.uI=t.KSt(e,s);else if(1===h.length){const r=h[0];if(r.Xpt())this.uI=t.Gbt(e,s,r.ni(0));else{const n=t.KSt(e,s);this.uI=function(){return n(r.ni(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Xpt()&&a.Xpt())this.uI=t.Tbt(e,s,o.ni(0),a.ni(0));else{const l=t.KSt(e,s);this.uI=function(){return l(o.ni(0),a.ni(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.Xpt()&&c.Xpt()&&f.Xpt())this.uI=t._bt(e,s,u.ni(0),c.ni(0),f.ni(0));else{const d=t.KSt(e,s);this.uI=function(){return d(u.ni(0),c.ni(0),f.ni(0))}}}else this.uI=i}EJ(){return this.K7}_yt(){return 0!=(8&this.Ybt)}Tyt(){return 0!=(16&this.Ybt)}fMt(){return 1===this.Xbt}L2(){return 2===this.Xbt}sMt(){return 0!=(1&this.Ybt)}Ngt(){return this._yt()||this.Tyt()}lN(){return this.Wft}Ibt(){return this.fwt?this.fwt.hW():this.Wft?this.Wft.r5():null}Fwt(){const t=this.Ibt();return t?t.Cbt():1}VD(){return this.mSt}xMt(){let t=this.mSt;do{if(t instanceof $o.tmt&&t.qD())return!0}while(t=t.f1t());return!1}TO(){return this._f}rD(){return this.Iy}dyt(){return this.wgt.index}Abt(){return this.wgt.bgt}Ebt(t){this.wgt.bgt=!!t,this.mSt.Jgt()}Fbt(){return this.wgt.ubt}Hmt(){return!this.Abt()&&!this._f.vyt()&&!this.Fbt()}Dbt(){return this.abt||(this.abt=new Map),this.abt}kbt(){return this.lbt||(this.lbt=new Map),this.lbt}vbt(){const t=this.nbt;return h(this.ti,t),this.Zyt.apply(this.qSt,t)}*pbt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const t=this.nbt,s=(h(this.ti,t),yield*this.Zyt.apply(this.qSt,t));return s}return this.uI()}xbt(){const t=this.nbt;return h(this.ti,t),this.Zyt.apply(this.Wft.i5().K6(),t)}*gbt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const t=this.nbt,s=(h(this.ti,t),yield*this.Zyt.apply(this.Wft.i5().K6(),t));return s}return this.uI()}wMt(){const i=this.nbt,e=this.Wft.g5().m5();for(let t=0,s=e.length;t<s;++t)this.Zyt.apply(e[t].K6(),i)}*bMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const i=this.nbt,e=this.Wft.g5().m5();for(let t=0,s=e.length;t<s;++t)yield*this.Zyt.apply(e[t].K6(),i)}else this.wMt()}MMt(){const i=this.nbt,e=(h(this.ti,i),this.Wft.g5().m5());for(let t=0,s=e.length;t<s;++t)this.Zyt.apply(e[t].K6(),i)}*vMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const i=this.nbt,e=(h(this.ti,i),this.Wft.g5().m5());for(let t=0,s=e.length;t<s;++t)yield*this.Zyt.apply(e[t].K6(),i)}else this.MMt()}mMt(){const e=this.ti,h=this.nbt,s=this.Zyt,r=this.Wft.g5().m5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);s.apply(n.K6(),h)}}*gMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const e=this.ti,h=this.nbt,s=this.Zyt,r=this.Wft.g5().m5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);yield*s.apply(n.K6(),h)}}else this.mMt()}yMt(){const e=this.ti,h=this.nbt,s=this.Zyt,r=this.Wft.g5().m5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.xwt()||(h[t]=i.ni(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.xwt()&&(h[t]=o.ni(i))}s.apply(n.K6(),h)}}*SMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const e=this.ti,h=this.nbt,s=this.Zyt,r=this.Wft.g5().m5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.xwt()||(h[t]=i.ni(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.xwt()&&(h[t]=o.ni(i))}yield*s.apply(n.K6(),h)}}else this.yMt()}dMt(){const e=this.ti,h=this.nbt,s=this.Zyt,t=this.Wft,i=t.GMt(),r=t.g5().m5();i.TMt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);s.apply(n.K6(),h)}i._Mt(s)}*pMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const e=this.ti,h=this.nbt,s=this.Zyt,t=this.Wft,i=t.GMt(),r=t.g5().m5();i.TMt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);yield*s.apply(n.K6(),h)}i._Mt(s)}else this.dMt()}IMt(){return this.fwt?2<=this.fwt.hW().Cbt()?this.fwt.nW():this.fwt:2<=this.Wft.r5().Cbt()?this.Wft.QL():this.Wft}aMt(){const t=this.nbt;return h(this.ti,t),this.Zyt.apply(this.IMt(),t)}*lMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const s=this.nbt;h(this.ti,s);let t=this.Zyt.apply(this.IMt(),s);return $o.Qo(t)?yield*t:t}return this.aMt()}nMt(){const t=this.Wft,s=t.GJ(),e=t.uwt(),h=this.ti,r=this.obt,n=this.nbt,o=this.Zyt,a=this.dwt,l=t.g5().m5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.xwt()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.xwt()&&(n[t]=f.ni(i))}const c=s?u.lN().mwt(e):0;o.apply(u.hrt()[a+c].K6(),n)}}*oMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const t=this.Wft,s=t.GJ(),e=t.uwt(),h=this.ti,r=this.obt,n=this.nbt,o=this.Zyt,a=this.dwt,l=t.g5().m5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.xwt()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.xwt()&&(n[t]=f.ni(i))}const c=s?u.lN().mwt(e):0;yield*o.apply(u.hrt()[a+c].K6(),n)}}else this.nMt()}uMt(){const e=this.ti,h=this.nbt,s=this.Zyt,r=this.Wft.g5().m5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);n.push(s.apply(o.K6(),h))}return Promise.all(n)}*cMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const e=this.ti,h=this.nbt,s=this.Zyt,r=this.Wft.g5().m5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);n.push(yield*s.apply(o.K6(),h))}return Promise.all(n)}return this.uMt()}hMt(){const t=this.Wft,s=t.GJ(),e=t.uwt(),h=this.ti,r=this.nbt,n=this.Zyt,o=this.dwt,a=t.g5().m5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ni(i);const c=s?u.lN().mwt(e):0;l.push(n.apply(u.hrt()[o+c].K6(),r))}return Promise.all(l)}*rMt(){if((this.Abt()||this._f.vyt())&&(yield this),this.Fbt()){const t=this.Wft,s=t.GJ(),e=t.uwt(),h=this.ti,r=this.nbt,n=this.Zyt,o=this.dwt,a=t.g5().m5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ni(i);const c=s?u.lN().mwt(e):0;l.push(yield*n.apply(u.hrt()[o+c].K6(),r))}return Promise.all(l)}return this.hMt()}async Qbt(){try{await this.Zyt()}catch(t){console.error(`Unhandled exception running script %c${this.mSt.JX().Sf()}, event ${this.mSt.Zgt()}, action ${this.dyt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),$o.Imt.tSt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$o.Imt.sSt())}}*tMt(){return(this.Abt()||this._f.vyt())&&(yield this),this.Qbt()}$q(){return this.abt&&this.abt.size?{ex:$o.$o(this.abt)}:null}Kq(t){if(this.abt&&(this.abt.clear(),this.abt=null),t){const s=t.ex;s&&(this.abt=$o.Ko(s))}}}}{let d=function(t){return t instanceof o?S.q5(t):t.G8()},u=function(t){return d(t).rO()},h=function(t){return S.q5(t)},m=function(t){return t instanceof a?S.q5(t):t},s=function(t){return t instanceof c?S.q5(t):t},C=function(t,s,i,e){const h=s.vN(),r=i.vN();h<r?t.Set(s,i,e):t.Set(i,s,e)},R=function(t,s,i){const e=s.vN(),h=i.vN();e<h?t.vc(s,i):t.vc(i,s)},A=function(t,s){t.xc(s)},P=function(t,s,i){const e=s.vN(),h=i.vN();return e<h?t.ni(s,i):t.ni(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.rO(),n=S.fD(),o=S.n1t(),a=o.VD().m0t(),l=o.lN(),u=o.Rbt(),c=s.g5(),f=l!==s;_=s,T=f&&!u;let d,p=0,m=0,g=I=!1;c.Zft()?(w.I(r.D4()),w.offset(i,e),n.CMt(r.nO(),s,w,b),d=b):!a||S.RMt()&&!c.o0t().length&&c.n0t().length?d=c.n0t():(d=c.o0t(),I=!0),h&&(p=r.qM(),m=r.$M(),r.A4(i,e),r._4());for(const y of d)if(n.JO(t,y)){if(g=!0,u)break;f&&D.add(y)}return h&&(r.I4(p,m),r._4()),E.$n(b),g},i=function(t){const s=S.HD().m0t(),i=_.g5(),e=i.n0t(),h=i.o0t();i.Zft()?(i.u0t(D),s&&(E.$n(h),i.c0t(D,_.m5()))):s?I?i.f0t(D):(i.c0t(D,e),i.u0t(D)):i.u0t(D),_.Vyt()},M=function(t,s){T&&(s&&i(),D.clear(),_=null,T=!1)},r=function(t,s){const i=S.tO(s);if(i){const e=t.g5();if(e.Zft()||e.n0t().includes(i))if(t.GJ()){if(i.lN().AMt(t))return e.p0t(i),t.Vyt(),!0}else if(i.lN()===t)return e.p0t(i),t.Vyt(),!0}return!1},n=function(t,h){const r=t.g5();if(r.Zft()){r.r0t(!1),r.Kft();const i=t.m5();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.vN()===h?r.h0t(e):r.e0t(e)}return t.Vyt(),!!r.n0t().length}{let i=r.n0t(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).vN()===h?r.h0t(n):++e}return E.Yn(i,e),t.Vyt(),!!i.length}},E=(d,u,h,m,s,C,R,A,P,e,i,M,r,n,self.Ws),l=new E.ea,v={},x={},G={},S=null,o=(E.PMt=function(t){S=t},self.oN),a=self.e5,c=self.J5,w=(x.EMt=function(t,s){return E.compare(this.rO().qM(),t,s)},G.EMt=function(t,s){return E.compare(this.x,t,s)},x.FMt=function(t,s){return E.compare(this.rO().$M(),t,s)},G.FMt=function(t,s){return E.compare(this.y,t,s)},x.DMt=function(){return this.rO().N4()},G.DMt=function(){return this.B4()},v.kMt=function(){const t=u(this),s=t.jk(),i=t.D4();return i.Nl()<0||i.Wl()<0||i.Ll()>s.Lm()||i.Bl()>s.qm()},v.OMt=function(i,e,h){const t=m(this),s=t.g5(),r=s.m5();if(!r.length)return!1;let n=r[0],o=n.rO(),a=n,l=E.Or(o.qM(),o.$M(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.rO();const u=E.Or(o.qM(),o.$M(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=n)}return s.p0t(a),!0},x.XM=function(t){const s=this.rO();s.qM()!==t&&(s.XM(t),s._4())},G.XM=function(t){this.x=+t},x.KM=function(t){const s=this.rO();s.$M()!==t&&(s.KM(t),s._4())},G.KM=function(t){this.y=+t},x.LMt=function(t,s){const i=this.rO();i.BMt(t,s)||(i.I4(t,s),i._4())},G.LMt=function(t,s){this.setPosition(t,s)},v.NMt=function(t,s){if(t=m(t)){const i=d(this),e=t.d5(i);if(e){const[h,r]=e.WMt(s),n=i.rO();n.qM()===h&&n.$M()===r||(n.I4(h,r),n._4())}}},v.jMt=function(t){if(0!==t){const s=u(this);s.A4(s.VMt()*t,s.UMt()*t),s._4()}},x.HMt=function(t,s){if(0!==s){const i=this.rO();t=E.Pr(t),i.A4(Math.cos(t)*s,Math.sin(t)*s),i._4()}},G.HMt=function(t,s){0!==s&&(t=E.Pr(t),this.R4(Math.cos(t)*s,Math.sin(t)*s))},x.qM=function(){return this.rO().qM()},G.qM=function(){return this.x},x.$M=function(){return this.rO().$M()},G.$M=function(){return this.y},v.ak=function(){return S.ak(d(this))},x.zMt=function(t,s){return E.compare(this.rO().Lm(),t,s)},G.zMt=function(t,s){return E.compare(this.width,t,s)},x.JMt=function(t,s){return E.compare(this.rO().qm(),t,s)},G.JMt=function(t,s){return E.compare(this.height,t,s)},x.Hm=function(t){const s=this.rO();s.Lm()!==t&&(s.Hm(t),s._4())},G.Hm=function(t){this.width=t},x.Bm=function(t){const s=this.rO();s.qm()!==t&&(s.Bm(t),s._4())},G.Bm=function(t){this.height=t},x.DC=function(t,s){const i=u(this);i.Lm()===t&&i.qm()===s||(i.DC(t,s),i._4())},G.DC=function(t,s){this.P5(t,s)},x.Lm=function(){return this.rO().Lm()},G.Lm=function(){return this.width},x.qm=function(){return this.rO().qm()},G.qm=function(){return this.height},v.qMt=function(){return u(this).D4().Ll()},v.XMt=function(){return u(this).D4().Bl()},v.YMt=function(){return u(this).D4().Nl()},v.$Mt=function(){return u(this).D4().Wl()},v.KMt=function(){const t=u(this).D4();return(t.Ll()+t.Nl())/2},v.ZMt=function(){const t=u(this).D4();return(t.Bl()+t.Wl())/2},v.QMt=function(t,s){return E.Br(u(this).GetAngle(),E.Pr(s))<=E.Pr(t)},v.tvt=function(t){return E.Wr(u(this).GetAngle(),E.Pr(t))},v.svt=function(t,s){const i=E.Pr(t),e=E.Pr(s),h=u(this).GetAngle(),r=!E.Wr(e,i);return r?!(!E.Wr(h,i)&&E.Wr(h,e)):E.Wr(h,i)&&!E.Wr(h,e)},x.D5=function(t){const s=this.rO(),i=E.Ar(E.Pr(t));isNaN(i)||s.GetAngle()===i||(s.D5(i),s._4())},G.D5=function(t){this.F4=t},v.ivt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.D5(s.GetAngle()+E.Pr(t)),s._4()}},v.evt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.D5(s.GetAngle()-E.Pr(t)),s._4()}},v.hvt=function(t,s){const i=u(this),e=i.GetAngle(),h=E.Nr(e,E.Pr(s),E.Pr(t));isNaN(h)||e===h||(i.D5(h),i._4())},v.rvt=function(t,s,i){const e=u(this),h=e.GetAngle(),r=s-e.qM(),n=i-e.$M(),o=Math.atan2(n,r),a=E.Nr(h,o,E.Pr(t));isNaN(a)||h===a||(e.D5(a),e._4())},v.nvt=function(t,s){const i=u(this),e=i.GetAngle(),h=t-i.qM(),r=s-i.$M(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.D5(n),i._4())},x.GetAngle=function(){return E.Er(this.rO().GetAngle())},G.GetAngle=function(){return this.F4},v.ovt=function(t,s){return E.compare(E.tn(100*u(this).uP(),6),t,s)},x.wB=function(){return this.rO().wB()},G.wB=function(){return this.isVisible},v.yB=function(t){const s=u(this);t=2===t?!s.wB():0!==t,s.wB()!==t&&(s.yB(t),S.fO())},v.fP=function(t){const s=E.Rr(t/100,0,1),i=u(this);if(i.A6()){if(i.Pnt().avt()===s)return}else if(i.uP()===s)return;i.fP(s),S.fO()},v.lvt=function(t){l.Ba(t);const s=u(this);s.j4().Aa(l)||(s.V4(l),S.fO())},v.pP=function(){const t=u(this).j4();return E.rn(t.xa(),t.Ga(),t.Ta(),t._a())},v.uP=function(){return E.tn(100*u(this).uP(),6)},v.uvt=function(t){return!!(t=s(t))&&u(this).nO()===t},v.cvt=function(i){const t=m(this),s=t.g5(),e=s.m5();if(!e.length)return!1;let h=e[0],r=h;for(let t=1,s=e.length;t<s;++t){const n=e[t],o=n.rO(),a=r.rO(),l=o.nO().rD(),u=a.nO().rD();0===i?(u<l||l===u&&o.oO()>a.oO())&&(r=n):(l<u||l===u&&o.oO()<a.oO())&&(r=n)}return s.p0t(r),!0},x.fvt=function(t,s,i){const e=this.rO(),h=0===t?e.ZM():e.E4();return E.compare(h,s,i)},G.fvt=function(t,s,i){const e=0===t?this.LB:this.P4;return E.compare(e,s,i)},x.dvt=function(){this.rO().H4()},G.dvt=function(){this.U4()},x.pvt=function(){this.rO().J4()},G.pvt=function(){this.z4()},v.mvt=function(t){(t=s(t))&&u(this).X4(t)},v.gvt=function(t,s){const i=0===t;if(s=m(s)){const e=d(this),h=s.yvt(e);h&&e.rO().K4(h,i)}},x.QM=function(t){const s=this.rO();s.ZM()!==t&&(s.QM(t),S.fO())},G.QM=function(t){this.LB=t},v.Svt=function(){return u(this).nO().rD()},v.wvt=function(){return u(this).nO().Sf()},x.bvt=function(){return this.rO().oO()},G.bvt=function(){return this.zIndex},x.Mvt=function(){return this.rO().ZM()},G.Mvt=function(){return this.LB},x.vvt=function(){return this.rO().E4()},G.vvt=function(){return this.P4},v.xvt=function(t){const s=d(this),i=s.lN().C5().ort(t);if(i){const e=i.rD(),h=s.rO().G4();return h.dW(e)}},v.Gvt=function(t,s){const i=d(this),e=i.lN().C5().ort(s);if(e){const h=e.rD(),r=1===t,n=i.rO().G4();n.dW(h)!==r&&(n.pW(h,r),n.mW(),S.fO())}},v.Tvt=function(t,s,i){const e=d(this),h=e.lN().C5().ort(t);if(h){s=Math.floor(s);const r=h.HG().JG(s);if(r){"color"===r?(l.Ba(i),i=l):"percent"===r&&(i/=100);const n=h.rD(),o=e.rO().G4(),a=o.yW(n,s,i);a&&o.dW(n)&&S.fO()}}},E.vr(E.Rect)),F=[],b=[],T=!1,_=null,I=!1,D=new Set;v._vt=function(y){const t=m(this),S=(y=m(y),t.TO());if(S.Ivt())return function*(S){if(S){let t=this.TO(),s=t.fD(),e=t.BD(),i=e.KD(),h=e.n1t(),r=h.lN(),n=h.Dbt(),o=h.kbt(),a=i.wV(),l=t.nst(),u=l-1,c=a.HD(),f=i.bV(c),d=n.get("collmemory"),p=(d||(d=E.vr(E.yc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.r0().addEventListener("instancedestroy",t=>A(d,t.aW))),r.g5()),m=S.g5(),g=p.m5(),y=null;for(let t=0;t<g.length;++t){const w=g[t];m.Zft()?(s.CMt(w.rO().nO(),S,w.rO().D4(),F),y=F,s.Cvt(w,S,y)):y=m.m5();for(let t=0;t<y.length;++t){const b=y[t];if(s.JO(w,b)||s.Rvt(w,b)){let t=P(d,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<u;if(C(d,w,b,l),M){const v=c.SV(),x=(e.TV(v),r.g5()),G=S.g5();if(x.r0t(!1),G.r0t(!1),r===S){const T=x.n0t();E.$n(T),T.push(w),T.push(b),r.Vyt()}else{const _=x.n0t(),I=G.n0t();E.$n(_),E.$n(I),_.push(w),I.push(b),r.Vyt(),S.Vyt()}yield*c.Fyt(a,f),e.IV(v)}}else R(d,w,b)}E.$n(F)}i.PV()}return!1}.call(t,y);if(y){let s=S.fD(),e=S.BD(),t=e.KD(),i=e.n1t(),h=i.lN(),r=i.Dbt(),n=i.kbt(),o=t.wV(),a=S.nst(),l=a-1,u=o.HD(),c=t.bV(u),f=r.get("collmemory"),d=(f||(f=E.vr(E.yc),r.set("collmemory",f)),n.get("collisionCreatedDestroyCallback")||(n.set("collisionCreatedDestroyCallback",!0),S.r0().addEventListener("instancedestroy",t=>A(f,t.aW))),h.g5()),p=y.g5(),m=d.m5(),g=null;for(let t=0;t<m.length;++t){const w=m[t];p.Zft()?(s.CMt(w.rO().nO(),y,w.rO().D4(),F),g=F,s.Cvt(w,y,g)):g=p.m5();for(let t=0;t<g.length;++t){const b=g[t];if(s.JO(w,b)||s.Rvt(w,b)){let t=P(f,w,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const M=!s||i<l;if(C(f,w,b,a),M){const v=u.SV(),x=(e.TV(v),h.g5()),G=y.g5();if(x.r0t(!1),G.r0t(!1),h===y){const T=x.n0t();E.$n(T),T.push(w),T.push(b),h.Vyt()}else{const _=x.n0t(),I=G.n0t();E.$n(_),E.$n(I),_.push(w),I.push(b),h.Vyt(),y.Vyt()}u._V(o,c),e.IV(v)}}else R(f,w,b)}E.$n(F)}t.PV()}return!1},v.Avt=function(t){return t=m(t),e(d(this),t,0,0)},v.Pvt=function(t,s,i){return t=m(t),e(d(this),t,s,i)},v.Evt=function(){return!0},v.m6=function(){return u(this).m6()},v.tX=function(){return u(this).tX()},v.Fvt=function(i,e){const t=m(this),s=(i=m(i),t.TO()),h=this.g5(),r=h.m5();if(0===r.length)return!1;let n=i.g5(),o=n.m5();if(n.Zft()){const u=[...s.Dvt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=n.Zft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];if(1===e)for(const f of c.r6())f.kvt(i)&&(null===a||a.has(f))&&l.add(f);else{let t;if(0===e){if(null===(t=c.i6()))continue}else t=c.h6();t.kvt(i)&&(null===a||a.has(t))&&l.add(t)}}return 0!==l.size&&(n.u0t(l),i.Vyt(),!0)},v.Ovt=function(i,e){const t=m(this),s=(i=m(i),t.TO()),h=t.g5(),r=h.m5();if(0===r.length)return!1;let n=i.g5(),o=n.m5();if(n.Zft()){const u=[...s.Dvt(i)];0<u.length&&(o=o.concat(u))}if(0===o.length)return!1;const a=n.Zft()?null:new Set(o),l=new Set;for(let t=0,s=r.length;t<s;++t){const c=r[t];2!==e||c.tX()||!c.kvt(i)||null!==a&&!a.has(c)||l.add(c);for(const f of 0===e?c.children():c.u6())2===e&&f.tX()||f.kvt(i)&&(null===a||a.has(f))&&l.add(f)}return 0!==l.size&&(n.u0t(l),i.Vyt(),!0)},v.Lvt=function(i,e,h){const t=m(this),s=(i=m(i),t.TO()),r=t.g5(),n=r.m5();if(0===n.length)return!1;let o=i.g5(),a=o.m5();if(o.Zft()){const c=[...s.Dvt(i)];0<c.length&&(a=a.concat(c))}if(0===a.length)return!1;const l=o.Zft()?null:new Set(a),u=[];for(let t=0,s=n.length;t<s;++t){const f=n[t];if(0===e){const d=f.l6(h);null!==d&&d.kvt(i)&&(null===l||l.has(d))&&u.push(d)}else if(1===e)for(const p of f.children())if(p.kvt(i)){if(0===h){null!==l&&!l.has(p)||u.push(p);break}--h}}return 0!==u.length&&(o.l0t(u),i.Vyt(),!0)},v.Bvt=function(t,s,i){const e=d(this);switch(t){case 0:default:return E.compare(e.o6(),s,i);case 1:return E.compare(e.Nvt(),s,i)}},v.f6=function(t,s,i,e,h,r,n,o,a,l){t=m(t);const u=d(this),c=S.a1t().lN();for(const f of t.Wvt(u,c)){if(!f.r5().zL())return;u.f6(f,{y6:s,w6:i,M6:e,x6:h,T6:r,R6:n,I6:o,P6:a,F6:l})}},v.d6=function(t){t=m(t);const s=d(this),i=S.a1t().lN();for(const e of t.Wvt(s,i))s.d6(e)},v.jvt=function(){const t=d(this);if(t.m6()){const s=t.i6();s.d6(t)}},v.Vvt=function(){const t=d(this).i6();return t?t.vN():-1},v.Uvt=function(){return d(this).o6()},v.Hvt=function(){return d(this).Nvt()},v.zvt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.B6(),i._4()):i.O6(t,s)},v.W6=function(t,s,i,e,h,r,n,o){const a=u(this),l=a.W6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,LB:r,u:n,v:o});l&&a._4()},v.Jvt=function(){const t=u(this);return t.V6()?t.U6()._v():0},v.qvt=function(){const t=u(this);return t.V6()?t.U6().Iv():0},v.Xvt=function(t){const s=u(this);t=2===t?!s.wB():0!==t,s.wB()!==t&&s.yB(t)},v.sW=function(t,s){this instanceof self.oN?this.Oj(t,s):this.sW(t,s)},v.Yvt=function(t,s){this instanceof self.oN?this.Lj(t,""+s):this.Yvt(t,""+s)},v.$vt=function(t){this instanceof self.oN?this.Bj(t):this.$vt(t)},v.Kvt=function(){this instanceof self.oN?this.Fj():this.Z6()},v.Zvt=function(){this instanceof self.oN?this.Dj():this.Q6()},v.Qvt=function(){return this instanceof self.oN?this.kj():this.Qvt()},v.t2t=function(t){this instanceof self.oN?this._setEnabled(0!==t):this.s2t(0!==t)},v.i2t=function(){return this instanceof self.oN?this.nSt():this.e2t()},x.h2t=function(t,s,i){return E.compare(this.G8().bnt(t),s,i)},G.h2t=function(t,s,i){return E.compare(h(this).bnt(t),s,i)},x.r2t=function(t){return!!this.G8().bnt(t)},G.r2t=function(t){return!!h(this).bnt(t)},v.n2t=function(i,e){const h=m(this),t=h.g5(),r=t.m5();if(!r.length)return!1;let n=h.GJ(),o=null,a=0;for(let t=0,s=r.length;t<s;++t){const l=r[t],u=n?l.lN().lwt(h.uwt()):0,c=l.bnt(u+e);(null===o||0===i&&c<a||1===i&&c>a)&&(a=c,o=l)}return t.p0t(o),!0},v.o2t=function(t){const s=m(this);return(s.TO().n1t().Rbt()?n:r)(s,t)},v.r8=function(t){const s=new Set(E.mo(t)),i=d(this).PN();return s.isSubsetOf(i)},v.a2t=function(){return d(this).l2t()},v.u2t=function(){return d(this).PN().size},v.c2t=function(t){return d(this).f2t(t)},v.d2t=function(t,s){const i=E.mo(s);if(0!==i.length){const e=d(this),h=new Set(e.PN());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.FN(h)}},v.p2t=function(){S.mN(d(this))},v.m2t=function(){return!0},v.g2t=function(){return!0},x.y2t=function(t,s){this.G8().Mnt(t,s)},G.y2t=function(t,s){h(this).Mnt(t,s)},x.S2t=function(t,s){const i=this.G8(),e=i.bnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Mnt(t,e+s)},G.S2t=function(t,s){const i=h(this),e=i.bnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.Mnt(t,e+s)},x.w2t=function(t,s){const i=this.G8(),e=i.bnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Mnt(t,e-s))},G.w2t=function(t,s){const i=h(this),e=i.bnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.Mnt(t,e-s))},x.b2t=function(t,s){this.G8().Mnt(t,s?1:0)},G.b2t=function(t,s){h(this).Mnt(t,s?1:0)},x.M2t=function(t){const s=this.G8();s.Mnt(t,0===s.bnt(t)?1:0)},G.M2t=function(t){const s=h(this);s.Mnt(t,0===s.bnt(t)?1:0)},v.v2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);S.x2t(),i.fK("state"),i.lv(s,"state"),S.G2t("state",{T2t:!0})},v._2t=function(){return JSON.stringify(d(this).av("state"))},v.I2t=function(){return d(this).lN().Sf()},v.C2t=function(){let t=S.r1t().z0t(),s=t.S5();for(const i of S.Dvt(t))++s;return s},v.R2t=function(){return S.r1t().z0t().g5().m5().length},x.GN=function(){return this.G8().GN()},G.GN=function(){return h(this).GN()},x.vN=function(){return this.G8().vN()},G.vN=function(){return h(this).vN()},v.Ppt=function(t){const s=d(this);return t.toLowerCase()===S.BD().kpt(s)},v.kN=function(t){const s=d(this);S.BD().kN(s,t)},v.A2t=function(t){const s=m(this);return S.BD().opt().P2t(s.g5().m5(),t),!0},v.E2t=function(){return d(this)._N()},E.F2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.WY,S=s.Irt,w=s.Crt,b=Object.assign({},v,2<=i?G:x);h&&(y.EMt=b.EMt,y.FMt=b.FMt,y.DMt=b.DMt,y.kMt=b.kMt,y.OMt=b.OMt,S.XM=b.XM,S.KM=b.KM,S.LMt=b.LMt,S.NMt=b.NMt,S.jMt=b.jMt,S.HMt=b.HMt,w.D2t=b.qM,w.k2t=b.$M,w.nk=b.ak),r&&(y.zMt=b.zMt,y.JMt=b.JMt,S.Hm=b.Hm,S.Bm=b.Bm,S.DC=b.DC,w.O2t=b.Lm,w.L2t=b.qm,w.B2t=b.qMt,w.N2t=b.XMt,w.W2t=b.YMt,w.j2t=b.$Mt,w.V2t=b.KMt,w.U2t=b.ZMt),n&&(y.H2t=b.QMt,y.z2t=b.tvt,y.svt=b.svt,S.D5=b.D5,S.ivt=b.ivt,S.evt=b.evt,S.hvt=b.hvt,S.rvt=b.rvt,S.nvt=b.nvt,w.J2t=b.GetAngle),o&&(y.wB=b.wB,y.ovt=b.ovt,S.yB=b.yB,S.fP=b.fP,S.lvt=b.lvt,w.Opacity=b.uP,w.q2t=b.pP),a&&(y.uvt=b.uvt,y.cvt=b.cvt,y.fvt=b.fvt,S.dvt=b.dvt,S.pvt=b.pvt,S.mvt=b.mvt,S.gvt=b.gvt,S.QM=b.QM,w.Svt=b.Svt,w.wvt=b.wvt,w.bvt=b.bvt,w.Mvt=b.Mvt,w.vvt=b.vvt),l&&(y.xvt=b.xvt,S.Gvt=b.Gvt,S.Tvt=b.Tvt),d&&(y.Evt=b.Evt,y.m6=b.m6,y.tX=b.tX,y.Fvt=b.Fvt,y.Ovt=b.Ovt,y.Lvt=b.Lvt,y.Bvt=b.Bvt,S.f6=b.f6,S.d6=b.d6,S.jvt=b.jvt,w.Vvt=b.Vvt,w.Uvt=b.Uvt,w.Hvt=b.Hvt),p&&(S.zvt=b.zvt,S.W6=b.W6,w.Jvt=b.Jvt,w.qvt=b.qvt),u&&(y.wB=b.wB,S.yB=b.Xvt,S.X2t=b.sW,S.Y2t=b.Yvt,S.$2t=b.$vt),c&&(y.K2t=b.Qvt,S.Z2t=b.Kvt,S.Q2t=b.Zvt),f&&(y.mc=b.i2t,S.txt=b.t2t),m&&(y._vt=b._vt,y.Avt=b.Avt,y.Pvt=b.Pvt,s.sxt=M),e||(y.h2t=b.h2t,y.r2t=b.r2t,y.n2t=b.n2t,y.o2t=b.o2t,y.r8=b.r8,S.y2t=b.y2t,S.S2t=b.S2t,S.w2t=b.w2t,S.b2t=b.b2t,S.M2t=b.M2t,S.d2t=b.d2t,y.m2t=b.m2t,y.g2t=b.g2t,S.p2t=b.p2t,S.v2t||(S.v2t=b.v2t),w._2t||(w._2t=b._2t),w.C2t=b.C2t,w.R2t=b.R2t,w.ixt=b.GN,w.hxt=b.vN,w.I2t=b.I2t,w.a2t=b.a2t,w.u2t=b.u2t,w.c2t=b.c2t,y.Ppt=b.Ppt,S.kN=b.kN,S.A2t=b.A2t),g&&(w.E2t=b.E2t)}}{const ta=self.Ws;ta.apt=class extends ta.br{constructor(t){super(),this.y0t=t,this.Df="",this.B3=-1,this.rxt="",this.nxt=!1,this.oxt=null,this._0t=0,this.tgt=[],this.E0t=null,this.axt=new Map,this.lxt=null,this.uxt=null,this.cxt=-1,this.rSt=null,this.fxt=null,this.dxt=!1}Gr(){this.Df="",this.B3=-1,this.rxt="",this.oxt=null,this.uxt=null,this.rSt=null,this.fxt=null,this.cxt=-1,ta.$n(this.tgt),this.E0t&&(this.E0t.clear(),this.E0t=null);for(const t of this.axt.values())t.Gr();this.axt.clear(),this.lxt=null}JM(){const t=this.y0t,s=t.TO().xJ(),i=t.r1t(),e=(this.oxt=i.HD(),this._0t=i.B0t()+1,t.Qpt(this.oxt));e&&(this.uxt=e,this.rSt=e.vSt(),this.fxt=e.MSt().map(t=>t.tht()),e._yt())&&(this.cxt=e._St());for(const r of s){const n=r.g5();n.Zft()&&!this.oxt.$gt(r)||(this.tgt.push(r),this.axt.set(r,ta.vr(ta.pxt,n)))}const h=t.zD();this.E0t=0<h.size?h:null}mxt(t){this.Df="timer",this.JM(),this.B3=this.y0t.TO().ck()+t}gxt(t){this.Df="walltimer",this.JM(),this.B3=this.y0t.TO().dk()+t}yxt(t){this.Df="signal",this.JM(),this.rxt=t.toLowerCase()}P2t(t,s){this.Df="instance-signals",this.JM(),this.rxt=s.toLowerCase(),this.lxt=new Set(t)}Sxt(t){this.Df="promise",this.JM(),t.then(()=>this.Ipt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Ipt()})}wxt(){return"timer"===this.Df}bxt(){return"walltimer"===this.Df}Tpt(){return"signal"===this.Df}Fpt(){return"instance-signals"===this.Df}Ypt(){return"promise"===this.Df}_pt(){return this.rxt}Mxt(){return this.nxt}Ipt(){this.nxt=!0}Dpt(t){this.lxt.delete(t),0===this.lxt.size&&this.Ipt()}cpt(){return this.wxt()?this.B3<=this.y0t.TO().ck():this.bxt()?this.B3<=this.y0t.TO().dk():this.Mxt()}vxt(t){t.F0t(this.oxt,this._0t);for(const[i,e]of this.axt.entries()){const h=i.g5();e.F0t(h)}this.E0t&&t.K0t([...this.E0t]);const s=this.uxt;s&&(s.Lyt(this.rSt),s.MSt().map((t,s)=>t.kht(this.fxt[s])),s._yt())&&s.ISt(this.cxt)}fpt(t){this.vxt(t),this.oxt.Iyt(t),this.uxt&&this.uxt._yt()&&this.uxt.qyt(this.cxt),this.y0t.ept(this.tgt),this.dxt=!0}async gpt(t){this.vxt(t);for(const s of this.oxt.Cyt(t))await this.y0t.TO().W1t(s);this.uxt&&this.uxt._yt()&&this.uxt.qyt(this.cxt),this.y0t.ept(this.tgt),this.dxt=!0}dpt(){return this.dxt}qft(t){for(const s of this.axt.values())s.qft(t);if("instance-signals"===this.Df){for(const i of t)this.lxt.delete(i);0===this.lxt.size&&this.Ipt()}}$q(){const t={},s={wt:this.Df,t:this.B3,st:this.rxt,s:this.nxt,ev:this.oxt.EJ(),sm:this.tgt.map(t=>t.EJ()),dsm:this.E0t?[...this.E0t].map(t=>t.EJ()):null,sols:t};this.oxt.pyt(this._0t)&&(s.act=this.oxt.l1t(this._0t).EJ());for(const[i,e]of this.axt)t[i.EJ().toString()]=e.$q();return"instance-signals"===this.Df&&(s.pi=[...this.lxt].map(t=>t.vN())),s}static $pt(t,s){const i=t.TO(),e=t.S1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.b1t(s.act);if(!n)return null;h=n.rD()}const r=ta.vr(ta.apt,t);r.B3=s.t,s.hasOwnProperty("wt")?r.Df=s.wt:r.Df=-1===r.B3?"signal":"timer",r.rxt=s.st,r.nxt=s.s,r.oxt=e,r._0t=h;for(const o of s.sm){const a=i.cV(o);a&&r.tgt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.cV(l);u&&(r.E0t||(r.E0t=new Set),r.E0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.cV(d);if(p){const m=ta.vr(ta.pxt,null);m.Kq(t,f),r.axt.set(p,m)}}if("instance-signals"===r.Df){r.lxt=new Set;for(const g of s.pi){const y=i.tO(g);y&&r.lxt.add(y)}}return r}}}{const sa=self.Ws;sa.pxt=class extends sa.br{constructor(t){super(),this.Wft=null,this.xxt=!0,this.S7=[],t&&(this.Wft=t.lN(),this.xxt=t.Zft(),sa.eo(this.S7,t.n0t()))}Gr(){this.Wft=null,sa.$n(this.S7)}F0t(t){t.r0t(this.xxt),sa.eo(t.n0t(),this.S7)}qft(t){sa.lo(this.S7,t)}$q(){return{sa:this.xxt,insts:this.S7.map(t=>t.vN())}}Kq(t,s){const i=t.TO();this.xxt=!!s.sa,sa.$n(this.S7);for(const e of s.insts){const h=i.tO(e);h&&this.S7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ia=self.Ws;ia.Gxt=class extends ia.br{constructor(t){super(),this._f=t.runtime,this.Ir=t.name??"",this.Txt=!!t.EL,this._xt=!!t.Ixt,this.Cxt=!!t.BL,this.Rxt=!!t.Axt,this.Pxt=!!t.WL,this.Ext=!!t.Fxt,this.Dxt=!!t.JL,this.kxt=!!t.OL,this.Oxt=!!t.VL,this.Lxt=t.Bxt,this.Nxt=null,this.Wxt=new Map,this.jxt=new Map,this.Vxt=new Map,this.Uxt=new Map,this.Hxt=t.zxt,this.Jxt=null}Gr(){this._f=null}TO(){return this._f}Sf(){return this.Ir}qxt(){}Ept(){return(2<=this.Cbt()?this.Jxt:this).constructor}Cbt(){return this.Lxt}Xxt(t=!1){let s=this.Hxt;return t&&"function"!=typeof s&&2<=this.Cbt()?globalThis.E8:s}FL(){return this.Txt}kL(){return this._xt}LL(){return this.kxt}UL(){return this.Oxt}NL(){return this.Cxt}MM(){return this.Rxt}jL(){return this.Pxt}zL(){return this.Ext}qL(){return this.Dxt}KSt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Wxt.get(t);return i||(i=t.bind(s),this.Wxt.set(t,i)),i}Gbt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.jxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}Tbt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Vxt,t),r=l(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}_bt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=l(this.Uxt,t),n=l(r,i),o=l(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Yxt(t){if(!this.FL())throw new Error("must be single-global plugin");this.Nxt=t}t5(){if(this.FL())return this.Nxt;throw new Error("must be single-global plugin")}i5(){if(this.FL())return this.Nxt.i5();throw new Error("must be single-global plugin")}$xt(){const t=this.Cbt(),s=(ia.AL.Kxt(this,t),this.Xxt(!0));if(s){if(this.Jxt=new s,!(this.Jxt instanceof self.IL))throw new TypeError("plugin class must derive from IPlugin")}else this.Jxt=new self.IL;ia.AL.Zxt(t)}KL(){return this.Jxt}}}{const ea=self.Ws;ea.Qxt=class extends ea.Gxt{constructor(t,s){super(t),this.tGt=s,this.sGt=0,this.iGt=new Map,this.eGt("elem-focused",t=>t.hGt()),this.eGt("elem-blurred",t=>{t&&t.rGt()})}Gr(){super.Gr()}nGt(t){const s=this.sGt++;return this.iGt.set(s,t),s}oGt(t){this.iGt.delete(t)}eGt(t,i){this._f.QN(this.tGt,t,t=>{const s=this.iGt.get(t.elementId);i(s,t)})}}}{const ha=self.Ws;ha.aGt=class extends ha.br{constructor(t){super(),this.Wft=t,this._f=t.TO(),this.lGt=t.r5()}Gr(){this.Wft=null,this._f=null,this.lGt=null}lN(){return this.Wft}TO(){return this._f}r5(){return this.lGt}kW(){return this.Wft.kW()}qxt(){}Wbt(t){}TMt(t){}_Mt(t){}lY(t){}mY(){}fY(){}OY(t){}uGt(){}Xxt(){return null}cGt(t,s,i){const e=ha.vr(ha.Event,t,s);e.fGt=this,i&&Object.assign(e,i),this.lN().y$(e)}}}{const ra=self.Ws;ra.dGt=class extends ra.br{constructor(t,s){super(),this.Ci=t,this.tGt=s,this.pGt=null,this._f=t.TO(),this.Wft=this.Ci.lN(),this.mGt=this.Wft.GMt(),this.sK=null,this.eK=null,this.n4=!1,this.a4=!1,this.L0=null,this.rC=!1}Gr(){this.rC=!0,this.gGt(),this.yGt(),this.sK=null,this.eK=null,this.L0&&(this.L0.Gr(),this.L0=null),this.Ci=null,this._f=null,this.Wft=null,this.mGt=null}Tr(){return this.rC}G8(){return this.Ci}TO(){return this._f}lN(){return this.Wft}r5(){return this.mGt.r5()}GMt(){return this.mGt}SGt(){return this.Ci.sO()}YN(t){return this._f.YN(t,this.Ci,null)}wGt(t){return this._f.wGt(t,this.Ci,null)}KN(t){return this._f.KN(t,this.Ci,null)}bGt(t,s){return this._f.bGt(t,this.Ci,s)}MGt(t,s){return this._f.MGt(t,this.Ci,s)}vGt(t){return this._f.vGt(t)}xGt(t,s){this._f.QN(this.tGt,t,s)}GGt(t){for(const[s,i]of t)this.xGt(s,i)}TGt(t,s){this._f.Rf(this.tGt,t,s)}_Gt(t,s){return this._f.pO(this.tGt,t,s)}IGt(t,s){if(!this._f.vD())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.tGt,handler:t,data:s,responseId:null});this.TGt(t,s)}CGt(t){if(!t)throw new Error("cannot set empty component id");this.pGt=t}RGt(){if(this.pGt)return this._f.d4(this.pGt);throw new Error("wrapper extension component id not set")}g4(t,s){if(!this.pGt)throw new Error("wrapper extension component id not set");this._f.g4(this.pGt,t,s)}AGt(t){for(const[s,i]of t)this.g4(s,i)}sV(t,s){if(!this.pGt)throw new Error("wrapper extension component id not set");this._f.sV(this.pGt,t,s)}iV(t,s){if(this.pGt)return this._f.iV(this.pGt,t,s);throw new Error("wrapper extension component id not set")}cZ(){}PGt(){}EGt(){if(!this.n4){if(!this.sK)if(this._f.h4()){const s=globalThis.C3Debugger,i=this.r5();this.sK=()=>{const t=performance.now();this.cZ(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.sK=()=>this.cZ();this._f.r0().addEventListener("tick",this.sK),this.n4=!0}}gGt(){this.n4&&(this._f.r0().removeEventListener("tick",this.sK),this.n4=!1)}FGt(){return this.n4}DGt(){if(!this.a4){if(!this.eK)if(this._f.h4()){const s=globalThis.C3Debugger,i=this.r5();this.eK=()=>{const t=performance.now();this.PGt(),s.AddIndividualPluginTickTime(i,performance.now()-t)}}else this.eK=()=>this.PGt();this._f.r0().addEventListener("tick2",this.eK),this.a4=!0}}yGt(){this.a4&&(this._f.r0().removeEventListener("tick2",this.eK),this.a4=!1)}kGt(){return this.a4}OGt(){return[]}av(){return null}lv(t){}cnt(t){}ynt(t,s){}cot(t,s,i){if(0!==s){const e=this.cnt(t);if("number"!=typeof e)throw new Error("expected number");this.ynt(t,e+s,i)}}LGt(t,s,i,e){}BGt(t,...s){t.call(this,...s)}NGt(t,...s){return t.call(this,...s)}Xxt(){return null}cGt(t,s,i){if(this.Ci.WGt()){const e=this.SGt(),h=ra.vr(ra.Event,t,s);h.aW=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}MM(){return!1}}}{const na=self.Ws;na.jGt=class extends na.dGt{constructor(t,s){super(t,s),this.rit=t.rO(),this.VGt=null,this.UGt=null}Gr(){if(this.VGt){const t=this._f.r0();t.removeEventListener("renderercontextlost",this.VGt),t.removeEventListener("renderercontextrestored",this.UGt),this.VGt=null,this.UGt=null}this.rit=null,super.Gr()}HGt(){this.zGt()}JGt(){}qGt(){}zGt(){if(!this.VGt){this.VGt=()=>this.u7(),this.UGt=()=>this.XGt();const t=this._f.r0();t.addEventListener("renderercontextlost",this.VGt),t.addEventListener("renderercontextrestored",this.UGt)}}u7(){this.JGt()}XGt(){this.qGt()}rO(){return this.rit}Yit(){return!1}Xit(){if(!this.Yit())throw new Error("original size not known");const t=this.YGt();if(t)return t.Lm()}Kit(){if(!this.Yit())throw new Error("original size not known");const t=this.YGt();if(t)return t.qm()}YGt(){return null}$Gt(){const t=this.YGt();if(t){const s=t.Gx();if(s)return[s.Lm(),s.qm()]}return[100,100]}KGt(){const t=this.YGt();return t?t.cR():null}ZGt(){const t=this.YGt();return t?t.QGt():null}tTt(){const t=this.YGt();return!!t&&t.sTt()}WMt(t){const s=this.Ci.rO();return[s.qM(),s.$M(),s.E4()]}uGt(t,s,i){}iTt(t,s){}Cq(){return!0}}}{const oa=self.Ws,aa=oa.vr(oa.Rect);oa.eTt=class extends oa.jGt{constructor(t,s){super(t,s),this.hTt=this.r5().nGt(this),this.rTt=!0,this.nTt=!1,this.oTt=!1,this.aTt=-.2,this.lTt=oa.vr(oa.Rect,0,0,-1,-1);const i=this._f.dL();this.uTt=i.yj(),this.cTt=i.Sj(),this.fTt=-1,this.dTt=-1,this.pTt=!1,this.EGt()}Gr(){this.r5().oGt(this.hTt),this.mTt("destroy"),this.hTt=-1,super.Gr()}Y6(){if(this._f.vD())throw new Error("not valid in worker mode");return this.gTt("get-element")}mTt(t,s){(s=s||{}).elementId=this.hTt,this.TGt(t,s)}gTt(t,s){return(s=s||{}).elementId=this.hTt,this.IGt(t,s)}yTt(t,s){return(s=s||{}).elementId=this.hTt,this._Gt(t,s)}STt(t){t=t||{};const s=this.rO();t.elementId=this.hTt,t.isVisible=s.wB(),t.htmlIndex=s.nO().Gj(),t.htmlZIndex=s.Tj(),Object.assign(t,this.wTt()),this.rTt=!!t.isVisible,this.IGt("create",t),this.bTt(!0)}Xvt(t){this.rTt!==(t=!!t)&&(this.rTt=t,this.mTt("set-visible",{isVisible:t}))}cZ(){this.bTt(!1)}MTt(){const t=this._f.dL().Aj();return"Android"===oa.di.mi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}bTt(u){if(!this.G8().Pj()){let t=this.rO(),s=t.nO(),i=t.D4(),[e,h]=s.tN(i.Ll(),i.Bl()),[r,n]=s.tN(i.Nl(),i.Wl()),o=this._f.dL(),a=o.yL(),l=o.wL();if(t.wB()&&s.wB())if(!this.MTt()&&(r<=0||n<=0||a<=e||l<=h))this.Xvt(!1);else{aa.set(e,h,r,n);const c=o.yj(),f=o.Sj(),d=s.Gj(),p=t.Tj();if(!u&&aa.equals(this.lTt)&&this.uTt===c&&this.cTt===f&&this.fTt===d&&this.dTt===p)this.Xvt(!0);else{this.lTt.I(aa),this.uTt=c,this.cTt=f,this.fTt=d,this.dTt=p,this.Xvt(!0);let t=null;this.oTt&&(t=s.Ej()+this.aTt),this.mTt("update-position",{left:Math.round(this.lTt.Ll()),top:Math.round(this.lTt.Bl()),width:Math.round(this.lTt.width()),height:Math.round(this.lTt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.Xvt(!1)}}Z6(){this.gTt("focus",{focus:!0})}Q6(){this.gTt("focus",{focus:!1})}hGt(){this.nTt=!0}rGt(){this.nTt=!1}Qvt(){return this.nTt}sW(t,s){this.mTt("set-css-style",{prop:oa.Zo(t),val:s})}Yvt(t,s){this.mTt("set-attribute",{name:t,val:s})}$vt(t){this.mTt("remove-attribute",{name:t})}vTt(){this.pTt||(this.pTt=!0,Promise.resolve().then(()=>{this.pTt=!1,this.mTt("update-state",this.wTt())}))}wTt(){}xTt(){return this.hTt}}}{const la=self.Ws,ua=self.cW;la.GTt=class extends la.br{constructor(t){super(),this._f=t.runtime,this.Ir=t.name??"",this.TTt=la.vr(la._c),this._Tt=la.vr(la._c),this.Lxt=t.Bxt,this.Hxt=t.zxt,this.ITt=null}Gr(){this._Tt.Gr(),this.TTt.Gr(),this._f=null}TO(){return this._f}Sf(){return this.Ir}qxt(){}Cbt(){return this.Lxt}Xxt(t=!1){let s=this.Hxt;return t&&"function"!=typeof s&&2<=this.Cbt()?globalThis.jj:s}CTt(t){this.TTt.Ac(t)}BK(){return this.TTt.Pc()}cJ(t){this._Tt.Ac(t)}pJ(t){this._Tt.vc(t)}m5(){return this._Tt.Pc()}$xt(){const t=this.Cbt(),s=(la.AL.Kxt(this,t),this.Xxt(!0));if(s){if(this.ITt=new s,!(this.ITt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.ITt=new ua;la.AL.Zxt(t)}eW(){return this.ITt}}}{const ca=self.Ws;ca.RTt=class extends ca.br{constructor(t){super(),this._f=t.TO(),this.fwt=t,this.Wft=t.lN(),this.ATt=t.hW(),this.ATt.CTt(this.Wft)}Gr(){this._f=null,this.fwt=null,this.Wft=null,this.ATt=null}qxt(){}oW(){return this.fwt}lN(){return this.Wft}TO(){return this._f}hW(){return this.ATt}}}{const fa=self.Ws;fa.PTt=class extends fa.br{constructor(t,s){super(),this.ETt=t,this.tGt=s,this.Ci=t.lW(),this._f=t.TO(),this.fwt=t.oW(),this.mGt=this.fwt.GMt(),this.n4=!1,this.a4=!1,this.Qj=!1,this.L0=null}Gr(){this.gGt(),this.yGt(),this.FTt(),this.L0&&(this.L0.Gr(),this.L0=null),this.ETt=null,this.Ci=null,this._f=null,this.fwt=null,this.mGt=null}hW(){return this.fwt.hW()}DTt(){return this.ETt}lW(){return this.Ci}lN(){return this.Ci.lN()}rO(){return this.Ci.rO()}TO(){return this._f}oW(){return this.fwt}GMt(){return this.mGt}SGt(){return this.ETt.SGt()}YN(t){return this._f.YN(t,this.Ci,this.fwt)}wGt(t){return this._f.wGt(t,this.Ci,this.fwt)}KN(t){return this._f.KN(t,this.Ci,this.fwt)}kTt(){}cZ(){}PGt(){}OTt(){}EGt(){this.n4||(this._f.qj(this),this.n4=!0)}gGt(){this.n4&&(this._f.Xj(this),this.n4=!1)}FGt(){return this.n4}DGt(){this.a4||(this._f.Yj(this),this.a4=!0)}yGt(){this.a4&&(this._f.$j(this),this.a4=!1)}kGt(){return this.a4}LTt(){this.Qj||(this._f.Kj(this),this.Qj=!0)}FTt(){this.Qj&&(this._f.Zj(this),this.Qj=!1)}BTt(){return this.Qj}OGt(){return[]}xGt(t,s){this._f.QN(this.tGt,t,s)}NTt(t,s){}av(){return null}lv(t){}cnt(t){}ynt(t,s){}cot(t,s){if(0!==s){const i=this.cnt(t);if("number"!=typeof i)throw new Error("expected number");this.ynt(t,i+s)}}LGt(t,s,i,e){}BGt(t,...s){t.call(this,...s)}NGt(t,...s){return t.call(this,...s)}Xxt(){return null}cGt(t,s,i){if(this.ETt.WGt()){const e=this.SGt(),h=fa.vr(fa.Event,t,s);h.WTt=e,h.aW=e.aW,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Ws),i=(r.VY={},r.blt={},r.Vs()),e=[],h=[],n=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.AL=class extends r.br{constructor(t,s){super(),this._f=t,this.jTt=[],this.qSt=null,this.VTt=[],this.UTt=new Map,this.HTt=null,this.zTt=null,this.JTt=new Set(s)}qTt(t){const s=t[19],i=this._f.Kyt(t[0]);if(!i)throw new Error("missing plugin");r.F2t(t,i,s);const e=2<=s?r.Gxt:i,h=r.vr(e,{runtime:this._f,EL:t[1],Ixt:t[2],BL:t[5],WL:t[8],Axt:t[9],Fxt:t[13],JL:t[14],OL:t[17],VL:t[18],Bxt:s,name:t[20],zxt:2<=s?i:null});h.qxt(),this.jTt.push(h),u.set(i,h)}XTt(){this.qSt=r.vr(r.VY.jY,{runtime:this._f,EL:!0}),this.qSt.qxt()}YTt(t){const i=t[1],e=t[2],h=this._f.Kyt(t[0]);if(!h)throw new Error("missing behavior");this.UTt.set(h,()=>{const t=2<=i?r.GTt:h,s=r.vr(t,{runtime:this._f,name:e,Bxt:i,zxt:2<=i?h:null});s.qxt(),this.VTt.push(s),c.set(h,s),!this.HTt&&r.blt.$Tt&&s instanceof r.blt.$Tt?this.HTt=s:!this.zTt&&r.blt.KTt&&s instanceof r.blt.KTt&&(this.zTt=s),s.$xt()})}ZTt(t){const s=this.UTt.get(t);s&&(s(),this.UTt.delete(t))}static Kxt(t,s=1){if(r.AL.Kxt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Zxt(t=1){if(r.AL.Zxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static dN(){if(r.AL.dN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static RL(t){if(r.AL.RL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static QTt(t){n.push(t)}static t_t(){n.pop()}static qN(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}s_t(){for(const t of this.jTt)t.$xt()}static $L(t){return u.get(t)||null}static fW(t){return c.get(t)||null}BH(){return this.qSt}i_t(){return this.HTt}e_t(){return this.zTt}d4(t){return this.JTt.has(t)}},o=r.AL.Kxt,a=r.AL.Zxt,t=r.AL.dN,l=r.AL.RL}{const da=self.Ws,pa=new Set;da.h_t=class extends da.br{constructor(){super(),this.r_t=0,this.QH="",this.t7=0,this.n_t=0,this.o_t=0,this.bg=0,this.Mg=0,this.a_t=!1,this.l_t=!1,this.u_t=null,this.c_t="",this.QI=da.vr(da.Rect),this.f_t=da.vr(da.du),this.d_t="",this.p_t=new self.xO(this),pa.add(this)}Gr(){this.iC(),this.u_t&&0===this.u_t.d7()&&this.u_t.Gr(),this.u_t=null,pa.delete(this),this.m_t()}static u7(){for(const t of pa)t.c_t="",t.QI.set(0,0,0,0),t.f_t.Du(t.QI)}g_t(t){this.QH=t[0],this.t7=t[1],this.n_t=t[2],this.o_t=t[3],this.bg=t[4],this.Mg=t[5],this.a_t=t[6],this.l_t=!0}y_t(t,s){if(this.u_t)throw new Error("already loaded asset");this.QH=s;const i={};return da.Ao(s)&&(i.CH="remote"),this.GO(t,i),this.u_t.PH()}S_t(t,s){if(this.u_t)throw new Error("already loaded asset");this.QH="",this.t7=s.size,this.u_t=da.vr(da.RH,t.lD(),{blob:s,size:this.t7,CH:"local"})}w_t(t){if(t===this)throw new Error("cannot replace with self");this.r_t++,this.iC(),this.QH=t.QH,this.t7=t.t7,this.n_t=t.n_t,this.o_t=t.o_t,this.bg=t.bg,this.Mg=t.Mg,this.a_t=t.a_t,this.l_t=t.l_t,this.u_t=t.u_t,this.c_t=t.c_t,this.QI=t.QI,this.f_t=t.f_t,this.m_t()}AH(){return this.QH}Gc(){return this.t7}b_t(){return this.n_t}M_t(){return this.o_t}sTt(){return this.a_t}Lm(){return this.bg}qm(){return this.Mg}v_t(){return this.u_t.Lm()}x_t(){return this.u_t.qm()}GO(t,s){if(this.u_t)throw new Error("already got asset");s=Object.assign({},s,{url:this.AH(),size:this.Gc()}),this.u_t=t.IH(s)}h7(){return this.u_t&&this.u_t.h7()}async lU(t,s){if(!this.u_t)throw new Error("no asset");if(this.c_t)throw new Error("already loaded texture");const i=this.r_t,e=(this.c_t="loading",await this.u_t.lU(t,s));if(this.r_t!==i)return null;if(!e)return this.c_t="",null;this.c_t="loaded",this.l_t||(this.bg=e.Lm(),this.Mg=e.qm(),this.l_t=!0);const h=this.a_t?this.Mg:this.bg,r=this.a_t?this.bg:this.Mg;return this.QI.set(this.n_t,this.o_t,this.n_t+h,this.o_t+r),this.QI.Ct(e.Lm(),e.qm()),this.f_t.Du(this.QI),this.a_t&&this.f_t.Wu(),e}iC(){this.c_t&&(this.u_t&&this.u_t.iC(),this.c_t="",this.QI.set(0,0,0,0),this.f_t.Du(this.QI))}Gx(){return this.u_t&&"loaded"===this.c_t?this.u_t.Gx():null}cR(){return this.QI}QGt(){return this.f_t}z8(){return this.p_t}G_t(){return this.u_t}async T_t(t){t=t||await this.u_t.p7();const s=da.Uo(this.bg,this.Mg),i=s.getContext("2d");return this.a_t?(i.rotate(Math.PI/-2),i.translate(-this.Mg,0),i.drawImage(t,this.n_t,this.o_t,this.Mg,this.bg,0,0,this.Mg,this.bg)):i.drawImage(t,this.n_t,this.o_t,this.bg,this.Mg,0,0,this.bg,this.Mg),s}async __t(t){if(!this.d_t){const s=await this.T_t(t),i=await da.Ho(s);this.d_t=URL.createObjectURL(i)}return this.d_t}m_t(){this.d_t&&(URL.revokeObjectURL(this.d_t),this.d_t="")}}}{const ma=self.Ws;ma.I_t=class extends ma.br{constructor(t){super(),this.Ir=t[0],this.C_t=t[1],this.ebt=!!t[2],this.jot=t[3],this.R_t=t[4],this.A_t=!!t[5],this.K7=t[6],this.P_t=t[7].map(t=>ma.vr(ma.E_t,t)),this.F_t=new self.SW(this)}static D_t(t,s){const i=ma.vr(ma.I_t,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.P_t.push(ma.E_t.D_t(t)),i}Gr(){for(const t of this.P_t)t.Gr();ma.$n(this.P_t)}k_t(t){for(const s of this.P_t)s.kW().GO(t)}O_t(s,i){return Promise.all(this.P_t.map(t=>t.kW().lU(s,i)))}L_t(){for(const t of this.P_t)t.kW().iC()}Sf(){return this.Ir}EJ(){return this.K7}_W(){return this.P_t.length}RW(){return this.P_t}B_t(t){if((t=Math.floor(t))<0||t>=this.P_t.length)throw new RangeError("invalid frame");return this.P_t[t]}N_t(t,s){(s=Math.floor(s))<0?this.P_t.unshift(t):s>=this.P_t.length?this.P_t.push(t):this.P_t.splice(s,0,t)}W_t(t){if((t=Math.floor(t))<0||t>=this.P_t.length)throw new RangeError("invalid frame");this.P_t[t].Gr(),this.P_t.splice(t,1)}j_t(i){for(let t=0,s=this.P_t.length;t<s;++t)if(ma.Gh(this.P_t[t].t8(),i))return t;return-1}V_t(t){if("string"!=typeof t)return t;{const s=this.j_t(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}wW(){return this.C_t}bW(){return this.ebt}MW(){return this.jot}xW(){return this.R_t}TW(){return this.A_t}U_t(){return this.F_t}}}{const ga=self.Ws,ya=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ga.E_t=class extends ga.br{constructor(t){super(),this.H_t=ga.vr(ga.h_t),this.H_t.g_t(t),this.z_t=t[7],this.J_t=ga.vr(ga.dl,t[8],t[9]),this.q_t=t[10].map(t=>ga.vr(ga.X_t,this,t)),this.Y_t=new Map;for(const i of this.q_t)this.Y_t.set(i.Sf().toLowerCase(),i);this.$_t=null;const s=t[11];6<=s.length&&(this.$_t=ga.vr(ga.qu,s)),this.Cy=t[12]||"",this.K_t=new self.DW(this)}static D_t(t){const s=ga.vr(ga.E_t,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.H_t.S_t(t,ya),s}Gr(){this.$_t&&(this.$_t.Gr(),this.$_t=null),this.H_t.Gr(),this.H_t=null}kW(){return this.H_t}OW(){return this.z_t}BW(){return this.J_t.Sl()}WW(){return this.J_t.bl()}$W(){return this.$_t}XW(t){return this.Y_t.get(t.toLowerCase())||null}qW(t){return(t=Math.floor(t))<0||t>=this.q_t.length?null:this.q_t[t]}UW(){return this.q_t.length}t8(){return this.Cy}AW(){return this.K_t}}}{const Sa=self.Ws;Sa.X_t=class extends Sa.br{constructor(t,s){super(),this.Z_t=t,this.Ir=s[0],this.Q_t=Sa.vr(Sa.dl,s[1],s[2])}Gr(){}Sf(){return this.Ir}qM(){return this.Q_t.Sl()}$M(){return this.Q_t.bl()}tIt(){return this.Q_t}}}{const g=self.Ws,wa=self.C3Debugger,ba=self.e5;g.lut=class extends g.br{constructor(s,t,i){super();const e=s.Kyt(i[1]),[h,r]=(this._f=s,this.lGt=g.AL.$L(e),this.mGt=null,this.sIt=e.Instance,this.Iy=t,this.K7=i[11],this.Ir=i[0],this.DSt=this._f.m1t(i[14]),this.iIt=!!i[9],this.eIt=!!i[2],this.hIt=!!i[10],this.rIt=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],nIt:s.m1t(t[3])})),this.oIt=i[4],this.aIt=i[5],this._xt=this.lGt.kL(),this.lIt=g.vr(g.Event.r0),this.Dz=null,s.fD().QO());if(this.uIt=g.vr(g.cIt,h,r),this.fIt=!0,this.dIt=null,this.pIt=null,this.mIt=-1,this.gIt=null,this.yIt=null,this.SIt=null,this.wIt=null,this.bIt=null,this.MIt=!1,this.vIt=null,this.xIt=i[8].map(t=>g.GIt.Hx(this,t)),this.TIt=[],this._It=new Map,this.IIt=new Map,this.CIt=new Set,this.RIt=new Map,this.AIt=g.vr(g.Nft,this),this.PIt=null,this.EIt=0,this.FIt=!1,this.vIt=null,this.H_t=null,this.DIt=null,this.kIt=null,this.OIt=null,this.LIt=0,this.abt=new Map,this.lbt=new Map,this.S7=[],this.BIt=new Map,this.NIt=!0,this.lGt.jL()&&(this.Dz=g.vr(g.kz,this,i[12])),i[6]&&(this.H_t=g.vr(g.h_t),this.H_t.g_t(i[6])),i[7]){this.DIt=i[7].map(t=>g.vr(g.I_t,t)),this.kIt=new Map,this.OIt=new Map;for(const a of this.DIt)this.kIt.set(a.Sf().toLowerCase(),a),this.OIt.set(a.EJ(),a)}this.eIt?(this.dIt=[],this.pIt=new Set,this.mIt=this._f.WIt()):(this.gIt=[],this.yIt=new Set,this.SIt=[],this.wIt=[],this.bIt=[]);const n=this.lGt.Cbt();if(n<2&&(this.mGt=g.vr(e.jIt,this,i[15]),!(this.mGt instanceof g.aGt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.VIt=null,this.UIt=null,this.DX=g.vr(g.Event.r0),g.AL.Kxt(this,n);let o;if(o=2<=n?(o=e.jIt)||globalThis.V8:this.mGt.Xxt()){if(this.VIt=new o(n<2?this:null),n<2&&!(this.VIt instanceof ba))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.VIt instanceof globalThis.V8))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.VIt=new ba;if(g.AL.Zxt(n),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.mGt.uGt(u,c,f)}}this._f.HIt()&&!this.eIt&&!this.hIt&&this._xt||this.qxt(),this.lGt.FL()&&(this.lGt.Yxt(this),this.zIt(i)),this.JIt=null}static Hx(t,s,i){return g.vr(g.lut,t,s,i)}Gr(){if(this.lIt.Gr(),this.lIt=null,this.H_t&&(this.H_t.Gr(),this.H_t=null),this.DIt){for(const t of this.DIt)t.Gr();g.$n(this.DIt),this.kIt.clear(),this.OIt.clear()}this.JIt=null,this.AIt.Gr(),this.AIt=null,this.abt.clear(),this.lbt.clear(),this.vIt=null,this._f=null}qIt(i){for(let t=1,s=i.length;t<s;++t){const e=this._f.tJ(i[t]);this.dIt.push(e),this.pIt.add(e),e.gIt.push(this),e.yIt.add(this)}}XIt(t){this.MIt=!0,this.vIt=t}bN(){return this.MIt}rY(){return this.vIt}YIt(){let t=0;if(!this.eIt)for(const s of this.gIt)for(const i of s.$It()){const e=i.Sf().toLowerCase();this._It.set(e,i),this.IIt.set(e,t),this.TIt.push(i),++t}for(const h of this.$It()){const r=h.Sf().toLowerCase();this._It.set(r,h),this.IIt.set(r,t),this.TIt.push(h),++t}for(const n of this.TIt)this.CIt.add(n.hW().constructor);if(!this.eIt&&this.gIt.length){let t=this._f.KIt(),s=(g.Zn(this.SIt,t,0),g.Zn(this.wIt,t,0),g.Zn(this.bIt,t,0),[]),i=0,e=0,h=0;for(const o of this.gIt){const a=o.uwt(),l=(this.SIt[a]=i,i+=o.ZIt(),this.wIt[a]=e,e+=o.QIt(),this.bIt[a]=h,h+=o.tCt(),o.C5());if(l&&this.Dz)for(const u of l.R5())s.push(u.sCt(this.Dz))}this.Dz&&this.Dz.iCt(s)}}zIt(t){const s=this._f.eCt(),i=g.vr(g.Instance,{runtime:this._f,aN:this,uid:s});i.hCt(t[16],[]),this._f.rCt(s,i),this.S7.push(i)}GMt(){return this.mGt}nCt(){return this.hIt}r0(){return this.lIt}qxt(){this.eIt||(this.mGt?this.mGt.qxt():this.VIt.U8())}oCt(){return 0<this.LIt}async lY(t){this.eIt||(this.LIt++,1===this.LIt&&(this.mGt?await this.mGt.lY(t):await this.VIt.J8(this._f.dL().aCt())))}mY(){if(!this.eIt){if(this.LIt--,this.LIt<0)throw new Error("released textures too many times");0===this.LIt&&(this.mGt?this.mGt.mY():this.VIt.q8(this._f.dL().aCt()))}}fY(){if(this.eIt)throw new Error("not applicable to family");this.mGt?this.mGt.fY():this.VIt.X8()}async OY(t){this.eIt||(this.mGt?await this.mGt.OY(t):await this.VIt.Y8(this._f.dL().aCt()))}TO(){return this._f}r5(){return this.lGt}lCt(){return this.sIt}Sf(){return this.Ir}m1t(){return this.DSt}rD(){return this.Iy}EJ(){return this.K7}GJ(){return this.eIt}uJ(){return this.iIt}kL(){return this._xt}uwt(){return this.mIt}$It(){return this.xIt}QIt(){return this.oIt}uCt(t){return t&&this.CIt.has(t)}ZIt(){return this.rIt.length}cCt(){return this.rIt.map(t=>t.sid)}fCt(s){return this.rIt.findIndex(t=>t.sid===s)}Eit(s){return this.rIt.findIndex(t=>t.name===s)}dCt(){return this.rIt.map(t=>t.name)}pCt(){return this.rIt.map(t=>t.nIt)}Dit(t){if((t=Math.floor(t))<0||t>=this.rIt.length)throw new RangeError("invalid instance variable index");return this.rIt[t].type}Fit(t){if((t=Math.floor(t))<0||t>=this.rIt.length)throw new RangeError("invalid instance variable index");return this.rIt[t].name}tCt(){return this.aIt}mCt(){return this.TIt}rrt(t){return this._It.get(t.toLowerCase())||null}Oit(t){const s=this.IIt.get(t.toLowerCase());return void 0===s?-1:s}C5(){return this.Dz}jL(){return this.lGt.jL()}gCt(){return this.Dz&&this.Dz.yCt()}hpt(){return this.AIt}g5(){return this.AIt.g5()}kW(){return this.H_t}eJ(t){this.PIt=t}iJ(){return this.PIt}hJ(t){this.EIt=t}SCt(){return this.EIt}wCt(){return this.DIt}bCt(){return this.DIt.length}v1t(){return this.gIt}AMt(t){return this.yIt.has(t)}Dgt(){return this.dIt}TJ(t){return this.pIt.has(t)}mwt(t){return this.wIt[t]}lwt(t){return this.SIt[t]}SSt(t){this.RIt.set(t.xSt().toLowerCase(),t)}wSt(t){return!!this.RSt(t)}RSt(t){const s=this.RIt.get(t.toLowerCase());return s&&s.mc()?s:null}MCt(){return this.DIt}vCt(t){if(this.DIt)return this.kIt.get(t.toLowerCase())||null;throw new Error("no animations")}xCt(t){if(this.DIt)return this.OIt.get(t)||null;throw new Error("no animations")}GCt(t){if(this.vCt(t))throw new Error(`animation name '${t}' already exists`);const s=g.I_t.D_t(this.TO(),t);return this.DIt.push(s),this.kIt.set(s.Sf().toLowerCase(),s),this.OIt.set(s.EJ(),s),s}TCt(t){const s=this.vCt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.DIt.length)throw new Error("cannot remove last animation");const i=this.DIt.indexOf(s);this.DIt.splice(i,1),this.kIt.delete(s.Sf().toLowerCase()),this.OIt.delete(s.EJ()),s.Gr()}_Ct(){if(this.DIt)return this.DIt[0];throw new Error("no animations")}ICt(){return this._Ct().B_t(0)}CCt(){if(this.DIt){const t=this.ICt().kW();return[t.Lm(),t.qm()]}return this.H_t?[this.H_t.Lm(),this.H_t.qm()]:[100,100]}i5(){if(this.lGt.FL())return this.S7[0];throw new Error("not a single-global plugin")}m5(){return this.S7}*instances(){yield*this.S7}*p5(){yield*this.S7,yield*this._f.Dvt(this)}S5(){return this.S7.length}cJ(t){this.S7.push(t)}RCt(){this.NIt=!0}qY(){if(this.NIt&&!this.eIt){let s=this.S7,i=0;for(let t=s.length;i<t;++i)s[i].ACt(i);const t=this._f.PCt();for(const e of t)e.lN()===this&&e.ACt(i++);this.NIt=!1}}ECt(t){const s=this.S7;if(t<s.length)return s[t];t-=s.length;const i=this._f.PCt();for(const e of i)if(e.lN()===this){if(0===t)return e;--t}return null}yvt(t){if(t&&t.bN()&&t.lN()!==this)for(const i of t.MN())if(i.lN()===this)return i;const s=this.g5().m5();return s.length?s[0]:null}d5(t){const s=this.g5().m5();return 0<s.length?s[t.GN()%s.length]:null}*Wvt(t,s){let i=this.g5().m5(),e=i.length,h=s.g5(),r=s.g5().m5(),n=r.length,o=t.GN(),a=(!s.GJ()&&h.Zft()||(o=r.indexOf(t)),Math.ceil(e/n)),l=e%n,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}Wbt(t){this.mGt?.Wbt(t)}Vyt(){if(this.MIt&&!this.eIt){this.qY();const t=this.g5(),s=t.n0t(),i=t.Zft(),e=this._f.r1t(),h=e&&e.HD()&&e.HD().m0t();for(const r of this.vIt.zY())if(r!==this){r.qY();const n=r.g5();if(n.r0t(i),!i){const o=n.n0t();g.$n(o);for(const a of s)o.push(r.ECt(a.GN()));if(h){const l=t.o0t(),u=n.o0t();g.$n(u);for(const c of l)u.push(r.ECt(c.GN()))}}}}}zbt(t,s){for(const i of this.rY().zY()){const e=i.g5();t?g.Yn(e.o0t(),s):g.Yn(e.n0t(),s)}}FCt(){return this.uIt}DCt(t){this.fIt=!!t}kCt(){if(this.fIt&&this._xt){for(const t of this.S7)t.rO().OCt();for(const s of this._f.PCt())s.lN()===this&&s.rO().OCt();this.fIt=!1}}LCt(s,t,i){if(t){const e=this.BIt.get(t);e&&(e.delete(s),0===e.size)&&this.BIt.delete(t)}if(i){let t=this.BIt.get(i);t||(t=new Set,this.BIt.set(i,t)),t.add(s)}}BCt(){if(this.GJ()){const t=new Set;for(const s of this.dIt)for(const i of s.BCt())t.add(i);return t.values()}return this.BIt.keys()}Dbt(){return this.abt||(this.abt=new Map),this.abt}kbt(){return this.lbt||(this.lbt=new Map),this.lbt}NCt(){return this.uCt(g.blt.$Tt)}WCt(){return this.uCt(g.blt.KTt)}jCt(){return this.uCt(g.blt.NoSave)}aJ(){return this.uCt(g.blt.Persist)}$q(){const t={instances:this.S7.map(t=>t.av())};return this.abt&&this.abt.size&&(t.ex=g.$o(this.abt)),t}Kq(t,e){this.abt&&(this.abt.clear(),this.abt=null);const s=t.ex,h=(s&&(this.abt=g.Ko(s)),this.S7),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].lv(r[t]);for(let t=r.length,s=h.length;t<s;++t)this._f.mN(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.kL()||(s=this._f.Lk().YX(t.w.l))){const n=this._f.lJ(this.PIt||this,s,!1,0,0,!0);n.lv(t),e&&e.add(n)}}this.JIt=r,this.RCt()}VCt(){return this.JIt}UCt(){this.JIt=null}HCt(){for(let t=0,s=this.S7;t<s;++t)this.S7[t].HCt()}QL(){return this.VIt}DD(){return this.DX}zCt(){return this.UIt}w5(t){this.UIt=t}y$(t){const s=this._f,i=s.h4()&&!s.BD().G5();i&&wa.StartMeasuringScriptTime(),this.DX.dispatchEvent(t),i&&wa.AddScriptTime()}}}{const Ma=self.Ws;Ma.JCt=class extends Ma.br{constructor(t,s){super(),this._f=t,this.qCt=s;for(const i of this.qCt)i.XIt(this)}Gr(){this._f=null}TO(){return this._f}hY(){return this.qCt}zY(){return this.qCt}YY(){return this.qCt.some(t=>t.kL())}}}{let w=self.Ws,h=self.C3Debugger,n=w.AL,o=[],a=0,b=new WeakMap,e=new WeakMap;w.Instance=class extends w.br{constructor(t){if(w.AL!==n)throw new Error("invalid addon manager");super(),this._f=t.runtime,this.XCt=t.aN,this.rit=null,this.YCt=null,this.$Ct=null,this.KCt=0,this.ZCt=t.uid,this.QCt=a++,this.Ybt=0,this.tRt=null;const s=w.mo(t.tags),i=(0<s.length&&(this.tRt=new Set(s)),this.sRt=o,this.iRt=o,this.XCt.mCt()),e=(0<i.length&&(this.iRt=i.map((t,s)=>w.vr(w.eRt,{runtime:this._f,rW:t,aW:this,index:s}))),this.hRt=this.XCt.bN()?[]:null,this.rRt=-1,this.lIt=null,this.r5());if(e.MM()&&(this.Ybt|=4),e.kL())if(this.rit=w.vr(w.nRt,this,t.T4),t.oRt)this.rit.aRt(t.oRt);else{this.rit.lRt();const[h,r]=this.XCt.CCt();this.rit.DC(h,r),this.lN().gCt()&&this.rit.G4().uRt()}t.cRt?this.fRt(t.cRt):this.dRt()}Gr(){if(this.$Ct&&(this.$Ct.pN(),this.$Ct=null),0<this.iRt.length){for(const i of this.iRt)i.Gr();w.$n(this.iRt)}this.YCt&&(this.YCt.Gr(),this.YCt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.hRt&&w.$n(this.hRt),this.lIt&&(this.lIt.Gr(),this.lIt=null),this.tRt&&this.tRt.clear(),this.tRt=null,this._f=null,this.XCt=null,0<this.sRt.length&&w.$n(this.sRt),this.rit&&(this.rit.Gr(),this.rit=null)}fRt(t){0<t.length&&(this.sRt=[],w.eo(this.sRt,t))}dRt(){const s=this.XCt.ZIt();if(0!==s){this.sRt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.sRt.push(i[this.XCt.Dit(t)])}}hCt(t,i){if(this.YCt)throw new Error("already got sdk instance");for(let t=0,s=this.iRt.length;t<s;++t){const e=this.iRt[t];e.hCt(i?i[t]:null)}const s=this.r5().Cbt();if(s<2){if(this.YCt=w.vr(this.XCt.lCt(),this,t),!(this.YCt instanceof w.dGt))throw new Error("sdk type must derive from SDKInstanceBase");!this.r5().kL()&&this.XCt.zCt()&&this.sO()}else{const h=this.r5().Xxt();this.pRt(h.Instance,t)}}K6(){return this.YCt??this.$Ct}rO(){return this.rit}TO(){return this._f}pk(){return this.rRt}IN(){const t=this.rRt;return-1===t?this.TO().pk():t}mk(t){((t=+t)<0||!isFinite(t))&&(t=0),this.rRt=t,this.lN().gCt()&&this._f.mRt(this,!0)}RN(){this.rRt=-1,this.lN().gCt()&&this._f.mRt(this,!1)}Nq(){return this._f.gRt(this)}r0(){return this.lIt||(this.lIt=w.vr(w.Event.r0)),this.lIt}Nv(t){this.YCt?this.YCt.Nv(t):this.$Ct.ej(this._f.dL().aCt())}qxt(t){this.YCt.qxt(t)}yRt(){this.Ybt|=2}SRt(){return 0!=(2&this.Ybt)}wRt(){this.Ybt|=1}Pj(){return 0!=(1&this.Ybt)}MM(){return 0!=(4&this.Ybt)||this.YCt.MM()}bRt(){this.Ybt|=32}Aq(){return 0!=(32&this.Ybt)}MRt(){return 0!=(8&this.Ybt)}vRt(t){t?this.Ybt|=8:this.Ybt&=-9}xRt(){return 0!=(16&this.Ybt)}GRt(t){t?this.Ybt|=16:this.Ybt&=-17}TRt(){return 0!=(64&this.Ybt)}_Rt(t){t?this.Ybt|=64:this.Ybt&=-65}IRt(t,s){t<<=16,s?this.Ybt|=t:this.Ybt&=~t}CRt(t){return 0!=(this.Ybt&t<<16)}YGt(){return this.YCt.YGt()}$Gt(){return this.YCt.$Gt()}KGt(){return this.YCt.KGt()}ZGt(){return this.YCt.ZGt()}tTt(){return this.YCt.tTt()}WMt(t){return this.YCt.WMt(t)}lN(){return this.XCt}Cq(){return this.YCt.Cq()}kvt(t){return t.GJ()?t.TJ(this.lN()):this.lN()===t}RRt(h,t,s){const i=(t,s)=>{const i=s||t.lN(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.bN())for(const e of this.MN())i(e);if(s)for(const r of this.u6())i(r)}ARt(){if(!this.r5().zL())throw new Error("object does not support scene graph")}m6(){return null!==this.i6()}i6(){const t=this.rO();if(!t)return null;const s=t.i6();return s?s.G8():null}h6(){const t=this.rO();if(!t)return null;const s=t.h6();return s?s.G8():null}*r6(){const t=this.rO();if(t)for(const s of t.r6())yield s.G8()}PRt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}tX(){const t=this.rO();return!!t&&t.tX()}ERt(t){const s=this.rO();if(!s)return[];const i=t.Sf();return s.e$().map(t=>t.G8()).filter(t=>t.lN().Sf()===i)}e$(){const t=this.rO();return t?t.e$().map(t=>t.G8()):[]}*children(){const t=this.rO();if(t)for(const s of t.children())yield s.G8()}*u6(){const t=this.rO();if(t)for(const s of t.u6())yield s.G8()}o6(){const t=this.rO();return t?t.o6():0}FRt(){return[...this.r6()].length}Nvt(){const t=this.rO();return t?t.Nvt():0}l6(t){const s=this.rO();if(!s)return null;const i=s.l6(t);return i?i.G8():null}DRt(){const t=this.rO();if(!t)return NaN;const s=t.i6();return s?s.kRt(t):NaN}ORt(t){for(const s of this.rO().e$())if(s.G8().vN()===t)return!0;return!1}f6(t,s){this.ARt(),t.ARt(),this.rO().f6(t.rO(),s||{})}d6(t){const s=this.rO();s&&s.d6(t.rO())}D6(){const t=this.rO();return!!t&&t.D6()}EY(){const t=this.rO();if(t){const s=t.LRt();if(s)for(const i of s){const e=this._f.tO(i[2]);if(e){const h=i[3];this.f6(e,{y6:!!(h>>0&1),w6:!!(h>>1&1),M6:!!(h>>2&1),x6:!!(h>>3&1),T6:!!(h>>4&1),F6:!!(h>>5&1),I6:!!(h>>6&1),R6:!!(h>>7&1),P6:!!(h>>8&1)})}}}}FY(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.f6(h,{y6:!!(r>>0&1),w6:!!(r>>1&1),M6:!!(r>>2&1),x6:!!(r>>3&1),T6:!!(r>>4&1),F6:!!(r>>5&1),I6:!!(r>>6&1),R6:!!(r>>7&1),P6:!!(r>>8&1)})}}}_N(){const t=this._f.BRt();return t?t.cut(this):""}bN(){return null!==this.hRt}JY(t){this.hRt.push(t)}SN(){return this.hRt}NRt(t){return!!this.WRt(t)}WRt(t){const s=this.MN();if(null===s||0===s.length)return!1;for(const i of s)if(i.lN()===t)return i;return null}MN(){return this.hRt}Jmt(){for(const t of this.MN())t.lN().g5().a0t(t)}jbt(){for(const t of this.MN())t.lN().g5().e0t(t)}Vbt(t){for(const s of this.MN())s.lN().g5().n0t()[t]=s}Hbt(){for(const t of this.MN())t.lN().g5().h0t(t)}Ubt(t){for(const s of this.MN())s.lN().g5().o0t()[t]=s}r5(){return this.XCt.r5()}ACt(t){this.KCt=t}GN(){return this.XCt.qY(),this.KCt}vN(){return this.ZCt}jRt(){return this.QCt}VRt(t){t?this.FN(new Set(t)):this.tRt=null}FN(t){if(0===t.size)this.tRt=null;else{this.tRt?this.tRt.clear():this.tRt=new Set;for(const s of t)this.tRt.add(s)}}PN(){return this.tRt??new Set}l2t(){return Array.from(this.PN()).join(" ")}f2t(t){t=Math.floor(t);for(const s of this.PN()){if(0===t)return s;--t}return""}hrt(){return this.iRt}URt(t){if(t)for(const s of this.iRt)if(s.hW()instanceof t)return s;return null}Mlt(t){if(!t)return null;const s=this.URt(t);return s?s.K6():null}ert(i){const e=this.iRt;for(let t=0,s=e.length;t<s;++t)if(e[t].oW().EJ()===i)return t;return-1}HRt(){return this.sRt}dCt(){return this.XCt.dCt()}zRt(){return this.sRt.length}bnt(t){const s=this.sRt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}owt(t){return this.sRt[t]}JRt(t){const s=this.sRt[t];return 0===this.XCt.Dit(t)?!!s:s}Mnt(t,s){const i=this.sRt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.XCt.Dit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}fot(t,s){if(0!==s){const i=this.sRt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}Dbt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}kbt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}qRt(t){const s=this.lN();if(s.DD().u0(t))return!0;for(const i of s.v1t())if(i.DD().u0(t))return!0;return!!this._f.DD().u0(t)}x5(){const t=new Set,s=(t.add(this),this.rO());if(s&&s.tX())for(const i of this.u6())if(t.add(i),i.bN())for(const e of i.MN())t.add(e);if(this.bN())for(const h of this.MN())t.add(h);for(const r of t.values())r.DY();this.kY()}XRt(){this.XCt.zCt()&&this.sO();for(const t of this.iRt)t.kTt()}YRt(){this.XRt()}DY(){if(this.XRt(),this.qRt("instancecreate")){const t=this.lN(),s=new w.Event("instancecreate");s.aW=this.sO(),t.y$(s);for(const i of t.v1t())i.y$(s);this._f.y$(s)}this._f.YN(this.r5().Ept().WY.m2t,this,null)}kY(){if(this.r5().zL()){if(this.y$(new w.Event("hierarchyready")),this.qRt("hierarchyready")){const t=this.lN(),s=new w.Event("hierarchyready");s.aW=this.sO(),t.y$(s);for(const i of t.v1t())i.y$(s);this._f.y$(s)}this._f.YN(this.r5().Ept().WY.Evt,this,null)}}$Rt(){this._f.YN(this.r5().Ept().WY.g2t,this,null)}KRt(t){if(this.$Ct){const s=new w.Event("destroy");s.ZRt=t,this.y$(s)}if(this.qRt("instancedestroy")){const i=this.lN(),e=new w.Event("instancedestroy");e.aW=this.sO(),e.ZRt=t,i.y$(e);for(const h of i.v1t())h.y$(e);this._f.y$(e)}}QRt(){return this.YCt?this.YCt.OGt():this.$Ct.l4()}av(t="full",s=null){const i={},e=("full"===t?i.uid=this.vN():i.c3=!0,this.PN());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=w.$o(r)),-1!==this.pk()&&(i.mts=this.pk()),0<this.XCt.ZIt()){const n={},o=this.XCt.cCt();for(let t=0,s=this.sRt.length;t<s;++t)n[o[t].toString()]=this.sRt[t];i.ivs=n}if(this.iRt.length){const a={};for(const l of this.iRt){const u=l.av(t);u&&(a[l.oW().EJ().toString()]=u)}i.behs=a}}this.rit&&(i.w=this.rit.$q(t,s));const h=this.YCt?this.YCt.av():this.$Ct.u4();return h&&(i.data=h),i}fK(t="full",s){this.rit&&this.rit.fK(t)}pK(t,s="full",i=null){this.rit&&this.rit.pK(t,s,i)}tAt(t,s="full",i=null){this.rit&&this.rit.tAt(t,s,i)}HCt(){this.r5().kL()&&this.rit.HCt()}lv(s,t="full",i){if("full"===t)this.ZCt=s.uid;else if(!s.c3)return;if(this.VRt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=w.Ko(h),b.set(this,t)),this.rRt=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),l=this.XCt.fCt(a);if(!(l<0||l>=this.sRt.length)){let t=o;null===t&&(t=NaN),this.sRt[l]=t}}}if(this.r5().kL()){const u=s.w;if(u){const c=u.l;if(this.rit.nO().EJ()!==c){const f=this.rit.nO(),d=f.jk().YX(c);d?(this.rit.uO(d),f.pJ(this,!0),d.cJ(this,!0),d.cO(this),this.rit._4()):"full"===t&&this._f.mN(this)}this.rit.Kq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),S=this.ert(y);S<0||S>=this.iRt.length||this.iRt[S].lv(g,t)}}const e=s.data;e&&(this.YCt?this.YCt.lv(e,t):this.$Ct.c4(e))}sO(){return this.$Ct||this.pRt()}WGt(){return!!this.$Ct}pRt(t,s){const i=this.rit?t?self.K8:self.z6:t?self.LN:self.oN,e=t||this.YCt.Xxt(),h=this.XCt.zCt(),r=h||e||i,n=this.r5().Cbt();if(w.AL.Kxt(this,n),w.AL.QTt(s),this.$Ct=new r,w.AL.t_t(),w.AL.Zxt(n),e&&!(this.$Ct instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.$Ct instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.$Ct}uN(t){if(0!==this.sRt.length){const i={},e=this.XCt.pCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:w.Instance.prototype.JRt.bind(this,t),set:w.Instance.prototype.Mnt.bind(this,t)};const s=Object.create(Object.prototype,i);t.sAt={value:s,writable:!1}}}cN(t){const s=this.iRt;if(0!==s.length){const i={};for(const h of s)i[h.oW().m1t()]={value:h.SGt(),writable:!1};const e=Object.create(Object.prototype,i);t.Emt={value:e,writable:!1}}}y$(t){if(this.WGt()){const s=this.sO(),i=(t.aW=s,this._f),e=i.h4()&&!i.BD().G5();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const va=self.Ws;va.r$=class extends va.br{constructor(e){super(),this.Sv=e,this.Zmt=null,this.iAt=[],this.eAt=e.Lm(),this.hAt=e.qm(),this.rAt=1,this.nAt=1,this.oAt=0,this.aAt=1,this.lAt=e.uP(),this.uAt=null,this.cAt=null,this.fAt=NaN,this.dAt=!1,this.eX=NaN,this.hX=NaN,this.pAt=t=>{if(t.aW===this.Zmt.G8()){const s=e.TO(),i=(s.r0().removeEventListener("instancecreate",this.pAt),this.Zmt.G8().K6());this.dAt=!!i.Yit(),this.eX=this.dAt?i.Xit():NaN,this.hX=this.dAt?i.Kit():NaN}}}Gr(){this.Zmt=null,this.uAt=null,this.cAt=null,this.fAt=NaN,this.dAt=!1,this.eX=NaN,this.hX=NaN,va.$n(this.iAt)}mAt(t){if(this.aAt=this.Sv.uP(),this.lAt=this.aAt,this.Zmt=t,this.oAt=t?t.GetAngle():0,this.Zmt){const s=this.Sv,i=s.TO(),e=this.Zmt.G8().r5().Cbt();if(e<2){const h=this.Zmt.G8().K6();h?(this.dAt=!!h.Yit(),this.eX=this.dAt?h.Xit():NaN,this.hX=this.dAt?h.Kit():NaN):this.Zmt.G8().Pj()||i.r0().addEventListener("instancecreate",this.pAt)}else this.dAt=!1,this.eX=NaN,this.hX=NaN}else this.dAt=!1,this.eX=NaN,this.hX=NaN}i6(){return this.Zmt}tX(){return 0<this.iAt.length}e$(){return this.iAt}gAt(){this.tX()&&1!==this.iAt.length&&(this.cAt?this.iAt.sort((t,s)=>{const i=this.cAt.get(t.G8()),e=this.cAt.get(s.G8());return va.Se(i)&&va.Se(e)?i-e:0}):this.iAt.sort((t,s)=>{const i=t.Pnt().yAt(),e=s.Pnt().yAt();return va.Se(i)&&va.Se(e)?i-e:0}))}yAt(){return this.fAt}Ent(){return this.rAt}SAt(t){this.rAt=t}Dnt(){return this.nAt}wAt(t){this.nAt=t}Vnt(){return this.lAt}avt(){return this.aAt}bAt(t){this.aAt=t}Ant(){return 0===this.eAt?Number.EPSILON:this.eAt}Fnt(){return 0===this.hAt?Number.EPSILON:this.hAt}MAt(){if(this.Sv.v6()){let t=this.Zmt,s=t.Lm(),i=t.Pnt().Ant();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.dAt?1+s/this.eX:s/i}return 1}vAt(){if(this.Sv.G6()){let t=this.Zmt,s=t.qm(),i=t.Pnt().Fnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.dAt?1+s/this.hX:s/i}return 1}xAt(){return 0}GAt(){return{sw:this.eAt,sh:this.hAt,sx:this.rAt,sy:this.nAt,psa:this.oAt,oo:this.aAt,so:this.lAt,pi:this.Sv.G8().DRt()}}$q(t,s=null){const i=this.GAt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.TAt(t),c:this._At(t)})}IAt(t){let s="";return t.S6()&&(s+="x"),t.b6()&&(s+="y"),t.v6()&&(s+="w"),t.G6()&&(s+="h"),t._6()&&(s+="a"),t.C6()&&(s+="z"),t.D6()&&(s+="d"),t.A6()&&(s+="o"),t.E6()&&(s+="v"),s}TAt(t){return this.Zmt&&this.Zmt.G8()&&!this.Zmt.G8().Pj()?this.CAt(this.Zmt,this.Sv,t):null}_At(s){return this.iAt.map(t=>this.CAt(t,t,s)).filter(t=>t)}CAt(t,s,i){const e=t.G8();if(e&&e.Pj())return null;const h={};return h.uid=e.vN(),h.f=this.IAt(s),h.offsets=s.RAt(),h.data=va.r$.AAt(e),h.oci=e.lN().rD(),"state"===i?(h.inst=e.av("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.lN().m5().indexOf(e),h.inst=null),h}Kq(t){this.eAt=t.sw,this.hAt=t.sh,this.rAt=t.sx,this.nAt=t.sy,this.oAt=t.psa,this.aAt=t.oo,this.lAt=t.so,this.fAt=va.Se(t.pi)?t.pi:NaN}PAt(t,s){if(!t&&!s&&this.uAt)for(const i of this.uAt)i.Pj()||i.m6()||i.TO().mN(i);this.uAt=t,this.cAt=s}pK(t,s){const i=this.Sv,e=i.TO(),h=new Set;if(t.p&&!this.Zmt){const o=t.p.uid,a=e.tO(o);if(s?.T2t,a){const l=a.rO();if(a.PRt(i.G8()))this.Zmt=l;else{a.ORt(i.G8().vN())?e.mN(i.G8()):a.f6(i.G8(),this.EAt(t.p.f)),h.has(i)||(i.FAt(t.p.offsets),this.DAt(a,t.p,s)),h.add(i);const u=a.rO();u.Pnt().gAt()}}else if(va.Se(t.p.oci)){const c=e.tJ(t.p.oci),f=(e.BH(),e.b5(c,i.nO(),0,0,!0));if(s?.T2t,f){const d=this.kAt(t.p,e),p=(d&&f.lv(d),f.rO()),m=(p.nO().M5(f),f.f6(i.G8(),this.EAt(t.p.f)),f.rO());m.Pnt().gAt()}}}const r=[];for(const g of t.c){const y=g.uid,S=e.tO(y);S&&r.push(S)}let n=0;for(const w of t.c){const b=w.uid,M=e.tO(b);if(s?.T2t,M){if(this.uAt){if(this.uAt.includes(M)){const T=M;if(T.lN()!==M.lN()){n++;continue}if(T.Pj()){n++;continue}const _=t.c[n];if(!s?.T2t&&this.OAt(T,r,i)){this.LAt(n,_,i,h,s),n++;continue}if(T.m6()&&T.i6()!==i.G8()){const I=this.BAt(_,s);this.NAt(I,_,h,s),n++;continue}this.NAt(T.rO(),_,h,s,!0),n++;continue}if(this.uAt[n]){const C=this.uAt[n];if(C.lN()!==M.lN()){n++;continue}if(C.Pj()){n++;continue}const R=t.c[n];if(!s?.T2t&&this.OAt(C,r,i)){this.LAt(n,R,i,h,s),n++;continue}if(C.m6()&&C.i6()!==i.G8()){const A=this.BAt(R,s);this.NAt(A,R,h,s),n++;continue}this.NAt(C.rO(),R,h,s,!0),n++;continue}}const v=M.lN(),x=this.WAt(r,v),G=i.G8().ERt(v).length;if(x===G){const P=i.G8().l6(n);if(P){const E=P.rO();E&&(h.has(E)||(E.FAt(w.offsets),this.DAt(P,w,s)),h.add(E))}n++;continue}if(M.m6()&&M.i6()!==i.G8()){const F=this.BAt(w,s);this.NAt(F,w,h,s),n++;continue}this.NAt(M.rO(),w,h,s)}else if(this.uAt&&this.uAt[n]){const D=this.uAt[n],O=e.tJ(this.jAt(w));if(D.lN()!==O){n++;continue}if(D.Pj()){n++;continue}const k=t.c[n];if(!s?.T2t&&this.OAt(D,r,i)){this.LAt(n,k,i,h,s),n++;continue}if(D.m6()&&D.i6()!==i.G8()){const L=this.BAt(k,s);this.NAt(L,k,h,s),n++;continue}this.NAt(D.rO(),k,h,s)}else{const B=this.BAt(w,s);this.NAt(B,w,h,s)}n++}}OAt(t,s,i){const e=t.lN(),h=this.WAt(s,e),r=i.G8().ERt(e).length;return h===r}LAt(t,s,i,e,h){const r=i.G8().l6(t,s);if(r){const n=r.rO();n&&(e.has(n)||(n.FAt(s.offsets),this.DAt(r,s,h)),e.add(n))}}EAt(t){const s={};return s.y6=t.includes("x"),s.w6=t.includes("y"),s.M6=t.includes("w"),s.x6=t.includes("h"),s.T6=t.includes("a"),s.I6=t.includes("z"),s.F6=t.includes("d"),s.R6=t.includes("o"),s.P6=t.includes("v"),s}jAt(t){return va.Se(t.oci)?t.oci:t[1]}BAt(e,h){if(va.Se(e.oci)){let t=this.Sv,s=t.TO(),i;if(e.data)i=s.lJ(e.data,t.nO(),!1,0,0,!1,!0);else{const r=s.tJ(e.oci);i=s.b5(r,t.nO(),0,0,!0)}if(h?.T2t,i){const n=this.kAt(e,s),o=(n&&i.lv(n),i.rO());return o.nO().M5(i,!0),o}}}NAt(t,s,i,e,h=!0){const r=this.Sv,n=r.f6(t,this.EAt(s.f));n&&h&&(i.has(t)||(t.FAt(s.offsets),this.DAt(t.G8(),s,e)),i.add(t)),this.gAt()}DAt(t,s,i){let e=this.kAt(s,this.Sv.TO());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.lv(e))}WAt(t,s){return t.filter(t=>t.lN().Sf()===s.Sf()).length}kAt(t,s){if(va.Se(t.instIndex)){const i=s.tJ(t.oci),e=i.VCt();return e?e[t.instIndex]:null}return va.Ce(t.inst)?JSON.parse(t.inst):t.inst||void 0}static AAt(t){let s=t.rO().nO().rJ(t.vN());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.e$()]){const h=e.rO();i.push([h.jk().EJ(),h.nO().rD(),e.vN(),va.r$.h$(h),e.lN().bN()?1:0,h.oO(),va.r$.AAt(e)])}return va.Ue(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=va.r$.VAt(),s[0][14][1]=i,s[0][14][2]=t.rO().oO()),s}static h$(t){let s=0;return(s|=Number(t.E6())<<8)|Number(t.A6())<<7|Number(t.C6())<<6|Number(t.D6())<<5|Number(t._6())<<4|Number(t.G6())<<3|Number(t.v6())<<2|Number(t.b6())<<1|Number(t.S6())<<0}static VAt(t){let s=0;return s,511}}}{let d=self.Ws,t=self.xs,r=(t.Ps,d.vr(d.Rect)),n=d.vr(d.du),s=d.vr(d.Event,"bboxchange",!1),f=d.vr(d.ea,0,0,0,0),u=d.vr(d.qu),i=d.vr(d.ea,1,1,1,1),o=d.vr(d.Rect,0,0,-1,-1),h=d.vr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.nRt=class extends d.br{constructor(t,s){super(),this.Ci=t,this.Wft=t.lN(),this._f=t.TO(),this.UAt=s,this.Wft.LCt(this,null,s),this.HAt=-1,this.zAt=-1,this.Ybt=196635,this.Wft.r5().NL()&&(this.Ybt|=128),this.pl=NaN,this.ml=NaN,this.DM=NaN,this.JAt=NaN,this.qAt=NaN,this.Y2=NaN,this.aa=NaN,this.XAt=NaN,this.YAt=NaN,this.$At=NaN,this.KAt=NaN,this.ZAt=d.vr(d.Rect),this.QAt=d.vr(d.du),this.tPt=h,this.sPt=o,this.iPt=null,this.ePt=null,this.hPt=null,this.FM=i,this.rPt=i,this.nPt=null,this.oPt=null,this.Ci.lN().gCt()&&(this.oPt=d.vr(d.aPt,this.Ci,this)),this.lPt=null,this.uAt=null,this.cAt=null,this.uPt=-1,this.cPt=null}wRt(){this.Ybt|=256}Gr(){if(this.Wft.LCt(this,this.UAt,null),this.nPt&&(this._f.gM().Ew(this.nPt),this.nPt=null),this.iPt=null,this.ePt&&(this.ePt.fPt.Gr(),this.ePt=null),this.hPt&&(this.hPt.clear(),this.hPt=null),this.B6(),this.oPt&&this.oPt.Gr(),this.m6()&&this.i6().d6(this),this.tX()){const t=[...this.e$()];for(const s of t)this.d6(s)}this.dPt(),this.pPt(),g.delete(this),a.delete(this),this.Ci=null,this.Wft=null,this._f=null,this.UAt=null}aRt(t){if(m=!1,this.I4(t[0],t[1]),this.QM(t[2]),this.DC(t[3],t[4]),this.Y2=0,this.NL()?this.D5(t[6]):this.aa=0,f.el(t[7]),this.mPt(f),this.Hnt(t[8]),this.Jnt(t[9]),this.OM(t[10]),this.oPt&&this.oPt.gPt(t[12]),t[14]&&g.set(this,{yPt:t[14][1],SPt:t[14][2]}),t[15]){const s=t[15],e=(this.O6(s[0],s[1]),this.U6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.Lv(t,i);o.XM(n[0]),o.KM(n[1]),o.QM(n[2]),o.sv(n[3]),o.rv(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this._f.BRt();l&&c&&c.uut(this.G8(),a),u&&c&&c.uut(this.G8(),i)}m=!0,this.wPt()}lRt(){this.pl=0,this.ml=0,this.DM=0,this.JAt=0,this.qAt=0,this.Y2=0,this.aa=0,this.XAt=0,this.YAt=1,this.$At=0,this.KAt=0,this.wPt()}TO(){return this._f}lN(){return this.Wft}G8(){return this.Ci}bPt(){return this._6()?this.MPt(this.i6().vPt()-this.lPt.xAt()):0}XM(t){if(t=+t,this.S6()){const s=this.lPt,i=t-this.qM(),e=-this.bPt();0==e?this.pl+=i/s.MAt():(this.pl+=Math.cos(e)*i/s.MAt(),this.b6()&&(this.ml+=Math.sin(e)*i/s.vAt()))}else this.pl=t}_nt(t,s=!1){t=+t,!s&&this.S6()?this.XM(this.qM()+t):this.pl+=t}qM(){if(this.S6()){let t=this.pl,s=this.lPt,i=this.i6(),e=this.bPt();return 0===e?t*=s.MAt():(t=t*s.MAt()*Math.cos(e),this.b6()&&(t-=this.ml*s.vAt()*Math.sin(e))),i.qM()+t}return this.pl}KM(t){if(t=+t,this.b6()){const s=this.lPt,i=t-this.$M(),e=-this.bPt();0==e?this.ml+=i/s.vAt():(this.S6()&&(this.pl-=Math.sin(e)*i/s.MAt()),this.ml+=Math.cos(e)*i/s.vAt())}else this.ml=t}Int(t,s=!1){t=+t,!s&&this.b6()?this.KM(this.$M()+t):this.ml+=t}$M(){if(this.b6()){let t=this.ml,s=this.lPt,i=this.i6(),e=this.bPt();return 0===e?t*=s.vAt():(t=t*s.vAt()*Math.cos(e),this.S6()&&(t+=this.pl*s.MAt()*Math.sin(e))),i.$M()+t}return this.ml}I4(t,s){if(t=+t,s=+s,this.xPt()){const i=this.S6(),e=this.b6(),h=this.lPt,r=t-this.qM(),n=s-this.$M(),o=-this.bPt();if(0==o)i?this.pl+=r/h.MAt():this.pl=t,e?this.ml+=n/h.vAt():this.ml=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.pl+=e?(l*r-a*n)/h.MAt():l*r/h.MAt():this.pl=t,e?this.ml+=i?(a*r+l*n)/h.vAt():l*n/h.vAt():this.ml=s}}else this.pl=t,this.ml=s}GPt(){return[this.qM(),this.$M()]}A4(t,s){t=+t,s=+s,this.xPt()?this.I4(this.qM()+t,this.$M()+s):(this.pl+=t,this.ml+=s)}BMt(t,s){return this.qM()===t&&this.$M()===s}QM(t){if(t=+t,this.C6()&&(t-=this.i6().ZM()),this.DM!==t){this.DM=t,this.TPt();const s=this.nO();0!==this.DM&&s.yJ(),s.cO(this)}}TPt(){if(this.wPt(),this.tX()){const i=this.e$();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.C6()&&e.TPt()}}}qnt(t){this.QM(this.ZM()+t)}ZM(){return this.C6()?this.i6().ZM()+this.DM:this.DM}E4(){return this.nO().ZM()+this.ZM()}Yit(){const t=this.G8().r5().Cbt();return t<2&&this.G8().K6().Yit()}Hm(t){if(t=+t,this.v6()){const s=this.Lm();0===s?this.JAt=Number.EPSILON:this.JAt*=t/s}else this.JAt=t;this._Pt()}gg(t,s){t=+t,!s&&this.v6()?this.Hm(this.Lm()+t):this.JAt+=t,this._Pt()}Lm(){if(this.v6()){const t=this.i6(),s=t.Lm(),i=t.Pnt().Ant();return i===Number.EPSILON?(this.Pnt().Ant()+s)*this.JAt:s*this.JAt}return this.JAt}Bm(t){if(t=+t,this.G6()){const s=this.qm();0===s?this.qAt=Number.EPSILON:this.qAt*=t/s}else this.qAt=t;this._Pt()}knt(t,s){t=+t,!s&&this.G6()?this.Bm(this.qm()+t):this.qAt+=t,this._Pt()}qm(){if(this.G6()){const t=this.i6(),s=t.qm(),i=t.Pnt().Fnt();return i===Number.EPSILON?(this.Pnt().Fnt()+s)*this.qAt:s*this.qAt}return this.qAt}DC(t,s){if(t=+t,s=+s,this.v6()){const i=this.Lm();0===i?this.JAt=Number.EPSILON:this.JAt*=t/i}else this.JAt=t;if(this.G6()){const e=this.qm();0===e?this.qAt=Number.EPSILON:this.qAt*=s/e}else this.qAt=s;this._Pt()}Gc(){return[this.Lm(),this.qm()]}Rq(){return this.Y2}IPt(t){if(t<0)throw new RangeError("invalid depth");this.Y2=t}CPt(){if(this.m6()){const t=this.lPt;return Math.min(t.MAt(),t.vAt())}return 1}NL(){return 0!=(128&this.Ybt)}D5(t){t=+t,this.NL()&&(this._6()&&(t-=this.i6().GetAngle()),t=d.Ar(t),this.aa!==t)&&(this.aa=t,this._Pt())}Ont(t){0!=(t=+t)&&this.NL()&&(this.aa=d.Ar(this.aa+t),this._Pt())}_Pt(){if(this.Ybt|=1<<18,this.tX()){const i=this.e$();for(let t=0,s=i.length;t<s;t++)i[t]._Pt()}}GetAngle(){return this._6()&&this.NL()?this.MPt(d.Ar(this.i6().vPt()+this.aa)):this.aa}vPt(){return this._6()&&this.NL()?d.Ar(this.i6().vPt()+this.aa):this.aa}MPt(t){return this.v6()&&this.h6().Lm()<0&&(t=d.Ar(d.Hr(t,this.h6().GetAngle()+Math.PI))),this.G6()&&this.h6().qm()<0?d.Hr(t,this.h6().GetAngle()):t}RPt(){const t=this.i6();return!!(this.v6()&&t.Lm()<0)||!!(this.G6()&&t.qm()<0)}APt(){const t=this.i6();return!!(this.v6()&&t.Lm()<0&&this.G6()&&t.qm()<0)}PPt(){const t=this.Ybt;if(0!=(t&1<<18)){const s=this.GetAngle();this.XAt=Math.sin(s),this.YAt=Math.cos(s),this.Ybt=-262145&t}}UMt(){return this.PPt(),this.XAt}VMt(){return this.PPt(),this.YAt}Hnt(t){this.$At=+t}Unt(t){this.$At+=+t}BW(){return this.$At}Jnt(t){this.KAt=+t}znt(t){this.KAt+=+t}WW(){return this.KAt}mPt(t){this.FM.equals(t)||(this.FM===i?(this.FM=d.vr(d.ea,t),this.rPt=d.vr(d.ea,t),this.rPt.Oa()):t.Ea(1,1,1,1)?(this.FM=i,this.rPt=i):(this.FM.set(t),this.rPt.set(t),this.rPt.Oa()),this.wPt())}fP(t){if(t=d.Rr(+t,0,1),this.A6()){if(this.Pnt().avt()===t)return;this.Pnt().bAt(t),t=this.uP()}else if(this.FM.a===t)return;this.EPt(t)}FPt(){if(this.tX()){const i=this.e$();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.EPt(e.uP())}}}EPt(t){f.Ma(this.FM),f.a=t,this.mPt(f),this.FPt()}Nnt(t){this.A6()?this.fP(this.Pnt().avt()+t):this.fP(this.uP()+t)}uP(){return this.A6()?this.i6().uP()*this.Pnt().avt():this.FM.a}V4(t){this.FM.Aa(t)||(f.Ma(t),f.a=this.uP(),this.mPt(f))}Snt(t,s,i){f.ua(t,s,i),this.V4(f)}DPt(t,s,i){0===t&&0===s&&0===i||(f.Ma(this.FM),f.r+=t,f.g+=s,f.b+=i,this.V4(f))}j4(){return this.FM}Lz(){return this.rPt}D6(){return 0!=(512&this.Ybt)}kPt(t){this.OPt(512,t)}S6(){return 0!=(1024&this.Ybt)}LPt(t){this.OPt(1024,t)}b6(){return 0!=(2048&this.Ybt)}xPt(){return 0!=(3072&this.Ybt)}BPt(t){this.OPt(2048,t)}v6(){return 0!=(4096&this.Ybt)}NPt(t){this.OPt(4096,t)}G6(){return 0!=(8192&this.Ybt)}WPt(t){this.OPt(8192,t)}_6(){return 0!=(16384&this.Ybt)}jPt(t){this.OPt(16384,t)}C6(){return 0!=(32768&this.Ybt)}VPt(t){this.OPt(32768,t)}A6(){return 0!=(this.Ybt&1<<22)}UPt(t){this.OPt(1<<22,t)}E6(){return 0!=(this.Ybt&1<<23)}HPt(t){this.OPt(1<<23,t)}zPt(){this.Ybt&=-12647937}f6(t,s){if(t===this)return!1;if(t.m6())return!1;if(this.JPt(t))return!1;if(this.qPt(t))return!1;const i=t.qM(),e=t.$M(),h=t.Lm(),r=t.qm(),n=t.GetAngle(),o=t.ZM(),a=t.uP(),l=(t.XPt(this),t.LPt(s.y6),t.BPt(s.w6),t.NPt(s.M6),t.WPt(s.x6),t.jPt(s.T6),t.VPt(s.I6),t.UPt(s.R6),t.HPt(s.P6),t.kPt(s.F6),i-this.qM()),u=e-this.$M(),c=-this.GetAngle(),f=Math.cos(c),d=Math.sin(c);if(s.y6&&(s.T6?t.pl=l*f-u*d:t.pl=l,s.M6)){const p=this.Lm()/this.lPt.Ant();0!=p&&(t.pl/=p)}if(s.w6&&(s.T6?t.ml=l*d+u*f:t.ml=u,s.x6)){const m=this.qm()/this.lPt.Fnt();0!=m&&(t.ml/=m)}if(s.M6){const g=this.Lm();0===g||g===Number.EPSILON?(t.JAt=1,t.lPt.SAt(1)):(t.JAt=h/this.Lm(),t.lPt.SAt(t.JAt))}if(s.x6){const y=this.qm();0===y||y===Number.EPSILON?(t.qAt=1,t.lPt.wAt(1)):(t.qAt=r/this.qm(),t.lPt.wAt(t.qAt))}return s.T6&&(t.aa=n-this.GetAngle()),s.I6&&(t.DM=o-this.ZM()),s.R6&&t.lPt.bAt(a),s.P6&&t.yB(this.wB()),this.YPt(t),this._4(),this.FPt(),!0}d6(t){if(t.i6()===this){const s=t.qM(),i=t.$M(),e=t.Lm(),h=t.qm(),r=t.GetAngle(),n=t.ZM(),o=t.uP();t.XPt(null),t.zPt(),t.I4(s,i),t.DC(e,h),t.D5(r),t.QM(n),t.fP(o),this.$Pt(t),this._4()}}KPt(){return this.uPt}ZPt(){this.QPt();const t=[...this.children()];for(const i of t)this.d6(i);const s=this.i6();s&&s.d6(this),this.zPt()}QPt(){if(this.tEt(),!this.uAt){const s=[...this.children()];s.length&&(this.uAt=[],this.cAt=new WeakMap);let t=0;for(const i of s){const e=i.G8();this.uAt.push(e),this.cAt.set(e,t),t++}}const t=this.i6();t&&t.QPt()}tEt(){if(-1===this.uPt){const t=[...this.r6()];this.uPt=t.length;for(const i of t)i.tEt();const s=[...this.children()];for(const e of s)e.tEt()}}pPt(){this.uAt&&(this.uAt.length=0),this.uAt=null,this.cAt=null;const t=this.i6();t&&t.pPt(),this.uPt=-1}m6(){return null!==this.i6()}i6(){const t=this.lPt;return null!==t?t.i6():null}h6(){let t=this;for(;t.m6();)t=t.i6();return t}*r6(){let t=this.i6();for(;t;)yield t,t=t.i6()}PRt(t){return this.e$().includes(t)}tX(){const t=this.lPt;return null!==t&&t.tX()}e$(){const t=this.lPt;return null!==t?t.e$():e}children(){return this.e$()}*u6(){for(const t of this.children())yield t,yield*t.u6()}o6(){return this.e$().length}Nvt(){return[...this.u6()].length}l6(t){const s=this.e$();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}kRt(s){if(s){const i=this.e$();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}sEt(t){this.lPt||(this.lPt=d.vr(d.r$,this)),t&&this.lPt.mAt(t)}Pnt(){return this.lPt}dPt(){this.lPt&&(this.lPt.Gr(),this.lPt=null)}XPt(t){t?(t.sEt(null),this.sEt(t)):(this.lPt&&this.lPt.mAt(null),this.tX()||this.dPt())}qPt(t){if(!this.m6())return!1;const s=this.i6();return s===t||s.qPt(t)}JPt(t){if(this.PRt(t))return!0;for(const s of this.e$())if(s.JPt(t))return!0;return!1}YPt(t){this.lPt.e$().push(t)}$Pt(t){const s=this.lPt.e$(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.m6()||this.dPt(),t.tX()||t.dPt()}LRt(){const t=g.get(this);return t?t.yPt:null}iEt(){const t=g.get(this);return t?t.SPt:NaN}Qq(){const t=a.get(this);return d.Se(t)?t:NaN}eEt(t){a.set(this,t)}hEt(){this.OPt(1<<19,!0),this.wPt()}wPt(){if(m){const s=this._f.gM();this.nPt&&s.Ew(this.nPt);let t;t=0!=(this.Ybt&1<<19)?s.fw()||"<point>":s.aw()||"<default>",this.nPt=s.Cw(t,this.HB(),this.rPt,this.ZM())}}Oq(){return this.nPt}OJ(){return this.FM===i}OM(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.HB()!==t&&(this.Ybt=this.Ybt&~(31<<26)|t<<26,this.wPt())}HB(){return(this.Ybt&31<<26)>>26}uO(t,s){const i=s&&this.UAt!==t;i&&this.mJ(),this.Wft.LCt(this,this.UAt,t),this.UAt=t,i&&this.rEt(),0!==this.ZM()&&this.UAt.yJ()}nO(){return this.UAt}jk(){return this.nO().jk()}wJ(t){this.HAt=0|t}oO(){return this.UAt.C9(),this.HAt}E9(t){this.zAt=0|t}Tj(){return this.UAt.A9(),this.zAt}m7(){return this.HAt}OPt(t,s){s?this.Ybt|=t:this.Ybt&=~t}wB(){return 0!=(1&this.Ybt)}yB(t){if(this.OPt(1,t),this.tX())for(const s of this.e$())s.E6()&&s.yB(t)}Q4(){return 0!=(8&this.Ybt)}t6(t){t=!!t,this.Q4()!==t&&(this.OPt(8,t),t?this._4():this.nEt())}oEt(t,s){if(this.OPt(32,t),this.hPt&&this.hPt.clear(),s.trim()){this.hPt||(this.hPt=new Set);for(const i of s.split(" "))i&&this.hPt.add(i.toLowerCase())}else this.hPt=null}aEt(t){const s=0!=(32&this.Ybt),i=this.hPt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}_4(){if(this.Ybt|=65554,this.Wft.DCt(!0),this._f.fO(),this.UAt.$z()&&(this.lEt(this.ZAt,this.QAt,!0),this.Ybt&=-3,this.rEt()),0!=(4&this.Ybt)&&this.Ci.r0().dispatchEvent(s),null!==this.lPt){const i=this.lPt.e$();for(let t=0,s=i.length;t<s;++t)i[t]._4()}}lEt(t,s,i){const e=this.qM(),h=this.$M(),r=this.Lm(),n=this.qm(),o=this.GetAngle();t.Rl(e-this.$At*r,h-this.KAt*n,r,n),i&&this.V6()&&this.uEt(t),0===o?s.Du(t):(t.offset(-e,-h),s.Ou(t,this.UMt(),this.VMt()),s.offset(e,h),s.Lu(t)),t.normalize()}cEt(){const t=this.Ybt;0!=(2&t)&&(this.lEt(this.ZAt,this.QAt,!0),this.Ybt=-3&t)}D4(){return this.cEt(),this.ZAt}L4(){return this.cEt(),this.QAt}fEt(t){const s=this.qM(),i=this.$M(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n.I(t),n.offset(e,h),n)}dEt(t){this.ZAt.I(t),this.QAt.Du(this.ZAt),this.Ybt&=-3,this.OCt(),this.rEt()}pEt(t){this.OPt(4,t)}mEt(){return 0!=(4&this.Ybt)}Gq(t,s,i){return s&&0!==this.Rq()?this.Iq(this.nO()._q()):0===this.ZM()||i?t.ou(this.D4()):this.gEt()}gEt(){const t=this.nO(),s=this.E4();return!(s>=t.t9())&&(t.ZJ(s,r),r.ou(this.D4()))}Iq(t){const s=this.D4(),i=s.Ll(),e=s.Nl(),h=s.Bl(),r=s.Wl(),n=this.E4(),o=n+this.Rq();return t.Jy(i,h,n,e,r,o)}N4(){const t=this.nO();if(t.f9())return this.Iq(t._q());{const s=t.jk();return this.Gq(t.XB(),s.xq(),s.aB())}}Fq(t){this.OPt(1<<20,t)}Eq(t){this.OPt(1<<21,t)}yEt(){return 0!=(this.Ybt&1<<20)}SEt(){return 0!=(this.Ybt&1<<21)}wEt(t){this.iPt=t,this.bEt(),this.V6()&&(this.cPt.MEt=null)}vEt(){return this.iPt}xEt(){return null!==this.iPt||this.V6()}GEt(){return this.TEt(this.Lm(),this.qm(),this.GetAngle(),this.UMt(),this.VMt())}_Et(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.TEt(t,s,i,e,h)}TEt(h,r,t,n,o){let s=this.ePt;null===s&&(s={fPt:d.vr(d.qu),width:NaN,height:NaN,angle:NaN},this.ePt=s);const a=s.fPt;if(s.width!==h||s.height!==r||s.angle!==t){const l=this.iPt;if(this.V6()){let t=this.BW(),s=this.WW(),i=this.U6(),e=this.cPt.MEt;e||(l?(u.I(l),u.offset(t,s)):u.ic(),e=i.jv(u),this.cPt.MEt=e),i.Vv(e,a),a.offset(-t,-s),a.nc(h,r,n,o)}else l?(a.I(l),a.nc(h,r,n,o)):a.rc(this.L4(),-this.qM(),-this.$M());s.width=h,s.height=r,s.angle=t}return a}bEt(){this.IEt(!0);const t=this.ePt;null!==t&&(t.width=NaN)}O6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.G8().r5().qL())throw new Error("object does not support mesh");this.B6(),this.cPt={CEt:d.vr(d.Dy.pv,t,s),REt:d.vr(d.Dy.pv,t,s),MEt:null}}V6(){return null!==this.cPt}U6(){if(this.V6())return this.cPt.CEt;throw new Error("no mesh")}AEt(){if(this.V6())return this.cPt.REt;throw new Error("no mesh")}PEt(t){this.OPt(65536,t)}EEt(){return 0!=(65536&this.Ybt)}IEt(t){this.OPt(1<<17,t)}FEt(){return 0!=(this.Ybt&1<<17)}uEt(t){const s=this.cPt.CEt,i=Math.min(s.Pv(),0),e=Math.min(s.Ev(),0),h=Math.max(s.Fv(),1),r=Math.max(s.Dv(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.ql((h-1)*n),t.Xl((r-1)*o),this.Y2=s.kv()}B6(){this.cPt&&(this.cPt.CEt.Gr(),this.cPt.REt.Gr(),this.cPt=null,this.bEt())}W6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.LB,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this.V6())return!1;const u=this.U6(),c=u.Lv(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.ZM()!==o&&(c.QM(o),f=!0),h&&(r+=t/(u._v()-1),n+=s/(u.Iv()-1)),a=-1!==a||h?(h&&(a+=t/(u._v()-1)),d.Rr(a,0,1)):c.tv(),l=-1!==l||h?(h&&(l+=s/(u.Iv()-1)),d.Rr(l,0,1)):c.hv(),c.qM()===r&&c.$M()===n&&c.tv()===a&&c.hv()===l?f:(c.XM(r),c.KM(n),c.sv(a),c.rv(l),this.bEt(),!0)}SRt(){return this.Ci.SRt()}s6(t,s){return!!this.D4().lu(t,s)&&!!this.L4().lu(t,s)&&(this.SRt()?this.Ci.K6().iTt(t,s):!this.xEt()||this.GEt().lu(t-this.qM(),s-this.$M()))}DEt(){return 0!=(16&this.Ybt)}OCt(){if(this.DEt()&&this.Q4()&&0==(256&this.Ybt)){const t=this.D4(),s=this.Wft.FCt(),i=this.tPt;if(r.set(s.E7(t.Ll()),s.F7(t.Bl()),s.E7(t.Nl()),s.F7(t.Wl())),!i.equals(r)){const e=this.Ci;i===h?(s.D7(e,null,r),this.tPt=d.vr(d.Rect,r)):(s.D7(e,i,r),i.I(r)),this.Ybt&=-17}}}kEt(){this.Ybt|=16}nEt(){const t=this.tPt;t!==h&&(this.Wft.FCt().D7(this.Ci,t,null),this.tPt=h)}rEt(){const t=this.nO();if(t.$z()&&0==(256&this.Ybt)){const s=t.BJ(),i=this.D4(),e=this.sPt;if(r.set(s.E7(i.Ll()),s.F7(i.Bl()),s.E7(i.Nl()),s.F7(i.Wl())),!e.equals(r)){const h=this.Ci;e===o?(s.D7(h,null,r),this.sPt=d.vr(d.Rect,r)):(s.D7(h,e,r),e.I(r)),t.NJ()}}}mJ(){const t=this.sPt;t!==o&&(this.nO().BJ().D7(this.Ci,t,null),this.sPt=o)}R9(){return this.sPt}H4(){const t=this.Ci,s=this.UAt,i=s.lO();i.length&&i.at(-1)===t||(s.pJ(t,!1),s.cJ(t,!1),this._f.fO())}J4(){const t=this.Ci,s=this.UAt,i=s.lO();i.length&&i[0]===t||(s.pJ(t,!1),s.dJ(t,!1),this._f.fO())}X4(t){const s=this.Ci,i=this.UAt;if(i.jk()!==t.jk())throw new Error("layer from different layout");t!==i&&(i.pJ(s,!0),this.uO(t),t.cJ(s,!0),this._f.fO())}K4(t,s){let i=this.Ci,e=!1,h=this.UAt;if(t.vN()!==i.vN()){const r=t.rO();if(!r)throw new Error("expected world instance");const n=r.nO(),o=(h.rD()!==n.rD()&&(h.pJ(i,!0),this.uO(n),n.cJ(i,!0),e=!0),n.k9(i,t,!!s));(e||o)&&this._f.fO()}}G4(){return this.oPt}OEt(t){this.OPt(64,t)}V9(){return 0!=(64&this.Ybt)}$q(t,s=null){const i={x:this.qM(),y:this.$M(),w:this.Lm(),h:this.qm(),l:this.nO().EJ(),zi:this.oO()},e=(0!==this.ZM()&&(i.ze=this.ZM()),0!==this.GetAngle()&&(i.a=this.vPt()),this.OJ()||(i.c=this.FM.toJSON()),.5!==this.BW()&&(i.oX=this.BW()),.5!==this.WW()&&(i.oY=this.WW()),0!==this.HB()&&(i.bm=this.HB()),this.wB()||(i.v=this.wB()),this.Q4()||(i.ce=this.Q4()),this.mEt()&&(i.be=this.mEt()),this.oPt&&(i.fx=this.oPt.$q()),0!=(32&this.Ybt));return e&&(i.sfi=e),this.hPt&&(i.sft=[...this.hPt].join(" ")),this.lPt&&"visual-state"!==t&&(i.sgi=this.lPt.$q(t,s),g.has(this))&&(i.sgcd=g.get(this).yPt,i.sgzid=g.get(this).SPt),this.V6()&&(i.mesh=this.U6().av()),i}RAt(){return{x:this.pl,y:this.ml,z:this.DM,w:this.JAt,h:this.qAt,a:this.aa,sgi:this.Pnt()?this.Pnt().GAt():null}}FAt(t){t&&(this.pl=t.x,this.ml=t.y,this.DM=t.z,this.JAt=t.w,this.qAt=t.h,this.aa=t.a,t.sgi&&this.Pnt()&&this.Pnt().Kq(t.sgi),this._Pt(),this._4())}HCt(){this.pPt(),this.ZPt(),this.sEt(null),this.lPt&&this.lPt.PAt(this.uAt,this.cAt)}fK(t){"visual-state"!==t&&this.ZPt()}pK(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ybt)&&this.lPt.pK(t.sgi,i)}tAt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.Ybt)&&(this.lPt.PAt(null,null),this.pPt(),this._4())}Kq(t,s){if(m=!1,this.XM(t.x),this.KM(t.y),this.Hm(t.w),this.Bm(t.h),this.wJ(t.zi),this.QM(t.hasOwnProperty("ze")?t.ze:0),this.D5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.el(t.c):t.hasOwnProperty("o")?(f.Ma(this.FM),f.a=t.o):f.la(1,1,1,1),this.mPt(f),this.Hnt(t.hasOwnProperty("oX")?t.oX:.5),this.Jnt(t.hasOwnProperty("oY")?t.oY:.5),this.OM(t.hasOwnProperty("bm")?t.bm:0),this.yB(!t.hasOwnProperty("v")||t.v),this.t6(!t.hasOwnProperty("ce")||t.ce),this.pEt(!!t.hasOwnProperty("be")&&t.be),this.oEt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.oPt&&t.hasOwnProperty("fx")&&this.oPt.Kq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.uAt)for(const i of this.uAt)i.Pj()||this._f.mN(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.sEt(null);const e=this.lPt,h=t.sgi;e.Kq(h),e.PAt(this.uAt,this.cAt),t.sgcd&&d.Se(t.sgzid)&&g.set(this,{yPt:t.sgcd,SPt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.O6(r.cols,r.rows),this.U6().lv(r)}else this.B6();this._4(),m=!0,this.wPt(),"visual-state"!==s&&this._f.LEt(this.G8(),t)}}}{const xa=self.Ws;xa.GIt=class extends xa.br{constructor(t,s){super();const i=t.TO(),e=i.Kyt(s[1]),h=(i.BEt().ZTt(e),this._f=i,this.Wft=t,this.ATt=xa.AL.fW(e),this.mGt=null,this.NEt=null,this.sIt=e.Instance,this.K7=s[2],this.Ir=s[0],this.DSt=this._f.m1t(s[3]),this.ATt.Cbt());if(h<2&&(this.mGt=xa.vr(e.jIt,this),!(this.mGt instanceof xa.RTt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(xa.AL.Kxt(this,h),2<=h){const r=e.jIt??globalThis.Vj;if(this.NEt=new r,!(this.NEt instanceof globalThis.Vj))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.NEt=new globalThis.uW;xa.AL.Zxt(h),this.qxt()}static Hx(t,s){return xa.vr(xa.GIt,t,s)}Gr(){this._f=null,this.ATt=null,this.mGt&&(this.mGt.Gr(),this.mGt=null),this.sIt=null}GMt(){return this.mGt}qxt(){this.mGt?this.mGt.qxt():this.NEt&&this.NEt.U8()}TO(){return this._f}lN(){return this.Wft}hW(){return this.ATt}lCt(){return this.sIt}Sf(){return this.Ir}EJ(){return this.K7}nW(){return this.NEt}m1t(){return this.DSt}}}{const Ga=self.Ws,Ta=self.iW;Ga.eRt=class extends Ga.br{constructor(t){super(),this._f=t.runtime,this.fwt=t.rW,this.ATt=this.fwt.hW(),this.Ci=t.aW,this.Iy=t.index,this.YCt=null,this.$Ct=null,this.ATt.cJ(this.Ci)}Gr(){this.$Ct&&(this.$Ct.pN(),this.$Ct=null),this.ATt.pJ(this.Ci),this.YCt&&(this.YCt.Gr(),this.YCt=null),this._f=null,this.fwt=null,this.ATt=null,this.Ci=null}hCt(t){if(this.YCt)throw new Error("already got sdk instance");const s=this.hW().Cbt();if(s<2){if(this.YCt=Ga.vr(this.fwt.lCt(),this,t),!(this.YCt instanceof Ga.PTt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.hW().Xxt();this.$xt(i.Instance,t)}}K6(){return this.YCt??this.$Ct}lW(){return this.Ci}TO(){return this._f}oW(){return this.fwt}hW(){return this.ATt}hnt(){return this.Iy}kTt(){this.YCt?this.YCt.kTt():this.$Ct.Jj()}NTt(t,s){this.YCt&&this.YCt.NTt(t,s)}QRt(){return this.YCt?this.YCt.OGt():this.$Ct.l4()}av(t="full"){return this.YCt?this.YCt.av(t):this.$Ct.u4(t)}lv(t,s="full"){if(this.YCt)return this.YCt.lv(t,s);this.$Ct.c4(t,s)}static WEt(t,s,i){let e=globalThis.Uj,h,r;h=s instanceof e?t.q5(s):s.DTt(),r=i instanceof e?t.q5(i):i.DTt();const n=h.lW(),o=r.lW(),a=n.lN().rD(),l=o.lN().rD();if(a!==l)return a-l;const u=n.jRt(),c=o.jRt();return u!==c?u-c:h.hnt()-r.hnt()}$xt(t,s){const i=Ta,e=t??this.YCt.Xxt(),h=e||i,r=this.hW().Cbt();if(Ga.AL.Kxt(this,r),Ga.AL.QTt(s),this.$Ct=new h,Ga.AL.t_t(),Ga.AL.Zxt(r),!e||this.$Ct instanceof i)return this.$Ct;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}SGt(){return this.$Ct||this.$xt()}WGt(){return!!this.$Ct}}}{const _a=self.Ws;_a.kz=class extends _a.br{constructor(t,s){super(),this.Sv=t,this.jEt=[],this.VEt=[],this.UEt=new Map,this.HEt=[],this.zEt=[],this.JEt=new Set,this.hM=!0;for(const i of s){const e=_a.vr(_a.qEt,this,i,this.jEt.length);this.jEt.push(e),this.UEt.set(e.Sf().toLowerCase(),e),3<=i.length&&this.HEt.push(this.XEt(e,i[2]))}this.TO().YEt(this)}Gr(){this.TO().$Et(this);for(const t of this.zEt)t.Gr();_a.$n(this.zEt),_a.$n(this.jEt),_a.$n(this.VEt),this.UEt.clear(),_a.$n(this.HEt),this.Sv=null}KEt(t){this.JEt.add(t)}ZEt(t){this.JEt.delete(t)}QEt(t){t.ZS()&&(this.zEt=this.jEt.map(t=>{const s=t.HG();return 0<s.GetCustomParametersByteSize()?_a.vr(_a.Dy.WebGPUEffectCustomParamsBuffer,s):null}),this.t3t());for(const s of this.JEt)s.QEt(t)}iCt(t){if(t.length){this.jEt=t.concat(this.jEt);for(const s of t)this.UEt.set(s.Sf().toLowerCase(),s);for(let t=0,s=this.jEt.length;t<s;++t)this.jEt[t].IJ(t)}}XEt(t,s){t.s3t(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=_a.vr(_a.ea);h.el(e),i[t]=h}}return i}Cv(){return this.Sv}TO(){return this.Sv.TO()}mW(){_a.$n(this.VEt);let t=!0;for(const s of this.jEt)s.Lmt()&&(this.VEt.push(s),s.HG().vM()||(t=!1));this.hM=t}R5(){return this.jEt}yCt(){return 0<this.jEt.length}ort(t){return this.UEt.get(t.toLowerCase())||null}i3t(t){if((t=Math.floor(+t))<0||t>=this.jEt.length)throw new RangeError("invalid effect type index");return this.jEt[t]}dW(t){return this.i3t(t).Lmt()}pW(t,s){this.i3t(t).s3t(s)}LJ(){return this.VEt}V9(){return 0<this.VEt.length}vM(){return this.hM}nrt(t){return this.HEt[t]}Nz(t){return(t<this.zEt.length?this.zEt:this.HEt)[t]}gW(t,s){if(t<0||t>=this.HEt.length)return null;const i=this.HEt[t];return s<0||s>=i.length?null:i[s]}yW(t,s,i){if(t<0||t>=this.HEt.length)return!1;const e=this.HEt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof _a.ea){if(h.Aa(i))return!1;h.Ma(i)}else{if(h===i)return!1;e[s]=i}return t<this.zEt.length&&this.zEt[t].SetParameterValue(s,i),!0}t3t(){const i=this.HEt,e=this.zEt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static e3t(t){return t&&t instanceof _a.ea?{t:"color",v:t.toJSON()}:t}static h3t(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=_a.vr(_a.ea);return i.el(t.v),i}}}static r3t(t){return t.map(_a.kz.e3t)}static n3t(t){return t.map(_a.kz.h3t)}av(){return this.jEt.map(t=>({name:t.Sf(),active:t.Lmt(),params:_a.kz.r3t(this.HEt[t.rD()])}))}lv(t){for(const s of t){const i=this.ort(s.name);i&&(i.s3t(s.active),this.HEt[i.rD()]=_a.kz.n3t(s.params))}this.mW(),this.t3t()}}}{const Ia=self.Ws;Ia.qEt=class extends Ia.br{constructor(t,s,i){super(),this.Dz=t,this.Cf=s[0],this.Ir=s[1],this.Iy=i,this.AM=null,this.T0=!0}Gr(){this.Dz=null,this.AM=null}sCt(t){const s=Ia.vr(Ia.qEt,t,[this.Cf,this.Ir],-1);return s.AM=this.AM,s.T0=this.T0,s}QEt(t){const s=t.ow(this.Cf);if(!s)throw new Error("failed to find shader program '"+this.Cf+"'");this.AM=s}C5(){return this.Dz}Sf(){return this.Ir}IJ(t){this.Iy=t}rD(){return this.Iy}Cv(){return this.Dz.Cv()}TO(){return this.Dz.TO()}s3t(t){this.T0=!!t}Lmt(){return this.T0}HG(){return this.AM}o3t(){const i=[];for(let t=0,s=this.AM.zG();t<s;++t){const e=this.AM.JG(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.vr(Ia.ea,1,1,1,1))}}return i}}}{const Ca=self.Ws;Ca.aPt=class extends Ca.br{constructor(t,s){super(),this.Ci=t,this.a3t=s,this.Dz=t.lN().C5(),this.l3t=!0,this.jz=!0,this.u3t=!1,this.c3t=!1,this.f3t=!1,this.d3t=!1,this.sD=Ca.vr(Ca.Dy.ZE,t.TO().dL().Oz(),{jE:(t,s)=>{const i=s.qF(),e=i.rO();t.LM(e.Lz()),t.Jw(e.E4()),i.Nv(t),t.Jw(0)},VE:t=>{const s=t.KGt(),[i,e]=t.$Gt();return{WF:s,jF:i,VF:e}},UE:t=>this.Nz(t)}),this.p3t=[],this.VEt=[],this.hM=!0,this.HEt=[],this.zEt=[],this.QEt(t.TO().gM());for(let t=0,s=this.Dz.R5().length;t<s;++t)this.p3t.push(!0);this.mW(),this.Dz.KEt(this)}Gr(){this.Dz.ZEt(this);for(const t of this.zEt)t&&t.Gr();Ca.$n(this.zEt),this.sD.Gr(),this.sD=null,Ca.$n(this.p3t),Ca.$n(this.VEt),Ca.$n(this.HEt),this.Ci=null,this.Dz=null}QEt(t){t.ZS()&&(this.zEt=this.Dz.R5().map(t=>{const s=t.HG();return 0<s.GetCustomParametersByteSize()?Ca.vr(Ca.Dy.WebGPUEffectCustomParamsBuffer,s):null}))}gPt(t){let s=0;for(const i of t)this.HEt.push(this.XEt(s,i)),++s;this.t3t(),this.mW()}XEt(t,s){this.p3t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.vr(Ca.ea);h.el(e),i[t]=h}}return i}uRt(){for(const t of this.Dz.R5())this.HEt.push(t.o3t());this.t3t()}Cv(){return this.Sv}C5(){return this.Dz}hD(){return this.kJ(),this.sD}TO(){return this.Ci.TO()}mW(){Ca.$n(this.VEt);let t=this.a3t,i=this.Dz.R5(),e=this.VEt,h=this.p3t,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.HG().vM()||(r=!1)}this.hM=r,t.OEt(!!e.length),this.l3t=!0}kJ(){const t=this.Ci,s=this.a3t,i=s.OJ(),e=t.r5().UL(),h=0!==s.GetAngle()||0!==s.nO().GetAngle()||s.Lm()<0||s.qm()<0,r=t.tTt(),n=t.MM();(this.l3t||i!==this.jz||e!==this.u3t||h!==this.c3t||r!==this.f3t||n!==this.d3t||this.sD.z3())&&(this.sD.J3(this.VEt.map(t=>t.HG()),{zE:this.VEt.map(t=>t.rD()),JE:!i||n,XE:e,YE:r,$E:h}),this.l3t=!1,this.jz=i,this.u3t=e,this.c3t=h,this.f3t=r,this.d3t=n)}LJ(){return this.VEt}nrt(t){return this.HEt[t]}Nz(t){return(t<this.zEt.length?this.zEt:this.HEt)[t]}gW(t,s){if(t<0||t>=this.HEt.length)return null;const i=this.HEt[t];return s<0||s>=i.length?null:i[s]}yW(t,s,i){if(t<0||t>=this.HEt.length)return!1;const e=this.HEt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.ea){if(h.Aa(i))return!1;h.Ma(i)}else{if(h===i)return!1;e[s]=i}return t<this.zEt.length&&this.zEt[t].SetParameterValue(s,i),!0}t3t(){const i=this.HEt,e=this.zEt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}vM(){return this.hM}m3t(){return this.VEt.some(t=>t.HG().TM())}dW(t){return this.p3t[t]}pW(t,s){this.p3t[t]=!!s}R5(){return this.Dz.R5()}$q(){return this.Dz.R5().map(t=>({name:t.Sf(),active:this.p3t[t.rD()],params:Ca.kz.r3t(this.HEt[t.rD()])}))}Kq(t){for(const s of t){const i=this.Dz.ort(s.name);i&&(this.p3t[i.rD()]=s.active,this.HEt[i.rD()]=Ca.kz.n3t(s.params))}this.mW(),this.t3t()}}}{let _=self.Ws,r=[],b=[],n=[],M=_.vr(_.qu),S=_.vr(_.qu),v=_.vr(_.du),d=_.vr(_.Rect),p=_.vr(_.Rect),m=null,g=null,y=null;_.g3t=class extends _.br{constructor(t){super(),this._f=t,this.y3t=0,this.S3t=0,this.w3t=[],this.b3t=0,this.M3t=0,this.v3t=0,this.x3t=0,this.G3t=new self.HO(this)}Gr(){this._f=null}TO(){return this._f}cD(){return this.G3t}T3t(){this.M3t=this.b3t,this.b3t=0,this.x3t=this.v3t,this.v3t=0}_3t(){return this.M3t}I3t(){return this.x3t}C3t(t,s){const i=t.rO(),e=s.rO();i&&e&&i.Q4()&&e.Q4()&&this.w3t.push([t,s])}Cvt(s,i,e){for(const[h,r]of this.w3t){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.kvt(i)&&!e.includes(t)&&e.push(t)}}Rvt(t,s){if(this.w3t.length)for(const[i,e]of this.w3t)if(t===i&&s===e||t===e&&s===i)return!0;return!1}R3t(){_.$n(this.w3t)}JO(t,s){if(!t||!s||t===s)return!1;const i=t.rO(),e=s.rO();if(!i.Q4()||!e.Q4())return!1;this.b3t++;const h=i.nO(),r=e.nO(),n=h.G9(r);return n?this.A3t(i,e):this.P3t(i,e)}A3t(t,s){if(!t.D4().ou(s.D4()))return!1;if(this.v3t++,!t.L4().Nu(s.L4()))return!1;if(t.SRt()&&s.SRt())return!1;if(t.SRt())return this.E3t(t,s);if(s.SRt())return this.E3t(s,t);if(!t.xEt()&&!s.xEt())return!0;const i=t.GEt(),e=s.GEt();return i.oc(e,s.qM()-t.qM(),s.$M()-t.$M())}P3t(i,e){const t=i.SRt(),s=e.SRt();if(t&&!s)return this.F3t(i,e);if(s&&!t)return this.F3t(e,i);if(s||t)return!1;{const h=i.nO(),r=e.nO(),n=(M.I(i.GEt()),S.I(e.GEt()),M.Zu());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,l=n[t],u=n[a],[c,f]=h.tN(l+i.qM(),u+i.$M());n[t]=c,n[a]=f}const o=S.Zu();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.tN(p+e.qM(),m+e.$M());o[t]=g,o[d]=y}return M.ec(),S.ec(),this.v3t++,M.oc(S,0,0)}}F3t(t,s){const i=t.nO(),e=s.nO(),h=(m=m||_.vr(_.qu),g=g||_.vr(_.Rect),y=y||_.vr(_.du),s.qM()),r=s.$M(),[n,o]=e.tN(h,r),[a,l]=i.$B(n,o),u=a-h,c=l-r;if(g.I(s.D4()),g.offset(u,c),!t.D4().ou(g))return!1;if(y.I(s.L4()),y.offset(u,c),this.v3t++,!t.L4().Nu(y))return!1;m.I(s.GEt());const f=m.Zu();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.ec(),this.E3t(t,s,a,l,m,g,y)}E3t(t,e,s,i,h,r,n){const o=void 0!==r?r:e.D4(),a=t.qM(),l=t.$M(),u=t.G8().K6(),c=void 0!==s?s:e.qM(),f=void 0!==i?i:e.$M(),d=e.xEt(),p=void 0!==n?n:e.L4(),m=b;u.D3t(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g.k3t();if(this.b3t++,o.au(y,a,l)&&(v.Du(y),v.offset(a,l),v.Nu(p)))if(d){let t=void 0!==h?h:e.GEt(),s=c,i=f;void 0!==h&&(s=e.qM(),i=e.$M());const S=g.O3t();if(S){if(this.v3t++,S.oc(t,s-(a+y.Ll()),i-(l+y.Bl())))return _.$n(m),!0}else if(M.rc(v,0,0),M.oc(t,s,i))return _.$n(m),!0}else{const w=g.O3t();if(!w)return _.$n(m),!0;if(M.rc(p,0,0),w.oc(M,-(a+y.Ll()),-(l+y.Bl())))return _.$n(m),!0}}return _.$n(m),!1}L3t(t,o,a){const l=t.g5(),s=this._f.HD();if(!s)throw new Error("cannot call outside event");const u=s.m0t(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t._B(),i.set(t,s)),s};if(l.Zft()){a||(l.r0t(!1),_.$n(l.n0t())),u&&_.$n(l.o0t());for(const e of t.m5()){let h=e.rO(),r=h.nO();if(!(!c(r)||!h.N4())&&o.some(([t,s])=>{const[i,e]=r.$B(t,s,h.E4());return h.s6(i,e)})){if(a)return!1;l.e0t(e)}else u&&l.h0t(e)}}else{let i,e=!1,n=(!u||s.oyt(this._f.n1t())||this._f.RMt()&&!l.o0t().length&&l.n0t().length?i=l.n0t():(i=l.o0t(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.rO(),r=h.nO();if(!(!c(r)||!h.N4())&&o.some(([t,s])=>{const[i,e]=r.$B(t,s,h.E4());return h.s6(i,e)})){if(a)return!1;e?l.e0t(t):i[n++]=t}else e?i[n++]=t:u&&l.h0t(t)}a||(i.length=n)}return t.Vyt(),i.clear(),!!a||l.Qft()}B3t(t,s){if(t)for(const i of s.BCt())if(!t.G9(i))return!1;return!0}CMt(t,s,i,e){if(s.GJ())for(const h of s.Dgt())this.B3t(t,h)?(h.kCt(),h.FCt().k7(i,e)):_.rr(e,h.m5());else this.B3t(t,s)?(s.kCt(),s.FCt().k7(i,e)):_.rr(e,s.m5())}iL(t,s,i,e){for(const h of s)this.CMt(t,h,i,e)}N3t(t,s,i){const e=this._f.i_t();e&&this.iL(t,e.BK(),s,i)}W3t(t,s,i){const e=this._f.e_t();e&&this.iL(t,e.BK(),s,i)}aEt(t,s){return t.MRt()&&(!s||s.rO().aEt(t.Dbt().get("solidTags")))}YO(t){const s=t.rO();this.N3t(s.nO(),s.D4(),r);for(const i of r)if(this.aEt(i,t)&&this.JO(t,i))return _.$n(r),i;return _.$n(r),null}j3t(t,s){this.N3t(null,t,r);for(const i of r)if(this.aEt(i,s)&&this.V3t(t,i))return _.$n(r),i;return _.$n(r),null}U3t(t,s){let i=null;s&&(i=n,_.$n(i));const e=t.rO();this.W3t(e.nO(),e.D4(),r);for(const h of r)if(h.xRt()&&this.JO(t,h)){if(!s)return _.$n(r),h;i.push(h)}return _.$n(r),i}H3t(s,i,e,h,r){h=h||50;const n=s.rO(),o=n.qM(),a=n.$M();for(let t=0;t<h;++t)if(n.I4(o+i*t,a+e*t),n._4(),!this.JO(s,r))return!0;return n.I4(o,a),n._4(),!1}z3t(s,i,e,h,r,n){h=h||50;let o=s.rO(),a=o.qM(),l=o.$M(),u=null,c=null;for(let t=0;t<h;++t)if(o.I4(a+i*t,l+e*t),o._4(),!this.JO(s,u))if(u=this.YO(s))c=u;else if(r&&(u=n?this.JO(s,n)?n:null:this.U3t(s))&&(c=u),!u)return c&&this.J3t(s,i,e,c,16,!0),!0;return o.I4(a,l),o._4(),!1}q3t(i,e,h,t){t=t||50;let r=i.rO(),n=r.qM(),o=r.$M(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.I4(n+e*s*u,o+h*s*u),r._4(),!this.JO(i,a)){if(!(a=this.YO(i)))return l&&this.J3t(i,e*u,h*u,l,16,!0),!0;l=a}}return r.I4(n,o),r._4(),!1}J3t(t,s,i,e,h,r){let n=2,o=!1,a=!1,l=t.rO(),u=l.qM(),c=l.$M();for(;n<=h;){const f=1/n;n*=2,l.A4(s*f*(o?1:-1),i*f*(o?1:-1)),l._4(),this.JO(t,e)||r&&this.YO(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.qM(),c=l.$M())}a&&(l.I4(u,c),l._4())}X3t(i,t=100){let e=0,h=i.rO(),r=h.qM(),n=h.$M(),o=0,a=this.YO(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.I4(Math.floor(r+t*e),Math.floor(n+s*e)),h._4(),!this.JO(i,a)&&!(a=this.YO(i)))return!0}return h.I4(r,n),h._4(),!1}Y3t(t,s,i,e){const h=t.rO(),r=h.qM(),n=h.$M(),o=Math.max(10,_.kr(s,i,r,n)),a=_.Lr(s,i,r,n),l=e||this.YO(t);if(!l)return _.Ar(a+Math.PI);let u=l,c=0,f=0,d=_.Pr(5),p;for(p=1;p<36;++p){const G=a-p*d;if(h.I4(s+Math.cos(G)*o,i+Math.sin(G)*o),h._4(),!this.JO(t,u)&&!(u=e?null:this.YO(t))){c=G;break}}for(36===p&&(c=_.Ar(a+Math.PI)),u=l,p=1;p<36;++p){const T=a+p*d;if(h.I4(s+Math.cos(T)*o,i+Math.sin(T)*o),h._4(),!this.JO(t,u)&&!(u=e?null:this.YO(t))){f=T;break}}if(36===p&&(f=_.Ar(a+Math.PI)),h.I4(r,n),h._4(),f===c)return f;let m=_.Br(f,c)/2,g;g=_.Wr(f,c)?_.Ar(c+m+Math.PI):_.Ar(f+m);const y=Math.cos(a),S=Math.sin(a),w=Math.cos(g),b=Math.sin(g),M=y*w+S*b,v=y-2*M*w,x=S-2*M*b;return _.Lr(0,0,v,x)}$3t(t,s,i,e,h){if(!h)return!1;const r=h.rO();if(!r.Q4())return!1;if(this.b3t++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.D4().ou(d))return!1;if(h.SRt())return this.K3t(t,s,i,e,h,r);if(this.v3t++,!r.L4().Bu(t,s,i,e))return!1;if(!r.xEt())return!0;const n=r.GEt();return n.Bu(r.qM(),r.$M(),t,s,i,e)}K3t(i,e,h,r,t,s){const n=s.qM(),o=s.$M(),a=t.K6(),l=b;p.set(i,e,h,r),p.normalize(),a.D3t(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u.k3t();if(this.b3t++,d.au(c,n,o)&&(v.Du(c),v.offset(n,o),v.Bu(i,e,h,r))){const f=u.O3t();if(!f)return _.$n(l),!0;if(this.v3t++,f.Bu(n+c.Ll(),o+c.Bl(),i,e,h,r))return _.$n(l),!0}}return _.$n(l),!1}V3t(t,s){if(!s)return!1;const i=s.rO();if(!i.Q4())return!1;if(this.b3t++,!i.D4().ou(t))return!1;if(s.SRt())return this.Z3t(t,s,i);if(this.v3t++,v.Du(t),!i.L4().Nu(v))return!1;if(!i.xEt())return!0;const e=M,h=(e.Du(t,i.qM(),i.$M()),i.GEt());return e.oc(h,0,0)}Z3t(i,t,s){const e=s.qM(),h=s.$M(),r=t.K6(),n=b;r.D3t(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o.k3t();if(this.b3t++,i.au(a,e,h)){const l=o.O3t();if(!l)return _.$n(n),!0;if(this.v3t++,M.Du(i,0,0),l.oc(M,-(e+a.Ll()),-(h+a.Bl())))return _.$n(n),!0}}return _.$n(n),!1}Q3t(t,s){if(t){const i=t.rO();i.Q4()&&(this.b3t++,i.D4().ou(s.rect))&&(t.SRt()?this.tFt(t,i,s):(this.v3t++,i.xEt()?s.sFt(t,i.qM(),i.$M(),i.GEt()):s.iFt(t,i.L4())))}}tFt(i,e,h){const r=e.qM(),n=e.$M(),o=b;i.K6().D3t(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a.k3t();if(this.b3t++,h.rect.au(l,r,n)){const u=a.O3t();this.v3t++,u?h.sFt(i,r+l.Ll(),n+l.Bl(),u):h.eFt(i,e.qM(),e.$M(),l)}}_.$n(o)}KO(t,s){if(t!==this.y3t||s!==this.S3t){this.y3t=t,this.S3t=s;const i=this._f.xJ();for(const e of i)if(e.kL()){for(const h of e.p5())h.rO().nEt();e.FCt().hFt(t,s),e.DCt();for(const r of e.p5()){const n=r.rO();n.kEt(),n.OCt()}}}}QO(){return[this.y3t,this.S3t]}rFt(t,s){this.y3t=t,this.S3t=s}}}{const Ra=self.Ws;Ra.cIt=class extends Ra.br{constructor(t,s){super(),this.C7=t,this.R7=s,this.A7=Ra.vr(Ra.yc)}Gr(){this.A7.Gr(),this.A7=null}hFt(t,s){if(!this.A7.Mc())throw new Error("grid not empty");this.C7=t,this.R7=s}P7(t,s,i){let e=this.A7.ni(t,s);return e||(i?(e=Ra.vr(Ra.nFt,this,t,s),this.A7.Set(t,s,e),e):null)}E7(t){const s=Math.floor(t/this.C7);return isFinite(s)?s:0}F7(t){const s=Math.floor(t/this.R7);return isFinite(s)?s:0}D7(e,h,r){if(h)for(let i=h.Ll(),t=h.Nl();i<=t;++i)for(let t=h.Bl(),s=h.Wl();t<=s;++t)if(!r||!r.lu(i,t)){const n=this.P7(i,t,!1);n&&(n.B0(e),n.Mc())&&this.A7.vc(i,t)}if(r)for(let i=r.Ll(),t=r.Nl();i<=t;++i)for(let t=r.Bl(),s=r.Wl();t<=s;++t)h&&h.lu(i,t)||this.P7(i,t,!0).G7(e)}k7(t,s){let i=this.E7(t.Ll()),e=this.F7(t.Bl()),h=this.E7(t.Nl()),r=this.F7(t.Wl());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.P7(i,t,!1);n&&n._7(s)}}}}{const Aa=self.Ws;Aa.nFt=class extends Aa.br{constructor(t,s,i){super(),this.y7=t,this.pl=s,this.ml=i,this.S7=Aa.vr(Aa._c)}Gr(){this.S7.Gr(),this.S7=null,this.y7=null}Mc(){return this.S7.Mc()}G7(t){this.S7.Ac(t)}B0(t){this.S7.vc(t)}_7(t){Aa.rr(t,this.S7.Pc())}}}{const Pa=self.Ws;Pa.oFt=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Pa.Rect,this.aFt=2,this.lFt=null,this.uFt=0,this.cFt=0,this.fFt=0,this.dFt=0,this.pFt=0,this.At=0,this.mFt=1,this.gFt=0,this.yFt=1,this.SFt=0}wFt(){return this.aFt<1+1e-6}_0(){this.aFt=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.aFt=2,this.lFt=null,this.uFt=0,this.cFt=0,this.fFt=0,this.dFt=0,this.pFt=0,this.At=0,this.mFt=1,this.gFt=0,this.yFt=1,this.SFt=0,this}bFt(){if(!1!==this.wFt()){const t=this.dx*this.aFt,s=this.dy*this.aFt,i=Pa.Fr(t,s),e=t/i,h=s/i,r=(this.At=i-1e-6,this.dFt=this.x1+e*this.At,this.pFt=this.y1+h*this.At,this.uFt=Math.atan2(this.fFt,this.cFt)+Math.PI/2,this.mFt=Math.cos(this.uFt),this.gFt=Math.sin(this.uFt),e*this.mFt+h*this.gFt);if(this.yFt=e-2*this.mFt*r,this.SFt=h-2*this.gFt*r,0<r){const n=Math.PI;this.uFt=Pa.Ar(this.uFt+n),this.mFt=-this.mFt,this.gFt=-this.gFt}}}MFt(t,s,i,e,h){const r=Pa._n(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.aFt&&(this.aFt=r,this.lFt=t.vN(),this.cFt=s-e,this.fFt=i-h)}eFt(t,s,i,e){const h=s+e.Ll(),r=s+e.Nl(),n=i+e.Bl(),o=i+e.Wl();this.MFt(t,h,n,r,n),this.MFt(t,r,n,r,o),this.MFt(t,r,o,h,o),this.MFt(t,h,o,h,n)}iFt(t,s){const i=s.yn(),e=s.Sn(),h=s.wn(),r=s.bn(),n=s.Mn(),o=s.vn(),a=s.xn(),l=s.Gn();this.MFt(t,i,e,h,r),this.MFt(t,h,r,n,o),this.MFt(t,n,o,a,l),this.MFt(t,a,l,i,e)}sFt(i,e,h,t){const r=t.Zu();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,l=r[n]+e,u=r[1+n]+h;this.MFt(i,o,a,l,u)}}}}{const M=self.Ws,Ea=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Fa=new Set(["high","low"]),Da=self.xs,xh=Da.Is,Gh=Da.Ps,ka=xh.create(),Oa=M.vr(M.du),La=M.vr(M.Rect);M.vFt=class extends M.br{constructor(t){super(),this._f=t,this.xFt=[],this.GFt=!1,this.TFt=null,this._Ft=null,this.IFt=null,this.CFt="high-performance",this.RFt=!1,this.AFt="auto",this.PFt=0,this.EFt=0,this.FFt="",this.DFt=0,this.kFt=0,this.OFt=0,this.LFt=0,this.BFt=0,this.NFt=0,this.sS="normalized",this.WFt=0,this.jFt=1,this.VFt=1e4,this.PS=!0,this.UFt=0,this.T3=0,this._3=0,this.HFt="letterbox-scale",this.zFt="letterbox-scale",this.JFt=0,this.qFt=0,this.XFt=xh.create(),this.YFt="high",this.$Ft=this.YFt,this.KFt=!1,this.ZFt=[],this.QFt=new Set,this.tDt=self.C3_Shaders,this.sDt=M.vr(M.Dy.IE,{xE:()=>[this.rq(),this.nq()],GE:()=>this.iDt(),TE:t=>this.eDt(t),getTime:()=>this.TO().ck(),_E:()=>this.TO().fO()}),this.hDt=0,this.rDt=0,this.nDt=NaN,this.oDt=null,this.aDt=new Map,this.lDt=NaN,this.uDt=new Map,this.cDt="",this.fDt=1,this.dDt=M.vr(M.Rect),this.pDt="",this.mDt=null,this.gDt=null,this.yDt=0,this.SDt=0,this.wDt=-1,this.bDt=0,this.MDt=t=>this.bDt=t.progress,this.vDt=null,this.xDt={GDt:null,TDt:null,_Dt:null},this.IDt=0,this.CDt=0,this.RDt=0,this.ADt="fade-in",this.PDt=null,this.EDt=new Promise(t=>this.PDt=t)}FDt(t){this.CFt=t}DDt(t){this.GFt=!!t}kDt(t){this.sS=t}ODt(){return this.sS}LDt(t){this.WFt=t}BDt(t,s){this.jFt=t,this.VFt=s}NDt(t){this.RFt=!!t}WDt(t){this.AFt=t}async Uo(t){let s=t.canvas,i=(this.xFt.push({canvas:s,jDt:null}),this._f.QN("runtime","window-resize",t=>this.VDt(t)),this._f.QN("runtime","fullscreenchange",t=>this.UDt(t)),this._f.QN("runtime","fullscreenerror",t=>this.HDt(t)),s.addEventListener("webglcontextlost",t=>this.zDt(t)),s.addEventListener("webglcontextrestored",t=>this.JDt(t)),this.KFt=!!t.isFullscreen,this.FFt=t.cssDisplayMode,navigator.gpu&&this.GFt),e=!1;if(i)try{await this.qDt(!0)}catch(t){this.XDt("WebGPU",t),this._Ft=null}if(!this.gM())try{await this.YDt(!0)}catch(t){this.XDt("WebGL",t),this.TFt=null}if(this.gM()||(e=!0),!this.gM()&&i)try{await this.qDt(!1)}catch(t){this.XDt("WebGPU",t),this._Ft=null}if(!this.gM())try{await this.YDt(!1)}catch(t){this.XDt("WebGL",t),this.TFt=null}const h=this.gM();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Nb(e),this._Ft&&(this._Ft.$Dt=()=>this.KDt(),this._Ft.ZDt=()=>this.QDt()),"normalized"===this.sS?h.XS():(h.YS(),h.JS(this.WFt)),this.DC(t.windowInnerWidth,t.windowInnerHeight,!0),await this.QEt()}XDt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async qDt(t){let s={Xy:this.jFt,Yy:this.VFt},i=!0;"no"===this.AFt?i=!1:"auto"===this.AFt&&(i=M.di.vi);const e={powerPreference:this.CFt,depth:this._f.c9(),failIfMajorPerformanceCaveat:t,tkt:this._f.mq(),skt:this._f.ikt(),UR:this._f.ekt(),hkt:i};this._Ft=M.vr(M.Dy.WebGPURenderer,s),await this._Ft.Hx(this.xFt[0].canvas,e)}async YDt(t){const s={alpha:!0,powerPreference:this.CFt,VR:"xbox-uwp-webview2"!==this._f.lL(),depth:this._f.c9(),UR:this._f.ekt(),failIfMajorPerformanceCaveat:t,Xy:this.jFt,Yy:this.VFt};this.RFt&&(s.HR=1),this.TFt=M.vr(M.Dy.qR,this.xFt[0].canvas,s),await this.TFt.OS()}async rkt(){if(this.tDt){const t=[];for(const[s,i]of Object.entries(this.tDt)){i.src=i.nkt;const e=M.Dy.WebGPUShaderProgram.uT();t.push(this._Ft.$A(Object.assign({jx:e,name:s},i)))}await Promise.all(t)}}async okt(){if(this.tDt){const s=[];for(const[i,e]of Object.entries(this.tDt)){let t;if(e.akt&&2<=this.TFt.S2())e.src=e.akt,t=M.Dy.Nx.cT();else{if(!e.lkt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.lkt,t=M.Dy.Nx.uT()}s.push(this.TFt.$A(Object.assign({jx:t,name:i},e)))}await Promise.all(s),this.TFt.KA(),this.TFt.lw()}this.TFt.uE()&&(this.oDt=M.vr(M.Dy.ER,this.TFt))}async QEt(){this._Ft?await this.rkt():this.TFt&&await this.okt();const t=this.gM();t.Lb(this.PS),t.uE()&&(this.nDt=0);for(const s of this._f.ukt()){for(const i of s.R5())i.QEt(t);s.QEt(t),s.mW()}this.IFt=new self.EV(this._f,t)}Gr(){this._f=null,this.TFt=null,this.xFt.length=0}vD(){return this._f.vD()}VDt(t){const s=this._f;if(!s.ckt()){const i=t.devicePixelRatio,e=(this.vD()&&(self.devicePixelRatio=i),s.fkt(i),this.KFt=!!t.isFullscreen,this.FFt=t.cssDisplayMode,this.DC(t.innerWidth,t.innerHeight),s.fO(),new M.Event("window-resize")),h=(e.data=t,s.r0().m0(e),new M.Event("resize"));h.dkt=this.yL(),h.pkt=this.wL(),h.mkt=this.ML(),h.gkt=this.xL(),s.y$(h),s.h4()&&(s.X1t()||self.C3Debugger.IsDebuggerPaused())&&s.iF()}}UDt(t){this.KFt=!!t.isFullscreen,this.DC(t.innerWidth,t.innerHeight,!0),this._f.fO()}HDt(t){this.KFt=!!t.isFullscreen,this.DC(t.innerWidth,t.innerHeight,!0),this._f.fO()}DC(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.PFt!==t||this.EFt!==s||i){this.PFt=t,this.EFt=s;const e=this.ykt();"letterbox-scale"===e?this.Skt(t,s):"letterbox-integer-scale"===e?this.wkt(t,s):"off"===e?this.bkt(t,s):this.Mkt(t,s),this.vkt(e);for(const{canvas:n}of this.xFt)n.width=this.OFt,n.height=this.LFt;this._f.Rf("canvas","update-size",{marginLeft:this.BFt,marginTop:this.NFt,styleWidth:this.DFt,styleHeight:this.kFt,displayScale:this.Ej()});const h=this.gM();h.DC(this.OFt,this.LFt,!0);for(const o of this.ZFt)h.hE(o);M.$n(this.ZFt),this.xkt();const r=this._f.Wk();r.N$(),r.W$()}}xkt(){this.gM().KS(this.XFt,this.rq()/this.nq())}oq(){return this.XFt}Skt(t,s){const i=this._f.GL(),e=this._f.GD(),h=this._f._D(),r=e/h,n=t/s;if(r<n){const o=s*r;this.DFt=Math.round(o),this.kFt=s,this.BFt=Math.floor((t-this.DFt)/2),this.NFt=0}else{const a=t/r;this.DFt=t,this.kFt=Math.round(a),this.BFt=0,this.NFt=Math.floor((s-this.kFt)/2)}this.OFt=Math.round(this.DFt*i),this.LFt=Math.round(this.kFt*i),this._f.Gkt(e,h)}wkt(t,s){let i=this._f.GL(),e=(1!==i&&(t+=1,s+=1),this._f.GD()),h=this._f._D(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this.OFt=Math.round(e*o),this.LFt=Math.round(h*o),this.DFt=this.OFt/i,this.kFt=this.LFt/i,this.BFt=Math.max(Math.floor((t-this.DFt)/2),0),this.NFt=Math.max(Math.floor((s-this.kFt)/2),0),this._f.Gkt(e,h)}Mkt(t,s){const i=this._f.GL(),e=(this.DFt=t,this.kFt=s,this.OFt=Math.round(this.DFt*i),this.LFt=Math.round(this.kFt*i),this.BFt=0,this.NFt=0,this.Ej());this._f.Gkt(this.DFt/e,this.kFt/e)}bkt(t,s){const i=this._f.GL();this.DFt=this._f.s9(),this.kFt=this._f.i9(),this.OFt=Math.round(this.DFt*i),this.LFt=Math.round(this.kFt*i),this.Tkt()?(this.BFt=Math.floor((t-this.DFt)/2),this.NFt=Math.floor((s-this.kFt)/2)):(this.BFt=0,this.NFt=0),this._f.Gkt(this._f.s9(),this._f.i9())}vkt(i){if("high"===this.YFt)this.T3=this.OFt,this._3=this.LFt,this.$Ft="high";else{let t,s;if(s="off"===this.ykt()?(t=this._f.s9(),this._f.i9()):(t=this._f.GD(),this._f._D()),this.OFt<t||this.LFt<s)this.T3=this.OFt,this._3=this.LFt,this.$Ft="high";else if(this.T3=t,this._3=s,this.$Ft="low","scale-inner"===i){const e=t/s,h=this.PFt/this.EFt;h<e?this.T3=this._3*h:e<h&&(this._3=this.T3/h)}else if("scale-outer"===i){const r=t/s,n=this.PFt/this.EFt;r<n?this.T3=this._3*n:n<r&&(this._3=this.T3/n)}}}TO(){return this._f}_kt(){return this.xFt[0].canvas}Oz(){return this.sDt}Tkt(){return this.KFt}Ikt(){return this.FFt}Ckt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.HFt=t;const s=this._f.Wk();s.N$(),s.W$()}Aj(){return this.HFt}Rkt(t){if(!Ea.has(t))throw new Error("invalid fullscreen mode");this.zFt=t;const s=this._f.Wk();s.N$(),s.W$()}Akt(){return this.zFt}ykt(){return this.Tkt()?this.Akt():this.Aj()}Pkt(t){if(!Fa.has(t))throw new Error("invalid fullscreen scaling quality");this.YFt=t,this._f.Wk().N$()}Ekt(){return this.YFt}gq(){return this.$Ft}static Fkt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}yj(){return this.PFt}Sj(){return this.EFt}rq(){return this.T3}nq(){return this._3}Lb(t){this.PS=!!t}Dkt(t){this.UFt=t}c7(){return this.UFt}kkt(){return this.gM().lR()}zDt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.ZFt=[],this.QFt.clear(),this.sDt.BM(),this.TFt.BM(),this._f.yY()}KDt(){console.log("[Construct] WebGPU device lost"),this.ZFt=[],this.QFt.clear(),this.sDt.BM(),this._f.yY()}async JDt(t){await this.TFt.NM(),await this.QEt(),await this._f.Okt(),console.log("[Construct] WebGL context restored")}async QDt(){await this.QEt(),await this._f.Okt(),console.log("[Construct] WebGPU device restored")}Lkt(){return this.TFt}Bkt(){return this._Ft}gM(){return this._Ft||this.TFt}aCt(){return this.IFt}fL(){let t="";return t=this._f.Bkt()?"webgpu":"webgl"+this._f.Lkt().S2(),this._f.gM().Wb()&&(t+="-software"),t}mL(){return this._f.Bkt()?this._f.Bkt().GetAdapterInfoString():this._f.Lkt().wE()}nN(){return"low"===this.$Ft?1/this._f.GL():this.Ej()}Ej(){const t=this.ykt();if("off"===t||"crop"===t)return 1;const s=this._f.GD(),i=this._f._D(),e=s/i,h=this.OFt/this.LFt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.kFt/i:this.DFt/s}Wq(){return"low"===this.gq()?1:this.Ej()}Bq(){return"low"===this.gq()?1:this._f.GL()}Nkt(t,s){this.JFt=t,this.qFt=s}yU(s,i,e,t=!0){i=i||this.T3,e=e||this._3;const h=i/2+this.JFt,r=e/2+this.qFt;if(t){let t=this.oq();i===this.T3&&e===this._3||(s.KS(ka,i/e),t=ka),s.QA(t)}const n=s.ew(h,r,s.BS(e),h,r,0,e);s.rP(n)}Wkt(t,s=!0){const i=this.yL(),e=this.wL(),h=i/2,r=e/2,n=(s&&t.QA(this.oq()),t.ew(h,r,t.BS(e),h,r,0,e));t.rP(n)}ML(){return this.OFt}xL(){return this.LFt}yL(){return this.DFt}wL(){return this.kFt}KB(){return this.BFt}ZB(){return this.NFt}QX(){return this.xFt.length}jkt(){return"undefined"!=typeof OffscreenCanvas&&this._kt()instanceof OffscreenCanvas&&("Chromium"!==M.di.bi||124<=M.di.wi)}async vY(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.xFt.length!==e){let t=this._f.Wk().Lk(),s={count:e,layersDomState:t.PJ().filter(t=>t.xB()).map(t=>t.D9()),immediate:h,marginLeft:this.BFt,marginTop:this.NFt,styleWidth:this.DFt,styleHeight:this.kFt},i;if(i=this.vD()?await this._f.pO("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.xFt.length)this.xFt.length=e;else for(const r of i.addedCanvases){r.width=this.OFt,r.height=this.LFt;const n=this.jkt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.xFt.push({canvas:r,jDt:o})}this._f.fO()}}p$(t){if(!(t>=this.xFt.length)){const s=this._kt(),i=this.xFt[t].jDt;this.jkt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}yq(s){s.depth=this._f.c9();let t=this.ZFt,i=t.findIndex(t=>t.Fx(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.gM().QP(s),this.QFt.add(e),e}Bz(t){if(!this.QFt.has(t))throw new Error("render target not in use");this.QFt.delete(t),this.ZFt.push(t)}iDt(){const t={$v:this._f.ID()};return"low"===this.gq()&&(t.width=this.rq(),t.height=this.nq()),this.yq(t)}eDt(t){this.Bz(t)}*Vkt(){for(const t of this._f.Wk().O$())for(const s of t.U5()){const i=this.aDt.get(s);i&&(yield i)}}cq(t){if(!this.gM().uE())return null;let s=this.aDt.get(t);return s||(s={T4:t,name:t.Sf(),Ukt:M.vr(M.Dy.ER,this.TFt),Hkt:0,zkt:0,Jkt:0},this.aDt.set(t,s)),s.Ukt}qkt(){const t=this.gM();if(t.uE()&&0===this.rDt){this.rDt=t.kb(),this.lDt=NaN;for(const s of this.Vkt())s.Hkt=NaN}}Xkt(){this.TFt&&this.TFt.uE()&&this.Ykt(),this._Ft&&this._Ft.uE()&&this.$kt()}Ykt(){if(isNaN(this.lDt)&&(this.lDt=this.oDt.NR(this.hDt,this.rDt),!isNaN(this.lDt))){if(this._f.h4())for(const t of this.Vkt())if(t.Hkt=t.Ukt.NR(this.hDt,this.rDt),isNaN(t.Hkt))return;if(this.oDt.WR(this.rDt),this.nDt=Math.min(this.lDt,1),this._f.h4()){const i=new Map;for(const h of this.Vkt())h.Ukt.WR(this.rDt),h.zkt=Math.min(h.Hkt,1),i.set(h.T4,h.zkt);for(const r of this.Vkt()){const n=r.T4,o=i.get(n)||0,a=o-n.dB().reduce((t,s)=>t+(i.get(s)||0),0);r.Jkt=M.Rr(a,0,1)}const s=this._f.Lk(),e=this.nDt-s.PJ().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Rr(e,0,1),this.nDt,[...this.Vkt()])}this.hDt=this.rDt,this.rDt=0}}Kkt(){return this.oDt}$kt(){if(0!==this.rDt){for(let t=this.hDt;t<this.rDt;++t){const i=this.uDt.get(t);if(i&&!i.MR())return}let t=this._f.Lk(),n=M.ta(t.qX()+1,0),s=0;for(let t=this.hDt;t<this.rDt;++t){const o=this.uDt.get(t);if(o){let i=o.vR(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;n[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.nDt=M.Rr(s,0,1),this._f.h4()){const e=t.U5(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,S]of h){const w=[...y.mB()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,w),r.push({name:y.Sf(),Jkt:M.Rr(S,0,1),zkt:M.Rr(w,0,1)})}const m=this.nDt-t.PJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(M.Rr(m,0,1),this.nDt,r)}for(let t=this.hDt;t<this.rDt;++t)this.uDt.delete(t);this.hDt=this.rDt,this.rDt=0}}Zkt(t){this.uDt.set(this._Ft.kb(),t)}vk(){return this.nDt}Qkt(t,s,i,e,h,r){return this.cDt=t,this.fDt=s,this.dDt.Rl(i,e,h,r),this.mDt||(this.mDt=new Promise(t=>{this.gDt=t})),this.mDt}tOt(){if(this.cDt){let t=this._kt(),s=this.dDt,i=M.Rr(Math.floor(s.Ll()),0,t.width),e=M.Rr(Math.floor(s.Bl()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:M.Rr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:M.Rr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=M.Uo(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}M.Ho(t,this.cDt,this.fDt).then(t=>{this.pDt&&URL.revokeObjectURL(this.pDt),this.pDt=URL.createObjectURL(t),this.mDt=null,this.gDt(this.pDt)}),this.cDt="",this.fDt=1}}sOt(){return this.pDt}iOt(t){t?this.yDt++:this.yDt--}eOt(){return 0<this.yDt}hOt(t){const s=this.gM();if(2===t)this.vDt=M.vr(M.Dy.qb,this.gM()),this.vDt.uC("Arial"),this.vDt.cC(16),this.vDt.TC("center"),this.vDt.IC("center"),this.vDt.DC(300,200);else if(0===t){const i=this._f.rOt();i&&i.lU(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.nOt("splash-images/splash-logo.svg").then(t=>{"done"===this.ADt?s.yx(t):this.xDt.GDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.oOt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.ADt?s.yx(t):this.xDt.TDt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.oOt("splash-images/splash-website-512.png").then(t=>{"done"===this.ADt?s.yx(t):this.xDt._Dt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async nOt(t){t=new URL(t,this._f.aOt()).toString();const s=await M.Oo(t),i=await this._f.lOt(s,2048,2048);return this.gM().ZP(i,{t2:"high"})}async oOt(t){t=new URL(t,this._f.aOt()).toString();const s=await M.Oo(t);return this.gM().ZP(s,{t2:"high"})}uOt(){this._f.Rf("runtime","hide-cordova-splash")}cOt(){this.SDt=Date.now(),this._f.r0().addEventListener("loadingprogress",this.MDt),this.wDt=requestAnimationFrame(()=>this.fOt());const t=this._f.dOt();3!==t&&this.uOt()}async pOt(){const t=this.gM(),s=(this.bDt=1,this._f.dOt());4===s&&await this.EDt,this.PDt=null,this.EDt=null,-1!==this.wDt&&(cancelAnimationFrame(this.wDt),this.wDt=-1),this._f.r0().removeEventListener("loadingprogress",this.MDt),this.MDt=null,this.vDt&&(this.vDt.Gr(),this.vDt=null),this._f.mOt(),t.VP(),this.xDt.GDt&&(t.yx(this.xDt.GDt),this.xDt.GDt=null),this.xDt.TDt&&(t.yx(this.xDt.TDt),this.xDt.TDt=null),this.xDt._Dt&&(t.yx(this.xDt._Dt),this.xDt._Dt=null),t.jP(0,0,0,0),t.Fb(),this.ADt="done",this.hDt=t.kb(),3===s&&this.uOt()}fOt(){if(-1!==this.wDt){const t=this.gM(),s=(t.VP(),this.wDt=-1,this._f.lD().OH()),i=this._f.dOt();if(3!==i&&(this.Wkt(t),t.jP(0,0,0,0),t.dP(),t.lw(),t.mP(null)),0===i)this.gOt(s);else if(1===i)this.yOt(s,120,0);else if(2===i)this.SOt(s);else if(3===i)M.Jn();else{if(4!==i)throw new Error("invalid loader style");this.wOt(s)}t.Fb(),this.wDt=requestAnimationFrame(()=>this.fOt())}}SOt(t){t?this.vDt.GC(1,0,0):this.vDt.GC(.6,.6,.6),this.vDt.Af(Math.round(100*this.bDt)+"%");const s=this.DFt/2,i=this.kFt/2,e=(Oa.vu(s-150,i-100,150+s,100+i),this.gM());e.mP(this.vDt.Gx()),e.eb(Oa,this.vDt.cR())}yOt(t,s,i){const e=this.gM(),h=(e.yw(),t?e.cP(1,0,0,1):e.cP(.118,.565,1,1),this.DFt/2),r=this.kFt/2,n=s/2;La.Rl(h-n,r-4+i,Math.floor(s*this.bDt),8),e.Rect(La),La.Rl(h-n,r-4+i,s,8),La.offset(-.5,-.5),La.$l(.5,.5),e.cP(0,0,0,1),e.ab(La),La.$l(1,1),e.cP(1,1,1,1),e.ab(La)}gOt(t){const s=this.gM(),i=this._f.rOt();if(i){const e=i.Gx();if(e){const h=e.Lm(),r=e.qm(),n=this.DFt/2,o=this.kFt/2,a=h/2,l=r/2;Oa.vu(n-a,o-l,n+a,o+l),s.mP(e),s.du(Oa),this.yOt(t,h,16+l)}else this.yOt(t,120,0)}else this.yOt(t,120,0)}wOt(t){let s=this.gM(),i=this.xDt.GDt,e=this.xDt.TDt,h=this.xDt._Dt,r=Date.now(),n=(0===this.IDt&&(this.SDt=r),this._f.bOt()||this._f.MOt()&&!this._f.vOt()),o=n?0:200,a=n?0:3e3,l=1,u=("fade-in"===this.ADt?l=Math.min((r-this.SDt)/300,1):"fade-out"===this.ADt&&(l=Math.max(1-(r-this.RDt)/300,0)),s.yw(),s.cP(.231*l,.251*l,.271*l,l),La.set(0,0,this.DFt,this.kFt),s.Rect(La),Math.ceil(this.DFt)),c=Math.ceil(this.kFt),f,d;256<this.kFt?(s.cP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),La.Rl(0,.8*c-d/2,f,d),s.Rect(La),t?s.cP(l,0,0,l):s.cP(.161*l,.953*l,.816*l,l),f=u*this.bDt,La.Rl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(La),s.cP(l,l,l,l),s.lw(),e&&(f=1.5*M.Rr(.22*c,105,.6*u),d=f/8,La.Rl(.5*u-f/2,.2*c-d/2,f,d),s.mP(e),s.Rect(La)),i&&(f=Math.min(.395*c,.95*u),d=f,La.Rl(.5*u-f/2,.485*c-d/2,f,d),s.mP(i),s.Rect(La)),h&&(f=1.5*M.Rr(.22*c,105,.6*u),d=f/8,La.Rl(.5*u-f/2,.868*c-d/2,f,d),s.mP(h),s.Rect(La))):(s.cP(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),La.Rl(0,.85*c-d/2,f,d),s.Rect(La),t?s.cP(l,0,0,l):s.cP(.161*l,.953*l,.816*l,l),f=u*this.bDt,La.Rl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(La),s.cP(l,l,l,l),s.lw(),i&&(f=.55*c,d=f,La.Rl(.5*u-f/2,.45*c-d/2,f,d),s.mP(i),s.Rect(La))),this.IDt++,"fade-in"===this.ADt&&300<=r-this.SDt&&2<=this.IDt&&(this.ADt="wait",this.CDt=r),"wait"===this.ADt&&r-this.CDt>=a&&1<=this.bDt&&(this.ADt="fade-out",this.RDt=r),("fade-out"===this.ADt&&r-this.RDt>=300+o||n&&1<=this.bDt&&r-this.SDt<500)&&this.PDt()}}}{let V=self.Ws,U=self.C3Debugger,h=self.Uj,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;V.xOt=class extends V.br{constructor(t){t=Object.assign({},i,t),super(),this.GOt=t.messagePort,this.TOt=t.runtimeBaseUrl,this._Ot=t.previewUrl,this.IOt=!!t.headless,this.COt=!!t.hasDom,this.ROt=!!t.isInWorker,n=t.ife,this.AOt=!!t.useAudio,this.POt=t.exportType,this.EOt=t.isNWjs,this.NU=!!t.isiOSCordova,this.FOt=!!t.isiOSWebView,this.DOt=!!t.isWindowsWebView2,this.kOt=!!t.isAnyWebView2Wrapper,this.OOt=!!t.isFBInstantAvailable,this.LOt=!("preview"!==this.POt||!t.isDebug),this.BOt=this.LOt,this.NOt=this.LOt,this.WOt=0,this.jOt=[],this.VOt=[],this.UOt=!1,this.HOt="",this.zOt="",this.JOt="",this.qOt="",this.XOt=0,this.YOt=0,this.$Ot=0,this.D3=self.devicePixelRatio,this.KOt=0,this.ZOt=0,this.QOt=0,this.tLt=0,this.sLt=0,this.iLt=!1,this.my=!0,this.eLt=!1,this.hLt=!1,this.rLt=!1,this.nLt=null,this.ZH=V.vr(V.kU,this,t),this.iX=V.vr(V.b$,this),this.y0t=V.vr(V.pdt,this),this.oLt=V.vr(V.AL,this,t.wrapperComponentIds),this.aLt=V.vr(V.g3t,this),this.QQ=V.vr(V.j$,this),this.lLt=V.vr(V.iut,this),this.uLt=V.vr(V.hut,this),this.wut=V.vr(V.fut,this),this.hy=V.vr(V.zg,{Xg:t=>this.cLt(t),$g:t=>this.fLt(t)}),this.dLt=new Map,this.pLt=[],this.mLt=new Map,this.gLt=new Map,this.yLt=0,this.SLt=[],this.wLt=new Set,this.bLt=[],this.MLt=[],this.vLt=new Map,this.xLt=!1,this.GLt=!1,this.TLt=0,this._Lt=0,this.ILt=new Map,this.CLt=new Set,this.RLt=new Set,this.ALt=[],this.PLt=[],this.ELt=null,this.FLt=!1,this.DLt="vsync",this.a2="trilinear",this.kLt=!1,this.OLt=!0,this.LLt=!1,this.BLt=!1,this.NLt=null,this.WLt={jLt:t=>{this.wDt=-1,this.VLt=-1,this.cZ(t)},ULt:t=>{this.VLt=-1,this.cZ(t,!1,"skip-render")},HLt:()=>{this.wDt=-1,this.iF()}},this.wDt=-1,this.VLt=-1,this.zLt=0,this.JLt=0,this.qLt=!1,this.XLt=!1,this.YLt=!1,this.$Lt=!0,this.KLt=!0,this.ZLt=!1,this.QLt=0,this.t5t=new V.Dd(1),this.s5t=()=>Math.random(),this.i5t=0,this.e5t=0,this.h5t=0,this.r5t=0,this.n5t=0,this.rRt=1,this.o5t=1/30,this.a5t=0,this.l5t=V.vr(V.W0),this.u5t=V.vr(V.W0),this.c5t=V.vr(V.W0),this.f5t=new Map,this.d5t=-1,this.p5t=0,this.m5t=0,this.g5t=-1,this.y5t=0,this.S5t=0,this.w5t=0,this.b5t=!1,this.M5t="",this.v5t=!1,this.x5t="",this.c4=null,this.G5t="",this.T5t=null,this._5t=null,this.lIt=V.vr(V.Event.r0),this.I5t=new Map,this.C5t=new Map,this.R5t=0,this.A5t=!1,this.P5t=!1,this.E5t=!1,this.F5t=[],this.D5t={pretick:V.vr(V.Event,"pretick",!1),tick:V.vr(V.Event,"tick",!1),tick2:V.vr(V.Event,"tick2",!1),instancecreate:V.vr(V.Event,"instancecreate",!1),instancedestroy:V.vr(V.Event,"instancedestroy",!1),beforelayoutchange:V.vr(V.Event,"beforelayoutchange",!1),layoutchange:V.vr(V.Event,"layoutchange",!1)},this.D5t.instancecreate.aW=null,this.D5t.instancedestroy.aW=null,this.DX=V.vr(V.Event.r0),this.k5t=null;const s=(t,s)=>V.eRt.WEt(this,t,s);this.O5t=V.vr(V.Y0,s),this.L5t=V.vr(V.Y0,s),this.B5t=V.vr(V.Y0,s),this.N5t=V.vr(V.W5t,this,t.jobScheduler),t.canvas&&(this.ELt=V.vr(V.vFt,this)),this.GOt.onmessage=t=>this._OnMessageFromDOM(t.data),this.QN("runtime","visibilitychange",t=>this.j5t(t)),this.QN("runtime","wrapper-extension-message",t=>this.V5t(t)),this.QN("runtime","get-remote-preview-status-info",()=>this.U5t()),this.QN("runtime","js-invoke-function",t=>this.Vdt(t)),this.QN("runtime","go-to-last-error-script",self.goToLastErrorScript),this.QN("runtime","offline-audio-render-completed",t=>this.H5t(t)),this.lIt.addEventListener("window-blur",t=>this.z5t(t)),this.lIt.addEventListener("window-focus",()=>this.J5t()),this.QQ.bK(),this.uLt.bK(),this.q5t=null,this.X5t=new WeakMap,this.Y5t={keyboard:null,Xk:null,Yk:null,$k:null},this.$5t=new WeakMap,this.K5t=[]}static Hx(t){return V.vr(V.xOt,t)}Gr(){V.$n(this.pLt),this.mLt.clear(),this.gLt.clear(),this.iX.Gr(),this.iX=null,this.y0t.Gr(),this.y0t=null,this.oLt.Gr(),this.oLt=null,this.ZH.Gr(),this.ZH=null,this.aLt.Gr(),this.aLt=null,this.QQ.Gr(),this.QQ=null,this.lLt.Gr(),this.lLt=null,this.uLt.Gr(),this.uLt=null,this.wut.Gr(),this.wut=null,this.hy.Gr(),this.hy=null,this.ELt&&(this.ELt.Gr(),this.ELt=null),this.lIt.Gr(),this.lIt=null,this.Z5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.Q5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.tBt(t)}}Q5t(t){if(this.E5t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new V.Event(i);l.data=e,this.lIt.m0(l)}if(n){const u=new V.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.y$(u)}}const a=this.I5t.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.sBt(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.sBt(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.sBt(o,!1,""+t)}):this.sBt(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.F5t.push(t)}sBt(t,s,i){this.GOt.postMessage({type:"result",responseId:t,isOk:s,result:i})}tBt(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.C5t.get(s);i?h.resolve(e):h.reject(e),this.C5t.delete(s)}QN(t,s,i){let e=this.I5t.get(t);if(e||(e=new Map,this.I5t.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Rf(t,s,i,e){this.GOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}pO(t,s,i,e){const h=this.R5t++,r=new Promise((t,s)=>{this.C5t.set(h,{resolve:t,reject:s})});return this.GOt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}sV(t,s,i,e=-1){this.Rf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}iV(t,s,i){const e=this.R5t++,h=new Promise((t,s)=>{this.C5t.set(e,{resolve:t,reject:s})});return this.sV(t,s,i,e),h}V5t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.C5t.get(s);i.resolve(t.params),this.C5t.delete(s)}else this.Q5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}g4(t,s,i){this.QN("wrapper-extension:"+t,s,i)}d4(t){return this.oLt.d4(t)}iBt(t){if(!this.h4())throw new Error("not in debug mode");this.Rf("runtime","post-to-debugger",t)}async aRt(t){V.PMt(this),this.h4()?await U.aRt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const s=await this.ZH.ko("data.json");if(await this.eBt(s),await this.hBt(t),this.bOt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.Lkt()){const i=this.Lkt();console.info(`[C3 runtime] Hosted in ${this.vD()?"worker":"DOM"}, rendering with WebGL ${i.S2()} [${i.wE()}]`)}else this.Bkt()&&console.info(`[C3 runtime] Hosted in ${this.vD()?"worker":"DOM"}, rendering with WebGPU [${this.Bkt().GetAdapterInfoString()}]`);this.gM().Wb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.E5t=!0;for(const e of this.F5t)this.Q5t(e);V.$n(this.F5t),this.ELt&&this.ELt.cOt();for(const h of t.runOnStartupFunctions)this.jOt.push(this.rBt(h));if(await Promise.all([this.ZH.DH(),...this.jOt]),V.$n(this.jOt),!this.ZH.OH())return this.ELt&&await this.ELt.pOt(),await this.lIt.d0(new V.Event("beforeruntimestart")),await this.VP(),this.GOt.postMessage({type:"runtime-ready"}),this;this.ELt&&this.ELt.uOt()}async rBt(t){try{await t(this.q5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async eBt(t){const s=t.project,i=(this.HOt=s[0],this.zOt=s[16],this.JOt=s[31],this.qOt=s[38],this.XOt=s[36],s[39]||"loading-logo.png"),e=(this.kLt=!!s[9],this.YOt=this.QOt=s[10],this.$Ot=this.tLt=s[11],this.aLt.rFt(this.YOt,this.$Ot),this.KOt=this.YOt/2,this.ZOt=this.$Ot/2,this.DLt=s[37],this.FLt=!!s[40],this.a2=s[14],this.eLt=s[15],this.hLt=s[42],this.rLt=s[17],this.iLt=!!s[18],this.sLt=s[19],this._Lt=s[21],this.LLt=s[22],this.ZH);if(e.cH(s[45]),e.UH(s[7],s[25]),e.dH(s[8]),e.pH(s[32]),e.gH(s[28]),e.NH(s[29]),0===this.sLt){let t;(t="flat"===e.FO()?e.yH()+i:i)&&(this.nLt=e.IH({url:t}))}this.ELt&&(this.ELt.Ckt(V.vFt.Fkt(s[12])),this.ELt.Pkt(s[23]?"high":"low"),this.ELt.Lb(0!==s[24]),this.ELt.FDt(s[34]),this.ELt.Dkt(s[41]),this.ELt.DDt(s[13]),this.ELt.kDt(s[30]),this.ELt.BDt(s[46],s[47]),this.ELt.LDt(s[26]),this.ELt.NDt(s[48]),this.ELt.WDt(s[50]));const h=s[43],r=(h&&await this.nBt(h),this.oBt(),this.oLt.XTt(),this.ALt=self.aBt(),s[2]);for(const l of r[1])this.oLt.YTt(l);for(const u of r[0])this.oLt.qTt(u);this.ALt=self.aBt(),this.lBt(),this.oLt.s_t();for(const c of s[3]){const f=V.lut.Hx(this,this.pLt.length,c);this.pLt.push(f),this.mLt.set(f.Sf().toLowerCase(),f),this.gLt.set(f.EJ(),f)}for(const d of s[4]){const p=this.pLt[d[0]];p.qIt(d)}for(const m of s[27]){const g=m.map(t=>this.pLt[t]);this.SLt.push(V.vr(V.JCt,this,g))}this.uBt();for(const y of this.pLt)y.YIt();for(const S of s[5])this.iX.Hx(S);const n=s[1];if(n){const w=this.iX.P$(n);w&&this.iX.R$(w)}for(const b of s[35])this.lLt.Hx(b);for(const M of s[33])this.QQ.Hx(M);for(const v of s[44])this.uLt.Hx(v);this.uLt.out()||(this.uLt.Gr(),this.uLt=null);for(const x of s[49])this.wut.Hx(x);this.wut.yut()||(this.wut.Gr(),this.wut=null);for(const G of s[6])this.y0t.Hx(G);this.y0t.zdt(),this.cBt(),V.$n(this.ALt),this._5();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Rf("runtime","set-target-orientation",{targetOrientation:o})}async nBt(t){const s=t.format;"image-sequence"===s?this.NLt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this.NLt=new self.C3ExportToGIF(this,t):"webm"===s?this.NLt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this.NLt=new self.C3ExportToMP4Video(this,t)),this.DLt="unlimited-frame",this.ELt.Ckt("off"),this.D3=1,self.devicePixelRatio=1,await this.pO("runtime","set-exporting-to-video",{message:this.NLt.GetExportingMessageForPercent(0),duration:this.NLt.OW()})}dOt(){return this.sLt}ckt(){return null!==this.NLt}fBt(){return this.NLt.OW()}dBt(){return this.NLt.GetFramerate()}pBt(){return this.NLt.aRt({width:this.ELt.ML(),height:this.ELt.xL()})}mBt(){const t=this.zLt/this.dBt();return this.NLt.AddFrame(this.ELt._kt(),t)}gBt(){this.NLt&&this.NLt.let()}H5t(t){this.NLt.OnOfflineAudioRenderCompleted(t)}yBt(){return this.NLt.Fb()}MOt(){return this.OOt}by(){return this.my}SO(t){this.jOt.push(t)}GY(t){this.UOt=!!t}SBt(t){this.UOt&&this.VOt.push(t)}AY(){return this.VOt}WIt(){return this.yLt++}KIt(){return this.yLt}YEt(t){this.wLt.add(t)}$Et(t){this.wLt.delete(t)}ukt(){return this.wLt}async hBt(t){this.ELt&&(await this.ELt.Uo(t),this.ELt.hOt(this.sLt))}async VP(){this.qLt=!0,this.i5t=Date.now();let s=null,t=new Promise(t=>s=t);if(this.iLt){for(const h of this.pLt)h.GJ()||h.nCt()||!h.kL()||h.qxt();(async()=>{await this.ZH.DH(),await t,this.my=!1,this.wBt()})()}else this.my=!1;this.ZH.kH(),this.h4()&&U.RuntimeInit(n);for(const r of this.iX.Uk())r.XY();this.ckt()&&await this.pBt();const i=this.iX.A$(),e=(await i.aY(null,this.gM()),await i.SY(!0),this.p5t=performance.now(),s(),this.iLt||this.wBt(),await this.pO("runtime","before-start-ticking"));e.isSuspended&&!this.ckt()?(this.QLt++,this.ZLt=!0):this.cZ()}wBt(){this.YN(V.VY.jY.WY.bBt,null,null),this.Rf("runtime","register-sw")}Kyt(t){t=Math.floor(t);const s=this.ALt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}lBt(){for(const t of self.MBt){const s=V.first(Object.keys(t));this.PLt.push(s)}}m1t(t){t=Math.floor(t);const s=this.PLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}vBt(){return this.COt}xBt(){return this.IOt}vD(){return this.ROt}aOt(){return this.TOt}GBt(){return this._Ot}BD(){return this.y0t}KD(){return this.y0t.KD()}r1t(){return this.y0t.r1t()}HD(){return this.y0t.HD()}n1t(){return this.y0t.n1t()}RMt(){return 0===this.r1t().O0t()}a1t(){return this.y0t.a1t()}BEt(){return this.oLt}BH(){return this.oLt.BH()}tJ(t){if((t=Math.floor(t))<0||t>=this.pLt.length)throw new RangeError("invalid index");return this.pLt[t]}TBt(t){return this.mLt.get(t.toLowerCase())||null}cV(t){return this.gLt.get(t)||null}_rt(t){const s=V.AL.$L(t);return s?s.t5():null}xJ(){return this.pLt}*_Bt(){for(const t of this.pLt)t.GJ()||(yield*t.instances())}r0(){return this.lIt}DD(){return this.DX}y$(t){t.runtime=this.PL();const s=this.h4()&&!this.y0t.G5();s&&U.StartMeasuringScriptTime(),this.DX.dispatchEvent(t),s&&U.AddScriptTime()}LY(t){return t.runtime=this.PL(),this.DX.d0(t)}GD(){return this.YOt}_D(){return this.$Ot}IBt(t,s){if(this.YOt!==t||this.$Ot!==s){this.YOt=t,this.$Ot=s;const i=this.Wk();i.N$(),i.W$()}}s9(){return this.QOt}i9(){return this.tLt}Gkt(t,s){if(this.QOt!==t||this.tLt!==s){this.QOt=t,this.tLt=s;const i=this.Wk();i.N$(),i.W$()}}fkt(t){this.ckt()||(this.D3=t)}GL(){return this.D3}Z9(){return this.KOt}Q9(){return this.ZOt}dL(){return this.ELt}rq(){return this.ELt?this.ELt.rq():this.QOt}nq(){return this.ELt?this.ELt.nq():this.tLt}nN(){return this.ELt?this.ELt.nN():1}Ej(){return this.ELt?this.ELt.Ej():1}Wq(){return this.ELt?this.ELt.Wq():1}Bq(){return this.ELt?this.ELt.Bq():1}KB(){return this.ELt?this.ELt.KB():0}ZB(){return this.ELt?this.ELt.ZB():0}CBt(){return this.ELt?this.ELt.yL():0}RBt(){return this.ELt?this.ELt.wL():0}Aj(){return this.ELt?this.ELt.Aj():"off"}yq(t){return this.ELt?this.ELt.yq(t):null}Bz(t){this.ELt&&this.ELt.Bz(t)}mq(){return this.eLt}ikt(){return this.hLt}ekt(){return this.rLt}vk(){return this.ELt?this.ELt.vk():NaN}_x(){return"nearest"!==this.ID()}Gk(){return this.DLt}Tk(t){this.DLt!==t&&(this.DLt=t,-1!==this.wDt||-1!==this.VLt)&&(this.ABt(),this.PBt())}ID(){return this.a2}HIt(){return this.iLt}rOt(){return this.nLt}mOt(){this.nLt&&(this.nLt.iC(),this.nLt.Gr(),this.nLt=null)}Wk(){return this.iX}Lk(){return this.iX.Lk()}Btt(){return this.QQ}EBt(){return this.lLt}BRt(){return this.uLt}Wut(){return this.wut}lD(){return this.ZH}IH(t){return this.ZH.IH(t)}b5(t,s,i,e,h,r){if(r&&this.uLt){if(t instanceof V.lut&&t.GJ()){const o=t.Dgt(),a=Math.floor(this.Ok()*o.length);return this.b5(o[a],s,i,e,h,r)}const n=this.uLt.aut(t,r);if(n){const l=this.lJ(n,s,!1,i,e,!1,h,void 0,h);return this.uLt.uut(l,r),l}}return this.lJ(t,s,!1,i,e,!1,h,void 0,h)}lJ(t,s,i,e,h,r,n,o,a){let l=null,u=null;if(t instanceof V.lut){if((u=t).GJ()){const b=u.Dgt(),M=Math.floor(this.Ok()*b.length);u=b[M]}l=u.iJ()}else l=t,u=this.tJ(l[1]);const c=u.r5().kL();if(this.my&&c&&!u.nCt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.ILt.has(l[2])?l[2]:this._Lt++;const p=l?l[0]:null,m=V.vr(V.Instance,{runtime:this,aN:u,T4:s,oRt:p,cRt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.ILt.set(d,m);let g=null,y=(c&&(g=m.rO(),void 0!==e&&void 0!==h&&(g.XM(e),g.KM(h)),u.DCt(!0)),s&&(a||s.cJ(m,!0),s.jk().uY(u)),this.TLt++,!0);if(o){const v=o.lN();if(v.bN()&&u.bN()){const x=u.rY(),G=v.rY();x===G&&(y=!1)}}if(u.bN()&&!i&&!r&&y){const T=new Set;for(const _ of u.rY().zY())if(_!==u){const I=this.FBt(_,g,T);if(I){const C=this.lJ(I,f,!1,g?g.qM():e,g?g.$M():h,!0,!1,void 0,a);m.JY(C)}else{const B=this.lJ(_,f,!1,g?g.qM():e,g?g.$M():h,!0,!1,void 0,a);m.JY(B)}}for(const R of m.MN()){R.JY(m);for(const A of m.MN())R!==A&&R.JY(A)}}if(c&&!i&&n&&this.DBt(m,p,g,s,e,h,a),u.bN()&&!i&&!r&&n)for(const P of m.MN()){const E=P.rO();if(E){const N=P.r5(),F=P.lN().iJ()[0];N.kL()?this.DBt(P,F,E,s,E.qM(),E.$M(),a):this.DBt(P,F,E,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const D=g.h6(),W=e-g.qM()+D.qM(),j=h-g.$M()+D.$M();D.I4(W,j)}u.RCt();const O=l?V.fo(l[5]):null,L=l?l[4].map(t=>V.fo(t)):null,S=c&&p&&p[13];if(S&&m.yRt(),m.hCt(O,L),S){const k=p[13];m.K6().uGt(k[2],k[0],k[1])}this.MLt.push(m),this.xLt=!0,this.h4()&&U.InstanceCreated(m);const w=this.D5t.instancecreate;return w.aW=m,this.lIt.dispatchEvent(w),m}kAt(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.iX.E$(s),n=r.nO(i);return n.rJ(e)}FBt(t,s,i){const e=s?.LRt()??[];for(const h of e){const r=this.kAt(h),n=!!h[4],o=this.tJ(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}DBt(a,t,s,l,u,c,f){const i=s.iEt(),e=s.LRt();if(a.rO().eEt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.iX.E$(t),M=b.nO(s);o=M.rJ(i)}const y=this.tJ(o[1]),S=a.NRt(y),w=d.has(y);if(S&&!w&&h){const v=a.WRt(y),x=(v.rO().aRt(o[0]),u+o[0][0]-p),G=c+o[0][1]-m;v.rO().I4(x,G),v.rO().eEt(r),a.f6(v,{y6:!!(e>>0&1),w6:!!(e>>1&1),M6:!!(e>>2&1),x6:!!(e>>3&1),T6:!!(e>>4&1),F6:!!(e>>5&1),I6:!!(e>>6&1),R6:!!(e>>7&1),P6:!!(e>>8&1)}),d.add(y)}else{const T=u+o[0][0]-p,_=c+o[0][1]-m,I=this.lJ(o,l,!1,T,_,!1,!0,a,f);I.rO().eEt(r),a.f6(I,{y6:!!(e>>0&1),w6:!!(e>>1&1),M6:!!(e>>2&1),x6:!!(e>>3&1),T6:!!(e>>4&1),F6:!!(e>>5&1),I6:!!(e>>6&1),R6:!!(e>>7&1),P6:!!(e>>8&1)})}}}}mN(i){if(!this.CLt.has(i)){let t=i.lN(),s=this.vLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.vLt.set(t,s);if(this.h4()&&U.InstanceDestroyed(i),i.wRt(),this.xLt=!0,i.bN())for(const e of i.MN())this.mN(e);for(const h of i.children())h.D6()&&this.mN(h);if(!this.iX.T5()&&!this.b5t){const r=this.BD();r.v5(!0),i.$Rt(),r.v5(!1)}i.KRt(this.iX.T5())}}_5(){this.xLt&&(this.GLt=!0,this.kBt(),this.OBt(),this.GLt=!1,this.xLt=!1,this.fO())}kBt(){for(const t of this.MLt){const s=t.lN();s.cJ(t);for(const i of s.v1t())i.cJ(t),i.RCt()}V.$n(this.MLt)}OBt(){this.lIt.Zf(!0);for(const[t,s]of this.vLt.entries())this.LBt(t,s),s.clear();this.vLt.clear(),this.lIt.Zf(!1)}LBt(t,s){for(const i of s){const e=this.D5t.instancedestroy,h=(e.aW=i,this.lIt.dispatchEvent(e),this.ILt.delete(i.vN()),this.f5t.delete(i),i.rO());h&&(h.nEt(),h.mJ(),h.wRt()),this.CLt.add(i),this.TLt--}V.lo(t.m5(),s),t.RCt(),this.RLt.add(t);for(const r of t.v1t())V.lo(r.m5(),s),r.RCt(),this.RLt.add(r);if(t.r5().kL()){const n=new Set([...s].map(t=>t.rO().nO()));for(const o of n)o.I9(s)}}PCt(){return this.MLt}*Dvt(t){for(const s of this.PCt())t.GJ()?s.lN().AMt(t)&&(yield s):s.lN()===t&&(yield s)}eCt(){return this._Lt++}rCt(t,s){this.ILt.set(t,s)}nV(t){this.KLt!==(t=!!t)&&(this.KLt=!!t,this.KLt)&&this.ZLt&&(this.lV(!1),this.ZLt=!1)}oV(){return this.KLt}yY(){this.lIt.dispatchEvent(V.vr(V.Event,"renderercontextlost")),this.lV(!0);for(const s of this.pLt)!s.GJ()&&s.oCt()&&s.mY();const t=this.Lk();t&&t.yY(),V.h_t.u7(),V.RH.u7()}async Okt(){await this.Lk().aY(null,this.gM()),this.lIt.dispatchEvent(V.vr(V.Event,"renderercontextrestored")),this.lV(!1),this.fO()}j5t(t){if(this.KLt){const s=t.hidden;this.lV(s),(this.ZLt=s)||this.fO()}}z5t(t){this.bOt()&&this.LLt&&!V.di.xi&&!t.data.parentHasFocus&&(this.lV(!0),this.BLt=!0)}J5t(){this.BLt&&(this.lV(!1),this.BLt=!1)}PBt(){const t=this.WLt;"vsync"===this.DLt?-1===this.wDt&&(this.wDt=self.requestAnimationFrame(t.jLt)):"unlimited-tick"===this.DLt?(-1===this.VLt&&(this.VLt=V.Go(t.ULt)),-1===this.wDt&&(this.wDt=self.requestAnimationFrame(t.HLt))):-1===this.VLt&&(this.VLt=V.Go(t.jLt))}ABt(){-1!==this.wDt&&(self.cancelAnimationFrame(this.wDt),this.wDt=-1),-1!==this.VLt&&(V.To(this.VLt),this.VLt=-1)}rk(){return 0<this.QLt}lV(t){if(!this.ckt()){const s=this.rk(),i=(this.QLt+=t?1:-1,this.QLt<0&&(this.QLt=0),this.rk());if(!s&&i)console.log("[Construct] Suspending"),this.ABt(),this.lIt.dispatchEvent(V.vr(V.Event,"suspend")),this.YN(V.VY.jY.WY.BBt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.e5t=e,this.p5t=e,this.d5t=0,this.m5t=0,this.g5t=0,this.y5t=0,this.w5t=0,this.S5t=0,this.lIt.dispatchEvent(V.vr(V.Event,"resume")),this.YN(V.VY.jY.WY.NBt,null,null),this.X1t()||this.cZ(e)}}}qj(t){this.O5t.Ac(t)}Kj(t){this.L5t.Ac(t)}Yj(t){this.B5t.Ac(t)}Xj(t){this.O5t.B0(t)}Zj(t){this.L5t.B0(t)}$j(t){this.B5t.B0(t)}WBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.r4(),s&&U.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.cZ(),s&&U.AddIndividualBehaviorTickTime(t.hW(),performance.now()-i)),e}jBt(){const t=this.h4();this.O5t.Ed(!0);for(const s of this.O5t)this.WBt(s,t);this.O5t.Ed(!1)}VBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.tV(),s&&U.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.OTt(),s&&U.AddIndividualBehaviorTickTime(t.hW(),performance.now()-i)),e}UBt(){const t=this.h4();this.L5t.Ed(!0);for(const s of this.L5t)this.VBt(s,t);this.L5t.Ed(!1)}HBt(t,s){let i=s?performance.now():0,e;return t instanceof h?(e=t.o4(),s&&U.AddIndividualBehaviorTickTime(t.behavior,performance.now()-i)):(e=t.PGt(),s&&U.AddIndividualBehaviorTickTime(t.hW(),performance.now()-i)),e}zBt(){const t=this.h4();this.B5t.Ed(!0);for(const s of this.B5t)this.HBt(s,t);this.B5t.Ed(!1)}*JBt(){const t=this.h4();this.O5t.Ed(!0);for(const s of this.O5t){const i=this.WBt(s,t);V.Qo(i)&&(yield*i)}this.O5t.Ed(!1)}*qBt(){const t=this.h4();this.L5t.Ed(!0);for(const s of this.L5t){const i=this.VBt(s,t);V.Qo(i)&&(yield*i)}this.L5t.Ed(!1)}*XBt(){const t=this.h4();this.B5t.Ed(!0);for(const s of this.B5t){const i=this.HBt(s,t);V.Qo(i)&&(yield*i)}this.B5t.Ed(!1)}async cZ(a,t,s){this.YLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.Wk(),f=this.dL();if(this.qLt&&(!this.rk()||t||l)){let t=performance.now(),s=(this.XLt=!0,this.YBt(a||0),this.g5t++,this.$Bt(),this.KBt()),i=(this.Ivt()&&await s,this.lIt.p0(this.D5t.pretick)),e=(i instanceof Promise&&await i,this.y$(this.k5t.pretick),this.ZBt()),h=(this.Ivt()&&await e,this.QBt()&&await this.tNt(),c.zk()&&await this.sNt(),this.iNt()),r=(this.Ivt()&&await h,c.Lk()),n=r.tY(),o=!1;if(-1!==n&&(r.sY(),f.QX()!==n)){const d=this.dL().vY(n);this.vD()&&(o=!0,await d)}this.Rf("canvas","update-html-layer-dom-state",{layersDomState:r.PJ().filter(t=>t.xB()).map(t=>t.D9())}),u&&this.iF(),o&&this.Rf("canvas","cleanup-html-layers"),this.ckt()&&(await this.mBt(),this.ck()>=this.fBt())?this.yBt():(this.rk()||l||this.PBt(),this.zLt++,this.JLt++,this.XLt=!1,this.S5t+=performance.now()-t)}}async KBt(){const t=this.y0t,s=this.h4();this._5(),t.v5(!0),this.O1t(this.Lk()),s&&U.StartMeasuringTime(),this.Ivt()?await t.mpt():t.upt(),s&&U.AddEventsTime(),this.L1t(),t.v5(!1),this._5(),t.v5(!0)}async ZBt(){const t=this.y0t,s=this.h4(),i=this.Ivt(),e=this.lIt,h=this.D5t,r=this.k5t;s&&U.StartMeasuringTime(),i?await this.eNt(this.JBt()):this.jBt(),i?await this.eNt(this.qBt()):this.UBt(),s&&U.AddBehaviorTotalTickTime(),s&&U.StartMeasuringTime(),i?await this.hNt(h.tick):e.dispatchEvent(h.tick),s&&U.AddPluginTotalTickTime(),t.v5(!1),this.y$(r.tick)}async iNt(){const t=this.y0t,s=this.lIt,i=this.D5t,e=this.k5t,h=this.h4(),r=this.Ivt();h&&U.StartMeasuringTime(),r?await t.B1t(this.iX):t.k1t(this.iX),h&&U.AddEventsTime(),this.aLt.R3t(),this.$Bt(),this.$Lt=!1,t.v5(!0),h&&U.StartMeasuringTime(),r?await this.eNt(this.XBt()):this.zBt(),h&&U.AddBehaviorTotalTickTime(),h&&U.StartMeasuringTime(),r?await this.hNt(i.tick2):s.dispatchEvent(i.tick2),h&&U.AddPluginTotalTickTime(),t.v5(!1),this.y$(e.tick2),r&&await t.Y1t()}$Bt(){if(0!==this.CLt.size){const t=this.lIt;t.Zf(!0);for(const s of this.RLt)s.hpt().qft(this.CLt);this.RLt.clear(),this.y0t.ypt(this.CLt);for(const i of this.CLt)i.Gr();this.CLt.clear(),t.Zf(!1)}}async sNt(){let t=this.Wk(),s=0;for(;t.zk()&&s++<10;)await this.rNt(t.B$())}YBt(t){let s=0;if(this.ckt())s=1/this.dBt(),this.h5t=s,this.r5t=s;else if(0!==this.e5t){const i=Math.max(t-this.e5t,0);.5<(s=i/1e3)&&(s=0),this.h5t=s,this.r5t=V.Rr(s,this.a5t,this.o5t)}this.e5t=t,this.n5t=this.r5t*this.rRt,this.l5t.Ac(this.n5t),this.u5t.Ac(s*this.rRt),this.c5t.Ac(this.r5t);for(const[e,h]of this.f5t)h.Ac(this.r5t*e.pk());this.ELt&&this.ELt.Xkt(),1e3<=t-this.p5t&&(this.p5t+=1e3,1e3<=t-this.p5t&&(this.p5t=t),this.m5t=this.d5t,this.d5t=0,this.y5t=this.g5t,this.g5t=0,this.w5t=Math.min(this.S5t/1e3,1),this.S5t=0,this.ELt&&this.ELt.qkt(),this.aLt.T3t(),this.h4())&&U.Update1sPerfStats()}mRt(t,s){if(s){if(!this.f5t.has(t)){const i=V.vr(V.W0);i.z0(this.l5t),this.f5t.set(t,i)}}else this.f5t.delete(t)}gRt(t){const s=this.f5t.get(t);return s?s.ni():this.ck()}async rNt(t){const s=this.lIt,i=this.Wk(),e=i.Lk();await e.$Y(),e.gY(t,this.gM()),e===t&&this.y0t.QY(),this.aLt.R3t(),this.$Bt(),s.dispatchEvent(this.D5t.beforelayoutchange),V.t0.y0(!0),await t.aY(e,this.gM()),V.t0.y0(!1),await t.SY(!1),s.dispatchEvent(this.D5t.layoutchange),this.fO(),this.$Lt=!0,this._5(),this.gBt()}fO(){this.OLt=!0}Lkt(){return this.ELt?this.ELt.Lkt():null}Bkt(){return this.ELt?this.ELt.Bkt():null}gM(){return this.ELt?this.ELt.gM():null}iF(){const i=this.ELt;if(i&&!i.kkt()){const e=this.gM(),t=e.uE(),h=t&&e.jb(),r=t&&e.ZS();if(h&&e.$P(),this.OLt||this.ckt()){const n=this.iX.Lk(),o=(this.d5t++,e.VP(),this.h4());o&&U.StartMeasuringTime(),this.OLt=!1;let t=null,s=(h&&(t=i.Kkt().LR(),e.lE(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.qX())),e.StartMeasuringRenderPassTime(0,1)),this.c9()&&"low"===i.gq()?e.sP(i.rq(),i.nq()):e.iP(),this.nNt(this.gM(),n),t&&e.cE(t),r&&(e.StopMeasuringRenderPassTime(),this.ELt.Zkt(s)),e.Fb(),o&&(U.AddDrawCallsTime(),U.UpdateInspectHighlight()),i&&i.tOt()}else e.Ob()}}l$(t){return"low"===this.dL().gq()||t.jb()&&(this.mq()||this.c9())}nNt(s,i){s.lw(),s.wP(),s.cP(1,1,1,1),s.tE(null),s.mP(null),s.HP(this.c9()),this.l$(s)&&i.o$(s);const e=i.QX();for(let t=1;t<e;++t)i.d$(s,t),s.ZS()&&s.Restart();this.l$(s)||i.o$(s),i.f$(s)}YN(t,s,i){if(!this.qLt)return!1;let e=!this.XLt&&!this.y0t.Q1t(),h=0;e&&(h=performance.now());const r=this.h4(),n=(r&&this.xV(!1),this.y0t.V1t(this.iX,t,s,i));if(e){const o=performance.now()-h;this.S5t+=o,r&&U.AddTriggersTime(o)}return r&&this.xV(!0),n}wGt(t,s,i){if(!this.Ivt())return this.YN(t,s,i);if(this.X1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.XLt||this.y0t.Q1t())return this.y0t.z1t(this.iX,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async KN(t,s,i){if(!this.Ivt())return this.YN(t,s,i);if(!this.qLt)return!1;if(this.X1t())return this.y0t.J1t(t,s,i);if(!this.Lk())return this.y0t.U1t(t,s,i);let e=performance.now(),h=this.y0t.z1t(this.iX,t,s,i),r=h.next();for(;!r.done;)await this.W1t(r.value),r=h.next();return this.rk()||this.y0t.Q1t()||(await this.y0t.Y1t(),this.YLt&&!this.XLt&&this.PBt()),this.S5t+=performance.now()-e,r.value}bGt(t,s,i){const e=this.h4(),h=(e&&this.xV(!1),this.y0t.$1t(this.iX,t,s,i));return e&&this.xV(!0),h}MGt(t,s,i){return this.y0t.K1t(this.iX,t,s,i)}vGt(t){return this.t5t.Ac(t)}O1t(t){this.bLt.push(t)}L1t(){if(!this.bLt.length)throw new Error("layout stack empty");this.bLt.pop()}eO(){return this.bLt.length?this.bLt.at(-1):this.Lk()}ak(t){return t&&-1!==t.pk()?this.r5t*t.pk():this.n5t}lZ(){return this.n5t}uZ(){return this.r5t}uk(){return this.h5t}pk(){return this.rRt}mk(t){(isNaN(t)||t<0)&&(t=0),this.rRt=t}Ck(t){this.a5t=Math.max(t,0)}Ik(){return this.a5t}Pk(t){this.o5t=Math.max(t,0)}Ak(){return this.o5t}gk(){return this.m5t}Sk(){return this.y5t}bk(){return this.w5t}oNt(){return this.i5t}ck(){return this.l5t.ni()}aNt(){return this.u5t.ni()}dk(){return this.c5t.ni()}nst(){return this.zLt}lNt(){return this.JLt}uNt(){return this.TLt}gD(){return this.HOt}SD(){return this.zOt}cNt(){return this.JOt}fNt(){return this.qOt}bD(){return this.XOt}tO(t){if(this.b5t)throw new Error("cannot call while loading state - wait until afterload event");return this.ILt.get(t)||null}HY(){this.ILt.clear();for(const t of this.pLt)if(!t.GJ())for(const s of t.m5())this.ILt.set(s.vN(),s)}bOt(){return"preview"===this.POt}h4(){return this.LOt}lL(){return this.POt}uL(){return"nwjs"===this.lL()||this.EOt}vOt(){return"cordova"===this.POt}dNt(){return"Android"===V.di.mi&&("cordova"===this.POt||"playable-ad-single-file"===this.POt||"playable-ad-zip"===this.POt||"instant-games"===this.POt)}pNt(){return this.NU}mNt(){return this.FOt}cL(){return this.DOt}gNt(){return this.kOt}fD(){return this.aLt}i_t(){return this.oLt.i_t()}e_t(){return this.oLt.e_t()}c9(){return this.FLt}yNt(){return this.gM().jS(this.i9())}BS(t){return this.gM().BS(t||this.i9())}SNt(){return this.$Lt}wNt(t){this.kLt!==(t=!!t)&&(this.kLt=t,this.Wk().W$(),this.fO())}RD(){return this.kLt}bNt(t){if(!this.dLt.has(t)){const i=()=>this.MNt(t);this.dLt.set(t,i),t.r0().addEventListener("animationframeimagechange",i)}const s=this.hy.Kg(t);return s.wy()||s.My().then(()=>this.fO()),s}MNt(t){this.hy.iy(t)}cLt(t){const s=[];for(const i of t.wCt())for(const e of i.RW()){const h=e.kW();s.push({source:e,width:h.Lm(),height:h.qm(),tag:e.t8()})}return{yy:s}}async fLt(t){const s=V.vr(V.Dd),i=[],h=new Map;for(const n of t.wCt())for(const o of n.RW()){const a=o.kW().G_t();h.has(a)||(h.set(a,null),i.push(s.Ac(async()=>{const t=await a.p7();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.wCt())for(const u of l.RW())e.push(s.Ac(async()=>{const t=u.kW(),s=h.get(t.G_t()),i=await t.T_t(s),e=await createImageBitmap(i);return{Gy:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{yy:r}}vNt(t){this.M5t=t,this.v5t=!1}xNt(){this.M5t="",this.v5t=!0}GNt(t){this.x5t=t}v2t(t){this.c4=t}TNt(){return this.G5t}QBt(){return!!(this.M5t||this.v5t||this.x5t||null!==this.c4)}async tNt(){if(this.M5t&&(this._5(),await this._Nt(this.M5t),this.INt()),this.x5t&&(await this.CNt(this.x5t),this.INt(),this.h4())&&U.StepIfPausedInDebugger(),this.v5t){const t=await this.RNt();this.G5t=t,await this.KN(V.VY.jY.WY.ANt,null),this.G5t="",this.INt()}if(null!==this.c4){this._5();try{await this.PNt(this.c4),this.G5t=this.c4,await this.KN(V.VY.jY.WY.ENt,null),this.G5t=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.KN(V.VY.jY.WY.FNt,null)}this.INt()}}INt(){this.M5t="",this.v5t=!1,this.x5t="",this.c4=null}_L(){return this.T5t||(this.T5t=localforage.Wi({name:"c3-localstorage-"+this.cNt(),description:this.gD()})),this.T5t}DNt(){return this._5t||(this._5t=localforage.Wi({name:"c3-savegames-"+this.cNt(),description:this.gD()})),this._5t}async _Nt(t){const s=await this.RNt();try{await this.DNt().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.G5t=s,await this.KN(V.VY.jY.WY.ANt,null),this.G5t=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.KN(V.VY.jY.WY.kNt,null)}}async CNt(t){try{const s=await this.DNt().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.PNt(s),this.G5t=s,await this.KN(V.VY.jY.WY.ENt,null),this.G5t=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.KN(V.VY.jY.WY.FNt,null)}}async RNt(){const t={c3save:!0,version:1,rt:{time:this.ck(),timeRaw:this.aNt(),walltime:this.dk(),timescale:this.pk(),tickcount:this.nst(),next_uid:this._Lt,running_layout:this.Lk().EJ(),start_time_offset:Date.now()-this.i5t},types:{},layouts:{},events:this.y0t.$q(),timelines:this.QQ.$q(),user_script_data:null};for(const i of this.pLt)i.GJ()||i.jCt()||(t.types[i.EJ().toString()]=i.$q());for(const e of this.iX.Uk())t.layouts[e.EJ().toString()]=e.$q();const s=this.ONt("save");return s.saveData=null,await this.LY(s),t.user_script_data=s.saveData,JSON.stringify(t)}PY(){return this.b5t}async PNt(t){const s=this.Wk(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.x2t(),this.lIt.dispatchEvent(V.vr(V.Event,"beforeload"));for(const a of this._Bt()){const l=a.lN();l.jCt()||a.fK()}let e=i.rt,h=(this.l5t.Set(e.time),e.hasOwnProperty("timeRaw")&&this.u5t.Set(e.timeRaw),this.c5t.Set(e.walltime),this.rRt=e.timescale,this.zLt=e.tickcount,this.i5t=Date.now()-e.start_time_offset,e.running_layout),r=!(this.b5t=!0);if(h!==this.Lk().EJ()){const u=s.E$(h);if(!u)return;await this.rNt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.E$(d);p&&p.Kq(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),S=this.cV(y);!S||S.GJ()||S.jCt()||S.Kq(g,n)}for(const w of this.iX.Uk())for(const b of w.H5())b.Zq();if(this._5(),this.HY(),this.b5t=!1,r){for(const M of this._Bt())M.EY();for(const[v,x]of Object.entries(i.types)){const G=parseInt(v,10),T=this.cV(G);!T||T.GJ()||T.jCt()||T.HCt(x)}}this._Lt=e.next_uid,this.y0t.Kq(i.events);for(const _ of this.pLt)if(!_.GJ()&&_.bN())for(const I of _.m5()){const C=I.GN();for(const R of _.rY().zY())if(R!==_){const A=R.m5();if(C<0||C>=A.length)throw new Error("missing sibling instance");I.JY(A[C])}}this.QQ.Kq(i.timelines),s.N$(),s.W$();for(const P of n)P.YRt();this.G2t(),this.lIt.dispatchEvent(V.vr(V.Event,"afterload")),this.y$(this.ONt("afterload"));for(const[E,F]of Object.entries(i.types)){const D=parseInt(E,10),k=this.cV(D);k&&k.UCt()}const o=this.ONt("load");o.saveData=i.user_script_data,await this.LY(o),this.fO()}LNt(t,s){return t.rO().KPt()-s.rO().KPt()}LEt(t,s){t.rO()&&!this.$5t.has(t)&&(this.$5t.set(t,s),this.K5t.push(t))}x2t(){this.$5t=new WeakMap,V.$n(this.K5t)}G2t(t="full",s=null){this.K5t.sort(this.LNt);for(const i of this.K5t)i.pK(this.$5t.get(i),t,s);for(const e of this.K5t)e.tAt(this.$5t.get(e),t,s);this.x2t()}async BNt(t){const s=await Promise.all(t.map(async t=>{const s=this.vOt()&&this.ZH.SH();if(s||"playable-ad-single-file"===this.lL()){const i=await this.ZH.Oo(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this.N5t.NNt(s)}WNt(t,s){this.N5t.jNt(t,s)}VNt(t,s){this.N5t.UNt(t,s)}HNt(t,s,i,e){return this.N5t.HNt(t,s,i,null,null,e)}zNt(t,s,i,e){return this.N5t.zNt(t,s,i,e)}JNt(){return this.N5t.qNt()}Zk(t,s){this.Rf("runtime","invoke-download",{url:t,filename:s})}async lOt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.vD()){const n=await this.pO("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async XNt(t){return this.vD()?this.pO("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}YNt(){this.A5t||(this.A5t=!0,this.Rf("runtime","enable-device-orientation"))}$Nt(){this.P5t||(this.P5t=!0,this.Rf("runtime","enable-device-motion"))}Ok(){return this.s5t()}KNt(t){this.s5t=t}U5t(){const t=this.gM();return{fps:this.gk(),tps:this.Sk(),cpu:this.bk(),gpu:this.vk(),layout:this.Lk()?this.Lk().Sf():"",renderer:t.jb()?t.wE():t.GetAdapterInfoString()}}X1t(){return!!this.h4()&&U.X1t()}W1t(t){return this.Ivt()?U.W1t(t):Promise.resolve()}vyt(){return!!this.Ivt()&&U.BreakNext()}ZNt(t){this.BOt=!!t,this.QNt()}t4t(){return this.BOt}Ivt(){return this.NOt}xV(t){t?this.WOt--:this.WOt++,this.QNt()}QNt(){this.NOt=this.h4()&&this.BOt&&0===this.WOt}Wmt(){return this.h4()&&U.Wmt()}uq(){return this.h4()&&this.gM().uE()&&U.uq()}async eNt(t){if(t)for(const s of t)await this.W1t(s)}hNt(t){return this.eNt(this.lIt.g0(t))}Vdt(t){return this.y0t.Vdt(t.name,t.params)}gO(t){if(this.vD())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}PL(){return this.q5t}ONt(t){const s=V.vr(V.Event,t,!1);return s.runtime=this.q5t,s}oBt(){this.q5t=new self.nD(this),this.k5t={pretick:this.ONt("pretick"),tick:this.ONt("tick"),tick2:this.ONt("tick2")}}uBt(){const t={};for(const s of this.pLt)t[s.m1t()]={value:s.QL(),enumerable:!0,writable:!1};this.q5t.kD(t)}cBt(){const t={};for(const s of this.BD().x1t())t[s.m1t()]=s.g1t();this.q5t.OD(t)}qk(){return this.Y5t}XL(t,s){this.X5t.set(t,s)}q5(t){return this.X5t.get(t)}sL(t){if(!(t instanceof self.e5))throw new TypeError("expected IObjectClass");const s=this.q5(t);if(s&&s instanceof V.lut)return s;throw new Error("invalid IObjectClass")}f5(t){if(!(t instanceof self.oN))throw new TypeError("expected IInstance");const s=this.q5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}hO(t){if(!(t instanceof self.z6))throw new TypeError("expected IWorldInstance");const s=this.q5(t);if(s&&s instanceof V.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=V.xOt.Hx,self.C3_InitRuntime=(t,s)=>t.aRt(s)}{const Ba=self.Ws;Ba.W5t=class extends Ba.br{constructor(t,s){super(),this._f=t,this.s4t=new Map,this.i4t=0,this.e4t=s.inputPort,s.outputPort.onmessage=t=>this.h4t(t),this.r4t=s.maxNumWorkers,this.n4t=1,this.o4t=!1,this.a4t=!1}qNt(){return this.r4t}NNt(t){this.e4t.postMessage({type:"_import_scripts",scripts:t})}jNt(t,s){this.e4t.postMessage({type:"_send_blob",blob:t,id:s})}UNt(t,s){this.e4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}HNt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.i4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.s4t.set(n,{resolve:t,progress:e,reject:s,l4t:!1,maxWorkerNum:r})});return h&&h.O0(()=>this.u4t(n)),this.e4t.postMessage(o,i),this.c4t(),a}zNt(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.i4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.e4t.postMessage(r,i)}u4t(t){const s=this.s4t.get(t);s&&(s.l4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.e4t.postMessage({type:"_cancel",jobId:t}))}h4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.f4t(e,s.result);break;case"progress":this.d4t(e,s.progress);break;case"error":this.p4t(e,s.error);break;case"ready":this.m4t();break;default:throw new Error(`unknown message from worker '${i}'`)}}f4t(t,s){const i=this.s4t.get(t);if(!i)throw new Error("invalid job ID");i.l4t||i.resolve(s),this.s4t.delete(t)}d4t(t,s){const i=this.s4t.get(t);if(!i)throw new Error("invalid job ID");!i.l4t&&i.progress&&i.progress(s)}p4t(t,s){const i=this.s4t.get(t);if(!i)throw new Error("invalid job ID");i.l4t||i.reject(s),this.s4t.delete(t)}m4t(){this.o4t&&(this.o4t=!1,this.n4t++,this.n4t<this.r4t?this.c4t():this.e4t.postMessage({type:"_no_more_workers"}))}g4t(){let t=0,s=[...this.s4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async c4t(){if(!(this.n4t>=this.r4t||this.o4t||this.a4t||this.g4t()<=this.n4t))try{this.o4t=!0;const t=await this._f.pO("runtime","create-job-worker");t.outputPort.onmessage=t=>this.h4t(t)}catch(t){this.a4t=!0,this.o4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.n4t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.tint={lkt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform lowp vec3 tintColor;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\ngl_FragColor = front * vec4(tintColor.r, tintColor.g, tintColor.b, 1.0);\n}",akt:"",nkt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\ntintColor : vec3<f32>\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput {\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar output : FragmentOutput;\noutput.color = front * vec4<f32>(shaderParams.tintColor, 1.0);\nreturn output;\n}",cM:!1,dM:!1,Kb:0,Qb:0,sM:!1,eM:!1,rM:!0,oM:!1,lM:!1,parameters:[["tintColor",0,"color"]]};{let w=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(w,self.Ws),i=null,e="",h="",r=[],n="",o="",a="",M=b.vr(b.ddt);b.VY.jY=class extends b.Gxt{constructor(t){super(t),this.adt=this._f.BD().MV(),this.Xft=this._f.BD().KD(),this.y4t=0,this.S4t=0,this.w4t=new Map}Gr(){super.Gr()}fO(){this._f.fO()}YN(t){this._f.YN(t,null,null)}b4t(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}M4t(t,s,i){if(t!==n||s!==o||i!==a){const e=this.b4t(s,i);r=t.match(e),n=t,o=s,a=i}return r}async v4t(t,s){if(s.length){this.y4t+=s.length;const i=[];for(const e of s)i.push(t.uY(e));await b.Mo(i,()=>{this.S4t++}),this.S4t++,this.S4t===this.y4t&&(this.S4t=0,this.y4t=0,this._f.YN(b.VY.jY.WY.x4t,null,null))}}LH(){return 0===this.y4t?1:this.S4t/this.y4t}G4t(t,s){for(const i of s)0===i.S5()&&t.pY(i)}T4t(){return M}_4t(s){const i=this._f.BD(),t=i.KD(),e=t.wV(),h=e.HD(),r=h.SV(),n=e.X0t(),o=t.bV(h),a=i.MV(),l=a.bV();if(l.cdt(s),n)for(let t=0;t<s&&!l.AV();++t)i.TV(r),l.CV(t),h._V(e,o),i.IV(r);else for(let t=0;t<s&&!l.AV();++t)l.CV(t),h._V(e,o);return t.PV(),a.PV(),!1}*I4t(s){const i=this._f.BD(),t=i.KD(),e=t.wV(),h=e.HD(),r=h.SV(),n=e.X0t(),o=t.bV(h),a=i.MV(),l=a.bV();if(l.cdt(s),n)for(let t=0;t<s&&!l.AV();++t)i.TV(r),l.CV(t),yield*h.Fyt(e,o),i.IV(r);else for(let t=0;t<s&&!l.AV();++t)l.CV(t),yield*h.Fyt(e,o);return t.PV(),a.PV(),!1}C4t(){const s=this._f.BD(),t=s.KD(),i=t.wV(),e=i.HD(),h=e.SV(),r=i.X0t(),n=t.bV(e),o=s.MV(),a=o.bV();if(r)for(let t=0;!a.AV();++t)s.TV(h),a.CV(t),e._V(i,n)||a.e8(),s.IV(h);else for(let t=0;!a.AV();++t)a.CV(t),e._V(i,n)||a.e8();return t.PV(),o.PV(),!1}*R4t(){const s=this._f.BD(),t=s.KD(),i=t.wV(),e=i.HD(),h=e.SV(),r=i.X0t(),n=t.bV(e),o=s.MV(),a=o.bV();if(r)for(let t=0;!a.AV();++t){s.TV(h),a.CV(t);const l=yield*e.Fyt(i,n);l||a.e8(),s.IV(h)}else for(let t=0;!a.AV();++t){a.CV(t);const u=yield*e.Fyt(i,n);u||a.e8()}return t.PV(),o.PV(),!1}A4t(t,s,i){const e=this._f.BD(),h=e.KD(),r=h.wV(),n=r.HD(),o=n.SV(),a=r.X0t(),l=h.bV(n),u=e.MV(),c=u.bV();if(c.vV(t),c.cdt(i),i<s)if(a)for(let t=s;t>=i&&!c.AV();--t)e.TV(o),c.CV(t),n._V(r,l),e.IV(o);else for(let t=s;t>=i&&!c.AV();--t)c.CV(t),n._V(r,l);else if(a)for(let t=s;t<=i&&!c.AV();++t)e.TV(o),c.CV(t),n._V(r,l),e.IV(o);else for(let t=s;t<=i&&!c.AV();++t)c.CV(t),n._V(r,l);return h.PV(),u.PV(),!1}*P4t(t,s,i){const e=this._f.BD(),h=e.KD(),r=h.wV(),n=r.HD(),o=n.SV(),a=r.X0t(),l=h.bV(n),u=e.MV(),c=u.bV();if(c.vV(t),c.cdt(i),i<s)if(a)for(let t=s;t>=i&&!c.AV();--t)e.TV(o),c.CV(t),yield*n.Fyt(r,l),e.IV(o);else for(let t=s;t>=i&&!c.AV();--t)c.CV(t),yield*n.Fyt(r,l);else if(a)for(let t=s;t<=i&&!c.AV();++t)e.TV(o),c.CV(t),yield*n.Fyt(r,l),e.IV(o);else for(let t=s;t<=i&&!c.AV();++t)c.CV(t),yield*n.Fyt(r,l);return h.PV(),u.PV(),!1}E4t(i){const t=i.g5(),s=t.m5();if(0!==s.length){const e=this._f.BD(),h=e.KD(),r=h.wV(),n=r.HD(),o=n.SV(),a=r.X0t(),l=h.bV(n),u=e.MV(),c=u.bV(),f=i.bN(),d=M.bV();if(b.eo(d,s),c.cdt(d.length),a)for(let t=0,s=d.length;t<s&&!c.AV();++t){e.TV(o);const p=d[t];i.g5().a0t(p),f&&p.Jmt(),c.CV(t),n._V(r,l),e.IV(o)}else{t.r0t(!1);const m=t.n0t();b.$n(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.AV();++t){const g=d[t];m[0]=g,f&&g.Jmt(),c.CV(t),n._V(r,l)}}h.PV(),u.PV(),b.$n(d),M.PV()}return!1}*F4t(i){const t=i.g5(),s=t.m5();if(0!==s.length){const e=this._f.BD(),h=e.KD(),r=h.wV(),n=r.HD(),o=n.SV(),a=r.X0t(),l=h.bV(n),u=e.MV(),c=u.bV(),f=i.bN(),d=M.bV();if(b.eo(d,s),c.cdt(d.length),a)for(let t=0,s=d.length;t<s&&!c.AV();++t){e.TV(o);const p=d[t];i.g5().a0t(p),f&&p.Jmt(),c.CV(t),yield*n.Fyt(r,l),e.IV(o)}else{t.r0t(!1);const m=t.n0t();b.$n(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.AV();++t){const g=d[t];m[0]=g,f&&g.Jmt(),c.CV(t),yield*n.Fyt(r,l)}}h.PV(),u.PV(),b.$n(d),M.PV()}return!1}D4t(i,t){const s=i.g5(),e=s.m5();if(0!==e.length){const h=this._f.BD(),r=h.KD(),n=h.n1t(),o=r.wV(),a=o.HD(),l=a.SV(),u=o.X0t(),c=r.bV(a),f=h.MV(),d=f.bV(),p=i.bN(),m=M.bV();b.$n(m),d.cdt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.qbt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.AV();++t){h.TV(l);const g=m[t][0];i.g5().a0t(g),p&&g.Jmt(),d.CV(t),a._V(o,c),h.IV(l)}else{s.r0t(!1);const y=s.n0t();b.$n(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.AV();++t){const S=m[t][0];y[0]=S,p&&S.Jmt(),d.CV(t),a._V(o,c)}}r.PV(),f.PV(),b.$n(m),M.PV()}return!1}*k4t(i,t){const s=i.g5(),e=s.m5();if(0!==e.length){const h=this._f.BD(),r=h.KD(),n=h.n1t(),o=r.wV(),a=o.HD(),l=a.SV(),u=o.X0t(),c=r.bV(a),f=h.MV(),d=f.bV(),p=i.bN(),m=M.bV();b.$n(m),d.cdt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.qbt(1,t)]);if(m.sort(w),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.AV();++t){h.TV(l);const g=m[t][0];i.g5().a0t(g),p&&g.Jmt(),d.CV(t),yield*a.Fyt(o,c),h.IV(l)}else{s.r0t(!1);const y=s.n0t();b.$n(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.AV();++t){const S=m[t][0];y[0]=S,p&&S.Jmt(),d.CV(t),yield*a.Fyt(o,c)}}r.PV(),f.PV(),b.$n(m),M.PV()}return!1}O4t(t,s){let i=this.w4t.get(t);if(!i){if(!s)return null;i={L4t:null,B4t:new Map},this.w4t.set(t,i)}return i}N4t(t,s,i,e,h){s.VD().Yyt(i,s.qD()),e&&t.IV(h)}*W4t(t,s,i,e,h){yield*s.VD().$yt(i,s.qD()),e&&t.IV(h)}}}{const Na=self.Ws;Na.VY.jY.jIt=class extends Na.br{constructor(t){super(),this.Wft=t,this._f=t.TO(),this.lGt=t.r5()}qxt(){}Gr(){this.Wft=null,this._f=null,this.lGt=null}}}{const Wa=self.Ws;Wa.VY.jY.Instance=class extends Wa.br{constructor(t,s){super(),this.Ci=t,this.Wft=this.Ci.lN(),this.mGt=this.Wft.GMt(),this._f=this.Ci.TO()}Gr(){this.Ci=null,this.Wft=null,this.mGt=null,this._f=null}}}{const v=self.Ws,ja=[];v.VY.jY.WY={j4t(){return!0},NY(){return!0},KY(){return!0},BBt(){return!0},NBt(){return!0},rk(){return this._f.rk()},Agt(){const t=this._f.r1t();return!t.U0t()&&!t.j0t()},V4t(){let t=this._f.n1t(),s=t.Dbt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this._f.nst();return s.set("TriggerOnce_lastTick",e),this._f.SNt()||i!==e-1},U4t(t){const s=this._f.n1t(),i=s.Dbt(),e=i.get("Every_lastTime")||0,h=this._f.ck(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Jpt(t){const s=this._f.BD().I1t(t);return s&&s.Jpt()},bOt(){return this._f.bOt()},xi(){return v.di.xi},bBt(){return!0},H4t(){return!0},z4t(){return!0},ANt(){return!0},kNt(){return!0},ENt(){return!0},FNt(){return!0},J4t(t){return!!this._f.tO(t)},q4t(t){switch(t){case 0:return"browser"===v.di.Mi;case 1:return"iOS"===v.di.mi;case 2:return"Android"===v.di.mi;case 8:return"cordova"===v.di.Mi;case 9:return"scirra-arcade"===this._f.lL();case 10:return"nwjs"===v.di.Mi;case 13:return"windows-uwp"===this._f.lL();default:return!1}},X4t(t,s,i){const e=this.b4t(s,i);return e.test(t)},Y4t(t,s,i){return v.compare(t,s,i)},$4t(t,s,i){return s<=t&&t<=i},K4t(t,s,i){return v.compare(t.tht(),s,i)},Z4t(t){return!!t.tht()},Q4t(t,s){const i=this._f.ck();if(0!==t)return v.compare(i,t,s);{const e=this._f.n1t(),h=e.Dbt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},t6t(t){return isNaN(t)},H2t(t,s,i){return v.Br(v.Pr(t),v.Pr(i))<=v.Pr(s)},z2t(t,s){return v.Wr(v.Pr(t),v.Pr(s))},svt(t,s,i){let e=v.Pr(t),h=v.Pr(s),r=v.Pr(i),n=!v.Wr(r,h);return n?!(!v.Wr(e,h)&&v.Wr(e,r)):v.Wr(e,h)&&!v.Wr(e,r)},s6t(t,s){return"number"==typeof t?0===s:1===s},i6t(t){return!!t},Gpt(t){return t.toLowerCase()===this._f.BD().Cpt()},e6t(t,i,e,h){if(!t)return!1;let s=this.T4t(),r=s.bV(),n=t.g5(),o=(v.eo(r,n.m5()),n.Zft()&&v.$n(n.o0t()),this._f.n1t()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.qbt(1,t),h=o.qbt(3,t),v.compare(i,e,h)?++a:n.h0t(u)}v.Yn(r,a),n.l0t(r);const l=!!r.length;return v.$n(r),s.PV(),t.Vyt(),l},h6t(t,s){if(!t)return!1;let i=this.T4t(),e=i.bV(),h=t.g5(),r=(v.eo(e,h.m5()),h.Zft()&&v.$n(h.o0t()),this._f.n1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.qbt(1,t)?++n:h.h0t(a)}v.Yn(e,n),h.l0t(e);const o=!!e.length;return v.$n(e),i.PV(),t.Vyt(),o},r6t(t,i,e){if(!t)return!1;const s=t.g5(),h=s.m5();if(0===h.length)return!1;let r=this._f.n1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.qbt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.p0t(n),t.Vyt(),!0},n6t(t,s){if(!t)return!1;const i=t.g5(),e=i.m5();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.p0t(h),t.Vyt(),!0},o6t(t){if(!t)return!1;const s=t.g5(),i=s.m5(),e=Math.floor(this._f.Ok()*i.length);if(e>=i.length)return!1;const h=i[e];return s.p0t(h),t.Vyt(),!0},a6t(t){if(!t)return!1;if(!t.S5())return!1;const s=t.g5();return s.r0t(!0),t.Vyt(),!0},l6t(t,i,e){if(!t)return!1;const h=t.g5(),s=h.m5(),r=this._f.HD(),n=r.m0t(),o=this._f.n1t().Rbt();h.Zft()?(v.eo(ja,s),h.Kft(),h.r0t(!1)):n?(v.eo(ja,h.o0t()),v.$n(h.o0t())):(v.eo(ja,h.n0t()),v.$n(h.n0t()));for(let t=0,s=ja.length;t<s;++t){const a=ja[t];v.xor(a.rO().s6(i,e),o)?h.e0t(a):h.h0t(a)}return t.Vyt(),v.xor(!!h.n0t().length,o)},u6t(s){if(!s)return!1;let i=s.GJ(),e=null,h=this._f.PCt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.lN().AMt(s)){e=r;break}}else if(r.lN()===s){e=r;break}}if(!e){const n=s.m5();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.g5();return t.p0t(e),s.Vyt(),!0},c6t(t){return this._f.Ivt()?this.I4t(t):this._4t(t)},f6t(){return this._f.Ivt()?this.R4t():this.C4t()},d6t(t,s,i){return this._f.Ivt()?this.P4t(t,s,i):this.A4t(t,s,i)},Fd(t){return this._f.Ivt()?this.F4t(t):this.E4t(t)},p6t(t,s,i){return this._f.Ivt()?this.k4t(t,i):this.D4t(t,i)},m6t(t){return!!t&&t.wB()},g6t(t){return!!t&&t._B()},y6t(t){return!!t&&t.xB()},S6t(t){return!!t&&!t.S5()},w6t(t,s,i){return!!t&&v.compare(100*t.uP(),s,i)},b6t(t){const s=this._f.Lk();return!!s&&s.XX(t)},x4t(){return!0},M6t(){return 0<this.y4t},v6t(t,s){const i=this._f.BRt();return!!i&&!!s&&!!i.aut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const Va=self.Ws,Ua=[],Ha=[],za=Va.vr(Va.Rect),Ja=Va.vr(Va.ea),qa=[];Va.VY.jY.Irt={x6t(t,s){t.kht(s)},G6t(t,s){t.ye()&&"number"!=typeof s&&(s=parseFloat(s)),t.kht(t.tht()+s)},T6t(t,s){t.ye()&&t.kht(t.tht()-s)},_6t(t,s){t.kht(!!s)},I6t(t){t.kht(!t.tht())},C6t(t){t.kht(t.h1t())},R6t(t){this._f.BD().T1t(t)},A6t(t,s,i,e,h,r){if(t&&s){const n=this._f.b5(t,s,i,e,h,r);if(n){h&&s.M5(n);const o=this._f.BD(),a=(o.v5(!0),n.x5(),o.v5(!1),new Map);n.RRt(a,t,h);for(const[l,u]of a)l.g5().u0t(u)}}},P6t(t,s,i,e,h,r){if(t&&s){const n=this._f.TBt(t);n&&Va.VY.jY.Irt.A6t.call(this,n,s,i,e,h,r)}},vJ(h,r,n,o,a,t,l,u,c,f,d){if(h){let s=this._f.eO(),i=s;if(t){const p=this._f.Wk().P$(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.nO(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.nO(u))){za.set(r,n,o,a);const m=i.vJ(h,za,e,t,c,f,d);h.g5().l0t(m),h.Vyt()}}}},E6t(){const t=this.adt;t.hdt()&&t.idt().e8()},qpt(t,s){const i=this._f.BD().I1t(t);i&&(0===s?i.qpt(!1):1===s?i.qpt(!0):i.qpt(!i.Jpt()))},F6t(t){this._f.mk(t)},D6t(t,s){if(s<0&&(s=0),t){const i=t.g5(),e=i.m5();for(const h of e)h.mk(s)}},k6t(t){if(t){const s=t.g5(),i=s.m5();for(const e of i)e.RN()}},Hn(t,s){if(!(t<0)){const i=this._f.BD().opt();return s?i.mxt(t):i.gxt(t),!0}},ek(t){return this._f.BD().opt().yxt(t),!0},O6t(){const t=this._f.BD();return t.opt().Sxt(t.xpt()),!0},sk(t){this._f.BD().sk(t)},async Qkt(t,s,i,e,h,r){const n=this._f.dL();n&&(this.fO(),await n.Qkt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this._f.KN(Va.VY.jY.WY.H4t,null))},L6t(t,s){if(!(t<=0||s<=0)){this._f.Gkt(t,s),this._f.eO().Vq();const i=this._f.dL();i&&("off"!==i.ykt()&&this._f.IBt(t,s),i.DC(i.yj(),i.Sj(),!0),this._f.fO())}},B6t(t){const s=this._f.dL();s&&"off"!==s.ykt()&&(s.Pkt(0!==t?"high":"low"),s.DC(s.yj(),s.Sj(),!0))},yet(t){this._f.vNt(t)},N6t(){this._f.xNt()},W6t(t){this._f.GNt(t)},j6t(t){this._f.v2t(t)},V6t(t){},U6t(){for(const t of this._f.Wk().Uk())t.n$()},H6t(t){this._f.wNt(0!==t)},z6t(t,s){this._f.Pk(1/t),this._f.Ck(1/s)},J6t(t,s){this._f.Ck(t),this._f.Pk(s)},q6t(t){this._f.Tk(["vsync","unlimited-tick","unlimited-frame"][t])},X6t(t,i){if(t){const s=t.g5(),e=s.m5(),h=Ua,r=Ha,n=this._f.eO(),o=t.GJ(),a=t.uwt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.rO();if(u){let t;t=o?l.bnt(i+l.lN().lwt(a)):l.bnt(i),h.push([u.nO().rD(),u.oO()]),r.push([l,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.aO(h[t][0]),d=h[t][1],p=f.lO();p[d]!==c&&((p[d]=c).rO().uO(f,!0),f.cO(c),i=!0)}i&&this._f.fO(),Va.$n(Ua),Va.$n(Ha)}}},KO(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this._f.fD().KO(t,s)},Y6t(t){if(!this._f.by()){const s=this._f.Wk();s.zk()||s.Jk(t)}},$6t(t){if(!this._f.by()){const s=this._f.Wk();if(!s.zk()){const i=s.P$(t);i&&s.Jk(i)}}},K6t(t){if(!this._f.by()){const s=this._f.Wk();if(!s.zk()){const i=s.Uk(),e=i.indexOf(s.Lk());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.Jk(h)}}}},Z6t(){if(!this._f.by()){const t=this._f.Wk();t.zk()||(t.Jk(t.Lk()),this._f.BD().P1t())}},Q6t(t,s){t&&t.yB(s)},tWt(t,s){t&&t.MB(s)},sWt(t,s){t&&t.GB(s)},iWt(t,s){t&&t.fP(s/100)},eWt(t,s){t&&t.IB(s)},hWt(t,s){t&&t.RB(s)},rWt(t,s){t&&t.D5(Va.Pr(+s))},nWt(t,s,i){t&&(t.JB(!0),t.k5(s),t.L5(i))},oWt(t){t&&t.JB(!1)},aWt(t,s,i){t&&t.e9(s/100,i/100)},lWt(t,s){t&&t.QM(+s)},uWt(t,s){if(t){Ja.Ba(s),Ja.Rr();const i=t.zB();i.Aa(Ja)||(i.Ma(Ja),this.fO())}},cWt(t,s){t&&t.NB(s)},fWt(t,s){t&&t.OM(s)},dWt(t,s,i){if(t){const e=t.C5(),h=e.ort(i);if(h){const r=1===s;h.Lmt()!==r&&(h.s3t(r),t.mW(),this._f.fO())}}},pWt(t,s,i,e){if(t){const h=t.C5(),r=h.ort(s);if(r){i=Math.floor(i);const n=r.HG().JG(i);if(n){"color"===n?(Ja.Ba(e),e=Ja):"percent"===n&&(e/=100);const o=h.yW(r.rD(),i,e);o&&r.Lmt()&&this._f.fO()}}}},mWt(t,s){t&&t.VB(s)},gWt(t){this._f.eO().E5(+t)},yWt(t){this._f.eO().D5(Va.Pr(+t))},SWt(t,s){const i=this._f.eO(),e=i.C5(),h=e.ort(s);if(h){const r=1===t;h.Lmt()!==r&&(h.s3t(r),i.mW(),this._f.fO())}},wWt(t,s,i){const e=this._f.eO(),h=e.C5(),r=h.ort(t);if(r){s=Math.floor(s);const n=r.HG().JG(s);if(n){"color"===n?(Ja.Ba(i),i=Ja):"percent"===n&&(i/=100);const o=h.yW(r.rD(),s,i);o&&r.Lmt()&&this._f.fO()}}},bWt(t,s){const i=this._f.eO();i.eB(t/100,s/100)},MWt(t){const s=this._f.eO();0===t?s.nB():s.oB()},vWt(t){const s=this._f.eO();s.k5(t)},xWt(t){const s=this._f.eO();s.L5(t)},GWt(t,s){const i=this._f.eO();i.k5(t),i.L5(s)},TWt(t){if(t){const s=t.yvt();if(s){const i=s.rO();if(i){const e=this._f.eO();e.k5(i.qM()),e.L5(i.$M())}}}},X5(t,s,i){const e=this._f.eO();try{e.X5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},K5(t,s,i){if(t){const e=this._f.eO();try{e.K5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},Q5(t){if(t){const s=this._f.eO();s.Q5(t)}},sB(){this._f.eO().sB()},async _Wt(t){const s=this._f.Lk();if(s&&t&&!this._f.by()){const i=t.GJ()?t.Dgt():[t];await this.v4t(s,i)}},async IWt(t){await Va.VY.jY.Irt._Wt.call(this,this._f.TBt(t))},CWt(t){const s=this._f.Lk();if(s&&t){const i=t.GJ()?t.Dgt():[t];this.G4t(s,i)}},RWt(t){Va.VY.jY.Irt.CWt.call(this,this._f.TBt(t))},AWt(){const t=this._f.Lk();if(t){const s=t.nY();this.G4t(t,s)}},async PWt(t){const s=this._f.Lk();t&&s&&!this._f.by()&&await this.v4t(s,t.eY())},async EWt(t){const s=this._f.Lk(),i=this._f.Wk().P$(t);i&&s&&!this._f.by()&&await this.v4t(s,i.eY())},QD(t){const s=this.Xft.$D();if(s)switch(s.ZD()){case 1:"number"==typeof t&&s.QD(t);break;case 2:"string"==typeof t&&s.QD(t);break;case 3:s.QD(t)}},FWt(t,s,i){const e=this.O4t(t.toLowerCase(),!0),h=e.B4t,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Va.first(h.values())||e.L4t);if(n){const o=0!==n.XD(),a=0!==i.XD();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},DWt(t,s){const i=this.O4t(t.toLowerCase(),!0),e=(i.L4t&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Va.first(i.B4t.values())||i.L4t);if(e){const h=0!==e.XD(),r=0!==s.XD();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.L4t=s},kWt(t,s,i){const e=this._f,h=e.Ivt()?qa:null,r=(i=Math.floor(i),this.O4t(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.B4t.get(s.toLowerCase());if(!n){if(!r.L4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.L4t,i=0}if(!n.mc())return h;if(0!==n.XD())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.BD(),a=o.HD(),l=a.UD(),u=0<l.length,c=(u&&(n.qD()?o.TV(l):o.rpt(l)),[]),f=o.Qpt(a);if(f){const p=f.smt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].tht())}const d=n.smt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].h1t());return e.Ivt()?this.W4t(o,n,c,u,l):this.N4t(o,n,c,u,l)}}}{const x=self.Ws;x.VY.jY.Crt={OWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},L(t){return t.toString()},Jt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this._f.Ok()*t:this._f.Ok()*(s-t)+t},XSt(...t){const s=Math.floor(this._f.Ok()*t.length);return t[s]},LWt(t,...s){return"number"!=typeof t&&(t=0),s[t=x.Rr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},BWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},NWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(x.Pr(t))},cos(t){return Math.cos(x.Pr(t))},tan(t){return Math.tan(x.Pr(t))},asin(t){return x.Er(Math.asin(t))},acos(t){return x.Er(Math.acos(t))},atan(t){return x.Er(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Rr(t,s,i){return x.Rr(t,s,i)},At(t,s,i,e){return x.kr(t,s,i,e)},angle(t,s,i,e){return x.Er(x.Lr(t,s,i,e))},Ot(t,s,i){return x.Ot(t,s,i)},zr(t,s,i){return x.zr(t,s,i)},qr(t,s,i,e){return x.qr(t,s,i,e)},Xr(t,s,i,e,h){return x.Xr(t,s,i,e,h)},Yr(t,s,i){return x.Yr(t,s,i)},WWt(t,s){return x.Er(x.Br(x.Pr(t),x.Pr(s)))},jWt(t,s,i){return x.Er(x.jr(x.Pr(t),x.Pr(s),i))},VWt(t,s,i){return x.Er(x.Nr(x.Pr(t),x.Pr(s),x.Pr(i)))},UWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},HWt(t,s){return(t|=0)^1<<(0|s)},zWt(t,s){return(t|=0)&1<<(0|s)?1:0},JWt(){return"\n"},qWt(t){return"string"==typeof t?t.toUpperCase():""},XWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},YWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},$Wt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(x.me(s),"i")):-1},KWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(x.me(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(x.me(s),"gi"),i):"string"==typeof t?t:""},ZWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},QWt(t,s,i){const e=this.b4t(s,i);return t?t.search(e):-1},t8t(t,s,i,e){const h=this.b4t(s,i);return t?t.replace(h,e):""},s8t(t,s,i){const e=this.M4t(t.toString(),s,i);return e?e.length:0},i8t(t,s,i,e){e=Math.floor(e);const h=this.M4t(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},e8t(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},h8t(t){return encodeURIComponent(t)},r8t(t){return decodeURIComponent(t)},nk(){return this._f.lZ()},n8t(){return this._f.uZ()},timescale(){return this._f.pk()},o8t(){return(Date.now()-this._f.oNt())/1e3},a8t(){return Date.now()},time(){return this._f.ck()},tickcount(){return this._f.nst()},l8t(){return this._f.uNt()},fps(){return this._f.gk()},u8t(){return this._f.bk()},c8t(){return this._f.vk()},f8t(){return this._f.dL().ML()},d8t(){return this._f.dL().xL()},p8t(){return this._f.GD()},m8t(){return this._f._D()},g8t(){return this._f.GD()},y8t(){return this._f._D()},S8t(){return this._f.eO().O5()},w8t(){return this._f.eO().B5()},b8t(){return this._f.eO().Sf()},M8t(){return this._f.eO().F5()},v8t(){return x.Er(this._f.eO().GetAngle())},x8t(){return this._f.eO().Lm()},G8t(){return this._f.eO().qm()},T8t(){return 100*this._f.eO().$J()},_8t(){return 100*this._f.eO().KJ()},I8t(t){const s=this._f.eO().nO(t);return s?s.YJ().Ll():0},C8t(t){const s=this._f.eO().nO(t);return s?s.YJ().Bl():0},R8t(t){const s=this._f.eO().nO(t);return s?s.YJ().Nl():0},A8t(t){const s=this._f.eO().nO(t);return s?s.YJ().Wl():0},P8t(t){const s=this._f.eO().nO(t);return s?s.YJ().width():0},E8t(t){const s=this._f.eO().nO(t);return s?s.YJ().height():0},F8t(t){const s=this._f.eO().nO(t);if(s){const i=s.YJ();return(i.Ll()+i.Nl())/2}return 0},D8t(t){const s=this._f.eO().nO(t);if(s){const i=s.YJ();return(i.Bl()+i.Wl())/2}return 0},k8t(t,s,i){const e=this._f.eO().nO(t);return e?e.$B(s,i)[0]:0},O8t(t,s,i){const e=this._f.eO().nO(t);return e?e.$B(s,i)[1]:0},L8t(t,s,i){const e=this._f.eO().nO(t);return e?e.tN(s,i)[0]:0},B8t(t,s,i){const e=this._f.eO().nO(t);return e?e.tN(s,i)[1]:0},N8t(t,s,i,e){const h=this._f.eO(),r=h.nO(t),n=h.nO(s);if(!r||!n||r===n)return i;const[o,a]=r.tN(i,e);return n.$B(o,a)[0]},W8t(t,s,i,e){const h=this._f.eO(),r=h.nO(t),n=h.nO(s);if(!r||!n||r===n)return e;const[o,a]=r.tN(i,e);return n.$B(o,a)[1]},j8t(t){const s=this._f.eO().nO(t);return s?s.CB():0},V8t(t){const s=this._f.eO().nO(t);return s?x.Er(s.PB()):0},U8t(t){const s=this._f.eO().nO(t);return s?100*s.uP():0},H8t(t){const s=this._f.eO().nO(t);return s?s.AB():0},z8t(t){const s=this._f.eO().nO(t);return s?s.O5():0},J8t(t){const s=this._f.eO().nO(t);return s?s.B5():0},q8t(t){const s=this._f.eO().nO(t);return s?100*s.DB():0},X8t(t){const s=this._f.eO().nO(t);return s?100*s.OB():0},Y8t(t){const s=this._f.eO().nO(t);return s?s.ZM():0},$8t(t){const s=this._f.eO().nO(t);return s?s.rD():-1},K8t(){const t=this._f.dL();return t?t.sOt():""},Z8t(t){const s=this.adt;if(!s.hdt())return 0;if(t){const i=s.ndt(t);return i?i.rD():0}return s.idt().rD()},Q8t(){return this._f.TNt()},tjt(t,s,...i){const e=this.O4t(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.B4t.get(s.toLowerCase());if(!h){if(!e.L4t)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.L4t}const r=h.XD(),n=h.WD();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.mc())return n;const o=this._f,a=o.BD(),l=a.HD(),u=l.UD(),c=0<u.length,f=(c&&(h.qD()?a.TV(u):a.rpt(u)),h.smt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].h1t());const d=h.VD(),p=d.JD(d.UD(),h.qD(),r,n,...i);return c&&a.IV(u),p},sjt(){return this._f.lD().Fk()},ijt(){return this.LH()},renderer(){return this._f.Bkt()?"webgpu":"webgl"},ejt(){return this._f.Bkt()?this._f.Bkt().GetAdapterInfoString():this._f.Lkt().wE()},hjt(){let t=this._f.gM().Hb();return Math.round(100*t/1048576)/100},rjt(t,s,i){return x.hn(t,s,i)},njt(t,s,i){return x.nn(t/100,s/100,i/100)},ojt(t,s,i,e){return x.rn(t/100,s/100,i/100,e/100)},ajt(t,s,i){return x.nn(t/255,s/255,i/255)},ljt(t,s,i,e){return x.rn(t/255,s/255,i/255,e/255)},ujt(){return this._f.gD()},cjt(){return this._f.SD()},fjt(){return this._f.HD().JX().Sf()},djt(){return this._f.HD().Zgt()}}}{const Xa=self.Ws;Xa.VY.pjt=class extends Xa.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const Ya=self.Ws;Ya.VY.pjt.jIt=class extends Ya.aGt{constructor(t,s){super(t),this.n2="repeat",this.o2="repeat",s&&(this.n2=i(s[0]),this.o2=i(s[1]))}Gr(){super.Gr()}qxt(){this.kW().GO(this._f)}lY(t){return this.kW().lU(t,{$v:this._f.ID(),Xv:this.n2,Yv:this.o2})}mY(){this.kW().iC()}mjt(){return this.n2}gjt(){return this.o2}}}{const $a=self.Ws,Ka=self.Ks,Za=$a.vr($a.Rect),Qa=$a.vr($a.du),tl=$a.vr($a.Rect),sl=$a.vr($a.du),G=($a.VY.pjt.Instance=class extends $a.jGt{constructor(t,s){super(t),this.yjt=0,this.Sjt=0,this.wjt=1,this.bjt=1,this.Mjt=0,this.vjt=!1,this.xjt=0,this.Gjt=0,this.Tjt=0,this._jt=0,this.Ijt=0,this.Cjt=null,s&&(this.rO().yB(!!s[0]),this.yjt=s[4],this.Sjt=s[5],this.wjt=s[6],this.bjt=s[7],this.Mjt=$a.Pr(s[8]),this.vjt=!!s[9],this.xjt=s[10],this.Gjt=s[11],this.Tjt=s[12],this._jt=s[13],this.Ijt=s[14])}Gr(){this.Rjt(),super.Gr()}Rjt(){this.Cjt&&(this.Cjt.Gr(),this.Cjt=null)}Ajt(t,s,i){const e=this.YGt(),h=e.Lm(),r=e.qm(),n=this.yjt/h,o=this.Sjt/r,a=this.Mjt;tl.set(0,0,t/(h*this.wjt),s/(r*this.bjt)),tl.offset(-n,-o),0===a?i.Du(tl):i.ku(tl,-a)}Pjt(t,s=!0){if(this.vjt){const i=this.YGt();t.gw(),t.BP(i.Lm()*this.wjt,i.qm()*this.bjt,this.xjt,this.Gjt,this.Tjt,this._jt,this.Ijt)}else s&&t.lw()}Nv(t){const s=this.YGt(),i=s.Gx();if(null!==i){this.Pjt(t),t.mP(i);const e=s.Lm(),h=s.qm(),r=this.yjt/e,n=this.Sjt/h,o=this.rO();tl.set(0,0,o.Lm()/(e*this.wjt),o.qm()/(h*this.bjt)),tl.offset(-r,-n),o.V6()?this.Ejt(o,t):this.Fjt(o,t)}}Fjt(t,s){let i=t.L4();this._f.RD()&&(i=t.fEt(i)),0===this.Mjt?s.eb(i,tl):(sl.ku(tl,-this.Mjt),s.TP(i,sl))}Ejt(i,t){const e=i.AEt();if(i.EEt()){i.lEt(Za,Qa,!1);let t=Qa,s=(this._f.RD()&&(t=i.fEt(t)),tl);0!==this.Mjt&&(sl.ku(tl,-this.Mjt),s=sl),e.Bv(i.U6(),t,s),i.PEt(!1)}e.Nv(t)}YGt(){return this.Cjt||this.Wft.kW()}Yit(){return!0}Gx(){return this.YGt().Gx()}Djt(){this.rO().PEt(!0)}kjt(t){this.yjt!==t&&(this.yjt=t,this._f.fO(),this.Djt())}Ojt(){return this.yjt}Ljt(t){this.Sjt!==t&&(this.Sjt=t,this._f.fO(),this.Djt())}Bjt(){return this.Sjt}Njt(t){this.wjt!==t&&(this.wjt=t,this._f.fO(),this.Djt())}Wjt(){return this.wjt}jjt(t){this.bjt!==t&&(this.bjt=t,this._f.fO(),this.Djt())}Vjt(){return this.bjt}Ujt(t){this.Mjt!==t&&(this.Mjt=t,this._f.fO(),this.Djt())}Hjt(){return this.Mjt}zjt(t){this.vjt!==(t=!!t)&&(this.vjt=t,this._f.fO())}Jjt(){return this.vjt}qjt(t){this.xjt!==t&&(this.xjt=t,this.Jjt())&&this._f.fO()}Xjt(){return this.xjt}Yjt(t){this.Gjt!==t&&(this.Gjt=t,this.Jjt())&&this._f.fO()}$jt(){return this.Gjt}Kjt(t){this.Tjt!==t&&(this.Tjt=t,this.Jjt())&&this._f.fO()}Zjt(){return this.Tjt}Qjt(t){this._jt!==t&&(this._jt=t,this.Jjt())&&this._f.fO()}tVt(){return this._jt}sVt(t){this.Ijt!==t&&(this.Ijt=t,this.Jjt())&&this._f.fO()}iVt(){return this.Ijt}av(){const t={};return 0!==this.yjt&&(t.iox=this.yjt),0!==this.Sjt&&(t.ioy=this.Sjt),1!==this.wjt&&(t.isx=this.wjt),1!==this.bjt&&(t.isy=this.bjt),0!==this.Mjt&&(t.ia=this.Mjt),this.vjt&&(t.tr=!0),1!==this.xjt&&(t.trx=this.xjt),1!==this.Gjt&&(t.try=this.Gjt),1!==this.Tjt&&(t.tra=this.Tjt),.1!==this._jt&&(t.trbmx=this._jt),.1!==this.Ijt&&(t.trbmy=this.Ijt),t}lv(t){this.yjt=t.iox||0,this.Sjt=t.ioy||0,this.wjt=t.hasOwnProperty("isx")?t.isx:1,this.bjt=t.hasOwnProperty("isy")?t.isy:1,this.Mjt=t.ia||0,this.vjt=!!t.tr,this.xjt=t.hasOwnProperty("trx")?t.trx:1,this.Gjt=t.hasOwnProperty("try")?t.try:1,this.Tjt=t.hasOwnProperty("tra")?t.tra:1,this._jt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.Ijt=t.hasOwnProperty("trbmy")?t.trbmy:.1}OGt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.Ojt(),eVt:t=>this.kjt(t)},{name:t+".image-offset-y.name",value:this.Bjt(),eVt:t=>this.Ljt(t)},{name:t+".image-scale-x.name",value:100*this.Wjt(),eVt:t=>this.Njt(t/100)},{name:t+".image-scale-y.name",value:100*this.Vjt(),eVt:t=>this.jjt(t/100)},{name:t+".image-angle.name",value:$a.Er(this.Hjt()),eVt:t=>this.Ujt($a.Pr(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.Jjt(),eVt:t=>this.zjt(t)},{name:t+".x-random.name",value:100*this.Xjt(),eVt:t=>this.qjt(t/100)},{name:t+".y-random.name",value:100*this.$jt(),eVt:t=>this.Yjt(t/100)},{name:t+".angle-random.name",value:100*this.Zjt(),eVt:t=>this.Kjt(t/100)},{name:t+".blend-margin-x.name",value:100*this.tVt(),eVt:t=>this.Qjt(t/100)},{name:t+".blend-margin-y.name",value:100*this.iVt(),eVt:t=>this.sVt(t/100)}]}]}cnt(t){switch(t){case 4:return this.Ojt();case 5:return this.Bjt();case 6:return this.Wjt();case 7:return this.Vjt();case 8:return this.Hjt();case 9:return this.Jjt();case 10:return this.Xjt();case 11:return this.$jt();case 12:return this.Zjt();case 13:return this.tVt();case 14:return this.iVt()}}ynt(t,s){switch(t){case 4:this.kjt(s);break;case 5:this.Ljt(s);break;case 6:this.Njt(s);break;case 7:this.jjt(s);break;case 8:this.Ujt(s);break;case 9:this.zjt(!!s);break;case 10:this.qjt(s);break;case 11:this.Yjt(s);break;case 12:this.Kjt(s);break;case 13:this.Qjt(s);break;case 14:this.sVt(s)}}Xxt(){return self.hVt}},new WeakMap);self.hVt=class extends self.z6{constructor(){super(),G.set(this,self.oN.fN().K6())}set rVt(t){Ka.Te(t),G.get(this).kjt(t)}get rVt(){return G.get(this).Ojt()}set nVt(t){Ka.Te(t),G.get(this).Ljt(t)}get nVt(){return G.get(this).Bjt()}oVt(t,s){Ka.Te(t),Ka.Te(s);const i=G.get(this);i.kjt(t),i.Ljt(s)}aVt(){const t=G.get(this);return[t.Ojt(),t.Bjt()]}set lVt(t){Ka.Te(t),G.get(this).Njt(t)}get lVt(){return G.get(this).Wjt()}set uVt(t){Ka.Te(t),G.get(this).jjt(t)}get uVt(){return G.get(this).Vjt()}cVt(t,s){Ka.Te(t),Ka.Te(s);const i=G.get(this);i.Njt(t),i.jjt(s)}fVt(){const t=G.get(this);return[t.Wjt(),t.Vjt()]}set dVt(t){Ka.Te(t),G.get(this).Ujt(t)}get dVt(){return G.get(this).Hjt()}set pVt(t){Ka.Te(t),G.get(this).Ujt($a.Pr(t))}get pVt(){return $a.Er(G.get(this).Hjt())}get imageWidth(){return G.get(this).YGt().Lm()}get imageHeight(){return G.get(this).YGt().qm()}mVt(){const t=G.get(this).YGt();return[t.Lm(),t.qm()]}set gVt(t){G.get(this).zjt(!!t)}get gVt(){return G.get(this).Jjt()}set yVt(t){Ka.Te(t),G.get(this).qjt(t)}get yVt(){return G.get(this).Xjt()}set SVt(t){Ka.Te(t),G.get(this).Yjt(t)}get SVt(){return G.get(this).$jt()}wVt(t,s){Ka.Te(t),Ka.Te(s);const i=G.get(this);i.qjt(t),i.Yjt(s)}bVt(){const t=G.get(this);return[t.Xjt(),t.$jt()]}set MVt(t){Ka.Te(t),G.get(this).Kjt(t)}get MVt(){return G.get(this).Zjt()}set vVt(t){Ka.Te(t),G.get(this).Qjt(t)}get vVt(){return G.get(this).tVt()}set xVt(t){Ka.Te(t),G.get(this).sVt(t)}get xVt(){return G.get(this).iVt()}GVt(t,s){Ka.Te(t),Ka.Te(s);const i=G.get(this);i.Qjt(t),i.sVt(s)}TVt(){const t=G.get(this);return[t.tVt(),t.iVt()]}async _Vt(t){Ka.oh(t,Blob);const s=G.get(this),i=s.TO(),e=$a.vr($a.h_t);e.S_t(i,t),await e.lU(i.gM(),{$v:i.ID(),Xv:s.GMt().mjt(),Yv:s.GMt().gjt()}),s.Tr()?e.Gr():(s.Rjt(),s.Cjt=e,i.fO())}}}{const il=self.Ws;il.VY.pjt.WY={IVt(){return!0},CVt(){return!0},RVt(){return this.Jjt()}}}{const el=self.Ws;el.VY.pjt.Irt={AVt(t){this.kjt(t)},PVt(t){this.Ljt(t)},EVt(t){this.Njt(t/100)},FVt(t){this.jjt(t/100)},DVt(t){this.Ujt(el.Pr(t))},kVt(t){this.zjt(t)},OVt(t,s){this.qjt(t/100),this.Yjt(s/100)},LVt(t){this.Kjt(t/100)},BVt(t,s){this.Qjt(t/100),this.sVt(s/100)},NVt(t){this.rO().OM(t),this._f.fO()},async WVt(t,s){if(!this.Cjt||this.Cjt.AH()!==t){const i=this._f,e=el.vr(el.h_t);try{if(await e.y_t(i,t),!e.h7())throw new Error("image failed to load");if(this.Tr())return e.Gr(),null;const h=await e.lU(i.gM(),{$v:i.ID(),Xv:this.GMt().mjt(),Yv:this.GMt().gjt()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Tr()||this.YN(el.VY.pjt.WY.CVt))}this.Tr()?e.Gr():(this.Rjt(),this.Cjt=e,i.fO(),await this.KN(el.VY.pjt.WY.IVt))}}}}{const hl=self.Ws;hl.VY.pjt.Crt={jVt(){return this.YGt().Lm()},VVt(){return this.YGt().qm()},UVt(){return this.yjt},HVt(){return this.Sjt},zVt(){return 100*this.wjt},JVt(){return 100*this.bjt},qVt(){return hl.Er(this.Mjt)},XVt(){return 100*this.Xjt()},YVt(){return 100*this.$jt()},$Vt(){return 100*this.Zjt()},KVt(){return 100*this.tVt()},ZVt(){return 100*this.iVt()}}}{const rl=self.Ws;rl.VY.urt=class extends rl.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const nl=self.Ws,ol=self.Ks,al=[],ll=(nl.VY.urt.jIt=class extends nl.aGt{constructor(t){super(t),this.DIt=t.wCt()}Gr(){nl.$n(this.DIt),super.Gr()}qxt(){for(const t of this.DIt)t.k_t(this._f)}lY(s){const i={$v:this._f.ID()};return Promise.all(this.DIt.map(t=>t.O_t(s,i)))}mY(){for(const t of this.DIt)t.L_t()}fY(){this.QVt()}QVt(){for(const t of this.Wft.p5())t.K6().tUt()}Wbt(t){nl.VY.urt.sxt(this,t)}TMt(t){al.push({fGt:null,sUt:!1,instances:[]})}iUt(t,s,i){const e=al.at(-1);e.fGt=t,e.sUt=i,e.instances.push(s)}_Mt(t){const s=al.pop(),i=s.fGt,e=s.sUt;if(i){const h=new Map;for(const r of s.instances)r.RRt(h,i,e);for(const[n,o]of h)n.g5().u0t(o)}}eUt(t){const s=this.lN().GCt(t),i=this.TO(),e=s.B_t(0);return e.kW().lU(i.gM(),{$v:i.ID()}).then(()=>this.QVt()),s}hUt(t){for(const s of this.Wft.p5())s.K6().rUt(t);this.lN().TCt(t)}nUt(t,s){const i=this.Wft.vCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.V_t(s);e<0&&(e+=i._W()+1);const h=nl.E_t.D_t(this.TO()),r=(i.N_t(h,e),this.TO());h.kW().lU(r.gM(),{$v:r.ID()}).then(()=>this.QVt());for(const n of this.Wft.p5())n.K6().oUt();return h}aUt(t,s){const i=this.Wft.vCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i._W())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.V_t(s);e<0&&(e+=i._W()),i.W_t(e);for(const h of this.Wft.p5())h.K6().oUt()}Xxt(){return self.lUt}},new WeakMap);self.lUt=class extends self.e5{constructor(t){super(t),ll.set(this,t.GMt())}uUt(t){ol.Re(t);const s=ll.get(this).lN().vCt(t);return s?s.U_t():null}cUt(){return ll.get(this).lN().MCt().map(t=>t.U_t())}fUt(t){return ol.Re(t),ll.get(this).eUt(t).U_t()}dUt(t){ol.Re(t),ll.get(this).hUt(t)}pUt(t,s){if(ol.Re(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return ll.get(this).nUt(t,s).AW()}mUt(t,s){if(ol.Re(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");ll.get(this).aUt(t,s)}}}{const T=self.Ws,ul=self.Ks,cl=T.vr(T.Rect),fl=T.vr(T.du),dl=T.vr(T.dl),pl=(T.VY.urt.Instance=class extends T.jGt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.gUt=this.Wft.vCt(e)||this.Wft.wCt()[0],this.yUt=T.Rr(h,0,this.gUt._W()-1),this.SUt=this.gUt.B_t(this.yUt);const n=this.SUt.kW(),o=(this.wUt=n.Gx(),this.bUt=n.cR(),this.MUt=n.QGt(),this.zGt(),t.IRt(2,!0),t.IRt(1,0<=this.gUt.wW()),this.vUt=Math.abs(this.gUt.wW()),this.xUt=this.gUt.xW(),this.GUt=T.vr(T.W0),this.TUt=0,this._Ut=0,this.IUt="",this.CUt=-1,this.RUt="",this.AUt=0,this.rO());this.PUt=o.L4(),o.yB(i),o.t6(r),o.Hnt(this.SUt.BW()),o.Jnt(this.SUt.WW()),o.wEt(this.SUt.$W()),o._4(),1===this.Wft.bCt()&&1===this.Wft.wCt()[0]._W()||0===this.vUt||this.EGt()}Gr(){this.gUt=null,this.SUt=null,this.wUt=null,this.GUt=null,super.Gr()}YGt(){return this.SUt.kW()}Yit(){return!0}u7(){this.wUt=null}XGt(){this.tUt()}Nv(t){const s=this.wUt;if(null!==s){t.mP(s);const i=this.rO();i.V6()?this.Ejt(i,t):this.Fjt(i,t)}}Fjt(t,s){let i=this.PUt;this._f.RD()&&(i=t.fEt(i)),s.TP(i,this.MUt)}Ejt(s,t){const i=s.AEt();if(s.EEt()){s.lEt(cl,fl,!1);let t=fl;this._f.RD()&&(t=s.fEt(t)),i.Bv(s.U6(),t,this.MUt),s.PEt(!1)}i.Nv(t)}EUt(){return this.GUt.ni()}FUt(){return this.Ci.CRt(2)}DUt(t){this.Ci.IRt(2,t)}kUt(){return this.Ci.CRt(1)}OUt(t){this.Ci.IRt(1,t)}LUt(){return this.Ci.CRt(4)}BUt(t){this.Ci.IRt(4,t)}cZ(){this.RUt&&this.NUt(),0<=this.CUt&&this.WUt();const t=this.vUt;if(this.FUt()&&0!==t){const s=this._f.ak(this.Ci),i=(this.GUt.Ac(s),this.EUt()),e=this.SUt,h=e.OW()/t;if(!(i<this.TUt+h)){const r=this.gUt,n=this.xUt,o=r._W(),a=r.MW(),l=r.bW(),u=r.TW(),c=(this.kUt()?this.yUt++:this.yUt--,this.TUt+=h,this.yUt>=o&&(u?(this.OUt(!1),this.yUt=o-2):!l&&(this._Ut++,this._Ut>=a)?this.jUt(!1):this.yUt=n),this.yUt<0&&(u?(this.yUt=1,this.OUt(!0),l||(this._Ut++,this._Ut>=a&&this.jUt(!0))):!l&&(this._Ut++,this._Ut>=a)?this.jUt(!0):this.yUt=n),this.yUt=T.Rr(this.yUt,0,o-1),r.B_t(this.yUt));i>this.TUt+c.OW()/t&&(this.TUt=i),this.VUt(e,c)}}else this.gGt()}jUt(t){this.yUt=t?0:this.gUt._W()-1,this.DUt(!1),this.IUt=this.gUt.Sf(),this.BUt(!0),this.cGt("animationend",!1,{animationName:this.IUt}),this.YN(T.VY.urt.WY.UUt),this.YN(T.VY.urt.WY.HUt),this.BUt(!1),this._Ut=0}VUt(i,e,t){if(i!==e){const s=this.rO(),h=i.kW(),r=e.kW(),n=h.Lm(),o=h.qm(),a=r.Lm(),l=r.qm(),u=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,l):(n!==a&&s.Hm(s.Lm()*(a/n)),o!==l&&s.Bm(s.qm()*(l/o))),s.Hnt(e.BW()),s.Jnt(e.WW()),s.wEt(e.$W()),s._4(),this.SUt=e,this.wUt=r.Gx(),this.bUt=r.cR(),this.MUt=r.QGt(),this.G8().hrt());for(let t=0,s=u.length;t<s;++t)u[t].NTt(i,e);this.cGt("framechange",!1,{animationName:this.gUt.Sf(),zUt:this.yUt}),this.YN(T.VY.urt.WY.JUt),this._f.fO()}}qUt(t){this.DUt(!0),this.TUt=this.EUt(),1===t&&0!==this.yUt&&(this.CUt=0,this.LUt()||this.WUt()),this.EGt()}XUt(t,s,i){this.RUt=t,this.AUt=s,this.EGt(),!i&&this.LUt()||this.NUt()}YUt(){return this.gUt}$Ut(){return this.RUt||this.gUt.Sf()}rUt(t){T.Gh(t,this.$Ut())&&this.XUt(this.Wft._Ct().Sf(),1,!0)}KUt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Wft.vCt(this.$Ut());if(!s)return;if(-1===(t=s.j_t(t)))return}isFinite(t)&&(this.CUt=t,this.LUt()||this.WUt())}oUt(){if(!this.RUt&&-1===this.CUt){const t=this.SUt,s=this.gUt.B_t(T.Rr(this.yUt,0,this.gUt._W()-1));t!==s&&this.VUt(t,s),1<this.gUt._W()&&0<this.vUt&&this.EGt()}}ZUt(){return this.yUt}QUt(){return this.SUt.t8()}tHt(t){this.vUt=Math.abs(t),this.OUt(0<=t),0<this.vUt&&this.EGt()}sHt(){return this.kUt()?this.vUt:-this.vUt}iHt(t){"string"==typeof t&&-1===(t=this.gUt.j_t(t))||(t=T.Rr(Math.floor(t),0,this.gUt._W()-1),this.xUt=t)}eHt(){return this.xUt}NUt(t){const s=this.SUt,i=this.Wft.vCt(this.RUt);if(this.RUt="",i&&(i!==this.gUt||!this.FUt())){this.gUt=i,this.OUt(0<=i.wW()),this.vUt=Math.abs(i.wW()),this.xUt=i.xW(),this.yUt=T.Rr(this.yUt,0,this.gUt._W()-1),1===this.AUt&&(this.yUt=0),this.DUt(!0),this.TUt=this.EUt();const e=this.gUt.B_t(this.yUt);this.VUt(s,e,t)}}WUt(t){const s=this.SUt,i=this.yUt;if(this.yUt=T.Rr(Math.floor(this.CUt),0,this.gUt._W()-1),this.CUt=-1,t||i!==this.yUt){const e=this.gUt.B_t(this.yUt);this.VUt(s,e),this.TUt=this.EUt()}}tUt(){const t=this.SUt.kW();this.wUt=t.Gx(),this.bUt=t.cR(),this.MUt=t.QGt(),this.rO().PEt(!0)}Gx(){return this.wUt}cR(){return this.bUt}QGt(){return this.MUt}UW(){return this.SUt.UW()}WMt(t){let s=this.SUt,i=this.rO(),e=null;if("string"==typeof t)e=s.XW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.qW(t-1)}let h=i.E4();if(!e)return[i.qM(),i.$M(),h];if(dl.I(e.tIt()),i.V6()){const[r,n,o]=i.U6().zv(dl.Sl(),dl.bl());dl.set(r,n),h+=o}return dl.offset(-s.BW(),-s.WW()),dl.scale(i.Lm(),i.qm()),dl.rotate(i.GetAngle()),dl.offset(i.qM(),i.$M()),[dl.Sl(),dl.bl(),h]}hHt(){return this.rO().GEt().Qu()}rHt(t){t=Math.floor(t);const s=this.rO(),i=s.GEt(),e=i.Qu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Zu();return[h[2*t+0]+s.qM(),h[2*t+1]+s.$M()]}OGt(){const s=T.VY.urt.Irt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.gUt.Sf(),eVt:t=>this.BGt(s.nHt,t,0)},{name:t+".current-frame",value:this.yUt,eVt:t=>this.BGt(s.oHt,t)},{name:t+".is-playing",value:this.FUt(),eVt:t=>t?this.BGt(s.aHt,0):this.BGt(s.lHt)},{name:t+".speed",value:this.vUt,eVt:t=>this.BGt(s.uHt,t)},{name:t+".repeats",value:this._Ut,eVt:t=>this._Ut=t}]}]}av(){const t={a:this.gUt.EJ()},s=(0!==this.TUt&&(t.fs=this.TUt),this.EUt()),i=(0!==s&&(t.at=s),0!==this.yUt&&(t.f=this.yUt),0!==this.vUt&&(t.cas=this.vUt),1!==this._Ut&&(t.ar=this._Ut),0!==this.xUt&&(t.rt=this.xUt),this.FUt()||(t.ap=this.FUt()),this.kUt()||(t.af=this.kUt()),this.rO());return i.Q4()&&(t.ce=i.Q4()),t}lv(t){const s=this.lN().xCt(t.a),i=(s&&(this.gUt=s),this.TUt=t.hasOwnProperty("fs")?t.fs:0,this.GUt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.yUt=T.Rr(i,0,this.gUt._W()-1),this.vUt=t.hasOwnProperty("cas")?t.cas:0,this._Ut=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.xUt=T.Rr(e,0,this.gUt._W()-1),this.DUt(!t.hasOwnProperty("ap")||!!t.ap),this.OUt(!t.hasOwnProperty("af")||!!t.af),this.gUt.B_t(this.yUt)),r=(this.SUt=h,this.tUt(),this.rO());r.Hnt(h.BW()),r.Jnt(h.WW()),r.wEt(h.$W()),r.t6(!!t.ce),this.FUt()&&this.EGt()}cnt(t){const s=this.rO();switch(t){case 3:return s.Q4();case 2:return T.Rr(this.yUt,0,this.gUt._W()-1);case 1:return this.gUt.Sf()}}ynt(t,s,i){const e=this.rO();switch(t){case 3:e.t6(!!s);break;case 2:{this.DUt(!1);const h=this.gUt._W()-1,r=s=T.Rr(s,0,h),n=this.gUt.B_t(this.yUt),o=this.gUt.B_t(r);this.VUt(n,o,i),this.yUt=T.Rr(r,0,h);break}case 1:{this.RUt=s,this.NUt(i);const a=this.gUt._W();1<a&&0<this.gUt.wW()?this.EGt():this.gGt();break}}}Xxt(){return self.cHt}},new WeakMap),ml=new Map([["current-frame",0],["beginning",1]]);self.cHt=class extends self.z6{constructor(){super(),pl.set(this,self.oN.fN().K6())}VW(){return pl.get(this).UW()}HW(t){return this.zW(t)[0]}JW(t){return this.zW(t)[1]}fHt(t){return this.zW(t)[2]}zW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return pl.get(this).WMt(t)}YW(){return pl.get(this).hHt()}KW(t){return ul.Te(t),pl.get(this).rHt(t)[0]}QW(t){return ul.Te(t),pl.get(this).rHt(t)[1]}ZW(t){return ul.Te(t),pl.get(this).rHt(t)}dHt(){pl.get(this).DUt(!1)}pHt(t="current-frame"){ul.Re(t);const s=ml.get(t);if(void 0===s)throw new Error("invalid mode");pl.get(this).qUt(s)}mHt(t,s="beginning"){ul.Re(t),ul.Re(s);const i=ml.get(s);if(void 0===i)throw new Error("invalid mode");const e=pl.get(this);if(!e.lN().vCt(t))throw new Error(`animation name "${t}" does not exist`);e.XUt(t,i)}uUt(t){ul.Re(t);const s=pl.get(this).lN().vCt(t);return s?s.U_t():null}get animation(){return pl.get(this).YUt().U_t()}get animationName(){return pl.get(this).$Ut()}set zUt(t){ul.Te(t),pl.get(this).KUt(t)}get zUt(){return pl.get(this).ZUt()}set gHt(t){ul.Re(t),pl.get(this).KUt(t)}get gHt(){return pl.get(this).QUt()}set yHt(t){ul.Te(t),pl.get(this).tHt(t)}get yHt(){return pl.get(this).sHt()}set SHt(t){ul.Te(t),pl.get(this).iHt(t)}get SHt(){return pl.get(this).eHt()}get imageWidth(){return pl.get(this).YGt().Lm()}get imageHeight(){return pl.get(this).YGt().qm()}mVt(){const t=pl.get(this).YGt();return[t.Lm(),t.qm()]}async wHt(t){ul.oh(t,Blob);const s=pl.get(this),i=s.TO(),e=s.YGt(),h=T.vr(T.h_t);if(h.S_t(i,t),await h.lU(i.gM(),{$v:i.ID()}),s.Tr())h.Gr();else{e.w_t(h);const r=s.GMt();r.QVt(),r.lN().r0().dispatchEvent(new T.Event("animationframeimagechange")),i.fO()}}bHt(t,s){ul.Re(s),pl.get(this).rO().oEt(!!t,s)}}}{const gl=self.Ws;gl.VY.urt.WY={MHt(t){return gl.Gh(this.$Ut(),t)},vHt(t,s){return gl.compare(this.yUt,t,s)},xHt(t,s){if("string"!=typeof s)return!1;const i=this.SUt.t8();return gl.compare(i.toLowerCase(),t,s.toLowerCase())},GHt(t,s){return gl.compare(this.sHt(),t,s)},HUt(t){return gl.Gh(this.IUt,t)},UUt(){return!0},JUt(){return!0},THt(){return this.rO().Lm()<0},_Ht(){return this.rO().qm()<0},IVt(){return!0},CVt(){return!0},Q4(){return this.rO().Q4()}}}{const yl=self.Ws;yl.VY.urt.Irt={IHt(t,s,i,e,h){if(t&&s){const[r,n]=this.WMt(i),o=this._f.b5(t,s,r,n,e,h);if(o){if(e&&s.M5(o),t.r5().NL()){const l=o.rO();l.D5(this.rO().GetAngle()),l._4()}const a=this._f.BD();a.v5(!0),o.x5(),a.v5(!1),t!==this._f.a1t().lN()&&this.mGt.iUt(t,o,e)}}},lHt(){this.DUt(!1)},aHt(t){this.qUt(t)},nHt(t,s){this.XUt(t,s)},oHt(t){this.KUt(t)},uHt(t){this.tHt(t)},CHt(t){this.iHt(t)},RHt(s,t){try{0===s?this.GMt().eUt(t):this.GMt().hUt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},AHt(s,t,i){try{0===s?this.GMt().nUt(t,i):this.GMt().aUt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},PHt(t){const s=this.rO(),i=s.Lm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Hm(e),s._4())},EHt(t){const s=this.rO(),i=s.qm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Bm(e),s._4())},E5(t){const s=this.SUt,i=s.kW(),e=this.rO(),h=e.Lm()<0?-1:1,r=e.qm()<0?-1:1,n=i.Lm()*t*h,o=i.qm()*t*r;e.Lm()===n&&e.qm()===o||(e.DC(n,o),e._4())},async WVt(t,s,i){const e=this.SUt,h=e.kW(),r=this.rO(),n=this._f,o=this.mGt;if(h.AH()===t)0===s&&(r.DC(h.Lm(),h.qm()),r._4()),this.YN(yl.VY.urt.WY.IVt);else{const a=yl.vr(yl.h_t);try{if(await a.y_t(n,t),!a.h7())throw new Error("image failed to load");if(this.Tr())return void a.Gr();await a.lU(n.gM(),{$v:n.ID()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.Tr()||this.YN(yl.VY.urt.WY.CVt))}this.Tr()?a.Gr():(h.w_t(a),o.QVt(),o.lN().r0().dispatchEvent(new yl.Event("animationframeimagechange")),n.fO(),0===s&&(r.DC(h.Lm(),h.qm()),r._4()),await this.KN(yl.VY.urt.WY.IVt))}},FHt(t){this.rO().t6(t)},oEt(t,s){this.rO().oEt(0===t,s)},NVt(t){this.rO().OM(t),this._f.fO()}}}{const Sl=self.Ws;Sl.VY.urt.Crt={DHt(){return this.ZUt()},kHt(){return this.QUt()},OHt(){return this.gUt._W()},LHt(){return this.gUt.Sf()},BHt(){return this.sHt()},NHt(){return this.gUt.wW()},WHt(t){return this.WMt(t)[0]},jHt(t){return this.WMt(t)[1]},VHt(t){return this.WMt(t)[2]},UHt(){return this.UW()},jVt(){return this.YGt().Lm()},VVt(){return this.YGt().qm()},HHt(t){return this.rHt(t)[0]},zHt(t){return this.rHt(t)[1]},JHt(){return this.hHt()}}}{const wl=self.Ws;wl.VY.qHt=class extends wl.Gxt{constructor(t){super(t)}Gr(){super.Gr()}},wl.VY.qHt.XHt=-2147483648,wl.VY.qHt.YHt=1073741824,wl.VY.qHt.$Ht=536870912,wl.VY.qHt.KHt=3758096384,wl.VY.qHt.ZHt=536870911}{const bl=self.Ws,Ml=bl.VY.qHt.XHt,vl=bl.VY.qHt.YHt,xl=bl.VY.qHt.$Ht,Gl=bl.VY.qHt.ZHt;bl.VY.qHt.jIt=class extends bl.aGt{constructor(t){super(t),this.QHt=[],this.t7t=!1,this.s7t=0,this.i7t=[],this.e7t=null}Gr(){this.e7t.clear(),this.e7t=null,super.Gr()}qxt(){this.kW().GO(this._f)}lY(t){return this.kW().lU(t,{$v:this._f.ID()})}mY(){this.kW().iC()}fY(){for(const t of this.lN().p5())t.K6().h7t()}uGt(t,s,i){this.s7t=s;for(const e of t)if(e){const h=e[0],r=!!e[1];this.QHt.push({fPt:h,use:r,r7t:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.QHt.push(null);for(const n of i){const o=n[0],a=n[1],l=n[2];this.i7t.push({name:o,type:a,n7t:l})}}o7t(t,s){this.t7t=!1,this.a7t(t,s)}a7t(i,e){if(!this.t7t){this.t7t=!0;for(let t=0,s=this.QHt.length;t<s;++t)this.QHt[t]&&(this.l7t(t,i,e,!1,!1,!1),this.l7t(t,i,e,!1,!1,!0),this.l7t(t,i,e,!1,!0,!1),this.l7t(t,i,e,!1,!0,!0),this.l7t(t,i,e,!0,!1,!1),this.l7t(t,i,e,!0,!1,!0),this.l7t(t,i,e,!0,!0,!1),this.l7t(t,i,e,!0,!0,!0))}}l7t(t,s,i,e,h,r){if(!(t<0||t>=this.QHt.length)){const n=this.QHt[t];if(n){const o=bl.vr(bl.qu,n.fPt,n.use);o.transform(s,i,0),r&&o.Hu(),e&&o.ju(s/2),h&&o.Uu(i/2),n.r7t[e?1:0][h?1:0][r?1:0]=null,n.r7t[e?1:0][h?1:0][r?1:0]=o}}}u7t(t){if(-1===t)return null;const s=t&Gl;if(s<0||s>=this.QHt.length)return null;const i=this.QHt[s];if(!i)return null;const e=t&Ml?1:0,h=t&vl?1:0,r=t&xl?1:0;return i.r7t[e][h][r]}c7t(t){return!t||t.mc()}f7t(){return this.s7t}d7t(s){this.e7t||(this.e7t=new Map);const t=this.e7t.get(s);if("number"==typeof t&&0<=t)return this.i7t[t];for(let t=0;t<this.i7t.length;t++)if(this.i7t[t].name===s)return this.e7t.set(s,t),this.i7t[t]}}}{let s=function(t){const e=[],i=t.split(",");for(let t=0,s=i.length;t<s;++t){const h=i[t],r=h.indexOf("x");if(-1<r){let t=parseInt(h.substring(0,r),10),s=h.substring(r+1),i=parseInt(s,10);for(s.includes("h")&&(i|=Il),s.includes("v")&&(i|=Cl),s.includes("d")&&(i|=Rl);0<t;--t)e.push(i)}else{let t=parseInt(h,10);h.includes("h")&&(t|=Il),h.includes("v")&&(t|=Cl),h.includes("d")&&(t|=Rl),e.push(t)}}return e};s;const Tl=self.Ws,_l=self.Ks,Il=Tl.VY.qHt.XHt,Cl=Tl.VY.qHt.YHt,Rl=Tl.VY.qHt.$Ht,Al=Tl.VY.qHt.KHt,Pl=Tl.VY.qHt.ZHt,El=Tl.vr(Tl.Rect),Fl=Tl.vr(Tl.Rect),Dl=Tl.vr(Tl.Rect),kl=(Tl.VY.qHt.Instance=class extends Tl.jGt{constructor(t,s){super(t);const i=this.rO();this.p7t=32,this.m7t=32,this.g7t=0,this.y7t=0,this.S7t=0,this.w7t=0,this.b7t=0,this.M7t=0,this.v7t=i.Lm(),this.x7t=i.qm(),this.C7=0,this.R7=0,this.G7t=[],this.T7t=new Map,this._7t=!0,this.Cjt=null,s&&(i.yB(s[0]),this.p7t=Math.max(s[1],1),this.m7t=Math.max(s[2],1),this.g7t=s[3],this.y7t=s[4],this.S7t=s[5],this.w7t=s[6]),this.C7=Math.ceil(this._f.GD()/this.p7t),this.R7=Math.ceil(this._f._D()/this.m7t),this.mGt.a7t(this.p7t,this.m7t),this.I7t=null}Gr(){this.Rjt(),Tl.$n(this.G7t),this.G7t=null,this.T7t.clear(),this.T7t=null,super.Gr()}Rjt(){this.Cjt&&(this.Cjt.Gr(),this.Cjt=null)}uGt(t,s,i){this.b7t=s,this.M7t=i,this.C7t(!0),this.R7t(t),this.A7t()}C7t(t){const[s,h]=this.P7t();if(!(s<=this.b7t&&h<=this.M7t)||t){let i=0,e=0;t?(i=Math.ceil(this.M7t/this.R7),e=Math.ceil(this.b7t/this.C7)):(i=this.G7t.length,e=Math.ceil(this.b7t/this.C7),h>this.M7t&&(this.M7t=h,i=Math.ceil(this.M7t/this.R7)),s>this.b7t&&(this.b7t=s,e=Math.ceil(this.b7t/this.C7)),this.E7t(),this.F7t(),this._f.fO());const r=this.G7t;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let s=0;s<i;++s){const n=r[s];for(let t=n.length;t<e;++t)n.push(Tl.vr(Tl.VY.qHt.D7t,this,t,s))}}}R7t(t){let i=s(t),e=0,h=this.b7t,r=this.C7,n=this.R7;for(let s=0,t=this.M7t;s<t;++s)for(let t=0;t<h;++t){const o=i[e++],a=this.k7t(t,s);a&&a.O7t(t%r,s%n,o)}}L7t(){let l="";if(!(this.b7t<=0||this.M7t<=0)){let i=1,e=this.B7t(0,0),[h,t]=this.P7t(),r=-1,n=!1,o=!1,a=!1;for(let s=0;s<t;++s)for(let t=0===s?1:0;t<h;++t){const u=this.B7t(t,s);u===e?++i:(a=-1===e?(r=-1,n=!1,o=!1):(r=e&Pl,n=0!=(e&Il),o=0!=(e&Cl),0!=(e&Rl)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d"),l+=",",i=1,e=u)}a=-1===e?(r=-1,n=!1,o=!1):(r=e&Pl,n=0!=(e&Il),o=0!=(e&Cl),0!=(e&Rl)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d")}return l}E7t(){const i=this.G7t;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].N7t()}this._7t=!0}A7t(){if(this._7t){this._7t=!1;const i=this.G7t;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].W7t()}}}j7t(){this._7t=!0,this.F7t(),this._f.fO()}F7t(){this.rO().IEt(!0)}k7t(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.R7);if(i>=this.G7t.length)return null;const e=this.G7t[i],h=Math.floor(t/this.C7);return h>=e.length?null:e[h]}V7t(t,s){if(t<0||s<0||s>=this.G7t.length)return null;const i=this.G7t[s];return t>=i.length?null:i[t]}B7t(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.b7t||s>=this.M7t)return-1;const i=this.k7t(t,s);return i?i.U7t()[s%this.R7][t%this.C7]:-1}O7t(t,s,i){if(t=Math.floor(t),s=Math.floor(s),!(t<0||s<0||t>=this.b7t||s>=this.M7t||-1!==i&&(i&Pl)>this.f7t())){const e=this.k7t(t,s);e&&e.O7t(t%this.C7,s%this.R7,i)}}f7t(){return this.mGt.f7t()}H7t(t){return Math.floor((t-this.rO().qM())/(this.C7*this.p7t))}z7t(t){return Math.floor((t-this.rO().$M())/(this.R7*this.m7t))}J7t(t){return Math.floor((t-this.rO().qM())/this.p7t)}q7t(t){return Math.floor((t-this.rO().$M())/this.m7t)}X7t(){return this.b7t}Y7t(){return this.M7t}$7t(){return Math.floor(this.rO().Lm()/this.K7t())}Z7t(){return Math.floor(this.rO().qm()/this.Q7t())}P7t(){const t=this.rO();return[Math.floor(t.Lm()/this.K7t()),Math.floor(t.qm()/this.Q7t())]}K7t(){return this.p7t}Q7t(){return this.m7t}tzt(){return this.C7}szt(){return this.R7}D3t(t,i){const e=this.H7t(t.Ll()),h=this.z7t(t.Bl()),r=this.H7t(t.Nl()),n=this.z7t(t.Wl());for(let s=e;s<=r;++s)for(let t=h;t<=n;++t){const o=this.V7t(s,t);o&&(o.W7t(),Tl.rr(i,o.izt()))}}iTt(t,s){const i=this.J7t(t),e=this.q7t(s),h=this.B7t(i,e);if(-1===h)return!1;const r=this.mGt.u7t(h);if(!r)return!0;if(!this.mGt.c7t(r))return!1;const n=this.rO(),o=Math.floor((t-n.qM())/this.p7t)*this.p7t+n.qM(),a=Math.floor((s-n.$M())/this.m7t)*this.m7t+n.$M();return t-=o,s-=a,r.lu(t,s)}ezt(i){const e=this.G7t;for(let t=0,s=e.length;t<s;++t){const h=e[t];for(let t=0,s=h.length;t<s;++t){const r=h[t];r.W7t(),Tl.rr(i,r.izt())}}}YGt(){return this.Cjt||this.Wft.kW()}hzt(t){const s=this.T7t,i=s.get(t);if(i)return i;const e=t&Pl,h=0!=(t&Il),r=0!=(t&Cl),n=0!=(t&Rl),o=this.YGt(),a=o.Lm(),l=this.p7t,u=this.g7t,c=this.S7t,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.b_t()+this.g7t+(this.p7t+this.S7t)*p,y=o.M_t()+this.y7t+(this.m7t+this.w7t)*m,S=(El.Rl(g,y,this.p7t,this.m7t),El.Ct(o.v_t(),o.x_t()),Tl.vr(Tl.du));return S.Du(El),n&&S.Hu(),h&&S.ju(),r&&S.Uu(),S.offset(p,m),s.set(t,S),S}h7t(){this.T7t.clear(),this.E7t()}Nv(h){const t=this.YGt(),s=t.Gx();if(s){El.I(t.cR()),El.offsetLeft(this.g7t/s.Lm()),El.offsetTop(this.y7t/s.qm()),h.mw(),h.LP(El,s.Lm(),s.qm(),this.p7t,this.m7t,this.S7t,this.w7t),h.mP(s);const r=this.rO(),n=r.nO();r.Lm()===this.v7t&&r.qm()===this.x7t||(this.F7t(),this.E7t(),this.v7t=r.Lm(),this.x7t=r.qm());let i=r.qM(),e=r.$M();this._f.RD()&&(i=Math.round(i),e=Math.round(e));const o=this.C7*this.p7t,a=this.R7*this.m7t,l=r.E4(),u=Fl;if(n.f9()){u.set(-1/0,-1/0,1/0,1/0);const c=Dl,f=n._q();for(const d of this.G7t)for(const p of d)p.rzt(c),f.Jy(c.Ll(),c.Bl(),l,c.Nl(),c.Wl(),l)&&(p.W7t(),p.Nv(h,u,i,e))}else{n.ZJ(l,u);const m=Math.floor((u.Ll()-i)/o),g=Math.floor((u.Nl()-i)/o),y=Math.floor((u.Bl()-e)/a),S=Math.floor((u.Wl()-e)/a);for(let s=m;s<=g;++s)for(let t=y;t<=S;++t){const w=this.V7t(s,t);w&&(w.W7t(),w.Nv(h,u,i,e))}}}}av(){this.C7t();const[t,s]=this.P7t();return{tw:this.p7t,th:this.m7t,tox:this.g7t,toy:this.y7t,tsx:this.S7t,tsy:this.w7t,w:t,h:s,d:this.L7t()}}lv(t){this.p7t=t.tw,this.m7t=t.th,this.g7t=t.tox,this.y7t=t.toy,this.S7t=t.tsx,this.w7t=t.tsy,this.b7t=t.w,this.M7t=t.h,this.C7t(!0),this.R7t(t.d),this.F7t(),this.E7t()}nzt(){this.C7t();const[t,s]=this.P7t();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.L7t()})}ozt(t){switch(t){case 0:return 0;case 1:return Il;case 2:return Cl;case 3:return Il|Rl;case 4:return Il|Cl;case 5:return Cl|Rl;case 6:return Il|Cl|Rl;case 7:return Rl;default:return 0}}cnt(t){switch(t){case 1:return this.p7t;case 2:return this.m7t;case 3:return this.g7t;case 4:return this.y7t;case 5:return this.S7t;case 6:return this.w7t}}ynt(t,s){switch(t){case 1:this.p7t!==s&&(this.p7t=Math.max(s,1),this.C7=Math.ceil(this._f.GD()/this.p7t),this.mGt.o7t(),this.azt());break;case 2:this.m7t!==s&&(this.m7t=Math.max(s,1),this.R7=Math.ceil(this._f._D()/this.m7t),this.mGt.o7t(),this.azt());break;case 3:this.g7t!==s&&(this.g7t=s,this.azt());break;case 4:this.y7t!==s&&(this.y7t=s,this.azt());break;case 5:this.S7t!==s&&(this.S7t=s,this.azt());break;case 6:this.w7t!==s&&(this.w7t=s,this.azt())}}azt(){this.T7t.clear(),this.E7t(),this.A7t()}Xxt(){return Ol}},new WeakMap),Ol=self.lzt=class extends self.z6{constructor(){super(),kl.set(this,self.oN.fN().K6())}get uzt(){return kl.get(this).X7t()}get czt(){return kl.get(this).Y7t()}fzt(){const t=kl.get(this);return[t.X7t(),t.Y7t()]}get dzt(){return kl.get(this).$7t()}get pzt(){return kl.get(this).Z7t()}mzt(){const t=kl.get(this);return[t.$7t(),t.Z7t()]}get gzt(){return kl.get(this).K7t()}get yzt(){return kl.get(this).Q7t()}Szt(){const t=kl.get(this);return[t.K7t(),t.Q7t()]}wzt(t,s){return _l.Te(t),_l.Te(s),kl.get(this).B7t(t,s)}bzt(t,s,i){_l.Te(t),_l.Te(s),_l.Te(i);const e=kl.get(this);e.C7t(),e.O7t(t,s,i)}async _Vt(t){_l.oh(t,Blob);const s=kl.get(this),i=s.TO(),e=Tl.vr(Tl.h_t);e.S_t(i,t),await e.lU(i.gM(),{$v:i.ID()}),s.Tr()?e.Gr():(s.Rjt(),s.Cjt=e,s.T7t.clear(),s.E7t(),i.fO())}};Ol.XHt=Il,Ol.YHt=Cl,Ol.$Ht=Rl,Ol.KHt=Al,Ol.ZHt=Pl}{const Ll=self.Ws,Bl=Ll.VY.qHt.KHt,Nl=Ll.VY.qHt.ZHt;Ll.VY.qHt.WY={Mzt(t,s,i,e){let h=this.B7t(t,s);return-1!==h&&(h&=Nl),Ll.compare(h,i,e)},vzt(t,s,i){let e=this.B7t(t,s);return(-1!==e?e&Bl:0)===this.ozt(i)},IVt(){return!0},CVt(){return!0},xzt(t){return this.I7t||(this.I7t=new Ll.VY.qHt.Gzt(this,this.mGt)),this.I7t.xzt(t)}}}{const Wl=self.Ws,jl=Wl.VY.qHt.ZHt;Wl.VY.qHt.Irt={Tzt(t,s){this.C7t(),this.O7t(t,s,-1)},_zt(t,s,i,e){this.C7t(),this.O7t(t,s,i&jl|this.ozt(e))},Izt(t,s,i){const e=this.B7t(t,s);-1!==e&&(this.C7t(),this.O7t(t,s,e&jl|this.ozt(i)))},Czt(t,s,i,e){const h=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),n=Math.floor(Math.min(t+i,this.b7t)),o=Math.floor(Math.min(s+e,this.M7t));for(let s=r;s<o;++s)for(let t=h;t<n;++t)this.O7t(t,s,-1)},Rzt(t,s,i,e,h,r){this.C7t();const n=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.b7t)),l=Math.floor(Math.min(s+e,this.M7t)),u=h&jl|this.ozt(r);for(let s=o;s<l;++s)for(let t=n;t<a;++t)this.O7t(t,s,u)},Azt(t,s,i,e,h){this.C7t();const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.b7t)),a=Math.floor(Math.min(s+e,this.M7t)),l=this.ozt(h);for(let s=n;s<a;++s)for(let t=r;t<o;++t){const u=this.B7t(t,s);-1!==u&&this.O7t(t,s,u&jl|l)}},Pzt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.b7t=s.width,this.M7t=s.height,this.C7t(!0),this.R7t(s.data),this.E7t(),this.F7t()):console.error("[Construct] Unrecognized JSON data format")},Ezt(t){const s=URL.createObjectURL(new Blob([this.nzt()],{type:"application/json"}));this._f.Zk(s,t)},async WVt(t,s){if(!this.Cjt||this.Cjt.AH()!==t){const i=this._f,e=Wl.vr(Wl.h_t);try{if(await e.y_t(i,t),!e.h7())throw new Error("image failed to load");if(this.Tr())return e.Gr(),null;const h=await e.lU(i.gM(),{$v:i.ID()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.Tr()||this.YN(Wl.VY.qHt.WY.CVt))}this.Tr()?e.Gr():(this.Rjt(),this.Cjt=e,i.fO(),this.T7t.clear(),this.E7t(),await this.KN(Wl.VY.qHt.WY.IVt))}},NVt(t){2<=t&&t++,this.rO().OM(t),this._f.fO()},Fzt(t,s,i){this.C7t(),this.I7t||(this.I7t=new Wl.VY.qHt.Gzt(this,this.mGt)),this.I7t.Dzt(t,s,i)},kzt(t,s,i){this.C7t(),this.I7t||(this.I7t=new Wl.VY.qHt.Gzt(this,this.mGt)),this.I7t.Ozt(t,s,i)},Lzt(t,s,i){Wl.VY.qHt.Irt.Fzt.call(this,t,s,i)},Bzt(t,s,i){Wl.VY.qHt.Irt.kzt.call(this,t,s,i)}}}{const Vl=self.Ws,Ul=Vl.VY.qHt.ZHt;Vl.VY.qHt.Crt={Nzt(t,s){const i=this.B7t(t,s);return-1===i?-1:i&Ul},Wzt(t){return this.J7t(t)},jzt(t){return this.q7t(t)},Vzt(t){return t*this.p7t+this.rO().qM()+this.p7t/2},Uzt(t){return t*this.m7t+this.rO().$M()+this.m7t/2},Hzt(t){const s=this.rO().qM();return Math.floor((t-s)/this.p7t)*this.p7t+s+this.p7t/2},zzt(t){const s=this.rO().$M();return Math.floor((t-s)/this.m7t)*this.m7t+s+this.m7t/2},Jzt(){return this.nzt()},qzt(){return this.K7t()},Xzt(){return this.Q7t()},Yzt(){return this.$7t()},$zt(){return this.Z7t()}}}{const Hl=self.Ws,zl=Hl.VY.qHt.XHt,Jl=Hl.VY.qHt.YHt,ql=Hl.VY.qHt.$Ht,Xl=Hl.VY.qHt.ZHt,Yl=Hl.vr(Hl.Rect),$l=Hl.vr(Hl.du);Hl.VY.qHt.Kzt=class extends Hl.br{constructor(){super(),this.Cf=-1,this.Zzt=-1,this.Qzt=!1,this.tJt=!1,this.sJt=!1,this.iJt=Hl.vr(Hl.Rect),this.eJt=null}D7(t,s,i,e,h,r,n,o){this.Cf=t,this.Zzt=t&Xl,this.Qzt=0!=(t&zl),this.tJt=0!=(t&Jl),this.sJt=0!=(t&ql),this.iJt.Rl(e*s+r,h*i+n,s,i),this.eJt=o.hzt(this.Cf)}Nv(t,s,i,e,h){Yl.I(this.iJt),Yl.offset(i,e),Yl.ou(s)&&($l.Du(Yl),t.TP($l,this.eJt))}}}{const Kl=self.Ws;Kl.VY.qHt.hJt=class extends Kl.br{constructor(){super(),this.Cf=-1,this.rJt=null,this.iJt=Kl.vr(Kl.Rect)}D7(t,s,i,e,h,r,n,o){this.Cf=t,this.rJt=s,this.iJt.Rl(h*i+n,r*e+o,i,e)}nJt(t){this.iJt.Fl(this.iJt.Nl()+t)}oJt(){return this.Cf}aJt(){return!!this.rJt}O3t(){return this.rJt}k3t(){return this.iJt}}}{const Zl=self.Ws,Ql=Zl.VY.qHt.ZHt;Zl.VY.qHt.D7t=class extends Zl.br{constructor(t,s,i){super();const e=t.tzt(),h=t.szt();this.YCt=t,this.pl=s,this.ml=i,this.Tl=this.pl*e*t.K7t(),this._l=this.ml*h*t.Q7t(),this.lJt=[],this.uJt=[],this.cJt=[],this.fJt=!1;for(let t=0;t<h;++t){const r=new Int32Array(e);r.fill(-1),this.lJt.push(r)}}wc(){const i=this.YCt.tzt(),s=this.YCt.szt(),e=this.lJt;if(e.length<s)for(let t=e.length;t<s;++t)e.push(new Int32Array(i));else e.length>s&&Zl.Yn(e,s);for(let s=0,t=e.length;s<t;++s){let t=e[s];t.length!==i&&(t=new Int32Array(i),e[s]=t),t.fill(-1)}}rzt(t){const s=this.YCt,i=s.rO(),e=s.tzt()*s.K7t(),h=s.szt()*s.Q7t(),r=i.qM()+this.Tl,n=i.$M()+this._l;t.set(r,n,r+e,n+h)}N7t(){this.fJt=!1}W7t(){if(!this.fJt){const u=this.YCt,c=u.GMt(),s=u.rO(),f=u.K7t(),d=u.Q7t(),p=u.tzt(),m=u.szt(),g=this.Tl,y=this._l;if(!(f<=0||d<=0)){let e=Math.min(u.X7t(),Math.floor(s.Lm()/f)),t=Math.min(u.Y7t(),Math.floor(s.qm()/d)),h=(e-=g/f,t-=y/d,e>p&&(e=p),t>m&&(t=m),this.lJt),r=this.uJt,n=0;for(let i=0;i<t;++i){const S=h[i];for(let s=0;s<e;++s){const w=S[s];if(-1!==w){let t=null;n<r.length?t=r[n]:(t=Zl.vr(Zl.VY.qHt.Kzt),r.push(t)),t.D7(w,f,d,s,i,g,y,u),++n}}}n<r.length&&Zl.Yn(r,n);let i=null,o=!1,a=this.cJt;Zl.$n(a);for(let s=0;s<t;++s){const b=h[s];for(let t=0;t<e;++t){const M=b[t],v=(Ql,c.u7t(M)),x=c.c7t(v);-1!==M&&x?!i||v||o?(i&&a.push(i),(i=Zl.vr(Zl.VY.qHt.hJt)).D7(M,v,f,d,t,s,g,y),o=!!v):i.nJt(f):i&&(a.push(i),i=null,o=!1)}i&&(a.push(i),i=null,o=!1)}let l=a.length;for(let s=0;s<l;++s){const G=a[s];if(!G.aJt()){const T=G.k3t();for(let t=s+1;t<l;++t){const _=a[t],I=_.k3t();I.Bl()<T.Wl()||I.Bl()>T.Wl()||I.Nl()>T.Nl()||I.Ll()>T.Ll()||_.aJt()||I.Ll()===T.Ll()&&I.Nl()===T.Nl()&&(a.splice(t,1),--l,T.Dl(T.Wl()+d),--t)}}}this.fJt=!0}}}O7t(t,s,i){this.lJt[s][t]!==i&&(this.lJt[s][t]=i,this.fJt=!1,this.YCt.j7t())}U7t(){return this.lJt}izt(){return this.cJt}Nv(i,e,h,r){const n=this.YCt,o=this.uJt;for(let t=0,s=o.length;t<s;++t)o[t].Nv(i,e,h,r,n)}}}{const tu=self.Ws,su=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);tu.VY.qHt.Gzt=class{constructor(t,s){this.YCt=t,this.mGt=s,this.dJt=[null,null],this.pJt=[tu.VY.qHt.mJt,tu.VY.qHt.gJt],this.yJt=new tu.pf}get SJt(){return su}get wJt(){return-999}get bJt(){return-998}get MJt(){return-1}get vJt(){return 0}get xJt(){return 1}GJt(){return this.YCt}GMt(){return this.mGt}Dzt(t,s,i){this.xzt(i)&&(this.TJt(i,0),this._Jt(t,s,this.IJt(t,s,i)))}Ozt(t,s,i){this.xzt(i)&&(this.TJt(i,1),this.CJt(t,s),this._Jt(t,s,this.IJt(t,s,i)))}xzt(t){return!!this.GMt().d7t(t)}RJt(t,s){return this.GJt().B7t(t,s)}AJt(t,s,i){const e=this.RJt(t,s);return!!this.PJt(e,!0,e,i)}PJt(t,s,i,e){return-1===t||(!s||-998!==t)&&s&&e&&!this.EJt(i,e)?0:1}FJt(t,s,i,e){const h=e.n7t[t];if(!h.length)return-1;if(1===h.length)return h[0][0];const r=this.RJt(s,i);if(this.PJt(r)){const n=h.some(t=>r===t[0]);if(n)return r}this.yJt.wc();for(let[t,s]of h)"number"!=typeof s&&(s=1),this.yJt.Mf(s,t);return this.yJt.bf()}DJt(t,s,i){-1!==t&&this.GJt().O7t(t,s,i)}CJt(t,s){this.GJt().O7t(t,s,-1)}EJt(t,s){for(const i of s.n7t)for(const[e]of i)if(e===t)return!0;return!1}_Jt(t,s,i){i&&(this.DJt(t-1,s-1,i[0][0]),this.DJt(t,s-1,i[1][0]),this.DJt(t+1,s-1,i[2][0]),this.DJt(t-1,s,i[0][1]),this.DJt(t,s,i[1][1]),this.DJt(t+1,s,i[2][1]),this.DJt(t-1,s+1,i[0][2]),this.DJt(t,s+1,i[1][2]),this.DJt(t+1,s+1,i[2][2]))}kJt(t){const s=this.GMt().d7t(t);return s.type}OJt(t){const s=this.kJt(t);this.dJt[s]||(this.dJt[s]=new this.pJt[s](this))}TJt(t,s){this.OJt(t);const i=this.kJt(t);this.dJt[i]&&this.dJt[i].LJt(s)}IJt(t,s,i){this.OJt(i);const e=this.GMt().d7t(i);if(this.dJt[e.type])return this.dJt[e.type].BJt(t,s,e)}}}{const iu=self.Ws;iu.VY.qHt.mJt=class{constructor(t){this.NJt=t,this.WJt=t.vJt}LJt(t){this.WJt=t}BJt(t,s,i){return this.jJt(t,s,i)}jJt(t,s,i){const e=this.WJt===this.NJt.vJt?this.VJt(t,s,void 0,i):this.NJt.MJt,h=this.UJt(t,s-1,"s",i),r=this.UJt(t-1,s,"e",i),n=this.UJt(t+1,s,"w",i),o=this.UJt(t,s+1,"n",i),a=this.NJt.SJt;return a[0][0]=this.NJt.wJt,a[1][0]=this.HJt(h,t,s-1,i),a[2][0]=this.NJt.wJt,a[0][1]=this.HJt(r,t-1,s,i),a[1][1]=this.HJt(e,t,s,i),a[2][1]=this.HJt(n,t+1,s,i),a[0][2]=this.NJt.wJt,a[1][2]=this.HJt(o,t,s+1,i),a[2][2]=this.NJt.wJt,a}UJt(t,s,i,e){return this.NJt.AJt(t,s,e)?this.VJt(t,s,i,e):this.NJt.wJt}VJt(t,s,i,e){this.WJt===this.NJt.xJt&&(i=void 0);const h=this.NJt.RJt(t,s-1),r=this.NJt.RJt(t-1,s),n=this.NJt.RJt(t+1,s),o=this.NJt.RJt(t,s+1),a="n"===i?this.NJt.bJt:h,l="w"===i?this.NJt.bJt:r,u="e"===i?this.NJt.bJt:n,c="s"===i?this.NJt.bJt:o,f=this.NJt.PJt(a,!0,h,e),d=this.NJt.PJt(l,!0,r,e),p=this.NJt.PJt(u,!0,n,e),m=this.NJt.PJt(c,!0,o,e);return+f+2*d+4*p+8*m}HJt(t,s,i,e){return t===this.NJt.wJt||t===this.NJt.MJt?t:this.NJt.FJt(t,s,i,e)}}}{const eu=self.Ws,hu=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);eu.VY.qHt.gJt=class{constructor(t){this.NJt=t,this.WJt=t.vJt}LJt(t){this.WJt=t}BJt(t,s,i){return this.zJt(t,s,i)}zJt(t,s,i){const e=this.WJt===this.NJt.vJt?this.JJt(t,s,void 0,i):this.NJt.MJt,h=this.qJt(t-1,s-1,"se",i),r=this.qJt(t,s-1,"s",i),n=this.qJt(t+1,s-1,"sw",i),o=this.qJt(t-1,s,"e",i),a=this.qJt(t+1,s,"w",i),l=this.qJt(t-1,s+1,"ne",i),u=this.qJt(t,s+1,"n",i),c=this.qJt(t+1,s+1,"nw",i),f=this.NJt.SJt;return f[0][0]=this.XJt(h,t-1,s-1,i),f[1][0]=this.XJt(r,t,s-1,i),f[2][0]=this.XJt(n,t+1,s-1,i),f[0][1]=this.XJt(o,t-1,s,i),f[1][1]=this.XJt(e,t,s,i),f[2][1]=this.XJt(a,t+1,s,i),f[0][2]=this.XJt(l,t-1,s+1,i),f[1][2]=this.XJt(u,t,s+1,i),f[2][2]=this.XJt(c,t+1,s+1,i),f}qJt(t,s,i,e){return this.NJt.AJt(t,s,e)?this.JJt(t,s,i,e):this.NJt.wJt}JJt(t,s,i,e){this.WJt===this.NJt.xJt&&(i=void 0);const h=this.NJt.RJt(t,s-1),r=this.NJt.RJt(t-1,s),n=this.NJt.RJt(t+1,s),o=this.NJt.RJt(t,s+1),a=this.NJt.RJt(t-1,s-1),l=this.NJt.RJt(t+1,s-1),u=this.NJt.RJt(t-1,s+1),c=this.NJt.RJt(t+1,s+1),f="n"===i?this.NJt.bJt:h,d="w"===i?this.NJt.bJt:r,p="e"===i?this.NJt.bJt:n,m="s"===i?this.NJt.bJt:o,g="nw"===i?this.NJt.bJt:a,y="ne"===i?this.NJt.bJt:l,S="sw"===i?this.NJt.bJt:u,w="se"===i?this.NJt.bJt:c,b=this.NJt.PJt(f,!0,h,e),M=this.NJt.PJt(d,!0,r,e),v=this.NJt.PJt(p,!0,n,e),x=this.NJt.PJt(m,!0,o,e),G=b&&M?this.NJt.PJt(g,!0,a,e):0,T=b&&v?this.NJt.PJt(y,!0,l,e):0,_=x&&M?this.NJt.PJt(S,!0,u,e):0,I=x&&v?this.NJt.PJt(w,!0,c,e):0;return+G+2*b+4*T+8*M+16*v+32*_+64*x+128*I}XJt(t,s,i,e){return t===this.NJt.wJt||t===this.NJt.MJt?t:this.NJt.FJt(hu.get(t),s,i,e)}}}{const ru=self.Ws;ru.VY.YJt=class extends ru.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const nu=self.Ws;nu.VY.YJt.jIt=class extends nu.aGt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){this.kW().GO(this._f)}lY(t){return this.kW().lU(t,{$v:this._f.ID()})}mY(){this.kW().iC()}}}{let s=function(t){return uu.get(t).$Jt()};s;const ou=self.Ws,au=self.Ks,lu=ou.vr(ou.Rect),uu=(ou.VY.YJt.Instance=class extends ou.jGt{constructor(t,s){super(t),this.KJt=!0;const i=ou.vr(self.ZJt);(this.t9t=i).QJt=()=>this.s9t(),this.i9t=null,this.e9t=(t,s,i,e,h,r)=>this.h9t(t,s,i,e,h,r),this.r9t=t=>this.n9t(t);let e=this.o9t=!0;s&&(i.a9t(s[0]),i.l9t(ou.Pr(s[1])),i.u9t(s[2]?"one-shot":"continuous-spray"),this.c9t(this._f.cV(s[3])),e=s[4],i.f9t(s[5]),i.d9t(s[6]),i.p9t(s[7]/100),i.m9t(s[8]),i.g9t(s[9]),i.y9t(s[10]),i.S9t(s[11]),i.w9t(s[12]),i.b9t(s[13]),i.M9t(s[14]),i.SetGravity(s[15]),i.v9t(s[16]),i.x9t(s[17]),i.G9t(s[18]),i.T9t(s[19]),i._9t(s[20])),this.I9t(),this.i9t&&(this.o9t=!1),"one-shot"===i.C9t()?i.R9t():i.A9t(!0);const h=this.rO();h.yB(e),h.pEt(!0),this.Ci.r0().addEventListener("bboxchange",()=>{h.dEt(this.t9t.D4())}),this.TO().gM().ZS()&&h.hEt(),this.dK=t=>this.pK(t),this.TO().r0().addEventListener("afterload",this.dK),this.EGt()}Gr(){this.TO().r0().removeEventListener("afterload",this.dK),this.dK=null,this.t9t.Gr(),this.t9t=null,this.e9t=null,this.r9t=null,super.Gr()}$Jt(){return this.t9t}P9t(t){this.t9t.a9t(t),"one-shot"===this.t9t.C9t()&&this.KJt&&this.t9t.E9t(t)}c9t(t){(t=t===this.lN()?null:t)===this.i9t||(this.i9t=t,this.t9t.F9t=t?t=>this.D9t(t):null,this.i9t)||(this.o9t=!0)}I9t(){const t=this.t9t,s=this.rO();t.k9t(s.uP()),t.H6t(this._f.RD()),t.O9t(s.qM()),t.L9t(s.$M()),t.B9t(s.GetAngle()),t.N9t(Math.abs(s.CPt()))}s9t(){this._f.mN(this.Ci)}Nv(t){if(this.o9t){const s=this.Wft.kW(),i=s.Gx();if(i){const e=this.rO(),h=e.nO(),r=lu,n=(this._f.dL().eOt()?r.set(-1/0,-1/0,1/0,1/0):h.f9()?h.Uq(e.E4(),r):h.ZJ(e.E4(),r),t.mP(i),h.QJ(e.E4()));this.t9t.W9t(h.nN()*n),this.t9t.Nv(t,s.QGt(),r,h.f9())}}}av(){const t=this.t9t;return{r:t.j9t(),sc:t.V9t(),st:t.C9t(),isp:t.U9t(),isz:t.H9t(),io:t.z9t(),gr:t.J9t(),xr:t.q9t(),yr:t.X9t(),spr:t.Y9t(),szr:t.$9t(),grnd:t.K9t(),acc:t.Z9t(),g:t.Q9t(),lar:t.tqt(),lsr:t.sqt(),lor:t.iqt(),dm:t.eqt(),to:t.hqt(),s:t.rqt(),pcc:t.nqt(),ft:this.KJt,soc:this.i9t?this.i9t.EJ():null,p:t.oqt().map(t=>t.toJSON())}}lv(t,s){const i=this.t9t;if(i.a9t(t.r),i.l9t(t.sc),i.u9t(t.st),i.f9t(t.isp),i.d9t(t.isz),i.p9t(t.io),i.m9t(t.gr),i.g9t(t.xr),i.y9t(t.yr),i.S9t(t.spr),i.w9t(t.szr),i.b9t(t.grnd),i.M9t(t.acc),i.SetGravity(t.g),i.v9t(t.lar),i.x9t(t.lsr),i.G9t(t.lor),i.T9t(t.dm),i._9t(t.to),i.A9t(t.s),i.aqt(t.pcc),this.KJt=t.ft,t.hasOwnProperty("soc")){const r=this.TO().cV(t.soc);r&&this.c9t(r)}const e=t.p,h=(i.E9t(e.length,!1),i.oqt());for(let t=0,s=h.length;t<s;++t)h[t].el(e[t]);"state"===s&&this.i9t&&(i.lqt(),i.uqt(this))}pK(){const t=this.t9t,i=(t.lqt(),t.uqt(this),t.oqt());for(let t=0,s=i.length;t<s;++t){const e=i[t],h=e.cqt();if(h){const r=h.rO();if(r){const n=r.G8();if(n){const o=e.fqt(),a=n.vN();if(("number"!=typeof o||"number"!=typeof a||o!==a)&&"number"==typeof o){const l=this.TO(),u=l.tO(o);u&&l.mN(u)}}}}}}cZ(){const t=this._f.ak(this.Ci);this.I9t(),this.KJt&&"one-shot"===this.t9t.C9t()&&this.t9t.dqt(),this.t9t.cZ(t),this.t9t.rqt()&&this._f.fO(),this.rO()._4(),this.KJt=!1}pqt(t){for(this.KJt&&"one-shot"===this.t9t.C9t()&&this.t9t.dqt();0<t;)this.t9t.cZ(1/60),t-=1/60;this.t9t.rqt()&&this._f.fO(),this.rO()._4(),this.KJt=!1}D9t(t,s){let i,e=(i=(i=(i="number"==typeof s?this._f.tO(s):i)&&i.lN()!==this.i9t?null:i)||this._f.b5(this.i9t,this.rO().nO(),t.qM(),t.$M())).rO();return e.DC(t.Gc(),t.Gc()),e.D5(t.GetAngle()),e.fP(t.uP()),e.V4(this.rO().j4()),e._4(),e.K4(this.G8(),!0),i.DY(),t.mqt(this.e9t),t.gqt(this.r9t),i}h9t(t,s,i,e,h,r){if(!t.Pj()){const n=t.rO();n.A4(s,i),n.DC(n.Lm()+e,n.qm()+e),n.D5(n.GetAngle()+h),n.fP(n.uP()+r),n._4()}}n9t(t){t.Pj()||this._f.mN(t)}cnt(t){const s=this.t9t;switch(t){case 0:return s.j9t();case 1:return ou.Er(s.V9t());case 2:return"one-shot"===s.C9t()?1:0;case 5:return s.U9t();case 6:return s.H9t();case 7:return 100*s.z9t();case 8:return s.J9t();case 9:return s.q9t();case 10:return s.X9t();case 11:return s.Y9t();case 12:return s.$9t();case 13:return s.K9t();case 14:return s.Z9t();case 15:return s.Q9t();case 16:return s.tqt();case 17:return s.sqt();case 18:return s.iqt();case 19:return s.eqt();case 20:return s.hqt()}}ynt(t,s){const i=this.t9t;switch(t){case 0:i.a9t(s);break;case 1:i.l9t(ou.Pr(s));break;case 2:i.u9t(s?"one-shot":"continuous-spray");break;case 5:i.f9t(s);break;case 6:i.d9t(s);break;case 7:i.p9t(s/100);break;case 8:i.m9t(s);break;case 9:i.g9t(s);break;case 10:i.y9t(s);break;case 11:i.S9t(s);break;case 12:i.w9t(s);break;case 13:i.b9t(s);break;case 14:i.M9t(s);break;case 15:i.SetGravity(s);break;case 16:i.v9t(s);break;case 17:i.x9t(s);break;case 18:i.G9t(s);break;case 19:i.T9t(s);break;case 20:i._9t(s)}}OGt(){const t="plugins.particles",s=t+".properties",i=t+".debugger",e=this.t9t;return[{title:t+".name",properties:[{name:i+".particle-count",value:e.yqt()},{name:s+".type.name",value:[s+".type.items."+e.C9t()]},{name:i+".is-spraying",value:e.rqt(),eVt:t=>e.A9t(t)},{name:s+".rate.name",value:e.j9t(),eVt:t=>e.a9t(t)},{name:s+".spray-cone.name",value:ou.Er(e.V9t()),eVt:t=>e.l9t(ou.Pr(t))},{name:s+".speed.name",value:e.U9t(),eVt:t=>e.f9t(t)},{name:s+".size.name",value:e.H9t(),eVt:t=>e.d9t(t)},{name:s+".opacity.name",value:e.z9t(),eVt:t=>e.p9t(t)},{name:s+".grow-rate.name",value:e.J9t(),eVt:t=>e.m9t(t)},{name:s+".x-randomiser.name",value:e.q9t(),eVt:t=>e.g9t(t)},{name:s+".y-randomiser.name",value:e.X9t(),eVt:t=>e.y9t(t)},{name:s+".initial-speed-randomiser.name",value:e.Y9t(),eVt:t=>e.S9t(t)},{name:s+".size-randomiser.name",value:e.$9t(),eVt:t=>e.w9t(t)},{name:s+".grow-rate-randomiser.name",value:e.K9t(),eVt:t=>e.b9t(t)},{name:s+".acceleration.name",value:e.Z9t(),eVt:t=>e.M9t(t)},{name:s+".gravity.name",value:e.Q9t(),eVt:t=>e.SetGravity(t)},{name:s+".angle-randomiser.name",value:e.tqt(),eVt:t=>e.v9t(t)},{name:s+".life-speed-randomiser.name",value:e.sqt(),eVt:t=>e.x9t(t)},{name:s+".opacity-randomiser.name",value:e.iqt(),eVt:t=>e.G9t(t)},{name:s+".timeout.name",value:e.hqt(),eVt:t=>e._9t(t)}]}]}Xxt(){return self.Sqt}},new WeakMap);self.Sqt=class extends self.z6{constructor(){super(),uu.set(this,self.oN.fN().K6())}set wqt(t){s(this).A9t(!!t)}get wqt(){return s(this).rqt()}set rate(t){au.Te(t),uu.get(this).P9t(t)}get rate(){return s(this).j9t()}set bqt(t){au.Te(t),s(this).l9t(t)}get bqt(){return s(this).V9t()}set Mqt(t){au.Te(t),s(this).f9t(t)}get Mqt(){return s(this).U9t()}set vqt(t){au.Te(t),s(this).d9t(t)}get vqt(){return s(this).H9t()}set xqt(t){au.Te(t),s(this).p9t(t)}get xqt(){return s(this).z9t()}set Gqt(t){au.Te(t),s(this).g9t(t)}get Gqt(){return s(this).q9t()}set Tqt(t){au.Te(t),s(this).y9t(t)}get Tqt(){return s(this).X9t()}set _qt(t){au.Te(t),s(this).S9t(t)}get _qt(){return s(this).Y9t()}set Iqt(t){au.Te(t),s(this).w9t(t)}get Iqt(){return s(this).$9t()}set Cqt(t){au.Te(t),s(this).m9t(t)}get Cqt(){return s(this).J9t()}set Rqt(t){au.Te(t),s(this).b9t(t)}get Rqt(){return s(this).K9t()}set acceleration(t){au.Te(t),s(this).M9t(t)}get acceleration(){return s(this).Z9t()}set Aqt(t){au.Te(t),s(this).SetGravity(t)}get Aqt(){return s(this).Q9t()}set Pqt(t){au.Te(t),s(this).v9t(t)}get Pqt(){return s(this).tqt()}set Eqt(t){au.Te(t),s(this).x9t(t)}get Eqt(){return s(this).sqt()}set Fqt(t){au.Te(t),s(this).G9t(t)}get Fqt(){return s(this).iqt()}set timeout(t){au.Te(t),s(this)._9t(t)}get timeout(){return s(this).hqt()}Dqt(t){au.Te(t),uu.get(this).pqt(t)}kqt(t){const s=uu.get(this);t?s.c9t(s.TO().sL(t)):s.c9t(null)}}}{const cu=self.Ws;cu.VY.YJt.WY={rqt(){return this.t9t.rqt()}}}{const fu=self.Ws;fu.VY.YJt.Irt={A9t(t){this.t9t.A9t(0!==t)},a9t(t){this.P9t(t)},Oqt(t){this.c9t(t)},Lqt(){this.c9t(null)},l9t(t){this.t9t.l9t(fu.Pr(t))},f9t(t){this.t9t.f9t(t)},d9t(t){this.t9t.d9t(t)},p9t(t){this.t9t.p9t(t/100)},m9t(t){this.t9t.m9t(t)},Bqt(t){this.t9t.g9t(t)},Nqt(t){this.t9t.y9t(t)},Wqt(t){this.t9t.S9t(t)},jqt(t){this.t9t.w9t(t)},Vqt(t){this.t9t.b9t(t)},Uqt(t){this.t9t.M9t(t)},SetGravity(t){this.t9t.SetGravity(t)},Hqt(t){this.t9t.v9t(t)},zqt(t){this.t9t.x9t(t)},Jqt(t){this.t9t.G9t(t)},_9t(t){this.t9t._9t(t)},qqt(t){this.pqt(t)},NVt(t){this.rO().OM(t),this._f.fO()}}}{const du=self.Ws;du.VY.YJt.Crt={Xqt(){return this.t9t.yqt()},Yqt(){return this.t9t.j9t()},$qt(){return du.Er(this.t9t.V9t())},Kqt(){return this.t9t.U9t()},Zqt(){return this.t9t.H9t()},Qqt(){return 100*this.t9t.z9t()},tXt(){return this.t9t.J9t()},sXt(){return this.t9t.q9t()},iXt(){return this.t9t.X9t()},eXt(){return this.t9t.$9t()},hXt(){return this.t9t.Y9t()},rXt(){return this.t9t.K9t()},nXt(){return this.t9t.Z9t()},oXt(){return this.t9t.Q9t()},aXt(){return this.t9t.tqt()},lXt(){return this.t9t.sqt()},uXt(){return this.t9t.iqt()},cXt(){return this.t9t.hqt()}}}{const pu=self.Ws,mu=[],gu=new Set(["continuous-spray","one-shot"]),yu=["fade-to-invisible","timeout-expired","particle-stopped"],Su=pu.vr(pu.Rect);self.ZJt=class{constructor(){this.fXt=0,this.dXt=0,this.pXt="continuous-spray",this.mXt=!1,this.gXt=0,this.yXt=!1,this.SXt=0,this.wXt=0,this.bXt=0,this.MXt=0,this.vXt=0,this.xXt=1,this.GXt=0,this.TXt=0,this._Xt=0,this.IXt=0,this.CXt=0,this.RXt=0,this.AXt=0,this.PXt=0,this.EXt=0,this.FXt=0,this.DXt=0,this.kXt=0,this.OXt=0,this.x0=0,this.LXt=0,this.BXt=1,this.QJt=null,this.F9t=null,this.NXt=[],this.ZAt=new pu.Rect,this.FM=new pu.ea}Gr(){this.I0(),pu.$n(this.NXt),this.NXt=null,this.QJt=null,this.F9t=null,this.ZAt=null,this.FM=null}I0(){const i=this.NXt;for(let t=0,s=i.length;t<s;++t)i[t].p2t();pu.rr(mu,i),pu.$n(i),1e3<mu.length&&pu.Yn(mu,1e3),this.mXt=!1}R9t(){for(let t=0,s=this.fXt;t<s;++t)this.WXt();this.NXt.length&&(this.mXt=!0)}WXt(t=!0){let s=null;return mu.length?(s=mu.pop()).jXt(this):s=pu.vr(self.VXt,this),this.NXt.push(s),t?s.aRt(this.F9t):s.aRt(),s}dqt(){const i=this.NXt,e=this.F9t;for(let t=0,s=i.length;t<s;++t)i[t].aRt(e)}lqt(){const i=this.NXt,e=this.F9t;for(let t=0,s=i.length;t<s;++t)i[t].UXt(e)}uqt(i){const e=this.NXt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=h.cqt();if(r){const n=r.rO();n.XM(h.qM()),n.KM(h.$M()),n.DC(h.Gc(),h.Gc()),n.fP(h.uP()),n.D5(h.GetAngle()),n.V4(i.rO().j4()),n._4()}}}E9t(t,s=!0){const i=this.NXt;if(t<i.length){const e=i.length-t;for(let t=0;t<e;++t){const h=i.pop();h.p2t(),mu.push(h)}1e3<mu.length&&pu.Yn(mu,1e3)}else if(t>i.length){const r=t-i.length;for(let t=0;t<r;++t)this.WXt(s)}}oqt(){return this.NXt}yqt(){return this.NXt.length}cZ(t){this.HXt(t),this.zXt(t),this.JXt()}HXt(t){if("continuous-spray"===this.pXt&&this.mXt){this.LXt+=t*this.fXt;const s=Math.floor(this.LXt);this.LXt-=s;for(let t=0;t<s;++t)this.WXt()}}aqt(t){this.LXt=t}nqt(){return this.LXt}zXt(i){let e=this.ZAt,h=(e.set(this.SXt,this.wXt,this.SXt,this.wXt),this.NXt),r=0;for(let t=0,s=h.length;t<s;++t){const n=h[t];(h[r]=n).cZ(i),n.Lmt()?(++r,e.cu(n.D4())):(n.p2t(),mu.push(n))}pu.Yn(h,r),1e3<mu.length&&pu.Yn(mu,1e3)}JXt(){"one-shot"===this.pXt&&0===this.NXt.length&&this.mXt&&(this.QJt&&this.QJt(),this.mXt=!1)}Nv(i,e,h,r){Su.set(e.yn(),e.Sn(),e.Mn(),e.vn()),i.AP(Su),this.FM.I(i.pP());const n=this.NXt;for(let t=0,s=n.length;t<s;++t){const o=n[t];h.ou(o.D4())&&o.Nv(i,e,r)}i.PP()}pP(){return this.FM}a9t(t){this.fXt=+t}j9t(){return this.fXt}l9t(t){this.dXt=+t}V9t(){return this.dXt}u9t(t){if(!gu.has(t))throw new Error("invalid spray type");this.pXt=t}C9t(){return this.pXt}A9t(t){this.mXt=!!t}rqt(){return this.mXt}k9t(t){this.gXt=+t}qXt(){return this.gXt}H6t(t){this.yXt=!!t}XXt(){return this.yXt}O9t(t){this.SXt=+t}YXt(){return this.SXt}L9t(t){this.wXt=+t}$Xt(){return this.wXt}B9t(t){this.bXt=+t}KXt(){return this.bXt}f9t(t){this.MXt=+t}U9t(){return this.MXt}d9t(t){this.vXt=+t}H9t(){return this.vXt}N9t(t){this.xXt=+t}ZXt(){return this.xXt}p9t(t){this.GXt=+t}z9t(){return this.GXt}m9t(t){this.TXt=+t}J9t(){return this.TXt}g9t(t){this._Xt=+t}q9t(){return this._Xt}y9t(t){this.IXt=+t}X9t(){return this.IXt}S9t(t){this.CXt=+t}Y9t(){return this.CXt}w9t(t){this.RXt=+t}$9t(){return this.RXt}b9t(t){this.AXt=+t}K9t(){return this.AXt}M9t(t){this.PXt=+t}Z9t(){return this.PXt}SetGravity(t){this.EXt=+t}Q9t(){return this.EXt}v9t(t){this.FXt=+t}tqt(){return this.FXt}x9t(t){this.DXt=+t}sqt(){return this.DXt}G9t(t){this.kXt=+t}iqt(){return this.kXt}QXt(t){let s=yu.indexOf(t);if(-1===s)throw new Error("invalid destroy mode");this.OXt=s}T9t(t){this.QXt(yu[t])}tYt(){return yu[this.OXt]}eqt(){return this.OXt}_9t(t){this.x0=+t}hqt(){return this.x0}W9t(t){this.BXt=+t}sYt(){return this.BXt}D4(){return this.ZAt}}}{let p=function(t){return Math.random()*t-t/2},m=(p,self.Ws),l=new m.du,u=new m.ea,t=self.devicePixelRatio||1,c=!1;self.VXt=class{constructor(t){this.iYt=t,this.T0=!1,this.pl=0,this.ml=0,this.C_t=0,this.mz=0,this.eYt=1,this.hYt=0,this.rYt=0,this.t7=0,this.nYt=0,this.oYt=0,this.aYt=0,this.Yu=new m.Rect,this.lYt=null,this.uYt=NaN,this.cYt=null,this.fYt=null}jXt(t){this.iYt=t}aRt(t){const s=this.iYt;this.T0=!0,this.pl=s.YXt()+p(s.q9t()),this.ml=s.$Xt()+p(s.X9t()),this.C_t=s.U9t()+p(s.Y9t()),this.mz=s.KXt()+p(s.V9t()),this.eYt=s.z9t(),this.hYt=this.eYt,this.t7=(s.H9t()+p(s.$9t()))*s.ZXt(),this.nYt=this.t7/2,this.rYt=s.J9t()+p(s.K9t()),this.oYt=0,this.aYt=0,this.dYt(),t?this.lYt||(this.lYt=t(this)):(this.lYt=null,this.cYt=null,this.fYt=null)}UXt(t){t?this.lYt&&!this.lYt.Pj()||(this.lYt=t(this,this.uYt)):(this.lYt=null,this.cYt=null,this.fYt=null)}mqt(t){this.cYt=t}gqt(t){this.fYt=t}p2t(){const t=this.fYt;t&&t(this.lYt),this.lYt=null,this.cYt=null,this.fYt=null}toJSON(){let t;return this.lYt&&this.lYt.rO()&&(t=this.lYt.rO().G8().vN()),[this.pl,this.ml,this.C_t,this.mz,this.eYt,this.rYt,this.t7,this.oYt,this.aYt,t]}el(t){this.pl=t[0],this.ml=t[1],this.C_t=t[2],this.mz=t[3],this.eYt=t[4],this.hYt=this.eYt,this.rYt=t[5],this.t7=t[6],this.oYt=t[7],this.aYt=t[8],this.uYt=t[9],this.nYt=this.t7/2,this.dYt()}cZ(t){let s=this.iYt,i=this.C_t*t,e=this.mz,h=Math.cos(e)*i,r=Math.sin(e)*i+this.oYt*t,n=(this.pl+=h,this.ml+=r,this.rYt*t),o=(this.t7+=n,this.nYt=this.t7/2,this.C_t+=s.Z9t()*t,this.oYt+=s.Q9t()*t,this.aYt+=t,this.dYt(),s.tqt()),a=s.sqt(),l=s.iqt(),u=0;0!==o&&(u=p(o*t),this.mz+=u),0!==a&&(this.C_t+=p(a*t)),0!==l&&(this.eYt=m.Rr(this.eYt+p(l*t),0,1));const c=1<=this.t7&&(2===s.eqt()?0<this.C_t:this.aYt<s.hqt()),f=this.cYt;if(f&&c){let t=s.qXt()*this.eYt;0===s.eqt()&&(t*=1-this.aYt/s.hqt());const d=t-this.hYt;this.hYt=t,f(this.lYt,h,r,n,u,d)}this.T0=c}Lmt(){return this.T0}D4(){return this.Yu}dYt(){const t=this.pl,s=this.ml,i=this.nYt;this.Yu.set(t-i,s-i,t+i,s+i)}Nv(h,r,n){if(!this.lYt){let i=this.iYt,e=i.qXt()*this.eYt;if(0===i.eqt()&&(e*=1-this.aYt/i.hqt()),!(e<=0)){const o=this.t7,a=o*i.sYt()*t;if(!(a<1)){let t=this.pl,s=this.ml;i.XXt()&&(t=t+.5|0,s=s+.5|0),h.ZS()?h.EP(t,s,o,e):n||a>h.mE()||a<h.pE()?(u.I(i.pP()),u.ka(e),h.LM(u),c=!0,l.Du(this.Yu),h.TP(l,r)):(c&&(h.LM(i.pP()),c=!1),h.EP(t,s,a,e))}}}}cqt(){return this.lYt}fqt(){return this.uYt}qM(){return this.pl}$M(){return this.ml}Gc(){return this.t7}GetAngle(){return this.mz}uP(){return this.eYt}}}{const wu=self.Ws;wu.VY.pYt=class extends wu.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const bu=self.Ws;bu.VY.pYt.jIt=class extends bu.aGt{constructor(t){super(t),this.mYt=bu.vr(self.gYt)}Gr(){super.Gr()}qxt(){this.kW().GO(this._f)}lY(t){return this.kW().lU(t,{$v:this._f.ID()})}mY(){this.kW().iC()}yYt(){return this.mYt}SYt(t,s,i,e){const h=this.kW(),r=this.mYt;r.Hm(h.Lm()),r.Bm(h.qm()),r.wYt(t),r.bYt(s),r.MYt(i),r.vYt(e),r.xYt()}}}{const Mu=self.Ws,vu=self.Ks,xu=Mu.vr(Mu.dl),Gu=["left","center","right"],Tu=["top","center","bottom"],_u=["word","cjk","character"],Iu=(Mu.VY.pYt.Instance=class extends Mu.jGt{constructor(t,s){super(t),this.If="",this.GYt=!0,this.TYt=16,this._Yt=16,this.IYt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@°+=*$£€<>";let i="";if(this.CYt=1,this.RYt=0,this.yI=0,this.TI=0,this._I=0,this.RI="word",this.AYt=!0,this.PYt=!1,this.EYt=null,this.FYt=null,this.DYt=-1,this.kYt=-1,this.OYt=0,s){this.If=s[0],this.GYt=s[1],this.TYt=s[2],this._Yt=s[3],this.IYt=s[4],i=s[5],this.CYt=s[6],this.RYt=s[7],this.yI=s[8],this.TI=s[9],this._I=s[10],this.RI=_u[s[11]];const h=this.rO();h.yB(s[12]),this.PYt=!!s[14]}this.mGt.SYt(this.TYt,this._Yt,this.IYt,i),this.FYt=Mu.vr(self.LYt,this.mGt.yYt());const e=this.rO();this.FYt.DC(e.Lm(),e.qm()),this.BYt(),this.NYt(),this.Ci.bRt()}Gr(){this.WYt(),this.EYt&&(this.EYt.Gr(),this.EYt=null),this.FYt.Gr(),this.FYt=null,super.Gr()}BYt(){const t=this.FYt;t&&(t.aC(this.GYt),t.Af(this.If),t.RC(this.RI),t.jYt(Gu[this.TI]),t.VYt(Tu[this._I]),t.UYt(this.RYt),t.pC(this.yI))}HYt(){const t=this.rO();this.FYt.DC(t.Lm(),t.qm()),this.FYt.E5(this.CYt)}NYt(){if(this.PYt){let t=this.If;this.GYt&&(t=Mu.Lh.Rm(t)),this.EYt?this.EYt.Af(t):this.EYt=Mu.vr(Mu.Tf,this._f,t)}else this.EYt&&(this.EYt.Gr(),this.EYt=null)}Nv(e){const h=this.Wft.kW(),r=h.Gx();if(r){e.mP(r);let t=this.rO(),s=t.L4(),i=this.FYt;i.E5(this.CYt),i.zYt(t.CPt()),this._f.RD()&&(s=t.fEt(s)),i.DC(t.Lm(),t.qm()),i.yYt().JYt(h.cR()),i.LM(t.j4()),i.Nv(e,s.yn(),s.Sn(),t.GetAngle()),this.AYt=!1}}av(){const t={t:this.If,ebbc:this.GYt,csc:this.CYt,csp:this.RYt,lh:this.yI,ha:this.TI,va:this._I,w:this.RI,cw:this.mGt.yYt().qYt(),ch:this.mGt.yYt().XYt(),cs:this.mGt.yYt().YYt(),sd:this.mGt.yYt().$Yt()};return-1!==this.kYt&&(t.tw={st:this.DYt,en:this.kYt,l:this.OYt}),t}lv(t){if(this.WYt(),this.If=t.t,this.GYt=t.ebbc,this.CYt=t.csc,this.RYt=t.csp,this.yI=t.lh,this.TI=t.ha,this._I=t.va,t.hasOwnProperty("w")){const i=t.w;this.RI="boolean"==typeof i?i?"word":"character":i}else this.RI="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.DYt=e.st,this.kYt=e.en,this.OYt=t.l}const s=this.mGt.yYt();s.wYt(t.cw),s.bYt(t.ch),s.MYt(t.cs),s.vYt(t.sd),this.BYt(),this.NYt(),-1!==this.kYt&&this.EGt()}cnt(t){switch(t){case 0:return this.FC();case 1:return this.GYt;case 2:return this.mGt.yYt().qYt();case 3:return this.mGt.yYt().XYt();case 4:return this.mGt.yYt().YYt();case 5:return this.mGt.yYt().$Yt();case 6:return this.KYt();case 7:return this.ZYt();case 8:return this.QYt();case 9:return this.t$t();case 10:return this.s$t();case 11:return this.i$t()}}ynt(t,s){switch(t){case 0:this.e$t(s);break;case 1:this.GYt!==!!s&&(this.GYt=!!s,this.BYt());break;case 2:this.mGt.yYt().wYt(s);break;case 3:this.mGt.yYt().bYt(s);break;case 4:this.mGt.yYt().MYt(s);break;case 5:this.mGt.yYt().vYt(s);break;case 6:this.h$t(s);break;case 7:this.r$t(s);break;case 8:this.n$t(s);break;case 9:this.o$t(s);break;case 10:this.a$t(s);break;case 11:this.l$t(s)}}e$t(t){this.If!==t&&(this.If=t,this.FYt.Af(t),this.NYt(),this._f.fO())}FC(){return this.If}u$t(t,s){this.e$t(t),this.DYt=this._f.dk(),this.kYt=this.DYt+s/this.G8().IN(),this.OYt=Mu.jp(Mu.Lh.Rm(t)),this.FYt.bC(0),this.EGt()}WYt(){this.DYt=-1,this.kYt=-1,this.OYt=0,this.FYt.bC(-1),this.gGt()}c$t(){-1!==this.kYt&&(this.WYt(),this.YN(Mu.VY.pYt.WY.f$t),this._f.fO())}h$t(t){this.CYt!==t&&(this.CYt=t,this.FYt.E5(this.CYt),this._f.fO())}KYt(){return this.CYt}r$t(t){this.RYt!==t&&(this.RYt=t,this.FYt.UYt(this.RYt),this._f.fO())}ZYt(){return this.RYt}n$t(t){this.yI!==t&&(this.yI=t,this.FYt.pC(this.yI),this._f.fO())}QYt(){return this.yI}o$t(t){this.TI!==t&&(this.TI=t,this.BYt(),this._f.fO())}t$t(){return this.TI}a$t(t){this._I!==t&&(this._I=t,this.BYt(),this._f.fO())}s$t(){return this._I}d$t(t){this.l$t(_u[t])}l$t(t){this.RI!==t&&(this.RI=t,this.BYt(),this._f.fO())}i$t(){return this.RI}p$t(t){this.PYt=!!t,this.NYt()}m$t(){return this.PYt}g$t(){return this.HYt(),this.FYt.OC()}y$t(){return this.HYt(),this.FYt.BC()}S$t(t,s){this.HYt();const i=this.rO(),e=(xu.set(t-i.qM(),s-i.$M()),xu.rotate(-i.GetAngle()),xu.offset(i.Lm()*i.BW(),i.qm()*i.WW()),this.FYt.jC(xu.Sl(),xu.bl()));if(e){const h=e.kg("tag");if(h)return h.param}return""}w$t(t,s,i){const e=this.S$t(s,i);return e&&Mu.Gh(t,e)}b$t(t,s){this.HYt(),s=Math.floor(s);const i=this.FYt.UC(t,s);if(!i)return null;const e=this.rO();return xu.set(i.Ag(),i.Eg()),xu.offset(-e.Lm()*e.BW(),-e.qm()*e.WW()),xu.rotate(e.GetAngle()),xu.offset(e.qM(),e.$M()),{x:xu.Sl(),y:xu.bl(),width:i.Lm(),height:i.qm()}}M$t(t){return this.HYt(),this.FYt.HC(t)}cZ(){const s=this._f.dk();if(s>=this.kYt)this.WYt(),this.YN(Mu.VY.pYt.WY.f$t),this._f.fO();else{let t=Mu.Jr(this.DYt,this.kYt,s,0,this.OYt);(t=Math.floor(t))!==this.FYt.MC()&&(this.FYt.bC(t),this._f.fO())}}OGt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.FC(),eVt:t=>this.e$t(t)},{name:t+".properties.scale.name",value:this.KYt(),eVt:t=>this.h$t(t)},{name:t+".properties.character-spacing.name",value:this.ZYt(),eVt:t=>this.r$t(t)},{name:t+".properties.line-height.name",value:this.QYt(),eVt:t=>this.n$t(t)}]}]}Xxt(){return self.v$t}},new WeakMap),Cu=new Map([["left",0],["center",1],["right",2]]),Ru=new Map([["top",0],["center",1],["bottom",2]]);self.v$t=class extends self.z6{constructor(){super(),Iu.set(this,self.oN.fN().K6())}get text(){return Iu.get(this).FC()}set text(t){vu.Re(t);const s=Iu.get(this);s.WYt(),s.e$t(t)}x$t(t,s){vu.Re(t),vu.Te(s);const i=Iu.get(this);i.WYt(),i.u$t(t,s)}G$t(){Iu.get(this).c$t()}set T$t(t){vu.Te(t),Iu.get(this).h$t(t)}get T$t(){return Iu.get(this).KYt()}set _$t(t){vu.Te(t),Iu.get(this).r$t(t)}get _$t(){return Iu.get(this).ZYt()}set lineHeight(t){vu.Te(t),Iu.get(this).n$t(t)}get lineHeight(){return Iu.get(this).QYt()}set CU(t){vu.Re(t);const s=Cu.get(t);if(void 0===s)throw new Error("invalid mode");Iu.get(this).o$t(s)}get CU(){return Gu[Iu.get(this).t$t()]}set verticalAlign(t){vu.Re(t);const s=Ru.get(t);if(void 0===s)throw new Error("invalid mode");Iu.get(this).a$t(s)}get verticalAlign(){return Tu[Iu.get(this).s$t()]}set RU(t){if(!_u.includes(t))throw new Error("invalid mode");Iu.get(this).l$t(t)}get RU(){return Iu.get(this).i$t()}set I$t(t){Iu.get(this).p$t(!!t)}get I$t(){return Iu.get(this).m$t()}get FU(){return Iu.get(this).g$t()}get DU(){return Iu.get(this).y$t()}C$t(){const t=Iu.get(this);return[t.g$t(),t.y$t()]}R$t(t,s,i){return vu.Re(t),vu.Te(s),vu.Te(i),Iu.get(this).w$t(t,s,i)}A$t(t,s){return vu.Te(t),vu.Te(s),Iu.get(this).S$t(t,s)}P$t(t,s=0){return vu.Re(t),vu.Te(s),Iu.get(this).b$t(t,s)}E$t(t){return vu.Re(t),Iu.get(this).M$t(t)}}}{const Au=self.Ws;Au.VY.pYt.WY={F$t(t,s){return s?this.If===t:Au.Gh(this.If,t)},D$t(){return-1!==this.kYt},f$t(){return!0},k$t(t,s,i){return this.w$t(t,s,i)}}}{const Pu=self.Ws;Pu.VY.pYt.Irt={Af(t){this.WYt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.e$t(t.toString())},O$t(t){this.WYt(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.e$t(this.If+t)},L$t(t,s){this.WYt(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.u$t(t.toString(),s)},B$t(){this.c$t()},E5(t){this.h$t(t)},N$t(t){this.r$t(t)},pC(t){this.n$t(t)},wYt(t,s){let i=!1,e=this.mGt.yYt();for(const h of t)if(" "===h)e.W$t(s),i=!0;else{const r=e.j$t(h);r&&(r.V$t(s),i=!0)}i&&e.U$t(),this._f.fO()},NVt(t){this.rO().OM(t),this._f.fO()},H$t(t){this.o$t(t)},z$t(t){this.a$t(t)},J$t(t){this.d$t(t)},q$t(t){this.p$t(t)}}}{const Eu=self.Ws;Eu.VY.pYt.Crt={X$t(t){const s=this.mGt.yYt().j$t(t);return s?s.Y$t():this.mGt.yYt().qYt()},$$t(){return this._Yt},K$t(){return this.CYt},Z$t(){return this.RYt},Q$t(){return this.yI},Text(){return this.If},tKt(){return this.GYt?Eu.Lh.Rm(this.If):this.If},sKt(){return this.g$t()},iKt(){return this.y$t()},eKt(t,s){return this.S$t(t,s)},hKt(t){return this.M$t(t)},rKt(t,s){const i=this.b$t(t,s);return i?i.x:0},nKt(t,s){const i=this.b$t(t,s);return i?i.y:0},oKt(t,s){const i=this.b$t(t,s);return i?i.width:0},aKt(t,s){const i=this.b$t(t,s);return i?i.height:0}}}{const Fu=self.Ws;self.lKt=class{constructor(t,s,i,e){let h=t.qYt(),r=t.XYt();this.mYt=t,this.uKt=s,this.cKt=new Fu.Rect(i,e,i+h,e+r),this.fKt=new Fu.Rect,this.dKt=-1,this.pKt()}Gr(){this.mYt=null,this.cKt=null,this.fKt=null}pKt(){let t=this.mYt.Lm(),s=this.mYt.qm();this.fKt.I(this.cKt),this.fKt.Ct(t,s),this.fKt.fu(this.mYt.cR())}yYt(){return this.mYt}mKt(){return this.uKt}cR(){return this.fKt}V$t(t){this.dKt=t}Y$t(){return this.dKt<0?this.mYt.qYt():this.dKt}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||R.Uo(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},R=(r,C,self.Ws),A=new R.Rect,P=new R.du,E=new R.ea,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.LYt=class{constructor(t){this.mYt=t,this.LI=0,this.BI=0,this.If="",this.MI=!1,this.II=null,this.CI=R.vr(R.Am),this.RI="word",this.EI=!1,this.FI=!1,this.TI="left",this._I="top",this.pz=1,this.gKt=1,this.yKt=0,this.yI=0,this.FM=R.vr(R.ea),this.kI=-1,this.OI=0,this.KI=t=>this.ZI(t),this.mYt.SKt(this)}Gr(){this.mYt.wKt(this),this.FM=null,this.KI=null,this.CI.wc(),this.CI=null,this.mYt=null,this.II=null}ZI(t){if(t.zm())return{width:0,height:0};const s=t.og(),i=t.kg("scale"),e=(i?parseFloat(i.param):this.pz)*this.gKt,h=t.kg("scalex"),r=(h?parseFloat(h.param):1)*e,n=t.kg("scaley"),o=(n?parseFloat(n.param):1)*e,a=this.mYt.XYt()*o+this.yI,l=this.yYt(),u=l.qYt()*r,c=this.bKt();if(l.MKt()){let i=0,e=0;for(const f of s){let t=u,s=l.j$t(f);s?t=s.Y$t()*r:" "===f&&(t=l.vKt()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:u*d+p*c,height:a}}}oC(){this.FI=!0}dI(){this.oC(),this.EI=!0,this.CI.wc()}DC(t,s){t<=0||s<=0||this.LI===t&&this.BI===s||(this.LI!==t?this.dI():this.oC(),this.LI=t,this.BI=s)}bC(t){this.kI=Math.floor(t)}MC(){return this.kI}jC(t,s){this.LC();const i=this.CI.Fm();for(const e of i)if(s>e.Eg()&&s<e.Eg()+e.qm())for(const h of e.Qm())if(t>=h.Ag()&&t<h.Ag()+h.Lm())return h;return null}*VC(t){this.LC();const s=this.CI.Fm();for(const i of s)for(const e of i.Qm()){const h=e.kg("tag");h&&R.Gh(h.param,t)&&(yield e)}}UC(t,s){for(const i of this.VC(t)){if(0===s)return i;--s}return null}HC(t){let s=0;for(const i of this.VC(t))++s;return s}LC(){this.KC(),this.ZC()}KC(){if(this.EI){!this.MI||this.II&&this.II.toString()===this.If||(this.II=new R.Lh(this.If,{rm:!0}));const t=-this.bKt();this.CI.Am(this.MI?this.II.vm():this.If,this.KI,this.LI,this.RI,t),this.EI=!1}}ZC(){this.FI&&(this.QC(),this.FI=!1)}QC(){let i=0,e=this.yI,h=R.fo(this.CI.Fm());for(const s of h){s.Rg(NaN),s.Pg(NaN);for(const r of s.Qm())r.Rg(NaN),r.Pg(NaN)}const t=h.reduce((t,s)=>t+s.qm(),0)-e;"center"===this._I?i=Math.max(Math.floor(this.BI/2-t/2),0):"bottom"===this._I&&(i=Math.floor(this.BI-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.qm();if(0<t&&i>this.BI-(o-e))break;0<=i&&this.hR(n,i),i+=o}}hR(t,s){let i=0;"center"===this.TI?i=Math.max(Math.floor((this.LI-t.Lm())/2),0):"right"===this.TI&&(i=Math.max(Math.floor(this.LI-t.Lm()),0)),t.Rg(i),t.Pg(s);for(const e of t.Qm())e.zm()||(this.xKt(e,i,s),i+=e.Lm())}xKt(t,s,i){const e=t.kg("offsetx"),h=(s+=e?r(e.param,t.qm()):0,t.kg("offsety"));i+=h?r(h.param,t.qm()):0,t.Rg(s),t.Pg(i)}Nv(t,s,i,e){this.LC(),this.OI=0;const h=R.fo(this.CI.Fm()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.GKt(t,o,s,i,r,n)}GKt(t,s,i,e,h,r){const n=s.Ag(),o=s.Eg();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.qm();for(const l of s.Qm())this.oR(t,l,i,e,h,r,a)}}oR(o,a,l,u,c,f,d){let p=a.Ag(),m=a.Eg();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.og(),n=a.Lm();if(-1!==this.kI){if(this.OI>=this.kI)return;this.OI+r.length>this.kI&&(r=r.slice(0,this.kI-this.OI),n=this.ZI(a).width),this.OI+=r.length}const g=a.kg("background");if(!(R.pp(r)&&!g||a.Og("hide"))){const y=a.kg("scale"),S=(y?parseFloat(y.param):this.pz)*this.gKt,w=a.kg("scalex"),b=(w?parseFloat(w.param):1)*S,M=a.kg("scaley"),v=(M?parseFloat(M.param):1)*S,x=this.mYt.XYt()*v,G=this.yI;m+=d-G-x;let t=1,s=a.kg("opacity"),i=(s&&(t=parseFloat(s.param)/100),g&&(o.yw(),E.Ya(C(g.param)),E.ba(E._a()*t*this.FM._a()),E.Oa(),o.LM(E),A.set(p,m,p+n,m+x),A.Nl()>this.LI&&A.Fl(this.LI),P.Ou(A,c,f),P.offset(l,u),o.du(P),o.lw()),a.kg("color")),e=(i?(E.Ya(C(i.param)),E.ba(this.FM._a())):E.I(this.FM),E.ba(E._a()*t),E.Oa(),o.LM(E),this.mYt.qYt()*b),h=Math.abs(this.bKt());for(const T of r){const _=this.mYt.j$t(T);if(_){const I=_.Y$t()*b;if(p+I>this.LI+h+1e-5)return;A.set(p,m,p+e,m+x),P.Ou(A,c,f),P.offset(l,u),o.eb(P,_.cR()),p+=I+this.yKt}else p+=this.mYt.vKt()*b+this.yKt}}}}yYt(){return this.mYt}aC(t){this.MI!==(t=!!t)&&(this.MI=t,this.dI())}cI(){return this.MI}Af(t){this.If!==t&&(this.If=t,this.dI())}RC(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.RI!==t&&(this.RI=t,this.dI())}jYt(t){if(!s.has(t))throw new Error("invalid alignment");this.TI!==t&&(this.TI=t,this.oC())}VYt(t){if(!i.has(t))throw new Error("invalid alignment");this._I!==t&&(this._I=t,this.oC())}E5(t){this.pz!==t&&(this.pz=t,this.dI())}F5(){return this.pz}zYt(t){this.gKt!==t&&(this.gKt=t,this.dI())}CPt(){return this.gKt}UYt(t){this.yKt!==t&&(this.yKt=t,this.dI())}bKt(){return this.yKt}pC(t){this.yI=t,this.dI()}mC(){return this.yI}fP(t){t=R.Rr(t,0,1),this.FM.a=t}LM(t){this.FM.equals(t)||this.FM.I(t)}pP(){return this.FM}OC(){return this.LC(),this.CI.Sg()}BC(){this.LC();const t=this.mYt.XYt()*this.pz,s=this.yI,i=t+s;return this.CI.Dm()*i-s}}}{const Du=self.Ws,ku={width:256,height:256,TKt:16,_Kt:16,characterSet:""};self.gYt=class{constructor(t){if((t=Object.assign({},ku,t)).width<=0||t.height<=0||t.TKt<=0||t._Kt<=0)throw new Error("invalid size");this.bg=t.width,this.Mg=t.height,this.TYt=t.TKt,this._Yt=t._Kt,this.IYt=t.characterSet,this.IKt="",this.CKt=null,this.RKt=!1,this.AKt=-1,this.fKt=new Du.Rect(0,0,1,1),this.PKt=new Map,this.EKt=!0,this.FKt=new Set}Gr(){this.fKt=null,this.DKt(),this.PKt=null,this.FKt&&this.FKt.clear(),this.FKt=null}DKt(){for(let t of this.PKt.values())t.Gr();this.PKt.clear()}SKt(t){this.FKt.add(t)}wKt(t){this.FKt.delete(t)}xYt(){if(this.EKt){this.DKt();let s=Du.Np(this.IYt),h=Math.floor(this.bg/this.TYt),t=Math.floor(this.Mg/this._Yt),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.PKt.has(i)){let t=e%h,s=Math.floor(e/h);this.PKt.set(i,Du.vr(self.lKt,this,i,t*this.TYt,s*this._Yt))}}if(this.RKt=!1,this.AKt=-1,Array.isArray(this.CKt))for(let s of this.CKt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.TYt)for(let s of t){let t=this.PKt.get(s);t?(t.V$t(i),this.RKt=!0):" "===s&&(this.AKt=i,this.RKt=!0)}}this.EKt=!1;for(let t of this.FKt)t.dI()}}U$t(){this.RKt=!0;for(const t of this.FKt)t.dI()}j$t(t){return this.xYt(),this.PKt.get(t)||null}MKt(){return this.RKt}Hm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.bg!==t&&(this.bg=t,this.EKt=!0)}Lm(){return this.bg}Bm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.Mg!==t&&(this.Mg=t,this.EKt=!0)}qm(){return this.Mg}JYt(t){if(!this.fKt.equals(t)){this.fKt.I(t);for(const s of this.PKt.values())s.pKt()}}cR(){return this.fKt}wYt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.TYt!==t&&(this.TYt=t,this.EKt=!0)}qYt(){return this.TYt}bYt(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this._Yt!==t&&(this._Yt=t,this.EKt=!0)}XYt(){return this._Yt}MYt(t){this.IYt!==t&&(this.IYt=t,this.EKt=!0)}YYt(){return this.IYt}vYt(t){if(this.IKt!==t&&(this.IKt=t,this.EKt=!0,this.CKt=null,this.IKt.length))try{this.CKt=JSON.parse(this.IKt)}catch(t){this.CKt=null}}$Yt(){return this.IKt}W$t(t){this.AKt!==(t=t<0?-1:t)&&(this.AKt=t,0<=this.AKt)&&(this.RKt=!0)}vKt(){return this.AKt<0?this.TYt:this.AKt}}}{const Ou=self.Ws;Ou.VY.kKt=class extends Ou.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const Lu=self.Ws;Lu.VY.kKt.jIt=class extends Lu.aGt{constructor(t){super(t),this.OKt=null,this.Ry=null}Gr(){this.mY(),super.Gr()}qxt(){this.kW().GO(this._f)}async lY(t){const s=this.kW();this.Ry=await s.T_t()}LKt(t,s,i,e){!this.OKt&&this.Ry&&(this.OKt=new self.BKt(this),this.OKt.NKt(this.Ry,t,s,i,e))}mY(){this.OKt&&(this.OKt.Gr(),this.OKt=null)}WKt(){return this.OKt}}}{const Bu=self.Ws,Nu=Bu.vr(Bu.Rect),Wu=Bu.vr(Bu.Rect),ju=Bu.vr(Bu.du);Bu.VY.kKt.Instance=class extends Bu.jGt{constructor(t,s){super(t),this.jKt=16,this.VKt=16,this.UKt=16,this.HKt=16,this.zKt=1,this.JKt=1,this.qKt=!0,this.XKt=null,s&&(this.jKt=s[0],this.VKt=s[1],this.UKt=s[2],this.HKt=s[3],this.zKt=s[4],this.JKt=s[5],this.qKt=!!s[8],this.rO().yB(!!s[6])),this.mGt.LKt(this.jKt,this.VKt,this.UKt,this.HKt)}Gr(){super.Gr()}YKt(t){this.XKt=t}Nv(t){const s=this.rO(),i=s.L4();this.$Kt(t,i.yn(),i.Sn(),s.Lm(),s.qm())}$Kt(t,s,i,e,h){let r=this.mGt.WKt();if(r||(this.mGt.LKt(this.jKt,this.VKt,this.UKt,this.HKt),r=this.mGt.WKt())){const n=r.KKt(),o=r.ZKt(),a=Math.min(this.jKt,n),l=Math.min(this.VKt,n),u=Math.min(this.UKt,o),c=Math.min(this.HKt,o),f=n-l,d=o-c,p=this.qKt?1:0,m=this.zKt,g=this.JKt;if(0<a&&0<u&&this.QKt(t,r.Gx(),0,0,a+p,u+p,s,i,a+p,u+p),0<l&&0<u&&this.QKt(t,r.Gx(),f-p,0,l+p,u+p,s+e-l-p,i,l+p,u+p),0<l&&0<c&&this.QKt(t,r.Gx(),f-p,d-p,l+p,c+p,s+e-l-p,i+h-c-p,l+p,c+p),0<a&&0<c&&this.QKt(t,r.Gx(),0,d-p,a+p,c+p,s,i+h-c-p,a+p,c+p),0===m){const y=2===g?0:p;0<a&&u<d&&this.tZt(t,r.sZt(),s,i+u,a+y,h-u-c,0,0),0<l&&u<d&&this.tZt(t,r.iZt(),s+e-l-y,i+u,l+y,h-u-c,y,0),0<u&&a<f&&this.tZt(t,r.eZt(),s+a,i,e-a-l,u+y,0,0),0<c&&a<f&&this.tZt(t,r.hZt(),s+a,i+h-c-y,e-a-l,c+y,0,y)}else 1===m&&(0<a&&u<d&&this.QKt(t,r.Gx(),0,u,a,d-u,s,i+u,a,h-u-c),0<l&&u<d&&this.QKt(t,r.Gx(),f,u,l,d-u,s+e-l,i+u,l,h-u-c),0<u&&a<f&&this.QKt(t,r.Gx(),a,0,f-a,u,s+a,i,e-a-l,u),0<c)&&a<f&&this.QKt(t,r.Gx(),a,d,f-a,c,s+a,i+h-c,e-a-l,c);u<d&&a<f&&(0===g?this.tZt(t,r.rZt(),s+a,i+u,e-a-l,h-u-c,0,0):1===g&&this.QKt(t,r.Gx(),a,u,f-a,d-u,s+a,i+u,e-a-l,h-u-c))}}QKt(t,s,i,e,h,r,n,o,a,l){const u=s.Lm(),c=s.qm();if(t.mP(s),Nu.set(n,o,n+a,o+l),Wu.set(i/u,e/c,(i+h)/u,(e+r)/c),null===this.XKt){const f=this.rO(),d=f.L4(),p=d.yn(),m=d.Sn();Nu.offset(-p,-m),ju.ku(Nu,f.GetAngle()),ju.offset(p,m),t.eb(ju,Wu)}else this.XKt(Nu,Wu)}tZt(t,s,i,e,h,r,n,o){const a=s.Lm(),l=s.qm();if(t.mP(s),Nu.set(i,e,i+h,e+r),Wu.set(-n/a,-o/l,(h-n)/a,(r-o)/l),null===this.XKt){const u=this.rO(),c=u.L4(),f=c.yn(),d=c.Sn();Nu.offset(-f,-d),ju.ku(Nu,u.GetAngle()),ju.offset(f,d),t.eb(ju,Wu)}else this.XKt(Nu,Wu)}YGt(){this.Wft.kW()}cnt(t){}ynt(t,s){}}}{const Vu=self.Ws;Vu.VY.kKt.WY={}}{const Uu=self.Ws;Uu.VY.kKt.Irt={NVt(t){this.rO().OM(t),this._f.fO()}}}{const Hu=self.Ws;Hu.VY.kKt.Crt={}}{let c=function(t){const s=zu.Uo(t.width,t.height),i=s.getContext("2d");return i.drawImage(t,0,0),s};c;const zu=self.Ws;self.BKt=class{constructor(t){this.mGt=t,this._f=this.mGt.TO(),this.e2=null,this.nZt=null,this.oZt=null,this.aZt=null,this.lZt=null,this.uZt=null,this.a7=0,this.l7=0,this.Yb=this._f.gM(),this.my=!1,this.rC=!1}Gr(){this.Yb.lR()||(this.Yb.yx(this.e2),this.Yb.yx(this.nZt),this.Yb.yx(this.oZt),this.Yb.yx(this.aZt),this.Yb.yx(this.lZt),this.Yb.yx(this.uZt)),this.e2=null,this.nZt=null,this.oZt=null,this.aZt=null,this.lZt=null,this.uZt=null,this.mGt=null,this.Yb=null,this.rC=!0}Tr(){return this.rC}NKt(t,s,i,e,h){this.cZt(t,s,i,e,h)}fZt(){return!!this.e2}cZt(t,s,i,e,h){if(!this.rC){const r=t.width,n=t.height,o=(this.a7=r,this.l7=n,s=Math.min(Math.floor(s),r),i=Math.min(Math.floor(i),r),e=Math.min(Math.floor(e),n),r-i),a=n-(h=Math.min(Math.floor(h),n)),l=this._f.ID(),u=this._f.dL().c7();this.e2=this.Yb.KP(c(t),{$v:l,Kv:u}),s<o&&e<a&&(this.nZt=this.Yb.KP(this.dZt(c(t),s,e,o,a),{Xv:"repeat",Yv:"repeat",$v:l,Kv:u})),0<s&&e<a&&(this.oZt=this.Yb.KP(this.dZt(c(t),0,e,s,a),{Yv:"repeat",$v:l,Kv:u})),0<i&&e<a&&(this.aZt=this.Yb.KP(this.dZt(c(t),o,e,r,a),{Yv:"repeat",$v:l,Kv:u})),0<e&&s<o&&(this.lZt=this.Yb.KP(this.dZt(c(t),s,0,o,e),{Xv:"repeat",$v:l,Kv:u})),0<h&&s<o&&(this.uZt=this.Yb.KP(this.dZt(c(t),s,a,o,n),{Xv:"repeat",$v:l,Kv:u}))}}dZt(t,s,i,e,h){const r=e-s,n=h-i,o=zu.Uo(r,n),a=o.getContext("2d");return a.drawImage(t,s,i,r,n,0,0,r,n),o}KKt(){return this.a7}ZKt(){return this.l7}Gx(){return this.e2}rZt(){return this.nZt}sZt(){return this.oZt}iZt(){return this.aZt}eZt(){return this.lZt}hZt(){return this.uZt}}}{const Ju=self.Ws,qu=[];Ju.VY.Audio=class extends Ju.Gxt{constructor(t){super(t)}pZt(t){qu.push(t)}static async mZt(){await Promise.all(qu),Ju.$n(qu)}Gr(){super.Gr()}}}{let s=function(){return i.i5().K6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const Xu=self.Ws,Yu=self.Ks;Xu.VY.Audio.jIt=class extends Xu.aGt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}Xxt(){return self.gZt}};let i=null;self.gZt=class extends self.e5{constructor(t){super(t),i=t}get yZt(){return t().GetAudioContextExtern()}get SZt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().wZt()}set isSilent(t){s().bZt(t)}get masterVolume(){return s().MZt()}set masterVolume(t){Yu.Te(t),s().vZt(t)}xZt(){s().GZt()}}}{const $u=self.Ws,Ku=["interactive","balanced","playback"];$u.VY.Audio.Instance=class extends $u.dGt{constructor(t,s){super(t,"audio"),this.TZt=0,this._Zt=[],this.IZt=!0,this.CZt=0,this.RZt=0,this.AZt=!1,this.PZt=1,this.EZt=1,this.FZt=[this._f.s9()/2,this._f.i9()/2,600],this.DZt=[0,0,-1],this.kZt=[0,1,0],this.OZt=600,this.LZt=1e4,this.BZt=1,this.NZt=null,this.WZt=-1,this.jZt=1,this.VZt=!1,this.UZt=0,this.HZt="suspended",this.zZt=0,this.JZt=new Map,this.qZt=0,this.XZt=0,this.YZt=new Map,this.$Zt=new Map;let i="interactive";s&&(this.CZt=s[0],this.RZt=s[1],this.AZt=s[2],i=Ku[s[3]],this.IZt=s[4],this.PZt=s[5],this.EZt=s[6],this.FZt[2]=s[7],this.OZt=s[8],this.LZt=s[9],this.BZt=s[10]),this.KZt=[],this.ZZt=[],this.QZt=[],this.GGt([["state",t=>this.tQt(t)],["audiocontext-state",t=>this.sQt(t)],["fxstate",t=>this.iQt(t)],["trigger",t=>this.eQt(t)],["buffer-metadata",t=>this.hQt(t)]]);const e=this.TO().r0(),h=(this.L0=new $u.D0($u.C0.F0(e,"instancedestroy",t=>this.rQt(t.aW)),$u.C0.F0(e,"afterload",()=>this.pK()),$u.C0.F0(e,"suspend",()=>this.nQt()),$u.C0.F0(e,"resume",()=>this.oQt())),this._f.lL()),r="Safari"===$u.di.yi,n=this._f.mNt()||"macos-wkwebview"===h,o=this._f.lD().SH(),a="playable-ad-single-file"===this._f.lL(),l=r||n||o||a;this._f.SO(this._Gt("create-audio-context",{preloadList:this._f.lD().YH().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.CZt,latencyHint:i,panningModel:this.PZt,distanceModel:this.EZt,refDistance:this.OZt,maxDistance:this.LZt,rolloffFactor:this.BZt,listenerPos:this.FZt,usePlayMusicAsSoundWorkaround:l}).then(t=>{this.UZt=t.sampleRate,this.HZt=t.audioContextState,this.zZt=t.outputLatency})),this.EGt()}Gr(){this.NZt=null,super.Gr()}aQt(t){return this.IZt?t.split(" ").filter(t=>!!t):t?[t]:[]}lQt(s,t){for(const i of t){let t=!1;for(const e of s)if($u.Gh(e,i)){t=!0;break}if(!t)return!1}return!0}uQt(t,s){return this.lQt(t,this.aQt(s))}pZt(t){this.r5().pZt(t)}rQt(t){this.NZt===t&&(this.NZt=null)}cQt(t){return Math.pow(10,t/20)}fQt(t){const s=this.cQt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}dQt(t){return Math.log(t)/Math.log(10)*20}pQt(t){return this.dQt(Math.max(Math.min(t,1),0))}nQt(){this.AZt||this.TGt("set-suspended",{isSuspended:!0})}oQt(){this.AZt||this.TGt("set-suspended",{isSuspended:!1})}tQt(t){const s=t.tickCount,i=(this.zZt=t.outputLatency,this.KZt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.KZt=t.audioInstances,this.QZt=t.analysers,0<i.length&&$u.rr(this.KZt,i)}hQt(t){this.YZt.set(t.originalUrl,{duration:t.duration})}sQt(t){this.HZt=t.audioContextState}Lrt(){return this._f.ckt()?"running":this.HZt}iQt(t){this.ZZt=t.fxstate}mQt(t){const s=this.aQt(t);for(const i of this.KZt)if(this.lQt(i.tags,s))return i;return null}gQt(t){const s=this.aQt(t);return this.KZt.some(t=>this.lQt(t.tags,s)&&t.isPlaying)}yQt(t,s,i,e,h){if(this.gQt(s))return null;const r=this.YZt.get(t),n={tags:this.aQt(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.KZt.push(n),n}SQt(t){const s=this.aQt(t);for(const i of this.KZt)this.lQt(i.tags,s)&&(i.isPlaying=!1)}async eQt(t){const s=t.type,i=(this._Zt=t.tags,t.aiid);if("ended"===s){for(const e of this.KZt)if(e.aiid===i){e.isPlaying=!1;break}await this.KN($u.VY.Audio.WY.wQt)}else"fade-ended"===s&&await this.KN($u.VY.Audio.WY.bQt)}MQt(t){return this.uQt(this._Zt,t)}cZ(){const t={timeScale:this._f.pk(),gameTime:this._f.aNt(),instPans:this.vQt(),tickCount:this._f.lNt()};if(this.NZt){const s=this.NZt.rO();this.FZt[0]=s.qM(),this.FZt[1]=s.$M(),t.listenerPos=this.FZt,t.listenerOrientation=[...this.DZt,...this.kZt]}this.TGt("tick",t)}xQt(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,l=t*n,u=s*n;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}vQt(){return this.KZt.filter(t=>-1!==t.uid).map(t=>this._f.tO(t.uid)).filter(t=>t).map(t=>{const s=t.rO(),i=s.nO().GetAngle(),[e,h]=this.xQt(s.qM(),s.$M(),-i,this.FZt[0],this.FZt[1]);return{uid:t.vN(),x:e,y:h,z:s.E4(),angle:s.GetAngle()-i}})}GQt(t,s){for(const i of this.QZt)if(i.index===s&&$u.Gh(i.tag,t))return i;return null}TQt(t){for(const s of this.aQt(t)){const i=s.toLowerCase();this.JZt.set(i,(this.JZt.get(i)||0)+1)}}wZt(){return this.VZt}bZt(t){this.VZt!==(t=!!t)&&(this.VZt=t,this.TGt("set-silent",{isSilent:t}))}MZt(){return this.jZt}vZt(t){this.jZt!==t&&(this.jZt=t,this.TGt("set-master-volume",{vol:t}))}GZt(){this.TGt("stop-all");for(const t of this.KZt)t.isPlaying=!1}_Qt(t){return!t.hasOwnProperty("placeholder")&&3!==this.RZt&&!(t.isMusic&&1===this.RZt||!t.isMusic&&2===this.RZt)}av(){return{isSilent:this.VZt,masterVolume:this.jZt,listenerZ:this.FZt[2],listenerForwardVec:this.DZt,listenerUpVec:this.kZt,listenerUid:this.NZt?this.NZt.vN():-1,remoteUrls:[...this.$Zt.entries()],playing:this.KZt.filter(t=>this._Qt(t)),effects:this.ZZt,analysers:this.QZt}}lv(t){if(this.VZt=t.isSilent,this.jZt=t.masterVolume,this.FZt[2]=t.listenerZ,this.NZt=null,this.WZt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.DZt=t.listenerForwardVec:this.DZt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.kZt=t.listenerUpVec:this.kZt=[0,1,0],this.$Zt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.$Zt.set(s,i);this.KZt=t.playing;for(const e of this.KZt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.ZZt=t.effects,this.QZt=t.analysers}pK(){if(-1!==this.WZt&&(this.NZt=this._f.tO(this.WZt),this.WZt=-1,this.NZt)){const t=this.NZt.rO();this.FZt[0]=t.qM(),this.FZt[1]=t.$M()}for(const s of this.KZt){const i=this._f.lD().XH(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.ZZt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this._f.lD().XH(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.TGt("load-state",{saveLoadMode:this.RZt,timeScale:this._f.pk(),gameTime:this._f.aNt(),listenerPos:this.FZt,listenerOrientation:[...this.DZt,...this.kZt],isSilent:this.VZt,masterVolume:this.jZt,playing:this.KZt.filter(t=>null!==t.bufferUrl),effects:this.ZZt})}OGt(){const t=[];for(const[i,e]of Object.entries(this.ZZt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.KZt.length},...this.KZt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Zu=self.Ws;Zu.VY.Audio.WY={wQt(t){return this.MQt(t)},bQt(t){return this.MQt(t)},IQt(){return this.XZt===this.qZt},CQt(){return!0},RQt(){return this.wZt()},AQt(){for(const t of this.KZt)if(t.isPlaying)return!0;return!1},PQt(t){return this.gQt(t)}}}{const Qu=self.Ws,tc=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];Qu.VY.Audio.Irt={Play(t,s,i,e,h){const r=Qu.VY.Audio.Irt.EQt.call(this,t,s,i,e,h);return this.pZt(r),r},Brt(t,s,i,e){Qu.VY.Audio.Irt.EQt.call(this,t,0,s,0,i,e)},async EQt(t,s,i,e,h,r){if(!this.VZt){const n=t[1],o=this._f.lD().XH(t[0]);if(o){const a=this.TZt,l=(this.TZt=0,this.yQt(t[0],h,n,0!==s,this.fQt(i)));try{await this._Gt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.aQt(h),isLooping:0!==s,vol:this.fQt(i),stereoPan:Qu.Rr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this._f.lNt())}}}},async FQt(t,s,i,e,h,r,n,o,a,l,u){if(!this.VZt){const c=t[1],f=this._f.lD().XH(t[0]);if(f){const d=this.TZt,p=(this.TZt=0,this.yQt(t[0],u,c,0!==s,this.fQt(i)));try{await this._Gt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.aQt(u),isLooping:0!==s,vol:this.fQt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:Qu.Pr(n),innerAngle:Qu.Pr(o),outerAngle:Qu.Pr(a),outerGain:this.fQt(l)}})}finally{p&&(p.placeholder=this._f.lNt())}}}},async DQt(t,s,i,e,h,r,n,o){if(!this.VZt&&e){const a=e.yvt();if(a&&a.rO()){const l=a.rO(),u=l.nO().GetAngle(),[c,f]=this.xQt(l.qM(),l.$M(),-u,this.FZt[0],this.FZt[1]),d=t[1],p=this._f.lD().XH(t[0]);if(p){const m=this.TZt,g=(this.TZt=0,this.yQt(t[0],o,d,0!==s,this.fQt(i)));try{await this._Gt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.aQt(o),isLooping:0!==s,vol:this.fQt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.E4(),angle:l.GetAngle()-u,innerAngle:Qu.Pr(h),outerAngle:Qu.Pr(r),outerGain:this.fQt(n),uid:a.vN()}})}finally{g&&(g.placeholder=this._f.lNt())}}}}},async kQt(t,s,i,e,h,r){if(!this.VZt){const n=1===t,o=this._f.lD().XH(s)||this.$Zt.get(s.toLowerCase());if(o){const a=this.TZt,l=(this.TZt=0,this.yQt(s,r,n,0!==i,this.fQt(e)));try{await this._Gt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.aQt(r),isLooping:0!==i,vol:this.fQt(e),stereoPan:Qu.Rr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this._f.lNt())}}}},async OQt(t,s,i,e,h,r,n,o,a,l,u,c){if(!this.VZt){const f=1===t,d=this._f.lD().XH(s)||this.$Zt.get(s.toLowerCase());if(d){const p=this.TZt,m=(this.TZt=0,this.yQt(s,c,f,0!==i,this.fQt(e)));try{await this._Gt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.aQt(c),isLooping:0!==i,vol:this.fQt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:Qu.Pr(o),innerAngle:Qu.Pr(a),outerAngle:Qu.Pr(l),outerGain:this.fQt(u)}})}finally{m&&(m.placeholder=this._f.lNt())}}}},async LQt(t,s,i,e,h,r,n,o,a){if(!this.VZt&&!this.VZt&&h){const l=h.yvt();if(l&&l.rO()){const u=l.rO(),c=u.nO().GetAngle(),[f,d]=this.xQt(u.qM(),u.$M(),-c,this.FZt[0],this.FZt[1]),p=1===t,m=this._f.lD().XH(s)||this.$Zt.get(s.toLowerCase());if(m){const g=this.TZt,y=(this.TZt=0,this.yQt(s,a,p,0!==i,this.fQt(e)));try{await this._Gt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.aQt(a),isLooping:0!==i,vol:this.fQt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.E4(),angle:u.GetAngle()-c,innerAngle:Qu.Pr(r),outerAngle:Qu.Pr(n),outerGain:this.fQt(o),uid:l.vN()}})}finally{y&&(y.placeholder=this._f.lNt())}}}}},BQt(t,s){this.TGt("set-looping",{tags:this.aQt(t),isLooping:0===s})},NQt(t,s){this.TGt("set-muted",{tags:this.aQt(t),isMuted:0===s})},krt(t,s){this.TGt("set-volume",{tags:this.aQt(t),vol:this.fQt(s)})},WQt(t,s,i,e){this.TGt("fade-volume",{tags:this.aQt(t),vol:this.fQt(s),duration:i,stopOnEnd:0===e})},jQt(t,s){this.TGt("set-stereo-pan",{tags:this.aQt(t),p:Qu.Rr(s/100,-1,1)})},async VQt(t){const s=t[1],i=this._f.lD().XH(t[0]);i&&(this.qZt++,await this._Gt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.XZt++)},async UQt(t,s){const i=1===t,e=this._f.lD().XH(s)||this.$Zt.get(s.toLowerCase());e&&(this.qZt++,await this._Gt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.XZt++)},d8(t,s){this.TGt("set-playback-rate",{tags:this.aQt(t),rate:Math.max(s,0)})},e8(t){this.SQt(t),this.TGt("stop",{tags:this.aQt(t)})},HQt(){this.GZt()},zQt(t,s){this.TGt("set-paused",{tags:this.aQt(t),paused:0===s})},JQt(t,s){this.TGt("seek",{tags:this.aQt(t),pos:s})},qQt(t){2===t&&(t=this.wZt()?1:0),this.bZt(0===t)},XQt(t){const s=this.fQt(t);this.vZt(s)},YQt(t,s,i,e,h,r,n){const o=tc[s];this.TQt(t),this.TGt("add-effect",{type:"filter",tags:this.aQt(t),params:[o,i,e,h,r,Qu.Rr(n/100,0,1)]})},$Qt(t,s,i,e){this.TQt(t),this.TGt("add-effect",{type:"delay",tags:this.aQt(t),params:[s,this.fQt(i),Qu.Rr(e/100,0,1)]})},KQt(t,s,i,e,h,r){this.TQt(t),this.TGt("add-effect",{type:"flanger",tags:this.aQt(t),params:[s/1e3,i/1e3,e,h/100,Qu.Rr(r/100,0,1)]})},ZQt(t,s,i,e,h,r,n){this.TQt(t),this.TGt("add-effect",{type:"phaser",tags:this.aQt(t),params:[s,i,e,h,r,Qu.Rr(n/100,0,1)]})},QQt(t,s,i,e){const h=this._f.lD().XH(s[0]);h&&(this.TQt(t),this.TGt("add-effect",{type:"convolution",tags:this.aQt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,Qu.Rr(e/100,0,1)]}))},tts(t,s){this.TQt(t),this.TGt("add-effect",{type:"gain",tags:this.aQt(t),params:[this.fQt(s)]})},sts(t,s){this.TQt(t),this.TGt("add-effect",{type:"stereopan",tags:this.aQt(t),params:[Qu.Rr(s/100,-1,1)]})},its(t){this.TQt(t),this.TGt("add-effect",{type:"gain",tags:this.aQt(t),params:[0]})},ets(t,s,i){this.TQt(t),this.TGt("add-effect",{type:"tremolo",tags:this.aQt(t),params:[s,Qu.Rr(i/100,0,1)]})},hts(t,s,i){this.TQt(t),this.TGt("add-effect",{type:"ringmod",tags:this.aQt(t),params:[s,Qu.Rr(i/100,0,1)]})},rts(t,s,i,e,h,r){this.TQt(t),this.TGt("add-effect",{type:"distortion",tags:this.aQt(t),params:[this.cQt(s),this.cQt(i),e,this.cQt(h),Qu.Rr(r/100,0,1)]})},nts(t,s,i,e,h,r){this.TQt(t),this.TGt("add-effect",{type:"compressor",tags:this.aQt(t),params:[s,i,e,h/1e3,r/1e3]})},ots(t,s,i){this.TQt(t),this.TGt("add-effect",{type:"analyser",tags:this.aQt(t),params:[s,i]})},ats(t){const s=this.aQt(t);for(const i of s)this.JZt.set(i.toLowerCase(),0);this.TGt("remove-effects",{tags:s}),this.ZZt={}},yW(t,s,i,e,h,r){this.TGt("set-effect-param",{tags:this.aQt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},lts(t){if(t){const s=t.yvt();s&&s.rO()&&(this.NZt=s)}},uts(t){this.FZt[2]=t},cts(t,s,i,e,h,r){this.DZt[0]=t,this.DZt[1]=s,this.DZt[2]=-i,this.kZt[0]=e,this.kZt[1]=h,this.kZt[2]=-r},fts(t){this.TZt=Math.max(t,0)},dts(t){const s=t[1],i=this._f.lD().XH(t[0]);i&&this.TGt("unload",{url:i.url,type:i.type,isMusic:s})},pts(t,s){const i=1===t,e=this._f.lD().XH(s)||this.$Zt.get(s.toLowerCase());e&&this.TGt("unload",{url:e.url,type:e.type,isMusic:i})},gts(){this.TGt("unload-all")},yts(t,s,i){this.$Zt.set(i.toLowerCase(),{url:t,type:s})}}}{const sc=self.Ws;sc.VY.Audio.Crt={Sts(t){const s=this.mQt(t);return s?s.duration:0},Prt(t){const s=this.mQt(t);return s?s.playbackTime:0},Ort(t){const s=this.mQt(t);return s?s.playbackRate:0},Ert(t){const s=this.mQt(t);return s?this.pQt(s.volume):0},wts(){return this.pQt(this.MZt())},bts(t){return this.JZt.get(t.toLowerCase())||0},Mts(t,s){const i=this.GQt(t,Math.floor(s));return i?i.binCount:0},vts(t,s,i){const e=this.GQt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},xts(t,s){const i=this.GQt(t,Math.floor(s));return i?i.peak:0},Gts(t,s){const i=this.GQt(t,Math.floor(s));return i?i.rms:0},Tts(){return this.UZt},_ts(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},Its(){return this.zZt},Cts(t,s){return 0==(t=sc.Rr(+t,0,100)/100)?-1/0:t<.1?this.pQt(sc.Ot(0,this.fQt(s),10*t)):sc.Ot(s,0,(t-.1)/.9)}}}{const ic=self.Ws;ic.VY.gamepad=class extends ic.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{const ec=self.Ws;ec.VY.gamepad.jIt=class extends ec.aGt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const hc=self.Ws;class rc{constructor(t,s,i){this.Iy=t,this.Cf=s,this.Rts=new Set(i),this.Ats=new nc,this.Pts=new nc,this.Ets=[],this.Fts=[]}Dts(){return this.Cf}D7(t,s){const i=this.Pts;this.Pts=this.Ats,this.Ats=i,this.Ats.D7(t,s),hc.Qn(this.Ets,this.Ats.kts(),!1),hc.Qn(this.Fts,this.Ats.kts(),!1);for(let t=0,s=this.Ats.kts();t<s;++t){const e=this.Pts.Ots(t),h=this.Ats.Ots(t);.5<=h&&e<.5&&(this.Ets[t]=!0),h<.5&&.5<=e&&(this.Fts[t]=!0)}}kts(){return this.Ats.kts()}Lts(){return this.Ats.Lts()}Bts(t){return!((t=Math.floor(t))<0||t>=this.Ets.length)&&this.Ets[t]}Nts(t){return!((t=Math.floor(t))<0||t>=this.Fts.length)&&this.Fts[t]}Wts(){this.Ets.fill(!1),this.Fts.fill(!1)}Ots(t){return this.Ats.Ots(t)}jts(t){return.5<=this.Ats.Ots(t)}Vts(t){return this.Ats.Vts(t)}rD(){return this.Iy}Uts(){return this.Rts}}class nc{constructor(){this.Hts=[],this.zts=[]}D7(s,t){let i=this.Hts,e=0;for(let t=s.length;e<t;++e){const h=s[e];e===i.length?i.push(h.value):i[e]=h.value}e<i.length&&hc.Yn(i,e),hc.eo(this.zts,t)}kts(){return this.Hts.length}Lts(){return this.zts.length}Ots(t){return(t=Math.floor(t))<0||t>=this.Hts.length?0:this.Hts[t]}Vts(t){return(t=Math.floor(t))<0||t>=this.zts.length?0:this.zts[t]}}hc.VY.gamepad.Instance=class extends hc.dGt{constructor(t,s){super(t,"gamepad"),this.Jts=25,this.qts=0,this.Xts=-1,this.Yts=new Map,s&&(this.Jts=s[0]),this.xGt("gamepad-connected",t=>this.$ts(t)),this.xGt("gamepad-disconnected",t=>this.Kts(t)),this.xGt("input-update",t=>this.Zts(t));const i=this.TO().r0();this.L0=new hc.D0(hc.C0.F0(i,"tick2",()=>this.hK()),hc.C0.F0(i,"suspend",()=>this.nQt()),hc.C0.F0(i,"resume",()=>this.oQt())),this.TGt("ready")}Gr(){super.Gr()}$ts(t){const s=t.index,i=t.id,e=t.vibrationEffects;this.Yts.has(s)||(this.Yts.set(s,new rc(s,i,e)),this.Xts=s,this.YN(hc.VY.gamepad.WY.Qts),this.Xts=-1)}Kts(t){const s=t.index;this.Xts=s,this.YN(hc.VY.gamepad.WY.tss),this.Xts=-1,this.Yts.delete(s)}Zts(t){for(const s of t)this.sss(s)}sss(t){const s=t.index,i=(this.Yts.has(s)||this.$ts(t),this.Yts.get(s));i.D7(t.buttons,t.axes);for(let t=0,s=i.kts();t<s;++t)i.Bts(t)&&(this.qts=t)}iss(t){return this.Yts.get(Math.floor(t))||null}ess(t){if(-1===t)return[...this.Yts.values()];{const s=this.Yts.get(Math.floor(t));return s?[s]:[]}}hK(){for(const t of this.Yts.values())t.Wts()}nQt(){this.TGt("suspend")}oQt(){this.TGt("resume")}OGt(){const t="plugins.gamepad";return[{title:t+".name",properties:[{name:t+".debugger.last-button",value:this.qts},{name:t+".properties.analog-deadzone.name",value:this.Jts}]}]}}}{const oc=self.Ws;oc.VY.gamepad.WY={Qts(){return!0},tss(){return!0},jts(t,s){const i=this.iss(t);if(!i)return!1;const e=i.jts(s);return e&&(this.qts=s),e},hss(t,s){const i=this.iss(t);if(!i)return!1;const e=i.Bts(s);return e&&(this.qts=s),e},rss(t,s){const i=this.iss(t);if(!i)return!1;const e=i.Nts(s);return e&&(this.qts=s),e},nss(){return 0<this.Yts.size},oss(t,s,i,e){s=Math.floor(s);const h=this.iss(t);if(!h)return!1;let r=h.Vts(s),n;return n=s%2==0?h.Vts(s+1):h.Vts(s-1),r*=100,n*=100,Math.hypot(r,n)<=this.Jts&&(r=0),oc.compare(r,i,e)},ass(t){const s=this.ess(t);if(0!==s.length){const i=this._f,e=i.BD(),h=i.HD(),r=h.SV(),n=i.KD(),o=n.wV(),a=n.bV(h);i.xV(!1);for(const l of s)for(let t=0,s=l.kts();t<s;++t)l.Bts(t)&&(this.Xts=l.rD(),this.qts=t,e.TV(r),h._V(o,a),e.IV(r),this.Xts=-1);i.xV(!0),n.PV()}return!1},lss(t){const s=this.ess(t);if(0!==s.length){const i=this._f,e=i.BD(),h=i.HD(),r=h.SV(),n=i.KD(),o=n.wV(),a=n.bV(h);i.xV(!1);for(const l of s)for(let t=0,s=l.kts();t<s;++t)l.Nts(t)&&(this.Xts=l.rD(),this.qts=t,e.TV(r),h._V(o,a),e.IV(r),this.Xts=-1);i.xV(!0),n.PV()}return!1},uss(t,s){s=Math.floor(s);const i=this.iss(t);if(!i)return!1;const e=i.jts(s);return e&&(this.qts=s),e},css(t,s){s=Math.floor(s);const i=this.iss(t);if(!i)return!1;const e=i.Bts(s);return e&&(this.qts=s),e},fss(t,s){s=Math.floor(s);const i=this.iss(t);if(!i)return!1;const e=i.Nts(s);return e&&(this.qts=s),e},dss(t,s){const i=this.iss(t);if(!i)return!1;const e=i.Uts();return 0===s?e.has("dual-rumble"):1===s&&e.has("trigger-rumble")},pss(){return!0}}}{const ac=self.Ws;ac.VY.gamepad.Irt={mss(t,s,i,e){this.TGt("vibrate-dual-rumble",{index:t,duration:s,weakMag:ac.Rr(i/100,0,1),strongMag:ac.Rr(e/100,0,1)})},gss(t,s,i,e,h,r){this.TGt("vibrate-trigger-rumble",{index:t,duration:s,weakMag:ac.Rr(i/100,0,1),strongMag:ac.Rr(e/100,0,1),leftMag:ac.Rr(h/100,0,1),rightMag:ac.Rr(r/100,0,1)})},yss(t){this.TGt("reset-vibrate",{index:t})}}}{const lc=self.Ws;lc.VY.gamepad.Crt={Sss(){return this.Yts.size},wss(t){const s=this.iss(t);return s?s.Dts():""},bss(){return this.Xts},Mss(t){const i=this.iss(t);if(!i)return"";let e="";for(let t=0,s=i.Lts();t<s;++t)e+=`Axis ${t}: ${Math.round(100*i.Vts(t))}
`;return e},vss(t){const i=this.iss(t);if(!i)return"";let e="";for(let t=0,s=i.kts();t<s;++t)e+=`Button ${t}: ${Math.round(100*i.Ots(t))}
`;return e},xss(t,s){const i=this.iss(t);return i?i.Ots(Math.floor(s)):0},Gss(t,s){const i=this.iss(t);return i?i.Vts(Math.floor(s)):0},Tss(t){const s=this.iss(t);return s?s.kts():0},_ss(t){const s=this.iss(t);return s?s.Lts():0},Iss(t,s){const i=this.iss(t);return i?100*i.Ots(Math.floor(s)):0},Css(t,s){s=Math.floor(s);const i=this.iss(t);if(!i)return 0;let e=i.Vts(s),h;return h=s%2==0?i.Vts(s+1):i.Vts(s-1),e*=100,h*=100,Math.hypot(e,h)<=this.Jts?0:e},Rss(){return this.qts},Ass(){return this.qts}}}{const uc=self.Ws;uc.VY.Keyboard=class extends uc.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let i=function(){return s.i5().K6()};i;const cc=self.Ws;cc.VY.Keyboard.jIt=class extends cc.aGt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}Xxt(){return self.Pss}};let s=null;self.Pss=class extends self.e5{constructor(t){super(t),(s=t).TO().qk().keyboard=this}Ess(t){const s=i();if("string"==typeof t)return s.Fss(t);if("number"==typeof t)return s.Dss(t);throw new TypeError("expected string or number")}}}{const fc=self.Ws;fc.VY.Keyboard.Instance=class extends fc.dGt{constructor(t,s){super(t,"keyboard"),this.kss=new Set,this.Oss=new Set,this.Lss=0,this.Bss="",this.Nss="",this.Wss=!1;const i=this.TO().r0();this.L0=new fc.D0(fc.C0.F0(i,"keydown",t=>this.jss(t.data)),fc.C0.F0(i,"keyup",t=>this.Vss(t.data)),fc.C0.F0(i,"window-blur",()=>this.Uss()),fc.C0.F0(i,"keyboard-blur",()=>this.Uss())),this._f.SO(this.JM())}Gr(){super.Gr()}async JM(){const t=await this._Gt("init");this.Wss=t.isKeyboardLockSupported}jss(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.kss.has(i)||(this.kss.add(i),this.Oss.add(s),this.Bss=i,this.Lss=s,this.Nss=e,this.YN(fc.VY.Keyboard.WY.Hss),this.YN(fc.VY.Keyboard.WY.zss),this.YN(fc.VY.Keyboard.WY.Jss),this.YN(fc.VY.Keyboard.WY.qss))}Vss(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.kss.delete(i),this.Oss.delete(s),this.Bss=i,this.Lss=s,this.Nss=e,this.YN(fc.VY.Keyboard.WY.Xss),this.YN(fc.VY.Keyboard.WY.Yss),this.YN(fc.VY.Keyboard.WY.$ss),this.YN(fc.VY.Keyboard.WY.Kss)}Uss(){for(const t of this.Oss)this.Oss.delete(t),this.Lss=t,this.YN(fc.VY.Keyboard.WY.Xss),this.YN(fc.VY.Keyboard.WY.Yss),this.YN(fc.VY.Keyboard.WY.Kss);this.kss.clear()}Fss(t){return this.kss.has(t)}Dss(t){return this.Oss.has(t)}av(){return{tk:this.Lss,tkk:this.Nss}}lv(t){this.Lss=t.tk,t.hasOwnProperty("tkk")&&(this.Nss=t.tkk)}OGt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.Lss},{name:t+".debugger.last-key-string",value:fc.VY.Keyboard.Crt.Zss(this.Lss)},{name:t+".debugger.last-typed-key",value:this.Nss}]}]}}}{const dc=self.Ws,pc=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];dc.VY.Keyboard.WY={Fss(t){return this.Oss.has(t)},zss(t){return this.Lss===t},Hss(){return!0},Xss(){return!0},Yss(t){return this.Lss===t},Dss(t){return t=Math.floor(t),this.Oss.has(t)},qss(t){return this.Lss===t},Kss(t){return this.Lss===t},Jss(t){const s=pc[t];return this.Bss===s},$ss(t){const s=pc[t];return this.Bss===s},Qss(t){const s=pc[t];return this.kss.has(s)},tis(){return this.Wss},sis(){return!0},iis(){return!0}}}{const mc=self.Ws;mc.VY.Keyboard.Irt={async eis(s){if(this.Wss){let t=[];s&&(t=s.split(","));const i=await this._Gt("lock-keyboard",{keysArr:t});i.isOk?this.YN(mc.VY.Keyboard.WY.sis):this.YN(mc.VY.Keyboard.WY.iis)}},his(){this.Wss&&this._Gt("unlock-keyboard")}}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"←";case 38:return"↑";case 39:return"→";case 40:return"↓";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const gc=self.Ws;gc.VY.Keyboard.Crt={ris(){return this.Lss},Zss(t){return s(t)},nis(){return this.Nss}}}{const yc=self.Ws;yc.VY.ois=class extends yc.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let h=function(){return s.i5().K6()};h;const Sc=self.Ws,wc=self.Ks;Sc.VY.ois.jIt=class extends Sc.aGt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}Xxt(){return self.ais}};let s=null;self.ais=class extends self.e5{constructor(t){super(t),(s=t).TO().qk().Xk=this}lis(t){return h().uis(t)[0]}cis(t){return h().uis(t)[1]}fis(t){return h().uis(t)}dis(t){return h().pis(t)}mis(t){wc.Re(t),h().gis(t)}yis(t){const s=h(),i=s.TO(),e=i.sL(t);s.Sis(e)}}}{let n=self.Ws,o=null;n.VY.ois.Instance=class extends n.dGt{constructor(t,s){super(t,"mouse"),this.wis=[!1,!1,!1,!1,!1],this.bis=0,this.Mis=0,this.vis=0,this.xis=0,this.Gis=0,this.Tis=0,this._is=0,this.Iis=0,this.Cis=!1,this.Ris=0,this.Ais=0,this.GGt([["pointer-lock-change",t=>this.Pis(t)],["pointer-lock-error",t=>this.Eis(t)]]);const i=this.TO().r0();this.L0=new n.D0(n.C0.F0(i,"pointermove",t=>this.Fis(t.data)),n.C0.F0(i,"pointerdown",t=>this.Dis(t.data)),n.C0.F0(i,"pointerup",t=>this.kis(t.data)),n.C0.F0(i,"dblclick",t=>this.Ois(t.data)),n.C0.F0(i,"wheel",t=>this.Lis(t.data)),n.C0.F0(i,"window-blur",()=>this.z5t()))}Gr(){super.Gr()}Dis(t){"mouse"===t.pointerType&&(this.bis=t.pageX-this._f.KB(),this.Mis=t.pageY-this._f.ZB(),this.Bis(t.lastButtons,t.buttons))}Fis(t){this.Ris=t.movementX,this.Ais=t.movementY,this.YN(n.VY.ois.WY.Nis),this.Ris=0,this.Ais=0,"mouse"===t.pointerType&&(this.bis=t.pageX-this._f.KB(),this.Mis=t.pageY-this._f.ZB(),this.Bis(t.lastButtons,t.buttons))}kis(t){"mouse"===t.pointerType&&this.Bis(t.lastButtons,t.buttons)}Bis(t,s){this.Wis(t,s,1,0),this.Wis(t,s,4,1),this.Wis(t,s,2,2),this.Wis(t,s,8,3),this.Wis(t,s,16,4)}Wis(t,s,i,e){!(t&i)&&s&i?this.jis(e):t&i&&!(s&i)&&this.Vis(e)}jis(t){this.wis[t]=!0,this.YN(n.VY.ois.WY.Uis),this.vis=t,this.xis=0,this.YN(n.VY.ois.WY.His),this.YN(n.VY.ois.WY.zis)}Vis(t){this.wis[t]&&(this.wis[t]=!1,this.vis=t,this.YN(n.VY.ois.WY.Jis))}Ois(t){this.vis=t.button,this.xis=1,this.YN(n.VY.ois.WY.His),this.YN(n.VY.ois.WY.zis)}Lis(t){this.Gis=t.deltaY<0?1:0,this.Tis=t.deltaX,this._is=t.deltaY,this.Iis=t.deltaZ,this.YN(n.VY.ois.WY.qis)}z5t(){for(let t=0,s=this.wis.length;t<s;++t){if(!this.wis[t])return;this.wis[t]=!1,this.vis=t,this.YN(n.VY.ois.WY.Jis)}}uis(t){const s=this._f.Lk(),i=this.bis,e=this.Mis;if(void 0===t){const h=s.aO(0);return h.zq(i,e)}{const r=s.nO(t);return r?r.$B(i,e):[0,0]}}pis(t){return t=Math.floor(t),!!this.wis[t]}Xis(){return 0<=this.bis&&0<=this.Mis&&this.bis<this._f.CBt()&&this.Mis<this._f.RBt()}gis(t){o!==t&&(o=t,this.TGt("cursor",t))}async Sis(t){if(!n.di.xi&&t){const s=t.yvt();if(s){const i=s.rO(),e=s.YGt();if(i&&e&&o!==e){const h=await(o=e).__t(),r=`url(${h}) ${Math.round(i.BW()*e.Lm())} ${Math.round(i.WW()*e.qm())}, auto`;this.TGt("cursor",r)}}}}Pis(t){this.Yis(t["has-pointer-lock"])}Eis(t){this.Yis(t["has-pointer-lock"]),this.YN(n.VY.ois.WY.$is)}Yis(t){this.Cis!==t&&(this.Cis=t,this.Cis?this.YN(n.VY.ois.WY.Kis):this.YN(n.VY.ois.WY.Zis))}OGt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.bis+","+this.Mis},{name:t+".debugger.left-button",value:this.wis[0]},{name:t+".debugger.middle-button",value:this.wis[1]},{name:t+".debugger.right-button",value:this.wis[2]},{name:t+".debugger.button-4",value:this.wis[3]},{name:t+".debugger.button-5",value:this.wis[4]}]},{title:t+".debugger.position-on-each-layer",properties:this._f.Lk().U5().map(t=>({name:"$"+t.Sf(),value:t.$B(this.bis,this.Mis).join(", ")}))}]}}}{const bc=self.Ws;bc.VY.ois.WY={His(t,s){return this.vis===t&&this.xis===s},Uis(){return!0},jts(t){return this.wis[t]},Jis(t){return this.vis===t},Qis(t){const s=this._f.n1t(),i=s.Rbt(),e=[];return this.Xis()&&e.push([this.bis,this.Mis]),bc.xor(this._f.fD().L3t(t,e,i),i)},zis(t,s,i){if(t!==this.vis||s!==this.xis)return!1;if(!this.Xis())return!1;const e=this.bis,h=this.Mis;return this._f.fD().L3t(i,[[e,h]],!1)},qis(t){return 2===t||this.Gis===t},Kis(){return!0},Zis(){return!0},$is(){return!0},tes(){return this.Cis},Nis(){return!0}}}{const Mc=self.Ws,vc=["auto","pointer","text","crosshair","move","help","wait","none"],xc=["auto","all-scroll","none","help","pointer","progress","wait","cell","crosshair","text","vertical-text","alias","copy","move","not-allowed","grab","grabbing","col-resize","row-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out"];Mc.VY.ois.Irt={ses(t){this.gis(vc[t])},ies(t){this.gis(xc[t])},ees(t){this.Sis(t)},hes(t){this.IGt("request-pointer-lock",{unadjustedMovement:t})},res(){this.TGt("release-pointer-lock")}}}{const Gc=self.Ws;Gc.VY.ois.Crt={D2t(t){return this.uis(t)[0]},k2t(t){return this.uis(t)[1]},nes(){return this.bis},oes(){return this.Mis},aes(){return this.Ris},les(){return this.Ais},ues(){return this.Tis},ces(){return this._is},fes(){return this.Iis}}}{const Tc=self.Ws;Tc.VY.Touch=class extends Tc.Gxt{constructor(t){super(t)}Gr(){super.Gr()}}}{let i=function(){return s.i5().K6()};i;const _c=self.Ws,Ic=self.Ks;_c.VY.Touch.jIt=class extends _c.aGt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}Xxt(){return self.des}};let s=null;self.des=class extends self.e5{constructor(t){super(t),(s=t).TO().qk().Yk=this}requestPermission(t){Ic.Re(t);const s=i();if("orientation"===t)return s.pes(0);if("motion"===t)return s.pes(1);throw new Error("invalid type")}}}{const I=self.Ws;I.VY.Touch.Instance=class extends I.dGt{constructor(t,s){super(t,"touch"),this.mes=new Map,this.ges=!1,this.yes=!1,this.Ses=0,this.wes=0,this.bes=0,this.Mes=0,this.ves=0,this.xes=0,this.Ges=0,this.Tes=0,this._es=0,this.Ies=0,this.Ces=0,this.Res=0,this.Aes=0,this.Pes=0,this.Ees=0,this.Fes=0,this.xis=0,this.Des=[],s&&(this.ges=s[0]),this.xGt("permission-result",t=>this.kes(t));const i=this.TO().r0();this.L0=new I.D0(I.C0.F0(i,"pointerdown",t=>this.Dis(t.data)),I.C0.F0(i,"pointermove",t=>this.Fis(t.data)),I.C0.F0(i,"pointerup",t=>this.kis(t.data,!1)),I.C0.F0(i,"pointercancel",t=>this.kis(t.data,!0)),I.C0.F0(i,"deviceorientation",t=>this.Oes(t.data)),I.C0.F0(i,"deviceorientationabsolute",t=>this.Les(t.data)),I.C0.F0(i,"devicemotion",t=>this.Bes(t.data)),I.C0.F0(i,"tick2",t=>this.hK()))}Gr(){this.mes.clear(),super.Gr()}Dis(t){if("mouse"===t.pointerType){if(!this.ges)return;this.yes=!0}const s=t.pointerId;if(!this.mes.has(s)){const i=t.pageX-this._f.KB(),e=t.pageY-this._f.ZB(),h=performance.now(),r=this.mes.size,n=(this.Ces=r,this.Res=s,I.vr(I.VY.Touch.Nes));n.aRt(h,i,e,s,r),this.mes.set(s,n),this.YN(I.VY.Touch.WY.Wes),this.YN(I.VY.Touch.WY.jes),this.Pes=i,this.Ees=e,this.xis=0,this.YN(I.VY.Touch.WY.Ves)}}Fis(t){if("mouse"!==t.pointerType||this.yes){const s=this.mes.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.NE()<2)){const e=t.pageX-this._f.KB(),h=t.pageY-this._f.ZB();s.D7(i,e,h,t.width,t.height,t.pressure)}}}}kis(t,s){if("mouse"===t.pointerType){if(!this.yes)return;this.yes=!1}const i=performance.now(),e=t.pointerId,h=this.mes.get(e);if(h){if(this.Ces=h.Ues(),this.Res=h.C8(),!s){const r=t.pageX-this._f.KB(),n=t.pageY-this._f.ZB();this.Pes=r,this.Ees=n,this.xis=1,this.YN(I.VY.Touch.WY.Ves)}if(this.YN(I.VY.Touch.WY.Hes),this.YN(I.VY.Touch.WY.zes),!s){const o=h.Jes(i);"single-tap"===o?(this.YN(I.VY.Touch.WY.qes),this.Pes=h.qM(),this.Ees=h.$M(),this.YN(I.VY.Touch.WY.Xes)):"double-tap"===o&&(this.YN(I.VY.Touch.WY.Yes),this.Pes=h.qM(),this.Ees=h.$M(),this.YN(I.VY.Touch.WY.$es))}h.Gr(),this.mes.delete(e)}}pes(i){return this.IGt("request-permission",{type:i}),new Promise((t,s)=>{this.Des.push({type:i,resolve:t,reject:s})})}kes(t){const s=t.result,i=t.type,e=(this.Aes=i,this.Des.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.Des=this.Des.filter(t=>t.type!==i),s?(this.YN(I.VY.Touch.WY.Kes),0===i?this._f.YNt():this._f.$Nt()):this.YN(I.VY.Touch.WY.Zes)}Oes(t){"number"==typeof t.webkitCompassHeading?this.Ses=t.webkitCompassHeading:t.absolute&&(this.Ses=t.alpha),this.wes=t.alpha,this.bes=t.beta,this.Mes=t.gamma}Les(t){this.Ses=t.alpha}Bes(t){const s=t.acceleration,i=(s&&(this.ves=s.x,this.xes=s.y,this.Ges=s.z),t.accelerationIncludingGravity);i&&(this.Tes=i.x,this._es=i.y,this.Ies=i.z)}hK(){let t=performance.now(),s=0;for(const i of this.mes.values())i.NE()<=t-50&&i.Qes(t),i.ths(t)&&(this.Ces=i.Ues(),this.Res=i.C8(),this.Fes=s,this.YN(I.VY.Touch.WY.shs),this.Pes=i.qM(),this.Ees=i.$M(),this.YN(I.VY.Touch.WY.ihs),this.Fes=0),++s}ehs(t){t=Math.floor(t);for(const s of this.mes.values()){if(0===t)return s;--t}return null}hhs(t,s){return 0<=t&&0<=s&&t<this._f.CBt()&&s<this._f.RBt()}OGt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.mes.values()].map(t=>({name:"$"+t.C8(),value:t.qM()+", "+t.$M()}))}]}}}{const Cc=self.Ws;Cc.VY.Touch.WY={jes(){return!0},zes(){return!0},rhs(){return 0<this.mes.size},Ves(t,s){return!!t&&s===this.xis&&!!this.hhs(this.Pes,this.Ees)&&this._f.fD().L3t(t,[[this.Pes,this.Ees]],!1)},nhs(t){if(!t)return!1;const s=this._f.n1t(),i=s.Rbt(),e=[...this.mes.values()].filter(t=>this.hhs(t.qM(),t.$M())).map(t=>[t.qM(),t.$M()]);return Cc.xor(this._f.fD().L3t(t,e,i),i)},ohs(t,s,i){const e=this.ehs(t);return!!e&&Cc.compare(e.wW(),s,i)},ahs(){return!0},lhs(){return!0},uhs(t,s,i){this._f.YNt();let e;return e=0===t?this.wes:1===t?this.bes:this.Mes,Cc.compare(e,s,i)},chs(t,s,i){this._f.$Nt();let e;return e=0===t?this.Tes:1===t?this._es:2===t?this.Ies:3===t?this.ves:4===t?this.xes:this.Ges,Cc.compare(e,s,i)},Wes(t){return(t=Math.floor(t))===this.Ces},Hes(t){return(t=Math.floor(t))===this.Ces},fhs(t){return t=Math.floor(t),this.mes.size>=t+1},shs(){return!0},qes(){return!0},Yes(){return!0},ihs(t){return!!t&&!!this.hhs(this.Pes,this.Ees)&&this._f.fD().L3t(t,[[this.Pes,this.Ees]],!1)},Xes(t){return!!t&&!!this.hhs(this.Pes,this.Ees)&&this._f.fD().L3t(t,[[this.Pes,this.Ees]],!1)},$es(t){return!!t&&!!this.hhs(this.Pes,this.Ees)&&this._f.fD().L3t(t,[[this.Pes,this.Ees]],!1)},Kes(t){return this.Aes===t},Zes(t){return this.Aes===t}}}{const Rc=self.Ws;Rc.VY.Touch.Irt={dhs(t){this.pes(t)}}}{const Ac=self.Ws;Ac.VY.Touch.Crt={phs(){return this.mes.size},D2t(t){const s=this.ehs(this.Fes);return s?s.mhs(this._f.eO(),t,!0):0},k2t(t){const s=this.ehs(this.Fes);return s?s.mhs(this._f.eO(),t,!1):0},ghs(t,s){const i=this.ehs(t);return i?i.mhs(this._f.eO(),s,!0):0},yhs(t,s){const i=this.ehs(t);return i?i.mhs(this._f.eO(),s,!1):0},Shs(t,s){const i=this.mes.get(t);return i?i.mhs(this._f.eO(),s,!0):0},whs(t,s){const i=this.mes.get(t);return i?i.mhs(this._f.eO(),s,!1):0},nes(){const t=this.ehs(0);return t?t.qM():0},oes(){const t=this.ehs(0);return t?t.$M():0},bhs(t){const s=this.ehs(t);return s?s.qM():0},Mhs(t){const s=this.ehs(t);return s?s.$M():0},vhs(t){const s=this.mes.get(t);return s?s.qM():0},xhs(t){const s=this.mes.get(t);return s?s.$M():0},Ghs(t){const s=this.ehs(t);return s?s.wW():0},Ths(t){const s=this.mes.get(t);return s?s.wW():0},_hs(t){const s=this.ehs(t);return s?Ac.Er(s.GetAngle()):0},Ihs(t){const s=this.mes.get(t);return s?Ac.Er(s.GetAngle()):0},Chs(){return this._f.YNt(),this.Ses},Rhs(){return this._f.YNt(),this.wes},Ahs(){return this._f.YNt(),this.bes},Phs(){return this._f.YNt(),this.Mes},Ehs(){return this._f.$Nt(),this.Tes},Fhs(){return this._f.$Nt(),this._es},Dhs(){return this._f.$Nt(),this.Ies},khs(){return this._f.$Nt(),this.ves},Ohs(){return this._f.$Nt(),this.xes},Lhs(){return this._f.$Nt(),this.Ges},Bhs(){return this.Ces},Nhs(){return this.Res},Whs(t){const s=this.mes.get(t);return s?s.Lm():0},jhs(t){const s=this.mes.get(t);return s?s.qm():0},Vhs(t){const s=this.mes.get(t);return s?s.Uhs():0}}}{let n=self.Ws,s=-1e3,i=-1e3,e=-1e4;n.VY.Touch.Nes=class extends n.br{constructor(){super(),this.Hhs=0,this.XT=0,this.i5t=0,this.B3=0,this.zhs=0,this.Jhs=0,this.qhs=0,this.pl=0,this.ml=0,this.Xhs=0,this.Yhs=0,this.bg=0,this.Mg=0,this.$hs=0,this.Khs=!1,this.Zhs=!1}Gr(){}aRt(t,s,i,e,h){this.Hhs=e,this.XT=h,this.B3=t,this.zhs=t,this.i5t=t,this.Jhs=s,this.qhs=i,this.pl=s,this.ml=i,this.Xhs=s,this.Yhs=i}D7(t,s,i,e,h,r){this.zhs=this.B3,this.B3=t,this.Xhs=this.pl,this.Yhs=this.ml,this.pl=s,this.ml=i,this.bg=e,this.Mg=h,this.$hs=r,!this.Zhs&&15<=n.kr(this.Jhs,this.qhs,this.pl,this.ml)&&(this.Zhs=!0)}C8(){return this.Hhs}Ues(){return this.XT}NE(){return this.B3}Qes(t){this.zhs=t}qM(){return this.pl}$M(){return this.ml}wW(){const t=n.kr(this.pl,this.ml,this.Xhs,this.Yhs),s=(this.B3-this.zhs)/1e3;return 0<s?t/s:0}GetAngle(){return n.Lr(this.Xhs,this.Yhs,this.pl,this.ml)}Lm(){return this.bg}qm(){return this.Mg}Uhs(){return this.$hs}ths(t){return!this.Khs&&500<=t-this.i5t&&!this.Zhs&&n.kr(this.Jhs,this.qhs,this.pl,this.ml)<15&&(this.Khs=!0)}Jes(t){return!this.Khs&&t-this.i5t<=333&&!this.Zhs&&n.kr(this.Jhs,this.qhs,this.pl,this.ml)<15?t-e<=666&&n.kr(s,i,this.pl,this.ml)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.pl,i=this.ml,e=t,"single-tap"):""}mhs(t,s,i){if(void 0===s){const e=t.aO(0);return e.zq(this.pl,this.ml)[i?0:1]}{const h=t.nO(s);return h?h.$B(this.pl,this.ml)[i?0:1]:0}}}}{const Pc=self.Ws;Pc.blt.Qhs=class extends Pc.GTt{constructor(t){super(t)}Gr(){super.Gr()}}}{const Ec=self.Ws;Ec.blt.Qhs.jIt=class extends Ec.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const Fc=self.Ws,Dc=self.Ks,kc=self.iW,Oc=2*Math.PI,Lc=Math.PI/2,Bc=3*Math.PI/2,Nc=[0,1,8,3,4,2,5,6,9,7],Wc=(Fc.blt.Qhs.Instance=class extends Fc.PTt{constructor(t,s){super(t),this.trs=0,this.srs=0,this.irs=0,this.ers=0,this.hrs=0,this.nSt=!0,this.rrs=0,this.nrs=0,this.ors=0,this.ars=0,this.lrs=0,this.urs=0,this.PSt=0,this.crs=0,this.frs=0,this.drs=0,this.prs=0,s&&(this.srs=Nc[s[0]],this.irs=s[1],this.ars=this._f.Ok()*s[3],this.rrs=s[2],this.ers=s[2],this.ers+=this.ars,this.nrs=s[4],0!==this.ers&&(this.lrs=this._f.Ok()*s[5],this.trs=s[4]/this.ers*Oc,this.trs+=this.lrs/this.ers*Oc),this.urs=this._f.Ok()*s[7],this.ors=s[6],this.hrs=s[6],this.hrs+=this.urs,this.nSt=!!s[8]),5===this.srs&&(this.hrs=Fc.Pr(this.hrs)),this.aRt(),this.nSt&&this.EGt()}Gr(){super.Gr()}av(){return{i:this.trs,e:this.nSt,mv:this.srs,w:this.irs,p:this.ers,mag:this.hrs,iv:this.PSt,iv2:this.crs,r:this.prs,lkv:this.frs,lkv2:this.drs}}lv(t){this.trs=t.i,this.s2t(t.e),this.srs=t.mv,this.irs=t.w,this.ers=t.p,this.hrs=t.mag,this.PSt=t.iv,this.crs=t.iv2,this.prs=t.r,this.frs=t.lkv,this.drs=t.lkv2}aRt(){const t=this.Ci.rO();switch(this.srs){case 0:this.PSt=t.qM();break;case 1:this.PSt=t.$M();break;case 2:this.PSt=t.Lm(),this.prs=t.qm()/t.Lm();break;case 3:this.PSt=t.Lm();break;case 4:this.PSt=t.qm();break;case 5:this.PSt=t.GetAngle();break;case 6:this.PSt=t.uP();break;case 7:this.PSt=0;break;case 8:this.PSt=t.qM(),this.crs=t.$M();break;case 9:this.PSt=t.ZM()}this.frs=this.PSt,this.drs=this.crs}mrs(t){switch(t%=Oc,this.irs){case 0:return Math.sin(t);case 1:return t<=Lc?t/Lc:t<=Bc?1-2*(t-Lc)/Math.PI:(t-Bc)/Lc-1;case 2:return 2*t/Oc-1;case 3:return-2*t/Oc+1;case 4:return t<Math.PI?-1:1}return 0}cZ(){const t=this._f.ak(this.Ci);this.nSt&&0!==t&&(0===this.ers?this.trs=0:this.trs=(this.trs+t/this.ers*Oc)%Oc,this.grs())}grs(){const t=this.Ci.rO();switch(this.srs){case 0:t.qM()!==this.frs&&(this.PSt+=t.qM()-this.frs),t.XM(this.PSt+this.mrs(this.trs)*this.hrs),this.frs=t.qM();break;case 1:t.$M()!==this.frs&&(this.PSt+=t.$M()-this.frs),t.KM(this.PSt+this.mrs(this.trs)*this.hrs),this.frs=t.$M();break;case 2:t.Hm(this.PSt+this.mrs(this.trs)*this.hrs),t.Bm(t.Lm()*this.prs);break;case 3:t.Hm(this.PSt+this.mrs(this.trs)*this.hrs);break;case 4:t.Bm(this.PSt+this.mrs(this.trs)*this.hrs);break;case 5:t.GetAngle()!==this.frs&&(this.PSt=Fc.Ar(this.PSt+(t.GetAngle()-this.frs))),t.D5(this.PSt+this.mrs(this.trs)*this.hrs),this.frs=t.GetAngle();break;case 6:t.fP(this.PSt+this.mrs(this.trs)*this.hrs/100);break;case 8:t.qM()!==this.frs&&(this.PSt+=t.qM()-this.frs),t.$M()!==this.drs&&(this.crs+=t.$M()-this.drs),t.XM(this.PSt+Math.cos(t.GetAngle())*this.mrs(this.trs)*this.hrs),t.KM(this.crs+Math.sin(t.GetAngle())*this.mrs(this.trs)*this.hrs),this.frs=t.qM(),this.drs=t.$M();break;case 9:t.QM(this.PSt+this.mrs(this.trs)*this.hrs)}t._4()}yrs(t,s){}Srs(t){this.ers=t}wrs(){return this.ers}brs(t){this.hrs=t}Mrs(t){5===this.srs&&(t=Fc.Pr(t)),this.brs(t)}vrs(){return this.hrs}xrs(){let t=this.vrs();return 5===this.srs?Fc.Er(t):t}Grs(t){5===this.srs&&5!==t&&(this.hrs=Fc.Er(this.hrs)),this.srs=t,this.aRt()}Trs(){return this.srs}_rs(t){this.irs=t}Irs(){return this.irs}Crs(t){this.trs=Fc.Rr(t,0,2*Math.PI),this.grs()}Rrs(){return this.trs}s2t(t){this.nSt=!!t,this.nSt?this.EGt():this.gGt()}e2t(){return this.nSt}cnt(t){switch(t){case 0:return this.srs;case 1:return this.irs;case 2:return this.rrs;case 6:return this.ors;case 8:return this.nSt}}ynt(t,s){switch(t){case 0:this.srs=Nc[s],this.aRt();break;case 1:this.irs=s;break;case 2:this.rrs=s,this.ers=this.rrs+this.ars,this.nSt||(0!==this.ers?(this.trs=this.nrs/this.ers*Oc,this.trs+=this.lrs/this.ers*Oc):this.trs=0);break;case 6:this.ors=s,this.hrs=this.ors+this.urs,5===this.srs&&(this.hrs=Fc.Pr(this.hrs));break;case 8:this.nSt=!!s}}OGt(){const t="behaviors.sin";return[{title:"$"+this.oW().Sf(),properties:[{name:t+".properties.enabled.name",value:this.e2t(),eVt:t=>this.s2t(t)},{name:t+".properties.period.name",value:this.wrs(),eVt:t=>this.Srs(t)},{name:t+".properties.magnitude.name",value:this.xrs(),eVt:t=>this.Mrs(t)},{name:t+".debugger.value",value:this.mrs(this.Rrs())*this.xrs()}]}]}Xxt(){return self.Ars}},new WeakMap),jc=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],Vc=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.Ars=class extends kc{constructor(){super(),Wc.set(this,kc.fN().K6())}set Prs(t){Dc.Te(t),Wc.get(this).Srs(t)}get Prs(){return Wc.get(this).wrs()}set Ers(t){Dc.Te(t),Wc.get(this).brs(t)}get Ers(){return Wc.get(this).vrs()}set Frs(t){Wc.get(this).Crs(t)}get Frs(){return Wc.get(this).Rrs()}set Drs(t){Dc.Re(t);const s=jc.indexOf(t);if(-1===s)throw new Error("invalid movement");Wc.get(this).Grs(s)}get Drs(){return jc[Wc.get(this).Trs()]}set krs(t){Dc.Re(t);const s=Vc.indexOf(t);if(-1===s)throw new Error("invalid wave");Wc.get(this)._rs(s)}get krs(){return Vc[Wc.get(this).Irs()]}get value(){const t=Wc.get(this);return t.mrs(t.Rrs())*t.vrs()}Ors(){Wc.get(this).aRt()}set isEnabled(t){Wc.get(this).s2t(!!t)}get isEnabled(){return Wc.get(this).e2t()}}}{const Uc=self.Ws;Uc.blt.Qhs.WY={mc(){return this.e2t()},Lrs(t){return this.Trs()===t},Brs(t,s){return Uc.compare(this.wrs(),t,s)},Nrs(t,s){return Uc.compare(this.xrs(),t,s)},Wrs(t){return this.Irs()===t}}}{const Hc=self.Ws;Hc.blt.Qhs.Irt={txt(t){this.s2t(0!==t)},jrs(t){this.Srs(t)},Vrs(t){this.Mrs(t)},Urs(t){this.Grs(t)},Hrs(t){this.irs=t},zrs(t){const s=2*Math.PI;this.Crs(t*s%s)},Jrs(){this.aRt()}}}{const zc=self.Ws;zc.blt.Qhs.Crt={qrs(){return this.Rrs()/(2*Math.PI)},Xrs(){return this.wrs()},Yrs(){return this.xrs()},$rs(){return this.mrs(this.Rrs())*this.xrs()}}}{let h=function(i,e,t){const h=i.Dbt(),r=e.Dbt();if(t){const s=h.get(p),n=(s&&s.delete(e.EJ()),r.get(p));n&&n.delete(i.EJ())}else{let t=h.get(p),s=(t||(t=new Set,h.set(p,t)),r.get(p));s||(s=new Set,r.set(p,s)),t.add(e.EJ()),s.add(i.EJ())}},f=(h,self.Ws),s=self.Ks,i=null,e=null,r=[],d=null,n=null,p="Physics_DisabledCollisions";f.blt.Krs=class extends f.GTt{constructor(t){super(t),(n=this).Zrs=null,this.Qrs=10,this.tns=.02,this.sns=null,this.ins=-1,this.ens=1,this.hns=8,this.rns=3,this.nns=!0,this._f.SO(this.ons())}Xxt(){return self.ans}async ons(){const t=await this._f.lD().PO("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{d=t,this.lns(),s()})})}lns(){const h=this._f.fD(),t=(i=f.blt.Krs.tIt(0,0),e=f.blt.Krs.tIt(0,0),this.Zrs=new d.b2World(f.blt.Krs.uns(0,this.Qrs),!0),new d.JSContactListener),s=(t.BeginContact=t=>{const s=d.wrapPointer(t,d.b2Contact),i=f.blt.Krs.Instance.cns(s.GetFixtureA().GetBody()),e=f.blt.Krs.Instance.cns(s.GetFixtureB().GetBody());h.C3t(i.lW(),e.lW())},t.EndContact=()=>{},t.PreSolve=()=>{},t.PostSolve=()=>{},this.Zrs.SetContactListener(t),new d.JSContactFilter);s.ShouldCollide=(t,s)=>{if(this.nns)return!0;const i=d.wrapPointer(t,d.b2Fixture),e=d.wrapPointer(s,d.b2Fixture),h=f.blt.Krs.Instance.cns(i.GetBody()),r=f.blt.Krs.Instance.cns(e.GetBody()),n=h.lW().lN(),o=r.lW().lN(),a=n.EJ(),l=o.EJ(),u=n.Dbt().get(p);if(u&&u.has(l))return!1;const c=o.Dbt().get(p);return!c||!c.has(a)},this.Zrs.SetContactFilter(s),this.sns=new d.b2WorldManifold}Gr(){super.Gr()}fns(){return d}dns(){return this.Zrs}pns(){return this.tns}mns(){return this.ens}gns(t){this.ens=t}yns(t){this.ins=t}Sns(){return this.ins}wns(t){this.hns=Math.max(t,1)}bns(){return this.hns}Mns(t){this.rns=Math.max(t,1)}vns(){return this.rns}xns(t,s){this.wns(t),this.Mns(s)}Q9t(){return this.Qrs}SetGravity(t){t!==this.Qrs&&(this.Zrs.SetGravity(f.blt.Krs.uns(0,t)),this.Qrs=t,this.Gns())}Gns(){for(const t of this.m5()){const s=f.blt.Krs.Instance.Tns(t);if(s){const i=s.GetBody();i&&i.SetAwake(!0)}}}_ns(){this.nns=!1}Ins(t,s,i){if(i=!!i,t&&s){if(s.GJ())for(const e of s.Dgt())h(t,e,i);else h(t,s,i);this._ns()}}GetWorldManifold(){return this.sns}static Cns(){return p}static tIt(t,s){if(r.length){const i=r.pop();return i.set_x(t),i.set_y(s),i}{const e=d.b2Vec2;return new e(t,s)}}static Rns(t){r.push(t)}static uns(t,s){return i.set_x(t),i.set_y(s),i}static Ans(t,s){return e.set_x(t),e.set_y(s),e}static Pns(s){let t=d.b2PolygonShape,i=new t,e=d._malloc(8*s.length),h=0;for(let t=0;t<s.length;++t)d.HEAPF32[e+h>>2]=s[t].get_x(),d.HEAPF32[e+(h+4)>>2]=s[t].get_y(),h+=8;const r=d.wrapPointer(e,d.b2Vec2);return i.Set(r,s.length),d._free(e),i}};const Jc=["fixed","variable"];self.ans=class extends self.cW{constructor(){super()}set Ens(t){s.Te(t),n.SetGravity(t)}get Ens(){return n.Q9t()}set Fns(t){const s=Jc.indexOf(t);if(s<0)throw new Error("invalid stepping mode");n.gns(Jc[s])}get Fns(){return Jc[n.mns()]}set Dns(t){s.Te(t),n.wns(t)}get Dns(){return n.bns()}set kns(t){s.Te(t),n.Mns(t)}get kns(){return n.vns()}Ons(t,s,i){const e=n.TO(),h=e.sL(t),r=e.sL(s);i=!!i,n.Ins(h,r,i)}}}{const qc=self.Ws;qc.blt.Krs.jIt=class extends qc.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{let u=function(t,s){const i=A.get(t).TO();return i.hO(s)};u;const C=self.Ws,R=self.Ks,Xc=self.iW,Yc=new WeakMap,$c=new WeakMap,Kc=new WeakMap,Zc=C.blt.Krs.uns,Qc=C.blt.Krs.Ans,tf=C.vr(C.Rect),sf=C.vr(C.du),A=(C.blt.Krs.Instance=class extends C.PTt{constructor(t,s){super(t);const i=this.hW(),e=this.rO(),h=(this.Lns=i.fns(),this.Zrs=i.dns(),this.tns=i.pns(),this.Bns=!1,this.Nns=0,this.Wns=0,this.jns=!1,this.Vns=1,this.Uns=.5,this.Hns=.2,this.zns=0,this.Jns=.01,this.qns=!1,this.nSt=!0,this.Xns=null,this.Yns=[],this.$ns=[],this.Kns=[],this.Zns=new Set,this.Qns=e.qM(),this.tos=e.$M(),this.ios=e.GetAngle(),this.v7t=0,this.x7t=0,this.eos=!1,s&&(this.Bns=!!s[0],this.Nns=s[1],this.jns=!!s[2],this.Vns=s[3],this.Uns=s[4],this.Hns=s[5],this.zns=s[6],this.Jns=s[7],this.qns=!!s[8],this.nSt=!!s[9]),this._f.r0());this.L0=new C.D0(C.C0.F0(h,"instancedestroy",t=>this.rQt(t.aW)),C.C0.F0(h,"beforeload",()=>this.fK()),C.C0.F0(h,"afterload",()=>this.pK())),$c.set(this.Ci,this),this.nSt&&this.EGt()}kTt(){this.hos()}Gr(){this.ros(),C.$n(this.Kns),this.Zns.clear(),this.Xns&&(this.nos(),this.Zrs.DestroyBody(this.Xns),this.Xns=null),super.Gr()}oos(t){if(this.Xns){const s=this.Xns.CreateFixture(t);return this.Yns.push(s),s}}nos(){if(this.Xns){for(const t of this.Yns)this.Xns.DestroyFixture(t);C.$n(this.Yns)}}aos(){const t=this.rO();return t.V6()?(t.lEt(tf,sf,!1),sf):t.L4()}los(t){this.Lns.destroy(t)}hos(){if(this.nSt){const t=this.Lns.b2FixtureDef,i=this.Lns.b2BodyDef,e=this.rO(),s=e.xEt();if(this.Wns=this.Nns,s||this.Ci.SRt()||0!==this.Wns||(this.Wns=1),!this.Xns){const o=new i;o.set_type(this.Bns?0:2);let t=e.qM()*this.tns,s=e.$M()*this.tns;if(2===this.Wns){const a=this.aos();t=a.zl()*this.tns,s=a.Jl()*this.tns}o.set_position(Qc(t,s)),o.set_angle(e.GetAngle()),o.set_fixedRotation(this.jns),o.set_linearDamping(this.zns),o.set_angularDamping(this.Jns),o.set_bullet(this.qns),this.Xns=this.Zrs.CreateBody(o),this.los(o),Yc.set(this.Xns,this)}this.nos();const h=new t,r=(h.set_density(this.Vns),h.set_friction(this.Uns),h.set_restitution(this.Hns),Math.max(Math.abs(e.Lm()),1)),n=Math.max(Math.abs(e.qm()),1);0===this.Wns?this.Ci.SRt()?this.uos(h):this.fos(h,r,n):1===this.Wns?this.dos(h,e,r,n):this.mos(h,r,n),this.v7t=e.Lm(),this.x7t=e.qm(),e.IEt(!1),this.los(h)}}dos(t,s,i,e){let h=this.Lns.b2PolygonShape,r=new h,n=i*this.tns,o=e*this.tns,a=s.BW(),l=s.WW();s.Lm()<0&&(a=1-a),s.qm()<0&&(l=1-l);const u=(.5-a)*n,c=(.5-l)*o,f=C.blt.Krs.tIt(u,c);r.SetAsBox(n/2,o/2,f,0),t.set_shape(r),this.oos(t),this.los(r),C.blt.Krs.Rns(f)}mos(t,s,i){const e=this.Lns.b2CircleShape,h=new e;h.set_m_radius(Math.min(s,i)*this.tns*.5),t.set_shape(h),this.oos(t),this.los(h)}fos(t,s,i){const e=this.rO(),h=e.Lm()<0,r=e.qm()<0,n=this.tns,o=e._Et(h?-s:s,r?-i:i,0),a=o.Zu(),l=a.length/2,u=[];for(let t=0;t<l;++t)u.push(C.blt.Krs.tIt(a[2*t],a[2*t+1]));h!=r&&u.reverse();const c=C.blt.Krs.yos.gos(u,s*i);for(const f of u)C.blt.Krs.Rns(f);if(c.length)for(const d of c){for(const m of d)m.set_x(m.get_x()*n),m.set_y(m.get_y()*n);const p=C.blt.Krs.Pns(d);t.set_shape(p),this.oos(t),this.los(p);for(const g of d)C.blt.Krs.Rns(g)}else this.dos(t,e,s,i)}uos(e){const h=this.tns,r=C.blt.Krs.tIt,n=C.blt.Krs.Rns,i=[],o=(this.Ci.K6().ezt(i),[]);for(let t=0,s=i.length;t<s;++t){const a=i[t],l=a.k3t(),u=a.O3t();if(u){let i=Kc.get(u);if(!i){const c=u.Zu(),f=u.Qu();for(let t=0;t<f;++t)o.push(r(c[2*t],c[2*t+1]));const d=3758096384&a.oJt();(-2147483648==d||1073741824==d||536870912==d||-2147483648&d&&1073741824&d&&536870912&d)&&o.reverse(),i=C.blt.Krs.yos.gos(o,l.width()*l.height()),Kc.set(u,i);for(const p of o)n(p);C.$n(o)}for(let t=0,s=i.length;t<s;++t){const m=i[t];for(let t=0,s=m.length;t<s;++t)o.push(r((l.Ll()+m[t].get_x())*h,(l.Bl()+m[t].get_y())*h));const g=C.blt.Krs.Pns(o);e.set_shape(g),this.oos(e),this.los(g);for(const y of o)n(y);C.$n(o)}}else{o.push(r(l.Ll()*h,l.Bl()*h)),o.push(r(l.Nl()*h,l.Bl()*h)),o.push(r(l.Nl()*h,l.Wl()*h)),o.push(r(l.Ll()*h,l.Wl()*h));const S=C.blt.Krs.Pns(o);e.set_shape(S),this.oos(e),this.los(S)}for(const w of o)n(w);C.$n(o)}}Sos(){this.Xns&&(this.ros(),Yc.delete(this.Xns),this.nos(),this.Zrs.DestroyBody(this.Xns),this.Xns=null)}ros(){for(const t of this.$ns)this.Zrs.DestroyJoint(t);C.$n(this.$ns)}wos(){for(const t of this.Kns)switch(t.type){case 0:this.bos(...t.params);break;case 1:this.Mos(...t.params);break;case 2:this.vos(...t.params);break;case 3:this.xos(...t.params)}}Gos(t){const s=this.rO();if(-1===t)return[s.qM(),s.$M()];if(0===t&&this.Xns){const i=this.Xns.GetWorldCenter();return[i.get_x()/this.tns,i.get_y()/this.tns]}return this.Ci.WMt(t)}Tos(t,s,i,e,h){if(this.nSt&&s&&s!==this.Ci){const r=C.blt.Krs.Instance.Tns(s);r&&r.e2t()&&(this.Kns.push({type:0,params:[t,s.vN(),i,e,h]}),this.bos(t,s.vN(),i,e,h))}}bos(t,s,i,e,h){if(this.nSt){const r=this._f.tO(s);if(r&&r!==this.Ci){const n=C.blt.Krs.Instance.Tns(r);if(n&&n.e2t()){n.Zns.add(this.Ci),this._os(!1),n._os(!1);const[o,a]=this.Gos(t),[l,u]=r.WMt(i),c=o-l,f=a-u,d=this.Lns.b2DistanceJointDef,p=this.tns,m=new d;m.Initialize(this.Xns,n.GetBody(),Zc(o*p,a*p),Qc(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(h),this.$ns.push(this.Zrs.CreateJoint(m)),this.los(m)}}}}Ios(t,s){if(this.nSt&&s&&s!==this.Ci){const i=C.blt.Krs.Instance.Tns(s);i&&i.e2t()&&(this.Kns.push({type:1,params:[t,s.vN()]}),this.Mos(t,s.vN()))}}Mos(t,s){if(this.nSt){const i=this._f.tO(s);if(i&&i!==this.Ci){const e=C.blt.Krs.Instance.Tns(i);if(e&&e.e2t()){e.Zns.add(this.Ci),this._os(!1),e._os(!1);const[h,r]=this.Gos(t),n=this.Lns.b2RevoluteJointDef,o=this.tns,a=new n;a.Initialize(this.Xns,e.GetBody(),Zc(h*o,r*o)),this.$ns.push(this.Zrs.CreateJoint(a)),this.los(a)}}}}Cos(t,s,i,e){if(this.nSt&&s&&s!==this.Ci){const h=C.blt.Krs.Instance.Tns(s);h&&h.e2t()&&(i=C.Er(i),e=C.Er(e),this.Kns.push({type:2,params:[t,s.vN(),i,e]}),this.vos(t,s.vN(),i,e))}}vos(t,s,i,e){if(this.nSt){const h=this._f.tO(s);if(h&&h!==this.Ci){const r=C.blt.Krs.Instance.Tns(h);if(r&&r.e2t()){r.Zns.add(this.Ci),this._os(!1),r._os(!1);const[n,o]=this.Gos(t),a=this.Lns.b2RevoluteJointDef,l=this.tns,u=new a;u.Initialize(this.Xns,r.GetBody(),Zc(n*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(C.Pr(i)),u.set_upperAngle(C.Pr(e)),this.$ns.push(this.Zrs.CreateJoint(u)),this.los(u)}}}}Ros(t,s,i,e,h,r,n,o,a){if(this.nSt&&s&&s!==this.Ci){const l=C.blt.Krs.Instance.Tns(s);l&&l.e2t()&&(i=C.Er(i),o=C.Er(o),this.Kns.push({type:3,params:[t,s.vN(),i,e,h,r,n,o,a]}),this.xos(t,s.vN(),i,e,h,r,n,o,a))}}xos(t,s,i,e,h,r,n,o,a){if(this.nSt){const l=this._f.tO(s);if(l&&l!==this.Ci){const u=C.blt.Krs.Instance.Tns(l);if(u&&u.e2t()){u.Zns.add(this.Ci),this._os(!1),u._os(!1);const[c,f]=this.Gos(t),d=(i=C.Pr(i),Math.cos(i)),p=Math.sin(i),m=this.Lns.b2PrismaticJointDef,g=this.tns,y=new m;y.Initialize(this.Xns,u.GetBody(),Zc(c*g,f*g),Qc(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(h*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!n),y.set_motorSpeed(C.Pr(o)),y.set_maxMotorForce(a),this.$ns.push(this.Zrs.CreateJoint(y)),this.los(y)}}}}Aos(){this.nSt&&(this.ros(),C.$n(this.Kns),this.Zns.clear())}Pos(){for(const t of this.Zns){const s=C.blt.Krs.Instance.Tns(t);if(!s||!s.e2t())return;s.Eos(this.Ci)}this.Zns.clear()}rQt(t){this.Eos(t)}Eos(t){let i=t.vN(),e=0;for(let t=0,s=this.Kns.length;t<s;++t)this.Kns[e]=this.Kns[t],e<this.$ns.length&&(this.$ns[e]=this.$ns[t]),this.Kns[t].params[1]===i?t<this.$ns.length&&this.Zrs.DestroyJoint(this.$ns[t]):++e;C.Yn(this.Kns,e),e<this.$ns.length&&C.Yn(this.$ns,e),this.Zns.delete(t)}GetBody(){return this.Xns}static cns(t){return Yc.get(t)||null}static Tns(t){return $c.get(t)||null}av(){const t={e:this.nSt,im:this.Bns,pr:this.jns,d:this.Vns,fr:this.Uns,re:this.Hns,ld:this.zns,ad:this.Jns,b:this.qns,mcj:this.Kns};if(this.nSt){const s=this.Xns.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.Xns.GetAngularVelocity()}return t}fK(){this.ros(),C.$n(this.Kns),this.Zns.clear()}lv(t){this.Sos(),this.nSt=t.e,t.hasOwnProperty("im")&&(this.Bns=!!t.im),this.jns=t.pr,this.Vns=t.d,this.Uns=t.fr,this.Hns=t.re,this.zns=t.ld,this.Jns=t.ad,this.qns=t.b,this.Kns=t.mcj;const s=this.rO();this.Qns=s.qM(),this.tos=s.$M(),this.ios=s.GetAngle(),this.v7t=s.Lm(),this.x7t=s.qm(),this.nSt&&(this.hos(),this.Xns.SetLinearVelocity(Zc(t.vx,t.vy)),this.Xns.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.Xns.SetAwake(!0),this.Kns=t.mcj),this.nSt?this.EGt():this.gGt()}pK(){this.nSt&&this.wos()}cZ(){if(this.nSt){let t=this._f,s=this.hW(),i=0;0===s.mns()?i=t.pk()/60:(i=t.ak(this.Ci))>1/30&&(i=1/30);const e=t.lNt();e>s.Sns()&&0<t.pk()&&(0!==i&&this.Zrs.Step(i,s.bns(),s.vns()),this.Zrs.ClearForces(),s.yns(e)),this._os(!0)}}_os(t){let s=this.Ci,i=s.rO(),e=this.tns,h=(i.Lm()===this.v7t&&i.qm()===this.x7t&&!i.FEt()||this.hos(),this.Xns),r=i.qM(),n=i.$M(),o=r-this.Qns,a=n-this.tos,l=.001<Math.abs(o)||.001<Math.abs(a),u=i.GetAngle()!==this.ios,c=r,f=n;if(2===this.Wns){const y=this.aos();c=y.zl(),f=y.Jl()}l?(u?h.SetTransform(Zc(c*e,f*e),i.GetAngle()):h.SetTransform(Zc(c*e,f*e),h.GetAngle()),t&&(h.SetLinearVelocity(Zc(o,a)),this.eos=!0),h.SetAwake(!0)):t&&this.eos&&(this.eos=!1,h.SetLinearVelocity(Zc(0,0)),h.SetTransform(Zc(c*e,f*e),h.GetAngle())),!l&&u&&(h.SetTransform(h.GetPosition(),i.GetAngle()),h.SetAwake(!0));const d=h.GetPosition(),p=d.get_x()/e,m=d.get_y()/e,g=h.GetAngle();if((p!==i.qM()||m!==i.$M()||g!==i.GetAngle())&&(i.I4(p,m),i.D5(g),i._4(),2===this.Wns)){const S=this.aos(),w=S.zl()-i.qM(),b=S.Jl()-i.$M();0==w&&0==b||(i.A4(-w,-b),i._4())}this.Qns=i.qM(),this.tos=i.$M(),this.ios=i.GetAngle()}cnt(t){switch(t){case 2:return this.Fos();case 3:return this.Dos();case 4:return this.kos();case 5:return this.Oos();case 6:return this.Los();case 7:return this.Bos();case 8:return this.Nos();case 9:return this.e2t()}}ynt(t,s){switch(t){case 2:this.Wos(s);break;case 3:this.jos(s);break;case 4:this.Vos(s);break;case 5:this.Uos(s);break;case 6:this.Hos(s);break;case 7:this.zos(s);break;case 8:this.Jos(s);break;case 9:this.s2t(s)}}s2t(t){t=!!t,this.nSt&&!t?(this.Pos(),this.Sos(),this.nSt=!1,this.gGt()):!this.nSt&&t&&(this.nSt=!0,this.hos(),this.EGt())}e2t(){return this.nSt}OGt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.e2t(),eVt:t=>this.s2t(t)},{name:t+".properties.immovable.name",value:this.qos(),eVt:t=>this.Xos(t)},{name:t+".properties.density.name",value:this.Dos(),eVt:t=>this.jos(t)},{name:t+".properties.friction.name",value:this.kos(),eVt:t=>this.Vos(t)},{name:t+".properties.elasticity.name",value:this.Oos(),eVt:t=>this.Uos(t)},{name:t+".properties.linear-damping.name",value:this.Los(),eVt:t=>this.Hos(t)},{name:t+".properties.angular-damping.name",value:this.Bos(),eVt:t=>this.zos(t)}];return this.nSt&&(s.push({name:t+".debugger.is-sleeping",value:!this.Yos()}),s.push({name:t+".debugger.velocity-x",value:this.$os(),eVt:t=>this.Kos(t,this.Zos())}),s.push({name:t+".debugger.velocity-y",value:this.Zos(),eVt:t=>this.Kos(this.$os(),t)}),s.push({name:t+".debugger.angular-velocity",value:C.Er(this.Qos()),eVt:t=>this.tas(C.Pr(t))}),s.push({name:t+".debugger.mass",value:this.sas()})),[{title:"$"+this.oW().Sf(),properties:s}]}ias(t,s,i){const[e,h]=this.Gos(i);this.eas(t,s,e,h)}ras(t,s,i,e){const[h,r]=this.Gos(e),n=C.Lr(h,r,s,i);this.eas(Math.cos(n)*t,Math.sin(n)*t,h,r)}nas(t,s,i){const[e,h]=this.Gos(i);this.eas(Math.cos(s)*t,Math.sin(s)*t,e,h)}eas(t,s,i,e){if(this.nSt){const h=this.tns;this.Xns.ApplyForce(Zc(t,s),Qc(i*h,e*h),!0)}}oas(t,s,i){const[e,h]=this.Gos(i);this.aas(t,s,e,h)}las(t,s,i,e){const[h,r]=this.Gos(e),n=C.Lr(h,r,s,i);this.aas(Math.cos(n)*t,Math.sin(n)*t,h,r)}uas(t,s,i){const[e,h]=this.Gos(i);this.aas(Math.cos(s)*t,Math.sin(s)*t,e,h)}aas(t,s,i,e){if(this.nSt){const h=this.tns,r=(this.Xns.ApplyLinearImpulse(Zc(t,s),Qc(i*h,e*h),!0),this.rO());this.Qns=r.qM(),this.tos=r.$M(),this.eos=!1}}fas(t){this.nSt&&this.Xns.ApplyTorque(t,!0)}das(t,s){const i=C.Wr(this.rO().GetAngle(),s)?-1:1;this.fas(t*i)}pas(t,s,i){const e=this.rO(),h=C.Lr(e.qM(),e.$M(),s,i),r=C.Wr(e.GetAngle(),h)?-1:1;this.fas(t*r)}tas(t){this.nSt&&(this.Xns.SetAngularVelocity(t),this.Xns.SetAwake(!0))}Qos(){return this.nSt?this.Xns.GetAngularVelocity():0}Kos(t,s){if(this.nSt){const i=this.tns,e=(this.Xns.SetLinearVelocity(Zc(t*i,s*i)),this.Xns.SetAwake(!0),this.rO());this.Qns=e.qM(),this.tos=e.$M(),this.eos=!1}}mas(){if(!this.nSt)return[0,0];const t=this.tns,s=this.Xns.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}$os(){return this.nSt?this.Xns.GetLinearVelocity().get_x()/this.tns:0}Zos(){return this.nSt?this.Xns.GetLinearVelocity().get_y()/this.tns:0}gas(t,s){if(this.nSt){const i=this.tns,e=(this.Xns.SetTransform(Zc(t*i,s*i),this.Xns.GetAngle()),this.rO());e.I4(t,s),e._4(),this.Qns=e.qM(),this.tos=e.$M()}}jos(t){if(this.nSt&&this.Vns!==t){this.Vns=t;for(const s of this.Yns)s.SetDensity(t);this.Xns.ResetMassData()}}Dos(){return this.nSt?this.Vns:0}Vos(t){if(this.nSt&&this.Uns!==t){this.Uns=t;for(const s of this.Yns)s.SetFriction(t);if(this.Xns)for(let t=this.Xns.GetContactList();this.Lns.getPointer(t);t=t.get_next()){const i=t.get_contact();i&&i.ResetFriction()}}}kos(){return this.nSt?this.Uns:0}Uos(t){if(this.nSt&&this.Hns!==t){this.Hns=t;for(const s of this.Yns)s.SetRestitution(t)}}Oos(){return this.nSt?this.Hns:0}Hos(t){this.nSt&&this.zns!==t&&(this.zns=t,this.Xns.SetLinearDamping(t))}Los(){return this.nSt?this.zns:0}zos(t){this.nSt&&this.Jns!==t&&(this.Jns=t,this.Xns.SetAngularDamping(t))}Bos(){return this.nSt?this.Jns:0}Xos(t){this.nSt&&this.Bns!==(t=!!t)&&(this.Bns=t,this.Xns.SetType(this.Bns?0:2),this.Xns.SetAwake(!0))}qos(){return this.Bns}Wos(t){this.nSt&&this.jns!==(t=!!t)&&(this.jns=t,this.Xns.SetFixedRotation(this.jns),this.Xns.SetAngularVelocity(0),this.Xns.SetAwake(!0))}Fos(){return this.jns}Jos(t){this.nSt&&this.qns!==(t=!!t)&&(this.qns=t,this.Xns.SetBullet(this.qns),this.Xns.SetAwake(!0))}Nos(){return this.qns}yas(t){this.nSt&&this.Xns.SetAwake(!!t)}Yos(){return!!this.nSt&&this.Xns.IsAwake()}sas(){return this.nSt?this.Xns.GetMass()/this.tns:0}Sas(){return this.nSt?this.Xns.GetWorldCenter().get_x()/this.tns:0}was(){return this.nSt?this.Xns.GetWorldCenter().get_y()/this.tns:0}bas(){if(!this.nSt)return[0,0];const t=this.Xns.GetWorldCenter(),s=this.tns;return[t.get_x()/s,t.get_y()/s]}Mas(){if(!this.nSt)return 0;let s=0;for(let t=this.Xns.GetContactList();this.Lns.getPointer(t);t=t.get_next()){const i=t.get_contact();if(i){const e=i.GetManifold(),h=e.get_pointCount();s+=h}}return s}vas(i){if(i=Math.floor(i),this.nSt){let s=0;for(let t=this.Xns.GetContactList();this.Lns.getPointer(t);t=t.get_next()){const e=t.get_contact();if(e){const h=e.GetManifold(),r=h.get_pointCount();if(i>=s&&i<s+r){const n=i-s,o=this.hW().GetWorldManifold(),a=(e.GetWorldManifold(o),o.get_points(n));return[a.get_x()/this.tns,a.get_y()/this.tns]}s+=r}}}return[0,0]}Xxt(){return self.xas}},new WeakMap);self.xas=class extends Xc{constructor(){super(),A.set(this,Xc.fN().K6())}get isEnabled(){return A.get(this).e2t()}set isEnabled(t){A.get(this).s2t(t)}Gas(t,s,i=0){R.Te(t),R.Te(s),A.get(this).ias(t,s,i)}Tas(t,s,i,e=0){R.Te(t),R.Te(s),R.Te(i),A.get(this).ras(t,s,i,e)}_as(t,s,i=0){R.Te(t),R.Te(s),A.get(this).nas(t,s,i)}Ias(t,s,i=0){R.Te(t),R.Te(s),A.get(this).oas(t,s,i)}Cas(t,s,i,e=0){R.Te(t),R.Te(s),R.Te(i),A.get(this).las(t,s,i,e)}Ras(t,s,i=0){R.Te(t),R.Te(s),A.get(this).uas(t,s,i)}Aas(t){R.Te(t),A.get(this).fas(t)}Pas(t,s){R.Te(t),R.Te(s),A.get(this).das(t,s)}Eas(t,s,i){R.Te(t),R.Te(s),R.Te(i),A.get(this).pas(t,s,i)}set angularVelocity(t){R.Te(t),A.get(this).tas(t)}get angularVelocity(){return A.get(this).Qos()}setVelocity(t,s){R.Te(t),R.Te(s),A.get(this).Kos(t,s)}Fas(){return A.get(this).$os()}Das(){return A.get(this).Zos()}kas(){return A.get(this).mas()}Oas(t,s){R.Te(t),R.Te(s),A.get(this).gas(t,s)}set Las(t){R.Te(t),A.get(this).jos(t)}get Las(){return A.get(this).Dos()}set Bas(t){R.Te(t),A.get(this).Vos(t)}get Bas(){return A.get(this).kos()}set Nas(t){R.Te(t),A.get(this).Uos(t)}get Nas(){return A.get(this).Oos()}set Was(t){R.Te(t),A.get(this).Hos(t)}get Was(){return A.get(this).Los()}set jas(t){R.Te(t),A.get(this).zos(t)}get jas(){return A.get(this).Bos()}set Vas(t){A.get(this).Xos(t)}get Vas(){return A.get(this).qos()}set Uas(t){A.get(this).Wos(t)}get Uas(){return A.get(this).Fos()}set Has(t){A.get(this).Jos(t)}get Has(){return A.get(this).Nos()}get zas(){return A.get(this).sas()}Jas(){return A.get(this).Sas()}qas(){return A.get(this).was()}Xas(){return A.get(this).bas()}Yas(){return A.get(this).Mas()}$as(t){return R.Te(t),A.get(this).vas(t)[0]}Kas(t){return R.Te(t),A.get(this).vas(t)[1]}Zas(t){return R.Te(t),A.get(this).vas(t)}set Qas(t){A.get(this).yas(!!t)}get Qas(){return A.get(this).Yos()}get tls(){return!A.get(this).Yos()}sls(t,s,i,e,h){R.Te(e),R.Te(h);const r=u(this,s);A.get(this).Tos(t,r,i,e,h)}ils(t,s){const i=u(this,s);A.get(this).Ios(t,i)}els(t,s,i,e){R.Te(i),R.Te(e);const h=u(this,s);A.get(this).Cos(t,h,i,e)}hls(t,s,i,e,h,r,n,o,a){const l=u(this,s);A.get(this).Ros(t,l,i,e,h,r,n,o,a)}rls(){A.get(this).Aos()}}}{const ef=self.Ws;ef.blt.Krs.WY={nls(){return!this.Yos()},ols(){return this.qos()},als(t,s,i){if(!this.nSt)return!1;let e=0;if(0===t)e=this.$os();else if(1===t)e=this.Zos();else{const[h,r]=this.mas();e=Math.hypot(h,r)}return ef.compare(e,s,i)},lls(t,s){if(!this.nSt)return!1;const i=ef.Er(this.Qos());return ef.compare(i,t,s)},uls(t,s){if(!this.nSt)return!1;const i=this.sas();return ef.compare(i,t,s)},mc(){return this.e2t()}}}{const hf=self.Ws;hf.blt.Krs.Irt={ApplyForce(t,s,i){this.ias(t,s,i)},cls(t,s,i,e){this.ras(t,s,i,e)},fls(t,s,i){this.nas(t,hf.Pr(s),i)},dls(t,s,i){this.oas(t,s,i)},pls(t,s,i,e){this.las(t,s,i,e)},mls(t,s,i){this.uas(t,hf.Pr(s),i)},ApplyTorque(t){this.fas(hf.Pr(t))},gls(t,s){this.das(hf.Pr(t),hf.Pr(s))},yls(t,s,i){this.pas(hf.Pr(t),s,i)},SetAngularVelocity(t){this.tas(hf.Pr(t))},Sls(t,s,i,e,h){if(s){const r=s.yvt(this.Ci);this.Tos(t,r,i,e,h)}},wls(t,s){if(s){const i=s.yvt(this.Ci);this.Ios(t,i)}},bls(t,s,i,e){if(s){const h=s.yvt(this.Ci);this.Cos(t,h,hf.Pr(i),hf.Pr(e))}},Mls(t,s,i,e,h,r,n,o,a){if(s){const l=s.yvt(this.Ci);this.Ros(t,l,hf.Pr(i),e,h,r,n,hf.Pr(o),a)}},vls(){this.Aos()},xls(t){this.hW().SetGravity(t)},gns(t){this.hW().gns(t)},xns(t,s){this.hW().xns(t,s)},Gls(t,s){this.Kos(t,s)},Tls(t,s){this.gas(t,s)},SetDensity(t){this.jos(t)},SetFriction(t){this.Vos(t)},_ls(t){this.Uos(t)},SetLinearDamping(t){this.Hos(t)},SetAngularDamping(t){this.zos(t)},Ils(t){this.Xos(t)},Cls(t,s){this.hW().Ins(this.lN(),t,0!==s)},Rls(t){this.Wos(0!==t)},SetBullet(t){this.Jos(0!==t)},SetAwake(t){this.yas(!!t)},txt(t){this.s2t(0!==t)}}}{const rf=self.Ws;rf.blt.Krs.Crt={Als(){return this.$os()},Pls(){return this.Zos()},Els(){return rf.Er(this.Qos())},Fls(){return this.sas()},Dls(){return this.Sas()},kls(){return this.was()},Ols(){return this.Dos()},Lls(){return this.kos()},Bls(){return this.Oos()},Nls(){return this.Los()},Wls(){return this.Bos()},jls(){return this.Mas()},Vls(t){return this.vas(t)[0]},Uls(t){return this.vas(t)[1]}}}{let n=function(t){return af(t.get_x(),t.get_y())},s=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,e(i));return s},e=function(i){let e=[],h=(e.push(i.splice(0,8)),e[0][0]),r=e[0][7];for(;i.length;){let t=i.splice(0,Math.min(i.length,6)),s=t.at(-1);t.push(n(h)),t.push(n(r)),e.push(t),r=s}return e};n,s,e;const nf=self.Ws,of={},af=(nf.blt.Krs.yos=of,nf.blt.Krs.tIt),lf=nf.blt.Krs.Rns;of.Hls=function(t,s,i,e,h,r){return t*e+i*r+h*s-s*i-e*h-r*t},of.zls=function(t,s,i,e,h,r,n,o){const a=h-t,l=r-s,u=i-t,c=e-s,f=n-h,d=o-r,p=c*f-u*d,m=(f*l-d*a)/p,g=t+m*u,y=s+m*c,S=of.Jls(i,e,t,s,g,y),w=of.Jls(g,y,h,r,n,o);return S&&w?af(g,y):null},of.Jls=function(t,s,i,e,h,r){const n=t<=i+.1&&h-.1<=t||i-.1<=t&&t<=h+.1,o=s<=e+.1&&r-.1<=s||e-.1<=s&&s<=r+.1;return n&&o&&of.qls(t,s,i,e,h,r)},of.qls=function(t,s,i,e,h,r){if(.1<Math.abs(h-i)){const n=(r-e)/(h-i),o=n*(t-i)+e,a=Math.abs(o-s);return a<.1}return Math.abs(t-i)<.1},of.Xls=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},of.gos=function(t,r){let n=of.Yls(t),o=[];for(let t=0,s=n.length;t<s;++t){let i=n[t],e=[],h=0;for(let t=0,s=i.length;t<s;++t){const a=i[t],l=i[(t+1)%s];h+=a.get_x()*l.get_y()-a.get_y()*l.get_x(),e.push(af(a.get_x(),a.get_y()))}if((h=Math.abs(h/2))>=.001*r)o.push(e);else for(let t=0,s=e.length;t<s;t++)lf(e[t])}return o=s(o)},of.Yls=function(t){let s=[],i=0,e,h=0,r,n,o,a=0,l,u,c,f,d,p,m,g,y,S,w=0,b=0,M=0,v=0,x=[],G=[],T=!1,_=[],I=[],C=!1;for(I.push(t);I.length;){for(e=(s=I[0]).length,T=!0,i=0;i<e;i++)if(u=(l=i)<e-1?i+1:i+1-e,c=i<e-2?i+2:i+2-e,f=s[l],d=s[u],p=s[c],of.Hls(f.get_x(),f.get_y(),d.get_x(),d.get_y(),p.get_x(),p.get_y())<0){for(T=!1,a=1e9,h=0;h<e;h++)h!==l&&h!==u&&(w=h,b=h<e-1?h+1:0,m=s[w],g=s[b],y=of.zls(f.get_x(),f.get_y(),d.get_x(),d.get_y(),m.get_x(),m.get_y(),g.get_x(),g.get_y()))&&((r=(n=d.get_x()-y.get_x())*n+(o=d.get_y()-y.get_y())*o)<a?(v=w,M=b,S=y,a=r):lf(y));if(1e9===a)return[];for(x=[],G=[],w=v,b=M,m=s[w],g=s[b],C=!1,of.Xls(S.get_x(),S.get_y(),g.get_x(),g.get_y())||(x.push(S),C=!0),of.Xls(S.get_x(),S.get_y(),m.get_x(),m.get_y())||(G.push(S),C=!0),C||lf(S),v=-1,M=l;;){if(M===b){if(v<0||v>=e)return[];of.Jls(g.get_x(),g.get_y(),s[v].get_x(),s[v].get_y(),f.get_x(),f.get_y())||x.push(s[M]);break}x.push(s[M]),(v=M)-1<0?M=e-1:M--}for(x.reverse(),v=-1,M=u;;){if(M===w){if(v<0||v>=e)return[];M!==w||of.Jls(m.get_x(),m.get_y(),s[v].get_x(),s[v].get_y(),d.get_x(),d.get_y())||G.push(s[M]);break}G.push(s[M]),(v=M)+1>e-1?M=0:M++}I.push(x,G),I.shift();break}T&&_.push(I.shift())}return _}}{const uf=self.Ws;uf.blt.$ls=class extends uf.GTt{constructor(t){super(t),this.Kls=0,this.Zls=0,this.Qls=0,this.tus=0}Gr(){super.Gr()}ius(t){this.Kls=t}eus(){return this.Kls}hus(t){this.Zls=t}rus(){return this.Zls}nus(t){this.Qls=t}ous(){return this.Qls}aus(t){this.tus=t}lus(){return this.tus}}}{const cf=self.Ws;cf.blt.$ls.jIt=class extends cf.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const ff=self.Ws;ff.blt.$ls.Instance=class extends ff.PTt{constructor(t,s){super(t),this.nSt=!0,s&&(this.nSt=s[0]),this.nSt&&this.DGt()}Gr(){super.Gr()}av(){const t=this.hW();return{e:this.nSt,smg:t.eus(),ss:t.rus(),se:t.ous(),smd:t.lus()}}lv(t){const s=this.hW();s.ius(t.smg),s.hus(t.ss),s.nus(t.se),s.aus(t.smd),this.nSt=t.e,this.nSt?this.DGt():this.yGt()}s2t(t){this.nSt=!!t,this.nSt?this.DGt():this.yGt()}mc(){return this.nSt}PGt(){if(this.mc()){this._f.ak(this.Ci);let s=this.hW(),t=s.m5(),i=0,e=0,h=0;for(const l of t){const u=l.URt(ff.blt.$ls);if(u&&u.K6().mc()){const c=l.rO();i+=c.qM(),e+=c.$M(),++h}}let r=this.Ci.rO().jk(),n=this._f.ck(),o=0,a=0;if(n>=s.rus()&&n<s.ous()){let t=s.eus()*Math.min(this._f.pk(),1);0===s.lus()&&(t*=1-(n-s.rus())/(s.ous()-s.rus()));const f=this._f.Ok()*Math.PI*2,d=this._f.Ok()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.k5(i/h+o),r.L5(e/h+a)}}cnt(t){if(0===t)return this.nSt}ynt(t,s){0===t&&(this.nSt=!!s,this.nSt?this.DGt():this.yGt())}OGt(){return[{title:"$"+this.oW().Sf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.mc(),eVt:t=>this.s2t(t)}]}]}}}{const df=self.Ws;df.blt.$ls.WY={mc(){return this.mc()}}}{const pf=self.Ws;pf.blt.$ls.Irt={uus(t,s,i){const e=this.hW();e.ius(t),e.hus(this._f.ck()),e.nus(this._f.ck()+s),e.aus(i)},txt(t){this.s2t(0!==t)}}}{const mf=self.Ws;mf.blt.$ls.Crt={}}{const gf=self.Ws;gf.blt.di=class extends gf.GTt{constructor(t){super(t)}Gr(){super.Gr()}}}{const yf=self.Ws;yf.blt.di.jIt=class extends yf.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{let v=function(t,s,i,e,h){const r=s*h,n=i*h;return P.Rr(t*h+.5*e*h*h,r,n)};v;const P=self.Ws,Sf=self.Ks,wf=self.iW,E=(P.blt.di.Instance=class extends P.PTt{constructor(t,s){super(t),this.cus=null,this.fus=!1,this.dus=!1,this.pus=!1,this.mus=!1,this.gus=!1,this.yus=!1,this.Sus=!1,this.wus=!1,this.bus=!1,this.Mus=!1,this.vus=null,this.xus=-1,this.Gus=0,this.Tus=0,this._us=!1,this.Ius=!1,this.Cus=this._f.fD().U3t(this.Ci),this.Rus=-1,this.Aus="stopped",this.Pus=-1,this.KJt=!0,this.Eus=0,this.Fus=0,this.Dus=0,this.kus=0,this.Ous=0,this.Lus=0,this.na=1500,this.Bus=1500,this.Nus=P.Pr(90),this.Wus=330,this.jus=1500,this.Vus=1500,this.Uus=650,this.Hus=1e3,this.zus=!1,this.Jus=0,this.qus=0,this.Xus=!0,this.Yus=0,this.nSt=!0,s&&(this.Wus=s[0],this.jus=s[1],this.Vus=s[2],this.Uus=s[3],this.na=s[4],this.Hus=s[5],this.zus=!!s[6],this.Jus=s[7]/1e3,this.Xus=!!s[8],this.nSt=!!s[9]);const i=this._f.r0();this.L0=new P.D0(P.C0.F0(i,"instancedestroy",t=>this.rQt(t.aW)),P.C0.F0(i,"afterload",t=>this.pK())),this.Xus&&this.$us(),this.nSt&&this.LTt(),this.Kus()}Gr(){this.cus&&(this.cus.Gr(),this.cus=null),this.vus=null,this.Cus=null,super.Gr()}$us(){if(!this.cus){const t=this._f.r0();this.cus=new P.D0(P.C0.F0(t,"keydown",t=>this.jss(t.data)),P.C0.F0(t,"keyup",t=>this.Vss(t.data)),P.C0.F0(t,"window-blur",()=>this.Uss()),P.C0.F0(t,"keyboard-blur",()=>this.Uss()))}}Zus(){this.cus&&(this.cus.Gr(),this.cus=null)}rQt(t){this.vus===t&&(this.vus=null),this.Cus===t&&(this.Cus=null)}jss(t){switch(t.key){case"ArrowLeft":this.fus=!0;break;case"ArrowRight":this.dus=!0;break;case"ArrowUp":this.pus=!0}}Vss(t){switch(t.key){case"ArrowLeft":this.fus=!1;break;case"ArrowRight":this.dus=!1;break;case"ArrowUp":this.pus=!1,this.mus=!1}}Uss(){this.fus=!1,this.dus=!1,this.pus=!1,this.mus=!1}av(){return{ii:this.Sus,lfx:this.Gus,lfy:this.Tus,lfo:this.vus?this.vus.vN():-1,am:this.Aus,en:this.nSt,fallt:this.Pus,ft:this.KJt,dx:this.Eus,dy:this.Fus,ms:this.Wus,acc:this.jus,dec:this.Vus,js:this.Uus,g:this.na,g1:this.Bus,mf:this.Hus,wof:this.Ius,woj:this.Cus?this.Cus.vN():-1,ga:this.Nus,edj:this.zus,cdj:this.yus,dj:this.gus,sus:this.Jus,dc:this.Xus,cc:this.Yus}}lv(t){this.Sus=t.ii,this.Gus=t.lfx,this.Tus=t.lfy,this.xus=t.lfo,this.Aus=t.am;const s=t.en;this.Pus=t.fallt||-1,this.KJt=t.ft,this.Eus=t.dx,this.Fus=t.dy,this.Wus=t.ms,this.jus=t.acc,this.Vus=t.dec,this.Uus=t.js,this.na=t.g,this.Bus=t.g1,this.Hus=t.mf,this.Ius=t.wof,this.Rus=t.woj,this.Nus=t.ga,this.zus=t.edj,this.yus=t.cdj,this.gus=t.dj,this.Jus=t.sus,this.Xus=t.dc,this.Yus=t.cc||0,this.fus=!1,this.dus=!1,this.pus=!1,this.mus=!1,this.wus=!1,this.bus=!1,this.Mus=!1,this.qus=0,this.Xus?this.$us():this.Zus(),this.s2t(s),this.Kus()}pK(){-1===this.xus?this.vus=null:this.vus=this._f.tO(this.xus),-1===this.Rus?this.Cus=null:this.Cus=this._f.tO(this.Rus)}Qus(t){if(this.vus=t){const s=t.rO();this.Gus=s.qM(),this.Tus=s.$M()}}tcs(){return this._f.ck()>this.Pus+.05}Kus(){this.Dus=Math.cos(this.Nus),this.kus=Math.sin(this.Nus),this.Ous=Math.cos(this.Nus-Math.PI/2),this.Lus=Math.sin(this.Nus-Math.PI/2),this.Dus=P.tn(this.Dus,6),this.kus=P.tn(this.kus,6),this.Ous=P.tn(this.Ous,6),this.Lus=P.tn(this.Lus,6),this.Bus=this.na,this.na<0&&(this.Dus*=-1,this.kus*=-1,this.na=Math.abs(this.na))}scs(){return this.na<0?-1:1}ics(){const s=this.Ci.rO(),h=this._f.fD(),r=this.Ci,t=this.vus,i=s.qM(),n=s.$M();if(s.A4(this.Dus,this.kus),s._4(),!t||!h.JO(r,t)||t.lN().NCt()&&!h.aEt(t,r)||t.lN().WCt()&&!t.xRt()){let t=h.YO(r),e=null;if(!t&&this.tcs()&&(e=h.U3t(r,!0)),s.I4(i,n),s._4(),t)return h.JO(r,t)?null:(this._us=!1,t);if(e&&e.length){let i=0;for(let t=0,s=e.length;t<s;++t)e[i]=e[t],h.JO(r,e[t])||++i;if(1<=i)return this._us=!0,e[0]}return null}return s.I4(i,n),s._4(),t}OTt(){if(this.nSt){const c=this._f.ak(this.Ci);this.pus||this.Mus||(this.mus=!1);let e=this.fus||this.wus,h=this.dus||this.bus,r=this.pus||this.Mus,n=r&&!this.mus,[o,,a]=(this.wus=!1,this.bus=!1,this.Mus=!1,this.Sus&&(e=!1,h=!1,r=!1,n=!1),r||(this.qus=0),this.ecs(),this.hcs()),l=this.ics(),u=l&&!this.Ius,t=!1;if([t,l]=this.rcs(l),!t){this.ncs(l,a,o,r),n=this.ocs(l,n,r),l||this.acs(n,r,c),this.Ius=!!l;let t=this.lcs(e,h),s=!1,i=0;if(0!==this.Eus&&([s,l]=this.ucs(c,t,l,n)),0!==this.Fus){const[f,d]=this.ccs(c,l);s=s||f,i=d}!s&&u&&this.Fus<0&&0<i&&(this.Fus=0,s=!0),this.fcs(e,h,t,c),l&&!n||s||(this.Fus=Math.min(this.Fus+this.na*c,this.Hus)),this.dcs(l,s,n),this.Cus=this._f.fD().U3t(this.Ci)}}}ecs(){if(this.KJt){const t=this.Ci,s=this._f.fD();(s.YO(t)||s.U3t(t))&&s.z3t(t,-this.Dus,-this.kus,4,!0),this.KJt=!1}}hcs(){let t=this.vus,s=t?t.rO():null,i=0,e=0,h=!1;if(t&&0===this.Fus&&(s.$M()!==this.Tus||s.qM()!==this.Gus)){const r=this.Ci,n=r.rO(),o=this._f.fD(),a=s.qM(),l=s.$M(),u=(i=a-this.Gus,e=l-this.Tus,n.A4(i,e),n._4(),this.Gus=a,this.Tus=l,h=!0,o.YO(r));u&&(o.C3t(r,u),o.z3t(r,-i,-e,2.5*P.Fr(i,e)))}return[i,e,h]}rcs(t){let s=!1,i=this.Ci,e=i.rO(),h=this._f.fD(),r=h.YO(i);if(!r)return[!1,t];const n=Math.abs(e.Lm()),o=Math.abs(e.qm());return h.z3t(i,-this.Dus,-this.kus,o/8)?(h.C3t(i,r),this.Qus(t=r),this._us=!1,this.Fus=0):h.q3t(i,this.Ous,this.Lus,n/2)||h.q3t(i,this.Dus,this.kus,o/2)||h.X3t(i,Math.max(n,o)/2)?h.C3t(i,r):s=!0,[s,t]}ncs(t,s,i,e){const h=this.Ci,r=this._f.fD();if(t){const n=this.Dus,o=this.kus,a=this.Ous,l=this.Lus;if(this.gus=!1,this.yus=!1,0<this.Fus&&(this.Ius||(r.J3t(h,-n,-o,t,16),this.Ius=!0),this.Fus=0),this.vus!==t)this.Qus(t),r.C3t(h,t);else if(s){const u=r.YO(h);u&&(r.C3t(h,u),0!==i&&(0<i?r.z3t(h,-a,-l):r.z3t(h,a,l)),r.z3t(h,-n,-o))}}else e||(this.yus=!0)}ocs(t,s,i){if(t&&s||!t&&this.zus&&i&&this.yus&&!this.gus){const e=this.Ci,h=e.rO(),r=this._f.fD(),n=h.qM(),o=h.$M();h.A4(-this.Dus,-this.kus),h._4(),r.YO(e)?s=!1:(this.qus=this.Jus,this.YN(P.blt.di.WY.pcs),this.Aus="jumping",this.Fus=-this.Uus,s=!0,t?this.mus=!0:this.gus=!0),h.I4(n,o),h._4()}return s}acs(t,s,i){s&&0<this.qus?(this.Fus=-this.Uus,this.qus-=i):this.vus=null,t&&(this.mus=!0)}lcs(t,s){let i=0,e=this.jus,h=this.Vus;return t&&!s&&(i=0<this.Eus?-(e+h):-e),i=s&&!t?this.Eus<0?e+h:e:i}fcs(t,s,i,e){const h=this.Vus,r=(t===s&&(this.Eus<0?this.Eus=Math.min(this.Eus+h*e,0):0<this.Eus&&(this.Eus=Math.max(this.Eus-h*e,0))),this.Eus=P.Rr(this.Eus+i*e,-this.Wus,this.Wus),this._f.fD()),n=this.Eus<0?this.mcs(0,1,1):null;if(n)this.Eus=0,r.C3t(this.Ci,n);else{const o=0<this.Eus?this.mcs(1,1,1):null;o&&(this.Eus=0,r.C3t(this.Ci,o))}}ucs(e,t,h,s){let r=this.Ci,n=r.rO(),o=this._f.fD(),a=this.Dus,l=this.kus,i=this.Ous,u=this.Lus,c=this.Wus,f=!1,d=new Set(o.U3t(r,!0)),p=n.qM(),m=n.$M(),g=v(this.Eus,-c,c,t,e)*i,y=v(this.Eus,-c,c,t,e)*u,S=(n.A4(i*(1<this.Eus?1:-1)-a,u*(1<this.Eus?1:-1)-l),n._4(),!1),w=o.YO(r),b=(n.I4(p+g,m+y),n._4(),o.YO(r));if(!b&&h&&this._us&&(b=o.U3t(r),d.has(b)?b=null:S=!0),b){let t=Math.abs(this.Eus*e)+2;w||!o.z3t(r,-a,-l,t,S,b)?(o.C3t(r,b),t=Math.max(Math.abs(this.Eus*e*2.5),Math.floor(n.Lm())),o.z3t(r,i*(this.Eus<0?1:-1),u*(this.Eus<0?1:-1),t,!1)&&(!h||S||this._us||(p=n.qM(),m=n.$M(),n.A4(a,l),o.YO(r)&&o.z3t(r,-a,-l,3,!1)))||(n.I4(p,m),n._4()),S||(this.Eus=0)):!w&&!s&&Math.abs(this.Fus)<Math.abs(this.Uus/4)&&(this.Fus=0,h||(f=!0))}else{const M=this.ics();if(h&&!M){let t=Math.ceil(Math.abs(this.Eus*e))+2,s=(p=n.qM(),m=n.$M(),n.A4(a*t,l*t),n._4(),o.U3t(r)),i=!1;s&&!d.has(s)&&o.z3t(r,-a,-l,t+2,!0,s)&&(this.Qus(h=s),this._us=!0,i=!0),i||(o.YO(r)?o.z3t(r,-a,-l,t+2,!1):(n.I4(p,m),n._4()))}else M&&(!h&&this._us&&(this.Qus(M),this.Fus=0,f=!0),0===this.Fus)&&o.J3t(r,-a,-l,M,16)}return[f,h]}ccs(s,t){let e=this.Ci,h=e.rO(),r=this._f.fD(),i=this.Dus,n=this.kus,o=!1,a=h.qM(),l=h.$M(),u=v(this.Fus,-1/0,this.Hus,this.na,s),c=(h.A4(u*i,u*n),h.qM()),f=h.$M(),d=(h._4(),r.YO(e)),p=!1;if(!d&&0<this.Fus&&!t){const m=this.tcs()?r.U3t(e,!0):null;if(m&&m.length){if(this.Cus){h.I4(a,l),h._4();let i=0;for(let t=0,s=m.length;t<s;++t)m[i]=m[t],r.JO(e,m[t])||++i;P.Yn(m,i),h.I4(c,f),h._4()}1<=m.length&&(d=m[0])}p=!!d}if(d){r.C3t(e,d),this.qus=0;let t=1.1;p&&!this.Cus&&(t=2);const g=Math.max(Math.abs(this.Fus*s*t),2);r.z3t(e,i*(this.Fus<0?1:-1),n*(this.Fus<0?1:-1),g,p,d)?(this.Qus(d),this._us=p,0<this.Fus&&(o=!0),(0<this.Fus||0===this.Yus)&&(this.Fus=0),this.Fus<0&&1===this.Yus&&r.J3t(e,i,n,d,32)):(h.I4(a,l),h._4(),this.Ius=!0,p||(this.Fus=0))}return[o,u]}dcs(t,s,i){"falling"!==this.Aus&&0<this.Fus&&!t&&(this.YN(P.blt.di.WY.gcs),this.Aus="falling"),(t||s)&&0<=this.Fus&&("falling"===this.Aus||s||i&&0===this.Fus?(this.YN(P.blt.di.WY.ycs),0===this.Eus&&0===this.Fus?this.Aus="stopped":this.Aus="moving"):("stopped"!==this.Aus&&0===this.Eus&&0===this.Fus&&(this.YN(P.blt.di.WY.Scs),this.Aus="stopped"),"moving"===this.Aus||0===this.Eus&&0===this.Fus||i||(this.YN(P.blt.di.WY.wcs),this.Aus="moving")))}bcs(){return 0!==this.Mcs()||0!==this.vcs()}xcs(){if(0===this.Fus){let e=this.Ci,t=this.rO(),h=this._f.fD(),s=t.qM(),i=t.$M(),r=(t.A4(this.Dus,this.kus),t._4(),h.YO(e)),n=null;if(!r&&this.tcs()&&(n=h.U3t(e,!0)),t.I4(s,i),t._4(),r)return!h.JO(e,r);if(n&&n.length){let i=0;for(let t=0,s=n.length;t<s;++t)n[i]=n[t],h.JO(e,n[t])||i++;if(1<=i)return!0}}return!1}Gcs(t,s=2,i=3){return!!this.mcs(t,s,i)}mcs(t,s=2,i=3){const e=this.Ci,h=this.rO(),r=this._f.fD(),n=h.qM(),o=h.$M();if(0===t?h.A4(-this.Ous*s,-this.Lus*s):h.A4(this.Ous*s,this.Lus*s),h._4(),!r.YO(e))return h.I4(n,o),h._4(),null;h.A4(-this.Dus*i,-this.kus*i),h._4();const a=r.YO(e);return h.I4(n,o),h._4(),a}Tcs(){const t=this.rO(),s=t.qM(),i=t.$M(),e=(t.A4(this.Dus,this.kus),t._4(),this._f.fD().U3t(this.Ci,!1));t.I4(s,i),t._4(),e&&(this.Pus=this._f.ck(),this.vus=null)}_cs(t){this.gus=!t}Ics(){return Math.hypot(this.Eus,this.Fus)}Ccs(){return Math.atan2(this.Fus,this.Eus)}Rcs(){return this.Fus<0}Acs(){return 0<this.Fus}Pcs(t){this.Wus=Math.max(t,0)}Ecs(){return this.Wus}Fcs(t){this.jus=Math.max(t,0)}Dcs(){return this.jus}kcs(t){this.Vus=Math.max(t,0)}Ocs(){return this.Vus}Lcs(t){this.Uus=Math.max(t,0)}Bcs(){return this.Uus}Ncs(t){this.Hus=Math.max(t,0)}Wcs(){return this.Hus}jcs(t){if(this.Bus!==t){this.na=t,this.Kus();const s=this._f.fD(),i=this.rO();s.YO(this.Ci)&&(s.z3t(this.Ci,this.Dus,this.kus,10),i.A4(2*this.Dus,2*this.kus),i._4()),this.vus=null}}Vcs(){return this.na}Ucs(t){t=P.Ar(t),this.Nus!==t&&(this.Nus=t,this.Kus(),this.vus=null)}Hcs(){return this.Nus}zcs(t){this.zus=!!t}Jcs(){return this.zus}qcs(t){this.Jus=t}Xcs(){return this.Jus}Ycs(t){this.Yus=t}$cs(){return this.Yus}Kcs(t){this.Eus=t}Mcs(){return this.Eus}Zcs(t){this.Fus=t}vcs(){return this.Fus}Qcs(t){if(this.nSt)switch(t){case 0:this.wus=!0;break;case 1:this.bus=!0;break;case 2:this.Mus=!0}}tfs(t){this.Xus!==(t=!!t)&&(this.Xus=t,this.Xus?this.$us():(this.Zus(),this.Uss()))}sfs(){return this.Xus}ifs(t){this.Sus=!!t}efs(){return this.Sus}s2t(t){this.nSt!==(t=!!t)&&(this.nSt=t,this.nSt?this.LTt():(this.FTt(),this.vus=null,this.wus=!1,this.bus=!1,this.Mus=!1))}e2t(){return this.nSt}cnt(t){switch(t){case 0:return this.Ecs();case 1:return this.Dcs();case 2:return this.Ocs();case 3:return this.Bcs();case 4:return this.Vcs();case 5:return this.Wcs();case 6:return this.Jcs();case 7:return 1e3*this.Xcs();case 8:return this.sfs();case 9:return this.e2t()}}ynt(t,s){switch(t){case 0:this.Pcs(s);break;case 1:this.Fcs(s);break;case 2:this.kcs(s);break;case 3:this.Lcs(s);break;case 4:this.jcs(s);break;case 5:this.Ncs(s);break;case 6:this.zcs(!!s);break;case 7:this.qcs(s/1e3);break;case 8:this.tfs(!!s);break;case 9:this.s2t(!!s)}}OGt(){const t="behaviors.platform";return[{title:"$"+this.oW().Sf(),properties:[{name:t+".debugger.vector-x",value:this.Mcs(),eVt:t=>this.Kcs(t)},{name:t+".debugger.vector-y",value:this.vcs(),eVt:t=>this.Zcs(t)},{name:t+".properties.max-speed.name",value:this.Ecs(),eVt:t=>this.Pcs(t)},{name:t+".properties.acceleration.name",value:this.Dcs(),eVt:t=>this.Fcs(t)},{name:t+".properties.deceleration.name",value:this.Ocs(),eVt:t=>this.kcs(t)},{name:t+".properties.jump-strength.name",value:this.Bcs(),eVt:t=>this.Lcs(t)},{name:t+".properties.gravity.name",value:this.Vcs(),eVt:t=>this.jcs(t)},{name:t+".debugger.gravity-angle",value:P.Er(this.Hcs()),eVt:t=>this.Ucs(P.Pr(t))},{name:t+".properties.max-fall-speed.name",value:this.Wcs(),eVt:t=>this.Ncs(t)},{name:t+".properties.double-jump.name",value:this.Jcs(),eVt:t=>this.zcs(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.Xcs(),eVt:t=>this.qcs(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.Aus]},{name:t+".properties.enabled.name",value:this.e2t(),eVt:t=>this.s2t(t)}]}]}Xxt(){return self.hfs}},new WeakMap),bf=new Map([["left",0],["right",1],["jump",2]]);self.hfs=class extends wf{constructor(){super(),E.set(this,wf.fN().K6())}rfs(){E.get(this).Tcs()}nfs(t){E.get(this)._cs(!!t)}ofs(t){Sf.Re(t);const s=bf.get(t);if("number"!=typeof s)throw new Error("invalid control");E.get(this).Qcs(s)}get speed(){return E.get(this).Ics()}get afs(){return E.get(this).Ecs()}set afs(t){Sf.Te(t),E.get(this).Pcs(t)}get acceleration(){return E.get(this).Dcs()}set acceleration(t){Sf.Te(t),E.get(this).Fcs(t)}get lfs(){return E.get(this).Ocs()}set lfs(t){Sf.Te(t),E.get(this).kcs(t)}get ufs(){return E.get(this).Bcs()}set ufs(t){Sf.Te(t),E.get(this).Lcs(t)}get cfs(){return E.get(this).Wcs()}set cfs(t){Sf.Te(t),E.get(this).Ncs(t)}get Aqt(){return E.get(this).Vcs()}set Aqt(t){Sf.Te(t),E.get(this).jcs(t)}get ffs(){return E.get(this).Hcs()}set ffs(t){Sf.Te(t),E.get(this).Ucs(t)}get dfs(){return E.get(this).Jcs()}set dfs(t){E.get(this).zcs(!!t)}get pfs(){return E.get(this).Xcs()}set pfs(t){Sf.Te(t),E.get(this).qcs(t)}get mfs(){const t=E.get(this).$cs();return 0===t?"stop":"preserve-momentum"}set mfs(t){Sf.Re(t);const s=E.get(this);if("stop"===t)s.Ycs(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.Ycs(1)}}get gfs(){return E.get(this).xcs()}yfs(t){Sf.Re(t);const s=E.get(this);if("left"===t)return s.Gcs(0);if("right"===t)return s.Gcs(1);throw new Error("invalid side")}get Sfs(){return E.get(this).bcs()}get wfs(){return E.get(this).Rcs()}get bfs(){return E.get(this).Acs()}get Mfs(){return E.get(this).Mcs()}set Mfs(t){Sf.Te(t),E.get(this).Kcs(t)}get vfs(){return E.get(this).vcs()}set vfs(t){Sf.Te(t),E.get(this).Zcs(t)}xfs(t,s){Sf.Te(t),Sf.Te(s);const i=E.get(this);i.Kcs(t),i.Zcs(s)}Gfs(){const t=E.get(this);return[t.Mcs(),t.vcs()]}get Tfs(){return E.get(this).sfs()}set Tfs(t){E.get(this).tfs(!!t)}get _fs(){return E.get(this).efs()}set _fs(t){E.get(this).ifs(!!t)}get isEnabled(){return E.get(this).e2t()}set isEnabled(t){E.get(this).s2t(!!t)}}}{const Mf=self.Ws;Mf.blt.di.WY={Ifs(){return this.bcs()},Cfs(t,s){return Mf.compare(this.Ics(),t,s)},Rfs(){return this.xcs()},Afs(t){return this.Gcs(t)},Pfs(){return this.Rcs()},Efs(){return this.Acs()},Ffs(){return this.Jcs()},pcs(){return!0},gcs(){return!0},Scs(){return!0},wcs(){return!0},ycs(){return!0},mc(){return this.e2t()}}}{const vf=self.Ws;vf.blt.di.Irt={Dfs(t){this.Pcs(t)},M9t(t){this.Fcs(t)},kfs(t){this.kcs(t)},Ofs(t){this.Lcs(t)},Lfs(t){this.Ncs(t)},SetGravity(t){this.jcs(t)},Bfs(t){this.Qcs(t)},Nfs(t){this.ifs(!!t)},Wfs(t){this.Kcs(t)},jfs(t){this.Zcs(t)},Vfs(t){this.Ucs(vf.Pr(t))},txt(t){this.s2t(0!==t)},Ufs(){this.Tcs()},Hfs(t){this.zcs(0!==t)},zfs(t){this.qcs(t/1e3)},Jfs(t){this.Ycs(t)},qfs(t){this.tfs(t)},Xfs(t){this._cs(t)}}}{const xf=self.Ws;xf.blt.di.Crt={Yfs(){return this.Ics()},$fs(){return this.Ecs()},Kfs(){return this.Dcs()},Zfs(){return this.Ocs()},Qfs(){return this.Bcs()},oXt(){return this.Vcs()},t0s(){return xf.Er(this.Hcs())},s0s(){return this.Wcs()},i0s(){return xf.Er(this.Ccs())},e0s(){return this.Mcs()},h0s(){return this.vcs()},r0s(){return 1e3*this.Xcs()}}}{const Gf=self.Ws;Gf.blt.n0s=class extends Gf.GTt{constructor(t){super(t)}Gr(){super.Gr()}}}{const Tf=self.Ws;Tf.blt.n0s.jIt=class extends Tf.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const _f=self.Ws;_f.blt.n0s.Instance=class extends _f.PTt{constructor(t,s){super(t),this.o0s=null,this.a0s=-1,this.WJt="",this.l0s=new Set,this.u0s=0,this.c0s=0,this.f0s=0,this.Eus=0,this.Fus=0,this.d0s=0,this.p0s=0,this.m0s=0,this.g0s=0,this.ios=0,this.y0s=!1,s&&(this.y0s=s[0]);const i=this._f.r0();this.L0=new _f.D0(_f.C0.F0(i,"instancedestroy",t=>this.rQt(t.aW)),_f.C0.F0(i,"afterload",t=>this.pK()))}Gr(){this.o0s=null,super.Gr()}S0s(t){t?(this.o0s=t,this.DGt()):(this.o0s=null,this.yGt())}w0s(t,s,i){if(t){const e=t.yvt(this.Ci);if(e){this.WJt=s,this.S0s(e);const h=this.Ci.rO(),r=e.rO();if("properties"===this.WJt){const n=this.l0s;n.clear();for(const o of i)n.add(o);this.Eus=h.qM()-r.qM(),this.Fus=h.$M()-r.$M(),this.m0s=h.GetAngle()-r.GetAngle(),this.ios=h.GetAngle(),this.g0s=h.ZM()-r.ZM(),n.has("x")&&n.has("y")&&(this.c0s=_f.Lr(r.qM(),r.$M(),h.qM(),h.$M())-r.GetAngle(),this.u0s=_f.kr(r.qM(),r.$M(),h.qM(),h.$M())),n.has("width-abs")?this.d0s=h.Lm()-r.Lm():n.has("width-scale")&&(this.d0s=h.Lm()/r.Lm()),n.has("height-abs")?this.p0s=h.qm()-r.qm():n.has("height-scale")&&(this.p0s=h.qm()/r.qm())}else this.u0s=_f.kr(r.qM(),r.$M(),h.qM(),h.$M())}}}av(){const t=this.l0s,s=this.WJt,i={uid:this.o0s&&!this.o0s.Pj()?this.o0s.vN():-1,m:s,d:this.y0s};return"rope"===s||"bar"===s?i.pd=this.u0s:"properties"===s&&(i.ps=[...this.l0s],t.has("imagepoint")?i.ip=this.f0s:t.has("x")&&t.has("y")?(i.pa=this.c0s,i.pd=this.u0s):(t.has("x")&&(i.dx=this.Eus),t.has("y")&&(i.dy=this.Fus)),t.has("angle")&&(i.da=this.m0s,i.lka=this.ios),(t.has("width-abs")||t.has("width-scale"))&&(i.dw=this.d0s),(t.has("height-abs")||t.has("height-scale"))&&(i.dh=this.p0s),t.has("z"))&&(i.dz=this.g0s),i}lv(t){const s=t.m,i=this.l0s;if(i.clear(),this.a0s=t.uid,"number"==typeof s)this.b0s(t);else if(this.WJt=s,t.hasOwnProperty("d")&&(this.y0s=!!t.d),"rope"===s||"bar"===s)this.u0s=t.pd;else if("properties"===s){for(const e of t.ps)i.add(e);i.has("imagepoint")?this.f0s=t.ip:i.has("x")&&i.has("y")?(this.c0s=t.pa,this.u0s=t.pd):(i.has("x")&&(this.Eus=t.dx),i.has("y")&&(this.Fus=t.dy)),i.has("angle")&&(this.m0s=t.da,this.ios=t.lka||0),(i.has("width-abs")||i.has("width-scale"))&&(this.d0s=t.dw),(i.has("height-abs")||i.has("height-scale"))&&(this.p0s=t.dh),i.has("z")&&(this.g0s=t.dz)}}b0s(t){const s=this.l0s,i=t.msa,e=t.tsa,h=t.pa,r=t.pd,n=t.m;switch(n){case 0:this.WJt="properties",s.add("x").add("y").add("angle"),this.c0s=h,this.u0s=r,this.m0s=i-e,this.ios=t.lka;break;case 1:this.WJt="properties",s.add("x").add("y"),this.c0s=h,this.u0s=r;break;case 2:this.WJt="properties",s.add("angle"),this.m0s=i-e,this.ios=t.lka;break;case 3:this.WJt="rope",this.u0s=t.pd;break;case 4:this.WJt="bar",this.u0s=t.pd}}pK(){-1===this.a0s?this.S0s(null):(this.S0s(this._f.tO(this.a0s)),this.a0s=-1)}rQt(t){this.o0s===t&&(this.S0s(null),this.y0s)&&this._f.mN(this.Ci)}PGt(){const r=this.o0s;if(r&&!r.Pj()){let i=r.rO(),t=this.Ci,e=t.rO(),s=this.WJt,h=!1;if("rope"===s||"bar"===s){const n=_f.kr(e.qM(),e.$M(),i.qM(),i.$M());if(n>this.u0s||"bar"===s&&n<this.u0s){const o=_f.Lr(i.qM(),i.$M(),e.qM(),e.$M());e.I4(i.qM()+Math.cos(o)*this.u0s,i.$M()+Math.sin(o)*this.u0s),h=!0}}else{let t=this.l0s,s=0;if(t.has("imagepoint")){const[a,l]=r.WMt(this.f0s);e.BMt(a,l)||(e.I4(a,l),h=!0)}else if(t.has("x")&&t.has("y")){const u=i.qM()+Math.cos(i.GetAngle()+this.c0s)*this.u0s,c=i.$M()+Math.sin(i.GetAngle()+this.c0s)*this.u0s;e.BMt(u,c)||(e.I4(u,c),h=!0)}else s=i.qM()+this.Eus,t.has("x")&&s!==e.qM()&&(e.XM(s),h=!0),s=i.$M()+this.Fus,t.has("y")&&s!==e.$M()&&(e.KM(s),h=!0);t.has("angle")&&(this.ios!==e.GetAngle()&&(this.m0s=_f.Ar(this.m0s+(e.GetAngle()-this.ios))),(s=_f.Ar(i.GetAngle()+this.m0s))!==e.GetAngle()&&(e.D5(s),h=!0),this.ios=e.GetAngle()),t.has("width-abs")&&(s=i.Lm()+this.d0s)!==e.Lm()&&(e.Hm(s),h=!0),t.has("width-scale")&&(s=i.Lm()*this.d0s)!==e.Lm()&&(e.Hm(s),h=!0),t.has("height-abs")&&(s=i.qm()+this.p0s)!==e.qm()&&(e.Bm(s),h=!0),t.has("height-scale")&&(s=i.qm()*this.p0s)!==e.qm()&&(e.Bm(s),h=!0),t.has("z")&&(s=i.ZM()+this.g0s)!==e.ZM()&&(e.QM(s),this._f.fO())}h&&e._4()}}OGt(){const t="behaviors.pin.debugger";return[{title:"$"+this.oW().Sf(),properties:[{name:t+".is-pinned",value:!!this.o0s},{name:t+".pinned-uid",value:this.o0s?this.o0s.vN():0}]}]}}}{const If=self.Ws;If.blt.n0s.WY={M0s(){return!!this.o0s},v0s(){return this.y0s}}}{const Cf=self.Ws;Cf.blt.n0s.Irt={x0s(t,s){this.w0s(t,0===s?"rope":"bar")},G0s(t,s,i,e,h,r,n){const o=[];s&&o.push("x"),i&&o.push("y"),e&&o.push("angle"),n&&o.push("z"),1===h?o.push("width-abs"):2===h&&o.push("width-scale"),1===r?o.push("height-abs"):2===r&&o.push("height-scale"),0!==o.length&&this.w0s(t,"properties",o)},T0s(t,s,i,e,h,r){const n=["imagepoint"];i&&n.push("angle"),r&&n.push("z"),1===e?n.push("width-abs"):2===e&&n.push("width-scale"),1===h?n.push("height-abs"):2===h&&n.push("height-scale"),this.f0s=s,this.w0s(t,"properties",n)},_0s(t){"rope"!==this.WJt&&"bar"!==this.WJt||(this.u0s=Math.max(t,0))},I0s(t){this.y0s=t},C0s(){this.S0s(null),this.WJt="",this.l0s.clear(),this.f0s=""},n0s(t,s){switch(s){case 0:this.w0s(t,"properties",["x","y","angle"]);break;case 1:this.w0s(t,"properties",["x","y"]);break;case 2:this.w0s(t,"properties",["angle"]);break;case 3:this.w0s(t,"rope");break;case 4:this.w0s(t,"bar")}}}}{const Rf=self.Ws;Rf.blt.n0s.Crt={R0s(){return this.o0s?this.o0s.vN():-1}}}{const Af=self.Ws;Af.blt.$Tt=class extends Af.GTt{constructor(t){super(t)}Gr(){super.Gr()}}}{const Pf=self.Ws;Pf.blt.$Tt.jIt=class extends Pf.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const Ef=self.Ws,Ff=self.Ks,Df=self.iW,kf=new Set,Of=(Ef.blt.$Tt.Instance=class extends Ef.PTt{constructor(t,s){super(t),this.txt(!0),s&&(this.txt(s[0]),this.tst(s[1]))}Gr(){super.Gr()}txt(t){this.Ci.vRt(!!t)}mc(){return this.Ci.MRt()}tst(s){const i=this.Ci.Dbt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}m8(){return this.Ci.Dbt().get("solidTags")||kf}A0s(){return[...this.m8()].join(" ")}av(){return{e:this.mc()}}lv(t){this.txt(t.e)}cnt(t){if(0===t)return this.mc()}ynt(t,s){0===t&&this.txt(s)}OGt(){return[{title:"$"+this.oW().Sf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.mc(),eVt:t=>this.txt(t)},{name:"behaviors.solid.properties.tags.name",value:this.A0s(),eVt:t=>this.tst(t)}]}]}Xxt(){return self.P0s}},new WeakMap);self.P0s=class extends Df{constructor(){super(),Of.set(this,Df.fN().K6())}set isEnabled(t){Of.get(this).txt(!!t)}get isEnabled(){return Of.get(this).mc()}set tags(t){Ff.Re(t),Of.get(this).tst(t)}get tags(){return Of.get(this).A0s()}}}{const Lf=self.Ws;Lf.blt.$Tt.WY={mc(){return this.mc()}}}{const Bf=self.Ws;Bf.blt.$Tt.Irt={txt(t){this.txt(t)},tst(t){this.tst(t)}}}{const Nf=self.Ws;Nf.blt.$Tt.Crt={}}{const Wf=self.Ws;Wf.blt.E0s=class extends Wf.GTt{constructor(t){super(t)}Gr(){super.Gr()}}}{const jf=self.Ws;jf.blt.E0s.jIt=class extends jf.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const Vf=self.Ws,Uf=self.Ks,Hf=self.iW,F=(Vf.blt.E0s.Instance=class extends Vf.PTt{constructor(t,s){super(t),this.Wus=200,this.jus=600,this.Vus=600,this.F0s=0,this.D0s=!0,this.k0s=!1,this.nSt=!0,this.C_t=0,this.O0s=this.rO().GetAngle(),this.L0s=[],s&&(this.Wus=s[0],this.jus=s[1],this.Vus=s[2],this.F0s=Vf.Pr(s[3]),this.D0s=s[4],this.k0s=s[5],this.nSt=s[6]),this.B0s=null,this.N0s=NaN,this.W0s=NaN,this.j0s=NaN,this.V0s=[0,0],this.U0s={KZ:this.V0s}}Gr(){this.B0s&&(this.B0s.Gr(),this.B0s=null),this.N0s=NaN,this.W0s=NaN,this.j0s=NaN,this.V0s=null,this.U0s=null,super.Gr()}av(){return{ms:this.Wus,acc:this.jus,dec:this.Vus,rs:this.F0s,sa:this.D0s,sos:this.k0s,s:this.C_t,ma:this.O0s,wp:this.L0s.map(t=>({x:t.x,y:t.y})),e:this.nSt}}lv(t){this.Wus=t.ms,this.jus=t.acc,this.Vus=t.dec,this.F0s=t.rs,this.D0s=t.sa,this.k0s=t.sos,this.C_t=t.s,this.O0s=t.ma,this.L0s=t.wp.map(t=>({x:t.x,y:t.y})),this.s2t(t.e),this.nSt&&0<this.L0s.length&&this.EGt()}H0s(t,s,i,e){i&&Vf.$n(this.L0s),this.L0s.push({x:t,y:s,opts:e}),this.nSt&&this.EGt()}z0s(){return this.L0s.length}J0s(t){return(t=Math.floor(t))<0||t>=this.L0s.length?0:this.L0s[t].x}q0s(t){return(t=Math.floor(t))<0||t>=this.L0s.length?0:this.L0s[t].y}bcs(){return 0<this.L0s.length}X0s(){Vf.$n(this.L0s),this.C_t=0,this.gGt()}Y0s(){return 0<this.L0s.length?this.L0s[0].x:0}$0s(){return 0<this.L0s.length?this.L0s[0].y:0}K0s(){if(0<this.L0s.length){const t=this.L0s[0];if(t.opts)return t.opts.Z0s}return!1}Q0s(){if(0<this.L0s.length){const t=this.L0s[0];if(t.opts)return t.opts.Z0s&&t.opts.tds}return!1}sds(){if(0<this.L0s.length){const t=this.L0s[0];if(t.opts)return t.opts.ids}return NaN}eds(t){this.bcs()&&(this.C_t=Math.min(t,this.Wus))}Ics(){return this.C_t}Pcs(t){this.Wus=Math.max(t,0),this.eds(this.C_t)}Ecs(){return this.Wus}hds(){return this.nSt&&this.bcs()&&this.K0s()?!!this.Q0s():0!==this.F0s}cZ(){if(this.nSt&&this.bcs()){let t=this._f.ak(this.Ci),s=this.Ci.rO(),i=s.qM(),e=s.$M(),h=s.GetAngle(),r=this.C_t,n=this.Wus,o=this.jus,a=this.Vus,l=this.Y0s(),u=this.$0s(),c=Vf.Lr(i,e,l,u),f=!1;if(0<a&&1===this.L0s.length){const m=.5*r*r/a*1.0001;if(f=Vf.Or(i,e,l,u)<=m*m){const g=Vf.kr(i,e,l,u);r=Math.sqrt(2*a*g),n=r,this.C_t=r}}if(this.hds()){const y=Vf.Br(this.O0s,c);if(y>Number.EPSILON){const S=y/this.F0s,w=Vf.kr(s.qM(),s.$M(),l,u),b=w/(2*Math.sin(y)),M=b*y;n=Math.min(n,Vf.Rr(M/S,0,this.Wus))}}let d=f?-a:o,p=Math.min(r*t+.5*d*t*t,n*t);if(f){if(0<a&&(this.C_t=Math.max(this.C_t-a*t,0),0===this.C_t))return void this.rds(s,l,u)}else this.C_t=0===o?n:Math.min(this.C_t+o*t,n);if(Vf.Or(s.qM(),s.$M(),l,u)<=p*p)this.rds(s,l,u);else{if(this.hds()?this.O0s=Vf.Nr(this.O0s,c,this.F0s*t):this.O0s=c,s.A4(Math.cos(this.O0s)*p,Math.sin(this.O0s)*p),this.D0s){const v=this.K0s(),x=this.Q0s();if(v&&!x){const G=Vf.kr(this.N0s,this.W0s,s.qM(),s.$M()),T=Vf.kr(this.N0s,this.W0s,l,u),_=G/T;s.D5(Vf.jr(this.j0s,this.sds(),_))}else s.D5(this.O0s),this.N0s=NaN,this.W0s=NaN,this.j0s=NaN}s._4(),this.nds(i,e,h)}}}rds(t,s,i){t.I4(s,i);const e=this.L0s[0];e.opts&&e.opts.Z0s?(this.N0s=e.x,this.W0s=e.y,this.j0s=e.opts.ids,this.D0s&&t.D5(this.j0s)):(this.N0s=NaN,this.W0s=NaN,this.j0s=NaN),t._4(),this.L0s.shift(),0===this.L0s.length&&(this.B0s&&(this.B0s.Gr(),this.B0s=null,this.N0s=NaN,this.W0s=NaN,this.j0s=NaN),this.C_t=0,this.gGt()),this.cGt("arrived"),this.YN(Vf.blt.E0s.WY.ods)}nds(t,s,i){const e=this._f.fD();if(this.k0s&&e.YO(this.Ci)){this.X0s();const h=this.Ci.rO(),r=h.qM(),n=h.$M(),o=Vf.Lr(r,n,t,s),a=Vf.kr(r,n,t,s);e.z3t(this.Ci,Math.cos(o),Math.sin(o),Math.max(a,1))||(h.I4(t,s),h.D5(i),h._4()),this.cGt("hitsolid"),this.YN(Vf.blt.E0s.WY.ads)}}lds(){return this.D0s}uds(t){this.D0s=!!t}cds(t){if(this.O0s=t,this.nSt&&this.D0s&&!this.bcs()){const s=this.rO();s.D5(this.O0s),s._4()}}fds(){return this.O0s}Fcs(t){this.jus=Math.max(t,0)}Dcs(){return this.jus}kcs(t){this.Vus=Math.max(t,0)}Ocs(){return this.Vus}dds(t){this.F0s=Math.max(t,0)}pds(){return this.F0s}mds(t){this.k0s=!!t}gds(){return this.k0s}s2t(t){this.nSt!==(t=!!t)&&(this.nSt=t,this.nSt&&this.bcs()?this.EGt():this.gGt())}e2t(){return this.nSt}cnt(t){switch(t){case 0:return this.Ecs();case 1:return this.Dcs();case 2:return this.Ocs();case 3:return Vf.Er(this.pds());case 4:return this.lds();case 5:return this.gds();case 6:return this.e2t()}}ynt(t,s){switch(t){case 0:this.Pcs(s);break;case 1:this.Fcs(s);break;case 2:this.kcs(s);break;case 3:this.dds(Vf.Pr(s));break;case 4:this.uds(s);break;case 5:this.mds(s);break;case 6:this.s2t(s)}}OGt(){const t="behaviors.moveto";return[{title:"$"+this.oW().Sf(),properties:[{name:t+".debugger.speed",value:this.Ics(),eVt:t=>this.eds(t)},{name:t+".debugger.angle-of-motion",value:Vf.Er(this.fds()),eVt:t=>this.O0s=Vf.Pr(t)},{name:t+".debugger.target-x",value:this.Y0s()},{name:t+".debugger.target-y",value:this.$0s()},{name:t+".debugger.waypoint-count",value:this.z0s()},{name:t+".properties.max-speed.name",value:this.Ecs(),eVt:t=>this.Pcs(t)},{name:t+".properties.acceleration.name",value:this.Dcs(),eVt:t=>this.Fcs(t)},{name:t+".properties.deceleration.name",value:this.Ocs(),eVt:t=>this.kcs(t)},{name:t+".properties.rotate-speed.name",value:Vf.Er(this.pds()),eVt:t=>this.dds(Vf.Pr(t))},{name:t+".properties.enabled.name",value:this.e2t(),eVt:t=>this.s2t(t)}]}]}Xxt(){return self.yds}},new WeakMap);self.yds=class extends Hf{constructor(){super(),F.set(this,Hf.fN().K6())}Sds(t,s,i=!0){Uf.Te(t),Uf.Te(s),F.get(this).H0s(t,s,!!i)}wds(){return F.get(this).Y0s()}bds(){return F.get(this).$0s()}Mds(){const t=F.get(this);return[t.Y0s(),t.$0s()]}vds(){return F.get(this).z0s()}xds(t){return Uf.Te(t),F.get(this).J0s(t)}Gds(t){return Uf.Te(t),F.get(this).q0s(t)}Tds(t){Uf.Te(t);const s=F.get(this);return[s.J0s(t),s.q0s(t)]}stop(){F.get(this).X0s()}get Sfs(){return F.get(this).bcs()}get speed(){return F.get(this).Ics()}set speed(t){Uf.Te(t),F.get(this).eds(t)}get afs(){return F.get(this).Ecs()}set afs(t){Uf.Te(t),F.get(this).Pcs(t)}get acceleration(){return F.get(this).Dcs()}set acceleration(t){Uf.Te(t),F.get(this).Fcs(t)}get lfs(){return F.get(this).Ocs()}set lfs(t){Uf.Te(t),F.get(this).kcs(t)}get _ds(){return F.get(this).fds()}set _ds(t){Uf.Te(t),F.get(this).cds(t)}get Ids(){return F.get(this).pds()}set Ids(t){Uf.Te(t),F.get(this).dds(t)}get Cds(){return F.get(this).gds()}set Cds(t){F.get(this).mds(t)}get isEnabled(){return F.get(this).e2t()}set isEnabled(t){F.get(this).s2t(t)}}}{const zf=self.Ws;zf.blt.E0s.WY={Ifs(){return this.bcs()},Cfs(t,s){return zf.compare(this.Ics(),t,s)},mc(){return this.e2t()},ods(){return!0},ads(){return!0}}}{const Jf=self.Ws;Jf.blt.E0s.Irt={Rds(t,s,i){this.H0s(t,s,0===i)},Ads(t,s,i){if(t){const e=t.d5(this.Ci);if(e&&e.rO()){const[h,r]=e.WMt(s);this.H0s(h,r,0===i)}}},Pds(i){const t=this.Ci.Mlt(Jf.blt.Pathfinding);if(t){const e=t._GetPath();if(0!==e.length)for(let t=0,s=e.length;t<s;++t){const h=e[t];this.H0s(h.x,h.y,0===t&&0===i)}}},Eds(t,s,i){const e=Jf.vr(Jf.EZ,t,s);if(e.JZ()){e.XZ(this.Ci.rO());let s=!0;for(const h of e.qZ())switch(h.qG()){case"line":{const r=h.qM(),n=h.$M();this.H0s(r,n,s&&0===i),s=!1;break}case"cubic-bezier":for(let t=0;t<=h.WQ();t++){const o=t*h.jQ(),a=h.Map(o),l=a[0],u=a[1],c=this.J0s(this.z0s()-1),f=this.q0s(this.z0s()-1);!s&&Jf.Se(c)&&Jf.Se(f)&&Jf.Or(c,f,l,u)<25||(this.H0s(l,u,s&&0===i,{Z0s:!0,tds:s,ids:Math.atan2(u-f,l-c)}),s=!1)}}this.B0s=e}else e.Gr()},Fds(t,s,i){const e=this._f.Btt().VK(t);e&&Jf.blt.E0s.Irt.Eds.call(this,e,s,i)},e8(){this.X0s()},Dds(t){this.cds(Jf.Pr(t))},kds(t){this.eds(t)},Dfs(t){this.Pcs(t)},M9t(t){this.Fcs(t)},kfs(t){this.kcs(t)},Ods(t){this.dds(Jf.Pr(t))},Lds(t){this.mds(t)},txt(t){this.s2t(t)}}}{const qf=self.Ws;qf.blt.E0s.Crt={Yfs(){return this.Ics()},$fs(){return this.Ecs()},Kfs(){return this.Dcs()},Zfs(){return this.Ocs()},i0s(){return qf.Er(this.fds())},Bds(){return qf.Er(this.pds())},Nds(){return this.Y0s()},Wds(){return this.$0s()},jds(){return this.z0s()},Vds(t){return this.J0s(t)},Uds(t){return this.q0s(t)}}}{const Xf=self.Ws;Xf.blt.KTt=class extends Xf.GTt{constructor(t){super(t)}Gr(){super.Gr()}}}{const Yf=self.Ws;Yf.blt.KTt.jIt=class extends Yf.RTt{constructor(t){super(t)}Gr(){super.Gr()}qxt(){}}}{const $f=self.Ws,Kf=self.iW,Zf=($f.blt.KTt.Instance=class extends $f.PTt{constructor(t,s){super(t),this.txt(!0),s&&this.txt(s[0])}Gr(){super.Gr()}txt(t){this.Ci.GRt(!!t)}mc(){return this.Ci.xRt()}av(){return{e:this.mc()}}lv(t){this.txt(t.e)}cnt(t){if(0===t)return this.mc()}ynt(t,s){0===t&&this.txt(s)}OGt(){return[{title:"$"+this.oW().Sf(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this.mc(),eVt:t=>this.txt(t)}]}]}Xxt(){return self.Hds}},new WeakMap);self.Hds=class extends Kf{constructor(){super(),Zf.set(this,Kf.fN().K6())}set isEnabled(t){Zf.get(this).txt(!!t)}get isEnabled(){return Zf.get(this).mc()}}}{const Qf=self.Ws;Qf.blt.KTt.WY={mc(){return this.mc()}}}{const t0=self.Ws;t0.blt.KTt.Irt={txt(t){this.txt(t)}}}{const s0=self.Ws;s0.blt.KTt.Crt={}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},e=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,e,0;const i0=self.Ws;self.bwt=[()=>"LevelSystem",()=>0,()=>-10,()=>10,()=>"Robot Boundary",t=>{const s=t.Awt(0);return()=>s.iwt()},t=>{const s=t.Awt(0);return()=>s.iwt()+4},t=>{const s=t.Awt(0);return()=>s.iwt()+10},t=>{const s=t.Awt(0);return()=>s.iwt()+2},t=>{const s=t.Awt(0);return()=>s.iwt()-10},()=>"x",()=>1,()=>106.75,()=>"y",()=>60,t=>{const s=t.Awt(0).$St();return()=>s("x")},t=>{const s=t.Awt(0).$St();return()=>s("y")},t=>{const s=t.Awt(0).$St();return()=>16*s("x")+8},t=>{const s=t.Awt(0).$St();return()=>16*s("y")+7},()=>"",()=>7,t=>{const s=t.Awt(0).$St();return()=>16*s("x")},t=>{const s=t.Awt(0).$St();return()=>16*s("y")},()=>8,t=>{const s=t.Awt(0).$St();return()=>16*s("x")+12},t=>{const s=t.Awt(0).$St();return()=>16*s("y")+6},()=>2,t=>{const s=t.Awt(0).$St();return()=>16*s("x")+4},t=>{const s=t.Awt(0);return()=>s.iwt()+32},t=>{const s=t.Awt(0);return()=>s.iwt()-32},t=>{const s=t.Awt(0);return()=>s.iwt()-16},t=>{const s=t.Awt(0),i=t.Awt(1),e=t.Awt(2),h=t.Awt(3).wwt();return()=>s.iwt()+(i.iwt()-e.iwt())/h.tht()},t=>{const s=t.Awt(0);return()=>16*Math.round(s.iwt()/16)+8},()=>-100,()=>1e3,()=>"whee",t=>{const s=t.Awt(0);return()=>i0.Rr(Math.sqrt(Math.abs(s.pwt()))/5,0,1.25)},t=>{const s=t.Awt(0),i=t.Awt(1).$St();return()=>i0.Rr(s.pwt()-2e3*i(),200,600)},t=>{const s=t.Awt(0),i=t.Awt(1).$St();return()=>i0.Rr(s.pwt()-2e3*i(),400,1500)},t=>{const s=t.Awt(0),i=t.Awt(1).$St();return()=>i0.Rr(s.pwt()+2e3*i(),0,1500)},t=>{const s=t.Awt(0);return()=>s.pwt()},t=>{const s=t.Awt(0).$St();return()=>100*s()},t=>{const s=t.Awt(0).wwt();return()=>s.tht()/100*14},t=>{const s=t.Awt(0),i=t.Awt(1);return()=>s.nwt()/i.nwt()*14},t=>{const s=t.Awt(0).$St(),i=t.Awt(1).$St();return()=>i0.Rr(s()+i(),0,1)},()=>"Horimovement",()=>"Vertimovement",()=>"Roman",()=>"Walljump",()=>-1,()=>25,()=>"cling 1",t=>{const s=t.Awt(0);return()=>s.iwt()-.1},()=>-400,()=>200,()=>"Jump 1",()=>3,()=>100,()=>"cling 2",t=>{const s=t.Awt(0);return()=>s.iwt()+.1},()=>-200,()=>"Jump 2",()=>"Looks/Sound",t=>{const s=t.Awt(0).wwt();return()=>e("run ",s.tht())},t=>{const s=t.Awt(0);return()=>s.pwt()/15},t=>{const s=t.Awt(0).wwt();return()=>e("still ",s.tht())},()=>.1,t=>{const s=t.Awt(0).wwt();return()=>e("Jump ",s.tht())},t=>{const s=t.Awt(0).$St();return()=>0+s(-10,-5)},()=>"swist 1",()=>"scrr",()=>"swist 2",()=>-1e3,t=>{const s=t.Awt(0).wwt();return()=>e("Fall ",s.tht())},t=>{const s=t.Awt(0).wwt();return()=>2*(1.5-s.tht())},t=>{const s=t.Awt(0),i=t.Awt(1).wwt();return()=>s.iwt()+2*(1.5-i.tht())},()=>"LevelTransit",()=>-15,()=>15,()=>"Combat",t=>{const s=t.Awt(0).$St();return()=>2*s()},t=>{const s=t.Awt(0).wwt();return()=>e("Up ",s.tht())},()=>-350,()=>500,()=>5,()=>90,()=>.4,t=>{const s=t.Awt(0).wwt();return()=>e("Sair ",s.tht())},()=>.5,t=>{const s=t.Awt(0).wwt();return()=>e("Nair ",s.tht())},()=>"Sair 1",()=>250,()=>600,()=>-5,()=>"Sair 2",()=>-250,()=>1500,t=>{const s=t.Awt(0).wwt();return()=>e("Jab ",s.tht())},t=>{const s=t.Awt(0);return()=>i0.Rr(s.pwt(),-5,5)},()=>.2,()=>"Animation 1",t=>{const s=t.Awt(0).$St(),i=t.Awt(1).$St();return()=>i0.Rr(s()+10*i(),0,1)},()=>"Robot",()=>"RoboStart",t=>{const s=t.Awt(0);return()=>s.nwt()},t=>{const s=t.Awt(0).$St();return()=>e("",Math.round(s(1,23)))},t=>{const s=t.Awt(0).$St();return()=>1+s(-.5,.5)},()=>"RobotMovement",t=>{const s=t.Awt(0);return()=>s.iwt()+100},t=>{const s=t.Awt(0);return()=>s.iwt()-100},()=>150,t=>{const s=t.Awt(0);return()=>s.iwt()+3},t=>{const s=t.Awt(0);return()=>s.iwt()-3},t=>{const s=t.Awt(0);return()=>s.nwt()-50},t=>{const s=t.Awt(0);return()=>s.nwt()+50},t=>{const s=t.Awt(0).$St();return()=>s(1,5)},t=>{const s=t.Awt(0).$St();return()=>s(-50,50)},t=>{const s=t.Awt(0),i=t.Awt(1);return()=>s.nwt()+i.nwt()+2},t=>{const s=t.Awt(0),i=t.Awt(1);return()=>s.nwt()+i.nwt()-2},()=>"RoboLooks",t=>{const s=t.Awt(0),i=t.Awt(1);return()=>e(e("Walk ",s.nwt())+" ",i.nwt())},()=>"RoboAttack",t=>{const s=t.Awt(0);return()=>e("Attack ",s.nwt())+" 1"},()=>-300,t=>{const s=t.Awt(0);return()=>e("Attack ",s.nwt())+" 2"},()=>"RoboHurt",()=>175,t=>{const s=t.Awt(0).wwt(),i=t.Awt(1);return()=>2*-(s.tht()-1.5)*200-i0.Rr(Math.round(400*Math.abs(i.pwt())),0,100)},t=>{const s=t.Awt(0);return()=>-300+i0.Rr(Math.round(400*Math.abs(s.pwt())),0,400)},t=>{const s=t.Awt(0);return()=>75+i0.Rr(Math.abs(100*s.pwt()),0,50)},t=>{const s=t.Awt(0),i=t.Awt(1).wwt();return()=>e(e("Hurt ",s.nwt())+" ",i.tht())},()=>.25,()=>"c",()=>20,t=>{const s=t.Awt(0);return()=>+s.pwt()},()=>75,()=>30,()=>50,t=>{const s=t.Awt(0);return()=>s.pwt()/3},t=>{const s=t.Awt(0),i=t.Awt(1).$St();return()=>s.iwt()+i(-6,6)},t=>{const s=t.Awt(0),i=t.Awt(1).$St();return()=>s.iwt()+i(-16,16)},t=>{const s=t.Awt(0),i=t.Awt(1).$St();return()=>s.pwt()+i(-40,40)},()=>-281474976711679,()=>"Text",t=>{const s=t.Awt(0),i=t.Awt(1).wwt();return()=>s.nwt()-i.tht()},()=>"SystemEnd",()=>"System",t=>{const s=t.Awt(0),i=t.Awt(1).wwt(),e=t.Awt(2).$St();return()=>s.iwt()+i.tht()*e()},()=>"Controls",()=>"Animation 2",()=>.15,t=>{const s=t.Awt(0);return()=>s.iwt()+480},t=>{const s=t.Awt(0);return()=>s.iwt()-480},()=>"BackgroundScrolling",()=>-411,t=>{const s=t.Awt(0);return()=>s.iwt()-320},()=>-535,()=>-1035,t=>{const s=t.Awt(0);return()=>s.iwt()-330},()=>"StartupBackButtonAndEveryTick",t=>{const s=t.Awt(0).wwt();return()=>e("Max Damage: ",s.tht())},t=>{const s=t.Awt(0).wwt();return()=>e("Max Combo: ",s.tht())},t=>{const s=t.Awt(0).wwt();return()=>e("Damage: ",s.tht())},t=>{const s=t.Awt(0).wwt();return()=>e("Combo: ",s.tht())},()=>"RomanTraining",()=>"Walljump2",()=>"Looks/Sound2",()=>"LevelTransit2",()=>"Combat2",()=>"Vertimovement2",()=>"Horimovement2",()=>"RobotTraining",()=>"RoboStart2",()=>"RobotMovement2",()=>"RoboLooks2",()=>"RoboAttack2",()=>"RoboHurt2",()=>-17,t=>{const s=t.Awt(0);return()=>e("Walk ",s.nwt())+" 1"},t=>{const s=t.Awt(0);return()=>e("Walk ",s.nwt())+" 2"},()=>"Text2",()=>"SystemEnd2",t=>{const s=t.Awt(0).wwt();return()=>s.tht()}]}var t=self.Ws;self.aBt=function(){return[t.VY.pjt,t.VY.urt,t.blt.Qhs,t.VY.qHt,t.VY.YJt,t.blt.Krs,t.blt.$ls,t.VY.pYt,t.blt.di,t.blt.n0s,t.blt.$Tt,t.VY.kKt,t.VY.Audio,t.VY.gamepad,t.VY.Keyboard,t.VY.ois,t.VY.Touch,t.blt.E0s,t.blt.KTt,t.VY.jY.WY.Jpt,t.VY.jY.WY.NY,t.blt.Krs.Irt.Cls,t.blt.Krs.Irt.bls,t.VY.urt.Irt.oEt,t.VY.urt.Irt.LMt,t.VY.urt.Crt.D2t,t.VY.urt.Crt.k2t,t.blt.n0s.Irt.G0s,t.VY.YJt.Irt.LMt,t.blt.n0s.Irt.I0s,t.VY.jY.WY.d6t,t.VY.qHt.WY.Mzt,t.VY.jY.Crt.Z8t,t.VY.jY.Irt.A6t,t.VY.urt.Irt.NVt,t.VY.Audio.WY.PQt,t.VY.Audio.Irt.Play,t.VY.jY.WY.Z4t,t.VY.jY.Irt._6t,t.VY.jY.WY.j4t,t.VY.qHt.Irt.Rzt,t.VY.Audio.Irt.d8,t.blt.di.Crt.h0s,t.blt.di.Irt.Dfs,t.blt.di.Crt.$fs,t.VY.jY.Crt.nk,t.blt.di.Irt.M9t,t.blt.di.Crt.Kfs,t.blt.di.Irt.SetGravity,t.blt.di.Crt.oXt,t.VY.urt.Irt.y2t,t.blt.di.Crt.e0s,t.VY.urt.Irt.w2t,t.VY.urt.Irt.oHt,t.VY.jY.Irt.F6t,t.VY.jY.Crt.timescale,t.VY.jY.Irt.T6t,t.VY.Keyboard.WY.zss,t.VY.jY.Irt.qpt,t.VY.jY.WY.Y4t,t.VY.urt.Crt.C2t,t.blt.$Tt.Irt.txt,t.VY.jY.WY.Agt,t.VY.urt.WY.Pvt,t.VY.pYt.Irt.yB,t.blt.di.Irt.Lfs,t.VY.urt.Irt.nHt,t.VY.jY.Irt.x6t,t.blt.di.Irt.Hfs,t.VY.jY.WY.f6t,t.VY.urt.WY.Avt,t.VY.urt.Irt.XM,t.blt.di.Irt.jfs,t.blt.di.Irt.Wfs,t.VY.Keyboard.WY.Fss,t.VY.jY.WY.V4t,t.VY.Audio.Irt.e8,t.blt.di.WY.Ifs,t.blt.di.WY.Rfs,t.VY.urt.Irt.uHt,t.blt.di.Crt.Yfs,t.VY.Audio.Irt.WQt,t.blt.di.WY.pcs,t.VY.urt.WY.vHt,t.VY.jY.Crt.random,t.VY.urt.Irt.IHt,t.VY.jY.WY.K4t,t.VY.YJt.Irt.NMt,t.blt.di.WY.Efs,t.VY.urt.WY._vt,t.VY.jY.Irt.K6t,t.blt.$ls.Irt.txt,t.blt.di.Irt.Nfs,t.VY.jY.Irt.Hn,t.VY.jY.Irt.Z6t,t.blt.Krs.Irt.Gls,t.VY.urt.Irt.p2t,t.VY.jY.Irt.G6t,t.VY.urt.Irt.D5,t.VY.urt.WY.MHt,t.blt.di.WY.ycs,t.VY.urt.WY.HUt,t.VY.urt.Irt.FHt,t.VY.urt.WY.m2t,t.VY.urt.WY.EMt,t.VY.urt.WY.r2t,t.VY.urt.Irt.b2t,t.blt.di.Irt.Bfs,t.VY.jY.WY.U4t,t.VY.jY.WY.Fd,t.blt.di.WY.Afs,t.VY.urt.WY.h2t,t.VY.YJt.Irt.A9t,t.VY.YJt.Irt.a9t,t.VY.jY.WY.c6t,t.blt.Krs.Irt.xls,t.VY.urt.Irt.yB,t.blt.di.Irt.txt,t.VY.urt.Irt.lvt,t.VY.pYt.WY.D$t,t.VY.pYt.Irt.B$t,t.VY.pYt.Irt.L$t,t.VY.pjt.Irt.XM,t.VY.pjt.Crt.D2t,t.VY.Touch.WY.Xes,t.VY.ois.WY.zis,t.blt.E0s.WY.Ifs,t.blt.E0s.Irt.Rds,t.VY.jY.Irt.Y6t,t.VY.pjt.WY.EMt,t.VY.pYt.Irt.Af]},self.MBt=[{zds:0},{Jds:0},{qds:0},{Xds:0},{Yds:0},{$ds:0},{Kds:0},{Zds:0},{Qds:0},{t1s:0},{s1s:0},{i1s:0},{urt:0},{e1s:0},{Krs:0},{head:0},{h1s:0},{Body:0},{r1s:0},{n1s:0},{o1s:0},{a1s:0},{l1s:0},{di:0},{u1s:0},{c1s:0},{f1s:0},{d1s:0},{p1s:0},{m1s:0},{g1s:0},{y1s:0},{S1s:0},{w1s:0},{b1s:0},{M1s:0},{n0s:0},{v1s:0},{x1s:0},{G1s:0},{T1s:0},{_1s:0},{I1s:0},{C1s:0},{R1s:0},{A1s:0},{P1s:0},{E1s:0},{F1s:0},{D1s:0},{k1s:0},{O1s:0},{L1s:0},{B1s:0},{Audio:0},{Gamepad:0},{Keyboard:0},{ois:0},{Touch:0},{N1s:0},{W1s:0},{j1s:0},{V1s:0},{U1s:0},{H1s:0},{z1s:0},{J1s:0},{Text:0},{E0s:0},{q1s:0},{X1s:0},{Y1s:0},{$1s:0},{K1s:0},{Z1s:0},{Q1s:0},{sps:0},{Nds:0},{ips:0},{eps:0},{hps:0},{rps:0},{nps:0},{ops:0},{aps:0},{jIt:0},{lps:0},{ups:0},{cps:0},{YJt:0},{dps:0},{pps:0},{mps:0},{gps:0},{yps:0},{Sps:0},{wps:0},{bps:0},{Mps:0},{vps:0},{xps:0},{Gps:0},{Tps:0},{_ps:0},{Ips:0},{Cps:0},{Rps:0},{Aps:0},{Pps:0},{Eps:0},{Fps:0},{Dps:0},{kps:0},{Ops:0},{Lps:0},{Bps:0},{Nps:0},{Wps:0}],self.jps={zds:class extends self.hVt{},Jds:class extends self.hVt{},qds:class extends self.hVt{},Yds:class extends self.cHt{},$ds:class extends self.lzt{},Kds:class extends self.cHt{},Zds:class extends self.Sqt{},Qds:class extends self.cHt{},t1s:class extends self.cHt{},s1s:class extends self.cHt{},i1s:class extends self.lzt{},urt:class extends self.cHt{},e1s:class extends self.cHt{},head:class extends self.cHt{},Body:class extends self.cHt{},r1s:class extends self.v$t{},n1s:class extends self.v$t{},o1s:class extends self.v$t{},a1s:class extends self.v$t{},l1s:class extends self.cHt{},u1s:class extends self.cHt{},m1s:class extends self.cHt{},g1s:class extends self.cHt{},y1s:class extends self.v$t{},S1s:class extends self.cHt{},w1s:class extends self.cHt{},b1s:class extends self.cHt{},M1s:class extends self.cHt{},v1s:class extends self.cHt{},x1s:class extends self.cHt{},G1s:class extends self.cHt{},T1s:class extends self.v$t{},_1s:class extends self.lzt{},C1s:class extends self.lzt{},R1s:class extends self.z6{},A1s:class extends self.z6{},P1s:class extends self.z6{},E1s:class extends self.z6{},F1s:class extends self.cHt{},D1s:class extends self.cHt{},k1s:class extends self.cHt{},O1s:class extends self.Sqt{},L1s:class extends self.Sqt{},B1s:class extends self.cHt{},Audio:class extends self.oN{},Gamepad:class extends self.oN{},Keyboard:class extends self.oN{},ois:class extends self.oN{},Touch:class extends self.oN{},j1s:class extends self.cHt{},V1s:class extends self.cHt{},U1s:class extends self.cHt{},H1s:class extends self.cHt{},z1s:class extends self.cHt{},J1s:class extends self.z6{},Text:class extends self.v$t{},q1s:class extends self.cHt{},X1s:class extends self.cHt{},ups:class extends self.cHt{},cps:class extends self.cHt{},YJt:class extends self.Sqt{},dps:class extends self.cHt{},pps:class extends self.cHt{},gps:class extends self.cHt{}};