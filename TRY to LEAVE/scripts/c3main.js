import "./../box2d.wasm.js";
// Generated by Construct, the game and animation creation tool
// Visit: https://www.construct.net

{let k=function(t){Mh=t},L=function(t){return t*kh},N=function(t,s){return Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},B=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[1]=0,t[2]=0),t[0]=1,t[3]=1,t},W=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},V=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},j=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},H=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},U=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},z=function(t,s){var i;return t===s?(i=s[1],t[1]=s[2],t[2]=i):(t[0]=s[0],t[1]=s[2],t[2]=s[1],t[3]=s[3]),t},J=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*(s=s[3])-h*e;return r?(t[0]=s*(r=1/r),t[1]=-e*r,t[2]=-h*r,t[3]=i*r,t):null},q=function(t,s){var i=s[0];return t[0]=s[3],t[1]=-s[1],t[2]=-s[2],t[3]=i,t},X=function(t){return t[0]*t[3]-t[2]*t[1]},t=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*n+r*o,t[1]=h*n+s*o,t[2]=e*a+r*i,t[3]=h*a+s*i,t},Y=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*n,t[1]=h*i+s*n,t[2]=e*-n+r*i,t[3]=h*-n+s*i,t},$=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],i=i[1];return t[0]=e*n,t[1]=h*n,t[2]=r*i,t[3]=s*i,t},K=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t},Z=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t},Q=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},tt=function(t){return Math.hypot(t[0],t[1],t[2],t[3])},st=function(t,s,i,e){return t[2]=e[2]/e[0],i[0]=e[0],i[1]=e[1],i[3]=e[3]-t[2]*i[1],[t,s,i]},it=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},s=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},et=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},ht=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=vh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},rt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},nt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},ot=function(){var t=new Mh(6);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[4]=0,t[5]=0),t[0]=1,t[3]=1,t},at=function(t){var s=new Mh(6);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s},lt=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t},ut=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},ct=function(t,s,i,e,h,r){var n=new Mh(6);return n[0]=t,n[1]=s,n[2]=i,n[3]=e,n[4]=h,n[5]=r,n},ft=function(t,s,i,e,h,r,n){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t},dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],s=s[5],o=i*r-e*h;return o?(t[0]=r*(o=1/o),t[1]=-e*o,t[2]=-h*o,t[3]=i*o,t[4]=(h*s-r*n)*o,t[5]=(e*n-i*s)*o,t):null},pt=function(t){return t[0]*t[3]-t[1]*t[2]},i=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],l=i[1],u=i[2],c=i[3],f=i[4],i=i[5];return t[0]=e*a+r*l,t[1]=h*a+n*l,t[2]=e*u+r*c,t[3]=h*u+n*c,t[4]=e*f+r*i+o,t[5]=h*f+n*i+s,t},mt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=Math.sin(i),i=Math.cos(i);return t[0]=e*i+r*a,t[1]=h*i+n*a,t[2]=e*-a+r*i,t[3]=h*-a+n*i,t[4]=o,t[5]=s,t},gt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e*a,t[1]=h*a,t[2]=r*i,t[3]=n*i,t[4]=o,t[5]=s,t},yt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],s=s[5],a=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=e*a+r*i+o,t[5]=h*a+n*i+s,t},wt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=-i,t[3]=s,t[4]=0,t[5]=0,t},St=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=s[1],t[4]=0,t[5]=0,t},bt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=s[0],t[5]=s[1],t},vt=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},Mt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],1)},xt=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t},e=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t},Tt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t},Gt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t},_t=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]},It=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],t=t[5],o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],s=s[5];return Math.abs(i-o)<=vh*Math.max(1,Math.abs(i),Math.abs(o))&&Math.abs(e-a)<=vh*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(h-l)<=vh*Math.max(1,Math.abs(h),Math.abs(l))&&Math.abs(r-u)<=vh*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(n-c)<=vh*Math.max(1,Math.abs(n),Math.abs(c))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},h=function(){var t=new Mh(9);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[5]=0,t[6]=0,t[7]=0),t[0]=1,t[4]=1,t[8]=1,t},Ct=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[4],t[4]=s[5],t[5]=s[6],t[6]=s[8],t[7]=s[9],t[8]=s[10],t},Pt=function(t){var s=new Mh(9);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s},Et=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},At=function(t,s,i,e,h,r,n,o,a){var l=new Mh(9);return l[0]=t,l[1]=s,l[2]=i,l[3]=e,l[4]=h,l[5]=r,l[6]=n,l[7]=o,l[8]=a,l},Rt=function(t,s,i,e,h,r,n,o,a,l){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t},Ft=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ot=function(t,s){var i,e,h;return t===s?(i=s[1],e=s[2],h=s[5],t[1]=s[3],t[2]=s[6],t[3]=i,t[5]=s[7],t[6]=e,t[7]=h):(t[0]=s[0],t[1]=s[3],t[2]=s[6],t[3]=s[1],t[4]=s[4],t[5]=s[7],t[6]=s[2],t[7]=s[5],t[8]=s[8]),t},Dt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=(s=s[8])*n-o*l,c=-s*r+o*a,f=l*r-n*a,d=i*u+e*c+h*f;return d?(t[0]=u*(d=1/d),t[1]=(-s*e+h*l)*d,t[2]=(o*e-h*n)*d,t[3]=c*d,t[4]=(s*i-h*a)*d,t[5]=(-o*i+h*r)*d,t[6]=f*d,t[7]=(-l*i+e*a)*d,t[8]=(n*i-e*r)*d,t):null},kt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],s=s[8];return t[0]=n*s-o*l,t[1]=h*l-e*s,t[2]=e*o-h*n,t[3]=o*a-r*s,t[4]=i*s-h*a,t[5]=h*r-i*o,t[6]=r*l-n*a,t[7]=e*a-i*l,t[8]=i*n-e*r,t},Lt=function(t){var s=t[0],i=t[3],e=t[4],h=t[5],r=t[6],n=t[7],o=t[8];return s*(o*e-h*n)+t[1]*(-o*i+h*r)+t[2]*(n*i-e*r)},r=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],f=i[1],d=i[2],p=i[3],m=i[4],g=i[5],y=i[6],w=i[7],i=i[8];return t[0]=c*e+f*n+d*l,t[1]=c*h+f*o+d*u,t[2]=c*r+f*a+d*s,t[3]=p*e+m*n+g*l,t[4]=p*h+m*o+g*u,t[5]=p*r+m*a+g*s,t[6]=y*e+w*n+i*l,t[7]=y*h+w*o+i*u,t[8]=y*r+w*a+i*s,t},Nt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=i[0],i=i[1];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=c*e+i*n+l,t[7]=c*h+i*o+u,t[8]=c*r+i*a+s,t},Bt=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],s=s[8],c=Math.sin(i),i=Math.cos(i);return t[0]=i*e+c*n,t[1]=i*h+c*o,t[2]=i*r+c*a,t[3]=i*n-c*e,t[4]=i*o-c*h,t[5]=i*a-c*r,t[6]=l,t[7]=u,t[8]=s,t},Wt=function(t,s,i){var e=i[0],i=i[1];return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=i*s[3],t[4]=i*s[4],t[5]=i*s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t},Vt=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=s[0],t[7]=s[1],t[8]=1,t},jt=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=-i,t[4]=s,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ht=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=s[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},Ut=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=0,t[3]=s[2],t[4]=s[3],t[5]=0,t[6]=s[4],t[7]=s[5],t[8]=1,t},zt=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[3]=r-s,t[6]=o+u,t[1]=r+s,t[4]=1-i-e,t[7]=a-l,t[2]=o-u,t[5]=a+l,t[8]=1-i-n,t},Jt=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*l-r*n,b=e*a-h*o,v=e*l-r*o,M=h*l-r*a,x=u*m-c*p,T=u*g-f*p,G=c*g-f*m;return(d=y*(f=f*(s=s[15])-d*g)-w*(c=c*s-d*m)+S*G+b*(u=u*s-d*p)-v*T+M*x)?(t[0]=(o*f-a*c+l*G)*(d=1/d),t[1]=(a*u-n*f-l*T)*d,t[2]=(n*c-o*u+l*x)*d,t[3]=(h*c-e*f-r*G)*d,t[4]=(i*f-h*u+r*T)*d,t[5]=(e*u-i*c-r*x)*d,t[6]=(m*M-g*v+s*b)*d,t[7]=(g*S-p*M-s*w)*d,t[8]=(p*v-m*S+s*y)*d,t):null},qt=function(t,s,i){return t[0]=2/s,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/i,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},Xt=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},Yt=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},$t=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t},n=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t},Kt=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t},Zt=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t},Qt=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]},ts=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],t=t[8],u=s[0],c=s[1],f=s[2],d=s[3],p=s[4],m=s[5],g=s[6],y=s[7],s=s[8];return Math.abs(i-u)<=vh*Math.max(1,Math.abs(i),Math.abs(u))&&Math.abs(e-c)<=vh*Math.max(1,Math.abs(e),Math.abs(c))&&Math.abs(h-f)<=vh*Math.max(1,Math.abs(h),Math.abs(f))&&Math.abs(r-d)<=vh*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(n-p)<=vh*Math.max(1,Math.abs(n),Math.abs(p))&&Math.abs(o-m)<=vh*Math.max(1,Math.abs(o),Math.abs(m))&&Math.abs(a-g)<=vh*Math.max(1,Math.abs(a),Math.abs(g))&&Math.abs(l-y)<=vh*Math.max(1,Math.abs(l),Math.abs(y))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},ss=function(){var t=new Mh(16);return Mh!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t},is=function(t){var s=new Mh(16);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s[8]=t[8],s[9]=t[9],s[10]=t[10],s[11]=t[11],s[12]=t[12],s[13]=t[13],s[14]=t[14],s[15]=t[15],s},es=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},hs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m){var g=new Mh(16);return g[0]=t,g[1]=s,g[2]=i,g[3]=e,g[4]=h,g[5]=r,g[6]=n,g[7]=o,g[8]=a,g[9]=l,g[10]=u,g[11]=c,g[12]=f,g[13]=d,g[14]=p,g[15]=m,g},rs=function(t,s,i,e,h,r,n,o,a,l,u,c,f,d,p,m,g){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t[8]=l,t[9]=u,t[10]=c,t[11]=f,t[12]=d,t[13]=p,t[14]=m,t[15]=g,t},p=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ns=function(t,s){var i,e,h,r,n,o;return t===s?(i=s[1],e=s[2],h=s[3],r=s[6],n=s[7],o=s[11],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=i,t[6]=s[9],t[7]=s[13],t[8]=e,t[9]=r,t[11]=s[14],t[12]=h,t[13]=n,t[14]=o):(t[0]=s[0],t[1]=s[4],t[2]=s[8],t[3]=s[12],t[4]=s[1],t[5]=s[5],t[6]=s[9],t[7]=s[13],t[8]=s[2],t[9]=s[6],t[10]=s[10],t[11]=s[14],t[12]=s[3],t[13]=s[7],t[14]=s[11],t[15]=s[15]),t},os=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*l-r*n,b=e*a-h*o,v=e*l-r*o,M=h*l-r*a,x=u*m-c*p,T=u*g-f*p,G=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g,P=y*C-w*I+S*_+b*G-v*T+M*x;return P?(t[0]=(o*C-a*I+l*_)*(P=1/P),t[1]=(h*I-e*C-r*_)*P,t[2]=(m*M-g*v+s*b)*P,t[3]=(f*v-c*M-d*b)*P,t[4]=(a*G-n*C-l*T)*P,t[5]=(i*C-h*G+r*T)*P,t[6]=(g*S-p*M-s*w)*P,t[7]=(u*M-f*S+d*w)*P,t[8]=(n*I-o*G+l*x)*P,t[9]=(e*G-i*I-r*x)*P,t[10]=(p*v-m*S+s*y)*P,t[11]=(c*S-u*v-d*y)*P,t[12]=(o*T-n*_-a*x)*P,t[13]=(i*_-e*T+h*x)*P,t[14]=(m*w-p*b-g*y)*P,t[15]=(u*b-c*w+f*y)*P,t):null},as=function(t,s){var i=s[0],e=s[1],h=s[2],r=s[3],n=s[4],o=s[5],a=s[6],l=s[7],u=s[8],c=s[9],f=s[10],d=s[11],p=s[12],m=s[13],g=s[14],y=i*o-e*n,w=i*a-h*n,S=i*l-r*n,b=e*a-h*o,v=e*l-r*o,M=h*l-r*a,x=u*m-c*p,T=u*g-f*p,G=u*(s=s[15])-d*p,_=c*g-f*m,I=c*s-d*m,C=f*s-d*g;return t[0]=o*C-a*I+l*_,t[1]=h*I-e*C-r*_,t[2]=m*M-g*v+s*b,t[3]=f*v-c*M-d*b,t[4]=a*G-n*C-l*T,t[5]=i*C-h*G+r*T,t[6]=g*S-p*M-s*w,t[7]=u*M-f*S+d*w,t[8]=n*I-o*G+l*x,t[9]=e*G-i*I-r*x,t[10]=p*v-m*S+s*y,t[11]=c*S-u*v-d*y,t[12]=o*T-n*_-a*x,t[13]=i*_-e*T+h*x,t[14]=m*w-p*b-g*y,t[15]=u*b-c*w+f*y,t},ls=function(t){var s=t[0],i=t[1],e=t[2],h=t[4],r=t[5],n=t[6],o=t[8],a=t[9],l=t[10],u=t[12],c=t[13],f=t[14],d=s*r-i*h,p=s*n-e*h,m=i*n-e*r,g=o*c-a*u,y=o*f-l*u,w=a*f-l*c;return t[7]*(s*w-i*y+e*g)-t[3]*(h*w-r*y+n*g)+t[15]*(o*m-a*p+l*d)-t[11]*(u*m-c*p+f*d)},o=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],m=s[12],g=s[13],y=s[14],s=s[15],w=i[0],S=i[1],b=i[2],v=i[3];return t[0]=w*e+S*o+b*c+v*m,t[1]=w*h+S*a+b*f+v*g,t[2]=w*r+S*l+b*d+v*y,t[3]=w*n+S*u+b*p+v*s,t[4]=(w=i[4])*e+(S=i[5])*o+(b=i[6])*c+(v=i[7])*m,t[5]=w*h+S*a+b*f+v*g,t[6]=w*r+S*l+b*d+v*y,t[7]=w*n+S*u+b*p+v*s,t[8]=(w=i[8])*e+(S=i[9])*o+(b=i[10])*c+(v=i[11])*m,t[9]=w*h+S*a+b*f+v*g,t[10]=w*r+S*l+b*d+v*y,t[11]=w*n+S*u+b*p+v*s,t[12]=(w=i[12])*e+(S=i[13])*o+(b=i[14])*c+(v=i[15])*m,t[13]=w*h+S*a+b*f+v*g,t[14]=w*r+S*l+b*d+v*y,t[15]=w*n+S*u+b*p+v*s,t},us=function(t,s,i){var e,h,r,n,o,a,l,u,c,f,d,p,m=i[0],g=i[1],i=i[2];return s===t?(t[12]=s[0]*m+s[4]*g+s[8]*i+s[12],t[13]=s[1]*m+s[5]*g+s[9]*i+s[13],t[14]=s[2]*m+s[6]*g+s[10]*i+s[14],t[15]=s[3]*m+s[7]*g+s[11]*i+s[15]):(e=s[0],h=s[1],r=s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=s[8],f=s[9],d=s[10],p=s[11],t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=o,t[5]=a,t[6]=l,t[7]=u,t[8]=c,t[9]=f,t[10]=d,t[11]=p,t[12]=e*m+o*g+c*i+s[12],t[13]=h*m+a*g+f*i+s[13],t[14]=r*m+l*g+d*i+s[14],t[15]=n*m+u*g+p*i+s[15]),t},cs=function(t,s,i){var e=i[0],h=i[1],i=i[2];return t[0]=s[0]*e,t[1]=s[1]*e,t[2]=s[2]*e,t[3]=s[3]*e,t[4]=s[4]*h,t[5]=s[5]*h,t[6]=s[6]*h,t[7]=s[7]*h,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15],t},fs=function(t,s,i,e){var h,r,n,o,a,l,u,c,f,d,p,m,g,y,w,S,b,v,M,x,T=e[0],G=e[1],e=e[2],_=Math.hypot(T,G,e);return _<vh?null:(T*=_=1/_,G*=_,e*=_,_=Math.sin(i),i=Math.cos(i),r=s[0],n=s[1],o=s[2],a=s[3],u=s[5],c=s[6],f=s[7],p=s[9],m=s[10],g=s[11],w=T*G*(h=1-i)-e*_,S=G*G*h+i,b=e*G*h+T*_,v=T*e*h+G*_,M=G*e*h-T*_,x=e*e*h+i,t[0]=r*(i=T*T*h+i)+(l=s[4])*(y=G*T*h+e*_)+(d=s[8])*(e=e*T*h-G*_),t[1]=n*i+u*y+p*e,t[2]=o*i+c*y+m*e,t[3]=a*i+f*y+g*e,t[4]=r*w+l*S+d*b,t[5]=n*w+u*S+p*b,t[6]=o*w+c*S+m*b,t[7]=a*w+f*S+g*b,t[8]=r*v+l*M+d*x,t[9]=n*v+u*M+p*x,t[10]=o*v+c*M+m*x,t[11]=a*v+f*M+g*x,s!==t&&(t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t)},ds=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[4],r=s[5],n=s[6],o=s[7],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[4]=h*i+a*e,t[5]=r*i+l*e,t[6]=n*i+u*e,t[7]=o*i+c*e,t[8]=a*i-h*e,t[9]=l*i-r*e,t[10]=u*i-n*e,t[11]=c*i-o*e,t},ps=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[8],l=s[9],u=s[10],c=s[11];return s!==t&&(t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i-a*e,t[1]=r*i-l*e,t[2]=n*i-u*e,t[3]=o*i-c*e,t[8]=h*e+a*i,t[9]=r*e+l*i,t[10]=n*e+u*i,t[11]=o*e+c*i,t},ms=function(t,s,i){var e=Math.sin(i),i=Math.cos(i),h=s[0],r=s[1],n=s[2],o=s[3],a=s[4],l=s[5],u=s[6],c=s[7];return s!==t&&(t[8]=s[8],t[9]=s[9],t[10]=s[10],t[11]=s[11],t[12]=s[12],t[13]=s[13],t[14]=s[14],t[15]=s[15]),t[0]=h*i+a*e,t[1]=r*i+l*e,t[2]=n*i+u*e,t[3]=o*i+c*e,t[4]=a*i-h*e,t[5]=l*i-r*e,t[6]=u*i-n*e,t[7]=c*i-o*e,t},gs=function(t,s){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=s[0],t[13]=s[1],t[14]=s[2],t[15]=1,t},ys=function(t,s){return t[0]=s[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=s[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},ws=function(t,s,i){var e,h=i[0],r=i[1],i=i[2],n=Math.hypot(h,r,i);return n<vh?null:(h*=n=1/n,r*=n,i*=n,n=Math.sin(s),s=Math.cos(s),t[0]=h*h*(e=1-s)+s,t[1]=r*h*e+i*n,t[2]=i*h*e-r*n,t[3]=0,t[4]=h*r*e-i*n,t[5]=r*r*e+s,t[6]=i*r*e+h*n,t[7]=0,t[8]=h*i*e+r*n,t[9]=r*i*e-h*n,t[10]=i*i*e+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},Ss=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=i,t[7]=0,t[8]=0,t[9]=-i,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},bs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=0,t[2]=-i,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=i,t[9]=0,t[10]=s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},vs=function(t,s){var i=Math.sin(s),s=Math.cos(s);return t[0]=s,t[1]=i,t[2]=0,t[3]=0,t[4]=-i,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},f=function(t,s,i){var e=s[0],h=s[2],r=h+h,n=e*(u=e+e),o=e*(c=(l=s[1])+l),e=e*r,a=l*c,l=l*r,u=(s=s[3])*u,c=s*c,s=s*r;return t[0]=1-(a+(h=h*r)),t[1]=o+s,t[2]=e-c,t[3]=0,t[4]=o-s,t[5]=1-(n+h),t[6]=l+u,t[7]=0,t[8]=e+c,t[9]=l-u,t[10]=1-(n+a),t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Ms=function(t,s){var i=new Mh(3),e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=s[7],c=e*e+h*h+r*r+n*n;return 0<c?(i[0]=2*(o*n+u*e+a*r-l*h)/c,i[1]=2*(a*n+u*h+l*e-o*r)/c,i[2]=2*(l*n+u*r+o*h-a*e)/c):(i[0]=2*(o*n+u*e+a*r-l*h),i[1]=2*(a*n+u*h+l*e-o*r),i[2]=2*(l*n+u*r+o*h-a*e)),f(t,s,i),t},a=function(t,s){return t[0]=s[12],t[1]=s[13],t[2]=s[14],t},d=function(t,s){var i=s[0],e=s[4],h=s[5],r=s[6],n=s[8],o=s[9],a=s[10];return t[0]=Math.hypot(i,s[1],s[2]),t[1]=Math.hypot(e,h,r),t[2]=Math.hypot(n,o,a),t},l=function(t,s){var i=new Mh(3),e=(d(i,s),1/i[0]),h=s[0]*e,r=s[1]*(u=1/i[1]),n=s[2]*(i=1/i[2]),o=s[4]*e,a=s[5]*u,l=s[6]*i,e=s[8]*e,u=s[9]*u,c=0;return 0<(i=h+a+(s=s[10]*i))?(c=2*Math.sqrt(1+i),t[3]=.25*c,t[0]=(l-u)/c,t[1]=(e-n)/c,t[2]=(r-o)/c):a<h&&s<h?(c=2*Math.sqrt(1+h-a-s),t[3]=(l-u)/c,t[0]=.25*c,t[1]=(r+o)/c,t[2]=(e+n)/c):s<a?(c=2*Math.sqrt(1+a-h-s),t[3]=(e-n)/c,t[0]=(r+o)/c,t[1]=.25*c,t[2]=(l+u)/c):(c=2*Math.sqrt(1+s-h-a),t[3]=(r-o)/c,t[0]=(e+n)/c,t[1]=(l+u)/c,t[2]=.25*c),t},xs=function(t,s,i,e){s[0]=e[12],s[1]=e[13],s[2]=e[14];var s=e[0],h=e[1],r=e[2],n=e[4],o=e[5],a=e[6],l=e[8],u=e[9],e=e[10],c=(i[0]=Math.hypot(s,h,r),i[1]=Math.hypot(n,o,a),i[2]=Math.hypot(l,u,e),1/i[0]),f=1/i[1],s=s*c,h=h*f,r=r*(i=1/i[2]),n=n*c,a=a*i,l=l*c,c=u*f,u=e*i,e=0;return 0<(f=s+(o=o*f)+u)?(e=2*Math.sqrt(1+f),t[3]=.25*e,t[0]=(a-c)/e,t[1]=(l-r)/e,t[2]=(h-n)/e):o<s&&u<s?(e=2*Math.sqrt(1+s-o-u),t[3]=(a-c)/e,t[0]=.25*e,t[1]=(h+n)/e,t[2]=(l+r)/e):u<o?(e=2*Math.sqrt(1+o-s-u),t[3]=(l-r)/e,t[0]=(h+n)/e,t[1]=.25*e,t[2]=(a+c)/e):(e=2*Math.sqrt(1+u-s-o),t[3]=(h-n)/e,t[0]=(l+r)/e,t[1]=(a+c)/e,t[2]=.25*e),t},Ts=function(t,s,i,e){var h=(n=s[0])*(u=n+n),r=n*(c=(a=s[1])+a),n=n*(f=(l=s[2])+l),o=a*c,a=a*f,l=l*f,u=(s=s[3])*u,c=s*c,s=s*f,f=e[0],d=e[1],e=e[2];return t[0]=(1-(o+l))*f,t[1]=(r+s)*f,t[2]=(n-c)*f,t[3]=0,t[4]=(r-s)*d,t[5]=(1-(h+l))*d,t[6]=(a+u)*d,t[7]=0,t[8]=(n+c)*e,t[9]=(a-u)*e,t[10]=(1-(h+o))*e,t[11]=0,t[12]=i[0],t[13]=i[1],t[14]=i[2],t[15]=1,t},Gs=function(t,s,i,e,h){var r=(o=s[0])*(c=o+o),n=o*(f=(l=s[1])+l),o=o*(d=(u=s[2])+u),a=l*f,l=l*d,u=u*d,c=(s=s[3])*c,f=s*f,s=s*d,d=e[0],p=e[1],e=e[2],m=h[0],g=h[1],h=h[2],y=(1-(a+u))*d,w=(n+s)*d,d=(o-f)*d,n=(n-s)*p,s=(1-(r+u))*p,u=(l+c)*p,p=(o+f)*e,o=(l-c)*e,f=(1-(r+a))*e;return t[0]=y,t[1]=w,t[2]=d,t[3]=0,t[4]=n,t[5]=s,t[6]=u,t[7]=0,t[8]=p,t[9]=o,t[10]=f,t[11]=0,t[12]=i[0]+m-(y*m+n*g+p*h),t[13]=i[1]+g-(w*m+s*g+o*h),t[14]=i[2]+h-(d*m+u*g+f*h),t[15]=1,t},_s=function(t,s){var i=s[0],e=s[2],h=e+e,i=i*(l=i+i),r=(n=s[1])*l,n=n*(u=n+n),o=e*l,a=e*u,l=(s=s[3])*l,u=s*u,s=s*h;return t[0]=1-n-(e=e*h),t[1]=r+s,t[2]=o-u,t[3]=0,t[4]=r-s,t[5]=1-i-e,t[6]=a+l,t[7]=0,t[8]=o+u,t[9]=a-l,t[10]=1-i-n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},Is=function(t,s,i,e,h,r,n){var o=1/(i-s),a=1/(h-e),l=1/(r-n);return t[0]=2*r*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*r*a,t[6]=0,t[7]=0,t[8]=(i+s)*o,t[9]=(h+e)*a,t[10]=(n+r)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=n*r*2*l,t[15]=0,t},u=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=(h+e)*(i=1/(e-h)),t[14]=2*h*e*i):(t[10]=-1,t[14]=-2*e),t},Cs=function(t,s,i,e,h){return s=1/Math.tan(s/2),t[0]=s/i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=h&&h!==1/0?(t[10]=h*(i=1/(e-h)),t[14]=h*e*i):(t[10]=-1,t[14]=-e),t},Ps=function(t,s,i,e){var h=Math.tan(s.upDegrees*Math.PI/180),r=Math.tan(s.downDegrees*Math.PI/180),n=Math.tan(s.leftDegrees*Math.PI/180),o=2/(n+(s=Math.tan(s.rightDegrees*Math.PI/180))),a=2/(h+r);return t[0]=o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a,t[6]=0,t[7]=0,t[8]=-(n-s)*o*.5,t[9]=(h-r)*a*.5,t[10]=e/(i-e),t[11]=-1,t[12]=0,t[13]=0,t[14]=e*i/(i-e),t[15]=0,t},c=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),l=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*l,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=(n+r)*l,t[15]=1,t},Es=function(t,s,i,e,h,r,n){var o=1/(s-i),a=1/(e-h),n=1/(r-n);return t[0]=-2*o,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*a,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n,t[11]=0,t[12]=(s+i)*o,t[13]=(h+e)*a,t[14]=r*n,t[15]=1,t},As=function(t,s,i,e){var h,r,n,o,a=s[0],l=s[1],s=s[2],u=e[0],c=e[1],e=e[2],f=i[0],d=i[1],i=i[2];return Math.abs(a-f)<vh&&Math.abs(l-d)<vh&&Math.abs(s-i)<vh?p(t):(f=a-f,d=l-d,i=s-i,h=c*(i*=o=1/Math.hypot(f,d,i))-e*(d*=o),e=e*(f*=o)-u*i,u=u*d-c*f,(o=Math.hypot(h,e,u))?(h*=o=1/o,e*=o,u*=o):u=e=h=0,c=d*u-i*e,r=i*h-f*u,n=f*e-d*h,(o=Math.hypot(c,r,n))?(c*=o=1/o,r*=o,n*=o):n=r=c=0,t[0]=h,t[1]=c,t[2]=f,t[3]=0,t[4]=e,t[5]=r,t[6]=d,t[7]=0,t[8]=u,t[9]=n,t[10]=i,t[11]=0,t[12]=-(h*a+e*l+u*s),t[13]=-(c*a+r*l+n*s),t[14]=-(f*a+d*l+i*s),t[15]=1,t)},Rs=function(t,s,i,e){var h=s[0],r=s[1],s=s[2],n=e[0],o=e[1],e=e[2],a=h-i[0],l=r-i[1],u=a*a+l*l+(i=s-i[2])*i,c=(0<u&&(a*=u=1/Math.sqrt(u),l*=u,i*=u),o*i-e*l);return 0<(u=c*c+(e=e*a-n*i)*e+(n=n*l-o*a)*n)&&(c*=u=1/Math.sqrt(u),e*=u,n*=u),t[0]=c,t[1]=e,t[2]=n,t[3]=0,t[4]=l*n-i*e,t[5]=i*c-a*n,t[6]=a*e-l*c,t[7]=0,t[8]=a,t[9]=l,t[10]=i,t[11]=0,t[12]=h,t[13]=r,t[14]=s,t[15]=1,t},Fs=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},Os=function(t){return Math.hypot(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[15])},Ds=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t[8]=s[8]+i[8],t[9]=s[9]+i[9],t[10]=s[10]+i[10],t[11]=s[11]+i[11],t[12]=s[12]+i[12],t[13]=s[13]+i[13],t[14]=s[14]+i[14],t[15]=s[15]+i[15],t},ks=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t[4]=s[4]-i[4],t[5]=s[5]-i[5],t[6]=s[6]-i[6],t[7]=s[7]-i[7],t[8]=s[8]-i[8],t[9]=s[9]-i[9],t[10]=s[10]-i[10],t[11]=s[11]-i[11],t[12]=s[12]-i[12],t[13]=s[13]-i[13],t[14]=s[14]-i[14],t[15]=s[15]-i[15],t},Ls=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t[8]=s[8]*i,t[9]=s[9]*i,t[10]=s[10]*i,t[11]=s[11]*i,t[12]=s[12]*i,t[13]=s[13]*i,t[14]=s[14]*i,t[15]=s[15]*i,t},Ns=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t[4]=s[4]+i[4]*e,t[5]=s[5]+i[5]*e,t[6]=s[6]+i[6]*e,t[7]=s[7]+i[7]*e,t[8]=s[8]+i[8]*e,t[9]=s[9]+i[9]*e,t[10]=s[10]+i[10]*e,t[11]=s[11]+i[11]*e,t[12]=s[12]+i[12]*e,t[13]=s[13]+i[13]*e,t[14]=s[14]+i[14]*e,t[15]=s[15]+i[15]*e,t},Bs=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]&&t[8]===s[8]&&t[9]===s[9]&&t[10]===s[10]&&t[11]===s[11]&&t[12]===s[12]&&t[13]===s[13]&&t[14]===s[14]&&t[15]===s[15]},Ws=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],l=t[7],u=t[8],c=t[9],f=t[10],d=t[11],p=t[12],m=t[13],g=t[14],t=t[15],y=s[0],w=s[1],S=s[2],b=s[3],v=s[4],M=s[5],x=s[6],T=s[7],G=s[8],_=s[9],I=s[10],C=s[11],P=s[12],E=s[13],A=s[14],s=s[15];return Math.abs(i-y)<=vh*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(e-w)<=vh*Math.max(1,Math.abs(e),Math.abs(w))&&Math.abs(h-S)<=vh*Math.max(1,Math.abs(h),Math.abs(S))&&Math.abs(r-b)<=vh*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(n-v)<=vh*Math.max(1,Math.abs(n),Math.abs(v))&&Math.abs(o-M)<=vh*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(a-x)<=vh*Math.max(1,Math.abs(a),Math.abs(x))&&Math.abs(l-T)<=vh*Math.max(1,Math.abs(l),Math.abs(T))&&Math.abs(u-G)<=vh*Math.max(1,Math.abs(u),Math.abs(G))&&Math.abs(c-_)<=vh*Math.max(1,Math.abs(c),Math.abs(_))&&Math.abs(f-I)<=vh*Math.max(1,Math.abs(f),Math.abs(I))&&Math.abs(d-C)<=vh*Math.max(1,Math.abs(d),Math.abs(C))&&Math.abs(p-P)<=vh*Math.max(1,Math.abs(p),Math.abs(P))&&Math.abs(m-E)<=vh*Math.max(1,Math.abs(m),Math.abs(E))&&Math.abs(g-A)<=vh*Math.max(1,Math.abs(g),Math.abs(A))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},m=function(){var t=new Mh(3);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t},Vs=function(t){var s=new Mh(3);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s},js=function(t){var s=t[0];return Math.hypot(s,t[1],t[2])},g=function(t,s,i){var e=new Mh(3);return e[0]=t,e[1]=s,e[2]=i,e},Hs=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t},Us=function(t,s,i,e){return t[0]=s,t[1]=i,t[2]=e,t},zs=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t},Js=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t},qs=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t},Xs=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t},Ys=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t},$s=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t},Ks=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t},Zs=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t},Qs=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t},ti=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},si=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t},ii=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2])},ei=function(t,s){var i=s[0]-t[0],e=s[1]-t[1];return i*i+e*e+(s=s[2]-t[2])*s},hi=function(t){var s=t[0],i=t[1];return s*s+i*i+(t=t[2])*t},ri=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t},ni=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t},y=function(t,s){var i=s[0],e=s[1],h=s[2];return 0<(i=i*i+e*e+h*h)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t},w=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]},S=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[0],n=i[1],i=i[2];return t[0]=h*i-s*n,t[1]=s*r-e*i,t[2]=e*n-h*r,t},oi=function(t,s,i,e){var h=s[0],r=s[1],s=s[2];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=s+e*(i[2]-s),t},ai=function(t,s,i,e){var h=Math.acos(Math.min(Math.max(w(s,i),-1),1)),r=Math.sin(h),n=Math.sin((1-e)*h)/r,e=Math.sin(e*h)/r;return t[0]=n*s[0]+e*i[0],t[1]=n*s[1]+e*i[1],t[2]=n*s[2]+e*i[2],t},li=function(t,s,i,e,h,r){var n=r*r,o=n*(2*r-3)+1,a=n*(r-2)+r,l=n*(r-1);return t[0]=s[0]*o+i[0]*a+e[0]*l+h[0]*(n=n*(3-2*r)),t[1]=s[1]*o+i[1]*a+e[1]*l+h[1]*n,t[2]=s[2]*o+i[2]*a+e[2]*l+h[2]*n,t},ui=function(t,s,i,e,h,r){var n=1-r,o=n*n,a=r*r,l=o*n;return t[0]=s[0]*l+i[0]*(o=3*r*o)+e[0]*(n=3*a*n)+h[0]*(a=a*r),t[1]=s[1]*l+i[1]*o+e[1]*n+h[1]*a,t[2]=s[2]*l+i[2]*o+e[2]*n+h[2]*a,t},ci=function(t,s){s=s||1;var i=2*Oh()*Math.PI,e=2*Oh()-1,h=Math.sqrt(1-e*e)*s;return t[0]=Math.cos(i)*h,t[1]=Math.sin(i)*h,t[2]=e*s,t},fi=function(t,s,i){var e=s[0],h=s[1],s=s[2],r=i[3]*e+i[7]*h+i[11]*s+i[15];return t[0]=(i[0]*e+i[4]*h+i[8]*s+i[12])/(r=r||1),t[1]=(i[1]*e+i[5]*h+i[9]*s+i[13])/r,t[2]=(i[2]*e+i[6]*h+i[10]*s+i[14])/r,t},di=function(t,s,i){var e=s[0],h=s[1],s=s[2];return t[0]=e*i[0]+h*i[3]+s*i[6],t[1]=e*i[1]+h*i[4]+s*i[7],t[2]=e*i[2]+h*i[5]+s*i[8],t},pi=function(t,s,i){var e=i[0],h=i[1],r=s[0],n=s[1],o=h*(s=s[2])-(c=i[2])*n,a=c*r-e*s,l=e*n-h*r,u=h*l-c*a,c=c*o-e*l,e=e*a-h*o;return a*=h=2*i[3],l*=h,c*=2,e*=2,t[0]=r+(o*=h)+(u*=2),t[1]=n+a+c,t[2]=s+l+e,t},mi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0],r[1]=h[1]*Math.cos(e)-h[2]*Math.sin(e),r[2]=h[1]*Math.sin(e)+h[2]*Math.cos(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},gi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[2]*Math.sin(e)+h[0]*Math.cos(e),r[1]=h[1],r[2]=h[2]*Math.cos(e)-h[0]*Math.sin(e),t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},yi=function(t,s,i,e){var h=[],r=[];return h[0]=s[0]-i[0],h[1]=s[1]-i[1],h[2]=s[2]-i[2],r[0]=h[0]*Math.cos(e)-h[1]*Math.sin(e),r[1]=h[0]*Math.sin(e)+h[1]*Math.cos(e),r[2]=h[2],t[0]=r[0]+i[0],t[1]=r[1]+i[1],t[2]=r[2]+i[2],t},wi=function(t,s){var i=t[0],e=t[1],h=t[2],r=s[0],n=s[1],o=s[2],e=(i=Math.sqrt((i*i+e*e+h*h)*(r*r+n*n+o*o)))&&w(t,s)/i;return Math.acos(Math.min(Math.max(e,-1),1))},Si=function(t){return t[0]=0,t[1]=0,t[2]=0,t},bi=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},vi=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]},Mi=function(t,s){var i=t[0],e=t[1],t=t[2],h=s[0],r=s[1],s=s[2];return Math.abs(i-h)<=vh*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(e-r)<=vh*Math.max(1,Math.abs(e),Math.abs(r))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},b=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t},xi=function(t){var s=new Mh(4);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s},Ti=function(t,s,i,e){var h=new Mh(4);return h[0]=t,h[1]=s,h[2]=i,h[3]=e,h},Gi=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t},_i=function(t,s,i,e,h){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t},Ii=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t},Ci=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t[2]=s[2]-i[2],t[3]=s[3]-i[3],t},Pi=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t[2]=s[2]*i[2],t[3]=s[3]*i[3],t},Ei=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t[2]=s[2]/i[2],t[3]=s[3]/i[3],t},Ai=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t[2]=Math.ceil(s[2]),t[3]=Math.ceil(s[3]),t},Ri=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t[2]=Math.floor(s[2]),t[3]=Math.floor(s[3]),t},Fi=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t[2]=Math.min(s[2],i[2]),t[3]=Math.min(s[3],i[3]),t},Oi=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t[2]=Math.max(s[2],i[2]),t[3]=Math.max(s[3],i[3]),t},Di=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t[2]=Math.round(s[2]),t[3]=Math.round(s[3]),t},ki=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t},Li=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t[2]=s[2]+i[2]*e,t[3]=s[3]+i[3]*e,t},Ni=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1],s[2]-t[2],s[3]-t[3])},Bi=function(t,s){var i=s[0]-t[0],e=s[1]-t[1],h=s[2]-t[2];return i*i+e*e+h*h+(s=s[3]-t[3])*s},v=function(t){var s=t[0];return Math.hypot(s,t[1],t[2],t[3])},M=function(t){var s=t[0],i=t[1],e=t[2];return s*s+i*i+e*e+(t=t[3])*t},Wi=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=-s[3],t},Vi=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t[2]=1/s[2],t[3]=1/s[3],t},ji=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return 0<r&&(r=1/Math.sqrt(r)),t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=s*r,t},x=function(t,s){return t[0]*s[0]+t[1]*s[1]+t[2]*s[2]+t[3]*s[3]},Hi=function(t,s,i,e){var h=i[0]*e[1]-i[1]*e[0],r=i[0]*e[2]-i[2]*e[0],n=i[0]*e[3]-i[3]*e[0],o=i[1]*e[2]-i[2]*e[1],a=i[1]*e[3]-i[3]*e[1],i=i[2]*e[3]-i[3]*e[2],e=s[0],l=s[1],u=s[2],s=s[3];return t[0]=l*i-u*a+s*o,t[1]=-e*i+u*n-s*r,t[2]=e*a-l*n+s*h,t[3]=-e*o+l*r-u*h,t},Ui=function(t,s,i,e){var h=s[0],r=s[1],n=s[2],s=s[3];return t[0]=h+e*(i[0]-h),t[1]=r+e*(i[1]-r),t[2]=n+e*(i[2]-n),t[3]=s+e*(i[3]-s),t},zi=function(t,s){var i,e,h,r,n,o;for(s=s||1;1<=(n=(i=2*Oh()-1)*i+(e=2*Oh()-1)*e););for(;1<=(o=(h=2*Oh()-1)*h+(r=2*Oh()-1)*r););var a=Math.sqrt((1-n)/o);return t[0]=s*i,t[1]=s*e,t[2]=s*h*a,t[3]=s*r*a,t},Ji=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3];return t[0]=i[0]*e+i[4]*h+i[8]*r+i[12]*s,t[1]=i[1]*e+i[5]*h+i[9]*r+i[13]*s,t[2]=i[2]*e+i[6]*h+i[10]*r+i[14]*s,t[3]=i[3]*e+i[7]*h+i[11]*r+i[15]*s,t},qi=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=i[0],o=i[1],a=i[2],l=(i=i[3])*e+o*r-a*h,u=i*h+a*e-n*r,c=i*r+n*h-o*e;return t[0]=l*i+(e=-n*e-o*h-a*r)*-n+u*-a-c*-o,t[1]=u*i+e*-o+c*-n-l*-a,t[2]=c*i+e*-a+l*-o-u*-n,t[3]=s[3],t},Xi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},Yi=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},$i=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]},Ki=function(t,s){var i=t[0],e=t[1],h=t[2],t=t[3],r=s[0],n=s[1],o=s[2],s=s[3];return Math.abs(i-r)<=vh*Math.max(1,Math.abs(i),Math.abs(r))&&Math.abs(e-n)<=vh*Math.max(1,Math.abs(e),Math.abs(n))&&Math.abs(h-o)<=vh*Math.max(1,Math.abs(h),Math.abs(o))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},T=function(){var t=new Mh(4);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t[3]=1,t},Zi=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},G=function(t,s,i){i*=.5;var e=Math.sin(i);return t[0]=e*s[0],t[1]=e*s[1],t[2]=e*s[2],t[3]=Math.cos(i),t},Qi=function(t,s){var i=2*Math.acos(s[3]),e=Math.sin(i/2);return vh<e?(t[0]=s[0]/e,t[1]=s[1]/e,t[2]=s[2]/e):(t[0]=1,t[1]=0,t[2]=0),i},te=function(t,s){return t=zh(t,s),Math.acos(2*t*t-1)},se=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],i=i[3];return t[0]=e*i+s*n+h*a-r*o,t[1]=h*i+s*o+r*n-e*a,t[2]=r*i+s*a+e*o-h*n,t[3]=s*i-e*n-h*o-r*a,t},_=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+s*n,t[1]=h*i+r*n,t[2]=r*i-h*n,t[3]=s*i-e*n,t},I=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i-r*n,t[1]=h*i+s*n,t[2]=r*i+e*n,t[3]=s*i-h*n,t},C=function(t,s,i){i*=.5;var e=s[0],h=s[1],r=s[2],s=s[3],n=Math.sin(i),i=Math.cos(i);return t[0]=e*i+h*n,t[1]=h*i-e*n,t[2]=r*i+s*n,t[3]=s*i-r*n,t},ie=function(t,s){var i=s[0],e=s[1],s=s[2];return t[0]=i,t[1]=e,t[2]=s,t[3]=Math.sqrt(Math.abs(1-i*i-e*e-s*s)),t},P=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=Math.sqrt(i*i+e*e+h*h),s=Math.exp(s),n=0<r?s*Math.sin(r)/r:0;return t[0]=i*n,t[1]=e*n,t[2]=h*n,t[3]=s*Math.cos(r),t},E=function(t,s){var i=s[0],e=s[1],h=s[2],s=s[3],r=0<(r=Math.sqrt(i*i+e*e+h*h))?Math.atan2(r,s)/r:0;return t[0]=i*r,t[1]=e*r,t[2]=h*r,t[3]=.5*Math.log(i*i+e*e+h*h+s*s),t},ee=function(t,s,i){return E(t,s),Uh(t,t,i),P(t,t),t},A=function(t,s,i,e){var h,r,n=s[0],o=s[1],a=s[2],s=s[3],l=i[0],u=i[1],c=i[2],f=n*l+o*u+a*c+s*(i=i[3]);return f<0&&(f=-f,l=-l,u=-u,c=-c,i=-i),f=vh<1-f?(f=Math.acos(f),h=Math.sin(f),r=Math.sin((1-e)*f)/h,Math.sin(e*f)/h):(r=1-e,e),t[0]=r*n+f*l,t[1]=r*o+f*u,t[2]=r*a+f*c,t[3]=r*s+f*i,t},he=function(t){var s=Oh(),i=Oh(),e=Oh(),h=Math.sqrt(1-s),s=Math.sqrt(s);return t[0]=h*Math.sin(2*Math.PI*i),t[1]=h*Math.cos(2*Math.PI*i),t[2]=s*Math.sin(2*Math.PI*e),t[3]=s*Math.cos(2*Math.PI*e),t},re=function(t,s){var i=s[0],e=s[1],h=s[2],r=i*i+e*e+h*h+(s=s[3])*s;return t[0]=-i*(r=r?1/r:0),t[1]=-e*r,t[2]=-h*r,t[3]=s*r,t},ne=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t},R=function(t,s){var i,e,h,r=s[0]+s[4]+s[8];return 0<r?(h=Math.sqrt(r+1),t[3]=.5*h,t[0]=(s[5]-s[7])*(h=.5/h),t[1]=(s[6]-s[2])*h,t[2]=(s[1]-s[3])*h):(i=(1+(r=s[3*(r=s[4]>s[0]?1:0)+r]<s[8]?2:r))%3,e=(2+r)%3,h=Math.sqrt(s[3*r+r]-s[3*i+i]-s[3*e+e]+1),t[r]=.5*h,t[3]=(s[3*i+e]-s[3*e+i])*(h=.5/h),t[i]=(s[3*i+r]+s[3*r+i])*h,t[e]=(s[3*e+r]+s[3*r+e])*h),t},oe=function(t,s,i,e){var h=4<arguments.length&&void 0!==arguments[4]?arguments[4]:Dh,r=Math.PI/360,n=(e*=r,i*=r,Math.sin(s*=r)),o=Math.cos(s),a=Math.sin(i),l=Math.cos(i),u=Math.sin(e),c=Math.cos(e);switch(h){case"xyz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"xzy":t[0]=n*l*c-o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c+n*a*u;break;case"yxz":t[0]=n*l*c+o*a*u,t[1]=o*a*c-n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;case"yzx":t[0]=n*l*c+o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c-n*a*u;break;case"zxy":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u+n*a*c,t[3]=o*l*c-n*a*u;break;case"zyx":t[0]=n*l*c-o*a*u,t[1]=o*a*c+n*l*u,t[2]=o*l*u-n*a*c,t[3]=o*l*c+n*a*u;break;default:throw new Error("Unknown angle order "+h)}return t},ae=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},le=function(t,s){return Math.abs(x(t,s))>=1-vh},ue=function(){var t=new Mh(8);return Mh!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[4]=0,t[5]=0,t[6]=0,t[7]=0),t[3]=1,t},ce=function(t){var s=new Mh(8);return s[0]=t[0],s[1]=t[1],s[2]=t[2],s[3]=t[3],s[4]=t[4],s[5]=t[5],s[6]=t[6],s[7]=t[7],s},fe=function(t,s,i,e,h,r,n,o){var a=new Mh(8);return a[0]=t,a[1]=s,a[2]=i,a[3]=e,a[4]=h,a[5]=r,a[6]=n,a[7]=o,a},de=function(t,s,i,e,h,r,n){var o=new Mh(8),h=(o[0]=t,o[1]=s,o[2]=i,o[3]=e,.5*h),r=.5*r,n=.5*n;return o[4]=h*e+r*i-n*s,o[5]=r*e+n*t-h*i,o[6]=n*e+h*s-r*t,o[7]=-h*t-r*s-n*i,o},F=function(t,s,i){var e=.5*i[0],h=.5*i[1],i=.5*i[2],r=s[0],n=s[1],o=s[2],s=s[3];return t[0]=r,t[1]=n,t[2]=o,t[3]=s,t[4]=e*s+h*o-i*n,t[5]=h*s+i*r-e*o,t[6]=i*s+e*n-h*r,t[7]=-e*r-h*n-i*o,t},pe=function(t,s){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=.5*s[0],t[5]=.5*s[1],t[6]=.5*s[2],t[7]=0,t},me=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},ge=function(t,s){var i=T(),e=(l(i,s),new Mh(3));return a(e,s),F(t,i,e),t},O=function(t,s){return t[0]=s[0],t[1]=s[1],t[2]=s[2],t[3]=s[3],t[4]=s[4],t[5]=s[5],t[6]=s[6],t[7]=s[7],t},ye=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t[6]=0,t[7]=0,t},we=function(t,s,i,e,h,r,n,o,a){return t[0]=s,t[1]=i,t[2]=e,t[3]=h,t[4]=r,t[5]=n,t[6]=o,t[7]=a,t},Se=function(t,s){return t[0]=s[4],t[1]=s[5],t[2]=s[6],t[3]=s[7],t},be=function(t,s){return t[4]=s[0],t[5]=s[1],t[6]=s[2],t[7]=s[3],t},ve=function(t,s){var i=s[4],e=s[5],h=s[6],r=s[7],n=-s[0],o=-s[1],a=-s[2],s=s[3];return t[0]=2*(i*s+r*n+e*a-h*o),t[1]=2*(e*s+r*o+h*n-i*a),t[2]=2*(h*s+r*a+i*o-e*n),t},Me=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=.5*i[0],a=.5*i[1],i=.5*i[2],l=s[4],u=s[5],c=s[6],s=s[7];return t[0]=e,t[1]=h,t[2]=r,t[3]=n,t[4]=n*o+h*i-r*a+l,t[5]=n*a+r*o-e*i+u,t[6]=n*i+e*a-h*o+c,t[7]=-e*o-h*a-r*i+s,t},xe=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return _(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Te=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return I(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},Ge=function(t,s,i){var e=-s[0],h=-s[1],r=-s[2],n=s[3],o=s[4],a=s[5],l=s[6],u=o*n+(d=s[7])*e+a*r-l*h,c=a*n+d*h+l*e-o*r,f=l*n+d*r+o*h-a*e,d=d*n-o*e-a*h-l*r;return C(t,s,i),e=t[0],t[4]=u*(n=t[3])+d*e+c*(r=t[2])-f*(h=t[1]),t[5]=c*n+d*h+f*e-u*r,t[6]=f*n+d*r+u*h-c*e,t[7]=d*n-u*e-c*h-f*r,t},_e=function(t,s,i){var e=i[0],h=i[1],r=i[2],i=i[3],n=s[0],o=s[1],a=s[2],l=s[3];return t[0]=n*i+l*e+o*r-a*h,t[1]=o*i+l*h+a*e-n*r,t[2]=a*i+l*r+n*h-o*e,t[3]=l*i-n*e-o*h-a*r,t[4]=(n=s[4])*i+(l=s[7])*e+(o=s[5])*r-(a=s[6])*h,t[5]=o*i+l*h+a*e-n*r,t[6]=a*i+l*r+n*h-o*e,t[7]=l*i-n*e-o*h-a*r,t},Ie=function(t,s,i){var e=s[0],h=s[1],r=s[2],s=s[3],n=i[0],o=i[1],a=i[2],l=i[3];return t[0]=e*l+s*n+h*a-r*o,t[1]=h*l+s*o+r*n-e*a,t[2]=r*l+s*a+e*o-h*n,t[3]=s*l-e*n-h*o-r*a,t[4]=e*(l=i[7])+s*(n=i[4])+h*(a=i[6])-r*(o=i[5]),t[5]=h*l+s*o+r*n-e*a,t[6]=r*l+s*a+e*o-h*n,t[7]=s*l-e*n-h*o-r*a,t},Ce=function(t,s,i,e){var h,r,n,o,a,l;return Math.abs(e)<vh?O(t,s):(l=Math.hypot(i[0],i[1],i[2]),e*=.5,h=(n=Math.sin(e))*i[0]/l,r=n*i[1]/l,n=n*i[2]/l,i=Math.cos(e),l=s[0],t[0]=l*i+(e=s[3])*h+(o=s[1])*n-(a=s[2])*r,t[1]=o*i+e*r+a*h-l*n,t[2]=a*i+e*n+l*r-o*h,t[3]=e*i-l*h-o*r-a*n,t[4]=(e=s[4])*i+(l=s[7])*h+(o=s[5])*n-(a=s[6])*r,t[5]=o*i+l*r+a*h-e*n,t[6]=a*i+l*n+e*r-o*h,t[7]=l*i-e*h-o*r-a*n,t)},Pe=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t[2]=s[2]+i[2],t[3]=s[3]+i[3],t[4]=s[4]+i[4],t[5]=s[5]+i[5],t[6]=s[6]+i[6],t[7]=s[7]+i[7],t},Ee=function(t,s,i){var e=s[0],h=s[1],r=s[2],n=s[3],o=i[4],a=i[5],l=i[6],u=i[7],c=s[4],f=s[5],d=s[6],s=s[7],p=i[0],m=i[1],g=i[2],i=i[3];return t[0]=e*i+n*p+h*g-r*m,t[1]=h*i+n*m+r*p-e*g,t[2]=r*i+n*g+e*m-h*p,t[3]=n*i-e*p-h*m-r*g,t[4]=e*u+n*o+h*l-r*a+c*i+s*p+f*g-d*m,t[5]=h*u+n*a+r*o-e*l+f*i+s*m+d*p-c*g,t[6]=r*u+n*l+e*a-h*o+d*i+s*g+c*m-f*p,t[7]=n*u-e*o-h*a-r*l+s*i-c*p-f*m-d*g,t},Ae=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t[2]=s[2]*i,t[3]=s[3]*i,t[4]=s[4]*i,t[5]=s[5]*i,t[6]=s[6]*i,t[7]=s[7]*i,t},Re=function(t,s,i,e){var h=1-e;return $h(s,i)<0&&(e=-e),t[0]=s[0]*h+i[0]*e,t[1]=s[1]*h+i[1]*e,t[2]=s[2]*h+i[2]*e,t[3]=s[3]*h+i[3]*e,t[4]=s[4]*h+i[4]*e,t[5]=s[5]*h+i[5]*e,t[6]=s[6]*h+i[6]*e,t[7]=s[7]*h+i[7]*e,t},Fe=function(t,s){var i=Kh(s);return t[0]=-s[0]/i,t[1]=-s[1]/i,t[2]=-s[2]/i,t[3]=s[3]/i,t[4]=-s[4]/i,t[5]=-s[5]/i,t[6]=-s[6]/i,t[7]=s[7]/i,t},Oe=function(t,s){return t[0]=-s[0],t[1]=-s[1],t[2]=-s[2],t[3]=s[3],t[4]=-s[4],t[5]=-s[5],t[6]=-s[6],t[7]=s[7],t},De=function(t,s){var i,e,h,r,n,o,a,l,u=Kh(s);return 0<u&&(u=Math.sqrt(u),l=(i=s[0]/u)*(n=s[4])+(e=s[1]/u)*(o=s[5])+(h=s[2]/u)*(a=s[6])+(r=s[3]/u)*(s=s[7]),t[0]=i,t[1]=e,t[2]=h,t[3]=r,t[4]=(n-i*l)/u,t[5]=(o-e*l)/u,t[6]=(a-h*l)/u,t[7]=(s-r*l)/u),t},ke=function(t){return"quat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+")"},Le=function(t,s){return t[0]===s[0]&&t[1]===s[1]&&t[2]===s[2]&&t[3]===s[3]&&t[4]===s[4]&&t[5]===s[5]&&t[6]===s[6]&&t[7]===s[7]},Ne=function(t,s){var i=t[0],e=t[1],h=t[2],r=t[3],n=t[4],o=t[5],a=t[6],t=t[7],l=s[0],u=s[1],c=s[2],f=s[3],d=s[4],p=s[5],m=s[6],s=s[7];return Math.abs(i-l)<=vh*Math.max(1,Math.abs(i),Math.abs(l))&&Math.abs(e-u)<=vh*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(h-c)<=vh*Math.max(1,Math.abs(h),Math.abs(c))&&Math.abs(r-f)<=vh*Math.max(1,Math.abs(r),Math.abs(f))&&Math.abs(n-d)<=vh*Math.max(1,Math.abs(n),Math.abs(d))&&Math.abs(o-p)<=vh*Math.max(1,Math.abs(o),Math.abs(p))&&Math.abs(a-m)<=vh*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))},D=function(){var t=new Mh(2);return Mh!=Float32Array&&(t[0]=0,t[1]=0),t},Be=function(t){var s=new Mh(2);return s[0]=t[0],s[1]=t[1],s},We=function(t,s){var i=new Mh(2);return i[0]=t,i[1]=s,i},Ve=function(t,s){return t[0]=s[0],t[1]=s[1],t},je=function(t,s,i){return t[0]=s,t[1]=i,t},He=function(t,s,i){return t[0]=s[0]+i[0],t[1]=s[1]+i[1],t},Ue=function(t,s,i){return t[0]=s[0]-i[0],t[1]=s[1]-i[1],t},ze=function(t,s,i){return t[0]=s[0]*i[0],t[1]=s[1]*i[1],t},Je=function(t,s,i){return t[0]=s[0]/i[0],t[1]=s[1]/i[1],t},qe=function(t,s){return t[0]=Math.ceil(s[0]),t[1]=Math.ceil(s[1]),t},Xe=function(t,s){return t[0]=Math.floor(s[0]),t[1]=Math.floor(s[1]),t},Ye=function(t,s,i){return t[0]=Math.min(s[0],i[0]),t[1]=Math.min(s[1],i[1]),t},$e=function(t,s,i){return t[0]=Math.max(s[0],i[0]),t[1]=Math.max(s[1],i[1]),t},Ke=function(t,s){return t[0]=Math.round(s[0]),t[1]=Math.round(s[1]),t},Ze=function(t,s,i){return t[0]=s[0]*i,t[1]=s[1]*i,t},Qe=function(t,s,i,e){return t[0]=s[0]+i[0]*e,t[1]=s[1]+i[1]*e,t},th=function(t,s){var i=s[0]-t[0];return Math.hypot(i,s[1]-t[1])},sh=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},ih=function(t){var s=t[0];return Math.hypot(s,t[1])},eh=function(t){var s=t[0];return s*s+(t=t[1])*t},hh=function(t,s){return t[0]=-s[0],t[1]=-s[1],t},rh=function(t,s){return t[0]=1/s[0],t[1]=1/s[1],t},nh=function(t,s){var i=s[0],e=s[1];return 0<(i=i*i+e*e)&&(i=1/Math.sqrt(i)),t[0]=s[0]*i,t[1]=s[1]*i,t},oh=function(t,s){return t[0]*s[0]+t[1]*s[1]},ah=function(t,s,i){return s=s[0]*i[1]-s[1]*i[0],t[0]=t[1]=0,t[2]=s,t},lh=function(t,s,i,e){var h=s[0],s=s[1];return t[0]=h+e*(i[0]-h),t[1]=s+e*(i[1]-s),t},uh=function(t,s){s=s||1;var i=2*Oh()*Math.PI;return t[0]=Math.cos(i)*s,t[1]=Math.sin(i)*s,t},ch=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s,t[1]=i[1]*e+i[3]*s,t},fh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[2]*s+i[4],t[1]=i[1]*e+i[3]*s+i[5],t},dh=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[3]*s+i[6],t[1]=i[1]*e+i[4]*s+i[7],t},ph=function(t,s,i){var e=s[0],s=s[1];return t[0]=i[0]*e+i[4]*s+i[12],t[1]=i[1]*e+i[5]*s+i[13],t},mh=function(t,s,i,e){var h=s[0]-i[0],s=s[1]-i[1],r=Math.sin(e),e=Math.cos(e);return t[0]=h*e-s*r+i[0],t[1]=h*r+s*e+i[1],t},gh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1],h=Math.sqrt((i*i+t*t)*(e*e+s*s));return Math.acos(Math.min(Math.max(h&&(i*e+t*s)/h,-1),1))},yh=function(t){return t[0]=0,t[1]=0,t},wh=function(t){return"vec2("+t[0]+", "+t[1]+")"},Sh=function(t,s){return t[0]===s[0]&&t[1]===s[1]},bh=function(t,s){var i=t[0],t=t[1],e=s[0],s=s[1];return Math.abs(i-e)<=vh*Math.max(1,Math.abs(i),Math.abs(e))&&Math.abs(t-s)<=vh*Math.max(1,Math.abs(t),Math.abs(s))};h,p,f,a,d,l,m,g,y,w,S,b,x,T,G,_,I,C,P,E,A,R,F,O,D,vh=1e-6,Mh="undefined"!=typeof Float32Array?Float32Array:Array,Oh=Math.random,Dh="zyx",kh=Math.PI/180,Math.hypot||(Math.hypot=function(){for(var t=0,s=arguments.length;s--;)t+=arguments[s]*arguments[s];return Math.sqrt(t)}),Lh={__proto__:null,EPSILON:vh,get m(){return Mh},S:Oh,M:Dh,T:k,G:L,equals:N},Nh=Object.freeze({__proto__:null,create:B,clone:W,_:V,identity:j,I:H,set:U,C:z,P:J,A:q,R:X,multiply:t,rotate:Y,scale:$,F:K,O:Z,D:Q,L:tt,N:st,add:it,B:s,W:et,equals:ht,V:rt,j:nt,mul:t,sub:s}),Bh=Object.freeze({__proto__:null,create:ot,clone:at,_:lt,identity:ut,I:ct,set:ft,P:dt,R:pt,multiply:i,rotate:mt,scale:gt,translate:yt,F:wt,O:St,H:bt,D:vt,L:Mt,add:xt,B:e,V:Tt,j:Gt,W:_t,equals:It,mul:i,sub:e}),Wh=Object.freeze({__proto__:null,create:h,U:Ct,clone:Pt,_:Et,I:At,set:Rt,identity:Ft,C:Ot,P:Dt,A:kt,R:Lt,multiply:r,translate:Nt,rotate:Bt,scale:Wt,H:Vt,F:jt,O:Ht,J:Ut,X:zt,Y:Jt,$:qt,D:Xt,L:Yt,add:$t,B:n,V:Kt,j:Zt,W:Qt,equals:ts,mul:r,sub:n}),xh=Object.freeze({__proto__:null,create:ss,clone:is,_:es,I:hs,set:rs,identity:p,C:ns,P:os,A:as,R:ls,multiply:o,translate:us,scale:cs,rotate:fs,K:ds,Z:ps,tt:ms,H:gs,O:ys,F:ws,it:Ss,et:bs,ht:vs,nt:f,ot:Ms,lt:a,ut:d,ct:l,gt:xs,yt:Ts,St:Gs,X:_s,bt:Is,vt:u,perspective:u,Mt:Cs,xt:Ps,Tt:c,ortho:c,Gt:Es,_t:As,It:Rs,D:Fs,L:Os,add:Ds,B:ks,V:Ls,j:Ns,W:Bs,equals:Ws,mul:o,sub:ks}),Yh=Js,Zh=qs,Hh=Xs,Qh=ii,tr=ei,Vh=js,sr=hi,Fh=m(),Th=Object.freeze({__proto__:null,create:m,clone:Vs,length:js,I:g,_:Hs,set:Us,add:zs,B:Js,multiply:qs,Ct:Xs,ceil:Ys,floor:$s,min:Ks,max:Zs,round:Qs,scale:ti,Pt:si,Et:ii,At:ei,Rt:hi,Ft:ri,inverse:ni,normalize:y,Ot:w,Dt:S,kt:oi,Lt:ai,Nt:li,Bt:ui,random:ci,Wt:fi,Vt:di,jt:pi,K:mi,Z:gi,tt:yi,angle:wi,Ht:Si,D:bi,W:vi,equals:Mi,sub:Yh,mul:Zh,div:Hh,Ut:Qh,zt:tr,Jt:Vh,qt:sr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||3,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Fh[0]=t[n],Fh[1]=t[n+1],Fh[2]=t[n+2],h(Fh,Fh,r),t[n]=Fh[0],t[n+1]=Fh[1],t[n+2]=Fh[2];return t}}),Yh=Ci,Zh=Pi,Hh=Ei,Qh=Ni,tr=Bi,sr=v,ir=M,Rh=b(),jh=Object.freeze({__proto__:null,create:b,clone:xi,I:Ti,_:Gi,set:_i,add:Ii,B:Ci,multiply:Pi,Ct:Ei,ceil:Ai,floor:Ri,min:Fi,max:Oi,round:Di,scale:ki,Pt:Li,Et:Ni,At:Bi,length:v,Rt:M,Ft:Wi,inverse:Vi,normalize:ji,Ot:x,Dt:Hi,kt:Ui,random:zi,Wt:Ji,jt:qi,Ht:Xi,D:Yi,W:$i,equals:Ki,sub:Yh,mul:Zh,div:Hh,Ut:Qh,zt:tr,Jt:sr,qt:ir,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||4,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Rh[0]=t[n],Rh[1]=t[n+1],Rh[2]=t[n+2],Rh[3]=t[n+3],h(Rh,Rh,r),t[n]=Rh[0],t[n+1]=Rh[1],t[n+2]=Rh[2],t[n+3]=Rh[3];return t}}),Yh=xi,Zh=Ti,Hh=Gi,Qh=_i,tr=Ii,sr=se,Uh=ki,zh=x,ir=Ui,er=Jh=v,hr=qh=M,Xh=ji,rr=$i,Ph=m(),Eh=g(1,0,0),Ah=g(0,1,0),nr=function(t,s,i){var e=w(s,i);return e<-.999999?(S(Ph,Eh,s),Vh(Ph)<1e-6&&S(Ph,Ah,s),y(Ph,Ph),G(t,Ph,Math.PI),t):.999999<e?(t[0]=0,t[1]=0,t[2]=0,t[3]=1,t):(S(Ph,s,i),t[0]=Ph[0],t[1]=Ph[1],t[2]=Ph[2],t[3]=1+e,Xh(t,t))},Ih=T(),Ch=T(),or=function(t,s,i,e,h,r){return A(Ih,s,h,r),A(Ch,i,e,r),A(t,Ih,Ch,2*r*(1-r)),t},_h=h(),Yh=Object.freeze({__proto__:null,create:T,identity:Zi,Xt:G,Yt:Qi,$t:te,multiply:se,K:_,Z:I,tt:C,Kt:ie,exp:P,Zt:E,pow:ee,Lt:A,random:he,P:re,Qt:ne,ts:R,es:oe,D:ae,clone:Yh,I:Zh,_:Hh,set:Qh,add:tr,mul:sr,scale:Uh,Ot:zh,kt:ir,length:Jh,Jt:er,Rt:qh,qt:hr,normalize:Xh,W:rr,equals:le,hs:nr,ns:or,os:function(t,s,i,e){return _h[0]=i[0],_h[3]=i[1],_h[6]=i[2],_h[1]=e[0],_h[4]=e[1],_h[7]=e[2],_h[2]=-s[0],_h[5]=-s[1],_h[8]=-s[2],Xh(t,R(t,_h))}}),$h=zh,Zh=Kh=qh,Qh=Object.freeze({__proto__:null,create:ue,clone:ce,I:fe,ls:de,nt:F,H:pe,F:me,U:ge,_:O,identity:ye,set:we,us:Hh,ds:Se,ps:Hh,gs:be,lt:ve,translate:Me,K:xe,Z:Te,tt:Ge,ys:_e,ws:Ie,Ss:Ce,add:Pe,multiply:Ee,mul:Ee,scale:Ae,Ot:$h,kt:Re,P:Fe,Qt:Oe,length:Jh,Jt:Jh,Rt:Kh,qt:Zh,normalize:De,D:ke,W:Le,equals:Ne}),tr=ih,sr=Ue,ir=ze,er=Je,hr=th,rr=sh,nr=eh,Gh=D(),or=Object.freeze({__proto__:null,create:D,clone:Be,I:We,_:Ve,set:je,add:He,B:Ue,multiply:ze,Ct:Je,ceil:qe,floor:Xe,min:Ye,max:$e,round:Ke,scale:Ze,Pt:Qe,Et:th,At:sh,length:ih,Rt:eh,Ft:hh,inverse:rh,normalize:nh,Ot:oh,Dt:ah,kt:lh,random:uh,bs:ch,vs:fh,Vt:dh,Wt:ph,rotate:mh,angle:gh,Ht:yh,D:wh,W:Sh,equals:bh,Jt:tr,sub:sr,mul:ir,div:er,Ut:hr,zt:rr,qt:nr,forEach:function(t,s,i,e,h,r){var n,o;for(s=s||2,i=i||0,o=e?Math.min(e*s+i,t.length):t.length,n=i;n<o;n+=s)Gh[0]=t[n],Gh[1]=t[n+1],h(Gh,Gh,r),t[n]=Gh[0],t[n+1]=Gh[1];return t}}),globalThis.Ms=Lh,globalThis.Ms.xs=Nh,globalThis.Ms.Ts=Bh,globalThis.Ms.Gs=Wh,globalThis.Ms._s=xh,globalThis.Ms.Is=Yh,globalThis.Ms.Cs=Qh,globalThis.Ms.Ps=or,globalThis.Ms.Es=Th,globalThis.Ms.As=jh}var Gh,_h,Ih,Ch,Ph,Eh,Ah,Rh,Fh,vh,Mh,Oh,Dh,kh,Lh,Nh,Bh,Wh,xh,Vh,Th,jh,Hh,Uh,zh,Jh,qh,Xh,Yh,$h,Kh,Zh,Qh,tr,sr,ir,er,hr,rr,nr,or,O,D,k,L;{let a=function(t,s,i){var e=[0,0],h=t[1][1]-t[0][1],r=t[0][0]-t[1][0],t=h*t[0][0]+r*t[0][1],n=s[1][1]-s[0][1],o=s[0][0]-s[1][0],s=n*s[0][0]+o*s[0][1],a=h*o-n*r;return m(a,0,i=i||0)||(e[0]=(o*t-r*s)/a,e[1]=(h*s-n*t)/a),e},h=function(t,s,i,e){var h,r=s[0]-t[0],s=s[1]-t[1],n=e[0]-i[0];return n*s-(e=e[1]-i[1])*r!=0&&(h=(n*(t[1]-i[1])+e*(i[0]-t[0]))/(e*r-n*s),0<=(t=(r*(i[1]-t[1])+s*(t[0]-i[0]))/(n*s-e*r)))&&t<=1&&0<=h&&h<=1},o=function(t,s,i){return(s[0]-t[0])*(i[1]-t[1])-(i[0]-t[0])*(s[1]-t[1])},x=function(t,s,i){return 0<o(t,s,i)},T=function(t,s,i){return 0<=o(t,s,i)},G=function(t,s,i){return o(t,s,i)<0},_=function(t,s,i){return o(t,s,i)<=0},r=function(t,s,i,e){var h,r,n;return e?(n=D,(r=O)[0]=s[0]-t[0],r[1]=s[1]-t[1],n[0]=i[0]-s[0],n[1]=i[1]-s[1],h=r[0]*n[0]+r[1]*n[1],r=Math.sqrt(r[0]*r[0]+r[1]*r[1]),n=Math.sqrt(n[0]*n[0]+n[1]*n[1]),Math.acos(h/(r*n))<e):0===o(t,s,i)},I=function(t,s){var i=s[0]-t[0];return i*i+(s=s[1]-t[1])*s},C=function(t,s){var i=t.length;return t[s<0?s%i+i:s%i]},n=function(t){t.length=0},P=function(t,s,i,e){for(var h=i;h<e;h++)t.push(s[h])},t=function(t){for(var s=0,i=t,e=1;e<t.length;++e)(i[e][1]<i[s][1]||i[e][1]===i[s][1]&&i[e][0]>i[s][0])&&(s=e);return!x(C(t,s-1),C(t,s),C(t,s+1))&&(l(t),!0)},l=function(t){for(var s=[],i=t.length,e=0;e!==i;e++)s.push(t.pop());for(e=0;e!==i;e++)t[e]=s[e]},E=function(t,s){return G(C(t,s-1),C(t,s),C(t,s+1))},u=function(t,s,i){var e,h=k,r=L;if(T(C(t,s+1),C(t,s),C(t,i))&&_(C(t,s-1),C(t,s),C(t,i)))return!1;for(var n=I(C(t,s),C(t,i)),o=0;o!==t.length;++o)if((o+1)%t.length!==s&&o!==s&&T(C(t,s),C(t,i),C(t,o+1))&&_(C(t,s),C(t,i),C(t,o))&&(h[0]=C(t,s),h[1]=C(t,i),r[0]=C(t,o),r[1]=C(t,o+1),e=a(h,r),I(C(t,s),e)<n))return!1;return!0},A=function(t,s,i){for(var e=0;e!==t.length;++e)if(e!==s&&e!==i&&(e+1)%t.length!==s&&(e+1)%t.length!==i&&h(C(t,s),C(t,i),C(t,e),C(t,e+1)))return!1;return!0},c=function(t,s,i,e){var h=e||[];if(n(h),s<i)for(var r=s;r<=i;r++)h.push(t[r]);else{for(r=0;r<=i;r++)h.push(t[r]);for(r=s;r<t.length;r++)h.push(t[r])}return h},f=function(t){for(var s=[],i=[],e=[],h=Number.MAX_VALUE,r=0;r<t.length;++r)if(E(t,r))for(var n=0;n<t.length;++n)if(u(t,r,n)){for(var i=f(c(t,r,n,e)),o=f(c(t,n,r,e)),a=0;a<o.length;a++)i.push(o[a]);i.length<h&&(h=(s=i).length,s.push([C(t,r),C(t,n)]))}return s},s=function(t){var s=f(t);return 0<s.length?d(t,s):[t]},d=function(t,s){if(0===s.length)return[t];if(s instanceof Array&&s.length&&s[0]instanceof Array&&2===s[0].length&&s[0][0]instanceof Array){for(var i=[t],e=0;e<s.length;e++)for(var h=s[e],r=0;r<i.length;r++){var n=d(i[r],h);if(n){i.splice(r,1),i.push(n[0],n[1]);break}}return i}return e=t.indexOf((h=s)[0]),r=t.indexOf(h[1]),-1!==e&&-1!==r&&[c(t,e,r),c(t,r,e)]},i=function(t){for(var s=t,i=0;i<s.length-1;i++)for(var e=0;e<i-1;e++)if(h(s[i],s[i+1],s[e],s[e+1]))return!1;for(i=1;i<s.length-2;i++)if(h(s[0],s[s.length-1],s[i],s[i+1]))return!1;return!0},R=function(t,s,i,e,h){var r=s[1]-t[1],s=t[0]-s[0],t=r*t[0]+s*t[1],n=e[1]-i[1],e=i[0]-e[0],i=n*i[0]+e*i[1],o=r*e-n*s;return m(o,0,h=h||0)?[0,0]:[(e*t-s*i)/o,(r*i-n*t)/o]},F=function(t,s,i,e,h,r,n){r=r||100,n=n||0,h=h||25,s=void 0!==s?s:[],i=i||[],e=e||[];var o=[0,0],a=[0,0],l=[0,0],u=0,c=0,f=0,d=0,p=0,m=0,g=0,y=[],w=[],S=t,b=t;if(!(b.length<3))if(r<++n)console.warn("quickDecomp: max level ("+r+") reached.");else{for(var v=0;v<t.length;++v)if(E(S,v)){i.push(S[v]);for(var u=c=Number.MAX_VALUE,M=0;M<t.length;++M)x(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v-1),C(S,v),C(S,M-1))&&(l=R(C(S,v-1),C(S,v),C(S,M),C(S,M-1)),G(C(S,v+1),C(S,v),l))&&(f=I(S[v],l))<c&&(c=f,a=l,m=M),x(C(S,v+1),C(S,v),C(S,M+1))&&_(C(S,v+1),C(S,v),C(S,M))&&(l=R(C(S,v+1),C(S,v),C(S,M),C(S,M+1)),x(C(S,v-1),C(S,v),l))&&(f=I(S[v],l))<u&&(u=f,o=l,p=M);if(m===(p+1)%t.length)l[0]=(a[0]+o[0])/2,l[1]=(a[1]+o[1])/2,e.push(l),v<p?(P(y,S,v,p+1),y.push(l),w.push(l),0!==m&&P(w,S,m,S.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,S.length),P(y,S,0,p+1),y.push(l),w.push(l),P(w,S,m,v+1));else{if(p<m&&(p+=t.length),d=Number.MAX_VALUE,p<m)return s;for(M=m;M<=p;++M)T(C(S,v-1),C(S,v),C(S,M))&&_(C(S,v+1),C(S,v),C(S,M))&&(f=I(C(S,v),C(S,M)))<d&&A(S,v,M)&&(d=f,g=M%t.length);v<g?(P(y,S,v,g+1),0!==g&&P(w,S,g,b.length),P(w,S,0,v+1)):(0!==v&&P(y,S,v,b.length),P(y,S,0,g+1),P(w,S,g,v+1))}return y.length<w.length?(F(y,s,i,e,h,r,n),F(w,s,i,e,h,r,n)):(F(w,s,i,e,h,r,n),F(y,s,i,e,h,r,n)),s}s.push(t)}return s},e=function(t,s){for(var i=0,e=t.length-1;3<t.length&&0<=e;--e)r(C(t,e-1),C(t,e),C(t,e+1),s)&&(t.splice(e%t.length,1),i++);return i},p=function(t,s){for(var i=t.length-1;1<=i;--i)for(var e=t[i],h=i-1;0<=h;--h)g(e,t[h],s)&&t.splice(i,1)},m=function(t,s,i){return i=i||0,Math.abs(t-s)<=i},g=function(t,s,i){return m(t[0],s[0],i)&&m(t[1],s[1],i)};a,h,o,x,T,G,_,r,I,C,n,P,l,E,u,A,c,f,d,R,F,m,g,O=[],D=[],k=[],L=[],self.Rs={Fs:s,Os:F,Ds:i,ks:e,Ls:p,Ns:t}}{let t=!1,s=!1,i="dev",e=Symbol("Construct internal API token"),h=14,r=self.Bs=class{constructor(){throw TypeError("static class can't be instantiated")}static Ws(){if(h<=0)throw new Error("cannot obtain internal API token");return--h,e}static Vs(){t=!0}static Hs(){return t}static Us(){s=!0}static zs(){return s}static Js(t){i=t}static qs(){return i}static Xs(){return"final"===i}};r.isDebug=!1,r.Ys=!1,r.hardwareConcurrency=navigator.hardwareConcurrency||2,self.$s={}}{const s=self.Bs;s.Ks=class{constructor(t){this.Zs=t,this.Qs=new Map,this.si()}si(){let t=this.Zs,s=(t=t.startsWith("?")||t.startsWith("#")?t.substr(1):t).split("&");for(const i of s)this.ei(i)}ei(t){if(t)if(t.includes("=")){const s=t.indexOf("="),i=decodeURIComponent(t.substring(0,s)),e=decodeURIComponent(t.substring(s+1));this.Qs.set(i,e)}else this.Qs.set(t,null)}hi(){for(const t of this.Qs)console.log("[QueryParser] Parameter '"+t[0]+"' = "+(null===t[1]?"null":"'"+t[1]+"'"))}ri(t){return this.Qs.has(t)}ni(t){const s=this.Qs.get(t);return void 0===s?null:s}oi(){history.replaceState("",document.title,location.pathname+location.search)}ai(t){this.Zs=t,this.Qs.clear(),this.si()}},s.li=new s.Ks(location.search),s.ci=new s.Ks(location.hash),s.li.ri("perf")&&(s.di=!0),"dev"!==s.li.ni("mode")&&s.Js("final")}{let e=function(t){const s=parseFloat(t),i=V.get(s);return i||(13<=s?"11":"NT "+t)};e;const a=self.Bs,W="(unknown)",V=(a.mi={gi:W,yi:W,wi:W,Si:W,bi:NaN,vi:W,Mi:"browser",xi:!0,Ti:!1,Gi:!1,_i:!1,Ii:async()=>{}},new Map([[5,"2000"],[5.1,"XP"],[5.2,"XP"],[6,"Vista"],[6.1,"7"],[6.2,"8"],[6.3,"8.1"],[10,"10"]])),j=navigator.userAgent,H=navigator.userAgentData;if(H&&0<H.brands.length){let s=function(t){let s="",i="",e="",h="";for(const r of t){const n=U.get(r.brand),o=(!s&&n&&(s=n,i=r.version),z.get(r.brand));!e&&o&&(e=o,h=r.version)}s||"Chromium"!==e||(a.mi.wi="Chromium",a.mi.Si=h),a.mi.wi=s||W,a.mi.Si=i||W,a.mi.vi=e||W};s,a.mi.gi=H.platform,a.mi.Ti=H.mobile,a.mi.xi=!a.mi.Ti;const U=new Map([["Google Chrome","Chrome"],["Microsoft Edge","Edge"],["Opera","Opera"],["Opera GX","Opera GX"],["Mozilla Firefox","Firefox"],["Apple Safari","Safari"],["NW.js","NW.js"]]),z=new Map([["Chromium","Chromium"],["Gecko","Gecko"],["WebKit","WebKit"]]);s(H.brands);let i=!1;a.mi.Ii=async()=>{if(!i)try{const t=await navigator.userAgentData.getHighEntropyValues(["platformVersion","fullVersionList"]);s(t.fullVersionList),"Windows"===a.mi.gi?a.mi.yi=e(t.platformVersion):a.mi.yi=t.platformVersion,i=!0}catch(t){console.warn("Failed to get detailed user agent information: ",t)}}}else{let t=function(t,s){const i=Array.isArray(t)?t:[t];for(const e of i){const h=e.exec(j);if(h){s(h);break}}};t(/windows\s+nt\s+([\d\.]+)/i,t=>{a.mi.gi="Windows";const s=t[1];a.mi.yi=e(s)}),t(/mac\s+os\s+x\s+([\d\._]+)/i,t=>{a.mi.gi="macOS",a.mi.yi=t[1].replace(/_/g,".")}),t(/CrOS/,()=>{a.mi.gi="Chrome OS"}),t(/linux|openbsd|freebsd|netbsd/i,()=>{a.mi.gi="Linux"}),t(/android/i,()=>{a.mi.gi="Android"}),t(/android\s+([\d\.]+)/i,t=>{a.mi.gi="Android",a.mi.yi=t[1]}),a.mi.gi===W&&(t(/(iphone|ipod|ipad)/i,t=>{a.mi.gi="iOS"}),t([/iphone\s+os\s+([\d\._]+)/i,/ipad[^)]*os\s+([\d\._]+)/i],t=>{a.mi.gi="iOS",a.mi.yi=t[1].replace(/_/g,".")}));const J=/chrome\//i.test(j),q=/chromium\//i.test(j),X=/edg\//i.test(j),Y=/OPR\//.test(j),$=/nwjs/i.test(j),K=/safari\//i.test(j),Z=/webkit/i.test(j),Q=(X||Y||t(/chrome\/([\d\.]+)/i,t=>{a.mi.wi="Chrome",a.mi.Si=t[1],a.mi.vi="Chromium"}),t(/edg\/([\d\.]+)/i,t=>{a.mi.wi="Edge",a.mi.Si=t[1],a.mi.vi="Chromium"}),t(/OPR\/([\d\.]+)/,t=>{a.mi.wi="Opera",a.mi.Si=t[1],a.mi.vi="Chromium"}),t(/chromium\/([\d\.]+)/i,t=>{a.mi.wi="Chromium",a.mi.Si=t[1],a.mi.vi="Chromium"}),t(/nwjs\/[0-9.]+/i,t=>{a.mi.wi="NW.js",a.mi.Si=t[1],a.mi.vi="Chromium",a.mi.Mi="nwjs"}),t(/firefox\/([\d\.]+)/i,t=>{a.mi.wi="Firefox",a.mi.Si=t[1],a.mi.vi="Gecko"}),!K||J||q||X||Y||$||(a.mi.wi="Safari",a.mi.vi="WebKit",t(/version\/([\d\.]+)/i,t=>{a.mi.Si=t[1]}),t(/crios\/([\d\.]+)/i,t=>{a.mi.wi="Chrome for iOS",a.mi.Si=t[1]}),t(/fxios\/([\d\.]+)/i,t=>{a.mi.wi="Firefox for iOS",a.mi.Si=t[1]}),t(/edgios\/([\d\.]+)/i,t=>{a.mi.wi="Edge for iOS",a.mi.Si=t[1]})),a.mi.vi===W&&Z&&(a.mi.vi="WebKit"),"Android"===a.mi.gi&&"Safari"===a.mi.wi&&(a.mi.wi="Stock"),new Set(["Windows","macOS","Linux","Chrome OS"])),tt=Q.has(a.mi.gi)||"nwjs"===a.mi.Mi;a.mi.xi=tt,a.mi.Ti=!tt}"Chrome"===a.mi.wi&&"browser"===a.mi.Mi&&/wv\)/.test(j)&&(a.mi.Mi="webview"),"nwjs"!==a.mi.Mi&&"undefined"!=typeof window&&(window.matchMedia&&window.matchMedia("(display-mode: standalone)").matches||navigator.standalone)&&(a.mi.Mi="webapp"),a.mi.bi=parseFloat(a.mi.Si);const i="macOS"===a.mi.gi&&navigator.maxTouchPoints&&2<navigator.maxTouchPoints;i&&(a.mi.gi="iOS",a.mi.yi=a.mi.Si,a.mi.xi=!1,a.mi.Ti=!0,a.mi._i=!0),a.mi.Gi="macOS"===a.mi.gi||"iOS"===a.mi.gi}{let n=function(i){return new Promise((t,s)=>{i.onsuccess=()=>t(i.result),i.onerror=()=>s(i.error)})},o=function(i){return new Promise((t,s)=>{i.oncomplete=()=>t(),i.onerror=()=>s(i.error),i.onabort=()=>s(i.error)})},t=function(t,s){return N(t,s)},s=function(t,s){return N(t,s,!0)},a=function(s){e(s);let t=et.get(s);return t instanceof Promise||(t=(async i=>{e(i);const t=indexedDB.open(i,st);return t.addEventListener("upgradeneeded",t=>{try{const s=t.target.result;s.createObjectStore(it)}catch(t){console.error("Failed to create objectstore for database "+i,t)}}),n(t)})(s),et.set(s,t),t.catch(t=>et.delete(s))),t},e=function(t){if("string"!=typeof t)throw new TypeError("expected string")},r=function(t,h){const s=t.objectStore(it).openCursor();return new Promise(i=>{const e=[];s.onsuccess=t=>{const s=t.target.result;if(s){switch(h){case"entries":e.push([s.key,s.value]);break;case"keys":e.push(s.key);break;case"values":e.push(s.value)}s.continue()}else i(e)}})};n,o,t,s,a,e,r;const st=2,it="keyvaluepairs",et=new Map,ht="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAll,rt="undefined"!=typeof IDBObjectStore&&"function"==typeof IDBObjectStore.prototype.getAllKeys;async function N(s,i,e=!1,h=!0){const t=await a(s);try{const r=t.transaction([it],e?"readwrite":"readonly");return i(r)}catch(t){if(h&&"InvalidStateError"===t.name)return et.delete(s),N(s,i,e,!1);throw t}}class nt{constructor(t){e(t),this.name=t}async ready(){await a(this.name)}set(h,r){return e(h),s(this.name,async t=>{const s=t.objectStore(it).put(r,h),i=n(s),e=o(t);await Promise.all([e,i])})}get(r){return e(r),t(this.name,async t=>{const s=t.objectStore(it).get(r),i=n(s),e=o(t),[,h]=await Promise.all([e,i]);return h})}delete(h){return e(h),s(this.name,async t=>{const s=t.objectStore(it).delete(h),i=n(s),e=o(t);await Promise.all([e,i])})}clear(){return s(this.name,async t=>{const s=t.objectStore(it).clear(),i=n(s),e=o(t);await Promise.all([e,i])})}keys(){return t(this.name,async t=>{let s;if(rt){const h=t.objectStore(it).getAllKeys();s=n(h)}else s=r(t,"keys");const i=o(t),[,e]=await Promise.all([i,s]);return e})}values(){return t(this.name,async t=>{let s;if(ht){const h=t.objectStore(it).getAll();s=n(h)}else s=r(t,"values");const i=o(t),[,e]=await Promise.all([i,s]);return e})}entries(){return t(this.name,async t=>{const s=r(t,"entries"),i=o(t),[,e]=await Promise.all([i,s]);return e})}}self.Ci=nt}{let i=function(t){throw new Error(`"${t}" is not implemented`)},e=function(t){if("function"==typeof t)throw new Error("localforage callback API is not implemented; please use the promise API instead")},h=function(e){return"object"==typeof e?new Promise(s=>{const{port1:t,port2:i}=new MessageChannel;i.onmessage=t=>s(t.data),t.postMessage(e)}):Promise.resolve(e)};i,e,h;const ot=self.Ci,at=[/no available storage method found/i,/an attempt was made to break through the security policy of the user agent/i,/the user denied permission to access the database/i,/a mutation operation was attempted on a database that did not allow mutations/i,/idbfactory\.open\(\) called in an invalid security context/i];new WeakMap;class lt{constructor(t){this.Pi=t,this.Ei=!this.Pi,this.Ei||"undefined"!=typeof indexedDB||(this.Ei=!0,console.warn("Unable to use local storage because IndexedDB API is not available")),this.Ai=new Map}Ri(t){if(!this.Ei)for(const s of at)if(t&&s.test(t.message)){console.error("Unable to use local storage, reverting to in-memory store: ",t,t.message),this.Ei=!0;break}}async Fi(t){const s=this.Ai.get(t),i=await h(s);return void 0===i?null:i}async Oi(t,s){s=await h(s),this.Ai.set(t,s)}Di(t){this.Ai.delete(t)}ki(){this.Ai.clear()}Li(){return Array.from(this.Ai.keys())}Ni(){return this.Ei}Bi(){return this.Ai}Wi(t){this.Ai=t}async getItem(s,t){if(e(t),this.Ei)return this.Fi(s);let i;try{i=await this.Pi.get(s)}catch(t){return this.Ri(t),this.Ei?this.Fi(s):(console.error(`Error reading '${s}' from storage, returning null: `,t),null)}return void 0===i?null:i}async setItem(s,i,t){if(e(t),void 0===i&&(i=null),this.Ei)await this.Oi(s,i);else try{await this.Pi.set(s,i)}catch(t){if(this.Ri(t),!this.Ei)throw t;await this.Oi(s,i)}}async removeItem(s,t){if(e(t),this.Ei)this.Di(s);else try{await this.Pi.delete(s)}catch(t){this.Ri(t),this.Ei?this.Di(s):console.error(`Error removing '${s}' from storage: `,t)}}async clear(t){if(e(t),this.Ei)this.ki();else try{await this.Pi.clear()}catch(t){this.Ri(t),this.Ei?this.ki():console.error("Error clearing storage: ",t)}}async keys(t){if(e(t),this.Ei)return this.Li();let s=[];try{s=await this.Pi.keys()}catch(t){if(this.Ri(t),this.Ei)return this.Li();console.error("Error getting storage keys: ",t)}return s}ready(t){return e(t),this.Ei?Promise.resolve(!0):this.Pi.ready()}Vi(t){if(t.forceInMemoryFallback)return new lt(null);{const s=t.name;if("string"!=typeof s)throw new TypeError("invalid store name");const i=new ot(s);return new lt(i)}}length(t){i("localforage.length()")}key(t,s){i("localforage.key()")}iterate(t,s){i("localforage.iterate()")}ji(t){i("localforage.setDriver()")}config(t){i("localforage.config()")}Hi(t){i("localforage.defineDriver()")}Ui(){i("localforage.driver()")}supports(t){i("localforage.supports()")}dropInstance(){i("localforage.dropInstance()")}}self.localforage=new lt(new ot("localforage"))}{const e=self.Bs;if(e.Ji={},e.Ji.Xi=(()=>{try{if("undefined"==typeof document)return!1;const t=document.createElement("div");if(void 0===t.animate)return!1;const s=t.animate([{opacity:"0"},{opacity:"1"}],1e3);return void 0!==s.reverse}catch(t){return!1}})(),e.Ji.Yi="undefined"!=typeof HTMLDialogElement,e.Ji.$i=!!self.requestIdleCallback,e.Ji.ImageBitmap=!!self.createImageBitmap,e.Ji.ImageBitmapOptions=!1,e.Ji.Ki=!1,e.Ji.ImageBitmap){try{self.createImageBitmap(new ImageData(32,32),{premultiplyAlpha:"none"}).then(()=>{e.Ji.ImageBitmapOptions=!0}).catch(()=>{e.Ji.ImageBitmapOptions=!1})}catch(t){e.Ji.ImageBitmapOptions=!1}try{self.createImageBitmap(new ImageData(32,32),{resizeWidth:10,resizeHeight:10}).then(t=>{e.Ji.Ki=10===t.width&&10===t.height}).catch(()=>{e.Ji.Ki=!1})}catch(t){e.Ji.Ki=!1}}if(e.Ji.Zi=!(!navigator.clipboard||!navigator.clipboard.readText),e.Ji.Qi=!(!navigator.permissions||!navigator.permissions.query),e.Ji.te=!1,e.Ji.Qi){const ut={name:"clipboard-read"};navigator.permissions.query(ut).then(()=>{e.Ji.te=!0}).catch(()=>{e.Ji.te=!1})}e.Ji.ie=!!(navigator.permissions&&navigator.clipboard&&self.ClipboardItem),e.Ji.he="undefined"!=typeof Proxy,e.Ji.ne=(()=>{if("undefined"==typeof document)return!1;const t=document.createElement("a");return void 0!==t.download})(),e.Ji.oe="function"==typeof fetch,e.Ji.ae=!!(self.isSecureContext&&"Opera"!==e.mi.wi&&navigator.storage&&navigator.storage.persist),e.Ji.le=!!(self.isSecureContext&&navigator.storage&&navigator.storage.estimate),e.Ji.ue=(()=>{if("undefined"==typeof document)return!1;if("iOS"===e.mi.gi)return!1;const t=document.documentElement;return!!(t.requestFullscreen||t.msRequestFullscreen||t.mozRequestFullScreen||t.webkitRequestFullscreen)})(),e.Ji.ImageDecoder=void 0!==self.ImageDecoder,e.Ji.fe=!!self.VideoEncoder,e.Ji.de=!!self.showOpenFilePicker,e.Ji.pe=!!self.queryLocalFonts,e.Ji.UserActivation=!!navigator.userActivation,e.Ji.me=!1,(async()=>{let s;"undefined"==typeof document?s=new OffscreenCanvas(32,32):((s=document.createElement("canvas")).width=32,s.height=32);const t=s.getContext("2d");t.fillStyle="blue",t.fillRect(0,0,32,32);let i=null;try{s.convertToBlob?i=await s.convertToBlob({type:"image/webp",quality:1}):s.toBlob&&(i=await new Promise(t=>s.toBlob(t,"image/webp",1))),e.Ji.me=i&&"image/webp"===i.type}catch(t){e.Ji.me=!1}})()}{let e=function(t,i){return t.reduce((t,s)=>(0<i&&Array.isArray(s)?Array.prototype.push.apply(t,e(s,i-1)):t.push(s),t),[])};e;const ct=self.Bs;if(!String.prototype.trimStart){const ft=/^[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*/;String.prototype.trimStart=function(){return this.replace(ft,"")}}if(!String.prototype.trimEnd){const dt=/[\x09\x0A\x0B\x0C\x0D\x20\xA0\u1680\u180E\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200A\u202F\u205F\u3000\u2028\u2029\uFEFF]*$/;String.prototype.trimEnd=function(){return this.replace(dt,"")}}String.prototype.replaceAll||(String.prototype.replaceAll=function(t,s){return this.replace(new RegExp(ct.ge(t),"g"),s)}),Array.prototype.values||(Array.prototype.values=function*(){for(const t of this)yield t}),Array.prototype.flat||(Array.prototype.flat=function(t=1){return e(this,t)}),Array.prototype.at||(Array.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),String.prototype.at||(String.prototype.at=function(t){if((t=Math.trunc(t)||0)<0&&(t+=this.length),!(t<0||t>=this.length))return this[t]}),RegExp.escape||(RegExp.escape=function(t){return String(t).replace(/[\\^$*+?.()|[\]{}]/g,"\\$&")}),Set.prototype.ye||(Set.prototype.ye=function(t){if(!(t instanceof Set))throw new TypeError("argument must be a Set");for(const s of this)if(!t.has(s))return!1;return!0}),navigator.storage&&!navigator.storage.estimate&&navigator.webkitTemporaryStorage&&navigator.webkitTemporaryStorage.queryUsageAndQuota&&(navigator.storage.estimate=function(){return new Promise((i,t)=>navigator.webkitTemporaryStorage.queryUsageAndQuota((t,s)=>i({usage:t,quota:s}),t))}),void 0===self.isSecureContext&&(self.isSecureContext="https:"===location.protocol),void 0===self.globalThis&&(self.globalThis=self)}{let i=function(t){let s=pt.we(),i="Assertion failure: "+t+"\n\nStack trace:\n"+s;console.error(i)};i;const pt=self.Bs;self.assert=function(t,s){t||i(s)}}{const h=self.Bs,mt=self.$s,gt=(h.Se=function(t){return"number"==typeof t},h.ve=function(t){return h.Se(t)&&isFinite(t)},h.Me=function(t){if(!h.Se(t))throw new TypeError("expected number")},h.xe=function(t){h.Te(t)},h.Ge=function(t,s,i){if(!h.Se(t)||isNaN(t)||t<s||i<t)throw new RangeError("number outside of range")},h._e=function(...s){for(let t of s);},h.Ie=function(t){if(!h.ve(t))throw new TypeError("expected finite number")},h.Ce=function(t){h.Te(t)},h.Pe=function(...s){for(let t of s);},h.Ee=function(t){return"string"==typeof t},h.Ae=function(t){if(!h.Ee(t))throw new TypeError("expected string")},h.Re=function(t){h.Te(t)},h.Fe=function(...s){for(let t of s);},h.Oe=function(t){if("object"!=typeof t||null===t)return!1;let s=Object.getPrototypeOf(t);return s?s.constructor===Object:null===s},h.De=function(t){if(!h.Oe(t))throw new TypeError("expected simple object")},h.ke=function(t){if(!h.Te(t)&&!h.Oe(t))throw new TypeError("expected simple object")},h.Le=function(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)},h.Ne=function(t){if(!h.Le(t))throw new TypeError("expected object")},h.Be=function(t){h.Te(t)},h.We=function(...s){for(let t of s);},h.Ve=function(t){return h.je(t,Blob)&&"string"==typeof t.name},h.He=function(t){if(!h.Ve(t))throw new TypeError("expected file")},h.Ue=function(t){h.Te(t)},h.Je=function(t){return Array.isArray(t)},h.qe=function(t){if(!h.Je(t))throw new TypeError("expected array")},h.Xe=function(t){h.Te(t)},h.Ye=function(...s){for(let t of s);},h.$e=function(t){return!(!h.Je(t)||t.length&&!h.Je(t[0]))},h.Ke=function(s){if(!h.$e(s))throw new TypeError("expected 2d array");for(let t of s)if(!h.Je(t))throw new TypeError("expected 2d array")},h.Ze=function(t){h.Te(t)},h.Qe=function(t){return"function"==typeof t},h.ih=function(t,s){if(!h.Qe(t))throw new TypeError("expected function");if(!h.Te(s)&&t!==s)throw new TypeError("expected same function reference")},h.eh=function(t){h.Te(t)},h.hh=function(...s){for(let t of s);},h.rh=function(s,...i){if(!h.Qe(s))throw new TypeError("expected function");if(!i.length)throw new Error("missing comparison functions");for(let t of i)if(!h.Te(t)&&s===t)return;throw new TypeError("expected same function reference")},h.nh=function(...s){if(!h.Te(s))for(let t of s);},h.oh=function(t,s){return t instanceof s},h.ah=function(s,...i){for(let t of i)if(h.oh(s,t))return!0;return!1},h.uh=function(t,s){if(!h.oh(t,s))throw new TypeError("unexpected type")},h.fh=function(t,s){h.Te(t)},h.dh=function(t,...s){for(let t of s);},h.ph=function(t,...s){if(!h.ah(t,...s))throw new TypeError("unexpected type")},h.mh=function(t,...s){if(!h.Te(t)&&!h.ah(t,...s))throw new TypeError("unexpected type")},h.gh=function(s,i){for(let t of s)if(!h.oh(t,i))return!1;return!0},h.yh=function(s){for(let t of s)if(!h.ve(t))return!1;return!0},h.wh=function(s,t){for(let t of s);},h.Sh=function(s,t){if(!h.Te(s))for(let t of s);},h.bh=function(s,t){if(!h.Te(s))for(let t of s);},h.Mh=function(s){for(let t of s);},h.xh=function(s){if(!h.Te(s))for(let t of s);},h.Th=function(t,s){return!(h.Te(t)||!h.Ee(t.nodeName))&&(!s||h.Gh(t.nodeName,s))},h._h=function(t,s){if(h.Te(t)||!h.Ee(t.nodeName))throw new TypeError("expected DOM node");if(s&&!h.Gh(t.nodeName,s))throw new TypeError(`expected DOM '${s}' node`)},h.Ih=function(t,s){h.Te(t)},h.Ch=function(t,s){return!(h.Te(t)||!h.Ee(t.tagName))&&(!s||h.Gh(t.tagName,s))},h.Ph=function(t,s){if(h.Te(t)||!h.Ee(t.tagName))throw new TypeError("expected HTML element");if(s&&!h.Gh(t.tagName,s))throw new TypeError(`expected HTML '${s}' element`)},h.Eh=function(t,s){h.Te(t)},h.Ah=function(t){return h.Ch(t,"img")||h.Ch(t,"canvas")||h.Ch(t,"video")||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap},h.Rh=function(t){if(!h.Ah(t))throw new TypeError("expected drawable")},h.Fh=function(t){h.Te(t)},h.Oh=function(t){return t instanceof ImageData||h.Ah(t)},h.Dh=function(t){if(!h.Oh(t))throw new TypeError("expected drawable or image data")},h.kh=function(t){if(!h.Te(t)&&!h.Oh(t))throw new TypeError("expected drawable or image data")},h.Lh=function(t){return"string"==typeof t||h.HtmlString&&t instanceof h.HtmlString||t instanceof h.Nh},h.Bh=function(t){if(!h.Lh(t))throw new TypeError("expected string-like")},h.Wh=function(t){h.Te(t)},h.Vh=function(...s){for(let t of s);},h.jh=function(){throw new Error("must be overridden")},h.Hh=function(){throw new Error("not yet implemented")},h.Uh=function(t,...s){let i=t;if(void 0===i)return!1;for(let t of s){if(void 0===i[t])return!1;i=i[t]}return!0},h.Te=function(t){return null==t},h.Jh=function(s){let i=s[0].constructor;for(let t of s)if(t.constructor!==i)return!1;return i},h.qh=function(s,i){for(let t of s)if(!(t instanceof i))return!1;return!0},Object.getPrototypeOf(Uint8Array));h.Xh=function(t){return h.oh(t,gt)},h.Yh=function(t){},h.$h=function(t){h.Kh(t,gt)},h.Zh=function(t,...s){if(!h.Qh(t,...s))throw new TypeError("unexpected type")},h.Qh=function(t,...s){for(const i of s)if(h.je(t,i))return!0;return!1},h.Kh=function(t,s){if(!h.je(t,s))throw new TypeError("unexpected type")},h.je=function(t,s){for(;t=Object.getPrototypeOf(t);)if(t.constructor.name===s.name)return!0;return!1},mt.Me=h.Me,mt.xe=h.xe,mt.Ie=h.Ie,mt.Ce=h.Ce,mt.Ae=h.Ae,mt.Re=h.Re,mt.Ne=h.Ne,mt.Be=h.Be,mt.qe=h.qe,mt.Xe=h.Xe,mt.ih=h.ih,mt.eh=h.eh,mt.uh=h.uh,mt.fh=h.fh,mt.Te=h.Te}{let e=function(t,s){let i=p.getType(t),e=p.getType(s);return"null"===i||"null"===e||"undefined"!==i&&"undefined"!==e&&i===e},h=function(t){console.warn("[Defence] "+t+" @",p.we())},i=function(){if(f=-1,0<a.size||0<l.size){let t=new Set([...a.keys()].map(t=>p.ir(t))),s=[...t].join(",");console.warn("An object derived from DefendedBase was not protected with debugDefend(). This will disable some checks. See the coding guidelines! Possible affected class names: "+s),a.clear(),l.clear()}},r=function(s){let i=new Set;for(let t in s)i.add(t);return i},n=function(t,s){let i=r(s),e=d.get(t);if(e){let s=[];for(let t of e.values())i.has(t)?i.delete(t):s.push(t);p.er(s,[...i]),s.length&&console.warn(`[Defence] '${p.ir(t)}' constructor creates inconsistent properties: `+s.join(", "))}else d.set(t,i)};e,h,i,r,n;const p=self.Bs,yt=new Map;p.hr=function(t,s){console.log("%c"+t,"font-weight: bold; color:"+s)},p.rr=function(t,...s){yt.has(t)||yt.set(t,-1),-1===yt.get(t)&&yt.set(t,requestAnimationFrame(()=>{console.log("%c"+t,"font-weight: bold",...s),yt.set(t,-1)}))};let o,a=(p.nr=function(t){performance.mark(t),(o=o||new Map).has(t)||o.set(t,{current:0,total:0,lr:0,ur:1,toString:function(){return`${t} :: current => ${this.current.toPrecision(3)} :: average => ${this.lr.toPrecision(3)} :: calls => `+this.ur}})},p.cr=function(t){performance.measure("measure-"+t,t);const s=performance.getEntriesByName("measure-"+t)[0],i=o.get(t);i.current=s.duration,i.total+=i.current,i.lr=i.total/i.ur,console.log(i.toString()),i.ur++,performance.clearMarks(t),performance.clearMeasures("measure-"+t)},p.we=function(){return(new Error).stack},p.dr=function(){},p.cast=function(t,s){return t&&t instanceof s?t:null},p.ir=function(t){return void 0===t?"undefined":null===t?"null":"boolean"==typeof t?"<boolean>":p.Se(t)?"<number>":p.Ee(t)?"<string>":p.Je(t)?"<array>":"symbol"==typeof t?"<"+t.toString()+">":p.Qe(t)?t.name&&"Function"!==t.name?t.name:"<anonymous function>":"object"==typeof t?t.constructor&&t.constructor.name&&"Object"!==t.constructor.name?t.constructor.name:"<anonymous object>":"<unknown>"},p.getType=function(t){return null===t?"null":Array.isArray(t)?"array":typeof t},p.range=function*(s,i){if(!isFinite(Math.abs(s-i)))throw new Error("Invalid parameters");if(i<s)for(let t=s-1;t>=i;t--)yield t;else for(let t=s;t<i;t++)yield t},new Map),l=new Map,u=new WeakMap,c=new WeakMap;p.mr={};const wt=new Set(["then","splice"]);p.mr.get=function(t,s){return s in t||"symbol"==typeof s||wt.has(s)||h(`Accessed missing property '${s}' from defended object '${p.ir(t)}', returning undefined`),c.has(t)&&"symbol"!=typeof s&&!wt.has(s)&&h(`Accessed property '${s}' on a released object '${p.ir(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]},p.mr.set=function(t,s,i){return s in t||a.has(t)||h(`Set non-existent property '${s}' to '${i}' on defended object '${p.ir(t)}'`),e(t[s],i)||a.has(t)||h(`Set '${p.getType(t[s])}' property '${s}' to type '${p.getType(i)}' on defended object '${p.ir(t)}'`),c.has(t)&&h(`Set property '${s}' on a released object '${p.ir(t)}'
Object was originally released at: ${c.get(t)})
Call stack at access: `),t[s]=i,!0},p.mr.deleteProperty=function(t,s){throw new ReferenceError(`Cannot delete property '${s}' from defended object '${p.ir(t)}'`)},p.mr.defineProperty=function(t,s,i){throw new ReferenceError(`Cannot define property '${s}' on defended object '${p.ir(t)}'`)},p.mr.enumerate=function(t){throw new ReferenceError(`Cannot enumerate defended object '${p.ir(t)}'`)};let f=-1,d=(p.gr=class{constructor(){if(p.Ys&&p.Ji.he){let t=Object.create(new.target.prototype),s=new Proxy(t,p.mr);return a.set(t,s),l.set(s,t),u.set(s,t),-1===f&&(f=requestAnimationFrame(i)),s}}},p.yr=function(s){if(p.Ys&&p.Ji.he&&s instanceof p.gr){if(l.has(s)){let t=l.get(s);l.delete(s),a.delete(t)}return s}return p.isDebug?Object.seal(s):s},p.wr=function(t,...s){let i;try{i=new t(...s)}catch(t){throw l.clear(),a.clear(),t}return p.Ys&&n(t,i),p.yr(i)},p.Sr=function(t){let s=u.get(t);s&&c.set(s,p.we())},p.br=function(t){let s=u.get(t);return!!s&&!!c.get(s)},new Map);p.vr=class{constructor(t){this.Mr="",t&&this.start(t)}start(t){p.di&&(this.Mr=t,performance.mark(this.Mr+"-Start"))}end(){p.di&&(performance.mark(this.Mr+"-End"),performance.measure(this.Mr,this.Mr+"-Start",this.Mr+"-End"))}next(t){p.di&&(this.end(),this.Mr=t,performance.mark(this.Mr+"-Start"))}}}{let i=function(t){return 0===t&&1/t<0};i;const y=self.Bs,St=2*Math.PI,bt=Math.PI/180,vt=180/Math.PI,Mt=(y.wrap=function(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=(i=Math.floor(i))-s;if(0==e)return i;if(t<s){const h=i-(s-t)%e;return h===i?0:h}return s+(t-s)%e},y.Tr=function(t,s,i,e,h){const r=i-s;if(0==r&&0===e)return t;const n=h-e;return(t-s)*n/r+e},y.normalize=function(t,s,i){return s-i==0?1:(t-s)/(i-s)},y.Gr=function(t,s,i){return t<s?s:i<t?i:t},y._r=function(t){return(t%=St)<0&&(t+=St),t},y.Ir=function(t){return t*bt},y.Cr=function(t){return t*vt},y.Pr=function(t,s,i,e){return Math.hypot(i-t,e-s)},y.Er=function(t,s,i,e){const h=i-t,r=e-s;return h*h+r*r},y.Ar=function(t,s,i,e){return Math.atan2(e-s,i-t)},y.Rr=function(t,s){if(t===s)return 0;let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s),n=i*h+e*r;return 1<=n?0:n<=-1?Math.PI:Math.acos(n)},y.Fr=function(t,s,i){let e=Math.sin(t),h=Math.cos(t),r=Math.sin(s),n=Math.cos(s);return Math.acos(e*r+h*n)>i?0<h*r-e*n?y._r(t+i):y._r(t-i):y._r(s)},y.Or=function(t,s){let i=Math.sin(t),e=Math.cos(t),h=Math.sin(s),r=Math.cos(s);return e*h-i*r<=0},y.Dr=function(t,s,i,e=0){let h=y.Rr(t,s),r=St*e;return y.Or(s,t)?y._r(t+(h+r)*i):y._r(t-(h+r)*i)},y.kr=function(t,s,i,e=0){const h=y.Rr(t,s),r=St*e;return y.Or(s,t)?y._r(t+(h+r)*i):y._r(t+(St-h+r)*i)},y.Lr=function(t,s,i,e=0){const h=y.Rr(t,s),r=St*e;return y.Or(s,t)?y._r(t-(-St+h-r)*i):y._r(t-(h+r)*i)},y.Nr=function(t,s){const i=y.Rr(t,s);return y.Or(t,s)?y._r(s-i):y._r(s+i)},y.kt=function(t,s,i){return t+i*(s-t)},y.Br=function(t,s,i){return t===s?0:(i-t)/(s-t)},y.Wr=function(t,s,i,e,h){return y.kt(e,h,y.Br(t,s,i))},y.Vr=function(t,s,i,e){return y.kt(y.kt(t,s,e),y.kt(s,i,e),e)},y.jr=function(t,s,i,e,h){return y.kt(y.Vr(t,s,i,h),y.Vr(s,i,e,h),h)},y.Hr=function(t,s,i){return(t+s+(t-s)*Math.cos(i*Math.PI))/2},y.Ur=function(t){return 0<t&&0==(t-1&t)},y.zr=function(s){--s;for(let t=1;t<32;t<<=1)s|=s>>t;return s+1},y.Jr=function(t,s){return Math.round(t*s)/s},y.qr=function(t,s){return Math.floor(t*s)/s},y.Xr=function(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round(t*i)/i},y.Yr=function(t){return Math.floor(t)!==t&&t.toString().split(".")[1].length||0},y.toFixed=function(t,s){let i=t.toFixed(s),e=i.length-1;for(;0<=e&&"0"===i.charAt(e);--e);return 0<=e&&"."===i.charAt(e)&&--e,e<0?i:i.substr(0,e+1)},y.$r=function(t,s,i){return y.Gr(t,0,255)|y.Gr(s,0,255)<<8|y.Gr(i,0,255)<<16},1024),xt=16384,Tt=8191,Gt=(y.Kr=function(t,s,i,e){return t=y.Gr(Math.floor(1024*t),-8192,Tt),s=y.Gr(Math.floor(1024*s),-8192,Tt),i=y.Gr(Math.floor(1024*i),-8192,Tt),e=y.Gr(Math.floor(1023*e),0,1023),t<0&&(t+=xt),s<0&&(s+=xt),i<0&&(i+=xt),-(t*xt*xt*Mt+s*xt*Mt+i*Mt+e)},y.Zr=function(t,s,i){return y.Kr(t,s,i,1)},y.Qr=function(s){if(0<=s)return(255&s)/255;{let t=Math.floor(-s/(xt*xt*Mt));return t>Tt&&(t-=xt),t/1024}},y.tn=function(s){if(0<=s)return((65280&s)>>8)/255;{let t=Math.floor(-s%(xt*xt*Mt)/(xt*Mt));return t>Tt&&(t-=xt),t/1024}},y.sn=function(s){if(0<=s)return((16711680&s)>>16)/255;{let t=Math.floor(-s%(xt*Mt)/Mt);return t>Tt&&(t-=xt),t/1024}},y.hn=function(t){if(i(t))return 0;if(0<=t)return 1;{const s=Math.floor(-t%Mt);return s/1023}},y.rn=function(s,i){for(s=Math.floor(s),i=Math.floor(i);0!==i;){let t=i;i=s%i,s=t}return s},[[3,2],[4,3],[5,4],[5,3],[6,5],[14,9],[16,9],[16,10],[21,9]]);y.nn=function(i,e){if((i=Math.floor(i))===(e=Math.floor(e)))return[1,1];for(let s of Gt){let t=i/s[0]*s[1];if(Math.abs(e-t)<1)return s.slice(0);if(t=i/s[1]*s[0],Math.abs(e-t)<1)return[s[1],s[0]]}let t=y.rn(i,e);return[i/t,e/t]},y.an=function(t,s,i,e,h,r,n,o){const a=Math.min(t,i),l=Math.max(t,i),u=Math.min(h,n),c=Math.max(h,n);if(l<u||c<a)return!1;const f=Math.min(s,e),d=Math.max(s,e),p=Math.min(r,o),m=Math.max(r,o);if(d<p||m<f)return!1;const g=h-t+n-i,y=r-s+o-e,w=i-t,S=e-s,b=n-h,v=o-r,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},y.ln=function(t,s,i,e,h,r,n,o,a,l,u,c){const f=Math.min(a,u),d=Math.max(a,u);if(r<f||d<h)return!1;const p=Math.min(l,c),m=Math.max(l,c);if(o<p||m<n)return!1;const g=a-t+u-i,y=l-s+c-e,w=i-t,S=e-s,b=u-a,v=c-l,M=Math.abs(S*b-v*w),x=b*y-v*g;if(Math.abs(x)>M)return!1;const T=w*y-S*g;return Math.abs(T)<=M},y.un=function(t,s,i,e,h){const r=Math.min(t,i),n=Math.max(t,i),o=Math.min(s,e),a=Math.max(s,e),l=h.cn(),u=h.fn(),c=h.dn(),f=h.pn(),d=h.mn(),p=h.gn(),m=h.yn(),g=h.wn();return y.ln(t,s,i,e,r,n,o,a,l,u,c,f)||y.ln(t,s,i,e,r,n,o,a,c,f,d,p)||y.ln(t,s,i,e,r,n,o,a,d,p,m,g)||y.ln(t,s,i,e,r,n,o,a,m,g,l,u)},y.Sn=function(s,i,e,h,r){let n=Math.min(s,e),o=Math.max(s,e),a=Math.min(i,h),l=Math.max(i,h),u=0;for(let t=r.length-4;u<=t;u+=2)if(y.ln(s,i,e,h,n,o,a,l,r[u],r[u+1],r[u+2],r[u+3]))return!0;return y.ln(s,i,e,h,n,o,a,l,r[u],r[u+1],r[0],r[1])};y.bn=function(t,s,i,e,h,r,n,o){const a=i-t,l=e-s,u=n-h,c=o-r,f=a*c-l*u;if(0==f)return 2;const d=((s-e)*(n-t)+a*(o-s))/f;return 0<d&&d<1+1e-6?(c*(n-t)+(h-n)*(o-s))/f:2},y.vn=function(t,s,i,e,h,r,n,o,a){const l=(n-h)*a,u=(o-r)*a;return y.bn(t,s,i,e,h-l,r-u,n+l,o+u)},y.Mn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=a*f+l*d,y=u*u+c*c,w=u*f+c*d,S=1/(p*y-m*m),b=(y*g-m*w)*S,v=(p*w-m*g)*S;return 0<=b&&0<=v&&b+v<=1},y.xn=function(t,s,i,e,h,r,n,o){const a=h-i,l=r-e,u=n-i,c=o-e,f=t-i,d=s-e,p=a*a+l*l,m=a*u+l*c,g=u*u+c*c,y=f*a+d*l,w=f*u+d*c,S=p*g-m*m,b=(g*y-m*w)/S,v=(p*w-m*y)/S,M=1-b-v;return[M,b,v]},y.Tn=function(t,s,i,e,h,r,n,o,a,l,u,c){return[t*e+s*n+i*l,t*h+s*o+i*u,t*r+s*a+i*c]}}{let l=self.Bs,s=null,i="";if("undefined"!=typeof document){const _t=(s=document).querySelector("base");(i=_t&&_t.hasAttribute("href")?_t.getAttribute("href"):"")&&!(i=i.startsWith("/")?i.substr(1):i).endsWith("/")&&(i+="/")}l.Gn=function(){return i},l._n=function(){if(!s)return"";const t=s.location;return l.In(t.origin+t.pathname)+i},l.In=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return t;const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?"":t.substr(0,s+1)},l.Cn=function(t){if(!t.length)return t;if(t.endsWith("/")||t.endsWith("\\"))return"";const s=Math.max(t.lastIndexOf("/"),t.lastIndexOf("\\"));return-1===s?t:t.substr(s+1)},l.Pn=function(t){let s=t.lastIndexOf(".");return s<1?"":t.substr(s)},l.En=function(t,s){const i=t.lastIndexOf(".");return-1===i?t+"."+s:t.substr(0,i+1)+s},l.An=function(t){let s=t.lastIndexOf(".");return s<1?t:t.substr(0,s)},l.Rn=function(t){return t.replace(/\\/g,"/")},l.Fn=function(t,s){const i=t?l.Pn(t).slice(1):"";return s===i},l.On=function(t,s){let i,e;return l.Ve(t)&&(i=l.An(t.name)),l.Ee(t)&&(i=l.An(t)),l.Ve(s)&&(e=l.An(s.name)),l.Ee(s)&&(e=l.An(s)),i===e},l.Dn=function(t){t=l.Rn(t);let s=/^\w\:\//.exec(t),i=(s?(s=s[0],"/"!==(t=t.slice(3))[0]&&(t="/"+t)):s="",(t=1<(t=t.replace(/\/{2,}/g,"/")).length&&"/"===t.slice(-1)?t.slice(0,-1):t).lastIndexOf("/")+1),e="",h=t,r,n="";0<i&&(e=t.slice(0,i),h=t.slice(i));const o=(r=h).lastIndexOf("."),a=(0<o&&(n=h.slice(o),r=h.slice(0,-n.length)),s+e+h);return{dir:e,kn:h,name:r,root:s,ext:n,Ln:a}},l.Nn=function(i,e){return new Promise((t,s)=>{self.setTimeout(t,i,e)})},l.Bn=function(t){try{t()}catch(t){l.isDebug&&console.warn("Swallowed exception: ",t)}},l.Wn=function(){},l.Gh=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize().toLowerCase()===s.normalize().toLowerCase())},l.Vn=function(t,s){return"string"==typeof t&&"string"==typeof s&&(t===s||t.normalize()===s.normalize())},l.jn=function(t,s,i){t[i++]=s[0],t[i++]=s[1],t[i++]=s[2],t[i++]=s[3],t[i++]=s[4],t[i++]=s[5],t[i++]=s[6],t[i++]=s[7],t[i++]=s[8],t[i++]=s[9],t[i++]=s[10],t[i++]=s[11],t[i++]=s[12],t[i++]=s[13],t[i++]=s[14],t[i]=s[15]},l.Hn=function(t,s){t.length=s},l.Un=function(t){t&&0!==t.length&&l.Hn(t,0)},l.zn=function(i){if(i){for(let s=0;s<i.length;s++){let t=i[s];l.Hn(t,0)}l.Hn(i,0)}},l.Jn=function(s,i,e){const h=s.length;if(!((i|=0)<=h))for(let t=h;t<i;++t)s.push(e)},l.qn=function(t,s,i){const e=t.length;(s|=0)<e?l.Hn(t,s):e<s&&l.Jn(t,s,i)},l.Xn=function(t,s){l.Un(t),l.er(t,s)},l.er=function(i,e){if(e.length<1e4)i.push(...e);else for(let t=0,s=e.length;t<s;++t)i.push(e[t])},l.Yn=function(i,e){if(!((e=Math.floor(e))<0||e>=i.length)){let s=i.length-1;for(let t=e;t<s;++t)i[t]=i[t+1];l.Hn(i,s)}},l.$n=function(t,s){let i=t.indexOf(s);0<=i&&t.splice(i,1)},l.Kn=function(s,i){let e=s.length;if(i.length!==e)return!1;for(let t=0;t<e;++t)if(s[t]!==i[t])return!1;return!0},l.Zn=function(i,e){let h=[],r=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e(t)?h.push(t):(i[r]=t,++r)}return l.Hn(i,r),h},l.Qn=function(i,e){let t=i.length,h=0;for(let s=0,t=i.length;s<t;++s){let t=i[s];e.has(t)||(i[h++]=t)}return l.Hn(i,h),t-h},l.io=function(t,s){return t===Math.floor(t)&&0<=t&&t<s.length},l.eo=function(t,s){if(!l.io(t,s))throw new RangeError("array index out of bounds")},l.ho=function(t){return t.slice()},l.ro=function(t,i){let e=[];for(let s of t)if(l.Le(s)){let t=i(s);if(!t)throw new Error("missing clone");if(t.constructor!==s.constructor)throw new Error("object is not a clone");e.push(t)}else l.Je(s)?e.push(l.ro(s,i)):e.push(s);return e},l.no=function(s){let i=[];for(let t of s)i.push(t.slice());return i},l.ao=function(t,s=" "){return t?t.split(s).map(t=>t.trim()).filter(t=>!!t):[]},l.lo=function(t,s,i){const e=new Set;for(const h of t.values())s(h)&&(i?e.add(i(h)):e.add(h));return e},l.uo=function(t,s){return t.union?t.union(s):new Set([...t,...s])},l.co=function(t,s){for(const i of s)t.add(i);return t},l.first=function(s){for(let t of s)return t;return null},l.xor=function(t,s){return!t!=!s},l.compare=function(t,s,i){switch(s){case 0:return t===i;case 1:return t!==i;case 2:return t<i;case 3:return t<=i;case 4:return i<t;case 5:return i<=t;default:return!1}},l.do=function(s){for(let t in s)if(s.hasOwnProperty(t))return!0;return!1},l.po=function(o,a){return o.length?new Promise((i,e)=>{let h=[],r=0,n=!1;for(let s=0,t=o.length;s<t;++s)h.push(void 0),o[s].then(t=>{n||(h[s]=t,++r===o.length?i(h):a(r,o.length))}).catch(t=>{n=!0,e(t)})}):Promise.resolve([])};let e=[],h=(l.yo=function(t){e.push(t)},l.wo=function(){let i=0;for(let s of e){let t=s();i+=t}return Math.floor(i)},1),r=new Map,n=new MessageChannel,o=(n.port2.onmessage=function(t){const s=t.data,i=r.get(s);r.delete(s),i&&i(performance.now())},l.So=function(t){const s=h++;return r.set(s,t),n.port1.postMessage(s),s},l.bo=function(t){r.delete(t)},l.vo=l.So,l.Mo=function(){return new Promise(t=>l.vo(t))},new Set);l.xo=function(s){const i=self.requestAnimationFrame(async t=>{await l.Mo(),o.has(i)&&(o.delete(i),s(t))});return o.add(i),i},l.To=function(t){o.has(t)&&(self.cancelAnimationFrame(t),o.delete(t))}}{const r=self.Bs;r.Go=function(t){return/^(?:[a-z\-]+:)?\/\//.test(t)||"data:"===t.substr(0,5)||"blob:"===t.substr(0,5)},r._o=function(t){return!r.Go(t)},r.Io=function(t){if(!t.ok)throw new Error(`fetch '${t.url}' response returned ${t.status} `+t.statusText)},r.Co=function(t,s){return fetch(t,s).then(t=>(r.Io(t),t))},r.Po=function(t){return r.Co(t).then(t=>t.text())},r.Eo=function(t){return r.Co(t).then(t=>t.json())},r.Ao=function(t){return r.Co(t).then(t=>t.blob())},r.Ro=function(t){return r.Co(t).then(t=>t.arrayBuffer())},r.Fo=function(e){return new Promise((t,s)=>{const i=new Image;i.onload=()=>t(i),i.onerror=t=>s(t),i.src=e})},r.Oo=function(e){return"function"==typeof e.arrayBuffer?e.arrayBuffer():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsArrayBuffer(e)})},r.Do=function(e){return"function"==typeof e.text?e.text():new Promise((t,s)=>{const i=new FileReader;i.onload=()=>t(i.result),i.onerror=()=>s(i.error),i.readAsText(e)})},r.ko=function(t){return r.Do(t).then(t=>JSON.parse(t))},r.Lo=async function(t,s){let i=URL.createObjectURL(t);try{const e=await r.Fo(i);return URL.revokeObjectURL(i),i="",s&&"function"==typeof e.decode&&await e.decode(),e}finally{i&&URL.revokeObjectURL(i)}},r.No=function(t,s){if("undefined"==typeof document||"function"!=typeof document.createElement)return new OffscreenCanvas(t,s);{const i=document.createElement("canvas");return i.width=t,i.height=s,i}},r.Bo=function(s,i,e){if("number"!=typeof e&&(e=1),i=i||"image/png",e=r.Gr(e,0,1),s.convertToBlob)return s.convertToBlob({type:i,quality:e});if(s.toBlob)return new Promise(t=>s.toBlob(t,i,e));throw new Error("could not convert canvas to blob")},r.Wo=function(t,s,i){const e=r.No(t.width,t.height),h=e.getContext("2d");return h.drawImage(t,0,0),r.Bo(e,s,i)},r.Vo=function(t,s,i){if(r.Ji.ImageBitmapOptions)return createImageBitmap(t,{premultiplyAlpha:"none"}).then(t=>r.Wo(t,s,i));if(r.Ji.ImageBitmap)return createImageBitmap(t).then(t=>r.Wo(t,s,i));{const e=r.No(t.width,t.height),h=e.getContext("2d");return h.putImageData(t,0,0),r.Bo(e,s,i)}},r.jo=function(t,s){t.clear();for(const i of s)t.add(i)},r.Ho=function(t){const s=Object.create(null);for(const[i,e]of t.entries())s[i]=e;return s},r.Uo=function(t,s){s.clear();for(const[i,e]of Object.entries(t))s.set(i,e)},r.zo=function s(t){if("object"!=typeof t||null===t)return t;if(t instanceof Set)return{_c3type_:"set",data:[...t].map(t=>s(t))};if(t instanceof Map)return{_c3type_:"map",data:[...t].map(t=>[t[0],s(t[1])])};{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}},r.Jo=function s(t){if("object"==typeof t&null!==t){if("set"===t._c3type_)return new Set(t.data.map(t=>s(t)));if("map"===t._c3type_)return new Map(t.data.map(t=>[t[0],s(t[1])]));{const i=Object.create(null);for(const[e,h]of Object.entries(t))i[e]=s(h);return i}}return t},r.qo=function(t){if(t.startsWith("--"))return t;let s="",i=!1,e=0;for(const h of t)"-"===h?0<e&&(i=!0):i?(s+=h.toUpperCase(),i=!1):s+=h,++e;return s},r.Xo=function(t){return"object"==typeof t&&"function"==typeof t.next},r.Yo=function(s,i){const e=[];if("function"==typeof i)for(let t=0;t<s;++t)e.push(i());else for(let t=0;t<s;++t)e.push(i);return e}}{let e=function(t){return 0===t.length?"00":1===t.length?"0"+t:t},l=function(t,s,i){return i<0&&(i+=1),1<i&&--i,i<1/6?t+6*(s-t)*i:i<.5?s:i<2/3?t+(s-t)*(2/3-i)*6:t};e,l;const u=self.Bs,It=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?/i,Ct=/([0-9.]+),([0-9.]+)\%?,([0-9.]+)\%?,([0-9.])/i;u.$o=class{constructor(t,s,i,e){this.Ko=NaN,this.Zo=NaN,this.Qo=NaN,this.ta=NaN,this.Ko=0,this.Zo=0,this.Qo=0,this.ta=0,t instanceof u.$o?this.set(t):this.ea(t||0,s||0,i||0,e||0)}ra(t,s,i){return this.Ko=+t,this.Zo=+s,this.Qo=+i,this.Gr(),this}ea(t,s,i,e){return this.Ko=+t,this.Zo=+s,this.Qo=+i,this.ta=+e,this.Gr(),this}set(t){return this.Ko=t.Ko,this.Zo=t.Zo,this.Qo=t.Qo,this.ta=t.ta,this}_(t){return this.set(t)}add(t){this.Ko+=t.Ko,this.Zo+=t.Zo,this.Qo+=t.Qo,this.ta+=t.ta,this.Gr()}na(t,s,i,e=0){this.Ko+=+t,this.Zo+=+s,this.Qo+=+i,this.ta+=+e,this.Gr()}oa(t){this.aa(Math.max(this.Ko,t.Ko)-Math.min(this.Ko,t.Ko)),this.la(Math.max(this.Zo,t.Zo)-Math.min(this.Zo,t.Zo)),this.ua(Math.max(this.Qo,t.Qo)-Math.min(this.Qo,t.Qo)),this.ca(Math.max(this.ta,t.ta)-Math.min(this.ta,t.ta)),this.Gr()}fa(t){this.Ko=t.Ko,this.Zo=t.Zo,this.Qo=t.Qo}aa(t){this.Ko=u.Gr(+t,0,1)}da(){return this.Ko}la(t){this.Zo=u.Gr(+t,0,1)}pa(){return this.Zo}ua(t){this.Qo=u.Gr(+t,0,1)}ya(){return this.Qo}ca(t){this.ta=u.Gr(+t,0,1)}wa(){return this.ta}clone(){return u.wr(u.$o,this.Ko,this.Zo,this.Qo,this.ta)}toArray(){return[this.Ko,this.Zo,this.Qo,this.ta]}Sa(){return new Float64Array(this.toArray())}ba(t,s){t[s++]=this.Ko,t[s++]=this.Zo,t[s++]=this.Qo,t[s]=this.ta}Ma(t,s){t[s++]=this.Ko,t[s++]=this.Zo,t[s]=this.Qo}equals(t){return this.Ko===t.Ko&&this.Zo===t.Zo&&this.Qo===t.Qo&&this.ta===t.ta}xa(t){return this.Ko===t.Ko&&this.Zo===t.Zo&&this.Qo===t.Qo}Ta(t,s,i){return this.Ko===t&&this.Zo===s&&this.Qo===i}Ga(t,s,i,e){return this.Ko===t&&this.Zo===s&&this.Qo===i&&this.ta===e}_a(t,s){return t[s]===Math.fround(this.Ko)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Qo)&&t[s+3]===Math.fround(this.ta)}Ia(t,s){return t[s]===Math.fround(this.Ko)&&t[s+1]===Math.fround(this.Zo)&&t[s+2]===Math.fround(this.Qo)}multiply(t){this.Ko*=t.Ko,this.Zo*=t.Zo,this.Qo*=t.Qo,this.ta*=t.ta}Ca(t){this.Ko*=t,this.Zo*=t,this.Qo*=t,this.ta*=t}Pa(){return this.Ko*=this.ta,this.Zo*=this.ta,this.Qo*=this.ta,this}Ea(){return this.Ko/=this.ta,this.Zo/=this.ta,this.Qo/=this.ta,this}Gr(){return this.Ko=u.Gr(this.Ko,0,1),this.Zo=u.Gr(this.Zo,0,1),this.Qo=u.Gr(this.Qo,0,1),this.ta=u.Gr(this.ta,0,1),this}Aa(t){this.Ko=u.Qr(t),this.Zo=u.tn(t),this.Qo=u.sn(t),this.ta=u.hn(t)}Ra(t,s,i){const e=u.ve(t)?t:this.da(),h=u.ve(s)?s:this.pa(),r=u.ve(i)?i:this.ya();return`rgb(${100*e}%, ${100*h}%, ${100*r}%)`}Fa(t,s,i,e){const h=u.ve(t)?t:this.da(),r=u.ve(s)?s:this.pa(),n=u.ve(i)?i:this.ya(),o=u.ve(e)?e:this.wa();return`rgba(${100*h}%, ${100*r}%, ${100*n}%, ${o})`}Oa(){const t=Math.round(255*this.da()),s=Math.round(255*this.pa()),i=Math.round(255*this.ya());return"#"+e(t.toString(16))+e(s.toString(16))+e(i.toString(16))}Da(t){if("string"!=typeof t)return!1;let s,i,e;if(3===(t="#"===(t=t.trim()).charAt(0)?t.substr(1):t).length)s=parseInt(t[0],16)/15,i=parseInt(t[1],16)/15,e=parseInt(t[2],16)/15;else{if(6!==t.length)return!1;s=parseInt(t.substr(0,2),16)/255,i=parseInt(t.substr(2,2),16)/255,e=parseInt(t.substr(4,2),16)/255}return isFinite(s)&&this.aa(s),isFinite(i)&&this.la(i),isFinite(e)&&this.ua(e),this.ca(1),!0}ka(){const t=Math.round(255*this.da()),s=Math.round(255*this.pa()),i=Math.round(255*this.ya());return t+`, ${s}, `+i}La(){const t=Math.round(255*this.da()),s=Math.round(255*this.pa()),i=Math.round(255*this.ya());return[t,s,i]}Na(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255;return isFinite(i)&&this.aa(i),isFinite(e)&&this.la(e),isFinite(h)&&this.ua(h),this.ca(1),!0}Ba(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgb\(|\)|%/,"")).split(",");if(s.length<3)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100;return isFinite(i)&&this.aa(i),isFinite(e)&&this.la(e),isFinite(h)&&this.ua(h),this.ca(1),!0}Wa(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/255,e=parseInt(s[1].trim(),10)/255,h=parseInt(s[2].trim(),10)/255,r=parseFloat(s[3].trim());return isFinite(i)&&this.aa(i),isFinite(e)&&this.la(e),isFinite(h)&&this.ua(h),isFinite(r)&&this.ca(r),!0}Va(t){if("string"!=typeof t)return!1;const s=(t=t.replace(/^rgba\(|\)|%/,"")).split(",");if(s.length<4)return!1;const i=parseInt(s[0].trim(),10)/100,e=parseInt(s[1].trim(),10)/100,h=parseInt(s[2].trim(),10)/100,r=parseFloat(s[3].trim());return isFinite(i)&&this.aa(i),isFinite(e)&&this.la(e),isFinite(h)&&this.ua(h),isFinite(r)&&this.ca(r),!0}ja(t){if("string"!=typeof t)return!1;if((t=t.replace(/\s+/,"")).includes(",")){if(t.startsWith("rgb("))return t.includes("%")?this.Ba(t):this.Na(t);if(t.startsWith("rgba("))return t.includes("%")?this.Va(t):this.Wa(t);if(t.startsWith("hsl(")||t.startsWith("hsla("))return this.Ha(t);{const s=t.split(",");return t.includes("%")?3===s.length?this.Ba(t):4===s.length&&this.Va(t):3===s.length?this.Na(t):4===s.length&&this.Wa(t)}}return this.Da(t)}toJSON(){return[this.Ko,this.Zo,this.Qo,this.ta]}Ua(t,s,i,e){let h,r,n;if(t%=360,s=u.Gr(s,0,100),i=u.Gr(i,0,100),e=u.Gr(e,0,1),t/=360,i/=100,0==(s/=100))h=r=n=i;else{const o=i<.5?i*(1+s):i+s-i*s,a=2*i-o;h=l(a,o,t+1/3),r=l(a,o,t),n=l(a,o,t-1/3)}return this.aa(h),this.la(r),this.ua(n),this.ca(e),this}Ha(t){const s=t.replace(/ |hsl|hsla|\(|\)|;/gi,""),i=It.exec(s),e=Ct.exec(s);return i&&4===i.length?(this.Ua(+i[1],+i[2],+i[3],1),!0):!(!e||5!==e.length||(this.Ua(+i[1],+i[2],+i[3],+i[4]),0))}za(){const t=this.Ko,s=this.Zo,i=this.Qo,e=this.ta,h=u.$o.Ja(t,s,i),r=u.$o.qa(t,s,i),n=u.$o.Xa(t,s,i);return`hsla(${h}, ${r}%, ${n}%, ${e})`}Ya(){const t=this.Ko,s=this.Zo,i=this.Qo;return[u.$o.Ja(t,s,i),u.$o.qa(t,s,i),u.$o.Xa(t,s,i),this.ta]}$a(t){!Array.isArray(t)||t.length<3||(this.Ko=t[0],this.Zo=t[1],this.Qo=t[2],this.ta=4<=t.length?t[3]:1)}set r(t){this.aa(t)}get r(){return this.da()}set g(t){this.la(t)}get g(){return this.pa()}set b(t){this.ua(t)}get b(){return this.ya()}set a(t){this.ca(t)}get a(){return this.wa()}Ka(t,s){switch(t){case 0:this.aa(s);break;case 1:this.la(s);break;case 2:this.ua(s);break;case 3:this.ca(s);break;default:throw new RangeError("invalid color index")}}Za(t){switch(t){case 0:return this.da();case 1:return this.pa();case 2:return this.ya();case 3:return this.wa();default:throw new RangeError("invalid color index")}}static Qa(t,s){let i,e;if(Array.isArray(t))(i=new u.$o).$a(t);else{if(!(t instanceof u.$o))throw new Error("unexpected type");i=t}if(Array.isArray(s))(e=new u.$o).$a(s);else{if(!(s instanceof u.$o))throw new Error("unexpected type");e=s}return i.equals(e)}static tl(t,s){return u.Gr(Math.max(t,s)-Math.min(t,s),0,1)}static sl(t,s){const i=new u.$o;return i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.la(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.ua(Math.max(t.Qo,s.Qo)-Math.min(t.Qo,s.Qo)),i.ca(Math.max(t.ta,s.ta)-Math.min(t.ta,s.ta)),i}static il(t,s){const i=new u.$o(0,0,0,1);return i.aa(Math.max(t.Ko,s.Ko)-Math.min(t.Ko,s.Ko)),i.la(Math.max(t.Zo,s.Zo)-Math.min(t.Zo,s.Zo)),i.ua(Math.max(t.Qo,s.Qo)-Math.min(t.Qo,s.Qo)),i}static Ja(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;let r=0;switch(e){case t:r=(s-i)/(e-h)+(s<i?6:0);break;case s:r=(i-t)/(e-h)+2;break;case i:r=(t-s)/(e-h)+4}return Math.round(r/6*360)}static qa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i);if(e===h)return 0;const r=(e+h)/2,n=e-h,o=.5<r?n/(2-e-h):n/(e+h);return Math.round(100*o)}static Xa(t,s,i){const e=Math.max(t,s,i),h=Math.min(t,s,i),r=(e+h)/2;return e?Math.round(100*r):0}},u.$o.el=Object.freeze(u.wr(u.$o,1,1,1,1)),u.$o.hl=Object.freeze(u.wr(u.$o,0,0,0,1)),u.$o.rl=Object.freeze(u.wr(u.$o,0,0,0,0))}{const Pt=self.Bs;Pt.nl=class{constructor(t,s){this.ol=0,this.al=0,t instanceof Pt.nl?this._(t):this.set(t||0,s||0)}set(t,s){this.ol=+t,this.al=+s}_(t){this.ol=t.ol,this.al=t.al}equals(t){return this.ol===t.ol&&this.al===t.al}ll(t,s){return this.ol===t&&this.al===s}_a(t,s){return t[s]===Math.fround(this.ol)&&t[s+1]===Math.fround(this.al)}ul(t){this.ol=+t}cl(){return this.ol}fl(t){this.al=+t}dl(){return this.al}toArray(){return[this.ol,this.al]}Sa(){return new Float64Array(this.toArray())}ba(t,s){t[s++]=this.ol,t[s]=this.al}offset(t,s){this.ol+=+t,this.al+=+s}scale(t,s){this.ol*=t,this.al*=s}Ct(t,s){this.ol/=t,this.al/=s}round(){this.ol=Math.round(this.ol),this.al=Math.round(this.al)}floor(){this.ol=Math.floor(this.ol),this.al=Math.floor(this.al)}ceil(){this.ol=Math.ceil(this.ol),this.al=Math.ceil(this.al)}angle(){return Pt.Ar(0,0,this.ol,this.al)}pl(){return this.ol*this.ol+this.al*this.al}length(){return Math.hypot(this.ol,this.al)}gl(t,s){const i=this.ol*s-this.al*t;this.al=this.al*s+this.ol*t,this.ol=i}rotate(t){0!==t&&this.gl(Math.sin(t),Math.cos(t))}yl(t,s,i){0===t||s===this.ol&&i===this.al||(this.ol-=s,this.al-=i,this.gl(Math.sin(t),Math.cos(t)),this.ol+=+s,this.al+=+i)}move(t,s){0!==s&&(this.ol+=Math.cos(t)*s,this.al+=Math.sin(t)*s)}normalize(){const t=this.length();0!==t&&1!==t&&(this.ol/=t,this.al/=t)}Gr(t,s){this.ol=Pt.Gr(this.ol,t,s),this.al=Pt.Gr(this.al,t,s)}Ot(t){return this.ol*t.ol+this.al*t.al}reverse(){this.ol=-this.ol,this.al=-this.al}wl(){let t=this.ol;return this.ol=this.al,this.al=-t,this}}}{const Et=self.Bs;Et.Rect=class{constructor(t,s,i,e){this.Sl=NaN,this.bl=NaN,this.vl=NaN,this.Ml=NaN,this.Sl=0,this.bl=0,this.vl=0,this.Ml=0,t instanceof Et.Rect?this._(t):this.set(t||0,s||0,i||0,e||0)}set(t,s,i,e){this.Sl=+t,this.bl=+s,this.vl=+i,this.Ml=+e}xl(t,s,i,e){s=+s,this.Sl=t=+t,this.bl=s,this.vl=t+ +i,this.Ml=s+ +e}_(t){this.Sl=+t.Sl,this.bl=+t.bl,this.vl=+t.vl,this.Ml=+t.Ml}clone(){return new Et.Rect(this.Sl,this.bl,this.vl,this.Ml)}static Tl(t,s){const i=new Et.Rect;return i.Gl(Math.min(t.Sl,s.Sl)),i._l(Math.min(t.bl,s.bl)),i.Il(Math.max(t.vl,s.vl)),i.Cl(Math.max(t.Ml,s.Ml)),i}static Pl(t){return new Et.Rect(t.left,t.top,t.right,t.bottom)}equals(t){return this.Sl===t.Sl&&this.bl===t.bl&&this.vl===t.vl&&this.Ml===t.Ml}El(t,s,i,e){return this.Sl===t&&this.bl===s&&this.width()===i&&this.height()===e}_a(t,s){return t[s]===Math.fround(this.Sl)&&t[s+1]===Math.fround(this.bl)&&t[s+2]===Math.fround(this.vl)&&t[s+3]===Math.fround(this.Ml)}Gl(t){this.Sl=+t}Al(){return this.Sl}_l(t){this.bl=+t}Rl(){return this.bl}Il(t){this.vl=+t}Fl(){return this.vl}Cl(t){this.Ml=+t}Ol(){return this.Ml}toArray(){return[this.Sl,this.bl,this.vl,this.Ml]}Sa(){return new Float64Array(this.toArray())}Dl(){return new DOMRect(this.Sl,this.bl,this.width(),this.height())}static kl(t){return Et.wr(Et.Rect,t.left,t.top,t.right,t.bottom)}ba(t,s){t[s++]=this.Sl,t[s++]=this.bl,t[s++]=this.vl,t[s]=this.Ml}Ll(t,s){t[s++]=this.Sl,t[s++]=this.bl,t[s++]=this.vl,t[s++]=this.bl,t[s++]=this.vl,t[s++]=this.Ml,t[s++]=this.Sl,t[s]=this.Ml}Nl(t,s,i){t[s++]=this.Sl,t[s++]=this.bl,t[s++]=i,t[s++]=this.vl,t[s++]=this.bl,t[s++]=i,t[s++]=this.vl,t[s++]=this.Ml,t[s++]=i,t[s++]=this.Sl,t[s++]=this.Ml,t[s]=i}width(){return this.vl-this.Sl}height(){return this.Ml-this.bl}Bl(){return(this.Sl+this.vl)/2}Wl(){return(this.bl+this.Ml)/2}offset(t,s){s=+s,this.Sl+=t=+t,this.bl+=s,this.vl+=t,this.Ml+=s}offsetLeft(t){this.Sl+=+t}offsetTop(t){this.bl+=+t}Vl(t){this.vl+=+t}jl(t){this.Ml+=+t}Hl(t){if("x"!==t)throw new Error("invalid axis, only 'x' supported");this.bl<this.Ml?this.Sl<this.vl?this.Ml=this.bl+this.width():this.Ml=this.bl-this.width():this.Sl<this.vl?this.Ml=this.bl-this.width():this.Ml=this.bl+this.width()}Ul(t,s){s=+s,this.Sl-=t=+t,this.bl-=s,this.vl+=t,this.Ml+=s}zl(t,s){s=+s,this.Sl+=t=+t,this.bl+=s,this.vl-=t,this.Ml-=s}multiply(t,s){this.Sl*=t,this.bl*=s,this.vl*=t,this.Ml*=s}Ct(t,s){this.Sl/=t,this.bl/=s,this.vl/=t,this.Ml/=s}Jl(t){this.Sl=+t-this.Sl,this.vl=+t-this.vl}ql(t){this.bl=+t-this.bl,this.Ml=+t-this.Ml}Xl(t,s){const i=this.width(),e=this.height(),h=this.Al()+i*t,r=this.Rl()+e*s;this.xl(h-e*s,r-i*t,e,i)}Yl(){const t=this.Sl;this.Sl=this.vl,this.vl=t}$l(){const t=this.bl;this.bl=this.Ml,this.Ml=t}Kl(t){const s=this.bl;this.bl=+t-this.Ml,this.Ml=+t-s}round(){this.Sl=Math.round(this.Sl),this.bl=Math.round(this.bl),this.vl=Math.round(this.vl),this.Ml=Math.round(this.Ml)}Zl(){this.Sl=Math.ceil(this.Sl),this.bl=Math.ceil(this.bl),this.vl=Math.floor(this.vl),this.Ml=Math.floor(this.Ml)}Ql(){this.Sl=Math.floor(this.Sl),this.bl=Math.floor(this.bl),this.vl=Math.ceil(this.vl),this.Ml=Math.ceil(this.Ml)}floor(){this.Sl=Math.floor(this.Sl),this.bl=Math.floor(this.bl),this.vl=Math.floor(this.vl),this.Ml=Math.floor(this.Ml)}ceil(){this.Sl=Math.ceil(this.Sl),this.bl=Math.ceil(this.bl),this.vl=Math.ceil(this.vl),this.Ml=Math.ceil(this.Ml)}Gr(t,s,i,e){this.Sl=Math.max(this.Sl,+t),this.bl=Math.max(this.bl,+s),this.vl=Math.min(this.vl,+i),this.Ml=Math.min(this.Ml,+e)}tu(t,s,i,e){t=+t,s=+s,i=+i,e=+e,this.Sl=Et.Gr(this.Sl,t,i),this.bl=Et.Gr(this.bl,s,e),this.vl=Et.Gr(this.vl,t,i),this.Ml=Et.Gr(this.Ml,s,e)}normalize(){this.Sl>this.vl&&this.Yl(),this.bl>this.Ml&&this.$l()}su(t){return!(t.vl<this.Sl||t.Ml<this.bl||t.Sl>this.vl||t.bl>this.Ml)}iu(t,s,i){return!(t.vl+s<this.Sl||t.Ml+i<this.bl||t.Sl+s>this.vl||t.bl+i>this.Ml)}eu(t,s){return t>=this.Sl&&t<=this.vl&&s>=this.bl&&s<=this.Ml}hu(t){return t.Sl>=this.Sl&&t.bl>=this.bl&&t.vl<=this.vl&&t.Ml<=this.Ml}ru(t){t.Sl<this.Sl&&(this.Sl=+t.Sl),t.bl<this.bl&&(this.bl=+t.bl),t.vl>this.vl&&(this.vl=+t.vl),t.Ml>this.Ml&&(this.Ml=+t.Ml)}nu(t){this.Sl=Et.kt(t.Sl,t.vl,this.Sl),this.bl=Et.kt(t.bl,t.Ml,this.bl),this.vl=Et.kt(t.Sl,t.vl,this.vl),this.Ml=Et.kt(t.bl,t.Ml,this.Ml)}}}{const At=self.Bs;At.ou=class{constructor(t,s,i,e,h,r,n,o){this.au=NaN,this.lu=NaN,this.uu=NaN,this.cu=NaN,this.fu=NaN,this.du=NaN,this.pu=NaN,this.mu=NaN,this.au=0,this.lu=0,this.uu=0,this.cu=0,this.fu=0,this.du=0,this.pu=0,this.mu=0,t instanceof At.ou?this._(t):this.set(t||0,s||0,i||0,e||0,h||0,r||0,n||0,o||0)}set(t,s,i,e,h,r,n,o){this.au=+t,this.lu=+s,this.uu=+i,this.cu=+e,this.fu=+h,this.du=+r,this.pu=+n,this.mu=+o}gu(t,s,i,e){this.set(t,s,i,s,i,e,t,e)}_(t){this.au=t.au,this.lu=t.lu,this.uu=t.uu,this.cu=t.cu,this.fu=t.fu,this.du=t.du,this.pu=t.pu,this.mu=t.mu}equals(t){return this.au===t.au&&this.lu===t.lu&&this.uu===t.uu&&this.cu===t.cu&&this.fu===t.fu&&this.du===t.du&&this.pu===t.pu&&this.mu===t.mu}yu(t){this.au=+t}cn(){return this.au}wu(t){this.lu=+t}fn(){return this.lu}Su(t){this.uu=+t}dn(){return this.uu}bu(t){this.cu=+t}pn(){return this.cu}vu(t){this.fu=+t}mn(){return this.fu}Mu(t){this.du=+t}gn(){return this.du}xu(t){this.pu=+t}yn(){return this.pu}Tu(t){this.mu=+t}wn(){return this.mu}Gu(){return new DOMQuad(new DOMPoint(this.au,this.lu),new DOMPoint(this.uu,this.cu),new DOMPoint(this.fu,this.du),new DOMPoint(this.pu,this.mu))}static _u(t){return At.wr(At.ou,t.p1.x,t.p1.y,t.p2.x,t.p2.y,t.p3.x,t.p3.y,t.p4.x,t.p4.y)}toArray(){return[this.au,this.lu,this.uu,this.cu,this.fu,this.du,this.pu,this.mu]}Sa(){return new Float64Array(this.toArray())}ba(t,s){t[s++]=this.au,t[s++]=this.lu,t[s++]=this.uu,t[s++]=this.cu,t[s++]=this.fu,t[s++]=this.du,t[s++]=this.pu,t[s]=this.mu}Iu(t,s,i){t[s++]=this.au,t[s++]=this.lu,t[s++]=i,t[s++]=this.uu,t[s++]=this.cu,t[s++]=i,t[s++]=this.fu,t[s++]=this.du,t[s++]=i,t[s++]=this.pu,t[s++]=this.mu,t[s]=i}offset(t,s){s=+s,this.au+=t=+t,this.lu+=s,this.uu+=t,this.cu+=s,this.fu+=t,this.du+=s,this.pu+=t,this.mu+=s}round(){this.au=Math.round(this.au),this.lu=Math.round(this.lu),this.uu=Math.round(this.uu),this.cu=Math.round(this.cu),this.fu=Math.round(this.fu),this.du=Math.round(this.du),this.pu=Math.round(this.pu),this.mu=Math.round(this.mu)}floor(){this.au=Math.floor(this.au),this.lu=Math.floor(this.lu),this.uu=Math.floor(this.uu),this.cu=Math.floor(this.cu),this.fu=Math.floor(this.fu),this.du=Math.floor(this.du),this.pu=Math.floor(this.pu),this.mu=Math.floor(this.mu)}ceil(){this.au=Math.ceil(this.au),this.lu=Math.ceil(this.lu),this.uu=Math.ceil(this.uu),this.cu=Math.ceil(this.cu),this.fu=Math.ceil(this.fu),this.du=Math.ceil(this.du),this.pu=Math.ceil(this.pu),this.mu=Math.ceil(this.mu)}Cu(t){this.au=t.Sl,this.lu=t.bl,this.uu=t.vl,this.cu=t.bl,this.fu=t.vl,this.du=t.Ml,this.pu=t.Sl,this.mu=t.Ml}Pu(t,s){0===s?this.Cu(t):this.Eu(t,Math.sin(s),Math.cos(s))}Eu(t,s,i){const e=t.Sl*s,h=t.bl*s,r=t.vl*s,n=t.Ml*s,o=t.Sl*i,a=t.bl*i,l=t.vl*i,u=t.Ml*i;this.au=o-h,this.lu=a+e,this.uu=l-h,this.cu=a+r,this.fu=l-n,this.du=u+r,this.pu=o-n,this.mu=u+e}Au(t){t.set(Math.min(this.au,this.uu,this.fu,this.pu),Math.min(this.lu,this.cu,this.du,this.mu),Math.max(this.au,this.uu,this.fu,this.pu),Math.max(this.lu,this.cu,this.du,this.mu))}eu(t,s){let i=this.uu-this.au,e=this.cu-this.lu,h=this.fu-this.au,r=this.du-this.lu,n=t-this.au,o=s-this.lu,a=i*i+e*e,l=i*h+e*r,u=i*n+e*o,c=h*h+r*r,f=h*n+r*o,d=1/(a*c-l*l),p=(c*u-l*f)*d,m=(a*f-l*u)*d;return 0<=p&&0<m&&p+m<1||(m=((a=(i=this.pu-this.au)*i+(e=this.mu-this.lu)*e)*f-(l=i*h+e*r)*(u=i*n+e*o))*(d=1/(a*c-l*l)),0<=(p=(c*u-l*f)*d)&&0<m&&p+m<1)}Bl(){return(this.au+this.uu+this.fu+this.pu)/4}Wl(){return(this.lu+this.cu+this.du+this.mu)/4}Ru(t,s,i,e){return!(!this.eu(t,s)&&!this.eu(i,e))||At.un(t,s,i,e,this)}Fu(t){let s=t.Bl(),i=t.Wl();if(this.eu(s,i))return!0;if(s=this.Bl(),i=this.Wl(),t.eu(s,i))return!0;const e=this.au,h=this.lu,r=this.uu,n=this.cu,o=this.fu,a=this.du,l=this.pu,u=this.mu;return At.un(e,h,r,n,t)||At.un(r,n,o,a,t)||At.un(o,a,l,u,t)||At.un(l,u,e,h,t)}Ou(){const t=this.au,s=this.lu;this.au=this.uu,this.lu=this.cu,this.uu=this.fu,this.cu=this.du,this.fu=this.pu,this.du=this.mu,this.pu=t,this.mu=s}Du(){this.ku(0,2),this.ku(1,3),this.ku(6,4),this.ku(7,5)}Lu(){this.ku(0,6),this.ku(1,7),this.ku(2,4),this.ku(3,5)}Nu(){this.ku(2,6),this.ku(3,7)}ku(t,s){const i=this.Bu(t);this.Wu(t,this.Bu(s)),this.Wu(s,i)}Bu(t){switch(t){case 0:return this.au;case 1:return this.lu;case 2:return this.uu;case 3:return this.cu;case 4:return this.fu;case 5:return this.du;case 6:return this.pu;case 7:return this.mu;default:throw new RangeError("invalid quad point index")}}Wu(t,s){switch(s=+s,t){case 0:this.au=s;break;case 1:this.lu=s;break;case 2:this.uu=s;break;case 3:this.cu=s;break;case 4:this.fu=s;break;case 5:this.du=s;break;case 6:this.pu=s;break;case 7:this.mu=s;break;default:throw new RangeError("invalid quad point index")}}}}{const Rt=self.Bs,Ft=[0,0,1,0,1,1,0,1],Ot=Rt.wr(Rt.ou);Rt.Vu=class extends Rt.gr{constructor(t,s=!0){super(),t=t||Ft,this.ju=Float64Array.from(t),this.Hu=new Rt.Rect,this.Uu=!0,this.zu=s}Sr(){}Ju(){return this.ju}qu(){return this.ju.length/2}Xu(t){this.ju.length===t.length?this.ju.set(t):this.ju=Float64Array.from(t),this.Uu=!0}Yu(){this.Xu(Ft)}_(t){this.Xu(t.ju)}$u(){this.Uu=!0}Ku(){if(this.Uu){let i=this.ju,e=i[0],h=i[1],r=e,n=h;for(let t=0,s=i.length;t<s;t+=2){const o=i[t],a=i[t+1];o<e&&(e=o),o>r&&(r=o),a<h&&(h=a),a>n&&(n=a)}this.Hu.set(e,h,r,n),this.Uu=!1}}Cu(t,s,i){let e=this.ju;8!==e.length&&(e=new Float64Array(8),this.ju=e),e[0]=t.Al()-s,e[1]=t.Rl()-i,e[2]=t.Fl()-s,e[3]=t.Rl()-i,e[4]=t.Fl()-s,e[5]=t.Ol()-i,e[6]=t.Al()-s,e[7]=t.Ol()-i,this.Hu._(t),0===s&&0===i||this.Hu.offset(-s,-i),this.Uu=!1}Zu(t,s,i){Ot._(t),Ot.offset(s,i),this.Xu(Ot.toArray()),this.Uu=!0}transform(t,s,i){let e=0,h=1;0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.Qu(t,s,e,h)}Qu(i,e,h,r){const n=this.ju;for(let t=0,s=n.length;t<s;t+=2){const o=t+1,a=n[t]*i,l=n[o]*e;n[t]=a*r-l*h,n[o]=l*r+a*h}this.Uu=!0}offset(i,e){const h=this.ju;for(let t=0,s=h.length;t<s;t+=2)h[t]+=i,h[t+1]+=e}eu(i,e){const h=this.ju;if(i===h[0]&&e===h[1])return!0;this.Ku();let t=this.Hu,r=t.Al()-110,n=t.Rl()-101,o=t.Fl()+131,a=t.Ol()+120,l=0,u=0,c,f,d=0,p=0,m,g,y=(c=r<i?(l=r,i):(l=i,r),f=n<e?(u=n,e):(u=e,n),m=o<i?(d=o,i):(d=i,o),g=a<e?(p=a,e):(p=e,a),0),w=0;for(let t=0,s=h.length;t<s;t+=2){const S=(t+2)%s,b=h[t],v=h[t+1],M=h[S],x=h[1+S];Rt.ln(r,n,i,e,l,c,u,f,b,v,M,x)&&++y,Rt.ln(o,a,i,e,d,m,p,g,b,v,M,x)&&++w}return y%2==1||w%2==1}tc(t,c,f){const d=t.ju,p=this.ju;if(this.eu(d[0]+c,d[1]+f))return!0;if(t.eu(p[0]-c,p[1]-f))return!0;for(let s=0,u=p.length;s<u;s+=2){let t=(s+2)%u,i=p[s],e=p[s+1],h=p[t],r=p[1+t],n=0,o=0,a,l;a=i<h?(n=i,h):(n=h,i),l=e<r?(o=e,r):(o=r,e);for(let t=0,s=d.length;t<s;t+=2){const m=(t+2)%s,g=d[t]+c,y=d[t+1]+f,w=d[m]+c,S=d[1+m]+f;if(Rt.ln(i,e,h,r,n,a,o,l,g,y,w,S))return!0}}return!1}Ru(i,e,h,r,n,o){if(this.eu(h-i,r-e))return!0;if(this.eu(n-i,o-e))return!0;let a=0,l=0,u,c;u=h<n?(a=h,n):(a=n,h),c=r<o?(l=r,o):(l=o,r);const f=this.ju;for(let t=0,s=f.length;t<s;t+=2){const d=(t+2)%s,p=f[t]+i,m=f[t+1]+e,g=f[d]+i,y=f[1+d]+e;if(Rt.ln(h,r,n,o,a,u,l,c,p,m,g,y))return!0}return!1}Du(i){const e=this.ju;for(let t=0,s=e.length;t<s;t+=2)e[t]=2*i-e[t];this.Uu=!0}Lu(i){const e=this.ju;for(let t=0,s=e.length;t<s;t+=2){const h=t+1;e[h]=2*i-e[h]}this.Uu=!0}Nu(){const i=this.ju;for(let t=0,s=i.length;t<s;t+=2){const e=t+1,h=i[t];i[t]=i[e],i[e]=h}this.Uu=!0}sc(){let i=this.ju,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t];return e/this.qu()}ic(){let i=this.ju,e=0;for(let t=0,s=i.length;t<s;t+=2)e+=i[t+1];return e/this.qu()}ec(){return this.ju}hc(){return this.qu()}rc(){return this.zu}}}{const Dt=self.Bs;Dt.nc=class extends Dt.gr{constructor(t){if(super(),this.oc=new Map,t)for(const[s,i,e]of t)this.Set(s,i,e)}Sr(){this.ac(),this.oc=null}lc(){return 0===this.oc.size}ac(){const t=this.oc;for(const s of t.values())s.clear();t.clear()}Set(t,s,i){let e=this.oc,h=e.get(t);h||(h=new Map,e.set(t,h)),h.set(s,i)}ni(t,s){const i=this.oc.get(t);return i&&i.get(s)}ri(t,s){const i=this.oc.get(t);return!!i&&i.has(s)}uc(t,s){const i=this.oc,e=i.get(t);if(!e)return!1;const h=e.delete(s);return h&&0===e.size&&i.delete(t),h}fc(t){const s=this.oc,i=s.get(t);i&&(i.clear(),s.delete(t));for(const[e,h]of s.entries())h.delete(t)&&0===h.size&&s.delete(e)}mc(){let t=0;for(const s of this.oc.values())t+=s.size;return t}*values(){for(const t of this.oc.values())yield*t.values()}*yc(){for(const[t,s]of this.oc.entries())for(const i of s.keys())yield[t,i]}*entries(){for(const[t,s]of this.oc.entries())for(const[i,e]of s.entries())yield[t,i,e]}}}{const kt=self.Bs;kt.wc=class extends kt.gr{constructor(){super(),this.Sc=new Set,this.vc=[],this.Mc=!1}Sr(){this.ac()}ac(){this.Sc.clear(),kt.Un(this.vc),this.Mc=!1}xc(t){this.Sc.has(t)||(this.Sc.add(t),this.Mc)||this.vc.push(t)}ri(t){return this.Sc.has(t)}uc(t){this.Sc.delete(t)&&(this.Mc=!0)}mc(){return this.Sc.size}lc(){return 0===this.Sc.size}Tc(){return this.Mc&&(this.Gc(),this.Mc=!1),this.vc}Gc(){const t=this.vc;kt.Un(t);for(const s of this.Sc)t.push(s)}}}{const Lt=self.Bs,Nt=new Map,Bt=new Map,Wt=new Map,Vt=new Map,jt=new Map,Ht=new Map,Ut=new Map,zt=new Map,Jt=new Map,qt=(Jt.set("linear","noease"),Jt.set("default","noease"),["default","noease","easeinquad","easeoutquad","easeinoutquad","easeincubic","easeoutcubic","easeinoutcubic","easeinquart","easeoutquart","easeinoutquart","easeinquint","easeoutquint","easeinoutquint","easeinsine","easeoutsine","easeinoutsine","easeinexpo","easeoutexpo","easeinoutexpo","easeincirc","easeoutcirc","easeinoutcirc","easeinelastic","easeoutelastic","easeinoutelastic","easeinback","easeoutback","easeinoutback","easeinbounce","easeoutbounce","easeinoutbounce"]),Xt=["default","noease","quad","cubic","quart","quint","sine","expo","circ","elastic","back","bounce"],Yt=new Map([["linear","noease"],["in-sine","easeinsine"],["out-sine","easeoutsine"],["in-out-sine","easeinoutsine"],["in-elastic","easeinelastic"],["out-elastic","easeoutelastic"],["in-out-elastic","easeinoutelastic"],["in-back","easeinback"],["out-back","easeoutback"],["in-out-back","easeinoutback"],["in-bounce","easeinbounce"],["out-bounce","easeoutbounce"],["in-out-bounce","easeinoutbounce"],["in-cubic","easeincubic"],["out-cubic","easeoutcubic"],["in-out-cubic","easeinoutcubic"],["in-quadratic","easeinquad"],["out-quadratic","easeoutquad"],["in-out-quadratic","easeinoutquad"],["in-quartic","easeinquart"],["out-quartic","easeoutquart"],["in-out-quartic","easeinoutquart"],["in-quintic","easeinquint"],["out-quintic","easeoutquint"],["in-out-quintic","easeinoutquint"],["in-circular","easeincirc"],["out-circular","easeoutcirc"],["in-out-circular","easeinoutcirc"],["in-exponential","easeinexpo"],["out-exponential","easeoutexpo"],["in-out-exponential","easeinoutexpo"]]),$t=(self._c=class hs{constructor(){}static Ic(){return"default"}static Cc(){return"noease"}static Pc(t){return Yt.get(t)}static Ec(s,...i){this.Ac();let t,e=(s?(Wt.has(s)||Wt.set(s,new Map),[...(t=Wt.get(s)).keys()].filter(t=>!hs.Rc(t,s)||hs.Rc(t,s).transition.IsForAnyPurpose())):[...(t=jt).keys()]).sort();return[...Bt.keys()].concat(e).filter(t=>!i.includes(t))}static Fc(){this.Ac();const t=[...jt.keys()];return t.sort(),[...Bt.keys()].concat(t)}static Oc(){this.Ac();const t=[...jt.keys()];return t.sort(),t}static Dc(t){for(const s of qt){const i=self.lang("ui.bars.timeline.eases."+s);if(i===t)return!0}for(const e of Xt){const h=self.lang("ui.bars.timeline.short-eases."+e);if(h===t)return!0}}static kc(t){return this.Ac(),[...Bt.keys()].includes(t)}static Lc(t){const s=Jt.get(t);return s?Nt.get(s):hs.kc(t)?Nt.get(t):Ut.has(t)?Ut.get(t):void 0}static Nc(t){return this.Ac(),zt.get(t)}static Bc(t,s){this.Ac();const i=hs.Lc(t);if(i)return i;if(s)return Wt.get(s).get(t);throw new Error("missing ease function")}static Rc(t,s){this.Ac();const i=Vt.get(s);if(i)return i.get(t)}static Wc(t,s){this.Ac();const i=hs.Lc(t);return!!i||!!Wt.get(s).get(t)}static Vc(t){this.Ac();const s=hs.Lc(t);return s||jt.get(t)}static jc(t){return this.Ac(),Ht.get(t)}static Hc(t){this.Ac();const s=this.Fc();return s[t]}static Uc(t,s){this.Ac();const i=this.Ec(s);return i.indexOf(t)}static zc(t){return this.Uc(t)}static Ac(){0===Nt.size&&(this.Jc("default",()=>{}),this.Jc("noease",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}],!0),this.Jc("easeinsine",[{x:0,y:0,sax:.485,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.038,eay:0,se:!1,ee:!0}]),this.Jc("easeoutsine",[{x:0,y:0,sax:.038,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.485,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutsine",[{x:0,y:0,sax:.336,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.336,eay:0,se:!1,ee:!0}]),this.Jc("easeinelastic",[{x:0,y:0,sax:.018,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.116,y:.002,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.266,y:-.005,sax:.024,say:0,eax:-.021,eay:0,se:!0,ee:!0},{x:.416,y:.016,sax:.024,say:0,eax:-.026,eay:0,se:!0,ee:!0},{x:.566,y:-.045,sax:.061,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.716,y:.132,sax:.072,say:-.004,eax:-.045,eay:0,se:!0,ee:!0},{x:.866,y:-.373,sax:.06,say:0,eax:-.049,eay:-.002,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.038,eay:-.263,se:!1,ee:!0}]),this.Jc("easeoutelastic",[{x:0,y:0,sax:.038,say:.263,eax:0,eay:0,se:!0,ee:!1},{x:.136,y:1.373,sax:.049,say:.002,eax:-.06,eay:0,se:!0,ee:!0},{x:.286,y:.868,sax:.045,say:0,eax:-.072,eay:.004,se:!0,ee:!0},{x:.436,y:1.045,sax:.025,say:0,eax:-.061,eay:0,se:!0,ee:!0},{x:.586,y:.984,sax:.026,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.736,y:1.005,sax:.021,say:0,eax:-.024,eay:0,se:!0,ee:!0},{x:.886,y:.998,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.018,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutelastic",[{x:0,y:0,sax:.025,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.067,y:.001,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.18,y:-.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.292,y:.025,sax:.053,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.405,y:-.118,sax:.069,say:0,eax:-.027,eay:0,se:!0,ee:!0},{x:.597,y:1.118,sax:.027,say:0,eax:-.069,eay:0,se:!0,ee:!0},{x:.71,y:.975,sax:.025,say:0,eax:-.053,eay:0,se:!0,ee:!0},{x:.822,y:1.005,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.935,y:.999,sax:.025,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.025,eay:0,se:!1,ee:!0}]),this.Jc("easeinback",[{x:0,y:0,sax:.35,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.34,eay:-1.579,se:!1,ee:!0}]),this.Jc("easeoutback",[{x:0,y:0,sax:.34,say:1.579,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.35,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutback",[{x:0,y:0,sax:.035,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.242,y:-.1,sax:.258,say:0,eax:-.025,eay:0,se:!0,ee:!0},{x:.76,y:1.1,sax:.025,say:0,eax:-.26,eay:0,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.035,eay:0,se:!1,ee:!0}]),this.Jc("easeinbounce",[{x:0,y:0,sax:.033,say:.025,eax:0,eay:0,se:!0,ee:!1},{x:.092,y:0,sax:.026,say:.078,eax:-.033,eay:.025,se:!0,ee:!0},{x:.274,y:0,sax:.097,say:.319,eax:-.026,eay:.078,se:!0,ee:!0},{x:.637,y:0,sax:.105,say:.625,eax:-.097,eay:.319,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:-.004,se:!1,ee:!0}]),this.Jc("easeoutbounce",[{x:0,y:0,sax:.125,say:.004,eax:0,eay:0,se:!0,ee:!1},{x:.365,y:1,sax:.097,say:-.319,eax:-.105,eay:-.625,se:!0,ee:!0},{x:.728,y:1,sax:.026,say:-.078,eax:-.097,eay:-.319,se:!0,ee:!0},{x:.91,y:1,sax:.033,say:-.025,eax:-.026,eay:-.078,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.033,eay:-.025,se:!1,ee:!0}]),this.Jc("easeinoutbounce",[{x:0,y:0,sax:.01,say:.006,eax:0,eay:0,se:!0,ee:!1},{x:.046,y:0,sax:.021,say:.038,eax:-.01,eay:.006,se:!0,ee:!0},{x:.137,y:0,sax:.059,say:.158,eax:-.021,eay:.038,se:!0,ee:!0},{x:.319,y:0,sax:.117,say:.744,eax:-.059,eay:.158,se:!0,ee:!0},{x:.683,y:1,sax:.059,say:-.158,eax:-.117,eay:-.744,se:!0,ee:!0},{x:.865,y:1,sax:.021,say:-.038,eax:-.059,eay:-.158,se:!0,ee:!0},{x:.956,y:1,sax:.01,say:-.006,eax:-.021,eay:-.038,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.01,eay:-.006,se:!1,ee:!0}]),this.Jc("easeincubic",[{x:0,y:0,sax:.75,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.138,eay:-.321,se:!1,ee:!0}]),this.Jc("easeoutcubic",[{x:0,y:0,sax:.138,say:.321,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.75,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutcubic",[{x:0,y:0,sax:.285,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.081,say:.272,eax:-.081,eay:-.272,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.285,eay:0,se:!1,ee:!0}]),this.Jc("easeinquad",[{x:0,y:0,sax:.4,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.178,eay:-.392,se:!1,ee:!0}]),this.Jc("easeoutquad",[{x:0,y:0,sax:.178,say:.392,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.4,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutquad",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.03,say:.065,eax:-.03,eay:-.065,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Jc("easeinquart",[{x:0,y:0,sax:.25,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.5,eay:0,se:!1,ee:!0}]),this.Jc("easeoutquart",[{x:0,y:0,sax:.5,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:-1,se:!1,ee:!0}]),this.Jc("easeinoutquart",[{x:0,y:0,sax:.765,say:.03,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.765,eay:-.03,se:!1,ee:!0}]),this.Jc("easeinquint",[{x:0,y:0,sax:.6,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.2,eay:-1,se:!1,ee:!0}]),this.Jc("easeoutquint",[{x:0,y:0,sax:.2,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.6,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutquint",[{eax:0,eay:0,ee:!1,sax:.84,say:0,se:!0,x:0,y:0},{eax:-.84,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.Jc("easeincirc",[{x:0,y:0,sax:.25,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.024,eay:-.808,se:!1,ee:!0}]),this.Jc("easeoutcirc",[{x:0,y:0,sax:.024,say:.808,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.25,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutcirc",[{x:0,y:0,sax:.125,say:0,eax:0,eay:0,se:!0,ee:!1},{x:.5,y:.5,sax:.02,say:.428,eax:-.02,eay:-.428,se:!0,ee:!0},{x:1,y:1,sax:0,say:0,eax:-.125,eay:0,se:!1,ee:!0}]),this.Jc("easeinexpo",[{x:0,y:0,sax:.66,say:0,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.14,eay:-1,se:!1,ee:!0}]),this.Jc("easeoutexpo",[{x:0,y:0,sax:.14,say:1,eax:0,eay:0,se:!0,ee:!1},{x:1,y:1,sax:0,say:0,eax:-.66,eay:0,se:!1,ee:!0}]),this.Jc("easeinoutexpo",[{eax:0,eay:0,ee:!1,sax:.345,say:0,se:!0,x:0,y:0},{eax:-.06,eay:-.5,ee:!0,sax:.06,say:.5,se:!0,x:.5,y:.5},{eax:-.335,eay:0,ee:!0,sax:0,say:0,se:!1,x:1,y:1}]),this.qc("cubicbezier",this.Xc),this.qc("spline",this.Yc))}static Jc(t,s,i=!1){if("function"==typeof s)hs.$c(t,s,"predefined");else{if(!Lt.Je(s))throw new Error("unexpected arguments");if(self.BuiltInTransition){const h=Lt.wr(self.BuiltInTransition,t,i);h.SetFromJson(s),hs.$c(t,(t,s,i,e)=>h.Kc(t,s,i,e),"predefined"),zt.set(t,h)}else{const r=Lt.wr(Lt.Zc,[t,s.map(t=>[t.x,t.y,t.sax,t.say,t.eax,t.eay,t.se,t.ee])],!1);r.Qc(i),hs.$c(t,(t,s,i,e)=>r.Kc(t,s,i,e),"predefined")}}}static qc(t,s){hs.$c(t,s,"private")}static tf(t,s,i,e){this.Ac(),hs.$c(t,s,"custom",i,e)}static if(t,s){if(!this.kc(t)&&![...Ut.keys()].includes(t)){const i=Wt.get(s),e=(i&&i.delete(t),Vt.get(s));e&&e.delete(t)}}static $c(t,s,i,e,h){switch(i){case"predefined":Nt.set(t,s),Bt.set(t,s);break;case"custom":if(e){Wt.has(e)||Wt.set(e,new Map),Vt.has(e)||Vt.set(e,new Map);const r=Wt.get(e),n=(r.set(t,s),Vt.get(e));n.set(t,h)}else jt.set(t,s),Ht.set(t,h);break;case"private":Nt.set(t,s),Ut.set(t,s);break;default:throw new Error("unexpected ease mode")}}static ef(t,s,i,e){return 0===e?s:i*t/e+s}static Xc(t,s,i,e,h){const r=s,n=3*t*(i-s),o=3*t**2*(s+e-2*i),a=t**3*(h-s+3*i-3*e);return r+n+o+a}static Yc(t,s,i,e,h,r,n,o,a,l){if(e===h&&r===n)return t;const u=es(t,s,e,r,o,l),c=Zt(i,h,n,a),f=Qt(i,h,n,a),d=ts(i,h,n,a);return ss(u,c,f,d)}static hf(t,s,i,e){const h=[],r=Zt(t,s,i,e),n=Qt(t,s,i,e),o=ts(t,s,i,e);for(let t=0;t<$t;++t){const a=ss(t*Kt,r,n,o);h.push(a)}return h}},11),Kt=1/($t-1),Zt=(t,s,i,e)=>e-3*i+3*s-t,Qt=(t,s,i,e)=>3*i-6*s+3*t,ts=(t,s,i,e)=>3*(s-t),ss=(t,s,i,e)=>((s*t+i)*t+e)*t,is=(t,s,i,e)=>3*s*t*t+2*i*t+e,es=(n,t,s,i,e,h)=>{if(1==n)return 1;let o=0,r=1,a=h[r],l=$t-1;for($t;r!=l&&a<=n;)r++,a=h[r],o+=Kt;r--;let u=(n-(a=h[r]))/(h[r+1]-a),c=o+u*Kt,f=Zt(t,s,i,e),d=Qt(t,s,i,e),p=ts(t,s,i,e),m=is(c,f,d,p);if(0===m)return c;if(.01<=m){for(let t=0;t<4;++t){const g=ss(c,f,d,p)-n,y=is(c,f,d,p);c-=g/y}return c}{let s=o,i=o+Kt,e=0,h,r;do{c=s+(i-s)/2;let t=ss(c,f,d,p)-n;0<t?i=c:s=c,h=1e-7<Math.abs(t),r=++e<10}while(h&&r);return c}}}{let o=function(t){rs.Ee(t)};o;const rs=self.Bs;rs.rf=class{constructor(t){this.nf=[],this.Mr=t||"",this.lf=0}Sr(){this.ac(),this.nf=null}uf(){return this.Mr}ac(){rs.zn(this.nf),this.lf=0}cf(){return this.lf}ff(t=Math.random()*this.cf()){let s=0;for(const[i,e]of this.nf)if(t<(s+=i))return e;return 0}df(t,s){o(s),this.lf+=t,this.nf.push([t,s])}pf(s,i){o(i);const e=0===s;for(let t=0;t<this.nf.length;t++){const h=this.nf[t],r=e||h[0]===s,n=h[1]===i;if(r&&n){this.nf.splice(t,1),this.lf-=h[0];break}}}gf(){return JSON.stringify(this.nf)}static yf(t,s){const i=new rs.rf(s),e=JSON.parse(t);for(const h of e){const r=h[0],n=h[1];i.df(r,n)}return i}}}{let t=self.Bs,i=0;t.wf=class{constructor(t,s){this.Sf=t,this.bf=s,this.vf=i++,this.Sf.Mf("runtime","screen-reader-text",{type:"create",id:this.vf,text:this.bf})}Sr(){this.Sf.Mf("runtime","screen-reader-text",{type:"release",id:this.vf}),this.Sf=null,this.bf="",this.vf=-1}xf(t){this.bf!==t&&(this.bf=t,this.Sf.Mf("runtime","screen-reader-text",{type:"update",id:this.vf,text:this.bf}))}}}{const ns=self.Bs;ns.Event=class{constructor(t,s){this.type=t,this.cancelable=!!s,this.defaultPrevented=!1,this.Tf=!1,this.Gf=!1}preventDefault(){if(!this.cancelable)throw new Error(`event '${this.type}' is not cancelable`);this.defaultPrevented=!0}stopPropagation(){if(!this.cancelable)throw new Error(`event '${this.type}' cannot be stopped`);if(this.Gf)throw new Error(`cannot stop async event '${this.type}' propagation`);this.Tf=!0}}}{const os=self.Bs;os.Event._f=class extends os.gr{constructor(t){super(),this.If=t,this.Cf=[],this.Pf=new Set,this.Ef=[],this.Af=new Set,this.Rf=0,this.Ff=[]}Sr(){0<this.Rf||(os.Un(this.Cf),this.Pf.clear(),os.Un(this.Ef),this.Af.clear(),os.Un(this.Ff),os.Sr(this))}Of(t,s){this.Df()?this.Ff.push({kf:"add",Lf:t,capture:s}):s?this.Pf.has(t)||(this.Cf.push(t),this.Pf.add(t)):this.Af.has(t)||(this.Ef.push(t),this.Af.add(t))}Nf(t,s){this.Df()?this.Ff.push({kf:"remove",Lf:t,capture:s}):s?this.Pf.has(t)&&(this.Pf.delete(t),os.$n(this.Cf,t)):this.Af.has(t)&&(this.Af.delete(t),os.$n(this.Ef,t))}Bf(){return!this.Cf.length&&!this.Ef.length}Df(){return 0<this.Rf}Wf(){const t=new Set,s=new Set;for(const i of this.Ff)if("add"===i.kf)this.Of(i.Lf,i.capture),(i.capture?s:t).delete(i.Lf);else{if("remove"!==i.kf)throw new Error("invalid op");(i.capture?(this.Pf.delete(i.Lf),s):(this.Af.delete(i.Lf),t)).add(i.Lf)}os.Qn(this.Ef,t),os.Qn(this.Cf,s),os.Un(this.Ff)}Vf(i){this.jf();let e=!1;for(let t=0,s=this.Cf.length;t<s;++t)if(this.Cf[t](i),i.Tf){e=!0;break}if(!e)for(let t=0,s=this.Ef.length;t<s&&(this.Ef[t](i),!i.Tf);++t);return this.Hf(),!i.defaultPrevented}Uf(i){this.jf();for(let t=0,s=this.Cf.length;t<s;++t)this.Cf[t](i);for(let t=0,s=this.Ef.length;t<s;++t)this.Ef[t](i);return this.Hf(),!0}jf(){this.Rf++}Hf(){this.Rf--,0===this.Rf&&0<this.Ff.length&&this.Wf()}Jf(t){t?this.jf():this.Hf()}qf(i){let e=[];for(let s=0,t=this.Cf.length;s<t;++s){let t=this.Cf[s];e.push(os.Xf(()=>t(i)))}for(let s=0,t=this.Ef.length;s<t;++s){let t=this.Ef[s];e.push(os.Xf(()=>t(i)))}return Promise.all(e).then(()=>!i.defaultPrevented)}Yf(i){const e=[];this.jf();for(let t=0,s=this.Cf.length;t<s;++t){const h=this.Cf[t](i);h instanceof Promise&&e.push(h)}for(let t=0,s=this.Ef.length;t<s;++t){const r=this.Ef[t](i);r instanceof Promise&&e.push(r)}return this.Hf(),e.length?Promise.all(e).then(()=>!i.defaultPrevented):!i.defaultPrevented}async $f(t){return this.Yf(t)}async Kf(i){this.jf();for(let t=0,s=this.Cf.length;t<s;++t){const e=this.Cf[t](i);e instanceof Promise&&await e}for(let t=0,s=this.Ef.length;t<s;++t){const h=this.Ef[t](i);h instanceof Promise&&await h}return this.Hf(),!i.defaultPrevented}*Zf(i){this.jf();for(let t=0,s=this.Cf.length;t<s;++t){const e=this.Cf[t](i);os.Xo(e)&&(yield*e)}for(let t=0,s=this.Ef.length;t<s;++t){const h=this.Ef[t](i);os.Xo(h)&&(yield*h)}this.Hf()}}}{const as=self.Bs;as.Event.Qf=class extends as.gr{constructor(){super(),this.t0=new Map,this.s0=!1}Sr(){if(this.s0)throw new Error("already released");this.i0(),this.s0=!0,as.Sr(this)}br(){return this.s0}i0(){if(this.t0){for(let t of this.t0.values())t.Sr();this.t0.clear()}}e0(t,s){let i=this.t0.get(t);return i||(s?(i=as.wr(as.Event._f,t),this.t0.set(t,i),i):null)}h0(t){return this.t0.has(t)}addEventListener(t,s,i){let e=this.e0(t,!0);e.Of(s,!!i)}removeEventListener(t,s,i){let e=this.e0(t,!1);e&&(e.Nf(s,!!i),e.Bf())&&this.t0.delete(t)}dispatchEvent(t){const s=this.e0(t.type,!1);return!s||(t.cancelable?s.Vf(t):s.Uf(t))}r0(t){const s=this.e0(t.type,!1);return s?(t.Gf=!0,s.qf(t)):Promise.resolve(!0)}async n0(t){const s=this.e0(t.type,!1);if(!s)return!0;this.t0.delete(t.type),t.Gf=!0;const i=await s.qf(t);return s.Sr(),i}async o0(t){const s=this.e0(t.type,!1);return!s||s.$f(t)}a0(t){const s=this.e0(t.type,!1);return!s||s.Yf(t)}async l0(t){const s=this.e0(t.type,!1);return!s||s.Kf(t)}u0(t){const s=this.e0(t.type,!1);if(!s)return null;if(t.cancelable)throw new Error("not supported");return s.Zf(t)}Jf(t){for(const s of this.t0.values())s.Jf(t)}}}{let r=function(t){c=l&&0===f?requestIdleCallback(s,{timeout:i}):setTimeout(s,0<f?1:t)},s=function(h){if(c=-1,u.length){let i=performance.now(),e=i,t=0,s;for(;n(u.shift()),e=performance.now(),++t,s=(e-i)/t*1.1,u.length&&(l&&0===f&&void 0!==h?s<h.timeRemaining():e-i+s<o););if(-1===c&&u.length){let t=e-i,s=Math.max(a-t,4);r(s)}}},n=function(s){let t;try{t=s.Lf()}catch(t){return void s.reject(t)}s.resolve(t)},t=(r,s,n,self.Bs),o=12,a=16,i=35,l="undefined"!=typeof requestIdleCallback,u=[],c=-1,f=0,h=t.li.ri("disable-asyncify");h&&console.warn("[Asyncify] Asyncify has been disabled due to disable-asyncify in the query string. Some work will now be done synchronously."),t.Xf=function(i){let e=null;return t.isDebug&&(e=t.we()),new Promise((t,s)=>{u.push({Lf:i,resolve:t,reject:s,stack:e}),h?n(u.pop()):-1===c&&r(a)})},t.Xf.c0=function(t){if(t)++f;else if(--f<0)throw new Error("already turned off high throughput mode")}}{let t=function(){r=-1},s=function(){n=-1,o=-1;let i=Date.now();for(let s of a)if(s.f0(i)){let t=s.d0();(-1===o||t<o)&&(o=t)}else a.delete(s);if(-1!==o){let t=Math.max(o-i+h,e);n=self.setTimeout(s,t)}},i=(t,s,self.Bs),e=1e3,h=100,r=-1,n=(i.p0=function(){return-1===r&&(r=Date.now(),self.setTimeout(t,16)),r},-1),o=-1,a=new Set;i.m0=class{constructor(t,s){this.g0=t,this.y0=1e3*s,this.w0=0,this.S0=!1}b0(){let t=i.p0();this.w0=t+this.y0,this.S0||(a.add(this),this.S0=!0),-1===n?(o=this.w0,n=self.setTimeout(s,this.y0+h)):this.w0<o&&o>t+e&&(self.clearTimeout(n),o=this.w0,n=self.setTimeout(s,this.y0+h))}f0(t){return!(t>=this.w0)||(this.g0()?(this.w0=t+this.y0,!0):this.S0=!1)}d0(){return this.w0}v0(){this.S0&&(a.delete(this),this.S0=!1,0===a.size)&&-1!==n&&(self.clearTimeout(n),n=-1,o=-1)}Sr(){this.v0(),this.g0=null}}}{const ls=self.Bs;ls.M0=class us{constructor(t){this.x0=!1,this.T0=t}G0(){this.x0||(this.x0=!0,this.T0&&(this.T0(),this.T0=null))}_0(){return this.x0}Sr(){this.G0()}static Sr(t){return new us(()=>t.Sr())}static I0(s,i,e,h,t){if(null==h)h=!1;else if("boolean"!=typeof h&&"object"!=typeof h)throw new TypeError("invalid event listener options");if(t&&(e=e.bind(t)),i.includes(" ")){i=i.split(" ");const r=new ls.C0;for(let t of i)s.addEventListener(t,e,h),r.xc(ls.wr(ls.M0,()=>s.removeEventListener(t,e,h)));return r}return s.addEventListener(i,e,h),ls.wr(ls.M0,()=>s.removeEventListener(i,e,h))}},ls.P0=class extends ls.M0{E0(t){this.T0=t}},ls.C0=class extends ls.M0{constructor(...s){super(),this.A0=new Set;for(let t of s)this.xc(t)}xc(...s){if(this.x0)throw new Error("already disposed");for(let t of s)this.A0.add(t)}R0(t){if(this.x0)throw new Error("already disposed");this.A0.delete(t)}F0(){if(this.x0)throw new Error("already disposed");if(this.A0){for(let t of this.A0)t.G0();this.A0.clear()}}_0(){return this.x0}G0(){if(this.x0)throw new Error("already disposed");this.x0=!0;for(let t of this.A0)t.G0();this.A0.clear(),this.A0=null}Sr(){this.G0()}}}{const cs=self.Bs;cs.O0=class extends cs.gr{constructor(){super(),this.D0=0,this.al=0,this.k0=0,this.L0=0}xc(t){this.al=(t=+t)-this.D0,this.k0=this.L0+this.al,this.D0=this.k0-this.L0-this.al,this.L0=this.k0}N0(t){this.L0-=+t}ni(){return this.L0}b0(){this.D0=0,this.al=0,this.k0=0,this.L0=0}Set(t){this.D0=0,this.al=0,this.k0=0,this.L0=+t}B0(t){this.D0=t.D0,this.al=t.al,this.k0=t.k0,this.L0=t.L0}Sr(){}}}{const fs=self.Bs,n={};n.W0=function(t){this.V0=t,this.right=this.V0.j0,this.left=this.V0.j0,this.parent=null,this.color=!1,this.key=null},n.H0=function(t){this.size=0,this.j0=new n.W0(this),this.j0.color=!1,this.root=this.j0,this.root.parent=this.j0,this.compare=t||this.U0},n.H0.prototype.U0=function(t,s){return t<s?-1:s<t?1:0},n.H0.prototype.clone=function(){var t=new n.H0(this.compare);return t.z0(this),t},n.H0.prototype.clear=function(){this.size=0,this.j0=new n.W0(this),this.j0.color=!1,this.root=this.j0,this.root.parent=this.j0},n.H0.prototype.J0=function(t){var s=t.right;t.right=s.left,s.left!=this.j0&&(s.left.parent=t),s.parent=t.parent,t.parent==this.j0?this.root=s:t==t.parent.left?t.parent.left=s:t.parent.right=s,(s.left=t).parent=s},n.H0.prototype.q0=function(t){var s=t.left;t.left=s.right,s.right!=this.j0&&(s.right.parent=t),s.parent=t.parent,t.parent==this.j0?this.root=s:t==t.parent.right?t.parent.right=s:t.parent.left=s,(s.right=t).parent=s},n.H0.prototype.X0=function(t){if(this.contains(t))this.Y0(t).key=t;else{for(var s=new n.W0(this),i=(s.key=t,this.j0),e=this.root;e!=this.j0;)i=e,e=this.compare(s.key,e.key)<0?e.left:e.right;(s.parent=i)==this.j0?this.root=s:this.compare(s.key,i.key)<0?i.left=s:i.right=s,s.left=this.j0,s.right=this.j0,s.color=!0,this.$0(s),this.size++}},n.H0.prototype.$0=function(t){for(;t!=this.j0&&t!=this.root&&1==t.parent.color;){var s;t.parent==t.parent.parent.left?1==(s=t.parent.parent.right).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.right&&(t=t.parent,this.J0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.j0&&this.q0(t.parent.parent)):1==(s=t.parent.parent.left).color?(t.parent.color=!1,s.color=!1,t.parent.parent.color=!0,t=t.parent.parent):(t==t.parent.left&&(t=t.parent,this.q0(t)),t.parent.color=!1,t.parent.parent.color=!0,t.parent.parent!=this.j0&&this.J0(t.parent.parent))}this.root.color=!1},n.H0.prototype.K0=function(t){var s=t.left==this.j0||t.right==this.j0?t:this.Z0(t),i=s.left!=this.j0?s.left:s.right;i.parent=s.parent,s.parent==this.j0?this.root=i:s==s.parent.left?s.parent.left=i:s.parent.right=i,s!=t&&(t.key=s.key),0==s.color&&this.Q0(i),this.size--},n.H0.prototype.Q0=function(t){for(;t!=this.root&&0==t.color;){var s;t=t==t.parent.left?(1==(s=t.parent.right).color&&(s.color=!1,t.parent.color=!0,this.J0(t.parent),s=t.parent.right),0==s.left.color&&0==s.right.color?(s.color=!0,t.parent):(0==s.right.color&&(s.left.color=!1,s.color=!0,this.q0(s),s=t.parent.right),s.color=t.parent.color,t.parent.color=!1,s.right.color=!1,this.J0(t.parent),this.root)):(1==(s=t.parent.left).color&&(s.color=!1,t.parent.color=!0,this.q0(t.parent),s=t.parent.left),0==s.right.color&&0==s.left.color?(s.color=!0,t.parent):(0==s.left.color&&(s.right.color=!1,s.color=!0,this.J0(s),s=t.parent.left),s.color=t.parent.color,t.parent.color=!1,s.left.color=!1,this.q0(t.parent),this.root))}t.color=!1},n.H0.prototype.remove=function(t){var s;return(t=this.Y0(t))!=this.j0?(s=t.key,this.K0(t),s):null},n.H0.prototype.td=function(t,s){this.remove(s)},n.H0.prototype.min=function(t){for(;t.left!=this.j0;)t=t.left;return t},n.H0.prototype.max=function(t){for(;t.right!=this.j0;)t=t.right;return t},n.H0.prototype.Z0=function(t){if(t.right!=this.j0)return this.min(t.right);for(var s=t.parent;s!=this.j0&&t==s.right;)s=(t=s).parent;return s},n.H0.prototype.ed=function(t){if(t.left!=this.j0)return this.max(t.left);for(var s=t.parent;s!=this.j0&&t==s.left;)s=(t=s).parent;return s},n.H0.prototype.hd=function(t){if(0<this.size){var s=this.Y0(t);if(s==this.j0)return null;if(s.right!=this.j0)return this.min(s.right).key;for(var i=s.parent;i!=this.j0&&s==i.right;)i=(s=i).parent;return i!=this.j0?i.key:null}return null},n.H0.prototype.rd=function(t){if(0<this.size){var s=this.Y0(t);if(s==this.j0)return null;if(s.left!=this.j0)return this.max(s.left).key;for(var i=s.parent;i!=this.j0&&s==i.left;)i=(s=i).parent;return i!=this.j0?i.key:null}return null},n.H0.prototype.nd=function(){return this.min(this.root).key},n.H0.prototype.od=function(){return this.max(this.root).key},n.H0.prototype.Y0=function(t){for(var s=this.root;s!=this.j0&&0!=this.compare(s.key,t);)s=this.compare(t,s.key)<0?s.left:s.right;return s},n.H0.prototype.contains=function(t){return null!=this.Y0(t).key},n.H0.prototype.getValues=function(){var s=[];return this.forEach(function(t){s.push(t)}),s},n.H0.prototype.z0=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.X0(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.X0,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.X0(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.X0(t[e])},n.H0.prototype.ud=function(t){if("array"==n.typeOf(t))for(var s=0;s<t.length;s++)this.remove(t[s]);else if("function"==n.typeOf(t.forEach))t.forEach(this.td,this);else if("function"==n.typeOf(t.getValues))for(var i=t.getValues(),s=0;s<i.length;s++)this.remove(i[s]);else if("object"==n.typeOf(t))for(var e in t)this.remove(t[e])},n.H0.prototype.fd=function(t){if("array"==n.typeOf(t)){for(var s=0;s<t.length;s++)if(!this.contains(t[s]))return!1;return!0}if("function"==n.typeOf(t.forEach))return t.every(this.contains,this);if("function"==n.typeOf(t.getValues)){for(var i=t.getValues(),s=0;s<i.length;s++)if(!this.contains(i[s]))return!1;return!0}if("object"==n.typeOf(t)){for(var e in t)if(!this.contains(t[e]))return!1;return!0}},n.H0.prototype.range=function(t,s){var i=[];return this.dd(function(t){i.push(t)},t,s),i},n.H0.prototype.pd=function(t,s){if(!this.md())for(var i=this.min(this.root);i!=this.j0;){if(t.call(s,i.key,this))return;i=this.Z0(i)}},n.H0.prototype.gd=function(t,s,i){if(!this.md())for(var e=this.Y0(s);e!=this.j0;){if(t.call(i,e.key,this))return;e=this.Z0(e)}},n.H0.prototype.yd=function(t,s,i){if(!this.md())for(var e=this.min(this.root),h=this.Y0(s);e!=h;){if(t.call(i,e.key,this))return;e=this.Z0(e)}},n.H0.prototype.dd=function(t,s,i,e){if(!this.md())for(var h=this.Y0(s),r=this.Y0(i);h!=r;){if(t.call(e,h.key,this))return;h=this.Z0(h)}},n.H0.prototype.wd=function(t,s){if(!this.md())for(var i=this.max(this.root);i!=this.j0;){if(t.call(s,i.key,this))return;i=this.ed(i)}},n.H0.prototype.forEach=function(t,s){if(!this.md())for(var i=this.min(this.root);i!=this.j0;i=this.Z0(i))t.call(s,i.key,i.key,this)},n.H0.prototype.some=function(t,s){if(!this.md())for(var i=this.min(this.root);i!=this.j0;i=this.Z0(i))if(t.call(s,i.key,i.key,this))return!0;return!1},n.H0.prototype.every=function(t,s){if(this.md())return!1;for(var i=this.min(this.root);i!=this.j0;i=this.Z0(i))if(!t.call(s,i.key,i.key,this))return!1;return!0},n.H0.prototype.map=function(t,s){var i=[];if(!this.md())for(var e=this.min(this.root);e!=this.j0;e=this.Z0(e))i.push(t.call(s,e.key,e.key,this));return i},n.H0.prototype.filter=function(t,s){var i=[];if(!this.md())for(var e=this.min(this.root);e!=this.j0;e=this.Z0(e))t.call(s,e.key,e.key,this)&&i.push(e.key);return i},n.H0.prototype.getCount=function(){return this.size},n.H0.prototype.md=function(){return 0==this.size},n.H0.prototype.ye=function(t){var s=n.getCount(t);if(this.getCount()>s)return!1;var i=0;if(this.md())return!0;for(var e=this.min(this.root);e!=this.j0;e=this.Z0(e))n.contains.call(t,t,e.key)&&i++;return i==this.getCount()},n.H0.prototype.Sd=function(t){var s=new n.H0(this.compare);if(!this.md())for(var i=this.min(this.root);i!=this.j0;i=this.Z0(i))t.contains.call(t,i.key,i.key,this)&&s.X0(i.key);return s},fs.H0=class extends fs.gr{constructor(t){super(),this.bd=new n.H0(t),this.vd=!1,this.Md=new Set,this.xd=new Set}xc(t){this.vd?this.bd.contains(t)?this.xd.delete(t):this.Md.add(t):this.bd.X0(t)}R0(t){this.vd?this.bd.contains(t)?this.xd.add(t):this.Md.delete(t):this.bd.remove(t)}ri(t){return this.vd?!!this.Md.has(t)||!this.xd.has(t)&&this.bd.contains(t):this.bd.contains(t)}ac(){this.bd.clear(),this.Md.clear(),this.xd.clear()}toArray(){if(this.vd)throw new Error("cannot be used in queueing mode");return this.bd.getValues()}mc(){return this.bd.getCount()+this.Md.size-this.xd.size}lc(){return 0===this.mc()}Td(){if(this.lc())throw new Error("empty set");if(this.vd)throw new Error("cannot be used in queueing mode");const t=this.bd,s=t.min(t.root);return s.key}Gd(){if(this.lc())throw new Error("empty set");if(this.vd)throw new Error("cannot be used in queueing mode");const t=this.Td();return this.R0(t),t}_d(t){if(this.vd!==(t=!!t)&&!(this.vd=t)){for(const s of this.xd)this.bd.remove(s);this.xd.clear();for(const i of this.Md)this.bd.X0(i);this.Md.clear()}}Id(t){this.bd.forEach(t)}*values(){if(!this.lc()){const s=this.bd;for(let t=s.min(s.root);t!=s.j0;t=s.Z0(t))yield t.key}}[Symbol.iterator](){return this.values()}}}{const ds=self.Bs;ds.Cd=class{constructor(t=ds.hardwareConcurrency){this.Pd=t,this.Ed=[],this.Ad=0}xc(i){return new Promise((t,s)=>{this.Ed.push({Lf:i,resolve:t,reject:s}),this.Rd()})}Fd(i){for(let t=0,s=this.Ed.length;t<s;++t)if(this.Ed[t].Lf===i)return t;return-1}Od(t,s){const i=this.Fd(t);if(-1===i)throw new Error("cannot find promise to resolve");this.Ed[i].resolve(s),this.Ed.splice(i,1)}Dd(t,s){const i=this.Fd(t);if(-1===i)throw new Error("cannot find promise to reject");this.Ed[i].reject(s),this.Ed.splice(i,1)}async Rd(){if(this.Ed.length&&!(this.Ad>=this.Pd)){this.Ad++;const s=this.Ed.shift();try{const t=await s.Lf();s.resolve(t)}catch(t){s.reject(t)}this.Ad--,this.Rd()}}static async kd(t,s){let i=[],e=!1,h=[];for(;t--;)h.push((async()=>{let t;for(;t=s.pop();){if(e)return;try{i.push(await t())}catch(t){throw e=!0,t}}})());return await Promise.all(h),i}}}{const ps=self.Bs;ps.Ld=class{constructor(t,s,i){this.g0=t,this.Nd=s,this.Bd=i||2*s,this.Wd=-1,this.Vd=-1/0,this.jd=()=>this.Hd(),this.Ud=!1,this.zd=!1,this.Jd=null}qd(t){this.zd=!!t}Xd(){return void 0!==ps.Battery&&ps.Battery.IsOnBatteryPower()?this.Bd:this.Nd}Yd(...e){if(-1===this.Wd){this.Jd=e;let t=ps.p0(),s=t-this.Vd,i=this.Xd();i<=s&&this.zd?(this.Vd=t,this.$d()):this.Wd=self.setTimeout(this.jd,Math.max(i-s,4))}}$d(){this.Ud=!0;const t=this.Jd;this.Jd=null,t?this.g0(...t):this.g0(),this.Ud=!1}b0(){this.Ud||(this.Kd(),this.Jd=null,this.Vd=ps.p0())}Hd(){this.Wd=-1,this.Vd=ps.p0(),this.$d()}Kd(){-1!==this.Wd&&(self.clearTimeout(this.Wd),this.Wd=-1)}Sr(){this.Kd(),this.g0=null,this.Jd=null,this.jd=null}}}{const ms=self.Bs;ms.Zd=class{constructor(){this.Qd=new Map,this.t1=!1,this.s1=null,this.i1=null,this.e1=null,this.h1=null}n1(t){this.t1=!!t}o1(){return this.t1}a1(t){this.s1=t}l1(t){if(this.s1)return this.s1(t);throw new Error("no get base size callback set")}u1(t){this.i1=t}c1(t,s,i,e,h,r){if(this.i1)return this.i1(t,s,i,e,h,r);throw new Error("no raster at size callback set")}f1(t){this.e1=t}d1(t){if(!this.e1)throw new Error("no release result callback set");this.e1(t)}m1(t){this.h1=t}w1(){if(!this.h1)throw new Error("no redraw callback set");this.h1()}S1(t){let s=this.Qd.get(t);return s||(s=ms.wr(ms.b1,this,t),this.Qd.set(t,s)),s.v1(),s}M1(t){this.Qd.delete(t.T1())}G1(){for(const t of this.Qd.values())t._1(),t.I1()}}}{const gs=self.Bs;gs.b1=class{constructor(t,s){this.C1=t,this.P1=s,this.E1=0,this.A1=0,this.R1=0,this.F1=this.C1.l1(s).then(t=>{this.C1&&(this.A1=t[0],this.R1=t[1],this.C1.w1())}).catch(t=>{console.error("[SVG] Error loading SVG: ",t),this.O1=!0,this.C1&&this.C1.w1()}),this.D1=0,this.L1=0,this.N1=0,this.B1=0,this.W1=!1,this.V1=null,this.j1=!1,this.O1=!1}Sr(){if(this.E1<=0)throw new Error("already released");this.E1--,0===this.E1&&this.H1()}_1(){this.V1&&(this.C1.d1(this.V1),this.V1=null)}H1(){this._1(),this.C1.M1(this),this.C1=null}T1(){return this.P1}v1(){this.E1++}U1(){return 0<this.E1}z1(){return this.V1}I1(){this.j1=!0}async J1(e,h,r){if(0!==h&&0!==r&&!this.O1&&!this.W1){let t=gs.zr(Math.ceil(h)),s=gs.zr(Math.ceil(r)),i=Math.max(t,s);if(4096<i){const n=4096/i;h*=n,r*=n,t=Math.min(Math.ceil(t*n),4096),s=Math.min(Math.ceil(s*n),4096)}if(h<t&&r<s){const o=h/r,a=t/s;r=o<a?(h=s*o,s):(h=t)/o}if(this.C1.o1()&&(t=Math.ceil(h),s=Math.ceil(r)),!(t<=this.D1&&s<=this.L1)||this.j1){this.W1=!0,this.D1=t,this.L1=s;const l=await this.C1.c1(this.P1,e,this.D1,this.L1,h,r);this.C1&&(this._1(),this.V1=l,this.N1=h,this.B1=r,this.W1=!1,this.j1=!1,this.C1.w1())}}}q1(){return this.F1}X1(){return this.A1}Y1(){return this.R1}K1(){return this.N1}Z1(){return this.B1}Q1(){return this.O1}}}{let s=function(t){return bs.get(t)};s;const c=self.Bs,ys=(c.tp="\ufeff",new Set("0123456789")),ws=(c.ip=function(t){return ys.has(t)},new Set(" \t\n\r\u2028\u2029"));c.ep=function(t){return ws.has(t)},c.hp=function(t){return[...t].filter(t=>!c.ep(t)).join("")},c.rp=function(t){for(const s of t)if(!c.ep(s))return!1;return!0},c.np=function(t){for(const s of t)if(!c.ep(s))return!1;return!0},c.op=function(t){return 1===t.length&&t.charCodeAt(0)<32},c.lp=function(t){return[...t].filter(t=>!c.op(t)).join("")};let i=null;try{i=new RegExp("\\p{P}(?<=[\\u3000-\\u303F\\uFF00-\\uFFEF])","u")}catch(t){console.warn("Unable to detect CJK punctuation: ",t)}c.up=function(t){return!c.ep(t)&&i&&i.test(t)};const Ss=new Set("0123456789.+-e"),bs=(c.cp=function(s){if(!(s=s.trim()).length)return!1;let t=s.charAt(0);if("-"!==t&&!ys.has(t))return!1;for(let t of s)if(!Ss.has(t))return!1;return!0},c.fp=function(s){let i=s.length;for(;0<i;){let t=s.charAt(i-1);if(!c.ip(t))break;--i}return s.substr(0,i)},c.pp=function(t){let s=c.fp(t),i=t.substr(s.length);return s+(i?(parseInt(i,10)+1).toString():"2")},new Map([["&","&amp;"],["<","&lt;"],[">","&gt;"],['"',"&quot;"],["'","&#39;"]])),vs=/[&<>"']/g,Ms=(c.mp=function(t){return t.replace(vs,s)},c.gp=function(t){let s=c.yp(t,"\\","\\\\");return s=c.yp(s,'"','\\"'),s=c.yp(s,"\t","\\t"),s=c.yp(s,"\r",""),c.yp(s,"\n","\\n")},c.Sp=function(t){let s=c.yp(t,"&","&amp;");return s=c.yp(s,"<","&lt;"),s=c.yp(s,">","&gt;"),c.yp(s,'"',"&quot;")},/[-[\]{}()*+?.,\\^$|#\s]/g),xs=(c.ge=function(t){return t.replace(Ms,"\\$&")},c.bp=function(t,s){let i=0;for(const e of t)e===s&&++i;return i},c.vp=function(t,s,i=!1){if(!s)return[];i||(t=t.toLowerCase(),s=s.toLowerCase());let e=s.length,h=0,r,n=[];for(;-1<(r=t.indexOf(s,h));)n.push(r),h=r+e;return n},c.yp=function(t,s,i){return t.replaceAll(s,()=>i)},c.Mp=function(t,s,i){return t.replace(new RegExp(c.ge(s),"gi"),()=>i)},c.xp=function(t,s){"string"==typeof s?t.textContent=s:s.Tp()?t.textContent=s.toString():(t.innerHTML=s.Gp(),s instanceof c.Nh&&s._p(t))},c.Ip=function(t,s){return t instanceof c.HtmlString||t instanceof c.Nh?t.equals(s):s instanceof c.HtmlString||s instanceof c.Nh?s.equals(t):t===s},c.Cp=function(i,...e){let h=i;for(let t=0,s=e.length;t<s;++t){const r=`{${t}}`;if(!i.includes(r))throw new Error(`missing placeholder '${r}' in string substitution`);h=h.replace(r,e[t].toString())}return h},c.Pp=function(i,...e){let h=i,r=-1,n=-1;for(let t=0,s=e.length;t<s;++t){const o=`{${t}}`;i.includes(o)?(n=t,h=h.replace(o,e[t].toString())):-1===r&&(r=t)}if(0<=r&&0<=n&&r<n)throw new Error(`missing placeholder '${r}' in string substitution`);return h},c.Ep=function(t,i){let e=t;for(let[t,s]of Object.entries(i))e=e.replaceAll(t,s.toString());return e},c.Ap=function(t,s){return s<t?1:t<s?-1:0},c.Rp=function(t,s){let i=t.toLowerCase(),e=s.toLowerCase();return e<i?1:i<e?-1:0},new self.Intl.Segmenter),Ts=(c.Fp=function(t){const s=[];for(const i of xs.segment(t))s.push(i.segment);return s},c.Op=function*(t){for(const s of xs.segment(t))yield s.segment},c.Dp=function(t){let s=0;for(const i of xs.segment(t))++s;return s},1073741824),Gs=1024*Ts,_s={kp:!(c.Lp=function(s,t){let i="common."+(t?"dataRates":"dataSizes")+".",e=self.langSub;if(s<1024)return e(i+"bytes",s);if(s<1048576){let t=s/1024;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"kilobytes",t)}if(s<Ts){let t=s/1048576;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"megabytes",t)}if(s<Gs){let t=s/Ts;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"gigabytes",t)}{let t=s/Gs;return t=t<10?Math.round(10*t)/10:Math.round(t),e(i+"terabytes",t)}}),Np:!0,Bp:!0,Wp:!0,Vp:!0};c.jp=function(t,s){s=Object.assign({},_s,s),c.Lang.PushContext("common.time");const i=[],e=self.lang,h=self.langPluralSub;if(s.Np){const n=Math.floor(t/86400);0<n&&(t-=24*n*3600,i.push(h(".days",null,n)))}if(s.Bp){const o=Math.floor(t/3600);(0<o||i.length)&&(t-=3600*o,i.push(h(".hours",null,o)))}if(s.Wp){const a=Math.floor(t/60);(0<a||i.length||!s.Vp)&&(t-=60*a,i.push(h(".minutes",null,a)))}if(s.Vp){const l=Math.floor(t%60);i.push(h(".seconds",null,l))}const r=(s.kp?e(".approx-prefix"):"")+i.join(e(".separator"));return c.Lang.PopContext(),r},c.Hp=function(t,s){let i=t<0?"-":"",e=(t=Math.abs(t)).toString(),h=s-e.length;for(let t=0;t<h;++t)i+="0";return i+e},c.Up=function(t){return t.toLowerCase().replace(/\b\w/g,t=>t.toUpperCase())},c.zp=function(t,s){let i=t.split(".").map(t=>t.trim()),e=s.split(".").map(t=>t.trim());c.qn(i,4,"0"),c.qn(e,4,"0"),i=i.map(t=>parseInt(t,10)),e=e.map(t=>parseInt(t,10));for(let t=0;t<4;++t){const h=i[t]-e[t];if(0!=h)return h<0?-1:1}return 0},c.Jp=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,t=>{const s=Math.floor(16*Math.random()),i="x"===t?s:3&s|8;return i.toString(16)})},c.qp=function(i,e){if(i.length!==e.length)throw new Error("strings must be same length");let h=0;for(let t=0,s=i.length;t<s;++t)i.charAt(t)!==e.charAt(t)&&++h;return h},c.Xp=function(t,s){if(0===t.length)return s.length;if(0===s.length)return t.length;let i,e,h,r,n,o;for(s.length<t.length&&(i=t,t=s,s=i),o=Array(t.length+1),e=0;e<=t.length;e++)o[e]=e;for(e=1;e<=s.length;e++){for(r=e,h=1;h<=t.length;h++)n=s[e-1]===t[h-1]?o[h-1]:Math.min(o[h-1]+1,Math.min(r+1,o[h]+1)),o[h-1]=r,r=n;o[t.length]=r}return o[t.length]}}{let s=function(t,i,e){const h=o.get(e);if(!h)return"class"===e?i?"</span>":`<span class="bbclass${u++}">`:t;if("string"==typeof h){if("a"===h&&0===a.length||"abbr"===h&&0===l.length)return t;if("a"!==h||i){if("abbr"!==h||i)return"<"+i+h+">";{const r=parseInt(e.substring(3),10)-1;if(r<0||r>=l.length)throw new Error("invalid bbcode tip substitution");let t=l[r],s="";if("string"==typeof t?s=t:"function"==typeof t&&(s=t()),"string"!=typeof s)throw new TypeError("invalid bbcode tip");return`<abbr title="${f.yp(s,'"',"&quot;")}">`}}{const s=parseInt(e.substring(1),10)-1;if(s<0||s>=a.length)throw new Error("invalid bbcode link substitution");const n=a[s];if("string"==typeof n)return`<a href="${a[s]}">`;if("function"==typeof n)return`<a class="bblink${s}">`;throw new TypeError("invalid bbcode link action")}}if(Array.isArray(h)){let t=h[0],s=h[1];return i?"</"+t+">":`<${t} class="${s}">`}},f=(s,self.Bs),o=new Map([["b","strong"],["i","em"],["s","s"],["u","u"],["sub","sub"],["sup","sup"],["small","small"],["mark","mark"],["code","code"],["a1","a"],["a2","a"],["a3","a"],["a4","a"],["a5","a"],["a6","a"],["a7","a"],["a8","a"],["a9","a"],["tip1","abbr"],["tip2","abbr"],["tip3","abbr"],["tip4","abbr"],["tip5","abbr"],["tip6","abbr"],["tip7","abbr"],["tip8","abbr"],["tip9","abbr"],["bad",["span","bbCodeBad"]],["good",["span","bbCodeGood"]],["info",["span","bbCodeInfo"]],["h1",["span","bbCodeH1"]],["h2",["span","bbCodeH2"]],["h3",["span","bbCodeH3"]],["h4",["span","bbCodeH4"]],["item",["span","bbCodeItem"]]]),d=new Set(["icon"]),i=/\[(\/?)([a-zA-Z0-9]+)\]/g,p=/\[(\/?)([^\[\n]*?)\]/g,a=null,l=null,u=0,e=/\n/g;f.Nh=class{constructor(t,s){if(this.Yp=s&&s.$p?t:f.mp(t),this.Kp="",this.Zp=!1,this.Qp=[],this.tm=[],s){if(this.Zp=!!s.convertLineBreaks,s.links){if(9<s.links.length)throw new Error("too many links");this.Qp=s.links}if(s.tips){if(9<s.tips.length)throw new Error("too many tips");this.tm=s.tips}}this.hm=this.Yp.includes("["),this.rm=this.Zp&&this.Yp.includes("\n"),this.nm=!this.hm&&!this.rm&&!this.Yp.includes("&"),this.lm=!1,this.um=[]}toString(){return this.Yp}valueOf(){return this.Yp}Tp(){return this.nm}fm(){return this.hm?this.Yp.replace(i,""):this.Yp}Gp(){if(this.nm)return this.Yp;if(!this.Kp&&this.Yp){let t=this.Yp;this.hm&&(u=0,a=this.Qp,l=this.tm,t=t.replace(i,s),a=null,l=null),this.rm&&(t=t.replace(e,"<br>")),this.Kp=t}return this.Kp}_p(i){if(this.Qp.length)for(let t=0,s=this.Qp.length;t<s;++t){const e=this.Qp[t];if("function"==typeof e){const h=i.querySelector(".bblink"+t);if(!h)throw new Error("unable to attach BBString link handler");h.onclick=e}}}equals(t){return t instanceof f.HtmlString?this.Gp()===t.Gp():t instanceof f.Nh?this.Yp===t.Yp:this.Yp===t}dm(){if(!this.lm){let e=[],t=this.Yp,h=[],s=p.lastIndex=0,i;for(;null!==(i=p.exec(t));){const r=i.index;if(!(0<r&&"\\"===t.charAt(r-1))){const n=i[0],o=i[1],a=i[2],l=t.substring(s,r);if(s=r+n.length,l&&e.push({text:l,pm:h.slice(0)}),a)if(o){const u=a.toLowerCase();for(let t=h.length-1;0<=t;--t)if(h[t].tag===u){h.splice(t,1);break}}else{let t=a,s=null,i=a.indexOf("=");if(-1!==i?(t=a.substring(0,i).toLowerCase(),s=a.substring(i+1)):t=t.toLowerCase(),d.has(t)){if("icon"!==t)throw new Error("unknown self-closing tag "+t);e.push({icon:s,pm:h.slice(0)})}else h.push({tag:t,param:s})}}}s<t.length&&e.push({text:t.substring(s),pm:h.slice(0)});for(const c of e)c.text&&(c.text=this.gm(c.text));this.um=e.map(t=>t.icon?f.wr(f.ym,{icon:t.icon,pm:t.pm}):f.wr(f.wm,{Sm:f.Fp(t.text),pm:t.pm})),this.lm=!0}return this.um}gm(t){return t=f.yp(t,"\\[","["),f.yp(t,"\\\\","\\")}static vm(t){return f.wr(f.Nh,t,{$p:!0}).fm()}static Mm(t){return t.replace(p,"")}}}{let l=function(t){return""!==t&&""!==t&&w.ep(t)},a=function(t){return Is.has(t)},u=function(t){return w.up(t)&&!a(t)},c=function(t){for(;0<t.length&&l(t.at(-1));)t.pop()},y=function(t){return"\n"===t||"\r\n"===t};l,a,u,c,y;const w=self.Bs,Is=new Set("");w.xm=class{constructor(){this.Tm=[],this.Gm=null}_m(){return this.Tm}Im(){return this.Tm.length}Cm(t){this.Gm=t}Pm(t,s){let i=0,e=0,h=0,r=0,n=0;for(const o of t){if(-1===o.Em()){const a=s(o);o.Am(a.height),o.Rm(a.fontBoundingBoxAscent||0),o.Fm(a.fontBoundingBoxDescent||0),o.Om(a.Dm||0),o.km()?o.Lm(a.width):o.Nm()&&o.Bm(this.Gm)}i+=o.Em(),e=Math.max(e,o.Wm()),h=Math.max(h,o.Vm()),r=Math.max(r,o.jm()),n=Math.max(n,o.Hm())}return{width:i,height:e,fontBoundingBoxAscent:h,fontBoundingBoxDescent:r,Dm:n}}Um(t,s,i,e,h,r){this.Tm.push(w.wr(w.xm.zm,{Jm:t,width:s,height:i,fontBoundingBoxAscent:e,fontBoundingBoxDescent:h,Dm:r}))}xm(s,r,n,i,o){if("string"==typeof s&&(s=[w.wr(w.wm,{Sm:w.Fp(s)})]),w.Un(this.Tm),!(!s.length||1===s.length&&s[0].km()&&s[0].lc()||n<2)){if(1===s.length){const a=s[0];if(a.km()&&a.qm()<=100&&!a.Xm()){let{width:t,height:s,fontBoundingBoxAscent:i,fontBoundingBoxDescent:e,Dm:h}=r(a);if(t+=o,a.Lm(t),a.Am(s),a.Rm(i||0),a.Fm(e||0),a.Om(h||0),t<=n)return void this.Um([a],t,s,i,e,h)}}let t;t="word"===i?this.Ym(s):"cjk"===i?this.$m(s):this.Km(s),this.Zm(t,r,n,o)}}Ym(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Qm();if(h.Nm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.tg())if(y(n))0<i.length&&s.push(i),s.push([w.wr(w.wm,{Sm:["\n"],pm:r})]),i=[];else if(0===i.length)i.push(w.wr(w.wm,{Sm:[n],pm:r})),e=l(n);else{const o=l(n);if(o===e){const a=i.at(-1);a.Qm()===r?a.sg(n):i.push(w.wr(w.wm,{Sm:[n],pm:r}))}else s.push(i),i=[w.wr(w.wm,{Sm:[n],pm:r})],e=o}}return 0<i.length&&s.push(i),s}$m(t){let s=[],i=[],e=!1;for(const h of t){const r=h.Qm();if(h.Nm())0<i.length&&s.push(i),s.push([h]),i=[];else for(const n of h.tg())if(y(n))0<i.length&&s.push(i),s.push([w.wr(w.wm,{Sm:["\n"],pm:r})]),i=[];else{if(0===i.length)i.push(w.wr(w.wm,{Sm:[n],pm:r}));else if(e||u(n)){const o=i.at(-1);o.Qm()===r?o.sg(n):i.push(w.wr(w.wm,{Sm:[n],pm:r}))}else s.push(i),i=[w.wr(w.wm,{Sm:[n],pm:r})];e=a(n)}}return 0<i.length&&s.push(i),s}Km(t){const s=[];for(const i of t)if(i.km()){const e=i.tg();w.er(s,e.map(t=>[w.wr(w.wm,{Sm:[t],pm:i.Qm()})]))}else s.push([i]);return s}ig(t){return t.map(t=>t.eg())}hg(s,i){let t=s.length?s.at(-1):null,e=0;t&&t.km()&&i[0].km()&&i[0].Qm()===t.Qm()&&(t.rg(i[0].tg()),e=1);for(let t=i.length;e<t;++e){const h=i[e];s.push(h.eg())}}Zm(t,s,i,e){let h=[],r=0,n=0,o=0,a=0,l=0;for(const u of t)if(1===u.length&&u[0].km()&&1===u[0].qm()&&y(u[0].tg()[0])){if(0===n){const c=w.wr(w.wm,{Sm:[" "],pm:u[0].Qm()}),f=s(c);n=f.height,o=f.fontBoundingBoxAscent||0,a=f.fontBoundingBoxDescent||0,l=f.Dm||0}this.Um(h,r,n,o,a,l),h=[],r=0,n=0,o=0,a=0,l=0}else{const d=this.ig(h),p=(this.hg(d,u),this.Pm(d,s)),m=p.width;if(i<=m)if(0<h.length&&this.Um(h,r,n,o,a,l),h=[],u[0].km()&&w.np(u[0].tg()))r=0,n=0,o=0,a=0,l=0;else{this.hg(h,u);const g=this.Pm(h,s);r=g.width,n=g.height,o=g.fontBoundingBoxAscent,a=g.fontBoundingBoxDescent,l=g.Dm}else h=d,r=m,n=p.height,o=p.fontBoundingBoxAscent,a=p.fontBoundingBoxDescent,l=p.Dm}0<h.length&&this.Um(h,r,n,o,a,l),this.ng(s,e)}ng(s,i){for(const e of this.Tm){const h=e.og();if(h.length){let t=h.at(-1);if(t.km()){const r=t.tg(),n=r.slice(0);if(c(n),0===n.length)e.ag(-t.Em()),h.pop();else if(n.length<r.length){t.lg(n);const o=s(t).width,a=t.Em()-o;t.Lm(o),e.ag(-a)}0!==i&&0<h.length&&((t=h.at(-1)).ag(i),e.ag(i))}}}}ac(){w.Un(this.Tm)}ug(){return this.Tm.reduce((t,s)=>Math.max(t,s.Em()),0)}fg(){return this.Tm.reduce((t,s)=>t+s.Wm(),0)}}}{const Cs=self.Bs;Cs.xm.zm=class{constructor(t){this.um=t.Jm||[],this.dg=t.width||-1,this.pg=t.height||-1,this.mg=t.fontBoundingBoxAscent||-1,this.gg=t.fontBoundingBoxDescent||-1,this.yg=t.Dm||-1,this.wg=0,this.Sg=0}Jm(){return this.um.values()}*bg(){const s=this.um;for(let t=s.length-1;0<=t;--t)yield s[t]}og(){return this.um}ag(t){this.dg+=t}Em(){return this.dg}Wm(){return this.pg}vg(){return this.mg}jm(){return this.gg}Hm(){return this.yg}Mg(t){this.wg=t}xg(){return this.wg}Tg(t){this.Sg=t}Gg(){return this.Sg}}}{const Ps=self.Bs;Ps._g=class{constructor(t){this.Ig=t.pm||[],this.dg=t.width||-1,this.pg=t.height||-1,this.mg=t.fontBoundingBoxAscent||-1,this.gg=t.fontBoundingBoxDescent||-1,this.yg=t.Dm||-1,this.wg=0,this.Sg=0}km(){return!1}Nm(){return!1}Qm(){return this.Ig}Cg(s){const i=this.Ig;for(let t=i.length-1;0<=t;--t){const e=i[t];if(e.tag===s)return e}return null}Pg(t){return!!this.Cg(t)}Eg(){const t=new Map;for(const s of this.Ig)t.set(s.tag,s.param);return t}ag(t){this.dg+=t}Lm(t){this.dg=t}Em(){return this.dg}Am(t){this.pg=t}Wm(){return this.pg}Rm(t){this.mg=t}Vm(){return this.mg}Fm(t){this.gg=t}jm(){return this.gg}Om(t){this.yg=t}Hm(){return this.yg}Mg(t){this.wg=t}xg(){return this.wg}Tg(t){this.Sg=t}Gg(){return this.Sg}}}{const Es=self.Bs;Es.wm=class extends Es._g{constructor(t){super(t),this.Ag=t.Sm}km(){return!0}rg(t){Es.er(this.Ag,t),this.dg=-1,this.pg=-1,this.mg=-1,this.gg=-1,this.yg=-1}sg(t){this.Ag.push(t)}eg(){return Es.wr(Es.wm,{Sm:this.Ag.slice(0),pm:this.Ig,width:this.dg,height:this.pg,fontBoundingBoxAscent:this.mg,fontBoundingBoxDescent:this.gg,Dm:this.yg})}tg(){return this.Ag}lg(t){this.Ag=t}qm(){return this.Ag.length}lc(){return 0===this.Ag.length}Xm(){return this.Ag.includes("\n")}}}{const As=self.Bs;As.ym=class extends As._g{constructor(t){super(t),this.Rg=t.icon}Nm(){return!0}Fg(){return this.Rg}eg(){return As.wr(As.ym,{icon:this.Rg,pm:this.Ig,width:this.dg,height:this.pg,fontBoundingBoxAscent:this.mg,fontBoundingBoxDescent:this.gg,Dm:this.yg})}Og(t){if(!t)return null;let s=Number(this.Rg);return String(s)===this.Rg?(s=Math.floor(s),t.Dg(s)):t.kg(this.Rg)}Bm(t){const s=this.Og(t);this.dg=s?this.pg*s.Em()/s.Wm():0}Lg(t){const s=this.Og(t);return s?s.Lg():null}qm(){return 1}}}{const Rs=self.Bs;Rs.Ng=class{constructor(t){this.Bg=new Map,this.Wg=t.Vg,this.jg=t.Hg}Sr(){for(const t of this.Bg.values())t.Sr();this.Bg.clear()}Ug(t){let s=this.Bg.get(t);if(!s){const i=this.Wg(t);s=Rs.wr(Rs.zg,this,{source:t,Jg:i}),this.Bg.set(t,s)}return s}qg(t){return this.Bg.has(t)}Xg(t){const s=this.Bg.get(t);s&&s.Sr(),this.Bg.delete(t)}async Yg(t){return this.jg(t)}}}{const Fs=self.Bs;Fs.zg=class{constructor(t,s){this.$g=t,this.Kg=s.source,this.Zg=[],this.Qg=new Map,this.ty=!1,this.iy=!1,this.ey=null;const i=s.Jg.hy;for(let t=0,s=i.length;t<s;++t){const e=i[t],h=Fs.wr(Fs.ny,this,{index:t,tag:e.tag,source:e.source,width:e.width,height:e.height});this.Zg.push(h),e.tag&&this.Qg.set(e.tag.toLowerCase(),h)}}Sr(){for(const t of this.Zg)t.Sr();Fs.Un(this.Zg),this.Qg.clear(),this.$g=null,this.Kg=null}oy(){return this.ty}ly(){return this.iy}uy(){return this.ey||(this.ey=this.my()),this.ey}async my(){if(!this.ty){this.ty=!0,this.iy=!0;const t=await this.$g.Yg(this.Kg);if(this.$g){const i=t.hy;for(let t=0,s=Math.min(i.length,this.Zg.length);t<s;++t){const e=i[t].gy;this.Zg[t].yy(e)}this.iy=!1}}}Dg(t){return(t=Math.floor(t))<0||t>=this.Zg.length?null:this.Zg[t]}kg(t){return this.Qg.get(t.toLowerCase())||null}}}{const Os=self.Bs;Os.ny=class{constructor(t,s){this.wy=t,this.Kg=s.source||null,this.Sy=s.index,this.by=s.tag,this.dg=s.width,this.pg=s.height,this.My=null}Sr(){this.dg=0,this.pg=0,this.wy=null}xy(){return this.Kg}Em(){return this.dg}Wm(){return this.pg}yy(t){this.My=t}Lg(){return this.My}}}{let e=function(t,s,i,e){const h=Bs;Th.B(Ls,i,s),Th.B(Ns,t,s),Th.Dt(h,Ls,Ns),Th.normalize(h,h),e.set(h[0],h[1],h[2],Th.Ot(t,h))},n=function(t,s,i,e,h,r,n){const o=n.x,a=n.y,l=n.z,u=n.w,c=n.Ty,f=n.Gy,d=n._y,p=1-c,m=1-f,g=1-d,y=o*t*c+o*e*p+a*s*f+a*h*m+l*i*d+l*r*g;if(u<=y)return!0;const w=o*e*c+o*t*p+a*h*f+a*s*m+l*r*d+l*i*g;return u<w},h=function(t,s,i,e){const h=e.x,r=e.y,n=e.z,o=e.w,a=h*t+r*s+n*i;return o<=a};e,n,h;const Ds=self.Bs,ks=self.Ms,Th=ks.Es,jh=ks.As,xh=ks._s,Ls=Th.create(),Ns=Th.create(),Bs=Th.create(),Ws=jh.create(),Vs=xh.create(),js=Th.create(),Hs=Th.create(),Us=Th.create(),zs=Th.create(),Js=Th.create(),qs=Th.create(),Xs=Th.create(),Ys=Th.create(),$s=jh.I(0,0,1,1);Ds.Iy={Cy(t,s,i,e,h,r,n){let o=e[0]*t+e[4]*s+e[8]*i+e[12],a=e[1]*t+e[5]*s+e[9]*i+e[13],l=e[2]*t+e[6]*s+e[10]*i+e[14],u=e[3]*t+e[7]*s+e[11]*i+e[15],c=h[0]*o+h[4]*a+h[8]*l+h[12]*u,f=h[1]*o+h[5]*a+h[9]*l+h[13]*u,d=h[2]*o+h[6]*a+h[10]*l+h[14]*u,p=h[3]*o+h[7]*a+h[11]*l+h[15]*u;return 0!=p&&(f*=p=1/p,d*=p,n[0]=(.5*(c*=p)+.5)*r[2]+r[0],n[1]=(.5*f+.5)*r[3]+r[1],n[2]=.5*(1+d),!0)},Py(t,s,i,e,h,r,n){const o=Vs,a=Ws;return xh.multiply(o,h,e),null!==xh.P(o,o)&&(a[0]=(t-r[0])/r[2]*2-1,a[1]=(s-r[1])/r[3]*2-1,a[2]=2*i-1,a[3]=1,jh.Wt(a,a,o),0!==a[3])&&(a[3]=1/a[3],n[0]=a[0]*a[3],n[1]=a[1]*a[3],n[2]=a[2]*a[3],!0)},Ey(t,s,i,e,h,r,n){const o=Ls,a=Ns;if(!Ds.Iy.Py(t,s,0,e,h,r,o))return!1;if(!Ds.Iy.Py(t,s,1,e,h,r,a))return!1;let l=Ns,u=(Th.B(l,a,o),Bs),c=(Th.set(u,0,0,1),-i),f=Th.Ot(u,l),d=0;if(0===f){const p=Th.Ot(u,o)+c;if(0!==p)return!1}else if((d=-(Th.Ot(o,u)+c)/f)<0)return!1;return Th.Pt(n,o,l,d),!0}};class Ks{constructor(){this.x=NaN,this.y=NaN,this.z=NaN,this.w=NaN,this.Ty=NaN,this.Gy=NaN,this._y=NaN}set(t,s,i,e){this.x=t,this.y=s,this.z=i,this.w=e,this.Ty=0<t?1:0,this.Gy=0<s?1:0,this._y=0<i?1:0}}Ds.Iy.Ay=class{constructor(){this.Ry=new Ks,this.Fy=new Ks,this.Oy=new Ks,this.Dy=new Ks,this.ky=new Ks,this.Ly=new Ks}Ny(t,s){const i=$s;Ds.Iy.Py(0,1,0,t,s,i,js),Ds.Iy.Py(1,1,0,t,s,i,Hs),Ds.Iy.Py(0,0,0,t,s,i,Us),Ds.Iy.Py(1,0,0,t,s,i,zs),Ds.Iy.Py(0,1,1,t,s,i,Js),Ds.Iy.Py(1,1,1,t,s,i,qs),Ds.Iy.Py(0,0,1,t,s,i,Xs),Ds.Iy.Py(1,0,1,t,s,i,Ys),e(Us,js,Js,this.Ry),e(js,Hs,qs,this.Fy),e(Hs,zs,Ys,this.Oy),e(zs,Us,Xs,this.Dy),e(Xs,Js,qs,this.Ly),e(zs,Hs,js,this.ky)}By(t,s,i,e,h,r){return n(t,s,i,e,h,r,this.Ry)&&n(t,s,i,e,h,r,this.Fy)&&n(t,s,i,e,h,r,this.Oy)&&n(t,s,i,e,h,r,this.Dy)&&n(t,s,i,e,h,r,this.ky)&&n(t,s,i,e,h,r,this.Ly)}Wy(t,s,i){return!h(t,s,i,this.ky)}}}{const Zs=self.Bs,Qs=self.Ms,Th=Qs.Es,jh=Qs.As,xh=Qs._s,ti=xh.create(),si=Th.I(0,0,0),ii=Th.I(0,0,0),ei=Th.I(0,0,0),hi=Th.I(0,1,0),ri=(jh.I(0,0,0,0),new Zs.ou),ni=new Zs.Rect,oi=new Zs.ou(0,0,1,0,1,1,0,1),ai={Vy:1,jy:1e4},li=xh.I(1,0,0,0,0,1,0,0,0,0,.5,0,0,0,.5,1);Zs.Iy.Hy=class{constructor(t){t=Object.assign({},ai,t),this.dg=0,this.pg=0,this.Uy=Zs.Ir(45),this.zy=Math.tan(this.Uy/2),this.Jy=xh.create(),this.qy=xh.create(),this.Xy=!1,this.Yy=t.Vy,this.$y=t.jy,this.Ky=[],this.Zy=new Map,this.Qy=null,this.iw=null,this.ew=null,this.hw=null,this.rw=null,this.ow=null,this.aw=null,this.lw=null,this.uw=null,this.fw=null,this.dw=null,this.pw=null,this.mw=new Map,this.gw=null,this.yw=[],this.ww=new Map,this.Sw=0,this.bw=0,this.Mw=1,this.xw=[this.Mw],this.Tw=1,this.Gw=[this.Tw],this._w=.5,this.Iw=[this._w],this.Cw=0,this.Pw=!0,this.Ew=!1}Aw(t){let s=0,i=t.length,e=0;for(;s<i;)t[s++]=e,t[s++]=e+1,t[s++]=e+2,t[s++]=e,t[s++]=e+2,t[s++]=e+3,e+=4}Rw(){this.Sw=0,this.bw=0,this.Qy=null,this.iw=null,this.ew=null,this.hw=null,this.rw=null,this.ow=null,this.aw=null,this.lw=null,this.uw=null,this.fw=null,this.dw=null,this.pw=null,this.Fw()}Ow(){this.Rw(),this.gw=null}Dw(){for(const t of this.Ky)t.Sr();this.Rw()}Em(){return this.dg}Wm(){return this.pg}kw(t){return this.Lw()?100:t/(2*this.Nw())}Bw(t){if(this.Lw()){const s=t/(2*this.Nw());return s/this.kw(t)}return 1}Ww(t){this.Yy=t}Vw(){return this.Yy}jw(t){this.$y=t}Hw(){return this.$y}Uw(t){this.Uy=t,this.zy=Math.tan(this.Uy/2)}zw(){return this.Uy}Nw(){return this.zy}Jw(){this.Xy=!1}qw(){this.Xy=!0}Lw(){return!this.Xy}Xw(){return this.Xy}Yw(t,s,i=.5,e=.5){const h=this.Vw(),r=this.Hw(),n=this.zw();if(.5===i&&.5===e)this.$w()?xh.Mt(t,n,s,h,r):xh.perspective(t,n,s,h,r);else{const o=2*(i=1-i)-2,a=2*i,l=2*e-2,u=2*e,c=this.Nw()*h,f=c*s;xh.bt(t,o*f,a*f,l*c,u*c,h,r),this.$w()&&xh.mul(t,li,t)}}Kw(t,s,i,e=1){const h=self.devicePixelRatio,r=2*this.kw(i)*h*this.Nw()/i,n=s*r/(2*h*e),o=i*r/(2*h*e),a=-n,l=n,u=-o,c=o;this.$w()?xh.Gt(t,a,l,u,c,this.Vw(),this.Hw()):xh.ortho(t,a,l,u,c,this.Vw(),this.Hw())}Zw(t,s,i,e,h,r=1){let n=1;this.Lw()&&(n=200*this.Nw()/h);const o=ei,a=(Th.set(o,n,-n,1),si),l=ii;Th.multiply(a,s,o),Th.multiply(l,i,o),xh._t(t,a,l,e||hi),o[2]=r,xh.scale(t,t,o)}Qw(t,s,i,e,h,r,n,o){return Th.set(si,t,s,i),Th.set(ii,e,h,r),this.Zw(ti,si,ii,hi,n,o),ti}tS(t){this.Ky.push(t),this.Zy.set(t.uf(),t)}sS(t){const s=this.Ky.indexOf(t);-1!==s&&this.Ky.splice(s,1),this.Zy.delete(t.uf())}Fw(){Zs.Un(this.Ky),this.Zy.clear()}iS(t){return this.Zy.get(t)||null}eS(){return this.Qy}hS(){this.rS(this.Qy)}nS(){return this.iw}oS(){this.rS(this.iw)}aS(){this.rS(this.ew)}lS(){this.rS(this.hw)}uS(){this.rS(this.rw)}cS(){this.rS(this.ow)}fS(){this.rS(this.aw)}dS(){this.rS(this.lw)}pS(){this.rS(this.uw)}mS(){this.rS(this.fw)}gS(){this.rS(this.dw)}yS(){this.rS(this.pw)}wS(t){this.gw=t}SS(){return this.gw}bS(t,s,i,e){let h=Zs.Iy.MS.vS(t,s,i,e),r=this.mw.get(h);return r||(r=Zs.wr(Zs.Iy.MS,this,t,s,i,e),this.mw.set(h,r)),r.xS(),r}TS(t){t.GS(),0===t._S()&&(this.gw===t&&(this.gw=null),this.mw.delete(t.IS()),t.Sr())}CS(t){Zs.Un(this.yw),this.ww.clear();let s=0;for(const i of t){const e=i[0],h=i[1],r=i[2];this.yw.push([h,r]),this.ww.set(e,{number:s,PS:h,ES:r}),s++}}AS(t){return this.yw[t]}RS(t){return this.AS(t)[0]}FS(t){return this.AS(t)[1]}OS(t){const s=this.ww.get(t);if(void 0===s)throw new Error("invalid blend name");return s}DS(t){const s=this.ww.get(t);if(void 0===s)throw new Error("invalid blend name");return s.number}kS(t){this.Sw=t}LS(){return this.Sw}NS(t){this.bw=t,this.gw=null}BS(){return this.bw}zm(t,s,i,e){const h=Zs.Ar(t,s,i,e),r=Math.sin(h),n=Math.cos(h),o=.5*this.Mw,a=r*o,l=n*o,u=this.Tw;2===u?this.WS(t,s,0,i,e,0,a,l):1===u?this.VS(t,s,0,i,e,0,a,l):this.jS(t,s,0,i,e,0,a,l)}HS(t,s,i,e,h,r){const n=Zs.Ar(t,s,e,h),o=Math.sin(n),a=Math.cos(n),l=.5*this.Mw,u=o*l,c=a*l,f=this.Tw;2===f?this.WS(t,s,i,e,h,r,u,c):1===f?this.VS(t,s,i,e,h,r,u,c):this.jS(t,s,i,e,h,r,u,c)}WS(t,s,i,e,h,r,n,o){const a=this._w,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=2*o,p=2*n,m=l+n,g=u-o,y=l-n+d,w=u+o+p,S=c+n,b=f-o,v=c-n-d,M=f+o-p;this.US(m,g,i,S,b,r,v,M,r,y,w,i,oi)}VS(t,s,i,e,h,r,n,o){const a=this._w,l=t+a-o,u=s+a-n,c=e+a+o,f=h+a+n,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,w=f-o,S=c-n,b=f+o;this.US(d,p,i,y,w,r,S,b,r,m,g,i,oi)}jS(t,s,i,e,h,r,n,o){const a=this._w,l=t+a,u=s+a,c=e+a,f=h+a,d=l+n,p=u-o,m=l-n,g=u+o,y=c+n,w=f-o,S=c-n,b=f+o;this.US(d,p,i,y,w,r,S,b,r,m,g,i,oi)}zS(t,s,i,e,h,r){const n=Zs.Ar(t,s,i,e),o=Math.sin(n),a=Math.cos(n),l=.5*this.Mw,u=o*l,c=a*l,f=this.Tw;2===f?this.JS(t,s,i,e,u,c,h,r):1===f?this.qS(t,s,i,e,u,c,h,r):this.XS(t,s,i,e,u,c,h,r)}JS(t,s,i,e,h,r,n,o){const a=this._w,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=2*r,p=2*h,m=l+h,g=u-r,y=l-h+d,w=u+r+p,S=c+h,b=f-r,v=c-h-d,M=f+r-p;ri.set(m,g,S,b,v,M,y,w),ni.set(n,0,o,0),this.YS(ri,ni)}qS(t,s,i,e,h,r,n,o){const a=this._w,l=t+a-r,u=s+a-h,c=i+a+r,f=e+a+h,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,w=f-r,S=c-h,b=f+r;ri.set(d,p,y,w,S,b,m,g),ni.set(n,0,o,0),this.YS(ri,ni)}XS(t,s,i,e,h,r,n,o){const a=this._w,l=t+a,u=s+a,c=i+a,f=e+a,d=l+h,p=u-r,m=l-h,g=u+r,y=c+h,w=f-r,S=c-h,b=f+r;ri.set(d,p,y,w,S,b,m,g),ni.set(n,0,o,0),this.YS(ri,ni)}$S(t,s,i,e){const h=.5*this.Mw,r=this.Tw;2===r?this.KS(t,s,i,e,h):1===r?this.ZS(t,s,i,e,h):this.QS(t,s,i,e,h)}KS(t,s,i,e,h){this.WS(t,s,0,i,s,0,0,h),this.WS(i,s,0,i,e,0,h,0),this.WS(i,e,0,t,e,0,0,-h),this.WS(t,e,0,t,s,0,-h,0)}ZS(t,s,i,e,h){this.VS(t,s,0,i,s,0,0,h),this.VS(i,s,0,i,e,0,h,0),this.VS(i,e,0,t,e,0,0,-h),this.VS(t,e,0,t,s,0,-h,0)}QS(t,s,i,e,h){this.jS(t,s,0,i,s,0,0,h),this.jS(i,s,0,i,e,0,h,0),this.jS(i,e,0,t,e,0,0,-h),this.jS(t,e,0,t,s,0,-h,0)}tb(t){this.$S(t.Al(),t.Rl(),t.Fl(),t.Ol())}sb(t){const s=Zs.Ar(t.cn(),t.fn(),t.dn(),t.pn()),i=Math.sin(s),e=Math.cos(s),h=.5*this.Mw,r=i*h,n=e*h,o=this.Tw;2===o?this.ib(t,r,n):1===o?this.eb(t,r,n):this.hb(t,r,n)}ib(t,s,i){this.WS(t.cn(),t.fn(),0,t.dn(),t.pn(),0,s,i),this.WS(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.WS(t.mn(),t.gn(),0,t.yn(),t.wn(),0,-s,-i),this.WS(t.yn(),t.wn(),0,t.cn(),t.fn(),0,-i,s)}eb(t,s,i){this.VS(t.cn(),t.fn(),0,t.dn(),t.pn(),0,s,i),this.VS(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.VS(t.mn(),t.gn(),0,t.yn(),t.wn(),0,-s,-i),this.VS(t.yn(),t.wn(),0,t.cn(),t.fn(),0,-i,s)}hb(t,s,i){this.jS(t.cn(),t.fn(),0,t.dn(),t.pn(),0,s,i),this.jS(t.dn(),t.pn(),0,t.mn(),t.gn(),0,i,-s),this.jS(t.mn(),t.gn(),0,t.yn(),t.wn(),0,-s,-i),this.jS(t.yn(),t.wn(),0,t.cn(),t.fn(),0,-i,s)}rb(t){this.Mw=t,this.xw[this.xw.length-1]=t}nb(){return this.Mw}ob(t){if(100<=this.xw.length)throw new Error("pushed too many line widths - check push/pop pairs");this.xw.push(t),this.Mw=t}ab(){if(this.xw.length<=1)throw new Error("cannot pop last line width - check push/pop pairs");this.xw.pop(),this.Mw=this.xw.at(-1)}lb(){this.Tw=0,this.Gw[this.Gw.length-1]=0}ub(){this.Tw=1,this.Gw[this.Gw.length-1]=0}cb(){this.Tw=2,this.Gw[this.Gw.length-1]=0}fb(t){if("butt"===t)this.pb();else if("square"===t)this.mb();else{if("zag"!==t)throw new Error("invalid line cap");this.gb()}}pb(){if(100<=this.Gw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Gw.push(0),this.Tw=0}mb(){if(100<=this.Gw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Gw.push(1),this.Tw=1}gb(){if(100<=this.Gw.length)throw new Error("pushed too many line caps - check push/pop pairs");this.Gw.push(2),this.Tw=2}yb(){if(this.Gw.length<=1)throw new Error("cannot pop last line cap - check push/pop pairs");this.Gw.pop(),this.Tw=this.Gw.at(-1)}wb(t){this._w=t,this.Iw[this.Iw.length-1]=t}Sb(){return this._w}bb(t){if(100<=this.Iw.length)throw new Error("pushed too many line offsets - check push/pop pairs");this.Iw.push(t),this._w=t}vb(){if(this.Iw.length<=1)throw new Error("cannot pop last line offset - check push/pop pairs");this.Iw.pop(),this._w=this.Iw.at(-1)}Mb(s){const t=s.length/2;if(t<3)throw new Error("need at least 3 points");const i=t-2,e=i-1,h=s[0],r=s[1];for(let t=0;t<i;t+=2){const n=2*t,o=s[2+n],a=s[3+n],l=s[4+n],u=s[5+n];if(t===e)this.xb(h,r,o,a,l,u,l,u);else{const c=s[6+n],f=s[7+n];this.xb(h,r,o,a,l,u,c,f)}}}Tb(){return 3}Gb(){this._b(!0),this.Cw++}Ib(){return this.Cw}Cb(){this.Cw++}Pb(t){this.Pw=!!t}Eb(){return this.Pw}Ab(t){this.Ew=!!t}Rb(){return this.Ew}Fb(){return!1}$w(){return!1}Ob(){}Db(){}kb(){}Lb(){return this.Ob()+this.Db()+this.kb()}Nb(){return Zs.wr(Zs.Iy.Bb,this)}}}{const ui=self.Bs;ui.Iy.Wb=class{constructor(t,s){this.Mr=s.name,this.Vb=t,this.jb=s.Hb||0,this.Ub=s.zb||0,this.Jb=!!s.qb,this.Xb=!!s.Yb,this.$b=!!s.Kb,this.Zb=!!s.Qb,this.tv=!!s.sv,this.hv=!!s.rv,this.nv=!!s.ov,this.av=!1,this.lv=this.Jb||this.hv||0!==this.jb||0!==this.Ub}Sr(){this.Vb=null}uv(){return this.Vb}uf(){return this.Mr}cv(){return 0!==this.jb||0!==this.Ub}dv(){return this.jb}pv(){return this.Ub}gv(){return this.Jb}yv(){return this.Xb}wv(){return this.$b}Sv(){return this.Zb}bv(){return this.tv}vv(){return this.hv}Mv(){return this.nv}xv(){return this.av}Tv(){return this.lv}Gv(){return!1}}}{const ci=self.Bs;ci.Iy.MS=class{constructor(t,s,i,e,h){this.Vb=t,this.E1=0,this._v=null,this.Iv="",this.Cv=i,this.Pv=ci.wr(ci.$o),this.Pv.set(e),this.Ev=h,"string"==typeof s?this.Iv=s:(this._v=s,this.Iv=this._v.uf())}Sr(){if(0<this.E1)throw new Error("releasing state group still in use");this.Vb=null,this._v=null,this.Iv=""}Av(){const t=this.Vb;t.rS(this._v),t.Rv(this.Cv),t.Fv(this.Pv),t.NS(this.Ev),t.wS(this)}IS(){return ci.Iy.MS.vS(this.Iv,this.Cv,this.Pv,this.Ev)}xS(){++this.E1}GS(){--this.E1}_S(){return this.E1}Ov(){this._v=null}Dv(t){if(this._v=t.iS(this.Iv),!this._v)throw new Error("failed to restore shader program")}static vS(t,s,i,e){const h="string"==typeof t?t:t.uf();return h+","+s+","+i.da()+","+i.pa()+","+i.ya()+","+i.wa()+","+e}}}{let e=function(t,s,i){const e=i.cn(),h=i.fn(),r=i.dn()-e,n=i.pn()-h,o=i.yn()-e,a=i.wn()-h,l=r*t,u=n*t,c=o*s,f=a*s;return[e+l+c,h+u+f]};e;const _=self.Bs,fi=_.wr(_.ou);_.Iy.kv=class{constructor(t,s,i){this.Lv=t,this.Nv=s,this.Bv=i,this.ol=NaN,this.al=NaN,this.Ev=NaN,this.Wv=NaN,this.Vv=NaN,this.ol=0,this.al=0,this.Ev=0,this.Wv=0,this.Vv=0}jv(t,s,i,e){this.ol=t,this.al=s,this.Wv=i,this.Vv=e}Hv(){return this.ol}Uv(t){this.ol!==t&&(this.ol=t,this.Lv.zv())}Jv(){return this.al}qv(t){this.al!==t&&(this.al=t,this.Lv.zv())}Xv(){return this.Ev}Yv(t){this.Ev!==t&&(this.Ev=Math.max(t,0),this.Lv.zv())}$v(){return this.Wv}Kv(t){this.Wv=t}Zv(){return this.Vv}Qv(t){this.Vv=t}tM(t,s,i){[this.ol,this.al]=e(t.ol,t.al,s),this.Ev=t.Ev,this.Wv=_.kt(i.Al(),i.Fl(),t.Wv),this.Vv=_.kt(i.Rl(),i.Ol(),t.Vv)}sM(t,s,i){[this.ol,this.al]=e(t.ol,t.al,s),this.Ev=t.Ev,[this.Wv,this.Vv]=e(t.Wv,t.Vv,i)}iM(){return{x:this.Hv(),y:this.Jv(),z:this.Xv(),u:this.$v(),v:this.Zv()}}eM(t){this.Uv(t.x),this.qv(t.y),t.hasOwnProperty("z")&&this.Yv(t.z),this.Kv(t.u),this.Qv(t.v)}hM(){return this.Lv}rM(){return this.Nv}nM(){return this.Bv}},_.Iy.oM=class{constructor(i,t,s){if(i<2||t<2)throw new Error("invalid mesh size");this.aM=i,this.lM=t,this.uM=s||null,this.cM=[],this.fM=0,this.dM=0,this.pM=1,this.mM=1,this.gM=0,this.yM=!1;const e=i-1,h=t-1;for(let s=0;s<t;++s){const r=[];for(let t=0;t<i;++t){const n=_.wr(_.Iy.kv,this,t,s),o=t/e,a=s/h;n.jv(o,a,o,a),r.push(n)}this.cM.push(r)}}Sr(){_.Un(this.cM)}wM(){return this.aM}SM(){return this.lM}bM(){return this.uM}vM(){return this.cM}zv(){this.yM=!0}MM(){if(this.yM){let t=1/0,s=1/0,i=-1/0,e=-1/0,h=0;for(const r of this.cM)for(const n of r){const o=n.Hv(),a=n.Jv();t=Math.min(t,o),s=Math.min(s,a),i=Math.max(i,o),e=Math.max(e,a),h=Math.max(h,n.Xv())}this.fM=t,this.dM=s,this.pM=i,this.mM=e,this.gM=h,this.yM=!1}}xM(){return this.MM(),this.fM}TM(){return this.MM(),this.dM}GM(){return this.MM(),this.pM}_M(){return this.MM(),this.mM}IM(){return this.MM(),this.gM}CM(){return 0<this.IM()}PM(t,s){return t=Math.floor(t),s=Math.floor(s),t<0||t>=this.aM||s<0||s>=this.lM?null:this.cM[s][t]}EM(t,i,e){const h=e instanceof _.Rect;if(t.wM()!==this.wM()||t.SM()!==this.SM())throw new Error("source mesh wrong size");const r=t.cM,n=this.cM;for(let t=0,s=n.length;t<s;++t){const o=r[t],a=n[t];for(let t=0,s=a.length;t<s;++t){const l=o[t],u=a[t];h?u.tM(l,i,e):u.sM(l,i,e)}}}AM(r){let n=this.cM,o=n[0];for(let t=1,s=n.length;t<s;++t){let i=n[t],e=o[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const a=o[t],l=i[t];fi.set(e.$v(),e.Zv(),a.$v(),a.Zv(),l.$v(),l.Zv(),h.$v(),h.Zv()),r.US(e.Hv(),e.Jv(),e.Xv(),a.Hv(),a.Jv(),a.Xv(),l.Hv(),l.Jv(),l.Xv(),h.Hv(),h.Jv(),h.Xv(),fi),e=a,h=l}o=i}}RM(o,a){a=a||((t,s,i)=>[t,s,i]);let t=this.cM,l=t[0];for(let r=1,n=t.length;r<n;++r){let i=t[r],e=l[0],h=i[0];for(let t=1,s=i.length;t<s;++t){const u=l[t],c=i[t],[f,d,p]=a(e.Hv(),e.Jv(),e.Xv()),[m,g,y]=a(u.Hv(),u.Jv(),u.Xv()),[w,S,b]=a(c.Hv(),c.Jv(),c.Xv()),[v,M,x]=a(h.Hv(),h.Jv(),h.Xv());o.HS(f,d,p,m,g,y),o.HS(f,d,p,w,S,b),o.HS(f,d,p,v,M,x),t===s-1&&o.HS(m,g,y,w,S,b),r===n-1&&o.HS(v,M,x,w,S,b),e=u,h=c}l=i}}FM(t){let i=.99999999,e=t.Ju(),h=[],r=this.wM()-1,n=this.SM()-1,o=1/r,a=1/n,l=r-1,u=n-1,c=e[0],f=e[1],d=_.Gr(Math.floor(c*r),0,l),p=_.Gr(Math.floor(f*n),0,u),m=!0,g=0,y=0,w=0,S=-1,b=()=>{c=_.Gr(_.kt(c,g,w),0,1),f=_.Gr(_.kt(f,y,w),0,1),h.push(c,f)};for(let t=0,s=e.length;t<s;t+=2){c=e[t],f=e[t+1],h.push(c,f),d=_.Gr(Math.floor(c*r),0,l),p=_.Gr(Math.floor(f*n),0,u);const v=(t+2)%s;for(g=e[v],y=e[1+v],S=-1;;){if(1e6<h.length)throw new Error("Too many mesh poly points");const M=d*o,x=p*a,T=(d+1)*o,G=(p+1)*a;if(m=_.Mn(c,f,M,x,T,x,T,G),0!==S&&0<=(w=_.vn(c,f,g,y,M,x,T,G,-.001))&&w<=i)b(),m=!m,S=0;else if(0<p&&2!==S&&0<=(w=_.vn(c,f,g,y,M,x,T,x,.001))&&w<=i)b(),p--,m=!1,S=4;else if(d<l&&3!==S&&0<=(w=_.vn(c,f,g,y,T,x,T,G,.001))&&w<=i)b(),d++,m=!1,S=1;else if(0<d&&1!==S&&0<=(w=_.vn(c,f,g,y,M,x,M,G,.001))&&w<=i)b(),d--,m=!0,S=3;else{if(!(p<u&&4!==S&&0<=(w=_.vn(c,f,g,y,M,G,T,G,.001))&&w<=i))break;b(),p++,m=!0,S=2}}}return _.wr(_.Vu,h)}OM(t,s){const i=this.DM(t);this.kM(i),s.Xu(i)}DM(t){const i=[],e=t.Ju();for(let t=0,s=e.length;t<s;t+=2){const h=e[t],r=e[t+1],[n,o]=this.LM(h,r);i.push(n,o)}return i}LM(t,s){const i=this.wM()-1,e=this.SM()-1,h=1/i,r=1/e,n=_.Gr(Math.floor(t*i),0,i-1),o=_.Gr(Math.floor(s*e),0,e-1),a=n*h,l=o*r,u=(n+1)*h,c=(o+1)*r,f=this.PM(n,o),d=this.PM(n+1,o+1),p=_.Mn(t,s,a,l,u,l,u,c),m=p?a+h:a,g=p?l:l+r,y=this.PM(n+(p?1:0),o+(p?0:1)),[w,S,b]=_.xn(t,s,a,l,m,g,u,c);return _.Tn(w,S,b,f.Hv(),f.Jv(),f.Xv(),y.Hv(),y.Jv(),y.Xv(),d.Hv(),d.Jv(),d.Xv())}kM(i){let e=[],h=i[0],r=i[1],n=h-i.at(-2),o=r-i.at(-1);for(let t=0,s=i.length;t<s;t+=2){const a=(t+2)%s,l=i[a],u=i[1+a],c=l-h,f=u-r,d=Math.abs(c)<1e-7&&Math.abs(n)<1e-7&&Math.sign(f)===Math.sign(o),p=Math.abs(f)<1e-7&&Math.abs(o)<1e-7&&Math.sign(c)===Math.sign(n);(!d&&!p&&.001<Math.abs(c/n-f/o)||0==c&&0==f)&&e.push(h,r),h=l,r=u,n=c,o=f}6<=e.length&&e.length<i.length&&_.Xn(i,e)}iM(){return{cols:this.wM(),rows:this.SM(),points:this.cM.map(t=>t.map(t=>t.iM()))}}eM(t){const i=this.wM(),e=this.SM();if(t.cols!==i||t.rows!==e)throw new Error("mesh data wrong size");const h=t.points;for(let s=0;s<e;++s){const r=h[s];for(let t=0;t<i;++t){const n=this.PM(t,s);n.eM(r[t])}}}}}{let d=function(t,s){let i,e,h,r;switch(t){case"rgba8":i=s.RGBA8,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_BYTE;break;case"rgb8":i=s.RGB8,e=s.RGB,h=s.RGB,r=s.UNSIGNED_BYTE;break;case"rgba4":i=s.RGBA4,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_4_4_4_4;break;case"rgb5_a1":i=s.RGB5_A1,e=s.RGBA,h=s.RGBA,r=s.UNSIGNED_SHORT_5_5_5_1;break;case"rgb565":i=s.RGB565,e=s.RGB,h=s.RGB,r=s.UNSIGNED_SHORT_5_6_5;break;default:throw new Error("invalid pixel format")}return{NM:i,BM:e,format:h,type:r}};d;const di=self.Bs,pi=new Set(["rgba8","rgb8","rgba4","rgb5_a1","rgb565"]),mi=new Set(["nearest","bilinear","trilinear"]),gi=new Set(["default","low","high"]),yi=new Set(["clamp-to-edge","repeat","mirror-repeat"]),wi={WM:"clamp-to-edge",VM:"clamp-to-edge",jM:"trilinear",HM:0,UM:"rgba8",zM:!0,JM:"default",premultiplyAlpha:!0,qM:!1,width:-1,height:-1},Si={premultiplyAlpha:!0,flipY:!1},bi=new Set;di.Iy.XM=class{constructor(t){this.Vb=t,this.YM=null,this.dg=0,this.pg=0,this.$M=!0,this.KM="clamp-to-edge",this.ZM="clamp-to-edge",this.QM="trilinear",this.t2=0,this.s2="rgba8",this.i2=!1,this.e2="default",this.E1=0}h2(s,t){if(!("undefined"!=typeof HTMLImageElement&&s instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&s instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&s instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&s instanceof OffscreenCanvas||s instanceof ImageData||s instanceof ArrayBuffer||null===s))throw new Error("invalid texture source");if(t=Object.assign({},wi,t),this.YM)throw new Error("already created texture");if(this.KM=t.WM,this.ZM=t.VM,this.QM=t.jM,this.t2=t.HM,this.s2=t.UM,this.i2=!!t.zM&&this.Vb.Eb(),this.e2=t.JM,!yi.has(this.KM)||!yi.has(this.ZM))throw new Error("invalid wrap mode");if(!mi.has(this.QM))throw new Error("invalid sampling");if(!pi.has(this.s2))throw new Error("invalid pixel format");if(!gi.has(this.e2))throw new Error("invalid mipmap quality");if(this.$M=!0,s instanceof ArrayBuffer||null===s||t.qM){if(this.dg=t.width,this.pg=t.height,s instanceof ArrayBuffer&&s.byteLength!==this.dg*this.pg*4)throw new Error("ArrayBuffer wrong size")}else this.dg=s.width,this.pg=s.height;if(this.dg<=0||this.pg<=0)throw new Error("invalid texture data size");if(t.qM){const o=di.No(this.dg,this.pg),a=o.getContext("2d");a.drawImage(s,0,0,this.dg,this.pg),s=o}const i=di.Ur(this.dg)&&di.Ur(this.pg),e=this.Vb.n2();if(this.dg>e||this.pg>e)throw new Error("texture data exceeds maximum texture size");const h=this.Vb.o2(),r=this.Vb.a2(),n=(this.YM=h.createTexture(),h.bindTexture(h.TEXTURE_2D,this.YM),h.pixelStorei(h.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),h.pixelStorei(h.UNPACK_FLIP_Y_WEBGL,!1),d(this.s2,h));if(this.Vb.l2()||i||!this.u2())if(2<=r){let t;t=this.i2?Math.floor(Math.log2(Math.max(this.dg,this.pg))+1):1,h.texStorage2D(h.TEXTURE_2D,t,n.NM,this.dg,this.pg),s instanceof ArrayBuffer?h.texSubImage2D(h.TEXTURE_2D,0,0,0,this.dg,this.pg,n.format,n.type,new Uint8Array(s)):null!==s&&h.texSubImage2D(h.TEXTURE_2D,0,0,0,n.format,n.type,s)}else s instanceof ArrayBuffer?h.texImage2D(h.TEXTURE_2D,0,n.BM,this.dg,this.pg,0,n.format,n.type,new Uint8Array(s)):null===s?h.texImage2D(h.TEXTURE_2D,0,n.BM,this.dg,this.pg,0,n.format,n.type,null):h.texImage2D(h.TEXTURE_2D,0,n.BM,n.format,n.type,s);else{if(null===s)throw new Error("cannot pass null data when creating a NPOT tiled texture without NPOT support");if((s=s instanceof ArrayBuffer?new ImageData(new Uint8ClampedArray(s),this.dg,this.pg):s)instanceof ImageData){const c=di.No(this.dg,this.pg),f=c.getContext("2d");f.putImageData(s,0,0),s=c}const l=di.No(di.zr(this.dg),di.zr(this.pg)),u=l.getContext("2d");u.imageSmoothingEnabled="nearest"!==this.QM,u.drawImage(s,0,0,this.dg,this.pg,0,0,l.width,l.height),h.texImage2D(h.TEXTURE_2D,0,n.BM,n.format,n.type,l)}null!==s&&this.c2(h),h.bindTexture(h.TEXTURE_2D,null),this.Vb.f2(),this.E1=1,bi.add(this)}d2(t,s,i){if(i=Object.assign({},wi,i),this.YM)throw new Error("already created texture");if(this.KM=i.WM,this.ZM=i.VM,this.QM=i.jM,this.s2=i.UM,this.i2=!!i.zM&&this.Vb.Eb(),this.e2=i.JM,!yi.has(this.KM)||!yi.has(this.ZM))throw new Error("invalid wrap mode");if(!mi.has(this.QM))throw new Error("invalid sampling");if(!pi.has(this.s2))throw new Error("invalid pixel format");if(!gi.has(this.e2))throw new Error("invalid mipmap quality");this.$M=!1,this.dg=Math.floor(t),this.pg=Math.floor(s);const e=di.Ur(this.dg)&&di.Ur(this.pg),h=this.Vb.n2();if(this.dg<=0||this.pg<=0)throw new Error("invalid texture size");if(this.dg>h||this.pg>h)throw new Error("texture exceeds maximum texture size");if(!this.Vb.l2()&&this.u2()&&!e)throw new Error("non-power-of-two tiled textures not supported");const r=this.Vb.o2(),n=this.Vb.a2(),o=(this.YM=r.createTexture(),r.bindTexture(r.TEXTURE_2D,this.YM),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!1),d(this.s2,r)),a=2<=n?o.NM:o.BM;r.texImage2D(r.TEXTURE_2D,0,a,this.dg,this.pg,0,o.format,o.type,null),this.c2(r),r.bindTexture(r.TEXTURE_2D,null),this.Vb.f2(),this.E1=1,bi.add(this)}m2(t){if("default"===this.e2)return this.$M?t.NICEST:t.FASTEST;if("low"===this.e2)return t.FASTEST;if("high"===this.e2)return t.NICEST;throw new Error("invalid mipmap quality")}u2(){return"clamp-to-edge"!==this.KM||"clamp-to-edge"!==this.ZM}g2(t,s){if("clamp-to-edge"===s)return t.CLAMP_TO_EDGE;if("repeat"===s)return t.REPEAT;if("mirror-repeat"===s)return t.MIRRORED_REPEAT;throw new Error("invalid wrap mode")}c2(t){const s=di.Ur(this.dg)&&di.Ur(this.pg);if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,this.g2(t,this.KM)),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,this.g2(t,this.ZM)),"nearest"===this.QM)t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),this.i2=!1;else if(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),(s||this.Vb.l2())&&this.i2){t.hint(t.GENERATE_MIPMAP_HINT,this.m2(t)),t.generateMipmap(t.TEXTURE_2D);const e="trilinear"===this.QM&&!this.Vb.Rb();t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,e?t.LINEAR_MIPMAP_LINEAR:t.LINEAR_MIPMAP_NEAREST)}else t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),this.i2=!1;const i=this.Vb.w2();i&&0<this.t2&&"nearest"!==this.QM&&t.texParameterf(t.TEXTURE_2D,i.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(this.t2,this.Vb.S2()))}b2(t,s){if(!("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLVideoElement&&t instanceof HTMLVideoElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas||t instanceof ImageData))throw new Error("invalid texture source");if(!this.YM||this.E1<=0)throw new Error("texture not created");if(this.$M)throw new Error("cannot update static texture");s=Object.assign({},Si,s);const i=t.width||t.videoWidth,e=t.height||t.videoHeight,h=this.Vb.a2(),r=this.Vb.o2(),n=(r.bindTexture(r.TEXTURE_2D,this.YM),r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,s.premultiplyAlpha),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!!s.flipY),d(this.s2,r)),o=2<=h?n.NM:n.BM;try{if(this.dg===i&&this.pg===e){const a=di.Ur(this.dg)&&di.Ur(this.pg);r.texSubImage2D(r.TEXTURE_2D,0,0,0,n.format,n.type,t),(a||this.Vb.l2())&&this.i2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.m2(r)),r.generateMipmap(r.TEXTURE_2D))}else{this.dg=i,this.pg=e;const l=di.Ur(this.dg)&&di.Ur(this.pg);if(!this.Vb.l2()&&this.u2()&&!l)throw new Error("non-power-of-two tiled textures not supported");r.texImage2D(r.TEXTURE_2D,0,o,n.format,n.type,t),(l||this.Vb.l2())&&this.i2&&(r.hint(r.GENERATE_MIPMAP_HINT,this.m2(r)),r.generateMipmap(r.TEXTURE_2D))}}catch(t){console.error("Error updating WebGL texture: ",t)}r.bindTexture(r.TEXTURE_2D,null),this.Vb.f2()}v2(){if(0<this.E1)throw new Error("texture still has references");if(!this.YM)throw new Error("already deleted texture");bi.delete(this);const t=this.Vb.o2();t.deleteTexture(this.YM),this.YM=null}M2(){return!!this.YM}T2(){return this.YM}uv(){return this.Vb}G2(){this.E1++}_2(){if(this.E1<=0)throw new Error("no more references");this.E1--}I2(){return this.E1}Em(){return this.dg}Wm(){return this.pg}C2(){return this.$M}P2(){let t=this.dg*this.pg;switch(this.s2){case"rgba8":t*=4;break;case"rgb8":t*=3;break;case"rgba4":case"rgb5_a1":case"rgb565":t*=2}return this.i2&&(t+=Math.floor(t/3)),t}static Ov(){bi.clear()}static E2(){return bi.values()}}}{const vi=self.Bs,Mi=self.Ms,Th=Mi.Es,xh=Mi._s,xi=new Set(["nearest","bilinear","trilinear"]),Ti={jM:"trilinear",alpha:!0,depth:!1,A2:!0,R2:!0,F2:0},Gi=new Set;vi.Iy.O2=class{constructor(t){this.Vb=t,this.D2=null,this.L2=null,this.YM=null,this.N2=null,this.dg=0,this.pg=0,this.B2=!0,this.QM="trilinear",this.W2=!0,this.V2=!1,this.j2=!0,this.H2=0,this.U2=xh.create(),this.z2=0,this.J2=0,this.q2=0}X2(t,s,i){i=Object.assign({},Ti,i);const e=this.Vb.a2();if(this.YM||this.N2)throw new Error("already created render target");if(this.QM=i.jM,this.W2=!!i.alpha,this.V2=!!i.depth,this.j2=!!i.A2,this.B2=!!i.R2,this.H2=i.F2,!xi.has(this.QM))throw new Error("invalid sampling");if(0<this.H2&&(e<2||this.j2))throw new Error("invalid use of multisampling");if(e<2&&(this.j2=!0),this.dg=t,this.pg=s,this.dg<=0||this.pg<=0)throw new Error("invalid render target size");this.Y2();const h=this.Vb.o2();if(this.D2=h.createFramebuffer(),this.V2&&(this.L2=h.createFramebuffer()),this.j2){this.YM=this.Vb.K2(this.dg,this.pg,{jM:this.QM,UM:this.W2?"rgba8":"rgb8",zM:!1});const n=this.YM.T2();h.bindFramebuffer(h.FRAMEBUFFER,this.D2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0),this.V2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.L2),h.framebufferTexture2D(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.TEXTURE_2D,n,0))}else{this.N2=h.createRenderbuffer(),h.bindRenderbuffer(h.RENDERBUFFER,this.N2);const o=this.W2?h.RGBA8:h.RGB8;if(0<this.H2){const a=h.getInternalformatParameter(h.RENDERBUFFER,o,h.SAMPLES);if(a&&a[0]){const l=a[0];this.H2>l&&(this.H2=l)}else this.H2=0}0===this.H2?h.renderbufferStorage(h.RENDERBUFFER,o,this.dg,this.pg):h.renderbufferStorageMultisample(h.RENDERBUFFER,this.H2,o,this.dg,this.pg),h.bindFramebuffer(h.FRAMEBUFFER,this.D2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.N2),this.V2&&(h.bindFramebuffer(h.FRAMEBUFFER,this.L2),h.framebufferRenderbuffer(h.FRAMEBUFFER,h.COLOR_ATTACHMENT0,h.RENDERBUFFER,this.N2)),h.bindRenderbuffer(h.RENDERBUFFER,null)}const r=this.Vb.Z2();this.V2&&r&&(h.bindFramebuffer(h.FRAMEBUFFER,this.D2),this.Vb.Q2()?h.framebufferTexture2D(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.TEXTURE_2D,r,0):h.framebufferRenderbuffer(h.FRAMEBUFFER,h.DEPTH_STENCIL_ATTACHMENT,h.RENDERBUFFER,r)),h.bindFramebuffer(h.FRAMEBUFFER,null),Gi.add(this)}tx(t,s){if(this.dg!==t||this.pg!==s){this.dg=t,this.pg=s,this.Y2();const i=this.Vb.o2(),e=(i.bindFramebuffer(i.FRAMEBUFFER,this.D2),this.YM?this.YM.b2(new ImageData(this.dg,this.pg)):(i.bindRenderbuffer(i.RENDERBUFFER,this.N2),i.renderbufferStorage(i.RENDERBUFFER,this.W2?i.RGBA8:i.RGB8,this.dg,this.pg),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.Vb.Z2());this.V2&&e&&(this.Vb.Q2()?i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,e,0):i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,e)),i.bindFramebuffer(i.FRAMEBUFFER,null)}}v2(){if(!this.YM&&!this.N2)throw new Error("already deleted render target");Gi.delete(this);const t=this.Vb.o2(),s=(this.YM?(t.bindFramebuffer(t.FRAMEBUFFER,this.D2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0),this.V2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.L2),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,null,0)),this.Vb.ix(this.YM),this.YM=null):this.N2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.D2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null),this.V2&&(t.bindFramebuffer(t.FRAMEBUFFER,this.L2),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,null)),t.deleteRenderbuffer(this.N2),this.N2=null),t.bindFramebuffer(t.FRAMEBUFFER,null),2<=this.Vb.a2()&&(t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null)),t.deleteFramebuffer(this.D2),this.V2&&t.deleteFramebuffer(this.L2),this.Vb.hx());s.nx=null,this.D2=s.ox=null}Y2(){this.Vb.Yw(this.U2,this.dg/this.pg),this.z2=this.Vb.zw(),this.J2=this.Vb.Vw(),this.q2=this.Vb.Hw()}lx(){return this.D2}ux(){return this.L2}uv(){return this.Vb}mx(){return this.YM}gx(){return this.Vb.zw()===this.z2&&this.Vb.Vw()===this.J2&&this.Vb.Hw()===this.q2||this.Y2(),this.U2}yx(){return"nearest"!==this.QM}wx(){return this.W2}Sx(){return this.j2}bx(){return this.V2}Em(){return this.dg}Wm(){return this.pg}Mx(){return this.B2}xx(){return this.H2}Tx(){const t={jM:this.QM,alpha:this.W2,A2:this.j2};return this.B2||(t.width=this.dg,t.height=this.pg),t}Gx(t){return"nearest"!==(t=Object.assign({},Ti,t)).jM===this.yx()&&!!t.alpha===this.wx()&&!!t.depth===this.bx()&&!(2<=this.Vb.a2()&&!!t.A2!==this.Sx())&&("number"==typeof t.width||"number"==typeof t.height?!this.Mx()&&this.Em()===Math.floor(t.width)&&this.Wm()===Math.floor(t.height):this.Mx())}_x(){return this.YM?this.YM.T2():null}P2(){return this.YM?this.YM.P2():this.dg*this.pg*(this.W2?4:3)}static async Ix(t,s){const i=await t.Cx(s,!0);return vi.Vo(i)}static Ov(){Gi.clear()}static Px(){return Gi.values()}static Ex(t,s){for(const i of Gi)i.Mx()&&i.tx(t,s)}}}{const m=self.Bs,_i=self.Ms,Th=_i.Es,xh=_i._s,Ii=new Set(["aPos","aTex","aPoints","matP","matMV","samplerFront","samplerBack","samplerDepth","destStart","destEnd","srcStart","srcEnd","srcOriginStart","srcOriginEnd","pixelSize","seconds","devicePixelRatio","layerScale","layerAngle","layoutStart","layoutEnd","color","color2_","pointTexStart","pointTexEnd","zElevation","tileSize","tileSpacing","outlineThickness","zNear","zFar"]);m.Iy.Ax=class extends m.Iy.Wb{static async Rx(t,s){const i=t.o2(),e=s.src,h=s.Fx,r=s.name,n=i.createShader(i.FRAGMENT_SHADER),o=(i.shaderSource(n,e),i.compileShader(n),i.createShader(i.VERTEX_SHADER)),a=(i.shaderSource(o,h),i.compileShader(o),i.createProgram()),l=(i.attachShader(a,n),i.attachShader(a,o),i.bindAttribLocation(a,0,"aPos"),i.bindAttribLocation(a,1,"aTex"),i.bindAttribLocation(a,2,"aPoints"),i.linkProgram(a),t.Ox());if(l?await t.Dx(()=>i.getProgramParameter(a,l.COMPLETION_STATUS_KHR)):await m.Nn(5),!i.getShaderParameter(n,i.COMPILE_STATUS)){const c=i.getShaderInfoLog(n);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling fragment shader: "+c)}if(!i.getShaderParameter(o,i.COMPILE_STATUS)){const f=i.getShaderInfoLog(o);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error compiling vertex shader: "+f)}if(!i.getProgramParameter(a,i.LINK_STATUS)){const d=i.getProgramInfoLog(a);throw i.deleteShader(n),i.deleteShader(o),i.deleteProgram(a),new Error("Error linking shader program: "+d)}const u=m.lp(i.getProgramInfoLog(a)||"").trim();return u&&!m.rp(u)&&console.info(`[WebGL] Shader program '${r}' compilation log: `,u),i.deleteShader(n),i.deleteShader(o),a}static async kx(t,s){const i=await m.Iy.Ax.Rx(t,s);return new m.Iy.Ax(t,i,s)}constructor(t,s,i){super(t,i);const e=t.o2(),h=t.hx(),r=(t._b(),e.useProgram(s),this.Lx=e,this._v=s,this.Nx="<default-device-transform>"===i.name,e.getAttribLocation(s,"aPos")),n=e.getAttribLocation(s,"aTex"),o=(this.Bx=e.getAttribLocation(s,"aPoints"),-1!==r&&(e.bindBuffer(e.ARRAY_BUFFER,t.Wx),e.vertexAttribPointer(r,t.Tb(),e.FLOAT,!1,0,0),e.enableVertexAttribArray(r)),-1!==n&&(e.bindBuffer(e.ARRAY_BUFFER,t.Vx),e.vertexAttribPointer(n,2,e.FLOAT,!1,0,0),e.enableVertexAttribArray(n)),-1!==this.Bx&&(e.bindBuffer(e.ARRAY_BUFFER,t.jx),e.vertexAttribPointer(this.Bx,4,e.FLOAT,!1,0,0),e.enableVertexAttribArray(this.Bx)),e.bindBuffer(e.ARRAY_BUFFER,null),this.Hx=new m.Iy.Ux(this,"matP","mat4"),this.zx=new m.Iy.Ux(this,"matMV","mat4"),this.Jx=new m.Iy.Ux(this,"color","vec4"),this.qx=new m.Iy.Ux(this,"samplerFront","sampler"),this.Xx=new m.Iy.Ux(this,"pointTexStart","vec2"),this.Yx=new m.Iy.Ux(this,"pointTexEnd","vec2"),this.$x=new m.Iy.Ux(this,"zElevation","float"),this.Kx=new m.Iy.Ux(this,"tileSize","vec2"),this.Zx=new m.Iy.Ux(this,"tileSpacing","vec2"),this.Qx=new m.Iy.Ux(this,"color2_","vec4"),this.tT=new m.Iy.Ux(this,"outlineThickness","float"),this.sT=new m.Iy.Ux(this,"samplerBack","sampler"),this.iT=new m.Iy.Ux(this,"samplerDepth","sampler"),this.eT=new m.Iy.Ux(this,"destStart","vec2"),this.hT=new m.Iy.Ux(this,"destEnd","vec2"),this.rT=new m.Iy.Ux(this,"srcStart","vec2"),this.nT=new m.Iy.Ux(this,"srcEnd","vec2"),this.oT=new m.Iy.Ux(this,"srcOriginStart","vec2"),this.aT=new m.Iy.Ux(this,"srcOriginEnd","vec2"),this.lT=new m.Iy.Ux(this,"pixelSize","vec2"),this.uT=new m.Iy.Ux(this,"seconds","float"),this.cT=new m.Iy.Ux(this,"devicePixelRatio","float"),this.fT=new m.Iy.Ux(this,"layerScale","float"),this.dT=new m.Iy.Ux(this,"layerAngle","float"),this.pT=new m.Iy.Ux(this,"layoutStart","vec2"),this.mT=new m.Iy.Ux(this,"layoutEnd","vec2"),this.gT=new m.Iy.Ux(this,"zNear","float"),this.yT=new m.Iy.Ux(this,"zFar","float"),this.wT=!!(this.lT.ST()||this.uT.ST()||this.sT.ST()||this.eT.ST()||this.hT.ST()||this.rT.ST()||this.nT.ST()||this.oT.ST()||this.aT.ST()||this.cT.ST()||this.fT.ST()||this.dT.ST()||this.pT.ST()||this.mT.ST()),i.parameters||[]);this.bT=[],this.av=this.lT.ST()||this.rT.ST()||this.nT.ST()||this.oT.ST()||this.aT.ST(),this.vT=!1,this.MT=!1,this.Jx.xT(1,1,1,1),this.Qx.xT(1,1,1,1),this.qx.TT(0),this.sT.TT(1),this.iT.TT(2),this.Xx.GT(0,0),this.Yx.GT(1,1),this.$x._T(0),this.Kx.GT(0,0),this.Zx.GT(0,0),this.eT.GT(0,0),this.hT.GT(1,1),this.rT.GT(0,0),this.nT.GT(0,0),this.oT.GT(0,0),this.aT.GT(0,0),this.lT.GT(0,0),this.cT._T(1),this.gT._T(t.Vw()),this.yT._T(t.Hw()),this.fT._T(1),this.dT._T(0),this.uT._T(0),this.pT.GT(0,0),this.mT.GT(0,0),this.tT._T(1);for(const l of o){const u=l[0],c=l[2],f=new m.Iy.Ux(this,u,c);"color"===c?f.IT(0,0,0):f._T(0),this.bT.push(f)}this.Nx?this.CT(h.PT):(this.ET(h.PT,!0),this.AT(h.RT,!0));const a=h.FT;e.useProgram(a?a._v:null)}Sr(){this.Lx.deleteProgram(this._v),this._v=null,this.Vb.sS(this),this.Lx=null,super.Sr()}OT(){return this.Lx}DT(){return this._v}kT(){return this.bT.length}LT(t){return t<0||t>=this.bT.length?null:this.bT[t].NT()}BT(i){for(let t=0,s=i.length;t<s;++t)if(!this.bT[t].WT(i[t]))return!1;return!0}VT(i){for(let t=0,s=i.length;t<s;++t)this.bT[t].jT(i[t])}HT(t,s,i,e,h,r,n,o,a,l){return!this.sT.ST()&&!(this.lT.ST()&&!this.lT.UT(h,r)||this.eT.ST()&&!this.eT.UT(t.Al(),t.Rl())||this.hT.ST()&&!this.hT.UT(t.Fl(),t.Ol())||this.cT.ST()&&!this.cT.zT(n)||this.fT.ST()&&!this.fT.zT(o)||this.dT.ST()&&!this.dT.zT(a)||this.rT.ST()&&!this.rT.UT(s.Al(),s.Rl())||this.nT.ST()&&!this.nT.UT(s.Fl(),s.Ol())||this.oT.ST()&&!this.oT.UT(i.Al(),i.Rl())||this.aT.ST()&&!this.aT.UT(i.Fl(),i.Ol())||this.pT.ST()&&!this.pT.UT(e.Al(),e.Rl())||this.mT.ST()&&!this.mT.UT(e.Rl(),e.Ol())||this.uT.ST()&&!this.uT.zT(l))}JT(t,s,i,e,h,r,n,o,a,l){this.sT.ST()||(this.lT.ST()&&this.lT.qT(h,r),this.eT.ST()&&this.eT.qT(t.Al(),t.Rl()),this.hT.ST()&&this.hT.qT(t.Fl(),t.Ol()),this.cT.ST()&&this.cT.XT(n),this.fT.ST()&&this.fT.XT(o),this.dT.ST()&&this.dT.XT(a),this.rT.ST()&&this.rT.qT(s.Al(),s.Rl()),this.nT.ST()&&this.nT.qT(s.Fl(),s.Ol()),this.oT.ST()&&this.oT.qT(i.Al(),i.Rl()),this.aT.ST()&&this.aT.qT(i.Fl(),i.Ol()),this.pT.ST()&&this.pT.qT(e.Al(),e.Rl()),this.mT.ST()&&this.mT.qT(e.Rl(),e.Ol()),this.uT.ST()&&this.uT.XT(l))}ET(t,s){this.vT&&!s||this.Nx||(this.Hx.ST()&&this.Hx.YT(t),this.vT=!0)}$T(){this.vT=!1}AT(t,s){this.MT&&!s||this.Nx||(this.zx.ST()&&this.zx.YT(t),this.MT=!0)}KT(){this.MT=!1}CT(t){if(!this.Nx)throw new Error("not device transform shader");this.Hx.YT(t);const s=this.Vb,i=s.Em()/2,e=s.Wm()/2,h=s.Qw(i,e,s.kw(s.Wm()),i,e,0,s.Wm());this.zx.YT(h)}ZT(t){this.Jx.ST()&&this.Jx.QT(t[0],t[1],t[2],t[3])}static tG(){return Ii}static sG(t){const s=t?"highmedp":"mediump";return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","attribute highp vec3 aPos;",`attribute ${s} vec2 aTex;`,`varying ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static iG(t){const s=t?"highp":"mediump";return["#version 300 es","in highp vec3 aPos;",`in ${s} vec2 aTex;`,`out ${s} vec2 vTex;`,"uniform highp mat4 matP;","uniform highp mat4 matMV;","void main(void) {",`	gl_Position = matP * matMV * vec4(aPos, 1.0);`,`	vTex = aTex;`,"}"].join("\n")}static eG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","}"].join("\n")}static hG(){return["#extension GL_EXT_frag_depth : enable","varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\tgl_FragColor = texture2D(samplerFront, vTex) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static rG(){return["#version 300 es","in mediump vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","void main(void) {","\toutColor = texture(samplerFront, vTex) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static nG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","}"].join("\n")}static oG(){return["#extension GL_EXT_frag_depth : enable","#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","varying highmedp vec2 vTex;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highmedp vec2 srcStart;","uniform highmedp vec2 pixelSize;","uniform highmedp vec2 tileSize;","uniform highmedp vec2 tileSpacing;","void main(void) {","\thighmedp vec2 tile = floor(vTex);","\thighmedp vec2 tex = fract(vTex);","\thighmedp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighmedp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighmedp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\tgl_FragColor = texture2D(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static aG(){return["#version 300 es","in highp vec2 vTex;","out lowp vec4 outColor;","uniform lowp vec4 color;","uniform lowp sampler2D samplerFront;","uniform highp vec2 srcStart;","uniform highp vec2 pixelSize;","uniform highp vec2 tileSize;","uniform highp vec2 tileSpacing;","void main(void) {","\thighp vec2 tile = floor(vTex);","\thighp vec2 tex = fract(vTex);","\thighp vec2 tileOrigin = srcStart + tile * (tileSize + tileSpacing);","\thighp vec2 lowerBound = tileOrigin + pixelSize / 2.0;","\thighp vec2 upperBound = tileOrigin + tileSize - pixelSize / 2.0;","\toutColor = texture(samplerFront, clamp(tex, lowerBound, upperBound), -16.0) * color;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static lG(t,s,i){let e="";return 2<=t?e="#version 300 es\n":(s&&(e="#extension GL_EXT_frag_depth : enable\n"),i&&(e+="#extension GL_EXT_shader_texture_lod : enable\n#extension GL_OES_standard_derivatives : enable\n")),e+`
#ifdef GL_FRAGMENT_PRECISION_HIGH
#define highmedp highp
#else
#define highmedp mediump
#endif
precision highmedp float;
${2<=t?"in":"varying"} vec2 vTex;
${2<=t?"out lowp vec4 outColor;":""}
uniform lowp vec4 color;
uniform lowp sampler2D samplerFront;
uniform vec2 pixelSize;

uniform vec2 tileSize;
uniform vec2 tileSpacing;
uniform float outlineThickness;

const float PI = 3.1415926;

lowp vec4 cospVec4(lowp vec4 a, lowp vec4 b, float x)
{
	return (a + b + (a - b) * cos(x * PI)) / 2.0;
}

vec3 randVec3(vec2 seed)
{
	return vec3(fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(12.9898,78.233))) * 43758.5453),
				fract(sin(dot(seed.yx + vec2(0.1, 0.1), vec2(12.9898,-78.233))) * 43758.5453),
				fract(sin(dot(seed.xy + vec2(0.1, 0.1), vec2(-12.9898,-78.233))) * 43758.5453));
}

lowp vec4 sampleTile(vec2 tile, vec2 uv, vec2 ddx, vec2 ddy)
{
	vec2 posRandom = tileSize;
	float angleRandom = outlineThickness;
	
	vec3 rand = (randVec3(floor(tile + 0.5)) - 0.5) * 2.0;
	
	float angle = angleRandom * rand.z * PI;
	float sin_a = sin(angle);
	float cos_a = cos(angle);
	float aspect = pixelSize.x / pixelSize.y;

	vec2 mid = tile + vec2(0.5, 0.5);
	vec2 dp = uv - mid;
	dp.x /= aspect;
	vec2 r = vec2(dp.x * cos_a - dp.y * sin_a,
				  dp.y * cos_a + dp.x * sin_a);
	r.x *= aspect;

	vec2 p = mid + r + (posRandom * rand.xy / 2.0);
	
	${2<=t?"return textureGrad(samplerFront, p, ddx, ddy);":""}
	${t<2&&i?"return texture2DGradEXT(samplerFront, p, ddx, ddy);":""}
	${t<2&&!i?"return texture2D(samplerFront, p);":""}
}

void main(void) {
	
	${t<2?"lowp vec4 outColor;":""}
	
	float blendMarginX = tileSpacing.x;
	float blendMarginY = tileSpacing.y;
	
	vec2 tile = floor(vTex);
	vec2 tex = fract(vTex);
	vec2 ddx = ${2<=t||i?"dFdx(vTex)":"vec2(0.0, 0.0)"};
	vec2 ddy = ${2<=t||i?"dFdy(vTex)":"vec2(0.0, 0.0)"};
	
	vec4 curTile = sampleTile(tile, vTex, ddx, ddy);
	
	bool inLeftMargin = (tex.x < blendMarginX);
	bool inRightMargin = (tex.x > 1.0 - blendMarginX);
	bool inTopMargin = (tex.y < blendMarginY);
	bool inBottomMargin = (tex.y > 1.0 - blendMarginY);
	
	if (inLeftMargin)
	{
		lowp vec4 leftTile = sampleTile(tile + vec2(-1.0, 0.0), vTex, ddx, ddy);
		float leftMix = (tex.x / (blendMarginX * 2.0)) + 0.5;
		lowp vec4 leftMixedTile = cospVec4(leftTile, curTile, leftMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =     sampleTile(tile + vec2(0.0,  -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftTile = sampleTile(tile + vec2(-1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topLeftMixedTile = cospVec4(topLeftTile, topTile, leftMix);
			
			outColor = cospVec4(topLeftMixedTile, leftMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =     sampleTile(tile + vec2(0.0,  1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftTile = sampleTile(tile + vec2(-1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomLeftMixedTile = cospVec4(bottomLeftTile, bottomTile, leftMix);
			
			outColor = cospVec4(leftMixedTile, bottomLeftMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = leftMixedTile;
		}
	}
	else if (inRightMargin)
	{
		lowp vec4 rightTile = sampleTile(tile + vec2(1.0, 0.0), vTex, ddx, ddy);
		float rightMix = (tex.x - (1.0 - blendMarginX)) / (blendMarginX * 2.0);
		lowp vec4 rightMixedTile = cospVec4(curTile, rightTile, rightMix);
		
		if (inTopMargin)
		{
			lowp vec4 topTile =      sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightTile = sampleTile(tile + vec2(1.0, -1.0), vTex, ddx, ddy);
			lowp vec4 topRightMixedTile = cospVec4(topTile, topRightTile, rightMix);
			
			outColor = cospVec4(topRightMixedTile, rightMixedTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
		}
		else if (inBottomMargin)
		{
			lowp vec4 bottomTile =      sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightTile = sampleTile(tile + vec2(1.0, 1.0), vTex, ddx, ddy);
			lowp vec4 bottomRightMixedTile = cospVec4(bottomTile, bottomRightTile, rightMix);
			
			outColor = cospVec4(rightMixedTile, bottomRightMixedTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
		}
		else
		{
			outColor = rightMixedTile;
		}
	}
	else if (inTopMargin)
	{
		lowp vec4 topTile = sampleTile(tile + vec2(0.0, -1.0), vTex, ddx, ddy);
		outColor = cospVec4(topTile, curTile, (tex.y / (blendMarginY * 2.0)) + 0.5);
	}
	else if (inBottomMargin)
	{
		lowp vec4 bottomTile = sampleTile(tile + vec2(0.0, 1.0), vTex, ddx, ddy);
		outColor = cospVec4(curTile, bottomTile, (tex.y - (1.0 - blendMarginY)) / (blendMarginY * 2.0));
	}
	else
	{
		outColor = curTile;
	}
	
	outColor *= color;
	${t<2?"gl_FragColor = outColor;":""}
	${2<=t?"gl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
	${t<2&&s?"gl_FragDepthEXT = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);":""}
}
`}static uG(){return["attribute vec4 aPoints;","varying float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static cG(){return["#version 300 es","in vec4 aPoints;","out float pointOpacity;","uniform float zElevation;","uniform mat4 matP;","uniform mat4 matMV;","void main(void) {","\tgl_Position = matP * matMV * vec4(aPoints.xy, zElevation, 1.0);","\tgl_PointSize = aPoints.z;","\tpointOpacity = aPoints.w;","}"].join("\n")}static fG(){return["uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","}"].join("\n")}static dG(){return["#extension GL_EXT_frag_depth : enable","uniform lowp sampler2D samplerFront;","varying lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\tgl_FragColor = texture2D(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepthEXT = (gl_FragColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static pG(){return["#version 300 es","uniform lowp sampler2D samplerFront;","in lowp float pointOpacity;","uniform mediump vec2 pointTexStart;","uniform mediump vec2 pointTexEnd;","uniform lowp vec4 color;","out lowp vec4 outColor;","void main(void) {","\tmediump vec2 pointTexMin = min(pointTexStart, pointTexEnd);","\tmediump vec2 pointTexMax = max(pointTexStart, pointTexEnd);","\tmediump vec2 pointCoord = (pointTexEnd.x > pointTexStart.x ? gl_PointCoord : vec2(1.0 - gl_PointCoord.y, gl_PointCoord.x));","\toutColor = texture(samplerFront, mix(pointTexMin, pointTexMax, pointCoord)) * color * pointOpacity;","\tgl_FragDepth = (outColor.a == 0.0 ? 1.0 : gl_FragCoord.z);","}"].join("\n")}static mG(){return["uniform lowp vec4 color;","void main(void) {","\tgl_FragColor = color;","}"].join("\n")}static gG(){return["precision lowp float;","varying mediump vec2 vTex;","uniform vec4 color;","uniform vec4 color2_;","vec3 fromLinear(vec3 linearRGB)","{","\tbvec3 cutoff = lessThan(linearRGB, vec3(0.0031308));","\tvec3 higher = vec3(1.055) * pow(abs(linearRGB), vec3(1.0/2.4)) - vec3(0.055);","\tvec3 lower = linearRGB * vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","vec3 toLinear(vec3 sRGB)","{","\tbvec3 cutoff = lessThan(sRGB, vec3(0.04045));","\tvec3 higher = pow(abs((sRGB + vec3(0.055))/vec3(1.055)), vec3(2.4));","\tvec3 lower = sRGB/vec3(12.92);","\treturn mix(higher, lower, vec3(cutoff));","}","void main(void) {","\tvec3 linearGrad = mix(toLinear(color.rgb), toLinear(color2_.rgb), vTex.x);","\tfloat a = mix(color.a, color2_.a, vTex.x);","\tgl_FragColor = vec4(fromLinear(linearGrad) * a, a);","}"].join("\n")}static yG(){return["#ifdef GL_FRAGMENT_PRECISION_HIGH","#define highmedp highp","#else","#define highmedp mediump","#endif","precision lowp float;","varying highmedp vec2 vTex;","uniform vec4 color;","void main(void) {",`	highmedp float grad = vTex.x / (1.0 - vTex.y);`,`	gl_FragColor = color * (1.0 - (cos(grad * 3.141592653589793) + 1.0) / 2.0);`,"}"].join("\n")}static wG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tlowp float f = 1.0 - abs(vTex.y - 0.5) * 2.0;","\tgl_FragColor = color * f;","}"].join("\n")}static SG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float f = step(diffSq.x + diffSq.y, 0.25);","\tgl_FragColor = color * f;","}"].join("\n")}static bG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump float innerF = step(distSq, 0.25);","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm * outlineThickness;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float outerF = step(innerEdgeSq.x + innerEdgeSq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}static vG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 innerEdge = halfNorm - pixelSize * norm;","\tmediump vec2 innerEdgeSq = innerEdge * innerEdge;","\tmediump float f = smoothstep(halfNormSq.x + halfNormSq.y, innerEdgeSq.x + innerEdgeSq.y, diffSq.x + diffSq.y);","\tgl_FragColor = color * f;","}"].join("\n")}static MG(){return["varying mediump vec2 vTex;","uniform lowp vec4 color;","uniform mediump vec2 pixelSize;","uniform mediump float outlineThickness;","void main(void) {","\tmediump vec2 diff = vTex - vec2(0.5, 0.5);","\tmediump vec2 diffSq = diff * diff;","\tmediump float distSq = diffSq.x + diffSq.y;","\tmediump vec2 norm = normalize(diff);","\tmediump vec2 halfNorm = norm * 0.5;","\tmediump vec2 halfNormSq = halfNorm * halfNorm;","\tmediump vec2 pxNorm = pixelSize * norm;","\tmediump vec2 innerEdge1 = halfNorm - pxNorm;","\tmediump vec2 innerEdge1Sq = innerEdge1 * innerEdge1;","\tmediump float innerF = smoothstep(halfNormSq.x + halfNormSq.y, innerEdge1Sq.x + innerEdge1Sq.y, distSq);","\tmediump vec2 innerEdge2 = halfNorm - pxNorm * outlineThickness;","\tmediump vec2 innerEdge2Sq = innerEdge2 * innerEdge2;","\tmediump vec2 innerEdge3 = halfNorm - pxNorm * (outlineThickness + 1.0);","\tmediump vec2 innerEdge3Sq = innerEdge3 * innerEdge3;","\tmediump float outerF = smoothstep(innerEdge3Sq.x + innerEdge3Sq.y, innerEdge2Sq.x + innerEdge2Sq.y, distSq);","\tgl_FragColor = color * innerF * outerF;","}"].join("\n")}}}{const Ci=self.Bs,Pi=self.Ms,xh=Pi._s,Ei=new Map([["float",1],["percent",1],["sampler",1],["vec2",2],["vec3",3],["color",3],["vec4",4],["mat4",16]]);Ci.Iy.Ux=class{constructor(t,s,i){if(!Ei.has(i))throw new Error("invalid uniform type");this.uM=t,this.Lx=this.uM.OT(),this.Mr=s,this.If=i,this.xG="color"===this.If,this.TG=this.Lx.getUniformLocation(this.uM.DT(),s),this.GG=!!this.TG;const e=Ei.get(i);this._G=new Float32Array(e),this.IG=new Float32Array(e)}Sr(){this.uM=null,this.Lx=null,this.TG=null}ST(){return this.GG}NT(){return this.If}CG(){return this.xG}_T(t){this.ST()&&(this._G[0]=t,this.IG.set(this._G),this.Lx.uniform1f(this.TG,t))}TT(t){this.ST()&&(this._G[0]=t,this.IG.set(this._G),this.Lx.uniform1i(this.TG,t))}GT(t,s){this.ST()&&(this._G[0]=t,this._G[1]=s,this.IG.set(this._G),this.Lx.uniform2f(this.TG,t,s))}IT(t,s,i){this.ST()&&(this._G[0]=t,this._G[1]=s,this._G[2]=i,this.IG.set(this._G),this.Lx.uniform3f(this.TG,t,s,i))}xT(t,s,i,e){this.ST()&&(this._G[0]=t,this._G[1]=s,this._G[2]=i,this._G[3]=e,this.IG.set(this._G),this.Lx.uniform4f(this.TG,t,s,i,e))}PG(t){t=Math.fround(t);const s=this._G;s[0]!==t&&(s[0]=t,this.Lx.uniform1f(this.TG,t))}EG(t){const s=this._G;s[0]!==t&&this.Lx.uniform1i(this.TG,s[0]=t)}AG(t,s){t=Math.fround(t),s=Math.fround(s);const i=this._G;i[0]===t&&i[1]===s||(i[0]=t,i[1]=s,this.Lx.uniform2f(this.TG,t,s))}FG(t,s,i){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i);const e=this._G;e[0]===t&&e[1]===s&&e[2]===i||(e[0]=t,e[1]=s,e[2]=i,this.Lx.uniform3f(this.TG,t,s,i))}QT(t,s,i,e){t=Math.fround(t),s=Math.fround(s),i=Math.fround(i),e=Math.fround(e);const h=this._G;h[0]===t&&h[1]===s&&h[2]===i&&h[3]===e||(h[0]=t,h[1]=s,h[2]=i,h[3]=e,this.Lx.uniform4f(this.TG,t,s,i,e))}YT(t){const s=this._G;xh.W(s,t)||(Ci.jn(s,t,0),this.Lx.uniformMatrix4fv(this.TG,!1,t))}WT(t){const s=this.IG;return this.CG()?s[0]===Math.fround(t.da())&&s[1]===Math.fround(t.pa())&&s[2]===Math.fround(t.ya()):s[0]===Math.fround(t)}jT(t){const s=this.IG;this.CG()?(s[0]=t.da(),s[1]=t.pa(),s[2]=t.ya()):s[0]=t}zT(t){return this.IG[0]===Math.fround(t)}UT(t,s){const i=this.IG;return i[0]===Math.fround(t)&&i[1]===Math.fround(s)}XT(t){this.IG[0]=t}qT(t,s){const i=this.IG;i[0]=t,i[1]=s}}}{const Ai=self.Bs,Ri=self.Ms,jh=Ri.As,xh=Ri._s;Ai.Iy.OG=class{constructor(t){this.renderer=t,this.RT=xh.create(),this.PT=xh.create(),this.nx=null,this.ox=null,this.DG=!1,this.kG=jh.I(1,1,1,1),this.FT=null,this.LG=new Ai.Rect,this.clearColor=Ai.wr(Ai.$o,0,0,0,0)}},Ai.Iy.NG=class{constructor(t){const s=new ArrayBuffer(96);this.If=0,this.BG=t,this.Lx=t.renderer.o2(),this.WG=0,this.VG=0,this.jG=null,this.HG=new Float32Array(s,0,16),this.UG=new Float32Array(s,64,4),this.zG=new Float32Array(s,80,4),this.JG=[]}qG(t,s){this.If=1,this.WG=t,this.VG=s}XG(){const t=this.Lx;t.drawElements(t.TRIANGLES,this.VG,t.UNSIGNED_SHORT,this.WG)}YG(t){this.If=2,this.jG=t}$G(){const t=this.Lx,s=this.jG;t.bindTexture(t.TEXTURE_2D,s?s.T2():null)}KG(t){this.If=3,t.ba(this.UG,0)}ZG(){const t=this.UG,s=this.BG;jh._(s.kG,t),s.FT.ZT(t)}QG(t){this.If=21,t.ba(this.UG,0)}t_(){const t=this.UG,s=this.BG.FT;s.Qx.ST()&&s.Qx.QT(t[0],t[1],t[2],t[3])}s_(t,s){this.If=4,this.WG=t,this.VG=s}i_(){this.Lx.blendFunc(this.WG,this.VG)}e_(t,s,i,e){this.If=5;const h=this.UG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}h_(){const t=this.UG;this.Lx.viewport(t[0],t[1],t[2],t[3])}r_(t){this.If=6,xh._(this.HG,t)}n_(){const t=this.BG,i=t.renderer.Ky,e=t.FT,h=this.HG;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.ET(h,!0):r.$T()}xh._(t.PT,h)}o_(t){this.If=7,xh._(this.HG,t)}a_(){const t=this.BG,i=t.renderer.Ky,e=t.FT,h=this.HG;for(let t=0,s=i.length;t<s;++t){const r=i[t];r===e?r.AT(h,!0):r.KT()}xh._(t.RT,h)}l_(t){this.If=8,this.jG=t}u_(){const t=this.Lx,s=this.jG,i=this.BG;s?(i.nx=s.lx(),i.ox=s.ux(),i.DG&&i.ox?t.bindFramebuffer(t.FRAMEBUFFER,i.ox):t.bindFramebuffer(t.FRAMEBUFFER,i.nx)):(i.nx=null,i.ox=null,t.bindFramebuffer(t.FRAMEBUFFER,null))}c_(t){this.If=9,t.ba(this.HG,0)}f_(t,s,i,e){this.If=9;const h=this.HG;h[0]=t,h[1]=s,h[2]=i,h[3]=e}d_(){const t=this.Lx,s=this.HG,i=this.BG,e=i.clearColor,h=s[0],r=s[1],n=s[2],o=s[3];e.Ga(h,r,n,o)||(t.clearColor(h,r,n,o),e.ea(h,r,n,o)),t.clear(t.COLOR_BUFFER_BIT)}p_(t){this.If=15,t.ba(this.HG,0)}m_(){const t=this.HG;this.BG.LG.set(t[0],t[1],t[2],t[3])}g_(t,s){this.If=10,this.WG=t,this.VG=1,this.HG[0]=s}y_(){const t=this.Lx,s=this.BG,i=s.renderer,e=i.iw,h=(t.useProgram(e._v),e.ET(s.PT,!1),e.AT(s.RT,!1),s.LG),r=(e.Xx.ST()&&e.Xx.AG(h.Al(),h.Rl()),e.Yx.ST()&&e.Yx.AG(h.Fl(),h.Ol()),this.HG[0]);if(e.$x.ST()&&e.$x.PG(r),e.Jx.ST()){const n=s.kG;e.Jx.QT(n[0],n[1],n[2],n[3])}t.drawArrays(t.POINTS,this.WG/4,this.VG),t.useProgram(s.FT._v)}w_(t){this.If=11,this.jG=t}S_(){const t=this.Lx,s=this.BG,i=this.jG;if(s.FT=i,t.useProgram(i._v),i.ET(s.PT,!1),i.AT(s.RT,!1),i.Jx.ST()){const e=s.kG;i.Jx.QT(e[0],e[1],e[2],e[3])}}b_(){this.If=12}v_(){const t=this.BG.FT,s=this.Lx,i=this.HG,e=this.UG,h=this.zG;if(t.sT.ST()){const r=this.BG.renderer,n=this.jG;r.M_!==n&&(s.activeTexture(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,n?n.T2():null),r.M_=n,s.activeTexture(s.TEXTURE0))}t.lT.ST()&&t.lT.AG(i[0],i[1]),t.eT.ST()&&t.eT.AG(i[2],i[3]),t.hT.ST()&&t.hT.AG(i[4],i[5]),t.cT.ST()&&t.cT.PG(this.VG),t.fT.ST()&&t.fT.PG(i[6]),t.dT.ST()&&t.dT.PG(i[7]),t.rT.ST()&&t.rT.AG(i[12],i[13]),t.nT.ST()&&t.nT.AG(i[14],i[15]),t.oT.ST()&&t.oT.AG(h[0],h[1]),t.aT.ST()&&t.aT.AG(h[2],h[3]),t.pT.ST()&&t.pT.AG(e[0],e[1]),t.mT.ST()&&t.mT.AG(e[2],e[3]),t.uT.ST()&&t.uT.PG(this.WG)}x_(){this.If=13}T_(){const t=this.BG.FT,i=t.bT,e=this.JG;for(let t=0,s=i.length;t<s;++t){const h=i[t],r=e[t];h.CG()?h.FG(r.da(),r.pa(),r.ya()):h.PG(r)}}G_(t){this.If=14,this.jG=t}__(){const t=this.Lx,s=this.jG,i=this.BG.nx;s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,s),t.invalidateFramebuffer(t.FRAMEBUFFER,[t.COLOR_ATTACHMENT0]),s!==i&&t.bindFramebuffer(t.FRAMEBUFFER,i)}I_(t,s,i){this.If=17;const e=this.HG,h=this.BG.renderer,r=(e[0]=t.Em(),e[1]=t.Wm(),e[2]=(s||h).Em(),e[3]=(s||h).Wm(),e[4]=t.yx()?1:0,e[5]="stretch"===i,this.JG);Ai.Un(r),r.push(t.lx()),r.push(s?s.lx():null)}C_(){const t=this.HG,s=this.JG,i=this.Lx,e=t[0],h=t[1],r=t[2],n=t[3],o=0!==t[4],a=0!==t[5],l=s[0],u=s[1];if(i.bindFramebuffer(i.READ_FRAMEBUFFER,l),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,u),a)i.blitFramebuffer(0,0,e,h,0,0,r,n,i.COLOR_BUFFER_BIT,o?i.LINEAR:i.NEAREST);else{const c=Math.min(e,r),f=Math.min(h,n),d=Math.max(h-n,0),p=Math.max(n-h,0);i.blitFramebuffer(0,d,c,f+d,0,p,c,f+p,i.COLOR_BUFFER_BIT,i.NEAREST)}}P_(t){this.If=18,this.jG=t}E_(){this.jG.A_(),this.jG=null}R_(t){this.If=19,this.jG=t}F_(){this.jG.O_(),this.jG=null}D_(t,s,i){this.If=20;const e=this.HG;e[0]=t,e[1]=s,e[2]=i}k_(){const t=this.BG.FT,s=this.HG;t.lT.ST()&&t.lT.AG(s[0],s[1]),t.tT.ST()&&t.tT.PG(s[2])}L_(t,s,i,e,h,r,n){this.If=16;const o=this.HG;t.ba(o,0),o[4]=1/s,o[5]=1/i,o[6]=e/s,o[7]=h/i,o[8]=r/s,o[9]=n/i}N_(){const t=this.BG.FT,s=this.HG;t.rT.ST()&&t.rT.AG(s[0],s[1]),t.lT.ST()&&t.lT.AG(s[4],s[5]),t.Kx.ST()&&t.Kx.AG(s[6],s[7]),t.Zx.ST()&&t.Zx.AG(s[8],s[9])}B_(t,s,i,e,h,r,n){this.If=29;const o=this.HG;o[0]=1/t,o[1]=1/s,o[2]=i,o[3]=e,o[4]=h,o[5]=r,o[6]=n}W_(){const t=this.BG.FT,s=this.HG;t.lT.ST()&&t.lT.AG(s[0],s[1]),t.Kx.ST()&&t.Kx.AG(s[2],s[3]),t.tT.ST()&&t.tT.PG(s[4]),t.Zx.ST()&&t.Zx.AG(s[5],s[6])}V_(t){this.If=22,this.WG=t?1:0}j_(){const t=this.Lx,s=0!==this.WG;s||t.depthMask(!0),t.clear(t.DEPTH_BUFFER_BIT),s||t.depthMask(!1)}H_(t){this.If=23,this.WG=t?1:0}U_(){const t=this.Lx;0===this.WG?(t.disable(t.DEPTH_TEST),t.depthMask(!1)):(t.enable(t.DEPTH_TEST),t.depthMask(!0))}z_(t){this.If=24,this.WG=t?1:0}J_(){const t=this.Lx,s=this.BG,i=s.renderer,e=0!==this.WG;s.DG=e,t.activeTexture(t.TEXTURE2),e?(s.ox&&t.bindFramebuffer(t.FRAMEBUFFER,s.ox),t.bindTexture(t.TEXTURE_2D,i.Z2())):(t.bindTexture(t.TEXTURE_2D,null),s.ox&&t.bindFramebuffer(t.FRAMEBUFFER,s.nx)),t.activeTexture(t.TEXTURE0)}q_(){this.If=25}X_(){const t=this.Lx;t.clear(t.STENCIL_BUFFER_BIT),t.enable(t.STENCIL_TEST),t.stencilFunc(t.ALWAYS,1,1),t.stencilOp(t.KEEP,t.KEEP,t.REPLACE),t.colorMask(!1,!1,!1,!1)}Y_(){this.If=26}K_(){const t=this.Lx;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,1,1),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}Z_(){this.If=27}Q_(){const t=this.Lx;t.disable(t.STENCIL_TEST)}tI(t,s,i,e,h){this.If=28,this.WG=t?1:0;const r=this.HG;r[0]=s,r[1]=i,r[2]=e,r[3]=h}sI(){const t=this.Lx,s=this.HG;1===this.WG?(t.enable(t.SCISSOR_TEST),t.scissor(s[0],s[1],s[2],s[3])):t.disable(t.SCISSOR_TEST)}iI(){switch(this.If){case 1:return void this.XG();case 2:return void this.$G();case 3:return void this.ZG();case 4:return void this.i_();case 5:return void this.h_();case 6:return void this.n_();case 7:return void this.a_();case 8:return void this.u_();case 9:return void this.d_();case 10:return void this.y_();case 11:return void this.S_();case 12:return void this.v_();case 13:return void this.T_();case 14:return void this.__();case 15:return void this.m_();case 16:return void this.N_();case 17:return void this.C_();case 18:return void this.E_();case 19:return void this.F_();case 20:return void this.k_();case 21:return void this.t_();case 22:return void this.j_();case 23:return void this.U_();case 24:return void this.J_();case 25:return void this.X_();case 26:return void this.K_();case 27:return void this.Q_();case 28:return void this.sI();case 29:return void this.W_()}}}}{let I=function(t,s,i,e,h,r){s?t.strokeRect(i,e,h,r):t.fillRect(i,e,h,r)},t=function(t){return t*(4/3)},o=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0};I,t,o;const Fi=self.Bs,Oi=new Set(["serif","sans-serif","monospace","cursive","fantasy","system-ui","ui-serif","ui-sans-serif","ui-monospace","ui-rounded","math","emoji","fangsong"]),Di={timeout:60},ki=new Fi.$o(0,0,0,1),Li=new Set(["left","center","right"]),Ni=new Set(["top","center","bottom"]),Bi=new Set(["word","cjk","character"]),Wi=new Set(["ltr","rtl"]),Vi=new Set;Fi.FontManager&&Fi.FontManager.addEventListener("fontload",t=>{const s=t.font.uf();for(const i of Vi)(i.eI()||Fi.Gh(i.hI(),s))&&i.rI()});let s=!1,i=!1;Fi.Iy.Bb=class{constructor(t,s){s=Object.assign({},Di,s),this.Vb=t,this.nI="Arial",this.oI=16,this.aI=1,this.lI=0,this.uI=!1,this.cI=!1,this.fI="black",this.dI=!1,this.Gm=null,this.pI=!0,this.mI=null,this.gI=new Set,this.yI="left",this.wI="top",this.bf="",this.SI=null,this.bI=Fi.wr(Fi.xm),this.vI="word",this.MI="ltr",this.xI=!1,this.TI=!1,this.GI=!1,this._I=-1,this.II=0,this.CI=0,this.EI=0,this.dg=0,this.pg=0,this.AI=1,this.RI=null,this.FI=null,this.OI=null,this.DI=null,this.kI=-1,this.LI=-1,this.NI="",this.BI="",this.WI="",this.VI=1,this.jI=1,this.HI=t=>this.UI(t),this.YM=null,this.zI=new Fi.Rect,this.JI=1,this.qI=new Fi.m0(()=>{this.XI(),this.YI(8,8)},s.timeout),this.$I=null,this.KI=!1,Vi.add(this)}Sr(){this.mI=null,this.gI.clear(),this.Gm=null,this.SI=null,this.RI=null,this.FI=null,this.OI=null,this.DI=null,this.HI=null,this.qI.Sr(),this.$I=null,this.XI(),this.bI.ac(),this.bI=null,this.Vb=null,this.KI=!0,Vi.delete(this)}ZI(){this.GI=!0}QI(){this.ZI(),this.TI=!0}rI(){this.QI(),this.xI=!0}tC(t){if(this.dI!==(t=!!t)){this.dI=t;const s=this.dI?"alphabetic":"top";this.FI&&(this.FI.textBaseline=s),this.OI&&(this.OI.textBaseline=s),this.rI()}}eI(){return this.dI}Cm(t){this.Gm!==t&&(this.Gm=t,this.bI.Cm(t),this.Gm&&this.Gm.ly()&&this.Gm.uy().then(()=>this.ZI()),this.rI())}sC(t){this.pI!==(t=!!t)&&(this.pI=t,this.ZI())}iC(t){this.nI!==(t=t||"serif")&&(this.nI=t,this.rI())}hI(){return this.nI}eC(t){this.oI!==(t=t<.1?.1:t)&&(this.oI=t,this.rI())}hC(){return this.oI}rC(t){this.aI!==t&&(this.aI=t,this.rI())}nC(t){this.lI!==t&&(this.lI=t,this.QI())}oC(){return this.lI}aC(t){this.uI!==(t=!!t)&&(this.uI=t,this.rI())}lC(){return this.uI}uC(t){this.cI!==(t=!!t)&&(this.cI=t,this.rI())}cC(){return this.cI}fC(t){t=Math.floor(t),this._I!==t&&(this._I=t,this.ZI())}dC(){return this._I}pC(t,s){let i=[];(this.uI||s.Pg("b"))&&i.push("bold"),(this.cI||s.Pg("i"))&&i.push("italic");const e=s.Cg("size"),h=(e?parseFloat(e.param):this.oI)*this.aI;i.push(t?h+"pt":h*this.mC()+"pt");let r=this.nI,n=s.Cg("font");return n&&n.param&&(r=n.param,this.mI)&&!this.gI.has(r)&&(this.mI(r),this.gI.add(r)),r&&(Oi.has(r)?i.push(r):i.push('"'+r+'"')),i.join(" ")}Fv(t){t instanceof Fi.$o&&(t=t.Ra()),this.fI!==t&&(this.fI=t,this.ZI())}gC(t,s,i){ki.ra(t,s,i),this.Fv(ki)}yC(t){if(!Li.has(t))throw new Error("invalid horizontal alignment");this.yI!==t&&(this.yI=t,this.QI())}wC(){return this.yI}SC(t){if(!Ni.has(t))throw new Error("invalid vertical alignment");this.wI!==t&&(this.wI=t,this.QI())}bC(){return this.wI}vC(t){if(!Bi.has(t))throw new Error("invalid word wrap mode");this.vI!==t&&(this.vI=t,this.rI())}MC(){return this.vI}xC(t){if(!Wi.has(t))throw new Error("invalid text direction");this.MI!==t&&(this.MI=t,this.FI&&(this.FI.direction=this.MI),this.OI&&(this.OI.direction=this.MI),this.rI())}TC(){return this.MI}xf(t){this.bf!==t&&(this.bf=t,this.rI())}GC(){return this.bf}mC(){return this.JI*this.AI*self.devicePixelRatio}_C(r,n,o){if(void 0===o&&(o=1),!(r<=0||this.CI===r&&this.EI===n&&this.AI===o)){let t=this.CI,s=(this.CI=r,this.EI=n,this.AI=o,self.devicePixelRatio),i=(this.dg=this.CI*this.AI*s,this.pg=this.EI*this.AI*s,Math.max(this.dg,this.pg)),e=Math.min(this.Vb.n2(),4096),h=1;e<i&&(h=e/i,this.dg=Math.min(this.dg*h,e),this.pg=Math.min(this.pg*h,e)),this.JI=h,this.CI!==t?this.rI():this.QI()}}Em(){return this.dg}Wm(){return this.pg}IC(){return this.AI}CC(){return this.PC(),this.bI.ug()}EC(){return this.PC(),this.bI.fg()+this.bI.Im()*(this.lI+4)-this.lI}AC(){this.PC();let t=0;for(const s of this.bI._m())for(const i of s.Jm())t+=i.qm();return t}mx(){return this.qI.b0(),this.RC(),this.YM}FC(t,s){this.PC();const i=this.mC(),e=this.bI._m();for(const h of e){const r=h.jm()*i;if(s>=h.Gg()-h.Wm()*i+r&&s<h.Gg()+r)for(const n of h.Jm())if(t>=n.xg()&&t<n.xg()+n.Em()*i)return n}return null}*OC(t){this.PC();const s=this.bI._m();for(const i of s)for(const e of i.Jm()){const h=e.Cg("tag");h&&Fi.Gh(h.param,t)&&(yield e)}}DC(t,s){for(const i of this.OC(t)){if(0===s)return i;--s}return null}kC(t){let s=0;for(const i of this.OC(t))++s;return s}RC(){this.YM&&!this.GI&&!this.TI&&!this.xI||this.KI||this.dg<=0||this.pg<=0||(this.GI=!1,this.LC())}LC(){this.KI||(this.PC(),this.YI(Math.max(Fi.zr(Math.ceil(this.dg)),128),Math.max(Fi.zr(Math.ceil(this.pg)),64)),this.NC(),this.BC(),this.qI.b0())}YI(t,s){this.RI||(this.RI=Fi.No(16,16));let i=!1;this.kI===t&&this.LI===s||(this.kI=t,this.LI=s,this.RI.width=t,this.RI.height=s,i=!0),this.FI||(this.FI=this.RI.getContext("2d"),i=!0),i?(this.FI.textBaseline=this.dI?"alphabetic":"top",this.FI.direction=this.MI,this.FI.font=this.NI,this.FI.fillStyle=this.WI,this.FI.strokeStyle=this.WI,this.FI.globalAlpha=this.VI,this.FI.lineWidth=this.jI):this.FI.clearRect(0,0,t,s)}WC(){this.OI||(this.OI=Fi.No(16,16).getContext("2d"),this.DI=Fi.No(16,16).getContext("2d"),this.OI.textBaseline=this.dI?"alphabetic":"top",this.DI.textBaseline="top",this.OI.direction=this.MI,this.DI.direction=this.MI)}VC(t){this.BI!==t&&(this.BI=t,this.OI.font=t,this.DI.font=t)}jC(){if(!s){s=!0,this.WC();const t=this.OI.measureText("test");i="number"==typeof t.fontBoundingBoxAscent&&"number"==typeof t.fontBoundingBoxDescent}return i}PC(){this.HC(),this.UC()}HC(){this.xI&&(this.WC(),!this.dI||this.SI&&this.SI.toString()===this.bf||(this.SI=new Fi.Nh(this.bf,{$p:!0})),this.bI.xm(this.dI?this.SI.dm():this.bf,this.HI,this.CI,this.vI,0),this.xI=!1)}UC(){this.TI&&(this.zC(),this.TI=!1)}UI(t){let s=t.km()?t.tg().join(""):" ",i=(this.VC(this.pC(!0,t)),t.Cg("size")),e=(i?parseFloat(i.param):this.oI)*this.aI,h=this.OI.measureText(s),r=0;if(this.dI&&this.jC()){const n=this.DI.measureText(s);r=h.fontBoundingBoxAscent-n.fontBoundingBoxAscent}return{width:h.width,height:4/3*e,fontBoundingBoxAscent:h.fontBoundingBoxAscent||0,fontBoundingBoxDescent:h.fontBoundingBoxDescent||0,Dm:r}}JC(t){this.NI!==t&&(this.NI=t,this.FI.font=t)}qC(t){this.WI!==t&&(this.WI=t,this.FI.fillStyle=t,this.FI.strokeStyle=t)}XC(t){this.VI!==t&&(this.VI=t,this.FI.globalAlpha=t)}YC(t){this.jI!==t&&(this.jI=t,this.FI.lineWidth=t)}zC(){let e=this.mC(),h=(4+this.lI)*e,r=0,n=this.bI._m();if(0!==n.length){for(const s of n){s.Mg(NaN),s.Tg(NaN);for(const o of s.Jm())o.Mg(NaN),o.Tg(NaN)}let t=this.dI&&this.jC(),i=n[0].Wm()*e;if("center"===this.wI){const a=n.reduce((t,s)=>t+s.Wm()*e+h,0)-h;r=Math.max(this.pg/2-a/2,0),t&&(i=n[0].Hm()*e)}else if("bottom"===this.wI){const l=n.reduce((t,s)=>t+s.Wm()*e+h,0)-this.lI*e,u=t?n.at(-1).jm()*e:0;r=this.pg-l-u-2}for(let t=0,s=n.length;t<s;++t){const c=n[t],f=c.Wm()*e,d=r;if(this.dI){if(r+=0===t?i:f,0<t&&r>this.pg-4*e)break}else if(0<t&&r>=this.pg-f)break;0<=d&&this.$C(c,r,e),this.dI||(r+=f),r+=h}}}$C(t,s,i){let e=0;"center"===this.yI?e=Math.floor((this.dg-t.Em()*i)/2):"right"===this.yI&&(e=this.dg-t.Em()*i),t.Mg(e),t.Tg(s);for(const h of"ltr"===this.MI?t.Jm():t.bg())this.KC(h,e,s,i),e+=h.Em()*i}KC(t,s,i,e){const h=t.Cg("offsetx"),r=(s+=h?o(h.param,t.Wm())*e:0,t.Cg("offsety"));if(i+=r?o(r.param,t.Wm())*e:0,t.Nm()){const n=t.Cg("iconoffsety");i+=n?o(n.param,t.Wm())*e:.2*t.Wm()*e}t.Mg(s),t.Tg(i)}NC(){this.FI.imageSmoothingEnabled=this.pI,this.FI.imageSmoothingQuality="high",this.II=0;const t=this.mC(),s=this.bI._m();for(const i of s)this.ZC(i,t)}ZC(t,s){const i=t.xg(),e=t.Gg();if(Number.isFinite(i)&&Number.isFinite(e))for(const h of"ltr"===this.MI?t.Jm():t.bg())this.QC(h,s,t.Wm())}QC(n,o,a){const l=this.FI,u=n.xg(),c=n.Gg();if(Number.isFinite(u)&&Number.isFinite(c)){let t=a/16,s=n.Em()*o,i=n.Wm()*o,e=n.Wm()/16,h=(4+this.lI)*o,r=n.km()?n.tg():null;if(-1!==this._I){if(this.II>=this._I)return;n.km()&&this.II+r.length>this._I&&(r=r.slice(0,this._I-this.II),s=this.UI(n).width*o),this.II+=n.qm()}const f=n.Cg("background"),d=n.Pg("u"),p=n.Pg("s");if((!n.km()||!Fi.np(r)||f||d||p)&&!n.Pg("hide")){const m=n.Cg("color"),g=n.Cg("opacity"),y=(this.XC(g?parseFloat(g.param)/100:1),f&&(this.qC(f.param),l.fillRect(u,c-i,s,i+h)),n.Cg("linethickness")),w=y?parseFloat(y.param):1,S=n.Pg("stroke");if(S&&this.YC(.5*e*w*this.mC()),n.km()){const b=r.join("");if(this.JC(this.pC(!1,n)),!S){this.YC(.5*e*w*this.mC());const v=n.Cg("outlineback");v&&(this.qC(v.param),this.tP(!0,b,u,c,s))}if(this.qC(m?m.param:this.fI),this.tP(S,b,u,c,s),!S){this.YC(.5*e*w*this.mC());const M=n.Cg("outline");M&&(this.qC(M.param),this.tP(!0,b,u,c,s))}}else if(n.Nm()&&0<n.Em()){const x=n.Lg(this.Gm);x&&l.drawImage(x,u,c-i,s,i)}if(this.qC(m?m.param:this.fI),d&&I(l,S,u,c+o*t,s,o*t*w),p){const T=c-i/4,G=o*e,_=T+G/2;l.fillRect(u,_-G*w/2,s,G*w)}}}}tP(t,s,i,e,h){"rtl"===this.MI&&(i+=h),t?"Gecko"===Fi.mi.vi?this.FI.strokeText(s,i,e,h):this.FI.strokeText(s,i,e):"Gecko"===Fi.mi.vi?this.FI.fillText(s,i,e,h):this.FI.fillText(s,i,e)}BC(){this.Vb.sP()||(this.YM||(this.YM=this.Vb.K2(this.RI.width,this.RI.height,{zM:!0,JM:"high"})),this.Vb.iP(this.RI,this.YM),this.zI.set(0,0,this.dg/this.YM.Em(),this.pg/this.YM.Wm()),this.$I&&this.$I())}eP(){return this.zI}XI(){this.YM&&(this.Vb.sP()||this.Vb.ix(this.YM),this.YM=null)}static Ov(){for(const t of Vi)t.XI()}static hP(){return Vi.values()}}}{const ji=self.Bs;class Hi{constructor(t){this.Lx=t.o2(),this.rP=t.a2(),this.nP=t.oP(),this.aP=null,this.S0=!1,this.lP=!1,this.uP=0,1===this.rP?this.aP=this.nP.createQueryEXT():this.aP=this.Lx.createQuery()}Sr(){this.cP(),this.Lx=null,this.nP=null,this.lP=!1}cP(){this.aP&&(1===this.rP?this.nP.deleteQueryEXT(this.aP):this.Lx.deleteQuery(this.aP),this.aP=null)}A_(){if(this.S0)throw new Error("query already active");1===this.rP?this.nP.beginQueryEXT(this.nP.TIME_ELAPSED_EXT,this.aP):this.Lx.beginQuery(this.nP.TIME_ELAPSED_EXT,this.aP),this.S0=!0}O_(){if(!this.S0)throw new Error("query not active");1===this.rP?this.nP.endQueryEXT(this.nP.TIME_ELAPSED_EXT):this.Lx.endQuery(this.nP.TIME_ELAPSED_EXT),this.S0=!1}fP(){if(this.aP&&!this.lP&&!this.S0){let t;t=1===this.rP?this.nP.getQueryObjectEXT(this.aP,this.nP.QUERY_RESULT_AVAILABLE_EXT):this.Lx.getQueryParameter(this.aP,this.Lx.QUERY_RESULT_AVAILABLE);const s=this.Lx.getParameter(this.nP.GPU_DISJOINT_EXT);t&&!s&&(1===this.rP?this.uP=this.nP.getQueryObjectEXT(this.aP,this.nP.QUERY_RESULT_EXT):this.uP=this.Lx.getQueryParameter(this.aP,this.Lx.QUERY_RESULT),this.uP/=1e9,this.lP=!0),(t||s)&&this.cP()}}dP(){return this.lP}pP(){if(this.lP)return this.uP;throw new Error("no result available")}}ji.Iy.mP=class{constructor(t){this.Vb=t,this.Cw=t.Ib(),this.S0=!1,this.gP=null,this.yP=!1,this.wP=null,this.SP=[]}Sr(){for(const t of this.SP)t instanceof Hi&&t.Sr();ji.Un(this.SP),this.gP=null,this.wP=null,this.Vb=null}A_(){if(this.S0)throw new Error("query already active");const t=this.Vb.bP();0<t.length?(this.yP=!0,this.gP=t.at(-1),this.gP.vP(),this.gP.SP.push(this)):(this.yP=!1,this.gP=null),this.S0=!0,t.push(this),this.MP()}O_(){if(!this.S0)throw new Error("query not active");const t=this.Vb.bP().pop();if(t!==this)throw new Error("can only end most nested query");this.S0=!1,this.vP(),this.gP&&(this.gP.MP(),this.gP=null)}MP(){this.wP=ji.wr(Hi,this.Vb),this.SP.push(this.wP),this.wP.A_()}vP(){this.wP.O_(),this.wP=null}fP(){for(const t of this.SP)t.fP()}xP(){return this.yP}dP(){return this.SP.every(t=>t.dP())}pP(){return this.SP.reduce((t,s)=>t+s.pP(),0)}Ib(){return this.Cw}}}{const Ui=self.Bs;Ui.Iy.TP=class{constructor(t,s=1e3){this.Vb=t,this.GP=s,this._P=[],this.Vb.IP(this)}Sr(){this.ac(),this.Vb.CP(this),this.Vb=null}ac(){for(const t of this._P)t.Sr();Ui.Un(this._P)}PP(){const t=new Ui.Iy.mP(this.Vb);if(this._P.push(t),this._P.length>this.GP){const s=this._P.shift();s.Sr()}return t}EP(t){for(const s of this._P){if(s.Ib()>=t)return;if(s.xP())return;s.fP()}}AP(t,s){if(s<=t)return NaN;let i=0;for(const e of this._P){if(e.Ib()>=s)break;if(!(e.Ib()<t)){if(!e.dP())return NaN;i+=e.pP()}}return i}RP(i){for(let t=0,s=this._P.length;t<s;++t){const e=this._P[t];if(!(e.Ib()<i))return void(0<t&&this._P.splice(0,t));e.Sr()}}}}{let i=function(){h=-1;for(const t of e)t.FP()&&(t.resolve(),e.delete(t));0<e.size&&(h=self.requestAnimationFrame(i))},b=(i,self.Bs),t=self.Ms,v=(t.Es,t.As),y=t._s,r={powerPreference:"default",OP:!0,alpha:!1,depth:!1,DP:!1,kP:2,failIfMajorPerformanceCaveat:!1},n=new Set(["default","low-power","high-performance"]),c=new b.ou(0,0,1,0,1,1,0,1),w=y.create(),S=y.create(),M=new b.ou,x=new b.Rect,T=null,e=(b.isDebug&&(self.LP=function(){T?T.loseContext():console.warn("WEBGL_lose_context not supported")},self.NP=function(){T?T.restoreContext():console.warn("WEBGL_lose_context not supported")}),new Set),h=-1;b.Iy.BP=class extends b.Iy.Hy{constructor(t,s){if(super(s),s=Object.assign({},r,s),!n.has(s.powerPreference))throw new Error("invalid power preference");let i={alpha:!!s.alpha,depth:!1,antialias:!1,powerPreference:s.powerPreference,failIfMajorPerformanceCaveat:!!s.failIfMajorPerformanceCaveat},e=null,h=0;if(2<=s.kP&&(e=t.getContext("webgl2",i),h=2),e||(e=t.getContext("webgl",i),h=1),!e)throw new Error("renderer-unavailable (could not get WebGL context)");this.Lx=e,this.WP=e.getContextAttributes(),this.VP=e.getParameter(e.VERSION),this.rP=h,this.jP=v.create(),this.HP=!1,this.UP=y.create(),this.zP=!!s.depth,this.JP=!(!s.depth||!s.DP),this.qP=this.zP,this.XP=!1,this.YP=null,this.$P=!0,this.KP=0,this.ZP=0,this.Wx=null,this.Vx=null,this.QP=null,this.jx=null,this.tE=new Float32Array(8e3*this.Tb()),this.sE=new Uint16Array(12e3),this.iE=new Float32Array(16e3),this.eE=new Float32Array(32e3),this.hE=0,this.rE=0,this.nE=0,this.oE=0,this.aE=null,this.lE=null,this.uE=[],this.cE=0,this.fE=0,this.dE=null,this.pE=0,this.BG=b.wr(b.Iy.OG,this),this.mE=b.wr(b.$o,1,1,1,1),this.gE=null,this.M_=null,this.yE=0,this.wE=0,this.SE=new b.Rect,this.bE=b.wr(b.Rect,0,0,-1,-1),this.vE=0,this.ME=-1,this.xE=0,this.TE=0,this.GE=0,this._E="(unavailable)",this.IE="(unavailable)",this.CE=[],this.PE=!1,this.EE=null,this.AE=null,this.RE=null,this.FE=null,this.OE=null,this.DE=null,this.kE=0,this.LE=!!s.OP,this.nP=null,this.NE=new Set,this.BE=[],this.Aw(this.sE)}Fb(){return!0}async Ow(){super.Ow();const t=this.Lx,s=this.Tb(),i=(this.mE.ea(1,1,1,1),this.gE=null,this.M_=null,this.hE=0,this.nE=0,this.oE=8e3*s-4*s,b.Un(this.uE),this.cE=0,this.fE=0,this.aE=null,this.dE=null,this.SE.set(0,0,1,1),this.pE=0,this.BG),e=(i.FT=null,i.nx=null,i.ox=null,v.set(i.kG,1,1,1,1),i.clearColor.ea(0,0,0,0),i.LG.set(0,0,1,1),t.clearColor(0,0,0,0),t.clear(t.COLOR_BUFFER_BIT),t.enable(t.BLEND),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),this.yE=t.ONE,this.wE=t.ONE_MINUS_SRC_ALPHA,this.WE(t),t.disable(t.CULL_FACE),t.disable(t.STENCIL_TEST),t.disable(t.DITHER),this.zP?(t.enable(t.DEPTH_TEST),t.depthMask(!0),t.depthFunc(t.LEQUAL)):(t.disable(t.DEPTH_TEST),t.depthMask(!1)),this.qP=this.zP,this.XP=!1,this.jx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.jx),t.bufferData(t.ARRAY_BUFFER,this.eE.byteLength,t.DYNAMIC_DRAW),this.Wx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Wx),t.bufferData(t.ARRAY_BUFFER,this.tE.byteLength,t.DYNAMIC_DRAW),this.Vx=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.Vx),t.bufferData(t.ARRAY_BUFFER,this.iE.byteLength,t.DYNAMIC_DRAW),this.QP=t.createBuffer(),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.QP),t.bufferData(t.ELEMENT_ARRAY_BUFFER,this.sE,t.STATIC_DRAW),t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,null),this.ME=t.getParameter(t.MAX_TEXTURE_SIZE),t.getParameter(t.ALIASED_POINT_SIZE_RANGE)),h=(this.xE=e[0],this.TE=e[1],t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT)),r=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT),n=(this.GE=h&&r?Math.min(h.precision,r.precision):0,2048<this.TE&&(this.TE=2048),this.CE=t.getSupportedExtensions(),t.getExtension("WEBGL_debug_renderer_info"));if(n&&(this._E=t.getParameter(n.UNMASKED_VENDOR_WEBGL),this.IE=t.getParameter(n.UNMASKED_RENDERER_WEBGL)),this.EE=t.getExtension("KHR_parallel_shader_compile"),b.isDebug&&(T=t.getExtension("WEBGL_lose_context")),this.LE&&(1===this.a2()?this.nP=t.getExtension("EXT_disjoint_timer_query"):this.nP=t.getExtension("EXT_disjoint_timer_query_webgl2")||t.getExtension("EXT_disjoint_timer_query")),this.AE=t.getExtension("EXT_texture_filter_anisotropic"),this.AE?this.kE=t.getParameter(this.AE.MAX_TEXTURE_MAX_ANISOTROPY_EXT):this.kE=0,this.a2()<2&&this.zP&&this.JP&&(this.RE=t.getExtension("WEBGL_depth_texture"),!this.RE))throw new Error("no depth texture support");this.a2()<2&&(this.FE=t.getExtension("EXT_frag_depth"),this.OE=t.getExtension("OES_standard_derivatives"),this.DE=t.getExtension("EXT_shader_texture_lod"));let o=b.Iy.Ax,a=o.sG(!1),l=o.eG(),u=a,c=o.fG(),f=o.uG(),d=o.nG(),p=o.sG(!0),m=!1;this.zP&&(this.a2()<2?this.FE&&(l=o.hG(),c=o.dG(),d=o.oG(),m=!0):(u=o.iG(),l=o.rG(),c=o.pG(),f=o.cG(),d=o.aG(),p=o.iG(!0)));const g=o.lG(this.a2(),m,this.OE&&this.DE),y=2<=this.a2()?o.iG():a,w=[[l,u,"<default>"],[l,u,"<default-device-transform>"],[c,f,"<point>"],[o.mG(),a,"<fill>"],[o.gG(),a,"<lineargradient>"],[o.yG(),a,"<penumbra>"],[o.SG(),a,"<hardellipse>"],[o.bG(),a,"<hardellipseoutline>"],[o.vG(),a,"<smoothellipse>"],[o.MG(),a,"<smoothellipseoutline>"],[o.wG(),a,"<smoothline>"],[d,p,"<tilemap>"],[g,y,"<tilerandomization>"]],S=await Promise.all(w.map(t=>this.VE({src:t[0],Fx:t[1],name:t[2]})));this.Qy=S[0],this.lE=S[1],this.iw=S[2],this.rw=S[3],this.ow=S[4],this.aw=S[5],this.lw=S[6],this.uw=S[7],this.fw=S[8],this.dw=S[9],this.pw=S[10],this.ew=S[11],this.hw=S[12],this.hS()}async VE(t){const s=await b.Iy.Ax.kx(this,t);return this.tS(s),s}jE(){this.aE=null}_C(t,s,i){if(this.dg!==t||this.pg!==s||i){this._b();const e=this.Lx,h=this.BG;this.dg=t,this.pg=s,this.HE(0,0,t,s),this.Yw(this.UP,t/s),this.UE(this.UP),this.lE&&(e.useProgram(this.lE.DT()),this.lE.CT(this.Jy),this.aE=this.lE,this.BG.FT=this.lE),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE1),e.bindTexture(e.TEXTURE_2D,null),e.activeTexture(e.TEXTURE0),this.gE=null,this.M_=null,this.zP&&this.$P&&this.zE(this.dg,this.pg),this.dE&&this.dE.tx(this.dg,this.pg),e.bindFramebuffer(e.FRAMEBUFFER,null),this.dE=null,h.nx=null,h.ox=null}}zE(t,s){const i=this.Lx;this.YP&&this.KP===t&&this.ZP===s||(this.JP?(this.YP&&i.deleteTexture(this.YP),this.YP=i.createTexture(),i.bindTexture(i.TEXTURE_2D,this.YP),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),2<=this.a2()?i.texImage2D(i.TEXTURE_2D,0,i.DEPTH24_STENCIL8,t,s,0,i.DEPTH_STENCIL,i.UNSIGNED_INT_24_8,null):this.RE&&i.texImage2D(i.TEXTURE_2D,0,i.DEPTH_STENCIL,t,s,0,i.DEPTH_STENCIL,this.RE.UNSIGNED_INT_24_8_WEBGL,null),i.bindTexture(i.TEXTURE_2D,null)):(this.YP&&i.deleteRenderbuffer(this.YP),this.YP=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,this.YP),i.renderbufferStorage(i.RENDERBUFFER,2<=this.rP?i.DEPTH24_STENCIL8:i.DEPTH_STENCIL,t,s),i.bindRenderbuffer(i.RENDERBUFFER,null)),this.KP=t,this.ZP=s)}JE(t,s){this.zP&&(this.$P=!1,this.zE(t,s))}qE(){this.zP&&(this.$P=!0,this.zE(this.dg,this.pg))}HE(t,s,i,e){const h=this.jP;if(h[0]!==t||h[1]!==s||h[2]!==i||h[3]!==e){const r=this.XE();r.e_(t,s,i,e),v.set(h,t,s,i,e),this.fE=0}}Uw(t){super.Uw(t),this.Yw(this.UP,this.dg/this.pg)}Ww(t){super.Ww(t),this.Yw(this.UP,this.dg/this.pg)}jw(t){super.jw(t),this.Yw(this.UP,this.dg/this.pg)}UE(t){if(!y.W(this.Jy,t)){const s=this.XE();s.r_(t),y._(this.Jy,t),this.fE=0,this.HP=!0}}YE(){let t,s,i,e=this.dE;i=(null===e?(t=this.UP,s=this.Em(),this):(t=e.gx(),s=e.Em(),e)).Wm(),this.UE(t),this.HE(0,0,s,i)}$E(t){if(!y.W(this.qy,t)){const s=this.XE();s.o_(t),y._(this.qy,t),this.fE=0,this.HP=!0}}KE(){this.HP=!1}ZE(){return this.HP}hx(){return this.BG}XE(){const t=this.uE;return this.cE===t.length&&t.push(new b.Iy.NG(this.BG)),t[this.cE++]}_b(){0===this.cE||this.sP()||(this.QE(),this.tA(),this.cE=0,this.hE=0,this.rE=0,this.nE=0,this.fE=0)}QE(){const t=this.Lx;0<this.nE&&(t.bindBuffer(t.ARRAY_BUFFER,this.jx),t.bufferSubData(t.ARRAY_BUFFER,0,this.eE.subarray(0,this.nE))),0<this.hE&&(t.bindBuffer(t.ARRAY_BUFFER,this.Wx),t.bufferSubData(t.ARRAY_BUFFER,0,this.tE.subarray(0,this.hE)),t.bindBuffer(t.ARRAY_BUFFER,this.Vx),t.bufferSubData(t.ARRAY_BUFFER,0,this.iE.subarray(0,this.rE)))}tA(){const i=this.uE;for(let t=0,s=this.cE;t<s;++t)i[t].iI()}sA(){return this.mE.wa()}iA(t,s,i,e){const h=this.mE;if(!h.Ga(t,s,i,e)){h.ea(t,s,i,e);const r=this.XE();r.KG(h),this.fE=0,this.gw=null}}eA(t){const s=this.mE;if(s.wa()!==t){s.ca(t);const i=this.XE();i.KG(s),this.fE=0,this.gw=null}}Fv(t){const s=this.mE;if(!s.equals(t)){s.set(t);const i=this.XE();i.KG(s),this.fE=0,this.gw=null}}hA(){this.iA(1,1,1,1)}rA(){return this.mE}nA(t){if(t!==this.gE){const s=this.XE();s.YG(t),this.gE=t,this.fE=0}}f2(){this.gE=null}Rv(t){const s=this.AS(t);this.oA(s[0],s[1])}aA(t){const s=this.OS(t);this.oA(s.PS,s.ES)}oA(t,s){if(t!==this.yE||s!==this.wE){const i=this.XE();i.s_(t,s),this.yE=t,this.wE=s,this.fE=0,this.gw=null}}lA(){return this.yE===this.Lx.ONE&&this.wE===this.Lx.ONE_MINUS_SRC_ALPHA}uA(){this.oA(this.Lx.ONE,this.Lx.ONE_MINUS_SRC_ALPHA)}cA(){this.oA(this.Lx.SRC_ALPHA,this.Lx.ONE_MINUS_SRC_ALPHA)}fA(){this.oA(this.Lx.ONE,this.Lx.ZERO)}Rect(t){this.dA(t.Al(),t.Rl(),t.Fl(),t.Ol())}dA(t,s,i,e){this.xb(t,s,i,s,i,e,t,e)}pA(){let t=this.hE;if(t>=this.oE&&(this._b(),t=0),1===this.fE)this.uE[this.cE-1].VG+=6;else{const s=this.XE();s.qG(t,6),this.fE=1}}mA(t){t.Iu(this.tE,this.hE,this.Sw+this.bw),this.hE+=12}ou(t){this.pA(),this.mA(t),c.ba(this.iE,this.rE),this.rE+=8}xb(t,s,i,e,h,r,n,o){this.pA();let a=this.tE,l=this.hE,u=this.Sw+this.bw;a[l++]=t,a[l++]=s,a[l++]=u,a[l++]=i,a[l++]=e,a[l++]=u,a[l++]=h,a[l++]=r,a[l++]=u,a[l++]=n,a[l++]=o,a[l++]=u,this.hE=l,c.ba(this.iE,this.rE),this.rE+=8}YS(t,s){this.pA(),this.mA(t),s.Ll(this.iE,this.rE),this.rE+=8}gA(t,s){this.pA(),this.mA(t),s.ba(this.iE,this.rE),this.rE+=8}yA(t,s,i,e,h,r,n,o,a,l,u,c,f){this.pA();let d=this.tE,p=this.hE,m=this.Sw+this.bw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.hE=p,f.Ll(this.iE,this.rE),this.rE+=8}US(t,s,i,e,h,r,n,o,a,l,u,c,f){this.pA();let d=this.tE,p=this.hE,m=this.Sw+this.bw;d[p++]=t,d[p++]=s,d[p++]=m+i,d[p++]=e,d[p++]=h,d[p++]=m+r,d[p++]=n,d[p++]=o,d[p++]=m+a,d[p++]=l,d[p++]=u,d[p++]=m+c,this.hE=p,f.ba(this.iE,this.rE),this.rE+=8}wA(e,h,r){const n=this.tE,o=this.iE;if(r.length%3!=0)throw new Error("invalid index buffer length");for(let i=0,t=r.length;i<t;){const a=r[i++],l=r[i++],u=r[i++],c=3*a,f=3*l,d=3*u,p=2*a,m=2*l,g=2*u;this.pA();let t=this.hE,s=this.rE;n[t++]=e[0+c],n[t++]=e[1+c],n[t++]=e[2+c],n[t++]=e[0+f],n[t++]=e[1+f],n[t++]=e[2+f],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],n[t++]=e[0+d],n[t++]=e[1+d],n[t++]=e[2+d],o[s++]=h[0+p],o[s++]=h[1+p],o[s++]=h[0+m],o[s++]=h[1+m],o[s++]=h[0+g],o[s++]=h[1+g],o[s++]=h[0+g],o[s++]=h[1+g],this.hE=t,this.rE=s}}SA(t,s){this.NS(0),y._(w,this.Jy),y._(S,this.qy),this.YE();const[i,e]=this.bA(this.dE),h=this.Qw(0,0,this.kw(e),0,0,0,e);if(this.$E(h),"crop"===t&&this.dE&&s){const r=this.dg/2,n=this.pg/2,o=s.Em(),a=s.Wm(),l=this.dE.Em(),u=this.dE.Wm(),c=Math.min(l,o),f=Math.min(u,a),d=Math.max(a-u,0),p=Math.max(u-a,0);x.set(-r,n-p,-r+c,n-f-p),M.Cu(x),x.set(0,d,c,f+d),x.Ct(o,a),this.YS(M,x)}else{const m=i/2,g=e/2;this.dA(-m,g,m,-g)}this.UE(w),this.$E(S)}vA(t){if(!this.SE.equals(t)){this.SE._(t);const s=this.XE();s.p_(t),this.fE=0}}MA(){}xA(t,s,i,e){7996<=this.nE&&this._b();let h=this.nE,r=this.Sw+this.bw;if(2===this.fE&&this.pE===r)this.uE[this.cE-1].VG++;else{const o=this.XE();o.g_(h,r),this.fE=2,this.pE=r}const n=this.eE;n[h++]=t,n[h++]=s,n[h++]=i,n[h++]=e,this.nE=h}rS(t){if(this.aE!==t){const s=this.XE();s.w_(t),this.aE=t,this.fE=0,this.gw=null}}TA(){return this.aE}GA(){this.rS(this.lE)}_A(t){const s=this.XE();s.QG(t),this.fE=0}IA(t,s,i=1){const e=this.XE();e.D_(t,s,i),this.fE=0}CA(t,s,i,e,h,r,n){if(this.aE!==this.ew)throw new Error("must set tilemap fill mode first");const o=this.XE();o.L_(t,s,i,e,h,r,n),this.fE=0}PA(t,s,i,e,h,r,n){if(this.aE!==this.hw)throw new Error("must set tile randomization mode first");const o=this.XE();o.B_(t,s,i,e,h,r,n),this.fE=0}EA(t,s,i,e,h,r,n,o,a,l,u){const c=this.aE;if(u%=10800,c.wT&&!c.HT(s,i,e,h,r,n,o,a,l,u)){const f=this.XE(),d=(f.b_(),c.JT(s,i,e,h,r,n,o,a,l,u),f.HG),p=(d[0]=r,d[1]=n,s.ba(d,2),d[6]=a,d[7]=l,i.ba(d,12),f.UG),m=(h.ba(p,0),p[1]);p[1]=p[3],p[3]=m,e.ba(f.zG,0),f.WG=u,f.VG=o,c.sT.ST()?f.jG=t?t.mx():null:f.jG=null,this.fE=0}}AA(t){const s=this.aE;if(0!==t.length&&!s.BT(t)){const i=this.XE();i.x_(),s.VT(t),b.Xn(i.JG,t),this.fE=0}}RA(t,s,i,e){const h=this.XE();h.f_(t,s,i,e),this.fE=0}ac(t){const s=this.XE();s.c_(t),this.fE=0}FA(){}Gb(){super.Gb(),this.Lx.flush()}OA(){if(this.zP&&this.dE&&this.dE.bx()){const t=this.XE();t.V_(this.qP),this.fE=0}}DA(t){if(this.qP!==(t=!!t)&&this.zP){this.qP=t;const s=this.XE();s.H_(t),this.fE=0}}kA(){return this.qP}Z2(){return this.YP}Q2(){return this.JP}LA(t){if(t=!!t,this.JP&&this.XP!==t){if(t&&this.kA())throw new Error("depth still enabled");this.XP=t;const s=this.XE();s.z_(t),this.fE=0}}NA(t,s,i,e,h=0){if(t=Math.floor(t),s=Math.floor(s),i=Math.floor(i),e=Math.floor(e),!this.bE.El(t,s,i,e)){this.bE.xl(t,s,i,e);const r=h||this.bA(this.BA())[1],n=(s=r-s-e,this.XE());n.tI(!0,t,s,i,e),this.fE=0}}WA(){if(-1!==this.bE.Fl()){this.bE.set(0,0,-1,-1);const t=this.XE();t.tI(!1,0,0,0,0),this.fE=0}}VA(){for(const t of this.NE)t.EP(this.Cw)}sP(){return!this.Lx||this.Lx.isContextLost()||this.PE}Ov(){super.Dw(),b.Iy.XM.Ov(),b.Iy.O2.Ov(),b.Iy.Bb.Ov();for(const t of this.NE)t.ac();this.CE=[],this.nP=null,this.EE=null,this.AE=null,this.RE=null,this.FE=null,this.OE=null,this.DE=null,this.kE=0,this._E="(unavailable)",this.IE="(unavailable)",this.aE=null,this.lE=null,this.YP=null;for(const s of this.mw.values())s.Ov()}async Dv(){this.PE=!0,await this.Ow(),this.PE=!1;for(const t of this.mw.values())t.Dv(this);this._C(this.dg,this.pg,!0)}jA(t,s){if(this.sP())throw new Error("context lost");this._b();const i=b.wr(b.Iy.XM,this);return i.h2(t,s),i}async HA(e,h){if(this.sP())throw new Error("context lost");if(h=Object.assign({},h),b.Ji.ImageBitmapOptions){let t=await createImageBitmap(e,{premultiplyAlpha:"premultiply"}),s=h.WM&&"clamp-to-edge"!==h.WM||h.VM&&"clamp-to-edge"!==h.VM,i=b.Ur(t.width)&&b.Ur(t.height);return this.l2()||i||!s?h.premultiplyAlpha=!1:b.Ji.Ki?(t=await createImageBitmap(e,{premultiplyAlpha:"premultiply",resizeWidth:b.zr(t.width),resizeHeight:b.zr(t.height)}),h.premultiplyAlpha=!1):t=await createImageBitmap(e,{premultiplyAlpha:"none"}),b.Xf(()=>this.jA(t,h))}if(e instanceof Blob){if("undefined"==typeof Image)throw new Error("texture upload variant not supported in worker");const t=await b.Lo(e);e=t}return b.Xf(()=>this.jA(e,h))}K2(t,s,i){this._b();const e=b.wr(b.Iy.XM,this);return e.d2(t,s,i),e}iP(t,s,i){this._b(),s.b2(t,i)}ix(t){t&&(t._2(),0<t.I2()||(this._b(),t===this.gE&&(this.Lx.bindTexture(this.Lx.TEXTURE_2D,null),this.gE=null),t===this.M_&&(this.Lx.activeTexture(this.Lx.TEXTURE1),this.Lx.bindTexture(this.Lx.TEXTURE_2D,null),this.Lx.activeTexture(this.Lx.TEXTURE0),this.M_=null),t.v2()))}UA(t){let s=this.dg,i=this.pg,e=!0;if(t&&("number"==typeof t.width&&(s=Math.floor(t.width),e=!1),"number"==typeof t.height)&&(i=Math.floor(t.height),e=!1),s<=0||i<=0)throw new Error("invalid size");this._b();const h=b.wr(b.Iy.O2,this);return h.X2(s,i,Object.assign({R2:e},t)),this.dE=null,this.BG.nx=null,this.BG.ox=null,h}zA(t,s=!0){if(t!==this.dE){t&&t.Mx()&&t.tx(this.dg,this.pg);const i=this.XE();i.l_(t),this.dE=t,this.fE=0,s&&this.YE()}}BA(){return this.dE}bA(t){return t?[t.Em(),t.Wm()]:[this.dg,this.pg]}JA(t,s="stretch"){if(this.rP<2||this.dE&&0<this.dE.xx())this.fA(),this.hA(),this.qA(t,s);else{const i=this.XE();i.I_(t,this.dE,s),this.fE=0}}qA(t,s="stretch"){const i=t.mx();if(!i)throw new Error("not a texture-backed render target");this.nA(i),this.SA(s,i)}XA(t){if(!(this.rP<2)){const s=this.XE();s.G_(t.lx()),this.fE=0}}YA(t){this.zA(null),this._b();const s=t.mx();s===this.gE&&(this.Lx.bindTexture(this.Lx.TEXTURE_2D,null),this.gE=null),s===this.M_&&(this.Lx.activeTexture(this.Lx.TEXTURE1),this.Lx.bindTexture(this.Lx.TEXTURE_2D,null),this.Lx.activeTexture(this.Lx.TEXTURE0),this.M_=null),t.v2()}async Cx(t,s,i){this._b();let e=this.dE,h,r,n,o=(n=t?(h=t.Em(),r=t.Wm(),t.lx()):(h=this.Em(),r=this.Wm(),null),0),a=0,l=h,u=r;if(i){o=b.Gr(Math.floor(i.Al()),0,h-1),a=b.Gr(Math.floor(i.Rl()),0,r-1);let t=i.width(),s=(t=0===t?h-o:b.Gr(Math.floor(t),0,h-o),i.height());s=0===s?r-a:b.Gr(Math.floor(s),0,r-a),l=t,u=s,a=r-(a+u)}let c=this.Lx,f=(c.bindFramebuffer(c.FRAMEBUFFER,n),()=>{c.bindFramebuffer(c.FRAMEBUFFER,null),this.dE=null,this.BG.nx=null,this.BG.ox=null,this.zA(e)}),d;if(!s&&2<=this.a2()){c.bindFramebuffer(c.READ_FRAMEBUFFER,n);const p=c.createBuffer(),m=l*u*4,g=c.PIXEL_PACK_BUFFER,y=(c.bindBuffer(g,p),c.bufferData(g,m,c.STREAM_READ),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,0),c.bindFramebuffer(c.READ_FRAMEBUFFER,null),c.bindBuffer(g,null),f(),c.fenceSync(c.SYNC_GPU_COMMANDS_COMPLETE,0));await this.Dx(()=>c.getSyncParameter(y,c.SYNC_STATUS)===c.SIGNALED),c.deleteSync(y),d=new ImageData(l,u),c.bindBuffer(g,p),c.getBufferSubData(g,0,new Uint8Array(d.data.buffer),0,m),c.bindBuffer(g,null),c.deleteBuffer(p)}else d=new ImageData(l,u),c.readPixels(o,a,l,u,c.RGBA,c.UNSIGNED_BYTE,new Uint8Array(d.data.buffer)),f();return d}$A(){this.DA(!0);const t=this.XE();t.q_(),this.fE=0,this.vE=1}KA(){this.DA(!1);const t=this.XE();t.Y_(),this.fE=0,this.vE=2}ZA(){return 2===this.vE}QA(){this.DA(!0);const t=this.XE();t.Z_(),this.fE=0,this.vE=0}tR(t){if(this.sR()){const s=this.XE();s.P_(t),this.fE=0}}iR(t){if(this.sR()){const s=this.XE();s.R_(t),this.fE=0}}Dx(s){const t=new Promise(t=>e.add({resolve:t,FP:s}));return-1===h&&(h=self.requestAnimationFrame(i)),t}Ob(){return this.dg*this.pg*(this.WP.alpha?4:3)}Db(){let t=0;for(const s of b.Iy.O2.Px())s.mx()||(t+=s.P2());return t}kb(){let t=0;for(const s of b.Iy.XM.E2())t+=s.P2();return t}eR(){return this.VP}a2(){return this.rP}hR(){return"webgl"+this.a2()}l2(){return 2<=this.a2()}n2(){return this.ME}rR(){return this.xE}nR(){return this.TE}oR(){return 0!==this.GE}aR(){return this.GE}lR(){return this._E}uR(){return this.IE}cR(){if(2<=this.a2())return"webgl2";{const t=[];return this.FE&&t.push("EXT_frag_depth"),this.OE&&t.push("OES_standard_derivatives"),this.DE&&t.push("EXT_shader_texture_lod"),0<t.length?"webgl1:"+t.join(","):"webgl1:none"}}fR(){return this.CE}sR(){return!!this.nP}oP(){return this.nP}Ox(){return this.EE}w2(){return this.AE}S2(){return this.kE}IP(t){this.NE.add(t)}CP(t){this.NE.delete(t)}bP(){return this.BE}o2(){return this.Lx}WE(t){this.CS([["normal",t.ONE,t.ONE_MINUS_SRC_ALPHA],["additive",t.ONE,t.ONE],["xor",t.ONE,t.ONE_MINUS_SRC_ALPHA],["copy",t.ONE,t.ZERO],["destination-over",t.ONE_MINUS_DST_ALPHA,t.ONE],["source-in",t.DST_ALPHA,t.ZERO],["destination-in",t.ZERO,t.SRC_ALPHA],["source-out",t.ONE_MINUS_DST_ALPHA,t.ZERO],["destination-out",t.ZERO,t.ONE_MINUS_SRC_ALPHA],["source-atop",t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],["destination-atop",t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA]])}dR(){return this.Nb()}}}{const zi=self.Bs,Ji={pR:null,mR:null,gR:null,getTime:null,yR:null};zi.Iy.wR=class{constructor(t){t=Object.assign({},Ji,t),this.SR=t.pR,this.bR=t.mR,this.vR=t.gR,this.MR=t.getTime,this.xR=t.yR,this.TR=null,this.GR=new Set}_R(t){this.GR.add(t)}IR(t){this.GR.delete(t)}Ov(){this.TR=null;for(const t of this.GR)t.Ov()}CR(t){return this.SR?this.SR(t):[t.Em(),t.Wm()]}BA(t){return this.bR(t)}PR(t,s){this.vR(t,s)}ER(){return this.MR()}w1(t){this.xR(t)}AR(t,s,i){return s=Math.floor(s),i=Math.floor(i),!this.TR||this.TR.Em()===s&&this.TR.Wm()===i||(t.ix(this.TR),this.TR=null),null===this.TR&&(this.TR=t.jA(null,{width:s,height:i,jM:"nearest",zM:!1})),this.TR}}}{const o=self.Bs,qi=self.Ms,xh=qi._s,Xi=o.wr(o.Rect),Yi=o.wr(o.Rect),$i=o.wr(o.Rect),Ki=o.wr(o.Rect),Zi=xh.create(),Qi=xh.create(),te={RR:null,FR:null,OR:null,DR:!1},se={kR:null,LR:!1,NR:!1,BR:!1,WR:!1,VR:!1,jR:!1};o.Iy.HR=class{constructor(t,s){s=Object.assign({},te,s),this.C1=t,this.UR=s.RR,this.zR=s.FR,this.JR=s.OR,this.qR=null,this.YR=[],this.$R=[],this.KR=[],this.ZR=!1,this.Cv=0,this.QR=!1,this.t3=!1,this.s3=!1,this.i3=!1,this.e3=!1,this.h3=!1,this.HP=!1,this.r3=!1,this.n3=!1,this.o3=!1,this.a3=!1,this.l3=!1,this.u3=0,this.f3=[null,null,null],this.d3=!!s.DR,this.m3=0,this.g3=0,this.y3=0,this.w3=0,this.S3=null,this.b3=null,this.v3=o.wr(o.Rect),this.M3=o.wr(o.Rect),this.x3=o.wr(o.Rect),this.T3=o.wr(o.Rect),this.G3=o.wr(o.Rect),this._3=1,this.I3=1,this.C3=0,this.P3=0,this.E3=null,this.A3=null,this.R3=0,this.F3=0,this.O3=!1,this.U2=xh.create(),this.D3=xh.create(),this.C1._R(this)}Sr(){this.C1.IR(this),o.Un(this.KR),o.Un(this.YR),o.Un(this.$R),this.S3=null,this.b3=null,this.UR=null,this.zR=null,this.JR=null}Ov(){this.ZR=!0,o.Un(this.KR),o.Un(this.YR),o.Un(this.$R)}L3(){return this.ZR}N3(h,t){if(t=Object.assign({},se,t),o.Un(this.KR),this.m3=0,this.g3=0,this.QR=!1,this.t3=!1,this.s3=!1,this.i3=!1,this.e3=!1,this.h3=!1,this.u3=0,this.l3=!!t.WR,this.a3=!!t.jR,this.ZR=!1,o.Xn(this.YR,h),0!==h.length){if(t.kR){if(t.kR.length!==h.length)throw new Error("incorrect indexMap length");o.Xn(this.$R,t.kR)}else{o.Un(this.$R);for(let t=0,s=h.length;t<s;++t)this.$R.push(t)}for(const s of h)this.m3+=s.dv(),this.g3+=s.pv(),s.bv()&&(this.QR=!0),s.Mv()&&(this.t3=!0),s.vv()&&(this.s3=!0),s.gv()&&(this.i3=!0),s.Gv()&&(this.e3=!0);this.h3=this.B3(h[0].uv());const r=this.W3(h[0],t),n=this.V3(h.at(-1),t);if(1!==h.length||r||n){this.o3=!1;let e=0;r&&(this.u3=1,this.KR.push(o.wr(o.Iy.HR.Step.j3,this,-1,1)),e=1);for(let s=0,i=h.length;s<i;++s)if(0!==s||r){let t=1===e?2:1;s!==i-1||n||(t=0),this.u3=Math.max(this.u3,t),this.KR.push(o.wr(o.Iy.HR.Step.H3,this,e,t,s)),e=t}else this.u3=1,this.KR.push(o.wr(o.Iy.HR.Step.U3,this,-1,1,s)),e=1;n&&this.KR.push(o.wr(o.Iy.HR.Step.z3,this,e,0))}else this.o3=!0}}W3(t,s){return!!(s.LR||t.yv()||s.BR&&!t.Sv()||t.Mv()&&!this.a3||0!==this.m3||0!==this.g3)||(t.uv().Fb()?t.vv()&&(s.VR||s.WR)||t.xv()&&s.WR:t.vv()&&!this.h3&&s.VR)}V3(t,s){return!!s.NR||(t.uv().Fb()?t.vv()||t.gv():(t.vv()||t.gv())&&this.J3())}B3(t){return t.$w()&&this.s3&&!this.i3}q3(t,s,i){t.$w()&&null===s&&(s=t.GetBackbufferRenderTarget()),this.E3=s,this.S3=i.X3||null,this.b3=i.contextObject||null,this.Cv=i.Y3||0,this._3=i.devicePixelRatio||1,this.I3=i.K3||1,this.C3=i.Z3||0,this.P3="number"==typeof i.time?i.time:this.C1.ER(),this.HP=!1,t.KE(),this.QR&&this.Q3();let e=!1;if(this.tF()&&(this.sF(t,i),e=!0,this.A3=this.C1.AR(t,this.y3,this.w3),Xi._(this.M3),Xi.Ql(),t.$w()&&t._MaybeDoPendingClearRenderPass(this.E3),t.CopyTextureToTexture(this.E3.mx(),this.A3,Xi.Al(),Xi.Rl(),Xi.width(),Xi.height())),this.o3)this.iF(t,i);else if(e||this.sF(t,i),0!==this.x3.width()||0!==this.x3.height()){t.uA(),t.hA(),t.kS(0),t.NS(0),this.qR=i.eF||null,this.R3=i.hF||0,this.F3=i.rF||0,this.O3=!!i.nF,this.oF(t),this.f3[0]=s,this.f3[1]=1<=this.u3?this.aF():null,this.f3[2]=2===this.u3?this.aF():null;for(const h of this.KR){const r=this.lF(h.uF()),n=this.lF(h.cF());t.$w()?h.fF(t,r,n):h.dF(t,r,n)}t.nA(null),this.f3[1]&&this.pF(this.f3[1]),this.f3[2]&&this.pF(this.f3[2]),this.f3.fill(null),this.mF(t),this.E3=null,this.A3=null,this.S3=null,this.b3=null,this.qR=null}}sF(t,s){const[i,e]=this.C1.CR(t);this.gF(t,i,e),this.yF(s)}gF(t,s,i){if(s<=0||i<=0)throw new Error("invalid draw size");this.y3===s&&this.w3===i||this.wF(t,s,i,0,0,this.U2,this.D3),this.y3=s,this.w3=i}wF(t,s,i,e,h,r,n){const o=s/2+e,a=i/2+h,l=(t.Yw(r,s/i),t.Qw(o,a,t.kw(i),o,a,0,i));xh._(n,l)}yF(t){this.v3._(t.SF),t.bF?this.M3._(t.bF):this.M3.set(0,0,this.y3,this.w3),this.x3._(this.M3),this.x3.Ct(this.y3,this.w3);const s=this.I3*this._3;this.M3.Ul(this.m3*s,this.g3*s),this.G3._(this.M3),this.G3.Ct(this.y3,this.w3),this.M3.tu(0,0,this.y3,this.w3),this.T3._(this.M3),this.T3.Ct(this.y3,this.w3)}oF(t){if(this.r3=t.kA(),this.n3=t.ZA(),this.a3)t.DA(!1),this.t3&&t.LA(!0);else{if(Xi._(this.M3),t.Fb()){const s=this.I3*this._3;Xi.Ul(Math.max(this.m3,1)*s,Math.max(this.g3,1)*s),Xi.Ql(),Xi.Gr(0,0,this.y3,this.w3)}else Xi.Ql();t.NA(Xi.Al(),Xi.Rl(),Xi.width(),Xi.height(),this.w3)}}vF(t){t.hA(),this.a3||(this.n3&&t.QA(),t.DA(!1),this.t3&&t.LA(!0)),t.$w()&&t.SetNormalizedCoordsProgramVariant(!0)}mF(t){t.LA(!1),this.n3&&t.KA(),t.DA(this.r3),this.a3||t.WA(),t.$w()&&t.SetNormalizedCoordsProgramVariant(!1),this.HP=t.ZE()}MF(){this.G3.Gr(0,0,1,1)}lF(t){return t<0?null:this.f3[t]}aF(){return this.C1.BA(this)}xF(){return this.E3}pF(t){this.C1.PR(t,this)}TF(t){return this.YR[t]}GF(t){this.qR?this.qR(this,t,()=>this.UR(t,this)):this.UR(t,this),this.o3||this.vF(t)}_F(t){if(this.a3)return!0;if(0!==this.R3||0!==this.F3)return!1;const[s,i]=t.bA(t.BA());return s===this.y3&&i===this.w3}IF(t,s){let i=this.U2,e=this.D3;if(s&&!this._F(t)){i=Zi,e=Qi;const[h,r]=t.bA(t.BA());this.wF(t,h,r,this.R3,this.F3,i,e),this.a3||t.WA()}t.UE(i),t.$E(e)}Q3(){this.C1.w1(this)}CF(t,s){return this.JR(this.$R[t],s)}PF(t,s){let i=this.G3,e=this.T3,h=this.x3;t.Fb()&&(Yi._(i),Yi.ql(1),i=Yi,$i._(e),$i.ql(1),e=$i,Ki._(h),Ki.ql(1),h=Ki),this.EF(t,s,e,h,i,1/this.y3,1/this.w3)}AF(t,s){let e=this.T3,h=this.x3,r=1/this.y3,n=1/this.w3;if(this.zR){let{RF:t,FF:s,OF:i}=this.zR(this.S3);t||(Xi.set(0,0,0,0),t=Xi),s=s||this.y3,i=i||this.w3,e=t,h=t,r=1/s,n=1/i}else t.Fb()&&($i._(e),$i.ql(1),e=$i,Ki._(h),Ki.ql(1),h=Ki);let i=this.G3;t.Fb()&&((i=Yi)._(this.G3),i.ql(1)),this.EF(t,s,e,h,i,r,n),t.$w()&&this.e3&&t.SetProgramParameter_IsSrcTexRotated(this.l3)}DF(t){return this.s3?t.$w()?this.tF()?this.A3:this.E3.mx():this.E3:null}EF(t,s,i,e,h,r,n){t.EA(this.DF(t),h,i,e,this.v3,r,n,this._3,this.I3,this.C3,this.P3),t.AA(this.CF(s,t))}iF(t,s){const i=this.YR[0],e=t.kA(),h=i.Mv();h&&(t.DA(!1),t.LA(!0),this.G3.set(0,0,1,1),this.x3.set(0,0,1,1)),t.rS(i),t.Rv(this.Cv),t.zA(this.E3);let r=0,n=1;if(this.x3.set(0,0,1,1),i.xv()&&this.zR){const{RF:o,FF:a,OF:l}=this.zR(this.S3);o&&this.x3._(o),r=Number.isFinite(a)?1/a:0,n=Number.isFinite(l)?1/l:0}else{const[u,c]=this.C1.CR(t);r=1/u,n=1/c}s.SF?this.v3._(s.SF):this.v3.set(0,0,0,0),t.EA(this.DF(t),this.G3,this.x3,this.x3,this.v3,r,n,this._3,this.I3,this.C3,this.P3),t.AA(this.CF(0,t)),t.$w()&&this.e3&&t.SetProgramParameter_IsSrcTexRotated(this.l3),t.kS(0),this.GF(t),h&&(t.LA(!1),t.DA(e))}tF(){return this.h3}J3(){return!this.h3}kF(){return this.s3}LF(){return!!this.o3&&!this.tF()}NF(){return this.a3}BF(){return this.S3}WF(){return this.b3}VF(){return this.Cv}jF(){return this.O3}ZE(){return this.HP}HF(){return this.M3}UF(){return this.T3}zF(){return this.d3}async JF(t,s,i){}}}{const ie=self.Bs;ie.Iy.HR.Step=class{constructor(t,s,i,e=-1){this.qF=t,this.XF=s,this.YF=i,this.Sy=e}$F(){return this.qF}uF(){return this.XF}cF(){return this.YF}KF(){return this.Sy}DT(){return this.$F().TF(this.KF())}dF(t,s,i){}fF(t,s,i){}}}{const ee=self.Bs;ee.Iy.HR.Step.j3=class extends ee.Iy.HR.Step{constructor(t,s,i,e){super(t,s,i,e)}dF(t,s,i){const e=this.$F();t.uA(),t.hS(),t.zA(i,e.jF()),t.RA(0,0,0,0),e.GF(t),e.MF()}fF(t,s,i){const e=this.$F();t.uA(),t.hS(),t.zA(i,!1),t.RA(0,0,0,0),e.GF(t),e.MF()}}}{const he=self.Bs,re=he.wr(he.Rect),ne=he.wr(he.ou);he.Iy.HR.Step.z3=class extends he.Iy.HR.Step{constructor(t,s,i,e){super(t,s,i,e)}dF(t,s,i){const e=this.$F();t.hS(),t.zA(i),e.IF(t,!0),t.Rv(e.VF()),t.nA(s.mx()),ne.Cu(e.HF()),re._(e.UF()),re.ql(1),t.YS(ne,re),e.zF()&&t.XA(s)}fF(t,s,i){const e=this.$F();t.hS(),t.zA(i,!1),e._F(t)?ne.Cu(e.UF()):(t.SetNormalizedCoordsProgramVariant(!1),e.IF(t,!0),ne.Cu(e.HF())),t.SetBackTexture(null),t.Rv(e.VF()),t.nA(s.mx()),e.NF()?t.SA():t.YS(ne,e.UF())}}}{const oe=self.Bs;oe.Iy.HR.Step.U3=class extends oe.Iy.HR.Step{constructor(t,s,i,e){super(t,s,i,e)}dF(t,s,i){const e=this.$F();t.zA(i,e.jF()),t.RA(0,0,0,0),t.fA(),t.rS(this.DT()),e.AF(t,this.KF()),e.GF(t),e.MF()}fF(t,s,i){const e=this.$F();t.zA(i,!1),t.RA(0,0,0,0),t.fA(),t.rS(this.DT()),e.AF(t,this.KF()),e.GF(t),e.MF()}}}{const ae=self.Bs,le=ae.wr(ae.Rect),ue=ae.wr(ae.ou);ae.Iy.HR.Step.H3=class extends ae.Iy.HR.Step{constructor(t,s,i,e){super(t,s,i,e)}dF(t,s,i){const e=this.$F(),h=(t.zA(i),0===this.cF());h?t.Rv(e.VF()):(t.RA(0,0,0,0),t.fA()),t.rS(this.DT()),e.PF(t,this.KF()),t.nA(s.mx()),e.IF(t,h),ue.Cu(e.HF()),le._(e.UF()),le.ql(1),t.YS(ue,le),e.zF()&&t.XA(s)}fF(t,s,i){const e=this.$F(),h=(t.zA(i,!1),0===this.cF());h?(t.Rv(e.VF()),t.SetBackTexture(null),e._F(t)?ue.Cu(e.UF()):(t.SetNormalizedCoordsProgramVariant(!1),e.IF(t,!0),ue.Cu(e.HF()))):(t.RA(0,0,0,0),t.fA(),ue.Cu(e.UF())),t.rS(this.DT()),e.PF(t,this.KF()),t.nA(s.mx()),e.NF()?t.SA():t.YS(ue,e.UF())}}}{let u=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},c=(u,self.Bs),f=self.$s,d=null,s=new Set,p=[],m=[],i=!1,t=!1,e=new Set(["vsync","unlimited-tick","unlimited-frame"]);self.ZF=class{constructor(t){d=t,Object.defineProperties(this,{QF:{value:d.sO().tO(),writable:!1},iO:{value:d.hO().eO(),writable:!1},rO:{value:{},writable:!1},nO:{value:{},writable:!1},oO:{value:d.aO(),writable:!1},lO:{value:d.uO(),writable:!1},storage:{value:new self.cO(d),writable:!1},isInWorker:{value:d.fO(),writable:!1},dO:{value:d.pO(),writable:!1},mO:{value:d.gO(),writable:!1},jM:{value:d.yO(),writable:!1},wO:{value:d.SO(),writable:!1},bO:{value:new self.vO(t),writable:!1},MO:{value:new self.xO(t),writable:!1}}),d.TO().addEventListener("keydown",t=>{s.has(t.key)?t.stopPropagation():s.add(t.key)}),d.TO().addEventListener("keyup",t=>s.delete(t.key)),d.Qf().addEventListener("window-blur",()=>s.clear()),d.fO()&&(self.alert=t=>(i||(i=!0,console.warn("[Construct] alert() was called from a Web Worker, because the project 'Use worker' setting is enabled. This method is not normally available in a Web Worker. Construct has implemented the alert for you, but note that other features may be missing in worker mode. You may wish to disable 'Use worker', or use a more convenient function like console.log(). For more information please refer to the scripting section of the manual.")),this.alert(t)))}GO(t){Object.defineProperties(this.rO,t)}_O(t){Object.defineProperties(this.nO,t)}addEventListener(t,s){d.TO().addEventListener(t,s)}removeEventListener(t,s){d.TO().removeEventListener(t,s)}IO(t,...s){f.Ae(t);const i=d.CO(),e=i.PO(t);if(!e)throw new Error(`cannot find function name '${t}'`);if(!e.rc())return e.EO();if(s.length<e.AO())throw new Error(`not enough function parameters passed for '${t}' (${s.length} passed, ${e.AO()} expected)`);let h=e.RO(),r=h.FO(),n=i.OO();if(n){r=r.slice(0);const a=new Set(r);for(const l of n.FO())a.has(l)||(r.push(l),a.add(l));for(const u of i.DO())a.has(u)||(r.push(u),a.add(u))}const o=h.kO(r,e.LO(),e.NO(),e.EO(),...s);return o}BO(t){const s=d.VO().WO();if(!s)throw new Error("not in a function which returns a value");switch(s.jO()){case 1:"number"==typeof t&&s.HO(t);break;case 2:"string"==typeof t&&s.HO(t);break;case 3:"number"!=typeof t&&"string"!=typeof t||s.HO(t)}}signal(t){f.Ae(t),d.CO().UO(t)}zO(t){return f.Ae(t),d.CO().JO(t)}qO(){return[d.pO(),d.gO()]}get isSuspended(){return d.XO()}get dt(){return d.YO()}get $O(){return d.KO()}get gameTime(){return d.ZO()}get QO(){return d.tD()}get timeScale(){return d.sD()}set timeScale(t){f.Ie(t),d.iD(t)}get fps(){return t||(console.warn("IRuntime.fps is deprecated. Use IRuntime.framesPerSecond instead."),t=!0),d.eD()}get framesPerSecond(){return d.eD()}get hD(){return d.rD()}get nD(){return d.oD()}get aD(){return d.lD()}get uD(){return d.cD()}set uD(t){if(!e.has(t))throw new Error("invalid framerate mode");d.fD(t)}get dD(){return d.pD()}set dD(t){f.Ie(t),d.mD(t)}get gD(){return d.yD()}set gD(t){d.wD(t)}random(){return d.SD()}get layout(){const t=d.bD();if(t)return t.vD();throw new Error("no layout is running - make sure a layout is loaded before accessing")}MD(t){let s=d.xD(),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(i=s.TD(t))return i.vD();throw new Error("invalid layout")}GD(){return d.xD()._D().map(t=>t.vD())}ID(t){let s=d.xD(),i;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");if(!(i=s.TD(t)))throw new Error("invalid layout");s.CD()||s.PD(i)}get keyboard(){const t=d.ED().keyboard;if(t)return t;throw new Error("runtime.keyboard used but Keyboard object missing - add it to your project first")}get AD(){const t=d.ED().AD;if(t)return t;throw new Error("runtime.mouse used but Mouse object missing - add it to your project first")}get RD(){const t=d.ED().RD;if(t)return t;throw new Error("runtime.touch used but Touch object missing - add it to your project first")}get FD(){const t=d.ED().FD;if(t)return t;throw new Error("runtime.timelineController used but Timeline Controller object missing - add it to your project first")}OD(t,s){f.Ae(t),f.Ae(s),d.DD(t,s)}kD(t){f.Ie(t);const s=d.LD(t);return s?s.ND():null}BD(t,e){f.ih(e);const h=d.WD();for(const s of t){const i=d.VD(s),r=i.jD();p.push([r.HD().KF(),r.UD()]),m.push(i)}if(0!==p.length){p.sort(u),m.sort((t,s)=>e(t.ND(),s.ND()));let i=!1;for(let t=0,s=p.length;t<s;++t){const n=m[t],o=h.zD(p[t][0]),a=p[t][1],l=o.JD();l[a]!==n&&((l[a]=n).jD().qD(o,!0),o.XD(n),i=!0)}i&&d.YD(),c.Un(p),c.Un(m)}}async $D(t,s){const i=new MessageChannel,e=i.port1,h=i.port2;return await d.KD("runtime","script-create-worker",{url:t,opts:s,port2:h},[h]),e}alert(t){return d.KD("runtime","alert",{message:t+(d.fO()?" [via Web Worker]":"")})}ZD(t){return f.Ie(t),d.QD(t)}sk(t){d.ik(t)}}}{let s=self.Bs,n=null;self.ek=class{constructor(t){n=t,Object.defineProperties(this,{hk:{value:n.rk("audio/webm; codecs=opus"),writable:!1}})}nk(t){const s=self.lk.ak(t);if(!s)throw new Error("invalid IImageInfo");s.uk(n.ck())}fk(t){return n.Po(t)}dk(t){return n.Eo(t)}pk(t){return n.Ao(t)}mk(t){return n.Ro(t)}gk(t){return n.yk(t)}wk(t){return"flat"===n.Sk()&&s._o(t)&&(t=t.toLowerCase()),n.bk(t)}get vk(){return n.Mk()}async xk(t,s){if(this.hk)throw new Error("decodeWebMOpus(): not supported because WebM Opus is supported by the platform");const i=await n.ck().Tk(s),e=new Float32Array(i),h=t.createBuffer(1,e.length,48e3),r=h.getChannelData(0);return r.set(e),h}Gk(...t){return n._k(...t)}Ik(t){return n.Ck(t)}Pk(t){return n.Ek(t)}}}{let n=self.Bs,i=self.$s,o=null;self.Ak=class{constructor(t){o=t,Object.defineProperties(this,{runtime:{value:o.ck(),writable:!1}})}Rk(t,s){const i=o.ck(),e=i.VD(t),h=i.VD(s);return o.Fk(e,h)}Ok(t,s){const i=o.ck(),e=i.VD(t);for(const h of s){const r=i.VD(h);if(o.Fk(e,r))return h}return null}Dk(t){const s=o.ck().VD(t),i=o.kk(s);return i?i.ND():null}Lk(t,s){if(i.Ie(t),i.Ie(s),t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid cell size");o.Nk(t,s)}Bk(){return o.Wk()}Vk(t,s){let i=o.ck(),e;e=Array.isArray(t)?t.map(t=>i.jk(t)):[i.jk(t)];const h=n.Rect.Pl(s),r=[];return o.Hk(null,e,h,r),r.map(t=>t.ND())}}}{let s=self.Bs,i=null,e=new Map([["Windows","windows"],["macOS","macos"],["Linux","linux"],["Chrome OS","chrome-os"],["Android","android"],["iOS","ios"]]),h=new Map([["Chrome","chrome"],["Chromium","chromium"],["Edge","edge"],["Opera","opera"],["NW.js","nwjs"],["Firefox","firefox"],["Safari","safari"]]),r=new Map([["Chromium","chromium"],["Gecko","gecko"],["WebKit","webkit"]]);self.vO=class{constructor(t){i=t,Object.defineProperties(this,{Uk:{value:s.mi.Ti,writable:!1},zk:{value:e.get(s.mi.gi)||"unknown",writable:!1},Jk:{value:s.mi.yi,writable:!1},qk:{value:h.get(s.mi.wi)||"unknown",writable:!1},Xk:{value:s.mi.Si,writable:!1},Yk:{value:r.get(s.mi.vi)||"unknown",writable:!1}})}get exportType(){let t=i.$k();return i.Kk()?t="nwjs":i.Zk()?t="windows-webview2":"cordova"===t?t="Android"===s.mi.gi?"cordova-android":"cordova-ios":"playable-ad-single-file"!==t&&"playable-ad-zip"!==t||(t="playable-ad"),t}get renderer(){return i.tL().Qk()}get sL(){return i.tL().iL()}get eL(){return i.tL().hL()}get rL(){return i.tL().nL()}get oL(){return i.tL().aL()}get lL(){return i.tL().uL()}get devicePixelRatio(){return i.cL()}}}{const ce=self.$s;self.cO=class{constructor(t){this.fL=t.dL()}getItem(t){return ce.Ae(t),this.fL.getItem(t)}setItem(t,s){return ce.Ae(t),this.fL.setItem(t,s)}removeItem(t){return ce.Ae(t),this.fL.removeItem(t)}clear(){return this.fL.clear()}keys(){return this.fL.keys()}}}{const fe=self.Bs,de=fe.Ws();self.pL=class{#mL;constructor(){const t=fe.yL.gL(de);this.#mL=t,Object.defineProperties(this,{runtime:{value:t.ck().wL(),writable:!1},SL:{value:t.bL(),writable:!1},vL:{value:t.ML(),writable:!1},xL:{value:t.TL(),writable:!1},GL:{value:t._L(),writable:!1},IL:{value:t.CL(),writable:!1},PL:{value:t.EL(),writable:!1},AL:{value:t.RL(),writable:!1},FL:{value:t.OL(),writable:!1}})}static DL(t){if(!t)return null;const s=fe.yL.kL(t);return s?s.LL():null}NL(){return this.#mL.WL().BL()}VL(){return this.#mL.jL().ND()}}}{const pe=self.Bs,me=self.$s,ge=pe.Ws();self.HL=class{#mL;constructor(){const t=pe.yL.gL(ge);this.#mL=t,Object.defineProperties(this,{name:{value:t.uf(),writable:!1},runtime:{value:t.ck().wL(),writable:!1},UL:{value:t.zL().LL(),writable:!1}}),t.ck().JL(this,t)}addEventListener(t,s){me.Ae(t),me.ih(s),this.#mL.TO().addEventListener(t,s)}removeEventListener(t,s){me.Ae(t),me.ih(s),this.#mL.TO().removeEventListener(t,s)}qL(){return[...this.instances()]}XL(){return pe.first(this.instances())}YL(){return[...this.$L()]}KL(){return pe.first(this.$L())}ZL(t){const s=this.#mL,i=s.ck().QL(t),e=s.t5(i);return e?e.ND():null}*instances(){for(const t of this.#mL.s5())yield t.ND()}*$L(){for(const t of this.#mL.e5().i5())yield t.ND()}h5(t){me.ih(t);const s=this.#mL;if(0<s.r5())throw new Error("setInstanceClass() called too late, because instances have already been created - call in runOnStartup");s.n5(t)}Vi(t,s,i,e,h){if(me.Me(s),me.Me(i),"number"!=typeof t&&"string"!=typeof t)throw new TypeError("invalid layer parameter");const r=this.#mL,n=r.ck(),o=n.bD().HD(t);if(!o)throw new Error("invalid layer");const a=n.o5(r,o,s,i,e,h),l=(e&&o.a5(a),n.CO());return l.l5(!0),a.u5(),l.l5(!1),l.c5()||n.xD().f5()||n.d5(),a.ND()}}}{const ye=self.$s,l=new WeakMap,we=["above","below","top-sublayer","bottom-sublayer"];self.p5=class{constructor(t){l.set(this,t);const s=[],i=t.m5(),e=i.g5().length;for(let t=0;t<e;++t)s.push(new self.y5(i,t));Object.defineProperties(this,{name:{value:t.uf(),writable:!1},index:{value:t.KF(),writable:!1},effects:{value:s,writable:!1}})}addEventListener(t,s){ye.Ae(t),ye.ih(s),l.get(this).TO().addEventListener(t,s)}removeEventListener(t,s){ye.Ae(t),ye.ih(s),l.get(this).TO().removeEventListener(t,s)}get width(){return l.get(this).Em()}set width(t){ye.Ie(t),l.get(this).Lm(t)}get height(){return l.get(this).Wm()}set height(t){ye.Ie(t),l.get(this).Am(t)}w5(t,s){ye.Ie(t),ye.Ie(s);const i=l.get(this);i.Lm(t),i.Am(s)}getSize(){const t=l.get(this);return[t.Em(),t.Wm()]}set scale(t){ye.Ie(t),l.get(this).S5(t)}get scale(){return l.get(this).b5()}set angle(t){ye.Ie(t),l.get(this).v5(t)}get angle(){return l.get(this).GetAngle()}set scrollX(t){ye.Me(t),l.get(this).M5(t)}get scrollX(){return l.get(this).x5()}set scrollY(t){ye.Me(t),l.get(this).T5(t)}get scrollY(){return l.get(this).G5()}scrollTo(t,s){ye.Me(t),ye.Me(s);const i=l.get(this);i.M5(t),i.T5(s)}_5(){const t=l.get(this);return[t.x5(),t.G5()]}I5(t){let s=l.get(this),i=null;if("number"!=typeof t&&"string"!=typeof t)throw new TypeError("expected string or number");return(i=s.HD(t))?i.C5():null}P5(){return l.get(this).E5().map(t=>t.C5())}*A5(){for(const t of l.get(this).A5())yield t.C5()}R5(t,s,i){const e=l.get(this),h=self.F5,r=(ye.Ae(t),ye.fh(s,h),s?e.ck().O5(s):null),n=we.indexOf(i);if(n<0)throw new Error("invalid location");e.D5(t,r,n)}k5(t,s,i){const e=l.get(this),h=e.ck(),r=self.F5,n=(ye.uh(t,r),h.O5(t));if(!n)throw new Error("invalid layer");ye.fh(s,r);const o=s?h.O5(s):null,a=we.indexOf(i);if(a<0)throw new Error("invalid location");e.L5(n,o,a)}N5(t){const s=l.get(this),i=self.F5,e=(ye.uh(t,i),s.ck().O5(t));if(!e)throw new Error("invalid layer");const h=e.ck();s.B5(e),h.CO().c5()||h.d5()}W5(){const t=l.get(this),s=t.ck();t.V5(),s.CO().c5()||s.d5()}j5(t,s){ye.Ie(t),ye.Ie(s),l.get(this).H5(t,s)}U5(){return l.get(this).z5()}set $(t){ye.Ae(t);const s=l.get(this);if("perspective"===t)s.J5();else{if("orthographic"!==t)throw new Error("invalid projection");s.q5()}}get $(){return l.get(this).X5()?"orthographic":"perspective"}}}{const Se=self.Bs,be=self.$s,f=new WeakMap,ve=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Me=new Map([...ve.entries()].map(t=>[t[1],t[0]])),xe=Se.wr(Se.$o);self.F5=class{constructor(t){f.set(this,t);const s=[],i=t.m5(),e=i.g5().length;for(let t=0;t<e;++t)s.push(new self.y5(i,t));Object.defineProperties(this,{name:{value:t.uf(),writable:!1},layout:{value:t.TD().vD(),writable:!1},effects:{value:s,writable:!1}}),t.ck().JL(this,t)}get Y5(){const t=f.get(this).K5();return t?t.C5():null}*Z5(){for(const t of f.get(this).Z5())yield t.C5()}*Q5(){for(const t of f.get(this).tN())yield t.C5()}*sN(){for(const t of f.get(this).tN())for(const s of t.iN())yield s.C5()}get index(){return f.get(this).KF()}get isVisible(){return f.get(this).eN()}set isVisible(t){f.get(this).hN(t)}get rN(){return f.get(this).nN()}get isInteractive(){return f.get(this).oN()}set isInteractive(t){f.get(this).aN(t)}get lN(){return f.get(this).uN()}set lN(t){f.get(this).cN(!!t)}get fN(){return f.get(this).dN()}get opacity(){return f.get(this).sA()}set opacity(t){t=Se.Gr(+t,0,1),isNaN(t)||f.get(this).eA(t)}set scale(t){be.Ie(t),f.get(this).pN(t)}get scale(){return f.get(this).mN()}set scaleRate(t){be.Ie(t),f.get(this).gN(t)}get scaleRate(){return f.get(this).yN()}set angle(t){be.Ie(t),f.get(this).v5(t)}get angle(){return f.get(this).wN()}set parallaxX(t){be.Ie(t),f.get(this).SN(t)}get parallaxX(){return f.get(this).bN()}set parallaxY(t){be.Ie(t),f.get(this).vN(t)}get parallaxY(){return f.get(this).MN()}set xN(t){be.Ie(t),f.get(this).Yv(t)}get xN(){return f.get(this).Xv()}set TN(t){f.get(this).GN(t)}get TN(){return f.get(this)._N()}set IN(t){f.get(this).CN(t)}get IN(){return f.get(this).PN()}set Y3(t){be.Ae(t);const s=ve.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");f.get(this).Rv(s)}get Y3(){return Me.get(f.get(this).EN())}set backgroundColor(t){if(be.qe(t),t.length<3)throw new Error("expected 3 elements");xe.ra(t[0],t[1],t[2]);const s=f.get(this),i=s.AN();i.xa(xe)||(i.fa(xe),s.ck().YD())}get backgroundColor(){const t=f.get(this).AN();return[t.da(),t.pa(),t.ya()]}set scrollX(t){be.Me(t);const s=f.get(this);s.RN(!0),s.M5(t)}get scrollX(){return f.get(this).x5()}set scrollY(t){be.Me(t);const s=f.get(this);s.RN(!0),s.T5(t)}get scrollY(){return f.get(this).G5()}scrollTo(t,s){be.Me(t),be.Me(s);const i=f.get(this);i.RN(!0),i.M5(t),i.T5(s)}_5(){const t=f.get(this);return[t.x5(),t.G5()]}FN(){f.get(this).RN(!1)}getViewport(){return f.get(this).ON().Dl()}DN(t,s,i=0){be.Me(t),be.Me(s),be.Me(i);const e=f.get(this),h=e.ck();return e.kN(t-h.LN(),s-h.NN(),i)}BN(t,s,i=0){be.Me(t),be.Me(s),be.Me(i);const e=f.get(this),h=e.ck(),[r,n]=e.WN(t,s,i);return[r+h.LN(),n+h.NN()]}VN(t,s,i=0){return be.Me(t),be.Me(s),be.Me(i),f.get(this).jN(t,s,i)}HN(t,s,i=0){return be.Me(t),be.Me(s),be.Me(i),f.get(this).UN(t,s,i)}get zN(){return f.get(this).JN()}}}{let e=function(t){let s=_e.get(t);return s||(s=Te.wr(Te.Event.Qf),_e.set(t,s)),s};e;const Te=self.Bs,Ge=self.$s,_e=new WeakMap,Ie=Te.Ws();self.qN=class{#mL;constructor(){const t=Te.yL.gL(Ie),s={runtime:{value:(this.#mL=t).ck().wL(),writable:!1},XN:{value:t.YN().BL(),writable:!1},UL:{value:t.zL().LL(),writable:!1}};t.$N(s),t.KN(s),Object.defineProperties(this,s),t.ck().JL(this,t)}static ZN(){return Te.yL.QN()}t4(){const t=_e.get(this);t&&(t.Sr(),_e.delete(this))}addEventListener(t,s,i){Ge.Ae(t),Ge.ih(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ge.Ae(t),Ge.ih(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}destroy(){const t=this.#mL,s=t.ck();s.s4(t),s.CO().c5()||s.xD().f5()||s.CO().i4()||s.d5()}e4(){const t=this.#mL.h4();return t?t.map(t=>t.ND()):[]}*r4(){const t=this.#mL;if(t.n4())for(const s of t.o4())yield s.ND()}get uid(){return this.#mL.a4()}get l4(){return this.#mL.u4()}set timeScale(t){Ge.Ie(t),this.#mL.iD(t)}get timeScale(){return this.#mL.c4()}f4(){this.#mL.d4()}get dt(){const t=this.#mL;return t.ck().YO(t)}m4(...t){Ge.qe(t);const s=new Set(t),i=this.#mL.g4();return s.ye(i)}y4(t){Ge.uh(t,Set),this.#mL.w4(t)}S4(){return new Set(this.#mL.g4())}signal(t){Ge.Ae(t);const s=this.#mL;s.ck().CO().b4(s,t)}zO(t){Ge.Ae(t);const s=this.#mL;return s.ck().CO().v4(s,t)}}}{const Ce=self.Bs,Pe=self.$s,Ee=Ce.Ws();self.M4=class extends self.qN{#mL;#x4=!1;#T4=null;#G4=!1;#_4=null;#I4;#C4;constructor(t){super(),this.#mL=Ce.yL.gL(Ee),this.#x4=!1,this.#T4=null,this.#G4=!1,this.#_4=null,this.#I4=t?.domComponentId,this.#C4=t?.wrapperComponentId}t4(){this.P4(!1),this.E4(!1),super.t4()}A4(){return Ce.yL.R4()}F4(t){const s=this.#mL;s.ck().O4(t,s)}D4(t){const s=this.#mL;return s.ck().L4(t,s)}N4(t,s){if(Pe.Ae(t),Pe.ih(s),!this.#I4)throw new Error("no DOM component id set");const i=this.#mL.ck();i.B4(this.#I4,t,s)}W4(t){Pe.qe(t);for(const[s,i]of t)this.N4(s,i)}V4(t,s){if(Pe.Ae(t),!this.#I4)throw new Error("no DOM component id set");const i=this.#mL.ck();i.Mf(this.#I4,t,s)}j4(t,s){if(Pe.Ae(t),!this.#I4)throw new Error("no DOM component id set");const i=this.#mL.ck();return i.KD(this.#I4,t,s)}H4(t,s){const i=this.#mL.ck();if(!i.fO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.#I4,handler:t,data:s,responseId:null});this.V4(t,s)}P4(t){if(this.#x4!==(t=!!t)){this.#x4=t;const s=this.#mL.ck();t?(this.#T4||(this.#T4=()=>this.U4()),s.Qf().addEventListener("tick",this.#T4)):s.Qf().removeEventListener("tick",this.#T4)}}z4(){return this.#x4}U4(){}E4(t){if(this.#G4!==(t=!!t)){this.#G4=t;const s=this.#mL.ck();t?(this.#_4||(this.#_4=()=>this.J4()),s.Qf().addEventListener("tick2",this.#_4)):s.Qf().removeEventListener("tick2",this.#_4)}}q4(){return this.#G4}J4(){}X4(){return[]}Y4(){return null}K4(t){}Z4(){if(!this.#C4)throw new Error("no wrapper component id set");const t=this.#mL.ck();return t.Q4(this.#C4)}tB(t,s){if(Pe.Ae(t),Pe.ih(s),!this.#C4)throw new Error("no wrapper component id set");const i=this.#mL.ck();i.sB(this.#C4,t,s)}iB(t){Pe.qe(t);for(const[s,i]of t)this.tB(s,i)}eB(t,s){if(!this.#C4)throw new Error("no wrapper component id set");this.runtime.MO.hB(this.#C4,t,s)}rB(t,s){if(this.#C4)return this.runtime.MO.nB(this.#C4,t,s);throw new Error("no wrapper component id set")}}}{let t=function(t){return class h extends t{#oB;#aB;constructor(t){super(t);const s=Ae.yL.gL(De),i=s.jD(),e=(this.#oB=s,this.#aB=i,Oe.set(this,s),[]),h=i.lB();if(h){const n=i.YN().m5().g5().length;for(let t=0;t<n;++t)e.push(new self.y5(h,t))}const r={effects:{value:e,writable:!1}};Object.defineProperties(this,r)}get layout(){return this.#aB.TD().vD()}get uB(){return this.#aB.HD().C5()}get x(){return this.#aB.Hv()}set x(t){t=+t;const s=this.#aB;isNaN(t)||s.Hv()===t||(s.Uv(t),s.cB())}get y(){return this.#aB.Jv()}set y(t){t=+t;const s=this.#aB;isNaN(t)||s.Jv()===t||(s.qv(t),s.cB())}setPosition(t,s){t=+t,s=+s;const i=this.#aB;isNaN(t)||isNaN(s)||i.Hv()===t&&i.Jv()===s||(i.fB(t,s),i.cB())}dB(){const t=this.#aB;return[t.Hv(),t.Jv()]}pB(t,s){if(t=+t,s=+s,!(isNaN(t)||isNaN(s)||0===t&&0===s)){const i=this.#aB;i.mB(t,s),i.cB()}}get xN(){return this.#aB.Xv()}set xN(t){t=+t;const s=this.#oB,i=this.#aB;isNaN(t)||i.Xv()===t||(i.Yv(t),s.ck().YD())}get gB(){return this.#aB.yB()}get width(){return this.#aB.Em()}set width(t){t=+t;const s=this.#aB;isNaN(t)||s.Em()===t||(s.Lm(t),s.cB())}get height(){return this.#aB.Wm()}set height(t){t=+t;const s=this.#aB;isNaN(t)||s.Wm()===t||(s.Am(t),s.cB())}w5(t,s){t=+t,s=+s;const i=this.#aB;isNaN(t)||isNaN(s)||i.Em()===t&&i.Wm()===s||(i._C(t,s),i.cB())}getSize(){const t=this.#aB;return[t.Em(),t.Wm()]}get angle(){return this.#aB.GetAngle()}set angle(t){t=Ae._r(+t);const s=this.#aB;isNaN(t)||s.GetAngle()===t||(s.v5(t),s.cB())}get wB(){return Ae.Cr(this.angle)}set wB(t){this.angle=Ae.Ir(t)}Au(){return this.#aB.SB().Dl()}bB(){return this.#aB.vB().Gu()}MB(){return this.#aB.xB()}get isVisible(){return this.#aB.nN()}set isVisible(t){t=!!t;const s=this.#oB,i=this.#aB;i.nN()!==t&&(i.hN(t),s.ck().YD())}get opacity(){return this.#aB.sA()}set opacity(t){t=Ae.Gr(+t,0,1);const s=this.#oB,i=this.#aB;isNaN(t)||i.sA()===t||(i.eA(t),s.ck().YD())}set TB(t){if(Re.qe(t),t.length<3)throw new Error("expected 3 elements");Ne.ra(t[0],t[1],t[2]);const s=this.#oB,i=this.#aB;i.GB().xa(Ne)||(i._B(Ne),s.ck().YD())}get TB(){const t=this.#aB.GB();return[t.da(),t.pa(),t.ya()]}set Y3(t){Re.Ae(t);const s=ke.get(t);if("number"!=typeof s)throw new Error("invalid blend mode");const i=this.#oB,e=this.#aB;e.Rv(s),i.ck().YD()}get Y3(){return Le.get(this.#aB.EN())}IB(){this.#aB.CB()}PB(){this.#aB.EB()}AB(t){Re.uh(t,Fe);const s=this.#oB,i=s.ck().O5(t);if(!i)throw new Error("invalid layer");s.jD().RB(i)}OB(t,s){Re.uh(t,h),this.#aB.DB(Oe.get(t),s)}get zIndex(){return this.#aB.UD()}get kB(){return this.#aB.LB()}set kB(t){this.#aB.NB(!!t)}eu(t,s){return Re.Me(t),Re.Me(s),this.#aB.BB(+t,+s)}Rk(t){Re.uh(t,h);const s=this.#oB,i=Oe.get(t);return s.ck().hO().Fk(s,i)}Dk(){const t=this.#oB,s=t.ck().hO().kk(t);return s?s.ND():null}getParent(){const t=this.#oB.WB();return t?t.ND():null}VB(){const t=this.#oB.jB();return t?t.ND():null}*HB(){for(const t of this.#oB.HB())yield t.ND()}UB(){return this.#oB.zB()}JB(t){const s=this.#oB.qB(t);return s?s.ND():null}*children(){for(const t of this.#oB.children())yield t.ND()}*XB(){for(const t of this.#oB.XB())yield t.ND()}YB(t,s){Re.uh(t,h),Re.Be(s),s=s||{};const i=this.#oB,e=Oe.get(t);i.$B(e,s)}removeChild(t){Re.uh(t,h);const s=this.#oB,i=Oe.get(t);s.KB(i)}ZB(){const t=this.#oB;if(t.QB()){const s=t.WB();s.KB(t)}}t6(){const t=this.#aB;return{s6:t.i6(),e6:t.h6(),r6:t.n6(),o6:t.a6(),l6:t.u6(),c6:t.f6(),d6:t.p6(),m6:t.g6(),y6:t.w6()}}S6(t,s){Re.Ie(t),Re.Ie(s),this.#aB.b6(t,s)}v6(){const t=this.#aB;t.M6(),t.cB()}x6(t,s,i){Re.Ie(t),Re.Ie(s),Re.Ne(i);const e=this.#aB;e.T6(t,s,i)&&e.cB()}G6(t,s){let i=NaN,e=NaN,h=NaN,r=NaN,n=NaN,o=this.#aB;if(o._6()){const a=o.I6(),l=a.PM(t,s);null!==l&&(i=l.Hv(),e=l.Jv(),h=l.Xv(),r=l.$v(),n=l.Zv())}return{x:i,y:e,xN:h,u:r,v:n}}C6(){const t=this.#aB;if(!t._6())return[0,0];const s=t.I6();return[s.wM(),s.SM()]}}};0;const Ae=self.Bs,Re=self.$s,Fe=self.F5,Oe=new WeakMap,De=Ae.Ws(),ke=new Map([["normal",0],["additive",1],["copy",3],["destination-over",4],["source-in",5],["destination-in",6],["source-out",7],["destination-out",8],["source-atop",9],["destination-atop",10]]),Le=new Map([...ke.entries()].map(t=>[t[1],t[0]])),Ne=Ae.wr(Ae.$o);self.P6=t(self.qN),self.E6=t(self.M4)}{const Be=self.$s;self.A6=class extends self.P6{#mL;constructor(){super(),this.#mL=self.qN.ZN()}R6(){return this.#mL.O6().F6()}focus(){this.#mL.O6().D6()}blur(){this.#mL.O6().k6()}L6(t,s){Be.Ae(t),this.#mL.O6().N6(t,s)}}}{let e=function(t){let s=je.get(t);return s||(s=We.wr(We.Event.Qf),je.set(t,s)),s};e;const We=self.Bs,Ve=self.$s,je=new WeakMap,He=We.Ws();self.B6=class{#mL;constructor(){const t=We.yL.gL(He),s={runtime:{value:(this.#mL=t).ck().wL(),writable:!1},behavior:{value:t.V6().W6(),writable:!1},j6:{value:t.U6().H6(),writable:!1}};Object.defineProperties(this,s),t.ck().JL(this,t)}static ZN(){return We.yL.QN()}get z6(){return this.#mL.J6().ND()}t4(){const t=je.get(this);t&&(t.Sr(),je.delete(this))}addEventListener(t,s,i){Ve.Ae(t),Ve.ih(s),e(this).addEventListener(t,s,i)}removeEventListener(t,s,i){Ve.Ae(t),Ve.ih(s),e(this).removeEventListener(t,s,i)}dispatchEvent(t){e(this).dispatchEvent(t)}}}{const Ue=self.Bs,ze=Ue.Ws();self.q6=class{constructor(){const t=Ue.yL.gL(ze),s={runtime:{value:t.ck().wL(),writable:!1},behavior:{value:t.V6().W6(),writable:!1},name:{value:t.uf(),writable:!1}};Object.defineProperties(this,s)}}}{const Je=self.Bs,qe=Je.Ws();self.X6=class{#mL;constructor(){const t=Je.yL.gL(qe),s={runtime:{value:(this.#mL=t).ck().wL(),writable:!1}};Object.defineProperties(this,s)}qL(){return this.#mL.i5().map(t=>t.ND())}static DL(t){if(!t)return null;const s=Je.yL.Y6(t);return s?s.W6():null}}}{const Xe=self.Bs,Ye=self.$s,$e=Xe.wr(Xe.$o);self.y5=class{#mL;constructor(t,s){this.#mL=t;const i={index:{value:s,writable:!1}};Object.defineProperties(this,i)}get name(){const t=this.#mL.g5();return t[this.index].uf()}get isActive(){return this.#mL.K6(this.index)}set isActive(t){t=!!t;const s=this.#mL;s.K6(this.index)!==t&&(s.Z6(this.index,t),s.Q6(),s.ck().YD())}setParameter(t,s){Ye.Ie(t),t=Math.floor(+t);const i=this.#mL,e=i.tW(this.index,t);if(null===e)throw new RangeError("invalid index");if(e instanceof Xe.$o){if(!Array.isArray(s)||s.length<3)throw new TypeError("expected array with 3 elements");$e.ra(s[0],s[1],s[2]),s=$e}else if("number"!=typeof s)throw new TypeError("expected number");const h=i.sW(this.index,t,s);h&&i.K6(this.index)&&i.ck().YD()}getParameter(t){Ye.Ie(t),t=Math.floor(+t);const s=this.#mL,i=s.tW(this.index,t);if(null===i)throw new RangeError("invalid index");return i instanceof Xe.$o?[i.da(),i.pa(),i.ya()]:i}}}self.iW=class{#mL;constructor(t){this.#mL=t,Object.defineProperties(this,{name:{value:t.uf(),writable:!1}})}get speed(){return this.#mL.eW()}get isLooping(){return this.#mL.hW()}get repeatCount(){return this.#mL.rW()}get nW(){return this.#mL.oW()}get aW(){return this.#mL.lW()}get frameCount(){return this.#mL.uW()}cW(){return this.#mL.fW().map(t=>t.dW())}*frames(){for(const t of this.#mL.fW())yield t.dW()}};self.lk=class{#mL;constructor(t){this.#mL=t}static ak(t){return t.#mL}get width(){return this.#mL.Em()}get height(){return this.#mL.Wm()}getSize(){const t=this.#mL;return[t.Em(),t.Wm()]}pW(t){return t.mW(this)}gW(){return this.#mL.eP().Dl()}};{const Ke=self.$s;self.yW=class extends self.lk{#mL;constructor(t){super(t.wW()),this.#mL=t,Object.defineProperties(this,{duration:{value:t.SW(),writable:!1},bW:{value:t.vW(),writable:!1},MW:{value:t.xW(),writable:!1}})}TW(){const t=this.#mL;return[t.vW(),t.xW()]}GW(){return this.#mL._W()}IW(t){return this.PW(t)[0]}EW(t){return this.PW(t)[1]}PW(t){let s=this.#mL,i=null;if("number"==typeof t)i=s.AW(Math.floor(t));else{if("string"!=typeof t)throw new TypeError("expected string or number");i=s.RW(t)}return i?[i.Hv(),i.Jv()]:this.TW()}FW(){const t=this.#mL.OW();return t?t.qu():0}DW(t){return this.kW(t)[0]}LW(t){return this.kW(t)[1]}kW(t){Ke.Ie(t),t=Math.floor(t);const s=this.#mL.OW();if(!s||t<0||t>=s.qu())return[0,0];const i=s.Ju(),e=i[2*t],h=i[2*t+1];return[e,h]}get tag(){return this.#mL.NW()}}}{let s=function(t){const s=Qe.get(t);if(s.BW())throw new Error("timeline/tween was released and is no longer valid");return s};s;const Ze=self.$s,Qe=new WeakMap;self.WW=class{constructor(t){Qe.set(this,t),t.ck().JL(this,t)}pause(){s(this).VW()}resume(){s(this).jW()}stop(){s(this).b0()}m4(t){return s(this).HW(t)}set time(t){Ze.Ie(t),s(this).UW(t)}get time(){return s(this).ER()}set totalTime(t){Ze.Ie(t),s(this).zW(t)}get totalTime(){return s(this).JW()}set isLooping(t){s(this).qW(!!t)}get isLooping(){return s(this).XW()}set aW(t){s(this).YW(!!t)}get aW(){return s(this).$W()}set playbackRate(t){Ze.Ie(t),s(this).KW(t)}get playbackRate(){return s(this).ZW()}get progress(){const t=s(this);return t.ER()/t.JW()}get tags(){return s(this).QW()}get finished(){return s(this).tV()}get isPlaying(){return s(this).IsPlaying()}get sV(){return s(this).iV()}get eV(){return Qe.get(this).BW()}}}{let i=new WeakMap;self.hV=class extends self.WW{constructor(t){super(t),i.set(this,t);const s={name:{value:t.uf(),writable:!1}};Object.defineProperties(this,s)}}}{let i=function(t){const s=h.get(t);if(s.BW())throw new Error("tween was released and is no longer valid");return s},e=(i,self.$s),h=new WeakMap,r=new WeakMap,n=null;self.rV=class extends self.WW{constructor(t,s,i){super(t),n=n||i.nV,h.set(this,t),s&&r.set(this,s)}stop(){const t=i(this),s=r.get(this);s.oV(t)}aV(t){e.Ae(t);const s=self._c.Hc(n(t));i(this).lV(s)}get z6(){const t=i(this).uV();return t?t.ND():null}get cV(){return i(this).fV()}set cV(t){i(this).dV(!!t)}get value(){const t=i(this);if("value"!==t.pV())throw new Error("not a value tween");return t.gV("value").mV()}}}self.yV=class extends self.pL{constructor(){super()}};{const th=self.Bs,sh=self.$s,ih=th.Ws();self.wV=class extends self.yV{#mL;#I4;#SV=0;#bV=new Map;constructor(t){if(super(),this.#mL=th.yL.gL(ih),!t?.domComponentId)throw new Error("no DOM component ID specified");this.#I4=t.domComponentId,this.vV("elem-focused",t=>t.MV()),this.vV("elem-blurred",t=>{t&&t.xV()})}TV(t){const s=this.#SV++;return this.#bV.set(s,t),s}GV(t){this.#bV.delete(t)}vV(t,i){const s=this.#mL.ck();s.B4(this.#I4,t,t=>{const s=this.#bV.get(t.elementId);i(s,t)})}_V(t){sh.qe(t);for(const[s,i]of t)this._V(s,i)}}}{const eh=self.Bs,hh=(new WeakMap,eh.Ws());self.IV=class extends self.HL{#mL;constructor(){super(),this.#mL=eh.yL.gL(hh)}CV(){}PV(){return this.#mL.wW().EV()}AV(t){}RV(t){}FV(){}OV(t){}}}{const rh=self.Bs,nh=(new WeakMap,rh.Ws());self.DV=class extends self.E6{#mL;#kV=null;#LV=null;constructor(t){super(t),this.#mL=rh.yL.gL(nh)}t4(){if(super.t4(),this.#kV){const t=this.#mL.ck().Qf();t.removeEventListener("renderercontextlost",this.#kV),t.removeEventListener("renderercontextrestored",this.#LV),this.#kV=null,this.#LV=null}}NV(){if(!this.#kV){this.#kV=()=>this.BV(),this.#LV=()=>this.WV();const t=this.#mL.ck().Qf();t.addEventListener("renderercontextlost",this.#kV),t.addEventListener("renderercontextrestored",this.#LV)}}BV(){}WV(){}VV(t){}}}{const oh=self.Bs,ah=oh.wr(oh.Rect),lh=new WeakMap,uh=oh.Ws();self.jV=class extends self.DV{#HV=-1;#UV=!0;#zV=!1;#JV=!1;#qV=-.2;#XV=oh.wr(oh.Rect,0,0,-1,-1);#YV=0;#$V=0;#KV=-1;#ZV=-1;#QV=!1;constructor(t){if(!t?.domComponentId)throw new Error("no DOM component ID specified");super(t);const s=oh.yL.gL(uh),i=(lh.set(this,s),this.#HV=this.UL.TV(this),s.ck().tL());this.#YV=i.tj(),this.#$V=i.sj(),this.P4(!0)}t4(){super.t4(),this.UL.GV(this.#HV),this.ij("destroy"),this.#HV=-1,lh.delete(this)}ej(){const t=lh.get(this).ck();if(t.fO())throw new Error("not valid in worker mode");return this.hj("get-element")}ij(t,s){(s=s||{}).elementId=this.#HV,this.V4(t,s)}hj(t,s){return(s=s||{}).elementId=this.#HV,this.H4(t,s)}rj(t,s){return(s=s||{}).elementId=this.#HV,this.j4(t,s)}nj(t){t=t||{};const s=lh.get(this).jD();t.elementId=this.#HV,t.isVisible=s.nN(),t.htmlIndex=s.HD().oj(),t.htmlZIndex=s.aj(),Object.assign(t,this.lj()),this.#UV=!!t.isVisible,this.H4("create",t),this.uj(!0)}cj(t){this.#UV!==(t=!!t)&&(this.#UV=t,this.ij("set-visible",{isVisible:t}))}U4(){this.uj(!1)}fj(){const t=lh.get(this).ck(),s=t.tL().pj();return"Android"===oh.mi.gi&&("scale-inner"===s||"scale-outer"===s||"crop"===s)}uj(u){const c=lh.get(this);if(!c.mj()){let t=c.jD(),s=t.HD(),i=t.SB(),[e,h]=s.WN(i.Al(),i.Rl()),[r,n]=s.WN(i.Fl(),i.Ol()),o=c.ck().tL(),a=o.hL(),l=o.nL();if(t.nN()&&s.nN())if(!this.fj()&&(r<=0||n<=0||a<=e||l<=h))this.cj(!1);else{ah.set(e,h,r,n);const f=o.tj(),d=o.sj(),p=s.oj(),m=t.aj();if(!u&&ah.equals(this.#XV)&&this.#YV===f&&this.#$V===d&&this.#KV===p&&this.#ZV===m)this.cj(!0);else{this.#XV._(ah),this.#YV=f,this.#$V=d,this.#KV=p,this.#ZV=m,this.cj(!0);let t=null;this.#JV&&(t=s.gj()+this.#qV),this.ij("update-position",{left:Math.round(this.#XV.Al()),top:Math.round(this.#XV.Rl()),width:Math.round(this.#XV.width()),height:Math.round(this.#XV.height()),htmlIndex:p,htmlZIndex:m,fontSize:t})}}else this.cj(!1)}}yj(){this.hj("focus",{focus:!0})}wj(){this.hj("focus",{focus:!1})}MV(){this.#zV=!0}xV(){this.#zV=!1}Sj(){return this.#zV}bj(t,s){this.postToDOMElement("set-css-style",{prop:oh.qo(t),val:s})}vj(t,s){this.postToDOMElement("set-attribute",{name:t,val:s})}Mj(t){this.postToDOMElement("remove-attribute",{name:t})}xj(){this.#QV||(this.#QV=!0,Promise.resolve().then(()=>{this.#QV=!1,this.ij("update-state",this.lj())}))}lj(){}Tj(){return this.#HV}}}self.Gj=class extends self.X6{constructor(){super()}};self._j=class extends globalThis.q6{constructor(){super()}CV(){}};{const ch=self.Bs,fh=new WeakMap,dh=ch.Ws();self.Ij=class extends self.B6{#x4=!1;#G4=!1;#Cj=!1;constructor(){super(),fh.set(this,ch.yL.gL(dh))}t4(){super.t4(),this.P4(!1),this.E4(!1),this.Pj(!1),fh.delete(this)}A4(){return ch.yL.R4()}Ej(){}F4(t){const s=fh.get(this);s.ck().O4(t,s.J6(),s.U6())}D4(t){const s=fh.get(this);return s.ck().L4(t,s.J6(),s.U6())}P4(t){if(this.#x4!==(t=!!t)){this.#x4=t;const s=fh.get(this).ck();t?s.Aj(this):s.Rj(this)}}z4(){return this.#x4}U4(){}E4(t){if(this.#G4!==(t=!!t)){this.#G4=t;const s=fh.get(this).ck();t?s.Fj(this):s.Oj(this)}}q4(){return this.#G4}J4(){}Pj(t){if(this.#Cj!==(t=!!t)){this.#Cj=t;const s=fh.get(this).ck();t?s.Dj(this):s.kj(this)}}Lj(){return this.#Cj}Nj(){}X4(){return[]}Y4(){return null}K4(t){}}}{let e=self.$s,h=null;self.xO=class{constructor(t){h=t}sk(t){h.ik(t)}hB(t,s,i){e.Ae(t),e.Ae(s),e.Xe(i),h.Bj(t,s,i)}nB(t,s,i){return e.Ae(t),e.Ae(s),e.Xe(i),h.Wj(t,s,i)}Vj(t){return e.Re(t),new self.jj(h,t)}set Hj(t){h.Uj(!!t)}get Hj(){return h.zj()}Jj(t){h.qj(!!t)}Xj(t){e.Me(t);const s=h.Yj(t);return s?s.BL():null}}}self.jj=class{#$j;#Kj;#Zj;#Qj;#t8;#s8;constructor(t,s){const i=(this.#$j=t).CO(),e=t.OO(),h=(this.#Kj=e,this.#Zj=e.i8(),t.VO()),r=(this.#Qj=h.e8(),this.#t8=h.h8(e),i.r8()),n=r.h8();this.#s8=n,s&&n.n8(s),t.o8(!1)}a8(){const t=this.#$j.CO(),s=this.#Zj,i=this.#s8;t.l8(s),this.#Kj.u8(this.#Qj,this.#t8),t.c8(s),i.f8(i.KF()+1)}get d8(){return this.#s8.p8()}release(){const t=this.#$j,s=t.VO(),i=t.CO().r8();t.o8(!0),i.m8(),s.m8()}};{let d=self.Bs,h=self.$s,p=null,r=null;self.g8=class{constructor(t,s){r=t,p=s}y8(){p.uA()}w8(t){p.aA(t)}S8(){p.uS()}b8(){p.hS()}v8(){p.yS()}setColor(t){p.iA(t[0],t[1],t[2],t[3])}M8(t,s,i,e){p.iA(t,s,i,e)}x8(){p.hA()}T8(t){p.eA(t)}G8(t){p.NS(t)}_8(){p.BS()}rect(t){p.dA(t.left,t.top,t.right,t.bottom)}I8(t,s,i,e){p.dA(t,s,i,e)}C8(t){p.ou(d.ou._u(t))}P8(t,s,i,e,h,r,n,o){p.xb(t,s,i,e,h,r,n,o)}E8(t,s){p.YS(d.ou._u(t),d.Rect.kl(s))}A8(t,s){p.gA(d.ou._u(t),d.ou._u(s))}F8(t,s,i,e,h,r,n,o,a,l,u,c,f){p.yA(t,s,i,e,h,r,n,o,a,l,u,c,d.Rect.kl(f))}O8(t,s,i,e,h,r,n,o,a,l,u,c,f){p.US(t,s,i,e,h,r,n,o,a,l,u,c,d.ou._u(f))}D8(t,s,i){p.wA(t,s,i)}k8(t){p.Mb(t)}line(t,s,i,e){p.zm(t,s,i,e)}L8(t,s,i,e,h,r){p.zS(t,s,i,e,h,r)}N8(t,s,i,e){p.$S(t,s,i,e)}B8(t){p.tb(d.Rect.kl(t))}W8(t){p.sb(d.ou._u(t))}V8(t){p.ob(t)}j8(){p.ab()}H8(t){p.fb(t)}U8(){p.yb()}z8(t){h.fh(t,self.J8);const s=t?r.O5(t):null;p.nA(s)}q8(t,s){const i=self.lk.ak(t);if(i)return i.X8(p,{WM:s?.WM??"clamp-to-edge",VM:s?.VM??"clamp-to-edge",jM:s?.jM??"trilinear",zM:s?.zM??!0});throw new Error("invalid IImageInfo")}Y8(t){const s=self.lk.ak(t);if(!s)throw new Error("invalid IImageInfo");s.XI()}mW(t){const s=self.lk.ak(t);if(!s)throw new Error("invalid IImageInfo");const i=s.mx();return self.J8.K8(r,i)}Z8(t,s,i){h.Ie(t),h.Ie(s);const e=p.K2(t,s,{WM:i?.WM??"clamp-to-edge",VM:i?.VM??"clamp-to-edge",jM:i?.jM??"trilinear",zM:i?.zM??!0});return self.J8.K8(r,e)}Q8(t,s,i){h.uh(s,self.J8);const e=r.O5(s);p.iP(t,e,{premultiplyAlpha:i?.premultiplyAlpha??!0})}deleteTexture(t){h.uh(t,self.J8);const s=r.O5(t);p.ix(s)}tH(){const t=p.Nb();return new self.sH(r,t)}iH(){r.tL().eH(p)}hH(t){h.uh(t,globalThis.F5);const s=r.O5(t);s.rH(p)}}}{const ph=new WeakMap,mh=new WeakMap;self.J8=class{constructor(t,s){ph.set(this,{runtime:t,nH:s}),mh.set(s,this),t.JL(this,s),Object.defineProperties(this,{width:{value:s.Em(),writable:!1},height:{value:s.Wm(),writable:!1}})}static K8(t,s){if(!s)return null;const i=mh.get(s);return i||new self.J8(t,s)}}}{let e=function(t){return yh.get(t).oH};e;const gh=self.$s,yh=new WeakMap;self.sH=class{constructor(t,s){yh.set(this,{runtime:t,oH:s}),t.JL(this,s)}release(){e(this).Sr()}set aH(t){gh.Ae(t),e(this).iC(t)}get aH(){return e(this).hI()}set lH(t){gh.Ie(t),e(this).eC(t)}get lH(){return e(this).hC()}set lineHeight(t){gh.Ie(t),e(this).nC(t)}get lineHeight(){return e(this).oC()}set uH(t){e(this).aC(t)}get uH(){return e(this).lC()}set cH(t){e(this).uC(t)}get cH(){return e(this).cC()}setColor(t){gh.qe(t),this.fH(t[0],t[1],t[2])}fH(t,s,i){e(this).gC(t,s,i)}dH(t){gh.Ae(t),e(this).Fv(t)}set pH(t){e(this).yC(t)}get pH(){return e(this).wC()}set verticalAlign(t){e(this).SC(t)}get verticalAlign(){return e(this).bC()}set mH(t){e(this).vC(t)}get mH(){return e(this).MC()}set gH(t){e(this).xC(t)}get gH(){return e(this).TC()}set text(t){gh.Ae(t),e(this).xf(t)}get text(){return e(this).GC()}w5(t,s,i){gh.Ie(t),gh.Ie(s),gh.Ie(i),e(this)._C(t,s,i)}pW(){const{runtime:t,oH:s}=yh.get(this),i=s.mx();return self.J8.K8(t,i)}gW(){return e(this).eP().Dl()}yH(t){gh.ih(t),e(this).$I=t}wH(){e(this).XI()}get SH(){return e(this).CC()}get bH(){return e(this).EC()}}}{let e=function(t){if(!t)return"";const s=t.split(".");if(s.length<2)return"";const i=s.at(-1).toLowerCase();return Sh.get(i)||""},r=function(e){return new Promise((t,s)=>{const i=document.createElement("script");i.onload=t,i.onerror=s,i.async=!1,i.type="module",i.src=e,document.head.appendChild(i)})};e,r;const d=self.Bs,wh=new Set(["local","remote"]),Sh=new Map([["mp4","video/mp4"],["webm","video/webm"],["m4a","audio/mp4"],["mp3","audio/mpeg"],["js","application/javascript"],["wasm","application/wasm"],["svg","image/svg+xml"],["html","text/html"]]);d.vH=class extends d.gr{constructor(t,s){super();const i=s.exportType,e=(this.Sf=t,this.MH="folders",this.xH=new Map,this.TH="cordova"===i,this.GH=!!s.isiOSCordova,this._H=!!s.isFileProtocol,this.IH=s.swClientId,this.CH=s.supportedAudioFormats||{},this.PH=new Map,this.EH=!1,this.AH=s.scriptFolder,this.RH="",this.FH="",this.OH="",this.DH=s.fileMap||new Map,this.kH=new Map,"html5"===i||"scirra-arcade"===i||"instant-games"===i);this.LH=e?"remote":"local",this.NH=new Map,this.BH=[],this.WH=[],this.VH=!1,this.jH=0,this.HH=0,this.UH=0,this.zH=!1,this.JH=d.wr(d.Ld,()=>this.qH(),50),this.XH=d.wr(d.Cd,Math.max(d.hardwareConcurrency,8)),this.YH=d.wr(d.Cd,20),this.$H=new self.ek(this)}Sr(){for(const t of this.NH.values())t.Sr();this.NH.clear(),d.Un(this.WH),this.Sf=null}ck(){return this.Sf}KH(t){this.MH=t}Sk(){return this.MH}ZH(){return this.AH}QH(t){this.RH=t}Mk(){return this.RH}tU(t){this.FH=t}sU(){return this.FH}iU(t){this.OH=t}eU(){return this.OH}hU(){return this._H}Ao(t,s){return s=s||this.LH,d._o(t)?("flat"===this.MH&&(t=t.toLowerCase()),this.TH&&this._H?this.rU(t):"playable-ad-single-file"===this.Sf.$k()?self.c3_runtimeInterface._PlayableAdFetchBlob(t):("local"===s?this.XH:this.YH).xc(()=>d.Ao(t))):d.Ao(t)}Ro(t){return d._o(t)?("flat"===this.MH&&(t=t.toLowerCase()),this.TH&&this._H?this.nU(t):"playable-ad-single-file"===this.Sf.$k()?d.Oo(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.LH?this.XH:this.YH).xc(()=>d.Ro(t))):d.Ro(t)}Po(t){return d._o(t)?("flat"===this.MH&&(t=t.toLowerCase()),this.TH&&this._H?this.oU(t):"playable-ad-single-file"===this.Sf.$k()?d.Do(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("local"===this.LH?this.XH:this.YH).xc(()=>d.Po(t))):d.Po(t)}async Eo(t){const s=await this.Po(t);return JSON.parse(s)}aU(t,s){return"flat"===this.MH&&(t=t.toLowerCase()),this.Sf.KD("runtime","cordova-fetch-local-file",{filename:t,as:s})}oU(t){return this.aU(t,"text")}async rU(t){const s=await this.aU(t,"buffer"),i=e(t);return new Blob([s],{type:i})}async lU(t){"flat"===this.MH&&(t=t.toLowerCase());let s=this.xH.get(t);if(!s){const i=await this.rU(t);s=URL.createObjectURL(i),this.xH.set(t,s)}return s}nU(t){return this.aU(t,"buffer")}bk(t){"flat"===this.MH&&(t=t.toLowerCase());let s=this.RH+t;return"Gecko"===d.mi.vi&&"preview"===this.Sf.$k()?this.uU(s):s}yk(t){return d.Go(t)?Promise.resolve(t):this.TH&&this._H?this.lU(t):"playable-ad-single-file"===this.Sf.$k()?URL.createObjectURL(self.c3_runtimeInterface._PlayableAdFetchBlob(t)):("flat"===this.MH&&(t=t.toLowerCase()),Promise.resolve(t))}cU(s){if(d.Go(s)||"preview"!==this.Sf.$k()||!this.IH||!s)return s;try{const t=new URL(s,location.href);return t.searchParams.set("__c3_client_id",this.IH),t.toString()}catch(t){return console.warn("Invalid iframe URL: "+s),s}}fU(t){return this.yk(t)}dU(t){if(t.pU&&!wh.has(t.pU))throw new Error("invalid load policy");let s=this.NH.get(t.url);return s||(s=d.wr(d.mU,this,{url:t.url,size:t.size||0,pU:t.pU||this.LH}),this.NH.set(s.gU(),s),this.VH)||(this.jH+=s.mc(),this.WH.push(s.yU().then(()=>this.wU(s.mc())))),s}SU(t){this.NH.delete(t.gU())}async bU(){try{await Promise.all(this.WH),this.UH=1}catch(t){console.error("Error loading: ",t),this.zH=!0,this.qH()}}vU(){this.VH=!0}MU(){return this.zH}wU(t){this.HH+=t,this.JH.Yd()}qH(){const t=d.wr(d.Event,"loadingprogress");this.UH=d.Gr(this.HH/this.jH,0,1),t.progress=this.UH,this.Sf.Qf().dispatchEvent(t)}xU(){return this.UH}TU(t){d.Xn(this.BH,t),this.BH.length&&this.WH.push(this.GU())}async GU(){const t=[],s=[];for(const[i,e,h]of this.BH)this.jH+=h,t.push(this._U(i,e,s).then(()=>this.wU(h)));await Promise.all(t),this.Sf.fO()&&0<s.length&&await this.Sf.KD("runtime","load-webfonts",{webfonts:s})}async _U(s,i,e){try{let t=await this.yk(i);"Gecko"===d.mi.vi&&(s=`'${s}'`),("Gecko"===d.mi.vi&&"preview"===this.Sf.$k()||"playable-ad-single-file"===this.Sf.$k())&&(t=this.uU(t));const h=new FontFace(s,`url('${t}')`);(this.Sf.fO()?self:document).fonts.add(h),await h.load(),this.Sf.fO()&&e.push({name:s,url:t})}catch(t){console.warn(`[C3 runtime] Failed to load web font '${s}': `,t)}}rk(t){return!!this.CH[t]}IU(t,s){this.EH=!!s;for(const[i,e,h]of t)this.PH.set(i,{fileName:i,CU:e.map(t=>({type:t[0],PU:t[1],EU:i+t[1],fileSize:t[2]})),isMusic:h})}AU(t){"flat"===this.MH&&(t=t.toLowerCase());const s=this.PH.get(t);if(!s)return null;let i=null;for(const e of s.CU)if(i||"audio/webm; codecs=opus"!==e.type||(i=e),this.rk(e.type))return e;return i}RU(t){const s=this.AU(t);return s?{url:this.bk(s.EU),type:s.type}:null}FU(){if(this.EH){const t=[];for(const s of this.PH.values())if(!s.isMusic){const i=this.AU(s.fileName);i&&t.push({originalUrl:s.fileName,url:this.bk(i.EU),type:i.type,fileSize:i.fileSize})}return t}return[]}OU(t){return"preview"===this.Sf.$k()&&(t=new URL(t,location.href).toString()),this.DH.get(t)||null}uU(t){let s=this.kH.get(t);if(!s){const i=this.OU(t);if(!i)return t;s=URL.createObjectURL(i),this.kH.set(t,s)}return s}tO(){return this.$H}async _k(...t){const s=await Promise.all(t.map(t=>this.yk(t)));if(this.Sf.fO())if(1===t.length){const i=t[0];await import((d._o(i)?"./":"")+i)}else{const e=t.map(t=>`import "${d._o(t)?"./":""}${t}";`).join("\n"),h=URL.createObjectURL(new Blob([e],{type:"application/javascript"}));await import(h)}else await Promise.all(s.map(t=>r(t)))}async Ck(t){if(WebAssembly.compileStreaming){const s=await this.yk(t);return WebAssembly.compileStreaming(fetch(s))}{const i=await d.Ro(t);return WebAssembly.compile(i)}}async Ek(t){const s=await this.yk(t);return this.Sf.KD("runtime","add-stylesheet",{url:s})}}}{const bh=self.Bs;bh.DU=class extends bh.gr{constructor(t,s){super(),this.kU=t,this.Sf=t.ck(),this.LU=s.url||"",this.NU=s.size,this.BU=s.pU,this.WU=s.blob||null,this.VU=!!this.WU,this.ey=null}Sr(){this.ey=null,this.kU=null,this.Sf=null,this.WU=null}gU(){return this.LU}mc(){return this.NU}yU(){return"local"===this.BU||this.WU?(this.VU=!0,Promise.resolve()):(this.ey||(this.ey=this.kU.Ao(this.LU,this.BU).then(t=>(this.VU=!0,this.ey=null,this.WU=t)).catch(t=>{console.error("Error loading resource: ",t),this.ey=null})),this.ey)}jU(){return this.VU}HU(){return this.WU?Promise.resolve(this.WU):this.ey||this.kU.Ao(this.LU,this.BU)}}}{const ar=self.Bs,lr=new ar.Cd,ur=new Set;ar.mU=class extends ar.DU{constructor(t,s){super(t,s),this.UU=null,this.zU=null,this.E1=0,this.JU=-1,this.qU=-1,ur.add(this)}Sr(){if(0!==this.E1)throw new Error("released image asset which still has texture references");this.kU.SU(this),this.UU=null,ur.delete(this),super.Sr()}static XU(){for(const t of ur)t.UU=null,t.zU=null,t.E1=0}X8(t,s){return s=s||{},this.E1++,this.zU?Promise.resolve(this.zU):(this.UU||(s.HM=this.Sf.tL().YU(),this.UU=this.$U(t,s)),this.UU)}async $U(s,i){try{const e=await this.HU();return 0===this.E1?this.UU=null:await lr.xc(async()=>{const t=await s.HA(e,i);return this.UU=null,0===this.E1?(s.ix(t),null):(this.zU=t,this.JU=t.Em(),this.qU=t.Wm(),this.zU)})}catch(t){throw console.error("Failed to load texture: ",t),t}}XI(){if(this.E1<=0)throw new Error("texture released too many times");if(this.E1--,0===this.E1&&this.zU){const t=this.zU.uv();t.ix(this.zU),this.zU=null}}KU(){return this.E1}mx(){return this.zU}Em(){return this.JU}Wm(){return this.qU}async ZU(){const t=await this.HU();return ar.Ji.ImageBitmap?createImageBitmap(t):ar.Lo(t)}}}{let t=function(t,s){return t.jD().QU()-s.jD().QU()};t;const cr=self.Bs;cr.t7=class extends cr.gr{constructor(t,s,i){super(),this.s7=t,this.ol=s,this.al=i,this.i7=[],this.e7=!0,this.h7=new Set,this.r7=!1}Sr(){cr.Un(this.i7),this.h7.clear(),this.s7=null}b0(){cr.Un(this.i7),this.e7=!0,this.h7.clear(),this.r7=!1}n7(){this.e7=!1}lc(){if(this.i7.length){if(this.i7.length>this.h7.size)return!1;this.o7()}return!0}a7(t){this.h7.has(t)?(this.h7.delete(t),0===this.h7.size&&(this.r7=!1)):(this.i7.push(t),this.e7=1===this.i7.length)}R0(t){this.h7.add(t),this.r7=!0,50<=this.h7.size&&this.o7()}o7(){this.r7&&(this.i7.length===this.h7.size?this.b0():(cr.Qn(this.i7,this.h7),this.h7.clear(),this.r7=!1))}l7(){this.e7||(this.i7.sort(t),this.e7=!0)}u7(t){this.o7(),this.l7(),this.i7.length&&t.push(this.i7)}}}{const fr=self.Bs;fr.c7=class extends fr.gr{constructor(t,s){super(),this.f7=t,this.d7=s,this.p7=fr.wr(fr.nc)}Sr(){this.p7.Sr(),this.p7=null}m7(t,s,i){let e=this.p7.ni(t,s);return e||(i?(e=fr.wr(fr.t7,this,t,s),this.p7.Set(t,s,e),e):null)}g7(t){return Math.floor(t/this.f7)}y7(t){return Math.floor(t/this.d7)}w7(e,h,r){if(h)for(let i=h.Al(),t=h.Fl();i<=t;++i)for(let t=h.Rl(),s=h.Ol();t<=s;++t)if(!r||!r.eu(i,t)){const n=this.m7(i,t,!1);n&&(n.R0(e),n.lc())&&this.p7.uc(i,t)}if(r)for(let i=r.Al(),t=r.Fl();i<=t;++i)for(let t=r.Rl(),s=r.Ol();t<=s;++t)h&&h.eu(i,t)||this.m7(i,t,!0).a7(e)}S7(t,s){let i=this.g7(t.Al()),e=this.y7(t.Rl()),h=this.g7(t.Fl()),r=this.y7(t.Ol());for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.m7(i,t,!1);n&&n.u7(s)}}b7(t){let s=t.Al(),i=t.Rl(),e=t.Fl(),h=t.Ol();for(;s<=e;++s)for(let t=i;t<=h;++t){const r=this.m7(s,t,!1);r&&r.n7()}}}}{let n=function(t,s){return t.jD().QU()-s.jD().QU()},t=function(t,s){return t.jD().Xv()-s.jD().Xv()};n,t;const S=self.Bs,dr=new S.Rect,pr=new S.ou,mr=[],gr=(new S.Rect,new S.Rect,self.Ms),Th=gr.Es,jh=gr.As,xh=gr._s,yr=xh.create(),wr=Th.create(),Sr=jh.create(),br=Th.create(),vr=Th.create(),Mr=Th.create(),xr=S.wr(S.nl),Tr=(S.wr(S.Rect),[]),Gr=[],_r=[],Ir={name:"",sid:-1,v7:!1,isVisible:!0,isInteractive:!0,lN:!1,backgroundColor:[1,1,1,1],TN:!0,M7:[1,1],opacity:1,IN:!1,x7:!1,T7:!1,G7:!1,scaleRate:1,Y3:0,xN:0,_7:[],I7:[],C7:[]};S.P7=class extends S.gr{constructor(t,s,i){super(),i=Object.assign({},Ir,i),this.E7=t,this.Sf=t.ck(),this.A7=s,this.Mr=i.name,this.Sy=-1,this.R7=!!i.lN,this.F7=-1,this.O7=i.sid,this.D7=!!i.v7,this.k7=!!i.isVisible,this.L7=!!i.isInteractive,this.N7=S.wr(S.$o),this.N7.$a(i.backgroundColor),this.B7=!!i.TN,this.W7=i.M7[0],this.V7=i.M7[1],this.Pv=S.wr(S.$o,1,1,1,i.opacity),this.j7=S.wr(S.$o),this.H7=!!i.IN,this.U7=!!i.x7,this.z7=!!i.T7,this.J7=!!i.G7,this.q7=i.scaleRate,this.Cv=i.Y3,this.X7=null,this.Y7=1,this.Ev=i.xN,this.K7=0,this.Z7=0,this.Q7=0,this.sz=!1,this.jP=S.wr(S.Rect),this.iz=S.wr(S.Rect),this.ez=S.wr(S.Rect),this.hz=!0,this.U2=xh.create(),this.rz=!0,this.D3=xh.create(),this.nz=!0,this.oz=S.wr(S.Iy.Ay),this.az=!0,this.lz=[],this.uz=i._7,this.cz=[],this.fz=[],this.dz=new Map,this.i7=[],this.pz=!1,this.mz=!1,this.gz=!1;const h=this.Sf.tL();this.yz=S.wr(S.wz,this,i.I7),this.qF=S.wr(S.Iy.HR,h.Sz(),{RR:(t,s)=>{const i=s.BF(),e=i.BA();t.Fv(i.bz()),t.qA(e),t.XA(e),h.vz(e)},OR:t=>this.m5().Mz(t)}),this.xz=!0,this.Tz=!0,this.Gz=null,this._z=[],this.Iz=!1,this.Cz=S.wr(S.Rect,0,0,-1,-1),this.Pz=S.wr(S.Rect,0,0,-1,-1),this.Ez=new self.F5(this),this.Az(),this.Rz()&&(this.Gz=S.wr(S.c7,this.Sf.pO(),this.Sf.gO())),this.Fz=i.C7.map(t=>S.P7.Oz(this.E7,this,t))}Dz(){for(const t of this.uz){const s=this.Sf.kz(t[1]);this.E7.Lz(s),s.Nz()||(s.Bz(t),s.Wz(this.Sy)),this.cz.push(t),this.dz.set(t[2],t)}S.Xn(this.lz,this.cz),this.uz=null}static Oz(t,s,i){return S.wr(S.P7,t,s,{name:i[0],sid:i[2],isVisible:i[3],isInteractive:i[13],lN:i[19],backgroundColor:i[4].map(t=>t/255),TN:i[5],M7:[i[6],i[7]],opacity:i[8],IN:i[9],x7:i[17],T7:i[18],G7:i[10],scaleRate:i[11],Y3:i[12],xN:i[16],_7:i[14],I7:i[15],C7:i[20]})}Sr(){for(const t of this.Fz)t.Sr();S.Un(this.Fz);for(const s of this.i7)this.Sf.s4(s);S.Un(this.i7),this.yz.Sr(),this.yz=null,this.qF.Sr(),this.qF=null,this.Ez=null,this.A7=null,this.E7=null,this.Sf=null}Vz(t){return this.dz.get(t)}jz(h){let r=this.E7.Uz(),n=0,o=this.cz;for(let e=0,t=o.length;e<t;++e){let t=o[e],s=this.Sf.kz(t[1]),i=!0;if(!s.zz()||r){const a=this.Sf.Jz(t,this,!0);h.push(a),s.qz()&&(i=!1,this.fz.push(a.a4()))}i&&(o[n]=o[e],++n)}S.Hn(o,n),this.Sf.d5(),this.XD()}Xz(t,s){if(!t.zL().ML())throw new Error("instance is not of world type");const i=t.jD();if(i.HD()!==this)throw new Error("instance added to wrong layer");this.i7.push(t),0!==i.Xv()&&(this.gz=!0),s&&this.Rz()&&t.jD().cB(),this.XD(t)}Yz(t){this.i7.includes(t)||(this.i7.push(t),0!==t.jD().Xv()&&(this.gz=!0),this.XD(t))}$z(t,s){const i=t.jD();if(i.HD()!==this)throw new Error("instance added to wrong layer");this.i7.unshift(t),0!==i.Xv()&&(this.gz=!0),this.XD(t),s&&this.Rz()&&t.jD().cB()}Kz(t,s){const i=this.i7.indexOf(t);i<0||(s&&this.Rz()&&t.jD().Zz(),this.i7.splice(i,1),this.XD(t),this.Qz())}tJ(){this.gz=!0}Qz(){0===this.i7.length&&(this.gz=!1)}sJ(t){if(t){const s=new Set;for(const i of this.i7){const e=i.jD().QU();0<=e&&s.add(e)}let t=-1;for(const h of this.i7){const r=h.jD();if(!(0<=r.QU())){for(++t;s.has(t);)++t;r.iJ(t)}}}this.i7.sort(n)}eJ(){}hJ(){for(const t of this.i7)t.YN().qz()||this.Sf.s4(t);this.Sf.d5(),S.Un(this.i7),this.gz=!1,this.XD()}rJ(s,t,i,e,h,r){const n=this.Sf.CO(),o=this.Sf.nJ(),a=s.oJ(),l=[];for(const u of this.cz){const c=u[0],f=c[0],d=c[1];if(t.eu(f,d)){const p=o[u[1]];if(p!==s){if(!a)continue;if(!s.aJ(p))continue}let t=h;if(!t){const y=this.Sf.WD();t=this.TD()===y?this:(t=y.lJ(this.uf()))||y.zD(this.KF())}const m=this.Sf.Jz(u,t,!1,void 0,void 0,!1,r),g=(t.a5(m),m.jD());g.mB(i,e),g.cB(),n.l5(!0),m.u5(),n.l5(!1),l.push(m)}}return l}r5(){return this.i7.length}TD(){return this.E7}uf(){return this.Mr}uJ(t){this.Sy=t}KF(){return this.Sy}cJ(t){this.F7=t}oj(){return this.F7}uN(){return this.R7}cN(t){this.R7!==(t=!!t)&&(this.R7=t,this.E7.fJ(),this.Sf.YD())}dJ(){let t=this.K5();return(t?t.tN():this.TD().pJ()).indexOf(this)}mJ(){return this.O7}ck(){return this.Sf}gJ(){return this.D7}yJ(){for(const t of this.Z5())if(t.gJ())return!0;return!1}cL(){return this.Sf.cL()}m5(){return this.yz}$F(){return this.wJ(),this.qF}wJ(){const t=this.SJ();if(this.xz||t!==this.Tz||this.qF.L3()){const s=this.m5().bJ();this.qF.N3(s.map(t=>t.DT()),{kR:s.map(t=>t.KF()),LR:!t,jR:!0}),this.xz=!1,this.Tz=t}}Q6(){this.m5().Q6(),this.xz=!0}Rz(){return this.J7&&!this.z7}vJ(){return this.Gz}MJ(){this.Iz=!1}nN(){for(const t of this.xJ())if(!t.eN())return!1;return!0}eN(){return this.k7}hN(t){this.k7!==(t=!!t)&&(this.k7=t,this.Sf.YD())}aN(t){this.L7=!!t}oN(){return this.L7}dN(){for(const t of this.xJ())if(!t.oN())return!1;return!0}RN(t){if(this.sz!==(t=!!t)){if(this.sz=t){const s=this.TD();this.Z7=s.x5(),this.Q7=s.G5()}this.TJ(),this.Sf.YD()}}GJ(){return this.sz}M5(t){const s=this.TD(),i=s._J(),e=s.IJ();this.Z7!==(t=(t=e<t?e:t)<i?i:t)&&(this.Z7=t,this.GJ())&&(this.TJ(),this.Sf.YD())}T5(t){const s=this.TD(),i=s.CJ(),e=s.PJ();this.Q7!==(t=(t=e<t?e:t)<i?i:t)&&(this.Q7=t,this.GJ())&&(this.TJ(),this.Sf.YD())}x5(){return this.GJ()?this.Z7:this.TD().x5()}G5(){return this.GJ()?this.Q7:this.TD().G5()}ON(){return this.EJ(),this.jP}AJ(){return this.EJ(),this.iz}RJ(){return this.EJ(),this.ez}z5(){const t=this.TD();return[t.FJ(),t.OJ()]}kw(t){return this.Sf.kw(t)}DJ(c,e){const h=this.AJ();if(0===c)e._(h);else{let o=h.Bl(),a=h.Wl(),t=this.kJ(c),s=h.width()/t,i=h.height()/t,[l,u]=this.z5();if(.5!==l||.5!==u){let t=this.LJ(),s=this.Sf,i=this.kw()/t,e=(l-.5)*s.NJ()/i,h=(u-.5)*s.BJ()/i,r=this.GetAngle(),n=(0!==r&&(xr.set(e,h),xr.rotate(r),e=xr.cl(),h=xr.dl()),S.Br(t,0,c));o+=S.kt(e,0,n),a+=S.kt(h,0,n)}e.set(o-s/2,a-i/2,o+s/2,a+i/2)}}sA(){return this.Pv.wa()}eA(t){t=S.Gr(t,0,1),this.Pv.wa()!==t&&(this.Pv.ca(t),this.Az(),this.Sf.YD())}Az(){this.j7._(this.Pv),this.j7.Pa()}bz(){return this.j7}SJ(){return this.Pv.Ga(1,1,1,1)}yN(){return this.q7}gN(t){this.q7!==t&&(this.q7=t,this.TJ(),this.Sf.YD())}bN(){return this.W7}MN(){return this.V7}WJ(t,s){this.W7===t&&this.V7===s||(this.W7=t,this.V7=s,this.TJ(),this.Sf.YD())}SN(t){this.WJ(t,this.MN())}vN(t){this.WJ(this.bN(),t)}Yv(t){this.Ev!==t&&(this.Ev=t,this.Sf.YD())}Xv(){return this.Ev}v5(t){t=S._r(t),this.K7!==t&&(this.K7=t,this.TJ(),this.Sf.YD())}GetAngle(){return S._r(this.E7.GetAngle()+this.K7)}wN(){return this.K7}VJ(){return 0<this.i7.length}JD(){return this.i7}jJ(){return this.HJ()&&this.z7?(S.Xn(_r,this.JD()),_r.sort((t,s)=>this.UJ(t,s)),_r):this.JD()}zJ(t){S.er(t,this.jJ());for(const s of this.Fz)s.nN()&&0<s.sA()&&s.zJ(t)}UJ(t,s){const i=this.TD().JJ(),e=i[0],h=i[1],r=i[2],n=t.jD(),o=s.jD(),a=n.Hv()-e,l=n.Jv()-h,u=n.Xv()-r,c=o.Hv()-e,f=o.Jv()-h,d=o.Xv()-r;return c*c+f*f+d*d-(a*a+l*l+u*u)}AN(){return this.N7}_N(){return this.B7}GN(t){this.B7!==(t=!!t)&&(this.B7=t,this.Sf.YD())}PN(){return this.H7}CN(t){this.H7!==(t=!!t)&&(this.H7=t,this.Sf.YD())}qJ(){return!this.ck().XJ()||!this.U7}HJ(){return!this.qJ()}YJ(){return this.HJ()&&this.TD().$J()}KJ(){if(!this.YJ())return!1;for(const t of this.Fz)if(!t.KJ())return!1;return!0}Rv(t){this.Cv!==t&&(this.Cv=t,this.Sf.YD())}EN(){return this.Cv}ZJ(){return!this.A7}K5(){return this.A7}QJ(t){this.A7=t}tN(){return this.Fz}t9(){return 0<this.Fz.length}s9(t,s=!0){s?this.Fz.push(t):this.Fz.unshift(t)}i9(t,s,i){let e=this.Fz.indexOf(s);if(-1===e)throw new Error("cannot find layer to insert by");i&&++e,this.Fz.splice(e,0,t)}e9(t){const s=this.Fz.indexOf(t);if(-1===s)throw new Error("cannot find layer to remove");this.Fz.splice(s,1)}h9(){for(const t of this.Fz)if(t.r9())return!0;return!1}*iN(){for(const t of this.Fz)yield*t.iN();yield this}*Z5(){let t=this.K5();for(;t;)yield t,t=t.K5()}*xJ(){yield this,yield*this.Z5()}n9(t){for(const s of this.Z5())if(s===t)return!0;return!1}o9(t){return this===t||this.W7===t.W7&&this.V7===t.V7&&this.Y7===t.Y7&&this.q7===t.q7&&this.K7===t.K7&&this.x5()===t.x5()&&this.G5()===t.G5()}a9(){return{parallaxX:this.bN(),parallaxY:this.MN(),scale:this.mN(),scaleRate:this.yN(),angle:this.wN(),hasOwnScroll:this.GJ(),scrollX:this.x5(),scrollY:this.G5()}}l9(t){this.WJ(t.parallaxX,t.parallaxY),this.pN(t.scale),this.gN(t.scaleRate),this.v5(t.angle),this.RN(t.hasOwnScroll),this.M5(t.scrollX),this.T5(t.scrollY),this.EJ()}u9(t){if(0!==t.size){const s=S.Qn(this.i7,t);0<s&&(this.Qz(),this.XD())}}XD(t){this.pz=!1,this.Iz=!1,t&&!t.YN().zL().TL()||(this.mz=!1)}c9(){if(!this.pz){if(this.i7.sort(t),this.Rz())for(let t=0,s=this.i7.length;t<s;++t){const i=this.i7[t].jD();i.iJ(t),this.Gz.b7(i.f9())}else for(let t=0,s=this.i7.length;t<s;++t)this.i7[t].jD().iJ(t);this.pz=!0}}d9(){if(!this.mz){let t=this.E7.p9(this.oj()),s=t.map(t=>[...t.iN()]).flat(),i=0;for(const e of s){for(const h of e.JD())h.YN().zL().TL()&&h.jD().m9(i++);e.g9()}}}g9(){this.mz=!0}y9(){return{isVisible:this.nN(),opacity:this.sA(),isInteractive:this.oN()}}w9(t,s,i){const e=t.jD(),h=s.jD();if(e.HD()!==this||h.HD()!==this)throw new Error("can't arrange Z order unless both objects on this layer");let r=e.UD(),n=h.UD();return r!==n+(i?1:-1)&&(S.Yn(this.i7,r),r<n&&n--,i&&n++,n===this.i7.length?this.i7.push(t):this.i7.splice(n,0,t),this.XD(t),!0)}S9(t,s){let i=[],e=0,h=0,r=t.length,n=s.length;for(;e<r&&h<n;){const o=t[e],a=s[h];o.jD().QU()<a.jD().QU()?(i.push(o),++e):(i.push(a),++h)}for(;e<r;++e)i.push(t[e]);for(;h<n;++h)i.push(s[h]);return i}b9(s){const i=[],e=s.length;for(let t=0;t<e-1;t+=2){const h=s[t],r=s[t+1];i.push(this.S9(h,r))}return e%2==1&&i.push(s[e-1]),i}v9(t){for(;1<t.length;)t=this.b9(t);return t[0]}M9(){return this.c9(),S.Un(mr),this.Gz.S7(this.ON(),mr),mr.length?1===mr.length?mr[0]:this.v9(mr):[]}r9(){return this.nN()&&0<this.sA()&&this.x9()}x9(){if(this.VJ()||!this._N())return!0;for(const t of this.Fz)if(t.x9())return!0;return!1}T9(){return this.PN()||!this.SJ()||0!==this.EN()||this.yz.G9()}_9(){if(this.T9())return!0;for(const t of this.Fz)if(t._9())return!0;return!1}BA(){return this.X7}kJ(t){if(this.E7.X5())return 1;{const s=this.I9();return s/(s-t)}}C9(t){const s=this.Sf.JN();if(this.E7.X5())return s;{const i=this.I9(),e=this.kw();return e/Math.abs(i-t)*s}}TJ(){this.nz=!0,this.az=!0,this.hz=!0}P9(t){return this.nz&&(this.E9(t,this.D3,0,0,null),this.nz=!1),this.D3}LJ(t){return this.kw(t)/this.A9()}I9(){return this.YJ()?this.TD().JJ()[2]:this.LJ()}R9(){if(this.YJ()){const t=this.TD().JJ();return[t[0],t[1],t[2]]}return this.F9()}F9(t=0,s=0,h=0){let r=this.Sf,i=this.TD(),e=r.O9(),n=r.D9(),o=(this.x5()-e)*this.W7+e,a=(this.G5()-n)*this.V7+n,l=(r.SO()&&(o=Math.round(o),a=Math.round(a)),o+t),u=a+s,c=i.X5()?this.kw(h):this.LJ(h),[f,d]=this.z5();if(.5!==f||.5!==d){let t=this.kw(h)/c,s=(f-.5)*r.NJ()/t,i=(d-.5)*r.BJ()/t,e=this.GetAngle();0!==e&&(xr.set(s,i),xr.rotate(e),s=xr.cl(),i=xr.dl()),l+=s,u+=i}return[l,u,c]}E9(t,s,i,e,h){const r=this.Sf,n=this.TD();if(this.YJ()){Th._(br,n.JJ()),Th._(vr,n.k9()),Th._(Mr,n.L9());const o=r.O9(),a=r.D9(),l=vr[0]-br[0],u=vr[1]-br[1],c=vr[2]-br[2];br[0]=(br[0]-o)*this.W7+o,br[1]=(br[1]-a)*this.V7+a,br[2]*=Math.max(this.W7,this.V7),vr[0]=br[0]+l,vr[1]=br[1]+u,vr[2]=br[2]+c}else{const[f,d,p]=this.F9(i,e,h),m=(Th.set(br,f,d,p),Th.set(vr,f,d,p-100),this.GetAngle());0===m?Th.set(Mr,0,1,0):Th.set(Mr,Math.sin(m),Math.cos(m),0)}t.Zw(s,br,vr,Mr,h||r.BJ())}N9(){this.rz=!0,this.az=!0,this.hz=!0}B9(t){return this.rz&&(this.W9(t),this.rz=!1),this.U2}W9(t){const s=this.Sf.tL(),[i,e]=this.z5();if(this.E7.X5())t.Kw(this.U2,s.V9(),s.j9());else if(.5===i&&.5===e)xh._(this.U2,s.H9());else{const h=s.V9(),r=s.j9();t.Yw(this.U2,h/r,i,e)}}rH(t,s=!0,i=0,e=0,h=0){s&&t.UE(this.B9(t));let r;r=0===i&&0===e&&0===h?this.P9(t):(this.E9(t,yr,i,e,h),yr),t.$E(r)}U9(t){this.rH(t),t.kS(this.Xv())}z9(t){let s=null;if(t.Fb()&&this.Sf.J9()){const i=this.Sf.tL().q9(this);i&&(s=i.PP(),t.tR(s))}return s}X9(t){if(t.$w()&&this.Sf.J9()){const s=2*(this.KF()+1);t.StartMeasuringRenderPassTime(s,1+s)}}AM(t,s,i){let e=this.Sf.tL(),h=this.T9(),r=null,n=this.z9(t);if(this.X9(t),h){const o={jM:this.Sf.yO(),A2:!0,Y9:!!t.$w()&&this.Sf.K9()};"low"===e.Z9()&&(o.width=e.V9(),o.height=e.j9()),r=this.Sf.Q9(o),this.X7=r,t.zA(r),this._N()&&t.RA(0,0,0,0)}else this.X7=s,t.zA(s);if(this._N()||t.ac(this.N7),this.E7.tq(t,this.X7,this.Fz,h&&this._N()),this.X9(t),this.rH(t),t.kS(this.Xv()),t.DA(this.HJ()),this.A9()>Number.EPSILON){this.c9();const a=this.Rz()&&0===this.Xv()&&!this.gz;this.YJ()?this.sq(t):a?this.iq(t):this.eq(t,this.jJ())}t.kS(0),t.NS(0),h&&(t.DA(!1),this.hq(t,r,s,i)),n&&t.iR(n),this.X7=null}eq(i,e){let h=this.ON(),r=this.X7,n=this.TD().X5(),o=this.TD().rq(),a=null;for(let t=0,s=e.length;t<s;++t){const l=e[t];if(l!==a){const u=(a=l).jD();u.nN()&&u.nq(h,o,n)&&this.oq(l,u,i,r)}}}sq(e){const h=this.X7,r=this.aq(),n=Tr,o=Gr,a=this.jJ();for(let s=0,i=a.length;s<i;){const l=a[s],u=l.jD();if(u.nN()&&u.lq(r)){(!l.uq()||0<u.cq())&&o.push(l);const c=l.jD().yB();n.push(l);let t=s+1;for(;t<i;++t){const f=a[t],d=f.jD();if(d.nN()&&d.lq(r)){if(d.yB()!==c)break;(f.uq()?(0<d.cq()&&o.push(f),n):o).push(f)}}if(1!==n.length||n[0].fq()){this.pq(e,n);for(let t=0,s=o.length;t<s;++t){const p=o[t],m=p.jD();m.mq(!0),this.oq(p,m,e,h),m.mq(!1)}}else{this.oq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const g=o[t];if(g!==l){const y=g.jD(),w=y.HD();w.oq(g,y,e,h)}}}s=t,S.Un(n),S.Un(o)}else++s}}pq(i,e){const h=this.X7;i.$A();for(let t=0,s=e.length;t<s;++t){const r=e[t],n=r.jD();n.gq(!0),this.yq(r,n,i)}i.KA();for(let t=0,s=e.length;t<s;++t){const o=e[t],a=o.jD();this.oq(o,a,i,h),a.gq(!1)}i.QA()}iq(t){let s=this.Gz,i=this.Pz,e=this.Cz,h=this.ON(),r;i.set(s.g7(h.Al()),s.y7(h.Rl()),s.g7(h.Fl()),s.y7(h.Ol())),this.Iz&&i.equals(e)?r=this._z:(r=this.M9(),this.Iz=!0,e._(i)),this.eq(t,r),r!==this._z&&S.Xn(this._z,r)}oq(t,s,i,e){s.G9()?this.wq(t,s,i,e):this.yq(t,s,i)}yq(t,s,i){const e=s.Sq();i.SS()!==e&&e.Av(),t.AM(i)}wq(t,s,i,e){this.bq(t,s,i,e,null)&&this.rH(i)}bq(t,s,i,e,h){const r=s.lB().$F();return r.q3(i,e,{X3:t,Y3:s.EN(),devicePixelRatio:this.Sf.vq(),time:t.Mq(),K3:this.Sf.xq()*this.A9(),Z3:this.GetAngle(),SF:s.SB(),bF:r.LF()?null:this.Tq(s),eF:h&&h.eF,hF:h&&h.hF,rF:h&&h.rF,nF:h&&h.nF}),i.kS(this.Xv()),r.ZE()}hq(t,s,i,e){const h=this.yz.bJ(),r=this.Sf;0===h.length?(t.zA(i),t.hS(),e&&0===this.Cv&&this.SJ()?t.JA(s):(t.Rv(this.Cv),t.Fv(this.j7),t.qA(s)),t.XA(s),r.vz(s)):this.$F().q3(t,i,{X3:this,Y3:this.EN(),devicePixelRatio:r.vq(),K3:r.xq()*this.A9(),Z3:this.GetAngle(),SF:this.ON(),bF:null,DR:!0})}mN(){return this.Y7}pN(t){this.Y7!==t&&(this.Y7=t,this.E7.Gq(),this.TJ(),this.Sf.YD())}JN(){return this.A9()*this.Sf.JN()}gj(){return this.A9()*this.Sf.gj()}A9(){return(this.Y7*this.E7.b5()-1)*this.q7+1}EJ(){if(this.hz){this.hz=!1;let t=this.Sf.O9(),s=this.Sf.D9(),i=(this.x5()-t)*this.W7+t,e=(this.G5()-s)*this.V7+s,h=this.A9(),r=this.Sf.NJ()/h,n=this.Sf.BJ()/h,o=i-r/2,a=e-n/2;this.Sf.SO()&&(o=Math.round(o),a=Math.round(a));const l=this.iz,u=(l.set(o,a,o+r,a+n),this.GetAngle()),c=(0!==u&&(dr._(l),dr.offset(-l.Bl(),-l.Wl()),pr.Pu(dr,u),pr.Au(dr),dr.offset(l.Bl(),l.Wl()),l._(dr)),this.Ev);this.DJ(c,this.jP),this.YJ()?this._q(c,this.ez):this.ez._(this.jP)}}_q(t,s){let i=this.Sf.tL(),e=i.hL(),h=i.nL(),[r,n]=this.kN(0,0,t),[o,a]=this.kN(e,0,t),[l,u]=this.kN(e,h,t),[c,f]=this.kN(0,h,t),d=Math.min(r,o,l,c),p=Math.min(n,a,u,f),m=Math.max(r,o,l,c),g=Math.max(n,a,u,f);isFinite(d)||(d=-1/0),isFinite(p)||(p=-1/0),isFinite(m)||(m=1/0),isFinite(g)||(g=1/0),s.set(d,p,m,g)}kN(t,s,i=0){return this.Iq(t,s,i,this.gj())}jN(t,s,i=0){return this.Iq(t,s,i,this.JN()*this.cL())}Iq(t,s,i,e){const h=this.Sf,r=h.uv(),n=this.A9(),o=h.NJ()/n,a=h.BJ()/n,l=Sr,u=(jh.set(l,0,0,o,a),t/=e,s=l[3]-s/e,this.B9(r)),c=this.P9(r),f=wr,d=S.Iy.Ey(t,s,i,c,u,l,f);return d?[f[0],f[1]]:[NaN,NaN]}Cq(t,s){const i=this.Y7,e=this.q7,h=this.W7,r=this.V7,n=this.K7,o=(this.Y7=1,this.q7=1,this.W7=1,this.V7=1,this.K7=0,this.TJ(),this.kN(t,s));return this.Y7=i,this.q7=e,this.W7=h,this.V7=r,this.K7=n,this.TJ(),o}WN(t,s,i=0){return this.Pq(t,s,i,this.gj())}UN(t,s,i=0){return this.Pq(t,s,i,this.JN()*this.cL())}Pq(t,s,i,e){const h=this.Sf,r=h.uv(),n=this.A9(),o=h.NJ()/n,a=h.BJ()/n,l=Sr,u=(jh.set(l,0,0,o,a),this.B9(r)),c=this.P9(r),f=wr,d=S.Iy.Cy(t,s,i,c,u,l,f);return d?[f[0]*e,(l[3]-f[1])*e]:[NaN,NaN]}Eq(t,s){return t*=this.JN()*this.cL(),0!==s&&(t*=this.kJ(s)),t}Tq(t){const s=t.SB(),i=t.yB(),e=t.cq(),l=i+e,u=s.Al(),c=s.Rl(),f=s.Fl(),d=s.Ol();if(this.YJ()){if(this.Aq(u,c,i)||this.Aq(f,c,i)||this.Aq(f,d,i)||this.Aq(u,d,i))return null;if(0<e&&(this.Aq(u,c,l)||this.Aq(f,c,l)||this.Aq(f,d,l)||this.Aq(u,d,l)))return null}else if(l>=this.LJ())return null;let[p,m]=this.UN(u,c,i),[g,y]=this.UN(f,d,i);if(0!==this.GetAngle()||0<e||this.YJ()){const[w,S]=this.UN(f,c,i),[b,v]=this.UN(u,d,i);if(0<e){let[t,s]=this.UN(u,c,l),[i,e]=this.UN(f,c,l),[h,r]=this.UN(f,d,l),[n,o]=this.UN(u,d,l),a=Math.min(p,g,w,b,t,i,h,n);g=Math.max(p,g,w,b,t,i,h,n),p=a,a=Math.min(m,y,S,v,s,e,r,o),y=Math.max(m,y,S,v,s,e,r,o),m=a}else{let t=Math.min(p,g,w,b);g=Math.max(p,g,w,b),p=t,t=Math.min(m,y,S,v),y=Math.max(m,y,S,v),m=t}}return dr.set(p,m,g,y),dr}aq(){return this.az&&(this.Rq(),this.az=!1),this.oz}Rq(){const t=this.Sf.uv(),s=this.B9(t),i=this.P9(t);this.oz.Ny(i,s)}Aq(t,s,i){return this.aq().Wy(t,s,i)}Fq(){const t={d:this.gJ(),s:this.mN(),a:this.wN(),v:this.eN(),i:this.oN(),html:this.uN(),bc:this.N7.toJSON(),t:this._N(),sx:this.Z7,sy:this.Q7,hosp:this.sz,px:this.bN(),py:this.MN(),c:this.Pv.toJSON(),sr:this.yN(),fx:this.yz.iM(),cg:this.fz};return t}Oq(t){this.D7=!!t.d,this.Y7=t.s,this.K7=t.a,this.k7=!!t.v,this.L7=!t.hasOwnProperty("i")||t.i,this.R7=!!t.html,this.N7.$a(t.bc),this.B7=!!t.t,t.hasOwnProperty("sx")&&(this.Z7=t.sx),t.hasOwnProperty("sy")&&(this.Q7=t.sy),t.hasOwnProperty("hosp")&&(this.sz=!!t.hosp),this.W7=t.px,this.V7=t.py,this.Pv.$a(t.c),this.Az(),this.q7=t.sr,S.Xn(this.fz,t.cg),S.Xn(this.cz,this.lz);let i=new Set(this.fz),e=0;for(let t=0,s=this.cz.length;t<s;++t)i.has(this.cz[t][2])||(this.cz[e]=this.cz[t],++e);S.Hn(this.cz,e),this.yz.eM(t.fx),this.xz=!0}Dq(){this.sJ(!1),this.XD(),this.TJ(),this.N9()}C5(){return this.Ez}a5(t,s=!1){if(this.i7.includes(t))s&&this.i7.sort((t,s)=>{const i=t.jD().kq(),e=s.jD().kq();return i-e});else if(t.Lq()){const i=[...t.XB()];i.push(t),i.sort((t,s)=>{const i=t.jD().kq(),e=s.jD().kq();return i-e});for(const e of i)if(e.n4())for(const h of e.o4())if(!i.includes(h)){const r=[...h.XB()];r.push(h),r.sort((t,s)=>{const i=t.jD().kq(),e=s.jD().kq();return i-e}),r&&r.length&&i.splice(i.length,0,...r)}for(const n of i)n.zL().ML()&&this.Xz(n,!0)}else if(t.zL().ML()&&this.Xz(t,!0),t.n4())for(const o of t.o4()){const a=[...o.XB()];if(a.push(o),a.sort((t,s)=>{const i=t.jD().kq(),e=s.jD().kq();return i-e}),a&&a.length)for(const l of a)l.zL().ML()&&this.Xz(l,!0)}}}}{let l=function(t,s,i,e){return t[0]===Math.fround(s)&&t[1]===Math.fround(i)&&t[2]===Math.fround(e)},v=function(t,s){I!==t&&(t.U9(s),I=t)},M=(l,v,self.Bs),e=self.C3Debugger,h=(M.wr(M.Rect),M.wr(M.Rect),M.wr(M.Rect)),x=M.wr(M.$o),t=self.Ms,u=t.Es,a=[],T=[],G=[],_=[],I=null;M.Nq=class extends M.gr{constructor(t,s,i){super(),this.Bq=t,this.Sf=t.ck(),this.Mr=i[0],this.Wq=i[1],this.Vq=i[2],this.dg=i[1],this.pg=i[2],this.jq=!!i[3],this.Hq=!!i[4],this.Uq=i[5],this.zq=i[6],this.Jq=i[7],this.qq=null,this.O7=i[8],this.Sy=s,this.Z7=0,this.Q7=0,this.Y7=1,this.K7=0,this.Xq=new Set,this.Yq=new Set,this.$q=new Set,this.Kq=[],this.Zq=[],this.Qq=new Map,this.tX=new Map,this.sX=[],this.iX=!1,this.eX=u.create(),this.hX=u.create(),this.rX=u.create(),this.nX=[],this.aX=[],this.lX=new Map,this.uX=new Map,this.cX=-1;const h=this.Sf.tL();this.yz=M.wr(M.wz,this,i[11]),this.qF=M.wr(M.Iy.HR,h.Sz(),{RR:(t,s)=>{const i=s.BF(),e=i.BA();t.hA(),t.qA(e),t.XA(e),h.vz(e)},OR:t=>this.m5().Mz(t)}),this.xz=!0,this.fX=!1,this.X7=null,this.dX={},this.pX=new Map,this.mX=!0,this.gX=new self.p5(this),this.yX=M.wr(M.Event.Qf);for(const e of i[9])this.nX.push(M.P7.Oz(this,null,e));this.wX();for(const r of this.A5())r.Dz();for(const n of i[10]){const o=this.Sf.kz(n[1]);if(!o)throw new Error("missing nonworld object class");o.Nz()||o.Bz(n),this.sX.push(n),this.Lz(o)}}Sr(){for(const t of this.aX)t.Sr();M.Un(this.aX),this.$q.clear(),this.qq=null,this.Bq=null,this.Sf=null}ck(){return this.Sf}uf(){return this.Mr}mJ(){return this.O7}KF(){return this.Sy}m5(){return this.yz}$F(){return this.wJ(),this.qF}wJ(){const t="low"===this.Sf.tL().Z9();if(this.xz||this.fX!==t||this.qF.L3()){const s=this.m5().bJ();this.qF.N3(s.map(t=>t.DT()),{kR:s.map(t=>t.KF()),NR:t,jR:!0}),this.xz=!1,this.fX=t}}Q6(){this.m5().Q6(),this.xz=!0}SX(){let i=this.aX[0].A9();for(let t=1,s=this.aX.length;t<s;++t){const e=this.aX[t];0===e.bN()&&0===e.MN()||(i=Math.min(i,e.A9()))}return i}bX(){return.5*this.Sf.NJ()/this.SX()}vX(){return.5*this.Sf.BJ()/this.SX()}_J(){return this.MX()?-1/0:this.bX()}IJ(){return this.MX()?1/0:this.Em()-this.bX()}CJ(){return this.MX()?-1/0:this.vX()}PJ(){return this.MX()?1/0:this.Wm()-this.vX()}M5(t){const s=this._J(),i=this.IJ();this.Z7!==(t=(t=i<t?i:t)<s?s:t)&&(this.Z7=t,this.xX(),this.Sf.YD())}x5(){return this.Z7}T5(t){const s=this.CJ(),i=this.PJ();this.Q7!==(t=(t=i<t?i:t)<s?s:t)&&(this.Q7=t,this.xX(),this.Sf.YD())}G5(){return this.Q7}MX(){return this.jq}Gq(){this.M5(this.x5()),this.T5(this.G5());for(const t of this.aX)t.GJ()&&(t.M5(t.x5()),t.T5(t.G5()))}H5(t,s){this.Uq===t&&this.zq===s||(this.Uq=t,this.zq=s,this.TX()&&(this.GX(),this.xX(),this.Sf.YD()))}FJ(){return this.X5()?.5:this.Uq}OJ(){return this.X5()?.5:this.zq}rq(){const t=this.FJ(),s=this.OJ();return t<0||1<t||s<0||1<s}J5(){this.Hq&&(this.Hq=!1,this.GX(),this.xX(),this.Sf.YD())}q5(){this.Hq||(this.Hq=!0,this.GX(),this.xX(),this.Sf.YD())}X5(){return this.Hq}TX(){return!this.X5()}_X(t){this.iX!==(t=!!t)&&(this.iX=t,this.xX(),this.Sf.YD())}$J(){return this.iX}IX(t,s,i,e,h,r,n,o,a){l(this.eX,t,s,i)&&l(this.hX,e,h,r)&&l(this.rX,n,o,a)||(u.set(this.eX,t,s,i),u.set(this.hX,e,h,r),u.set(this.rX,n,o,a),this.CX())}CX(){this.xX(),this.Sf.YD()}JJ(){return this.eX}k9(){return this.hX}L9(){return this.rX}b5(){return this.Y7}S5(t){this.Y7!==t&&(this.Y7=t,this.xX(),this.Gq(),this.Sf.YD())}v5(t){t=M._r(t),this.K7!==t&&(this.K7=t,this.xX(),this.Sf.YD())}GetAngle(){return this.K7}Em(){return this.dg}Lm(t){!isFinite(t)||t<1||(this.dg=t)}Wm(){return this.pg}Am(t){!isFinite(t)||t<1||(this.pg=t)}PX(){return this.qq}pJ(){return this.nX}*A5(){for(const t of this.nX)yield*t.iN()}E5(){return this.aX}EX(){return this.aX.length}HD(t){return"number"==typeof t?this.zD(t):this.lJ(t.toString())}zD(t){return t=M.Gr(Math.floor(t),0,this.aX.length-1),this.aX[t]}lJ(t){return this.lX.get(t.toLowerCase())||null}AX(t){return!!this.lJ(t)}RX(t){return this.uX.get(t)||null}GX(){for(const t of this.aX)t.N9()}xX(){for(const t of this.aX)t.TJ()}D5(t,s,i){if(this.AX(t))throw new Error(`layer name '${t}' already in use`);if(!s&&i<2)throw new Error("invalid insert position");const e=2<=i?s:s.K5(),h=M.wr(M.P7,this,e,{name:t,sid:Math.floor(1e15*Math.random()),v7:!0});this.FX(h,s,i),this.ck().YD(),this.fJ()}L5(t,s,i){if(!s&&i<2)throw new Error("invalid insert position");t===s&&i<2||(this.OX(t),this.FX(t,s,i),this.ck().YD(),this.fJ())}B5(t){if(this.OX(t)){const s=this.Sf.CO();s.l5(!0),t.Sr(),s.l5(!1),this.ck().YD(),this.fJ()}}V5(){const t=new Set;for(const s of this.A5())s.gJ()&&!s.yJ()&&t.add(s);if(0!==t.size){const i=this.Sf.CO();i.l5(!0);for(const e of t)this.OX(e),e.Sr();i.l5(!1),this.ck().YD(),this.fJ()}}FX(s,i,e){if(2<=e)if(i){if(i===s||i.n9(s))throw new Error(`cannot move layer '${s.uf()}' to sub-layer of itself`);i.s9(s,2===e),s.QJ(i)}else 2===e?this.nX.push(s):this.nX.unshift(s),s.QJ(null);else{const t=i.K5();if(t){if(i.n9(s))throw new Error(`cannot move layer '${s.uf()}' to sub-layer of itself`);t.i9(s,i,0===e),s.QJ(t)}else{let t=this.nX.indexOf(i);if(-1===t)throw new Error("cannot find layer to insert by");0===e&&++t,this.nX.splice(t,0,s),s.QJ(null)}}}OX(t){const s=t.K5();if(s)return s.e9(t),!0;if(1<this.nX.length){const i=this.nX.indexOf(t);if(-1===i)throw new Error("cannot find layer to remove");return this.nX.splice(i,1),!0}return!1}wX(){this.aX=[...this.A5()],this.lX.clear(),this.uX.clear();for(let t=0,s=this.aX.length;t<s;++t){const i=this.aX[t];i.uJ(t),this.lX.set(i.uf().toLowerCase(),i),this.uX.set(i.mJ(),i)}}DX(){let t=0;for(const s of this.nX){for(const i of s.iN())i.cJ(t);s.uN()&&t++}}kX(){return this.nX.at(-1).oj()+1}async fJ(){this.wX(),this.DX(),this.cX=this.kX()}LX(){return this.cX}NX(){this.cX=-1}p9(t){const s=[];for(const i of this.nX){const e=i.oj();if(e===t)s.push(i);else if(t<e)break}return s}a9(){return{scrollX:this.x5(),scrollY:this.G5(),scale:this.b5(),angle:this.GetAngle(),vpX:this.FJ(),vpY:this.OJ()}}l9(t){this.M5(t.scrollX),this.T5(t.scrollY),this.S5(t.scale),this.v5(t.angle),this.H5(t.vpX,t.vpY)}BX(){let t=this.nX.filter(t=>t.r9())[0];for(;t;){if(!t._N())return x.fa(t.AN()),x.ca(1),x;if(t.T9())return x.ea(0,0,0,0),x;t=t.tN().filter(t=>t.r9())[0]}return x.ea(0,0,0,0),x}Uz(){return this.mX}WX(){return[...this.Xq]}Lz(t){if(t.n4())for(const s of t.jX().VX())this.Xq.add(s);else this.Xq.add(t)}HX(){return[...this.Yq]}UX(t,s){if(t===this||!s)return Promise.resolve();t&&(M.jo(this.Yq,t.Yq),t.Yq.clear());const i=[];for(const e of this.Xq)this.Yq.has(e)||(i.push(e.zX(s)),this.Yq.add(e));return Promise.all(i)}async JX(t){if(t.oJ())throw new Error("cannot load textures for family");const s=this.Sf.uv();if(s&&!s.sP()&&!this.Yq.has(t)){this.Yq.add(t);const i=t.zX(s);this.qX(i),await i,t.XX(),this.Sf.YD()}}qX(t){this.$q.add(t),t.then(()=>this.$q.delete(t)).catch(()=>this.$q.delete(t))}YX(){return Promise.all([...this.$q])}$X(t){if(t.oJ()||0<t.r5())throw new Error("cannot unload textures");const s=this.Sf.uv();s&&this.Yq.has(t)&&(this.Yq.delete(t),t.KX(s))}ZX(t,s){if(t!==this&&s)for(const i of this.Yq)i.qz()||t.Xq.has(i)||(i.KX(),this.Yq.delete(i))}QX(){this.Yq.clear()}async tY(t){const s=this.Sf,i=this.Bq,e=s.CO(),h=(this.Jq&&(this.qq=e.sY(this.Jq),this.qq.iY()),i.eY(this),this.dg=this.Wq,this.pg=this.Vq,this.Z7=s.pO()/2,this.Q7=s.gO()/2,this.Gq(),this.GX(),this.xX(),this.DX(),await this.Sf.tL().hY(this.kX(),!0),this.rY(t),this.Sf.nY(!0),this.aY(),this.mX||this.lY(),this.uY(this.Kq),this.uY(this.Zq),this.cY(),i.fY(),s.d5(),this.Sf.nY(!1),this.Sf.dY());if(await Promise.all(h),M.Un(h),!s.pY()){for(const r of this.Kq)r.mY();for(const n of this.Zq)n.gY(this.Qq,this.tX);for(const[o,a]of Object.entries(this.dX)){const l=this.Sf.Yj(parseInt(o,10));l&&!l.oJ()&&l.zz()&&M.Un(a)}for(const u of this.Kq)u.yY();for(const c of this.Zq)c.yY()}M.Un(this.Kq),M.Un(this.Zq),this.Qq.clear(),this.tX.clear(),await Promise.all([...this.Xq].map(t=>t.wY(this.Sf.uv()))),t&&(s.Qf().dispatchEvent(new M.Event("beforefirstlayoutstart")),await s.SY(new M.Event("beforeprojectstart"))),await this.bY(new M.Event("beforeanylayoutstart")),s.Qf().dispatchEvent(new M.Event("beforelayoutstart")),await this.SY(new M.Event("beforelayoutstart")),s.pY()||await s.L4(M.TY.xY.MY.vY,null,null),s.Qf().dispatchEvent(new M.Event("afterlayoutstart")),await this.SY(new M.Event("afterlayoutstart")),await this.bY(new M.Event("afteranylayoutstart")),t&&(s.Qf().dispatchEvent(new M.Event("afterfirstlayoutstart")),await s.SY(new M.Event("afterprojectstart"))),e.GY(i),await this.YX(),this.mX=!1}rY(t){for(const s of this.Sf.nJ())if(!s.oJ()&&s.ML())for(const i of s.i5()){const e=i.jD(),h=e.HD(),r=M.Gr(h.KF(),0,this.aX.length-1),n=this.aX[r];e.qD(n,!0),n.Yz(i)}if(!t)for(const o of this.aX)o.sJ(!1)}aY(){for(const t of this.aX)t.jz(this.Kq),t.eJ()}lY(){let s=!1;for(const[t,i]of Object.entries(this.dX)){const e=this.Sf.Yj(parseInt(t,10));if(e&&!e.oJ()&&e.zz())for(const h of i){let t=null;if(!e.ML()||(t=h.hasOwnProperty("instJson")?this.RX(h.instJson.w.l):this.RX(h.w.l))){const r=this.Sf.Jz(e,t,!1,0,0,!0);h.hasOwnProperty("instJson")?r.eM(h.instJson):r.eM(h),s=!0,this.Zq.push(r),h.hasOwnProperty("instJson")&&(this.Qq.set(r,h),this.tX.set(h.index,r))}}}for(const n of this.aX)n.sJ(!0),n.XD();s&&(this.Sf.d5(),this.Sf._Y())}uY(s){for(const i of s)if(i.n4()){const e=i.jD(),t=i.IY();for(const h of i.YN().jX().CY())if(h!==i.YN()){const r=h.i5();if(r.length>t)i.PY(r[t]);else{let t;t=e?this.Sf.Jz(h,e.HD(),!0,e.Hv(),e.Jv(),!0):this.Sf.Jz(h,null,!0,0,0,!0),this.Sf.d5(),h.EY(),i.PY(t),s.push(t)}}}}cY(){for(const t of this.sX){const s=this.Sf.kz(t[1]);s.n4()||this.Sf.Jz(t,null,!0)}}AY(){let i=[],e=this.sX,h=0;for(let t=0,s=e.length;t<s;++t){const r=e[t],n=this.Sf.kz(r[1]);n.qz()?n.n4()&&n.jX().RY()||i.push(this.Sf.Jz(r,null,!0)):(e[h]=r,++h)}M.Hn(e,h),this.Sf.d5(),this.uY(i)}rJ(t,s,i,e,h,r,n){if(i)return i.rJ(t,s,h,r,e,n);{const o=[];for(const a of this.aX)o.push(a.rJ(t,s,h,r,e,n));return o.flat()}}async FY(){const t=this.Bq;this.Sf.pY()||(await this.bY(new M.Event("beforeanylayoutend")),await this.SY(new M.Event("beforelayoutend")),await this.Sf.L4(M.TY.xY.MY.OY,null,null),await this.SY(new M.Event("afterlayoutend")),await this.bY(new M.Event("afteranylayoutend"))),t.DY(!0),this.Sf.CO().kY(),this.mX||this.LY();for(const s of this.aX)s.hJ();for(const i of this.Sf.nJ())if(!(i.qz()||i.ML()||i.zL().bL()||i.oJ())){for(const e of i.i5())this.Sf.s4(e);this.Sf.d5()}t.DY(!1),t.bD()===this&&t.eY(null)}NY(t,s){const i=t.YN().mJ().toString(),e=(this.dX.hasOwnProperty(i)||(this.dX[i]=[]),this.dX[i]),h={index:s,instJson:t.iM(),sceneGraphJson:{children:[]}};e.push(h),this.pX.set(t,h)}BY(t){const s=this.pX.get(t);for(const i of t.WY()){const e=this.pX.get(i);e&&s.sceneGraphJson.children.push({index:e.index,flags:M.jY.VY(i.jD())})}}LY(){this.pX.clear();let t=0;for(const s of this.aX){s.c9();for(const i of s.JD()){const e=i.YN();!e.qz()&&e.zz()&&(this.NY(i,t),t++)}}for(const h of this.aX)for(const r of h.JD()){const n=r.YN();!n.qz()&&n.zz()&&this.BY(r)}this.pX.clear()}HY(){this.dX={},this.mX=!0}BA(){return this.X7}T9(){const t=this.Sf,s=t.uv().Fb();return"low"===t.tL().Z9()||s&&t.K9()||this.yz.G9()||s&&t.XJ()}UY(t){const s=this.Sf.tL();if(this.T9()){t.zA(null),t.RA(0,0,0,0);const i={jM:this.Sf.yO(),A2:t.$w()||this.Sf.K9()||this.yz.G9(),Y9:!!t.$w()&&this.Sf.K9()};"low"===s.Z9()&&(i.width=s.V9(),i.height=s.j9()),this.X7=this.Sf.Q9(i)}else this.X7=null}zY(t){this.Sf.JY(t)&&(t.DA(!1),t.zA(null),t.hS(),t.JA(this.X7))}qY(t){this.T9()&&(t.DA(!1),this.XY(t,this.X7))}YY(t){t.zA(this.X7),t.ac(this.BX()),this.Sf.XJ()&&t.OA();const s=this.p9(0);this.tq(t,this.X7,s,!0),t.$w()&&t.StartMeasuringRenderPassTime(0,1),this.qY(t),this.X7=null}$Y(t,s){let i=null;this.Sf.JY(t)&&(i=this.X7),t.zA(i),t.RA(0,0,0,0),this.Sf.XJ()&&t.OA();const e=this.p9(s);this.tq(t,i,e,!0),this.zY(t),t._b(),this.Sf.tL().KY(s)}tq(t,e,s,h){const r=s.filter(t=>t.r9());for(let s=0,i=r.length;s<i;){const n=r[s];if(n.KJ()&&!n._9()){a.push(n);for(let t=s+1;t<i;++t){const o=r[t];if(!o.KJ()||o._9())break;a.push(r[t])}if(2<=a.length||1===a.length&&a[0].h9()){this.ZY(t,e,a),s+=a.length,M.Un(a);continue}M.Un(a)}n.AM(t,e,h&&0===s),++s}}XY(t,s){const i=this.yz.bJ(),e=this.Sf;0===i.length?(t.zA(null),t.hS(),t.JA(s),t.XA(s),e.vz(s)):(h.set(0,0,e.NJ(),e.BJ()),this.$F().q3(t,null,{X3:this,Y3:3,devicePixelRatio:this.Sf.vq(),K3:this.Sf.xq()*this.b5(),Z3:this.GetAngle(),SF:h,bF:null,DR:!0}))}ZY(e,h,t){t[0]._N()||(x.fa(t[0].AN()),x.ca(1),e.ac(x)),this.Sf.tL(),e.DA(!0);const r=T,n=G,o=_;for(const a of t)a.c9(),a.zJ(r);const s=t[0],i=s.z9(e);s.X9(e);for(let s=0,i=r.length;s<i;){const l=r[s],u=l.jD(),c=u.HD();if(u.nN()&&u.lq(c.aq())){(!l.uq()||0<u.cq())&&o.push(l);const f=l.jD().yB();n.push(l);let t=s+1;for(;t<i;++t){const d=r[t],p=d.jD();if(p.nN()&&p.lq(p.HD().aq())){if(p.yB()!==f)break;(d.uq()?(0<p.cq()&&o.push(d),n):o).push(d)}}if(1!==n.length||n[0].fq()){this.QY(e,h,n);for(let t=0,s=o.length;t<s;++t){const m=o[t],g=m.jD(),y=g.HD();g.mq(!0),v(y,e),y.oq(m,g,e,h),g.mq(!1)}}else{v(c,e),c.oq(l,u,e,h);for(let t=0,s=o.length;t<s;++t){const w=o[t];if(w!==l){const S=w.jD(),b=S.HD();v(b,e),b.oq(w,S,e,h)}}}s=t,M.Un(n),M.Un(o)}else++s}i&&e.iR(i),M.Un(r),I=null}QY(i,e,h){i.$A();for(let t=0,s=h.length;t<s;++t){const r=h[t],n=r.jD(),o=n.HD();n.gq(!0),v(o,i),o.yq(r,n,i)}i.KA();for(let t=0,s=h.length;t<s;++t){const a=h[t],l=a.jD(),u=l.HD();v(u,i),u.oq(a,l,i,e),l.gq(!1)}i.QA()}Fq(){const t={sx:this.x5(),sy:this.G5(),s:this.b5(),a:this.GetAngle(),w:this.Em(),h:this.Wm(),ortho:this.X5(),vpX:this.FJ(),vpY:this.OJ(),fv:this.mX,persist:this.dX,fx:this.yz.iM(),layers:{},dynamicLayers:[]};for(const s of this.aX)if(s.gJ()){const i=s.K5();t.dynamicLayers.push({sid:s.mJ(),name:s.uf(),parentSid:i?i.mJ():null,siblingIndex:s.dJ(),data:s.Fq()})}else t.layers[s.mJ().toString()]=s.Fq();return t}Oq(t){this.Z7=t.sx,this.Q7=t.sy,this.Y7=t.s,this.K7=t.a,this.dg=t.w,this.pg=t.h,this.Hq=!!t.ortho,t.hasOwnProperty("vpX")&&(this.Uq=t.vpX),t.hasOwnProperty("vpY")&&(this.zq=t.vpY),this.mX=!!t.fv,this.dX=t.persist,this.yz.eM(t.fx),this.xz=!0;for(const[s,i]of Object.entries(t.layers)){const e=parseInt(s,10),h=this.RX(e);h&&h.Oq(i)}if(t.hasOwnProperty("dynamicLayers")){this.V5(),this.Sf.d5();const r=new Map,n=t.dynamicLayers;for(let t=n.length-1;0<=t;--t){const o=n[t],a=o.sid,l=o.name,u=o.parentSid,c=o.siblingIndex,f=o.data;if(this.wX(),!this.AX(l)&&!this.RX(a)){let t,s;if(null===u)t=null,s=this.nX;else{if(!(t=this.RX(u)))continue;s=t.tN()}const d=M.wr(M.P7,this,t,{name:l,sid:a,v7:!0});s.push(d);let i=r.get(s);i||(i=[],r.set(s,i)),i.push({uB:d,siblingIndex:c}),d.Oq(f)}}for(const[p,m]of r){m.sort((t,s)=>t.siblingIndex-s.siblingIndex);for(const g of m){let t=g.uB,s=g.siblingIndex,i=p.indexOf(t);p.splice(i,1),p.splice(s,0,t)}}}this.fJ(),this.GX(),this.xX()}vD(){return this.gX}TO(){return this.yX}t$(t){t.layout=this.vD();const s=this.Sf,i=s.s$()&&!s.CO().c5();i&&e.StartMeasuringScriptTime(),this.yX.dispatchEvent(t),i&&e.AddScriptTime()}SY(t){return t.layout=this.vD(),this.yX.o0(t)}bY(t){return t.layout=this.vD(),this.Sf.SY(t)}i$(){this.e$(this.nX)}e$(t,s=0){const i=t.slice(0);i.reverse();for(const e of i)console.log("\t".repeat(s)+"- "+e.uf()),this.e$(e.tN(),s+1)}}}{const Cr=self.Bs;Cr.h$=class extends Cr.gr{#$j;#r$=[];#n$=new Map;#o$=new Map;#a$=null;#l$=[];#u$=null;#c$=0;#f$=null;constructor(t){super(),this.#$j=t}Sr(){this.#$j=null,this.#a$=null,this.#u$=null,this.#f$=null,Cr.Un(this.#r$),this.#n$.clear(),this.#o$.clear(),Cr.Un(this.#l$)}kx(t){const s=Cr.wr(Cr.Nq,this,this.#r$.length,t);this.#r$.push(s),this.#n$.set(s.uf().toLowerCase(),s),this.#o$.set(s.mJ(),s)}ck(){return this.#$j}d$(t){this.#u$=t}p$(){if(this.#u$)return this.#u$;if(this.#r$.length)return this.#r$[0];throw new Error("no first layout")}m$(t){return this.#n$.get(t.toLowerCase())||null}g$(t){return this.#o$.get(t)||null}y$(t){return t=Cr.Gr(Math.floor(t),0,this.#r$.length-1),this.#r$[t]}TD(t){return"number"==typeof t?this.y$(t):this.m$(t.toString())}_D(){return this.#r$}eY(t){this.#a$=t}bD(){return this.#a$}w$(t){if(this.#l$.includes(t))throw new Error("layout already running");this.#l$.push(t)}S$(t){const s=this.#l$.indexOf(t);if(-1===s)throw new Error("layout not running");this.#l$.splice(s,1)}*b$(){this.#a$&&(yield this.#a$),this.#l$.length&&(yield*this.#l$)}v$(t){return this.#a$===t||this.#l$.includes(t)}DY(t){if(t)this.#c$++;else{if(this.#c$<=0)throw new Error("already unset");this.#c$--}}f5(){return 0<this.#c$}PD(t){this.#f$=t}fY(){this.#f$=null}CD(){return!!this.#f$}M$(){return this.#f$}x$(){const t=this.bD();t&&t.GX()}T$(){const t=this.bD();t&&t.xX()}}}{const Pr=self.Bs,Er=new RegExp("<(.+?)>","g");Pr.G$=class extends Pr.gr{constructor(t){super(),this.Sf=t,this._$=Pr.wr(Pr.I$),this.C$=null,this.P$=[],this.E$=new Map,this.A$=new Map,this.R$=new Map,this.F$=[],this.O$=[],this.D$=[],this.k$=!1,this.L$=!1,this.N$=!1,this.B$=()=>this.W$(),this.V$=()=>this.j$(),this.H$=()=>this.U$(),this.z$=()=>this.J$(),this.q$=t=>this.X$(t.z6),this.Y$=t=>this.$$(),this.K$=t=>this.Z$(),this.Q$=t=>this.tK(),this.sK=[],this.iK=0}Sr(){this.eK(),this.B$=null,this.V$=null,this.H$=null,this.z$=null,this.q$=null,this.K$=null;for(const t of this.P$)t.VW(),t.Sr();Pr.Un(this.P$),this.P$=null,this._$.Sr(),this._$=null,Pr.Un(this.F$),this.F$=null,Pr.Un(this.O$),this.O$=null,Pr.Un(this.D$),this.D$=null,this.E$.clear(),this.E$=null,this.A$.clear(),this.A$=null,this.R$.clear(),this.R$=null,Pr.Un(this.sK),this.sK=null,this.Sf=null}hK(){const t=this.Sf.Qf();t.addEventListener("pretick",this.B$),t.addEventListener("tick2",this.V$),t.addEventListener("beforelayoutchange",this.H$),t.addEventListener("layoutchange",this.z$),t.addEventListener("instancedestroy",this.q$),t.addEventListener("beforeload",this.Y$),t.addEventListener("afterload",this.K$),t.addEventListener("afterlayoutstart",this.Q$)}eK(){const t=this.Sf.Qf();t.removeEventListener("pretick",this.B$),t.removeEventListener("tick2",this.V$),t.removeEventListener("beforelayoutchange",this.H$),t.removeEventListener("layoutchange",this.z$),t.removeEventListener("instancedestroy",this.q$),t.removeEventListener("beforeload",this.Y$),t.removeEventListener("afterload",this.K$),t.removeEventListener("afterlayoutstart",this.Q$)}kx(t){this._$.xc(t);const s=Pr.nK.rK(t,this);this.xc(s),this.oK(s),this.R$.set(s.uf(),0)}aK(t){const s=this.lK(),i=t.u4(),e=s.ni(i),h=Pr.nK.aK(i+":"+this.R$.get(i),e,this);return this.uK(i),this.xc(h),h}uK(t){this.R$.set(t,this.R$.get(t)+1)}cK(){for(const t of this.P$)if(!t.fK()){const s=t.u4();this.uK(s)}}dK(){for(const t of this.R$.keys())this.R$.set(t,0)}xc(t){this.P$.push(t),this.E$.set(t.uf().toLowerCase(),t)}R0(t){t.pK(),t.fK()||(Pr.$n(this.P$,t),Pr.$n(this.F$,t),Pr.$n(this.O$,t),Pr.$n(this.D$,t),this.E$.delete(t.uf().toLowerCase()),this.mK(t),t.BW())||t.Sr()}O4(t){this.Sf.O4(t,this.C$,null)}ck(){return this.Sf}lK(){return this._$}gK(t){this.C$=t}yK(){return this.C$}*wK(){for(const t of this.P$)yield t}*SK(){for(const t of this.O$)yield t}bK(t,s){this.A$.has(t)||this.A$.set(t,new Set),this.A$.get(t).add(s)}oK(t){for(const s of t.vK())this.bK(s,t)}mK(t){for(const[s,i]of this.A$.entries())i.has(t)&&(i.delete(t),0===i.size)&&this.A$.delete(s)}MK(t){if(this.A$.has(t))return this.A$.get(t)}xK(t,s){if(s)for(const i of this.P$){const e=s.every(t=>i.TK(t.z6,t.trackId));if(e&&i.uf().includes(t.uf()))return i}}GK(t){return this.E$.get(t.toLowerCase())||null}_K(t){for(const s of this.F$)if(s.uf()===t)return s;for(const i of this.O$)if(i.uf()===t)return i;return null}*IK(i){if(Er.test(i)){Er.lastIndex=0;let t,s=new Set;do{if(t=Er.exec(i)){const e=t[1].split(",");for(const h of e)s.add(h)}}while(t);for(const r of s.values()){const n=this.GK(r);n&&(yield n)}s.clear()}else{const t=this.GK(i);t&&(yield t)}}*CK(t){for(const s of this.P$)s.HW(t)&&(yield s)}PK(t){this.F$.includes(t)||this.F$.push(t),this.EK()}AK(t){Pr.$n(this.O$,t),this.RK()}FK(t){this.O$.includes(t)?(t.DK(!0),t.kK(!1),t.LK(!1)):(t.DK(!1),t.kK(!0),t.LK(!1),this.F$.includes(t)||this.F$.push(t)),this.EK()}NK(t){t.DK(!1),t.kK(!1),t.BK(),Pr.$n(this.F$,t),this.RK()}WK(t){t.DK(!1),t.kK(!1),this.O$.includes(t)&&(t.LK(!0),this.D$.push(t),Pr.$n(this.O$,t)),this.F$.includes(t)&&t.LK(!0)}VK(t){t.DK(!1),t.kK(!1),t.LK(!1),t.KW(1),Pr.$n(this.O$,t)}jK(t){this.WK(t),t.BK()}W$(){if(!this.ck().pY()&&this.k$&&!this.L$){for(this.N$=!0;this.F$.length;){const t=this.F$.pop();(t.HK()?(t.UK(),this.D$):(t.zK(),this.O$)).push(t),0!==t.JK()&&(this.iK=1)}const s=this.Sf.qK(),i=this.Sf.XK(),e=this.Sf.sD();for(let t=this.O$.length-1;0<=t;t--){const h=this.O$[t];h&&h.YK(s,e,i)}this.N$=!1,0!==this.iK&&this.ck().YD()}}j$(){if(!this.ck().pY()&&this.k$&&!this.L$){let i;for(let t=0,s=this.D$.length;t<s;t++){const e=this.D$[t];i=i||new Set,e.pK(),this.$K(e),i.add(e)}if(i){Pr.Qn(this.D$,i);for(let t=this.iK=0,s=this.O$.length;t<s;t++)if(0!==this.O$[t].JK()){this.iK=1;break}}this.RK()}}$K(t){t.BW()||t.KK()&&t.ZK()&&t.QK()&&t.tZ()}EK(){this.k$||(this.k$=!0)}RK(){this.D$.length||this.O$.length||this.F$.length||this.N$||(this.k$=!1)}U$(){for(this.L$=!0;this.F$.length;)this.NK(this.F$.pop());const t=new Set;for(const s of this.O$){const i=s.U$();i&&(s.pK(),t.add(s))}Pr.Qn(this.O$,t),t.clear();for(const e of this.D$){const h=e.U$();h&&(e.pK(),t.add(e))}Pr.Qn(this.D$,t),this.RK();for(const r of this.P$)r.sZ()}J$(){this.L$=!1}X$(t){const s=t.YN(),i=this.MK(s);if(i)if(this.Sf.pY())this.sK.push(t);else for(const e of i)e.fK()||(e.BW()?this.R0(e):e.KK()||(this.$K(e),this.R0(e)))}$$(){for(const t of this.F$.map(t=>t))this.$K(t),this.R0(t);for(const s of this.O$.map(t=>t))this.$K(s),this.R0(s)}Z$(){for(const t of this.sK)this.X$(t);Pr.Un(this.sK);for(const s of this.P$)s.Z$()}tK(){const t=this.Sf.xD(),s=t.bD();if(s)for(const i of this.P$){const e=i.iZ();e&&s.uf()===e&&this.FK(i)}}Fq(){return{timelinesJson:this.eZ(),scheduledTimelinesJson:this.hZ(),playingTimelinesJson:this.rZ(),markedForRemovalTimelinesJson:this.nZ(),hasRuntimeListeners:this.k$,changingLayout:this.L$,isTickingTimelines:this.N$}}Oq(t){t&&(this.dK(),this.oZ(t.timelinesJson),this.aZ(t.scheduledTimelinesJson),this.lZ(t.playingTimelinesJson),this.uZ(t.markedForRemovalTimelinesJson),this.k$=!t.hasRuntimeListeners,this.L$=!!t.changingLayout,this.N$=!!t.isTickingTimelines,this.cK(),this.EK(),this.RK())}eZ(){return this.P$.map(t=>t.Fq())}oZ(t){for(const s of t){let t=this.GK(s.name);if(t)t.Oq(s);else{const i=this.cZ(s);if(!i)continue;const e=this.GK(i);(t=this.aK(e)).Oq(s)}t.fZ()||this.R0(t)}}cZ(t){const s=t.name,i=s.split(":");return i&&2===i.length?i[0]:null}hZ(){return this.dZ(this.F$)}aZ(t){this.pZ(t,this.F$)}rZ(){return this.dZ(this.O$)}lZ(t){this.pZ(t,this.O$)}nZ(){return this.dZ(this.D$)}uZ(t){this.pZ(t,this.D$)}mZ(t,s){if(s)for(const i of s)if(i===t.uf())return!0;return!1}dZ(t){return t.map(t=>t.uf())}pZ(t,s){const i=new Set;for(const e of s)this.mZ(e,t)||i.add(e);if(Pr.Qn(s,i),t)for(const h of t){const r=this.GK(h);if(r){const n=s.find((s=>t=>t.uf()===s)(h));n||s.push(r)}}}}}{const Ar=self.Bs,Rr=[0,0],Fr=[0,0],Or=[0,0],Dr=[0,0,0,0,0],kr=new Array(4),Lr=[{x:0,y:0,t:0,Et:0},{x:0,y:0,t:0,Et:0},{x:0,y:0,t:0,Et:0}],Nr={x:0,y:0,t:0,Et:0};Ar.gZ=class{constructor(t,s){this.yZ=!1,this.wZ=t,this.SZ=[];let i=null;if(i=s?this.wZ.bZ(s):Ar.first(this.wZ.vZ())){const e=i.gV("offsetX"),h=i.gV("offsetY");if(e&&h){this.MZ=e,this.xZ=h;const r=e.TZ(),n=h.TZ();for(let t=1,s=Math.min(r.length,n.length);t<s;++t){const o=r[t],a=(o.GZ(),o._Z()),l=n[t],u=(l.GZ(),l._Z());a&&"cubic-bezier"===a.IZ()&&u&&"cubic-bezier"===u.IZ()?this.SZ.push(Ar.wr(Ar.CZ,a,u,o,l,this.SZ.length)):(a&&"line"===a.IZ()&&u&&u.IZ(),this.SZ.push(Ar.wr(Ar.PZ,o,l,this.SZ.length)))}this.yZ=!0}}}Sr(){for(const t of this.SZ)t.Sr();Ar.Un(this.SZ),this.SZ=null,this.wZ=null,this.MZ=null,this.xZ=null}EZ(){return this.yZ}AZ(){return this.SZ}RZ(t){const s="relative"===this.MZ.FZ()?t.Hv():0,i="relative"===this.xZ.FZ()?t.Jv():0;for(const e of this.SZ)e.RZ(s,i)}Cy(s,i,t){let e=NaN,h=this.SZ.length;for(let t=0;t<h;t++){const r=this.SZ[t];if("cubic-bezier"===r.NT()){const n=r.Cy(s,i);(isNaN(e)||n[3]<e)&&(e=n[3],Or[0]=n[2],Or[1]=r.KF())}}return Or}OZ(s,i,t){const e=t.DZ;Ar.ve(e[0])||(e[0]=0),Ar.ve(e[1])||(e[1]=1);let h=NaN,r=this.SZ.length;for(let t=0;t<r;t++){const n=this.SZ[t];if("cubic-bezier"===n.NT()){const o=n.kZ(s,i,e);(isNaN(h)||o[3]<h)&&(h=o[3],Or[0]=o[2],Or[1]=n.KF())}}return Or}LZ(t,s){return this.SZ[s].LZ(t)}NZ(t,s){return this.SZ[s].NZ(t)}},Ar.CZ=class{constructor(t,s,i,e,h){this.Sy=h;const r=t.BZ("cubic-bezier"),n=i.BZ("cubic-bezier"),o=s.BZ("cubic-bezier"),a=e.BZ("cubic-bezier");this.WZ=t.VZ(),this.jZ=s.VZ(),this.HZ=t.VZ()+r.UZ(),this.zZ=s.VZ()+o.UZ(),this.JZ=i.VZ()+n.qZ(),this.XZ=e.VZ()+a.qZ(),this.YZ=i.VZ(),this.$Z=e.VZ(),this.KZ=0,this.ZZ=0,this.QZ=0,this.tQ=0,this.sQ=0,this.iQ=0,this.eQ=0,this.hQ=0,this.rQ=0,this.nQ=0,this.oQ=0,this.aQ=0,this.lQ=0,this.uQ=0,this.cQ=0,this.fQ=0,this.dQ=0,this.pQ=0,this.mQ=0,this.gQ=0,this.yQ=NaN,this.yZ=!1,this.wQ=100,this.SQ=new Array(this.wQ+1),this.SQ[0]=0,this.bQ=0,this.vQ=[],this.MQ=[];for(let t=0;t<100;t++)this.MQ.push({x:0,y:0,t:0,Et:0});this.xQ()}Sr(){Ar.Un(this.SQ),this.SQ=null,Ar.Un(this.vQ),this.vQ=null,Ar.Un(this.MQ),this.MQ=null}NT(){return"cubic-bezier"}KF(){return this.Sy}TQ(){return Math.floor(this.bQ/25)}GQ(){return 1/this.TQ()}RZ(t,s){this._Q=t,this.IQ=s,this.SQ=new Array(this.wQ+1),this.SQ[0]=0,this.xQ(),this.KZ=this.WZ+this._Q,this.ZZ=this.jZ+this.IQ,this.QZ=this.HZ+this._Q,this.tQ=this.zZ+this.IQ,this.sQ=this.JZ+this._Q,this.iQ=this.XZ+this.IQ,this.eQ=this.YZ+this._Q,this.hQ=this.$Z+this.IQ,this.rQ=3*(this.QZ-this.KZ),this.nQ=3*(this.tQ-this.ZZ),this.oQ=3*(this.sQ-this.QZ),this.aQ=3*(this.iQ-this.tQ),this.lQ=3*(this.eQ-this.sQ),this.uQ=3*(this.hQ-this.iQ),this.cQ=3*(this.QZ-this.KZ),this.fQ=3*(this.KZ+this.sQ-2*this.QZ),this.dQ=this.eQ-this.KZ+3*(this.QZ-this.sQ),this.pQ=3*(this.tQ-this.ZZ),this.mQ=3*(this.ZZ+this.iQ-2*this.tQ),this.gQ=this.hQ-this.ZZ+3*(this.tQ-this.iQ)}Map(t){if(!this.yZ)return NaN;const s=this.CQ(t);return Fr[0]=this.PQ(s),Fr[1]=this.EQ(s),Fr}Cy(t,s){const i=this.AQ(100),e=this.RQ(t,s,i),h=this.FQ(t,s,i,e);return Dr[0]=h.x,Dr[1]=h.y,Dr[2]=h.t,Dr[3]=h.Et,Dr}kZ(t,s,i){const e=this.AQ(100),h=this.OQ(t,s,e,i),r=this.FQ(t,s,e,h);return Dr[0]=r.x,Dr[1]=r.y,Dr[2]=r.t,Dr[3]=r.Et,Dr}LZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.rQ+e*this.oQ+h*this.lQ,n=i*this.nQ+e*this.aQ+h*this.uQ,o=Math.hypot(r,n);return Rr[0]=r/o,Rr[1]=n/o,Rr}NZ(t){const s=1-t,i=s*s,e=2*s*t,h=t*t,r=i*this.rQ+e*this.oQ+h*this.lQ,n=i*this.nQ+e*this.aQ+h*this.uQ;return Math.atan2(n,r)}CQ(h){if(this.yZ){let t=h*this.SQ[this.wQ],s=0,i=this.wQ,e=0;for(;s<i;)e=s+((i-s)/2|0),this.SQ[e]<t?s=e+1:i=e;this.SQ[e]>t&&e--;const r=this.SQ[e];return r===t?e/this.wQ:(e+(t-r)/(this.SQ[e+1]-r))/this.wQ}}PQ(t){return this.yZ?self._c.Vc("cubicbezier")(t,this.WZ+this._Q,this.HZ+this._Q,this.JZ+this._Q,this.YZ+this._Q):NaN}EQ(t){return this.yZ?self._c.Vc("cubicbezier")(t,this.jZ+this.IQ,this.zZ+this.IQ,this.XZ+this.IQ,this.$Z+this.IQ):NaN}AQ(s){if(!(this.vQ.length>=(s=s||100))){this.vQ=new Array(s),s++;for(let t=0;t<s-1;t++){const i=t/(s-1),e=i**2,h=i**3,r=this.cQ*i,n=this.fQ*e,o=this.dQ*h,a=this.pQ*i,l=this.mQ*e,u=this.gQ*h,c=this.KZ+r+n+o,f=this.ZZ+a+l+u;this.MQ[t].x=c,this.MQ[t].y=f,this.MQ[t].t=i,this.MQ[t].Et=0,this.vQ[t]=this.MQ[t]}}return this.vQ}RQ(s,i,e,t=0,h=Number.MAX_SAFE_INTEGER){let r=0;if(isNaN(this.yQ))for(let t=0;t<100;t++){const n=e[t],o=n.x-s,a=n.y-i;n.Et=o*o+a*a,n.Et<h&&(h=n.Et,r=t)}else{for(let t=this.yQ;t<this.yQ+5&&!(t>=e.length);t++){const l=e[t],u=l.x-s,c=l.y-i;l.Et=u*u+c*c,l.Et<h&&(h=l.Et,r=t)}for(let t=this.yQ;t>this.yQ-5&&!(t<0);t--){const f=e[t],d=f.x-s,p=f.y-i;f.Et=d*d+p*p,f.Et<h&&(h=f.Et,r=t)}}return this.yQ=r}OQ(s,i,e,h,r=Number.MAX_SAFE_INTEGER){let n=0;if(isNaN(this.yQ))for(let t=0;t<100;t++){const o=e[t],a=o.x-s,l=o.y-i;o.Et=a*a+l*l,o.t>=h[0]&&o.t<=h[1]&&o.Et<r&&(r=o.Et,n=t)}else{for(let t=this.yQ;t<this.yQ+5&&!(t>=e.length);t++){const u=e[t],c=u.x-s,f=u.y-i;u.Et=c*c+f*f,u.t>=h[0]&&u.t<=h[1]&&u.Et<r&&(r=u.Et,n=t)}for(let t=this.yQ;t>this.yQ-5&&!(t<0);t--){const d=e[t],p=d.x-s,m=d.y-i;d.Et=p*p+m*m,d.t>=h[0]&&d.t<=h[1]&&d.Et<r&&(r=d.Et,n=t)}}return this.yQ=n}FQ(n,o,a,l){let u=a[l],t=1,c=Number.MAX_SAFE_INTEGER;t:do{let t=a.length,s=0===l?0:l-1,i=l===t-1?t-1:l+1,e=a[s].t,h=a[i].t,r=(h-e)/4;if(r<.001)break;kr[0]=a[s];for(let t=1;t<=2;t++){const f=e+t*r,d=f**2,p=f**3,m=this.cQ*f,g=this.fQ*d,y=this.dQ*p,w=this.pQ*f,S=this.mQ*d,b=this.gQ*p,v=this.KZ+m+g+y,M=this.ZZ+w+S+b,x=v-n,T=M-o,G=x*x+T*T;if(G<c){c=G,l=t,Nr.x=v,Nr.y=M,Nr.t=f,Nr.Et=G,u=Nr;break t}const _=Lr[t-1];_.x=v,_.y=M,_.t=f,_.Et=G,kr[t]=_}kr[3]=a[i],a=kr}while(t++<20);return u}xQ(){this.yZ=!0;let s=this.PQ(0),i=this.EQ(0),e=0;for(let t=1;t<=this.wQ;t++){const h=this.PQ(.01*t),r=this.EQ(.01*t),n=s-h,o=i-r;e+=Math.hypot(n,o),this.SQ[t]=e,s=h,i=r}this.bQ=e}},Ar.PZ=class{constructor(t,s,i){this.Sy=i,this.DQ=t.VZ(),this.kQ=s.VZ(),this._Q=0,this.IQ=0}Sr(){}NT(){return"line"}KF(){return this.Sy}RZ(t,s){this._Q=t,this.IQ=s}Hv(){return this.DQ+this._Q}Jv(){return this.kQ+this.IQ}}}{const b=self.Bs;b.nK=class extends b.gr{constructor(t,s,i){super(),this.Sf=i.ck(),this.LQ=i,this.NQ=s,this.Mr=t,this.BQ=[],this.WQ=0,this.VQ=null,this.jQ=0,this.HQ(),this.UQ=null,this.zQ=null,this.JQ=0,this.qQ=0,this.XQ=1,this.YQ=0,this.$Q=1,this.KQ=!1,this.ZQ=!1,this.QQ=!1,this.ttt=!0,this.stt=!1,this.itt=!1,this.ett=-1,this.htt=!1,this.ntt=!1,this.ott=!1,this.att=!1,this.ltt=NaN,this.utt=[""],this.ctt="",this.ftt=!1,this.iK=0,this.dtt=0,this.ptt=null}static rK(t,s){const i=s.lK(),e=i.mtt(),h=i.ni(t[e]),r=b.wr(b.nK,t[e],h,s);return r.gtt(!0),r}static aK(t,s,i){return b.wr(b.nK,t,s,i)}Sr(){if(!this.BW()){const t=this.Sf.Qf();this.LQ.NK(this),this.LQ.jK(this);for(const s of this.BQ)s.Sr();b.Un(this.BQ),this.BQ=null,this.Sf=null,this.LQ=null,this.NQ=null,this.stt=!0,this.UQ=null,this.zQ=null,this.ytt(t)}}ytt(t){const s=b.wr(b.Event,"timelinestatereleased");s.wtt=this,t.dispatchEvent(s)}NT(){return 0}HQ(){for(const t of this.NQ.btt().Stt())this.WQ=this.BQ.push(b.vtt.kx(this,t))}Mtt(){return this.LQ}ck(){return this.Sf}vZ(){return this.BQ}xtt(e,h,r,n){if(this.dtt){let i;for(let s=0;s<this.BQ.length;s++){let t=this.BQ[s];if(e===t.uV()){const o=t.gV(r);o&&h.constructor===o.Ttt().constructor&&o.FZ()===n.FZ()&&(i=i||[]).push(o)}}return i}}fZ(){return!!this.BQ.length}bZ(t){for(const s of this.BQ)if(b.Gh(s.pV(),t))return s;return null}Gtt(t){for(const s of this.BQ)if(!s._tt()&&b.Gh(s.uf(),t))return s;return null}n8(t){this.Mr=t}uf(){return this.Mr}Itt(){return this.NQ}u4(){return this.NQ.uf()}JW(){return this.NQ.JW()}zW(t){this.NQ.zW(t)}Ctt(){return this.NQ.Ctt()}Ptt(t){this.NQ.Ptt(t)}Ett(){return this.NQ.Ett()}Att(t){this.NQ.Att(t)}FZ(){return this.NQ.FZ()}Rtt(t){this.NQ.FZ(t)}lV(t){for(const s of this.vZ())s.lV(t)}XW(){return this.NQ.XW()}qW(t){return this.NQ.qW(t)}$W(){return this.NQ.$W()}YW(t){return this.NQ.YW(t)}rW(){return this.NQ.rW()}Ftt(t){return this.NQ.Ftt(t)}KW(t){return this.XQ=t}ZW(){return this.XQ}iZ(){return this.NQ.iZ()}Ott(){return this.NQ.Ott()}Dtt(){return this.NQ.Dtt()}ktt(){return this.YQ}Ltt(){return!this.IsPlaying()||0<this.XQ}tV(){return this.UQ||(this.UQ=new Promise(t=>{this.zQ=t})),this.UQ}BK(){this.UQ&&(this.zQ(),this.UQ=null,this.zQ=null)}Ntt(t){this.utt=b.nK.Btt(t),this.ftt=!0}QW(){return this.utt}Wtt(){return this.ftt&&(this.ctt=this.utt.join(" ")),this.ftt=!1,this.ctt}HW(t){if(!this.utt)return!1;if(!this.utt.length)return!1;const s=b.nK.Btt(t);return!!s&&!!s.length&&s.every(b.nK.Vtt,this)}jtt(){b.TY.Timeline&&this.constructor===b.nK&&(b.TY.Timeline.MY.PushTriggerTimeline(this),this.LQ.O4(b.TY.Timeline.MY.OnTimelineStarted),this.LQ.O4(b.TY.Timeline.MY.OnTimelineStartedByName),this.LQ.O4(b.TY.Timeline.MY.OnTimelineStartedByTags),this.LQ.O4(b.TY.Timeline.MY.OnAnyTimelineStarted),b.TY.Timeline.MY.PopTriggerTimeline())}Htt(){this.ett=this.Sf.Utt()}tZ(){this.ott||(this.ott=!0,b.TY.Timeline&&this.constructor===b.nK&&(b.TY.Timeline.MY.PushTriggerTimeline(this),this.LQ.O4(b.TY.Timeline.MY.OnTimelineFinished),this.LQ.O4(b.TY.Timeline.MY.OnTimelineFinishedByName),this.LQ.O4(b.TY.Timeline.MY.OnTimelineFinishedByTags),this.LQ.O4(b.TY.Timeline.MY.OnAnyTimelineFinished),b.TY.Timeline.MY.PopTriggerTimeline()))}DK(t){this.KQ=t}ztt(){return this.ett===this.Sf.Utt()}IsPlaying(t=!1){return!!this.ztt()||!(!this.Jtt()||t)||this.KQ}qtt(){return this.IsPlaying(!0)}iV(){return this.Xtt()}Xtt(){return!(this.BW()||this.Jtt()||this.qtt()||this.ZK())}kK(t){this.ZQ=t}Jtt(){return this.ZQ}Ytt(t){this.ttt=t;const s=this.ER();(s<=0||s>=this.JW())&&(this.ttt=!0)}ZK(){return this.ttt}BW(){return this.stt}LK(t){this.itt=t}HK(){return this.itt}$tt(t){this.htt=t}Ktt(){return this.htt}gtt(t){this.ntt=!!t}fK(){return this.ntt}QK(){return this.QQ}ER(){return this.JQ}UW(t){const s=this.ER();this.Ztt(t),this.Ytt(!1),this.ZK()||this.$tt(!0),!this.qtt()&&!this.Jtt()&&this.QQ||(this.qtt()||this.Jtt()||this.QQ?this.qtt()?this.VW():this.Jtt()&&(this.LQ.NK(this),this.Qtt()):this.Qtt()),this.tst(),this.sst(this.ER(),!1,!0,!0,s),this.ist(),this.iK&&this.ck().YD(),this.est()}Ztt(t){(t=b.ve(t)?t:this.JW())<0?this.JQ=0:t>=this.JW()?this.JQ=this.JW():this.JQ=t}hst(t){(t=b.ve(t)?t:this.JW())<0?this.JQ=0:t>=this.JW()?this.JQ=this.JW():this.JQ=t;for(const s of this.BQ)s.rst()}est(){b.TY.Timeline&&this.constructor===b.nK&&(b.TY.Timeline.MY.PushTriggerTimeline(this),this.LQ.O4(b.TY.Timeline.MY.OnTimeSet),this.LQ.O4(b.TY.Timeline.MY.OnTimeSetByName),this.LQ.O4(b.TY.Timeline.MY.OnTimeSetByTags),b.TY.Timeline.MY.PopTriggerTimeline())}nst(){if(!this.XW())if(this.$W()&&1===this.YQ){if(this.Ltt()){if(this.ER()>=this.JW())return!1}else if(this.ER()<=0)return!1}else if(!this.XW()&&!this.$W())if(this.Ltt()){if(this.ER()>=this.JW())return!1}else if(this.ER()<=0)return!1;return!0}jW(){this.BW()||this.nst()&&this.Play(!0)}Play(t=!1){return!this.BW()&&!this.Jtt()&&(this.qtt()&&this.ztt()?this.ost():!this.qtt()&&!!(this.ZK()||t||this.Ktt())&&this.ast())}ost(){return this.$tt(!1),this.LQ.AK(this),this.LQ.FK(this),this.tV(),!0}ast(){return this.$tt(!1),this.LQ.FK(this),this.tV(),!0}VW(t=!1){this.BW()||(this.Ytt(t),this.LQ.WK(this),this.ZK()&&this.BK())}b0(t=!0,s=!1){if(!this.BW()){if(!this.qtt()&&this.Jtt())return this.LQ.NK(this);if(!this.ZK()){this.VW(!0),this.Ltt()?this.Ztt(0):this.Ztt(this.JW());const i=this.ER();this.tst(),s?this.lst(i):this.sst(i,!1,!1,!0),t&&this.est(),this.ist(),this.iK&&t&&this.ck().YD()}}}ust(){this.b0(!1,!0)}lst(t){this.sst(t,!1,!1,!0,NaN,!1,!0)}U$(){if(!this.BW()){if(!this.ck().pY()&&this.cst())return!1;this.LQ.VK(this),this.ck().pY()||this.ust()}return!0}Qtt(){this.zK(!0)}UK(){this.zK(!1,!0),this.DK(!1),this.kK(!1)}zK(t=!1,s=!1){if(!this.HK()||s){if(t){this.ott=!1,this.QQ=!0,this.att=!0,this.tst();for(const i of this.BQ)i.zK()}else if(this.DK(!0),this.kK(!1),this.jtt(),this.ZK()){this.ett=-1,0!==this.YQ&&(this.XQ=Math.abs(this.XQ)),this.YQ=0,this.$Q=1,this.ttt=!1,this.ott=!1,this.QQ=!0,this.att=!0,this.Ltt()?this.Ztt(0):this.Ztt(this.JW()),this.tst();for(const e of this.BQ)e.zK()}else{this.att=!0,this.ott=!1,this.tst();for(const h of this.BQ)h.fst()}this.ist()}}JK(){return this.iK}tst(){this.dtt=0;for(const t of this.BQ)t.xP()&&(this.dtt=1)}ist(){this.iK=0;for(const t of this.BQ)t.dst(),0===this.iK&&1===t.JK()&&(this.iK=1),this.VQ||1!==t.pst()||(this.VQ||(this.VQ=[]),this.jQ=this.VQ.push(t))}YK(t,s,i){if(this.Dtt()){if(0===t&&0===this.ltt)return;this.ltt=t,t=i}else{if(0===i&&0===this.ltt)return;t=this.ltt=i,s=1}const e=this.JQ+this.qQ,h=t*s*this.XQ,r=e+h,n=this.NQ.mst;r<0?(this.JQ=0,this.qQ=-r):n<=r?(this.JQ=n,this.qQ=this.JQ-r):(this.JQ=r,this.qQ=0);let o=!1,a=!1,l=this.XW(),u=this.$W();l||u?l&&!u?0<this.XQ?this.JQ>=n&&(this.hst(0),a=!0):this.JQ<=0&&(this.hst(n),a=!0):!l&&u?0<this.XQ?this.JQ>=n&&(this.Ztt(n),this.KW(-1*this.ZW()),a=!0,1===this.YQ?this.$Q<this.rW()?(this.$Q++,this.YQ=0):o=!0:0===this.YQ&&(this.YQ=1)):this.JQ<=0&&(this.Ztt(0),this.KW(-1*this.ZW()),a=!0,1===this.YQ?this.$Q<this.rW()?(this.$Q++,this.YQ=0):o=!0:0===this.YQ&&(this.YQ=1)):l&&u&&(0<this.XQ?this.JQ>=n&&(this.Ztt(n),this.KW(-1*this.ZW()),a=!0,this.YQ++,b.wrap(this.YQ,0,2)):this.JQ<=0&&(this.Ztt(0),this.KW(-1*this.ZW()),a=!0,this.YQ++,b.wrap(this.YQ,0,2))):0<this.XQ?this.JQ>=n&&(this.$Q<this.rW()?(this.$Q++,this.hst(0),a=!0):(this.Ztt(n),o=!0)):this.JQ<=0&&(this.$Q<this.rW()?(this.$Q++,this.hst(n),a=!0):(this.Ztt(0),o=!0));let c,f=this.WQ;if(o){for(c=0;c<f;c++)this.BQ[c].gst();this.VW(!0),this.Htt()}else{const d=this.jQ;for(c=0;c<d;c++)this.VQ[c].yst();if(1===this.dtt)for(c=0;c<f;c++){const p=this.BQ[c],m=p.wst(),g=this.JQ-m,y=e-m;g<0&&0<y?(this.JQ=m<0?0:n<=m?n:m,p.Kc(m,!0,!1,a,this.att,!1)):p.Kc(this.JQ,!0,!1,a,this.att,!1)}else for(c=0;c<f;c++)this.BQ[c].Kc(this.JQ,!0,!1,a,this.att,!1);for(c=0;c<d;c++)this.VQ[c].Sst();this.att&&(this.att=!1)}}sst(s,i=!1,e=!1,h=!1,r=NaN,t=!1,n=!1){for(const o of this.BQ)o.yst();for(const a of this.BQ){let t=s;if("number"==typeof r&&!isNaN(r)){const l=this.ER(),u=l-a.wst(),c=r-a.wst();u<0&&0<c&&(t=a.wst(),this.Ztt(t))}a.Kc(t,i,e,h,this.att,n)}for(const f of this.BQ)f.Sst();this.att&&t&&(this.att=!1)}bst(){const t=this.NQ.btt().vst(),s=b.vtt.kx(this,t);return this.WQ=this.BQ.push(s),s}pK(){if(!this.BW())for(const t of this.BQ)t.Mst()}sZ(){for(const t of this.BQ)t.sZ()}xst(){for(const t of this.BQ)t.Tst()}Gst(t,s,i){if(s){if("number"==typeof i&&0<=i){const e=this.BQ[i];return e?(e._st(s),void this.LQ.bK(s.YN(),this)):void 0}for(const h of this.BQ)if(h._tt())if(t){if(h.pV()===t){h._st(s),this.LQ.bK(s.YN(),this);break}}else if(!h.Ist()){h._st(s),this.LQ.bK(s.YN(),this);break}}}TK(t,s){for(const i of this.BQ)if(i._tt())if(s){if(s===i.pV()&&t===i.uV())return!0}else if(t===i.uV())return!0;return!1}KK(){return this.BQ.some(t=>!t._tt()||t.Cst())}cst(){return this.BQ.some(t=>{if(t._tt()){if(!t.Cst())return!1;const s=t.YN();return!!s&&s.qz()}return!1})}gV(t){for(const s of this.vZ())for(const i of s.Pst())if(i.Est()===t)return i}Ast(t){for(const s of this.BQ)if(t===s.uV())return s;return null}Rst(t){let s=t?t.split(" "):[],i=new Set(s.map(t=>t.toLowerCase().trim()));s=[...i.values()];for(const e of this.vZ())for(const h of e.Fst()){const r=s.every(t=>h.Ost(t));if(r)return h}}vK(){const t=[];for(const s of this.vZ())t.push(s.YN());return t.filter(t=>t)}Z$(){for(const t of this.vZ())t.Z$()}Fq(){return{tracksJson:this.Dst(),name:this.Mr,playheadTime:this.ER(),playbackRate:this.XQ,pingPongState:this.YQ,currentRepeatCount:this.$Q,isPlaying:this.KQ,isScheduled:this.ZQ,initialStateSet:this.QQ,finishedTriggers:this.ott,complete:this.ttt,released:this.stt,markedForRemoval:this.itt,completedTick:this.ett,implicitPause:this.htt,isTemplate:this.ntt,tags:this.utt.join(" "),stringTags:this.ctt,tagsChanged:this.ftt,firstTick:this.att}}Oq(t){t&&(this.kst(t.tracksJson),this.Mr=t.name,this.JQ=t.playheadTime,this.XQ=t.playbackRate,this.YQ=t.pingPongState,this.$Q=t.currentRepeatCount,this.KQ=!!t.isPlaying,this.ZQ=!!t.isScheduled,this.QQ=!!t.initialStateSet,this.ott=!!t.hasOwnProperty("finishedTriggers")&&!!t.finishedTriggers,this.ttt=!!t.complete,this.stt=!!t.released,this.itt=!!t.markedForRemoval,this.ett=t.completedTick,this.htt=!!t.implicitPause,this.ntt=!!t.isTemplate,this.utt=t.tags.split(" "),this.ctt=t.stringTags,this.ftt=!!t.tagsChanged,this.att=!!t.firstTick)}Dst(){return this.BQ.map(t=>t.Fq())}kst(t){this.xst(),t.forEach((t,s)=>{const i=this.BQ[s];i.Oq(t)}),this.BQ.filter(t=>t.Cst())}static Vtt(t){const s=this.QW();return""===t?1===s.length&&""===s[0]:s.map(t=>t.toLowerCase()).includes(t.toLowerCase())}static Btt(t){if(b.Je(t))return t.slice(0);if(b.Ee(t))return t.split(" ");throw new Error("invalid tags")}Lst(){return this.ptt||(this.ptt=b.wr(self.hV,this)),this.ptt}}}{const Br=self.Bs;Br.vtt=class extends Br.gr{constructor(t,s){super(),this.wZ=t,this.Nst=s,this.Bst=s.btt(),this.Wst=NaN,this.Vst=NaN,this.jst=null,this.Hst=null,this.Ust=!1,this.yP=0<s.wst(),this.zst=!1,this.Jst=!1,this.qst=NaN,this.Xst=null,this.Yst=this.Nst.Kst().$st(),this.Zst=[],this.Qst(),this.tit=0,this.iK=0,this.sit=0}static kx(t,s){return Br.wr(Br.vtt,t,s)}Sr(){this.Yst=null;for(const t of this.Zst)t.Sr();Br.Un(this.Zst),this.Zst=null,this.wZ=null,this.jst=null,this.Hst=null,this.Nst=null,this.Xst=null}Qst(){for(const t of this.Nst.eit().iit())this.Zst.push(Br.hit.kx(this,t))}Mst(){for(const t of this.Zst)t.Mst()}sZ(){for(const t of this.Zst)t.sZ();this.jst=null,this.Hst=null}rit(){return this.wZ}ck(){return this.wZ.ck()}Fst(){return this.Yst||(this.Yst=this.Nst.Kst().$st()),this.Yst}Pst(){return this.Zst}gV(s){for(let t=0;t<this.Zst.length;t++){const i=this.Zst[t];if(i.Est()===s)return i}}nit(){this.jst||this.uV()}oit(){return!!this.jst&&!this.jst.mj()}Cst(){if(!this._tt())return!1;const t=this.ait(),s=this.ck().LD(t);return!!s&&!s.mj()}YN(){if(this._tt()){const t=this.lit();if(-1!==t)return this.ck().kz(t)}}uit(){return this.wZ.vZ().indexOf(this)}Tst(){this.jst=null,this.Wst=NaN,this.Hst=null,this.Vst=NaN,this.Ust=!0}Ist(){return!!this.jst}uV(){if(!this.Ust){if(!this.jst||!this.oit()){const t=this.ait();this.jst=this.ck().LD(t)}return this.jst}}_st(t){if(this.Ust=!1,this.jst!==t){this.sZ(),this.jst=t,this.Vst=t.YN().KF(),this.Wst=t.a4(),this.Hst=t.jD();for(const s of this.cit()){const i=s.dit,e=s.pit,h=i.mit();switch(h){case"instance-variable":{e.git();const r=t.YN(),n=r.yit(s.name),o=r.wit(n),a=r.Sit(n);o===s.name&&a===s.type&&e.bit(n);break}case"behavior":{const l=s.j6,u=this.YN(),c=t.YN(),f=e.U6(c);if(l&&f){const d=l.uf();u.vit(d),c.vit(d),e.git(),e.Mit(f.mJ())}break}}}}}*cit(){for(const t of this.Zst){const s=t.Ttt(),i=this.YN(),e={dit:t,pit:s};switch(t.mit()){case"world-instance":e.property=t.Est();break;case"instance-variable":{const h=s.git();e.name=i.wit(h),e.type=i.Sit(h);break}case"effect":{const r=i.m5(),n=s.xit(r);e.Tit=n;break}case"behavior":{const o=s.U6(i);e.j6=o;break}case"plugin":e.UL=i.zL()}yield e}}jD(){if(!this.Hst||!this.oit()){const t=this.uV();t&&(this.Hst=t.jD())}return this.Hst}Git(){return this.Nst}ait(){return isNaN(this.Wst)?this.Nst.ait():this.Wst}_it(t){this.Nst._it(t)}Ett(){return this.Nst.Ett()}Att(t){this.Nst.Att(t)}FZ(){return this.Nst.FZ()}pV(){return this.Nst.pV()}wst(){return this.Nst.wst()}Iit(){return this.Nst.Iit()}Cit(t){this.Nst.Cit(t)}Rtt(t){this.Nst.Rtt(t)}lV(t){for(const s of this.Fst())s.lV(t);for(const i of this.Pst())i.lV(t)}Pit(){return this.Nst.Pit()}Eit(t){this.Nst.Eit(t)}lit(){return isNaN(this.Vst)?this.Nst.lit():this.Vst}Ait(t){this.Nst.Ait(t)}Rit(t){this.Nst.Rit(t)}Fit(){const t=this.uV();if(t){const s=t.O6();if(s.Oit())return t.O6().Fit()}return this.Nst.Fit()}Dit(t){this.Nst.Dit(t)}kit(){const t=this.uV();if(t){const s=t.O6();if(s.Oit())return t.O6().kit()}return this.Nst.kit()}NT(){return this.Nst.NT()}uf(){return this.Nst.uf()}_tt(){return 0===this.NT()}Lit(){return 1===this.NT()}Nit(){return 2===this.NT()}Bit(){return this.tit}JK(){return this.iK}pst(){return this.sit}xP(){return this.yP}rst(){for(const t of this.Zst)t.rst()}zK(){if(this.nit(),this.oit()||!this._tt()){const t=this.rit(),s=t.Ltt(),i=s?0:this.Iit();for(const h of this.Zst)h.zK(i),0===this.tit&&1===h.Bit()&&(this.tit=1),0===this.iK&&1===h.JK()&&(this.iK=1);this.sit=0;const e=this.Zst.some(t=>t.pst());e&&(this.sit=1),this.Xst=this.Wit(i),this.zst=!1,this.Jst=!1,this.Kc(i),this.Vit(this.Wit(i))}}fst(){if(this.nit(),this.oit()||!this._tt()){this.wZ.Ltt();const t=this.wZ.ER()-this.wst();this.Xst=this.Wit(t);for(const s of this.Zst)s.fst(t)}}gst(){if(!this.rit().ZK()&&(this.nit(),this.oit()||!this._tt())&&!this.yP){const t=this.wZ.ER(),s=this.wst()+this.Iit();s<=t?this.Kc(this.Iit(),!0,!1,!0,!1,!1,!0):t<=0&&this.Kc(0,!0,!1,!0,!1,!1,!0)}}dst(){for(let t=0,s=this.Zst.length;t<s;t++){const i=this.Zst[t];i.dst(),0===this.tit&&1===i.Bit()&&(this.tit=1),0===this.iK&&1===i.JK()&&(this.iK=1)}}yst(){const s=this.Zst.length;for(let t=0;t<s;t++)this.Zst[t].yst()}Kc(i,t=!1,e=!1,h=!1,s=!1,r=!1,n=!1){this.jst||this.uV();const o=this.jst&&!this.jst.mj(),a=0===this.Nst.If;if((o||!a)&&!(r&&a&&this.YN().qz()||(i-=this.wst())<0)){this.jit(i,t),this.Hit(i,t,s);for(let t=0,s=this.Zst.length;t<s;t++)this.Zst[t].Kc(i,e,h,n);this.Uit(i,t),0!==this.tit&&(this.Hst||(this.Hst=this.jst.jD()),this.Hst)&&this.Hst.cB()}}Sst(){const s=this.Zst.length;for(let t=0;t<s;t++)this.Zst[t].Sst()}jit(t,s){if(s&&this.yP&&!this.zst){const i=this.rit();if(i.Ltt()){if(t<0)return}else if(t>this.Iit())return;for(const e of this.Zst)e.zK();this.zst=!0}}Uit(t,s){if(s&&this.yP&&!this.Jst){const i=this.rit();if(i.Ltt()){if(t>=this.Iit()){for(const e of this.Zst)e.Kc(this.Iit(),!1,!0);this.Jst=!0}}else if(t<=0){for(const h of this.Zst)h.Kc(0,!1,!0);this.Jst=!0}}}Hit(t,s,i){if(!i&&s&&Br.TY.Timeline){const e=this.rit(),h=this.Xst.GZ(),r=this.Xst.ER(),n=h?h.ER():e.JW();if(t<=r||n<=t)if(this.Xst=this.Bst.zit(t,this.Nst),e.Ltt())h&&this.Vit(this.Xst);else{const o=this.Xst.GZ();o&&this.Vit(o)}}}Wit(t){const s=this.Bst.Jit(t,this.Nst);return s||this.Bst.zit(t,this.Nst)}Vit(t){if(Br.TY.Timeline){const s=this.rit(),i=s.Mtt();Br.TY.Timeline.MY.PushTriggerTimeline(s),Br.TY.Timeline.MY.PushTriggerKeyframe(t),i.O4(Br.TY.Timeline.MY.OnAnyKeyframeReached),i.O4(Br.TY.Timeline.MY.Vit),Br.TY.Timeline.MY.PopTriggerTimeline(s),Br.TY.Timeline.MY.PopTriggerKeyframe(t)}}qit(){const t=this.Nst.Kst(),s=t.Xit();return s}Yit(){const t=this.Nst.eit(),s=t.$it(),i=Br.hit.kx(this,s);return this.Zst.push(i),i}Kit(t){const s=this.Nst.Kst();s.Zit(t)}Qit(t){for(const s of this.Zst)s.Qit(t)}tet(){for(const t of this.Zst)t.tet()}iet(){if(this.nit(),this.oit()||!this._tt())for(const t of this.Zst)t.iet()}eet(){if(this.nit(),this.oit()||!this._tt()){let t=!1;for(const s of this.Zst){const i=s.eet();!t&&i&&(t=!0)}if(t){const e=this.qit();e.UW(this.rit().ER()),e.lV("noease"),e.Eit(!0),e.Ntt("")}}}Z$(){isNaN(this.qst)||this.het(this.qst),this.qst=NaN}Fq(){const t=this.uV(),s=t?t.a4():this.ait();return{propertyTracksJson:this.ret(),lastKeyframeDataItemJson:this.net(),initialStateOfNestedSet:this.zst,endStateOfNestedSet:this.Jst,instanceUid:s,cleared:this.Ust}}Oq(t){if(t){this.oet(t.propertyTracksJson),this.aet(t.lastKeyframeDataItemJson),this.qst=t.instanceUid,this.zst=!1,t.hasOwnProperty.initialStateOfNestedSet&&(this.zst=t.initialStateOfNestedSet),this.Jst=!1,t.hasOwnProperty.endStateOfNestedSet&&(this.Jst=t.endStateOfNestedSet),this.Ust=!!t.hasOwnProperty("cleared")&&t.cleared;for(const s of this.Zst)0===this.tit&&1===s.Bit()&&(this.tit=1),0===this.iK&&1===s.JK()&&(this.iK=1);this.sit=0,this.Zst.some(t=>t.pst())&&(this.sit=1)}}net(){const t=this.Nst.Kst();return t.let(this.Xst)}ret(){return this.Zst.map(t=>t.Fq())}oet(t){t.forEach((t,s)=>{const i=this.Zst[s];i.Oq(t)})}het(t){if(Br.ve(t)){const s=this.ck().LD(t);if(s){const i=this.rit();i.Gst(this.Nst.pV(),s,this.uit())}}}aet(t){const s=this.Nst.Kst();this.Xst=s.uet(t)}}}{const Wr=self.Bs;Wr.hit=class extends Wr.gr{constructor(t,s){super(),this.cet=t,this.fet=s,this.det=s.eit(),this.tit=0,this.iK=0,this.sit=0,this.pet=this.Ttt(),this.met=this.fet.wet().yet(),this.bet=null,this.vet=null}static kx(t,s){return Wr.wr(Wr.hit,t,s)}Sr(){this.cet=null,this.pet&&(this.pet.Sr(),this.pet=null),this.met=null,this.fet=null,this.det=null}Bit(){return this.tit}JK(){return this.iK}pst(){return this.sit}Met(){return!!this.vet}xet(t){this.vet=t}Tet(){return this.vet}Get(){return this.cet}_et(){return this.fet}eit(){return this.det}rit(){return this.cet.rit()}ck(){return this.cet.ck()}uV(){return this.cet.uV()}Ttt(){if(!this.pet){let t=this.fet.mit(),s;switch(t){case"behavior":s=new Wr.hit.Iet(this);break;case"effect":s=new Wr.hit.Cet(this),this.iK=1;break;case"instance-variable":s=new Wr.hit.Pet(this);break;case"plugin":s=new Wr.hit.Eet(this),this.iK=1;break;case"world-instance":s=new Wr.hit.Aet(this),this.iK=1,this.tit=1;break;case"value":s=new Wr.hit.Ret(this);break;case"audio":s=new Wr.hit.Fet(this)}this.pet=s}return this.pet}mit(){return this.fet.mit()}Oet(t){this.fet.Oet(t)}Det(){return this.fet.ket()}Let(t){this.fet.Net(t)}mV(){return this.Ttt().Bet()}Est(){return this.fet.Wet()}Vet(t){this.fet.jet(t)}Het(){return this.fet.NT()}Uet(t){this.fet.SetType(t)}zet(){return this.eit().Jet(this.fet).NT()}qet(){return this.fet.qet()}Xet(t){this.fet.Xet(t)}Yet(){return this.fet.Yet()}$et(t){this.fet.$et(t)}Pit(){return this.fet.Pit()}Eit(t){this.fet.Eit(t)}Ett(){return this.fet.Ett()}Att(t){this.fet.Att(t)}FZ(){return this.fet.FZ()}Rtt(t){this.fet.Rtt(t)}lV(t){for(const s of this.Ket())s.lV(t)}Zet(){return this.fet.Zet()}Ket(){return this.met||(this.met=this.fet.wet().yet()),this.met}TZ(){return this.fet.wet().TZ()}Qet(t){return this.det.Qet(t,this.fet)}tht(t){return this.det.tht(t,this.fet)}sht(t){let s=this.det.Qet(t,this.fet),i;return i=s?this.det.iht(t,this.fet):(s=this.det.tht(t,this.fet),this.det.eht(t,this.fet)),{start:s,end:i}}*hht(){for(const t of this.Ket())yield t.VZ()}*rht(){for(const t of this.Ket())yield t.ER()}Mst(){this.Ttt().Mst()}sZ(){this.Ttt().sZ()}nht(){return this.Ttt().nht()}rst(){this.Ttt().rst()}zK(t){this.Ttt().zK(),this.bet=this.oht(t),this.dst()}fst(t){this.Ttt().fst(),this.bet=this.oht(t)}dst(){const t=this.Get();if(this.sit=0,t._tt()){const s=this.rit(),i=t.uV(),e=this.Ttt(),h=this.Est(),r=e.aht();if(r){const n=s.xtt(i,e,h,this);n&&n.length&&(this.sit=1)}else this.sit=0}}oht(t){const s=this.rit(),i=this.det.Qet(t,this.fet);return i||(s.Ltt()?this.det.tht(t,this.fet):this.det.eht(t,this.fet))}yst(){this.pet.yst()}Kc(t,s=!1,i=!1,e=!1){let h,r,n=!1;if(s)h=this.det.tht(t,this.fet);else{if(this.bet){const o=this.rit(),a=this.bet.GZ(),l=this.bet.ER(),u=a?a.ER():o.JW();(t<=l||u<=t)&&(this.bet=this.det.tht(t,this.fet),n=!0)}else this.bet=this.det.tht(t,this.fet),n=!0;h=this.bet}h&&(r=h.GZ()),this.pet.Kc(t,h,r,s,i,e,n)}lht(t){if(this.bet){const e=this.rit(),h=this.bet.GZ(),r=this.bet.ER(),n=h?h.ER():e.JW();(t<=r||n<=t)&&(this.bet=this.det.tht(t,this.fet))}else this.bet=this.det.tht(t,this.fet);const s=this.bet,i=s.GZ();return this.pet.lht(t,s,i)}uht(t,s,i){return this.pet.lht(t,s,i)}Sst(){this.pet.Sst()}static cht(t,s){const i=s._et(),e=s.det;return e.tht(t,i)}static fht(t,s){const i=s._et(),e=s.det;return e.eht(t,i)}dht(){const t=this.fet.wet(),s=t.pht();return this.bet=null,s}Qit(t){this.bet=null;const s=this.fet.wet();s.mht(t)}tet(){this.Ttt().tet()}iet(){const t=this.Ttt().iet();if(t){const s=this.det.Jet(this.fet),i=this.Ttt().nht();s.ght(i)}}eet(){const t=this.Ttt().eet();return t&&this.yht(),this.Ttt().wht(),t}yht(){const t=this.rit().ER(),s=this.Ttt(),i=Wr.hit.cht(t,this),e=this.dht();e.SetType(i.NT()),e.UW(t),e.lV(i.Sht()),e.Eit(!0),e.bht(s.vht()),e.ght(s.nht())}Fq(){return{sourceAdapterJson:this.Ttt().Fq()}}Oq(t){t&&this.Ttt().Oq(t.sourceAdapterJson)}}}{const Vr=self.Bs,jr=Vr.hit;jr.Aet=class{constructor(t){this.Mht=t,this.xht=null,this.Tht()}Sr(){this.xht&&(this.xht.Sr(),this.xht=null),this.Mht=null}aht(){return this.xht.aht()}gV(){return this.Mht}Mst(){this.xht&&this.xht.Mst()}sZ(){this.xht&&this.xht.sZ()}Tht(){return this.xht||(this.xht=this.Ght()),this.xht}git(){}KF(){return this.git()}_ht(){}rst(){this.Tht().rst()}zK(){this.Tht().zK()}fst(){this.Tht().fst()}yst(){this.xht.Iht()}Kc(t,s,i,e,h,r,n){let o=this.Mht.zet(),a;switch(o){case"numeric":a=jr.Cht.Kc(t,s,i,this.Mht);break;case"angle":a=jr.Pht.Kc(t,s,i,this.Mht);break;case"boolean":a=jr.Eht.Kc(t,s,i,this.Mht);break;case"color":a=jr.Aht.Kc(t,s,i,this.Mht);break;case"text":a=jr.Rht.Kc(t,s,i,this.Mht)}this.xht.Fht(t,a,s,i,e,h,r,n)}lht(t,s,i){switch(this.Mht.zet()){case"numeric":return jr.Cht.Kc(t,s,i,this.Mht);case"angle":return jr.Pht.Kc(t,s,i,this.Mht);case"boolean":return jr.Eht.Kc(t,s,i,this.Mht);case"color":return jr.Aht.Kc(t,s,i,this.Mht);case"text":return jr.Rht.Kc(t,s,i,this.Mht)}}Sst(){this.xht.Oht()}tet(){this.Tht().Dht()}wht(){this.Tht().wht()}nht(){return this.Tht().nht()}iet(){return this.Tht().iet()}eet(){return this.Tht().eet()}vht(){const t=this.Mht,s=t.Get(),i=s.rit().ER(),e=jr.cht(i,t),h=e.GZ(),r=t.zet();switch(r){case"numeric":return jr.Cht.Kc(i,e,h,t);case"angle":return jr.Pht.Kc(i,e,h,t);case"boolean":return jr.Eht.Kc(i,e,h,t);case"color":return jr.Aht.Kc(i,e,h,t);case"text":return jr.Rht.Kc(i,e,h,t)}}Ght(){const t=this.Mht,s=t.Zet()?t.zet():"";switch(s){case"combo":case"boolean":case"text":case"string":return new jr.Lht.kht(this);case"numeric":case"number":case"angle":return new("combo"===this.Mht.Het()?jr.Lht.kht:jr.Lht.Nht)(this);case"color":case"offsetColor":return new jr.Lht.Bht(this);default:return new jr.Lht.Nht(this)}}Fq(){return{propertyAdapterJson:this.Tht().Fq()}}Oq(t){t&&this.Tht().Oq(t.propertyAdapterJson)}}}{const Hr=self.Bs;class Ur extends Hr.hit.Aet{constructor(t){super(t),this.Wht=NaN}git(){return this.Mht._et().ket()[0]}KF(){return this.Wht||super.KF()}_ht(){return this.Mht.Get().uV()}bit(t){const s=this.Mht._et().ket()[0];s!==t&&(this.Wht=t)}Kc(t,s,i,e,h,r,n){this.Tht().Vht(s.Bet())&&super.Kc(t,s,i,e,h,r,n)}lht(t,s,i){if(this.Tht().Vht(s.Bet()))return super.lht(t,s,i)}Fq(){return Object.assign(super.Fq(),{index:this.Wht})}Oq(t){t&&(super.Oq(t),this.Wht=t.index)}}Hr.hit.Pet=Ur}{const zr=self.Bs;class Jr extends zr.hit.Aet{constructor(t){super(t),this.O7=NaN}git(){const t=this.Mht._et();return t.ket()[1]}_ht(){const t=this.Mht._et(),s=this.Mht.Get(),i=this.O7||t.ket()[0],e=s.uV(),h=e.jht(i),r=e.Hht()[h];return r.O6()}U6(t){const s=this.Mht._et(),i=s.ket()[2];return t.Uht(i)}Mit(t){const s=this.Mht._et();s.ket()[0]!==t&&(this.O7=t)}Kc(t,s,i,e,h,r,n){const o=this.Mht.Get(),a=o.uV();this.U6(a.YN())&&super.Kc(t,s,i,e,h,r,n)}lht(t,s,i){const e=this.Mht.Get(),h=e.uV();if(this.U6(h.YN()))return super.lht(t,s,i)}Fq(){return Object.assign(super.Fq(),{sid:this.O7})}Oq(t){t&&(super.Oq(t),this.O7=t.sid)}}zr.hit.Iet=Jr}{const qr=self.Bs;class Xr extends qr.hit.Aet{constructor(t){super(t)}git(){return this.Mht._et().ket()[1]}_ht(){const t=this.Mht,s=t.Get(),i=s.jD(),e=i.lB(),h=e.m5(),r=this.xit(h),n=r.KF();return e.K6(n)?e.zht(n):null}xit(t){const s=this.Mht,i=s._et().ket()[0];return t.Jht(i)}Kc(t,s,i,e,h,r,n){this.qht()&&super.Kc(t,s,i,e,h,r,n)}lht(t,s,i){if(this.qht())return super.lht(t,s,i)}qht(){const t=this.Mht,s=t.Get(),i=s.jD(),e=i.lB(),h=e.m5(),r=this.xit(h);if(r){const n=r.KF();return e.K6(n)}}}qr.hit.Cet=Xr}{const Yr=self.Bs;class $r extends Yr.hit.Aet{constructor(t){super(t)}git(){return this.Mht._et().ket()[0]}_ht(){return this.Mht.Get().uV().O6()}Kc(t,s,i,e,h,r,n){const o=this.Mht.Get(),a=o.YN().zL(),l=o.uV().YN().zL();a===l&&super.Kc(t,s,i,e,h,r,n)}lht(t,s,i){const e=this.Mht.Get(),h=e.YN().zL(),r=e.uV().YN().zL();if(h===r)return super.lht(t,s,i)}Xht(){const t=this.Mht.Get(),s=t.YN().zL();if(Yr.TY.Yht&&s instanceof Yr.TY.Yht&&("initial-frame"===this.Mht.Est()||"initial-animation"===this.Mht.Est()))switch(this.Mht.FZ()){case"relative":case"absolute":return null}}}Yr.hit.Eet=$r}{const Kr=self.Bs;class Zr extends Kr.hit.Aet{constructor(t){super(t),this.$ht=0,this.Kht=!1}aht(){return!1}zK(){let t=this.Mht.eit(),s=this.Mht._et();s=t.Jet(s),this.$ht=s.VZ()}fst(){}Bet(){return this.Kht||this.Mht.Kc(0),this.$ht}Kc(t,s,i,e,h,r,n){this.$ht=Kr.hit.Cht.Kc(t,s,i,this.Mht),this.Kht=!0}tet(){}wht(){}nht(){return this.$ht}iet(){return!1}eet(){return!1}Fq(){return{value:this.$ht,init:this.Kht}}Oq(t){t&&(this.$ht=t.value,this.Kht=!t.hasOwnProperty("init")||t.init)}}Kr.hit.Ret=Zr}{const Qr=self.Bs;class tn extends Qr.hit.Aet{constructor(t){super(t),this.Zht=!1,this.Qht=null,this.trt=null,this.srt=null,this.wZ=this.Mht.rit(),this.cet=this.Mht.Get(),this.irt=this.Mht.Det(),this.ert=this.irt[0],this.hrt=this.irt[1],this.irt[3]?this.rrt=this.irt[3]:this.rrt=Math.random().toString(36).slice(2),this.nrt=NaN,this.ort=NaN,this.art=NaN,this.lrt=null,this.urt()}Sr(){super.Sr(),this.Qht=null,this.trt=null,this.srt=null,this.wZ=null,this.cet=null,this.irt=null,this.ert=null,this.lrt=null}urt(){if(self.Bs.TY.Audio){const t=this.Mht.ck(),s=t.crt(self.Bs.TY.Audio);s&&(this.Qht=s.jL().O6()),this.trt=self.Bs.TY.Audio.frt,this.srt=self.Bs.TY.Audio.drt}}prt(){if(!this.lrt){const t=this.Mht.Get(),s=t.gV("audioSource");s&&(this.lrt=s.Ttt())}}mrt(){const t=this.Mht.Get(),s=t.gV("volume");return(s?s.Ttt():this).ort}Mst(){super.Mst(),this.Zht=!1,this.Qht&&(this.srt&&(this.nrt=this.srt.grt.call(this.Qht,this.rrt),this.ort=this.srt.yrt.call(this.Qht,this.rrt)),this.trt)&&this.trt.VW.call(this.Qht,this.rrt)}wrt(){return this.rrt}Srt(){return this.art}brt(t){this.art=t}zK(){super.zK(),this.nrt=NaN,this.Zht=!1}fst(){super.fst();const t=this.Mht.rit(),s=t.ER();switch(this.nrt=s-this.hrt,this.Mht.Est()){case"audioSource":break;case"volume":this.ort=this.Mht.lht(s)}this.Zht=!1}Kc(t,s,i,e,h,r,n){if(this.Qht)switch(this.Mht.Est()){case"audioSource":{if(!this.wZ.Ltt())return;if(e)return void(this.trt&&this.trt.VW.call(this.Qht,this.rrt));if(t<this.hrt)return void(this.Zht=!1);const o=this.srt.vrt.call(this.Qht,this.rrt),a=this.wZ.ZW();if(a!==o&&this.trt.KW.call(this.Qht,this.rrt,a),this.Zht)return;if(!this.Mht.rit().IsPlaying())return;if(this.Zht=!0,isNaN(this.nrt)){const l=self.performance.now(),u=t-this.hrt,c=this.Qht.Mrt();if("suspended"===c)return void(this.Zht=!1);const f=self.performance.now(),d=(f-l)/1e3,p=u+d;if(this.trt){let t=this.Srt();isNaN(t)?(this.brt(0),t=0):this.brt(t),this.trt.xrt.call(this.Qht,this.ert,t,this.rrt,p)}}else{const m=this.nrt,g=(this.nrt=NaN,this.mrt()),y=(this.ort=NaN,this.Qht.Mrt());if("suspended"===y)return void(this.Zht=!1);this.trt&&(this.brt(g),this.trt.xrt.call(this.Qht,this.ert,g,this.rrt,m))}break}case"volume":this.prt(),super.Kc(t,s,i,e,h,r,n)}}lht(t,s,i){if(this.Qht)switch(this.Mht.Est()){case"audioSource":return;case"volume":return this.prt(),super.lht(t,s,i)}}Trt(t,s){return this.lrt?this.lrt.Srt():0}Grt(t,s,i,e){this.lrt&&this.lrt.brt(this.Trt()+s),this.trt&&this.lrt&&this.trt.brt.call(this.Qht,this.lrt.wrt(),this.lrt.Srt())}_rt(t,s,i){this.lrt&&this.lrt.brt(s),this.trt&&this.lrt&&this.trt.brt.call(this.Qht,this.lrt.wrt(),this.lrt.Srt())}Irt(){return!0}Fq(){return{audioPlaybackStarted:this.Zht,audioTag:this.rrt,pauseTime:this.nrt,pauseVolume:this.ort,volume:this.art}}Oq(t){t&&(this.Zht=t.audioPlaybackStarted,this.rrt=t.audioTag,this.nrt=t.pauseTime,this.ort=t.pauseVolume,this.art=t.volume,this.urt())}}Qr.hit.Fet=tn}{const sn=self.Bs;sn.hit.Lht=class{constructor(t){this.pet=t,this.Mht=t.gV(),this.Hst=this.Mht.Get().jD(),this.Crt=this.Mht.Est(),this.Prt=!1,this.Ert=null,this.Art=null}Sr(){this.pet=null,this.Mht=null,this.Hst=null,this.Ert=null,this.Art=null}aht(){return!1}Mst(){}sZ(){this.Hst=null,this.Ert=null,this.Art=null}Ttt(){return this.pet}gV(){return this.Mht}jD(){return this.Hst||(this.Hst=this.Mht.Get().jD()),this.Hst}Rrt(t){this.Prt=!!t}Frt(){return this.Prt}rst(){}zK(){}fst(){}Dht(){this.Ert=this.nht()}wht(){this.Ert=null}nht(){}iet(){}eet(){}Vht(t){const s=typeof this.Ort(),i=typeof t;return s==i}Iht(){}Fht(t,s,i,e,h,r,n,o){}Oht(){}Drt(){const t=this.krt(()=>{const t=this.Mht._et(),s=this.Mht.eit();return s.Jet(t)},()=>{const t=this.Mht._et(),s=this.Mht.eit();return s.Lrt(t)});return t.Nrt()}Brt(){const t=this.Mht.rit(),e=t.ER()-this.Mht.Get().wst(),s=this.krt(()=>{const t=this.Mht._et(),s=this.Mht.eit();return s.tht(e,t)},()=>{const t=this.Mht._et(),s=this.Mht.eit(),i=s.eht(e,t);return i||s.Lrt(t)});return s.Nrt()}krt(t,s){const i=this.Mht.rit();return(i.Ltt()?t:s)()}Wrt(t,s){const i=this.Mht.FZ();return("relative"===i?t:s)()}Vrt(t,s){return(this.Frt()?(this.Rrt(!1),t):s)()}jrt(t){}Hrt(){return this.pet.KF()}Urt(){return this.Art||(this.Art=this.pet._ht()),this.Art}zrt(t,s,i,e,h,r){const n=this.Mht.mit();switch(n){case"behavior":return t();case"effect":return s();case"instance-variable":return i();case"plugin":return e();case"world-instance":return h();case"audio":return r()}}Fq(){return{firstAbsoluteUpdate:this.Prt,saveState:this.Ert}}Oq(t){t&&(this.Prt=t.firstAbsoluteUpdate,this.Ert=t.saveState)}Jrt(t,s=!1){const i=[];for(const e of t){const h=e.Get().wst();for(const r of e.Ket())(s&&0===r.ER()||!s)&&i.push({time:h+r.ER(),value:r.Nrt()})}return i.sort((t,s)=>t.time-s.time)}qrt(t,s,i){return this.Xrt(s,i)}Xrt(s,i){for(let t=i.length-1;0<=t;t--){const e=i[t].time;if(e<=s)return i[t]}return null}}}{const en=self.Bs,hn=new Map,rn=[0,0,0];class nn extends en.hit.Lht{constructor(t){super(t)}rst(){}zK(){}fst(){}nht(){const t=this.Mht.mit(),s=this.Urt(),i=this.Hrt();switch(t){case"behavior":return this.Yrt(s.$rt(i));case"effect":return this.Yrt(s[i]);case"plugin":return this.Yrt(s.$rt(i));case"world-instance":return this.Yrt(this.Ort())}}iet(){const t=this.Drt();return!this.Krt(t,this.Ort())}eet(){return!en.Te(this.Ert)&&!this.Krt(this.Ert,this.Ort())}Krt(t,s){return t=this.Zrt(t),s=this.Zrt(s),t.xa(s)}Drt(){const t=super.Drt();return this.Zrt(t)}Brt(){const t=super.Brt();return this.Zrt(t)}jrt(t){}Yrt(t){return(en.oh(t,en.$o)?t.toArray():t).slice(0,3)}Zrt(t){return en.oh(t,en.$o)?t:new en.$o(t[0],t[1],t[2],1)}Vht(t){return!0}aht(){return!0}Iht(){const t=this.Mht.rit(),s=this.Mht.uV(),i=this.Mht.Ttt(),e=t.xtt(s,i,this.Crt,this.Mht);if(e&&1<e.length){hn.has(s)||hn.set(s,new Map);const h=hn.get(s),r=this.Mht.mit(),n=(h.has(r)||h.set(r,new Map),h.get(r));n.has(this.Crt)||n.set(this.Crt,{Qrt:!1,color:new en.$o(0,0,0,1)})}}tnt(t,s,i){const e=hn.get(t).get(s).get(i);return e.Qrt=!0,e.color}Fht(t,s,i,e,h,r,n,o){const a=this.Mht.rit(),l=this.Mht.Get(),u=this.Mht.uV(),c=this.Mht.Ttt(),f=this.Mht.mit(),d=this.Crt,p=a.xtt(u,c,d,this.Mht);if(p&&1<p.length){const m=this.Jrt(p,!0),g=this.qrt(a,a.ER(),m);if(g){const y=l.wst(),w=g.time-y;if(0==w)this.tnt(u,f,this.Crt).na(s[0],s[1],s[2]);else if(!(w<0)){const S=s[0],b=s[1],v=s[2],M=this.Mht.Kc(w,!1,!0),x=en.$o.tl(S,M[0]),T=en.$o.tl(b,M[1]),G=en.$o.tl(v,M[2]);this.tnt(u,f,this.Crt).na(x,T,G)}}}else this.snt(s[0],s[1],s[2])}Oht(){const t=this.Mht.uV();if(hn.has(t)){const s=hn.get(t),i=this.Mht.mit();if(s.has(i)){const e=s.get(i);if(e.has(this.Crt)){const h=e.get(this.Crt),r=h.Qrt,n=h.color;r&&this.snt(n.da(),n.pa(),n.ya()),0===e.size&&s.delete(i),0===s.size&&hn.delete(t)}}}}Ort(){const t=this.Mht.mit(),s=this.Urt(),i=this.Hrt();switch(t){case"behavior":return this.Zrt(s.$rt(i));case"effect":return s[i].clone();case"plugin":return this.Zrt(s.$rt(i));case"world-instance":return this.jD().GB().clone()}}snt(t,s,i){const e=this.Mht.mit(),h=this.Urt(),r=this.Hrt();switch(e){case"behavior":rn[0]=t,rn[1]=s,rn[2]=i,h.int(r,rn);break;case"effect":h[r].ra(t,s,i);break;case"plugin":rn[0]=t,rn[1]=s,rn[2]=i,h.int(r,rn);break;case"world-instance":this.jD().ent(t,s,i)}}Fq(){}Oq(t){}}en.hit.Lht.Bht=nn}{const on=self.Bs,an=on.hit;class ln extends on.hit.Lht{constructor(t){super(t)}rst(){}zK(){}fst(){}nht(){return this.Ort()}iet(){const t=this.Drt();return t!==this.nht()}eet(){return!on.Te(this.Ert)&&this.Ert!==this.nht()}aht(){return!1}Fht(t,s,i,e,h,r,n,o){const a=this.Mht,l=a.Get(),u=a.mit(),c=a.rit(),f=l.uV(),d=a.Ttt(),p=this.Crt,m=c.xtt(f,d,p,a);if(m&&1<m.length){const y=this.Jrt(m),w=t+l.wst(),S=this.qrt(c,w,y);S&&(s=S.value)}const g=a.zet();switch(g){case"numeric":if(an.Cht.hnt(this.Hrt(),this.Urt(),s,u))break;return;case"angle":if(an.Pht.hnt(this.Hrt(),this.Urt(),s,u))break;return;case"boolean":if(an.Eht.hnt(this.Hrt(),this.Urt(),s,u))break;return;case"color":if(an.Aht.hnt(this.Hrt(),this.Urt(),s,u))break;return;case"text":if(!an.Rht.hnt(this.Hrt(),this.Urt(),s,u))return}this.snt(s)}Ort(){const t=this.Mht.mit(),s=this.Urt(),i=this.Hrt();switch(t){case"behavior":return s.$rt(i);case"effect":return s[i];case"instance-variable":return s.rnt(i);case"plugin":return s.$rt(i)}}snt(t){const s=this.Mht.mit(),i=this.Urt(),e=this.Hrt();switch(s){case"behavior":i.int(e,t);break;case"effect":i[e]=t;break;case"instance-variable":i.nnt(e,t);break;case"plugin":i.int(e,t)}}}on.hit.Lht.kht=ln}{const un=self.Bs,cn=(un.hit.Lht,new Map),fn=(t,s,i,e,h,r=!1,n=null,o=null)=>{cn.set(t,{ont:s,ant:i,lnt:e,round:h,unt:r,init:n,reset:o})};fn("offsetX",(t,s,i,e)=>{"relative"===e.Mht.FZ()?t.cnt(s,i.rit().Ott()):t.cnt(s)},(t,s)=>t.Uv(s),t=>t.Hv(),!0),fn("offsetY",(t,s,i,e)=>{"relative"===e.Mht.FZ()?t.fnt(s,i.rit().Ott()):t.fnt(s)},(t,s)=>t.qv(s),t=>t.Jv(),!0),fn("offsetWidth",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Mht.FZ(),l=1===i.dnt.NT();if((h||l)&&s.QB()&&s.n6()){if(isNaN(i.pnt)){let e=[],t=s.WB();for(;t;)e.push(t),t=t.WB();e.reverse();let a=(t,s)=>s.rit().Ast(t.uV()),h=(t,s)=>{const i=a(t,s);if(i)return i.Fit();const e=t.uV().O6();return e.Oit()?e.Fit():t.gnt().mnt()},r=(t,s,i,e=0)=>{const h=a(t,s);if(!h)return e;const r=h.gV(i);if(!r)return e;const n=r._et().wet();if(!n)return e;const o=n.Lrt();return o?o.Bet():e},n;if(l){let t=e[e.length-1];n=t.Em()}else{let s=e[0],t=s.gnt().mnt(),i=s.gnt().ynt();n=t*i,n=(n+=r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX");for(let t=1;t<e.length;t++){const u=(s=e[t]).gnt().ynt();n=(n=(n*=u)+r(s,o,"offsetWidth"))+h(s,o)*r(s,o,"offsetScaleX")}}i.pnt=0===n?Number.EPSILON:n}e||s.ag(t/i.pnt,!0)}else s.ag(t)}},(t,s)=>t.Lm(s),t=>t.Em(),!0),fn("offsetHeight",(s,t,o,i,e)=>{if(0!==t){const h="relative"===i.Mht.FZ(),a=1===i.dnt.NT();if((h||a)&&s.QB()&&s.a6()){if(isNaN(i.pnt)){let e=[],t=s.WB();for(;t;)e.push(t),t=t.WB();e.reverse();let h=(t,s)=>{e=t;const i=s.rit().Ast(e.uV());var e;if(i)return i.kit();const h=t.uV().O6();return h.Oit()?h.kit():t.gnt().wnt()},r=(t,s,i,e=0)=>{const h=s.rit().Ast(t.uV());if(!h)return e;const r=h.gV(i);if(!r)return e;const n=r._et().wet();if(!n)return e;const o=n.Lrt();return o?o.Bet():e},n;if(a){let t=e[e.length-1];n=t.Wm()}else{let s=e[0],t=s.gnt().wnt(),i=s.gnt().Snt();n=t*i,n=(n+=r(s,o,"offsetHeight"))+h(s,o)*r(s,o,"offsetScaleY");for(let t=1;t<e.length;t++){const l=(s=e[t]).gnt().Snt();n=(n=(n*=l)+r(s,o))+h(s,o)*r(s,o,"offsetScaleY")}}i.pnt=0===n?Number.EPSILON:n}e||s.bnt(t/i.pnt,!0)}else s.bnt(t)}},(t,s)=>t.Am(s),t=>t.Wm(),!0),fn("offsetAngle",(t,s,i,e,h)=>{t.vnt(s)},(t,s)=>t.v5(s),t=>t.GetAngle(),!1,!0),fn("offsetOpacity",(t,s,i,e,h)=>{const r=e.Mnt||1,n=(s/=r,t.sA()),o=n+s;if(0===e.xnt)1<o?e.xnt+=o-1:o<0&&(e.xnt+=o),t.Tnt(s);else{const a=t.sA()+s;0<s&&0<e.xnt?1<a&&(e.xnt+=a-1):0<s&&e.xnt<0?(e.xnt+=s,0<e.xnt&&(t.Tnt(e.xnt),e.xnt=0)):s<0&&0<e.xnt?(e.xnt+=s,e.xnt<0&&(t.Tnt(e.xnt),e.xnt=0)):s<0&&e.xnt<0&&a<0&&(e.xnt+=a)}},(t,s)=>{t.eA(s)},t=>t.sA(),!1,!0,(r,h,n)=>{switch(r.xnt=0,r.Mht.FZ()){case"relative":{r.Mht.eit();let t=r.Mht._et(),s=t.wet(),i=s.yet(),e=r.jD().sA(),h=e;for(const o of i){const a=o.ER(),l=r.Mht.lht(a);h=e+l,h=un.Gr(h,0,1)}r.Gnt=e-h,r.Gnt=Math.round(100*(r.Gnt+Number.EPSILON))/100,h=e;for(let t=i.length-1;0<=t;t--){const u=i[t].ER(),c=r.Mht.lht(u);h-=c,h=un.Gr(h,0,1)}r._nt=h,r._nt=Math.round(100*(r._nt+Number.EPSILON))/100;break}}const t="relative"===r.Mht.FZ(),s=1===r.dnt.NT();if((t||s)&&h.QB()&&h.p6()){let s=[],t=h.WB();for(;t;)s.push(t),t=t.WB();s.reverse();let i=(t,s,i)=>{const e=s.rit().Ast(t.uV());if(!e)return 0;const h=e.gV(i);if(!h)return 0;const r=h._et().wet();if(!r)return 0;const n=r.Lrt();return n?n.Bet():0},e=s[0].gnt().Int();e+=i(s[0],n,"offsetOpacity");for(let t=1;t<s.length;t++)e+=i(s[t],n,"offsetOpacity");r.Mnt=0===e?1:e}},i=>{switch(i.Mht.FZ()){case"relative":{i.xnt=0;let t=i.jD(),s=t.sA();s=Math.round(100*(s+Number.EPSILON))/100,i.Mht.rit().Ltt()?(t.eA(s+i.Gnt),i._G=0):(t.eA(s-i._nt),i._G=i.Ttt().vht());break}}}),fn("offsetOriginX",(t,s)=>t.Cnt(s),(t,s)=>t.Pnt(s),t=>t.vW(),!1),fn("offsetOriginY",(t,s)=>t.Ent(s),(t,s)=>t.Ant(s),t=>t.xW(),!1),fn("offsetZElevation",(t,s)=>t.Rnt(s),(t,s)=>t.Yv(s),t=>t.Xv(),!0),fn("offsetScaleX",(t,s,i,e)=>{if(0!==s){const h=t.Em()<0?-1:1;if("relative"===e.Mht.FZ()&&t.QB()&&t.n6()){const r=i.Fit()*h*s;isNaN(e.pnt)&&cn.get("offsetWidth").ont(t,1,i,e,!0),t.ag(r/e.pnt,!0)}else t.ag(i.Fit()*h*s)}},(t,s,i)=>{t.Lm(i.Fit()*s)},(e,h)=>{const r=e.Em()<0?-1:1;if(e.n6()){let t=e.WB(),s=h.rit().Ast(t.uV()),i=NaN;if(s)i=t.Em()/s.Fit();else{const n=t.uV().O6();i=n.Oit()?t.Em()/n.Fit():1}return e.Em()*r/(h.Fit()*i)}return e.Em()*r/h.Fit()},!1),fn("offsetScaleY",(t,s,i,e)=>{if(0!==s){const h=t.Wm()<0?-1:1;if("relative"===e.Mht.FZ()&&t.QB()&&t.a6()){const r=i.kit()*h*s;isNaN(e.pnt)&&cn.get("offsetHeight").ont(t,1,i,e,!0),t.bnt(r/e.pnt,!0)}else t.bnt(i.kit()*h*s)}},(t,s,i)=>{t.Am(i.kit()*s)},(e,h)=>{const r=e.Wm()<0?-1:1;if(e.a6()){let t=e.WB(),s=h.rit().Ast(t.uV()),i=NaN;if(s)i=t.Wm()/s.kit();else{const n=t.uV().O6();i=n.Oit()?t.Wm()/n.kit():1}return e.Wm()*r/(h.kit()*i)}return e.Wm()*r/h.kit()},!1);class dn extends un.hit.Lht{constructor(t){super(t),this._G=0,this.xnt=0,this.Gnt=0,this._nt=0,this.Mnt=NaN,this.pnt=NaN,this.Fnt=void 0,this.Ont=void 0,this.Dnt=null,this.knt=null,this.Lnt=null,this.Nnt=null,this.Bnt=null,this.Wnt=null,this.Vnt=null,this.jnt=null,this.Hnt=!1,this.Unt=!1,un.oh(this.Mht.rit(),un.znt)?this.dnt=new un.hit.Lht.Jnt(this):this.dnt=new un.hit.Lht.qnt(this);const s=this.Mht.Est();switch(this.Mht.mit()){case"world-instance":{const i=cn.get(s);this.Dnt=i.lnt,this.knt=i.ont,this.Lnt=i.ant,this.Hnt=i.round,this.Unt=i.unt,this.Bnt=i.init,this.Nnt=i.reset;break}case"audio":this.Wnt=t.Trt,this.Vnt=t.Grt,this.jnt=t._rt,this.Hnt=!!t.Irt(),this.Unt=!1}}Sr(){this.dnt=null,this.Dnt=null,this.knt=null,this.Lnt=null,this.Nnt=null,this.Bnt=null,this.Wnt=null,this.Vnt=null,this.jnt=null,super.Sr()}aht(){return this.dnt.aht()}Xnt(){return this._G}Ynt(t){this._G=t}rst(){this.Nnt&&this.Nnt(this)}zK(){const t=this.dnt.zK();if("number"==typeof t&&(this._G=t),this.Bnt){const s=this.jD(),i=this.Mht.Get();this.Bnt(this,s,i)}}fst(){const t=this.dnt.fst();"number"==typeof t&&(this._G=t)}nht(){return this.Ort()}iet(){const t=this.Drt();return t!==this.nht()}eet(){return!un.Te(this.Ert)&&this.Ert!==this.nht()}Iht(){this.dnt.Iht()}Fht(t,s,i,e,h,r,n,o){return this.dnt.Fht(t,s,i,e,h,r,n,o)}Oht(){this.dnt.Oht()}Ort(){const t=this.Urt(),s=this.Hrt(),i=this.jD(),e=this.Mht.Get(),h=this.Mht.mit();switch(h){case"behavior":return t.$rt(s);case"effect":return t[s];case"instance-variable":return t.rnt(s);case"plugin":return t.$rt(s);case"world-instance":return this.Dnt(i,e);case"audio":return this.Wnt.call(this.Ttt(),i,e)}}snt(t,s,i){const e=this.Urt(),h=this.Hrt(),r=this.jD(),n=this.Mht.Get(),o=this.Mht.mit();switch(o){case"behavior":e.$nt(h,t);break;case"effect":e[h]+=t;break;case"instance-variable":e.Knt(h,t);break;case"plugin":e.$nt(h,t,this.Ttt().Xht());break;case"world-instance":this.knt(r,t,n,this);break;case"audio":this.Vnt.call(this.Ttt(),r,t,n,this)}}Znt(t,s,i){let e=this.Mht.Ett();if("discrete"!==(e="default"===e?"continuous":e)||s){if("discrete"===e&&i){const l=this.Mht.rit(),u=l.ER(),c=this.Mht.Qet(u);if(!c)return}const h=this.Urt(),r=this.Hrt(),n=this.jD(),o=this.Mht.Get(),a=this.Mht.mit();switch(a){case"behavior":h.int(r,t);break;case"effect":h[r]=t;break;case"instance-variable":h.nnt(r,t);break;case"plugin":h.int(r,t,this.Ttt().Xht());break;case"world-instance":this.Lnt(n,t,o);break;case"audio":this.jnt.call(this.Ttt(),n,t,o)}}}Qnt(t,s,i,e,h,r,n,o){this.dnt.Qnt(t,s,i,e,h,r,n,o)}tot(t,s,i,e,h){let r=(t="angle"===this.Mht.Het()?un.Cr(t):t).toString(),n=r.split(".")[1]||"",o=n.length,a=this.Ort(),l;switch(l=0===o?this.Hnt?Math.round(a):this.Unt?"angle"===this.Mht.Het()?un.Ir(Math.round(un.Cr(a))):Number(un.toFixed(a,2)):a:this.Hnt?Number(un.toFixed(a,o)):(this.Unt,a),this.snt(l-a,s,i),this.Mht.Est()){case"offsetWidth":case"offsetScaleX":{const u=this.jD(),c=u.Em(),f=Number(un.toFixed(c,2));u.ag(f-c);break}case"offsetHeight":case"offsetScaleY":{const d=this.jD(),p=d.Wm(),m=Number(un.toFixed(p,2));d.bnt(m-p);break}}}Fq(){return Object.assign(super.Fq(),{v:this._G,a:this.xnt,fod:this.Gnt,bod:this._nt,of:this.Mnt,sf:this.pnt,armorf:this.Fnt,armandf:this.Ont})}Oq(t){t&&(super.Oq(t),this._G=t.v,this.xnt=t.a,this.Gnt=un.ve(t.fod)?t.fod:0,this._nt=un.ve(t.bod)?t.bod:0,this.Mnt=un.ve(t.of)?t.of:NaN,this.pnt=un.ve(t.sf)?t.sf:NaN,this.Fnt=un.ve(t.armorf)?t.armorf:void 0,this.Ont=un.ve(t.armandf)?t.armandf:void 0)}}un.hit.Lht.Nht=dn}{const pn=self.Bs;class mn{constructor(t){this.sot=!1,this.$ht=0,this.iot=!1,this.eot=!1,this.Zst=t;for(let t=0,s=this.Zst.length;t<s;t++)this.Zst[t].xet(this)}Pst(){return this.Zst}hot(){this.sot=!0}rot(){return this.sot}bht(t){this.$ht=t}Bet(){return this.$ht}not(t){this.iot=t}oot(){return this.iot}gst(t){this.eot=t}aot(){return this.eot}b0(){this.sot=!1,this.$ht=0,this.iot=!1,this.eot=!1}}class gn{constructor(t){this.lot=t}Sr(){this.lot=null}NT(){return 0}zK(){const t=this.lot;return this.lot.gV(),t.Wrt(()=>t.krt(()=>0,()=>t.Ttt().vht()),()=>{})}fst(){}aht(){this.lot;const t=this.lot.gV();switch(t.FZ()){case"relative":return!1;case"absolute":return!0}}Iht(){this.lot;const t=this.lot.gV(),s=t.Est();switch(t.FZ()){case"relative":break;case"absolute":if(t.Met()){const i=t.Tet();i.b0()}else{const e=t.rit(),h=t.uV(),r=t.Ttt(),n=e.xtt(h,r,s,t);n&&1<n.length&&new mn(n)}}}Fht(t,s,i,e,h,r,n,o){const a=this.lot,l=this.lot.gV();switch(l.FZ()){case"relative":{const u=a.Xnt();a.snt(s-u,i,e),r&&this.Qnt(t,i,e,h,u,s),a.Ynt(s);break}case"absolute":{const c=l.rit(),f=l.Get();if(l.uV(),l.Ttt(),l.Met()){const d=l.Tet(),p=d.Pst(),m=a.Jrt(p,!0),g=a.qrt(c,c.ER(),m);if(g){const y=f.wst(),w=g.time-y;if(0==w)d.gst(n),d.not(o),d.hot(),d.bht(d.Bet()+s);else{if(w<0)return;const S=l.lht(w);d.gst(n),d.not(o),d.hot(),d.bht(d.Bet()+(s-S))}}}else a.Znt(s,o,n);break}}}Oht(){const t=this.lot,s=this.lot.gV();switch(s.FZ()){case"relative":break;case"absolute":if(s.Met()){const i=s.Tet();i.rot()&&t.Znt(i.Bet(),i.oot(),i.aot())}}}Qnt(t,s,i,e,h,r){const n=this.lot;e||(s&&t===s.ER()?n.tot(s.VZ(),s,i):i&&t===i.ER()?n.tot(i.VZ(),s,i):r-h==0&&n.tot(s.VZ(),s,i))}}pn.hit.Lht.qnt=gn}{const yn=self.Bs;class wn{constructor(t){this.lot=t}Sr(){this.lot=null}NT(){return 1}zK(){const t=this.lot;return t.Rrt(!0),this.jrt(t.Drt())}fst(){const t=this.lot;if(t.Drt()!==t.Brt())return t.Rrt(!0),this.jrt(t.Brt())}aht(){return!1}Iht(){}Fht(t,s,i,e,h,r,n,o){const a=this.lot,l=a.Xnt();switch(a.gV().FZ()){case"relative":a.snt(s-l,i,e),r&&this.Qnt(t,i,e,h,l,s,!1,n);break;case"absolute":a.Frt()?(a.Rrt(!1),a.snt(l,i,e)):0===t&&0===a.gV().rit().JW()?a.Znt(s,!0,!1):(a.snt(s-l,i,e),r&&this.Qnt(t,i,e,h,l,s,this.uot(),n))}a.Ynt(s)}Oht(){}jrt(t){const s=this.lot;return t-s.nht()}uot(){let t=this.lot,s=t.jD().uV(),i=t.gV().ck(),e=i.Mtt(),h=0;for(const r of e.SK())0===r.NT()?r.TK(s)&&h++:1===r.NT()&&r.uV()===s&&h++;return h<=1}Qnt(t,s,i,e,h,r,n,o){const a=this.lot;e?s&&t===s.ER()?a.tot(s.VZ(),s,i,n,o):i&&t===i.ER()?a.tot(i.VZ(),s,i,n,o):i||a.tot(s.VZ(),s,i,n,o):s&&t===s.ER()?a.tot(s.VZ(),s,i,n,o):i&&t===i.ER()?a.tot(i.VZ(),s,i,n,o):r-h==0&&a.tot(s.VZ(),s,i,n,o)}}yn.hit.Lht.Jnt=wn}{const Sn=self.Bs,bn=self._c;Sn.hit.Cht=class{constructor(){}static hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.$rt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.rnt(t);break;case"plugin":h=s.$rt(t)}return h!==i}static Kc(r,n,o,a){if(!o){let t=a._et(),s=a.eit();return(t=s.Lrt(t)).VZ()}let l=a.Ett();if("default"===l&&(l="continuous"),"discrete"===(l="combo"===a.Het()?"discrete":l))return n.VZ();if("continuous"===l||"step"===l){const u=a.rit().Ctt();if("step"===l&&0!==u){const g=1/u;r=Math.floor(r*g)/g}const c=n.VZ(),f=o.VZ(),d=n.BZ("cubic-bezier"),p=o.BZ("cubic-bezier"),m=d&&d.cot()&&p&&p.dot();if(!m&&c===f)return c;let t=n.ER(),s=o.ER(),i=("step"===l&&0!==u&&(r=Sn.Gr(r,t,s)),Sn.normalize(r,t,s)),e=n.Sht(),h;if(m){const y=s-t;h=bn.Vc(e)(y*i,0,1,y),h=bn.Vc("cubicbezier")(h,c,c+d.UZ(),f+p.qZ(),f)}else h=bn.Vc(e)((s-t)*i,c,f-c,s-t);return"integer"===a.Het()?Math.floor(h):h}}}}{const vn=self.Bs;vn.hit.Pht=class{constructor(){}static hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.$rt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.rnt(t);break;case"plugin":h=s.$rt(t)}return h!==i}static Kc(t,s,i,e){if(!i){let t=e._et(),s=e.eit();return(t=s.Lrt(t)).VZ()}let h=e.Ett();if("default"===h&&(h="continuous"),"discrete"===(h="combo"===e.Het()?"discrete":h))return s.VZ();if("continuous"===h||"step"===h){const r=e.rit().Ctt();if("step"===h&&0!==r){const c=1/r;t=Math.floor(t*c)/c}const n=s.ER(),o=i.ER(),a=s.VZ(),l=i.VZ(),u=("step"===h&&0!==r&&(t=vn.Gr(t,n,o)),s.BZ("angle"));if(!u){if(a===l)return a;const f=vn.normalize(t,n,o),d=self._c.Vc(s.Sht());return vn.Dr(a,l,d(f,0,1,1))}{const p=u.pot();if(a===l&&0===p)return a;const m=vn.normalize(t,n,o),g=self._c.Vc(s.Sht()),y=g(m,0,1,1);switch(u.mot()){case"closest":return vn.Dr(a,l,y,p);case"clockwise":return vn.kr(a,l,y,p);case"anti-clockwise":return vn.Lr(a,l,y,p)}}}}}}{const Mn=self.Bs;Mn.hit.Eht=class{constructor(){}static hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.$rt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.rnt(t);break;case"plugin":h=s.$rt(t)}return!!h!=!!i}static Kc(t,s,i,e){if(i)return s.VZ()?1:0;{let t=e._et(),s=e.eit();return(t=s.Lrt(t)).VZ()?1:0}}}}{const xn=self.Bs,Tn=[0,0,0],Gn=[0,0,0],_n=[0,0,0];xn.hit.Aht=class{constructor(){}static hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.$rt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.rnt(t);break;case"plugin":h=s.$rt(t)}return Array.isArray(i)?(Tn[0]=i[0],Tn[1]=i[1],Tn[2]=i[2]):(_n.Na(i),Tn[0]=Math.floor(255*_n.da()),Tn[1]=Math.floor(255*_n.pa()),Tn[2]=Math.floor(255*_n.ya())),Array.isArray(h)?(Gn[0]=h[0],Gn[1]=h[1],Gn[2]=h[2]):(_n.Na(h),Gn[0]=Math.floor(255*_n.da()),Gn[1]=Math.floor(255*_n.pa()),Gn[2]=Math.floor(255*_n.ya())),Tn[0]!==Gn[0]||Tn[1]!==Gn[1]||Tn[2]!==Gn[2]}static Kc(t,s,i,e){if(!i){let t=e._et(),s=e.eit(),i=(t=s.Lrt(t)).VZ();return Tn[0]=i[0],Tn[1]=i[1],Tn[2]=i[2],Tn}let h=e.Ett();if("discrete"===(h="default"===h?"continuous":h)){const r=s.VZ();return Tn[0]=r[0],Tn[1]=r[1],Tn[2]=r[2],Tn}if("continuous"===h||"step"===h){const n=e.rit().Ctt();if("step"===h&&0!==n){const M=1/n;t=Math.floor(t*M)/M}const o=s.ER(),a=i.ER(),l=s.VZ(),u=i.VZ(),c=("step"===h&&0!==n&&(t=xn.Gr(t,o,a)),xn.normalize(t,o,a)),f=s.Sht(),d=l[0],p=l[1],m=l[2],g=u[0],y=u[1],w=u[2],S=self._c.Vc(f),b=a-o,v=b*c;return Tn[0]=d===g?d:S(v,d,g-d,b),Tn[1]=p===y?p:S(v,p,y-p,b),Tn[2]=m===w?m:S(v,m,w-m,b),Tn}}}}{const In=self.Bs;In.hit.Rht=class{constructor(){}static hnt(t,s,i,e){let h;switch(e){case"behavior":h=s.$rt(t);break;case"effect":h=s[t];break;case"instance-variable":h=s.rnt(t);break;case"plugin":h=s.$rt(t)}return h!==i}static Kc(t,s,i,e){if(i)return s.VZ();{let t=e._et(),s=e.eit();return(t=s.Lrt(t)).VZ()}}}}{const Cn=self.Bs;Cn.I$=class{constructor(){this.got=new Map}Sr(){for(const t of this.got.values())t.Sr();this.got.clear(),this.got=null}xc(t){const s=new Cn.yot(t),i=s.uf();this.got.set(i,s)}ni(t){return this.got.get(t)}mtt(){return 0}static wot(t,s,i,e){if(s)for(const h of s)Cn.I$.Sot("create",h,t,i,e)}static bot(t,s,i,e){if(s)for(const h of s)Cn.I$.Sot("create-including-disabled",h,t,i,e)}static vot(i,t,s,e){i.length?t.forEach((t,s)=>{i[s].Oq(t)}):t.forEach(t=>{Cn.I$.Sot("load",t,i,s,e)})}static Sot(t,s,i,e,h){let r;if("function"==typeof e)switch(t){case"load":r=new e(null,h);break;case"create":case"create-including-disabled":r=new e(s,h)}else if("object"==typeof e){const n=e.prop,o=s[n],a=e.map.get(o);switch(t){case"load":r=new a(null,h);break;case"create":case"create-including-disabled":r=new a(s,h)}}switch(t){case"load":r.Oq(s),i.push(r);break;case"create":if("function"==typeof r.Pit&&!r.Pit())return r.Sr();i.push(r);break;case"create-including-disabled":i.push(r)}}}}{const Pn=self.Bs;Pn.yot=class{constructor(t){this.Mr="",this.mst=NaN,this.Mot=0,this.xot="default",this.Tot="default",this.Got=!1,this._ot=!1,this.Iot=1,this.Bst=null,this.Cot="",this.Pot=!1,this.Eot=!0,t&&(this.Mr=t[0],this.mst=t[1],this.Mot=t[2],this.xot=t[3],this.Tot=t[4],this.Got=!!t[6],this._ot=!!t[7],this.Iot=t[8],this.Cot=t[9],this.Pot=!!t[10],this.Eot=!!t[11],this.Bst=new Pn.Aot(t[5],this))}Sr(){this.Bst.Sr(),this.Bst=null}btt(){return this.Bst||(this.Bst=new Pn.Aot(null,this)),this.Bst}uf(){return this.Mr}n8(t){this.Mr=t}JW(){return this.mst}zW(t){this.mst=t}Ctt(){return this.Mot}Ptt(t){this.Mot=t}Ett(){return this.xot}Att(t){this.xot=t}FZ(){return this.Tot}Rtt(t){this.Tot=t}XW(){return this.Got}qW(t){this.Got=t}$W(){return this._ot}YW(t){this._ot=t}rW(){return this.Iot}Ftt(t){this.Iot=t}iZ(){return this.Cot}Ott(){return this.Pot}Dtt(){return this.Eot}Fq(){return{trackDataJson:this.Bst.Fq(),name:this.Mr,totalTime:this.mst,step:this.Mot,interpolationMode:this.xot,resultMode:this.Tot,loop:this.Got,pingPong:this._ot,repeatCount:this.Iot,startOnLayout:this.Cot,transformWithSceneGraph:!!this.Pot,useSystemTimescale:this.Eot}}Oq(t){t&&(this.btt().Oq(t.trackDataJson),this.Mr=t.name,this.mst=t.totalTime,this.Mot=t.step,this.xot=t.interpolationMode,this.Tot=t.resultMode,this.Got=t.loop,this._ot=t.pingPong,this.Iot=t.repeatCount,this.Cot=t.startOnLayout,this.Pot=!!t.transformWithSceneGraph,this.Eot=!!t.useSystemTimescale)}}}{const En=self.Bs;class An{constructor(t,s){this.Bst=s,this.Rot=null,this.Fot=null,this.Wst=NaN,this.Vst=NaN,this.xot="default",this.Tot="default",this.zu=!1,this.Oot=null,this.det=null,this.vf="",this.Dot=null,this.kot=0,this.Lot=this.Bst.Itt().JW(),this.If=0,this.Mr="",t&&(t[0]&&(this.Rot=t[0],this.Wst=t[0][2],this.Vst=t[0][1]),this.xot=t[1],this.Tot=t[2],this.zu=!!t[3],t[6]&&(this.vf=t[6]),t[7]&&(this.Dot=t[7],this.kot=t[7][0],this.Lot=t[7][1]),t[8]&&(this.Fot=t[8]),t[8]&&(this.Fot=t[8]),t[9]&&(this.If=t[9]),t[10]&&(this.Mr=t[10]),this.Oot=new En.Not(t[4],this),this.det=new En.Bot(t[5],this))}Sr(){this.Rot=null,this.Bst=null,this.Oot&&(this.Oot.Sr(),this.Oot=null),this.det&&(this.det.Sr(),this.det=null),this.Dot=null}btt(){return this.Bst}Kst(){return this.Oot||(this.Oot=new En.Not(null,this)),this.Oot}eit(){return this.det||(this.det=new En.Bot(null,this)),this.det}Wot(){return this.Rot}lit(){return this.Vst}Ait(t){this.Vst=t}ait(){return this.Wst}_it(t){this.Wst=t}Ett(){return this.xot}Att(t){this.xot=t}FZ(){return this.Tot}Rtt(t){this.Tot=t}Pit(){return this.zu}Eit(t){this.zu=!!t}pV(){return this.vf}wst(){return this.kot}Iit(){return this.Lot}Cit(t){this.Lot=t}Fit(){return this.Fot[0]}Rit(t){this.Fot||(this.Fot=[]),this.Fot[0]=t}kit(){return this.Fot||(this.Fot=[]),this.Fot[1]}Dit(t){this.Fot||(this.Fot=[]),this.Fot[1]=t}NT(){return this.If}uf(){return this.Mr}Fq(){return{keyframeDataJson:this.Oot.Fq(),propertyTrackDataJson:this.det.Fq(),instanceData:this.Rot,additionalInstanceData:this.Fot,instanceUid:this.Wst,objectClassIndex:this.Vst,interpolationMode:this.xot,resultMode:this.Tot,enabled:this.zu,id:this.vf,nestedData:this.Dot,type:this.If,name:this.Mr}}Oq(t){t&&(this.Rot=t.instanceData,this.Wst=t.instanceUid,this.Vst=t.objectClassIndex,this.xot=t.interpolationMode,this.Tot=t.resultMode,this.zu=t.enabled,this.vf=t.id,this.If=t.type||0,this.Mr=t.name||"",this.Lot=this.Bst.Itt().JW(),t.nestedData&&(this.Dot=t.nestedData,this.kot=this.Dot[0],this.Lot=this.Dot[1]),t.additionalInstanceData&&(this.Fot=t.additionalInstanceData),this.Kst().Oq(t.keyframeDataJson),this.eit().Oq(t.propertyTrackDataJson))}}En.Aot=class{constructor(t,s){this.NQ=s,this.Vot=[],En.I$.wot(this.Vot,t,An,this)}Sr(){this.NQ=null;for(const t of this.Vot)t.Sr();En.Un(this.Vot),this.Vot=null}Itt(){return this.NQ}vst(){const t=new An(null,this);return this.Vot.push(t),t}jot(t){return t.Kst().$st()[0]}Hot(t){const s=t.Kst().$st();return s.at(-1)}Jit(s,t){const i=t.Kst().$st(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.ER()===s)return h}}Uot(s,t){const i=t.Kst().$st(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.ER()>s)return h}}zot(s,t){const i=t.Kst().$st(),e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.ER()>=s)return h}}zit(s,t){const i=t.Kst().$st();for(let t=i.length-1;0<=t;t--){const e=i[t];if(e.ER()<=s)return e}}*Stt(){for(const t of this.Vot)yield t}Fq(){return{trackDataItemsJson:this.Vot.map(t=>t.Fq())}}Oq(t){t&&En.I$.vot(this.Vot,t.trackDataItemsJson,An,this)}}}{const Rn=self.Bs;class Fn{constructor(t,s){this.det=s,this.Jot="",this.qot=null,this.Crt=null,this.If=null,this.Xot=NaN,this.Yot=NaN,this.xot="default",this.Tot="default",this.zu=!1,this.$ot=null,this.Kot=!0,t&&(this.Jot=t[0][0],this.qot=t[0].slice(1),this.Crt=t[1],this.If=t[2],this.Xot=t[3],this.Yot=t[4],this.xot=t[5],this.Tot=t[6],this.zu=!!t[7],this.$ot=new Rn.Zot(t[8],this),this.Kot=t[9])}Sr(){this.$ot.Sr(),this.$ot=null,this.det=null,this.qot=null}eit(){return this.det}wet(){return this.$ot||(this.$ot=new Rn.Zot(null,this)),this.$ot}mit(){return this.Jot}Oet(t){this.Jot=t}ket(){return this.qot}Net(t){this.qot=t}Wet(){return this.Crt}jet(t){this.Crt=t}NT(){return this.If}SetType(t){this.If=t}qet(){return this.Xot}Xet(t){this.Xot=t}Yet(){return this.Yot}$et(t){this.Yot=t}Ett(){return this.xot}Att(t){this.xot=t}FZ(){return this.Tot}Rtt(t){this.Tot=t}Pit(){return this.zu}Eit(t){this.zu=!!t}Zet(){return!!this.Kot}Fq(){return{propertyKeyframeDataJson:this.$ot.Fq(),sourceAdapterId:this.Jot,sourceAdapterArguments:this.qot,property:this.Crt,type:this.If,min:this.Xot,max:this.Yot,interpolationMode:this.xot,resultMode:this.Tot,enabled:this.zu,canHavePropertyKeyframes:this.Kot}}Oq(t){t&&(this.Jot=t.sourceAdapterId,this.qot=t.sourceAdapterArguments,this.Crt=t.property,this.If=t.type,this.Xot=t.min,this.Yot=t.max,this.xot=t.interpolationMode,this.Tot=t.resultMode,this.zu=t.enabled,this.Kot=t.canHavePropertyKeyframes,this.wet().Oq(t.propertyKeyframeDataJson))}}Rn.Bot=class{constructor(t,s){this.Nst=s,this.Qot=[],Rn.I$.wot(this.Qot,t,Fn,this)}Sr(){this.Nst=null;for(const t of this.Qot)t.Sr();Rn.Un(this.Qot),this.Qot=null}Git(){return this.Nst}$it(){const t=new Fn(null,this);return this.Qot.push(t),t}Jet(t){const s=t.wet();return s.yet()[0]}Lrt(t){const s=t.wet(),i=s.yet();return i.at(-1)}Qet(s,t){const i=t.wet(),e=i.yet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.ER()===s)return r}}iht(s,t){const i=t.wet(),e=i.yet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.ER()>s)return r}}eht(s,t){const i=t.wet(),e=i.yet(),h=e.length;for(let t=0;t<h;t++){const r=e[t];if(r.ER()>=s)return r}}tht(s,t){const i=t.wet(),e=i.yet();for(let t=e.length-1;0<=t;t--){const h=e[t];if(h.ER()<=s)return h}}*iit(){for(const t of this.Qot)yield t}Fq(){return{propertyTrackDataItemsJson:this.Qot.map(t=>t.Fq())}}Oq(t){t&&Rn.I$.vot(this.Qot,t.propertyTrackDataItemsJson,Fn,this)}}}{const On=self.Bs;class Dn{constructor(t,s){if(this.Oot=s,this.P3=-1,this.tat="noease",this.sat=!1,this.utt=null,this.iat=null,t){this.P3=t[0],this.tat=t[1],this.sat=!!t[2];const i=t[3];this.utt=i?i.split(" "):[],this.iat=new Set(this.utt.map(t=>t.toLowerCase())),this.eat=null}}Sr(){this.Oot=null,On.Un(this.utt),this.utt=null,this.iat.clear(),this.iat=null,this.eat=null}Kst(){return this.Oot}GZ(){return this.eat}hat(t){this.eat=t}ER(){return this.P3}UW(t){this.P3=t,this.Oot.rat()}Sht(){return this.tat}lV(t){this.tat=t}Pit(){return this.sat}Eit(t){this.sat=!!t}QW(){return this.utt}Ntt(t){this.utt=t?t.split(" "):[],this.iat=new Set(this.utt.map(t=>t.toLowerCase()))}nat(){return this.iat}Ost(t){return this.iat.has(t.toLowerCase())}Fq(){return{time:this.P3,ease:this.tat,enable:this.sat,tags:this.utt}}Oq(t){t&&(this.P3=t.time,this.tat=t.ease,this.sat=t.enable,this.utt=t.tags,this.iat=new Set(this.utt.map(t=>t.toLowerCase())))}}On.Not=class{constructor(t,s){this.Nst=s,this.Yst=[],On.I$.wot(this.Yst,t,Dn,this),this.rat()}Sr(){this.Nst=null;for(const t of this.Yst)t.Sr();On.Un(this.Yst),this.Yst=null}rat(){this.Yst.sort((t,s)=>t.ER()-s.ER());for(let t=0;t<this.Yst.length;t++){const s=this.Yst[t];s.hat(this.Yst[t+1])}}Git(){return this.Nst}oat(){return this.Yst.length}$st(){return this.Yst}Xit(){const t=new Dn(null,this);return this.Yst.push(t),this.rat(),t}Zit(t){for(const s of this.Yst)if(t(s)){const i=this.Yst.indexOf(s);-1!==i&&(s.Sr(),this.Yst.splice(i,1))}this.aat(),this.rat()}aat(){this.Yst.sort((t,s)=>t.ER()-s.ER())}let(t){return this.Yst.indexOf(t)}uet(t){return this.Yst[t]}*lat(){for(const t of this.Yst)yield t}*uat(){for(let t=this.Yst.length-1;0<=t;t--)yield this.Yst[t]}Fq(){return{keyframeDataItemsJson:this.Yst.map(t=>t.Fq())}}Oq(t){t&&(On.I$.vot(this.Yst,t.keyframeDataItemsJson,Dn,this),this.rat())}}}{const kn=self.Bs;class Ln{constructor(t,s){this.$ot=s,this.$ht=null,this.cat=null,this.If="",this.P3=NaN,this.tat="noease",this.sat=!1,this.fat=null,this.dat=void 0,this.pat="line",t&&(this.$ht=t[0][0],this.cat=t[0][1],this.If=t[0][2],this.P3=t[1],this.tat=t[2],this.sat=!!t[3],this.pat=t[5],this.fat=null,t[4]&&(this.fat=new kn.mat(t[4],this)),this.eat=null,this.gat=null)}Sr(){this.$ot=null,this.fat&&(this.fat.Sr(),this.fat=null),this.eat=null,this.gat=null}yat(){return this.fat}hat(t){this.eat=t}GZ(){return this.eat}wat(t){this.gat=t}_Z(){return this.gat}Bet(){return this.$ht}bht(t){"color"===this.If&&kn.ve(t)?(this.$ht[0]=kn.Qr(t),this.$ht[1]=kn.tn(t),this.$ht[2]=kn.sn(t)):this.$ht=t}Nrt(){return this.cat}ght(t){"color"===this.If&&kn.ve(t)?(this.cat[0]=kn.Qr(t),this.cat[1]=kn.tn(t),this.cat[2]=kn.sn(t)):this.cat=t}VZ(){const t=this.$ot._et().FZ();return"relative"===t?this.Bet():"absolute"===t?this.Nrt():void 0}NT(){return this.If}SetType(t){this.If=t}ER(){return this.P3}UW(t){this.P3=t,this.$ot.Sat()}Sht(){return this.tat}lV(t){this.tat=t}Pit(){return this.sat}Eit(t){this.sat=!!t}IZ(){return this.pat}BZ(s){if(this.fat){if(!this.dat&&null!==this.dat){const i=this.fat.bat();if(i){const e=i.length;for(let t=0;t<e;t++){const h=i[t];if(h.pV()===s)return this.dat=h,this.dat}}this.dat=null}return this.dat}}Fq(){const t=this.fat;return{addonDataJson:t&&t.Fq(),value:this.$ht,aValue:this.cat,type:this.If,time:this.P3,ease:this.tat,enable:this.sat}}Oq(t){t&&(t.addonDataJson&&this.fat._SetFromJson(t.addonDataJson),this.$ht=t.value,this.cat=t.aValue,this.If=t.type,this.P3=t.time,this.tat=t.ease,this.sat=t.enable)}}kn.Zot=class{constructor(t,s){this.fet=s,this.met=[],this.vat=[],kn.I$.wot(this.met,t,Ln,this),kn.I$.bot(this.vat,t,Ln,this),this.Sat()}Sr(){this.fet=null;for(const t of this.met)t.Sr();kn.Un(this.met),this.met=null;for(const s of this.vat)s.Sr();kn.Un(this.vat),this.vat=null}Sat(){let s=this.met;s.sort((t,s)=>t.ER()-s.ER());for(let t=0;t<s.length;t++){const i=s[t];t+1<s.length&&i.hat(s[t+1]),0<=t-1&&i.wat(s[t-1])}(s=this.vat).sort((t,s)=>t.ER()-s.ER());for(let t=0;t<s.length;t++){const e=s[t];t+1<s.length&&e.hat(s[t+1]),0<=t-1&&e.wat(s[t-1])}}pht(){const t=new Ln(null,this);return this.met.push(t),this.Sat(),t}mht(t){for(const s of this.met)if(t(s)){const i=this.met.indexOf(s);-1!==i&&(s.Sr(),this.met.splice(i,1))}this.Mat(),this.Sat()}Mat(){this.met.sort((t,s)=>t.ER()-s.ER())}_et(){return this.fet}xat(){return this.met.length}Lrt(){return this.met[this.met.length-1]}yet(){return this.met}TZ(){return this.vat}*Tat(){for(const t of this.met)yield t}*Gat(){for(let t=this.met.length-1;0<=t;t--)yield this.met[t]}Fq(){const t=this.met,s=this.vat;return{propertyKeyframeDataItemsJson:t.map(t=>t.Fq()),propertyKeyframeDataItemsIncludingDisabledJson:s.map(t=>t.Fq())}}Oq(t){t&&(kn.I$.vot(this.met,t.propertyKeyframeDataItemsJson,Ln,this),kn.I$.vot(this.vat,t.propertyKeyframeDataItemsIncludingDisabledJson,Ln,this),this.Sat())}}}{const Nn=self.Bs;class Bn{constructor(t,s){this.fat=s,this.vf=t[0],this._at=t[1]}Sr(){this.fat=null,this._at=null}yat(){return this.fat}pV(){return this.vf}Fq(){return{id:this.vf,data:this._at}}Oq(t){t&&(this.vf=t.id,this._at=t.data)}}class Wn extends Bn{constructor(t,s){super(t,s),this.Iat=this._at[0],this.Cat=!!this._at[1],this.Pat=this._at[2],this.Eat=!!this._at[3]}Sr(){super.Sr()}UZ(){return this.Iat}cot(){return this.Cat}qZ(){return this.Pat}dot(){return this.Eat}Fq(){return Object.assign(super.Fq(),{startAnchor:this.Iat,startEnable:!!this.Cat,endAnchor:this.Pat,endEnable:!!this.Eat})}Oq(t){t&&(super.Oq(t),this.Iat=t.startAnchor,this.Cat=!!t.startEnable,this.Pat=t.endAnchor,this.Eat=!!t.endEnable)}}class Vn extends Bn{constructor(t,s){super(t,s),this.Aat=this._at[0],this.Rat=this._at[1]}Sr(){super.Sr()}mot(){return this.Aat}pot(){return this.Rat}Fq(){return Object.assign(super.Fq(),{direction:this.Aat,revolutions:this.Rat})}Oq(t){t&&(super.Oq(t),this.Aat=t.direction,this.Rat=t.revolutions)}}Nn.mat=class{constructor(t,s){this.Fat=s,this.Oat=[],Nn.I$.wot(this.Oat,t,{prop:0,map:new Map([["cubic-bezier",Wn],["angle",Vn]])},this)}Sr(){this.Fat=null;for(const t of this.Oat)t.Sr();Nn.Un(this.Oat),this.Oat=null}Dat(){return this.Fat}bat(){return this.Oat}*kat(){for(const t of this.Oat)yield t}Fq(){return{addonDataItemsJson:this.Oat.map(t=>t.Fq())}}Oq(t){t&&Nn.I$.vot(this.Oat,t.addonDataItemsJson,{prop:"id",map:new Map([["cubic-bezier",Wn],["angle",Vn]])},this)}}}{let m=self.Bs,i=0;m.znt=class extends m.nK{constructor(t,s){super("tween-"+i++,t,s),this.vf="",this.Lat=!1,this.Nat="start-value",this.jst=null,this.Bat=null,this.Wat=null,this.cet=null,this.Vat=null}ytt(t){const s=m.wr(m.Event,"tweenstatereleased");s.jat=this,t.dispatchEvent(s)}NT(){return 1}HQ(){for(const t of this.NQ.btt().Stt())this.BQ.push(m.Hat.kx(this,t));this.cet=this.BQ[0]}bst(){const t=this.NQ.btt().vst(),s=m.Hat.kx(this,t);return this.BQ.push(s),this.Uat(),s}Uat(){this.cet=this.BQ[0]}gV(t){return this.cet.Pst()[0]}Uet(t){this.zat=t}uV(){const t=this.vZ();if(t&&t.length){const s=t[0];if(this.cet=s){const i=s.uV();return s.oit()?i:void 0}}}Jat(t){this.Wat||(this.Wat=[]),this.Wat.push(t)}qat(t){this.Bat||(this.Bat=[]),this.Bat.push(t)}Xat(t){if(this.Wat){const s=this.Wat.indexOf(t);-1!==s&&this.Wat.splice(s,1)}}Yat(t){if(this.Bat){const s=this.Bat.indexOf(t);-1!==s&&this.Bat.splice(s,1)}}$at(t,s){for(const i of this.BQ)for(const e of i.Zst)if(e.Est()===s){const h=e.eit(),r=e._et(),n=h.Jet(r);n.bht(t),n.ght(t)}}Kat(t){for(const s of this.BQ)for(const i of s.Zst)if(i.Est()===t)return i}Zat(t){for(const s of t){const i=this.Kat(s);this.$at(i.nht(),s)}if(this.Ltt()){const e=this.JW()-this.ER();this.zW(e);for(const h of this.BQ)h.Cit(e);this.Ztt(0)}else{const r=this.ER();this.zW(r);for(const n of this.BQ)n.Cit(r);this.Ztt(r)}this.Qtt()}Qat(t,s){const i=this.Kat(s),e=i.eit(),h=i._et(),r=e.Lrt(h);r.UW(this.JW()),r.bht(t),r.ght(t)}tlt(t){this.vf=t}pV(){return this.vf}slt(t){this.Nat=t}ilt(){return this.Nat}dV(t){this.Lat=t}fV(){return this.Lat}jtt(){if(this.Wat)for(const t of this.Wat)t(this);if(!this.ZK())for(const s of this.BQ)s.eet()}Htt(){this.ett=this.Sf.Utt()}tZ(){if(!this.ott&&(this.ott=!0,this.Bat))for(const t of this.Bat)t(this)}UW(t){this.elt(),super.UW(t)}hst(t){(t=m.ve(t)?t:this.JW())<0?this.JQ=0:t>=this.JW()?this.JQ=this.JW():this.JQ=t,this.cet.rst()}zK(t){if(!this.QK()&&"current-state"===this.ilt())for(const s of this.BQ)s.iet();super.zK(t)}VW(t=!1){if(super.VW(t),!this.ZK())for(const s of this.BQ)s.tet()}b0(t=!0,s=!1){this.elt(),super.b0(t,s)}elt(){for(const t of this.BQ){const s=t=>{const s=t.ER(),i=this.JW();return 0!==s&&s!==i};t.Kit(s),t.Qit(s)}}U$(){if(!this.BW()){const t=this.uV();if(t&&t.YN().qz())return!1;this.LQ.VK(this),this.ust()}return!0}YK(h,t,s){if(this.jst||(this.jst=this.uV()),!this.jst||this.jst.mj())this.VW(!0),this.Htt();else{const i=this.jst.sD();if(0!==(h=-1!==i?s*i:h)||0!==this.ltt){this.ltt=h;const r=this.JQ+this.qQ,n=h*this.XQ,o=r+n,a=this.NQ.mst;o<0?(this.JQ=0,this.qQ=-o):a<=o?(this.JQ=a,this.qQ=this.JQ-o):(this.JQ=o,this.qQ=0);let t=!1,s=!1,i=this.XW(),e=this.$W();i||e?i&&!e?0<this.XQ?this.JQ>=a&&(this.hst(0),this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),s=!0):this.JQ<=0&&(this.hst(a),this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),s=!0):!i&&e?0<this.XQ?this.JQ>=a&&(this.Ztt(a),this.KW(-1*this.ZW()),s=!0,1===this.YQ?this.$Q<this.rW()?(this.$Q++,this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt),this.YQ=0):(this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt),t=!0):0===this.YQ&&(this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt),this.YQ=1)):this.JQ<=0&&(this.Ztt(0),this.KW(-1*this.ZW()),s=!0,1===this.YQ?this.$Q<this.rW()?(this.$Q++,this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt),this.YQ=0):(t=!0,this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt)):0===this.YQ&&(this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt),this.YQ=1)):i&&e&&(0<this.XQ?this.JQ>=a&&(this.Ztt(a),this.KW(-1*this.ZW()),s=!0,0===this.YQ&&(this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt)),1===this.YQ&&(this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt)),this.YQ++,this.YQ=m.wrap(this.YQ,0,2)):this.JQ<=0&&(this.Ztt(0),this.KW(-1*this.ZW()),s=!0,0===this.YQ&&(this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt)),1===this.YQ&&(this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),this.hlt(m.olt.nlt.MY.ult),this.hlt(m.olt.nlt.MY.clt)),this.YQ++,this.YQ=m.wrap(this.YQ,0,2))):0<this.XQ?this.JQ>=a&&(this.$Q<this.rW()?(this.$Q++,this.hst(0),this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),s=!0):(this.Ztt(a),t=!0)):this.JQ<=0&&(this.$Q<this.rW()?(this.$Q++,this.hst(a),this.hlt(m.olt.nlt.MY.rlt),this.hlt(m.olt.nlt.MY.llt),s=!0):(this.Ztt(0),t=!0)),t?(this.cet.gst(),this.VW(!0),this.Htt()):(this.cet.Kc(this.JQ,!0,!1,s,this.att,!1),this.att&&(this.att=!1))}}}hlt(t){const s=this.uV(),i=s.flt(m.olt.nlt);i.dlt(this),this.Sf.O4(t,s,i.U6()),i.plt()}Fq(){const t=super.Fq(),s=this.Itt();return Object.assign(t,{tweenDataItemJson:s.Fq(),id:this.vf,destroyInstanceOnComplete:this.Lat,initialValueMode:this.Nat})}Oq(t){if(t){const s=this.Itt();s.Oq(t.tweenDataItemJson),super.Oq(t),this.vf=t.id,this.Lat=t.destroyInstanceOnComplete,this.Nat=t.initialValueMode,this.Uat()}}static IsPlaying(t){return t.IsPlaying()}static iV(t){return t.iV()}static mlt(t){return!!t.$W()&&0===t.ktt()}static glt(t){return!!t.$W()&&1===t.ktt()}static ylt(t){const s=t.runtime.Mtt(),i=new m.yot;if(t.json){i.Oq(t.json.tweenDataItemJson);const e=new m.znt(i,s);return e.Oq(t.json),e}{const h=new m.znt(i,s),r=(m.Je(t.wlt)||(t.wlt=[t.wlt]),h.tlt(t.id),h.Ntt(t.tags),h.slt(t.initialValueMode),h.dV(t.Slt),h.qW(t.loop),h.YW(t.pingPong),h.zW(t.time),h.Ptt(0),h.Att("default"),h.Rtt(t.wlt[0].resultMode),h.Ftt(t.repeatCount),h.bst()),n=(r._it(t.z6.a4()),r.Att("default"),r.Rtt(t.wlt[0].resultMode),r.Eit(!0),r.Ait(t.z6.YN().KF()),t.z6.O6()),o=n.Oit()?n.Fit():t.z6.jD().Em(),a=n.Oit()?n.kit():t.z6.jD().Wm(),l=(r.Rit(o),r.Dit(a),r.qit()),u=(l.UW(0),l.lV("noease"),l.Eit(!0),l.Ntt(""),r.qit());u.UW(t.time),u.lV("noease"),u.Eit(!0),u.Ntt("");for(const c of t.wlt){const f=r.Yit(),d=(f.Oet(c.blt),f.Let(c.vlt),f.Vet(c.property),f.Uet(c.type),f.Xet(NaN),f.$et(NaN),f.Att("default"),f.Rtt(c.resultMode),f.Eit(!0),f.dht()),p=(d.SetType(c.valueType),d.UW(0),d.lV(c.ease),d.Eit(!0),d.bht(c.Mlt),d.ght(c.Mlt),f.dht());p.SetType(c.valueType),p.UW(t.time),p.lV(c.ease),p.Eit(!0),p.bht(c.xlt),p.ght(c.xlt),f.Ttt()}return h}}static _it(t,s){if(!isNaN(s))for(const i of t.vZ())i._it(s)}Tlt(t,s){return this.Vat||(this.Vat=m.wr(self.rV,this,t,s)),this.Vat}}}{const jn=self.Bs;jn.Hat=class extends jn.vtt{constructor(t,s){super(t,s),this.Glt=null,this._lt=null}static kx(t,s){return jn.wr(jn.Hat,t,s)}Ilt(){1===this.Zst.length?this.Glt=this.Zst[0]:(this.Glt=this.Zst[0],this._lt=this.Zst[1])}Qst(){for(const t of this.Nst.eit().iit())this.Zst.push(jn.Clt.kx(this,t));this.Ilt()}Yit(){const t=this.Nst.eit(),s=t.$it(),i=jn.Clt.kx(this,s);return this.Zst.push(i),this.Ilt(),i}zK(){if(this.nit(),this.oit()||!this._tt()){const t=this.rit(),s=t.Ltt(),i=s?0:this.Iit();for(const h of this.Zst)h.zK(i),0===this.tit&&1===h.Bit()&&(this.tit=1),0===this.iK&&1===h.JK()&&(this.iK=1);this.sit=0;const e=this.Zst.some(t=>t.pst());e&&(this.sit=1),this.Xst=this.Wit(i),this.zst=!1,this.Jst=!1,this.Kc(i)}}yst(){}Kc(t,s=0,i=!1,e=!1,h,r=!1,n=!1){if(this.jst||this.uV(),this.jst){const o=!this.jst.mj();return o&&(!r||!this.YN().qz())&&((this._lt?(this.Glt.Kc(t,i,e,n),this._lt):this.Glt).Kc(t,i,e,n),void(0!==this.Glt.Bit()&&(this.Hst||(this.Hst=this.jst.jD()),this.Hst)&&this.Hst.cB()))}}Sst(){}Oq(t){super.Oq(t),this.Ilt()}}}{const Hn=self.Bs;Hn.Clt=class extends Hn.hit{constructor(t,s){super(t,s),this.Plt=!1}static kx(t,s){return Hn.wr(Hn.Clt,t,s)}Kc(t,s=!1,i=!1,e=!1){let h,r;if(this.Plt)h=this.met[0],r=this.met[1];else{if(s)h=this.det.tht(t,this.fet);else{if(this.bet){const n=this.rit(),o=this.bet.GZ(),a=this.bet.ER(),l=o?o.ER():n.JW();(t<=a||l<=t)&&(this.bet=this.det.tht(t,this.fet))}else this.bet=this.det.tht(t,this.fet);h=this.bet}r=h.GZ()}this.pet.Kc(t,h,r,s,i,e)}dht(){const t=this.fet.wet(),s=t.pht();return this.bet=null,this.Plt=this.Ket().length<=2,s}Qit(t){this.bet=null;const s=this.fet.wet();s.mht(t),this.Plt=this.Ket().length<=2}Fq(){return{sourceAdapterJson:this.Ttt().Fq(),basic:this.Plt}}Oq(t){t&&(this.Ttt().Oq(t.sourceAdapterJson),this.Plt=t.basic)}}}{const Un=self.Bs,zn=self._c;Un.Zc=class extends Un.gr{constructor(t,s=!0){super(),this.Mr=t[0],this.Elt=t[2],this.Alt=[];for(const i of t[1]){const e=Un.Rlt.kx(this,i);this.Alt.push(e)}for(let t=0;t<this.Alt.length;t++){const h=this.Alt[t],r=this.Alt[t+1],n=this.Alt[t-1];h.hat(r),h.wat(n)}this.Flt=new Map,this.Olt=new Map,this.Dlt(),s&&zn.tf(this.Mr,(t,s,i,e)=>this.Kc(t,s,i,e),null,{transition:this})}static kx(t){return Un.wr(Un.Zc,t)}Sr(){for(const t of this.Alt)t.Sr();Un.Un(this.Alt),this.Alt=null,this.Flt.clear(),this.Flt=null,this.Olt.clear(),this.Olt=null}Qc(t){this.Elt=!!t}klt(t){const s=this.Olt.get(t);if(s)return s;for(const i of this.Alt)if(i.Llt()===t)return this.Olt.set(t,i),i}Nlt(s){for(let t=this.Alt.length-1;0<=t;t--){const i=this.Alt[t],e=i.Llt();if(e<=s){let t=i;if(e<s)return t;if(e===s){for(;t;){const h=t._Z();if(!h)break;if(h.Llt()!==t.Llt())break;t=h}return t}}}}Kc(t,s,i,e){let h=t/e;if(this.Elt){const w=this.klt(0),S=this.klt(1),b=s+(s+i)*w.Blt(),v=(s+i)*S.Blt(),M=v-b;return 0===e?b+M:zn.ef(t,b,M,e)}0===e&&(h=1);let r=this.Nlt(h),n=r.GZ();if(!n){const x=r._Z(),T=r;r=x,n=T}const o=n.Llt()-r.Llt(),a=Un.Tr(h,r.Llt(),n.Llt(),0,o);if(r.Wlt()||0==o){const G=s+(s+i)*r.Blt(),_=(s+i)*n.Blt(),I=_-G;return 0==o?1===a?G+I:G:zn.ef(a,G,I,o)}let l=r.Llt(),u=r.Blt(),c=r.Llt()+r.Vlt(),f=r.Blt()+r.jlt(),d=n.Llt()+n.Hlt(),p=n.Blt()+n.Ult(),m=n.Llt(),g=n.Blt(),y=zn.Vc("spline")(a,l,u,c,f,d,p,m,g,this.Flt.get(r));return(1-(y+=r.Blt()))*s+y*(s+i)}Dlt(){this.Flt.clear();for(let t=0;t<this.Alt.length-1;t++){const s=this.Alt[t];if(s.cot()){const i=s,e=this.Alt[t+1];if(e.dot()){const h=i.Llt(),r=i.Llt()+i.Vlt(),n=e.Llt()+e.Hlt(),o=e.Llt();this.Flt.set(i,zn.hf(h,r,n,o))}}}}}}{const Jn=self.Bs;Jn.Rlt=class extends Jn.gr{constructor(t,s){super(),this.zlt=t,this.Jlt=s[0],this.qlt=s[1],this.Xlt=s[2],this.Ylt=s[3],this.$lt=s[4],this.Klt=s[5],this.Cat=s[6],this.Eat=s[7],this.Zlt=s[8],this.eat=null,this.gat=null}Sr(){this.zlt=null}static kx(t,s){return Jn.wr(Jn.Rlt,t,s)}hat(t){this.eat=t}GZ(){return this.eat}wat(t){this.gat=t}_Z(){return this.gat}Llt(){return this.Jlt}Blt(){return this.qlt}Vlt(){return this.Xlt}jlt(){return this.Ylt}Hlt(){return this.$lt}Ult(){return this.Klt}cot(){return this.Cat}dot(){return this.Eat}Wlt(){return"linear"===this.Zlt}Qlt(){return"cubic"===this.Zlt}}}{const qn=self.Bs;qn.tut=class extends qn.gr{constructor(t){super(),this.Sf=t,this.sut=[]}Sr(){for(const t of this.sut)t.Sr();qn.Un(this.sut),this.sut=null}kx(t){this.sut.push(qn.Zc.kx(t))}}}{const Xn=self.Bs;Xn.iut=class extends Xn.gr{constructor(t){super(),this.Sf=t,this.eut=null,this.hut=null,this.q$=t=>this.X$(t.z6)}Sr(){if(this.eK(),this.eut){for(const t of this.eut.values())t.clear();this.eut.clear()}this.eut=null,this.Sf=null}kx(t){if(this.eut||(this.eut=new Map),t){const s=t[0][16],i=s[0],e=t[1],h=(this.eut.has(e)||this.eut.set(e,new Map),this.eut.get(e));h.set(i,t)}}hK(){const t=this.Sf.Qf();t&&t.addEventListener("instancedestroy",this.q$)}eK(){const t=this.Sf.Qf();t&&t.removeEventListener("instancedestroy",this.q$)}rut(){return!!this.eut&&0!==this.eut.size}nut(t,s){let i;if(i=t instanceof Xn.out?t.KF():t,this.eut.has(i)){const e=this.eut.get(i).get(s);return e?JSON.parse(JSON.stringify(e)):void 0}}aut(t,s){this.hut||(this.hut=new WeakMap),this.hut.has(t)||this.hut.set(t,s)}lut(t){if(!this.hut)return"";const s=this.hut.get(t);return s||""}X$(t){this.hut&&this.hut.has(t)&&this.hut.delete(t)}}}{const Yn=self.Bs;Yn.uut=class{constructor(t){this.Sf=t,this.cut=new Yn.fut}Sr(){this.cut.Sr(),this.cut=null,this.Sf=null}ck(){return this.Sf}kx(t){this.cut.xc(t)}dut(t){return this.cut.ni(t)}mut(){return this.cut.mut()}}}{const $n=self.Bs;$n.gut=class{constructor(t,s,i,e,h,r,n){this.Sf=h.ck(),this.yut=h,this.wut=t,this.Sut=i,this.but=e,this.by=s,this.C$=r,this.vut=n??r.uV().a4(),this.Mut(),this.xut=this.Gut?.Tut()??-1,this._ut=[],this.Iut=null,this.Cut=NaN,this.Put=null,this.Eut=null,this.Aut=null,this.Rut="",this.Fut=null,this.Out="",this.Dut="",this.kut=0,this.Lut=!1,this.stt=!1}Sr(){this.stt||($n.Un(this._ut),this._ut=null,this.Sf=null,this.yut=null,this.but=null,this.C$=null,this.Iut=null,this.Cut=NaN,this.Put&&this.Put.clear(),this.Put=null,this.Eut=null,this.Aut=null,this.Rut="",this.Fut=null,this.Out="",this.Dut="",this.stt=!0)}br(){return this.stt}Nut(){return this.yut}ck(){return this.Sf}uf(){return this.wut}But(){return this.but}NW(){return this.by}yK(){return this.C$||(this.C$=this.Sf.LD(this.vut).O6()),this.C$}Wut(){return this.Vut(this.xut)}jut(){const t=this.Wut();return t?t.NW():""}Hut(){const t=this.Wut();return t?t.QW():[]}Uut(t){const s=this.Hut();if(!s)return!1;if(!s.length)return!1;const i=$n.gut.Btt(t);return!(!i||!i.length)&&i.every($n.gut.Vtt,s)}zut(t,s){const i=this.Hut();if(!i)return!1;if(!i.length)return!1;const e=$n.gut.Btt(t);return!(!e||!e.length)&&e.every(t=>$n.gut.Jut.call(i,t,s))}static Vtt(t){return""===t?1===this.length&&""===this[0]:this.map(t=>t.trim().toLowerCase()).includes(t.trim().toLowerCase())}static Btt(t){return t.trim().split(" ")}static Jut(s,i){return""===s?1===this.length&&""===this[0]:this.some(t=>$n.compare(t.trim(),i,s.trim()))}qut(t){const s=this.Wut();if(s){if($n.ve(t)){const i=s.Xut(),e=i?i[t]:void 0;if($n.ve(e))return this.Vut(e)}if("string"==typeof t)for(const h of s.Xut()){const r=this.Vut(h);if(r.HW(t))return this.Vut(r.Tut())}}}Yut(t){const s=this.qut(t);return s?s.NW():""}$ut(t){const s=this.qut(t);return s?s.QW():""}Kut(t){const s=this.Wut();if(!s)return-1;const i=s.Xut();if(!i)return-1;const e=this.qut(t);return e?i.indexOf(e.Tut()):-1}Zut(){const t=this.Wut();if(!t)return 0;const s=t.Xut();return s?s.length:0}Vut(t){return this.but.Vut(t)}b0(){const t=this.Qut();t.tct(!0)}tct(t){if(this.sct()){for(const[s,i]of this.sct().entries())i.tct(!1);this.sct().clear()}if(this.Put=null,this.Iut=null,this.ict=null,this.Eut=null,this.Rut="",this.Fut=null,this.Out="",this.Dut="",this._ut=[],t){this.yut.ect(this);const e=this.Gut.Tut();e!==this.xut&&this.hct(e)}else this.xut=this.Gut.Tut()}rct(){const t=this.but.Vut(this.xut);return t?t.oct().nct():0}lct(t){const s=this.uct(t);return s?s.uf():""}cct(t){let s;return $n.ve(t)&&(s=this.uct(t)),"string"==typeof t&&(s=this.fct(t)),"number"!=typeof t&&"string"!=typeof t&&console.warn("[Flowcharts] unexpected argument type in GetCurrentNodeOutputValueAt expression"),s?s.Bet():""}dct(t){let s;if($n.ve(t)&&(s=this.uct(t)),s="string"==typeof t?this.fct(t):s){const i=s.pct();$n.ve(i)&&(this._ut.push(this.xut),this.hct(i))}}mct(t){const s=this.but.gct(t);if(s){const i=this.but.Vut(s.Tut());i&&(this._ut.push(this.xut),this.hct(i.Tut()))}}yct(){const t=this._ut.pop();$n.ve(t)?this.hct(t):this.wct()&&(this.yut.ect(this.wct(),!0,!1,!1),this.wct().hct(this.Sct()),this.Qut().bct(this.wct()))}vct(t){const s=this.Wut();if(s){s.Tut();const i=this.qut(t);i&&(this._ut.push(this.xut),this.hct(i.Tut()))}}Mct(s){if($n.ve(s)){const t=this.but.Vut(this.xut),i=t.oct().xct();return!!i[s]}if("string"==typeof s){const e=this.but.Vut(this.xut),h=e.oct().xct();for(let t=0;t<h.length;t++)if(h[t].uf()===s)return!0}return!1}Tct(){this.Lut=!0}Gct(){return 0<this.kut}_ct(){this.kut++}Ict(){this.kut--,0===this.kut&&this.Lut&&this.yut.Cct(this)}hct(t){const i=this.xut,s=this.yK().uV();if(this._ct(),this.yut.Pct(this),this.Sf.O4($n.TY.Flowchart.MY.OnBeforeAnyNodeChange,s),this.Sf.O4($n.TY.Flowchart.MY.OnBeforeTaggedNodeChange,s),this.Sf.O4($n.TY.Flowchart.MY.OnBeforeAnyNodeChangeInFlowchart,s),this.Sf.O4($n.TY.Flowchart.MY.OnBeforeTaggedNodeChangeInFlowchart,s),this.xut=t,this.Sf.O4($n.TY.Flowchart.MY.OnAnyNodeChange,s),this.Sf.O4($n.TY.Flowchart.MY.OnTaggedNodeChange,s),this.Sf.O4($n.TY.Flowchart.MY.OnAnyNodeChangeInFlowchart,s),this.Sf.O4($n.TY.Flowchart.MY.OnTaggedNodeChangeInFlowchart,s),this.yut.Ect(),this.Ict(),!this.br()){const e=this.Vut(this.xut);if("reference"===e.NT()){const h=e.Act();if(this.Rct(e)){this._ut.pop();const r=this.Fct(e),n=(this.yut.ect(r,!0,!0,!1),r.Oct(this,i),this.Qut());n.bct(r)}else{const o=e.Dct();if(h){this._ut.pop();let s=e.kct();if(s){let t=this.yut.Lct(s);for(;t;)s=$n.pp(s),t=this.yut.Lct(s)}else{s=h+"-ref";let t=this.yut.Lct(s);for(;t;)s=$n.pp(s),t=this.yut.Lct(s)}const a=this.yut.Nct(h,o,s,this.C$,!0),l=(a.Oct(this,i),this.Bct(e,a),this.Qut());a.Wct(l),l.bct(a)}}}}}uct(t){const s=this.but.Vut(this.xut);if(!s)return null;const i=s.oct().xct();if(!i)return null;const e=i[t];return e||null}fct(t){const s=this.but.Vut(this.xut);if(!s)return null;const i=s.oct().Vct(t);return i||null}Mut(s){if("number"==typeof s){let t=this.Vut(s);t=t||this.but.jct(),this.Gut=t}else{let t=this.but.gct(this.Sut);t=t||this.but.jct(),this.Gut=t}}Fq(){return this.Lut?null:{flowchartName:this.wut,flowchartTag:this.by,startNodeTag:this.Sut,currentNodeId:this.xut,previousNodeIds:this._ut,pluginUID:this.C$.uV().a4(),reference:{previousFlowchartTag:this.wct()?this.wct().NW():"",previousStartNodeId:$n.ve(this.Sct())?this.Sct():NaN,referencesJson:this.Hct(),currentReferenceFlowchartTag:this.Uct()?this.Uct().NW():"",rootFlowchartTag:this.Qut()?this.Qut().NW():""}}}Hct(){if(!this.zct())return null;const t=[];for(const[s,i]of this.sct().entries())t.push({flowchartElementId:s.Tut(),flowchartStateTag:i.NW()});return t.length?t:null}Oq(t){if(t){if(this.wut=t.flowchartName,this.by=t.flowchartTag,this.Sut=t.startNodeTag,this.xut=t.currentNodeId,this._ut=t.previousNodeIds,this.vut=t.pluginUID,t.hasOwnProperty("reference")){const s=t.reference;this.Rut=s.previousFlowchartTag,this.Cut=s.previousStartNodeId,this.Fut=s.referencesJson,this.Out=s.currentReferenceFlowchartTag,this.Dut=s.rootFlowchartTag}this.Mut()}}wct(){return"string"==typeof this.Rut&&this.Rut&&(this.Iut=this.yut.Lct(this.Rut),this.Rut=""),this.Iut}Sct(){return this.Cut}Oct(t,s){this.Iut=t,this.Cut=s}Uct(){return"string"==typeof this.Out&&this.Out&&(this.Eut=this.yut.Lct(this.Out),this.Out=""),this.Eut}bct(t){this.Eut=t,this.Eut===this&&(this.Eut=null)}Qut(){return"string"==typeof this.Dut&&this.Dut&&(this.Aut=this.yut.Lct(this.Dut),this.Dut=""),this.Aut||this}Wct(t){this.Aut=t}zct(){return this.Jct(),!!this.Put}Rct(t){return this.Jct(),this.Put&&this.Put.has(t)}Jct(){if(this.Fut){this.Put&&this.Put.clear(),this.Put||(this.Put=new Map);for(const t of this.Fut){const s=this.yut.Lct(t.flowchartStateTag),i=s.Vut(t.flowchartElementId);this.Put.set(i,s)}this.Fut=null}}sct(){return this.Jct(),this.Put}Fct(t){return this.Jct(),this.Put.get(t)}Bct(t,s){this.Put||(this.Put=new Map),this.Put.set(t,s)}}}{const Kn=self.Bs;Kn.qct=class{constructor(t){this.Sf=t,this.Xct=new Map,this.Yct=null,this.$ct=[],this.Kct=()=>this.Z$(),this.Zct=null}Sr(){Kn.Un(this.$ct),this.$ct=null,this.Xct.clear(),this.Xct=null,this.Yct=null,this.Sf=null,this.Zct=null}ck(){return this.Sf}Nct(t,s,i,e,h,r){const n=this.Sf.Nut().dut(t);if(n){if(!this.Xct.has(i)){const o=new Kn.gut(t,i,s,n,this,e,r);return this.Xct.set(i,o),h&&this.ect(o,!0),o}{const a=this.Xct.get(i);a&&this.Cct(a)}}else console.warn(`[Flowcharts] no flowchart found with name '${t}'`)}Cct(t){if(t.Tct(),!t.Gct()){const s=t.NW();this.Xct.delete(s),t.Sr(),this.Yct===t&&(this.Yct=null)}}Qct(t){t.b0()}Lct(t){return this.Xct.get(t)}Pct(t){this.$ct.push(t)}Ect(){this.$ct.pop()}ect(t,s=!1,i=!1,e=!0){if(e){const h=t.Uct();t=h||t}t!==this.Yct&&(this.tft(),this.ift(t,s,i))}eft(t){return"string"==typeof t?this.Lct(t):this.$ct.length?this.$ct[this.$ct.length-1]:this.Yct}tft(){if(this.Yct&&!this.Yct.br()){const t=this.Yct.yK().uV();this.Yct._ct(),this.Pct(this.Yct),this.Sf.O4(Kn.TY.Flowchart.MY.OnBeforeFlowchartChange,t),this.Ect(),this.Yct.Ict()}}ift(t,s=!1,i=!1){if(this.Yct=t,this.Yct&&!this.Yct.br()){const e=this.Yct.yK().uV();this.Yct._ct(),this.Pct(this.Yct),this.Sf.O4(Kn.TY.Flowchart.MY.OnFlowchartChange,e),!0!==i&&"number"!=typeof i||this.Yct.Mut(i),s&&(this.Sf.O4(Kn.TY.Flowchart.MY.OnAnyNodeChange,e),this.Sf.O4(Kn.TY.Flowchart.MY.OnTaggedNodeChange,e)),this.Ect(),this.Yct.Ict()}}Fq(){return{flowchartJsonObjects:[...this.Xct.values()].map(t=>t.Fq()),currentFlowchartTag:this.Yct?this.Yct.NW():null}}Oq(t){if(t){this.Zct=t;const s=new Map;for(const i of this.Zct.flowchartJsonObjects){const e=i.flowchartTag;if(this.Xct.has(e)){const h=this.Xct.get(e);h.Oq(i),s.set(e,h)}else{const r=this.Nct(i.flowchartName,i.startNodeTag,i.flowchartTag,null,!1,i.pluginUID);r.Oq(i),s.set(i.flowchartTag,r)}}for(const[n,o]of this.Xct.entries())s.has(n)||o.Sr();this.Xct.clear(),this.Xct=s,this.Sf.pY()?this.Sf.Qf().addEventListener("afterload",this.Kct):this.Z$()}}Z$(){this.Sf.Qf().removeEventListener("afterload",this.Kct);const t=this.Xct.get(this.Zct.currentFlowchartTag);t&&this.ect(t,!0),this.Zct=null}}}{const Zn=self.Bs;Zn.fut=class{constructor(){this.hft=new Map}Sr(){for(const t of this.hft.values())t.Sr();this.hft.clear(),this.hft=null}xc(t){const s=new Zn.rft(t),i=s.uf();this.hft.set(i,s)}ni(t){return this.hft.get(t)}mut(){return!!this.hft.size}static nft(t,s,i,e){if(s)for(const h of s){const r=new i(h,e);t.push(r)}}}}{const Qn=self.Bs;Qn.rft=class{constructor(t){this.Mr=t[0],this.oft=new Qn.aft(t[1],this)}Sr(){this.oft.Sr(),this.oft=null}lft(){return this.oft}Vut(t){return this.oft.Vut(t)}gct(t){return this.oft.gct(t)}jct(){return this.oft.jct()}uf(){return this.Mr}}}{const to=self.Bs;class so{constructor(t,s){this.oft=s,this.If=t[7],this.uft=t[0],this.by=t[1],this.by?this.utt=this.by.trim().split(" ").map(t=>t.trim()):this.utt=[],this.cft=t[2],this.fft=null,this.dft=null,"dictionary"===this.If&&(this.fft=t[3],this.dft=t[4]),this.pft=t[6],this.mft=null,this.gft=null,this.yft=null,"reference"===this.If&&(this.mft=t[8],this.gft=t[9],this.yft=t[10]),this.wft=new to.Sft(t[5],this)}Sr(){this.oft=null}lft(){return this.oft}oct(){return this.wft}Tut(){return this.uft}NW(){return this.by}QW(){return this.utt}HW(t){if(!this.utt)return!1;if(!this.utt.length)return!1;const s=to.gut.Btt(t);return!(!s||!s.length)&&s.every(to.gut.Vtt,this.utt)}bft(){return this.pft}Xut(){return this.cft}vft(){return this.fft}Mft(){return this.dft}NT(){return this.If}Act(){return this.mft}Dct(){return this.gft}kct(){return this.yft}}to.aft=class{constructor(t,s){this.but=s,this.xft=[],this.Tft=new Map,this.Gft=new Map,this._ft=null,to.fut.nft(this.xft,t,so,this);for(const i of this.xft){const e=i.Tut(),h=i.NW(),r=i.QW(),n=i.bft();if(this.Tft.set(e,i),h)for(const a of r)this.Gft.has(a)||this.Gft.set(a,new Set),this.Gft.get(a).add(i);n&&(this._ft=i);const o=i.oct();for(const l of o.Ift()){const u=l.Tut();this.Tft.set(u,l)}}}Sr(){this.but=null;for(const t of this.xft)t.Sr();to.Un(this.xft),this.xft=null}But(){return this.but}Vut(t){return this.Tft.get(t)}gct(t){if(!t||!t.length)return null;const i=[];for(const e of t.trim().split(" ")){let t=this.Gft.get(e.trim())??new Set;if(0===t.size)return null;i.push(t)}const s=i.reduce((t,s)=>s.size<t.size?s:t);return[...s].filter(s=>i.every(t=>t.has(s)))[0]}jct(){return this._ft}*Cft(){for(const t of this.xft)yield t}}}{const io=self.Bs;class eo{constructor(t,s){this.wft=s,this.uft=t[0],this.Mr=t[1],this.$ht=t[2],this.Pft=t[3]}Sr(){this.wft=null}oct(){return this.wft}Tut(){return this.uft}uf(){return this.Mr}Bet(){return this.$ht}pct(){return this.Pft}}io.Sft=class{constructor(t,s){this.Eft=s,this.Aft=[],this.Rft=new Map,io.fut.nft(this.Aft,t,eo,this);for(const i of this.Aft)this.Rft.set(i.uf(),i)}Sr(){this.Eft=null;for(const t of this.Aft)t.Sr();io.Un(this.Aft),this.Aft=null}Fft(){return this.Eft}nct(){return this.Aft.length}xct(){return this.Aft}Vct(t){return this.Rft.get(t)}*Ift(){for(const t of this.Aft)yield t}}}{const ho=self.Bs;ho.Oft=class extends ho.gr{constructor(t){super(),this.Dft=t,this.kft=[],this.kft.push(ho.wr(ho.Lft,this)),this.Sy=0,this.Nft=this.kft[0]}Sr(){for(const t of this.kft)t.Sr();ho.Un(this.kft),this.Nft=null,this.Dft=null}YN(){return this.Dft}e5(){return this.Nft}Bft(){return this.kft[this.Sy-1]}ac(){this.e5().ac()}Wft(){const t=this.kft,s=++this.Sy;if(s===t.length){const i=ho.wr(ho.Lft,this);t.push(i),this.Nft=i}else{const e=t[s];e.b0(),this.Nft=e}}Vft(){const t=this.kft,s=++this.Sy,i=(s===t.length&&t.push(ho.wr(ho.Lft,this)),t[s]);i.B0(t[s-1]),this.Nft=i}m8(){this.Nft=this.kft[--this.Sy]}jft(i){const e=this.kft;for(let t=0,s=e.length;t<s;++t)e[t].jft(i)}}}{const ro=self.Bs;ro.Lft=class extends ro.gr{constructor(t){super(),this.kft=t,this.Dft=this.kft.YN(),this.Hft=this.Dft.ck().VO(),this.Uft=!0,this.i7=[],this.zft=[]}Sr(){this.Jft(),this.kft=null,this.Dft=null,this.Hft=null}Jft(){ro.Un(this.i7),ro.Un(this.zft)}YN(){return this.Dft}qft(){return this.Uft}Xft(){return this.Uft?!!this.Dft.r5():!!this.i7.length}i5(){return this.Uft?this.Dft.i5():this.i7}Yft(){return!!this.zft.length}$ft(){return this.zft}Kft(){const t=this.i5();return t.length?t:this.zft}b0(){this.Uft=!0,ro.Un(this.zft)}ac(){this.Uft=!0}B0(t){t.qft()?this.b0():(this.Uft=!1,ro.Xn(this.i7,t.i7),ro.Un(this.zft))}Zft(t){this.i7.push(t)}Qft(t){this.zft.push(t)}t0t(t){this.Uft=!!t}s0t(){return this.i7}i0t(){return this.zft}e0t(t){this.Uft=!1,ro.Un(this.i7),this.i7.push(t)}h0t(t){this.Uft=!1,ro.Xn(this.i7,t)}r0t(t){this.Uft=!1,ro.Un(this.i7);for(const s of t)this.i7.push(s)}n0t(t,s){for(const i of s)t.has(i)||this.zft.push(i)}o0t(t){for(const s of t)this.i7.push(s);ro.Qn(this.zft,t)}a0t(){ro.Un(this.zft)}l0t(t){if(t)if(this.Hft.e8().OO().u0t()){this.qft()&&(ro.Un(this.i7),ro.Xn(this.zft,t.YN().i5()),this.Uft=!1);const s=this.zft.indexOf(t);-1!==s&&(this.i7.push(this.zft[s]),this.zft.splice(s,1))}else this.e0t(t)}jft(t){ro.Qn(this.i7,t),ro.Qn(this.zft,t)}}}{const no=self.Bs;no.c0t=class extends no.gr{constructor(t){super(),this.f0t=t,this.Sf=this.f0t.ck(),this.kft=[],this.kft.push(no.wr(no.d0t,this,null)),this.Sy=0,this.p0t=[]}Sr(){for(const t of this.kft)t.Sr();no.Un(this.kft),no.Un(this.p0t),this.f0t=null,this.Sf=null}CO(){return this.f0t}ck(){return this.Sf}e8(){return this.kft[this.Sy]}m0t(){return this.kft}g0t(){return this.Sy}h8(t){const s=this.kft,i=++this.Sy;if(i===s.length){const e=no.wr(no.d0t,this,t);return s.push(e),e}{const h=s[i];return h.b0(t),h}}m8(){--this.Sy}y0t(t){this.p0t.push(t)}w0t(){this.p0t.pop()}WO(){const t=this.p0t;return 0===t.length?null:t.at(-1)}}}{const oo=self.Bs;oo.d0t=class extends oo.gr{constructor(t,s){super(),this.kft=t,this.Sf=this.kft.ck(),this.S0t=s,this.b0t=0,this.v0t=0,this.M0t=!1,this.x0t=!1,this.T0t=null,this.G0t=0,this._0t=0,this.I0t=null}Sr(){this.b0(null),this.kft=null,this.Sf=null}b0(t){this.S0t=t,this.b0t=0,this.v0t=0,this.M0t=!1,this.x0t=!1,this.I0t=null}C0t(t,s){this.S0t=t,this.b0t=0,this.v0t=s}P0t(){this.b0t=0,this.v0t=0}OO(){return this.S0t}E0t(t){this.S0t=t}A0t(){return this.b0t}R0t(t){this.b0t=t}F0t(){return this.v0t}O0t(t){this.v0t=t}D0t(t){this.M0t=!!t}k0t(){return this.M0t}L0t(t){this.x0t=!!t}N0t(){return this.x0t}B0t(t){this.T0t=t}W0t(){return this.T0t}V0t(t,s){this.G0t=t,this._0t=s}jO(){return this.G0t}HO(t){this._0t=t}j0t(){return this._0t}H0t(){const t=this.S0t;return!!t.U0t()||this.b0t<t.z0t()-1&&!!t.i8().length}J0t(t){this.I0t=t}q0t(){return this.I0t}}}{const ao=self.Bs;ao.X0t=class extends ao.gr{constructor(t){super(),this.f0t=t,this.Sf=this.f0t.ck(),this.kft=[],this.Sy=-1,this.Nft=null,this.Y0t=[]}Sr(){ao.Un(this.kft),this.f0t=null,this.Sf=null}$0t(t){this.Y0t=t;const s=this.Y0t.slice(0);this.kft.push(s),this.Sy=0,this.Nft=s}CO(){return this.f0t}ck(){return this.Sf}K0t(){return this.Nft}h8(){const t=++this.Sy,s=this.kft;t===s.length?s.push(this.Y0t.slice(0)):ao.Xn(s[t],this.Y0t),this.Nft=s[t]}m8(){this.Nft=this.kft[--this.Sy]}}}{const lo=self.Bs;lo.Z0t=class extends lo.gr{constructor(t){super(),this.f0t=t,this.Sf=this.f0t.ck(),this.kft=[],this.Sy=-1}Sr(){lo.Un(this.kft),this.f0t=null,this.Sf=null}CO(){return this.f0t}ck(){return this.Sf}Q0t(){return 0<=this.Sy}K0t(){return this.kft[this.Sy]}h8(){if(++this.Sy,this.Sy===this.kft.length){const t=lo.wr(lo.tdt,this);return this.kft.push(t),t}{const s=this.kft[this.Sy];return s.b0(),s}}m8(){--this.Sy}sdt(s){const i=this.kft;for(let t=this.Sy;0<=t;--t){const e=i[t];if(e.uf()===s)return e}return null}idt(){return this.kft.slice(0,this.Sy+1)}}}{const uo=self.Bs;uo.tdt=class extends uo.gr{constructor(t){super(),this.edt=t,this.Mr="",this.Sy=0,this.hdt=!1,this.rdt=NaN}b0(){this.Mr="",this.Sy=0,this.hdt=!1,this.rdt=NaN}n8(t){this.Mr=t}uf(){return this.Mr}f8(t){this.Sy=t}KF(){return this.Sy}VW(){this.hdt=!0}p8(){return this.hdt}ndt(t){this.rdt=t}odt(){return this.rdt}}}{const co=self.Bs;co.adt=class extends co.gr{constructor(){super(),this.kft=[],this.Sy=-1}Sr(){co.Un(this.kft)}K0t(){return this.kft[this.Sy]}h8(){if(++this.Sy,this.Sy!==this.kft.length)return this.kft[this.Sy];{const t=[];return this.kft.push(t),t}}m8(){--this.Sy}}}{let t=function(t,s){return t.KF()-s.KF()},r=function(i,e){for(let t=0,s=i.length;t<s;++t)if(i[t]!==e[t])return!1;return!0};t,r;const fo=self.Bs;fo.ldt=class extends fo.gr{constructor(t){super(),this.Sf=t,this.udt=[],this.cdt=new Map,this.fdt=[],this.ddt=new Map,this.pdt=new Map,this.mdt=new Map,this.gdt=new Map,this.ydt=new Map,this.wdt=new Map,this.Sdt=0,this.bdt=[],this.vdt=[],this.Mdt=[],this.xdt=new Map,this.Tdt=new Map,this.Hft=fo.wr(fo.c0t,this),this.Gdt=fo.wr(fo.X0t,this),this.edt=fo.wr(fo.Z0t,this),this._dt=[],this.Idt=[],this.Cdt=[],this.Pdt=0,this.Edt=0,this.Adt=0,this.Rdt=[],this.Fdt=[],this.Odt=[],this.Ddt=new Map,this.kdt=new Map,self.c3_callFunction=(t,s)=>this.Ldt(t,s)}Sr(){this.kY(),this.Hft.Sr(),this.Hft=null,this.Gdt.Sr(),this.Gdt=null,fo.Un(this.Idt),fo.Un(this.Cdt),this.Sf=null,fo.Un(this.udt),this.cdt.clear()}kx(t){const s=fo.wr(fo.Ndt,this,t);this.udt.push(s),this.cdt.set(s.uf().toLowerCase(),s)}Bdt(t){this._dt.push(t)}Wdt(){for(const t of this.Tdt.values())t.Vdt();for(const s of this.xdt.values())s.Wdt();for(const i of this.Tdt.values())i.Wdt();for(const e of this.udt)e.Wdt();for(const h of this.udt)h.iY();for(const r of this._dt)r.Wdt(!1);fo.Un(this._dt),this.Gdt.$0t(this.Mdt)}ck(){return this.Sf}sY(t){return this.cdt.get(t.toLowerCase())||null}jdt(t){this.fdt.push(t),this.ddt.set(t.Hdt(),t)}Udt(t){this.pdt.set(t.mJ(),t)}zdt(t){this.mdt.set(t.mJ(),t)}Jdt(t){this.gdt.set(t.mJ(),t)}qdt(t){switch(t.Xdt()){case 0:this.xdt.set(t.Ydt().toLowerCase(),t);break;case 1:this.Tdt.set(t.Ydt().toLowerCase(),t)}}$dt(t){this.wdt.set(t.mJ(),t),(t.qz()?this.bdt:this.vdt).push(t)}Kdt(i){2<=i.length&&i.sort(t);let e=this.ydt.get(i.length);e||(e=[],this.ydt.set(i.length,e));for(let t=0,s=e.length;t<s;++t){const h=e[t];if(r(i,h))return h}return e.push(i),i}Zdt(t){return this.Mdt.push(t.Qdt()),this.Sdt++}VO(){return this.Hft}t1t(){return this.VO().e8()}OO(){return this.t1t().OO()}s1t(){const t=this.t1t(),s=t.OO();return s.i1t(t.A0t())}e1t(){const t=this.t1t(),s=t.OO();return s.h1t(t.F0t())}r1t(){return this.Gdt}r8(){return this.edt}n1t(t){const s=[];for(t=t.o1t();t;)fo.er(s,t.a1t()),t=t.o1t();return s}l1t(t){const s={};for(const i of this.n1t(t))s[i.u1t()]=i.c1t();return Object.create(Object.prototype,s)}f1t(t){return this.wdt.get(t)||null}d1t(t){return this.pdt.get(t)||null}p1t(t){return this.mdt.get(t)||null}m1t(t){return this.gdt.get(t)||null}PO(t){return this.xdt.get(t.toLowerCase())||null}g1t(t,s){let i=this.Tdt.get((t.uf()+"."+s).toLowerCase());if(i)return i;if(!t.oJ())for(const e of t.y1t())if(i=this.Tdt.get((e.uf()+"."+s).toLowerCase()))return i;return null}w1t(){return this.bdt}S1t(){return this.vdt}b1t(t){for(const s of this.bdt)s.v1t();if(t)for(const i of this.vdt)i.C2()&&i.v1t()}M1t(t){return this.ddt.get(t.toLowerCase())||null}x1t(t){const s=this.pdt.get(t);return s&&s.T1t()?s:null}G1t(){return this.fdt}_1t(){for(const t of this.fdt)t.I1t()}C1t(){for(const t of this.udt)t.P1t()}E1t(t){this.C1t(),this.Pdt++;for(const s of t.b$()){const i=s.PX();i&&(this.Sf.A1t(s),i.iI(),this.Sf.R1t())}this.Pdt--}async F1t(t){this.C1t(),this.Pdt++;for(const s of this.O1t(t))await this.Sf.D1t(s);this.Pdt--}*O1t(t){for(const s of t.b$()){const i=s.PX();i&&(this.Sf.A1t(s),yield*i.k1t(),this.Sf.R1t())}}L1t(t,s,i,e){let h=!1;if(!t.bD())return this.N1t(s,i,e);this.Edt++;for(const r of t.b$()){const n=r.PX();if(n){this.Sf.A1t(r);for(const a of n.B1t()){const l=a.L1t(s,i,e);h=h||l}const o=n.L1t(s,i,e);h=h||o,this.Sf.R1t()}}return this.Edt--,h}*W1t(t,s,i,e){let h=!1;if(!t.bD())return this.N1t(s,i,e);this.Edt++;for(const r of t.b$()){const n=r.PX();if(n){this.Sf.A1t(r);for(const a of n.B1t()){const l=yield*a.W1t(s,i,e);h=h||l}const o=yield*n.W1t(s,i,e);h=h||o,this.Sf.R1t()}}return this.Edt--,h}N1t(t,s,i){return this.Idt.push([t,s,i]),!1}V1t(t,s,i){let e=null,h=new Promise(t=>e=t);return this.Cdt.push([t,s,i,e]),h}*j1t(){if(this.Sf.H1t())throw new Error("should not be in breakpoint");const t=this.Sf.xD();for(;this.Cdt.length;){const[s,i,e,h]=this.Cdt.shift(),r=yield*this.W1t(t,s,i,e);h(r)}}async U1t(){for(const t of this.j1t())await this.Sf.D1t(t)}z1t(t,i,e,h){let r=!1,s=t.bD(),n=s.PX();if(n){this.Edt++,this.Sf.A1t(s);const o=n.B1t();for(let t=0,s=o.length;t<s;++t){const l=o[t].z1t(i,e,h);r=r||l}const a=n.z1t(i,e,h);return r=r||a,this.Sf.R1t(),this.Edt--,r}}*J1t(t,i,e,h){let r=!1,s=t.bD(),n=s.PX();if(n){this.Edt++,this.Sf.A1t(s);const o=n.B1t();for(let t=0,s=o.length;t<s;++t){const l=yield*o[t].J1t(i,e,h);r=r||l}const a=yield*n.J1t(i,e,h);return r=r||a,this.Sf.R1t(),this.Edt--,r}}q1t(){return this.Edt}X1t(){return 0<this.q1t()}Y1t(){return++this.Edt}$1t(){--this.Edt}K1t(){return 0<this.Pdt}c5(){return this.K1t()||this.X1t()}GY(t){for(const[s,i,e]of this.Idt)this.L1t(t,s,i,e);fo.Un(this.Idt)}l5(t){t?this.Adt++:this.Adt--}i4(){return 0<this.Adt}Z1t(i){for(let t=0,s=i.length;t<s;++t)i[t].Q1t().ac()}tpt(i){for(let t=0,s=i.length;t<s;++t)i[t].Q1t().Wft()}l8(i){for(let t=0,s=i.length;t<s;++t)i[t].Q1t().Vft()}c8(i){for(let t=0,s=i.length;t<s;++t)i[t].Q1t().m8()}DO(s){const i=new Set,e=this.Hft.m0t(),h=this.Hft.g0t();for(let t=0;t<=h;++t){const r=e[t].q0t();if(r)for(const n of r)s&&s.has(n)||i.add(n)}return i}spt(t){const s=new Set([...t]),i=this.DO(s);if(0<i.size){for(const e of i)e.Q1t().Wft();return[...i]}return null}ipt(){const t=fo.wr(fo.ept,this);return this.Rdt.push(t),t}hpt(){return this.Rdt}rpt(){if(this.Rdt.length){let i=this.t1t(),e=!1;this.Pdt++;for(let t=0,s=this.Rdt.length;t<s;++t){const h=this.Rdt[t];h.npt()&&h.opt(i),h.apt()&&(e=!0)}e&&(this.lpt(),i.b0(null)),this.Pdt--}}async upt(){if(this.Rdt.length){let i=this.t1t(),e=!1;this.Pdt++;for(let t=0,s=this.Rdt.length;t<s;++t){const h=this.Rdt[t];h.npt()&&await h.cpt(i),h.apt()&&(e=!0)}e&&(this.lpt(),i.b0(null)),this.Pdt--}}lpt(){const t=fo.Zn(this.Rdt,t=>t.apt());for(const s of t)s.Sr()}kY(){for(const t of this.Rdt)t.Sr();fo.Un(this.Rdt)}fpt(t){for(const s of this.Rdt)s.jft(t);for(const i of t){const e=this.kdt.get(i);if(this.kdt.delete(i),e)for(const{resolve:h}of e.dpt.values())h(!0)}}ppt(t){this.Fdt.push({promise:t,mpt:this.q1t()})}gpt(){fo.Un(this.Fdt)}ypt(){const s=this.q1t();this.Fdt=this.Fdt.filter(t=>t.mpt<=s)}wpt(){const t=Promise.all(this.Fdt.map(t=>t.promise));return this.Fdt=[],t}UO(t){const s=t.toLowerCase();this.Odt.push(s),this.Sf.O4(fo.TY.xY.MY.Spt,null),this.Odt.pop();for(const e of this.Sf.CO().hpt())e.bpt()&&e.vpt()===s&&e.Mpt();const i=this.Ddt.get(s);i&&(i.resolve(),this.Ddt.delete(s))}JO(t){const i=t.toLowerCase(),s=this.Ddt.get(i);if(s)return s.promise;{let s=null,t=new Promise(t=>s=t);return this.Ddt.set(i,{promise:t,resolve:s}),t}}xpt(){if(0===this.Odt.length)throw new Error("not in a signal");return this.Odt.at(-1)}Tpt(t){let s=this.kdt.get(t);return s||(s={Gpt:[],dpt:new Map},this.kdt.set(t,s)),s}b4(t,s){const i=this.Tpt(t),e=s.toLowerCase();i.Gpt.push(e),this.Sf.O4(t.zL().Ipt().MY._pt,t),i.Gpt.pop();for(const r of this.Sf.CO().hpt())r.Cpt()&&r.vpt()===e&&r.Ppt(t);const h=i.dpt.get(e);h&&(h.resolve(!1),i.dpt.delete(e)),0===i.Gpt.length&&0===i.dpt.size&&this.kdt.delete(t)}v4(t,s){const i=this.Tpt(t),e=s.toLowerCase(),h=i.dpt.get(e);if(h)return h.promise;{let s=null,t=new Promise(t=>s=t);return i.dpt.set(e,{promise:t,resolve:s}),t}}Ept(t){const s=this.Tpt(t);if(s&&0!==s.Gpt.length)return s.Gpt.at(-1);throw new Error("not in a signal")}Fq(){return{groups:this.Apt(),cnds:this.Rpt(),acts:this.Fpt(),vars:this.Opt(),waits:this.Dpt()}}Oq(t){this.kpt(t.groups),this.Lpt(t.cnds),this.Npt(t.acts),this.Bpt(t.vars),this.Wpt(t.waits)}Apt(){const t={};for(const s of this.G1t())t[s.mJ().toString()]=s.Vpt();return t}kpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.x1t(e);h&&h.jpt(i)}}Rpt(){const t={};for(const[s,i]of this.mdt){const e=i.Fq();e&&(t[s.toString()]=e)}return t}Lpt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.mdt)r.Oq(s.get(h)||null)}Fpt(){const t={};for(const[s,i]of this.gdt){const e=i.Fq();e&&(t[s.toString()]=e)}return t}Npt(t){const s=new Map;for(const[i,e]of Object.entries(t))s.set(parseInt(i,10),e);for(const[h,r]of this.gdt)r.Oq(s.get(h)||null)}Opt(){const t={};for(const[s,i]of this.wdt)i.Hpt()||!i.qz()&&!i.C2()||(t[s.toString()]=i.Bet());return t}Bpt(t){for(const[s,i]of Object.entries(t)){const e=parseInt(s,10),h=this.f1t(e);h&&h.bht(i)}}Dpt(){return this.Rdt.filter(t=>!t.Upt()).map(t=>t.Fq())}Wpt(t){this.kY();for(const s of t){const i=fo.ept.zpt(this,s);i&&this.Rdt.push(i)}}Jpt(){return[...this.Sf.xD().b$()].map(t=>t.PX()).filter(t=>t).map(t=>t.qpt())}Xpt(t){for(;t;){const s=t.o1t();if(s instanceof fo.Ypt)return s;t=s}return null}Ldt(t,s){Array.isArray(s)||(s=[]);const i=this.PO(t.toLowerCase());if(!i)return null;if(!i.rc())return i.EO();const e=i.$pt();if(s.length<e.length)for(s=s.slice(0);s.push(e[s.length].Qdt()),s.length<e.length;);const h=i.RO();return h.kO(h.FO(),!1,i.NO(),i.EO(),...s)}}}{const po=self.Bs;po.Ndt=class extends po.gr{constructor(t,s){super(),this.f0t=t,this.Sf=t.ck(),this.Mr=s[0],this.Kpt=[],this.Zpt=new Map,this.Qpt=new Map,this.tmt=new Map,this.smt=!1,this.imt=[],this.emt=[],this.hmt=new Set;for(const i of s[1])this.rmt(i,null,this.Kpt);this.nmt=this.Sf.s$()?{type:"sheet",name:this.Mr,omt:0,children:[]}:null}Sr(){this.f0t=null,this.Sf=null}rmt(t,s,i){switch(t[0]){case 0:case 3:this.amt(t,s,i);break;case 1:this.lmt(t,s,i);break;case 2:this.umt(t,s,i);break;case 4:this.cmt(t,s);break;case 5:this.fmt(t,s,i);break;case 6:this.dmt(t,s);break;default:throw new Error("invalid event type")}}amt(t,s,i){const e=po.pmt.kx(this,s,t);if(e.u0t()){i.push(e);const h=e.mmt();for(let t=0,s=h.length;t<s;++t)h[t].gmt()&&this.ymt(e,t)}else e.gmt()?this.ymt(e,0):i.push(e)}cmt(t,s){const i=po.Ypt.wmt(this,s,t);this.f0t.qdt(i)}dmt(t,s){const i=po.Ypt.Smt(this,s,t);this.f0t.qdt(i)}lmt(t,s,i){const e=po.bmt.kx(this,s,t);i.push(e)}umt(t,s,i){const e=po.vmt.kx(this,s,t);i.push(e)}fmt(t,s,i){const e=po.Mmt.kx(this,s,t);i.push(e)}ymt(h,r){h.u0t()||this.f0t.Bdt(h);const n=h.i1t(r),o=n.xmt(),a=n.YN();if(n.Tmt()){let t=this.Qpt.get(a),s=(t||(t=new Map,this.Qpt.set(a,t)),n.Gmt().toLowerCase()),i=t.get(o),e=(i||(i=new Map,t.set(o,i)),i.get(s));e||(e=[],i.set(s,e)),e.push([h,r])}else{let t=this.Zpt.get(a),s=(t||(t={_mt:new Map,Imt:new Map},this.Zpt.set(a,t)),n.U6()),i,e=(s?(i=t.Imt.get(s))||(i=new Map,t.Imt.set(s,i)):i=t._mt,i.get(o));e||(e=[],i.set(o,e)),e.push([h,r])}}Wdt(){const i=this.Kpt;for(let t=0,s=i.length;t<s;++t){const e=t<s-1&&i[t+1]instanceof po.pmt&&i[t+1].Cmt();i[t].Wdt(e)}}Pmt(t){this.imt.push(t)}iY(){po.Un(this.emt),this.Emt(this),this.hmt.clear()}Emt(t){const s=t.emt,i=t.hmt;for(const e of this.imt){const h=e.Amt();e.Rmt()&&t!==h&&!i.has(h)&&(i.add(h),h.Emt(t),s.push(h))}}B1t(){return this.emt}CO(){return this.f0t}ck(){return this.Sf}uf(){return this.Mr}Fmt(t,s){this.tmt.set(s,t)}Omt(t){return this.tmt.get(t)||null}P1t(){this.smt=!1}iI(){if(!this.smt){const t=this.Sf,s=t.Dmt(),i=s?performance.now():0,e=(this.smt=!0,this.CO()),h=e.t1t();for(const r of this.Kpt)r.iI(h),e.Z1t(r.i8()),e.gpt(),t.d5();h.b0(null),s&&(this.nmt.omt+=performance.now()-i)}}*k1t(){if(!this.smt){this.smt=!0;const t=this.Sf,s=this.CO(),i=s.t1t();for(const e of this.Kpt)yield*e.k1t(i),s.Z1t(e.i8()),s.gpt(),t.d5();i.b0(null)}}L1t(e,h,r){if(!h)return this.kmt(e,h,null,null);{let t=h.YN(),s=!1,i=this.kmt(e,h,t,r);s=s||i;for(const n of t.y1t())i=this.kmt(e,h,n,r),s=s||i}}kmt(t,s,i,e){const h=this.Zpt.get(i);if(!h)return!1;const r=e?h.Imt.get(e):h._mt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){const u=this.Lmt(s,a,l);o=o||u}return o}*W1t(e,h,r){if(!h)return yield*this.Nmt(e,h,null,null);{let t=h.YN(),s=!1,i=yield*this.Nmt(e,h,t,r);s=s||i;for(const n of t.y1t())i=yield*this.Nmt(e,h,n,r),s=s||i}}*Nmt(t,s,i,e){const h=this.Zpt.get(i);if(!h)return!1;const r=e?h.Imt.get(e):h._mt;if(!r)return!1;const n=r.get(t);if(!n)return!1;let o=!1;for(const[a,l]of n){let t;t=a.Bmt()?this.Lmt(s,a,l):yield*this.Wmt(s,a,l),o=o||t}return o}z1t(t,s,i){const e=s.YN(),h=this.Qpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let t=0,s=n.length;t<s;++t){const a=n[t],l=this.Lmt(null,a[0],a[1]);o=o||l}return o}*J1t(t,s,i){const e=s.YN(),h=this.Qpt.get(e);if(!h)return!1;const r=h.get(t);if(!r)return!1;const n=r.get(i);if(!n)return!1;let o=!1;for(let h=0,t=n.length;h<t;++h){let t=n[h],s=t[0],i=t[1],e;e=s.Bmt()?this.Lmt(null,s,i):yield*this.Wmt(null,s,i),o=o||e}return o}Lmt(t,s,i){let e=this.Sf,h=this.f0t,r=h.OO(),n=h.VO(),o=h.q1t(),a=!1;r&&h.tpt(r.FO()),h.tpt(s.FO());const l=1<o,u=(l&&h.r1t().h8(),n.h8(s));if(t){const f=s.mmt()[i].YN(),d=f.e5();d.e0t(t),t.n4()&&t.Vmt()}let c=!0;if(s.WB()){const p=s.jmt();for(let t=0,s=p.length;t<s;++t)if(!p[t].Hmt(u)){c=!1;break}}return c&&(s.u0t()?s.Umt(u,i):s.iI(u),a=u.k0t()),n.m8(),l&&h.r1t().m8(),h.c8(s.FO()),r&&h.c8(r.FO()),r||1!==o||(h.gpt(),h.i4())||e.d5(),a}*Wmt(t,s,i){let e=this.Sf,h=this.f0t,r=h.OO(),n=h.VO(),o=h.q1t(),a=!1;r&&h.tpt(r.FO()),h.tpt(s.FO());const l=1<o,u=(l&&h.r1t().h8(),n.h8(s));if(t){const f=s.mmt()[i].YN(),d=f.e5();d.e0t(t),t.n4()&&t.Vmt()}let c=!0;if(s.WB()){const p=s.jmt();for(let t=0,s=p.length;t<s;++t)if(!(yield*p[t].zmt(u))){c=!1;break}}return c&&(s.u0t()?yield*s.Jmt(u,i):yield*s.k1t(u),a=u.k0t()),n.m8(),l&&h.r1t().m8(),h.c8(s.FO()),r&&h.c8(r.FO()),r||1!==o||(h.gpt(),h.i4())||e.d5(),a}qpt(){return this.nmt}}}{let u=function(t,s){return!0};u;const mo=self.Bs,go=[];function*B(t,s){return!0}mo.pmt=class extends mo.gr{constructor(t,s,i){super(),this.qq=t,this.Sf=t.ck(),this.qmt=s,this.Xmt=null,this.Hft=this.Sf.CO().VO(),this.Ymt=[],this.$mt=[],this.Kmt=!1,this.Zmt=!1,this.Qmt=!1,this.tgt=!1,this.sgt=!!i[2],this.igt=!1,this.egt=null,this.hgt=[],this.trt=[],this.rgt=[],this.ngt=u,this.ogt=B,this.agt=!1,this.lgt=!1,this.ugt="",this.cgt=!1,this.fgt=null,this.nmt=null,this.O7=i[4],this.dgt=i[5],this.qq.Fmt(this,this.dgt),this.pgt=this.Sf.s$()?{mgt:i[3][0],ggt:i[3][1],ygt:!1,wgt:!1,Sgt:!1,bgt:!1}:null,this.CO().Udt(this),3===i[0]&&this.vgt(i[1]);let e=0;for(const h of i[6]){const r=mo.Mgt.kx(this,h,e++);this.hgt.push(r),this.xgt(r.YN())}e=0;for(const n of i[7]){const o=mo.Tgt.kx(this,n,e++);this.trt.push(o)}if(9===i.length){const a=i[8];for(const l of a)this.qq.rmt(l,this,this.rgt)}this.hgt.length&&(this.igt=null===this.hgt[0].YN()&&this.hgt[0].xmt()===mo.TY.xY.MY.Ggt),0===this.hgt.length&&(this.hgt=go),0===this.trt.length&&(this.trt=go),0===this.rgt.length&&(this.rgt=go)}static kx(t,s,i){return mo.wr(mo.pmt,t,s,i)}vgt(t){this.agt=!0,this.lgt=!!t[0],this.cgt=this.lgt,this.ugt=t[1].toLowerCase(),this.fgt=[],this.CO().jdt(this),this.Sf.s$()&&(this.nmt={type:"group",name:t[1],omt:0,children:[]})}_gt(t){this.fgt.push(t)}Igt(t,s){for(const i of t.jX().CY())s.includes(i)||s.push(i)}Cgt(t,s){if(t)if(s.includes(t)||s.push(t),t.oJ())for(const i of t.Pgt())i.n4()&&this.Igt(i,s);else t.n4()&&this.Igt(t,s)}xgt(t){this.Cgt(t,this.Ymt)}Egt(t){this.Cgt(t,this.$mt)}Agt(){this.Ymt=this.Sf.nJ()}Wdt(t){this.tgt=!!t,this.Rgt(),this.Fgt();for(const s of this.hgt)s.Wdt();if(0<this.trt.length){let t=!1;for(const e of this.trt)e.Wdt(),e.Ogt()&&(t=!0);t?(this.ngt=this.Dgt,this.ogt=this.kgt):(this.ngt=this.Lgt,this.ogt=this.Ngt)}const i=this.rgt;for(let t=0,s=i.length;t<s;++t){const h=t<s-1&&i[t+1]instanceof mo.pmt&&i[t+1].Cmt();i[t].Wdt(h)}this.pgt&&this.Bgt(),this.nmt&&this.Wgt().qpt().children.push(this.nmt)}qpt(){return this.nmt}Wgt(){let t=this.WB();for(;t;){if(t.T1t())return t;t=t.WB()}return this.qq}Bgt(){const t=this.pgt;t.ygt=this.hgt.every(t=>t.Bmt()),t.wgt=this.trt.every(t=>t.Bmt()),t.Sgt=this.rgt.every(t=>t.Bmt()),t.bgt=t.ygt&&t.wgt&&t.Sgt}Vgt(){let t=this;for(;t.Bgt(),t=t.WB(););}Rgt(){if(this.T1t()){let t=this.WB();for(this.Qmt=!0;t;){if(!t.T1t()){this.Qmt=!1;break}t=t.WB()}}}jgt(){const t=this.Sf.nJ();if(this.Ymt===t)this.$mt=t;else{this.$mt=mo.ho(this.Ymt);let t=this.WB();for(;t;){for(const i of t.Ymt)this.Egt(i);t=t.WB()}const s=this.CO();this.Ymt=s.Kdt(this.Ymt),this.$mt=s.Kdt(this.$mt)}}Fgt(){if(this.Hgt()){this.egt=[];let t=this.WB();for(;t;)this.egt.push(t),t=t.WB();this.egt.reverse()}}Ugt(){this.Zmt=!0,this.qmt&&this.qmt.Ugt()}U0t(){return this.Zmt}i8(){return this.Ymt}FO(){return this.Kmt||(this.Kmt=!0,this.jgt()),this.$mt}zgt(t){return this.Ymt.includes(t)}jmt(){return this.egt}PX(){return this.qq}CO(){return this.qq.CO()}ck(){return this.Sf}WB(){return this.qmt}Jgt(t){this.Xmt=t}o1t(){return this.Xmt||this.qmt}qgt(){return this.dgt}Xgt(){return this.pgt&&this.pgt.ggt}Ygt(){return this.Xgt()&&this.pgt.mgt}$gt(t){this.pgt.mgt=!!t,this.Vgt()}T1t(){return this.agt}Kgt(){return this.Qmt}Cmt(){return this.igt}Zgt(){return this.tgt}Hdt(){return this.ugt}Vpt(){return this.cgt}I1t(){this.jpt(this.lgt)}jpt(t){if(t=!!t,!this.agt)throw new Error("not a group");if(this.cgt!==t){this.cgt=t;for(const s of this.fgt)s.Qgt();if(this.fgt.length){const i=this.Sf.WD(),e=i.PX();e&&e.iY()}}}mJ(){return this.O7}u0t(){return this.sgt}gmt(){return this.hgt.length&&this.hgt[0].gmt()}tyt(){return this.Xmt&&this.Xmt instanceof mo.Ypt}Hgt(){return this.tyt()||this.hgt.some(t=>t.gmt())}mmt(){return this.hgt}z0t(){return this.hgt.length}i1t(t){if((t=Math.floor(t))<0||t>=this.hgt.length)throw new RangeError("invalid condition index");return this.hgt[t]}syt(t){return this.i1t(t)}iyt(t){let s=t.KF();if(0!==s){--s;const i=t.eyt()?t.hyt():t.YN();for(;0<=s;--s){const e=this.hgt[s];if(i===e.YN()||e.eyt()&&e.hyt()===i)return!1}}return!0}ryt(){return this.trt}nyt(){return this.trt.length}h1t(t){if((t=Math.floor(t))<0||t>=this.trt.length)throw new RangeError("invalid action index");return this.trt[t]}oyt(s){s=Math.floor(s);const t=this.trt.find(t=>t.ayt()===s);if(t)return t;throw new RangeError("invalid action debug index")}lyt(t){return 0<=(t=Math.floor(t))&&t<this.trt.length}uyt(){return this.rgt}a1t(){return this.rgt.filter(t=>t instanceof mo.bmt)}Hmt(i){i.E0t(this);let e=this.hgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.R0t(t),r.hW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.iI())h=!0;else if(!this.sgt)return!1}return!this.sgt||h}Umt(t,s){t.E0t(this),t.R0t(s),this.hgt[s].iI()&&(this.ngt(t,0)&&this.cyt(t),t.D0t(!0))}*zmt(i){i.E0t(this);let e=this.hgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(i.R0t(t),r.hW())throw new Error("trigger cannot be used as sub-event to a loop");if(r.Bmt()?r.iI():yield*r.k1t())h=!0;else if(!this.sgt)return!1}return!this.sgt||h}*Jmt(t,s){t.E0t(this),t.R0t(s);let i=this.hgt[s];if(i.Bmt()?i.iI():yield*i.k1t())(this.fyt()?this.ngt(t,0):yield*this.ogt(t,0))&&(this.dyt()?this.cyt():yield*this.pyt()),t.D0t(!0)}iI(t){t.E0t(this),this.igt||t.L0t(!1),this.sgt?this.myt(t):this.gyt(t)}*k1t(t){(this.Ygt()||this.Sf.yyt())&&(yield this),t.E0t(this),this.igt||t.L0t(!1),this.sgt?yield*this.wyt(t):yield*this.Syt(t)}myt(i){let e=this.hgt,h=0===e.length;for(let t=0,s=e.length;t<s;++t){const r=e[t];if(!r.gmt()){i.R0t(t);const n=r.iI();h=h||n}}i.D0t(h),h&&(this.ngt(i,0)&&this.cyt(i),this.tgt)&&i.L0t(!0)}*wyt(i){let e=this.hgt,h=0===e.length;for(let s=0,t=e.length;s<t;++s){const r=e[s];if(!r.gmt()){i.R0t(s);let t;t=r.Bmt()?r.iI():yield*r.k1t(),h=h||t}}if(i.D0t(h),h)(this.fyt()?this.ngt(i,0):yield*this.ogt(i,0))&&(this.dyt()?this.cyt():yield*this.pyt()),this.tgt&&i.L0t(!0)}gyt(i){const e=this.hgt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=(i.R0t(t),h.iI());if(!r)return void i.D0t(!1)}i.D0t(!0),this.ngt(i,0)&&this.cyt(i),i.k0t()&&this.tgt&&i.L0t(!0)}*Syt(i){const e=this.hgt;for(let t=0,s=e.length;t<s;++t){const h=e[t];i.R0t(t);if(!(h.Bmt()?h.iI():yield*h.k1t()))return void i.D0t(!1)}i.D0t(!0);(this.fyt()?this.ngt(i,0):yield*this.ogt(i,0))&&(this.dyt()?this.cyt():yield*this.pyt()),i.k0t()&&this.tgt&&i.L0t(!0)}Lgt(i,e){const h=this.trt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.O0t(t),r.iI()}return!0}*Ngt(i,e){const h=this.trt;for(let t=e,s=h.length;t<s;++t){const r=h[t];i.O0t(t),r.Bmt()?r.iI():yield*r.k1t()}return!0}Dgt(i,e){const h=this.CO(),r=this.trt;for(let t=e,s=r.length;t<s;++t){const n=r[t],o=(i.O0t(t),n.iI());if(n.byt()&&!0===o)return!1;n.vyt()&&o instanceof Promise&&h.ppt(o)}return!0}*kgt(i,e){const h=this.CO(),r=this.trt;for(let s=e,t=r.length;s<t;++s){const n=r[s];i.O0t(s);let t;if(t=n.Bmt()?n.iI():yield*n.k1t(),n.byt()&&!0===t)return!1;n.vyt()&&t instanceof Promise&&h.ppt(t)}return!0}Myt(t){this.ngt(t,t.F0t())&&this.cyt()}*xyt(t){(yield*this.ogt(t,t.F0t()))&&(yield*this.pyt())}cyt(){if(this.rgt.length){const t=this.T1t()&&this.Sf.Dmt(),s=t?performance.now():0,i=this.Hft,e=i.h8(this);this.Zmt?this.Tyt(e):this.Gyt(e),i.m8(),t&&(this.nmt.omt+=performance.now()-s)}}Tyt(e){const h=this.agt,r=this.Qmt,n=this.CO(),o=this.rgt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.i8(),u=!r||!h&&t<i;u&&n.l8(l),a.iI(e),u?n.c8(l):n.Z1t(l)}}Gyt(i){const e=this.rgt;for(let t=0,s=e.length;t<s;++t)e[t].iI(i)}*pyt(){if(this.rgt.length){const t=this.Hft,s=t.h8(this);this.Zmt?yield*this._yt(s):yield*this.Iyt(s),t.m8()}}*_yt(e){const h=this.agt,r=this.Qmt,n=this.CO(),o=this.rgt;for(let t=0,s=o.length,i=s-1;t<s;++t){const a=o[t],l=a.i8(),u=!r||!h&&t<i;u&&n.l8(l),yield*a.k1t(e),u?n.c8(l):n.Z1t(l)}}*Iyt(i){const e=this.rgt;for(let t=0,s=e.length;t<s;++t)yield*e[t].k1t(i)}u8(i,e){e.P0t();const h=this.hgt;if(!this.u0t())for(let t=i.A0t()+1,s=h.length;t<s;++t){const r=h[t],n=(e.R0t(t),r.iI());if(!n)return!1}return this.ngt(e,0)&&this.cyt(e),!0}*Cyt(i,e){e.P0t();const h=this.hgt;if(!this.u0t())for(let t=i.A0t()+1,s=h.length;t<s;++t){const r=h[t];e.R0t(t);if(!(r.Bmt()?r.iI():yield*r.k1t()))return!1}return(this.fyt()?this.ngt(e,0):yield*this.ogt(e,0))&&(this.dyt()?this.cyt():yield*this.pyt()),!0}Bmt(){return!this.Ygt()&&!this.Sf.yyt()&&this.pgt.bgt}fyt(){return!this.Sf.yyt()&&this.pgt.wgt}dyt(){return!this.Sf.yyt()&&this.pgt.Sgt}Pyt(i){if(this.WB()){const e=this.jmt();for(let t=0,s=e.length;t<s;++t)if(!e[t].Hmt(i))return!1}return!0}*Eyt(i){if(this.WB()){const e=this.jmt();for(let t=0,s=e.length;t<s;++t)if(!(yield*e[t].zmt(i)))return!1}return!0}Ayt(t,s,i){if(0<s.length)if(i){const e=s.map(t=>t.ni(0));t.r1t().h8(),this.Xmt.Ryt(e)}else this.Xmt.Fyt(s);else i&&t.r1t().h8()}Oyt(t,s,i,e){let h,r,n=0<t.length,o=null,a=this.Sf,l=this.Hft,u=a.CO(),c=this.Xmt,f=c.vyt(),d=u.Y1t(),p=1<d;if(this.Ayt(u,s,p),n&&(i?u.l8(t):u.tpt(t)),null!==e){if(e.Dyt){const g=i?e.Dyt.e5():e.Dyt.Q1t().Bft(),y=e.kyt.e5();y.h0t(g.i5()),y.a0t(),i||e.kyt.Lyt()}else if(e.Nyt){const w=e.Nyt.e5();w.h0t(e.Byt),w.a0t()}e.Wyt&&(o=u.spt(t))}const m=l.h8(this);return i&&m.J0t(t),this.Pyt(m)&&(m.E0t(this),f&&([r,h]=c.Vyt()),this.gyt(m),f)&&c.jyt(r),l.m8(),p&&u.r1t().m8(),null!==o&&u.c8(o),n&&u.c8(t),u.$1t(),f||u.ypt(),h}*Hyt(t,s,i,e){let h,r,n=((this.Ygt()||this.Sf.yyt())&&(yield this),0<t.length),o=null,a=this.Sf,l=this.Hft,u=a.CO(),c=this.Xmt,f=c.vyt(),d=u.Y1t(),p=1<d;if(this.Ayt(u,s,p),n&&(i?u.l8(t):u.tpt(t)),null!==e){if(e.Dyt){const g=i?e.Dyt.e5():e.Dyt.Q1t().Bft(),y=e.kyt.e5();y.h0t(g.i5()),y.a0t(),i||e.kyt.Lyt()}else if(e.Nyt){const w=e.Nyt.e5();w.h0t(e.Byt),w.a0t()}e.Wyt&&(o=u.spt(t))}const m=l.h8(this);return i&&m.J0t(t),(yield*this.Eyt(m))&&(m.E0t(this),f&&([r,h]=c.Vyt()),yield*this.Syt(m),f)&&c.jyt(r),l.m8(),p&&u.r1t().m8(),null!==o&&u.c8(o),n&&u.c8(t),u.$1t(),f||u.ypt(),h}Uyt(t,s){const i=this.FO(),e=0<i.length,h=this.Sf,r=this.Hft,n=h.CO(),o=n.Y1t(),a=1<o,l=(a&&n.r1t().h8(),this.Xmt.Ryt(t),e&&(s?n.l8(i):n.tpt(i)),r.h8(this));this.Pyt(l)&&(l.E0t(this),this.gyt(l)),r.m8(),a&&n.r1t().m8(),e&&n.c8(i),n.$1t(),n.ypt()}*zyt(t,s){(this.Ygt()||this.Sf.yyt())&&(yield this);const i=this.FO(),e=0<i.length,h=this.Sf,r=this.Hft,n=h.CO(),o=n.Y1t(),a=1<o,l=(a&&n.r1t().h8(),this.Xmt.Ryt(t),e&&(s?n.l8(i):n.tpt(i)),r.h8(this));(yield*this.Eyt(l))&&(l.E0t(this),yield*this.Syt(l)),r.m8(),a&&n.r1t().m8(),e&&n.c8(i),n.$1t(),n.ypt()}kO(t,s,i,e,...h){let r,n,o=0<t.length,a=this.Sf,l=this.Hft,u=a.CO(),c=this.Xmt,f=c.vyt(),d=u.Y1t(),p=1<d,m=(p&&u.r1t().h8(),0<h.length&&this.Xmt.Ryt(h),o&&(s?u.l8(t):u.tpt(t)),l.h8(this));return m.V0t(i,e),l.y0t(m),a.o8(!1),this.Pyt(m)&&(m.E0t(this),f&&([n,r]=c.Vyt()),this.gyt(m),f)&&c.jyt(n),a.o8(!0),l.m8(),l.w0t(),p&&u.r1t().m8(),o&&u.c8(t),u.$1t(),f||u.ypt(),r||m.j0t()}}}{let e=self.Bs,t=[],s=!1;e.Mmt=class extends e.gr{constructor(t,s,i){super();const e=t.ck(),h=t.CO(),r=(this.qq=t,this.f0t=h,this.Sf=t.ck(),this.qmt=s,e.Jyt(i[1]));this.qyt=r,this.dgt=i[2],this.qq.Fmt(this,this.dgt),this.pgt=e.s$()?{mgt:i[3][0],ggt:i[3][1]}:null}static kx(t,s,i){return e.wr(e.Mmt,t,s,i)}Wdt(){const t=this.qyt,s=this.Sf.CO().l1t(this);this.qyt=t.bind(null,this.Sf.wL(),s)}WB(){return this.qmt}o1t(){return this.qmt}PX(){return this.qq}qgt(){return this.dgt}Xgt(){return this.pgt&&this.pgt.ggt}Ygt(){return this.Xgt()&&this.pgt.mgt}$gt(t){this.pgt.mgt=!!t}Cmt(){return!1}i8(){return t}FO(){return this.qmt?this.qmt.FO():t}iI(t){t.E0t(this),this.f0t.ppt(this.Xyt())}async Xyt(){try{await this.qyt()}catch(t){console.error(`Unhandled exception running script %c${this.PX().uf()}, event ${this.qgt()}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),s||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),s=!0)}}*k1t(t){t.E0t(this),(this.Ygt()||this.Sf.yyt())&&(yield this),this.iI(t)}Bmt(){return!this.Ygt()&&!this.Sf.yyt()}static Yyt(){return s}static $yt(){s=!0}}}{const yo=self.Bs;yo.Ypt=class extends yo.gr{constructor(t,s,i){super(),this.qq=t,this.Sf=t.ck(),this.qmt=s,this.Kyt=0,this.Zyt="",this.Qyt=0,this.twt=[],this.swt=!0,this.iwt="",this.Dft=null,this.ewt=!1,this.hwt=[],this.rwt=!1,this.nwt=!1,this.owt=0,this.awt=-1,this.lwt=new Map,this.uwt=yo.pmt.kx(t,s,i),this.uwt.Jgt(this)}cwt(t){this.Kyt=0,this.Zyt=t[0],this.Qyt=t[1],this.twt=t[2].map(t=>yo.bmt.kx(this.qq,this,t)),this.swt=t[3],this.nwt=t[4],this.rwt=t[5]}fwt(t){this.Kyt=1,this.iwt=t[1],this.Dft=this.Sf.kz(t[2]),this.uwt.xgt(this.Dft),this.Zyt=this.Dft.uf()+"."+this.iwt,this.Qyt=t[3],this.twt=t[4].map(t=>yo.bmt.kx(this.qq,this,t)),this.swt=t[5],this.nwt=t[6],this.rwt=t[7],this.Dft.dwt(this)}static wmt(t,s,i){const e=yo.wr(yo.Ypt,t,s,i),h=i[1];return e.cwt(h),e}static Smt(t,s,i){const e=yo.wr(yo.Ypt,t,s,i),h=i[1];return e.fwt(h),e}Vdt(){if(this.Dft&&this.Dft.oJ())for(const t of this.Dft.Pgt())if(t.pwt(this.iwt)){this.ewt=!0;break}}Wdt(){for(const t of this.twt)t.Wdt();this.uwt.Wdt(!1)}Xdt(){return this.Kyt}a1t(){return this.twt}$pt(){return this.twt}AO(){return this.twt.length}mwt(t){this.hwt.push(t)}gwt(){return this.hwt}Fyt(i){const e=this.twt;for(let t=0,s=e.length;t<s;++t)e[t].bht(i[t].ni(0))}Ryt(i){const e=this.twt;for(let t=0,s=e.length;t<s;++t)e[t].bht(i[t])}ywt(){return this.twt.map(t=>t.Bet())}WB(){return this.qmt}o1t(){return this.qmt}Ydt(){return this.Zyt}wwt(){return this.iwt}Swt(){return this.ewt}NO(){return this.Qyt}YN(){return this.Dft}rc(){return this.swt}EO(){switch(this.Qyt){case 0:return null;case 2:return"";default:return 0}}RO(){return this.uwt}LO(){return this.rwt}vyt(){return this.nwt}Vyt(){const t=this.owt++;this.awt=t;let s,i=new Promise(t=>s=t);return this.lwt.set(t,{resolve:s,bwt:0}),[t,i]}jyt(t){const s=this.lwt.get(t);0===s.bwt&&(s.resolve(),this.lwt.delete(t)),this.awt=-1}vwt(){const t=this.lwt.get(this.awt);return t.bwt++,this.awt}Mwt(t){this.awt=t;const s=this.lwt.get(t);s.bwt--}xwt(t,s){const i=new Map,e=[];for(const h of this.Dft.e5().i5()){const r=h.YN();if(r.pwt(this.iwt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&this.uwt.Oyt(t,s,this.rwt,{Nyt:this.Dft,Byt:e}),0<i.size)for(const[o,a]of i){const l=o.Twt(this.iwt).RO(),u=[...new Set([...t,...l.i8()])];l.Oyt(u,s,this.rwt,{Nyt:o,Byt:a})}}*Gwt(t,s){const i=new Map,e=[];for(const h of this.Dft.e5().i5()){const r=h.YN();if(r.pwt(this.iwt)){const n=i.get(r);Array.isArray(n)?n.push(h):i.set(r,[h])}else e.push(h)}if(0<e.length&&(yield*this.uwt.Hyt(t,s,this.rwt,{Nyt:this.Dft,Byt:e})),0<i.size)for(const[o,a]of i){const l=o.Twt(this.iwt).RO(),u=[...new Set([...t,...l.i8()])];yield*l.Hyt(u,s,this.rwt,{Nyt:o,Byt:a})}}}}{const wo=self.Bs,So=[];wo.bmt=class extends wo.gr{constructor(t,s,i){super();const e=t.CO();this.qq=t,this.f0t=e,this.Sf=t.ck(),this.qmt=s,this.Gdt=e.r1t(),this.Mr=i[1],this.If=i[2],this._wt=i[3],this.$M=!!i[4],this.Iwt=!!i[5],this.Cwt=s instanceof wo.Ypt,this.O7=i[6],this.Pwt=this.Sf.u1t(i[8]),this.Ewt=t=>this.bht(t),this.Awt=()=>this.Bet(),this.Rwt=!this.qmt||this.$M||this.Iwt,this.$ht=this._wt,this.Fwt=-1,this.Owt()&&(this.$ht=this.$ht?1:0),!this.Dwt()||this.C2()||this.Hpt()||(this.Fwt=e.Zdt(this)),e.$dt(this)}static kx(t,s,i){return wo.wr(wo.bmt,t,s,i)}Wdt(){if(this.Dwt()&&!this.C2()&&!this.Hpt()&&!this.kwt()){const t=this.f0t.Xpt(this);t&&t.mwt(this)}}uf(){return this.Mr}u1t(){return this.Pwt}WB(){return this.qmt}o1t(){return this.WB()}qz(){return!this.WB()}Dwt(){return!this.qz()}kwt(){return this.Cwt}C2(){return this.$M}Hpt(){return this.Iwt}Se(){return 0===this.If}Ee(){return 1===this.If}Owt(){return 2===this.If}Cmt(){return!1}mJ(){return this.O7}Qdt(){return this._wt}i8(){return So}iI(t){!this.Dwt()||this.C2()||this.Hpt()||this.bht(this.Qdt())}Bmt(){return!0}*k1t(t){this.iI(t)}bht(t){this.Se()?"number"!=typeof t&&(t=parseFloat(t)):this.Ee()?"string"!=typeof t&&(t=t.toString()):this.Owt()&&(t=t?1:0),this.Rwt?this.$ht=t:this.Gdt.K0t()[this.Fwt]=t}Bet(){return this.Rwt?this.$ht:this.Gdt.K0t()[this.Fwt]}Lwt(){let t=this.Bet();return this.Owt()?!!t:t}v1t(){this.$ht=this._wt}c1t(){return{configurable:!1,enumerable:!0,get:this.Awt,set:this.Ewt}}}}{const bo=self.Bs,vo=[];bo.vmt=class extends bo.gr{constructor(t,s,i){super();const e=t.CO();this.qq=t,this.f0t=e,this.Sf=t.ck(),this.qmt=s,this.Nwt=null,this.Bwt=i[1],this.S0=!0}static kx(t,s,i){return bo.wr(bo.vmt,t,s,i)}Wdt(){this.Nwt=this.f0t.sY(this.Bwt),this.qq.Pmt(this);let t=this.WB();for(;t;)t instanceof bo.pmt&&t.T1t()&&t._gt(this),t=t.WB();this.Qgt(),this.Sf.s$()&&this.qq.qpt().children.push(this.Nwt.qpt())}WB(){return this.qmt}i8(){return vo}Amt(){return this.Nwt}iI(t){const s=!!this.WB(),i=this.Sf.nJ();s&&this.f0t.tpt(i),this.Nwt.iI(),s&&this.f0t.c8(i)}*k1t(t){const s=!!this.WB(),i=this.Sf.nJ();s&&this.f0t.tpt(i),yield*this.Nwt.k1t(),s&&this.f0t.c8(i)}Bmt(){return!1}Rmt(){return this.S0}Qgt(){let t=this.WB();for(;t;){if(t instanceof bo.pmt&&t.T1t()&&!t.Vpt())return void(this.S0=!1);t=t.WB()}this.S0=!0}}}{let a=function(t,s){return s<=t?t%s:(t<0&&(t<=-s&&(t%=s),t<0)&&(t+=s),t)};a;const Mo=self.Bs;Mo.Wwt=class extends Mo.gr{constructor(t){super(),this.uM=t,this.Sf=t.ck()}Wdt(){}static Vwt(t,s){const i=s[0],e=[Io,Go,_o,Co,xo,To];return Mo.wr(e[i],t,s)}};class xo extends Mo.Wwt{constructor(t,s){super(t),this.jwt=this.Sf.Hwt(),this.qyt=this.Sf.Jyt(s[1]),this.qyt!==Mo.TY.xY.drt.random&&this.qyt!==Mo.TY.xY.drt.Uwt||this.uM.zwt()}Jwt(){return this.jwt.qwt(this.qyt,this.jwt)}}class To extends Mo.Wwt{constructor(t,s){super(t),this.Xwt=null,this.Zyt=s[1],this.uM.zwt()}Wdt(){const t=this.Sf.CO(),s=(this.Xwt=t.PO(this.Zyt),this.Zyt=null,this.uM.RO()),i=this.Xwt.RO();this.Ywt=[...new Set([...s.FO(),...i.FO()])],this.Ywt=t.Kdt(this.Ywt)}Jwt(){const t=this.Xwt;if(t.rc()){const s=t.RO();return Mo.pmt.prototype.kO.bind(s,this.Ywt,t.LO(),t.NO(),t.EO())}{const i=t.EO();return()=>i}}}class Go extends Mo.Wwt{constructor(t,s){super(t),this.Dft=this.Sf.kz(s[1]),this.qyt=this.Sf.Jyt(s[2]),this.$wt=!!s[3],this.Hft=this.Sf.CO().VO(),this.uM.Kwt(this.Dft)}Jwt(){return this.Dft.zL().qwt(this.qyt,this.Dft.jL().O6())}Zwt(...t){const s=this.Dft,i=s.e5().Kft(),e=i.length;if(0===e)return this.$wt?"":0;const h=a(this.uM.Qwt(),e);return this.Hft.e8().B0t(s),this.qyt.apply(i[h].O6(),t)}tSt(t,...s){const i=this.Dft,e=i.i5(),h=e.length;if(0===h)return this.$wt?"":0;const r=a(t,h);return this.Hft.e8().B0t(i),this.qyt.apply(e[r].O6(),s)}}class _o extends Mo.Wwt{constructor(t,s){super(t),this.Dft=this.Sf.kz(s[1]),this.sSt=s[3],this.$wt=!!s[2],this.uM.Kwt(this.Dft)}iSt(){const t=this.Dft.e5().Kft(),s=t.length;if(0===s)return this.$wt?"":0;const i=a(this.uM.Qwt(),s);return t[i].eSt(this.sSt)}hSt(){const t=this.Dft,s=t.e5().Kft(),i=s.length;if(0===i)return this.$wt?"":0;const e=a(this.uM.Qwt(),i),h=s[e],r=h.YN().rSt(t.nSt());return h.eSt(this.sSt+r)}oSt(t){const s=this.Dft,i=s.i5(),e=i.length;if(0===e)return this.$wt?"":0;let h=a(t,e),r=i[h],n=0;return s.oJ()&&(n=r.YN().rSt(s.nSt())),r.eSt(this.sSt+n)}}class Io extends Mo.Wwt{constructor(t,s){super(t),this.Dft=this.Sf.kz(s[1]),this.aSt=this.Dft.Uht(s[2]),this.lSt=this.Dft.vit(s[2]),this.qyt=this.Sf.Jyt(s[3]),this.$wt=!!s[4],this.Hft=this.Sf.CO().VO(),this.uM.Kwt(this.Dft)}uSt(...t){const s=this.Dft,i=s.e5().Kft(),e=i.length;if(0===e)return this.$wt?"":0;let h=a(this.uM.Qwt(),e),r=(this.Hft.e8().B0t(s),i[h]),n=0;return s.oJ()&&(n=r.YN().cSt(s.nSt())),this.qyt.apply(r.Hht()[this.lSt+n].O6(),t)}fSt(t,...s){const i=this.Dft,e=i.i5(),h=e.length;if(0===h)return this.$wt?"":0;let r=a(t,h),n=(this.Hft.e8().B0t(i),e[r]),o=0;return i.oJ()&&(o=n.YN().cSt(i.nSt())),this.qyt.apply(n.Hht()[this.lSt+o].O6(),s)}}class Co extends Mo.Wwt{constructor(t,s){super(t),this.dSt=null,this.pSt=s[1]}Wdt(){this.dSt=this.Sf.CO().f1t(this.pSt)}mSt(){return this.dSt}}}{let r=function(t){const s=self.gSt[t];if(s)return s;throw new Error("invalid expression number")};r;const Po=self.Bs;Po.ySt=class extends Po.gr{constructor(t,s,i){super(),this.uM=t,this.Sy=i,this.If=s,this.ni=null,this.wSt=!1,this.Iwt=!1}static kx(t,s,i){const e=s[0],h=[Eo,Ao,No,Fo,Do,Ro,ko,Eo,Fo,Fo,Bo,Wo,No,jo,Ao,Lo,Oo,Vo,Ho,Uo,zo,Jo];return Po.wr(h[e],t,e,i,s)}Wdt(){}zwt(){this.wSt=!0}Kwt(t){this.wSt||!t||t.zL().bL()||(this.wSt=!0)}SSt(){return this.wSt}KF(){return this.Sy}ck(){return this.uM.ck()}RO(){return this.uM.RO()}Hpt(){return this.Iwt}bSt(){return 4===this.If}};class Eo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.vSt=0;const h=e[1];this.MSt=h[0],this.xSt=[],this.TSt=null;for(let t=1,s=h.length;t<s;++t)this.xSt.push(Po.Wwt.Vwt(this,h[t]));this.xSt.length?this.ni=this.GSt:(this.ni=r(this.MSt),this.Iwt=!0)}_St(t){if(t<0||t>=this.xSt.length)throw new RangeError("invalid numbered node");return this.xSt[t]}Wdt(){for(const s of this.xSt)s.Wdt();const t=r(this.MSt);this.xSt.length?this.TSt=t(this):this.TSt=t}Qwt(){return this.vSt}GSt(t){return this.vSt=t,this.TSt()}}class Ao extends Eo{constructor(t,s,i,e){super(t,s,i,e),this.ni=this.ISt,14===s&&(this.RO().Agt(),this.uM instanceof Po.Tgt)&&this.RO().Ugt()}ISt(t){this.vSt=t;const s=this.TSt();return"string"==typeof s?s:""}CSt(){return r(this.MSt)()}}class Ro extends Eo{constructor(t,s,i,e){super(t,s,i,e),2<=t.PSt()?this.ni=this.C5:this.ni=this.HD,this.Iwt=!1}HD(t){this.vSt=t;const s=this.TSt(),i=this.ck().WD();return i.HD(s)}C5(t){const s=this.HD(t);return s?s.C5():null}}class Fo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.ESt=e[1],this.ni=this.ASt,this.Iwt=!0}ASt(){return this.ESt}}class Oo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.RSt=e[1],this.ni=this.FSt,this.Iwt=!0}FSt(){return this.RSt}}class Do extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.Dft=this.ck().kz(e[1]),2<=t.PSt()?this.ni=this.BL:this.ni=this.YN;const h=this.RO();h.xgt(this.Dft),this.uM instanceof Po.Tgt?h.Ugt():h.WB()&&h.WB().Ugt(),this.Iwt=!0}YN(){return this.Dft}BL(){return this.Dft?this.Dft.BL():null}}class ko extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.E7=this.ck().xD().m$(e[1]),2<=t.PSt()?this.ni=this.vD:this.ni=this.TD,this.Iwt=!0}TD(){return this.E7}vD(){return this.E7?this.E7.vD():null}}class Lo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.wZ=this.ck().Mtt().GK(e[1]),2<=t.PSt()?this.ni=this.Lst:this.ni=this.rit,this.Iwt=!0}rit(){return this.wZ}Lst(){return this.wZ?this.wZ.Lst():null}}class No extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.OSt=e[1],this.ni=this.DSt,this.Iwt=!0}DSt(){return this.OSt}}class Bo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.kSt=e[1];const h=this.uM.YN();this.uM instanceof Po.Mgt&&this.uM.C2()||!h||!h.oJ()?(this.ni=this.LSt,this.Iwt=!0):(this.ni=this.NSt,this.zwt())}LSt(){return this.kSt}NSt(t){t=t||0;let s=this.uM.YN(),i=s.e5(),e=i.i5(),h=null;if(e.length)h=e[t%e.length].YN();else if(i.Yft()){const r=i.$ft();h=r[t%r.length].YN()}else{if(!(0<s.r5()))return 0;{const n=s.i5();h=n[t%n.length].YN()}}return this.kSt+h.rSt(s.nSt())}}class Wo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.pSt=e[1],this.dSt=null,2<=t.PSt()?this.ni=this.BSt:this.ni=this.WSt,this.Iwt=!0}Wdt(){this.dSt=this.ck().CO().f1t(this.pSt)}WSt(){return this.dSt}BSt(){return null}}class Vo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.VSt=e[1],this.Xwt=null,2<=t.PSt()?this.ni=this.jSt:this.ni=this.HSt,this.Iwt=!0}Wdt(){this.Xwt=this.ck().CO().PO(this.VSt),this.VSt=null}HSt(){return this.Xwt}jSt(){return null}}class jo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.USt=[],this.zSt=[],this.Iwt=!0;for(let t=1,s=e.length;t<s;++t){const h=Po.ySt.kx(this.uM,e[t],0);this.USt.push(h),this.zSt.push(0),h.Hpt()||(this.Iwt=!1)}this.ni=this.JSt}Wdt(){for(const t of this.USt)t.Wdt()}JSt(){const i=this.USt,e=this.zSt;for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0);return e}}class Ho extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.qSt=e[1],this.ni=this.Sht,this.Iwt=!0}Sht(){return this.qSt}}class Uo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.XSt=e[1],this.ni=this.YSt,this.Iwt=!0}YSt(){return this.XSt}}class zo extends Eo{constructor(t,s,i,e){super(t,s,i,e),this.ni=this.u4,this.Iwt=!1}u4(){return this.TSt()}}class Jo extends Po.ySt{constructor(t,s,i,e){super(t,s,i),this.but=this.ck().Nut().dut(e[1]),this.ni=this.$St,this.Iwt=!0}$St(){return this.but.uf()}}}{let e=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0)};e;const qo=self.Bs,Xo=[],Yo=function(){};qo.Mgt=class extends qo.gr{constructor(t,i,s){if(super(),this.uwt=t,this.Sf=t.ck(),this.Sy=s,this.qyt=this.Sf.Jyt(i[1]),this.KSt=0<i[3],this.ZSt=2===i[3],this.QSt=!!i[4],this.tbt=!!i[5],this.$M=!!i[6],this.O7=i[7],this.sbt=this.uwt.u0t(),this.Dft=null,this.aSt=null,this.lSt=-1,this.jwt=null,this.iI=Yo,this.k1t=Yo,this.Qs=[],this.ibt=[],this.ebt=!1,this.hbt=null,this.rbt=null,this.pgt=this.Sf.s$()?{mgt:i[8][0],nbt:i[8][1]}:null,-1===i[0]?this.jwt=this.Sf.Hwt():(this.Dft=this.Sf.kz(i[0]),i[2]&&(this.aSt=this.Dft.Uht(i[2]),this.lSt=this.Dft.vit(i[2])),this.uwt.WB()&&this.uwt.WB().Ugt()),10===i.length){let s=i[9];for(let t of s)this.Qs.push(qo.ySt.kx(this,t,this.Qs.length)),this.ibt.push(0)}0===this.Qs.length&&(this.Qs=Xo,this.ibt=Xo),this.uwt.CO().zdt(this)}static kx(t,s,i){return qo.wr(qo.Mgt,t,s,i)}Wdt(){for(const t of this.Qs)t.Wdt(),t.SSt()&&(this.ebt=!0);this.ZSt?(this.iI=this.obt,this.k1t=this.abt):this.jwt?(this.lbt(),this.k1t=this.ubt):this.Dft.zL().bL()?(this.cbt(),this.k1t=this.fbt):this.$M?(this.iI=this.dbt,this.k1t=this.pbt):(this.iI=this.mbt,this.k1t=this.gbt)}lbt(){const t=this.jwt,s=this.jwt;this.ybt(t,s,this.wbt)}cbt(){const t=this.Dft.zL(),s=this.Dft.jL().O6();this.ybt(t,s,this.Sbt)}ybt(t,s,i){const e=this.qyt,h=this.tbt,r=this.Qs;if(0===r.length){const n=t.qwt(e,s);h?this.iI=function(){return qo.xor(n(),h)}:this.iI=n}else if(1===r.length){const o=r[0];if(!h&&o.Hpt())this.iI=t.bbt(e,s,o.ni(0));else{const a=t.qwt(e,s);this.iI=function(){return qo.xor(a(o.ni(0)),h)}}}else if(2===r.length){const l=r[0],u=r[1];if(!h&&l.Hpt()&&u.Hpt())this.iI=t.vbt(e,s,l.ni(0),u.ni(0));else{const c=t.qwt(e,s);this.iI=function(){return qo.xor(c(l.ni(0),u.ni(0)),h)}}}else if(3===r.length){const f=r[0],d=r[1],p=r[2];if(!h&&f.Hpt()&&d.Hpt()&&p.Hpt())this.iI=t.Mbt(e,s,f.ni(0),d.ni(0),p.ni(0));else{const m=t.qwt(e,s);this.iI=function(){return qo.xor(m(f.ni(0),d.ni(0),p.ni(0)),h)}}}else this.iI=i}mJ(){return this.O7}xmt(){return this.qyt}YN(){return this.Dft}U6(){return this.aSt}xbt(){return this.aSt?this.aSt.V6():this.Dft?this.Dft.zL():null}PSt(){const t=this.xbt();return t?t.Tbt():1}RO(){return this.uwt}ck(){return this.Sf}KF(){return this.Sy}ayt(){return this.KF()}gmt(){return this.KSt}Tmt(){return this.ZSt}Gbt(){return this.tbt}hW(){return this.QSt}C2(){return this.$M}_bt(){return this.pgt.mgt}Ibt(){return!!this.jwt}eyt(){return this.Ibt()||this.Dft.zL().bL()}hyt(){for(const t of this.Qs)if(t.bSt())return t.YN();return null}Cbt(t){this.pgt.mgt=!!t,this.uwt.Vgt()}Pbt(){return this.pgt.nbt}Bmt(){return!this._bt()&&!this.Sf.yyt()&&!this.Pbt()}Ebt(){return this.hbt||(this.hbt=new Map),this.hbt}Abt(){return this.rbt||(this.rbt=new Map),this.rbt}wbt(){const t=this.ibt;return e(this.Qs,t),qo.xor(this.qyt.apply(this.jwt,t),this.tbt)}*ubt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const s=this.ibt;e(this.Qs,s);let t=this.qyt.apply(this.jwt,s);return qo.Xo(t)&&(t=yield*t),qo.xor(t,this.tbt)}return this.iI()}Sbt(){const t=this.ibt,s=(e(this.Qs,t),this.Dft.jL().O6());return qo.xor(this.qyt.apply(s,t),this.tbt)}*fbt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){let t=this.ibt,s=(e(this.Qs,t),this.Dft.jL().O6()),i=this.qyt.apply(s,t);return qo.Xo(i)&&(i=yield*i),qo.xor(i,this.tbt)}return this.iI()}obt(){return!0}*abt(){return(this._bt()||this.Sf.yyt())&&(yield this),!0}Rbt(){if(this.aSt){if(2<=this.aSt.V6().Tbt())throw new Error("not yet implemented");return this.aSt}return 2<=this.Dft.zL().Tbt()?this.Dft.BL():this.Dft}dbt(){const t=this.ibt,s=(e(this.Qs,t),this.qyt.apply(this.Rbt(),t));return this.Dft.Lyt(),s}*pbt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const s=this.ibt;e(this.Qs,s);let t=this.qyt.apply(this.Rbt(),s);return qo.Xo(t)&&(t=yield*t),this.Dft.Lyt(),t}return this.iI()}mbt(){const i=this.Qs,e=this.ibt,t=this.Dft.e5();for(let t=0,s=i.length;t<s;++t){const h=i[t];h.SSt()||(e[t]=h.ni(0))}return t.qft()?this.Fbt(t):this.Obt(t)}*gbt(){return(this._bt()||this.Sf.yyt())&&(yield this),this.mbt()}Dbt(i){const e=this.Qs,h=this.ibt;for(let t=0,s=e.length;t<s;++t){const r=e[t];r.SSt()&&(h[t]=r.ni(i))}}Fbt(i){const t=this.Dft,e=t.oJ(),h=t.nSt(),r=this.lSt,n=0<=r,o=t.i5(),a=this.ebt,l=this.ibt,u=this.qyt,c=this.tbt,f=this.sbt&&!this.KSt;i.Jft();for(let s=0,t=o.length;s<t;++s){const d=o[s];a&&this.Dbt(s);let t;if(n){const p=e?d.YN().cSt(h):0;t=u.apply(d.Hht()[r+p].O6(),l)}else t=u.apply(d.O6(),l);qo.xor(t,c)?i.Zft(d):f&&i.Qft(d)}return t.kbt(!0),i.t0t(!1),t.Lyt(),i.Xft()}Obt(t){let s=this.Dft,i=s.oJ(),e=s.nSt(),h=s.n4(),r=this.lSt,n=0<=r,o=this.ebt,a=this.ibt,l=this.qyt,u=this.tbt,c=this.sbt&&!this.KSt,f=t.s0t(),d=t.i0t(),p=c&&!this.uwt.iyt(this),m=p?d:f,g=0,y=!1;for(let s=0,t=m.length;s<t;++s){const S=m[s];o&&this.Dbt(s);let t;if(n){const b=i?S.YN().cSt(e):0;t=l.apply(S.Hht()[r+b].O6(),a)}else t=l.apply(S.O6(),a);qo.xor(t,u)?(y=!0,p?(f.push(S),h&&S.Lbt()):(m[g]=S,h&&S.Nbt(g),++g)):p?(m[g]=S,h&&S.Bbt(g),++g):c&&(d.push(S),h)&&S.Wbt()}qo.Hn(m,g),h&&s.Vbt(p,g);const w=y;return p&&!y&&(y=this.jbt(f)),s.kbt(w||c),c?y:t.Xft()}jbt(i){const t=this.Dft,e=t.oJ(),h=t.nSt(),r=this.ebt,n=this.lSt,o=0<=n,a=this.ibt,l=this.qyt,u=this.tbt;for(let s=0,t=i.length;s<t;++s){const c=i[s];r&&this.Dbt(s);let t;if(o){const f=e?c.YN().cSt(h):0;t=l.apply(c.Hht()[n+f].O6(),a)}else t=l.apply(c.O6(),a);if(qo.xor(t,u))return!0}return!1}Hbt(t,s){return this.Qs[t].ni(s)}Gmt(){const t=this.Qs;if(t.length)return t[0].CSt();throw new Error("no parameters")}Fq(){if(!this.hbt||!this.hbt.size)return null;const s={};for(const[i,e]of this.hbt.entries()){let t=e;"collmemory"===i&&(t=[...e.entries()].map(t=>[t[0].a4(),t[1].a4(),t[2]])),s[i]=t}return{ex:s}}Oq(t){if(this.hbt&&(this.hbt.clear(),this.hbt=null),t){const s=this.Sf,i=t.ex;if(i){const e=this.Ebt();e.clear();for(const[h,r]of Object.entries(i)){let t=r;"collmemory"===h&&(t=qo.wr(qo.nc,r.map(t=>[s.LD(t[0]),s.LD(t[1]),t[2]]).filter(t=>t[0]&&t[1]))),e.set(h,t)}}}}}}{let h=function(i,e){for(let t=0,s=i.length;t<s;++t)e[t]=i[t].ni(0)};h;const $o=self.Bs,Ko=[],Zo=function(){},Qo=function*(){};$o.Tgt=class extends $o.gr{constructor(t,s,i){super();const e=(this.uwt=t).ck(),h=(this.Sf=e,this.Sy=i,this.O7=4<=s.length?s[3]:-1,this.Ubt=5<=s.length?255&s[4]:0,this.zbt=5<=s.length?s[4]>>8:0,this.qyt=null,this.Dft=null,this.aSt=null,this.lSt=-1,this.jwt=null,this.Jbt="",this.qbt=null,this.Xbt=null,this.iI=Zo,this.k1t=Zo,this.Qs=[],this.ibt=[],this.ebt=!1,this.hbt=null,this.rbt=null,-3===s[0]),r=h?s[2]:s[5];if(this.pgt=e.s$()||h?{mgt:r[0],nbt:r[1],index:r[2]}:null,-1===s[0])this.jwt=e.Hwt(),this.qyt=e.Jyt(s[1]);else if(-2===s[0])this.Jbt=s[1];else if(h){const n=e.Jyt(s[1]);this.qyt=n,this.iI=this.Ybt,this.k1t=this.$bt,this.zbt|=8}else this.Dft=e.kz(s[0]),4&this.zbt?(this.Jbt=s[1],this.qbt=e.kz(s[2])):(s[2]&&(this.aSt=this.Dft.Uht(s[2]),this.lSt=this.Dft.vit(s[2])),this.qyt=e.Jyt(s[1]));if(7===s.length){const o=s[6];for(const a of o)this.Qs.push($o.ySt.kx(this,a,this.Qs.length)),this.ibt.push(0)}0===this.Qs.length&&(this.Qs=Ko,this.ibt=Ko),this.Kbt()&&(this.uwt.Agt(),this.uwt.Ugt()),this.uwt.CO().Jdt(this)}static kx(t,s,i){return $o.wr($o.Tgt,t,s,i)}Wdt(){for(const t of this.Qs)t.Wdt(),t.SSt()&&(this.ebt=!0);if(this.jwt)this.lbt(),this.k1t=this.ubt;else if(this.Jbt)4&this.zbt?this.Zbt():this.Qbt(),this.Jbt="",this.qbt=null;else if(this.iI===this.Ybt){const s=this.qyt,i=this.Sf.CO().l1t(this.uwt);this.qyt=s.bind(null,this.Sf.wL(),i)}else this.aSt?this.vyt()?(this.iI=this.tvt,this.k1t=this.svt):(this.iI=this.ivt,this.k1t=this.evt):this.Dft.zL().bL()?(this.cbt(),this.k1t=this.fbt):this.C2()?(this.iI=this.hvt,this.k1t=this.rvt):this.vyt()?(this.iI=this.nvt,this.k1t=this.ovt):this.avt()?(this.iI=this.lvt,this.k1t=this.uvt):this.Qs.length?this.Qs.every(t=>t.SSt())?(this.iI=this.cvt,this.k1t=this.fvt):this.ebt?(this.iI=this.dvt,this.k1t=this.pvt):this.Qs.every(t=>t.Hpt())?(h(this.Qs,this.ibt),this.iI=this.mvt,this.k1t=this.gvt):(this.iI=this.yvt,this.k1t=this.wvt):(this.iI=this.mvt,this.k1t=this.gvt)}lbt(){const t=this.jwt,s=this.jwt;this.ybt(t,s,this.wbt)}cbt(){const t=this.Dft.zL(),s=this.Dft.jL().O6();this.ybt(t,s,this.Sbt)}Qbt(){const t=this.uwt.CO(),i=t.PO(this.Jbt);if(i.rc()){const e=0!=(2&this.zbt);this.Xbt=i.RO();let s=[...new Set([...this.uwt.FO(),...this.Xbt.FO()])];s=t.Kdt(s);const h=!i.LO()&&this.Svt()?{Wyt:!0}:null;if(this.iI=$o.pmt.prototype.Oyt.bind(this.Xbt,s,this.Qs,e,h),this.Sf.s$()){const r=this;this.k1t=function*(){(r._bt()||r.Sf.yyt())&&(yield r);const t=yield*r.Xbt.Hyt(s,r.Qs,e,h);return t}}else this.k1t=Qo}else this.iI=Zo,this.k1t=Qo}Zbt(){const r=this.uwt.CO(),n=r.g1t(this.qbt,this.Jbt);if(n.rc()){const o=0!=(2&this.zbt);this.Xbt=n.RO();let s=[...new Set([...this.uwt.FO(),...this.Xbt.FO(),this.Dft,n.YN()])],t=(s=r.Kdt(s),!this.Dft.oJ()&&!n.YN().oJ()),i=!this.Dft.oJ()&&n.YN().oJ(),e=this.Dft.oJ(),h=null;if(!n.LO()&&this.Svt()&&((h=h||{}).Wyt=!0),!i&&o||((h=h||{}).Dyt=this.Dft,h.kyt=n.YN()),t||i||e&&!n.Swt()?this.iI=$o.pmt.prototype.Oyt.bind(this.Xbt,s,this.Qs,o,h):e&&(this.iI=$o.Ypt.prototype.xwt.bind(n,s,this.Qs)),this.Sf.s$()){const a=this;t||i||e&&!n.Swt()?this.k1t=function*(){(a._bt()||a.Sf.yyt())&&(yield a);const t=yield*a.Xbt.Hyt(s,a.Qs,o,h);return t}:e&&(this.k1t=function*(){(a._bt()||a.Sf.yyt())&&(yield a);const t=yield*n.Gwt(s,a.Qs);return t})}else this.k1t=Qo}else this.iI=Zo,this.k1t=Qo}ybt(t,s,i){const e=this.qyt,h=this.Qs;if(0===h.length)this.iI=t.qwt(e,s);else if(1===h.length){const r=h[0];if(r.Hpt())this.iI=t.bbt(e,s,r.ni(0));else{const n=t.qwt(e,s);this.iI=function(){return n(r.ni(0))}}}else if(2===h.length){const o=h[0],a=h[1];if(o.Hpt()&&a.Hpt())this.iI=t.vbt(e,s,o.ni(0),a.ni(0));else{const l=t.qwt(e,s);this.iI=function(){return l(o.ni(0),a.ni(0))}}}else if(3===h.length){const u=h[0],c=h[1],f=h[2];if(u.Hpt()&&c.Hpt()&&f.Hpt())this.iI=t.Mbt(e,s,u.ni(0),c.ni(0),f.ni(0));else{const d=t.qwt(e,s);this.iI=function(){return d(u.ni(0),c.ni(0),f.ni(0))}}}else this.iI=i}mJ(){return this.O7}vyt(){return 0!=(8&this.zbt)}byt(){return 0!=(16&this.zbt)}avt(){return 1===this.Ubt}C2(){return 2===this.Ubt}Kbt(){return 0!=(1&this.zbt)}Ogt(){return this.vyt()||this.byt()}YN(){return this.Dft}xbt(){return this.aSt?this.aSt.V6():this.Dft?this.Dft.zL():null}PSt(){const t=this.xbt();return t?t.Tbt():1}RO(){return this.uwt}Svt(){let t=this.uwt;do{if(t instanceof $o.Ypt&&t.LO())return!0}while(t=t.o1t());return!1}ck(){return this.Sf}KF(){return this.Sy}ayt(){return this.pgt.index}_bt(){return this.pgt.mgt}Cbt(t){this.pgt.mgt=!!t,this.uwt.Vgt()}Pbt(){return this.pgt.nbt}Bmt(){return!this._bt()&&!this.Sf.yyt()&&!this.Pbt()}Ebt(){return this.hbt||(this.hbt=new Map),this.hbt}Abt(){return this.rbt||(this.rbt=new Map),this.rbt}wbt(){const t=this.ibt;return h(this.Qs,t),this.qyt.apply(this.jwt,t)}*ubt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const t=this.ibt,s=(h(this.Qs,t),yield*this.qyt.apply(this.jwt,t));return s}return this.iI()}Sbt(){const t=this.ibt;return h(this.Qs,t),this.qyt.apply(this.Dft.jL().O6(),t)}*fbt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const t=this.ibt,s=(h(this.Qs,t),yield*this.qyt.apply(this.Dft.jL().O6(),t));return s}return this.iI()}mvt(){const i=this.ibt,e=this.Dft.e5().i5();for(let t=0,s=e.length;t<s;++t)this.qyt.apply(e[t].O6(),i)}*gvt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const i=this.ibt,e=this.Dft.e5().i5();for(let t=0,s=e.length;t<s;++t)yield*this.qyt.apply(e[t].O6(),i)}else this.mvt()}yvt(){const i=this.ibt,e=(h(this.Qs,i),this.Dft.e5().i5());for(let t=0,s=e.length;t<s;++t)this.qyt.apply(e[t].O6(),i)}*wvt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const i=this.ibt,e=(h(this.Qs,i),this.Dft.e5().i5());for(let t=0,s=e.length;t<s;++t)yield*this.qyt.apply(e[t].O6(),i)}else this.yvt()}cvt(){const e=this.Qs,h=this.ibt,s=this.qyt,r=this.Dft.e5().i5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);s.apply(n.O6(),h)}}*fvt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const e=this.Qs,h=this.ibt,s=this.qyt,r=this.Dft.e5().i5();for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);yield*s.apply(n.O6(),h)}}else this.cvt()}dvt(){const e=this.Qs,h=this.ibt,s=this.qyt,r=this.Dft.e5().i5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.SSt()||(h[t]=i.ni(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.SSt()&&(h[t]=o.ni(i))}s.apply(n.O6(),h)}}*pvt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const e=this.Qs,h=this.ibt,s=this.qyt,r=this.Dft.e5().i5();for(let t=0,s=e.length;t<s;++t){const i=e[t];i.SSt()||(h[t]=i.ni(0))}for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t){const o=e[t];o.SSt()&&(h[t]=o.ni(i))}yield*s.apply(n.O6(),h)}}else this.dvt()}lvt(){const e=this.Qs,h=this.ibt,s=this.qyt,t=this.Dft,i=t.bvt(),r=t.e5().i5();i.vvt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);s.apply(n.O6(),h)}i.Mvt(s)}*uvt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const e=this.Qs,h=this.ibt,s=this.qyt,t=this.Dft,i=t.bvt(),r=t.e5().i5();i.vvt(s);for(let i=0,t=r.length;i<t;++i){const n=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);yield*s.apply(n.O6(),h)}i.Mvt(s)}else this.lvt()}hvt(){const t=this.ibt;return h(this.Qs,t),this.qyt.apply(this.aSt||this.Dft,t)}*rvt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const s=this.ibt;h(this.Qs,s);let t=this.qyt.apply(this.aSt||this.Dft,s);return $o.Xo(t)?yield*t:t}return this.hvt()}ivt(){const t=this.Dft,s=t.oJ(),e=t.nSt(),h=this.Qs,r=this.ebt,n=this.ibt,o=this.qyt,a=this.lSt,l=t.e5().i5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.SSt()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.SSt()&&(n[t]=f.ni(i))}const c=s?u.YN().cSt(e):0;o.apply(u.Hht()[a+c].O6(),n)}}*evt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const t=this.Dft,s=t.oJ(),e=t.nSt(),h=this.Qs,r=this.ebt,n=this.ibt,o=this.qyt,a=this.lSt,l=t.e5().i5();for(let t=0,s=h.length;t<s;++t){const i=h[t];i.SSt()||(n[t]=i.ni(0))}for(let i=0,t=l.length;i<t;++i){const u=l[i];if(r)for(let t=0,s=h.length;t<s;++t){const f=h[t];f.SSt()&&(n[t]=f.ni(i))}const c=s?u.YN().cSt(e):0;yield*o.apply(u.Hht()[a+c].O6(),n)}}else this.ivt()}nvt(){const e=this.Qs,h=this.ibt,s=this.qyt,r=this.Dft.e5().i5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);n.push(s.apply(o.O6(),h))}return Promise.all(n)}*ovt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const e=this.Qs,h=this.ibt,s=this.qyt,r=this.Dft.e5().i5(),n=[];for(let i=0,t=r.length;i<t;++i){const o=r[i];for(let t=0,s=e.length;t<s;++t)h[t]=e[t].ni(i);n.push(yield*s.apply(o.O6(),h))}return Promise.all(n)}return this.nvt()}tvt(){const t=this.Dft,s=t.oJ(),e=t.nSt(),h=this.Qs,r=this.ibt,n=this.qyt,o=this.lSt,a=t.e5().i5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ni(i);const c=s?u.YN().cSt(e):0;l.push(n.apply(u.Hht()[o+c].O6(),r))}return Promise.all(l)}*svt(){if((this._bt()||this.Sf.yyt())&&(yield this),this.Pbt()){const t=this.Dft,s=t.oJ(),e=t.nSt(),h=this.Qs,r=this.ibt,n=this.qyt,o=this.lSt,a=t.e5().i5(),l=[];for(let i=0,t=a.length;i<t;++i){const u=a[i];for(let t=0,s=h.length;t<s;++t)r[t]=h[t].ni(i);const c=s?u.YN().cSt(e):0;l.push(yield*n.apply(u.Hht()[o+c].O6(),r))}return Promise.all(l)}return this.tvt()}async Ybt(){try{await this.qyt()}catch(t){console.error(`Unhandled exception running script %c${this.uwt.PX().uf()}, event ${this.uwt.qgt()}, action ${this.ayt()+1}:`,"font-size: 1.2em; font-weight: bold;",t),self.C3Debugger&&self.C3Debugger._SetLastErrorScript(this),$o.Mmt.Yyt()||(console.info("%cTip:%c run this to highlight in Construct the last script that had an error: %cgoToLastErrorScript()","font-weight: bold; text-decoration: underline","","font-weight: bold"),$o.Mmt.$yt())}}*$bt(){return(this._bt()||this.Sf.yyt())&&(yield this),this.Ybt()}Fq(){return this.hbt&&this.hbt.size?{ex:$o.zo(this.hbt)}:null}Oq(t){if(this.hbt&&(this.hbt.clear(),this.hbt=null),t){const s=t.ex;s&&(this.hbt=$o.Jo(s))}}}}{let d=function(t){return t instanceof n?w.O5(t):t.uV()},u=function(t){return d(t).jD()},h=function(t){return w.O5(t)},C=function(t,s,i,e){const h=s.a4(),r=i.a4();h<r?t.Set(s,i,e):t.Set(i,s,e)},P=function(t,s,i){const e=s.a4(),h=i.a4();e<h?t.uc(s,i):t.uc(i,s)},E=function(t,s){t.fc(s)},A=function(t,s,i){const e=s.a4(),h=i.a4();return e<h?t.ni(s,i):t.ni(i,s)},e=function(t,s,i,e){if(!s)return!1;const h=0!==i||0!==e,r=t.jD(),n=w.hO(),o=w.s1t(),a=o.RO().u0t(),l=o.YN(),u=o.Gbt(),c=s.e5(),f=l!==s;_=s,G=f&&!u;let d,p=0,m=0,g=I=!1;c.qft()?(S._(r.SB()),S.offset(i,e),n.xvt(r.HD(),s,S,b),d=b):!a||w.Tvt()&&!c.i0t().length&&c.s0t().length?d=c.s0t():(d=c.i0t(),I=!0),h&&(p=r.Hv(),m=r.Jv(),r.mB(i,e),r.cB());for(const y of d)if(n.Fk(t,y)){if(g=!0,u)break;f&&O.add(y)}return h&&(r.fB(p,m),r.cB()),R.Un(b),g},i=function(t){const s=w.OO().u0t(),i=_.e5(),e=i.s0t(),h=i.i0t();i.qft()?(i.r0t(O),s&&(R.Un(h),i.n0t(O,_.i5()))):s?I?i.o0t(O):(i.n0t(O,e),i.r0t(O)):i.r0t(O),_.Lyt()},v=function(t,s){G&&(s&&i(),O.clear(),_=null,G=!1)},s=function(t,s){const i=w.LD(s);if(i){const e=t.e5();if(e.qft()||e.s0t().includes(i))if(t.oJ()){if(i.YN().Gvt(t))return e.l0t(i),t.Lyt(),!0}else if(i.YN()===t)return e.l0t(i),t.Lyt(),!0}return!1},r=function(t,h){const r=t.e5();if(r.qft()){r.t0t(!1),r.Jft();const i=t.i5();for(let t=0,s=i.length;t<s;++t){const e=i[t];e.a4()===h?r.Qft(e):r.Zft(e)}return t.Lyt(),!!r.s0t().length}{let i=r.s0t(),e=0;for(let t=0,s=i.length;t<s;++t){const n=i[t];(i[e]=n).a4()===h?r.Qft(n):++e}return R.Hn(i,e),t.Lyt(),!!i.length}},R=(d,u,h,C,P,E,A,e,i,v,s,r,self.Bs),l=new R.$o,M={},x={},T={},w=null,n=(R._vt=function(t){w=t},self.qN),S=(x.Ivt=function(t,s){return R.compare(this.jD().Hv(),t,s)},T.Ivt=function(t,s){return R.compare(this.x,t,s)},x.Cvt=function(t,s){return R.compare(this.jD().Jv(),t,s)},T.Cvt=function(t,s){return R.compare(this.y,t,s)},x.Pvt=function(){return this.jD().xB()},T.Pvt=function(){return this.MB()},M.Evt=function(){const t=u(this),s=t.TD(),i=t.SB();return i.Fl()<0||i.Ol()<0||i.Al()>s.Em()||i.Rl()>s.Wm()},M.Avt=function(i,e,h){const t=this.e5(),r=t.i5();if(!r.length)return!1;let n=r[0],o=n.jD(),a=n,l=R.Er(o.Hv(),o.Jv(),e,h);for(let t=1,s=r.length;t<s;++t){n=r[t],o=n.jD();const u=R.Er(o.Hv(),o.Jv(),e,h);(0===i&&u<l||1===i&&u>l)&&(l=u,a=n)}return t.l0t(a),!0},x.Uv=function(t){const s=this.jD();s.Hv()!==t&&(s.Uv(t),s.cB())},T.Uv=function(t){this.x=+t},x.qv=function(t){const s=this.jD();s.Jv()!==t&&(s.qv(t),s.cB())},T.qv=function(t){this.y=+t},x.Rvt=function(t,s){const i=this.jD();i.Fvt(t,s)||(i.fB(t,s),i.cB())},T.Rvt=function(t,s){this.setPosition(t,s)},M.Ovt=function(t,s){if(t){const i=d(this),e=t.t5(i);if(e){const[h,r]=e.Dvt(s),n=i.jD();n.Hv()===h&&n.Jv()===r||(n.fB(h,r),n.cB())}}},M.kvt=function(t){if(0!==t){const s=u(this);s.mB(s.Lvt()*t,s.Nvt()*t),s.cB()}},x.Bvt=function(t,s){if(0!==s){const i=this.jD();t=R.Ir(t),i.mB(Math.cos(t)*s,Math.sin(t)*s),i.cB()}},T.Bvt=function(t,s){0!==s&&(t=R.Ir(t),this.pB(Math.cos(t)*s,Math.sin(t)*s))},x.Hv=function(){return this.jD().Hv()},T.Hv=function(){return this.x},x.Jv=function(){return this.jD().Jv()},T.Jv=function(){return this.y},M.YO=function(){return w.YO(d(this))},x.Wvt=function(t,s){return R.compare(this.jD().Em(),t,s)},T.Wvt=function(t,s){return R.compare(this.width,t,s)},x.Vvt=function(t,s){return R.compare(this.jD().Wm(),t,s)},T.Vvt=function(t,s){return R.compare(this.height,t,s)},x.Lm=function(t){const s=this.jD();s.Em()!==t&&(s.Lm(t),s.cB())},T.Lm=function(t){this.width=t},x.Am=function(t){const s=this.jD();s.Wm()!==t&&(s.Am(t),s.cB())},T.Am=function(t){this.height=t},x._C=function(t,s){const i=u(this);i.Em()===t&&i.Wm()===s||(i._C(t,s),i.cB())},T._C=function(t,s){this.w5(t,s)},x.Em=function(){return this.jD().Em()},T.Em=function(){return this.width},x.Wm=function(){return this.jD().Wm()},T.Wm=function(){return this.height},M.jvt=function(){return u(this).SB().Al()},M.Hvt=function(){return u(this).SB().Rl()},M.Uvt=function(){return u(this).SB().Fl()},M.zvt=function(){return u(this).SB().Ol()},M.Jvt=function(){const t=u(this).SB();return(t.Al()+t.Fl())/2},M.qvt=function(){const t=u(this).SB();return(t.Rl()+t.Ol())/2},M.Xvt=function(t,s){return R.Rr(u(this).GetAngle(),R.Ir(s))<=R.Ir(t)},M.Yvt=function(t){return R.Or(u(this).GetAngle(),R.Ir(t))},M.$vt=function(t,s){const i=R.Ir(t),e=R.Ir(s),h=u(this).GetAngle(),r=!R.Or(e,i);return r?!(!R.Or(h,i)&&R.Or(h,e)):R.Or(h,i)&&!R.Or(h,e)},x.v5=function(t){const s=this.jD(),i=R._r(R.Ir(t));isNaN(i)||s.GetAngle()===i||(s.v5(i),s.cB())},T.v5=function(t){this.wB=t},M.Kvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.v5(s.GetAngle()+R.Ir(t)),s.cB()}},M.Zvt=function(t){if(!isNaN(t)&&0!==t){const s=u(this);s.v5(s.GetAngle()-R.Ir(t)),s.cB()}},M.Qvt=function(t,s){const i=u(this),e=i.GetAngle(),h=R.Fr(e,R.Ir(s),R.Ir(t));isNaN(h)||e===h||(i.v5(h),i.cB())},M.tMt=function(t,s,i){const e=u(this),h=e.GetAngle(),r=s-e.Hv(),n=i-e.Jv(),o=Math.atan2(n,r),a=R.Fr(h,o,R.Ir(t));isNaN(a)||h===a||(e.v5(a),e.cB())},M.sMt=function(t,s){const i=u(this),e=i.GetAngle(),h=t-i.Hv(),r=s-i.Jv(),n=Math.atan2(r,h);isNaN(n)||e===n||(i.v5(n),i.cB())},x.GetAngle=function(){return R.Cr(this.jD().GetAngle())},T.GetAngle=function(){return this.wB},M.iMt=function(t,s){return R.compare(R.Xr(100*u(this).sA(),6),t,s)},x.nN=function(){return this.jD().nN()},T.nN=function(){return this.isVisible},M.hN=function(t){const s=u(this);t=2===t?!s.nN():0!==t,s.nN()!==t&&(s.hN(t),w.YD())},M.eA=function(t){const s=R.Gr(t/100,0,1),i=u(this);if(i.p6()){if(i.gnt().eMt()===s)return}else if(i.sA()===s)return;i.eA(s),w.YD()},M.hMt=function(t){l.Aa(t);const s=u(this);s.GB().xa(l)||(s._B(l),w.YD())},M.rA=function(){const t=u(this).GB();return R.Kr(t.da(),t.pa(),t.ya(),t.wa())},M.sA=function(){return R.Xr(100*u(this).sA(),6)},M.rMt=function(t){return!!t&&u(this).HD()===t},M.nMt=function(i){const t=this.e5(),e=t.i5();if(!e.length)return!1;let s=e[0],h=s;for(let t=1,s=e.length;t<s;++t){const r=e[t],n=r.jD(),o=h.jD(),a=n.HD().KF(),l=o.HD().KF();0===i?(l<a||a===l&&n.UD()>o.UD())&&(h=r):(a<l||a===l&&n.UD()<o.UD())&&(h=r)}return t.l0t(h),!0},x.oMt=function(t,s,i){const e=this.jD(),h=0===t?e.Xv():e.yB();return R.compare(h,s,i)},T.oMt=function(t,s,i){const e=0===t?this.xN:this.gB;return R.compare(e,s,i)},x.aMt=function(){this.jD().CB()},T.aMt=function(){this.IB()},x.lMt=function(){this.jD().EB()},T.lMt=function(){this.PB()},M.uMt=function(t){t&&u(this).RB(t)},M.cMt=function(t,s){const i=0===t;if(s){const e=d(this),h=s.fMt(e);h&&e.jD().DB(h,i)}},x.Yv=function(t){const s=this.jD();s.Xv()!==t&&(s.Yv(t),w.YD())},T.Yv=function(t){this.xN=t},M.dMt=function(){return u(this).HD().KF()},M.pMt=function(){return u(this).HD().uf()},x.mMt=function(){return this.jD().UD()},T.mMt=function(){return this.zIndex},x.gMt=function(){return this.jD().Xv()},T.gMt=function(){return this.xN},x.yMt=function(){return this.jD().yB()},T.yMt=function(){return this.gB},M.wMt=function(t){const s=d(this),i=s.YN().m5().Jht(t);if(i){const e=i.KF(),h=s.jD().lB();return h.K6(e)}},M.SMt=function(t,s){const i=d(this),e=i.YN().m5().Jht(s);if(e){const h=e.KF(),r=1===t,n=i.jD().lB();n.K6(h)!==r&&(n.Z6(h,r),n.Q6(),w.YD())}},M.bMt=function(t,s,i){const e=d(this),h=e.YN().m5().Jht(t);if(h){s=Math.floor(s);const r=h.DT().LT(s);if(r){"color"===r?(l.Aa(i),i=l):"percent"===r&&(i/=100);const n=h.KF(),o=e.jD().lB(),a=o.sW(n,s,i);a&&o.K6(n)&&w.YD()}}},R.wr(R.Rect)),F=[],b=[],G=!1,_=null,I=!1,O=new Set;M.vMt=function(w){if(this.Sf.MMt())return function*(w){if(w){let t=this.Sf,s=t.hO(),e=t.CO(),i=e.VO(),h=e.s1t(),r=h.YN(),n=h.Ebt(),o=h.Abt(),a=i.e8(),l=t.Utt(),u=l-1,c=a.OO(),f=i.h8(c),d=n.get("collmemory"),p=(d||(d=R.wr(R.nc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Qf().addEventListener("instancedestroy",t=>E(d,t.z6))),r.e5()),m=w.e5(),g=p.i5(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.qft()?(s.xvt(S.jD().HD(),w,S.jD().SB(),F),y=F,s.xMt(S,w,y)):y=m.i5();for(let t=0;t<y.length;++t){const b=y[t];if(s.Fk(S,b)||s.TMt(S,b)){let t=A(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.i8(),x=(e.l8(M),r.e5()),T=w.e5();if(x.t0t(!1),T.t0t(!1),r===w){const G=x.s0t();R.Un(G),G.push(S),G.push(b),r.Lyt()}else{const _=x.s0t(),I=T.s0t();R.Un(_),R.Un(I),_.push(S),I.push(b),r.Lyt(),w.Lyt()}yield*c.Cyt(a,f),e.c8(M)}}else P(d,S,b)}R.Un(F)}i.m8()}return!1}.call(this,w);if(w){let t=this.Sf,s=t.hO(),e=t.CO(),i=e.VO(),h=e.s1t(),r=h.YN(),n=h.Ebt(),o=h.Abt(),a=i.e8(),l=t.Utt(),u=l-1,c=a.OO(),f=i.h8(c),d=n.get("collmemory"),p=(d||(d=R.wr(R.nc),n.set("collmemory",d)),o.get("collisionCreatedDestroyCallback")||(o.set("collisionCreatedDestroyCallback",!0),t.Qf().addEventListener("instancedestroy",t=>E(d,t.z6))),r.e5()),m=w.e5(),g=p.i5(),y=null;for(let t=0;t<g.length;++t){const S=g[t];m.qft()?(s.xvt(S.jD().HD(),w,S.jD().SB(),F),y=F,s.xMt(S,w,y)):y=m.i5();for(let t=0;t<y.length;++t){const b=y[t];if(s.Fk(S,b)||s.TMt(S,b)){let t=A(d,S,b),s=!1,i=-2;"number"==typeof t&&(s=!0,i=t);const v=!s||i<u;if(C(d,S,b,l),v){const M=c.i8(),x=(e.l8(M),r.e5()),T=w.e5();if(x.t0t(!1),T.t0t(!1),r===w){const G=x.s0t();R.Un(G),G.push(S),G.push(b),r.Lyt()}else{const _=x.s0t(),I=T.s0t();R.Un(_),R.Un(I),_.push(S),I.push(b),r.Lyt(),w.Lyt()}c.u8(a,f),e.c8(M)}}else P(d,S,b)}R.Un(F)}i.m8()}return!1},M.GMt=function(t){return e(d(this),t,0,0)},M._Mt=function(t,s,i){return e(d(this),t,s,i)},M.QB=function(){return u(this).QB()},M.Lq=function(){return u(this).Lq()},M.IMt=function(i,e){const t=this.e5(),h=t.i5();if(0===h.length)return!1;let s=i.e5(),r=s.i5();if(s.qft()){const a=[...this.Sf.CMt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.qft()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];if(1===e)for(const u of l.HB())u.PMt(i)&&(null===n||n.has(u))&&o.add(u);else{let t;if(0===e){if(null===(t=l.WB()))continue}else t=l.jB();t.PMt(i)&&(null===n||n.has(t))&&o.add(t)}}return 0!==o.size&&(s.r0t(o),i.Lyt(),!0)},M.EMt=function(i,e){const t=this.e5(),h=t.i5();if(0===h.length)return!1;let s=i.e5(),r=s.i5();if(s.qft()){const a=[...this.Sf.CMt(i)];0<a.length&&(r=r.concat(a))}if(0===r.length)return!1;const n=s.qft()?null:new Set(r),o=new Set;for(let t=0,s=h.length;t<s;++t){const l=h[t];2!==e||l.Lq()||!l.PMt(i)||null!==n&&!n.has(l)||o.add(l);for(const u of 0===e?l.children():l.XB())2===e&&u.Lq()||u.PMt(i)&&(null===n||n.has(u))&&o.add(u)}return 0!==o.size&&(s.r0t(o),i.Lyt(),!0)},M.AMt=function(i,e,h){const t=this.e5(),r=t.i5();if(0===r.length)return!1;let s=i.e5(),n=s.i5();if(s.qft()){const l=[...this.Sf.CMt(i)];0<l.length&&(n=n.concat(l))}if(0===n.length)return!1;const o=s.qft()?null:new Set(n),a=[];for(let t=0,s=r.length;t<s;++t){const u=r[t];if(0===e){const c=u.qB(h);null!==c&&c.PMt(i)&&(null===o||o.has(c))&&a.push(c)}else if(1===e)for(const f of u.children())if(f.PMt(i)){if(0===h){null!==o&&!o.has(f)||a.push(f);break}--h}}return 0!==a.length&&(s.h0t(a),i.Lyt(),!0)},M.RMt=function(t,s,i){const e=d(this);switch(t){case 0:default:return R.compare(e.zB(),s,i);case 1:return R.compare(e.FMt(),s,i)}},M.$B=function(t,s,i,e,h,r,n,o,a,l){const u=d(this),c=w.e1t().YN();for(const f of t.OMt(u,c)){if(!f.zL().RL())return;u.$B(f,{s6:s,e6:i,r6:e,o6:h,l6:r,d6:n,c6:o,m6:a,y6:l})}},M.KB=function(t){const s=d(this),i=w.e1t().YN();for(const e of t.OMt(s,i))s.KB(e)},M.DMt=function(){const t=d(this);if(t.QB()){const s=t.WB();s.KB(t)}},M.kMt=function(){return d(this).zB()},M.LMt=function(){return d(this).FMt()},M.NMt=function(t,s){t=Math.floor(t),s=Math.floor(s);const i=u(this);t<2||s<2||!isFinite(t)||!isFinite(s)?(i.M6(),i.cB()):i.b6(t,s)},M.T6=function(t,s,i,e,h,r,n,o){const a=u(this),l=a.T6(t,s,{mode:0===i?"absolute":"relative",x:e,y:h,xN:r,u:n,v:o});l&&a.cB()},M.BMt=function(){const t=u(this);return t._6()?t.I6().wM():0},M.WMt=function(){const t=u(this);return t._6()?t.I6().SM():0},M.VMt=function(t){const s=u(this);t=2===t?!s.nN():0!==t,s.nN()!==t&&s.hN(t)},M.N6=function(t,s){this instanceof self.qN?this.bj(t,s):this.N6(t,s)},M.jMt=function(t,s){this instanceof self.qN?this.vj(t,""+s):this.jMt(t,""+s)},M.HMt=function(t){this instanceof self.qN?this.Mj(t):this.HMt(t)},M.UMt=function(){this instanceof self.qN?this.yj():this.D6()},M.zMt=function(){this instanceof self.qN?this.wj():this.k6()},M.JMt=function(){return this instanceof self.qN?this.Sj():this.JMt()},M.qMt=function(t){this instanceof self.qN?this._setEnabled(0!==t):this.XMt(0!==t)},M.YMt=function(){return this instanceof self.qN?this.swt():this.$Mt()},x.KMt=function(t,s,i){return R.compare(this.uV().rnt(t),s,i)},T.KMt=function(t,s,i){return R.compare(h(this).rnt(t),s,i)},x.ZMt=function(t){return!!this.uV().rnt(t)},T.ZMt=function(t){return!!h(this).rnt(t)},M.QMt=function(i,e){const t=this.e5(),h=t.i5();if(!h.length)return!1;let r=this.oJ(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t],l=r?a.YN().rSt(this.nSt()):0,u=a.rnt(l+e);(null===n||0===i&&u<o||1===i&&u>o)&&(o=u,n=a)}return t.l0t(n),!0},M.t2t=function(t){return(this.Sf.s1t().Gbt()?r:s)(this,t)},M.HW=function(t){const s=new Set(R.ao(t)),i=d(this).g4();return s.ye(i)},M.s2t=function(){return d(this).i2t()},M.e2t=function(){return d(this).g4().size},M.h2t=function(t){return d(this).r2t(t)},M.n2t=function(t,s){const i=R.ao(s);if(0!==i.length){const e=d(this),h=new Set(e.g4());if(0===t)for(const r of i)h.add(r);else if(1===t)for(const n of i)h.delete(n);e.w4(h)}},M.o2t=function(){w.s4(d(this))},M.a2t=function(){return!0},M.l2t=function(){return!0},x.u2t=function(t,s){this.uV().nnt(t,s)},T.u2t=function(t,s){h(this).nnt(t,s)},x.c2t=function(t,s){const i=this.uV(),e=i.rnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.nnt(t,e+s)},T.c2t=function(t,s){const i=h(this),e=i.rnt(t);"number"==typeof e&&"number"!=typeof s?s=parseFloat(s):"string"==typeof e&&"string"!=typeof s&&(s=s.toString()),i.nnt(t,e+s)},x.f2t=function(t,s){const i=this.uV(),e=i.rnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.nnt(t,e-s))},T.f2t=function(t,s){const i=h(this),e=i.rnt(t);"number"==typeof e&&("number"!=typeof s&&(s=parseFloat(s)),i.nnt(t,e-s))},x.d2t=function(t,s){this.uV().nnt(t,s?1:0)},T.d2t=function(t,s){h(this).nnt(t,s?1:0)},x.p2t=function(t){const s=this.uV();s.nnt(t,0===s.rnt(t)?1:0)},T.p2t=function(t){const s=h(this);s.nnt(t,0===s.rnt(t)?1:0)},M.m2t=function(t){let s;try{s=JSON.parse(t)}catch(t){return void console.error("Failed to load from JSON string: ",t)}const i=d(this);w.g2t(),i.$$("state"),i.eM(s,"state"),w.y2t("state",{w2t:!0})},M.S2t=function(){return JSON.stringify(d(this).iM("state"))},M.b2t=function(){return d(this).YN().uf()},M.v2t=function(){let t=w.t1t().W0t(),s=t.r5();for(const i of w.CMt(t))++s;return s},M.M2t=function(){return w.t1t().W0t().e5().i5().length},x.IY=function(){return this.uV().IY()},T.IY=function(){return h(this).IY()},x.a4=function(){return this.uV().a4()},T.a4=function(){return h(this).a4()},M._pt=function(t){const s=d(this);return t.toLowerCase()===w.CO().Ept(s)},M.b4=function(t){const s=d(this);w.CO().b4(s,t)},M.x2t=function(t){return w.CO().ipt().T2t(this.e5().i5(),t),!0},M.G2t=function(){return d(this).u4()},R._2t=function(t,s,i){const e=t[1],h=t[3],r=t[4],n=t[5],o=t[6],a=t[7],l=t[8],u=t[10],c=t[11],f=t[12],d=t[13],p=t[14],m=t[15],g=t[16],y=s.MY,w=s.frt,S=s.drt,b=Object.assign({},M,2<=i?T:x);h&&(y.Ivt=b.Ivt,y.Cvt=b.Cvt,y.Pvt=b.Pvt,y.Evt=b.Evt,y.Avt=b.Avt,w.Uv=b.Uv,w.qv=b.qv,w.Rvt=b.Rvt,w.Ovt=b.Ovt,w.kvt=b.kvt,w.Bvt=b.Bvt,S.I2t=b.Hv,S.C2t=b.Jv,S.dt=b.YO),r&&(y.Wvt=b.Wvt,y.Vvt=b.Vvt,w.Lm=b.Lm,w.Am=b.Am,w._C=b._C,S.P2t=b.Em,S.E2t=b.Wm,S.A2t=b.jvt,S.R2t=b.Hvt,S.F2t=b.Uvt,S.O2t=b.zvt,S.D2t=b.Jvt,S.k2t=b.qvt),n&&(y.L2t=b.Xvt,y.N2t=b.Yvt,y.$vt=b.$vt,w.v5=b.v5,w.Kvt=b.Kvt,w.Zvt=b.Zvt,w.Qvt=b.Qvt,w.tMt=b.tMt,w.sMt=b.sMt,S.B2t=b.GetAngle),o&&(y.nN=b.nN,y.iMt=b.iMt,w.hN=b.hN,w.eA=b.eA,w.hMt=b.hMt,S.Opacity=b.sA,S.W2t=b.rA),a&&(y.rMt=b.rMt,y.nMt=b.nMt,y.oMt=b.oMt,w.aMt=b.aMt,w.lMt=b.lMt,w.uMt=b.uMt,w.cMt=b.cMt,w.Yv=b.Yv,S.dMt=b.dMt,S.pMt=b.pMt,S.mMt=b.mMt,S.gMt=b.gMt,S.yMt=b.yMt),l&&(y.wMt=b.wMt,w.SMt=b.SMt,w.bMt=b.bMt),d&&(y.QB=b.QB,y.Lq=b.Lq,y.IMt=b.IMt,y.EMt=b.EMt,y.AMt=b.AMt,y.RMt=b.RMt,w.$B=b.$B,w.KB=b.KB,w.DMt=b.DMt,S.kMt=b.kMt,S.LMt=b.LMt),p&&(w.NMt=b.NMt,w.T6=b.T6,S.BMt=b.BMt,S.WMt=b.WMt),u&&(y.nN=b.nN,w.hN=b.VMt,w.V2t=b.N6,w.j2t=b.jMt,w.H2t=b.HMt),c&&(y.U2t=b.JMt,w.z2t=b.UMt,w.J2t=b.zMt),f&&(y.rc=b.YMt,w.q2t=b.qMt),m&&(y.vMt=b.vMt,y.GMt=b.GMt,y._Mt=b._Mt,s.X2t=v),e||(y.KMt=b.KMt,y.ZMt=b.ZMt,y.QMt=b.QMt,y.t2t=b.t2t,y.HW=b.HW,w.u2t=b.u2t,w.c2t=b.c2t,w.f2t=b.f2t,w.d2t=b.d2t,w.p2t=b.p2t,w.n2t=b.n2t,y.a2t=b.a2t,y.l2t=b.l2t,w.o2t=b.o2t,w.m2t||(w.m2t=b.m2t),S.S2t||(S.S2t=b.S2t),S.v2t=b.v2t,S.M2t=b.M2t,S.Y2t=b.IY,S.$2t=b.a4,S.b2t=b.b2t,S.s2t=b.s2t,S.e2t=b.e2t,S.h2t=b.h2t,y._pt=b._pt,w.b4=b.b4,w.x2t=b.x2t),g&&(S.G2t=b.G2t)}}{const ta=self.Bs;ta.ept=class extends ta.gr{constructor(t){super(),this.f0t=t,this.If="",this.P3=-1,this.K2t="",this.Z2t=!1,this.Q2t=null,this.v0t=0,this.Ymt=[],this.I0t=null,this.txt=new Map,this.sxt=null,this.ixt=null,this.hxt=-1,this.twt=null,this.rxt=null,this.nxt=!1}Sr(){this.If="",this.P3=-1,this.K2t="",this.Q2t=null,this.ixt=null,this.twt=null,this.rxt=null,this.hxt=-1,ta.Un(this.Ymt),this.I0t&&(this.I0t.clear(),this.I0t=null);for(const t of this.txt.values())t.Sr();this.txt.clear(),this.sxt=null}jv(){const t=this.f0t,s=t.ck().nJ(),i=t.t1t(),e=(this.Q2t=i.OO(),this.v0t=i.F0t()+1,t.Xpt(this.Q2t));e&&(this.ixt=e,this.twt=e.ywt(),this.rxt=e.gwt().map(t=>t.Bet()),e.vyt())&&(this.hxt=e.vwt());for(const r of s){const n=r.e5();n.qft()&&!this.Q2t.zgt(r)||(this.Ymt.push(r),this.txt.set(r,ta.wr(ta.oxt,n)))}const h=t.DO();this.I0t=0<h.size?h:null}axt(t){this.If="timer",this.jv(),this.P3=this.f0t.ck().ZO()+t}lxt(t){this.If="signal",this.jv(),this.K2t=t.toLowerCase()}T2t(t,s){this.If="instance-signals",this.jv(),this.K2t=s.toLowerCase(),this.sxt=new Set(t)}uxt(t){this.If="promise",this.jv(),t.then(()=>this.Mpt()).catch(t=>{console.warn("[C3 runtime] Promise rejected in 'Wait for previous actions to complete': ",t),this.Mpt()})}cxt(){return"timer"===this.If}bpt(){return"signal"===this.If}Cpt(){return"instance-signals"===this.If}Upt(){return"promise"===this.If}vpt(){return this.K2t}fxt(){return this.Z2t}Mpt(){this.Z2t=!0}Ppt(t){this.sxt.delete(t),0===this.sxt.size&&this.Mpt()}npt(){return this.cxt()?this.P3<=this.f0t.ck().ZO():this.fxt()}dxt(t){t.C0t(this.Q2t,this.v0t);for(const[i,e]of this.txt.entries()){const h=i.e5();e.C0t(h)}this.I0t&&t.J0t([...this.I0t]);const s=this.ixt;s&&(s.Ryt(this.twt),s.gwt().map((t,s)=>t.bht(this.rxt[s])),s.vyt())&&s.Mwt(this.hxt)}opt(t){this.dxt(t),this.Q2t.Myt(t),this.ixt&&this.ixt.vyt()&&this.ixt.jyt(this.hxt),this.f0t.Z1t(this.Ymt),this.nxt=!0}async cpt(t){this.dxt(t);for(const s of this.Q2t.xyt(t))await this.f0t.ck().D1t(s);this.ixt&&this.ixt.vyt()&&this.ixt.jyt(this.hxt),this.f0t.Z1t(this.Ymt),this.nxt=!0}apt(){return this.nxt}jft(t){for(const s of this.txt.values())s.jft(t);if("instance-signals"===this.If){for(const i of t)this.sxt.delete(i);0===this.sxt.size&&this.Mpt()}}Fq(){const t={},s={wt:this.If,t:this.P3,st:this.K2t,s:this.Z2t,ev:this.Q2t.mJ(),sm:this.Ymt.map(t=>t.mJ()),dsm:this.I0t?[...this.I0t].map(t=>t.mJ()):null,sols:t};this.Q2t.lyt(this.v0t)&&(s.act=this.Q2t.h1t(this.v0t).mJ());for(const[i,e]of this.txt)t[i.mJ().toString()]=e.Fq();return"instance-signals"===this.If&&(s.pi=[...this.sxt].map(t=>t.a4())),s}static zpt(t,s){const i=t.ck(),e=t.d1t(s.ev);if(!e)return null;let h=0;if(s.hasOwnProperty("act")){const n=t.m1t(s.act);if(!n)return null;h=n.KF()}const r=ta.wr(ta.ept,t);r.P3=s.t,s.hasOwnProperty("wt")?r.If=s.wt:r.If=-1===r.P3?"signal":"timer",r.K2t=s.st,r.Z2t=s.s,r.Q2t=e,r.v0t=h;for(const o of s.sm){const a=i.Yj(o);a&&r.Ymt.push(a)}if(Array.isArray(s.dsm))for(const l of s.dsm){const u=i.Yj(l);u&&(r.I0t||(r.I0t=new Set),r.I0t.add(u))}for(const[c,f]of Object.entries(s.sols)){const d=parseInt(c,10),p=i.Yj(d);if(p){const m=ta.wr(ta.oxt,null);m.Oq(t,f),r.txt.set(p,m)}}if("instance-signals"===r.If){r.sxt=new Set;for(const g of s.pi){const y=i.LD(g);y&&r.sxt.add(y)}}return r}}}{const sa=self.Bs;sa.oxt=class extends sa.gr{constructor(t){super(),this.Dft=null,this.pxt=!0,this.i7=[],t&&(this.Dft=t.YN(),this.pxt=t.qft(),sa.Xn(this.i7,t.s0t()))}Sr(){this.Dft=null,sa.Un(this.i7)}C0t(t){t.t0t(this.pxt),sa.Xn(t.s0t(),this.i7)}jft(t){sa.Qn(this.i7,t)}Fq(){return{sa:this.pxt,insts:this.i7.map(t=>t.a4())}}Oq(t,s){const i=t.ck();this.pxt=!!s.sa,sa.Un(this.i7);for(const e of s.insts){const h=i.LD(e);h&&this.i7.push(h)}}}}{let l=function(t,s){let i=t.get(s);return i||(i=new Map,t.set(s,i)),i};l;const ia=self.Bs;ia.mxt=class extends ia.gr{constructor(t){super(),this.Sf=t.runtime,this.gxt=!!t.SL,this.yxt=!!t.wxt,this.Sxt=!!t.GL,this.bxt=!!t.vxt,this.Mxt=!!t.IL,this.xxt=!!t.Txt,this.Gxt=!!t.FL,this._xt=!!t.xL,this.Ixt=!!t.PL,this.Cxt=t.Pxt,this.Ext=null,this.Axt=new Map,this.Rxt=new Map,this.Fxt=new Map,this.Oxt=new Map,this.Dxt=t.kxt,this.Lxt=null}Sr(){this.Sf=null}ck(){return this.Sf}Nxt(){}Ipt(){return(2<=this.Tbt()?this.Lxt:this).constructor}Tbt(){return this.Cxt}Bxt(t=!1){let s=this.Dxt;return t&&"function"!=typeof s&&2<=this.Tbt()?globalThis.yV:s}bL(){return this.gxt}ML(){return this.yxt}TL(){return this._xt}EL(){return this.Ixt}_L(){return this.Sxt}yv(){return this.bxt}CL(){return this.Mxt}RL(){return this.xxt}OL(){return this.Gxt}qwt(t,s){if(!s)throw new Error("missing 'this' binding");let i=this.Axt.get(t);return i||(i=t.bind(s),this.Axt.set(t,i)),i}bbt(t,s,i){if(!s)throw new Error("missing 'this' binding");let e=l(this.Rxt,t),h=e.get(i);return h||(h=t.bind(s,i),e.set(i,h)),h}vbt(t,s,i,e){if(!s)throw new Error("missing 'this' binding");let h=l(this.Fxt,t),r=l(h,i),n=r.get(e);return n||(n=t.bind(s,i,e),r.set(e,n)),n}Mbt(t,s,i,e,h){if(!s)throw new Error("missing 'this' binding");let r=l(this.Oxt,t),n=l(r,i),o=l(n,e),a=o.get(h);return a||(a=t.bind(s,i,e,h),o.set(h,a)),a}Wxt(t){if(!this.bL())throw new Error("must be single-global plugin");this.Ext=t}WL(){if(this.bL())return this.Ext;throw new Error("must be single-global plugin")}jL(){if(this.bL())return this.Ext.jL();throw new Error("must be single-global plugin")}Vxt(){const t=this.Tbt(),s=(ia.yL.jxt(this,t),this.Bxt(!0));if(s){if(this.Lxt=new s,!(this.Lxt instanceof self.pL))throw new TypeError("plugin class must derive from IPlugin")}else this.Lxt=new self.pL;ia.yL.Hxt(t)}LL(){return this.Lxt}}}{const ea=self.Bs;ea.Uxt=class extends ea.mxt{constructor(t,s){super(t),this.zxt=s,this.Jxt=0,this.qxt=new Map,this.Xxt("elem-focused",t=>t.Yxt()),this.Xxt("elem-blurred",t=>{t&&t.$xt()})}Sr(){super.Sr()}Kxt(t){const s=this.Jxt++;return this.qxt.set(s,t),s}Zxt(t){this.qxt.delete(t)}Xxt(t,i){this.Sf.B4(this.zxt,t,t=>{const s=this.qxt.get(t.elementId);i(s,t)})}}}{const ha=self.Bs;ha.Qxt=class extends ha.gr{constructor(t){super(),this.Dft=t,this.Sf=t.ck(),this.tTt=t.zL()}Sr(){this.Dft=null,this.Sf=null,this.tTt=null}YN(){return this.Dft}ck(){return this.Sf}zL(){return this.tTt}wW(){return this.Dft.wW()}Nxt(){}kbt(t){}vvt(t){}Mvt(t){}zX(t){}KX(){}XX(){}wY(t){}sTt(){}Bxt(){return null}iTt(t,s,i){const e=ha.wr(ha.Event,t,s);e.eTt=this,i&&Object.assign(e,i),this.YN().t$(e)}}}{const ra=self.Bs;ra.hTt=class extends ra.gr{constructor(t,s){super(),this.Pi=t,this.zxt=s,this.rTt=null,this.Sf=t.ck(),this.Dft=this.Pi.YN(),this.nTt=this.Dft.bvt(),this.B$=null,this.V$=null,this.z4=!1,this.q4=!1,this.A0=null,this.KI=!1}Sr(){this.KI=!0,this.oTt(),this.aTt(),this.B$=null,this.V$=null,this.A0&&(this.A0.Sr(),this.A0=null),this.Pi=null,this.Sf=null,this.Dft=null,this.nTt=null}br(){return this.KI}uV(){return this.Pi}ck(){return this.Sf}YN(){return this.Dft}zL(){return this.nTt.zL()}bvt(){return this.nTt}lTt(){return this.Pi.ND()}O4(t){return this.Sf.O4(t,this.Pi,null)}uTt(t){return this.Sf.uTt(t,this.Pi,null)}L4(t){return this.Sf.L4(t,this.Pi,null)}cTt(t,s){return this.Sf.cTt(t,this.Pi,s)}fTt(t,s){return this.Sf.fTt(t,this.Pi,s)}dTt(t){return this.Sf.dTt(t)}pTt(t,s){this.Sf.B4(this.zxt,t,s)}mTt(t){for(const[s,i]of t)this.pTt(s,i)}gTt(t,s){this.Sf.Mf(this.zxt,t,s)}yTt(t,s){return this.Sf.KD(this.zxt,t,s)}wTt(t,s){if(!this.Sf.fO())return window.c3_runtimeInterface._OnMessageFromRuntime({type:"event",component:this.zxt,handler:t,data:s,responseId:null});this.gTt(t,s)}STt(t){if(!t)throw new Error("cannot set empty component id");this.rTt=t}bTt(){if(this.rTt)return this.Sf.Q4(this.rTt);throw new Error("wrapper extension component id not set")}sB(t,s){if(!this.rTt)throw new Error("wrapper extension component id not set");this.Sf.sB(this.rTt,t,s)}vTt(t){for(const[s,i]of t)this.sB(s,i)}Bj(t,s){if(!this.rTt)throw new Error("wrapper extension component id not set");this.Sf.Bj(this.rTt,t,s)}Wj(t,s){if(this.rTt)return this.Sf.Wj(this.rTt,t,s);throw new Error("wrapper extension component id not set")}YK(){}MTt(){}xTt(){this.z4||(this.B$||(this.B$=()=>this.YK()),this.Sf.Qf().addEventListener("tick",this.B$),this.z4=!0)}oTt(){this.z4&&(this.Sf.Qf().removeEventListener("tick",this.B$),this.z4=!1)}TTt(){return this.z4}GTt(){this.q4||(this.V$||(this.V$=()=>this.MTt()),this.Sf.Qf().addEventListener("tick2",this.V$),this.q4=!0)}aTt(){this.q4&&(this.Sf.Qf().removeEventListener("tick2",this.V$),this.q4=!1)}_Tt(){return this.q4}ITt(){return[]}iM(){return null}eM(t){}$rt(t){}int(t,s){}$nt(t,s,i){if(0!==s){const e=this.$rt(t);if("number"!=typeof e)throw new Error("expected number");this.int(t,e+s,i)}}CTt(t,s,i,e){}PTt(t,...s){t.call(this,...s)}ETt(t,...s){return t.call(this,...s)}Bxt(){return null}iTt(t,s,i){if(this.Pi.ATt()){const e=this.lTt(),h=ra.wr(ra.Event,t,s);h.z6=e,i&&Object.assign(h,i),e.dispatchEvent(h)}}yv(){return!1}}}{const na=self.Bs;na.RTt=class extends na.hTt{constructor(t,s){super(t,s),this.Hst=t.jD(),this.FTt=null,this.OTt=null}Sr(){if(this.FTt){const t=this.Sf.Qf();t.removeEventListener("renderercontextlost",this.FTt),t.removeEventListener("renderercontextrestored",this.OTt),this.FTt=null,this.OTt=null}this.Hst=null,super.Sr()}DTt(){this.kTt()}LTt(){}NTt(){}kTt(){if(!this.FTt){this.FTt=()=>this.XU(),this.OTt=()=>this.BTt();const t=this.Sf.Qf();t.addEventListener("renderercontextlost",this.FTt),t.addEventListener("renderercontextrestored",this.OTt)}}XU(){this.LTt()}BTt(){this.NTt()}jD(){return this.Hst}Oit(){return!1}Fit(){if(!this.Oit())throw new Error("original size not known");const t=this.WTt();if(t)return t.Em()}kit(){if(!this.Oit())throw new Error("original size not known");const t=this.WTt();if(t)return t.Wm()}WTt(){return null}VTt(){const t=this.WTt();if(t){const s=t.mx();if(s)return[s.Em(),s.Wm()]}return[100,100]}jTt(){const t=this.WTt();return t?t.eP():null}HTt(){const t=this.WTt();return t?t.UTt():null}zTt(){const t=this.WTt();return!!t&&t.JTt()}Dvt(t){const s=this.Pi.jD();return[s.Hv(),s.Jv(),s.yB()]}sTt(t,s,i){}qTt(t,s){}uq(){return!0}}}{const oa=self.Bs,aa=oa.wr(oa.Rect);oa.XTt=class extends oa.RTt{constructor(t,s){super(t,s),this.YTt=this.zL().Kxt(this),this.$Tt=!0,this.KTt=!1,this.ZTt=!1,this.QTt=-.2,this.tGt=oa.wr(oa.Rect,0,0,-1,-1);const i=this.Sf.tL();this.sGt=i.tj(),this.iGt=i.sj(),this.eGt=-1,this.hGt=-1,this.rGt=!1,this.xTt()}Sr(){this.zL().Zxt(this.YTt),this.nGt("destroy"),this.YTt=-1,super.Sr()}F6(){if(this.Sf.fO())throw new Error("not valid in worker mode");return this.oGt("get-element")}nGt(t,s){(s=s||{}).elementId=this.YTt,this.gTt(t,s)}oGt(t,s){return(s=s||{}).elementId=this.YTt,this.wTt(t,s)}aGt(t,s){return(s=s||{}).elementId=this.YTt,this.yTt(t,s)}lGt(t){t=t||{};const s=this.jD();t.elementId=this.YTt,t.isVisible=s.nN(),t.htmlIndex=s.HD().oj(),t.htmlZIndex=s.aj(),Object.assign(t,this.uGt()),this.$Tt=!!t.isVisible,this.wTt("create",t),this.cGt(!0)}VMt(t){this.$Tt!==(t=!!t)&&(this.$Tt=t,this.nGt("set-visible",{isVisible:t}))}YK(){this.cGt(!1)}fGt(){const t=this.Sf.tL().pj();return"Android"===oa.mi.gi&&("scale-inner"===t||"scale-outer"===t||"crop"===t)}cGt(u){if(!this.uV().mj()){let t=this.jD(),s=t.HD(),i=t.SB(),[e,h]=s.WN(i.Al(),i.Rl()),[r,n]=s.WN(i.Fl(),i.Ol()),o=this.Sf.tL(),a=o.hL(),l=o.nL();if(t.nN()&&s.nN())if(!this.fGt()&&(r<=0||n<=0||a<=e||l<=h))this.VMt(!1);else{aa.set(e,h,r,n);const c=o.tj(),f=o.sj(),d=s.oj(),p=t.aj();if(!u&&aa.equals(this.tGt)&&this.sGt===c&&this.iGt===f&&this.eGt===d&&this.hGt===p)this.VMt(!0);else{this.tGt._(aa),this.sGt=c,this.iGt=f,this.eGt=d,this.hGt=p,this.VMt(!0);let t=null;this.ZTt&&(t=s.gj()+this.QTt),this.nGt("update-position",{left:Math.round(this.tGt.Al()),top:Math.round(this.tGt.Rl()),width:Math.round(this.tGt.width()),height:Math.round(this.tGt.height()),htmlIndex:d,htmlZIndex:p,fontSize:t})}}else this.VMt(!1)}}D6(){this.oGt("focus",{focus:!0})}k6(){this.oGt("focus",{focus:!1})}Yxt(){this.KTt=!0}$xt(){this.KTt=!1}JMt(){return this.KTt}N6(t,s){this.nGt("set-css-style",{prop:oa.qo(t),val:s})}jMt(t,s){this.nGt("set-attribute",{name:t,val:s})}HMt(t){this.nGt("remove-attribute",{name:t})}dGt(){this.rGt||(this.rGt=!0,Promise.resolve().then(()=>{this.rGt=!1,this.nGt("update-state",this.uGt())}))}uGt(){}pGt(){return this.YTt}}}{const la=self.Bs,ua=self.X6;la.mGt=class extends la.gr{constructor(t){super(),this.Sf=t.runtime,this.gGt=la.wr(la.wc),this.yGt=la.wr(la.wc),this.Cxt=t.Pxt,this.Dxt=t.kxt,this.wGt=null}Sr(){this.yGt.Sr(),this.gGt.Sr(),this.Sf=null}ck(){return this.Sf}Nxt(){}Tbt(){return this.Cxt}Bxt(t=!1){let s=this.Dxt;return t&&"function"!=typeof s&&2<=this.Tbt()?globalThis.Gj:s}SGt(t){this.gGt.xc(t)}vK(){return this.gGt.Tc()}Xz(t){this.yGt.xc(t)}Kz(t){this.yGt.uc(t)}i5(){return this.yGt.Tc()}Vxt(){const t=this.Tbt(),s=(la.yL.jxt(this,t),this.Bxt(!0));if(s){if(this.wGt=new s,!(this.wGt instanceof ua))throw new TypeError("behavior class must derive from IBehavior")}else this.wGt=new ua;la.yL.Hxt(t)}W6(){return this.wGt}}}{const ca=self.Bs;ca.bGt=class extends ca.gr{constructor(t){super(),this.Sf=t.ck(),this.aSt=t,this.Dft=t.YN(),this.vGt=t.V6(),this.vGt.SGt(this.Dft)}Sr(){this.Sf=null,this.aSt=null,this.Dft=null,this.vGt=null}Nxt(){}U6(){return this.aSt}YN(){return this.Dft}ck(){return this.Sf}V6(){return this.vGt}}}{const fa=self.Bs;fa.MGt=class extends fa.gr{constructor(t,s){super(),this.xGt=t,this.zxt=s,this.Pi=t.J6(),this.Sf=t.ck(),this.aSt=t.U6(),this.nTt=this.aSt.bvt(),this.z4=!1,this.q4=!1,this.Lj=!1,this.A0=null}Sr(){this.oTt(),this.aTt(),this.TGt(),this.A0&&(this.A0.Sr(),this.A0=null),this.xGt=null,this.Pi=null,this.Sf=null,this.aSt=null,this.nTt=null}V6(){return this.aSt.V6()}GGt(){return this.xGt}J6(){return this.Pi}YN(){return this.Pi.YN()}jD(){return this.Pi.jD()}ck(){return this.Sf}U6(){return this.aSt}bvt(){return this.nTt}lTt(){return this.xGt.lTt()}O4(t){return this.Sf.O4(t,this.Pi,this.aSt)}uTt(t){return this.Sf.uTt(t,this.Pi,this.aSt)}L4(t){return this.Sf.L4(t,this.Pi,this.aSt)}_Gt(){}YK(){}MTt(){}IGt(){}xTt(){this.z4||(this.Sf.Aj(this),this.z4=!0)}oTt(){this.z4&&(this.Sf.Rj(this),this.z4=!1)}TTt(){return this.z4}GTt(){this.q4||(this.Sf.Fj(this),this.q4=!0)}aTt(){this.q4&&(this.Sf.Oj(this),this.q4=!1)}_Tt(){return this.q4}CGt(){this.Lj||(this.Sf.Dj(this),this.Lj=!0)}TGt(){this.Lj&&(this.Sf.kj(this),this.Lj=!1)}PGt(){return this.Lj}ITt(){return[]}pTt(t,s){this.Sf.B4(this.zxt,t,s)}EGt(t,s){}iM(){return null}eM(t){}$rt(t){}int(t,s){}$nt(t,s){if(0!==s){const i=this.$rt(t);if("number"!=typeof i)throw new Error("expected number");this.int(t,i+s)}}CTt(t,s,i,e){}PTt(t,...s){t.call(this,...s)}ETt(t,...s){return t.call(this,...s)}Bxt(){return null}iTt(t,s,i){if(this.xGt.ATt()){const e=this.lTt(),h=fa.wr(fa.Event,t,s);h.AGt=e,h.z6=e.z6,i&&Object.assign(h,i),e.dispatchEvent(h)}}}}{let s=function(t){if(t!==i)throw new Error("invalid internal API token")},r=(s,self.Bs),i=(r.TY={},r.olt={},r.Ws()),e=[],h=[],n=[],o=null,a=null,t=null,l=null,u=new Map,c=new Map;r.yL=class extends r.gr{constructor(t,s){super(),this.Sf=t,this.RGt=[],this.jwt=null,this.FGt=[],this.OGt=new Map,this.DGt=null,this.kGt=null,this.LGt=new Set(s)}NGt(t){const s=t[19],i=this.Sf.Jyt(t[0]);if(!i)throw new Error("missing plugin");r._2t(t,i,s);const e=2<=s?r.mxt:i,h=r.wr(e,{runtime:this.Sf,SL:t[1],wxt:t[2],GL:t[5],IL:t[8],vxt:t[9],Txt:t[13],FL:t[14],xL:t[17],PL:t[18],Pxt:s,kxt:2<=s?i:null});h.Nxt(),this.RGt.push(h),u.set(i,h)}BGt(){this.jwt=r.wr(r.TY.xY,{runtime:this.Sf,SL:!0}),this.jwt.Nxt()}WGt(t){const i=t[1],e=this.Sf.Jyt(t[0]);if(!e)throw new Error("missing behavior");this.OGt.set(e,()=>{const t=2<=i?r.mGt:e,s=r.wr(t,{runtime:this.Sf,Pxt:i,kxt:2<=i?e:null});s.Nxt(),this.FGt.push(s),c.set(e,s),!this.DGt&&r.olt.VGt&&s instanceof r.olt.VGt?this.DGt=s:!this.kGt&&r.olt.jGt&&s instanceof r.olt.jGt&&(this.kGt=s),s.Vxt()})}HGt(t){const s=this.OGt.get(t);s&&(s(),this.OGt.delete(t))}static jxt(t,s=1){if(r.yL.jxt!==o)throw new Error("invalid method");1===s&&e.push(t),h.push(t)}static Hxt(t=1){if(r.yL.Hxt!==a)throw new Error("invalid method");1===t&&e.pop(),h.pop()}static QN(){if(r.yL.QN!==t)throw new Error("invalid method");if(0===e.length)throw new Error("no init object set");return e.at(-1)}static gL(t){if(r.yL.gL!==l)throw new Error("invalid method");if(s(t),0===h.length)throw new Error("no init object set");return h.at(-1)}static UGt(t){n.push(t)}static zGt(){n.pop()}static R4(){if(0===n.length)throw new Error("no init properties set");return n.at(-1)}JGt(){for(const t of this.RGt)t.Vxt()}static kL(t){return u.get(t)||null}static Y6(t){return c.get(t)||null}Hwt(){return this.jwt}qGt(){return this.DGt}XGt(){return this.kGt}Q4(t){return this.LGt.has(t)}},o=r.yL.jxt,a=r.yL.Hxt,t=r.yL.QN,l=r.yL.gL}{const da=self.Bs,pa=new Set;da.YGt=class extends da.gr{constructor(){super(),this.$Gt=0,this.LU="",this.NU=0,this.KGt=0,this.ZGt=0,this.dg=0,this.pg=0,this.QGt=!1,this.t_t=!1,this.s_t=null,this.i_t="",this.zI=da.wr(da.Rect),this.e_t=da.wr(da.ou),this.h_t="",this.r_t=new self.lk(this),pa.add(this)}Sr(){this.XI(),this.s_t&&0===this.s_t.KU()&&this.s_t.Sr(),this.s_t=null,pa.delete(this),this.n_t()}static XU(){for(const t of pa)t.i_t="",t.zI.set(0,0,0,0),t.e_t.Cu(t.zI)}o_t(t){this.LU=t[0],this.NU=t[1],this.KGt=t[2],this.ZGt=t[3],this.dg=t[4],this.pg=t[5],this.QGt=t[6],this.t_t=!0}a_t(t,s){if(this.s_t)throw new Error("already loaded asset");this.LU=s;const i={};return da.Go(s)&&(i.pU="remote"),this.uk(t,i),this.s_t.yU()}l_t(t,s){if(this.s_t)throw new Error("already loaded asset");this.LU="",this.NU=s.size,this.s_t=da.wr(da.mU,t.sO(),{blob:s,size:this.NU,pU:"local"})}u_t(t){if(t===this)throw new Error("cannot replace with self");this.$Gt++,this.XI(),this.LU=t.LU,this.NU=t.NU,this.KGt=t.KGt,this.ZGt=t.ZGt,this.dg=t.dg,this.pg=t.pg,this.QGt=t.QGt,this.t_t=t.t_t,this.s_t=t.s_t,this.i_t=t.i_t,this.zI=t.zI,this.e_t=t.e_t,this.n_t()}gU(){return this.LU}mc(){return this.NU}c_t(){return this.KGt}f_t(){return this.ZGt}JTt(){return this.QGt}Em(){return this.dg}Wm(){return this.pg}d_t(){return this.s_t.Em()}p_t(){return this.s_t.Wm()}uk(t,s){if(this.s_t)throw new Error("already got asset");s=Object.assign({},s,{url:this.gU(),size:this.mc()}),this.s_t=t.dU(s)}jU(){return this.s_t&&this.s_t.jU()}async X8(t,s){if(!this.s_t)throw new Error("no asset");if(this.i_t)throw new Error("already loaded texture");const i=this.$Gt,e=(this.i_t="loading",await this.s_t.X8(t,s));if(this.$Gt!==i)return null;if(!e)return this.i_t="",null;this.i_t="loaded",this.t_t||(this.dg=e.Em(),this.pg=e.Wm(),this.t_t=!0);const h=this.QGt?this.pg:this.dg,r=this.QGt?this.dg:this.pg;return this.zI.set(this.KGt,this.ZGt,this.KGt+h,this.ZGt+r),this.zI.Ct(e.Em(),e.Wm()),this.e_t.Cu(this.zI),this.QGt&&this.e_t.Ou(),e}XI(){this.i_t&&(this.s_t&&this.s_t.XI(),this.i_t="",this.zI.set(0,0,0,0),this.e_t.Cu(this.zI))}mx(){return this.s_t&&"loaded"===this.i_t?this.s_t.mx():null}eP(){return this.zI}UTt(){return this.e_t}EV(){return this.r_t}m_t(){return this.s_t}async g_t(t){t=t||await this.s_t.ZU();const s=da.No(this.dg,this.pg),i=s.getContext("2d");return this.QGt?(i.rotate(Math.PI/-2),i.translate(-this.pg,0),i.drawImage(t,this.KGt,this.ZGt,this.pg,this.dg,0,0,this.pg,this.dg)):i.drawImage(t,this.KGt,this.ZGt,this.dg,this.pg,0,0,this.dg,this.pg),s}async y_t(t){if(!this.h_t){const s=await this.g_t(t),i=await da.Bo(s);this.h_t=URL.createObjectURL(i)}return this.h_t}n_t(){this.h_t&&(URL.revokeObjectURL(this.h_t),this.h_t="")}}}{const ma=self.Bs;ma.w_t=class extends ma.gr{constructor(t){super(),this.Mr=t[0],this.S_t=t[1],this.QSt=!!t[2],this.Iot=t[3],this.b_t=t[4],this.v_t=!!t[5],this.O7=t[6],this.M_t=t[7].map(t=>ma.wr(ma.x_t,t)),this.T_t=new self.iW(this)}static G_t(t,s){const i=ma.wr(ma.w_t,[s,0,!1,0,0,!1,Math.floor(1e15*Math.random()),[]]);return i.M_t.push(ma.x_t.G_t(t)),i}Sr(){for(const t of this.M_t)t.Sr();ma.Un(this.M_t)}__t(t){for(const s of this.M_t)s.wW().uk(t)}I_t(s,i){return Promise.all(this.M_t.map(t=>t.wW().X8(s,i)))}C_t(){for(const t of this.M_t)t.wW().XI()}uf(){return this.Mr}mJ(){return this.O7}uW(){return this.M_t.length}fW(){return this.M_t}P_t(t){if((t=Math.floor(t))<0||t>=this.M_t.length)throw new RangeError("invalid frame");return this.M_t[t]}E_t(t,s){(s=Math.floor(s))<0?this.M_t.unshift(t):s>=this.M_t.length?this.M_t.push(t):this.M_t.splice(s,0,t)}A_t(t){if((t=Math.floor(t))<0||t>=this.M_t.length)throw new RangeError("invalid frame");this.M_t[t].Sr(),this.M_t.splice(t,1)}R_t(i){for(let t=0,s=this.M_t.length;t<s;++t)if(ma.Gh(this.M_t[t].NW(),i))return t;return-1}F_t(t){if("string"!=typeof t)return t;{const s=this.R_t(t);if(-1===s)throw new Error("cannot find animation frame with tag "+t);return s}}eW(){return this.S_t}hW(){return this.QSt}rW(){return this.Iot}oW(){return this.b_t}lW(){return this.v_t}O_t(){return this.T_t}}}{const ga=self.Bs,ya=(()=>{const i=atob("iVBORw0KGgoAAAANSUhEUgAAAGQAAABkAQMAAABKLAcXAAAAAXNSR0IArs4c6QAAAANQTFRFAAAAp3o92gAAAAF0Uk5TAEDm2GYAAAATSURBVBgZYxgFo2AUjIJRQFcAAAV4AAHcRQIbAAAAAElFTkSuQmCC"),e=new Uint8Array(i.length);for(let t=0,s=i.length;t<s;++t)e[t]=i.charCodeAt(t);return new Blob([e],{type:"image/png"})})();ga.x_t=class extends ga.gr{constructor(t){super(),this.D_t=ga.wr(ga.YGt),this.D_t.o_t(t),this.k_t=t[7],this.L_t=ga.wr(ga.nl,t[8],t[9]),this.N_t=t[10].map(t=>ga.wr(ga.B_t,this,t)),this.W_t=new Map;for(const i of this.N_t)this.W_t.set(i.uf().toLowerCase(),i);this.V_t=null;const s=t[11];6<=s.length&&(this.V_t=ga.wr(ga.Vu,s)),this.by=t[12]||"",this.j_t=new self.yW(this)}static G_t(t){const s=ga.wr(ga.x_t,["",0,0,0,100,100,!1,1,0,0,[],[],""]);return s.D_t.l_t(t,ya),s}Sr(){this.V_t&&(this.V_t.Sr(),this.V_t=null),this.D_t.Sr(),this.D_t=null}wW(){return this.D_t}SW(){return this.k_t}vW(){return this.L_t.cl()}xW(){return this.L_t.dl()}OW(){return this.V_t}RW(t){return this.W_t.get(t.toLowerCase())||null}AW(t){return(t=Math.floor(t))<0||t>=this.N_t.length?null:this.N_t[t]}_W(){return this.N_t.length}NW(){return this.by}dW(){return this.j_t}}}{const wa=self.Bs;wa.B_t=class extends wa.gr{constructor(t,s){super(),this.H_t=t,this.Mr=s[0],this.U_t=wa.wr(wa.nl,s[1],s[2])}Sr(){}uf(){return this.Mr}Hv(){return this.U_t.cl()}Jv(){return this.U_t.dl()}z_t(){return this.U_t}}}{const g=self.Bs,Sa=self.C3Debugger,ba=self.HL;g.out=class extends g.gr{constructor(s,t,i){super();const e=s.Jyt(i[1]),[h,r]=(this.Sf=s,this.tTt=g.yL.kL(e),this.nTt=null,this.J_t=e.Instance,this.Sy=t,this.O7=i[11],this.Mr=i[0],this.Pwt=this.Sf.u1t(i[14]),this.q_t=!!i[9],this.X_t=!!i[2],this.Y_t=!!i[10],this.$_t=i[3].map(t=>({sid:t[0],type:t[1],name:t[2],K_t:s.u1t(t[3])})),this.Z_t=i[4],this.Q_t=i[5],this.yxt=this.tTt.ML(),this.tIt=g.wr(g.Event.Qf),this.yz=null,s.hO().Wk());if(this.sIt=g.wr(g.iIt,h,r),this.eIt=!0,this.hIt=null,this.rIt=null,this.nIt=-1,this.oIt=null,this.aIt=null,this.lIt=null,this.uIt=null,this.cIt=null,this.fIt=!1,this.dIt=null,this.pIt=i[8].map(t=>g.mIt.kx(this,t)),this.gIt=[],this.yIt=new Map,this.wIt=new Map,this.SIt=new Set,this.bIt=new Map,this.vIt=g.wr(g.Oft,this),this.MIt=null,this.xIt=0,this.TIt=!1,this.dIt=null,this.D_t=null,this.GIt=null,this._It=null,this.IIt=null,this.CIt=0,this.hbt=new Map,this.rbt=new Map,this.i7=[],this.PIt=new Map,this.EIt=!0,this.tTt.CL()&&(this.yz=g.wr(g.wz,this,i[12])),i[6]&&(this.D_t=g.wr(g.YGt),this.D_t.o_t(i[6])),i[7]){this.GIt=i[7].map(t=>g.wr(g.w_t,t)),this._It=new Map,this.IIt=new Map;for(const a of this.GIt)this._It.set(a.uf().toLowerCase(),a),this.IIt.set(a.mJ(),a)}this.X_t?(this.hIt=[],this.rIt=new Set,this.nIt=this.Sf.AIt()):(this.oIt=[],this.aIt=new Set,this.lIt=[],this.uIt=[],this.cIt=[]);const n=this.tTt.Tbt();if(n<2&&(this.nTt=g.wr(e.RIt,this,i[15]),!(this.nTt instanceof g.Qxt)))throw new Error("v1 sdk type must derive from SDKTypeBase");this.FIt=null,this.OIt=null,this.yX=g.wr(g.Event.Qf),g.yL.jxt(this,n);let o;if(o=2<=n?(o=e.RIt)||globalThis.IV:this.nTt.Bxt()){if(this.FIt=new o(n<2?this:null),n<2&&!(this.FIt instanceof ba))throw new TypeError("script interface class must derive from IObjectClass");if(2<=n&&!(this.FIt instanceof globalThis.IV))throw new TypeError("script interface class must derive from ISDKObjectTypeBase")}else this.FIt=new ba;if(g.yL.Hxt(n),i[13]){const l=i[13];if(l){const u=l[0],c=l[1],f=l[2];this.nTt.sTt(u,c,f)}}this.Sf.DIt()&&!this.X_t&&!this.Y_t&&this.yxt||this.Nxt(),this.tTt.bL()&&(this.tTt.Wxt(this),this.kIt(i)),this.LIt=null}static kx(t,s,i){return g.wr(g.out,t,s,i)}Sr(){if(this.tIt.Sr(),this.tIt=null,this.D_t&&(this.D_t.Sr(),this.D_t=null),this.GIt){for(const t of this.GIt)t.Sr();g.Un(this.GIt),this._It.clear(),this.IIt.clear()}this.LIt=null,this.vIt.Sr(),this.vIt=null,this.hbt.clear(),this.rbt.clear(),this.dIt=null,this.Sf=null}NIt(i){for(let t=1,s=i.length;t<s;++t){const e=this.Sf.kz(i[t]);this.hIt.push(e),this.rIt.add(e),e.oIt.push(this),e.aIt.add(this)}}BIt(t){this.fIt=!0,this.dIt=t}n4(){return this.fIt}jX(){return this.dIt}WIt(){let t=0;if(!this.X_t)for(const s of this.oIt)for(const i of s.VIt()){const e=i.uf().toLowerCase();this.yIt.set(e,i),this.wIt.set(e,t),this.gIt.push(i),++t}for(const h of this.VIt()){const r=h.uf().toLowerCase();this.yIt.set(r,h),this.wIt.set(r,t),this.gIt.push(h),++t}for(const n of this.gIt)this.SIt.add(n.V6().constructor);if(!this.X_t&&this.oIt.length){let t=this.Sf.jIt(),s=(g.Jn(this.lIt,t,0),g.Jn(this.uIt,t,0),g.Jn(this.cIt,t,0),[]),i=0,e=0,h=0;for(const o of this.oIt){const a=o.nSt(),l=(this.lIt[a]=i,i+=o.HIt(),this.uIt[a]=e,e+=o.UIt(),this.cIt[a]=h,h+=o.zIt(),o.m5());if(l&&this.yz)for(const u of l.g5())s.push(u.JIt(this.yz))}this.yz&&this.yz.qIt(s)}}kIt(t){const s=this.Sf.XIt(),i=g.wr(g.Instance,{runtime:this.Sf,XN:this,uid:s});i.YIt(t[16],[]),this.Sf.$It(s,i),this.i7.push(i)}bvt(){return this.nTt}KIt(){return this.Y_t}Qf(){return this.tIt}Nxt(){this.X_t||(this.nTt?this.nTt.Nxt():this.FIt.CV())}ZIt(){return 0<this.CIt}async zX(t){this.X_t||(this.CIt++,1===this.CIt&&(this.nTt?await this.nTt.zX(t):await this.FIt.AV(this.Sf.tL().QIt())))}KX(){if(!this.X_t){if(this.CIt--,this.CIt<0)throw new Error("released textures too many times");0===this.CIt&&(this.nTt?this.nTt.KX():this.FIt.RV(this.Sf.tL().QIt()))}}XX(){if(this.X_t)throw new Error("not applicable to family");this.nTt?this.nTt.XX():this.FIt.FV()}async wY(t){this.X_t||(this.nTt?await this.nTt.wY(t):await this.FIt.OV(this.Sf.tL().QIt()))}ck(){return this.Sf}zL(){return this.tTt}tCt(){return this.J_t}uf(){return this.Mr}u1t(){return this.Pwt}KF(){return this.Sy}mJ(){return this.O7}oJ(){return this.X_t}qz(){return this.q_t}ML(){return this.yxt}nSt(){return this.nIt}VIt(){return this.pIt}UIt(){return this.Z_t}sCt(t){return t&&this.SIt.has(t)}HIt(){return this.$_t.length}iCt(){return this.$_t.map(t=>t.sid)}eCt(s){return this.$_t.findIndex(t=>t.sid===s)}yit(s){return this.$_t.findIndex(t=>t.name===s)}hCt(){return this.$_t.map(t=>t.name)}rCt(){return this.$_t.map(t=>t.K_t)}Sit(t){if((t=Math.floor(t))<0||t>=this.$_t.length)throw new RangeError("invalid instance variable index");return this.$_t[t].type}wit(t){if((t=Math.floor(t))<0||t>=this.$_t.length)throw new RangeError("invalid instance variable index");return this.$_t[t].name}zIt(){return this.Q_t}nCt(){return this.gIt}Uht(t){return this.yIt.get(t.toLowerCase())||null}vit(t){const s=this.wIt.get(t.toLowerCase());return void 0===s?-1:s}m5(){return this.yz}CL(){return this.tTt.CL()}oCt(){return this.yz&&this.yz.aCt()}Q1t(){return this.vIt}e5(){return this.vIt.e5()}wW(){return this.D_t}Bz(t){this.MIt=t}Nz(){return this.MIt}Wz(t){this.xIt=t}lCt(){return this.xIt}uCt(){return this.GIt}cCt(){return this.GIt.length}y1t(){return this.oIt}Gvt(t){return this.aIt.has(t)}Pgt(){return this.hIt}aJ(t){return this.rIt.has(t)}cSt(t){return this.uIt[t]}rSt(t){return this.lIt[t]}dwt(t){this.bIt.set(t.wwt().toLowerCase(),t)}pwt(t){return!!this.Twt(t)}Twt(t){const s=this.bIt.get(t.toLowerCase());return s&&s.rc()?s:null}fCt(){return this.GIt}dCt(t){if(this.GIt)return this._It.get(t.toLowerCase())||null;throw new Error("no animations")}pCt(t){if(this.GIt)return this.IIt.get(t)||null;throw new Error("no animations")}mCt(t){if(this.dCt(t))throw new Error(`animation name '${t}' already exists`);const s=g.w_t.G_t(this.ck(),t);return this.GIt.push(s),this._It.set(s.uf().toLowerCase(),s),this.IIt.set(s.mJ(),s),s}gCt(t){const s=this.dCt(t);if(!s)throw new Error(`animation name '${t}' does not exist`);if(1===this.GIt.length)throw new Error("cannot remove last animation");const i=this.GIt.indexOf(s);this.GIt.splice(i,1),this._It.delete(s.uf().toLowerCase()),this.IIt.delete(s.mJ()),s.Sr()}yCt(){if(this.GIt)return this.GIt[0];throw new Error("no animations")}wCt(){return this.yCt().P_t(0)}SCt(){if(this.GIt){const t=this.wCt().wW();return[t.Em(),t.Wm()]}return this.D_t?[this.D_t.Em(),this.D_t.Wm()]:[100,100]}jL(){if(this.tTt.bL())return this.i7[0];throw new Error("not a single-global plugin")}i5(){return this.i7}*instances(){yield*this.i7}*s5(){yield*this.i7,yield*this.Sf.CMt(this)}r5(){return this.i7.length}Xz(t){this.i7.push(t)}bCt(){this.EIt=!0}EY(){if(this.EIt&&!this.X_t){let s=this.i7,i=0;for(let t=s.length;i<t;++i)s[i].vCt(i);const t=this.Sf.MCt();for(const e of t)e.YN()===this&&e.vCt(i++);this.EIt=!1}}xCt(t){const s=this.i7;if(t<s.length)return s[t];t-=s.length;const i=this.Sf.MCt();for(const e of i)if(e.YN()===this){if(0===t)return e;--t}return null}fMt(t){if(t&&t.n4()&&t.YN()!==this)for(const i of t.o4())if(i.YN()===this)return i;const s=this.e5().i5();return s.length?s[0]:null}t5(t){const s=this.e5().i5();return 0<s.length?s[t.IY()%s.length]:null}*OMt(t,s){let i=this.e5().i5(),e=i.length,h=s.e5(),r=s.e5().i5(),n=r.length,o=t.IY(),a=(!s.oJ()&&h.qft()||(o=r.indexOf(t)),Math.ceil(e/n)),l=e%n,u=0,c;c=0==l||o<l?(u=o*a,a):(u=l*a+(o-l)*(a-1),a-1);for(let t=u,s=u+c;t<s;++t)yield i[t]}kbt(t){this.nTt?.kbt(t)}Lyt(){if(this.fIt&&!this.X_t){this.EY();const t=this.e5(),s=t.s0t(),i=t.qft(),e=this.Sf.t1t(),h=e&&e.OO()&&e.OO().u0t();for(const r of this.dIt.CY())if(r!==this){r.EY();const n=r.e5();if(n.t0t(i),!i){const o=n.s0t();g.Un(o);for(const a of s)o.push(r.xCt(a.IY()));if(h){const l=t.i0t(),u=n.i0t();g.Un(u);for(const c of l)u.push(r.xCt(c.IY()))}}}}}Vbt(t,s){for(const i of this.jX().CY()){const e=i.e5();t?g.Hn(e.i0t(),s):g.Hn(e.s0t(),s)}}TCt(){return this.sIt}GCt(t){this.eIt=!!t}_Ct(){if(this.eIt&&this.yxt){for(const t of this.i7)t.jD().ICt();for(const s of this.Sf.MCt())s.YN()===this&&s.jD().ICt();this.eIt=!1}}CCt(s,t,i){if(t){const e=this.PIt.get(t);e&&(e.delete(s),0===e.size)&&this.PIt.delete(t)}if(i){let t=this.PIt.get(i);t||(t=new Set,this.PIt.set(i,t)),t.add(s)}}PCt(){if(this.oJ()){const t=new Set;for(const s of this.hIt)for(const i of s.PCt())t.add(i);return t.values()}return this.PIt.keys()}Ebt(){return this.hbt||(this.hbt=new Map),this.hbt}Abt(){return this.rbt||(this.rbt=new Map),this.rbt}ECt(){return this.sCt(g.olt.VGt)}ACt(){return this.sCt(g.olt.jGt)}RCt(){return this.sCt(g.olt.NoSave)}zz(){return this.sCt(g.olt.Persist)}Fq(){const t={instances:this.i7.map(t=>t.iM())};return this.hbt&&this.hbt.size&&(t.ex=g.zo(this.hbt)),t}Oq(t,e){this.hbt&&(this.hbt.clear(),this.hbt=null);const s=t.ex,h=(s&&(this.hbt=g.Jo(s)),this.i7),r=t.instances;for(let t=0,s=Math.min(h.length,r.length);t<s;++t)h[t].eM(r[t]);for(let t=r.length,s=h.length;t<s;++t)this.Sf.s4(h[t]);for(let i=h.length,t=r.length;i<t;++i){let t=r[i],s=null;if(!this.ML()||(s=this.Sf.bD().RX(t.w.l))){const n=this.Sf.Jz(this.MIt||this,s,!1,0,0,!0);n.eM(t),e&&e.add(n)}}this.LIt=r,this.bCt()}FCt(){return this.LIt}OCt(){this.LIt=null}DCt(){for(let t=0,s=this.i7;t<s;++t)this.i7[t].DCt()}BL(){return this.FIt}TO(){return this.yX}kCt(){return this.OIt}n5(t){this.OIt=t}t$(t){const s=this.Sf,i=s.s$()&&!s.CO().c5();i&&Sa.StartMeasuringScriptTime(),this.yX.dispatchEvent(t),i&&Sa.AddScriptTime()}}}{const va=self.Bs;va.LCt=class extends va.gr{constructor(t,s){super(),this.Sf=t,this.NCt=s;for(const i of this.NCt)i.BIt(this)}Sr(){this.Sf=null}ck(){return this.Sf}VX(){return this.NCt}CY(){return this.NCt}RY(){return this.NCt.some(t=>t.ML())}}}{let S=self.Bs,h=self.C3Debugger,n=S.yL,o=[],a=0,b=new WeakMap,e=new WeakMap;S.Instance=class extends S.gr{constructor(t){if(S.yL!==n)throw new Error("invalid addon manager");super(),this.Sf=t.runtime,this.BCt=t.XN,this.Hst=null,this.WCt=null,this.VCt=null,this.jCt=0,this.HCt=t.uid,this.UCt=a++,this.zbt=0,this.zCt=null;const s=S.ao(t.tags),i=(0<s.length&&(this.zCt=new Set(s)),this.JCt=o,this.qCt=o,this.BCt.nCt()),e=(0<i.length&&(this.qCt=i.map((t,s)=>S.wr(S.XCt,{runtime:this.Sf,j6:t,z6:this,index:s}))),this.YCt=this.BCt.n4()?[]:null,this.$Ct=-1,this.tIt=null,this.zL());if(e.yv()&&(this.zbt|=4),e.ML())if(this.Hst=S.wr(S.KCt,this,t.uB),t.ZCt)this.Hst.QCt(t.ZCt);else{this.Hst.tPt();const[h,r]=this.BCt.SCt();this.Hst._C(h,r),this.YN().oCt()&&this.Hst.lB().sPt()}t.iPt?this.ePt(t.iPt):this.hPt()}Sr(){if(this.VCt&&(this.VCt.t4(),this.VCt=null),0<this.qCt.length){for(const i of this.qCt)i.Sr();S.Un(this.qCt)}this.WCt&&(this.WCt.Sr(),this.WCt=null);const t=b.get(this),s=(t&&(t.clear(),b.delete(this)),e.get(this));s&&(s.clear(),e.delete(this)),this.YCt&&S.Un(this.YCt),this.tIt&&(this.tIt.Sr(),this.tIt=null),this.zCt&&this.zCt.clear(),this.zCt=null,this.Sf=null,this.BCt=null,0<this.JCt.length&&S.Un(this.JCt),this.Hst&&(this.Hst.Sr(),this.Hst=null)}ePt(t){0<t.length&&(this.JCt=[],S.Xn(this.JCt,t))}hPt(){const s=this.BCt.HIt();if(0!==s){this.JCt=[];const i=[0,0,""];for(let t=0;t<s;++t)this.JCt.push(i[this.BCt.Sit(t)])}}YIt(t,i){if(this.WCt)throw new Error("already got sdk instance");for(let t=0,s=this.qCt.length;t<s;++t){const e=this.qCt[t];e.YIt(i?i[t]:null)}const s=this.zL().Tbt();if(s<2){if(this.WCt=S.wr(this.BCt.tCt(),this,t),!(this.WCt instanceof S.hTt))throw new Error("sdk type must derive from SDKInstanceBase");!this.zL().ML()&&this.BCt.kCt()&&this.ND()}else{const h=this.zL().Bxt();this.rPt(h.Instance,t)}}O6(){return this.WCt??this.VCt}jD(){return this.Hst}ck(){return this.Sf}sD(){return this.$Ct}c4(){const t=this.$Ct;return-1===t?this.ck().sD():t}iD(t){((t=+t)<0||!isFinite(t))&&(t=0),this.$Ct=t,this.YN().oCt()&&this.Sf.nPt(this,!0)}d4(){this.$Ct=-1,this.YN().oCt()&&this.Sf.nPt(this,!1)}Mq(){return this.Sf.oPt(this)}Qf(){return this.tIt||(this.tIt=S.wr(S.Event.Qf)),this.tIt}AM(t){this.WCt?this.WCt.AM(t):this.VCt.VV(this.Sf.tL().QIt())}Nxt(t){this.WCt.Nxt(t)}aPt(){this.zbt|=2}lPt(){return 0!=(2&this.zbt)}uPt(){this.zbt|=1}mj(){return 0!=(1&this.zbt)}yv(){return 0!=(4&this.zbt)||this.WCt.yv()}cPt(){this.zbt|=32}fq(){return 0!=(32&this.zbt)}fPt(){return 0!=(8&this.zbt)}dPt(t){t?this.zbt|=8:this.zbt&=-9}pPt(){return 0!=(16&this.zbt)}mPt(t){t?this.zbt|=16:this.zbt&=-17}gPt(){return 0!=(64&this.zbt)}yPt(t){t?this.zbt|=64:this.zbt&=-65}wPt(t,s){t<<=16,s?this.zbt|=t:this.zbt&=~t}SPt(t){return 0!=(this.zbt&t<<16)}WTt(){return this.WCt.WTt()}VTt(){return this.WCt.VTt()}jTt(){return this.WCt.jTt()}HTt(){return this.WCt.HTt()}zTt(){return this.WCt.zTt()}Dvt(t){return this.WCt.Dvt(t)}YN(){return this.BCt}uq(){return this.WCt.uq()}PMt(t){return t.oJ()?t.aJ(this.YN()):this.YN()===t}bPt(h,t,s){const i=(t,s)=>{const i=s||t.YN(),e=h.get(i);e?e.add(t):h.set(i,new Set([t]))};if(i(this,t),this.n4())for(const e of this.o4())i(e);if(s)for(const r of this.XB())i(r)}vPt(){if(!this.zL().RL())throw new Error("object does not support scene graph")}QB(){return null!==this.WB()}WB(){const t=this.jD();if(!t)return null;const s=t.WB();return s?s.uV():null}jB(){const t=this.jD();if(!t)return null;const s=t.jB();return s?s.uV():null}*HB(){const t=this.jD();if(t)for(const s of t.HB())yield s.uV()}MPt(t){if(t)for(const s of this.children())if(s===t)return!0;return!1}Lq(){const t=this.jD();return!!t&&t.Lq()}xPt(t){const s=this.jD();if(!s)return[];const i=t.uf();return s.WY().map(t=>t.uV()).filter(t=>t.YN().uf()===i)}WY(){const t=this.jD();return t?t.WY().map(t=>t.uV()):[]}*children(){const t=this.jD();if(t)for(const s of t.children())yield s.uV()}*XB(){const t=this.jD();if(t)for(const s of t.XB())yield s.uV()}zB(){const t=this.jD();return t?t.zB():0}TPt(){return[...this.HB()].length}FMt(){const t=this.jD();return t?t.FMt():0}qB(t){const s=this.jD();if(!s)return null;const i=s.qB(t);return i?i.uV():null}GPt(){const t=this.jD();if(!t)return NaN;const s=t.WB();return s?s._Pt(t):NaN}IPt(t){for(const s of this.jD().WY())if(s.uV().a4()===t)return!0;return!1}$B(t,s){this.vPt(),t.vPt(),this.jD().$B(t.jD(),s||{})}KB(t){const s=this.jD();s&&s.KB(t.jD())}w6(){const t=this.jD();return!!t&&t.w6()}mY(){const t=this.jD();if(t){const s=t.CPt();if(s)for(const i of s){const e=this.Sf.LD(i[2]);if(e){const h=i[3];this.$B(e,{s6:!!(h>>0&1),e6:!!(h>>1&1),r6:!!(h>>2&1),o6:!!(h>>3&1),l6:!!(h>>4&1),y6:!!(h>>5&1),c6:!!(h>>6&1),d6:!!(h>>7&1),m6:!!(h>>8&1)})}}}}gY(t,s){const i=t.get(this);if(i)for(const e of i.sceneGraphJson.children){const h=s.get(e.index);if(h){const r=e.flags;this.$B(h,{s6:!!(r>>0&1),e6:!!(r>>1&1),r6:!!(r>>2&1),o6:!!(r>>3&1),l6:!!(r>>4&1),y6:!!(r>>5&1),c6:!!(r>>6&1),d6:!!(r>>7&1),m6:!!(r>>8&1)})}}}u4(){const t=this.Sf.PPt();return t?t.lut(this):""}n4(){return null!==this.YCt}PY(t){this.YCt.push(t)}h4(){return this.YCt}EPt(t){return!!this.APt(t)}APt(t){const s=this.o4();if(null===s||0===s.length)return!1;for(const i of s)if(i.YN()===t)return i;return null}o4(){return this.YCt}Vmt(){for(const t of this.o4())t.YN().e5().e0t(t)}Lbt(){for(const t of this.o4())t.YN().e5().Zft(t)}Nbt(t){for(const s of this.o4())s.YN().e5().s0t()[t]=s}Wbt(){for(const t of this.o4())t.YN().e5().Qft(t)}Bbt(t){for(const s of this.o4())s.YN().e5().i0t()[t]=s}zL(){return this.BCt.zL()}vCt(t){this.jCt=t}IY(){return this.BCt.EY(),this.jCt}a4(){return this.HCt}RPt(){return this.UCt}FPt(t){t?this.w4(new Set(t)):this.zCt=null}w4(t){if(0===t.size)this.zCt=null;else{this.zCt?this.zCt.clear():this.zCt=new Set;for(const s of t)this.zCt.add(s)}}g4(){return this.zCt??new Set}i2t(){return Array.from(this.g4()).join(" ")}r2t(t){t=Math.floor(t);for(const s of this.g4()){if(0===t)return s;--t}return""}Hht(){return this.qCt}OPt(t){if(t)for(const s of this.qCt)if(s.V6()instanceof t)return s;return null}flt(t){if(!t)return null;const s=this.OPt(t);return s?s.O6():null}jht(i){const e=this.qCt;for(let t=0,s=e.length;t<s;++t)if(e[t].U6().mJ()===i)return t;return-1}DPt(){return this.JCt}hCt(){return this.BCt.hCt()}kPt(){return this.JCt.length}rnt(t){const s=this.JCt;if((t|=0)<0||t>=s.length)throw new RangeError("invalid instance variable");return s[t]}eSt(t){return this.JCt[t]}LPt(t){const s=this.JCt[t];return 0===this.BCt.Sit(t)?!!s:s}nnt(t,s){const i=this.JCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=this.BCt.Sit(t);switch(e){case 0:i[t]=s?1:0;break;case 1:i[t]="number"==typeof s?s:parseFloat(s);break;case 2:i[t]="string"==typeof s?s:s.toString();break;default:throw new Error("unknown instance variable type")}}Knt(t,s){if(0!==s){const i=this.JCt;if((t|=0)<0||t>=i.length)throw new RangeError("invalid instance variable");const e=i[t];if("number"!=typeof e)throw"boolean"==typeof e?new Error("can not set offset of boolean variable"):"string"==typeof e?new Error("can not set offset of string variable"):new Error("unknown instance variable type");i[t]+="number"==typeof s?s:parseFloat(s)}}Ebt(){let t=b.get(this);return t||(t=new Map,b.set(this,t)),t}Abt(){let t=e.get(this);return t||(t=new Map,e.set(this,t)),t}NPt(t){const s=this.YN();if(s.TO().h0(t))return!0;for(const i of s.y1t())if(i.TO().h0(t))return!0;return!!this.Sf.TO().h0(t)}u5(){const t=new Set,s=(t.add(this),this.jD());if(s&&s.Lq())for(const i of this.XB())if(t.add(i),i.n4())for(const e of i.o4())t.add(e);if(this.n4())for(const h of this.o4())t.add(h);for(const r of t.values())r.yY()}BPt(){this.BCt.kCt()&&this.ND();for(const t of this.qCt)t._Gt()}WPt(){this.BPt()}yY(){if(this.BPt(),this.NPt("instancecreate")){const t=this.YN(),s=new S.Event("instancecreate");s.z6=this.ND(),t.t$(s);for(const i of t.y1t())i.t$(s);this.Sf.t$(s)}this.Sf.O4(this.zL().Ipt().MY.a2t,this,null)}VPt(){this.Sf.O4(this.zL().Ipt().MY.l2t,this,null)}jPt(t){if(this.VCt){const s=new S.Event("destroy");s.HPt=t,this.t$(s)}if(this.NPt("instancedestroy")){const i=this.YN(),e=new S.Event("instancedestroy");e.z6=this.ND(),e.HPt=t,i.t$(e);for(const h of i.y1t())h.t$(e);this.Sf.t$(e)}}UPt(){return this.WCt?this.WCt.ITt():this.VCt.X4()}iM(t="full",s=null){const i={},e=("full"===t?i.uid=this.a4():i.c3=!0,this.g4());if(0<e.size&&(i.tags=Array.from(e)),"visual-state"!==t){const r=b.get(this);if(r&&r.size&&(i.ex=S.zo(r)),-1!==this.sD()&&(i.mts=this.sD()),0<this.BCt.HIt()){const n={},o=this.BCt.iCt();for(let t=0,s=this.JCt.length;t<s;++t)n[o[t].toString()]=this.JCt[t];i.ivs=n}if(this.qCt.length){const a={};for(const l of this.qCt){const u=l.iM(t);u&&(a[l.U6().mJ().toString()]=u)}i.behs=a}}this.Hst&&(i.w=this.Hst.Fq(t,s));const h=this.WCt?this.WCt.iM():this.VCt.Y4();return h&&(i.data=h),i}$$(t="full",s){this.Hst&&this.Hst.$$(t)}Z$(t,s="full",i=null){this.Hst&&this.Hst.Z$(t,s,i)}zPt(t,s="full",i=null){this.Hst&&this.Hst.zPt(t,s,i)}DCt(){this.zL().ML()&&this.Hst.DCt()}eM(s,t="full",i){if("full"===t)this.HCt=s.uid;else if(!s.c3)return;if(this.FPt(s.tags),"visual-state"!==t){let t=b.get(this);t&&(t.clear(),b.delete(this));const h=s.ex,r=(h&&(t=S.Jo(h),b.set(this,t)),this.$Ct=s.hasOwnProperty("mts")?s.mts:-1,s.ivs);if(r)for(const[n,o]of Object.entries(r)){const a=parseInt(n,10),l=this.BCt.eCt(a);if(!(l<0||l>=this.JCt.length)){let t=o;null===t&&(t=NaN),this.JCt[l]=t}}}if(this.zL().ML()){const u=s.w;if(u){const c=u.l;if(this.Hst.HD().mJ()!==c){const f=this.Hst.HD(),d=f.TD().RX(c);d?(this.Hst.qD(d),f.Kz(this,!0),d.Xz(this,!0),d.XD(this),this.Hst.cB()):"full"===t&&this.Sf.s4(this)}this.Hst.Oq(u,t)}}if("visual-state"!==t){const p=s.behs;if(p)for(const[m,g]of Object.entries(p)){const y=parseInt(m,10),w=this.jht(y);w<0||w>=this.qCt.length||this.qCt[w].eM(g,t)}}const e=s.data;e&&(this.WCt?this.WCt.eM(e,t):this.VCt.K4(e))}ND(){return this.VCt||this.rPt()}ATt(){return!!this.VCt}rPt(t,s){const i=this.Hst?t?self.DV:self.P6:t?self.M4:self.qN,e=t||this.WCt.Bxt(),h=this.BCt.kCt(),r=h||e||i,n=this.zL().Tbt();if(S.yL.jxt(this,n),S.yL.UGt(s),this.VCt=new r,S.yL.zGt(),S.yL.Hxt(n),e&&!(this.VCt instanceof i))throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`);if(h){const o=e||i;if(!(this.VCt instanceof o))throw new TypeError(`setInstanceClass(): class '${h.name}' does not extend the right base class - check it extends the right class, e.g. globalThis.InstanceType.MyObjectName`)}return this.VCt}$N(t){if(0!==this.JCt.length){const i={},e=this.BCt.rCt();for(let t=0,s=e.length;t<s;++t)i[e[t]]={configurable:!1,enumerable:!0,get:S.Instance.prototype.LPt.bind(this,t),set:S.Instance.prototype.nnt.bind(this,t)};const s=Object.create(Object.prototype,i);t.JPt={value:s,writable:!1}}}KN(t){const s=this.qCt;if(0!==s.length){const i={};for(const h of s)i[h.U6().u1t()]={value:h.lTt(),writable:!1};const e=Object.create(Object.prototype,i);t.Imt={value:e,writable:!1}}}t$(t){if(this.ATt()){const s=this.ND(),i=(t.z6=s,this.Sf),e=i.s$()&&!i.CO().c5();e&&h.StartMeasuringScriptTime(),s.dispatchEvent(t),e&&h.AddScriptTime()}}}}{const Ma=self.Bs;Ma.jY=class extends Ma.gr{constructor(e){super(),this.uM=e,this.qmt=null,this.qPt=[],this.XPt=e.Em(),this.YPt=e.Wm(),this.$Pt=1,this.KPt=1,this.ZPt=0,this.QPt=1,this.tEt=e.sA(),this.sEt=null,this.iEt=null,this.eEt=NaN,this.hEt=!1,this.Wq=NaN,this.Vq=NaN,this.rEt=t=>{if(t.z6===this.qmt.uV()){const s=e.ck(),i=(s.Qf().removeEventListener("instancecreate",this.rEt),this.qmt.uV().O6());this.hEt=!!i.Oit(),this.Wq=this.hEt?i.Fit():NaN,this.Vq=this.hEt?i.kit():NaN}}}Sr(){this.qmt=null,this.sEt=null,this.iEt=null,this.eEt=NaN,this.hEt=!1,this.Wq=NaN,this.Vq=NaN,Ma.Un(this.qPt)}nEt(t){if(this.QPt=this.uM.sA(),this.tEt=this.QPt,this.qmt=t,this.ZPt=t?t.GetAngle():0,this.qmt){const s=this.uM,i=s.ck(),e=this.qmt.uV().zL().Tbt();if(e<2){const h=this.qmt.uV().O6();h?(this.hEt=!!h.Oit(),this.Wq=this.hEt?h.Fit():NaN,this.Vq=this.hEt?h.kit():NaN):this.qmt.uV().mj()||i.Qf().addEventListener("instancecreate",this.rEt)}else this.hEt=!1,this.Wq=NaN,this.Vq=NaN}else this.hEt=!1,this.Wq=NaN,this.Vq=NaN}WB(){return this.qmt}Lq(){return 0<this.qPt.length}WY(){return this.qPt}oEt(){this.Lq()&&1!==this.qPt.length&&(this.iEt?this.qPt.sort((t,s)=>{const i=this.iEt.get(t.uV()),e=this.iEt.get(s.uV());return Ma.ve(i)&&Ma.ve(e)?i-e:0}):this.qPt.sort((t,s)=>{const i=t.gnt().aEt(),e=s.gnt().aEt();return Ma.ve(i)&&Ma.ve(e)?i-e:0}))}aEt(){return this.eEt}ynt(){return this.$Pt}lEt(t){this.$Pt=t}Snt(){return this.KPt}uEt(t){this.KPt=t}Int(){return this.tEt}eMt(){return this.QPt}cEt(t){this.QPt=t}mnt(){return 0===this.XPt?Number.EPSILON:this.XPt}wnt(){return 0===this.YPt?Number.EPSILON:this.YPt}fEt(){if(this.uM.n6()){let t=this.qmt,s=t.Em(),i=t.gnt().mnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.hEt?1+s/this.Wq:s/i}return 1}dEt(){if(this.uM.a6()){let t=this.qmt,s=t.Wm(),i=t.gnt().wnt();return 0===s&&(s=Number.EPSILON),i===Number.EPSILON&&s===Number.EPSILON?1:i===Number.EPSILON&&s!==Number.EPSILON&&this.hEt?1+s/this.Vq:s/i}return 1}pEt(){return 0}mEt(){return{sw:this.XPt,sh:this.YPt,sx:this.$Pt,sy:this.KPt,psa:this.ZPt,oo:this.QPt,so:this.tEt,pi:this.uM.uV().GPt()}}Fq(t,s=null){const i=this.mEt();return s&&s.selfOnly?Object.assign(i,{p:null,c:[]}):Object.assign(i,{p:this.gEt(t),c:this.yEt(t)})}wEt(t){let s="";return t.i6()&&(s+="x"),t.h6()&&(s+="y"),t.n6()&&(s+="w"),t.a6()&&(s+="h"),t.u6()&&(s+="a"),t.f6()&&(s+="z"),t.w6()&&(s+="d"),t.p6()&&(s+="o"),t.g6()&&(s+="v"),s}gEt(t){return this.qmt&&this.qmt.uV()&&!this.qmt.uV().mj()?this.SEt(this.qmt,this.uM,t):null}yEt(s){return this.qPt.map(t=>this.SEt(t,t,s)).filter(t=>t)}SEt(t,s,i){const e=t.uV();if(e&&e.mj())return null;const h={};return h.uid=e.a4(),h.f=this.wEt(s),h.offsets=s.bEt(),h.data=Ma.jY.vEt(e),h.oci=e.YN().KF(),"state"===i?(h.inst=e.iM("full",{selfOnly:!0}),h.instIndex=NaN):(h.instIndex=e.YN().i5().indexOf(e),h.inst=null),h}Oq(t){this.XPt=t.sw,this.YPt=t.sh,this.$Pt=t.sx,this.KPt=t.sy,this.ZPt=t.psa,this.QPt=t.oo,this.tEt=t.so,this.eEt=Ma.ve(t.pi)?t.pi:NaN}MEt(t,s){if(!t&&!s&&this.sEt)for(const i of this.sEt)i.mj()||i.QB()||i.ck().s4(i);this.sEt=t,this.iEt=s}Z$(t,s){const i=this.uM,e=i.ck(),h=new Set;if(t.p&&!this.qmt){const o=t.p.uid,a=e.LD(o);if(s?.w2t,a){const l=a.jD();if(a.MPt(i.uV()))this.qmt=l;else{a.IPt(i.uV().a4())?e.s4(i.uV()):a.$B(i.uV(),this.xEt(t.p.f)),h.has(i)||(i.TEt(t.p.offsets),this.GEt(a,t.p,s)),h.add(i);const u=a.jD();u.gnt().oEt()}}else if(Ma.ve(t.p.oci)){const c=e.kz(t.p.oci),f=(e.Hwt(),e.o5(c,i.HD(),0,0,!0));if(s?.w2t,f){const d=this._Et(t.p,e),p=(d&&f.eM(d),f.jD()),m=(p.HD().a5(f),f.$B(i.uV(),this.xEt(t.p.f)),f.jD());m.gnt().oEt()}}}const r=[];for(const g of t.c){const y=g.uid,w=e.LD(y);w&&r.push(w)}let n=0;for(const S of t.c){const b=S.uid,v=e.LD(b);if(s?.w2t,v){if(this.sEt){if(this.sEt.includes(v)){const G=v;if(G.YN()!==v.YN()){n++;continue}if(G.mj()){n++;continue}const _=t.c[n];if(!s?.w2t&&this.IEt(G,r,i)){this.CEt(n,_,i,h,s),n++;continue}if(G.QB()&&G.WB()!==i.uV()){const I=this.PEt(_,s);this.EEt(I,_,h,s),n++;continue}this.EEt(G.jD(),_,h,s,!0),n++;continue}if(this.sEt[n]){const C=this.sEt[n];if(C.YN()!==v.YN()){n++;continue}if(C.mj()){n++;continue}const P=t.c[n];if(!s?.w2t&&this.IEt(C,r,i)){this.CEt(n,P,i,h,s),n++;continue}if(C.QB()&&C.WB()!==i.uV()){const E=this.PEt(P,s);this.EEt(E,P,h,s),n++;continue}this.EEt(C.jD(),P,h,s,!0),n++;continue}}const M=v.YN(),x=this.AEt(r,M),T=i.uV().xPt(M).length;if(x===T){const A=i.uV().qB(n);if(A){const R=A.jD();R&&(h.has(R)||(R.TEt(S.offsets),this.GEt(A,S,s)),h.add(R))}n++;continue}if(v.QB()&&v.WB()!==i.uV()){const F=this.PEt(S,s);this.EEt(F,S,h,s),n++;continue}this.EEt(v.jD(),S,h,s)}else if(this.sEt&&this.sEt[n]){const O=this.sEt[n],k=e.kz(this.REt(S));if(O.YN()!==k){n++;continue}if(O.mj()){n++;continue}const D=t.c[n];if(!s?.w2t&&this.IEt(O,r,i)){this.CEt(n,D,i,h,s),n++;continue}if(O.QB()&&O.WB()!==i.uV()){const L=this.PEt(D,s);this.EEt(L,D,h,s),n++;continue}this.EEt(O.jD(),D,h,s)}else{const N=this.PEt(S,s);this.EEt(N,S,h,s)}n++}}IEt(t,s,i){const e=t.YN(),h=this.AEt(s,e),r=i.uV().xPt(e).length;return h===r}CEt(t,s,i,e,h){const r=i.uV().qB(t,s);if(r){const n=r.jD();n&&(e.has(n)||(n.TEt(s.offsets),this.GEt(r,s,h)),e.add(n))}}xEt(t){const s={};return s.s6=t.includes("x"),s.e6=t.includes("y"),s.r6=t.includes("w"),s.o6=t.includes("h"),s.l6=t.includes("a"),s.c6=t.includes("z"),s.y6=t.includes("d"),s.d6=t.includes("o"),s.m6=t.includes("v"),s}REt(t){return Ma.ve(t.oci)?t.oci:t[1]}PEt(e,h){if(Ma.ve(e.oci)){let t=this.uM,s=t.ck(),i;if(e.data)i=s.Jz(e.data,t.HD(),!1,0,0,!1,!0);else{const r=s.kz(e.oci);i=s.o5(r,t.HD(),0,0,!0)}if(h?.w2t,i){const n=this._Et(e,s),o=(n&&i.eM(n),i.jD());return o.HD().a5(i,!0),o}}}EEt(t,s,i,e,h=!0){const r=this.uM,n=r.$B(t,this.xEt(s.f));n&&h&&(i.has(t)||(t.TEt(s.offsets),this.GEt(t.uV(),s,e)),i.add(t)),this.oEt()}GEt(t,s,i){let e=this._Et(s,this.uM.ck());e&&((e=JSON.parse(JSON.stringify(e))).w=null,t.eM(e))}AEt(t,s){return t.filter(t=>t.YN().uf()===s.uf()).length}_Et(t,s){if(Ma.ve(t.instIndex)){const i=s.kz(t.oci),e=i.FCt();return e?e[t.instIndex]:null}return Ma.Ee(t.inst)?JSON.parse(t.inst):t.inst||void 0}static vEt(t){let s=t.jD().HD().Vz(t.a4());if(!s)return null;s=JSON.parse(JSON.stringify(s));const i=[];for(const e of[...t.WY()]){const h=e.jD();i.push([h.TD().mJ(),h.HD().KF(),e.a4(),Ma.jY.VY(h),e.YN().n4()?1:0,h.UD(),Ma.jY.vEt(e)])}return Ma.Je(s[0][14])?s[0][14][1]=i:(s[0][14]=[],s[0][14][0]=Ma.jY.FEt(),s[0][14][1]=i,s[0][14][2]=t.jD().UD()),s}static VY(t){let s=0;return(s|=Number(t.g6())<<8)|Number(t.p6())<<7|Number(t.f6())<<6|Number(t.w6())<<5|Number(t.u6())<<4|Number(t.a6())<<3|Number(t.n6())<<2|Number(t.h6())<<1|Number(t.i6())<<0}static FEt(t){let s=0;return s,511}}}{let d=self.Bs,t=self.Ms,r=(t.Es,d.wr(d.Rect)),n=d.wr(d.ou),s=d.wr(d.Event,"bboxchange",!1),f=d.wr(d.$o,0,0,0,0),u=d.wr(d.Vu),i=d.wr(d.$o,1,1,1,1),o=d.wr(d.Rect,0,0,-1,-1),h=d.wr(d.Rect,0,0,-1,-1),p=new Set(["absolute","relative"]),e=[],m=!0,g=new WeakMap,a=new WeakMap;d.KCt=class extends d.gr{constructor(t,s){super(),this.Pi=t,this.Dft=t.YN(),this.Sf=t.ck(),this.OEt=s,this.Dft.CCt(this,null,s),this.DEt=-1,this.kEt=-1,this.zbt=196635,this.Dft.zL()._L()&&(this.zbt|=128),this.ol=NaN,this.al=NaN,this.Ev=NaN,this.LEt=NaN,this.NEt=NaN,this.V2=NaN,this.ta=NaN,this.BEt=NaN,this.WEt=NaN,this.VEt=NaN,this.jEt=NaN,this.HEt=d.wr(d.Rect),this.UEt=d.wr(d.ou),this.zEt=h,this.JEt=o,this.qEt=null,this.XEt=null,this.YEt=null,this.Pv=i,this.$Et=i,this.KEt=null,this.ZEt=null,this.Pi.YN().oCt()&&(this.ZEt=d.wr(d.QEt,this.Pi,this)),this.tAt=null,this.sEt=null,this.iEt=null,this.sAt=-1,this.iAt=null}uPt(){this.zbt|=256}Sr(){if(this.Dft.CCt(this,this.OEt,null),this.KEt&&(this.Sf.uv().TS(this.KEt),this.KEt=null),this.qEt=null,this.XEt&&(this.XEt.eAt.Sr(),this.XEt=null),this.YEt&&(this.YEt.clear(),this.YEt=null),this.M6(),this.ZEt&&this.ZEt.Sr(),this.QB()&&this.WB().KB(this),this.Lq()){const t=[...this.WY()];for(const s of t)this.KB(s)}this.hAt(),this.rAt(),g.delete(this),a.delete(this),this.Pi=null,this.Dft=null,this.Sf=null,this.OEt=null}QCt(t){if(m=!1,this.fB(t[0],t[1]),this.Yv(t[2]),this._C(t[3],t[4]),this.V2=0,this._L()?this.v5(t[6]):this.ta=0,f.$a(t[7]),this.nAt(f),this.Pnt(t[8]),this.Ant(t[9]),this.Rv(t[10]),this.ZEt&&this.ZEt.oAt(t[12]),t[14]&&g.set(this,{aAt:t[14][1],lAt:t[14][2]}),t[15]){const s=t[15],e=(this.b6(s[0],s[1]),this.I6()),h=s[2];for(let i=0,t=h.length;i<t;++i){const r=h[i];for(let t=0,s=r.length;t<s;++t){const n=r[t],o=e.PM(t,i);o.Uv(n[0]),o.qv(n[1]),o.Yv(n[2]),o.Kv(n[3]),o.Qv(n[4])}}}if(t[16]){const i=t[16][0],a=t[16][1],l=!!a,u=!l,c=this.Sf.PPt();l&&c&&c.aut(this.uV(),a),u&&c&&c.aut(this.uV(),i)}m=!0,this.uAt()}tPt(){this.ol=0,this.al=0,this.Ev=0,this.LEt=0,this.NEt=0,this.V2=0,this.ta=0,this.BEt=0,this.WEt=1,this.VEt=0,this.jEt=0,this.uAt()}ck(){return this.Sf}YN(){return this.Dft}uV(){return this.Pi}cAt(){return this.u6()?this.fAt(this.WB().dAt()-this.tAt.pEt()):0}Uv(t){if(t=+t,this.i6()){const s=this.tAt,i=t-this.Hv(),e=-this.cAt();0==e?this.ol+=i/s.fEt():(this.ol+=Math.cos(e)*i/s.fEt(),this.h6()&&(this.al+=Math.sin(e)*i/s.dEt()))}else this.ol=t}cnt(t,s=!1){t=+t,!s&&this.i6()?this.Uv(this.Hv()+t):this.ol+=t}Hv(){if(this.i6()){let t=this.ol,s=this.tAt,i=this.WB(),e=this.cAt();return 0===e?t*=s.fEt():(t=t*s.fEt()*Math.cos(e),this.h6()&&(t-=this.al*s.dEt()*Math.sin(e))),i.Hv()+t}return this.ol}qv(t){if(t=+t,this.h6()){const s=this.tAt,i=t-this.Jv(),e=-this.cAt();0==e?this.al+=i/s.dEt():(this.i6()&&(this.ol-=Math.sin(e)*i/s.fEt()),this.al+=Math.cos(e)*i/s.dEt())}else this.al=t}fnt(t,s=!1){t=+t,!s&&this.h6()?this.qv(this.Jv()+t):this.al+=t}Jv(){if(this.h6()){let t=this.al,s=this.tAt,i=this.WB(),e=this.cAt();return 0===e?t*=s.dEt():(t=t*s.dEt()*Math.cos(e),this.i6()&&(t+=this.ol*s.fEt()*Math.sin(e))),i.Jv()+t}return this.al}fB(t,s){if(t=+t,s=+s,this.pAt()){const i=this.i6(),e=this.h6(),h=this.tAt,r=t-this.Hv(),n=s-this.Jv(),o=-this.cAt();if(0==o)i?this.ol+=r/h.fEt():this.ol=t,e?this.al+=n/h.dEt():this.al=s;else{const a=Math.sin(o),l=Math.cos(o);i?this.ol+=e?(l*r-a*n)/h.fEt():l*r/h.fEt():this.ol=t,e?this.al+=i?(a*r+l*n)/h.dEt():l*n/h.dEt():this.al=s}}else this.ol=t,this.al=s}mAt(){return[this.Hv(),this.Jv()]}mB(t,s){t=+t,s=+s,this.pAt()?this.fB(this.Hv()+t,this.Jv()+s):(this.ol+=t,this.al+=s)}Fvt(t,s){return this.Hv()===t&&this.Jv()===s}Yv(t){if(t=+t,this.f6()&&(t-=this.WB().Xv()),this.Ev!==t){this.Ev=t,this.gAt();const s=this.HD();0!==this.Ev&&s.tJ(),s.XD(this)}}gAt(){if(this.uAt(),this.Lq()){const i=this.WY();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.f6()&&e.gAt()}}}Rnt(t){this.Yv(this.Xv()+t)}Xv(){return this.f6()?this.WB().Xv()+this.Ev:this.Ev}yB(){return this.HD().Xv()+this.Xv()}Oit(){const t=this.uV().zL().Tbt();return t<2&&this.uV().O6().Oit()}Lm(t){if(t=+t,this.n6()){const s=this.Em();0===s?this.LEt=Number.EPSILON:this.LEt*=t/s}else this.LEt=t;this.yAt()}ag(t,s){t=+t,!s&&this.n6()?this.Lm(this.Em()+t):this.LEt+=t,this.yAt()}Em(){if(this.n6()){const t=this.WB(),s=t.Em(),i=t.gnt().mnt();return i===Number.EPSILON?(this.gnt().mnt()+s)*this.LEt:s*this.LEt}return this.LEt}Am(t){if(t=+t,this.a6()){const s=this.Wm();0===s?this.NEt=Number.EPSILON:this.NEt*=t/s}else this.NEt=t;this.yAt()}bnt(t,s){t=+t,!s&&this.a6()?this.Am(this.Wm()+t):this.NEt+=t,this.yAt()}Wm(){if(this.a6()){const t=this.WB(),s=t.Wm(),i=t.gnt().wnt();return i===Number.EPSILON?(this.gnt().wnt()+s)*this.NEt:s*this.NEt}return this.NEt}_C(t,s){if(t=+t,s=+s,this.n6()){const i=this.Em();0===i?this.LEt=Number.EPSILON:this.LEt*=t/i}else this.LEt=t;if(this.a6()){const e=this.Wm();0===e?this.NEt=Number.EPSILON:this.NEt*=s/e}else this.NEt=s;this.yAt()}mc(){return[this.Em(),this.Wm()]}cq(){return this.V2}wAt(t){if(t<0)throw new RangeError("invalid depth");this.V2=t}SAt(){if(this.QB()){const t=this.tAt;return Math.min(t.fEt(),t.dEt())}return 1}_L(){return 0!=(128&this.zbt)}v5(t){t=+t,this._L()&&(this.u6()&&(t-=this.WB().GetAngle()),t=d._r(t),this.ta!==t)&&(this.ta=t,this.yAt())}vnt(t){0!=(t=+t)&&this._L()&&(this.ta=d._r(this.ta+t),this.yAt())}yAt(){if(this.zbt|=1<<18,this.Lq()){const i=this.WY();for(let t=0,s=i.length;t<s;t++)i[t].yAt()}}GetAngle(){return this.u6()&&this._L()?this.fAt(d._r(this.WB().dAt()+this.ta)):this.ta}dAt(){return this.u6()&&this._L()?d._r(this.WB().dAt()+this.ta):this.ta}fAt(t){return this.n6()&&this.jB().Em()<0&&(t=d._r(d.Nr(t,this.jB().GetAngle()+Math.PI))),this.a6()&&this.jB().Wm()<0?d.Nr(t,this.jB().GetAngle()):t}bAt(){const t=this.WB();return!!(this.n6()&&t.Em()<0)||!!(this.a6()&&t.Wm()<0)}vAt(){const t=this.WB();return!!(this.n6()&&t.Em()<0&&this.a6()&&t.Wm()<0)}MAt(){const t=this.zbt;if(0!=(t&1<<18)){const s=this.GetAngle();this.BEt=Math.sin(s),this.WEt=Math.cos(s),this.zbt=-262145&t}}Nvt(){return this.MAt(),this.BEt}Lvt(){return this.MAt(),this.WEt}Pnt(t){this.VEt=+t}Cnt(t){this.VEt+=+t}vW(){return this.VEt}Ant(t){this.jEt=+t}Ent(t){this.jEt+=+t}xW(){return this.jEt}nAt(t){this.Pv.equals(t)||(this.Pv===i?(this.Pv=d.wr(d.$o,t),this.$Et=d.wr(d.$o,t),this.$Et.Pa()):t.Ga(1,1,1,1)?(this.Pv=i,this.$Et=i):(this.Pv.set(t),this.$Et.set(t),this.$Et.Pa()),this.uAt())}eA(t){if(t=d.Gr(+t,0,1),this.p6()){if(this.gnt().eMt()===t)return;this.gnt().cEt(t),t=this.sA()}else if(this.Pv.a===t)return;this.xAt(t)}TAt(){if(this.Lq()){const i=this.WY();for(let t=0,s=i.length;t<s;t++){const e=i[t];e.xAt(e.sA())}}}xAt(t){f.fa(this.Pv),f.a=t,this.nAt(f),this.TAt()}Tnt(t){this.p6()?this.eA(this.gnt().eMt()+t):this.eA(this.sA()+t)}sA(){return this.p6()?this.WB().sA()*this.gnt().eMt():this.Pv.a}_B(t){this.Pv.xa(t)||(f.fa(t),f.a=this.sA(),this.nAt(f))}ent(t,s,i){f.ra(t,s,i),this._B(f)}GAt(t,s,i){0===t&&0===s&&0===i||(f.fa(this.Pv),f.r+=t,f.g+=s,f.b+=i,this._B(f))}GB(){return this.Pv}bz(){return this.$Et}w6(){return 0!=(512&this.zbt)}_At(t){this.IAt(512,t)}i6(){return 0!=(1024&this.zbt)}CAt(t){this.IAt(1024,t)}h6(){return 0!=(2048&this.zbt)}pAt(){return 0!=(3072&this.zbt)}PAt(t){this.IAt(2048,t)}n6(){return 0!=(4096&this.zbt)}EAt(t){this.IAt(4096,t)}a6(){return 0!=(8192&this.zbt)}AAt(t){this.IAt(8192,t)}u6(){return 0!=(16384&this.zbt)}RAt(t){this.IAt(16384,t)}f6(){return 0!=(32768&this.zbt)}FAt(t){this.IAt(32768,t)}p6(){return 0!=(this.zbt&1<<22)}OAt(t){this.IAt(1<<22,t)}g6(){return 0!=(this.zbt&1<<23)}DAt(t){this.IAt(1<<23,t)}kAt(){this.zbt&=-12647937}$B(t,s){if(t===this)return!1;if(t.QB())return!1;if(this.LAt(t))return!1;if(this.NAt(t))return!1;const i=t.Hv(),e=t.Jv(),h=t.Em(),r=t.Wm(),n=t.GetAngle(),o=t.Xv(),a=t.sA(),l=(t.BAt(this),t.CAt(s.s6),t.PAt(s.e6),t.EAt(s.r6),t.AAt(s.o6),t.RAt(s.l6),t.FAt(s.c6),t.OAt(s.d6),t.DAt(s.m6),t._At(s.y6),i-this.Hv()),u=e-this.Jv(),c=-this.GetAngle(),f=Math.cos(c),d=Math.sin(c);if(s.s6&&(s.l6?t.ol=l*f-u*d:t.ol=l,s.r6)){const p=this.Em()/this.tAt.mnt();0!=p&&(t.ol/=p)}if(s.e6&&(s.l6?t.al=l*d+u*f:t.al=u,s.o6)){const m=this.Wm()/this.tAt.wnt();0!=m&&(t.al/=m)}if(s.r6){const g=this.Em();0===g||g===Number.EPSILON?(t.LEt=1,t.tAt.lEt(1)):(t.LEt=h/this.Em(),t.tAt.lEt(t.LEt))}if(s.o6){const y=this.Wm();0===y||y===Number.EPSILON?(t.NEt=1,t.tAt.uEt(1)):(t.NEt=r/this.Wm(),t.tAt.uEt(t.NEt))}return s.l6&&(t.ta=n-this.GetAngle()),s.c6&&(t.Ev=o-this.Xv()),s.d6&&t.tAt.cEt(a),s.m6&&t.hN(this.nN()),this.WAt(t),this.cB(),this.TAt(),!0}KB(t){if(t.WB()===this){const s=t.Hv(),i=t.Jv(),e=t.Em(),h=t.Wm(),r=t.GetAngle(),n=t.Xv(),o=t.sA();t.BAt(null),t.kAt(),t.fB(s,i),t._C(e,h),t.v5(r),t.Yv(n),t.eA(o),this.VAt(t),this.cB()}}jAt(){return this.sAt}HAt(){this.UAt();const t=[...this.children()];for(const i of t)this.KB(i);const s=this.WB();s&&s.KB(this),this.kAt()}UAt(){if(this.zAt(),!this.sEt){const s=[...this.children()];s.length&&(this.sEt=[],this.iEt=new WeakMap);let t=0;for(const i of s){const e=i.uV();this.sEt.push(e),this.iEt.set(e,t),t++}}const t=this.WB();t&&t.UAt()}zAt(){if(-1===this.sAt){const t=[...this.HB()];this.sAt=t.length;for(const i of t)i.zAt();const s=[...this.children()];for(const e of s)e.zAt()}}rAt(){this.sEt&&(this.sEt.length=0),this.sEt=null,this.iEt=null;const t=this.WB();t&&t.rAt(),this.sAt=-1}QB(){return null!==this.WB()}WB(){const t=this.tAt;return null!==t?t.WB():null}jB(){let t=this;for(;t.QB();)t=t.WB();return t}*HB(){let t=this.WB();for(;t;)yield t,t=t.WB()}MPt(t){return this.WY().includes(t)}Lq(){const t=this.tAt;return null!==t&&t.Lq()}WY(){const t=this.tAt;return null!==t?t.WY():e}children(){return this.WY()}*XB(){for(const t of this.children())yield t,yield*t.XB()}zB(){return this.WY().length}FMt(){return[...this.XB()].length}qB(t){const s=this.WY();return(t=Math.floor(+t))<0||t>=s.length?null:s[t]}_Pt(s){if(s){const i=this.WY();if(i)for(let t=0;t<i.length;t++)if(s===i[t])return t}return NaN}JAt(t){this.tAt||(this.tAt=d.wr(d.jY,this)),t&&this.tAt.nEt(t)}gnt(){return this.tAt}hAt(){this.tAt&&(this.tAt.Sr(),this.tAt=null)}BAt(t){t?(t.JAt(null),this.JAt(t)):(this.tAt&&this.tAt.nEt(null),this.Lq()||this.hAt())}NAt(t){if(!this.QB())return!1;const s=this.WB();return s===t||s.NAt(t)}LAt(t){if(this.MPt(t))return!0;for(const s of this.WY())if(s.LAt(t))return!0;return!1}WAt(t){this.tAt.WY().push(t)}VAt(t){const s=this.tAt.WY(),i=s.indexOf(t);-1!==i&&s.splice(i,1),0!==s.length||this.QB()||this.hAt(),t.Lq()||t.hAt()}CPt(){const t=g.get(this);return t?t.aAt:null}qAt(){const t=g.get(this);return t?t.lAt:NaN}kq(){const t=a.get(this);return d.ve(t)?t:NaN}XAt(t){a.set(this,t)}YAt(){this.IAt(1<<19,!0),this.uAt()}uAt(){if(m){const s=this.Sf.uv();this.KEt&&s.TS(this.KEt);let t;t=0!=(this.zbt&1<<19)?s.nS()||"<point>":s.eS()||"<default>",this.KEt=s.bS(t,this.EN(),this.$Et,this.Xv())}}Sq(){return this.KEt}SJ(){return this.Pv===i}Rv(t){if((t|=0)<0||31<t)throw new RangeError("invalid blend mode");this.EN()!==t&&(this.zbt=this.zbt&~(31<<26)|t<<26,this.uAt())}EN(){return(this.zbt&31<<26)>>26}qD(t,s){const i=s&&this.OEt!==t;i&&this.Zz(),this.Dft.CCt(this,this.OEt,t),this.OEt=t,i&&this.$At(),0!==this.Xv()&&this.OEt.tJ()}HD(){return this.OEt}TD(){return this.HD().TD()}iJ(t){this.DEt=0|t}UD(){return this.OEt.c9(),this.DEt}m9(t){this.kEt=0|t}aj(){return this.OEt.d9(),this.kEt}QU(){return this.DEt}IAt(t,s){s?this.zbt|=t:this.zbt&=~t}nN(){return 0!=(1&this.zbt)}hN(t){if(this.IAt(1,t),this.Lq())for(const s of this.WY())s.g6()&&s.hN(t)}LB(){return 0!=(8&this.zbt)}NB(t){t=!!t,this.LB()!==t&&(this.IAt(8,t),t?this.cB():this.KAt())}ZAt(t,s){if(this.IAt(32,t),this.YEt&&this.YEt.clear(),s.trim()){this.YEt||(this.YEt=new Set);for(const i of s.split(" "))i&&this.YEt.add(i.toLowerCase())}else this.YEt=null}QAt(t){const s=0!=(32&this.zbt),i=this.YEt;if(t&&i)for(const e of i)if(t.has(e))return s;return!s}cB(){if(this.zbt|=65554,this.Dft.GCt(!0),this.Sf.YD(),this.OEt.Rz()&&(this.tRt(this.HEt,this.UEt,!0),this.zbt&=-3,this.$At()),0!=(4&this.zbt)&&this.Pi.Qf().dispatchEvent(s),null!==this.tAt){const i=this.tAt.WY();for(let t=0,s=i.length;t<s;++t)i[t].cB()}}tRt(t,s,i){const e=this.Hv(),h=this.Jv(),r=this.Em(),n=this.Wm(),o=this.GetAngle();t.xl(e-this.VEt*r,h-this.jEt*n,r,n),i&&this._6()&&this.sRt(t),0===o?s.Cu(t):(t.offset(-e,-h),s.Eu(t,this.Nvt(),this.Lvt()),s.offset(e,h),s.Au(t)),t.normalize()}iRt(){const t=this.zbt;0!=(2&t)&&(this.tRt(this.HEt,this.UEt,!0),this.zbt=-3&t)}SB(){return this.iRt(),this.HEt}vB(){return this.iRt(),this.UEt}eRt(t){const s=this.Hv(),i=this.Jv(),e=Math.round(s)-s,h=Math.round(i)-i;return 0==e&&0==h?t:(n._(t),n.offset(e,h),n)}hRt(t){this.HEt._(t),this.UEt.Cu(this.HEt),this.zbt&=-3,this.ICt(),this.$At()}rRt(t){this.IAt(4,t)}nRt(){return 0!=(4&this.zbt)}nq(t,s,i){return s&&0!==this.cq()?this.lq(this.HD().aq()):0===this.Xv()||i?t.su(this.SB()):this.oRt()}oRt(){const t=this.HD(),s=this.yB();return!(s>=t.LJ())&&(t.DJ(s,r),r.su(this.SB()))}lq(t){const s=this.SB(),i=s.Al(),e=s.Fl(),h=s.Rl(),r=s.Ol(),n=this.yB(),o=n+this.cq();return t.By(i,h,n,e,r,o)}xB(){const t=this.HD();if(t.YJ())return this.lq(t.aq());{const s=t.TD();return this.nq(t.ON(),s.rq(),s.X5())}}gq(t){this.IAt(1<<20,t)}mq(t){this.IAt(1<<21,t)}aRt(){return 0!=(this.zbt&1<<20)}lRt(){return 0!=(this.zbt&1<<21)}uRt(t){this.qEt=t,this.cRt(),this._6()&&(this.iAt.fRt=null)}dRt(){return this.qEt}pRt(){return null!==this.qEt||this._6()}mRt(){return this.gRt(this.Em(),this.Wm(),this.GetAngle(),this.Nvt(),this.Lvt())}yRt(t,s,i){let e=0,h=1;return 0!==i&&(e=Math.sin(i),h=Math.cos(i)),this.gRt(t,s,i,e,h)}gRt(h,r,t,n,o){let s=this.XEt;null===s&&(s={eAt:d.wr(d.Vu),width:NaN,height:NaN,angle:NaN},this.XEt=s);const a=s.eAt;if(s.width!==h||s.height!==r||s.angle!==t){const l=this.qEt;if(this._6()){let t=this.vW(),s=this.xW(),i=this.I6(),e=this.iAt.fRt;e||(l?(u._(l),u.offset(t,s)):u.Yu(),e=i.FM(u),this.iAt.fRt=e),i.OM(e,a),a.offset(-t,-s),a.Qu(h,r,n,o)}else l?(a._(l),a.Qu(h,r,n,o)):a.Zu(this.vB(),-this.Hv(),-this.Jv());s.width=h,s.height=r,s.angle=t}return a}cRt(){this.wRt(!0);const t=this.XEt;null!==t&&(t.width=NaN)}b6(t,s){if(t=Math.floor(t),s=Math.floor(s),!this.uV().zL().OL())throw new Error("object does not support mesh");this.M6(),this.iAt={SRt:d.wr(d.Iy.oM,t,s),bRt:d.wr(d.Iy.oM,t,s),fRt:null}}_6(){return null!==this.iAt}I6(){if(this._6())return this.iAt.SRt;throw new Error("no mesh")}vRt(){if(this._6())return this.iAt.bRt;throw new Error("no mesh")}MRt(t){this.IAt(65536,t)}xRt(){return 0!=(65536&this.zbt)}wRt(t){this.IAt(1<<17,t)}TRt(){return 0!=(this.zbt&1<<17)}sRt(t){const s=this.iAt.SRt,i=Math.min(s.xM(),0),e=Math.min(s.TM(),0),h=Math.max(s.GM(),1),r=Math.max(s._M(),1),n=t.width(),o=t.height();t.offsetLeft(i*n),t.offsetTop(e*o),t.Vl((h-1)*n),t.jl((r-1)*o),this.V2=s.IM()}M6(){this.iAt&&(this.iAt.SRt.Sr(),this.iAt.bRt.Sr(),this.iAt=null,this.cRt())}T6(t,s,i){t=Math.floor(t),s=Math.floor(s);const e=i.mode||"absolute";if(!p.has(e))throw new Error("invalid mode");let h="relative"===e,r=i.x,n=i.y,o=i.xN,a="number"==typeof i.u?i.u:h?0:-1,l="number"==typeof i.v?i.v:h?0:-1;if(!this._6())return!1;const u=this.I6(),c=u.PM(t,s);if(null===c)return!1;let f=!1;return"number"==typeof o&&c.Xv()!==o&&(c.Yv(o),f=!0),h&&(r+=t/(u.wM()-1),n+=s/(u.SM()-1)),a=-1!==a||h?(h&&(a+=t/(u.wM()-1)),d.Gr(a,0,1)):c.$v(),l=-1!==l||h?(h&&(l+=s/(u.SM()-1)),d.Gr(l,0,1)):c.Zv(),c.Hv()===r&&c.Jv()===n&&c.$v()===a&&c.Zv()===l?f:(c.Uv(r),c.qv(n),c.Kv(a),c.Qv(l),this.cRt(),!0)}lPt(){return this.Pi.lPt()}BB(t,s){return!!this.SB().eu(t,s)&&!!this.vB().eu(t,s)&&(this.lPt()?this.Pi.O6().qTt(t,s):!this.pRt()||this.mRt().eu(t-this.Hv(),s-this.Jv()))}GRt(){return 0!=(16&this.zbt)}ICt(){if(this.GRt()&&this.LB()&&0==(256&this.zbt)){const t=this.SB(),s=this.Dft.TCt(),i=this.zEt;if(r.set(s.g7(t.Al()),s.y7(t.Rl()),s.g7(t.Fl()),s.y7(t.Ol())),!i.equals(r)){const e=this.Pi;i===h?(s.w7(e,null,r),this.zEt=d.wr(d.Rect,r)):(s.w7(e,i,r),i._(r)),this.zbt&=-17}}}_Rt(){this.zbt|=16}KAt(){const t=this.zEt;t!==h&&(this.Dft.TCt().w7(this.Pi,t,null),this.zEt=h)}$At(){const t=this.HD();if(t.Rz()&&0==(256&this.zbt)){const s=t.vJ(),i=this.SB(),e=this.JEt;if(r.set(s.g7(i.Al()),s.y7(i.Rl()),s.g7(i.Fl()),s.y7(i.Ol())),!e.equals(r)){const h=this.Pi;e===o?(s.w7(h,null,r),this.JEt=d.wr(d.Rect,r)):(s.w7(h,e,r),e._(r)),t.MJ()}}}Zz(){const t=this.JEt;t!==o&&(this.HD().vJ().w7(this.Pi,t,null),this.JEt=o)}f9(){return this.JEt}CB(){const t=this.Pi,s=this.OEt,i=s.JD();i.length&&i.at(-1)===t||(s.Kz(t,!1),s.Xz(t,!1),this.Sf.YD())}EB(){const t=this.Pi,s=this.OEt,i=s.JD();i.length&&i[0]===t||(s.Kz(t,!1),s.$z(t,!1),this.Sf.YD())}RB(t){const s=this.Pi,i=this.OEt;if(i.TD()!==t.TD())throw new Error("layer from different layout");t!==i&&(i.Kz(s,!0),this.qD(t),t.Xz(s,!0),this.Sf.YD())}DB(t,s){let i=this.Pi,e=!1,h=this.OEt;if(t.a4()!==i.a4()){const r=t.jD();if(!r)throw new Error("expected world instance");const n=r.HD(),o=(h.KF()!==n.KF()&&(h.Kz(i,!0),this.qD(n),n.Xz(i,!0),e=!0),n.w9(i,t,!!s));(e||o)&&this.Sf.YD()}}lB(){return this.ZEt}IRt(t){this.IAt(64,t)}G9(){return 0!=(64&this.zbt)}Fq(t,s=null){const i={x:this.Hv(),y:this.Jv(),w:this.Em(),h:this.Wm(),l:this.HD().mJ(),zi:this.UD()},e=(0!==this.Xv()&&(i.ze=this.Xv()),0!==this.GetAngle()&&(i.a=this.dAt()),this.SJ()||(i.c=this.Pv.toJSON()),.5!==this.vW()&&(i.oX=this.vW()),.5!==this.xW()&&(i.oY=this.xW()),0!==this.EN()&&(i.bm=this.EN()),this.nN()||(i.v=this.nN()),this.LB()||(i.ce=this.LB()),this.nRt()&&(i.be=this.nRt()),this.ZEt&&(i.fx=this.ZEt.Fq()),0!=(32&this.zbt));return e&&(i.sfi=e),this.YEt&&(i.sft=[...this.YEt].join(" ")),this.tAt&&"visual-state"!==t&&(i.sgi=this.tAt.Fq(t,s),g.has(this))&&(i.sgcd=g.get(this).aAt,i.sgzid=g.get(this).lAt),this._6()&&(i.mesh=this.I6().iM()),i}bEt(){return{x:this.ol,y:this.al,z:this.Ev,w:this.LEt,h:this.NEt,a:this.ta,sgi:this.gnt()?this.gnt().mEt():null}}TEt(t){t&&(this.ol=t.x,this.al=t.y,this.Ev=t.z,this.LEt=t.w,this.NEt=t.h,this.ta=t.a,t.sgi&&this.gnt()&&this.gnt().Oq(t.sgi),this.yAt(),this.cB())}DCt(){this.rAt(),this.HAt(),this.JAt(null),this.tAt&&this.tAt.MEt(this.sEt,this.iEt)}$$(t){"visual-state"!==t&&this.HAt()}Z$(t,s="full",i=null){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.zbt)&&this.tAt.Z$(t.sgi,i)}zPt(t,s="full",i){t.hasOwnProperty("sgi")&&"visual-state"!==s&&0==(256&this.zbt)&&(this.tAt.MEt(null,null),this.rAt(),this.cB())}Oq(t,s){if(m=!1,this.Uv(t.x),this.qv(t.y),this.Lm(t.w),this.Am(t.h),this.iJ(t.zi),this.Yv(t.hasOwnProperty("ze")?t.ze:0),this.v5(t.hasOwnProperty("a")?t.a:0),t.hasOwnProperty("c")?f.$a(t.c):t.hasOwnProperty("o")?(f.fa(this.Pv),f.a=t.o):f.ea(1,1,1,1),this.nAt(f),this.Pnt(t.hasOwnProperty("oX")?t.oX:.5),this.Ant(t.hasOwnProperty("oY")?t.oY:.5),this.Rv(t.hasOwnProperty("bm")?t.bm:0),this.hN(!t.hasOwnProperty("v")||t.v),this.NB(!t.hasOwnProperty("ce")||t.ce),this.rRt(!!t.hasOwnProperty("be")&&t.be),this.ZAt(!!t.hasOwnProperty("sfi")&&t.sfi,t.hasOwnProperty("sft")?t.sft:""),this.ZEt&&t.hasOwnProperty("fx")&&this.ZEt.Oq(t.fx),!t.hasOwnProperty("sgi")&&"visual-state"!==s&&this.sEt)for(const i of this.sEt)i.mj()||this.Sf.s4(i);if(t.hasOwnProperty("sgi")&&"visual-state"!==s){this.JAt(null);const e=this.tAt,h=t.sgi;e.Oq(h),e.MEt(this.sEt,this.iEt),t.sgcd&&d.ve(t.sgzid)&&g.set(this,{aAt:t.sgcd,lAt:t.sgzid})}if(t.hasOwnProperty("mesh")){const r=t.mesh;this.b6(r.cols,r.rows),this.I6().eM(r)}else this.M6();this.cB(),m=!0,this.uAt(),"visual-state"!==s&&this.Sf.CRt(this.uV(),t)}}}{const xa=self.Bs;xa.mIt=class extends xa.gr{constructor(t,s){super();const i=t.ck(),e=i.Jyt(s[1]),h=(i.PRt().HGt(e),this.Sf=i,this.Dft=t,this.vGt=xa.yL.Y6(e),this.nTt=null,this.ERt=null,this.J_t=e.Instance,this.O7=s[2],this.Mr=s[0],this.Pwt=this.Sf.u1t(s[3]),this.vGt.Tbt());if(h<2&&(this.nTt=xa.wr(e.RIt,this),!(this.nTt instanceof xa.bGt)))throw new Error("v1 sdk type must derive from SDKBehaviorBase");if(xa.yL.jxt(this,h),2<=h){const r=e.RIt??globalThis._j;if(this.ERt=new r,!(this.ERt instanceof globalThis._j))throw new Error("script interface class must derive from ISDKBehaviorTypeBase")}else this.ERt=new globalThis.q6;xa.yL.Hxt(h),this.Nxt()}static kx(t,s){return xa.wr(xa.mIt,t,s)}Sr(){this.Sf=null,this.vGt=null,this.nTt&&(this.nTt.Sr(),this.nTt=null),this.J_t=null}bvt(){return this.nTt}Nxt(){this.nTt?this.nTt.Nxt():this.ERt&&this.ERt.CV()}ck(){return this.Sf}YN(){return this.Dft}V6(){return this.vGt}tCt(){return this.J_t}uf(){return this.Mr}mJ(){return this.O7}H6(){return this.ERt}u1t(){return this.Pwt}}}{const Ta=self.Bs,Ga=self.B6;Ta.XCt=class extends Ta.gr{constructor(t){super(),this.Sf=t.runtime,this.aSt=t.j6,this.vGt=this.aSt.V6(),this.Pi=t.z6,this.Sy=t.index,this.WCt=null,this.VCt=null,this.vGt.Xz(this.Pi)}Sr(){this.VCt&&(this.VCt.t4(),this.VCt=null),this.vGt.Kz(this.Pi),this.WCt&&(this.WCt.Sr(),this.WCt=null),this.Sf=null,this.aSt=null,this.vGt=null,this.Pi=null}YIt(t){if(this.WCt)throw new Error("already got sdk instance");const s=this.V6().Tbt();if(s<2){if(this.WCt=Ta.wr(this.aSt.tCt(),this,t),!(this.WCt instanceof Ta.MGt))throw new Error("v1 sdk type must derive from SDKBehaviorInstanceBase")}else{const i=this.V6().Bxt();this.Vxt(i.Instance,t)}}O6(){return this.WCt??this.VCt}J6(){return this.Pi}ck(){return this.Sf}U6(){return this.aSt}V6(){return this.vGt}Hrt(){return this.Sy}_Gt(){this.WCt?this.WCt._Gt():this.VCt.Ej()}EGt(t,s){this.WCt&&this.WCt.EGt(t,s)}UPt(){return this.WCt?this.WCt.ITt():this.VCt.X4()}iM(t="full"){return this.WCt?this.WCt.iM(t):this.VCt.Y4(t)}eM(t,s="full"){if(this.WCt)return this.WCt.eM(t,s);this.VCt.K4(t,s)}static ARt(t,s,i){let e=globalThis.Ij,h,r;h=s instanceof e?t.O5(s):s.GGt(),r=i instanceof e?t.O5(i):i.GGt();const n=h.J6(),o=r.J6(),a=n.YN().KF(),l=o.YN().KF();if(a!==l)return a-l;const u=n.RPt(),c=o.RPt();return u!==c?u-c:h.Hrt()-r.Hrt()}Vxt(t,s){const i=Ga,e=t??this.WCt.Bxt(),h=e||i,r=this.V6().Tbt();if(Ta.yL.jxt(this,r),Ta.yL.UGt(s),this.VCt=new h,Ta.yL.zGt(),Ta.yL.Hxt(r),!e||this.VCt instanceof i)return this.VCt;throw new TypeError(`script interface class '${e.name}' does not extend the right base class '${i.name}'`)}lTt(){return this.VCt||this.Vxt()}ATt(){return!!this.VCt}}}{const _a=self.Bs;_a.wz=class extends _a.gr{constructor(t,s){super(),this.uM=t,this.RRt=[],this.FRt=[],this.ORt=new Map,this.DRt=[],this.kRt=[],this.LRt=new Set,this.$b=!0;for(const i of s){const e=_a.wr(_a.NRt,this,i,this.RRt.length);this.RRt.push(e),this.ORt.set(e.uf().toLowerCase(),e),3<=i.length&&this.DRt.push(this.BRt(e,i[2]))}this.ck().WRt(this)}Sr(){this.ck().VRt(this);for(const t of this.kRt)t.Sr();_a.Un(this.kRt),_a.Un(this.RRt),_a.Un(this.FRt),this.ORt.clear(),_a.Un(this.DRt),this.uM=null}jRt(t){this.LRt.add(t)}HRt(t){this.LRt.delete(t)}URt(t){t.$w()&&(this.kRt=this.RRt.map(t=>{const s=t.DT();return 0<s.GetCustomParametersByteSize()?_a.wr(_a.Iy.WebGPUEffectCustomParamsBuffer,s):null}),this.zRt());for(const s of this.LRt)s.URt(t)}qIt(t){if(t.length){this.RRt=t.concat(this.RRt);for(const s of t)this.ORt.set(s.uf().toLowerCase(),s);for(let t=0,s=this.RRt.length;t<s;++t)this.RRt[t].uJ(t)}}BRt(t,s){t.JRt(s[0]);const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=_a.wr(_a.$o);h.$a(e),i[t]=h}}return i}bM(){return this.uM}ck(){return this.uM.ck()}Q6(){_a.Un(this.FRt);let t=!0;for(const s of this.RRt)s.Rmt()&&(this.FRt.push(s),s.DT().wv()||(t=!1));this.$b=t}g5(){return this.RRt}aCt(){return 0<this.RRt.length}Jht(t){return this.ORt.get(t.toLowerCase())||null}qRt(t){if((t=Math.floor(+t))<0||t>=this.RRt.length)throw new RangeError("invalid effect type index");return this.RRt[t]}K6(t){return this.qRt(t).Rmt()}Z6(t,s){this.qRt(t).JRt(s)}bJ(){return this.FRt}G9(){return 0<this.FRt.length}wv(){return this.$b}zht(t){return this.DRt[t]}Mz(t){return(t<this.kRt.length?this.kRt:this.DRt)[t]}tW(t,s){if(t<0||t>=this.DRt.length)return null;const i=this.DRt[t];return s<0||s>=i.length?null:i[s]}sW(t,s,i){if(t<0||t>=this.DRt.length)return!1;const e=this.DRt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof _a.$o){if(h.xa(i))return!1;h.fa(i)}else{if(h===i)return!1;e[s]=i}return t<this.kRt.length&&this.kRt[t].SetParameterValue(s,i),!0}zRt(){const i=this.DRt,e=this.kRt;for(let t=0,s=Math.min(i.length,e.length);t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}static XRt(t){return t&&t instanceof _a.$o?{t:"color",v:t.toJSON()}:t}static YRt(t){if(null===t)return NaN;if("object"!=typeof t)return t;{const s=t.t;if("color"!==s)throw new Error("invalid effect parameter type");{const i=_a.wr(_a.$o);return i.$a(t.v),i}}}static $Rt(t){return t.map(_a.wz.XRt)}static KRt(t){return t.map(_a.wz.YRt)}iM(){return this.RRt.map(t=>({name:t.uf(),active:t.Rmt(),params:_a.wz.$Rt(this.DRt[t.KF()])}))}eM(t){for(const s of t){const i=this.Jht(s.name);i&&(i.JRt(s.active),this.DRt[i.KF()]=_a.wz.KRt(s.params))}this.Q6(),this.zRt()}}}{const Ia=self.Bs;Ia.NRt=class extends Ia.gr{constructor(t,s,i){super(),this.yz=t,this.vf=s[0],this.Mr=s[1],this.Sy=i,this._v=null,this.S0=!0}Sr(){this.yz=null,this._v=null}JIt(t){const s=Ia.wr(Ia.NRt,t,[this.vf,this.Mr],-1);return s._v=this._v,s.S0=this.S0,s}URt(t){const s=t.iS(this.vf);if(!s)throw new Error("failed to find shader program '"+this.vf+"'");this._v=s}m5(){return this.yz}uf(){return this.Mr}uJ(t){this.Sy=t}KF(){return this.Sy}bM(){return this.yz.bM()}ck(){return this.yz.ck()}JRt(t){this.S0=!!t}Rmt(){return this.S0}DT(){return this._v}ZRt(){const i=[];for(let t=0,s=this._v.kT();t<s;++t){const e=this._v.LT(t);if("float"===e||"percent"===e)i.push(0);else{if("color"!==e)throw new TypeError("unknown effect parameter type");i.push(Ia.wr(Ia.$o,1,1,1,1))}}return i}}}{const Ca=self.Bs;Ca.QEt=class extends Ca.gr{constructor(t,s){super(),this.Pi=t,this.QRt=s,this.yz=t.YN().m5(),this.t3t=!0,this.Tz=!0,this.s3t=!1,this.i3t=!1,this.e3t=!1,this.h3t=!1,this.qF=Ca.wr(Ca.Iy.HR,t.ck().tL().Sz(),{RR:(t,s)=>{const i=s.BF(),e=i.jD();t.Fv(e.bz()),t.NS(e.yB()),i.AM(t),t.NS(0)},FR:t=>{const s=t.jTt(),[i,e]=t.VTt();return{RF:s,FF:i,OF:e}},OR:t=>this.Mz(t)}),this.r3t=[],this.FRt=[],this.$b=!0,this.DRt=[],this.kRt=[],this.URt(t.ck().uv());for(let t=0,s=this.yz.g5().length;t<s;++t)this.r3t.push(!0);this.Q6(),this.yz.jRt(this)}Sr(){this.yz.HRt(this);for(const t of this.kRt)t&&t.Sr();Ca.Un(this.kRt),this.qF.Sr(),this.qF=null,Ca.Un(this.r3t),Ca.Un(this.FRt),Ca.Un(this.DRt),this.Pi=null,this.yz=null}URt(t){t.$w()&&(this.kRt=this.yz.g5().map(t=>{const s=t.DT();return 0<s.GetCustomParametersByteSize()?Ca.wr(Ca.Iy.WebGPUEffectCustomParamsBuffer,s):null}))}oAt(t){let s=0;for(const i of t)this.DRt.push(this.BRt(s,i)),++s;this.zRt(),this.Q6()}BRt(t,s){this.r3t[t]=s[0];const i=s.slice(1);for(let t=0,s=i.length;t<s;++t){const e=i[t];if(Array.isArray(e)){const h=Ca.wr(Ca.$o);h.$a(e),i[t]=h}}return i}sPt(){for(const t of this.yz.g5())this.DRt.push(t.ZRt());this.zRt()}bM(){return this.uM}m5(){return this.yz}$F(){return this.wJ(),this.qF}ck(){return this.Pi.ck()}Q6(){Ca.Un(this.FRt);let t=this.QRt,i=this.yz.g5(),e=this.FRt,h=this.r3t,r=!0;for(let t=0,s=i.length;t<s;++t)if(h[t]){const n=i[t];e.push(n),n.DT().wv()||(r=!1)}this.$b=r,t.IRt(!!e.length),this.t3t=!0}wJ(){const t=this.Pi,s=this.QRt,i=s.SJ(),e=t.zL().EL(),h=0!==s.GetAngle()||0!==s.HD().GetAngle()||s.Em()<0||s.Wm()<0,r=t.zTt(),n=t.yv();(this.t3t||i!==this.Tz||e!==this.s3t||h!==this.i3t||r!==this.e3t||n!==this.h3t||this.qF.L3())&&(this.qF.N3(this.FRt.map(t=>t.DT()),{kR:this.FRt.map(t=>t.KF()),LR:!i||n,BR:e,WR:r,VR:h}),this.t3t=!1,this.Tz=i,this.s3t=e,this.i3t=h,this.e3t=r,this.h3t=n)}bJ(){return this.FRt}zht(t){return this.DRt[t]}Mz(t){return(t<this.kRt.length?this.kRt:this.DRt)[t]}tW(t,s){if(t<0||t>=this.DRt.length)return null;const i=this.DRt[t];return s<0||s>=i.length?null:i[s]}sW(t,s,i){if(t<0||t>=this.DRt.length)return!1;const e=this.DRt[t];if(s<0||s>=e.length)return!1;const h=e[s];if(h instanceof Ca.$o){if(h.xa(i))return!1;h.fa(i)}else{if(h===i)return!1;e[s]=i}return t<this.kRt.length&&this.kRt[t].SetParameterValue(s,i),!0}zRt(){const i=this.DRt,e=this.kRt;for(let t=0,s=e.length;t<s;++t){const h=e[t],r=i[t];for(let t=0,s=r.length;t<s;++t)h.SetParameterValue(t,r[t])}}wv(){return this.$b}n3t(){return this.FRt.some(t=>t.DT().vv())}K6(t){return this.r3t[t]}Z6(t,s){this.r3t[t]=!!s}g5(){return this.yz.g5()}Fq(){return this.yz.g5().map(t=>({name:t.uf(),active:this.r3t[t.KF()],params:Ca.wz.$Rt(this.DRt[t.KF()])}))}Oq(t){for(const s of t){const i=this.yz.Jht(s.name);i&&(this.r3t[i.KF()]=s.active,this.DRt[i.KF()]=Ca.wz.KRt(s.params))}this.Q6(),this.zRt()}}}{let _=self.Bs,r=[],b=[],n=[],v=_.wr(_.Vu),w=_.wr(_.Vu),M=_.wr(_.ou),d=_.wr(_.Rect),p=_.wr(_.Rect),m=null,g=null,y=null;_.o3t=class extends _.gr{constructor(t){super(),this.Sf=t,this.a3t=0,this.l3t=0,this.u3t=[],this.c3t=0,this.f3t=0,this.d3t=0,this.p3t=0,this.m3t=new self.Ak(this)}Sr(){this.Sf=null}ck(){return this.Sf}eO(){return this.m3t}g3t(){this.f3t=this.c3t,this.c3t=0,this.p3t=this.d3t,this.d3t=0}y3t(){return this.f3t}w3t(){return this.p3t}S3t(t,s){const i=t.jD(),e=s.jD();i&&e&&i.LB()&&e.LB()&&this.u3t.push([t,s])}xMt(s,i,e){for(const[h,r]of this.u3t){let t=null;if(s===h)t=r;else{if(s!==r)continue;t=h}t.PMt(i)&&!e.includes(t)&&e.push(t)}}TMt(t,s){if(this.u3t.length)for(const[i,e]of this.u3t)if(t===i&&s===e||t===e&&s===i)return!0;return!1}b3t(){_.Un(this.u3t)}Fk(t,s){if(!t||!s||t===s)return!1;const i=t.jD(),e=s.jD();if(!i.LB()||!e.LB())return!1;this.c3t++;const h=i.HD(),r=e.HD(),n=h.o9(r);return n?this.v3t(i,e):this.M3t(i,e)}v3t(t,s){if(!t.SB().su(s.SB()))return!1;if(this.d3t++,!t.vB().Fu(s.vB()))return!1;if(t.lPt()&&s.lPt())return!1;if(t.lPt())return this.x3t(t,s);if(s.lPt())return this.x3t(s,t);if(!t.pRt()&&!s.pRt())return!0;const i=t.mRt(),e=s.mRt();return i.tc(e,s.Hv()-t.Hv(),s.Jv()-t.Jv())}M3t(i,e){const t=i.lPt(),s=e.lPt();if(t&&!s)return this.T3t(i,e);if(s&&!t)return this.T3t(e,i);if(s||t)return!1;{const h=i.HD(),r=e.HD(),n=(v._(i.mRt()),w._(e.mRt()),v.Ju());for(let t=0,s=n.length;t<s;t+=2){const a=t+1,l=n[t],u=n[a],[c,f]=h.WN(l+i.Hv(),u+i.Jv());n[t]=c,n[a]=f}const o=w.Ju();for(let t=0,s=o.length;t<s;t+=2){const d=t+1,p=o[t],m=o[d],[g,y]=r.WN(p+e.Hv(),m+e.Jv());o[t]=g,o[d]=y}return v.$u(),w.$u(),this.d3t++,v.tc(w,0,0)}}T3t(t,s){const i=t.HD(),e=s.HD(),h=(m=m||_.wr(_.Vu),g=g||_.wr(_.Rect),y=y||_.wr(_.ou),s.Hv()),r=s.Jv(),[n,o]=e.WN(h,r),[a,l]=i.kN(n,o),u=a-h,c=l-r;if(g._(s.SB()),g.offset(u,c),!t.SB().su(g))return!1;if(y._(s.vB()),y.offset(u,c),this.d3t++,!t.vB().Fu(y))return!1;m._(s.mRt());const f=m.Ju();for(let t=0,s=f.length;t<s;t+=2){const d=t+1;f[t]+=u,f[d]+=c}return m.$u(),this.x3t(t,s,a,l,m,g,y)}x3t(t,e,s,i,h,r,n){const o=void 0!==r?r:e.SB(),a=t.Hv(),l=t.Jv(),u=t.uV().O6(),c=void 0!==s?s:e.Hv(),f=void 0!==i?i:e.Jv(),d=e.pRt(),p=void 0!==n?n:e.vB(),m=b;u.G3t(o,m);for(let t=0,s=m.length;t<s;++t){const g=m[t],y=g._3t();if(this.c3t++,o.iu(y,a,l)&&(M.Cu(y),M.offset(a,l),M.Fu(p)))if(d){let t=void 0!==h?h:e.mRt(),s=c,i=f;void 0!==h&&(s=e.Hv(),i=e.Jv());const w=g.I3t();if(w){if(this.d3t++,w.tc(t,s-(a+y.Al()),i-(l+y.Rl())))return _.Un(m),!0}else if(v.Zu(M,0,0),v.tc(t,s,i))return _.Un(m),!0}else{const S=g.I3t();if(!S)return _.Un(m),!0;if(v.Zu(p,0,0),S.tc(v,-(a+y.Al()),-(l+y.Rl())))return _.Un(m),!0}}return _.Un(m),!1}C3t(t,o,a){const l=t.e5(),s=this.Sf.OO();if(!s)throw new Error("cannot call outside event");const u=s.u0t(),i=new Map,c=t=>{let s=i.get(t);return void 0===s&&(s=t.dN(),i.set(t,s)),s};if(l.qft()){a||(l.t0t(!1),_.Un(l.s0t())),u&&_.Un(l.i0t());for(const e of t.i5()){let h=e.jD(),r=h.HD();if(!(!c(r)||!h.xB())&&o.some(([t,s])=>{const[i,e]=r.kN(t,s,h.yB());return h.BB(i,e)})){if(a)return!1;l.Zft(e)}else u&&l.Qft(e)}}else{let i,e=!1,n=(!u||s.iyt(this.Sf.s1t())||this.Sf.Tvt()&&!l.i0t().length&&l.s0t().length?i=l.s0t():(i=l.i0t(),e=!0),0);for(let s=0,t=i.length;s<t;++s){let t=i[s],h=t.jD(),r=h.HD();if(!(!c(r)||!h.xB())&&o.some(([t,s])=>{const[i,e]=r.kN(t,s,h.yB());return h.BB(i,e)})){if(a)return!1;e?l.Zft(t):i[n++]=t}else e?i[n++]=t:u&&l.Qft(t)}a||(i.length=n)}return t.Lyt(),i.clear(),!!a||l.Xft()}P3t(t,s){if(t)for(const i of s.PCt())if(!t.o9(i))return!1;return!0}xvt(t,s,i,e){if(s.oJ())for(const h of s.Pgt())this.P3t(t,h)?(h._Ct(),h.TCt().S7(i,e)):_.er(e,h.i5());else this.P3t(t,s)?(s._Ct(),s.TCt().S7(i,e)):_.er(e,s.i5())}Hk(t,s,i,e){for(const h of s)this.xvt(t,h,i,e)}E3t(t,s,i){const e=this.Sf.qGt();e&&this.Hk(t,e.vK(),s,i)}A3t(t,s,i){const e=this.Sf.XGt();e&&this.Hk(t,e.vK(),s,i)}QAt(t,s){return t.fPt()&&(!s||s.jD().QAt(t.Ebt().get("solidTags")))}kk(t){const s=t.jD();this.E3t(s.HD(),s.SB(),r);for(const i of r)if(this.QAt(i,t)&&this.Fk(t,i))return _.Un(r),i;return _.Un(r),null}R3t(t,s){this.E3t(null,t,r);for(const i of r)if(this.QAt(i,s)&&this.F3t(t,i))return _.Un(r),i;return _.Un(r),null}O3t(t,s){let i=null;s&&(i=n,_.Un(i));const e=t.jD();this.A3t(e.HD(),e.SB(),r);for(const h of r)if(h.pPt()&&this.Fk(t,h)){if(!s)return _.Un(r),h;i.push(h)}return _.Un(r),i}D3t(s,i,e,h,r){h=h||50;const n=s.jD(),o=n.Hv(),a=n.Jv();for(let t=0;t<h;++t)if(n.fB(o+i*t,a+e*t),n.cB(),!this.Fk(s,r))return!0;return n.fB(o,a),n.cB(),!1}k3t(s,i,e,h,r,n){h=h||50;let o=s.jD(),a=o.Hv(),l=o.Jv(),u=null,c=null;for(let t=0;t<h;++t)if(o.fB(a+i*t,l+e*t),o.cB(),!this.Fk(s,u))if(u=this.kk(s))c=u;else if(r&&(u=n?this.Fk(s,n)?n:null:this.O3t(s))&&(c=u),!u)return c&&this.L3t(s,i,e,c,16,!0),!0;return o.fB(a,l),o.cB(),!1}N3t(i,e,h,t){t=t||50;let r=i.jD(),n=r.Hv(),o=r.Jv(),a=null,l=null;for(let s=0;s<t;++s)for(let t=0;t<2;++t){const u=2*t-1;if(r.fB(n+e*s*u,o+h*s*u),r.cB(),!this.Fk(i,a)){if(!(a=this.kk(i)))return l&&this.L3t(i,e*u,h*u,l,16,!0),!0;l=a}}return r.fB(n,o),r.cB(),!1}L3t(t,s,i,e,h,r){let n=2,o=!1,a=!1,l=t.jD(),u=l.Hv(),c=l.Jv();for(;n<=h;){const f=1/n;n*=2,l.mB(s*f*(o?1:-1),i*f*(o?1:-1)),l.cB(),this.Fk(t,e)||r&&this.kk(t)?(o=!0,a=!0):(o=!1,a=!1,u=l.Hv(),c=l.Jv())}a&&(l.fB(u,c),l.cB())}B3t(i,t=100){let e=0,h=i.jD(),r=h.Hv(),n=h.Jv(),o=0,a=this.kk(i);if(!a)return!0;for(;e<=t;){let t=0,s=0;switch(o){case 0:t=0,s=-1,e++;break;case 1:t=1,s=-1;break;case 2:t=1,s=0;break;case 3:t=1,s=1;break;case 4:t=0,s=1;break;case 5:t=-1,s=1;break;case 6:t=-1,s=0;break;case 7:t=-1,s=-1}if(o=(o+1)%8,h.fB(Math.floor(r+t*e),Math.floor(n+s*e)),h.cB(),!this.Fk(i,a)&&!(a=this.kk(i)))return!0}return h.fB(r,n),h.cB(),!1}W3t(t,s,i,e){const h=t.jD(),r=h.Hv(),n=h.Jv(),o=Math.max(10,_.Pr(s,i,r,n)),a=_.Ar(s,i,r,n),l=e||this.kk(t);if(!l)return _._r(a+Math.PI);let u=l,c=0,f=0,d=_.Ir(5),p;for(p=1;p<36;++p){const T=a-p*d;if(h.fB(s+Math.cos(T)*o,i+Math.sin(T)*o),h.cB(),!this.Fk(t,u)&&!(u=e?null:this.kk(t))){c=T;break}}for(36===p&&(c=_._r(a+Math.PI)),u=l,p=1;p<36;++p){const G=a+p*d;if(h.fB(s+Math.cos(G)*o,i+Math.sin(G)*o),h.cB(),!this.Fk(t,u)&&!(u=e?null:this.kk(t))){f=G;break}}if(36===p&&(f=_._r(a+Math.PI)),h.fB(r,n),h.cB(),f===c)return f;let m=_.Rr(f,c)/2,g;g=_.Or(f,c)?_._r(c+m+Math.PI):_._r(f+m);const y=Math.cos(a),w=Math.sin(a),S=Math.cos(g),b=Math.sin(g),v=y*S+w*b,M=y-2*v*S,x=w-2*v*b;return _.Ar(0,0,M,x)}V3t(t,s,i,e,h){if(!h)return!1;const r=h.jD();if(!r.LB())return!1;if(this.c3t++,d.set(Math.min(t,i),Math.min(s,e),Math.max(t,i),Math.max(s,e)),!r.SB().su(d))return!1;if(h.lPt())return this.j3t(t,s,i,e,h,r);if(this.d3t++,!r.vB().Ru(t,s,i,e))return!1;if(!r.pRt())return!0;const n=r.mRt();return n.Ru(r.Hv(),r.Jv(),t,s,i,e)}j3t(i,e,h,r,t,s){const n=s.Hv(),o=s.Jv(),a=t.O6(),l=b;p.set(i,e,h,r),p.normalize(),a.G3t(p,l);for(let t=0,s=l.length;t<s;++t){const u=l[t],c=u._3t();if(this.c3t++,d.iu(c,n,o)&&(M.Cu(c),M.offset(n,o),M.Ru(i,e,h,r))){const f=u.I3t();if(!f)return _.Un(l),!0;if(this.d3t++,f.Ru(n+c.Al(),o+c.Rl(),i,e,h,r))return _.Un(l),!0}}return _.Un(l),!1}F3t(t,s){if(!s)return!1;const i=s.jD();if(!i.LB())return!1;if(this.c3t++,!i.SB().su(t))return!1;if(s.lPt())return this.H3t(t,s,i);if(this.d3t++,M.Cu(t),!i.vB().Fu(M))return!1;if(!i.pRt())return!0;const e=v,h=(e.Cu(t,i.Hv(),i.Jv()),i.mRt());return e.tc(h,0,0)}H3t(i,t,s){const e=s.Hv(),h=s.Jv(),r=t.O6(),n=b;r.G3t(i,n);for(let t=0,s=n.length;t<s;++t){const o=n[t],a=o._3t();if(this.c3t++,i.iu(a,e,h)){const l=o.I3t();if(!l)return _.Un(n),!0;if(this.d3t++,v.Cu(i,0,0),l.tc(v,-(e+a.Al()),-(h+a.Rl())))return _.Un(n),!0}}return _.Un(n),!1}U3t(t,s){if(t){const i=t.jD();i.LB()&&(this.c3t++,i.SB().su(s.rect))&&(t.lPt()?this.z3t(t,i,s):(this.d3t++,i.pRt()?s.J3t(t,i.Hv(),i.Jv(),i.mRt()):s.q3t(t,i.vB())))}}z3t(i,e,h){const r=e.Hv(),n=e.Jv(),o=b;i.O6().G3t(h.rect,o);for(let t=0,s=o.length;t<s;t++){const a=o[t],l=a._3t();if(this.c3t++,h.rect.iu(l,r,n)){const u=a.I3t();this.d3t++,u?h.J3t(i,r+l.Al(),n+l.Rl(),u):h.X3t(i,e.Hv(),e.Jv(),l)}}_.Un(o)}Nk(t,s){if(t!==this.a3t||s!==this.l3t){this.a3t=t,this.l3t=s;const i=this.Sf.nJ();for(const e of i)if(e.ML()){for(const h of e.s5())h.jD().KAt();e.TCt().Y3t(t,s),e.GCt();for(const r of e.s5()){const n=r.jD();n._Rt(),n.ICt()}}}}Wk(){return[this.a3t,this.l3t]}$3t(t,s){this.a3t=t,this.l3t=s}}}{const Pa=self.Bs;Pa.iIt=class extends Pa.gr{constructor(t,s){super(),this.f7=t,this.d7=s,this.p7=Pa.wr(Pa.nc)}Sr(){this.p7.Sr(),this.p7=null}Y3t(t,s){if(!this.p7.lc())throw new Error("grid not empty");this.f7=t,this.d7=s}m7(t,s,i){let e=this.p7.ni(t,s);return e||(i?(e=Pa.wr(Pa.K3t,this,t,s),this.p7.Set(t,s,e),e):null)}g7(t){const s=Math.floor(t/this.f7);return isFinite(s)?s:0}y7(t){const s=Math.floor(t/this.d7);return isFinite(s)?s:0}w7(e,h,r){if(h)for(let i=h.Al(),t=h.Fl();i<=t;++i)for(let t=h.Rl(),s=h.Ol();t<=s;++t)if(!r||!r.eu(i,t)){const n=this.m7(i,t,!1);n&&(n.R0(e),n.lc())&&this.p7.uc(i,t)}if(r)for(let i=r.Al(),t=r.Fl();i<=t;++i)for(let t=r.Rl(),s=r.Ol();t<=s;++t)h&&h.eu(i,t)||this.m7(i,t,!0).a7(e)}S7(t,s){let i=this.g7(t.Al()),e=this.y7(t.Rl()),h=this.g7(t.Fl()),r=this.y7(t.Ol());if(isFinite(h)&&isFinite(r))for(;i<=h;++i)for(let t=e;t<=r;++t){const n=this.m7(i,t,!1);n&&n.u7(s)}}}}{const Ea=self.Bs;Ea.K3t=class extends Ea.gr{constructor(t,s,i){super(),this.s7=t,this.ol=s,this.al=i,this.i7=Ea.wr(Ea.wc)}Sr(){this.i7.Sr(),this.i7=null,this.s7=null}lc(){return this.i7.lc()}a7(t){this.i7.xc(t)}R0(t){this.i7.uc(t)}u7(t){Ea.er(t,this.i7.Tc())}}}{const Aa=self.Bs;Aa.Z3t=class{constructor(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.dx=0,this.dy=0,this.rect=new Aa.Rect,this.Q3t=2,this.tFt=null,this.sFt=0,this.iFt=0,this.eFt=0,this.hFt=0,this.rFt=0,this.Et=0,this.nFt=1,this.oFt=0,this.aFt=1,this.lFt=0}uFt(){return this.Q3t<1+1e-6}b0(){this.Q3t=2}Set(t,s,i,e){return this.x1=t,this.y1=s,this.x2=i,this.y2=e,this.dx=i-t,this.dy=e-s,this.rect.set(t,s,i,e),this.rect.normalize(),this.Q3t=2,this.tFt=null,this.sFt=0,this.iFt=0,this.eFt=0,this.hFt=0,this.rFt=0,this.Et=0,this.nFt=1,this.oFt=0,this.aFt=1,this.lFt=0,this}cFt(){if(!1!==this.uFt()){const t=this.dx*this.Q3t,s=this.dy*this.Q3t,i=Math.hypot(t,s),e=t/i,h=s/i,r=(this.Et=i-1e-6,this.hFt=this.x1+e*this.Et,this.rFt=this.y1+h*this.Et,this.sFt=Math.atan2(this.eFt,this.iFt)+Math.PI/2,this.nFt=Math.cos(this.sFt),this.oFt=Math.sin(this.sFt),e*this.nFt+h*this.oFt);if(this.aFt=e-2*this.nFt*r,this.lFt=h-2*this.oFt*r,0<r){const n=Math.PI;this.sFt=Aa._r(this.sFt+n),this.nFt=-this.nFt,this.oFt=-this.oFt}}}fFt(t,s,i,e,h){const r=Aa.bn(this.x1,this.y1,this.x2,this.y2,s,i,e,h);0<=r&&r<this.Q3t&&(this.Q3t=r,this.tFt=t.a4(),this.iFt=s-e,this.eFt=i-h)}X3t(t,s,i,e){const h=s+e.Al(),r=s+e.Fl(),n=i+e.Rl(),o=i+e.Ol();this.fFt(t,h,n,r,n),this.fFt(t,r,n,r,o),this.fFt(t,r,o,h,o),this.fFt(t,h,o,h,n)}q3t(t,s){const i=s.cn(),e=s.fn(),h=s.dn(),r=s.pn(),n=s.mn(),o=s.gn(),a=s.yn(),l=s.wn();this.fFt(t,i,e,h,r),this.fFt(t,h,r,n,o),this.fFt(t,n,o,a,l),this.fFt(t,a,l,i,e)}J3t(i,e,h,t){const r=t.Ju();for(let t=0,s=r.length;t<s;t+=2){const n=(t+2)%s,o=r[t]+e,a=r[t+1]+h,l=r[n]+e,u=r[1+n]+h;this.fFt(i,o,a,l,u)}}}}{const v=self.Bs,Ra=new Set(["off","crop","scale-inner","scale-outer","letterbox-scale","letterbox-integer-scale"]),Fa=new Set(["high","low"]),Oa=self.Ms,xh=Oa._s,Th=Oa.Es,Da=xh.create(),ka=v.wr(v.ou),M=v.wr(v.Rect);v.dFt=class extends v.gr{constructor(t){super(),this.Sf=t,this.pFt=[],this.mFt=!1,this.gFt=null,this.yFt=null,this.wFt=null,this.SFt="high-performance",this.bFt=!1,this.vFt=0,this.MFt=0,this.xFt="",this.TFt=0,this.GFt=0,this._Ft=0,this.IFt=0,this.CFt=0,this.PFt=0,this.Xy="normalized",this.EFt=0,this.AFt=1,this.RFt=1e4,this.Pw=!0,this.FFt=0,this.y3=0,this.w3=0,this.OFt="letterbox-scale",this.DFt="letterbox-scale",this.kFt=0,this.LFt=0,this.NFt=xh.create(),this.BFt="high",this.WFt=this.BFt,this.VFt=!1,this.jFt=[],this.HFt=new Set,this.UFt=self.C3_Shaders,this.zFt=v.wr(v.Iy.wR,{pR:()=>[this.V9(),this.j9()],mR:()=>this.JFt(),gR:t=>this.qFt(t),getTime:()=>this.ck().ZO(),yR:()=>this.ck().YD()}),this.XFt=0,this.YFt=0,this.$Ft=NaN,this.KFt=null,this.ZFt=new Map,this.QFt=NaN,this.tOt=new Map,this.sOt="",this.iOt=1,this.eOt=v.wr(v.Rect),this.hOt="",this.rOt=null,this.nOt=null,this.oOt=0,this.aOt=0,this.lOt=-1,this.uOt=0,this.cOt=t=>this.uOt=t.progress,this.fOt=null,this.dOt={pOt:null,mOt:null,gOt:null},this.yOt=0,this.wOt=0,this.SOt=0,this.bOt="fade-in",this.vOt=null,this.MOt=new Promise(t=>this.vOt=t)}xOt(t){this.SFt=t}TOt(t){this.mFt=!!t}GOt(t){this.Xy=t}_Ot(){return this.Xy}IOt(t){this.EFt=t}COt(t,s){this.AFt=t,this.RFt=s}POt(t){this.bFt=!!t}async No(t){let s=t.canvas,i=(this.pFt.push({canvas:s,EOt:null}),this.Sf.B4("runtime","window-resize",t=>this.AOt(t)),this.Sf.B4("runtime","fullscreenchange",t=>this.ROt(t)),this.Sf.B4("runtime","fullscreenerror",t=>this.FOt(t)),s.addEventListener("webglcontextlost",t=>this.OOt(t)),s.addEventListener("webglcontextrestored",t=>this.DOt(t)),this.VFt=!!t.isFullscreen,this.xFt=t.cssDisplayMode,navigator.gpu&&this.mFt),e=!1;if(i)try{await this.kOt(!0)}catch(t){this.LOt("WebGPU",t),this.yFt=null}if(!this.uv())try{await this.NOt(!0)}catch(t){this.LOt("WebGL",t),this.gFt=null}if(this.uv()||(e=!0),!this.uv()&&i)try{await this.kOt(!1)}catch(t){this.LOt("WebGPU",t),this.yFt=null}if(!this.uv())try{await this.NOt(!1)}catch(t){this.LOt("WebGL",t),this.gFt=null}const h=this.uv();if(!h)throw new Error("failed to acquire a renderer - check WebGL or WebGPU is supported");h.Ab(e),this.yFt&&(this.yFt.BOt=()=>this.WOt(),this.yFt.VOt=()=>this.jOt()),"normalized"===this.Xy?h.Jw():(h.qw(),h.Uw(this.EFt)),this._C(t.windowInnerWidth,t.windowInnerHeight,!0),await this.URt()}LOt(t,s){s&&"string"==typeof s.message&&s.message.startsWith("renderer-unavailable")||console.error(`Error creating ${t} renderer: `,s)}async kOt(t){const s={Vy:this.AFt,jy:this.RFt},i={powerPreference:this.SFt,depth:this.Sf.XJ(),failIfMajorPerformanceCaveat:t,HOt:this.Sf.K9(),UOt:this.Sf.zOt(),DP:this.Sf.JOt()};this.yFt=v.wr(v.Iy.WebGPURenderer,s),await this.yFt.kx(this.pFt[0].canvas,i)}async NOt(t){const s={alpha:!0,powerPreference:this.SFt,OP:"xbox-uwp-webview2"!==this.Sf.$k(),depth:this.Sf.XJ(),DP:this.Sf.JOt(),failIfMajorPerformanceCaveat:t,Vy:this.AFt,jy:this.RFt};this.bFt&&(s.kP=1),this.gFt=v.wr(v.Iy.BP,this.pFt[0].canvas,s),await this.gFt.Ow()}async qOt(){if(this.UFt){const t=[];for(const[s,i]of Object.entries(this.UFt)){i.src=i.XOt;const e=v.Iy.WebGPUShaderProgram.sG();t.push(this.yFt.VE(Object.assign({Fx:e,name:s},i)))}await Promise.all(t)}}async YOt(){if(this.UFt){const s=[];for(const[i,e]of Object.entries(this.UFt)){let t;if(e.$Ot&&2<=this.gFt.a2())e.src=e.$Ot,t=v.Iy.Ax.iG();else{if(!e.KOt)throw new Error(`shader '${i}' does not support WebGL 1`);e.src=e.KOt,t=v.Iy.Ax.sG()}s.push(this.gFt.VE(Object.assign({Fx:t,name:i},e)))}await Promise.all(s),this.gFt.jE(),this.gFt.hS()}this.gFt.sR()&&(this.KFt=v.wr(v.Iy.TP,this.gFt))}async URt(){this.yFt?await this.qOt():this.gFt&&await this.YOt();const t=this.uv();t.Pb(this.Pw),t.sR()&&(this.$Ft=0);for(const s of this.Sf.ZOt()){for(const i of s.g5())i.URt(t);s.URt(t),s.Q6()}this.wFt=new self.g8(this.Sf,t)}Sr(){this.Sf=null,this.gFt=null,this.pFt.length=0}fO(){return this.Sf.fO()}AOt(t){const s=this.Sf;if(!s.QOt()){const i=t.devicePixelRatio,e=(this.fO()&&(self.devicePixelRatio=i),s.tDt(i),this.VFt=!!t.isFullscreen,this.xFt=t.cssDisplayMode,this._C(t.innerWidth,t.innerHeight),s.YD(),new v.Event("window-resize")),h=(e.data=t,s.Qf().l0(e),new v.Event("resize"));h.sDt=this.hL(),h.iDt=this.nL(),h.eDt=this.aL(),h.hDt=this.uL(),s.t$(h),s.s$()&&(s.H1t()||self.C3Debugger.IsDebuggerPaused())&&s.q3()}}ROt(t){this.VFt=!!t.isFullscreen,this._C(t.innerWidth,t.innerHeight,!0),this.Sf.YD()}FOt(t){this.VFt=!!t.isFullscreen,this._C(t.innerWidth,t.innerHeight,!0),this.Sf.YD()}_C(t,s,i=!1){if(t=Math.floor(t),s=Math.floor(s),t<=0||s<=0)throw new Error("invalid size");if(this.vFt!==t||this.MFt!==s||i){this.vFt=t,this.MFt=s;const e=this.rDt();"letterbox-scale"===e?this.nDt(t,s):"letterbox-integer-scale"===e?this.oDt(t,s):"off"===e?this.aDt(t,s):this.lDt(t,s),this.uDt(e);for(const{canvas:n}of this.pFt)n.width=this._Ft,n.height=this.IFt;this.Sf.Mf("canvas","update-size",{marginLeft:this.CFt,marginTop:this.PFt,styleWidth:this.TFt,styleHeight:this.GFt,displayScale:this.gj()});const h=this.uv();h._C(this._Ft,this.IFt,!0);for(const o of this.jFt)h.YA(o);v.Un(this.jFt),this.cDt();const r=this.Sf.xD();r.x$(),r.T$()}}cDt(){this.uv().Yw(this.NFt,this.V9()/this.j9())}H9(){return this.NFt}nDt(t,s){const i=this.Sf.cL(),e=this.Sf.pO(),h=this.Sf.gO(),r=e/h,n=t/s;if(r<n){const o=s*r;this.TFt=Math.round(o),this.GFt=s,this.CFt=Math.floor((t-this.TFt)/2),this.PFt=0}else{const a=t/r;this.TFt=t,this.GFt=Math.round(a),this.CFt=0,this.PFt=Math.floor((s-this.GFt)/2)}this._Ft=Math.round(this.TFt*i),this.IFt=Math.round(this.GFt*i),this.Sf.fDt(e,h)}oDt(t,s){let i=this.Sf.cL(),e=(1!==i&&(t+=1,s+=1),this.Sf.pO()),h=this.Sf.gO(),r=e/h,n=t/s,o;if(r<n){const a=s*r;o=a*i/e}else{const l=t/r;o=l*i/h}1<o?o=Math.floor(o):o<1&&(o=1/Math.ceil(1/o)),this._Ft=Math.round(e*o),this.IFt=Math.round(h*o),this.TFt=this._Ft/i,this.GFt=this.IFt/i,this.CFt=Math.max(Math.floor((t-this.TFt)/2),0),this.PFt=Math.max(Math.floor((s-this.GFt)/2),0),this.Sf.fDt(e,h)}lDt(t,s){const i=this.Sf.cL(),e=(this.TFt=t,this.GFt=s,this._Ft=Math.round(this.TFt*i),this.IFt=Math.round(this.GFt*i),this.CFt=0,this.PFt=0,this.gj());this.Sf.fDt(this.TFt/e,this.GFt/e)}aDt(t,s){const i=this.Sf.cL();this.TFt=this.Sf.NJ(),this.GFt=this.Sf.BJ(),this._Ft=Math.round(this.TFt*i),this.IFt=Math.round(this.GFt*i),this.dDt()?(this.CFt=Math.floor((t-this.TFt)/2),this.PFt=Math.floor((s-this.GFt)/2)):(this.CFt=0,this.PFt=0),this.Sf.fDt(this.Sf.NJ(),this.Sf.BJ())}uDt(i){if("high"===this.BFt)this.y3=this._Ft,this.w3=this.IFt,this.WFt="high";else{let t,s;if(s="off"===this.rDt()?(t=this.Sf.NJ(),this.Sf.BJ()):(t=this.Sf.pO(),this.Sf.gO()),this._Ft<t||this.IFt<s)this.y3=this._Ft,this.w3=this.IFt,this.WFt="high";else if(this.y3=t,this.w3=s,this.WFt="low","scale-inner"===i){const e=t/s,h=this.vFt/this.MFt;h<e?this.y3=this.w3*h:e<h&&(this.w3=this.y3/h)}else if("scale-outer"===i){const r=t/s,n=this.vFt/this.MFt;r<n?this.y3=this.w3*n:n<r&&(this.w3=this.y3/n)}}}ck(){return this.Sf}pDt(){return this.pFt[0].canvas}Sz(){return this.zFt}dDt(){return this.VFt}mDt(){return this.xFt}gDt(t){if(!Ra.has(t))throw new Error("invalid fullscreen mode");this.OFt=t;const s=this.Sf.xD();s.x$(),s.T$()}pj(){return this.OFt}yDt(t){if(!Ra.has(t))throw new Error("invalid fullscreen mode");this.DFt=t;const s=this.Sf.xD();s.x$(),s.T$()}wDt(){return this.DFt}rDt(){return this.dDt()?this.wDt():this.pj()}SDt(t){if(!Fa.has(t))throw new Error("invalid fullscreen scaling quality");this.BFt=t,this.Sf.xD().x$()}bDt(){return this.BFt}Z9(){return this.WFt}static vDt(t){switch(t){case 0:return"off";case 1:return"crop";case 2:return"scale-inner";case 3:return"scale-outer";case 4:return"letterbox-scale";case 5:return"letterbox-integer-scale";default:throw new Error("invalid fullscreen mode")}}tj(){return this.vFt}sj(){return this.MFt}V9(){return this.y3}j9(){return this.w3}Pb(t){this.Pw=!!t}MDt(t){this.FFt=t}YU(){return this.FFt}xDt(){return this.uv().sP()}OOt(t){console.log("[Construct] WebGL context lost"),t.preventDefault(),this.jFt=[],this.HFt.clear(),this.zFt.Ov(),this.gFt.Ov(),this.Sf.QX()}WOt(){console.log("[Construct] WebGPU device lost"),this.jFt=[],this.HFt.clear(),this.zFt.Ov(),this.Sf.QX()}async DOt(t){await this.gFt.Dv(),await this.URt(),await this.Sf.TDt(),console.log("[Construct] WebGL context restored")}async jOt(){await this.URt(),await this.Sf.TDt(),console.log("[Construct] WebGPU device restored")}GDt(){return this.gFt}_Dt(){return this.yFt}uv(){return this.yFt||this.gFt}QIt(){return this.wFt}Qk(){let t="";return t=this.Sf._Dt()?"webgpu":"webgl"+this.Sf.GDt().a2(),this.Sf.uv().Rb()&&(t+="-software"),t}iL(){return this.Sf._Dt()?this.Sf._Dt().GetAdapterInfoString():this.Sf.GDt().uR()}JN(){return"low"===this.WFt?1/this.Sf.cL():this.gj()}gj(){const t=this.rDt();if("off"===t||"crop"===t)return 1;const s=this.Sf.pO(),i=this.Sf.gO(),e=s/i,h=this._Ft/this.IFt;return"scale-inner"!==t&&e<h||"scale-inner"===t&&h<e?this.GFt/i:this.TFt/s}xq(){return"low"===this.Z9()?1:this.gj()}vq(){return"low"===this.Z9()?1:this.Sf.cL()}IDt(t,s){this.kFt=t,this.LFt=s}eH(s,i,e,t=!0){i=i||this.y3,e=e||this.w3;const h=i/2+this.kFt,r=e/2+this.LFt;if(t){let t=this.H9();i===this.y3&&e===this.w3||(s.Yw(Da,i/e),t=Da),s.UE(t)}const n=s.Qw(h,r,s.kw(e),h,r,0,e);s.$E(n)}CDt(t,s=!0){const i=this.hL(),e=this.nL(),h=i/2,r=e/2,n=(s&&t.UE(this.H9()),t.Qw(h,r,t.kw(e),h,r,0,e));t.$E(n)}aL(){return this._Ft}uL(){return this.IFt}hL(){return this.TFt}nL(){return this.GFt}LN(){return this.CFt}NN(){return this.PFt}kX(){return this.pFt.length}PDt(){return"undefined"!=typeof OffscreenCanvas&&this.pDt()instanceof OffscreenCanvas&&("Chromium"!==v.mi.vi||124<=v.mi.bi)}async hY(e,h=!1){if(e<1)throw new Error("invalid HTML layer count");if(this.pFt.length!==e){let t=this.Sf.xD().bD(),s={count:e,layersDomState:t.pJ().filter(t=>t.uN()).map(t=>t.y9()),immediate:h,marginLeft:this.CFt,marginTop:this.PFt,styleWidth:this.TFt,styleHeight:this.GFt},i;if(i=this.fO()?await this.Sf.KD("canvas","set-html-layer-count",s):self.c3_runtimeInterface._OnSetHTMLLayerCount(s),e<this.pFt.length)this.pFt.length=e;else for(const r of i.addedCanvases){r.width=this._Ft,r.height=this.IFt;const n=this.PDt()?"bitmaprenderer":"2d",o=r.getContext(n);if(!o)throw new Error(`failed to acquire '${n}' canvas context`);this.pFt.push({canvas:r,EOt:o})}this.Sf.YD()}}KY(t){if(!(t>=this.pFt.length)){const s=this.pDt(),i=this.pFt[t].EOt;this.PDt()?i.transferFromImageBitmap(s.transferToImageBitmap()):(i.globalCompositeOperation="copy",i.drawImage(s,0,0))}}Q9(s){s.depth=this.Sf.XJ();let t=this.jFt,i=t.findIndex(t=>t.Gx(s)),e;return-1!==i?(e=t[i],t.splice(i,1)):e=this.uv().UA(s),this.HFt.add(e),e}vz(t){if(!this.HFt.has(t))throw new Error("render target not in use");this.HFt.delete(t),this.jFt.push(t)}JFt(){const t={jM:this.Sf.yO()};return"low"===this.Z9()&&(t.width=this.V9(),t.height=this.j9()),this.Q9(t)}qFt(t){this.vz(t)}*EDt(){for(const t of this.Sf.xD().b$())for(const s of t.E5()){const i=this.ZFt.get(s);i&&(yield i)}}q9(t){if(!this.uv().sR())return null;let s=this.ZFt.get(t);return s||(s={uB:t,name:t.uf(),ADt:v.wr(v.Iy.TP,this.gFt),RDt:0,FDt:0,ODt:0},this.ZFt.set(t,s)),s.ADt}DDt(){const t=this.uv();if(t.sR()&&0===this.YFt){this.YFt=t.Ib(),this.QFt=NaN;for(const s of this.EDt())s.RDt=NaN}}kDt(){this.gFt&&this.gFt.sR()&&this.LDt(),this.yFt&&this.yFt.sR()&&this.NDt()}LDt(){if(isNaN(this.QFt)&&(this.QFt=this.KFt.AP(this.XFt,this.YFt),!isNaN(this.QFt))){if(this.Sf.s$())for(const t of this.EDt())if(t.RDt=t.ADt.AP(this.XFt,this.YFt),isNaN(t.RDt))return;if(this.KFt.RP(this.YFt),this.$Ft=Math.min(this.QFt,1),this.Sf.s$()){const i=new Map;for(const h of this.EDt())h.ADt.RP(this.YFt),h.FDt=Math.min(h.RDt,1),i.set(h.uB,h.FDt);for(const r of this.EDt()){const n=r.uB,o=i.get(n)||0,a=o-n.tN().reduce((t,s)=>t+(i.get(s)||0),0);r.ODt=v.Gr(a,0,1)}const s=this.Sf.bD(),e=this.$Ft-s.pJ().reduce((t,s)=>t+(i.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(v.Gr(e,0,1),this.$Ft,[...this.EDt()])}this.XFt=this.YFt,this.YFt=0}}BDt(){return this.KFt}NDt(){if(0!==this.YFt){for(let t=this.XFt;t<this.YFt;++t){const i=this.tOt.get(t);if(i&&!i.dP())return}let t=this.Sf.bD(),n=v.Yo(t.EX()+1,0),s=0;for(let t=this.XFt;t<this.YFt;++t){const o=this.tOt.get(t);if(o){let i=o.pP(),e=BigInt(0),h=BigInt(0),r=BigInt(0);for(let t=0,s=Math.min(n.length,i.length/2);t<s;++t){const u=i[2*t],c=i[2*t+1],f=(u!==r&&(e===r||u<e)&&(e=u),c>h&&(h=c),c-u),d=Number(f)/1e9;n[t]+=d}const a=h-e,l=Number(a)/1e9;s+=l}}if(this.$Ft=v.Gr(s,0,1),this.Sf.s$()){const e=t.E5(),h=new Map;for(let t=0,s=Math.min(e.length,n.length-1);t<s;++t){const g=n[t+1];h.set(e[t],g)}const r=[],p=new Map;for(const[y,w]of h){const S=[...y.iN()].reduce((t,s)=>t+(h.get(s)||0),0);p.set(y,S),r.push({name:y.uf(),ODt:v.Gr(w,0,1),FDt:v.Gr(S,0,1)})}const m=this.$Ft-t.pJ().reduce((t,s)=>t+(p.get(s)||0),0);self.C3Debugger.UpdateGPUProfile(v.Gr(m,0,1),this.$Ft,r)}for(let t=this.XFt;t<this.YFt;++t)this.tOt.delete(t);this.XFt=this.YFt,this.YFt=0}}WDt(t){this.tOt.set(this.yFt.Ib(),t)}lD(){return this.$Ft}VDt(t,s,i,e,h,r){return this.sOt=t,this.iOt=s,this.eOt.xl(i,e,h,r),this.rOt||(this.rOt=new Promise(t=>{this.nOt=t})),this.rOt}jDt(){if(this.sOt){let t=this.pDt(),s=this.eOt,i=v.Gr(Math.floor(s.Al()),0,t.width),e=v.Gr(Math.floor(s.Rl()),0,t.height),h=s.width(),r=(h=0===h?t.width-i:v.Gr(Math.floor(h),0,t.width-i),s.height());if(r=0===r?t.height-e:v.Gr(Math.floor(r),0,t.height-e),(0!==i||0!==e||h!==t.width||r!==t.height)&&0<h&&0<r){const n=v.No(h,r),o=n.getContext("2d");o.drawImage(t,i,e,h,r,0,0,h,r),t=n}v.Bo(t,this.sOt,this.iOt).then(t=>{this.hOt&&URL.revokeObjectURL(this.hOt),this.hOt=URL.createObjectURL(t),this.rOt=null,this.nOt(this.hOt)}),this.sOt="",this.iOt=1}}HDt(){return this.hOt}UDt(t){t?this.oOt++:this.oOt--}zDt(){return 0<this.oOt}JDt(t){const s=this.uv();if(2===t)this.fOt=v.wr(v.Iy.Bb,this.uv()),this.fOt.iC("Arial"),this.fOt.eC(16),this.fOt.yC("center"),this.fOt.SC("center"),this.fOt._C(300,200);else if(0===t){const i=this.Sf.qDt();i&&i.X8(s).catch(t=>console.warn("[C3 runtime] Failed to create texture for loading logo: ",t))}else 4===t&&(this.XDt("splash-images/splash-logo.svg").then(t=>{"done"===this.bOt?s.ix(t):this.dOt.pOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.YDt("splash-images/splash-poweredby-512.png").then(t=>{"done"===this.bOt?s.ix(t):this.dOt.mOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)),this.YDt("splash-images/splash-website-512.png").then(t=>{"done"===this.bOt?s.ix(t):this.dOt.gOt=t}).catch(t=>console.warn("Failed to load splash image: ",t)))}async XDt(t){t=new URL(t,this.Sf.$Dt()).toString();const s=await v.Ao(t),i=await this.Sf.KDt(s,2048,2048);return this.uv().HA(i,{JM:"high"})}async YDt(t){t=new URL(t,this.Sf.$Dt()).toString();const s=await v.Ao(t);return this.uv().HA(s,{JM:"high"})}ZDt(){this.Sf.Mf("runtime","hide-cordova-splash")}QDt(){this.aOt=Date.now(),this.Sf.Qf().addEventListener("loadingprogress",this.cOt),this.lOt=requestAnimationFrame(()=>this.tkt());const t=this.Sf.skt();3!==t&&this.ZDt()}async ikt(){const t=this.uv(),s=(this.uOt=1,this.Sf.skt());4===s&&await this.MOt,this.vOt=null,this.MOt=null,-1!==this.lOt&&(cancelAnimationFrame(this.lOt),this.lOt=-1),this.Sf.Qf().removeEventListener("loadingprogress",this.cOt),this.cOt=null,this.fOt&&(this.fOt.Sr(),this.fOt=null),this.Sf.ekt(),t.FA(),this.dOt.pOt&&(t.ix(this.dOt.pOt),this.dOt.pOt=null),this.dOt.mOt&&(t.ix(this.dOt.mOt),this.dOt.mOt=null),this.dOt.gOt&&(t.ix(this.dOt.gOt),this.dOt.gOt=null),t.RA(0,0,0,0),t.Gb(),this.bOt="done",this.XFt=t.Ib(),3===s&&this.ZDt()}tkt(){if(-1!==this.lOt){const t=this.uv(),s=(t.FA(),this.lOt=-1,this.Sf.sO().MU()),i=this.Sf.skt();if(3!==i&&(this.CDt(t),t.RA(0,0,0,0),t.hA(),t.hS(),t.nA(null)),0===i)this.hkt(s);else if(1===i)this.rkt(s,120,0);else if(2===i)this.nkt(s);else if(3===i)v.Wn();else{if(4!==i)throw new Error("invalid loader style");this.okt(s)}t.Gb(),this.lOt=requestAnimationFrame(()=>this.tkt())}}nkt(t){t?this.fOt.gC(1,0,0):this.fOt.gC(.6,.6,.6),this.fOt.xf(Math.round(100*this.uOt)+"%");const s=this.TFt/2,i=this.GFt/2,e=(ka.gu(s-150,i-100,150+s,100+i),this.uv());e.nA(this.fOt.mx()),e.YS(ka,this.fOt.eP())}rkt(t,s,i){const e=this.uv(),h=(e.uS(),t?e.iA(1,0,0,1):e.iA(.118,.565,1,1),this.TFt/2),r=this.GFt/2,n=s/2;M.xl(h-n,r-4+i,Math.floor(s*this.uOt),8),e.Rect(M),M.xl(h-n,r-4+i,s,8),M.offset(-.5,-.5),M.Ul(.5,.5),e.iA(0,0,0,1),e.tb(M),M.Ul(1,1),e.iA(1,1,1,1),e.tb(M)}hkt(t){const s=this.uv(),i=this.Sf.qDt();if(i){const e=i.mx();if(e){const h=e.Em(),r=e.Wm(),n=this.TFt/2,o=this.GFt/2,a=h/2,l=r/2;ka.gu(n-a,o-l,n+a,o+l),s.nA(e),s.ou(ka),this.rkt(t,h,16+l)}else this.rkt(t,120,0)}else this.rkt(t,120,0)}okt(t){let s=this.uv(),i=this.dOt.pOt,e=this.dOt.mOt,h=this.dOt.gOt,r=Date.now(),n=(0===this.yOt&&(this.aOt=r),this.Sf.akt()||this.Sf.lkt()&&!this.Sf.ukt()),o=n?0:200,a=n?0:3e3,l=1,u=("fade-in"===this.bOt?l=Math.min((r-this.aOt)/300,1):"fade-out"===this.bOt&&(l=Math.max(1-(r-this.SOt)/300,0)),s.uS(),s.iA(.231*l,.251*l,.271*l,l),M.set(0,0,this.TFt,this.GFt),s.Rect(M),Math.ceil(this.TFt)),c=Math.ceil(this.GFt),f,d;256<this.GFt?(s.iA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),M.xl(0,.8*c-d/2,f,d),s.Rect(M),t?s.iA(l,0,0,l):s.iA(.161*l,.953*l,.816*l,l),f=u*this.uOt,M.xl(.5*u-f/2,.8*c-d/2,f,d),s.Rect(M),s.iA(l,l,l,l),s.hS(),e&&(f=1.5*v.Gr(.22*c,105,.6*u),d=f/8,M.xl(.5*u-f/2,.2*c-d/2,f,d),s.nA(e),s.Rect(M)),i&&(f=Math.min(.395*c,.95*u),d=f,M.xl(.5*u-f/2,.485*c-d/2,f,d),s.nA(i),s.Rect(M)),h&&(f=1.5*v.Gr(.22*c,105,.6*u),d=f/8,M.xl(.5*u-f/2,.868*c-d/2,f,d),s.nA(h),s.Rect(M))):(s.iA(.302*l,.334*l,.365*l,l),f=u,d=Math.max(.005*c,2),M.xl(0,.85*c-d/2,f,d),s.Rect(M),t?s.iA(l,0,0,l):s.iA(.161*l,.953*l,.816*l,l),f=u*this.uOt,M.xl(.5*u-f/2,.85*c-d/2,f,d),s.Rect(M),s.iA(l,l,l,l),s.hS(),i&&(f=.55*c,d=f,M.xl(.5*u-f/2,.45*c-d/2,f,d),s.nA(i),s.Rect(M))),this.yOt++,"fade-in"===this.bOt&&300<=r-this.aOt&&2<=this.yOt&&(this.bOt="wait",this.wOt=r),"wait"===this.bOt&&r-this.wOt>=a&&1<=this.uOt&&(this.bOt="fade-out",this.SOt=r),("fade-out"===this.bOt&&r-this.SOt>=300+o||n&&1<=this.uOt&&r-this.aOt<500)&&this.vOt()}}}{let j=self.Bs,H=self.C3Debugger,i={messagePort:null,runtimeBaseUrl:"",headless:!1,hasDom:!0,isInWorker:!1,useAudio:!0,exportType:""},n=!0;j.ckt=class extends j.gr{constructor(t){t=Object.assign({},i,t),super(),this.fkt=t.messagePort,this.dkt=t.runtimeBaseUrl,this.pkt=t.previewUrl,this.mkt=!!t.headless,this.gkt=!!t.hasDom,this.ykt=!!t.isInWorker,n=t.ife,this.wkt=!!t.useAudio,this.Skt=t.exportType,this.bkt=t.isNWjs,this.GH=!!t.isiOSCordova,this.vkt=!!t.isiOSWebView,this.Mkt=!!t.isWindowsWebView2,this.xkt=!!t.isAnyWebView2Wrapper,this.Tkt=!!t.isFBInstantAvailable,this.Gkt=!("preview"!==this.Skt||!t.isDebug),this._kt=this.Gkt,this.Ikt=this.Gkt,this.Ckt=0,this.Pkt=[],this.Ekt=[],this.Akt=!1,this.Rkt="",this.Fkt="",this.Okt="",this.Dkt="",this.kkt=0,this.Lkt=0,this._3=self.devicePixelRatio,this.Nkt=0,this.Bkt=0,this.Wkt=0,this.Vkt=0,this.jkt=0,this.Hkt=!1,this.iy=!0,this.Ukt=!1,this.zkt=!1,this.Jkt=!1,this.qkt=null,this.kU=j.wr(j.vH,this,t),this.Bq=j.wr(j.h$,this),this.f0t=j.wr(j.ldt,this),this.Xkt=j.wr(j.yL,this,t.wrapperComponentIds),this.Ykt=j.wr(j.o3t,this),this.LQ=j.wr(j.G$,this),this.$kt=j.wr(j.tut,this),this.Kkt=j.wr(j.iut,this),this.yut=j.wr(j.uut,this),this.$g=j.wr(j.Ng,{Vg:t=>this.Zkt(t),Hg:t=>this.Qkt(t)}),this.tLt=new Map,this.sLt=[],this.iLt=new Map,this.eLt=new Map,this.hLt=0,this.rLt=[],this.nLt=new Set,this.oLt=[],this.aLt=[],this.lLt=new Map,this.uLt=!1,this.cLt=!1,this.fLt=0,this.dLt=0,this.pLt=new Map,this.mLt=new Set,this.gLt=new Set,this.yLt=[],this.wLt=[],this.SLt=null,this.bLt=!1,this.vLt="vsync",this.QM="trilinear",this.MLt=!1,this.xLt=!0,this.TLt=!1,this.GLt=!1,this._Lt=null,this.ILt={CLt:t=>{this.lOt=-1,this.PLt=-1,this.YK(t)},ELt:t=>{this.PLt=-1,this.YK(t,!1,"skip-render")},ALt:()=>{this.lOt=-1,this.q3()}},this.lOt=-1,this.PLt=-1,this.RLt=0,this.FLt=0,this.OLt=!1,this.DLt=!1,this.kLt=!1,this.LLt=!0,this.NLt=!0,this.BLt=!1,this.WLt=0,this.VLt=new j.Cd(1),this.jLt=()=>Math.random(),this.HLt=0,this.ULt=0,this.zLt=0,this.JLt=0,this.qLt=0,this.$Ct=1,this.XLt=1/30,this.YLt=0,this.$Lt=j.wr(j.O0),this.KLt=j.wr(j.O0),this.ZLt=j.wr(j.O0),this.QLt=new Map,this.t5t=-1,this.s5t=0,this.i5t=0,this.e5t=-1,this.h5t=0,this.r5t=0,this.n5t=0,this.o5t=!1,this.a5t="",this.l5t=!1,this.u5t="",this.K4=null,this.c5t="",this.f5t=null,this.d5t=null,this.tIt=j.wr(j.Event.Qf),this.p5t=new Map,this.m5t=new Map,this.g5t=0,this.y5t=!1,this.w5t=!1,this.S5t=!1,this.b5t=[],this.v5t={pretick:j.wr(j.Event,"pretick",!1),tick:j.wr(j.Event,"tick",!1),tick2:j.wr(j.Event,"tick2",!1),instancecreate:j.wr(j.Event,"instancecreate",!1),instancedestroy:j.wr(j.Event,"instancedestroy",!1),beforelayoutchange:j.wr(j.Event,"beforelayoutchange",!1),layoutchange:j.wr(j.Event,"layoutchange",!1)},this.v5t.instancecreate.z6=null,this.v5t.instancedestroy.z6=null,this.yX=j.wr(j.Event.Qf),this.M5t=null;const s=(t,s)=>j.XCt.ARt(this,t,s);this.x5t=j.wr(j.H0,s),this.T5t=j.wr(j.H0,s),this.G5t=j.wr(j.H0,s),this._5t=j.wr(j.I5t,this,t.jobScheduler),t.canvas&&(this.SLt=j.wr(j.dFt,this)),this.fkt.onmessage=t=>this._OnMessageFromDOM(t.data),this.B4("runtime","visibilitychange",t=>this.C5t(t)),this.B4("runtime","wrapper-extension-message",t=>this.P5t(t)),this.B4("runtime","opus-decode",t=>this.Tk(t.arrayBuffer)),this.B4("runtime","get-remote-preview-status-info",()=>this.E5t()),this.B4("runtime","js-invoke-function",t=>this.Ldt(t)),this.B4("runtime","go-to-last-error-script",self.goToLastErrorScript),this.B4("runtime","offline-audio-render-completed",t=>this.A5t(t)),this.tIt.addEventListener("window-blur",t=>this.R5t(t)),this.tIt.addEventListener("window-focus",()=>this.F5t()),this.LQ.hK(),this.Kkt.hK(),this.O5t=null,this.D5t=new WeakMap,this.k5t={keyboard:null,AD:null,RD:null,FD:null},this.L5t=new WeakMap,this.N5t=[]}static kx(t){return j.wr(j.ckt,t)}Sr(){j.Un(this.sLt),this.iLt.clear(),this.eLt.clear(),this.Bq.Sr(),this.Bq=null,this.f0t.Sr(),this.f0t=null,this.Xkt.Sr(),this.Xkt=null,this.kU.Sr(),this.kU=null,this.Ykt.Sr(),this.Ykt=null,this.LQ.Sr(),this.LQ=null,this.$kt.Sr(),this.$kt=null,this.Kkt.Sr(),this.Kkt=null,this.yut.Sr(),this.yut=null,this.$g.Sr(),this.$g=null,this.SLt&&(this.SLt.Sr(),this.SLt=null),this.tIt.Sr(),this.tIt=null,this.B5t=null}["_OnMessageFromDOM"](t){const s=t.type;if("event"===s)this.W5t(t);else{if("result"!==s)throw new Error(`unknown message '${s}'`);this.V5t(t)}}W5t(t){if(this.S5t){const s=t.component,i=t.handler,e=t.data,h=t.dispatchOpts,r=!(!h||!h.dispatchRuntimeEvent),n=!(!h||!h.dispatchUserScriptEvent),o=t.responseId;if("runtime"===s){if(r){const l=new j.Event(i);l.data=e,this.tIt.l0(l)}if(n){const u=new j.Event(i,!0);for(const[c,f]of Object.entries(e))u[c]=f;this.t$(u)}}const a=this.p5t.get(s);if(a){const d=a.get(i);if(d){let t=null;try{t=d(e)}catch(t){return console.error(`Exception in '${s}' handler '${i}':`,t),void(null!==o&&this.j5t(o,!1,""+t))}null!==o&&(t&&t.then?t.then(t=>this.j5t(o,!0,t)).catch(t=>{console.error(`Rejection from '${s}' handler '${i}':`,t),this.j5t(o,!1,""+t)}):this.j5t(o,!0,t))}else r||n||console.warn(`[Runtime] No DOM handler '${i}' for component '${s}'`)}else r||n||console.warn(`[Runtime] No DOM event handlers for component '${s}'`)}else this.b5t.push(t)}j5t(t,s,i){this.fkt.postMessage({type:"result",responseId:t,isOk:s,result:i})}V5t(t){const s=t.responseId,i=t.isOk,e=t.result,h=this.m5t.get(s);i?h.resolve(e):h.reject(e),this.m5t.delete(s)}B4(t,s,i){let e=this.p5t.get(t);if(e||(e=new Map,this.p5t.set(t,e)),e.has(s))throw new Error(`[Runtime] Component '${t}' already has handler '${s}'`);e.set(s,i)}Mf(t,s,i,e){this.fkt.postMessage({type:"event",component:t,handler:s,data:i,responseId:null},e)}KD(t,s,i,e){const h=this.g5t++,r=new Promise((t,s)=>{this.m5t.set(h,{resolve:t,reject:s})});return this.fkt.postMessage({type:"event",component:t,handler:s,data:i,responseId:h},e),r}Bj(t,s,i,e=-1){this.Mf("runtime","send-wrapper-extension-message",{componentId:t,messageId:s,params:i,asyncId:e})}Wj(t,s,i){const e=this.g5t++,h=new Promise((t,s)=>{this.m5t.set(e,{resolve:t,reject:s})});return this.Bj(t,s,i,e),h}P5t(t){if(-1!==t.asyncId){const s=t.asyncId,i=this.m5t.get(s);i.resolve(t.params),this.m5t.delete(s)}else this.W5t({component:"wrapper-extension:"+t.componentId,handler:t.messageId,data:t.params,responseId:null})}sB(t,s,i){this.B4("wrapper-extension:"+t,s,i)}Q4(t){return this.Xkt.Q4(t)}H5t(t){if(!this.s$())throw new Error("not in debug mode");this.Mf("runtime","post-to-debugger",t)}async QCt(t){j._vt(this),this.s$()?await H.QCt(this):self.C3Debugger&&self.C3Debugger.InitPreview(this);const[s]=await Promise.all([this.kU.Eo("data.json"),this.U5t(),this._5t.QCt()]);if(await this.z5t(s),await this.J5t(t),this.akt()||console.info("%cMade with Construct, the game and animation creation tool. Visit: https://www.construct.net","font-weight: bold"),this.GDt()){const i=this.GDt();console.info(`[C3 runtime] Hosted in ${this.fO()?"worker":"DOM"}, rendering with WebGL ${i.a2()} [${i.uR()}]`)}else this._Dt()&&console.info(`[C3 runtime] Hosted in ${this.fO()?"worker":"DOM"}, rendering with WebGPU [${this._Dt().GetAdapterInfoString()}]`);this.uv().Rb()&&console.warn("[C3 runtime] The renderer indicates a major performance caveat. Software rendering may be in use. This can result in significantly degraded performance."),this.S5t=!0;for(const e of this.b5t)this.W5t(e);j.Un(this.b5t),this.SLt&&this.SLt.QDt();for(const h of t.runOnStartupFunctions)this.Pkt.push(this.q5t(h));if(await Promise.all([this.kU.bU(),...this.Pkt]),j.Un(this.Pkt),!this.kU.MU())return this.SLt&&await this.SLt.ikt(),await this.tIt.o0(new j.Event("beforeruntimestart")),await this.FA(),this.fkt.postMessage({type:"runtime-ready"}),this;this.SLt&&this.SLt.ZDt()}async q5t(t){try{await t(this.O5t)}catch(t){console.error("[C3 runtime] Error in runOnStartup function: ",t)}}async z5t(t){const s=t.project,i=(this.Rkt=s[0],this.Fkt=s[16],this.Okt=s[31],this.Dkt=s[38],s[39]||"loading-logo.png"),e=(this.MLt=!!s[9],this.kkt=this.Wkt=s[10],this.Lkt=this.Vkt=s[11],this.Ykt.$3t(this.kkt,this.Lkt),this.Nkt=this.kkt/2,this.Bkt=this.Lkt/2,this.vLt=s[37],this.bLt=!!s[40],this.QM=s[14],this.Ukt=s[15],this.zkt=s[42],this.Jkt=s[17],this.Hkt=!!s[18],this.jkt=s[19],this.dLt=s[21],this.TLt=s[22],this.kU);if(e.KH(s[45]),e.IU(s[7],s[25]),e.QH(s[8]),e.tU(s[32]),e.iU(s[28]),e.TU(s[29]),0===this.jkt){let t;(t="flat"===e.Sk()?e.eU()+i:i)&&(this.qkt=e.dU({url:t}))}this.SLt&&(this.SLt.gDt(j.dFt.vDt(s[12])),this.SLt.SDt(s[23]?"high":"low"),this.SLt.Pb(0!==s[24]),this.SLt.xOt(s[34]),this.SLt.MDt(s[41]),this.SLt.TOt(s[13]),this.SLt.GOt(s[30]),this.SLt.COt(s[46],s[47]),this.SLt.IOt(s[26]),this.SLt.POt(s[48]));const h=s[43],r=(h&&await this.X5t(h),this.Y5t(),this.Xkt.BGt(),this.yLt=self.$5t(),s[2]);for(const l of r[1])this.Xkt.WGt(l);for(const u of r[0])this.Xkt.NGt(u);this.yLt=self.$5t(),this.K5t(),this.Xkt.JGt();for(const c of s[3]){const f=j.out.kx(this,this.sLt.length,c);this.sLt.push(f),this.iLt.set(f.uf().toLowerCase(),f),this.eLt.set(f.mJ(),f)}for(const d of s[4]){const p=this.sLt[d[0]];p.NIt(d)}for(const m of s[27]){const g=m.map(t=>this.sLt[t]);this.rLt.push(j.wr(j.LCt,this,g))}this.Z5t();for(const y of this.sLt)y.WIt();for(const w of s[5])this.Bq.kx(w);const n=s[1];if(n){const S=this.Bq.m$(n);S&&this.Bq.d$(S)}for(const b of s[35])this.$kt.kx(b);for(const v of s[33])this.LQ.kx(v);for(const M of s[44])this.Kkt.kx(M);this.Kkt.rut()||(this.Kkt.Sr(),this.Kkt=null);for(const x of s[49])this.yut.kx(x);this.yut.mut()||(this.yut.Sr(),this.yut=null);for(const T of s[6])this.f0t.kx(T);this.f0t.Wdt(),this.Q5t(),j.Un(this.yLt),this.d5();let o="any",a=s[20];1===a?o="portrait":2===a&&(o="landscape"),this.Mf("runtime","set-target-orientation",{targetOrientation:o})}async X5t(t){const s=t.format;"image-sequence"===s?this._Lt=new self.C3ExportToImageSequence(this,t):"image-sequence-gif"===s?this._Lt=new self.C3ExportToGIF(this,t):"webm"===s?this._Lt=new self.C3ExportToWebMVideo(this,t):"mp4"===s&&(this._Lt=new self.C3ExportToMP4Video(this,t)),this.vLt="unlimited-frame",this.SLt.gDt("off"),this._3=1,self.devicePixelRatio=1,await this.KD("runtime","set-exporting-to-video",{message:this._Lt.GetExportingMessageForPercent(0),duration:this._Lt.SW()})}skt(){return this.jkt}QOt(){return null!==this._Lt}tNt(){return this._Lt.SW()}sNt(){return this._Lt.GetFramerate()}iNt(){return this._Lt.QCt({width:this.SLt.aL(),height:this.SLt.uL()})}eNt(){const t=this.RLt/this.sNt();return this._Lt.AddFrame(this.SLt.pDt(),t)}hNt(){this._Lt&&this._Lt.qit()}A5t(t){this._Lt.OnOfflineAudioRenderCompleted(t)}rNt(){return this._Lt.Gb()}lkt(){return this.Tkt}ly(){return this.iy}ik(t){this.Pkt.push(t)}nY(t){this.Akt=!!t}nNt(t){this.Akt&&this.Ekt.push(t)}dY(){return this.Ekt}AIt(){return this.hLt++}jIt(){return this.hLt}WRt(t){this.nLt.add(t)}VRt(t){this.nLt.delete(t)}ZOt(){return this.nLt}async J5t(t){this.SLt&&(await this.SLt.No(t),this.SLt.JDt(this.jkt))}async U5t(){const h=this.kU;if(!h.rk("audio/webm; codecs=opus")){let t=null,s=h.ZH(),i=s+"opus.wasm.js",e=s+"opus.wasm.wasm";try{t=this.oNt()&&h.hU()?await h.nU(e):await h.Ro(e)}catch(t){return void console.info("Failed to fetch Opus decoder WASM; assuming project has no Opus audio.",t)}this.aNt(t,"opus-decoder-wasm"),await this.lNt([i])}}async Tk(t){const s=await this.uNt("OpusDecode",{arrayBuffer:t},[t]);return s}async FA(){this.OLt=!0,this.HLt=Date.now();let s=null,t=new Promise(t=>s=t);if(this.Hkt){for(const h of this.sLt)h.oJ()||h.KIt()||!h.ML()||h.Nxt();(async()=>{await this.kU.bU(),await t,this.iy=!1,this.cNt()})()}else this.iy=!1;this.kU.vU(),this.s$()&&H.RuntimeInit(n);for(const r of this.Bq._D())r.AY();this.QOt()&&await this.iNt();const i=this.Bq.p$(),e=(await i.UX(null,this.uv()),await i.tY(!0),this.s5t=performance.now(),s(),this.Hkt||this.cNt(),await this.KD("runtime","before-start-ticking"));e.isSuspended&&!this.QOt()?(this.WLt++,this.BLt=!0):this.YK()}cNt(){this.O4(j.TY.xY.MY.fNt,null,null),this.Mf("runtime","register-sw")}Jyt(t){t=Math.floor(t);const s=this.yLt;if(t<0||t>=s.length)throw new Error("invalid object reference");return s[t]}K5t(){for(const t of self.dNt){const s=j.first(Object.keys(t));this.wLt.push(s)}}u1t(t){t=Math.floor(t);const s=this.wLt;if(t<0||t>=s.length)throw new Error("invalid prop reference");return s[t]}pNt(){return this.gkt}mNt(){return this.mkt}fO(){return this.ykt}$Dt(){return this.dkt}gNt(){return this.pkt}CO(){return this.f0t}VO(){return this.f0t.VO()}t1t(){return this.f0t.t1t()}OO(){return this.f0t.OO()}s1t(){return this.f0t.s1t()}Tvt(){return 0===this.t1t().A0t()}e1t(){return this.f0t.e1t()}PRt(){return this.Xkt}Hwt(){return this.Xkt.Hwt()}kz(t){if((t=Math.floor(t))<0||t>=this.sLt.length)throw new RangeError("invalid index");return this.sLt[t]}yNt(t){return this.iLt.get(t.toLowerCase())||null}Yj(t){return this.eLt.get(t)||null}crt(t){const s=j.yL.kL(t);return s?s.WL():null}nJ(){return this.sLt}*wNt(){for(const t of this.sLt)t.oJ()||(yield*t.instances())}Qf(){return this.tIt}TO(){return this.yX}t$(t){t.runtime=this.wL();const s=this.s$()&&!this.f0t.c5();s&&H.StartMeasuringScriptTime(),this.yX.dispatchEvent(t),s&&H.AddScriptTime()}SY(t){return t.runtime=this.wL(),this.yX.o0(t)}pO(){return this.kkt}gO(){return this.Lkt}SNt(t,s){if(this.kkt!==t||this.Lkt!==s){this.kkt=t,this.Lkt=s;const i=this.xD();i.x$(),i.T$()}}NJ(){return this.Wkt}BJ(){return this.Vkt}fDt(t,s){if(this.Wkt!==t||this.Vkt!==s){this.Wkt=t,this.Vkt=s;const i=this.xD();i.x$(),i.T$()}}tDt(t){this.QOt()||(this._3=t)}cL(){return this._3}O9(){return this.Nkt}D9(){return this.Bkt}tL(){return this.SLt}V9(){return this.SLt?this.SLt.V9():this.Wkt}j9(){return this.SLt?this.SLt.j9():this.Vkt}JN(){return this.SLt?this.SLt.JN():1}gj(){return this.SLt?this.SLt.gj():1}xq(){return this.SLt?this.SLt.xq():1}vq(){return this.SLt?this.SLt.vq():1}LN(){return this.SLt?this.SLt.LN():0}NN(){return this.SLt?this.SLt.NN():0}bNt(){return this.SLt?this.SLt.hL():0}vNt(){return this.SLt?this.SLt.nL():0}pj(){return this.SLt?this.SLt.pj():"off"}Q9(t){return this.SLt?this.SLt.Q9(t):null}vz(t){this.SLt&&this.SLt.vz(t)}K9(){return this.Ukt}zOt(){return this.zkt}JOt(){return this.Jkt}lD(){return this.SLt?this.SLt.lD():NaN}yx(){return"nearest"!==this.yO()}cD(){return this.vLt}fD(t){this.vLt!==t&&(this.vLt=t,-1!==this.lOt||-1!==this.PLt)&&(this.MNt(),this.xNt())}yO(){return this.QM}DIt(){return this.Hkt}qDt(){return this.qkt}ekt(){this.qkt&&(this.qkt.XI(),this.qkt.Sr(),this.qkt=null)}xD(){return this.Bq}bD(){return this.Bq.bD()}Mtt(){return this.LQ}TNt(){return this.$kt}PPt(){return this.Kkt}Nut(){return this.yut}sO(){return this.kU}dU(t){return this.kU.dU(t)}o5(t,s,i,e,h,r){if(r&&this.Kkt){if(t instanceof j.out&&t.oJ()){const o=t.Pgt(),a=Math.floor(this.SD()*o.length);return this.o5(o[a],s,i,e,h,r)}const n=this.Kkt.nut(t,r);if(n){const l=this.Jz(n,s,!1,i,e,!1,h,void 0,h);return this.Kkt.aut(l,r),l}}return this.Jz(t,s,!1,i,e,!1,h,void 0,h)}Jz(t,s,i,e,h,r,n,o,a){let l=null,u=null;if(t instanceof j.out){if((u=t).oJ()){const b=u.Pgt(),v=Math.floor(this.SD()*b.length);u=b[v]}l=u.Nz()}else l=t,u=this.kz(l[1]);const c=u.zL().ML();if(this.iy&&c&&!u.KIt())return null;const f=s;c||(s=null);let d;d=i&&!r&&l&&!this.pLt.has(l[2])?l[2]:this.dLt++;const p=l?l[0]:null,m=j.wr(j.Instance,{runtime:this,XN:u,uB:s,ZCt:p,iPt:l?l[3]:null,uid:d,tags:l?l[6]:null});this.pLt.set(d,m);let g=null,y=(c&&(g=m.jD(),void 0!==e&&void 0!==h&&(g.Uv(e),g.qv(h)),u.GCt(!0)),s&&(a||s.Xz(m,!0),s.TD().JX(u)),this.fLt++,!0);if(o){const M=o.YN();if(M.n4()&&u.n4()){const x=u.jX(),T=M.jX();x===T&&(y=!1)}}if(u.n4()&&!i&&!r&&y){const G=new Set;for(const _ of u.jX().CY())if(_!==u){const I=this.GNt(_,g,G);if(I){const C=this.Jz(I,f,!1,g?g.Hv():e,g?g.Jv():h,!0,!1,void 0,a);m.PY(C)}else{const N=this.Jz(_,f,!1,g?g.Hv():e,g?g.Jv():h,!0,!1,void 0,a);m.PY(N)}}for(const P of m.o4()){P.PY(m);for(const E of m.o4())P!==E&&P.PY(E)}}if(c&&!i&&n&&this._Nt(m,p,g,s,e,h,a),u.n4()&&!i&&!r&&n)for(const A of m.o4()){const R=A.jD();if(R){const B=A.zL(),F=A.YN().Nz()[0];B.ML()?this._Nt(A,F,R,s,R.Hv(),R.Jv(),a):this._Nt(A,F,R,s,void 0,void 0,a)}}if(!r&&n){void 0===e&&(e=p[0]),void 0===h&&(h=p[1]);const O=g.jB(),W=e-g.Hv()+O.Hv(),V=h-g.Jv()+O.Jv();O.fB(W,V)}u.bCt();const k=l?j.ho(l[5]):null,L=l?l[4].map(t=>j.ho(t)):null,w=c&&p&&p[13];if(w&&m.aPt(),m.YIt(k,L),w){const D=p[13];m.O6().sTt(D[2],D[0],D[1])}this.aLt.push(m),this.uLt=!0,this.s$()&&H.InstanceCreated(m);const S=this.v5t.instancecreate;return S.z6=m,this.tIt.dispatchEvent(S),m}_Et(t){const s=t[0],i=t[1],e=t[2],h=t[6];if(h)return h;const r=this.Bq.g$(s),n=r.HD(i);return n.Vz(e)}GNt(t,s,i){const e=s?.CPt()??[];for(const h of e){const r=this._Et(h),n=!!h[4],o=this.kz(r[1]);if(!i.has(r)&&t===o&&n)return i.add(r),r}}_Nt(a,t,s,l,u,c,f){const i=s.qAt(),e=s.CPt();if(a.jD().XAt(i),e){void 0===u&&(u=t[0]),void 0===c&&(c=t[1]);const d=new Set,p=t[0],m=t[1];for(const g of e){let t=g[0],s=g[1],i=g[2],e=g[3],h=!!g[4],r=g[5],n=g[6],o;if(n)o=n;else{const b=this.Bq.g$(t),v=b.HD(s);o=v.Vz(i)}const y=this.kz(o[1]),w=a.EPt(y),S=d.has(y);if(w&&!S&&h){const M=a.APt(y),x=(M.jD().QCt(o[0]),u+o[0][0]-p),T=c+o[0][1]-m;M.jD().fB(x,T),M.jD().XAt(r),a.$B(M,{s6:!!(e>>0&1),e6:!!(e>>1&1),r6:!!(e>>2&1),o6:!!(e>>3&1),l6:!!(e>>4&1),y6:!!(e>>5&1),c6:!!(e>>6&1),d6:!!(e>>7&1),m6:!!(e>>8&1)}),d.add(y)}else{const G=u+o[0][0]-p,_=c+o[0][1]-m,I=this.Jz(o,l,!1,G,_,!1,!0,a,f);I.jD().XAt(r),a.$B(I,{s6:!!(e>>0&1),e6:!!(e>>1&1),r6:!!(e>>2&1),o6:!!(e>>3&1),l6:!!(e>>4&1),y6:!!(e>>5&1),c6:!!(e>>6&1),d6:!!(e>>7&1),m6:!!(e>>8&1)})}}}}s4(i){if(!this.mLt.has(i)){let t=i.YN(),s=this.lLt.get(t);if(s){if(s.has(i))return;s.add(i)}else(s=new Set).add(i),this.lLt.set(t,s);if(this.s$()&&H.InstanceDestroyed(i),i.uPt(),this.uLt=!0,i.n4())for(const e of i.o4())this.s4(e);for(const h of i.children())h.w6()&&this.s4(h);if(!this.Bq.f5()&&!this.o5t){const r=this.CO();r.l5(!0),i.VPt(),r.l5(!1)}i.jPt(this.Bq.f5())}}d5(){this.uLt&&(this.cLt=!0,this.INt(),this.CNt(),this.cLt=!1,this.uLt=!1,this.YD())}INt(){for(const t of this.aLt){const s=t.YN();s.Xz(t);for(const i of s.y1t())i.Xz(t),i.bCt()}j.Un(this.aLt)}CNt(){this.tIt.Jf(!0);for(const[t,s]of this.lLt.entries())this.PNt(t,s),s.clear();this.lLt.clear(),this.tIt.Jf(!1)}PNt(t,s){for(const i of s){const e=this.v5t.instancedestroy,h=(e.z6=i,this.tIt.dispatchEvent(e),this.pLt.delete(i.a4()),this.QLt.delete(i),i.jD());h&&(h.KAt(),h.Zz(),h.uPt()),this.mLt.add(i),this.fLt--}j.Qn(t.i5(),s),t.bCt(),this.gLt.add(t);for(const r of t.y1t())j.Qn(r.i5(),s),r.bCt(),this.gLt.add(r);if(t.zL().ML()){const n=new Set([...s].map(t=>t.jD().HD()));for(const o of n)o.u9(s)}}MCt(){return this.aLt}*CMt(t){for(const s of this.MCt())t.oJ()?s.YN().Gvt(t)&&(yield s):s.YN()===t&&(yield s)}XIt(){return this.dLt++}$It(t,s){this.pLt.set(t,s)}Uj(t){this.NLt!==(t=!!t)&&(this.NLt=!!t,this.NLt)&&this.BLt&&(this.qj(!1),this.BLt=!1)}zj(){return this.NLt}QX(){this.tIt.dispatchEvent(j.wr(j.Event,"renderercontextlost")),this.qj(!0);for(const s of this.sLt)!s.oJ()&&s.ZIt()&&s.KX();const t=this.bD();t&&t.QX(),j.YGt.XU(),j.mU.XU()}async TDt(){await this.bD().UX(null,this.uv()),this.tIt.dispatchEvent(j.wr(j.Event,"renderercontextrestored")),this.qj(!1),this.YD()}C5t(t){if(this.NLt){const s=t.hidden;this.qj(s),(this.BLt=s)||this.YD()}}R5t(t){this.akt()&&this.TLt&&!j.mi.Ti&&!t.data.parentHasFocus&&(this.qj(!0),this.GLt=!0)}F5t(){this.GLt&&(this.qj(!1),this.GLt=!1)}xNt(){const t=this.ILt;"vsync"===this.vLt?-1===this.lOt&&(this.lOt=self.requestAnimationFrame(t.CLt)):"unlimited-tick"===this.vLt?(-1===this.PLt&&(this.PLt=j.So(t.ELt)),-1===this.lOt&&(this.lOt=self.requestAnimationFrame(t.ALt))):-1===this.PLt&&(this.PLt=j.So(t.CLt))}MNt(){-1!==this.lOt&&(self.cancelAnimationFrame(this.lOt),this.lOt=-1),-1!==this.PLt&&(j.bo(this.PLt),this.PLt=-1)}XO(){return 0<this.WLt}qj(t){if(!this.QOt()){const s=this.XO(),i=(this.WLt+=t?1:-1,this.WLt<0&&(this.WLt=0),this.XO());if(!s&&i)console.log("[Construct] Suspending"),this.MNt(),this.tIt.dispatchEvent(j.wr(j.Event,"suspend")),this.O4(j.TY.xY.MY.ENt,null,null);else if(s&&!i){console.log("[Construct] Resuming");const e=performance.now();this.ULt=e,this.s5t=e,this.t5t=0,this.i5t=0,this.e5t=0,this.h5t=0,this.n5t=0,this.r5t=0,this.tIt.dispatchEvent(j.wr(j.Event,"resume")),this.O4(j.TY.xY.MY.ANt,null,null),this.H1t()||this.YK(e)}}}Aj(t){this.x5t.xc(t)}Dj(t){this.T5t.xc(t)}Fj(t){this.G5t.xc(t)}Rj(t){this.x5t.R0(t)}kj(t){this.T5t.R0(t)}Oj(t){this.G5t.R0(t)}RNt(){const t=globalThis.Ij;this.x5t._d(!0);for(const s of this.x5t)s instanceof t?s.U4():s.YK();this.x5t._d(!1)}FNt(){const t=globalThis.Ij;this.T5t._d(!0);for(const s of this.T5t)s instanceof t?s.Nj():s.IGt();this.T5t._d(!1)}ONt(){const t=globalThis.Ij;this.G5t._d(!0);for(const s of this.G5t)s instanceof t?s.J4():s.MTt();this.G5t._d(!1)}*DNt(){const s=globalThis.Ij;this.x5t._d(!0);for(const i of this.x5t){let t;t=i instanceof s?i.U4():i.YK(),j.Xo(t)&&(yield*t)}this.x5t._d(!1)}*kNt(){const s=globalThis.Ij;this.T5t._d(!0);for(const i of this.T5t){let t;t=i instanceof s?i.Nj():i.IGt(),j.Xo(t)&&(yield*t)}this.T5t._d(!1)}*LNt(){const s=globalThis.Ij;this.G5t._d(!0);for(const i of this.G5t){let t;t=i instanceof s?i.J4():i.MTt(),j.Xo(t)&&(yield*t)}this.G5t._d(!1)}async YK(a,t,s){this.kLt=!0;const l="background-wake"===s,u="background-wake"!==s&&"skip-render"!==s,c=this.xD(),f=this.tL();if(this.OLt&&(!this.XO()||t||l)){let t=performance.now(),s=(this.DLt=!0,this.NNt(a||0),this.e5t++,this.BNt(),this.WNt()),i=(this.MMt()&&await s,this.tIt.a0(this.v5t.pretick)),e=(i instanceof Promise&&await i,this.VNt()),h=(this.MMt()&&await e,this.jNt()&&await this.HNt(),c.CD()&&await this.UNt(),this.zNt()),r=(this.MMt()&&await h,c.bD()),n=r.LX(),o=!1;if(-1!==n&&(r.NX(),f.kX()!==n)){const d=this.tL().hY(n);this.fO()&&(o=!0,await d)}this.Mf("canvas","update-html-layer-dom-state",{layersDomState:r.pJ().filter(t=>t.uN()).map(t=>t.y9())}),u&&this.q3(),o&&this.Mf("canvas","cleanup-html-layers"),this.QOt()&&(await this.eNt(),this.ZO()>=this.tNt())?this.rNt():(this.XO()||l||this.xNt(),this.RLt++,this.FLt++,this.DLt=!1,this.r5t+=performance.now()-t)}}async WNt(){const t=this.f0t,s=this.s$();this.d5(),t.l5(!0),this.A1t(this.bD()),s&&H.StartMeasuringTime(),this.MMt()?await t.upt():t.rpt(),s&&H.AddEventsTime(),this.R1t(),t.l5(!1),this.d5(),t.l5(!0)}async VNt(){const t=this.s$(),s=this.MMt(),i=this.tIt,e=this.v5t,h=this.M5t;t&&H.StartMeasuringTime(),s?await this.JNt(this.DNt()):this.RNt(),s?await this.JNt(this.kNt()):this.FNt(),t&&H.AddBehaviorTickTime(),t&&H.StartMeasuringTime(),s?await this.qNt(e.tick):i.dispatchEvent(e.tick),t&&H.AddPluginTickTime(),this.f0t.l5(!1),this.t$(h.tick)}async zNt(){const t=this.f0t,s=this.tIt,i=this.v5t,e=this.s$(),h=this.MMt();e&&H.StartMeasuringTime(),h?await t.F1t(this.Bq):t.E1t(this.Bq),e&&H.AddEventsTime(),this.Ykt.b3t(),this.BNt(),this.LLt=!1,t.l5(!0),e&&H.StartMeasuringTime(),h?await this.JNt(this.LNt()):this.ONt(),e&&H.AddBehaviorTickTime(),e&&H.StartMeasuringTime(),h?await this.qNt(i.tick2):s.dispatchEvent(i.tick2),e&&H.AddPluginTickTime(),t.l5(!1),h&&await t.U1t()}BNt(){if(0!==this.mLt.size){const t=this.tIt;t.Jf(!0);for(const s of this.gLt)s.Q1t().jft(this.mLt);this.gLt.clear(),this.f0t.fpt(this.mLt);for(const i of this.mLt)i.Sr();this.mLt.clear(),t.Jf(!1)}}async UNt(){let t=this.xD(),s=0;for(;t.CD()&&s++<10;)await this.XNt(t.M$())}NNt(t){let s=0;if(this.QOt())s=1/this.sNt(),this.zLt=s,this.JLt=s;else if(0!==this.ULt){const i=Math.max(t-this.ULt,0);.5<(s=i/1e3)&&(s=0),this.zLt=s,this.JLt=j.Gr(s,this.YLt,this.XLt)}this.ULt=t,this.qLt=this.JLt*this.$Ct,this.$Lt.xc(this.qLt),this.KLt.xc(s*this.$Ct),this.ZLt.xc(this.JLt);for(const[e,h]of this.QLt)h.xc(this.JLt*e.sD());this.SLt&&this.SLt.kDt(),1e3<=t-this.s5t&&(this.s5t+=1e3,1e3<=t-this.s5t&&(this.s5t=t),this.i5t=this.t5t,this.t5t=0,this.h5t=this.e5t,this.e5t=0,this.n5t=Math.min(this.r5t/1e3,1),this.r5t=0,this.SLt&&this.SLt.DDt(),this.Ykt.g3t(),this.s$())&&H.Update1sPerfStats()}nPt(t,s){if(s){if(!this.QLt.has(t)){const i=j.wr(j.O0);i.B0(this.$Lt),this.QLt.set(t,i)}}else this.QLt.delete(t)}oPt(t){const s=this.QLt.get(t);return s?s.ni():this.ZO()}async XNt(t){const s=this.tIt,i=this.xD(),e=i.bD();await e.FY(),e.ZX(t,this.uv()),e===t&&this.f0t.kY(),this.Ykt.b3t(),this.BNt(),s.dispatchEvent(this.v5t.beforelayoutchange),j.Xf.c0(!0),await t.UX(e,this.uv()),j.Xf.c0(!1),await t.tY(!1),s.dispatchEvent(this.v5t.layoutchange),this.YD(),this.LLt=!0,this.d5(),this.hNt()}YD(){this.xLt=!0}GDt(){return this.SLt?this.SLt.GDt():null}_Dt(){return this.SLt?this.SLt._Dt():null}uv(){return this.SLt?this.SLt.uv():null}q3(){const i=this.SLt;if(i&&!i.xDt()){const e=this.uv(),t=e.sR(),h=t&&e.Fb(),r=t&&e.$w();if(h&&e.VA(),this.xLt||this.QOt()){const n=this.Bq.bD(),o=(this.t5t++,e.FA(),this.s$());o&&H.StartMeasuringTime(),this.xLt=!1;let t=null,s=(h&&(t=i.BDt().PP(),e.tR(t)),null);r&&(s=e.StartFrameTiming(2*(1+n.EX())),e.StartMeasuringRenderPassTime(0,1)),this.XJ()&&"low"===i.Z9()?e.JE(i.V9(),i.j9()):e.qE(),this.YNt(this.uv(),n),t&&e.iR(t),r&&(e.StopMeasuringRenderPassTime(),this.SLt.WDt(s)),e.Gb(),o&&(H.AddDrawCallsTime(),H.UpdateInspectHighlight()),i&&i.jDt()}else e.Cb()}}JY(t){return"low"===this.tL().Z9()||t.Fb()&&(this.K9()||this.XJ())}YNt(s,i){s.hS(),s.uA(),s.iA(1,1,1,1),s.zA(null),s.nA(null),s.DA(this.XJ()),this.JY(s)&&i.UY(s);const e=i.kX();for(let t=1;t<e;++t)i.$Y(s,t),s.$w()&&s.Restart();this.JY(s)||i.UY(s),i.YY(s)}O4(t,s,i){if(!this.OLt)return!1;let e=!this.DLt&&!this.f0t.X1t(),h=0;e&&(h=performance.now());const r=this.s$(),n=(r&&this.o8(!1),this.f0t.L1t(this.Bq,t,s,i));if(e){const o=performance.now()-h;this.r5t+=o,r&&H.AddTriggersTime(o)}return r&&this.o8(!0),n}uTt(t,s,i){if(!this.MMt())return this.O4(t,s,i);if(this.H1t())throw new Error("called DebugTrigger() while stopped on breakpoint");if(this.DLt||this.f0t.X1t())return this.f0t.W1t(this.Bq,t,s,i);throw new Error("called DebugTrigger() outside of event code - use TriggerAsync() instead")}async L4(t,s,i){if(!this.MMt())return this.O4(t,s,i);if(!this.OLt)return!1;if(this.H1t())return this.f0t.V1t(t,s,i);if(!this.bD())return this.f0t.N1t(t,s,i);let e=performance.now(),h=this.f0t.W1t(this.Bq,t,s,i),r=h.next();for(;!r.done;)await this.D1t(r.value),r=h.next();return this.XO()||this.f0t.X1t()||(await this.f0t.U1t(),this.kLt&&!this.DLt&&this.xNt()),this.r5t+=performance.now()-e,r.value}cTt(t,s,i){const e=this.s$(),h=(e&&this.o8(!1),this.f0t.z1t(this.Bq,t,s,i));return e&&this.o8(!0),h}fTt(t,s,i){return this.f0t.J1t(this.Bq,t,s,i)}dTt(t){return this.VLt.xc(t)}A1t(t){this.oLt.push(t)}R1t(){if(!this.oLt.length)throw new Error("layout stack empty");this.oLt.pop()}WD(){return this.oLt.length?this.oLt.at(-1):this.bD()}YO(t){return t&&-1!==t.sD()?this.JLt*t.sD():this.qLt}qK(){return this.qLt}XK(){return this.JLt}KO(){return this.zLt}sD(){return this.$Ct}iD(t){(isNaN(t)||t<0)&&(t=0),this.$Ct=t}mD(t){this.YLt=Math.max(t,0)}pD(){return this.YLt}wD(t){this.XLt=Math.max(t,0)}yD(){return this.XLt}eD(){return this.i5t}rD(){return this.h5t}oD(){return this.n5t}$Nt(){return this.HLt}ZO(){return this.$Lt.ni()}KNt(){return this.KLt.ni()}tD(){return this.ZLt.ni()}Utt(){return this.RLt}ZNt(){return this.FLt}QNt(){return this.fLt}aO(){return this.Rkt}uO(){return this.Fkt}t4t(){return this.Okt}s4t(){return this.Dkt}LD(t){if(this.o5t)throw new Error("cannot call while loading state - wait until afterload event");return this.pLt.get(t)||null}_Y(){this.pLt.clear();for(const t of this.sLt)if(!t.oJ())for(const s of t.i5())this.pLt.set(s.a4(),s)}akt(){return"preview"===this.Skt}s$(){return this.Gkt}$k(){return this.Skt}Kk(){return"nwjs"===this.$k()||this.bkt}ukt(){return"cordova"===this.Skt}i4t(){return"Android"===j.mi.gi&&("cordova"===this.Skt||"playable-ad-single-file"===this.Skt||"playable-ad-zip"===this.Skt||"instant-games"===this.Skt)}oNt(){return this.GH}e4t(){return this.vkt}Zk(){return this.Mkt}h4t(){return this.xkt}hO(){return this.Ykt}qGt(){return this.Xkt.qGt()}XGt(){return this.Xkt.XGt()}XJ(){return this.bLt}r4t(){return this.uv().Bw(this.BJ())}kw(t){return this.uv().kw(t||this.BJ())}n4t(){return this.LLt}o4t(t){this.MLt!==(t=!!t)&&(this.MLt=t,this.xD().T$(),this.YD())}SO(){return this.MLt}a4t(t){if(!this.tLt.has(t)){const i=()=>this.l4t(t);this.tLt.set(t,i),t.Qf().addEventListener("animationframeimagechange",i)}const s=this.$g.Ug(t);return s.oy()||s.uy().then(()=>this.YD()),s}l4t(t){this.$g.Xg(t)}Zkt(t){const s=[];for(const i of t.uCt())for(const e of i.fW()){const h=e.wW();s.push({source:e,width:h.Em(),height:h.Wm(),tag:e.NW()})}return{hy:s}}async Qkt(t){const s=j.wr(j.Cd),i=[],h=new Map;for(const n of t.uCt())for(const o of n.fW()){const a=o.wW().m_t();h.has(a)||(h.set(a,null),i.push(s.xc(async()=>{const t=await a.ZU();h.set(a,t)})))}await Promise.all(i);const e=[];for(const l of t.uCt())for(const u of l.fW())e.push(s.xc(async()=>{const t=u.wW(),s=h.get(t.m_t()),i=await t.g_t(s),e=await createImageBitmap(i);return{gy:e}}));const r=await Promise.all(e);for(const c of h.values())c instanceof ImageBitmap&&c.close&&c.close();return{hy:r}}u4t(t){this.a5t=t,this.l5t=!1}c4t(){this.a5t="",this.l5t=!0}f4t(t){this.u5t=t}m2t(t){this.K4=t}d4t(){return this.c5t}jNt(){return!!(this.a5t||this.l5t||this.u5t||null!==this.K4)}async HNt(){if(this.a5t&&(this.d5(),await this.p4t(this.a5t),this.m4t()),this.u5t&&(await this.g4t(this.u5t),this.m4t(),this.s$())&&H.StepIfPausedInDebugger(),this.l5t){const t=await this.y4t();this.c5t=t,await this.L4(j.TY.xY.MY.w4t,null),this.c5t="",this.m4t()}if(null!==this.K4){this.d5();try{await this.S4t(this.K4),this.c5t=this.K4,await this.L4(j.TY.xY.MY.b4t,null),this.c5t=""}catch(t){console.error("[Construct] Failed to load state from JSON string: ",t),await this.L4(j.TY.xY.MY.v4t,null)}this.m4t()}}m4t(){this.a5t="",this.l5t=!1,this.u5t="",this.K4=null}dL(){return this.f5t||(this.f5t=localforage.Vi({name:"c3-localstorage-"+this.t4t(),description:this.aO()})),this.f5t}M4t(){return this.d5t||(this.d5t=localforage.Vi({name:"c3-savegames-"+this.t4t(),description:this.aO()})),this.d5t}async p4t(t){const s=await this.y4t();try{await this.M4t().setItem(t,s),console.log("[Construct] Saved state to storage ("+s.length+" chars)"),this.c5t=s,await this.L4(j.TY.xY.MY.w4t,null),this.c5t=""}catch(t){console.error("[Construct] Failed to save state to storage: ",t),await this.L4(j.TY.xY.MY.x4t,null)}}async g4t(t){try{const s=await this.M4t().getItem(t);if(!s)throw new Error("empty slot");console.log("[Construct] Loaded state from storage ("+s.length+" chars)"),await this.S4t(s),this.c5t=s,await this.L4(j.TY.xY.MY.b4t,null),this.c5t=""}catch(t){console.error("[Construct] Failed to load state from storage: ",t),await this.L4(j.TY.xY.MY.v4t,null)}}async y4t(){const t={c3save:!0,version:1,rt:{time:this.ZO(),timeRaw:this.KNt(),walltime:this.tD(),timescale:this.sD(),tickcount:this.Utt(),next_uid:this.dLt,running_layout:this.bD().mJ(),start_time_offset:Date.now()-this.HLt},types:{},layouts:{},events:this.f0t.Fq(),timelines:this.LQ.Fq(),user_script_data:null};for(const i of this.sLt)i.oJ()||i.RCt()||(t.types[i.mJ().toString()]=i.Fq());for(const e of this.Bq._D())t.layouts[e.mJ().toString()]=e.Fq();const s=this.T4t("save");return s.saveData=null,await this.SY(s),t.user_script_data=s.saveData,JSON.stringify(t)}pY(){return this.o5t}async S4t(t){const s=this.xD(),i=JSON.parse(t);if(i.c2save)throw new Error("C2 saves are incompatible with C3 runtime");if(!i.c3save)throw new Error("not valid C3 save data");if(1<i.version)throw new Error("C3 save data from future version");this.g2t(),this.tIt.dispatchEvent(j.wr(j.Event,"beforeload"));for(const a of this.wNt()){const l=a.YN();l.RCt()||a.$$()}let e=i.rt,h=(this.$Lt.Set(e.time),e.hasOwnProperty("timeRaw")&&this.KLt.Set(e.timeRaw),this.ZLt.Set(e.walltime),this.$Ct=e.timescale,this.RLt=e.tickcount,this.HLt=Date.now()-e.start_time_offset,e.running_layout),r=!(this.o5t=!0);if(h!==this.bD().mJ()){const u=s.g$(h);if(!u)return;await this.XNt(u),r=!0}for(const[c,f]of Object.entries(i.layouts)){const d=parseInt(c,10),p=s.g$(d);p&&p.Oq(f)}const n=new Set;for(const[m,g]of Object.entries(i.types)){const y=parseInt(m,10),w=this.Yj(y);!w||w.oJ()||w.RCt()||w.Oq(g,n)}for(const S of this.Bq._D())for(const b of S.A5())b.Dq();if(this.d5(),this._Y(),this.o5t=!1,r){for(const v of this.wNt())v.mY();for(const[M,x]of Object.entries(i.types)){const T=parseInt(M,10),G=this.Yj(T);!G||G.oJ()||G.RCt()||G.DCt(x)}}this.dLt=e.next_uid,this.f0t.Oq(i.events);for(const _ of this.sLt)if(!_.oJ()&&_.n4())for(const I of _.i5()){const C=I.IY();for(const P of _.jX().CY())if(P!==_){const E=P.i5();if(C<0||C>=E.length)throw new Error("missing sibling instance");I.PY(E[C])}}this.LQ.Oq(i.timelines),s.x$(),s.T$();for(const A of n)A.WPt();this.y2t(),this.tIt.dispatchEvent(j.wr(j.Event,"afterload")),this.t$(this.T4t("afterload"));for(const[R,F]of Object.entries(i.types)){const O=parseInt(R,10),D=this.Yj(O);D&&D.OCt()}const o=this.T4t("load");o.saveData=i.user_script_data,await this.SY(o),this.YD()}G4t(t,s){return t.jD().jAt()-s.jD().jAt()}CRt(t,s){t.jD()&&!this.L5t.has(t)&&(this.L5t.set(t,s),this.N5t.push(t))}g2t(){this.L5t=new WeakMap,j.Un(this.N5t)}y2t(t="full",s=null){this.N5t.sort(this.G4t);for(const i of this.N5t)i.Z$(this.L5t.get(i),t,s);for(const e of this.N5t)e.zPt(this.L5t.get(e),t,s);this.g2t()}async lNt(t){const s=await Promise.all(t.map(async t=>{const s=this.ukt()&&this.kU.hU();if(s||"playable-ad-single-file"===this.$k()){const i=await this.kU.Ao(t);return URL.createObjectURL(i)}return new URL(t,location.href).toString()}));this._5t._4t(s)}I4t(t,s){this._5t.C4t(t,s)}aNt(t,s){this._5t.P4t(t,s)}uNt(t,s,i,e){return this._5t.uNt(t,s,i,null,null,e)}E4t(t,s,i,e){return this._5t.E4t(t,s,i,e)}A4t(){return this._5t.R4t()}DD(t,s){this.Mf("runtime","invoke-download",{url:t,filename:s})}async KDt(t,s,i,e,h,r){if(e=e||s,h=h||i,this.fO()){const n=await this.KD("runtime","raster-svg-image",{blob:t,imageWidth:s,imageHeight:i,surfaceWidth:e,surfaceHeight:h,imageBitmapOpts:r});return n.imageBitmap}{const o=await self.C3_RasterSvgImageBlob(t,s,i,e,h);return r?self.createImageBitmap(o,r):o}}async F4t(t){return this.fO()?this.KD("runtime","get-svg-image-size",{blob:t}):self.C3_GetSvgImageSize(t)}O4t(){this.y5t||(this.y5t=!0,this.Mf("runtime","enable-device-orientation"))}D4t(){this.w5t||(this.w5t=!0,this.Mf("runtime","enable-device-motion"))}SD(){return this.jLt()}k4t(t){this.jLt=t}E5t(){const t=this.uv();return{fps:this.eD(),tps:this.rD(),cpu:this.oD(),gpu:this.lD(),layout:this.bD()?this.bD().uf():"",renderer:t.Fb()?t.uR():t.GetAdapterInfoString()}}H1t(){return!!this.s$()&&H.H1t()}D1t(t){return this.MMt()?H.D1t(t):Promise.resolve()}yyt(){return!!this.MMt()&&H.BreakNext()}L4t(t){this._kt=!!t,this.N4t()}B4t(){return this._kt}MMt(){return this.Ikt}o8(t){t?this.Ckt--:this.Ckt++,this.N4t()}N4t(){this.Ikt=this.s$()&&this._kt&&0===this.Ckt}Dmt(){return this.s$()&&H.Dmt()}J9(){return this.s$()&&this.uv().sR()&&H.J9()}async JNt(t){if(t)for(const s of t)await this.D1t(s)}qNt(t){return this.JNt(this.tIt.u0(t))}Ldt(t){return this.f0t.Ldt(t.name,t.params)}QD(t){if(this.fO())throw new Error("not supported in worker mode");return self.c3_runtimeInterface._GetHTMLWrapElement(t)}wL(){return this.O5t}T4t(t){const s=j.wr(j.Event,t,!1);return s.runtime=this.O5t,s}Y5t(){this.O5t=new self.ZF(this),this.M5t={tick:this.T4t("tick")}}Z5t(){const t={};for(const s of this.sLt)t[s.u1t()]={value:s.BL(),enumerable:!0,writable:!1};this.O5t.GO(t)}Q5t(){const t={};for(const s of this.CO().w1t())t[s.u1t()]=s.c1t();this.O5t._O(t)}ED(){return this.k5t}JL(t,s){this.D5t.set(t,s)}O5(t){return this.D5t.get(t)}jk(t){if(!(t instanceof self.HL))throw new TypeError("expected IObjectClass");const s=this.O5(t);if(s&&s instanceof j.out)return s;throw new Error("invalid IObjectClass")}QL(t){if(!(t instanceof self.qN))throw new TypeError("expected IInstance");const s=this.O5(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}VD(t){if(!(t instanceof self.P6))throw new TypeError("expected IWorldInstance");const s=this.O5(t);if(s&&s instanceof j.Instance)return s;throw new Error("invalid IInstance")}},self.C3_CreateRuntime=j.ckt.kx,self.C3_InitRuntime=(t,s)=>t.QCt(s)}{const La=self.Bs;La.I5t=class extends La.gr{constructor(t,s){super(),this.Sf=t,this.W4t=new Map,this.V4t=0,this.j4t=s.inputPort,s.outputPort.onmessage=t=>this.H4t(t),this.U4t=s.maxNumWorkers,this.z4t=1,this.J4t=!1,this.q4t=!1}async QCt(){}R4t(){return this.U4t}_4t(t){this.j4t.postMessage({type:"_import_scripts",scripts:t})}C4t(t,s){this.j4t.postMessage({type:"_send_blob",blob:t,id:s})}P4t(t,s){this.j4t.postMessage({type:"_send_buffer",buffer:t,id:s},[t])}uNt(t,s,i,e,h,r){if(i=i||[],"number"==typeof r&&(r=Math.floor(r))<=0)throw new Error("invalid maxWorkerNum");const n=this.V4t++,o={type:t,isBroadcast:!1,maxWorkerNum:r,jobId:n,params:s,transferables:i},a=new Promise((t,s)=>{this.W4t.set(n,{resolve:t,progress:e,reject:s,X4t:!1,maxWorkerNum:r})});return h&&h.E0(()=>this.Y4t(n)),this.j4t.postMessage(o,i),this.$4t(),a}E4t(t,s,i,e){if(i=i||[],"number"==typeof e&&(e=Math.floor(e))<=0)throw new Error("invalid maxWorkerNum");const h=this.V4t++,r={type:t,isBroadcast:!0,maxWorkerNum:e,jobId:h,params:s,transferables:i};this.j4t.postMessage(r,i)}Y4t(t){const s=this.W4t.get(t);s&&(s.X4t=!0,s.resolve=null,s.progress=null,s.reject=null,this.j4t.postMessage({type:"_cancel",jobId:t}))}H4t(t){const s=t.data,i=s.type,e=s.jobId;switch(i){case"result":this.K4t(e,s.result);break;case"progress":this.Z4t(e,s.progress);break;case"error":this.Q4t(e,s.error);break;case"ready":this.tBt();break;default:throw new Error(`unknown message from worker '${i}'`)}}K4t(t,s){const i=this.W4t.get(t);if(!i)throw new Error("invalid job ID");i.X4t||i.resolve(s),this.W4t.delete(t)}Z4t(t,s){const i=this.W4t.get(t);if(!i)throw new Error("invalid job ID");!i.X4t&&i.progress&&i.progress(s)}Q4t(t,s){const i=this.W4t.get(t);if(!i)throw new Error("invalid job ID");i.X4t||i.reject(s),this.W4t.delete(t)}tBt(){this.J4t&&(this.J4t=!1,this.z4t++,this.z4t<this.U4t?this.$4t():this.j4t.postMessage({type:"_no_more_workers"}))}sBt(){let t=0,s=[...this.W4t.values()].sort((t,s)=>{const i=t.maxWorkerNum||1/0,e=s.maxWorkerNum||1/0;return i-e});for(const i of s){const e=i.maxWorkerNum||1/0;t<e&&t++}return t}async $4t(){if(!(this.z4t>=this.U4t||this.J4t||this.q4t||this.sBt()<=this.z4t))try{this.J4t=!0;const t=await this.Sf.KD("runtime","create-job-worker");t.outputPort.onmessage=t=>this.H4t(t)}catch(t){this.q4t=!0,this.J4t=!1,console.error(`[Construct] Failed to create job worker; stopping creating any more (created ${this.z4t} so far)`,t)}}}}self.C3_Shaders={},self.C3_Shaders.warpradial={KOt:"#ifdef GL_FRAGMENT_PRECISION_HIGH\n#define highmedp highp\n#else\n#define highmedp mediump\n#endif\nvarying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump vec2 srcOriginStart;\nuniform mediump vec2 srcOriginEnd;\nuniform highmedp float seconds;\nuniform mediump float freq;\nuniform mediump float amp;\nuniform mediump float speed;\nvoid main(void)\n{\nmediump vec2 srcOriginSize = srcOriginEnd - srcOriginStart;\nmediump vec2 tex = (vTex - srcOriginStart) / srcOriginSize;\ntex = tex * 2.0 - 1.0;\nmediump float d = length(tex);\nmediump float a = atan(tex.y, tex.x);\na += sin(a * freq + (seconds * speed)) * amp;\ntex.x = cos(a) * d;\ntex.y = sin(a) * d;\ntex = (tex + 1.0) / 2.0;\ntex = tex * srcOriginSize + srcOriginStart;\ntex = clamp(tex, min(srcStart, srcEnd), max(srcStart, srcEnd));\ngl_FragColor = texture2D(samplerFront, tex);\n}",$Ot:"",XOt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nfreq : f32,\namp : f32,\nspeed : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar tex = c3_srcOriginToNorm(input.fragUV);\ntex = tex * 2.0 - 1.0;\nvar d : f32 = length(tex);\nvar a = atan2(tex.y, tex.x);\na = a + sin(a * shaderParams.freq + (c3Params.seconds * shaderParams.speed)) * shaderParams.amp;\ntex.x = cos(a) * d;\ntex.y = sin(a) * d;\ntex = (tex + 1.0) / 2.0;\ntex = c3_normToSrcOrigin(tex);\ntex = c3_clampToSrc(tex);\nvar output : FragmentOutput;\noutput.color = textureSample(textureFront, samplerFront, tex);\nreturn output;\n}",rv:!1,ov:!1,Hb:30,zb:30,qb:!1,Yb:!1,Kb:!1,Qb:!1,sv:!0,parameters:[["freq",0,"float"],["amp",0,"percent"],["speed",0,"float"]]},self.C3_Shaders.hsladjust={KOt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nprecision mediump float;\nuniform float huerotate;\nuniform float satadjust;\nuniform float lumadjust;\nvec3 rgb_to_hsl(vec3 color)\n{\nvec3 hsl = vec3(0.0, 0.0, 0.0);\nfloat fmin = min(min(color.r, color.g), color.b);\nfloat fmax = max(max(color.r, color.g), color.b);\nfloat delta = fmax - fmin;\nhsl.z = (fmax + fmin) / 2.0;\nif (delta == 0.0)\n{\nhsl.x = 0.0;\nhsl.y = 0.0;\n}\nelse\n{\nif (hsl.z < 0.5)\nhsl.y = delta / (fmax + fmin);\nelse\nhsl.y = delta / (2.0 - fmax - fmin);\nfloat dR = (((fmax - color.r) / 6.0) + (delta / 2.0)) / delta;\nfloat dG = (((fmax - color.g) / 6.0) + (delta / 2.0)) / delta;\nfloat dB = (((fmax - color.b) / 6.0) + (delta / 2.0)) / delta;\nif (color.r == fmax)\nhsl.x = dB - dG;\nelse if (color.g == fmax)\nhsl.x = (1.0 / 3.0) + dR - dB;\nelse if (color.b == fmax)\nhsl.x = (2.0 / 3.0) + dG - dR;\nif (hsl.x < 0.0)\nhsl.x += 1.0;\nelse if (hsl.x > 1.0)\nhsl.x -= 1.0;\n}\nreturn hsl;\n}\nfloat hue_to_rgb(float f1, float f2, float hue)\n{\nif (hue < 0.0)\nhue += 1.0;\nelse if (hue > 1.0)\nhue -= 1.0;\nfloat ret;\nif ((6.0 * hue) < 1.0)\nret = f1 + (f2 - f1) * 6.0 * hue;\nelse if ((2.0 * hue) < 1.0)\nret = f2;\nelse if ((3.0 * hue) < 2.0)\nret = f1 + (f2 - f1) * ((2.0 / 3.0) - hue) * 6.0;\nelse\nret = f1;\nreturn ret;\n}\nvec3 hsl_to_rgb(vec3 hsl)\n{\nvec3 rgb = vec3(hsl.z);\nif (hsl.y != 0.0)\n{\nfloat f2;\nif (hsl.z < 0.5)\nf2 = hsl.z * (1.0 + hsl.y);\nelse\nf2 = (hsl.z + hsl.y) - (hsl.y * hsl.z);\nfloat f1 = 2.0 * hsl.z - f2;\nrgb.r = hue_to_rgb(f1, f2, hsl.x + (1.0 / 3.0));\nrgb.g = hue_to_rgb(f1, f2, hsl.x);\nrgb.b = hue_to_rgb(f1, f2, hsl.x - (1.0 / 3.0));\n}\nreturn rgb;\n}\nvoid main(void)\n{\nvec4 front = texture2D(samplerFront, vTex);\nvec3 rgb = rgb_to_hsl(front.rgb) + vec3((huerotate > 0.5 ? huerotate - 1.0 : huerotate), 0, (lumadjust - 1.0) * front.a);\nrgb.y *= satadjust;\nrgb = hsl_to_rgb(rgb);\ngl_FragColor = vec4(rgb, front.a);\n}",$Ot:"",XOt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nhuerotate : f32,\nsatadjust : f32,\nlumadjust : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = textureSample(textureFront, samplerFront, input.fragUV);\nvar huerotate : f32 = shaderParams.huerotate;\nif (huerotate > 0.5)\n{\nhuerotate = huerotate - 1.0;\n}\nvar rgb : vec3<f32> = c3_RGBtoHSL(front.rgb) + vec3<f32>(huerotate, 0.0, (shaderParams.lumadjust - 1.0) * front.a);\nrgb.y = rgb.y * shaderParams.satadjust;\nrgb = c3_HSLtoRGB(rgb);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb, front.a);\nreturn output;\n}",rv:!1,ov:!1,Hb:0,zb:0,qb:!1,Yb:!1,Kb:!0,Qb:!1,sv:!1,parameters:[["huerotate",0,"percent"],["satadjust",0,"percent"],["lumadjust",0,"percent"]]},self.C3_Shaders.vignette={KOt:"varying mediump vec2 vTex;\nuniform lowp sampler2D samplerFront;\nuniform mediump vec2 srcStart;\nuniform mediump vec2 srcEnd;\nuniform mediump float vignetteStart;\nuniform mediump float vignetteEnd;\nvoid main(void)\n{\nlowp vec4 front = texture2D(samplerFront, vTex);\nlowp float a = front.a;\nif (a != 0.0)\nfront.rgb /= a;\nmediump vec2 tex = (vTex - srcStart) / (srcEnd - srcStart);\nlowp float d = distance(tex, vec2(0.5, 0.5));\nfront.rgb *= smoothstep(vignetteEnd, vignetteStart, d);\nfront.rgb *= a;\ngl_FragColor = front;\n}",$Ot:"",XOt:"%%SAMPLERFRONT_BINDING%% var samplerFront : sampler;\n%%TEXTUREFRONT_BINDING%% var textureFront : texture_2d<f32>;\nstruct ShaderParams {\nvignetteStart : f32,\nvignetteEnd : f32\n};\n%%SHADERPARAMS_BINDING%% var<uniform> shaderParams : ShaderParams;\n%%C3PARAMS_STRUCT%%\n%%C3_UTILITY_FUNCTIONS%%\n%%FRAGMENTINPUT_STRUCT%%\n%%FRAGMENTOUTPUT_STRUCT%%\nconst center : vec2<f32> = vec2<f32>(0.5);\n@fragment\nfn main(input : FragmentInput) -> FragmentOutput\n{\nvar front : vec4<f32> = c3_unpremultiply(textureSample(textureFront, samplerFront, input.fragUV));\nvar rgb : vec3<f32> = front.rgb;\nvar tex : vec2<f32> = c3_srcToNorm(input.fragUV);\nvar d : f32 = distance(tex, center);\nrgb = rgb * smoothstep(shaderParams.vignetteEnd, shaderParams.vignetteStart, d);\nvar output : FragmentOutput;\noutput.color = vec4<f32>(rgb * front.a, front.a);\nreturn output;\n}",rv:!1,ov:!1,Hb:0,zb:0,qb:!1,Yb:!1,Kb:!0,Qb:!1,sv:!1,parameters:[["vignetteStart",0,"percent"],["vignetteEnd",0,"percent"]]};{let S=function(t,s){const i=t[1],e=s[1];if("number"==typeof i&&"number"==typeof e)return i-e;{const h=""+i,r=""+e;return h<r?-1:r<h?1:0}},b=(S,self.Bs),i=null,e="",h="",r=[],n="",o="",a="",v=b.wr(b.adt);b.TY.xY=class extends b.mxt{constructor(t){super(t),this.edt=this.Sf.CO().r8(),this.Hft=this.Sf.CO().VO(),this.iBt=0,this.eBt=0,this.hBt=new Map}Sr(){super.Sr()}YD(){this.Sf.YD()}O4(t){this.Sf.O4(t,null,null)}rBt(t,s){return i&&t===e&&s===h||(i=new RegExp(t,s),e=t,h=s),i.lastIndex=0,i}nBt(t,s,i){if(t!==n||s!==o||i!==a){const e=this.rBt(s,i);r=t.match(e),n=t,o=s,a=i}return r}async oBt(t,s){if(s.length){this.iBt+=s.length;const i=[];for(const e of s)i.push(t.JX(e));await b.po(i,()=>{this.eBt++}),this.eBt++,this.eBt===this.iBt&&(this.eBt=0,this.iBt=0,this.Sf.O4(b.TY.xY.MY.aBt,null,null))}}lBt(t,s){for(const i of s)0===i.r5()&&t.$X(i)}uBt(){return v}cBt(s){const i=this.Sf.CO(),t=i.VO(),e=t.e8(),h=e.OO(),r=h.i8(),n=e.H0t(),o=t.h8(h),a=i.r8(),l=a.h8();if(l.ndt(s),n)for(let t=0;t<s&&!l.p8();++t)i.l8(r),l.f8(t),h.u8(e,o),i.c8(r);else for(let t=0;t<s&&!l.p8();++t)l.f8(t),h.u8(e,o);return t.m8(),a.m8(),!1}*fBt(s){const i=this.Sf.CO(),t=i.VO(),e=t.e8(),h=e.OO(),r=h.i8(),n=e.H0t(),o=t.h8(h),a=i.r8(),l=a.h8();if(l.ndt(s),n)for(let t=0;t<s&&!l.p8();++t)i.l8(r),l.f8(t),yield*h.Cyt(e,o),i.c8(r);else for(let t=0;t<s&&!l.p8();++t)l.f8(t),yield*h.Cyt(e,o);return t.m8(),a.m8(),!1}dBt(){const s=this.Sf.CO(),t=s.VO(),i=t.e8(),e=i.OO(),h=e.i8(),r=i.H0t(),n=t.h8(e),o=s.r8(),a=o.h8();if(r)for(let t=0;!a.p8();++t)s.l8(h),a.f8(t),e.u8(i,n)||a.VW(),s.c8(h);else for(let t=0;!a.p8();++t)a.f8(t),e.u8(i,n)||a.VW();return t.m8(),o.m8(),!1}*pBt(){const s=this.Sf.CO(),t=s.VO(),i=t.e8(),e=i.OO(),h=e.i8(),r=i.H0t(),n=t.h8(e),o=s.r8(),a=o.h8();if(r)for(let t=0;!a.p8();++t){s.l8(h),a.f8(t);const l=yield*e.Cyt(i,n);l||a.VW(),s.c8(h)}else for(let t=0;!a.p8();++t){a.f8(t);const u=yield*e.Cyt(i,n);u||a.VW()}return t.m8(),o.m8(),!1}mBt(t,s,i){const e=this.Sf.CO(),h=e.VO(),r=h.e8(),n=r.OO(),o=n.i8(),a=r.H0t(),l=h.h8(n),u=e.r8(),c=u.h8();if(c.n8(t),c.ndt(i),i<s)if(a)for(let t=s;t>=i&&!c.p8();--t)e.l8(o),c.f8(t),n.u8(r,l),e.c8(o);else for(let t=s;t>=i&&!c.p8();--t)c.f8(t),n.u8(r,l);else if(a)for(let t=s;t<=i&&!c.p8();++t)e.l8(o),c.f8(t),n.u8(r,l),e.c8(o);else for(let t=s;t<=i&&!c.p8();++t)c.f8(t),n.u8(r,l);return h.m8(),u.m8(),!1}*gBt(t,s,i){const e=this.Sf.CO(),h=e.VO(),r=h.e8(),n=r.OO(),o=n.i8(),a=r.H0t(),l=h.h8(n),u=e.r8(),c=u.h8();if(c.n8(t),c.ndt(i),i<s)if(a)for(let t=s;t>=i&&!c.p8();--t)e.l8(o),c.f8(t),yield*n.Cyt(r,l),e.c8(o);else for(let t=s;t>=i&&!c.p8();--t)c.f8(t),yield*n.Cyt(r,l);else if(a)for(let t=s;t<=i&&!c.p8();++t)e.l8(o),c.f8(t),yield*n.Cyt(r,l),e.c8(o);else for(let t=s;t<=i&&!c.p8();++t)c.f8(t),yield*n.Cyt(r,l);return h.m8(),u.m8(),!1}yBt(i){const t=i.e5(),s=t.i5();if(0!==s.length){const e=this.Sf.CO(),h=e.VO(),r=h.e8(),n=r.OO(),o=n.i8(),a=r.H0t(),l=h.h8(n),u=e.r8(),c=u.h8(),f=i.n4(),d=v.h8();if(b.Xn(d,s),c.ndt(d.length),a)for(let t=0,s=d.length;t<s&&!c.p8();++t){e.l8(o);const p=d[t];i.e5().e0t(p),f&&p.Vmt(),c.f8(t),n.u8(r,l),e.c8(o)}else{t.t0t(!1);const m=t.s0t();b.Un(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.p8();++t){const g=d[t];m[0]=g,f&&g.Vmt(),c.f8(t),n.u8(r,l)}}h.m8(),u.m8(),b.Un(d),v.m8()}return!1}*wBt(i){const t=i.e5(),s=t.i5();if(0!==s.length){const e=this.Sf.CO(),h=e.VO(),r=h.e8(),n=r.OO(),o=n.i8(),a=r.H0t(),l=h.h8(n),u=e.r8(),c=u.h8(),f=i.n4(),d=v.h8();if(b.Xn(d,s),c.ndt(d.length),a)for(let t=0,s=d.length;t<s&&!c.p8();++t){e.l8(o);const p=d[t];i.e5().e0t(p),f&&p.Vmt(),c.f8(t),yield*n.Cyt(r,l),e.c8(o)}else{t.t0t(!1);const m=t.s0t();b.Un(m),m.push(null);for(let t=0,s=d.length;t<s&&!c.p8();++t){const g=d[t];m[0]=g,f&&g.Vmt(),c.f8(t),yield*n.Cyt(r,l)}}h.m8(),u.m8(),b.Un(d),v.m8()}return!1}SBt(i,t){const s=i.e5(),e=s.i5();if(0!==e.length){const h=this.Sf.CO(),r=h.VO(),n=h.s1t(),o=r.e8(),a=o.OO(),l=a.i8(),u=o.H0t(),c=r.h8(a),f=h.r8(),d=f.h8(),p=i.n4(),m=v.h8();b.Un(m),d.ndt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Hbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.p8();++t){h.l8(l);const g=m[t][0];i.e5().e0t(g),p&&g.Vmt(),d.f8(t),a.u8(o,c),h.c8(l)}else{s.t0t(!1);const y=s.s0t();b.Un(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.p8();++t){const w=m[t][0];y[0]=w,p&&w.Vmt(),d.f8(t),a.u8(o,c)}}r.m8(),f.m8(),b.Un(m),v.m8()}return!1}*bBt(i,t){const s=i.e5(),e=s.i5();if(0!==e.length){const h=this.Sf.CO(),r=h.VO(),n=h.s1t(),o=r.e8(),a=o.OO(),l=a.i8(),u=o.H0t(),c=r.h8(a),f=h.r8(),d=f.h8(),p=i.n4(),m=v.h8();b.Un(m),d.ndt(e.length);for(let t=0,s=e.length;t<s;++t)m.push([e[t],n.Hbt(1,t)]);if(m.sort(S),1===t&&m.reverse(),u)for(let t=0,s=m.length;t<s&&!d.p8();++t){h.l8(l);const g=m[t][0];i.e5().e0t(g),p&&g.Vmt(),d.f8(t),yield*a.Cyt(o,c),h.c8(l)}else{s.t0t(!1);const y=s.s0t();b.Un(y),y.push(null);for(let t=0,s=m.length;t<s&&!d.p8();++t){const w=m[t][0];y[0]=w,p&&w.Vmt(),d.f8(t),yield*a.Cyt(o,c)}}r.m8(),f.m8(),b.Un(m),v.m8()}return!1}vBt(t,s){let i=this.hBt.get(t);if(!i){if(!s)return null;i={MBt:null,xBt:new Map},this.hBt.set(t,i)}return i}TBt(t,s,i,e,h){s.RO().Uyt(i,s.LO()),e&&t.c8(h)}*GBt(t,s,i,e,h){yield*s.RO().zyt(i,s.LO()),e&&t.c8(h)}}}{const Na=self.Bs;Na.TY.xY.RIt=class extends Na.gr{constructor(t){super(),this.Dft=t,this.Sf=t.ck(),this.tTt=t.zL()}Nxt(){}Sr(){this.Dft=null,this.Sf=null,this.tTt=null}}}{const Ba=self.Bs;Ba.TY.xY.Instance=class extends Ba.gr{constructor(t,s){super(),this.Pi=t,this.Dft=this.Pi.YN(),this.nTt=this.Dft.bvt(),this.Sf=this.Pi.ck()}Sr(){this.Pi=null,this.Dft=null,this.nTt=null,this.Sf=null}}}{const x=self.Bs,Wa=[];x.TY.xY.MY={_Bt(){return!0},vY(){return!0},OY(){return!0},ENt(){return!0},ANt(){return!0},XO(){return this.Sf.XO()},Ggt(){const t=this.Sf.t1t();return!t.N0t()&&!t.k0t()},IBt(){let t=this.Sf.s1t(),s=t.Ebt(),i=s.get("TriggerOnce_lastTick");void 0===i&&(i=-1,s.set("TriggerOnce_lastTick",-1));const e=this.Sf.Utt();return s.set("TriggerOnce_lastTick",e),this.Sf.n4t()||i!==e-1},CBt(t){const s=this.Sf.s1t(),i=s.Ebt(),e=i.get("Every_lastTime")||0,h=this.Sf.ZO(),r=(i.has("Every_seconds")||i.set("Every_seconds",t),i.get("Every_seconds"));return e+r<=h?(i.set("Every_lastTime",e+r),h>=i.get("Every_lastTime")+.04&&i.set("Every_lastTime",h),i.set("Every_seconds",t),!0):(h<e-.1&&i.set("Every_lastTime",h),!1)},Vpt(t){const s=this.Sf.CO().M1t(t);return s&&s.Vpt()},akt(){return this.Sf.akt()},Ti(){return x.mi.Ti},fNt(){return!0},PBt(){return!0},EBt(){return!0},w4t(){return!0},x4t(){return!0},b4t(){return!0},v4t(){return!0},ABt(t){return!!this.Sf.LD(t)},RBt(t){switch(t){case 0:return"browser"===x.mi.Mi;case 1:return"iOS"===x.mi.gi;case 2:return"Android"===x.mi.gi;case 8:return"cordova"===x.mi.Mi;case 9:return"scirra-arcade"===this.Sf.$k();case 10:return"nwjs"===x.mi.Mi;case 13:return"windows-uwp"===this.Sf.$k();default:return!1}},FBt(t,s,i){const e=this.rBt(s,i);return e.test(t)},OBt(t,s,i){return x.compare(t,s,i)},DBt(t,s,i){return s<=t&&t<=i},kBt(t,s,i){return x.compare(t.Bet(),s,i)},LBt(t){return!!t.Bet()},NBt(t,s){const i=this.Sf.ZO();if(0!==t)return x.compare(i,t,s);{const e=this.Sf.s1t(),h=e.Ebt();return!h.get("CompareTime_executed")&&s<=i&&(h.set("CompareTime_executed",!0),!0)}},BBt(t){return isNaN(t)},L2t(t,s,i){return x.Rr(x.Ir(t),x.Ir(i))<=x.Ir(s)},N2t(t,s){return x.Or(x.Ir(t),x.Ir(s))},$vt(t,s,i){let e=x.Ir(t),h=x.Ir(s),r=x.Ir(i),n=!x.Or(r,h);return n?!(!x.Or(e,h)&&x.Or(e,r)):x.Or(e,h)&&!x.Or(e,r)},WBt(t,s){return"number"==typeof t?0===s:1===s},VBt(t){return!!t},Spt(t){return t.toLowerCase()===this.Sf.CO().xpt()},jBt(t,i,e,h){if(!t)return!1;let s=this.uBt(),r=s.h8(),n=t.e5(),o=(x.Xn(r,n.i5()),n.qft()&&x.Un(n.i0t()),this.Sf.s1t()),a=0;for(let t=0,s=r.length;t<s;++t){const u=r[t];r[a]=u,i=o.Hbt(1,t),h=o.Hbt(3,t),x.compare(i,e,h)?++a:n.Qft(u)}x.Hn(r,a),n.h0t(r);const l=!!r.length;return x.Un(r),s.m8(),t.Lyt(),l},HBt(t,s){if(!t)return!1;let i=this.uBt(),e=i.h8(),h=t.e5(),r=(x.Xn(e,h.i5()),h.qft()&&x.Un(h.i0t()),this.Sf.s1t()),n=0;for(let t=0,s=e.length;t<s;++t){const a=e[t];e[n]=a,r.Hbt(1,t)?++n:h.Qft(a)}x.Hn(e,n),h.h0t(e);const o=!!e.length;return x.Un(e),i.m8(),t.Lyt(),o},UBt(t,i,e){if(!t)return!1;const s=t.e5(),h=s.i5();if(0===h.length)return!1;let r=this.Sf.s1t(),n=null,o=0;for(let t=0,s=h.length;t<s;++t){const a=h[t];e=r.Hbt(2,t),(null===n||0===i&&e<o||1===i&&e>o)&&(o=e,n=a)}return s.l0t(n),t.Lyt(),!0},zBt(t,s){if(!t)return!1;const i=t.e5(),e=i.i5();if((s=Math.floor(s))>=e.length)return!1;const h=e[s];return i.l0t(h),t.Lyt(),!0},JBt(t){if(!t)return!1;const s=t.e5(),i=s.i5(),e=Math.floor(this.Sf.SD()*i.length);if(e>=i.length)return!1;const h=i[e];return s.l0t(h),t.Lyt(),!0},qBt(t){if(!t)return!1;if(!t.r5())return!1;const s=t.e5();return s.t0t(!0),t.Lyt(),!0},XBt(t,i,e){if(!t)return!1;const h=t.e5(),s=h.i5(),r=this.Sf.OO(),n=r.u0t(),o=this.Sf.s1t().Gbt();h.qft()?(x.Xn(Wa,s),h.Jft(),h.t0t(!1)):n?(x.Xn(Wa,h.i0t()),x.Un(h.i0t())):(x.Xn(Wa,h.s0t()),x.Un(h.s0t()));for(let t=0,s=Wa.length;t<s;++t){const a=Wa[t];x.xor(a.jD().BB(i,e),o)?h.Zft(a):h.Qft(a)}return t.Lyt(),x.xor(!!h.s0t().length,o)},YBt(s){if(!s)return!1;let i=s.oJ(),e=null,h=this.Sf.MCt();for(let t=h.length-1;0<=t;--t){const r=h[t];if(i){if(r.YN().Gvt(s)){e=r;break}}else if(r.YN()===s){e=r;break}}if(!e){const n=s.i5();n.length&&(e=n.at(-1))}if(!e)return!1;const t=s.e5();return t.l0t(e),s.Lyt(),!0},$Bt(t){return this.Sf.MMt()?this.fBt(t):this.cBt(t)},KBt(){return this.Sf.MMt()?this.pBt():this.dBt()},ZBt(t,s,i){return this.Sf.MMt()?this.gBt(t,s,i):this.mBt(t,s,i)},Id(t){return this.Sf.MMt()?this.wBt(t):this.yBt(t)},QBt(t,s,i){return this.Sf.MMt()?this.bBt(t,i):this.SBt(t,i)},t6t(t){return!!t&&t.nN()},s6t(t){return!!t&&t.dN()},i6t(t){return!!t&&t.uN()},e6t(t){return!!t&&!t.r5()},h6t(t,s,i){return!!t&&x.compare(100*t.sA(),s,i)},r6t(t){const s=this.Sf.bD();return!!s&&s.AX(t)},aBt(){return!0},n6t(){return 0<this.iBt},o6t(t,s){const i=this.Sf.PPt();return!!i&&!!s&&!!i.nut(t,s)}}}{let m=function(t,s){const i=t[0],e=s[0],h=i-e;if(0!=h)return h;const r=t[1],n=s[1];return r-n},g=function(t,s){return t[1]-s[1]};m,g;const Va=self.Bs,ja=[],Ha=[],Ua=Va.wr(Va.Rect),za=Va.wr(Va.$o),Ja=[];Va.TY.xY.frt={a6t(t,s){t.bht(s)},l6t(t,s){t.Se()&&"number"!=typeof s&&(s=parseFloat(s)),t.bht(t.Bet()+s)},u6t(t,s){t.Se()&&t.bht(t.Bet()-s)},c6t(t,s){t.bht(!!s)},f6t(t){t.bht(!t.Bet())},d6t(t){t.bht(t.Qdt())},p6t(t){this.Sf.CO().b1t(t)},m6t(t,s,i,e,h,r){if(t&&s){const n=this.Sf.o5(t,s,i,e,h,r);if(n){h&&s.a5(n);const o=this.Sf.CO(),a=(o.l5(!0),n.u5(),o.l5(!1),new Map);n.bPt(a,t,h);for(const[l,u]of a)l.e5().r0t(u)}}},g6t(t,s,i,e,h,r){if(t&&s){const n=this.Sf.yNt(t);n&&Va.TY.xY.frt.m6t.call(this,n,s,i,e,h,r)}},rJ(h,r,n,o,a,t,l,u,c,f,d){if(h){let s=this.Sf.WD(),i=s;if(t){const p=this.Sf.xD().m$(t);if(!p)return;i=p}let e=null;if(!("number"!=typeof l||0<=l)||(e=i.HD(l))){let t=null;if(!("number"!=typeof u||0<=u)||(t=s.HD(u))){Ua.set(r,n,o,a);const m=i.rJ(h,Ua,e,t,c,f,d);h.e5().h0t(m),h.Lyt()}}}},y6t(){const t=this.edt;t.Q0t()&&t.K0t().VW()},jpt(t,s){const i=this.Sf.CO().M1t(t);i&&(0===s?i.jpt(!1):1===s?i.jpt(!0):i.jpt(!i.Vpt()))},w6t(t){this.Sf.iD(t)},S6t(t,s){if(s<0&&(s=0),t){const i=t.e5(),e=i.i5();for(const h of e)h.iD(s)}},b6t(t){if(t){const s=t.e5(),i=s.i5();for(const e of i)e.d4()}},Nn(t){if(!(t<0))return this.Sf.CO().ipt().axt(t),!0},JO(t){return this.Sf.CO().ipt().lxt(t),!0},v6t(){const t=this.Sf.CO();return t.ipt().uxt(t.wpt()),!0},UO(t){this.Sf.CO().UO(t)},async VDt(t,s,i,e,h,r){const n=this.Sf.tL();n&&(this.YD(),await n.VDt(0===t?"image/png":"image/jpeg",s/100,i,e,h,r),await this.Sf.L4(Va.TY.xY.MY.PBt,null))},M6t(t,s){if(!(t<=0||s<=0)){this.Sf.fDt(t,s),this.Sf.WD().Gq();const i=this.Sf.tL();i&&("off"!==i.rDt()&&this.Sf.SNt(t,s),i._C(i.tj(),i.sj(),!0),this.Sf.YD())}},x6t(t){const s=this.Sf.tL();s&&"off"!==s.rDt()&&(s.SDt(0!==t?"high":"low"),s._C(s.tj(),s.sj(),!0))},tet(t){this.Sf.u4t(t)},T6t(){this.Sf.c4t()},G6t(t){this.Sf.f4t(t)},_6t(t){this.Sf.m2t(t)},I6t(t){},C6t(){for(const t of this.Sf.xD()._D())t.HY()},P6t(t){this.Sf.o4t(0!==t)},E6t(t,s){this.Sf.wD(1/t),this.Sf.mD(1/s)},A6t(t,s){this.Sf.mD(t),this.Sf.wD(s)},R6t(t){this.Sf.fD(["vsync","unlimited-tick","unlimited-frame"][t])},F6t(t,i){if(t){const s=t.e5(),e=s.i5(),h=ja,r=Ha,n=this.Sf.WD(),o=t.oJ(),a=t.nSt();for(let t=0,s=e.length;t<s;++t){const l=e[t],u=l.jD();if(u){let t;t=o?l.rnt(i+l.YN().rSt(a)):l.rnt(i),h.push([u.HD().KF(),u.UD()]),r.push([l,t])}}if(h.length){h.sort(m),r.sort(g);let i=!1;for(let t=0,s=h.length;t<s;++t){const c=r[t][0],f=n.zD(h[t][0]),d=h[t][1],p=f.JD();p[d]!==c&&((p[d]=c).jD().qD(f,!0),f.XD(c),i=!0)}i&&this.Sf.YD(),Va.Un(ja),Va.Un(Ha)}}},Nk(t,s){t=Math.floor(t),s=Math.floor(s),t<=0||s<=0||!Number.isFinite(t)||!Number.isFinite(s)||this.Sf.hO().Nk(t,s)},O6t(t){if(!this.Sf.ly()){const s=this.Sf.xD();s.CD()||s.PD(t)}},D6t(t){if(!this.Sf.ly()){const s=this.Sf.xD();if(!s.CD()){const i=s.m$(t);i&&s.PD(i)}}},k6t(t){if(!this.Sf.ly()){const s=this.Sf.xD();if(!s.CD()){const i=s._D(),e=i.indexOf(s.bD());if((!t||0!==e)&&(t||e!==i.length-1)){const h=i[e+(t?-1:1)];s.PD(h)}}}},L6t(){if(!this.Sf.ly()){const t=this.Sf.xD();t.CD()||(t.PD(t.bD()),this.Sf.CO()._1t())}},N6t(t,s){t&&t.hN(s)},B6t(t,s){t&&t.aN(s)},W6t(t,s){t&&t.cN(s)},V6t(t,s){t&&t.eA(s/100)},j6t(t,s){t&&t.pN(s)},H6t(t,s){t&&t.gN(s)},U6t(t,s){t&&t.v5(Va.Ir(+s))},z6t(t,s,i){t&&(t.RN(!0),t.M5(s),t.T5(i))},J6t(t){t&&t.RN(!1)},q6t(t,s,i){t&&t.WJ(s/100,i/100)},X6t(t,s){t&&t.Yv(+s)},Y6t(t,s){if(t){za.Aa(s),za.Gr();const i=t.AN();i.xa(za)||(i.fa(za),this.YD())}},$6t(t,s){t&&t.GN(s)},K6t(t,s){t&&t.Rv(s)},Z6t(t,s,i){if(t){const e=t.m5(),h=e.Jht(i);if(h){const r=1===s;h.Rmt()!==r&&(h.JRt(r),t.Q6(),this.Sf.YD())}}},Q6t(t,s,i,e){if(t){const h=t.m5(),r=h.Jht(s);if(r){i=Math.floor(i);const n=r.DT().LT(i);if(n){"color"===n?(za.Aa(e),e=za):"percent"===n&&(e/=100);const o=h.sW(r.KF(),i,e);o&&r.Rmt()&&this.Sf.YD()}}}},tWt(t,s){t&&t.CN(s)},sWt(t){this.Sf.WD().S5(+t)},iWt(t){this.Sf.WD().v5(Va.Ir(+t))},eWt(t,s){const i=this.Sf.WD(),e=i.m5(),h=e.Jht(s);if(h){const r=1===t;h.Rmt()!==r&&(h.JRt(r),i.Q6(),this.Sf.YD())}},hWt(t,s,i){const e=this.Sf.WD(),h=e.m5(),r=h.Jht(t);if(r){s=Math.floor(s);const n=r.DT().LT(s);if(n){"color"===n?(za.Aa(i),i=za):"percent"===n&&(i/=100);const o=h.sW(r.KF(),s,i);o&&r.Rmt()&&this.Sf.YD()}}},rWt(t,s){const i=this.Sf.WD();i.H5(t/100,s/100)},nWt(t){const s=this.Sf.WD();0===t?s.J5():s.q5()},oWt(t){const s=this.Sf.WD();s.M5(t)},aWt(t){const s=this.Sf.WD();s.T5(t)},lWt(t,s){const i=this.Sf.WD();i.M5(t),i.T5(s)},uWt(t){if(t){const s=t.fMt();if(s){const i=s.jD();if(i){const e=this.Sf.WD();e.M5(i.Hv()),e.T5(i.Jv())}}}},D5(t,s,i){const e=this.Sf.WD();try{e.D5(t,s,i)}catch(t){console.warn("[Construct] Cannot add layer: ",t)}},L5(t,s,i){if(t){const e=this.Sf.WD();try{e.L5(t,s,i)}catch(t){console.warn("[Construct] Cannot move layer: ",t)}}},B5(t){if(t){const s=this.Sf.WD();s.B5(t)}},V5(){this.Sf.WD().V5()},async cWt(t){const s=this.Sf.bD();if(s&&t&&!this.Sf.ly()){const i=t.oJ()?t.Pgt():[t];await this.oBt(s,i)}},async fWt(t){await Va.TY.xY.frt.cWt.call(this,this.Sf.yNt(t))},dWt(t){const s=this.Sf.bD();if(s&&t){const i=t.oJ()?t.Pgt():[t];this.lBt(s,i)}},pWt(t){Va.TY.xY.frt.dWt.call(this,this.Sf.yNt(t))},mWt(){const t=this.Sf.bD();if(t){const s=t.HX();this.lBt(t,s)}},async gWt(t){const s=this.Sf.bD();t&&s&&!this.Sf.ly()&&await this.oBt(s,t.WX())},async yWt(t){const s=this.Sf.bD(),i=this.Sf.xD().m$(t);i&&s&&!this.Sf.ly()&&await this.oBt(s,i.WX())},HO(t){const s=this.Hft.WO();if(s)switch(s.jO()){case 1:"number"==typeof t&&s.HO(t);break;case 2:"string"==typeof t&&s.HO(t);break;case 3:s.HO(t)}},wWt(t,s,i){const e=this.vBt(t.toLowerCase(),!0),h=e.xBt,r=s.toLowerCase(),n=(h.has(r)&&console.warn(`[Construct] Function map '${t}' string '${s}' already in map; overwriting entry`),Va.first(h.values())||e.MBt);if(n){const o=0!==n.NO(),a=0!==i.NO();if(o!=a)return void console.error(`[Construct] Function map '${t}' string '${s}' function return type not compatible with other functions in the map; entry ignored`)}h.set(r,i)},SWt(t,s){const i=this.vBt(t.toLowerCase(),!0),e=(i.MBt&&console.warn(`[Construct] Function map '${t}' already has a default; overwriting entry`),Va.first(i.xBt.values())||i.MBt);if(e){const h=0!==e.NO(),r=0!==s.NO();if(h!=r)return void console.error(`[Construct] Function map '${t}' default: function return type not compatible with other functions in the map; entry ignored`)}i.MBt=s},bWt(t,s,i){const e=this.Sf,h=e.MMt()?Ja:null,r=(i=Math.floor(i),this.vBt(t.toLowerCase(),!1));if(!r)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; call ignored`),h;let n=r.xBt.get(s.toLowerCase());if(!n){if(!r.MBt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; call ignored (consider setting a default)`),h;n=r.MBt,i=0}if(!n.rc())return h;if(0!==n.NO())return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has a return type so cannot be called`),h;const o=e.CO(),a=o.OO(),l=a.FO(),u=0<l.length,c=(u&&(n.LO()?o.l8(l):o.tpt(l)),[]),f=o.Xpt(a);if(f){const p=f.$pt();for(let t=i,s=p.length;t<s;++t)c.push(p[t].Bet())}const d=n.$pt();for(let t=c.length,s=d.length;t<s;++t)c.push(d[t].Qdt());return e.MMt()?this.GBt(o,n,c,u,l):this.TBt(o,n,c,u,l)}}}{const T=self.Bs;T.TY.xY.drt={vWt:function(t){return"string"==typeof t&&(t=parseInt(t,10),isNaN(t))&&(t=0),Math.floor(t)},float:function(t){return"string"==typeof t&&(t=parseFloat(t),isNaN(t))?0:t},D(t){return t.toString()},Jt(t){return"string"==typeof t?t.length:0},random(t,s){return void 0===s?this.Sf.SD()*t:this.Sf.SD()*(s-t)+t},Uwt(...t){const s=Math.floor(this.Sf.SD()*t.length);return t[s]},MWt(t,...s){return"number"!=typeof t&&(t=0),s[t=T.Gr(Math.floor(t),0,s.length-1)]},pi(){return Math.PI},xWt(){return 1/0},sqrt(t){return Math.sqrt(t)},abs(t){return Math.abs(t)},round(t){return Math.round(t)},TWt(t,s){s=Math.max(Math.floor(s),0);const i=Math.pow(10,s);return Math.round((t+Number.EPSILON)*i)/i},floor(t){return Math.floor(t)},ceil(t){return Math.ceil(t)},sign(t){return Math.sign(t)},sin(t){return Math.sin(T.Ir(t))},cos(t){return Math.cos(T.Ir(t))},tan(t){return Math.tan(T.Ir(t))},asin(t){return T.Cr(Math.asin(t))},acos(t){return T.Cr(Math.acos(t))},atan(t){return T.Cr(Math.atan(t))},exp(t){return Math.exp(t)},Zt(t){return Math.log(t)},log10(t){return Math.log10(t)},max(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e<t&&(e=t)}return e},min(...i){let e=i[0];"number"!=typeof e&&(e=0);for(let s=1,t=i.length;s<t;++s){let t=i[s];"number"==typeof t&&e>t&&(e=t)}return e},Gr(t,s,i){return T.Gr(t,s,i)},Et(t,s,i,e){return T.Pr(t,s,i,e)},angle(t,s,i,e){return T.Cr(T.Ar(t,s,i,e))},kt(t,s,i){return T.kt(t,s,i)},Br(t,s,i){return T.Br(t,s,i)},Vr(t,s,i,e){return T.Vr(t,s,i,e)},jr(t,s,i,e,h){return T.jr(t,s,i,e,h)},Hr(t,s,i){return T.Hr(t,s,i)},GWt(t,s){return T.Cr(T.Rr(T.Ir(t),T.Ir(s)))},_Wt(t,s,i){return T.Cr(T.Dr(T.Ir(t),T.Ir(s),i))},IWt(t,s,i){return T.Cr(T.Fr(T.Ir(t),T.Ir(s),T.Ir(i)))},CWt(t,s,i){return(t|=0)&~(1<<(s|=0))|(i=0!==i?1:0)<<s},PWt(t,s){return(t|=0)^1<<(0|s)},EWt(t,s){return(t|=0)&1<<(0|s)?1:0},AWt(){return"\n"},RWt(t){return"string"==typeof t?t.toUpperCase():""},FWt(t){return"string"==typeof t?t.toLowerCase():""},left(t,s){return"string"==typeof t?t.substr(0,s):""},mid(t,s,i){return"string"!=typeof t?"":i<0?t.substr(s):t.substr(s,i)},right(t,s){return"string"==typeof t?t.substr(Math.max(t.length-s,0)):""},trim(t){return"string"==typeof t?t.trim():""},OWt(t,s,i){if("string"!=typeof t||"string"!=typeof i)return"";let e=t.split(i);return(s=Math.floor(s))<0||s>=e.length?"":e[s]},DWt(t,s){return"string"==typeof t&&"string"==typeof s&&t.length?t.split(s).length:0},find(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(T.ge(s),"i")):-1},kWt(t,s){return"string"==typeof t&&"string"==typeof s?t.search(new RegExp(T.ge(s),"")):-1},replace(t,s,i){return"string"==typeof t&&"string"==typeof s&&"string"==typeof i?t.replace(new RegExp(T.ge(s),"gi"),i):"string"==typeof t?t:""},LWt(t,...i){let e=t;for(let t=0,s=i.length;t<s;++t)e=e.replaceAll(`{${t}}`,i[t].toString());return e},NWt(t,s,i){const e=this.rBt(s,i);return t?t.search(e):-1},BWt(t,s,i,e){const h=this.rBt(s,i);return t?t.replace(h,e):""},WWt(t,s,i){const e=this.nBt(t.toString(),s,i);return e?e.length:0},VWt(t,s,i,e){e=Math.floor(e);const h=this.nBt(t.toString(),s,i);return!h||e<0||e>=h.length?"":h[e]},jWt(t,s){let i=t<0?"-":"",e=s-(t=t<0?-t:t).toString().length;return(i+="0".repeat(Math.max(e,0)))+t.toString()},HWt(t){return encodeURIComponent(t)},UWt(t){return decodeURIComponent(t)},dt(){return this.Sf.qK()},timescale(){return this.Sf.sD()},zWt(){return(Date.now()-this.Sf.$Nt())/1e3},JWt(){return Date.now()},time(){return this.Sf.ZO()},tickcount(){return this.Sf.Utt()},qWt(){return this.Sf.QNt()},fps(){return this.Sf.eD()},XWt(){return this.Sf.oD()},YWt(){return this.Sf.lD()},$Wt(){return this.Sf.tL().aL()},KWt(){return this.Sf.tL().uL()},ZWt(){return this.Sf.pO()},QWt(){return this.Sf.gO()},tVt(){return this.Sf.pO()},sVt(){return this.Sf.gO()},iVt(){return this.Sf.WD().x5()},eVt(){return this.Sf.WD().G5()},hVt(){return this.Sf.WD().uf()},rVt(){return this.Sf.WD().b5()},nVt(){return T.Cr(this.Sf.WD().GetAngle())},oVt(){return this.Sf.WD().Em()},aVt(){return this.Sf.WD().Wm()},lVt(){return 100*this.Sf.WD().FJ()},uVt(){return 100*this.Sf.WD().OJ()},cVt(t){const s=this.Sf.WD().HD(t);return s?s.RJ().Al():0},fVt(t){const s=this.Sf.WD().HD(t);return s?s.RJ().Rl():0},dVt(t){const s=this.Sf.WD().HD(t);return s?s.RJ().Fl():0},pVt(t){const s=this.Sf.WD().HD(t);return s?s.RJ().Ol():0},mVt(t){const s=this.Sf.WD().HD(t);return s?s.RJ().width():0},gVt(t){const s=this.Sf.WD().HD(t);return s?s.RJ().height():0},yVt(t){const s=this.Sf.WD().HD(t);if(s){const i=s.RJ();return(i.Al()+i.Fl())/2}return 0},wVt(t){const s=this.Sf.WD().HD(t);if(s){const i=s.RJ();return(i.Rl()+i.Ol())/2}return 0},SVt(t,s,i){const e=this.Sf.WD().HD(t);return e?e.kN(s,i)[0]:0},bVt(t,s,i){const e=this.Sf.WD().HD(t);return e?e.kN(s,i)[1]:0},vVt(t,s,i){const e=this.Sf.WD().HD(t);return e?e.WN(s,i)[0]:0},MVt(t,s,i){const e=this.Sf.WD().HD(t);return e?e.WN(s,i)[1]:0},xVt(t,s,i,e){const h=this.Sf.WD(),r=h.HD(t),n=h.HD(s);if(!r||!n||r===n)return i;const[o,a]=r.WN(i,e);return n.kN(o,a)[0]},TVt(t,s,i,e){const h=this.Sf.WD(),r=h.HD(t),n=h.HD(s);if(!r||!n||r===n)return e;const[o,a]=r.WN(i,e);return n.kN(o,a)[1]},GVt(t){const s=this.Sf.WD().HD(t);return s?s.mN():0},_Vt(t){const s=this.Sf.WD().HD(t);return s?T.Cr(s.wN()):0},IVt(t){const s=this.Sf.WD().HD(t);return s?100*s.sA():0},CVt(t){const s=this.Sf.WD().HD(t);return s?s.yN():0},PVt(t){const s=this.Sf.WD().HD(t);return s?s.x5():0},EVt(t){const s=this.Sf.WD().HD(t);return s?s.G5():0},AVt(t){const s=this.Sf.WD().HD(t);return s?100*s.bN():0},RVt(t){const s=this.Sf.WD().HD(t);return s?100*s.MN():0},FVt(t){const s=this.Sf.WD().HD(t);return s?s.Xv():0},OVt(t){const s=this.Sf.WD().HD(t);return s?s.KF():-1},DVt(){const t=this.Sf.tL();return t?t.HDt():""},kVt(t){const s=this.edt;if(!s.Q0t())return 0;if(t){const i=s.sdt(t);return i?i.KF():0}return s.K0t().KF()},LVt(){return this.Sf.d4t()},NVt(t,s,...i){const e=this.vBt(t.toLowerCase(),!1);if(!e)return console.warn(`[Construct] Call mapped function: map name '${t}' not found; returning 0`),0;let h=e.xBt.get(s.toLowerCase());if(!h){if(!e.MBt)return console.warn(`[Construct] Call mapped function: no function associated with map '${t}' string '${s}'; returning 0 (consider setting a default)`),0;h=e.MBt}const r=h.NO(),n=h.EO();if(0===r)return console.warn(`[Construct] Call mapped function: map '${t}' string '${s}' has no return type so cannot be called from an expression; returning 0`),0;if(!h.rc())return n;const o=this.Sf,a=o.CO(),l=a.OO(),u=l.FO(),c=0<u.length,f=(c&&(h.LO()?a.l8(u):a.tpt(u)),h.$pt());for(let t=i.length,s=f.length;t<s;++t)i.push(f[t].Qdt());const d=h.RO(),p=d.kO(d.FO(),h.LO(),r,n,...i);return c&&a.c8(u),p},BVt(){return this.Sf.sO().xU()},WVt(){return 0===this.iBt?1:this.eBt/this.iBt},renderer(){return this.Sf._Dt()?"webgpu":"webgl"},VVt(){return this.Sf._Dt()?this.Sf._Dt().GetAdapterInfoString():this.Sf.GDt().uR()},jVt(){let t=this.Sf.uv().kb();return Math.round(100*t/1048576)/100},HVt(t,s,i){return T.$r(t,s,i)},UVt(t,s,i){return T.Zr(t/100,s/100,i/100)},zVt(t,s,i,e){return T.Kr(t/100,s/100,i/100,e/100)},JVt(t,s,i){return T.Zr(t/255,s/255,i/255)},qVt(t,s,i,e){return T.Kr(t/255,s/255,i/255,e/255)},XVt(){return this.Sf.aO()},YVt(){return this.Sf.uO()},$Vt(){return this.Sf.OO().PX().uf()},KVt(){return this.Sf.OO().qgt()}}}{const qa=self.Bs;qa.TY.Yht=class extends qa.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{const Xa=self.Bs,Ya=self.$s,$a=[],Ka=(Xa.TY.Yht.RIt=class extends Xa.Qxt{constructor(t){super(t),this.GIt=t.uCt()}Sr(){Xa.Un(this.GIt),super.Sr()}Nxt(){for(const t of this.GIt)t.__t(this.Sf)}zX(s){const i={jM:this.Sf.yO()};return Promise.all(this.GIt.map(t=>t.I_t(s,i)))}KX(){for(const t of this.GIt)t.C_t()}XX(){this.ZVt()}ZVt(){for(const t of this.Dft.s5())t.O6().QVt()}kbt(t){Xa.TY.Yht.X2t(this,t)}vvt(t){$a.push({eTt:null,tjt:!1,instances:[]})}sjt(t,s,i){const e=$a.at(-1);e.eTt=t,e.tjt=i,e.instances.push(s)}Mvt(t){const s=$a.pop(),i=s.eTt,e=s.tjt;if(i){const h=new Map;for(const r of s.instances)r.bPt(h,i,e);for(const[n,o]of h)n.e5().r0t(o)}}ijt(t){const s=this.YN().mCt(t),i=this.ck(),e=s.P_t(0);return e.wW().X8(i.uv(),{jM:i.yO()}).then(()=>this.ZVt()),s}ejt(t){for(const s of this.Dft.s5())s.O6().hjt(t);this.YN().gCt(t)}rjt(t,s){const i=this.Dft.dCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);let e=i.F_t(s);e<0&&(e+=i.uW()+1);const h=Xa.x_t.G_t(this.ck()),r=(i.E_t(h,e),this.ck());h.wW().X8(r.uv(),{jM:r.yO()}).then(()=>this.ZVt());for(const n of this.Dft.s5())n.O6().njt();return h}ojt(t,s){const i=this.Dft.dCt(t);if(!i)throw new Error(`cannot find animation name '${t}'`);if(1===i.uW())throw new Error(`cannot remove last frame from animation '${t}'`);let e=i.F_t(s);e<0&&(e+=i.uW()),i.A_t(e);for(const h of this.Dft.s5())h.O6().njt()}Bxt(){return self.ajt}},new WeakMap);self.ajt=class extends self.HL{constructor(t){super(t),Ka.set(this,t.bvt())}ljt(t){Ya.Ae(t);const s=Ka.get(this).YN().dCt(t);return s?s.O_t():null}ujt(){return Ka.get(this).YN().fCt().map(t=>t.O_t())}cjt(t){return Ya.Ae(t),Ka.get(this).ijt(t).O_t()}fjt(t){Ya.Ae(t),Ka.get(this).ejt(t)}djt(t,s){if(Ya.Ae(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");return Ka.get(this).rjt(t,s).dW()}pjt(t,s){if(Ya.Ae(t),"number"!=typeof s&&"string"!=typeof s)throw new TypeError("invalid insert location");Ka.get(this).ojt(t,s)}}}{const G=self.Bs,Za=self.$s,Qa=G.wr(G.Rect),tl=G.wr(G.ou),sl=G.wr(G.nl),il=(G.TY.Yht.Instance=class extends G.RTt{constructor(t,s){super(t);let i=!0,e="",h=0,r=!0;s&&(i=!!s[0],e=s[1],h=s[2],r=s[3]),this.mjt=this.Dft.dCt(e)||this.Dft.uCt()[0],this.gjt=G.Gr(h,0,this.mjt.uW()-1),this.yjt=this.mjt.P_t(this.gjt);const n=this.yjt.wW(),o=(this.wjt=n.mx(),this.Sjt=n.eP(),this.bjt=n.UTt(),this.kTt(),t.wPt(2,!0),t.wPt(1,0<=this.mjt.eW()),this.vjt=Math.abs(this.mjt.eW()),this.Mjt=this.mjt.oW(),this.xjt=G.wr(G.O0),this.Tjt=0,this.Gjt=0,this._jt="",this.Ijt=-1,this.Cjt="",this.Pjt=0,this.jD());this.Ejt=o.vB(),o.hN(i),o.NB(r),o.Pnt(this.yjt.vW()),o.Ant(this.yjt.xW()),o.uRt(this.yjt.OW()),o.cB(),1===this.Dft.cCt()&&1===this.Dft.uCt()[0].uW()||0===this.vjt||this.xTt()}Sr(){this.mjt=null,this.yjt=null,this.wjt=null,this.xjt=null,super.Sr()}WTt(){return this.yjt.wW()}Oit(){return!0}XU(){this.wjt=null}BTt(){this.QVt()}AM(t){const s=this.wjt;if(null!==s){t.nA(s);const i=this.jD();i._6()?this.Ajt(i,t):this.Rjt(i,t)}}Rjt(t,s){let i=this.Ejt;this.Sf.SO()&&(i=t.eRt(i)),s.gA(i,this.bjt)}Ajt(s,t){const i=s.vRt();if(s.xRt()){s.tRt(Qa,tl,!1);let t=tl;this.Sf.SO()&&(t=s.eRt(t)),i.EM(s.I6(),t,this.bjt),s.MRt(!1)}i.AM(t)}Fjt(){return this.xjt.ni()}Ojt(){return this.Pi.SPt(2)}Djt(t){this.Pi.wPt(2,t)}kjt(){return this.Pi.SPt(1)}Ljt(t){this.Pi.wPt(1,t)}Njt(){return this.Pi.SPt(4)}Bjt(t){this.Pi.wPt(4,t)}YK(){this.Cjt&&this.Wjt(),0<=this.Ijt&&this.Vjt();const t=this.vjt;if(this.Ojt()&&0!==t){const s=this.Sf.YO(this.Pi),i=(this.xjt.xc(s),this.Fjt()),e=this.yjt,h=e.SW()/t;if(!(i<this.Tjt+h)){const r=this.mjt,n=this.Mjt,o=r.uW(),a=r.rW(),l=r.hW(),u=r.lW(),c=(this.kjt()?this.gjt++:this.gjt--,this.Tjt+=h,this.gjt>=o&&(u?(this.Ljt(!1),this.gjt=o-2):!l&&(this.Gjt++,this.Gjt>=a)?this.jjt(!1):this.gjt=n),this.gjt<0&&(u?(this.gjt=1,this.Ljt(!0),l||(this.Gjt++,this.Gjt>=a&&this.jjt(!0))):!l&&(this.Gjt++,this.Gjt>=a)?this.jjt(!0):this.gjt=n),this.gjt=G.Gr(this.gjt,0,o-1),r.P_t(this.gjt));i>this.Tjt+c.SW()/t&&(this.Tjt=i),this.Hjt(e,c)}}else this.oTt()}jjt(t){this.gjt=t?0:this.mjt.uW()-1,this.Djt(!1),this._jt=this.mjt.uf(),this.Bjt(!0),this.iTt("animationend",!1,{animationName:this._jt}),this.O4(G.TY.Yht.MY.Ujt),this.O4(G.TY.Yht.MY.zjt),this.Bjt(!1),this.Gjt=0}Hjt(i,e,t){if(i!==e){const s=this.jD(),h=i.wW(),r=e.wW(),n=h.Em(),o=h.Wm(),a=r.Em(),l=r.Wm(),u=(t&&t.onFrameChange?t.onFrameChange(s,n,o,a,l):(n!==a&&s.Lm(s.Em()*(a/n)),o!==l&&s.Am(s.Wm()*(l/o))),s.Pnt(e.vW()),s.Ant(e.xW()),s.uRt(e.OW()),s.cB(),this.yjt=e,this.wjt=r.mx(),this.Sjt=r.eP(),this.bjt=r.UTt(),this.uV().Hht());for(let t=0,s=u.length;t<s;++t)u[t].EGt(i,e);this.iTt("framechange",!1,{animationName:this.mjt.uf(),Jjt:this.gjt}),this.O4(G.TY.Yht.MY.qjt),this.Sf.YD()}}Xjt(t){this.Djt(!0),this.Tjt=this.Fjt(),1===t&&0!==this.gjt&&(this.Ijt=0,this.Njt()||this.Vjt()),this.xTt()}Yjt(t,s,i){this.Cjt=t,this.Pjt=s,this.xTt(),!i&&this.Njt()||this.Wjt()}$jt(){return this.mjt}Kjt(){return this.Cjt||this.mjt.uf()}hjt(t){G.Gh(t,this.Kjt())&&this.Yjt(this.Dft.yCt().uf(),1,!0)}Zjt(t){if("string"==typeof t)if(String(Number(t))===t)t=Number(t);else{const s=this.Dft.dCt(this.Kjt());if(!s)return;if(-1===(t=s.R_t(t)))return}isFinite(t)&&(this.Ijt=t,this.Njt()||this.Vjt())}njt(){if(!this.Cjt&&-1===this.Ijt){const t=this.yjt,s=this.mjt.P_t(G.Gr(this.gjt,0,this.mjt.uW()-1));t!==s&&this.Hjt(t,s),1<this.mjt.uW()&&0<this.vjt&&this.xTt()}}Qjt(){return this.gjt}t8t(){return this.yjt.NW()}s8t(t){this.vjt=Math.abs(t),this.Ljt(0<=t),0<this.vjt&&this.xTt()}i8t(){return this.kjt()?this.vjt:-this.vjt}e8t(t){"string"==typeof t&&-1===(t=this.mjt.R_t(t))||(t=G.Gr(Math.floor(t),0,this.mjt.uW()-1),this.Mjt=t)}h8t(){return this.Mjt}Wjt(t){const s=this.yjt,i=this.Dft.dCt(this.Cjt);if(this.Cjt="",i&&(i!==this.mjt||!this.Ojt())){this.mjt=i,this.Ljt(0<=i.eW()),this.vjt=Math.abs(i.eW()),this.Mjt=i.oW(),this.gjt=G.Gr(this.gjt,0,this.mjt.uW()-1),1===this.Pjt&&(this.gjt=0),this.Djt(!0),this.Tjt=this.Fjt();const e=this.mjt.P_t(this.gjt);this.Hjt(s,e,t)}}Vjt(t){const s=this.yjt,i=this.gjt;if(this.gjt=G.Gr(Math.floor(this.Ijt),0,this.mjt.uW()-1),this.Ijt=-1,t||i!==this.gjt){const e=this.mjt.P_t(this.gjt);this.Hjt(s,e),this.Tjt=this.Fjt()}}QVt(){const t=this.yjt.wW();this.wjt=t.mx(),this.Sjt=t.eP(),this.bjt=t.UTt(),this.jD().MRt(!0)}mx(){return this.wjt}eP(){return this.Sjt}UTt(){return this.bjt}_W(){return this.yjt._W()}Dvt(t){let s=this.yjt,i=this.jD(),e=null;if("string"==typeof t)e=s.RW(t);else{if("number"!=typeof t)throw new TypeError("expected string or number");e=s.AW(t-1)}let h=i.yB();if(!e)return[i.Hv(),i.Jv(),h];if(sl._(e.z_t()),i._6()){const[r,n,o]=i.I6().LM(sl.cl(),sl.dl());sl.set(r,n),h+=o}return sl.offset(-s.vW(),-s.xW()),sl.scale(i.Em(),i.Wm()),sl.rotate(i.GetAngle()),sl.offset(i.Hv(),i.Jv()),[sl.cl(),sl.dl(),h]}r8t(){return this.jD().mRt().qu()}n8t(t){t=Math.floor(t);const s=this.jD(),i=s.mRt(),e=i.qu();if((t=t===e?0:t)<0||e<=t)return[0,0];const h=i.Ju();return[h[2*t+0]+s.Hv(),h[2*t+1]+s.Jv()]}ITt(){const s=G.TY.Yht.frt,t="plugins.sprite.debugger.animation-properties";return[{title:t+".title",properties:[{name:t+".current-animation",value:this.mjt.uf(),o8t:t=>this.PTt(s.a8t,t,0)},{name:t+".current-frame",value:this.gjt,o8t:t=>this.PTt(s.l8t,t)},{name:t+".is-playing",value:this.Ojt(),o8t:t=>t?this.PTt(s.u8t,0):this.PTt(s.c8t)},{name:t+".speed",value:this.vjt,o8t:t=>this.PTt(s.f8t,t)},{name:t+".repeats",value:this.Gjt,o8t:t=>this.Gjt=t}]}]}iM(){const t={a:this.mjt.mJ()},s=(0!==this.Tjt&&(t.fs=this.Tjt),this.Fjt()),i=(0!==s&&(t.at=s),0!==this.gjt&&(t.f=this.gjt),0!==this.vjt&&(t.cas=this.vjt),1!==this.Gjt&&(t.ar=this.Gjt),0!==this.Mjt&&(t.rt=this.Mjt),this.Ojt()||(t.ap=this.Ojt()),this.kjt()||(t.af=this.kjt()),this.jD());return i.LB()&&(t.ce=i.LB()),t}eM(t){const s=this.YN().pCt(t.a),i=(s&&(this.mjt=s),this.Tjt=t.hasOwnProperty("fs")?t.fs:0,this.xjt.Set(t.hasOwnProperty("at")?t.at:0),t.hasOwnProperty("f")?t.f:0),e=(this.gjt=G.Gr(i,0,this.mjt.uW()-1),this.vjt=t.hasOwnProperty("cas")?t.cas:0,this.Gjt=t.hasOwnProperty("ar")?t.ar:1,t.hasOwnProperty("rt")?t.rt:0),h=(this.Mjt=G.Gr(e,0,this.mjt.uW()-1),this.Djt(!t.hasOwnProperty("ap")||!!t.ap),this.Ljt(!t.hasOwnProperty("af")||!!t.af),this.mjt.P_t(this.gjt)),r=(this.yjt=h,this.QVt(),this.jD());r.Pnt(h.vW()),r.Ant(h.xW()),r.uRt(h.OW()),r.NB(!!t.ce),this.Ojt()&&this.xTt()}$rt(t){const s=this.jD();switch(t){case 3:return s.LB();case 2:return G.Gr(this.gjt,0,this.mjt.uW()-1);case 1:return this.mjt.uf()}}int(t,s,i){const e=this.jD();switch(t){case 3:e.NB(!!s);break;case 2:{this.Djt(!1);const h=this.mjt.uW()-1,r=s=G.Gr(s,0,h),n=this.mjt.P_t(this.gjt),o=this.mjt.P_t(r);this.Hjt(n,o,i),this.gjt=G.Gr(r,0,h);break}case 1:{this.Cjt=s,this.Wjt(i);const a=this.mjt.uW();1<a&&0<this.mjt.eW()?this.xTt():this.oTt();break}}}Bxt(){return self.d8t}},new WeakMap),el=new Map([["current-frame",0],["beginning",1]]);self.d8t=class extends self.P6{constructor(){super(),il.set(this,self.qN.ZN().O6())}GW(){return il.get(this)._W()}IW(t){return this.PW(t)[0]}EW(t){return this.PW(t)[1]}p8t(t){return this.PW(t)[2]}PW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return il.get(this).Dvt(t)}FW(){return il.get(this).r8t()}DW(t){return Za.Ie(t),il.get(this).n8t(t)[0]}LW(t){return Za.Ie(t),il.get(this).n8t(t)[1]}kW(t){return Za.Ie(t),il.get(this).n8t(t)}m8t(){il.get(this).Djt(!1)}g8t(t="current-frame"){Za.Ae(t);const s=el.get(t);if(void 0===s)throw new Error("invalid mode");il.get(this).Xjt(s)}y8t(t,s="beginning"){Za.Ae(t),Za.Ae(s);const i=el.get(s);if(void 0===i)throw new Error("invalid mode");const e=il.get(this);if(!e.YN().dCt(t))throw new Error(`animation name "${t}" does not exist`);e.Yjt(t,i)}ljt(t){Za.Ae(t);const s=il.get(this).YN().dCt(t);return s?s.O_t():null}get animation(){return il.get(this).$jt().O_t()}get animationName(){return il.get(this).Kjt()}set Jjt(t){Za.Ie(t),il.get(this).Zjt(t)}get Jjt(){return il.get(this).Qjt()}set w8t(t){Za.Ae(t),il.get(this).Zjt(t)}get w8t(){return il.get(this).t8t()}set S8t(t){Za.Ie(t),il.get(this).s8t(t)}get S8t(){return il.get(this).i8t()}set b8t(t){Za.Ie(t),il.get(this).e8t(t)}get b8t(){return il.get(this).h8t()}get imageWidth(){return il.get(this).WTt().Em()}get imageHeight(){return il.get(this).WTt().Wm()}v8t(){const t=il.get(this).WTt();return[t.Em(),t.Wm()]}async M8t(t){Za.uh(t,Blob);const s=il.get(this),i=s.ck(),e=s.WTt(),h=G.wr(G.YGt);if(h.l_t(i,t),await h.X8(i.uv(),{jM:i.yO()}),s.br())h.Sr();else{e.u_t(h);const r=s.bvt();r.ZVt(),r.YN().Qf().dispatchEvent(new G.Event("animationframeimagechange")),i.YD()}}x8t(t,s){Za.Ae(s),il.get(this).jD().ZAt(!!t,s)}}}{const hl=self.Bs;hl.TY.Yht.MY={T8t(t){return hl.Gh(this.Kjt(),t)},G8t(t,s){return hl.compare(this.gjt,t,s)},_8t(t,s){if("string"!=typeof s)return!1;const i=this.yjt.NW();return hl.compare(i.toLowerCase(),t,s.toLowerCase())},I8t(t,s){return hl.compare(this.i8t(),t,s)},zjt(t){return hl.Gh(this._jt,t)},Ujt(){return!0},qjt(){return!0},C8t(){return this.jD().Em()<0},P8t(){return this.jD().Wm()<0},E8t(){return!0},A8t(){return!0},LB(){return this.jD().LB()}}}{const rl=self.Bs;rl.TY.Yht.frt={R8t(t,s,i,e,h){if(t&&s){const[r,n]=this.Dvt(i),o=this.Sf.o5(t,s,r,n,e,h);if(o){if(e&&s.a5(o),t.zL()._L()){const l=o.jD();l.v5(this.jD().GetAngle()),l.cB()}const a=this.Sf.CO();a.l5(!0),o.u5(),a.l5(!1),t!==this.Sf.e1t().YN()&&this.nTt.sjt(t,o,e)}}},c8t(){this.Djt(!1)},u8t(t){this.Xjt(t)},a8t(t,s){this.Yjt(t,s)},l8t(t){this.Zjt(t)},f8t(t){this.s8t(t)},F8t(t){this.e8t(t)},O8t(s,t){try{0===s?this.bvt().ijt(t):this.bvt().ejt(t)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation: `,t)}},D8t(s,t,i){try{0===s?this.bvt().rjt(t,i):this.bvt().ojt(t,i)}catch(t){console.error(`[Construct] Error ${0===s?"adding":"removing"} animation frame: `,t)}},k8t(t){const s=this.jD(),i=s.Em(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Lm(e),s.cB())},L8t(t){const s=this.jD(),i=s.Wm(),e=Math.abs(i)*(0===t?-1:1);i!==e&&(s.Am(e),s.cB())},S5(t){const s=this.yjt,i=s.wW(),e=this.jD(),h=e.Em()<0?-1:1,r=e.Wm()<0?-1:1,n=i.Em()*t*h,o=i.Wm()*t*r;e.Em()===n&&e.Wm()===o||(e._C(n,o),e.cB())},async N8t(t,s,i){const e=this.yjt,h=e.wW(),r=this.jD(),n=this.Sf,o=this.nTt;if(h.gU()===t)0===s&&(r._C(h.Em(),h.Wm()),r.cB()),this.O4(rl.TY.Yht.MY.E8t);else{const a=rl.wr(rl.YGt);try{if(await a.a_t(n,t),!a.jU())throw new Error("image failed to load");if(this.br())return void a.Sr();await a.X8(n.uv(),{jM:n.yO()})}catch(t){return console.error("Load image from URL failed: ",t),void(this.br()||this.O4(rl.TY.Yht.MY.A8t))}this.br()?a.Sr():(h.u_t(a),o.ZVt(),o.YN().Qf().dispatchEvent(new rl.Event("animationframeimagechange")),n.YD(),0===s&&(r._C(h.Em(),h.Wm()),r.cB()),await this.L4(rl.TY.Yht.MY.E8t))}},B8t(t){this.jD().NB(t)},ZAt(t,s){this.jD().ZAt(0===t,s)},W8t(t){this.jD().Rv(t),this.Sf.YD()}}}{const nl=self.Bs;nl.TY.Yht.drt={V8t(){return this.Qjt()},j8t(){return this.t8t()},H8t(){return this.mjt.uW()},U8t(){return this.mjt.uf()},z8t(){return this.i8t()},J8t(){return this.mjt.eW()},q8t(t){return this.Dvt(t)[0]},X8t(t){return this.Dvt(t)[1]},Y8t(t){return this.Dvt(t)[2]},$8t(){return this._W()},K8t(){return this.WTt().Em()},Z8t(){return this.WTt().Wm()},Q8t(t){return this.n8t(t)[0]},tHt(t){return this.n8t(t)[1]},sHt(){return this.r8t()}}}{const ol=self.Bs;ol.TY.iHt=class extends ol.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{const al=self.Bs;al.TY.iHt.RIt=class extends al.Qxt{constructor(t){super(t),this.GIt=t.uCt()}Sr(){al.Un(this.GIt),super.Sr()}Nxt(){for(const t of this.GIt)t.__t(this.Sf)}zX(s){const i={jM:this.Sf.yO()};return Promise.all(this.GIt.map(t=>t.I_t(s,i)))}KX(){for(const t of this.GIt)t.C_t()}kbt(t){al.TY.iHt.X2t(this,t)}}}{let A=function(t,s){return t.eHt===s.eHt?s.hHt-t.hHt:s.eHt-t.eHt},R=function(t,s,i,e,h,r){const n=e-t,o=h-s,a=r-i;return n*n+o*o+a*a},d=function(t,s,i,e,h,r,n){return Math.hypot(e-t,h-s,(r-i)*n)},p=function(t,s,i,e,h,r,n){return[m.kt(t,e,n),m.kt(s,h,n),m.kt(i,r,n)]},E=function(t,s,i,e,h,r,n,o,a,l,u){const[c,f,d]=p(t,s,i,e,h,r,l);return p(c,f,d,c+(n-t),f+(o-s),d+(a-i),u)},m=(A,R,d,p,E,self.Bs),i=self.$s,F=[],O=0;for(let t=0;t<6;t++)F.push({i:0,rHt:NaN,nHt:NaN,oHt:NaN,trx:NaN,aHt:NaN,lHt:NaN,uHt:NaN,cHt:NaN,fHt:NaN,dHt:NaN,pHt:NaN,mHt:NaN,shape:0,eHt:NaN,hHt:NaN,enable:!1});const ll=m.wr(m.ou),ul=(m.wr(m.nl),m.TY.iHt.Instance=class extends m.RTt{constructor(t,s){super(t),this.gHt=0,this.yHt=15;let i=!0;this.wHt=!1,this.SHt=!0,this.bHt=!0,this.vHt=!0,this.MHt=!0,this.xHt=!0,this.THt=this.Dft.uCt()[0],this.GHt=[!1,!0,!0,!0,!0,!0],this._Ht=[0,1,2,3,4,5],this.IHt=8,this.CHt=[null,null,null,null,null,null],s&&(this.gHt=s[0],this.yHt=s[1],i=!!s[2],this.GHt[0]=!!s[3],this.GHt[1]=!!s[4],this.GHt[2]=!!s[5],this.GHt[3]=!!s[6],this.GHt[4]=!!s[7],this.GHt[5]=!!s[8],this.IHt=s[9],this.PHt(0,this.Sf.Yj(s[10])),this.PHt(1,this.Sf.Yj(s[11])),this.PHt(2,this.Sf.Yj(s[12])),this.PHt(3,this.Sf.Yj(s[13])),this.PHt(4,this.Sf.Yj(s[14])),this.PHt(5,this.Sf.Yj(s[15])));const e=this.jD(),h=(e.wAt(this.yHt),this.Ejt=e.vB(),e.hN(i),this.EHt());e.Pnt(h.vW()),e.Ant(h.xW()),e.cB()}Sr(){super.Sr()}EHt(){return this.THt.P_t(0)}WTt(){return this.EHt().wW()}Oit(){return!0}AHt(t,s,i,e,h,r,n,o,a,l,u,c,f,d){const p=F[t];p.i=t,p.rHt=s,p.nHt=i,p.oHt=e,p.trx=h,p.aHt=r,p.lHt=n,p.uHt=o,p.cHt=a,p.fHt=l,p.dHt=u,p.pHt=c,p.mHt=f,p.shape=d,p.enable=!0,O++}AM(c){let f=this.jD(),t=this.GHt,d=t[0],p=t[1],m=t[2],g=t[3],y=t[4],w=t[5];if(f.aRt()?(p=!1,m=!1,g=!1,y=!1,w=!1):f.lRt()&&(d=!1),d||p||m||g||y||w){let t=this.Ejt,s=(t=this.Sf.SO()?f.eRt(t):t).cn(),i=t.fn(),e=t.dn(),h=t.pn(),r=t.mn(),n=t.gn(),o=t.yn(),a=t.wn(),l=this.gHt,u=this.yHt;for(let t=O=0;t<6;t++)F[t].enable=!1;if(d&&this.AHt(0,s,i,0,e,h,0,r,n,0,o,a,0,0),0===l)m&&this.AHt(2,s,i,u,o,a,u,o,a,0,s,i,0,0),g&&this.AHt(3,r,n,u,e,h,u,e,h,0,r,n,0,0),y&&this.AHt(4,e,h,u,s,i,u,s,i,0,e,h,0,0),w&&this.AHt(5,o,a,u,r,n,u,r,n,0,o,a,0,0),p&&this.AHt(1,s,i,u,e,h,u,r,n,u,o,a,u,0);else if(1===l){const b=(s+o)/2,v=(i+a)/2,M=(e+r)/2,x=(h+n)/2;m&&this.AHt(2,b,v,u,b,v,u,o,a,0,s,i,0,4),g&&this.AHt(3,M,x,u,M,x,u,e,h,0,r,n,0,4),y&&this.AHt(4,M,x,u,b,v,u,s,i,0,e,h,0,0),w&&this.AHt(5,b,v,u,M,x,u,r,n,0,o,a,0,0)}else if(2===l)m&&this.AHt(2,e,h,u,r,n,u,o,a,0,s,i,0,0),g&&this.AHt(3,r,n,u,e,h,u,e,h,0,r,n,0,0),y&&this.AHt(4,e,h,u,e,h,u,s,i,0,e,h,0,2),w&&this.AHt(5,r,n,u,r,n,u,r,n,0,o,a,0,3);else if(3===l){const T=t.Bl(),G=t.Wl();m&&this.AHt(2,T,G,u,T,G,u,o,a,0,s,i,0,4),g&&this.AHt(3,T,G,u,T,G,u,e,h,0,r,n,0,4),y&&this.AHt(4,T,G,u,T,G,u,s,i,0,e,h,0,4),w&&this.AHt(5,T,G,u,T,G,u,r,n,0,o,a,0,4)}else 4===l?(m&&this.AHt(2,e,h,u,e,h,u,o,a,0,s,i,0,2),g&&this.AHt(3,e,h,u,e,h,u,e,h,0,r,n,0,3),y&&this.AHt(4,e,h,u,e,h,u,s,i,0,e,h,0,2),w&&this.AHt(5,e,h,u,e,h,u,r,n,0,o,a,0,3)):5===l&&(m&&this.AHt(2,s,i,u,s,i,u,o,a,0,s,i,0,2),g&&this.AHt(3,r,n,u,e,h,u,e,h,0,r,n,0,0),y&&this.AHt(4,e,h,u,s,i,u,s,i,0,e,h,0,0),w&&this.AHt(5,r,n,u,r,n,u,r,n,0,o,a,0,3),p)&&this.AHt(1,s,i,u,e,h,u,r,n,u,o,a,0,1);if(1<O){const[_,I,C]=f.HD().R9();for(let t=0;t<6;++t){const P=F[t];P.enable&&(P.eHt=Math.min(R(_,I,C,P.rHt,P.nHt,P.oHt),R(_,I,C,P.trx,P.aHt,P.lHt),R(_,I,C,P.uHt,P.cHt,P.fHt),R(_,I,C,P.dHt,P.pHt,P.mHt)),P.hHt=R(_,I,C,(P.rHt+P.trx+P.uHt+P.dHt)/4,(P.nHt+P.aHt+P.cHt+P.pHt)/4,(P.oHt+P.lHt+P.fHt+P.mHt)/4))}F.sort(A)}const S=c.TA();for(let t=0;t<6;++t){const E=F[t];E.enable&&(c.rS(S),this.RHt(c,E.i,E.rHt,E.nHt,E.oHt,E.trx,E.aHt,E.lHt,E.uHt,E.cHt,E.fHt,E.dHt,E.pHt,E.mHt,E.shape))}}}RHt(b,t,v,M,x,T,G,_,s,i,e,I,C,P,h){let r=null,n=null,o=!1,a=this.CHt[t];if(null!==a){const l=a.t5(this.uV());if(!l)return;const u=l.O6();if(m.TY.Yht&&u instanceof m.TY.Yht.Instance){if(null===(r=u.mx()))return;n=u.UTt()}else{if(!(m.TY.FHt&&u instanceof m.TY.FHt.Instance||m.TY.OHt&&u instanceof m.TY.OHt.Instance))return;{let w=0,S=0,t=this.IHt;switch(h){case 0:case 1:w=d(v,M,x,T,G,_,t),S=d(T,G,_,s,i,e,t);break;case 2:w=d(I,C,P,s,i,e,t),S=d(v,M,x,I,C,P,t);break;case 3:w=d(I,C,P,s,i,e,t),S=d(T,G,_,s,i,e,t);break;case 4:w=d(I,C,P,s,i,e,t),S=d(v,M,x,(I+s)/2,(C+i)/2,(P+e)/2,t)}if(!(m.TY.FHt&&u instanceof m.TY.FHt.Instance))return 0!==h?void 0:(u.DHt((t,s)=>{t.Ct(w,S);const i=t.Al(),e=t.Rl(),h=t.Fl(),r=t.Ol(),[n,o,a]=E(v,M,x,T,G,_,I,C,P,i,e),[l,u,c]=E(v,M,x,T,G,_,I,C,P,h,e),[f,d,p]=E(v,M,x,T,G,_,I,C,P,h,r),[m,g,y]=E(v,M,x,T,G,_,I,C,P,i,r);b.yA(n,o,a,l,u,c,f,d,p,m,g,y,s)}),u.kHt(b,0,0,w,S),void u.DHt(null));if(null===(r=u.mx()))return;u.LHt(w,S,ll),o=!0,u.NHt(b,!1)}}}else{t=this._Ht[t];const c=this.THt.P_t(t),f=c.wW();if(null===(r=f.mx()))return;n=f.UTt()}b.nA(r),3<=h||o?(o||ll._(n),3===h?(ll.yu(ll.dn()),ll.wu(ll.fn())):4===h&&(ll.yu((ll.cn()+ll.dn())/2),ll.wu((ll.fn()+ll.pn())/2)),b.US(v,M,x,T,G,_,s,i,e,I,C,P,ll)):b.US(v,M,x,T,G,_,s,i,e,I,C,P,n)}yv(){for(const t of this.CHt)if(t){const s=t.t5(this.uV());if(s){const i=s.O6();if(m.TY.FHt&&i instanceof m.TY.FHt.Instance&&i.BHt())return!0}}return!1}uq(){return this.WHt(0)}_W(){return this.VHt(0)}Dvt(t){return this.jHt(0,t)}HHt(h){const t=this.Ejt,r=t.cn(),n=t.fn(),o=t.dn(),a=t.pn(),l=t.mn(),u=t.gn(),c=t.yn(),f=t.wn(),d=this.gHt,p=this.jD().yB(),m=p+this.yHt;if(1===d||3===d){let t=(r+c)/2,s=(n+f)/2,i=(o+l)/2,e=(a+u)/2;switch(h){case 4:return[i,e,m,t,s,m,r,n,p,o,a,p];case 5:return[t,s,m,i,e,m,l,u,p,c,f,p]}if(3===d)switch(t=(r+o)/2,s=(n+a)/2,i=(c+l)/2,e=(f+u)/2,h){case 2:return[t,s,m,i,e,m,c,f,p,r,n,p];case 3:return[i,e,m,t,s,m,o,a,p,l,u,p]}}else if(2===d&&2===h)return[o,a,m,l,u,m,c,f,p,r,n,p];switch(h){case 0:return[r,n,p,o,a,p,l,u,p,c,f,p];case 1:return[r,n,m,o,a,m,l,u,m,c,f,m];case 2:return[r,n,m,c,f,m,c,f,p,r,n,p];case 3:return[l,u,m,o,a,m,o,a,p,l,u,p];case 4:return[o,a,m,r,n,m,r,n,p,o,a,p];case 5:return[c,f,m,l,u,m,l,u,p,c,f,p];default:return[0,0,0,0,0,0,0,0,0,0,0,0]}}jHt(t,s){const i=this.jD();if((t=Math.floor(t))<0||5<t)return[i.Hv(),i.Jv(),i.Xv()];let e=this.THt.P_t(t),h=null,r=("string"==typeof s?h=e.RW(s):"number"==typeof s&&(h=e.AW(s-1)),.5),n=.5;h?(r=h.Hv(),n=h.Jv()):0===t&&(r=e.vW(),n=e.xW()),i.SB();const o=this.HHt(t);return E(o[0],o[1],o[2],o[3],o[4],o[5],o[9],o[10],o[11],r,n)}VHt(t){if(this.jD(),(t=Math.floor(t))<0||5<t)return 0;const s=this.THt.P_t(t);return s._W()}UHt(t){this.gHt!==t&&(this.gHt=t,this.Sf.YD())}zHt(){return this.gHt}JHt(t){t=Math.max(t,0),this.yHt!==t&&(this.yHt=t,this.jD().wAt(t),this.Sf.YD())}qHt(){return this.yHt}XHt(t,s){this.GHt[t]!==(s=!!s)&&(this.GHt[t]=s,this.Sf.YD())}WHt(t){return this.GHt[t]}YHt(t,s){const i=this._Ht,e=this.CHt;i[t]===s&&null===e[t]||(i[t]=s,e[t]=null,this.Sf.YD())}PHt(t,s){null!==s&&s.oJ()&&(s=s.Pgt()[0]);const i=this.CHt;i[t]!==s&&(i[t]=s,this.Sf.YD())}$Ht(t){this.IHt!==t&&(this.IHt=t,this.Sf.YD())}KHt(){return this.IHt}iM(){const t={s:this.gHt,zh:this.yHt,fv:this.GHt,fi:this._Ht,fo:this.CHt.map(t=>t?t.mJ():-1),zf:this.IHt};return t}eM(t){this.gHt=t.s,this.yHt=t.zh,this.jD().wAt(this.yHt),this.GHt=t.fv.slice(0),this._Ht=t.fi.slice(0),t.hasOwnProperty("fo")&&(this.CHt=t.fo.map(t=>this.Sf.Yj(t))),t.hasOwnProperty("zf")&&(this.IHt=t.zf)}$rt(t){}int(t,s){}ITt(){const t="plugins.shape3d";return[{title:t+".name",properties:[{name:t+".properties.z-height.name",value:this.qHt(),o8t:t=>this.JHt(t)}]}]}Bxt(){return self.ZHt}},new WeakMap),cl=["box","prism","wedge","pyramid","corner-out","corner-in"],fl=["back","front","left","right","top","bottom"];self.ZHt=class extends self.P6{constructor(){super(),ul.set(this,self.qN.ZN().O6())}GW(){return ul.get(this)._W()}IW(t){return this.PW(t)[0]}EW(t){return this.PW(t)[1]}PW(t){if("string"!=typeof t&&"number"!=typeof t)throw new TypeError("expected string or number");return ul.get(this).Dvt(t)}QHt(t){const s=fl.indexOf(t);if(s<0)throw new Error("invalid face");return ul.get(this).VHt(s)}tUt(t,s){return this.sUt(t,s)[0]}iUt(t,s){return this.sUt(t,s)[1]}eUt(t,s){return this.sUt(t,s)[2]}sUt(t,s){const i=fl.indexOf(t);if(i<0)throw new Error("invalid face");if("string"!=typeof s&&"number"!=typeof s)throw new TypeError("expected string or number");return ul.get(this).jHt(i,s)}set hUt(t){i.Ie(t),ul.get(this).JHt(t)}get hUt(){return ul.get(this).qHt()}set shape(t){i.Ae(t);const s=cl.indexOf(t);if(-1===s)throw new TypeError("invalid shape");ul.get(this).UHt(s)}get shape(){return cl[ul.get(this).zHt()]}rUt(t,s){const i=fl.indexOf(t);if(i<0)throw new Error("invalid face");ul.get(this).XHt(i,!!s)}nUt(t){const s=fl.indexOf(t);if(s<0)throw new Error("invalid face");return ul.get(this).WHt(s)}oUt(t,s){const i=fl.indexOf(t),e=fl.indexOf(s);if(i<0||e<0)throw new Error("invalid face");ul.get(this).YHt(i,e)}get aUt(){return ul.get(this).KHt()}set aUt(t){i.Ie(t),ul.get(this).$Ht(t)}lUt(t,s){const i=fl.indexOf(t);if(i<0)throw new Error("invalid face");const e=ul.get(this),h=e.ck().jk(s);e.PHt(i,h)}}}{const dl=self.Bs;dl.TY.iHt.MY={uUt(t){return this.zHt()===t},cUt(t,s){return dl.compare(this.qHt(),t,s)},fUt(t){return this.WHt(t)}}}{const pl=self.Bs;pl.TY.iHt.frt={dUt(t){this.UHt(t)},pUt(t){this.JHt(t)},mUt(t,s){this.XHt(t,s)},gUt(t,s){this.YHt(t,s)},yUt(t){this.$Ht(t)},wUt(t,s){this.PHt(t,s)}}}{const ml=self.Bs;ml.TY.iHt.drt={SUt(){return this.qHt()},bUt(){return this.KHt()},vUt(t,s){return this.jHt(t,s)[0]},MUt(t,s){return this.jHt(t,s)[1]},xUt(t,s){return this.jHt(t,s)[2]},TUt(t){return this.VHt(t)}}}{const gl=self.Bs;gl.TY.FHt=class extends gl.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{let i=function(t){switch(t){case 0:return"clamp-to-edge";case 1:return"repeat";case 2:return"mirror-repeat"}return"repeat"};i;const yl=self.Bs;yl.TY.FHt.RIt=class extends yl.Qxt{constructor(t,s){super(t),this.KM="repeat",this.ZM="repeat",s&&(this.KM=i(s[0]),this.ZM=i(s[1]))}Sr(){super.Sr()}Nxt(){this.wW().uk(this.Sf)}zX(t){return this.wW().X8(t,{jM:this.Sf.yO(),WM:this.KM,VM:this.ZM})}KX(){this.wW().XI()}GUt(){return this.KM}_Ut(){return this.ZM}}}{const wl=self.Bs,Sl=self.$s,bl=wl.wr(wl.Rect),vl=wl.wr(wl.ou),Ml=wl.wr(wl.Rect),xl=wl.wr(wl.ou),I=(wl.TY.FHt.Instance=class extends wl.RTt{constructor(t,s){super(t),this.IUt=0,this.CUt=0,this.PUt=1,this.EUt=1,this.AUt=0,this.RUt=!1,this.FUt=0,this.OUt=0,this.DUt=0,this.kUt=0,this.LUt=0,this.NUt=null,s&&(this.jD().hN(!!s[0]),this.IUt=s[4],this.CUt=s[5],this.PUt=s[6],this.EUt=s[7],this.AUt=wl.Ir(s[8]),this.RUt=!!s[9],this.FUt=s[10],this.OUt=s[11],this.DUt=s[12],this.kUt=s[13],this.LUt=s[14])}Sr(){this.BUt(),super.Sr()}BUt(){this.NUt&&(this.NUt.Sr(),this.NUt=null)}LHt(t,s,i){const e=this.WTt(),h=e.Em(),r=e.Wm(),n=this.IUt/h,o=this.CUt/r,a=this.AUt;Ml.set(0,0,t/(h*this.PUt),s/(r*this.EUt)),Ml.offset(-n,-o),0===a?i.Cu(Ml):i.Pu(Ml,-a)}NHt(t,s=!0){if(this.RUt){const i=this.WTt();t.lS(),t.PA(i.Em()*this.PUt,i.Wm()*this.EUt,this.FUt,this.OUt,this.DUt,this.kUt,this.LUt)}else s&&t.hS()}AM(t){const s=this.WTt(),i=s.mx();if(null!==i){this.NHt(t),t.nA(i);const e=s.Em(),h=s.Wm(),r=this.IUt/e,n=this.CUt/h,o=this.jD();Ml.set(0,0,o.Em()/(e*this.PUt),o.Wm()/(h*this.EUt)),Ml.offset(-r,-n),o._6()?this.Ajt(o,t):this.Rjt(o,t)}}Rjt(t,s){let i=t.vB();this.Sf.SO()&&(i=t.eRt(i)),0===this.AUt?s.YS(i,Ml):(xl.Pu(Ml,-this.AUt),s.gA(i,xl))}Ajt(i,t){const e=i.vRt();if(i.xRt()){i.tRt(bl,vl,!1);let t=vl,s=(this.Sf.SO()&&(t=i.eRt(t)),Ml);0!==this.AUt&&(xl.Pu(Ml,-this.AUt),s=xl),e.EM(i.I6(),t,s),i.MRt(!1)}e.AM(t)}WTt(){return this.NUt||this.Dft.wW()}Oit(){return!0}mx(){return this.WTt().mx()}WUt(){this.jD().MRt(!0)}VUt(t){this.IUt!==t&&(this.IUt=t,this.Sf.YD(),this.WUt())}jUt(){return this.IUt}HUt(t){this.CUt!==t&&(this.CUt=t,this.Sf.YD(),this.WUt())}UUt(){return this.CUt}zUt(t){this.PUt!==t&&(this.PUt=t,this.Sf.YD(),this.WUt())}JUt(){return this.PUt}qUt(t){this.EUt!==t&&(this.EUt=t,this.Sf.YD(),this.WUt())}XUt(){return this.EUt}YUt(t){this.AUt!==t&&(this.AUt=t,this.Sf.YD(),this.WUt())}$Ut(){return this.AUt}KUt(t){this.RUt!==(t=!!t)&&(this.RUt=t,this.Sf.YD())}BHt(){return this.RUt}ZUt(t){this.FUt!==t&&(this.FUt=t,this.BHt())&&this.Sf.YD()}QUt(){return this.FUt}t7t(t){this.OUt!==t&&(this.OUt=t,this.BHt())&&this.Sf.YD()}s7t(){return this.OUt}i7t(t){this.DUt!==t&&(this.DUt=t,this.BHt())&&this.Sf.YD()}e7t(){return this.DUt}h7t(t){this.kUt!==t&&(this.kUt=t,this.BHt())&&this.Sf.YD()}r7t(){return this.kUt}n7t(t){this.LUt!==t&&(this.LUt=t,this.BHt())&&this.Sf.YD()}o7t(){return this.LUt}iM(){const t={};return 0!==this.IUt&&(t.iox=this.IUt),0!==this.CUt&&(t.ioy=this.CUt),1!==this.PUt&&(t.isx=this.PUt),1!==this.EUt&&(t.isy=this.EUt),0!==this.AUt&&(t.ia=this.AUt),this.RUt&&(t.tr=!0),1!==this.FUt&&(t.trx=this.FUt),1!==this.OUt&&(t.try=this.OUt),1!==this.DUt&&(t.tra=this.DUt),.1!==this.kUt&&(t.trbmx=this.kUt),.1!==this.LUt&&(t.trbmy=this.LUt),t}eM(t){this.IUt=t.iox||0,this.CUt=t.ioy||0,this.PUt=t.hasOwnProperty("isx")?t.isx:1,this.EUt=t.hasOwnProperty("isy")?t.isy:1,this.AUt=t.ia||0,this.RUt=!!t.tr,this.FUt=t.hasOwnProperty("trx")?t.trx:1,this.OUt=t.hasOwnProperty("try")?t.try:1,this.DUt=t.hasOwnProperty("tra")?t.tra:1,this.kUt=t.hasOwnProperty("trbmx")?t.trbmx:.1,this.LUt=t.hasOwnProperty("trbmy")?t.trbmy:.1}ITt(){const t="plugins.tiledbg.properties";return[{title:t+".image-transform.name",properties:[{name:t+".image-offset-x.name",value:this.jUt(),o8t:t=>this.VUt(t)},{name:t+".image-offset-y.name",value:this.UUt(),o8t:t=>this.HUt(t)},{name:t+".image-scale-x.name",value:100*this.JUt(),o8t:t=>this.zUt(t/100)},{name:t+".image-scale-y.name",value:100*this.XUt(),o8t:t=>this.qUt(t/100)},{name:t+".image-angle.name",value:wl.Cr(this.$Ut()),o8t:t=>this.YUt(wl.Ir(t))}]},{title:t+".tile-randomization.name",properties:[{name:t+".enable-tile-randomization.name",value:this.BHt(),o8t:t=>this.KUt(t)},{name:t+".x-random.name",value:100*this.QUt(),o8t:t=>this.ZUt(t/100)},{name:t+".y-random.name",value:100*this.s7t(),o8t:t=>this.t7t(t/100)},{name:t+".angle-random.name",value:100*this.e7t(),o8t:t=>this.i7t(t/100)},{name:t+".blend-margin-x.name",value:100*this.r7t(),o8t:t=>this.h7t(t/100)},{name:t+".blend-margin-y.name",value:100*this.o7t(),o8t:t=>this.n7t(t/100)}]}]}$rt(t){switch(t){case 4:return this.jUt();case 5:return this.UUt();case 6:return this.JUt();case 7:return this.XUt();case 8:return this.$Ut();case 9:return this.BHt();case 10:return this.QUt();case 11:return this.s7t();case 12:return this.e7t();case 13:return this.r7t();case 14:return this.o7t()}}int(t,s){switch(t){case 4:this.VUt(s);break;case 5:this.HUt(s);break;case 6:this.zUt(s);break;case 7:this.qUt(s);break;case 8:this.YUt(s);break;case 9:this.KUt(!!s);break;case 10:this.ZUt(s);break;case 11:this.t7t(s);break;case 12:this.i7t(s);break;case 13:this.h7t(s);break;case 14:this.n7t(s)}}Bxt(){return self.a7t}},new WeakMap);self.a7t=class extends self.P6{constructor(){super(),I.set(this,self.qN.ZN().O6())}set l7t(t){Sl.Ie(t),I.get(this).VUt(t)}get l7t(){return I.get(this).jUt()}set u7t(t){Sl.Ie(t),I.get(this).HUt(t)}get u7t(){return I.get(this).UUt()}c7t(t,s){Sl.Ie(t),Sl.Ie(s);const i=I.get(this);i.VUt(t),i.HUt(s)}f7t(){const t=I.get(this);return[t.jUt(),t.UUt()]}set d7t(t){Sl.Ie(t),I.get(this).zUt(t)}get d7t(){return I.get(this).JUt()}set p7t(t){Sl.Ie(t),I.get(this).qUt(t)}get p7t(){return I.get(this).XUt()}m7t(t,s){Sl.Ie(t),Sl.Ie(s);const i=I.get(this);i.zUt(t),i.qUt(s)}g7t(){const t=I.get(this);return[t.JUt(),t.XUt()]}set y7t(t){Sl.Ie(t),I.get(this).YUt(t)}get y7t(){return I.get(this).$Ut()}set w7t(t){Sl.Ie(t),I.get(this).YUt(wl.Ir(t))}get w7t(){return wl.Cr(I.get(this).$Ut())}get imageWidth(){return I.get(this).WTt().Em()}get imageHeight(){return I.get(this).WTt().Wm()}v8t(){const t=I.get(this).WTt();return[t.Em(),t.Wm()]}set S7t(t){I.get(this).KUt(!!t)}get S7t(){return I.get(this).BHt()}set b7t(t){Sl.Ie(t),I.get(this).ZUt(t)}get b7t(){return I.get(this).QUt()}set v7t(t){Sl.Ie(t),I.get(this).t7t(t)}get v7t(){return I.get(this).s7t()}M7t(t,s){Sl.Ie(t),Sl.Ie(s);const i=I.get(this);i.ZUt(t),i.t7t(s)}x7t(){const t=I.get(this);return[t.QUt(),t.s7t()]}set T7t(t){Sl.Ie(t),I.get(this).i7t(t)}get T7t(){return I.get(this).e7t()}set G7t(t){Sl.Ie(t),I.get(this).h7t(t)}get G7t(){return I.get(this).r7t()}set _7t(t){Sl.Ie(t),I.get(this).n7t(t)}get _7t(){return I.get(this).o7t()}I7t(t,s){Sl.Ie(t),Sl.Ie(s);const i=I.get(this);i.h7t(t),i.n7t(s)}C7t(){const t=I.get(this);return[t.r7t(),t.o7t()]}async P7t(t){Sl.uh(t,Blob);const s=I.get(this),i=s.ck(),e=wl.wr(wl.YGt);e.l_t(i,t),await e.X8(i.uv(),{jM:i.yO(),WM:s.bvt().GUt(),VM:s.bvt()._Ut()}),s.br()?e.Sr():(s.BUt(),s.NUt=e,i.YD())}}}{const Tl=self.Bs;Tl.TY.FHt.MY={E8t(){return!0},A8t(){return!0},E7t(){return this.BHt()}}}{const Gl=self.Bs;Gl.TY.FHt.frt={A7t(t){this.VUt(t)},R7t(t){this.HUt(t)},F7t(t){this.zUt(t/100)},O7t(t){this.qUt(t/100)},D7t(t){this.YUt(Gl.Ir(t))},k7t(t){this.KUt(t)},L7t(t,s){this.ZUt(t/100),this.t7t(s/100)},N7t(t){this.i7t(t/100)},B7t(t,s){this.h7t(t/100),this.n7t(s/100)},W8t(t){this.jD().Rv(t),this.Sf.YD()},async N8t(t,s){if(!this.NUt||this.NUt.gU()!==t){const i=this.Sf,e=Gl.wr(Gl.YGt);try{if(await e.a_t(i,t),!e.jU())throw new Error("image failed to load");if(this.br())return e.Sr(),null;const h=await e.X8(i.uv(),{jM:i.yO(),WM:this.bvt().GUt(),VM:this.bvt()._Ut()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.br()||this.O4(Gl.TY.FHt.MY.A8t))}this.br()?e.Sr():(this.BUt(),this.NUt=e,i.YD(),await this.L4(Gl.TY.FHt.MY.E8t))}}}}{const _l=self.Bs;_l.TY.FHt.drt={K8t(){return this.WTt().Em()},Z8t(){return this.WTt().Wm()},W7t(){return this.IUt},V7t(){return this.CUt},j7t(){return 100*this.PUt},H7t(){return 100*this.EUt},U7t(){return _l.Cr(this.AUt)},z7t(){return 100*this.QUt()},J7t(){return 100*this.s7t()},q7t(){return 100*this.e7t()},X7t(){return 100*this.r7t()},Y7t(){return 100*this.o7t()}}}{const Il=self.Bs;Il.TY.$7t=class extends Il.mxt{constructor(t){super(t)}Sr(){super.Sr()}},Il.TY.$7t.K7t=-2147483648,Il.TY.$7t.Z7t=1073741824,Il.TY.$7t.Q7t=536870912,Il.TY.$7t.tzt=3758096384,Il.TY.$7t.szt=536870911}{const Cl=self.Bs,Pl=Cl.TY.$7t.K7t,El=Cl.TY.$7t.Z7t,Al=Cl.TY.$7t.Q7t,Rl=Cl.TY.$7t.szt;Cl.TY.$7t.RIt=class extends Cl.Qxt{constructor(t){super(t),this.izt=[],this.ezt=!1,this.hzt=0,this.rzt=[],this.nzt=null}Sr(){this.nzt.clear(),this.nzt=null,super.Sr()}Nxt(){this.wW().uk(this.Sf)}zX(t){return this.wW().X8(t,{jM:this.Sf.yO()})}KX(){this.wW().XI()}XX(){for(const t of this.YN().s5())t.O6().ozt()}sTt(t,s,i){this.hzt=s;for(const e of t)if(e){const h=e[0],r=!!e[1];this.izt.push({eAt:h,use:r,azt:[[[null,null],[null,null]],[[null,null],[null,null]]]})}else this.izt.push(null);for(const n of i){const o=n[0],a=n[1],l=n[2];this.rzt.push({name:o,type:a,lzt:l})}}uzt(t,s){this.ezt=!1,this.czt(t,s)}czt(i,e){if(!this.ezt){this.ezt=!0;for(let t=0,s=this.izt.length;t<s;++t)this.izt[t]&&(this.fzt(t,i,e,!1,!1,!1),this.fzt(t,i,e,!1,!1,!0),this.fzt(t,i,e,!1,!0,!1),this.fzt(t,i,e,!1,!0,!0),this.fzt(t,i,e,!0,!1,!1),this.fzt(t,i,e,!0,!1,!0),this.fzt(t,i,e,!0,!0,!1),this.fzt(t,i,e,!0,!0,!0))}}fzt(t,s,i,e,h,r){if(!(t<0||t>=this.izt.length)){const n=this.izt[t];if(n){const o=Cl.wr(Cl.Vu,n.eAt,n.use);o.transform(s,i,0),r&&o.Nu(),e&&o.Du(s/2),h&&o.Lu(i/2),n.azt[e?1:0][h?1:0][r?1:0]=null,n.azt[e?1:0][h?1:0][r?1:0]=o}}}dzt(t){if(-1===t)return null;const s=t&Rl;if(s<0||s>=this.izt.length)return null;const i=this.izt[s];if(!i)return null;const e=t&Pl?1:0,h=t&El?1:0,r=t&Al?1:0;return i.azt[e][h][r]}pzt(t){return!t||t.rc()}mzt(){return this.hzt}gzt(s){this.nzt||(this.nzt=new Map);const t=this.nzt.get(s);if("number"==typeof t&&0<=t)return this.rzt[t];for(let t=0;t<this.rzt.length;t++)if(this.rzt[t].name===s)return this.nzt.set(s,t),this.rzt[t]}}}{let s=function(t){const e=[],i=t.split(",");for(let t=0,s=i.length;t<s;++t){const h=i[t],r=h.indexOf("x");if(-1<r){let t=parseInt(h.substring(0,r),10),s=h.substring(r+1),i=parseInt(s,10);for(s.includes("h")&&(i|=Dl),s.includes("v")&&(i|=kl),s.includes("d")&&(i|=Ll);0<t;--t)e.push(i)}else{let t=parseInt(h,10);h.includes("h")&&(t|=Dl),h.includes("v")&&(t|=kl),h.includes("d")&&(t|=Ll),e.push(t)}}return e};s;const Fl=self.Bs,Ol=self.$s,Dl=Fl.TY.$7t.K7t,kl=Fl.TY.$7t.Z7t,Ll=Fl.TY.$7t.Q7t,Nl=Fl.TY.$7t.tzt,Bl=Fl.TY.$7t.szt,Wl=Fl.wr(Fl.Rect),Vl=Fl.wr(Fl.Rect),jl=Fl.wr(Fl.Rect),Hl=(Fl.TY.$7t.Instance=class extends Fl.RTt{constructor(t,s){super(t);const i=this.jD();this.yzt=32,this.wzt=32,this.Szt=0,this.bzt=0,this.vzt=0,this.Mzt=0,this.xzt=0,this.Tzt=0,this.Gzt=i.Em(),this._zt=i.Wm(),this.f7=0,this.d7=0,this.Izt=[],this.Czt=new Map,this.Pzt=!0,this.NUt=null,s&&(i.hN(s[0]),this.yzt=Math.max(s[1],1),this.wzt=Math.max(s[2],1),this.Szt=s[3],this.bzt=s[4],this.vzt=s[5],this.Mzt=s[6]),this.f7=Math.ceil(this.Sf.pO()/this.yzt),this.d7=Math.ceil(this.Sf.gO()/this.wzt),this.nTt.czt(this.yzt,this.wzt),this.Ezt=null}Sr(){this.BUt(),Fl.Un(this.Izt),this.Izt=null,this.Czt.clear(),this.Czt=null,super.Sr()}BUt(){this.NUt&&(this.NUt.Sr(),this.NUt=null)}sTt(t,s,i){this.xzt=s,this.Tzt=i,this.Azt(!0),this.Rzt(t),this.Fzt()}Azt(t){const[s,h]=this.Ozt();if(!(s<=this.xzt&&h<=this.Tzt)||t){let i=0,e=0;t?(i=Math.ceil(this.Tzt/this.d7),e=Math.ceil(this.xzt/this.f7)):(i=this.Izt.length,e=Math.ceil(this.xzt/this.f7),h>this.Tzt&&(this.Tzt=h,i=Math.ceil(this.Tzt/this.d7)),s>this.xzt&&(this.xzt=s,e=Math.ceil(this.xzt/this.f7)),this.Dzt(),this.kzt(),this.Sf.YD());const r=this.Izt;if(r.length<i)for(let t=r.length;t<i;++t)r.push([]);for(let s=0;s<i;++s){const n=r[s];for(let t=n.length;t<e;++t)n.push(Fl.wr(Fl.TY.$7t.Lzt,this,t,s))}}}Rzt(t){let i=s(t),e=0,h=this.xzt,r=this.f7,n=this.d7;for(let s=0,t=this.Tzt;s<t;++s)for(let t=0;t<h;++t){const o=i[e++],a=this.Nzt(t,s);a&&a.Bzt(t%r,s%n,o)}}Wzt(){let l="";if(!(this.xzt<=0||this.Tzt<=0)){let i=1,e=this.Vzt(0,0),[h,t]=this.Ozt(),r=-1,n=!1,o=!1,a=!1;for(let s=0;s<t;++s)for(let t=0===s?1:0;t<h;++t){const u=this.Vzt(t,s);u===e?++i:(a=-1===e?(r=-1,n=!1,o=!1):(r=e&Bl,n=0!=(e&Dl),o=0!=(e&kl),0!=(e&Ll)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d"),l+=",",i=1,e=u)}a=-1===e?(r=-1,n=!1,o=!1):(r=e&Bl,n=0!=(e&Dl),o=0!=(e&kl),0!=(e&Ll)),1===i?l+=""+r:l+=i+"x"+r,n&&(l+="h"),o&&(l+="v"),a&&(l+="d")}return l}Dzt(){const i=this.Izt;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].jzt()}this.Pzt=!0}Fzt(){if(this.Pzt){this.Pzt=!1;const i=this.Izt;for(let t=0,s=i.length;t<s;++t){const e=i[t];for(let t=0,s=e.length;t<s;++t)e[t].Hzt()}}}Uzt(){this.Pzt=!0,this.kzt(),this.Sf.YD()}kzt(){this.jD().wRt(!0)}Nzt(t,s){if(t<0||s<0)return null;const i=Math.floor(s/this.d7);if(i>=this.Izt.length)return null;const e=this.Izt[i],h=Math.floor(t/this.f7);return h>=e.length?null:e[h]}zzt(t,s){if(t<0||s<0||s>=this.Izt.length)return null;const i=this.Izt[s];return t>=i.length?null:i[t]}Vzt(t,s){if(t=Math.floor(t),s=Math.floor(s),t<0||s<0||t>=this.xzt||s>=this.Tzt)return-1;const i=this.Nzt(t,s);return i?i.Jzt()[s%this.d7][t%this.f7]:-1}Bzt(t,s,i){if(t=Math.floor(t),s=Math.floor(s),!(t<0||s<0||t>=this.xzt||s>=this.Tzt||-1!==i&&(i&Bl)>this.mzt())){const e=this.Nzt(t,s);e&&e.Bzt(t%this.f7,s%this.d7,i)}}mzt(){return this.nTt.mzt()}qzt(t){return Math.floor((t-this.jD().Hv())/(this.f7*this.yzt))}Xzt(t){return Math.floor((t-this.jD().Jv())/(this.d7*this.wzt))}Yzt(t){return Math.floor((t-this.jD().Hv())/this.yzt)}$zt(t){return Math.floor((t-this.jD().Jv())/this.wzt)}Kzt(){return this.xzt}Zzt(){return this.Tzt}Qzt(){return Math.floor(this.jD().Em()/this.tJt())}sJt(){return Math.floor(this.jD().Wm()/this.iJt())}Ozt(){const t=this.jD();return[Math.floor(t.Em()/this.tJt()),Math.floor(t.Wm()/this.iJt())]}tJt(){return this.yzt}iJt(){return this.wzt}eJt(){return this.f7}hJt(){return this.d7}G3t(t,i){const e=this.qzt(t.Al()),h=this.Xzt(t.Rl()),r=this.qzt(t.Fl()),n=this.Xzt(t.Ol());for(let s=e;s<=r;++s)for(let t=h;t<=n;++t){const o=this.zzt(s,t);o&&(o.Hzt(),Fl.er(i,o.rJt()))}}qTt(t,s){const i=this.Yzt(t),e=this.$zt(s),h=this.Vzt(i,e);if(-1===h)return!1;const r=this.nTt.dzt(h);if(!r)return!0;if(!this.nTt.pzt(r))return!1;const n=this.jD(),o=Math.floor((t-n.Hv())/this.yzt)*this.yzt+n.Hv(),a=Math.floor((s-n.Jv())/this.wzt)*this.wzt+n.Jv();return t-=o,s-=a,r.eu(t,s)}nJt(i){const e=this.Izt;for(let t=0,s=e.length;t<s;++t){const h=e[t];for(let t=0,s=h.length;t<s;++t){const r=h[t];r.Hzt(),Fl.er(i,r.rJt())}}}WTt(){return this.NUt||this.Dft.wW()}oJt(t){const s=this.Czt,i=s.get(t);if(i)return i;const e=t&Bl,h=0!=(t&Dl),r=0!=(t&kl),n=0!=(t&Ll),o=this.WTt(),a=o.Em(),l=this.yzt,u=this.Szt,c=this.vzt,f=Math.floor((a-u)/(l+c)*l)+c,d=Math.floor(f/l),p=e%d,m=Math.floor(e/d),g=o.c_t()+this.Szt+(this.yzt+this.vzt)*p,y=o.f_t()+this.bzt+(this.wzt+this.Mzt)*m,w=(Wl.xl(g,y,this.yzt,this.wzt),Wl.Ct(o.d_t(),o.p_t()),Fl.wr(Fl.ou));return w.Cu(Wl),n&&w.Nu(),h&&w.Du(),r&&w.Lu(),w.offset(p,m),s.set(t,w),w}ozt(){this.Czt.clear(),this.Dzt()}AM(h){const t=this.WTt(),s=t.mx();if(s){Wl._(t.eP()),Wl.offsetLeft(this.Szt/s.Em()),Wl.offsetTop(this.bzt/s.Wm()),h.aS(),h.CA(Wl,s.Em(),s.Wm(),this.yzt,this.wzt,this.vzt,this.Mzt),h.nA(s);const r=this.jD(),n=r.HD();r.Em()===this.Gzt&&r.Wm()===this._zt||(this.kzt(),this.Dzt(),this.Gzt=r.Em(),this._zt=r.Wm());let i=r.Hv(),e=r.Jv();this.Sf.SO()&&(i=Math.round(i),e=Math.round(e));const o=this.f7*this.yzt,a=this.d7*this.wzt,l=r.yB(),u=Vl;if(n.YJ()){u.set(-1/0,-1/0,1/0,1/0);const c=jl,f=n.aq();for(const d of this.Izt)for(const p of d)p.aJt(c),f.By(c.Al(),c.Rl(),l,c.Fl(),c.Ol(),l)&&(p.Hzt(),p.AM(h,u,i,e))}else{n.DJ(l,u);const m=Math.floor((u.Al()-i)/o),g=Math.floor((u.Fl()-i)/o),y=Math.floor((u.Rl()-e)/a),w=Math.floor((u.Ol()-e)/a);for(let s=m;s<=g;++s)for(let t=y;t<=w;++t){const S=this.zzt(s,t);S&&(S.Hzt(),S.AM(h,u,i,e))}}}}iM(){this.Azt();const[t,s]=this.Ozt();return{tw:this.yzt,th:this.wzt,tox:this.Szt,toy:this.bzt,tsx:this.vzt,tsy:this.Mzt,w:t,h:s,d:this.Wzt()}}eM(t){this.yzt=t.tw,this.wzt=t.th,this.Szt=t.tox,this.bzt=t.toy,this.vzt=t.tsx,this.Mzt=t.tsy,this.xzt=t.w,this.Tzt=t.h,this.Azt(!0),this.Rzt(t.d),this.kzt(),this.Dzt()}lJt(){this.Azt();const[t,s]=this.Ozt();return JSON.stringify({c2tilemap:!0,width:t,height:s,data:this.Wzt()})}uJt(t){switch(t){case 0:return 0;case 1:return Dl;case 2:return kl;case 3:return Dl|Ll;case 4:return Dl|kl;case 5:return kl|Ll;case 6:return Dl|kl|Ll;case 7:return Ll;default:return 0}}$rt(t){switch(t){case 1:return this.yzt;case 2:return this.wzt;case 3:return this.Szt;case 4:return this.bzt;case 5:return this.vzt;case 6:return this.Mzt}}int(t,s){switch(t){case 1:this.yzt!==s&&(this.yzt=Math.max(s,1),this.f7=Math.ceil(this.Sf.pO()/this.yzt),this.nTt.uzt(),this.cJt());break;case 2:this.wzt!==s&&(this.wzt=Math.max(s,1),this.d7=Math.ceil(this.Sf.gO()/this.wzt),this.nTt.uzt(),this.cJt());break;case 3:this.Szt!==s&&(this.Szt=s,this.cJt());break;case 4:this.bzt!==s&&(this.bzt=s,this.cJt());break;case 5:this.vzt!==s&&(this.vzt=s,this.cJt());break;case 6:this.Mzt!==s&&(this.Mzt=s,this.cJt())}}cJt(){this.Czt.clear(),this.Dzt(),this.Fzt()}Bxt(){return Ul}},new WeakMap),Ul=self.fJt=class extends self.P6{constructor(){super(),Hl.set(this,self.qN.ZN().O6())}get dJt(){return Hl.get(this).Kzt()}get pJt(){return Hl.get(this).Zzt()}mJt(){const t=Hl.get(this);return[t.Kzt(),t.Zzt()]}get gJt(){return Hl.get(this).Qzt()}get yJt(){return Hl.get(this).sJt()}wJt(){const t=Hl.get(this);return[t.Qzt(),t.sJt()]}get SJt(){return Hl.get(this).tJt()}get bJt(){return Hl.get(this).iJt()}vJt(){const t=Hl.get(this);return[t.tJt(),t.iJt()]}MJt(t,s){return Ol.Ie(t),Ol.Ie(s),Hl.get(this).Vzt(t,s)}xJt(t,s,i){Ol.Ie(t),Ol.Ie(s),Ol.Ie(i);const e=Hl.get(this);e.Azt(),e.Bzt(t,s,i)}async P7t(t){Ol.uh(t,Blob);const s=Hl.get(this),i=s.ck(),e=Fl.wr(Fl.YGt);e.l_t(i,t),await e.X8(i.uv(),{jM:i.yO()}),s.br()?e.Sr():(s.BUt(),s.NUt=e,s.Czt.clear(),s.Dzt(),i.YD())}};Ul.K7t=Dl,Ul.Z7t=kl,Ul.Q7t=Ll,Ul.tzt=Nl,Ul.szt=Bl}{const zl=self.Bs,Jl=zl.TY.$7t.tzt,ql=zl.TY.$7t.szt;zl.TY.$7t.MY={TJt(t,s,i,e){let h=this.Vzt(t,s);return-1!==h&&(h&=ql),zl.compare(h,i,e)},GJt(t,s,i){let e=this.Vzt(t,s);return(-1!==e?e&Jl:0)===this.uJt(i)},E8t(){return!0},A8t(){return!0},_Jt(t){return this.Ezt||(this.Ezt=new zl.TY.$7t.IJt(this,this.nTt)),this.Ezt._Jt(t)}}}{const Xl=self.Bs,Yl=Xl.TY.$7t.szt;Xl.TY.$7t.frt={CJt(t,s){this.Azt(),this.Bzt(t,s,-1)},PJt(t,s,i,e){this.Azt(),this.Bzt(t,s,i&Yl|this.uJt(e))},EJt(t,s,i){const e=this.Vzt(t,s);-1!==e&&(this.Azt(),this.Bzt(t,s,e&Yl|this.uJt(i)))},AJt(t,s,i,e){const h=Math.floor(Math.max(t,0)),r=Math.floor(Math.max(s,0)),n=Math.floor(Math.min(t+i,this.xzt)),o=Math.floor(Math.min(s+e,this.Tzt));for(let s=r;s<o;++s)for(let t=h;t<n;++t)this.Bzt(t,s,-1)},RJt(t,s,i,e,h,r){this.Azt();const n=Math.floor(Math.max(t,0)),o=Math.floor(Math.max(s,0)),a=Math.floor(Math.min(t+i,this.xzt)),l=Math.floor(Math.min(s+e,this.Tzt)),u=h&Yl|this.uJt(r);for(let s=o;s<l;++s)for(let t=n;t<a;++t)this.Bzt(t,s,u)},FJt(t,s,i,e,h){this.Azt();const r=Math.floor(Math.max(t,0)),n=Math.floor(Math.max(s,0)),o=Math.floor(Math.min(t+i,this.xzt)),a=Math.floor(Math.min(s+e,this.Tzt)),l=this.uJt(h);for(let s=n;s<a;++s)for(let t=r;t<o;++t){const u=this.Vzt(t,s);-1!==u&&this.Bzt(t,s,u&Yl|l)}},OJt(t){let s=null;try{s=JSON.parse(t)}catch(t){return void console.error("[Construct] Failed to parse tilemap JSON: ",t)}s.c2tilemap?(this.xzt=s.width,this.Tzt=s.height,this.Azt(!0),this.Rzt(s.data),this.Dzt(),this.kzt()):console.error("[Construct] Unrecognized JSON data format")},DJt(t){const s=URL.createObjectURL(new Blob([this.lJt()],{type:"application/json"}));this.Sf.DD(s,t)},async N8t(t,s){if(!this.NUt||this.NUt.gU()!==t){const i=this.Sf,e=Xl.wr(Xl.YGt);try{if(await e.a_t(i,t),!e.jU())throw new Error("image failed to load");if(this.br())return e.Sr(),null;const h=await e.X8(i.uv(),{jM:i.yO()});if(!h)return}catch(t){return console.error("Load image from URL failed: ",t),void(this.br()||this.O4(Xl.TY.$7t.MY.A8t))}this.br()?e.Sr():(this.BUt(),this.NUt=e,i.YD(),this.Czt.clear(),this.Dzt(),await this.L4(Xl.TY.$7t.MY.E8t))}},W8t(t){2<=t&&t++,this.jD().Rv(t),this.Sf.YD()},kJt(t,s,i){this.Azt(),this.Ezt||(this.Ezt=new Xl.TY.$7t.IJt(this,this.nTt)),this.Ezt.LJt(t,s,i)},NJt(t,s,i){this.Azt(),this.Ezt||(this.Ezt=new Xl.TY.$7t.IJt(this,this.nTt)),this.Ezt.BJt(t,s,i)},WJt(t,s,i){Xl.TY.$7t.frt.kJt.call(this,t,s,i)},VJt(t,s,i){Xl.TY.$7t.frt.NJt.call(this,t,s,i)}}}{const $l=self.Bs,Kl=$l.TY.$7t.szt;$l.TY.$7t.drt={jJt(t,s){const i=this.Vzt(t,s);return-1===i?-1:i&Kl},HJt(t){return this.Yzt(t)},UJt(t){return this.$zt(t)},zJt(t){return t*this.yzt+this.jD().Hv()+this.yzt/2},JJt(t){return t*this.wzt+this.jD().Jv()+this.wzt/2},qJt(t){const s=this.jD().Hv();return Math.floor((t-s)/this.yzt)*this.yzt+s+this.yzt/2},XJt(t){const s=this.jD().Jv();return Math.floor((t-s)/this.wzt)*this.wzt+s+this.wzt/2},YJt(){return this.lJt()},$Jt(){return this.tJt()},KJt(){return this.iJt()},ZJt(){return this.Qzt()},QJt(){return this.sJt()}}}{const Zl=self.Bs,Ql=Zl.TY.$7t.K7t,tu=Zl.TY.$7t.Z7t,su=Zl.TY.$7t.Q7t,iu=Zl.TY.$7t.szt,eu=Zl.wr(Zl.Rect),hu=Zl.wr(Zl.ou);Zl.TY.$7t.t9t=class extends Zl.gr{constructor(){super(),this.vf=-1,this.s9t=-1,this.i9t=!1,this.e9t=!1,this.h9t=!1,this.r9t=Zl.wr(Zl.Rect),this.n9t=null}w7(t,s,i,e,h,r,n,o){this.vf=t,this.s9t=t&iu,this.i9t=0!=(t&Ql),this.e9t=0!=(t&tu),this.h9t=0!=(t&su),this.r9t.xl(e*s+r,h*i+n,s,i),this.n9t=o.oJt(this.vf)}AM(t,s,i,e,h){eu._(this.r9t),eu.offset(i,e),eu.su(s)&&(hu.Cu(eu),t.gA(hu,this.n9t))}}}{const ru=self.Bs;ru.TY.$7t.o9t=class extends ru.gr{constructor(){super(),this.vf=-1,this.a9t=null,this.r9t=ru.wr(ru.Rect)}w7(t,s,i,e,h,r,n,o){this.vf=t,this.a9t=s,this.r9t.xl(h*i+n,r*e+o,i,e)}l9t(t){this.r9t.Il(this.r9t.Fl()+t)}u9t(){return this.vf}c9t(){return!!this.a9t}I3t(){return this.a9t}_3t(){return this.r9t}}}{const nu=self.Bs,ou=nu.TY.$7t.szt;nu.TY.$7t.Lzt=class extends nu.gr{constructor(t,s,i){super();const e=t.eJt(),h=t.hJt();this.WCt=t,this.ol=s,this.al=i,this.Sl=this.ol*e*t.tJt(),this.bl=this.al*h*t.iJt(),this.f9t=[],this.d9t=[],this.p9t=[],this.m9t=!1;for(let t=0;t<h;++t){const r=new Int32Array(e);r.fill(-1),this.f9t.push(r)}}ac(){const i=this.WCt.eJt(),s=this.WCt.hJt(),e=this.f9t;if(e.length<s)for(let t=e.length;t<s;++t)e.push(new Int32Array(i));else e.length>s&&nu.Hn(e,s);for(let s=0,t=e.length;s<t;++s){let t=e[s];t.length!==i&&(t=new Int32Array(i),e[s]=t),t.fill(-1)}}aJt(t){const s=this.WCt,i=s.jD(),e=s.eJt()*s.tJt(),h=s.hJt()*s.iJt(),r=i.Hv()+this.Sl,n=i.Jv()+this.bl;t.set(r,n,r+e,n+h)}jzt(){this.m9t=!1}Hzt(){if(!this.m9t){const u=this.WCt,c=u.bvt(),s=u.jD(),f=u.tJt(),d=u.iJt(),p=u.eJt(),m=u.hJt(),g=this.Sl,y=this.bl;if(!(f<=0||d<=0)){let e=Math.min(u.Kzt(),Math.floor(s.Em()/f)),t=Math.min(u.Zzt(),Math.floor(s.Wm()/d)),h=(e-=g/f,t-=y/d,e>p&&(e=p),t>m&&(t=m),this.f9t),r=this.d9t,n=0;for(let i=0;i<t;++i){const w=h[i];for(let s=0;s<e;++s){const S=w[s];if(-1!==S){let t=null;n<r.length?t=r[n]:(t=nu.wr(nu.TY.$7t.t9t),r.push(t)),t.w7(S,f,d,s,i,g,y,u),++n}}}n<r.length&&nu.Hn(r,n);let i=null,o=!1,a=this.p9t;nu.Un(a);for(let s=0;s<t;++s){const b=h[s];for(let t=0;t<e;++t){const v=b[t],M=(ou,c.dzt(v)),x=c.pzt(M);-1!==v&&x?!i||M||o?(i&&a.push(i),(i=nu.wr(nu.TY.$7t.o9t)).w7(v,M,f,d,t,s,g,y),o=!!M):i.l9t(f):i&&(a.push(i),i=null,o=!1)}i&&(a.push(i),i=null,o=!1)}let l=a.length;for(let s=0;s<l;++s){const T=a[s];if(!T.c9t()){const G=T._3t();for(let t=s+1;t<l;++t){const _=a[t],I=_._3t();I.Rl()<G.Ol()||I.Rl()>G.Ol()||I.Fl()>G.Fl()||I.Al()>G.Al()||_.c9t()||I.Al()===G.Al()&&I.Fl()===G.Fl()&&(a.splice(t,1),--l,G.Cl(G.Ol()+d),--t)}}}this.m9t=!0}}}Bzt(t,s,i){this.f9t[s][t]!==i&&(this.f9t[s][t]=i,this.m9t=!1,this.WCt.Uzt())}Jzt(){return this.f9t}rJt(){return this.p9t}AM(i,e,h,r){const n=this.WCt,o=this.d9t;for(let t=0,s=o.length;t<s;++t)o[t].AM(i,e,h,r,n)}}}{const au=self.Bs,lu=Object.freeze([[0,0,0],[0,0,0],[0,0,0]]);au.TY.$7t.IJt=class{constructor(t,s){this.WCt=t,this.nTt=s,this.g9t=[null,null],this.y9t=[au.TY.$7t.w9t,au.TY.$7t.S9t],this.b9t=new au.rf}get v9t(){return lu}get M9t(){return-999}get x9t(){return-998}get T9t(){return-1}get G9t(){return 0}get _9t(){return 1}I9t(){return this.WCt}bvt(){return this.nTt}LJt(t,s,i){this._Jt(i)&&(this.C9t(i,0),this.P9t(t,s,this.E9t(t,s,i)))}BJt(t,s,i){this._Jt(i)&&(this.C9t(i,1),this.A9t(t,s),this.P9t(t,s,this.E9t(t,s,i)))}_Jt(t){return!!this.bvt().gzt(t)}R9t(t,s){return this.I9t().Vzt(t,s)}F9t(t,s,i){const e=this.R9t(t,s);return!!this.O9t(e,!0,e,i)}O9t(t,s,i,e){return-1===t||(!s||-998!==t)&&s&&e&&!this.D9t(i,e)?0:1}k9t(t,s,i,e){const h=e.lzt[t];if(!h.length)return-1;if(1===h.length)return h[0][0];const r=this.R9t(s,i);if(this.O9t(r)){const n=h.some(t=>r===t[0]);if(n)return r}this.b9t.ac();for(let[t,s]of h)"number"!=typeof s&&(s=1),this.b9t.df(s,t);return this.b9t.ff()}L9t(t,s,i){-1!==t&&this.I9t().Bzt(t,s,i)}A9t(t,s){this.I9t().Bzt(t,s,-1)}D9t(t,s){for(const i of s.lzt)for(const[e]of i)if(e===t)return!0;return!1}P9t(t,s,i){i&&(this.L9t(t-1,s-1,i[0][0]),this.L9t(t,s-1,i[1][0]),this.L9t(t+1,s-1,i[2][0]),this.L9t(t-1,s,i[0][1]),this.L9t(t,s,i[1][1]),this.L9t(t+1,s,i[2][1]),this.L9t(t-1,s+1,i[0][2]),this.L9t(t,s+1,i[1][2]),this.L9t(t+1,s+1,i[2][2]))}N9t(t){const s=this.bvt().gzt(t);return s.type}B9t(t){const s=this.N9t(t);this.g9t[s]||(this.g9t[s]=new this.y9t[s](this))}C9t(t,s){this.B9t(t);const i=this.N9t(t);this.g9t[i]&&this.g9t[i].W9t(s)}E9t(t,s,i){this.B9t(i);const e=this.bvt().gzt(i);if(this.g9t[e.type])return this.g9t[e.type].V9t(t,s,e)}}}{const uu=self.Bs;uu.TY.$7t.w9t=class{constructor(t){this.j9t=t,this.H9t=t.G9t}W9t(t){this.H9t=t}V9t(t,s,i){return this.U9t(t,s,i)}U9t(t,s,i){const e=this.H9t===this.j9t.G9t?this.z9t(t,s,void 0,i):this.j9t.T9t,h=this.J9t(t,s-1,"s",i),r=this.J9t(t-1,s,"e",i),n=this.J9t(t+1,s,"w",i),o=this.J9t(t,s+1,"n",i),a=this.j9t.v9t;return a[0][0]=this.j9t.M9t,a[1][0]=this.q9t(h,t,s-1,i),a[2][0]=this.j9t.M9t,a[0][1]=this.q9t(r,t-1,s,i),a[1][1]=this.q9t(e,t,s,i),a[2][1]=this.q9t(n,t+1,s,i),a[0][2]=this.j9t.M9t,a[1][2]=this.q9t(o,t,s+1,i),a[2][2]=this.j9t.M9t,a}J9t(t,s,i,e){return this.j9t.F9t(t,s,e)?this.z9t(t,s,i,e):this.j9t.M9t}z9t(t,s,i,e){this.H9t===this.j9t._9t&&(i=void 0);const h=this.j9t.R9t(t,s-1),r=this.j9t.R9t(t-1,s),n=this.j9t.R9t(t+1,s),o=this.j9t.R9t(t,s+1),a="n"===i?this.j9t.x9t:h,l="w"===i?this.j9t.x9t:r,u="e"===i?this.j9t.x9t:n,c="s"===i?this.j9t.x9t:o,f=this.j9t.O9t(a,!0,h,e),d=this.j9t.O9t(l,!0,r,e),p=this.j9t.O9t(u,!0,n,e),m=this.j9t.O9t(c,!0,o,e);return+f+2*d+4*p+8*m}q9t(t,s,i,e){return t===this.j9t.M9t||t===this.j9t.T9t?t:this.j9t.k9t(t,s,i,e)}}}{const cu=self.Bs,fu=new Map([[2,1],[8,2],[10,3],[11,4],[16,5],[18,6],[22,7],[24,8],[26,9],[27,10],[30,11],[31,12],[64,13],[66,14],[72,15],[74,16],[75,17],[80,18],[82,19],[86,20],[88,21],[90,22],[91,23],[94,24],[95,25],[104,26],[106,27],[107,28],[120,29],[122,30],[123,31],[126,32],[127,33],[208,34],[210,35],[214,36],[216,37],[218,38],[219,39],[222,40],[223,41],[248,42],[250,43],[251,44],[254,45],[255,46],[0,47]]);cu.TY.$7t.S9t=class{constructor(t){this.j9t=t,this.H9t=t.G9t}W9t(t){this.H9t=t}V9t(t,s,i){return this.X9t(t,s,i)}X9t(t,s,i){const e=this.H9t===this.j9t.G9t?this.Y9t(t,s,void 0,i):this.j9t.T9t,h=this.$9t(t-1,s-1,"se",i),r=this.$9t(t,s-1,"s",i),n=this.$9t(t+1,s-1,"sw",i),o=this.$9t(t-1,s,"e",i),a=this.$9t(t+1,s,"w",i),l=this.$9t(t-1,s+1,"ne",i),u=this.$9t(t,s+1,"n",i),c=this.$9t(t+1,s+1,"nw",i),f=this.j9t.v9t;return f[0][0]=this.K9t(h,t-1,s-1,i),f[1][0]=this.K9t(r,t,s-1,i),f[2][0]=this.K9t(n,t+1,s-1,i),f[0][1]=this.K9t(o,t-1,s,i),f[1][1]=this.K9t(e,t,s,i),f[2][1]=this.K9t(a,t+1,s,i),f[0][2]=this.K9t(l,t-1,s+1,i),f[1][2]=this.K9t(u,t,s+1,i),f[2][2]=this.K9t(c,t+1,s+1,i),f}$9t(t,s,i,e){return this.j9t.F9t(t,s,e)?this.Y9t(t,s,i,e):this.j9t.M9t}Y9t(t,s,i,e){this.H9t===this.j9t._9t&&(i=void 0);const h=this.j9t.R9t(t,s-1),r=this.j9t.R9t(t-1,s),n=this.j9t.R9t(t+1,s),o=this.j9t.R9t(t,s+1),a=this.j9t.R9t(t-1,s-1),l=this.j9t.R9t(t+1,s-1),u=this.j9t.R9t(t-1,s+1),c=this.j9t.R9t(t+1,s+1),f="n"===i?this.j9t.x9t:h,d="w"===i?this.j9t.x9t:r,p="e"===i?this.j9t.x9t:n,m="s"===i?this.j9t.x9t:o,g="nw"===i?this.j9t.x9t:a,y="ne"===i?this.j9t.x9t:l,w="sw"===i?this.j9t.x9t:u,S="se"===i?this.j9t.x9t:c,b=this.j9t.O9t(f,!0,h,e),v=this.j9t.O9t(d,!0,r,e),M=this.j9t.O9t(p,!0,n,e),x=this.j9t.O9t(m,!0,o,e),T=b&&v?this.j9t.O9t(g,!0,a,e):0,G=b&&M?this.j9t.O9t(y,!0,l,e):0,_=x&&v?this.j9t.O9t(w,!0,u,e):0,I=x&&M?this.j9t.O9t(S,!0,c,e):0;return+T+2*b+4*G+8*v+16*M+32*_+64*x+128*I}K9t(t,s,i,e){return t===this.j9t.M9t||t===this.j9t.T9t?t:this.j9t.k9t(fu.get(t),s,i,e)}}}{const du=self.Bs,pu=[];du.TY.Audio=class extends du.mxt{constructor(t){super(t)}Z9t(t){pu.push(t)}static async Q9t(){await Promise.all(pu),du.Un(pu)}Sr(){super.Sr()}}}{let s=function(){return i.jL().O6()},t=function(){if(self.C3Audio_DOMInterface)return self.C3Audio_DOMInterface;throw new Error("audio scripting API cannot be used here - make sure the project is using DOM mode, not worker mode")};s,t;const mu=self.Bs,gu=self.$s;mu.TY.Audio.RIt=class extends mu.Qxt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}Bxt(){return self.tqt}};let i=null;self.tqt=class extends self.HL{constructor(t){super(t),i=t}get sqt(){return t().GetAudioContextExtern()}get iqt(){return t().GetDestinationNodeExtern()}get isSilent(){return s().eqt()}set isSilent(t){s().hqt(t)}get masterVolume(){return s().rqt()}set masterVolume(t){gu.Ie(t),s().nqt(t)}oqt(){s().aqt()}}}{const yu=self.Bs,wu=["interactive","balanced","playback"];yu.TY.Audio.Instance=class extends yu.hTt{constructor(t,s){super(t,"audio"),this.lqt=0,this.uqt=[],this.cqt=!0,this.fqt=0,this.dqt=0,this.pqt=!1,this.mqt=1,this.gqt=1,this.yqt=[this.Sf.NJ()/2,this.Sf.BJ()/2,600],this.wqt=[0,0,-1],this.Sqt=[0,1,0],this.bqt=600,this.vqt=1e4,this.Mqt=1,this.xqt=null,this.Tqt=-1,this.Gqt=1,this._qt=!1,this.Iqt=0,this.Cqt="suspended",this.Pqt=0,this.Eqt=new Map,this.Aqt=0,this.Rqt=0,this.Fqt=new Map,this.Oqt=new Map;let i="interactive";s&&(this.fqt=s[0],this.dqt=s[1],this.pqt=s[2],i=wu[s[3]],this.cqt=s[4],this.mqt=s[5],this.gqt=s[6],this.yqt[2]=s[7],this.bqt=s[8],this.vqt=s[9],this.Mqt=s[10]),this.Dqt=[],this.kqt=[],this.Lqt=[],this.mTt([["state",t=>this.Nqt(t)],["audiocontext-state",t=>this.Bqt(t)],["fxstate",t=>this.Wqt(t)],["trigger",t=>this.Vqt(t)],["buffer-metadata",t=>this.jqt(t)]]);const e=this.ck().Qf(),h=(this.A0=new yu.C0(yu.M0.I0(e,"instancedestroy",t=>this.Hqt(t.z6)),yu.M0.I0(e,"afterload",()=>this.Z$()),yu.M0.I0(e,"suspend",()=>this.Uqt()),yu.M0.I0(e,"resume",()=>this.zqt())),"Safari"===yu.mi.wi),r=this.Sf.e4t(),n=this.Sf.sO().hU(),o="playable-ad-single-file"===this.Sf.$k(),a=h||r||n||o;this.Sf.ik(this.yTt("create-audio-context",{preloadList:this.Sf.sO().FU().map(t=>({originalUrl:t.originalUrl,url:t.url,type:t.type,fileSize:t.fileSize})),timeScaleMode:this.fqt,latencyHint:i,panningModel:this.mqt,distanceModel:this.gqt,refDistance:this.bqt,maxDistance:this.vqt,rolloffFactor:this.Mqt,listenerPos:this.yqt,usePlayMusicAsSoundWorkaround:a}).then(t=>{this.Iqt=t.sampleRate,this.Cqt=t.audioContextState,this.Pqt=t.outputLatency})),this.xTt()}Sr(){this.xqt=null,super.Sr()}Jqt(t){return this.cqt?t.split(" ").filter(t=>!!t):t?[t]:[]}qqt(s,t){for(const i of t){let t=!1;for(const e of s)if(yu.Gh(e,i)){t=!0;break}if(!t)return!1}return!0}Xqt(t,s){return this.qqt(t,this.Jqt(s))}Z9t(t){this.zL().Z9t(t)}Hqt(t){this.xqt===t&&(this.xqt=null)}Yqt(t){return Math.pow(10,t/20)}$qt(t){const s=this.Yqt(t);return isFinite(s)?Math.max(Math.min(s,1),0):0}Kqt(t){return Math.log(t)/Math.log(10)*20}Zqt(t){return this.Kqt(Math.max(Math.min(t,1),0))}Uqt(){this.pqt||this.gTt("set-suspended",{isSuspended:!0})}zqt(){this.pqt||this.gTt("set-suspended",{isSuspended:!1})}Nqt(t){const s=t.tickCount,i=(this.Pqt=t.outputLatency,this.Dqt.filter(t=>t.hasOwnProperty("placeholder")&&(t.placeholder>s||-1===t.placeholder)));this.Dqt=t.audioInstances,this.Lqt=t.analysers,0<i.length&&yu.er(this.Dqt,i)}jqt(t){this.Fqt.set(t.originalUrl,{duration:t.duration})}Bqt(t){this.Cqt=t.audioContextState}Mrt(){return this.Sf.QOt()?"running":this.Cqt}Wqt(t){this.kqt=t.fxstate}Qqt(t){const s=this.Jqt(t);for(const i of this.Dqt)if(this.qqt(i.tags,s))return i;return null}tXt(t){const s=this.Jqt(t);return this.Dqt.some(t=>this.qqt(t.tags,s)&&t.isPlaying)}sXt(t,s,i,e,h){if(this.tXt(s))return null;const r=this.Fqt.get(t),n={tags:this.Jqt(s),duration:r?r.duration:0,volume:h,isPlaying:!0,playbackTime:0,playbackRate:1,uid:-1,bufferOriginalUrl:t,bufferUrl:"",bufferType:"",isMusic:i,isLooping:e,isMuted:!1,resumePosition:0,pan:null,placeholder:-1};return this.Dqt.push(n),n}iXt(t){const s=this.Jqt(t);for(const i of this.Dqt)this.qqt(i.tags,s)&&(i.isPlaying=!1)}async Vqt(t){const s=t.type,i=(this.uqt=t.tags,t.aiid);if("ended"===s){for(const e of this.Dqt)if(e.aiid===i){e.isPlaying=!1;break}await this.L4(yu.TY.Audio.MY.eXt)}else"fade-ended"===s&&await this.L4(yu.TY.Audio.MY.hXt)}rXt(t){return this.Xqt(this.uqt,t)}YK(){const t={timeScale:this.Sf.sD(),gameTime:this.Sf.KNt(),instPans:this.nXt(),tickCount:this.Sf.ZNt()};if(this.xqt){const s=this.xqt.jD();this.yqt[0]=s.Hv(),this.yqt[1]=s.Jv(),t.listenerPos=this.yqt,t.listenerOrientation=[...this.wqt,...this.Sqt]}this.gTt("tick",t)}oXt(t,s,i,e,h){if(0!==i){const r=Math.sin(i),n=Math.cos(i),o=(t-=e)*r,a=(s-=h)*r,l=t*n,u=s*n;t=l-a,s=u+o,t+=e,s+=h}return[t,s]}nXt(){return this.Dqt.filter(t=>-1!==t.uid).map(t=>this.Sf.LD(t.uid)).filter(t=>t).map(t=>{const s=t.jD(),i=s.HD().GetAngle(),[e,h]=this.oXt(s.Hv(),s.Jv(),-i,this.yqt[0],this.yqt[1]);return{uid:t.a4(),x:e,y:h,z:s.yB(),angle:s.GetAngle()-i}})}aXt(t,s){for(const i of this.Lqt)if(i.index===s&&yu.Gh(i.tag,t))return i;return null}lXt(t){for(const s of this.Jqt(t)){const i=s.toLowerCase();this.Eqt.set(i,(this.Eqt.get(i)||0)+1)}}eqt(){return this._qt}hqt(t){this._qt!==(t=!!t)&&(this._qt=t,this.gTt("set-silent",{isSilent:t}))}rqt(){return this.Gqt}nqt(t){this.Gqt!==t&&(this.Gqt=t,this.gTt("set-master-volume",{vol:t}))}aqt(){this.gTt("stop-all");for(const t of this.Dqt)t.isPlaying=!1}uXt(t){return!t.hasOwnProperty("placeholder")&&3!==this.dqt&&!(t.isMusic&&1===this.dqt||!t.isMusic&&2===this.dqt)}iM(){return{isSilent:this._qt,masterVolume:this.Gqt,listenerZ:this.yqt[2],listenerForwardVec:this.wqt,listenerUpVec:this.Sqt,listenerUid:this.xqt?this.xqt.a4():-1,remoteUrls:[...this.Oqt.entries()],playing:this.Dqt.filter(t=>this.uXt(t)),effects:this.kqt,analysers:this.Lqt}}eM(t){if(this._qt=t.isSilent,this.Gqt=t.masterVolume,this.yqt[2]=t.listenerZ,this.xqt=null,this.Tqt=t.listenerUid,t.hasOwnProperty("listenerForwardVec")?this.wqt=t.listenerForwardVec:this.wqt=[0,0,-1],t.hasOwnProperty("listenerUpVec")?this.Sqt=t.listenerUpVec:this.Sqt=[0,1,0],this.Oqt.clear(),t.remoteUrls)for(const[s,i]of t.remoteUrls)this.Oqt.set(s,i);this.Dqt=t.playing;for(const e of this.Dqt)e.hasOwnProperty("tag")&&!e.hasOwnProperty("tags")&&(e.tags=[e.tag].filter(t=>!!t));this.kqt=t.effects,this.Lqt=t.analysers}Z$(){if(-1!==this.Tqt&&(this.xqt=this.Sf.LD(this.Tqt),this.Tqt=-1,this.xqt)){const t=this.xqt.jD();this.yqt[0]=t.Hv(),this.yqt[1]=t.Jv()}for(const s of this.Dqt){const i=this.Sf.sO().RU(s.bufferOriginalUrl);i?(s.bufferUrl=i.url,s.bufferType=i.type):s.bufferUrl=null}for(const e of Object.values(this.kqt))for(const h of e)if(h.hasOwnProperty("bufferOriginalUrl")){const r=this.Sf.sO().RU(h.bufferOriginalUrl);r&&(h.bufferUrl=r.url,h.bufferType=r.type)}this.gTt("load-state",{saveLoadMode:this.dqt,timeScale:this.Sf.sD(),gameTime:this.Sf.KNt(),listenerPos:this.yqt,listenerOrientation:[...this.wqt,...this.Sqt],isSilent:this._qt,masterVolume:this.Gqt,playing:this.Dqt.filter(t=>null!==t.bufferUrl),effects:this.kqt})}ITt(){const t=[];for(const[i,e]of Object.entries(this.kqt))t.push({name:"$"+i,value:e.map(t=>t.type).join(", ")});const s="plugins.audio.debugger";return[{title:s+".tag-effects",properties:t},{title:s+".currently-playing",properties:[{name:s+".currently-playing-count",value:this.Dqt.length},...this.Dqt.map((t,s)=>({name:"$#"+s,value:`${t.bufferOriginalUrl} ("${t.tags}") ${Math.round(10*t.playbackTime)/10} / `+Math.round(10*t.duration)/10}))]}]}}}{const Su=self.Bs;Su.TY.Audio.MY={eXt(t){return this.rXt(t)},hXt(t){return this.rXt(t)},cXt(){return this.Rqt===this.Aqt},fXt(){return!0},dXt(){return this.eqt()},pXt(){for(const t of this.Dqt)if(t.isPlaying)return!0;return!1},mXt(t){return this.tXt(t)}}}{const bu=self.Bs,vu=["lowpass","highpass","bandpass","lowshelf","highshelf","peaking","notch","allpass"];bu.TY.Audio.frt={Play(t,s,i,e,h){const r=bu.TY.Audio.frt.gXt.call(this,t,s,i,e,h);return this.Z9t(r),r},xrt(t,s,i,e){bu.TY.Audio.frt.gXt.call(this,t,0,s,0,i,e)},async gXt(t,s,i,e,h,r){if(!this._qt){const n=t[1],o=this.Sf.sO().RU(t[0]);if(o){const a=this.lqt,l=(this.lqt=0,this.sXt(t[0],h,n,0!==s,this.$qt(i)));try{await this.yTt("play",{originalUrl:t[0],url:o.url,type:o.type,isMusic:n,tags:this.Jqt(h),isLooping:0!==s,vol:this.$qt(i),stereoPan:bu.Gr(e/100,-1,1),pos:r||0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Sf.ZNt())}}}},async yXt(t,s,i,e,h,r,n,o,a,l,u){if(!this._qt){const c=t[1],f=this.Sf.sO().RU(t[0]);if(f){const d=this.lqt,p=(this.lqt=0,this.sXt(t[0],u,c,0!==s,this.$qt(i)));try{await this.yTt("play",{originalUrl:t[0],url:f.url,type:f.type,isMusic:c,tags:this.Jqt(u),isLooping:0!==s,vol:this.$qt(i),pos:0,off:d,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:e,y:h,z:r,angle:bu.Ir(n),innerAngle:bu.Ir(o),outerAngle:bu.Ir(a),outerGain:this.$qt(l)}})}finally{p&&(p.placeholder=this.Sf.ZNt())}}}},async wXt(t,s,i,e,h,r,n,o){if(!this._qt&&e){const a=e.fMt();if(a&&a.jD()){const l=a.jD(),u=l.HD().GetAngle(),[c,f]=this.oXt(l.Hv(),l.Jv(),-u,this.yqt[0],this.yqt[1]),d=t[1],p=this.Sf.sO().RU(t[0]);if(p){const m=this.lqt,g=(this.lqt=0,this.sXt(t[0],o,d,0!==s,this.$qt(i)));try{await this.yTt("play",{originalUrl:t[0],url:p.url,type:p.type,isMusic:d,tags:this.Jqt(o),isLooping:0!==s,vol:this.$qt(i),pos:0,off:m,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:c,y:f,z:l.yB(),angle:l.GetAngle()-u,innerAngle:bu.Ir(h),outerAngle:bu.Ir(r),outerGain:this.$qt(n),uid:a.a4()}})}finally{g&&(g.placeholder=this.Sf.ZNt())}}}}},async SXt(t,s,i,e,h,r){if(!this._qt){const n=1===t,o=this.Sf.sO().RU(s)||this.Oqt.get(s.toLowerCase());if(o){const a=this.lqt,l=(this.lqt=0,this.sXt(s,r,n,0!==i,this.$qt(e)));try{await this.yTt("play",{originalUrl:s,url:o.url,type:o.type,isMusic:n,tags:this.Jqt(r),isLooping:0!==i,vol:this.$qt(e),stereoPan:bu.Gr(h/100,-1,1),pos:0,off:a,trueClock:!!self.C3_GetAudioContextCurrentTime})}finally{l&&(l.placeholder=this.Sf.ZNt())}}}},async bXt(t,s,i,e,h,r,n,o,a,l,u,c){if(!this._qt){const f=1===t,d=this.Sf.sO().RU(s)||this.Oqt.get(s.toLowerCase());if(d){const p=this.lqt,m=(this.lqt=0,this.sXt(s,c,f,0!==i,this.$qt(e)));try{await this.yTt("play",{originalUrl:s,url:d.url,type:d.type,isMusic:f,tags:this.Jqt(c),isLooping:0!==i,vol:this.$qt(e),pos:0,off:p,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:h,y:r,z:n,angle:bu.Ir(o),innerAngle:bu.Ir(a),outerAngle:bu.Ir(l),outerGain:this.$qt(u)}})}finally{m&&(m.placeholder=this.Sf.ZNt())}}}},async vXt(t,s,i,e,h,r,n,o,a){if(!this._qt&&!this._qt&&h){const l=h.fMt();if(l&&l.jD()){const u=l.jD(),c=u.HD().GetAngle(),[f,d]=this.oXt(u.Hv(),u.Jv(),-c,this.yqt[0],this.yqt[1]),p=1===t,m=this.Sf.sO().RU(s)||this.Oqt.get(s.toLowerCase());if(m){const g=this.lqt,y=(this.lqt=0,this.sXt(s,a,p,0!==i,this.$qt(e)));try{await this.yTt("play",{originalUrl:s,url:m.url,type:m.type,isMusic:p,tags:this.Jqt(a),isLooping:0!==i,vol:this.$qt(e),pos:0,off:g,trueClock:!!self.C3_GetAudioContextCurrentTime,panning:{x:f,y:d,z:u.yB(),angle:u.GetAngle()-c,innerAngle:bu.Ir(r),outerAngle:bu.Ir(n),outerGain:this.$qt(o),uid:l.a4()}})}finally{y&&(y.placeholder=this.Sf.ZNt())}}}}},MXt(t,s){this.gTt("set-looping",{tags:this.Jqt(t),isLooping:0===s})},xXt(t,s){this.gTt("set-muted",{tags:this.Jqt(t),isMuted:0===s})},brt(t,s){this.gTt("set-volume",{tags:this.Jqt(t),vol:this.$qt(s)})},TXt(t,s,i,e){this.gTt("fade-volume",{tags:this.Jqt(t),vol:this.$qt(s),duration:i,stopOnEnd:0===e})},GXt(t,s){this.gTt("set-stereo-pan",{tags:this.Jqt(t),p:bu.Gr(s/100,-1,1)})},async _Xt(t){const s=t[1],i=this.Sf.sO().RU(t[0]);i&&(this.Aqt++,await this.yTt("preload",{originalUrl:t[0],url:i.url,type:i.type,isMusic:s}),this.Rqt++)},async IXt(t,s){const i=1===t,e=this.Sf.sO().RU(s)||this.Oqt.get(s.toLowerCase());e&&(this.Aqt++,await this.yTt("preload",{originalUrl:s,url:e.url,type:e.type,isMusic:i}),this.Rqt++)},KW(t,s){this.gTt("set-playback-rate",{tags:this.Jqt(t),rate:Math.max(s,0)})},VW(t){this.iXt(t),this.gTt("stop",{tags:this.Jqt(t)})},CXt(){this.aqt()},PXt(t,s){this.gTt("set-paused",{tags:this.Jqt(t),paused:0===s})},EXt(t,s){this.gTt("seek",{tags:this.Jqt(t),pos:s})},AXt(t){2===t&&(t=this.eqt()?1:0),this.hqt(0===t)},RXt(t){const s=this.$qt(t);this.nqt(s)},FXt(t,s,i,e,h,r,n){const o=vu[s];this.lXt(t),this.gTt("add-effect",{type:"filter",tags:this.Jqt(t),params:[o,i,e,h,r,bu.Gr(n/100,0,1)]})},OXt(t,s,i,e){this.lXt(t),this.gTt("add-effect",{type:"delay",tags:this.Jqt(t),params:[s,this.$qt(i),bu.Gr(e/100,0,1)]})},DXt(t,s,i,e,h,r){this.lXt(t),this.gTt("add-effect",{type:"flanger",tags:this.Jqt(t),params:[s/1e3,i/1e3,e,h/100,bu.Gr(r/100,0,1)]})},kXt(t,s,i,e,h,r,n){this.lXt(t),this.gTt("add-effect",{type:"phaser",tags:this.Jqt(t),params:[s,i,e,h,r,bu.Gr(n/100,0,1)]})},LXt(t,s,i,e){const h=this.Sf.sO().RU(s[0]);h&&(this.lXt(t),this.gTt("add-effect",{type:"convolution",tags:this.Jqt(t),bufferOriginalUrl:s[0],bufferUrl:h.url,bufferType:h.type,params:[0===i,bu.Gr(e/100,0,1)]}))},NXt(t,s){this.lXt(t),this.gTt("add-effect",{type:"gain",tags:this.Jqt(t),params:[this.$qt(s)]})},BXt(t,s){this.lXt(t),this.gTt("add-effect",{type:"stereopan",tags:this.Jqt(t),params:[bu.Gr(s/100,-1,1)]})},WXt(t){this.lXt(t),this.gTt("add-effect",{type:"gain",tags:this.Jqt(t),params:[0]})},VXt(t,s,i){this.lXt(t),this.gTt("add-effect",{type:"tremolo",tags:this.Jqt(t),params:[s,bu.Gr(i/100,0,1)]})},jXt(t,s,i){this.lXt(t),this.gTt("add-effect",{type:"ringmod",tags:this.Jqt(t),params:[s,bu.Gr(i/100,0,1)]})},HXt(t,s,i,e,h,r){this.lXt(t),this.gTt("add-effect",{type:"distortion",tags:this.Jqt(t),params:[this.Yqt(s),this.Yqt(i),e,this.Yqt(h),bu.Gr(r/100,0,1)]})},UXt(t,s,i,e,h,r){this.lXt(t),this.gTt("add-effect",{type:"compressor",tags:this.Jqt(t),params:[s,i,e,h/1e3,r/1e3]})},zXt(t,s,i){this.lXt(t),this.gTt("add-effect",{type:"analyser",tags:this.Jqt(t),params:[s,i]})},JXt(t){const s=this.Jqt(t);for(const i of s)this.Eqt.set(i.toLowerCase(),0);this.gTt("remove-effects",{tags:s}),this.kqt={}},sW(t,s,i,e,h,r){this.gTt("set-effect-param",{tags:this.Jqt(t),index:Math.floor(s),param:i,value:e,ramp:h,time:r})},qXt(t){if(t){const s=t.fMt();s&&s.jD()&&(this.xqt=s)}},XXt(t){this.yqt[2]=t},YXt(t,s,i,e,h,r){this.wqt[0]=t,this.wqt[1]=s,this.wqt[2]=-i,this.Sqt[0]=e,this.Sqt[1]=h,this.Sqt[2]=-r},$Xt(t){this.lqt=Math.max(t,0)},KXt(t){const s=t[1],i=this.Sf.sO().RU(t[0]);i&&this.gTt("unload",{url:i.url,type:i.type,isMusic:s})},ZXt(t,s){const i=1===t,e=this.Sf.sO().RU(s)||this.Oqt.get(s.toLowerCase());e&&this.gTt("unload",{url:e.url,type:e.type,isMusic:i})},QXt(){this.gTt("unload-all")},tYt(t,s,i){this.Oqt.set(i.toLowerCase(),{url:t,type:s})}}}{const Mu=self.Bs;Mu.TY.Audio.drt={sYt(t){const s=this.Qqt(t);return s?s.duration:0},grt(t){const s=this.Qqt(t);return s?s.playbackTime:0},vrt(t){const s=this.Qqt(t);return s?s.playbackRate:0},yrt(t){const s=this.Qqt(t);return s?this.Zqt(s.volume):0},iYt(){return this.Zqt(this.rqt())},eYt(t){return this.Eqt.get(t.toLowerCase())||0},hYt(t,s){const i=this.aXt(t,Math.floor(s));return i?i.binCount:0},rYt(t,s,i){const e=this.aXt(t,Math.floor(s));return!e||(i=Math.floor(i))<0||i>=e.binCount?0:e.freqBins[i]},nYt(t,s){const i=this.aXt(t,Math.floor(s));return i?i.peak:0},oYt(t,s){const i=this.aXt(t,Math.floor(s));return i?i.rms:0},aYt(){return this.Iqt},lYt(){return self.C3_GetAudioContextCurrentTime?self.C3_GetAudioContextCurrentTime():performance.now()/1e3},uYt(){return this.Pqt},cYt(t,s){return 0==(t=Mu.Gr(+t,0,100)/100)?-1/0:t<.1?this.Zqt(Mu.kt(0,this.$qt(s),10*t)):Mu.kt(s,0,(t-.1)/.9)}}}{const xu=self.Bs;xu.TY.OHt=class extends xu.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{const Tu=self.Bs;Tu.TY.OHt.RIt=class extends Tu.Qxt{constructor(t){super(t),this.fYt=null,this.My=null}Sr(){this.KX(),super.Sr()}Nxt(){this.wW().uk(this.Sf)}async zX(t){const s=this.wW();this.My=await s.g_t()}dYt(t,s,i,e){!this.fYt&&this.My&&(this.fYt=new self.pYt(this),this.fYt.mYt(this.My,t,s,i,e))}KX(){this.fYt&&(this.fYt.Sr(),this.fYt=null)}gYt(){return this.fYt}}}{const Gu=self.Bs,_u=Gu.wr(Gu.Rect),Iu=Gu.wr(Gu.Rect),Cu=Gu.wr(Gu.ou);Gu.TY.OHt.Instance=class extends Gu.RTt{constructor(t,s){super(t),this.yYt=16,this.wYt=16,this.SYt=16,this.bYt=16,this.vYt=1,this.MYt=1,this.xYt=!0,this.TYt=null,s&&(this.yYt=s[0],this.wYt=s[1],this.SYt=s[2],this.bYt=s[3],this.vYt=s[4],this.MYt=s[5],this.xYt=!!s[8],this.jD().hN(!!s[6])),this.nTt.dYt(this.yYt,this.wYt,this.SYt,this.bYt)}Sr(){super.Sr()}DHt(t){this.TYt=t}AM(t){const s=this.jD(),i=s.vB();this.kHt(t,i.cn(),i.fn(),s.Em(),s.Wm())}kHt(t,s,i,e,h){let r=this.nTt.gYt();if(r||(this.nTt.dYt(this.yYt,this.wYt,this.SYt,this.bYt),r=this.nTt.gYt())){const n=r.GYt(),o=r._Yt(),a=Math.min(this.yYt,n),l=Math.min(this.wYt,n),u=Math.min(this.SYt,o),c=Math.min(this.bYt,o),f=n-l,d=o-c,p=this.xYt?1:0,m=this.vYt,g=this.MYt;if(0<a&&0<u&&this.IYt(t,r.mx(),0,0,a+p,u+p,s,i,a+p,u+p),0<l&&0<u&&this.IYt(t,r.mx(),f-p,0,l+p,u+p,s+e-l-p,i,l+p,u+p),0<l&&0<c&&this.IYt(t,r.mx(),f-p,d-p,l+p,c+p,s+e-l-p,i+h-c-p,l+p,c+p),0<a&&0<c&&this.IYt(t,r.mx(),0,d-p,a+p,c+p,s,i+h-c-p,a+p,c+p),0===m){const y=2===g?0:p;0<a&&u<d&&this.CYt(t,r.PYt(),s,i+u,a+y,h-u-c,0,0),0<l&&u<d&&this.CYt(t,r.EYt(),s+e-l-y,i+u,l+y,h-u-c,y,0),0<u&&a<f&&this.CYt(t,r.AYt(),s+a,i,e-a-l,u+y,0,0),0<c&&a<f&&this.CYt(t,r.RYt(),s+a,i+h-c-y,e-a-l,c+y,0,y)}else 1===m&&(0<a&&u<d&&this.IYt(t,r.mx(),0,u,a,d-u,s,i+u,a,h-u-c),0<l&&u<d&&this.IYt(t,r.mx(),f,u,l,d-u,s+e-l,i+u,l,h-u-c),0<u&&a<f&&this.IYt(t,r.mx(),a,0,f-a,u,s+a,i,e-a-l,u),0<c)&&a<f&&this.IYt(t,r.mx(),a,d,f-a,c,s+a,i+h-c,e-a-l,c);u<d&&a<f&&(0===g?this.CYt(t,r.FYt(),s+a,i+u,e-a-l,h-u-c,0,0):1===g&&this.IYt(t,r.mx(),a,u,f-a,d-u,s+a,i+u,e-a-l,h-u-c))}}IYt(t,s,i,e,h,r,n,o,a,l){const u=s.Em(),c=s.Wm();if(t.nA(s),_u.set(n,o,n+a,o+l),Iu.set(i/u,e/c,(i+h)/u,(e+r)/c),null===this.TYt){const f=this.jD(),d=f.vB(),p=d.cn(),m=d.fn();_u.offset(-p,-m),Cu.Pu(_u,f.GetAngle()),Cu.offset(p,m),t.YS(Cu,Iu)}else this.TYt(_u,Iu)}CYt(t,s,i,e,h,r,n,o){const a=s.Em(),l=s.Wm();if(t.nA(s),_u.set(i,e,i+h,e+r),Iu.set(-n/a,-o/l,(h-n)/a,(r-o)/l),null===this.TYt){const u=this.jD(),c=u.vB(),f=c.cn(),d=c.fn();_u.offset(-f,-d),Cu.Pu(_u,u.GetAngle()),Cu.offset(f,d),t.YS(Cu,Iu)}else this.TYt(_u,Iu)}WTt(){this.Dft.wW()}$rt(t){}int(t,s){}}}{const Pu=self.Bs;Pu.TY.OHt.MY={}}{const Eu=self.Bs;Eu.TY.OHt.frt={W8t(t){this.jD().Rv(t),this.Sf.YD()}}}{const Au=self.Bs;Au.TY.OHt.drt={}}{let c=function(t){const s=Ru.No(t.width,t.height),i=s.getContext("2d");return i.drawImage(t,0,0),s};c;const Ru=self.Bs;self.pYt=class{constructor(t){this.nTt=t,this.Sf=this.nTt.ck(),this.YM=null,this.OYt=null,this.DYt=null,this.kYt=null,this.LYt=null,this.NYt=null,this.JU=0,this.qU=0,this.Vb=this.Sf.uv(),this.iy=!1,this.KI=!1}Sr(){this.Vb.sP()||(this.Vb.ix(this.YM),this.Vb.ix(this.OYt),this.Vb.ix(this.DYt),this.Vb.ix(this.kYt),this.Vb.ix(this.LYt),this.Vb.ix(this.NYt)),this.YM=null,this.OYt=null,this.DYt=null,this.kYt=null,this.LYt=null,this.NYt=null,this.nTt=null,this.Vb=null,this.KI=!0}br(){return this.KI}mYt(t,s,i,e,h){this.BYt(t,s,i,e,h)}WYt(){return!!this.YM}BYt(t,s,i,e,h){if(!this.KI){const r=t.width,n=t.height,o=(this.JU=r,this.qU=n,s=Math.min(Math.floor(s),r),i=Math.min(Math.floor(i),r),e=Math.min(Math.floor(e),n),r-i),a=n-(h=Math.min(Math.floor(h),n)),l=this.Sf.yO(),u=this.Sf.tL().YU();this.YM=this.Vb.jA(c(t),{jM:l,HM:u}),s<o&&e<a&&(this.OYt=this.Vb.jA(this.VYt(c(t),s,e,o,a),{WM:"repeat",VM:"repeat",jM:l,HM:u})),0<s&&e<a&&(this.DYt=this.Vb.jA(this.VYt(c(t),0,e,s,a),{VM:"repeat",jM:l,HM:u})),0<i&&e<a&&(this.kYt=this.Vb.jA(this.VYt(c(t),o,e,r,a),{VM:"repeat",jM:l,HM:u})),0<e&&s<o&&(this.LYt=this.Vb.jA(this.VYt(c(t),s,0,o,e),{WM:"repeat",jM:l,HM:u})),0<h&&s<o&&(this.NYt=this.Vb.jA(this.VYt(c(t),s,a,o,n),{WM:"repeat",jM:l,HM:u}))}}VYt(t,s,i,e,h){const r=e-s,n=h-i,o=Ru.No(r,n),a=o.getContext("2d");return a.drawImage(t,s,i,r,n,0,0,r,n),o}GYt(){return this.JU}_Yt(){return this.qU}mx(){return this.YM}FYt(){return this.OYt}PYt(){return this.DYt}EYt(){return this.kYt}AYt(){return this.LYt}RYt(){return this.NYt}}}{const Fu=self.Bs;Fu.TY.Keyboard=class extends Fu.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{let i=function(){return s.jL().O6()};i;const Ou=self.Bs;Ou.TY.Keyboard.RIt=class extends Ou.Qxt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}Bxt(){return self.jYt}};let s=null;self.jYt=class extends self.HL{constructor(t){super(t),(s=t).ck().ED().keyboard=this}HYt(t){const s=i();if("string"==typeof t)return s.UYt(t);if("number"==typeof t)return s.zYt(t);throw new TypeError("expected string or number")}}}{const Du=self.Bs;Du.TY.Keyboard.Instance=class extends Du.hTt{constructor(t,s){super(t),this.JYt=new Set,this.qYt=new Set,this.XYt=0,this.YYt="",this.$Yt="";const i=this.ck().Qf();this.A0=new Du.C0(Du.M0.I0(i,"keydown",t=>this.KYt(t.data)),Du.M0.I0(i,"keyup",t=>this.ZYt(t.data)),Du.M0.I0(i,"window-blur",()=>this.QYt()),Du.M0.I0(i,"keyboard-blur",()=>this.QYt()))}Sr(){super.Sr()}KYt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.JYt.has(i)||(this.JYt.add(i),this.qYt.add(s),this.YYt=i,this.XYt=s,this.$Yt=e,this.O4(Du.TY.Keyboard.MY.t$t),this.O4(Du.TY.Keyboard.MY.s$t),this.O4(Du.TY.Keyboard.MY.i$t),this.O4(Du.TY.Keyboard.MY.e$t))}ZYt(t){const s=t.which,i=t.code||s.toString(),e=t.key;this.JYt.delete(i),this.qYt.delete(s),this.YYt=i,this.XYt=s,this.$Yt=e,this.O4(Du.TY.Keyboard.MY.h$t),this.O4(Du.TY.Keyboard.MY.r$t),this.O4(Du.TY.Keyboard.MY.n$t),this.O4(Du.TY.Keyboard.MY.o$t)}QYt(){for(const t of this.qYt)this.qYt.delete(t),this.XYt=t,this.O4(Du.TY.Keyboard.MY.h$t),this.O4(Du.TY.Keyboard.MY.r$t),this.O4(Du.TY.Keyboard.MY.o$t);this.JYt.clear()}UYt(t){return this.JYt.has(t)}zYt(t){return this.qYt.has(t)}iM(){return{tk:this.XYt,tkk:this.$Yt}}eM(t){this.XYt=t.tk,t.hasOwnProperty("tkk")&&(this.$Yt=t.tkk)}ITt(){const t="plugins.keyboard";return[{title:t+".name",properties:[{name:t+".debugger.last-key-code",value:this.XYt},{name:t+".debugger.last-key-string",value:Du.TY.Keyboard.drt.a$t(this.XYt)},{name:t+".debugger.last-typed-key",value:this.$Yt}]}]}}}{const ku=self.Bs,Lu=["ShiftLeft","ShiftRight","ControlLeft","ControlRight","AltLeft","AltRight","MetaLeft","MetaRight"];ku.TY.Keyboard.MY={UYt(t){return this.qYt.has(t)},s$t(t){return this.XYt===t},t$t(){return!0},h$t(){return!0},r$t(t){return this.XYt===t},zYt(t){return t=Math.floor(t),this.qYt.has(t)},e$t(t){return this.XYt===t},o$t(t){return this.XYt===t},i$t(t){const s=Lu[t];return this.YYt===s},n$t(t){const s=Lu[t];return this.YYt===s},l$t(t){const s=Lu[t];return this.JYt.has(s)}}}{const Nu=self.Bs;Nu.TY.Keyboard.frt={}}{let s=function(t){switch(t=Math.floor(t)){case 8:return"backspace";case 9:return"tab";case 13:return"enter";case 16:return"shift";case 17:return"control";case 18:return"alt";case 19:return"pause";case 20:return"capslock";case 27:return"esc";case 33:return"pageup";case 34:return"pagedown";case 35:return"end";case 36:return"home";case 37:return"";case 38:return"";case 39:return"";case 40:return"";case 45:return"insert";case 46:return"del";case 91:return"left window key";case 92:return"right window key";case 93:return"select";case 96:return"numpad 0";case 97:return"numpad 1";case 98:return"numpad 2";case 99:return"numpad 3";case 100:return"numpad 4";case 101:return"numpad 5";case 102:return"numpad 6";case 103:return"numpad 7";case 104:return"numpad 8";case 105:return"numpad 9";case 106:return"numpad *";case 107:return"numpad +";case 109:return"numpad -";case 110:return"numpad .";case 111:return"numpad /";case 112:return"F1";case 113:return"F2";case 114:return"F3";case 115:return"F4";case 116:return"F5";case 117:return"F6";case 118:return"F7";case 119:return"F8";case 120:return"F9";case 121:return"F10";case 122:return"F11";case 123:return"F12";case 144:return"numlock";case 145:return"scroll lock";case 186:return";";case 187:return"=";case 188:return",";case 189:return"-";case 190:return".";case 191:return"/";case 192:return"'";case 219:return"[";case 220:return"\\";case 221:return"]";case 222:return"#";case 223:return"`";default:return String.fromCharCode(t)}};s;const Bu=self.Bs;Bu.TY.Keyboard.drt={u$t(){return this.XYt},a$t(t){return s(t)},c$t(){return this.$Yt}}}{const Wu=self.Bs;Wu.TY.f$t=class extends Wu.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{const Vu=self.Bs;Vu.TY.f$t.RIt=class extends Vu.Qxt{constructor(t){super(t),this.d$t=Vu.wr(self.p$t)}Sr(){super.Sr()}Nxt(){this.wW().uk(this.Sf)}zX(t){return this.wW().X8(t,{jM:this.Sf.yO()})}KX(){this.wW().XI()}m$t(){return this.d$t}g$t(t,s,i,e){const h=this.wW(),r=this.d$t;r.Lm(h.Em()),r.Am(h.Wm()),r.y$t(t),r.w$t(s),r.S$t(i),r.b$t(e),r.v$t()}}}{const ju=self.Bs,Hu=self.$s,Uu=ju.wr(ju.nl),zu=["left","center","right"],Ju=["top","center","bottom"],qu=["word","cjk","character"],Xu=(ju.TY.f$t.Instance=class extends ju.RTt{constructor(t,s){super(t),this.bf="",this.M$t=!0,this.x$t=16,this.T$t=16,this.G$t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789.,;:?!-_~#\"'&()[]|`\\/@+=*$<>";let i="";if(this._$t=1,this.I$t=0,this.lI=0,this.yI=0,this.wI=0,this.vI="word",this.C$t=!0,this.P$t=!1,this.E$t=null,this.A$t=null,this.R$t=-1,this.F$t=-1,this.O$t=0,s){this.bf=s[0],this.M$t=s[1],this.x$t=s[2],this.T$t=s[3],this.G$t=s[4],i=s[5],this._$t=s[6],this.I$t=s[7],this.lI=s[8],this.yI=s[9],this.wI=s[10],this.vI=qu[s[11]];const h=this.jD();h.hN(s[12]),this.P$t=!!s[14]}this.nTt.g$t(this.x$t,this.T$t,this.G$t,i),this.A$t=ju.wr(self.D$t,this.nTt.m$t());const e=this.jD();this.A$t._C(e.Em(),e.Wm()),this.k$t(),this.L$t(),this.Pi.cPt()}Sr(){this.N$t(),this.E$t&&(this.E$t.Sr(),this.E$t=null),this.A$t.Sr(),this.A$t=null,super.Sr()}k$t(){const t=this.A$t;t&&(t.tC(this.M$t),t.xf(this.bf),t.vC(this.vI),t.B$t(zu[this.yI]),t.W$t(Ju[this.wI]),t.V$t(this.I$t),t.nC(this.lI))}j$t(){const t=this.jD();this.A$t._C(t.Em(),t.Wm()),this.A$t.S5(this._$t)}L$t(){if(this.P$t){let t=this.bf;this.M$t&&(t=ju.Nh.Mm(t)),this.E$t?this.E$t.xf(t):this.E$t=ju.wr(ju.wf,this.Sf,t)}else this.E$t&&(this.E$t.Sr(),this.E$t=null)}AM(e){const h=this.Dft.wW(),r=h.mx();if(r){e.nA(r);let t=this.jD(),s=t.vB(),i=this.A$t;i.S5(this._$t),i.H$t(t.SAt()),this.Sf.SO()&&(s=t.eRt(s)),i._C(t.Em(),t.Wm()),i.m$t().U$t(h.eP()),i.Fv(t.GB()),i.AM(e,s.cn(),s.fn(),t.GetAngle()),this.C$t=!1}}iM(){const t={t:this.bf,ebbc:this.M$t,csc:this._$t,csp:this.I$t,lh:this.lI,ha:this.yI,va:this.wI,w:this.vI,cw:this.nTt.m$t().z$t(),ch:this.nTt.m$t().J$t(),cs:this.nTt.m$t().q$t(),sd:this.nTt.m$t().X$t()};return-1!==this.F$t&&(t.tw={st:this.R$t,en:this.F$t,l:this.O$t}),t}eM(t){if(this.N$t(),this.bf=t.t,this.M$t=t.ebbc,this._$t=t.csc,this.I$t=t.csp,this.lI=t.lh,this.yI=t.ha,this.wI=t.va,t.hasOwnProperty("w")){const i=t.w;this.vI="boolean"==typeof i?i?"word":"character":i}else this.vI="word";if(t.hasOwnProperty("tw")){const e=t.tw;this.R$t=e.st,this.F$t=e.en,this.O$t=t.l}const s=this.nTt.m$t();s.y$t(t.cw),s.w$t(t.ch),s.S$t(t.cs),s.b$t(t.sd),this.k$t(),this.L$t(),-1!==this.F$t&&this.xTt()}$rt(t){switch(t){case 0:return this.GC();case 1:return this.M$t;case 2:return this.nTt.m$t().z$t();case 3:return this.nTt.m$t().J$t();case 4:return this.nTt.m$t().q$t();case 5:return this.nTt.m$t().X$t();case 6:return this.Y$t();case 7:return this.$$t();case 8:return this.K$t();case 9:return this.Z$t();case 10:return this.Q$t();case 11:return this.tKt()}}int(t,s){switch(t){case 0:this.sKt(s);break;case 1:this.M$t!==!!s&&(this.M$t=!!s,this.k$t());break;case 2:this.nTt.m$t().y$t(s);break;case 3:this.nTt.m$t().w$t(s);break;case 4:this.nTt.m$t().S$t(s);break;case 5:this.nTt.m$t().b$t(s);break;case 6:this.iKt(s);break;case 7:this.eKt(s);break;case 8:this.hKt(s);break;case 9:this.rKt(s);break;case 10:this.nKt(s);break;case 11:this.oKt(s)}}sKt(t){this.bf!==t&&(this.bf=t,this.A$t.xf(t),this.L$t(),this.Sf.YD())}GC(){return this.bf}aKt(t,s){this.sKt(t),this.R$t=this.Sf.tD(),this.F$t=this.R$t+s/this.uV().c4(),this.O$t=ju.Dp(ju.Nh.Mm(t)),this.A$t.fC(0),this.xTt()}N$t(){this.R$t=-1,this.F$t=-1,this.O$t=0,this.A$t.fC(-1),this.oTt()}lKt(){-1!==this.F$t&&(this.N$t(),this.O4(ju.TY.f$t.MY.uKt),this.Sf.YD())}iKt(t){this._$t!==t&&(this._$t=t,this.A$t.S5(this._$t),this.Sf.YD())}Y$t(){return this._$t}eKt(t){this.I$t!==t&&(this.I$t=t,this.A$t.V$t(this.I$t),this.Sf.YD())}$$t(){return this.I$t}hKt(t){this.lI!==t&&(this.lI=t,this.A$t.nC(this.lI),this.Sf.YD())}K$t(){return this.lI}rKt(t){this.yI!==t&&(this.yI=t,this.k$t(),this.Sf.YD())}Z$t(){return this.yI}nKt(t){this.wI!==t&&(this.wI=t,this.k$t(),this.Sf.YD())}Q$t(){return this.wI}cKt(t){this.oKt(qu[t])}oKt(t){this.vI!==t&&(this.vI=t,this.k$t(),this.Sf.YD())}tKt(){return this.vI}fKt(t){this.P$t=!!t,this.L$t()}dKt(){return this.P$t}pKt(){return this.j$t(),this.A$t.CC()}mKt(){return this.j$t(),this.A$t.EC()}gKt(t,s){this.j$t();const i=this.jD(),e=(Uu.set(t-i.Hv(),s-i.Jv()),Uu.rotate(-i.GetAngle()),Uu.offset(i.Em()*i.vW(),i.Wm()*i.xW()),this.A$t.FC(Uu.cl(),Uu.dl()));if(e){const h=e.Cg("tag");if(h)return h.param}return""}yKt(t,s,i){const e=this.gKt(s,i);return e&&ju.Gh(t,e)}wKt(t,s){this.j$t(),s=Math.floor(s);const i=this.A$t.DC(t,s);if(!i)return null;const e=this.jD();return Uu.set(i.xg(),i.Gg()),Uu.offset(-e.Em()*e.vW(),-e.Wm()*e.xW()),Uu.rotate(e.GetAngle()),Uu.offset(e.Hv(),e.Jv()),{x:Uu.cl(),y:Uu.dl(),width:i.Em(),height:i.Wm()}}SKt(t){return this.j$t(),this.A$t.kC(t)}YK(){const s=this.Sf.tD();if(s>=this.F$t)this.N$t(),this.O4(ju.TY.f$t.MY.uKt),this.Sf.YD();else{let t=ju.Wr(this.R$t,this.F$t,s,0,this.O$t);(t=Math.floor(t))!==this.A$t.dC()&&(this.A$t.fC(t),this.Sf.YD())}}ITt(){const t="plugins.spritefont2";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.GC(),o8t:t=>this.sKt(t)},{name:t+".properties.scale.name",value:this.Y$t(),o8t:t=>this.iKt(t)},{name:t+".properties.character-spacing.name",value:this.$$t(),o8t:t=>this.eKt(t)},{name:t+".properties.line-height.name",value:this.K$t(),o8t:t=>this.hKt(t)}]}]}Bxt(){return self.bKt}},new WeakMap),Yu=new Map([["left",0],["center",1],["right",2]]),$u=new Map([["top",0],["center",1],["bottom",2]]);self.bKt=class extends self.P6{constructor(){super(),Xu.set(this,self.qN.ZN().O6())}get text(){return Xu.get(this).GC()}set text(t){Hu.Ae(t);const s=Xu.get(this);s.N$t(),s.sKt(t)}vKt(t,s){Hu.Ae(t),Hu.Ie(s);const i=Xu.get(this);i.N$t(),i.aKt(t,s)}MKt(){Xu.get(this).lKt()}set xKt(t){Hu.Ie(t),Xu.get(this).iKt(t)}get xKt(){return Xu.get(this).Y$t()}set TKt(t){Hu.Ie(t),Xu.get(this).eKt(t)}get TKt(){return Xu.get(this).$$t()}set lineHeight(t){Hu.Ie(t),Xu.get(this).hKt(t)}get lineHeight(){return Xu.get(this).K$t()}set pH(t){Hu.Ae(t);const s=Yu.get(t);if(void 0===s)throw new Error("invalid mode");Xu.get(this).rKt(s)}get pH(){return zu[Xu.get(this).Z$t()]}set verticalAlign(t){Hu.Ae(t);const s=$u.get(t);if(void 0===s)throw new Error("invalid mode");Xu.get(this).nKt(s)}get verticalAlign(){return Ju[Xu.get(this).Q$t()]}set mH(t){if(!qu.includes(t))throw new Error("invalid mode");Xu.get(this).oKt(t)}get mH(){return Xu.get(this).tKt()}set GKt(t){Xu.get(this).fKt(!!t)}get GKt(){return Xu.get(this).dKt()}get SH(){return Xu.get(this).pKt()}get bH(){return Xu.get(this).mKt()}_Kt(){const t=Xu.get(this);return[t.pKt(),t.mKt()]}IKt(t,s,i){return Hu.Ae(t),Hu.Ie(s),Hu.Ie(i),Xu.get(this).yKt(t,s,i)}CKt(t,s){return Hu.Ie(t),Hu.Ie(s),Xu.get(this).gKt(t,s)}PKt(t,s=0){return Hu.Ae(t),Hu.Ie(s),Xu.get(this).wKt(t,s)}EKt(t){return Hu.Ae(t),Xu.get(this).SKt(t)}}}{const Ku=self.Bs;Ku.TY.f$t.MY={AKt(t,s){return s?this.bf===t:Ku.Gh(this.bf,t)},RKt(){return-1!==this.F$t},uKt(){return!0},FKt(t,s,i){return this.yKt(t,s,i)}}}{const Zu=self.Bs;Zu.TY.f$t.frt={xf(t){this.N$t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.sKt(t.toString())},OKt(t){this.N$t(),(t=(t="number"==typeof t&&t<1e9?Math.round(1e10*t)/1e10:t).toString())&&this.sKt(this.bf+t)},DKt(t,s){this.N$t(),"number"==typeof t&&t<1e9&&(t=Math.round(1e10*t)/1e10),this.aKt(t.toString(),s)},kKt(){this.lKt()},S5(t){this.iKt(t)},LKt(t){this.eKt(t)},nC(t){this.hKt(t)},y$t(t,s){let i=!1,e=this.nTt.m$t();for(const h of t)if(" "===h)e.NKt(s),i=!0;else{const r=e.BKt(h);r&&(r.WKt(s),i=!0)}i&&e.VKt(),this.Sf.YD()},W8t(t){this.jD().Rv(t),this.Sf.YD()},jKt(t){this.rKt(t)},HKt(t){this.nKt(t)},UKt(t){this.cKt(t)},zKt(t){this.fKt(t)}}}{const Qu=self.Bs;Qu.TY.f$t.drt={JKt(t){const s=this.nTt.m$t().BKt(t);return s?s.qKt():this.nTt.m$t().z$t()},XKt(){return this.T$t},YKt(){return this._$t},$Kt(){return this.I$t},KKt(){return this.lI},Text(){return this.bf},ZKt(){return this.M$t?Qu.Nh.Mm(this.bf):this.bf},QKt(){return this.pKt()},tZt(){return this.mKt()},sZt(t,s){return this.gKt(t,s)},iZt(t){return this.SKt(t)},eZt(t,s){const i=this.wKt(t,s);return i?i.x:0},hZt(t,s){const i=this.wKt(t,s);return i?i.y:0},rZt(t,s){const i=this.wKt(t,s);return i?i.width:0},nZt(t,s){const i=this.wKt(t,s);return i?i.height:0}}}{const tc=self.Bs;self.oZt=class{constructor(t,s,i,e){let h=t.z$t(),r=t.J$t();this.d$t=t,this.aZt=s,this.lZt=new tc.Rect(i,e,i+h,e+r),this.uZt=new tc.Rect,this.cZt=-1,this.fZt()}Sr(){this.d$t=null,this.lZt=null,this.uZt=null}fZt(){let t=this.d$t.Em(),s=this.d$t.Wm();this.uZt._(this.lZt),this.uZt.Ct(t,s),this.uZt.nu(this.d$t.eP())}m$t(){return this.d$t}dZt(){return this.aZt}eP(){return this.uZt}WKt(t){this.cZt=t}qKt(){return this.cZt<0?this.d$t.z$t():this.cZt}}}{let r=function(t,s){t=t.trim();const i=parseFloat(t);return isFinite(i)?t.endsWith("%")?s*i/100:i:0},C=function(t){return(h=h||P.No(32,32).getContext("2d")).fillStyle="#FFFFFF",h.fillStyle=t,h.fillStyle},P=(r,C,self.Bs),E=new P.Rect,A=new P.ou,R=new P.$o,s=new Set(["left","center","right"]),i=new Set(["top","center","bottom"]),e=new Set(["word","cjk","character"]),h=null;self.D$t=class{constructor(t){this.d$t=t,this.CI=0,this.EI=0,this.bf="",this.dI=!1,this.SI=null,this.bI=P.wr(P.xm),this.vI="word",this.xI=!1,this.TI=!1,this.yI="left",this.wI="top",this.Y7=1,this.pZt=1,this.mZt=0,this.lI=0,this.Pv=P.wr(P.$o),this._I=-1,this.II=0,this.HI=t=>this.UI(t),this.d$t.gZt(this)}Sr(){this.d$t.yZt(this),this.Pv=null,this.HI=null,this.bI.ac(),this.bI=null,this.d$t=null,this.SI=null}UI(t){if(t.Nm())return{width:0,height:0};const s=t.tg(),i=t.Cg("scale"),e=(i?parseFloat(i.param):this.Y7)*this.pZt,h=t.Cg("scalex"),r=(h?parseFloat(h.param):1)*e,n=t.Cg("scaley"),o=(n?parseFloat(n.param):1)*e,a=this.d$t.J$t()*o+this.lI,l=this.m$t(),u=l.z$t()*r,c=this.wZt();if(l.SZt()){let i=0,e=0;for(const f of s){let t=u,s=l.BKt(f);s?t=s.qKt()*r:" "===f&&(t=l.bZt()*r),e+=t,++i}return{width:e+i*c,height:a}}{const d=s.length,p=Math.max(d,0);return{width:u*d+p*c,height:a}}}QI(){this.TI=!0}rI(){this.QI(),this.xI=!0,this.bI.ac()}_C(t,s){t<=0||s<=0||this.CI===t&&this.EI===s||(this.CI!==t?this.rI():this.QI(),this.CI=t,this.EI=s)}fC(t){this._I=Math.floor(t)}dC(){return this._I}FC(t,s){this.PC();const i=this.bI._m();for(const e of i)if(s>e.Gg()&&s<e.Gg()+e.Wm())for(const h of e.Jm())if(t>=h.xg()&&t<h.xg()+h.Em())return h;return null}*OC(t){this.PC();const s=this.bI._m();for(const i of s)for(const e of i.Jm()){const h=e.Cg("tag");h&&P.Gh(h.param,t)&&(yield e)}}DC(t,s){for(const i of this.OC(t)){if(0===s)return i;--s}return null}kC(t){let s=0;for(const i of this.OC(t))++s;return s}PC(){this.HC(),this.UC()}HC(){if(this.xI){!this.dI||this.SI&&this.SI.toString()===this.bf||(this.SI=new P.Nh(this.bf,{$p:!0}));const t=-this.wZt();this.bI.xm(this.dI?this.SI.dm():this.bf,this.HI,this.CI,this.vI,t),this.xI=!1}}UC(){this.TI&&(this.zC(),this.TI=!1)}zC(){let i=0,e=this.lI,h=P.ho(this.bI._m());for(const s of h){s.Mg(NaN),s.Tg(NaN);for(const r of s.Jm())r.Mg(NaN),r.Tg(NaN)}const t=h.reduce((t,s)=>t+s.Wm(),0)-e;"center"===this.wI?i=Math.max(Math.floor(this.EI/2-t/2),0):"bottom"===this.wI&&(i=Math.floor(this.EI-t));for(let t=0,s=h.length;t<s;++t){const n=h[t],o=n.Wm();if(0<t&&i>this.EI-(o-e))break;0<=i&&this.$C(n,i),i+=o}}$C(t,s){let i=0;"center"===this.yI?i=Math.max(Math.floor((this.CI-t.Em())/2),0):"right"===this.yI&&(i=Math.max(Math.floor(this.CI-t.Em()),0)),t.Mg(i),t.Tg(s);for(const e of t.Jm())e.Nm()||(this.vZt(e,i,s),i+=e.Em())}vZt(t,s,i){const e=t.Cg("offsetx"),h=(s+=e?r(e.param,t.Wm()):0,t.Cg("offsety"));i+=h?r(h.param,t.Wm()):0,t.Mg(s),t.Tg(i)}AM(t,s,i,e){this.PC(),this.II=0;const h=P.ho(this.bI._m()),r=Math.sin(e),n=Math.cos(e);for(const o of h)this.MZt(t,o,s,i,r,n)}MZt(t,s,i,e,h,r){const n=s.xg(),o=s.Gg();if(Number.isFinite(n)&&Number.isFinite(o)){const a=s.Wm();for(const l of s.Jm())this.QC(t,l,i,e,h,r,a)}}QC(o,a,l,u,c,f,d){let p=a.xg(),m=a.Gg();if(Number.isFinite(p)&&Number.isFinite(m)){let r=a.tg(),n=a.Em();if(-1!==this._I){if(this.II>=this._I)return;this.II+r.length>this._I&&(r=r.slice(0,this._I-this.II),n=this.UI(a).width),this.II+=r.length}const g=a.Cg("background");if(!(P.np(r)&&!g||a.Pg("hide"))){const y=a.Cg("scale"),w=(y?parseFloat(y.param):this.Y7)*this.pZt,S=a.Cg("scalex"),b=(S?parseFloat(S.param):1)*w,v=a.Cg("scaley"),M=(v?parseFloat(v.param):1)*w,x=this.d$t.J$t()*M,T=this.lI;m+=d-T-x;let t=1,s=a.Cg("opacity"),i=(s&&(t=parseFloat(s.param)/100),g&&(o.uS(),R.ja(C(g.param)),R.ca(R.wa()*t*this.Pv.wa()),R.Pa(),o.Fv(R),E.set(p,m,p+n,m+x),E.Fl()>this.CI&&E.Il(this.CI),A.Eu(E,c,f),A.offset(l,u),o.ou(A),o.hS()),a.Cg("color")),e=(i?(R.ja(C(i.param)),R.ca(this.Pv.wa())):R._(this.Pv),R.ca(R.wa()*t),R.Pa(),o.Fv(R),this.d$t.z$t()*b),h=Math.abs(this.wZt());for(const G of r){const _=this.d$t.BKt(G);if(_){const I=_.qKt()*b;if(p+I>this.CI+h+1e-5)return;E.set(p,m,p+e,m+x),A.Eu(E,c,f),A.offset(l,u),o.YS(A,_.eP()),p+=I+this.mZt}else p+=this.d$t.bZt()*b+this.mZt}}}}m$t(){return this.d$t}tC(t){this.dI!==(t=!!t)&&(this.dI=t,this.rI())}eI(){return this.dI}xf(t){this.bf!==t&&(this.bf=t,this.rI())}vC(t){if(!e.has(t))throw new Error("invalid word wrap mode");this.vI!==t&&(this.vI=t,this.rI())}B$t(t){if(!s.has(t))throw new Error("invalid alignment");this.yI!==t&&(this.yI=t,this.QI())}W$t(t){if(!i.has(t))throw new Error("invalid alignment");this.wI!==t&&(this.wI=t,this.QI())}S5(t){this.Y7!==t&&(this.Y7=t,this.rI())}b5(){return this.Y7}H$t(t){this.pZt!==t&&(this.pZt=t,this.rI())}SAt(){return this.pZt}V$t(t){this.mZt!==t&&(this.mZt=t,this.rI())}wZt(){return this.mZt}nC(t){this.lI=t,this.rI()}oC(){return this.lI}eA(t){t=P.Gr(t,0,1),this.Pv.a=t}Fv(t){this.Pv.equals(t)||this.Pv._(t)}rA(){return this.Pv}CC(){return this.PC(),this.bI.ug()}EC(){this.PC();const t=this.d$t.J$t()*this.Y7,s=this.lI,i=t+s;return this.bI.Im()*i-s}}}{const sc=self.Bs,ic={width:256,height:256,xZt:16,TZt:16,characterSet:""};self.p$t=class{constructor(t){if((t=Object.assign({},ic,t)).width<=0||t.height<=0||t.xZt<=0||t.TZt<=0)throw new Error("invalid size");this.dg=t.width,this.pg=t.height,this.x$t=t.xZt,this.T$t=t.TZt,this.G$t=t.characterSet,this.GZt="",this._Zt=null,this.IZt=!1,this.CZt=-1,this.uZt=new sc.Rect(0,0,1,1),this.PZt=new Map,this.EZt=!0,this.AZt=new Set}Sr(){this.uZt=null,this.RZt(),this.PZt=null,this.AZt&&this.AZt.clear(),this.AZt=null}RZt(){for(let t of this.PZt.values())t.Sr();this.PZt.clear()}gZt(t){this.AZt.add(t)}yZt(t){this.AZt.delete(t)}v$t(){if(this.EZt){this.RZt();let s=sc.Fp(this.G$t),h=Math.floor(this.dg/this.x$t),t=Math.floor(this.pg/this.T$t),i=h*t;for(let e=0,t=s.length;e<t&&!(e>=i);++e){let i=s[e];if(!this.PZt.has(i)){let t=e%h,s=Math.floor(e/h);this.PZt.set(i,sc.wr(self.oZt,this,i,t*this.x$t,s*this.T$t))}}if(this.IZt=!1,this.CZt=-1,Array.isArray(this._Zt))for(let s of this._Zt)if(Array.isArray(s)&&2===s.length){let i=s[0],t=s[1];if("number"==typeof i&&isFinite(i)&&"string"==typeof t&&i!==this.x$t)for(let s of t){let t=this.PZt.get(s);t?(t.WKt(i),this.IZt=!0):" "===s&&(this.CZt=i,this.IZt=!0)}}this.EZt=!1;for(let t of this.AZt)t.rI()}}VKt(){this.IZt=!0;for(const t of this.AZt)t.rI()}BKt(t){return this.v$t(),this.PZt.get(t)||null}SZt(){return this.IZt}Lm(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.dg!==t&&(this.dg=t,this.EZt=!0)}Em(){return this.dg}Am(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.pg!==t&&(this.pg=t,this.EZt=!0)}Wm(){return this.pg}U$t(t){if(!this.uZt.equals(t)){this.uZt._(t);for(const s of this.PZt.values())s.fZt()}}eP(){return this.uZt}y$t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.x$t!==t&&(this.x$t=t,this.EZt=!0)}z$t(){return this.x$t}w$t(t){if((t=Math.floor(t))<=0)throw new Error("invalid size");this.T$t!==t&&(this.T$t=t,this.EZt=!0)}J$t(){return this.T$t}S$t(t){this.G$t!==t&&(this.G$t=t,this.EZt=!0)}q$t(){return this.G$t}b$t(t){if(this.GZt!==t&&(this.GZt=t,this.EZt=!0,this._Zt=null,this.GZt.length))try{this._Zt=JSON.parse(this.GZt)}catch(t){this._Zt=null}}X$t(){return this.GZt}NKt(t){this.CZt!==(t=t<0?-1:t)&&(this.CZt=t,0<=this.CZt)&&(this.IZt=!0)}bZt(){return this.CZt<0?this.x$t:this.CZt}}}{const ec=self.Bs;ec.TY.FZt=class extends ec.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{let h=function(){return s.jL().O6()};h;const hc=self.Bs,rc=self.$s;hc.TY.FZt.RIt=class extends hc.Qxt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}Bxt(){return self.OZt}};let s=null;self.OZt=class extends self.HL{constructor(t){super(t),(s=t).ck().ED().AD=this}DZt(t){return h().kZt(t)[0]}LZt(t){return h().kZt(t)[1]}NZt(t){return h().kZt(t)}BZt(t){return h().WZt(t)}VZt(t){rc.Ae(t),h().jZt(t)}HZt(t){const s=h(),i=s.ck(),e=i.jk(t);s.UZt(e)}}}{let n=self.Bs,o=null;n.TY.FZt.Instance=class extends n.hTt{constructor(t,s){super(t,"mouse"),this.zZt=[!1,!1,!1,!1,!1],this.JZt=0,this.qZt=0,this.XZt=0,this.YZt=0,this.$Zt=0,this.KZt=0,this.ZZt=0,this.QZt=0,this.tQt=!1,this.sQt=0,this.iQt=0,this.mTt([["pointer-lock-change",t=>this.eQt(t)],["pointer-lock-error",t=>this.hQt(t)]]);const i=this.ck().Qf();this.A0=new n.C0(n.M0.I0(i,"pointermove",t=>this.rQt(t.data)),n.M0.I0(i,"pointerdown",t=>this.nQt(t.data)),n.M0.I0(i,"pointerup",t=>this.oQt(t.data)),n.M0.I0(i,"dblclick",t=>this.aQt(t.data)),n.M0.I0(i,"wheel",t=>this.lQt(t.data)),n.M0.I0(i,"window-blur",()=>this.R5t()))}Sr(){super.Sr()}nQt(t){"mouse"===t.pointerType&&(this.JZt=t.pageX-this.Sf.LN(),this.qZt=t.pageY-this.Sf.NN(),this.uQt(t.lastButtons,t.buttons))}rQt(t){this.sQt=t.movementX,this.iQt=t.movementY,this.O4(n.TY.FZt.MY.cQt),this.sQt=0,this.iQt=0,"mouse"===t.pointerType&&(this.JZt=t.pageX-this.Sf.LN(),this.qZt=t.pageY-this.Sf.NN(),this.uQt(t.lastButtons,t.buttons))}oQt(t){"mouse"===t.pointerType&&this.uQt(t.lastButtons,t.buttons)}uQt(t,s){this.fQt(t,s,1,0),this.fQt(t,s,4,1),this.fQt(t,s,2,2),this.fQt(t,s,8,3),this.fQt(t,s,16,4)}fQt(t,s,i,e){!(t&i)&&s&i?this.dQt(e):t&i&&!(s&i)&&this.pQt(e)}dQt(t){this.zZt[t]=!0,this.O4(n.TY.FZt.MY.mQt),this.XZt=t,this.YZt=0,this.O4(n.TY.FZt.MY.gQt),this.O4(n.TY.FZt.MY.yQt)}pQt(t){this.zZt[t]&&(this.zZt[t]=!1,this.XZt=t,this.O4(n.TY.FZt.MY.wQt))}aQt(t){this.XZt=t.button,this.YZt=1,this.O4(n.TY.FZt.MY.gQt),this.O4(n.TY.FZt.MY.yQt)}lQt(t){this.$Zt=t.deltaY<0?1:0,this.KZt=t.deltaX,this.ZZt=t.deltaY,this.QZt=t.deltaZ,this.O4(n.TY.FZt.MY.SQt)}R5t(){for(let t=0,s=this.zZt.length;t<s;++t){if(!this.zZt[t])return;this.zZt[t]=!1,this.XZt=t,this.O4(n.TY.FZt.MY.wQt)}}kZt(t){const s=this.Sf.bD(),i=this.JZt,e=this.qZt;if(void 0===t){const h=s.zD(0);return h.Cq(i,e)}{const r=s.HD(t);return r?r.kN(i,e):[0,0]}}WZt(t){return t=Math.floor(t),!!this.zZt[t]}bQt(){return 0<=this.JZt&&0<=this.qZt&&this.JZt<this.Sf.bNt()&&this.qZt<this.Sf.vNt()}jZt(t){o!==t&&(o=t,this.gTt("cursor",t))}async UZt(t){if(!n.mi.Ti&&t){const s=t.fMt();if(s){const i=s.jD(),e=s.WTt();if(i&&e&&o!==e){const h=await(o=e).y_t(),r=`url(${h}) ${Math.round(i.vW()*e.Em())} ${Math.round(i.xW()*e.Wm())}, auto`;this.gTt("cursor",r)}}}}eQt(t){this.vQt(t["has-pointer-lock"])}hQt(t){this.vQt(t["has-pointer-lock"]),this.O4(n.TY.FZt.MY.MQt)}vQt(t){this.tQt!==t&&(this.tQt=t,this.tQt?this.O4(n.TY.FZt.MY.xQt):this.O4(n.TY.FZt.MY.TQt))}ITt(){const t="plugins.mouse";return[{title:t+".name",properties:[{name:t+".debugger.absolute-position",value:this.JZt+","+this.qZt},{name:t+".debugger.left-button",value:this.zZt[0]},{name:t+".debugger.middle-button",value:this.zZt[1]},{name:t+".debugger.right-button",value:this.zZt[2]},{name:t+".debugger.button-4",value:this.zZt[3]},{name:t+".debugger.button-5",value:this.zZt[4]}]},{title:t+".debugger.position-on-each-layer",properties:this.Sf.bD().E5().map(t=>({name:"$"+t.uf(),value:t.kN(this.JZt,this.qZt).join(", ")}))}]}}}{const nc=self.Bs;nc.TY.FZt.MY={gQt(t,s){return this.XZt===t&&this.YZt===s},mQt(){return!0},GQt(t){return this.zZt[t]},wQt(t){return this.XZt===t},_Qt(t){const s=this.Sf.s1t(),i=s.Gbt(),e=[];return this.bQt()&&e.push([this.JZt,this.qZt]),nc.xor(this.Sf.hO().C3t(t,e,i),i)},yQt(t,s,i){if(t!==this.XZt||s!==this.YZt)return!1;if(!this.bQt())return!1;const e=this.JZt,h=this.qZt;return this.Sf.hO().C3t(i,[[e,h]],!1)},SQt(t){return 2===t||this.$Zt===t},xQt(){return!0},TQt(){return!0},MQt(){return!0},IQt(){return this.tQt},cQt(){return!0}}}{const oc=self.Bs,ac=["auto","pointer","text","crosshair","move","help","wait","none"];oc.TY.FZt.frt={CQt(t){this.jZt(ac[t])},PQt(t){this.UZt(t)},EQt(t){this.wTt("request-pointer-lock",{unadjustedMovement:t})},AQt(){this.gTt("release-pointer-lock")}}}{const lc=self.Bs;lc.TY.FZt.drt={I2t(t){return this.kZt(t)[0]},C2t(t){return this.kZt(t)[1]},RQt(){return this.JZt},FQt(){return this.qZt},OQt(){return this.sQt},DQt(){return this.iQt},kQt(){return this.KZt},LQt(){return this.ZZt},NQt(){return this.QZt}}}{const uc=self.Bs;uc.TY.BQt=class extends uc.Uxt{constructor(t){super(t,"text-input"),this.Xxt("click",(t,s)=>t.WQt(s)),this.Xxt("dblclick",(t,s)=>t.aQt(s)),this.Xxt("change",(t,s)=>t.VQt(s))}Sr(){super.Sr()}}}{const cc=self.Bs;cc.TY.BQt.RIt=class extends cc.Qxt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const fc=self.Bs,dc=self.$s,pc=["text","password","email","number","tel","url","textarea","search"],mc=(fc.TY.BQt.Instance=class extends fc.XTt{constructor(t,s){super(t,"text-input"),this.bf="",this.jQt="",this.HQt="",this.swt=!0,this.UQt=!1,this.zQt=!1,this.If="text",this.ZTt=!0,this.JQt=-1,this.vf="",this.qQt="",s&&(this.bf=s[0],this.jQt=s[1],this.HQt=s[2],this.jD().hN(s[3]),this.swt=s[4],this.UQt=s[5],this.zQt=s[6],this.If=pc[s[7]],this.ZTt=s[8],this.vf=s[9],this.qQt=s[10]),this.lGt({type:this.If,id:this.vf,className:this.qQt})}Sr(){super.Sr()}uGt(){return{text:this.bf,placeholder:this.jQt,title:this.HQt,isEnabled:this.swt,isReadOnly:this.UQt,spellCheck:this.zQt,maxLength:this.JQt}}async WQt(t){this.iTt("click",!0),await this.L4(fc.TY.BQt.MY.XQt)}async aQt(t){this.iTt("dblclick",!0),await this.L4(fc.TY.BQt.MY.YQt)}async VQt(t){this.bf=t.text,this.iTt("change",!0),await this.L4(fc.TY.BQt.MY.$Qt)}sKt(t){this.bf!==t&&(this.bf=t,this.dGt())}KQt(){return this.bf}ZQt(t){this.jQt!==t&&(this.jQt=t,this.dGt())}QQt(){return this.jQt}tts(t){this.HQt!==t&&(this.HQt=t,this.dGt())}sts(){return this.HQt}XMt(t){this.swt!==(t=!!t)&&(this.swt=t,this.dGt())}$Mt(){return this.swt}its(t){this.UQt!==(t=!!t)&&(this.UQt=t,this.dGt())}ets(){return this.UQt}hts(t){t=Math.max(+t,-1),this.JQt!==t&&(this.JQt=t,this.dGt())}rts(){return this.JQt}nts(){Promise.resolve().then(()=>this.nGt("scroll-to-bottom"))}AM(t){}iM(){return{t:this.bf,p:this.jQt,ti:this.HQt,e:this.swt,r:this.UQt,sp:this.zQt,ml:this.JQt,type:this.If,id:this.vf}}eM(t){this.bf=t.t,this.jQt=t.p,this.HQt=t.ti,this.swt=t.e,this.UQt=t.r,this.zQt=t.sp,this.JQt=t.hasOwnProperty("ml")?t.ml:-1,this.If=t.type,this.vf=t.id,this.dGt()}$rt(t){switch(t){case 0:return this.bf;case 1:return this.jQt;case 2:return this.HQt;case 4:return this.swt;case 5:return this.UQt;case 6:return this.zQt;case 8:return this.ZTt}}int(t,s){switch(t){case 0:this.bf!==s&&(this.bf=s,this.dGt());break;case 1:this.jQt!==s&&(this.jQt=s,this.dGt());break;case 2:this.HQt!==s&&(this.HQt=s,this.dGt());break;case 4:this.swt!==!!s&&(this.swt=!!s,this.dGt());break;case 5:this.UQt!==!!s&&(this.UQt=!!s,this.dGt());break;case 6:this.zQt!==!!s&&(this.zQt=!!s,this.dGt());break;case 8:this.ZTt=!!s}}ITt(){const s=fc.TY.BQt.frt,t="plugins.textbox";return[{title:t+".name",properties:[{name:t+".properties.text.name",value:this.bf,o8t:t=>this.PTt(s.xf,t)},{name:t+".properties.enabled.name",value:this.swt,o8t:t=>this.PTt(s.q2t,t)},{name:t+".properties.read-only.name",value:this.UQt,o8t:t=>this.PTt(s.ots,t)}]}]}Bxt(){return self.ats}},new WeakMap);self.ats=class extends self.A6{constructor(){super(),mc.set(this,self.qN.ZN().O6())}set text(t){dc.Ae(t),mc.get(this).sKt(t)}get text(){return mc.get(this).KQt()}set placeholder(t){dc.Ae(t),mc.get(this).ZQt(t)}get placeholder(){return mc.get(this).QQt()}set lts(t){dc.Ae(t),mc.get(this).tts(t)}get lts(){return mc.get(this).sts()}set isEnabled(t){mc.get(this).XMt(t)}get isEnabled(){return mc.get(this).$Mt()}set isReadOnly(t){mc.get(this).its(t)}get isReadOnly(){return mc.get(this).ets()}set maxLength(t){dc.Ie(t),mc.get(this).hts(t)}get maxLength(){return mc.get(this).rts()}uts(){mc.get(this).nts()}}}{const gc=self.Bs;gc.TY.BQt.MY={AKt(t,s){return 0===s?gc.Gh(this.bf,t):this.bf===t},$Qt(){return!0},XQt(){return!0},YQt(){return!0}}}{const yc=self.Bs;yc.TY.BQt.frt={xf(t){this.sKt(t.toString())},OKt(t){""!==t&&this.sKt(this.KQt()+t)},cts(t){this.ZQt(t)},fts(t){this.tts(t)},ots(t){this.its(0===t)},dts(){this.nts()},pts(t){this.hts(t)}}}{const wc=self.Bs;wc.TY.BQt.drt={Text(){return this.KQt()},gts(){return this.rts()}}}{const Sc=self.Bs;Sc.TY.Touch=class extends Sc.mxt{constructor(t){super(t)}Sr(){super.Sr()}}}{let i=function(){return s.jL().O6()};i;const bc=self.Bs,vc=self.$s;bc.TY.Touch.RIt=class extends bc.Qxt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}Bxt(){return self.yts}};let s=null;self.yts=class extends self.HL{constructor(t){super(t),(s=t).ck().ED().RD=this}requestPermission(t){vc.Ae(t);const s=i();if("orientation"===t)return s.wts(0);if("motion"===t)return s.wts(1);throw new Error("invalid type")}}}{const C=self.Bs;C.TY.Touch.Instance=class extends C.hTt{constructor(t,s){super(t,"touch"),this.Sts=new Map,this.bts=!1,this.vts=!1,this.Mts=0,this.xts=0,this.Tts=0,this.Gts=0,this._ts=0,this.Its=0,this.Cts=0,this.Pts=0,this.Ets=0,this.Ats=0,this.Rts=0,this.Fts=0,this.Ots=0,this.Dts=0,this.kts=0,this.Lts=0,this.YZt=0,this.Nts=[],s&&(this.bts=s[0]),this.pTt("permission-result",t=>this.Bts(t));const i=this.ck().Qf();this.A0=new C.C0(C.M0.I0(i,"pointerdown",t=>this.nQt(t.data)),C.M0.I0(i,"pointermove",t=>this.rQt(t.data)),C.M0.I0(i,"pointerup",t=>this.oQt(t.data,!1)),C.M0.I0(i,"pointercancel",t=>this.oQt(t.data,!0)),C.M0.I0(i,"deviceorientation",t=>this.Wts(t.data)),C.M0.I0(i,"deviceorientationabsolute",t=>this.Vts(t.data)),C.M0.I0(i,"devicemotion",t=>this.jts(t.data)),C.M0.I0(i,"tick2",t=>this.j$()))}Sr(){this.Sts.clear(),super.Sr()}nQt(t){if("mouse"===t.pointerType){if(!this.bts)return;this.vts=!0}const s=t.pointerId;if(!this.Sts.has(s)){const i=t.pageX-this.Sf.LN(),e=t.pageY-this.Sf.NN(),h=performance.now(),r=this.Sts.size,n=(this.Rts=r,this.Fts=s,C.wr(C.TY.Touch.Hts));n.QCt(h,i,e,s,r),this.Sts.set(s,n),this.O4(C.TY.Touch.MY.Uts),this.O4(C.TY.Touch.MY.zts),this.Dts=i,this.kts=e,this.YZt=0,this.O4(C.TY.Touch.MY.Jts)}}rQt(t){if("mouse"!==t.pointerType||this.vts){const s=this.Sts.get(t.pointerId);if(s){const i=performance.now();if(!(i-s.ER()<2)){const e=t.pageX-this.Sf.LN(),h=t.pageY-this.Sf.NN();s.w7(i,e,h,t.width,t.height,t.pressure)}}}}oQt(t,s){if("mouse"===t.pointerType){if(!this.vts)return;this.vts=!1}const i=performance.now(),e=t.pointerId,h=this.Sts.get(e);if(h){if(this.Rts=h.qts(),this.Fts=h.pV(),!s){const r=t.pageX-this.Sf.LN(),n=t.pageY-this.Sf.NN();this.Dts=r,this.kts=n,this.YZt=1,this.O4(C.TY.Touch.MY.Jts)}if(this.O4(C.TY.Touch.MY.Xts),this.O4(C.TY.Touch.MY.Yts),!s){const o=h.$ts(i);"single-tap"===o?(this.O4(C.TY.Touch.MY.Kts),this.Dts=h.Hv(),this.kts=h.Jv(),this.O4(C.TY.Touch.MY.Zts)):"double-tap"===o&&(this.O4(C.TY.Touch.MY.Qts),this.Dts=h.Hv(),this.kts=h.Jv(),this.O4(C.TY.Touch.MY.tss))}h.Sr(),this.Sts.delete(e)}}wts(i){return this.wTt("request-permission",{type:i}),new Promise((t,s)=>{this.Nts.push({type:i,resolve:t,reject:s})})}Bts(t){const s=t.result,i=t.type,e=(this.Ots=i,this.Nts.filter(t=>t.type===i));for(const h of e)h.resolve(s?"granted":"denied");this.Nts=this.Nts.filter(t=>t.type!==i),s?(this.O4(C.TY.Touch.MY.sss),0===i?this.Sf.O4t():this.Sf.D4t()):this.O4(C.TY.Touch.MY.iss)}Wts(t){"number"==typeof t.webkitCompassHeading?this.Mts=t.webkitCompassHeading:t.absolute&&(this.Mts=t.alpha),this.xts=t.alpha,this.Tts=t.beta,this.Gts=t.gamma}Vts(t){this.Mts=t.alpha}jts(t){const s=t.acceleration,i=(s&&(this._ts=s.x,this.Its=s.y,this.Cts=s.z),t.accelerationIncludingGravity);i&&(this.Pts=i.x,this.Ets=i.y,this.Ats=i.z)}j$(){let t=performance.now(),s=0;for(const i of this.Sts.values())i.ER()<=t-50&&i.ess(t),i.hss(t)&&(this.Rts=i.qts(),this.Fts=i.pV(),this.Lts=s,this.O4(C.TY.Touch.MY.rss),this.Dts=i.Hv(),this.kts=i.Jv(),this.O4(C.TY.Touch.MY.nss),this.Lts=0),++s}oss(t){t=Math.floor(t);for(const s of this.Sts.values()){if(0===t)return s;--t}return null}ass(t,s){return 0<=t&&0<=s&&t<this.Sf.bNt()&&s<this.Sf.vNt()}ITt(){return[{title:"plugins.touch.debugger.touches",properties:[...this.Sts.values()].map(t=>({name:"$"+t.pV(),value:t.Hv()+", "+t.Jv()}))}]}}}{const Mc=self.Bs;Mc.TY.Touch.MY={zts(){return!0},Yts(){return!0},lss(){return 0<this.Sts.size},Jts(t,s){return!!t&&s===this.YZt&&!!this.ass(this.Dts,this.kts)&&this.Sf.hO().C3t(t,[[this.Dts,this.kts]],!1)},uss(t){if(!t)return!1;const s=this.Sf.s1t(),i=s.Gbt(),e=[...this.Sts.values()].filter(t=>this.ass(t.Hv(),t.Jv())).map(t=>[t.Hv(),t.Jv()]);return Mc.xor(this.Sf.hO().C3t(t,e,i),i)},css(t,s,i){const e=this.oss(t);return!!e&&Mc.compare(e.eW(),s,i)},fss(){return!0},dss(){return!0},pss(t,s,i){this.Sf.O4t();let e;return e=0===t?this.xts:1===t?this.Tts:this.Gts,Mc.compare(e,s,i)},mss(t,s,i){this.Sf.D4t();let e;return e=0===t?this.Pts:1===t?this.Ets:2===t?this.Ats:3===t?this._ts:4===t?this.Its:this.Cts,Mc.compare(e,s,i)},Uts(t){return(t=Math.floor(t))===this.Rts},Xts(t){return(t=Math.floor(t))===this.Rts},gss(t){return t=Math.floor(t),this.Sts.size>=t+1},rss(){return!0},Kts(){return!0},Qts(){return!0},nss(t){return!!t&&!!this.ass(this.Dts,this.kts)&&this.Sf.hO().C3t(t,[[this.Dts,this.kts]],!1)},Zts(t){return!!t&&!!this.ass(this.Dts,this.kts)&&this.Sf.hO().C3t(t,[[this.Dts,this.kts]],!1)},tss(t){return!!t&&!!this.ass(this.Dts,this.kts)&&this.Sf.hO().C3t(t,[[this.Dts,this.kts]],!1)},sss(t){return this.Ots===t},iss(t){return this.Ots===t}}}{const xc=self.Bs;xc.TY.Touch.frt={yss(t){this.wts(t)}}}{const Tc=self.Bs;Tc.TY.Touch.drt={wss(){return this.Sts.size},I2t(t){const s=this.oss(this.Lts);return s?s.Sss(this.Sf.WD(),t,!0):0},C2t(t){const s=this.oss(this.Lts);return s?s.Sss(this.Sf.WD(),t,!1):0},bss(t,s){const i=this.oss(t);return i?i.Sss(this.Sf.WD(),s,!0):0},vss(t,s){const i=this.oss(t);return i?i.Sss(this.Sf.WD(),s,!1):0},Mss(t,s){const i=this.Sts.get(t);return i?i.Sss(this.Sf.WD(),s,!0):0},xss(t,s){const i=this.Sts.get(t);return i?i.Sss(this.Sf.WD(),s,!1):0},RQt(){const t=this.oss(0);return t?t.Hv():0},FQt(){const t=this.oss(0);return t?t.Jv():0},Tss(t){const s=this.oss(t);return s?s.Hv():0},Gss(t){const s=this.oss(t);return s?s.Jv():0},_ss(t){const s=this.Sts.get(t);return s?s.Hv():0},Iss(t){const s=this.Sts.get(t);return s?s.Jv():0},Css(t){const s=this.oss(t);return s?s.eW():0},Pss(t){const s=this.Sts.get(t);return s?s.eW():0},Ess(t){const s=this.oss(t);return s?Tc.Cr(s.GetAngle()):0},Ass(t){const s=this.Sts.get(t);return s?Tc.Cr(s.GetAngle()):0},Rss(){return this.Sf.O4t(),this.Mts},Fss(){return this.Sf.O4t(),this.xts},Oss(){return this.Sf.O4t(),this.Tts},Dss(){return this.Sf.O4t(),this.Gts},kss(){return this.Sf.D4t(),this.Pts},Lss(){return this.Sf.D4t(),this.Ets},Nss(){return this.Sf.D4t(),this.Ats},Bss(){return this.Sf.D4t(),this._ts},Wss(){return this.Sf.D4t(),this.Its},Vss(){return this.Sf.D4t(),this.Cts},jss(){return this.Rts},Hss(){return this.Fts},Uss(t){const s=this.Sts.get(t);return s?s.Em():0},zss(t){const s=this.Sts.get(t);return s?s.Wm():0},Jss(t){const s=this.Sts.get(t);return s?s.qss():0}}}{let n=self.Bs,s=-1e3,i=-1e3,e=-1e4;n.TY.Touch.Hts=class extends n.gr{constructor(){super(),this.Xss=0,this.WG=0,this.HLt=0,this.P3=0,this.Yss=0,this.$ss=0,this.Kss=0,this.ol=0,this.al=0,this.Zss=0,this.Qss=0,this.dg=0,this.pg=0,this.tis=0,this.sis=!1,this.iis=!1}Sr(){}QCt(t,s,i,e,h){this.Xss=e,this.WG=h,this.P3=t,this.Yss=t,this.HLt=t,this.$ss=s,this.Kss=i,this.ol=s,this.al=i,this.Zss=s,this.Qss=i}w7(t,s,i,e,h,r){this.Yss=this.P3,this.P3=t,this.Zss=this.ol,this.Qss=this.al,this.ol=s,this.al=i,this.dg=e,this.pg=h,this.tis=r,!this.iis&&15<=n.Pr(this.$ss,this.Kss,this.ol,this.al)&&(this.iis=!0)}pV(){return this.Xss}qts(){return this.WG}ER(){return this.P3}ess(t){this.Yss=t}Hv(){return this.ol}Jv(){return this.al}eW(){const t=n.Pr(this.ol,this.al,this.Zss,this.Qss),s=(this.P3-this.Yss)/1e3;return 0<s?t/s:0}GetAngle(){return n.Ar(this.Zss,this.Qss,this.ol,this.al)}Em(){return this.dg}Wm(){return this.pg}qss(){return this.tis}hss(t){return!this.sis&&500<=t-this.HLt&&!this.iis&&n.Pr(this.$ss,this.Kss,this.ol,this.al)<15&&(this.sis=!0)}$ts(t){return!this.sis&&t-this.HLt<=333&&!this.iis&&n.Pr(this.$ss,this.Kss,this.ol,this.al)<15?t-e<=666&&n.Pr(s,i,this.ol,this.al)<25?(s=-1e3,i=-1e3,e=-1e4,"double-tap"):(s=this.ol,i=this.al,e=t,"single-tap"):""}Sss(t,s,i){if(void 0===s){const e=t.zD(0);return e.Cq(this.ol,this.al)[i?0:1]}{const h=t.HD(s);return h?h.kN(this.ol,this.al)[i?0:1]:0}}}}{const Gc=self.Bs;Gc.olt.mi=class extends Gc.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const _c=self.Bs;_c.olt.mi.RIt=class extends _c.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{let M=function(t,s,i,e,h){const r=s*h,n=i*h;return Ic.Gr(t*h+.5*e*h*h,r,n)};M;const Ic=self.Bs,Cc=self.$s,Pc=self.B6,P=(Ic.olt.mi.Instance=class extends Ic.MGt{constructor(t,s){super(t),this.eis=null,this.his=!1,this.ris=!1,this.nis=!1,this.ois=!1,this.ais=!1,this.lis=!1,this.uis=!1,this.cis=!1,this.fis=!1,this.dis=!1,this.pis=null,this.mis=-1,this.gis=0,this.yis=0,this.wis=!1,this.Sis=!1,this.bis=this.Sf.hO().O3t(this.Pi),this.vis=-1,this.Mis="stopped",this.xis=-1,this.Tis=!0,this.Gis=0,this._is=0,this.Iis=0,this.Cis=0,this.Pis=0,this.Eis=0,this.Zo=1500,this.Ais=1500,this.Ris=Ic.Ir(90),this.Fis=330,this.Ois=1500,this.Dis=1500,this.kis=650,this.Lis=1e3,this.Nis=!1,this.Bis=0,this.Wis=0,this.Vis=!0,this.jis=0,this.swt=!0,s&&(this.Fis=s[0],this.Ois=s[1],this.Dis=s[2],this.kis=s[3],this.Zo=s[4],this.Lis=s[5],this.Nis=!!s[6],this.Bis=s[7]/1e3,this.Vis=!!s[8],this.swt=!!s[9]);const i=this.Sf.Qf();this.A0=new Ic.C0(Ic.M0.I0(i,"instancedestroy",t=>this.Hqt(t.z6)),Ic.M0.I0(i,"afterload",t=>this.Z$())),this.Vis&&this.His(),this.swt&&this.CGt(),this.Uis()}Sr(){this.eis&&(this.eis.Sr(),this.eis=null),this.pis=null,this.bis=null,super.Sr()}His(){if(!this.eis){const t=this.Sf.Qf();this.eis=new Ic.C0(Ic.M0.I0(t,"keydown",t=>this.KYt(t.data)),Ic.M0.I0(t,"keyup",t=>this.ZYt(t.data)),Ic.M0.I0(t,"window-blur",()=>this.QYt()),Ic.M0.I0(t,"keyboard-blur",()=>this.QYt()))}}zis(){this.eis&&(this.eis.Sr(),this.eis=null)}Hqt(t){this.pis===t&&(this.pis=null),this.bis===t&&(this.bis=null)}KYt(t){switch(t.key){case"ArrowLeft":this.his=!0;break;case"ArrowRight":this.ris=!0;break;case"ArrowUp":this.nis=!0}}ZYt(t){switch(t.key){case"ArrowLeft":this.his=!1;break;case"ArrowRight":this.ris=!1;break;case"ArrowUp":this.nis=!1,this.ois=!1}}QYt(){this.his=!1,this.ris=!1,this.nis=!1,this.ois=!1}iM(){return{ii:this.uis,lfx:this.gis,lfy:this.yis,lfo:this.pis?this.pis.a4():-1,am:this.Mis,en:this.swt,fallt:this.xis,ft:this.Tis,dx:this.Gis,dy:this._is,ms:this.Fis,acc:this.Ois,dec:this.Dis,js:this.kis,g:this.Zo,g1:this.Ais,mf:this.Lis,wof:this.Sis,woj:this.bis?this.bis.a4():-1,ga:this.Ris,edj:this.Nis,cdj:this.lis,dj:this.ais,sus:this.Bis,dc:this.Vis,cc:this.jis}}eM(t){this.uis=t.ii,this.gis=t.lfx,this.yis=t.lfy,this.mis=t.lfo,this.Mis=t.am;const s=t.en;this.xis=t.fallt||-1,this.Tis=t.ft,this.Gis=t.dx,this._is=t.dy,this.Fis=t.ms,this.Ois=t.acc,this.Dis=t.dec,this.kis=t.js,this.Zo=t.g,this.Ais=t.g1,this.Lis=t.mf,this.Sis=t.wof,this.vis=t.woj,this.Ris=t.ga,this.Nis=t.edj,this.lis=t.cdj,this.ais=t.dj,this.Bis=t.sus,this.Vis=t.dc,this.jis=t.cc||0,this.his=!1,this.ris=!1,this.nis=!1,this.ois=!1,this.cis=!1,this.fis=!1,this.dis=!1,this.Wis=0,this.Vis?this.His():this.zis(),this.XMt(s),this.Uis()}Z$(){-1===this.mis?this.pis=null:this.pis=this.Sf.LD(this.mis),-1===this.vis?this.bis=null:this.bis=this.Sf.LD(this.vis)}Jis(t){if(this.pis=t){const s=t.jD();this.gis=s.Hv(),this.yis=s.Jv()}}qis(){return this.Sf.ZO()>this.xis+.05}Uis(){this.Iis=Math.cos(this.Ris),this.Cis=Math.sin(this.Ris),this.Pis=Math.cos(this.Ris-Math.PI/2),this.Eis=Math.sin(this.Ris-Math.PI/2),this.Iis=Ic.Xr(this.Iis,6),this.Cis=Ic.Xr(this.Cis,6),this.Pis=Ic.Xr(this.Pis,6),this.Eis=Ic.Xr(this.Eis,6),this.Ais=this.Zo,this.Zo<0&&(this.Iis*=-1,this.Cis*=-1,this.Zo=Math.abs(this.Zo))}Xis(){return this.Zo<0?-1:1}Yis(){const s=this.Pi.jD(),h=this.Sf.hO(),r=this.Pi,t=this.pis,i=s.Hv(),n=s.Jv();if(s.mB(this.Iis,this.Cis),s.cB(),!t||!h.Fk(r,t)||t.YN().ECt()&&!h.QAt(t,r)||t.YN().ACt()&&!t.pPt()){let t=h.kk(r),e=null;if(!t&&this.qis()&&(e=h.O3t(r,!0)),s.fB(i,n),s.cB(),t)return h.Fk(r,t)?null:(this.wis=!1,t);if(e&&e.length){let i=0;for(let t=0,s=e.length;t<s;++t)e[i]=e[t],h.Fk(r,e[t])||++i;if(1<=i)return this.wis=!0,e[0]}return null}return s.fB(i,n),s.cB(),t}IGt(){if(this.swt){const c=this.Sf.YO(this.Pi);this.nis||this.dis||(this.ois=!1);let e=this.his||this.cis,h=this.ris||this.fis,r=this.nis||this.dis,n=r&&!this.ois,[o,,a]=(this.cis=!1,this.fis=!1,this.dis=!1,this.uis&&(e=!1,h=!1,r=!1,n=!1),r||(this.Wis=0),this.$is(),this.Kis()),l=this.Yis(),u=l&&!this.Sis,t=!1;if([t,l]=this.Zis(l),!t){this.Qis(l,a,o,r),n=this.tes(l,n,r),l||this.ses(n,r,c),this.Sis=!!l;let t=this.ies(e,h),s=!1,i=0;if(0!==this.Gis&&([s,l]=this.ees(c,t,l,n)),0!==this._is){const[f,d]=this.hes(c,l);s=s||f,i=d}!s&&u&&this._is<0&&0<i&&(this._is=0,s=!0),this.res(e,h,t,c),l&&!n||s||(this._is=Math.min(this._is+this.Zo*c,this.Lis)),this.nes(l,s,n),this.bis=this.Sf.hO().O3t(this.Pi)}}}$is(){if(this.Tis){const t=this.Pi,s=this.Sf.hO();(s.kk(t)||s.O3t(t))&&s.k3t(t,-this.Iis,-this.Cis,4,!0),this.Tis=!1}}Kis(){let t=this.pis,s=t?t.jD():null,i=0,e=0,h=!1;if(t&&0===this._is&&(s.Jv()!==this.yis||s.Hv()!==this.gis)){const r=this.Pi,n=r.jD(),o=this.Sf.hO(),a=s.Hv(),l=s.Jv(),u=(i=a-this.gis,e=l-this.yis,n.mB(i,e),n.cB(),this.gis=a,this.yis=l,h=!0,o.kk(r));u&&(o.S3t(r,u),o.k3t(r,-i,-e,2.5*Math.hypot(i,e)))}return[i,e,h]}Zis(t){let s=!1,i=this.Pi,e=i.jD(),h=this.Sf.hO(),r=h.kk(i);if(!r)return[!1,t];const n=Math.abs(e.Em()),o=Math.abs(e.Wm());return h.k3t(i,-this.Iis,-this.Cis,o/8)?(h.S3t(i,r),this.Jis(t=r),this.wis=!1,this._is=0):h.N3t(i,this.Pis,this.Eis,n/2)||h.N3t(i,this.Iis,this.Cis,o/2)||h.B3t(i,Math.max(n,o)/2)?h.S3t(i,r):s=!0,[s,t]}Qis(t,s,i,e){const h=this.Pi,r=this.Sf.hO();if(t){const n=this.Iis,o=this.Cis,a=this.Pis,l=this.Eis;if(this.ais=!1,this.lis=!1,0<this._is&&(this.Sis||(r.L3t(h,-n,-o,t,16),this.Sis=!0),this._is=0),this.pis!==t)this.Jis(t),r.S3t(h,t);else if(s){const u=r.kk(h);u&&(r.S3t(h,u),0!==i&&(0<i?r.k3t(h,-a,-l):r.k3t(h,a,l)),r.k3t(h,-n,-o))}}else e||(this.lis=!0)}tes(t,s,i){if(t&&s||!t&&this.Nis&&i&&this.lis&&!this.ais){const e=this.Pi,h=e.jD(),r=this.Sf.hO(),n=h.Hv(),o=h.Jv();h.mB(-this.Iis,-this.Cis),h.cB(),r.kk(e)?s=!1:(this.Wis=this.Bis,this.O4(Ic.olt.mi.MY.oes),this.Mis="jumping",this._is=-this.kis,s=!0,t?this.ois=!0:this.ais=!0),h.fB(n,o),h.cB()}return s}ses(t,s,i){s&&0<this.Wis?(this._is=-this.kis,this.Wis-=i):this.pis=null,t&&(this.ois=!0)}ies(t,s){let i=0,e=this.Ois,h=this.Dis;return t&&!s&&(i=0<this.Gis?-(e+h):-e),i=s&&!t?this.Gis<0?e+h:e:i}res(t,s,i,e){const h=this.Dis,r=(t===s&&(this.Gis<0?this.Gis=Math.min(this.Gis+h*e,0):0<this.Gis&&(this.Gis=Math.max(this.Gis-h*e,0))),this.Gis=Ic.Gr(this.Gis+i*e,-this.Fis,this.Fis),this.Sf.hO()),n=this.Gis<0?this.aes(0,1,1):null;if(n)this.Gis=0,r.S3t(this.Pi,n);else{const o=0<this.Gis?this.aes(1,1,1):null;o&&(this.Gis=0,r.S3t(this.Pi,o))}}ees(e,t,h,s){let r=this.Pi,n=r.jD(),o=this.Sf.hO(),a=this.Iis,l=this.Cis,i=this.Pis,u=this.Eis,c=this.Fis,f=!1,d=new Set(o.O3t(r,!0)),p=n.Hv(),m=n.Jv(),g=M(this.Gis,-c,c,t,e)*i,y=M(this.Gis,-c,c,t,e)*u,w=(n.mB(i*(1<this.Gis?1:-1)-a,u*(1<this.Gis?1:-1)-l),n.cB(),!1),S=o.kk(r),b=(n.fB(p+g,m+y),n.cB(),o.kk(r));if(!b&&h&&this.wis&&(b=o.O3t(r),d.has(b)?b=null:w=!0),b){let t=Math.abs(this.Gis*e)+2;S||!o.k3t(r,-a,-l,t,w,b)?(o.S3t(r,b),t=Math.max(Math.abs(this.Gis*e*2.5),Math.floor(n.Em())),o.k3t(r,i*(this.Gis<0?1:-1),u*(this.Gis<0?1:-1),t,!1)&&(!h||w||this.wis||(p=n.Hv(),m=n.Jv(),n.mB(a,l),o.kk(r)&&o.k3t(r,-a,-l,3,!1)))||(n.fB(p,m),n.cB()),w||(this.Gis=0)):!S&&!s&&Math.abs(this._is)<Math.abs(this.kis/4)&&(this._is=0,h||(f=!0))}else{const v=this.Yis();if(h&&!v){let t=Math.ceil(Math.abs(this.Gis*e))+2,s=(p=n.Hv(),m=n.Jv(),n.mB(a*t,l*t),n.cB(),o.O3t(r)),i=!1;s&&!d.has(s)&&o.k3t(r,-a,-l,t+2,!0,s)&&(this.Jis(h=s),this.wis=!0,i=!0),i||(o.kk(r)?o.k3t(r,-a,-l,t+2,!1):(n.fB(p,m),n.cB()))}else v&&(!h&&this.wis&&(this.Jis(v),this._is=0,f=!0),0===this._is)&&o.L3t(r,-a,-l,v,16)}return[f,h]}hes(s,t){let e=this.Pi,h=e.jD(),r=this.Sf.hO(),i=this.Iis,n=this.Cis,o=!1,a=h.Hv(),l=h.Jv(),u=M(this._is,-1/0,this.Lis,this.Zo,s),c=(h.mB(u*i,u*n),h.Hv()),f=h.Jv(),d=(h.cB(),r.kk(e)),p=!1;if(!d&&0<this._is&&!t){const m=this.qis()?r.O3t(e,!0):null;if(m&&m.length){if(this.bis){h.fB(a,l),h.cB();let i=0;for(let t=0,s=m.length;t<s;++t)m[i]=m[t],r.Fk(e,m[t])||++i;Ic.Hn(m,i),h.fB(c,f),h.cB()}1<=m.length&&(d=m[0])}p=!!d}if(d){r.S3t(e,d),this.Wis=0;let t=1.1;p&&!this.bis&&(t=2);const g=Math.max(Math.abs(this._is*s*t),2);r.k3t(e,i*(this._is<0?1:-1),n*(this._is<0?1:-1),g,p,d)?(this.Jis(d),this.wis=p,0<this._is&&(o=!0),(0<this._is||0===this.jis)&&(this._is=0),this._is<0&&1===this.jis&&r.L3t(e,i,n,d,32)):(h.fB(a,l),h.cB(),this.Sis=!0,p||(this._is=0))}return[o,u]}nes(t,s,i){"falling"!==this.Mis&&0<this._is&&!t&&(this.O4(Ic.olt.mi.MY.les),this.Mis="falling"),(t||s)&&0<=this._is&&("falling"===this.Mis||s||i&&0===this._is?(this.O4(Ic.olt.mi.MY.ues),0===this.Gis&&0===this._is?this.Mis="stopped":this.Mis="moving"):("stopped"!==this.Mis&&0===this.Gis&&0===this._is&&(this.O4(Ic.olt.mi.MY.ces),this.Mis="stopped"),"moving"===this.Mis||0===this.Gis&&0===this._is||i||(this.O4(Ic.olt.mi.MY.fes),this.Mis="moving")))}des(){return 0!==this.pes()||0!==this.mes()}ges(){if(0===this._is){let e=this.Pi,t=this.jD(),h=this.Sf.hO(),s=t.Hv(),i=t.Jv(),r=(t.mB(this.Iis,this.Cis),t.cB(),h.kk(e)),n=null;if(!r&&this.qis()&&(n=h.O3t(e,!0)),t.fB(s,i),t.cB(),r)return!h.Fk(e,r);if(n&&n.length){let i=0;for(let t=0,s=n.length;t<s;++t)n[i]=n[t],h.Fk(e,n[t])||i++;if(1<=i)return!0}}return!1}yes(t,s=2,i=3){return!!this.aes(t,s,i)}aes(t,s=2,i=3){const e=this.Pi,h=this.jD(),r=this.Sf.hO(),n=h.Hv(),o=h.Jv();if(0===t?h.mB(-this.Pis*s,-this.Eis*s):h.mB(this.Pis*s,this.Eis*s),h.cB(),!r.kk(e))return h.fB(n,o),h.cB(),null;h.mB(-this.Iis*i,-this.Cis*i),h.cB();const a=r.kk(e);return h.fB(n,o),h.cB(),a}wes(){const t=this.jD(),s=t.Hv(),i=t.Jv(),e=(t.mB(this.Iis,this.Cis),t.cB(),this.Sf.hO().O3t(this.Pi,!1));t.fB(s,i),t.cB(),e&&(this.xis=this.Sf.ZO(),this.pis=null)}Ses(t){this.ais=!t}bes(){return Math.hypot(this.Gis,this._is)}ves(){return Math.atan2(this._is,this.Gis)}Mes(){return this._is<0}xes(){return 0<this._is}Tes(t){this.Fis=Math.max(t,0)}Ges(){return this.Fis}_es(t){this.Ois=Math.max(t,0)}Ies(){return this.Ois}Ces(t){this.Dis=Math.max(t,0)}Pes(){return this.Dis}Ees(t){this.kis=Math.max(t,0)}Aes(){return this.kis}Res(t){this.Lis=Math.max(t,0)}Fes(){return this.Lis}Oes(t){if(this.Ais!==t){this.Zo=t,this.Uis();const s=this.Sf.hO(),i=this.jD();s.kk(this.Pi)&&(s.k3t(this.Pi,this.Iis,this.Cis,10),i.mB(2*this.Iis,2*this.Cis),i.cB()),this.pis=null}}Des(){return this.Zo}kes(t){t=Ic._r(t),this.Ris!==t&&(this.Ris=t,this.Uis(),this.pis=null)}Les(){return this.Ris}Nes(t){this.Nis=!!t}Bes(){return this.Nis}Wes(t){this.Bis=t}Ves(){return this.Bis}jes(t){this.jis=t}Hes(){return this.jis}Ues(t){this.Gis=t}pes(){return this.Gis}zes(t){this._is=t}mes(){return this._is}Jes(t){if(this.swt)switch(t){case 0:this.cis=!0;break;case 1:this.fis=!0;break;case 2:this.dis=!0}}qes(t){this.Vis!==(t=!!t)&&(this.Vis=t,this.Vis?this.His():(this.zis(),this.QYt()))}Xes(){return this.Vis}Yes(t){this.uis=!!t}$es(){return this.uis}XMt(t){this.swt!==(t=!!t)&&(this.swt=t,this.swt?this.CGt():(this.TGt(),this.pis=null,this.cis=!1,this.fis=!1,this.dis=!1))}$Mt(){return this.swt}$rt(t){switch(t){case 0:return this.Ges();case 1:return this.Ies();case 2:return this.Pes();case 3:return this.Aes();case 4:return this.Des();case 5:return this.Fes();case 6:return this.Bes();case 7:return 1e3*this.Ves();case 8:return this.Xes();case 9:return this.$Mt()}}int(t,s){switch(t){case 0:this.Tes(s);break;case 1:this._es(s);break;case 2:this.Ces(s);break;case 3:this.Ees(s);break;case 4:this.Oes(s);break;case 5:this.Res(s);break;case 6:this.Nes(!!s);break;case 7:this.Wes(s/1e3);break;case 8:this.qes(!!s);break;case 9:this.XMt(!!s)}}ITt(){const t="behaviors.platform";return[{title:"$"+this.U6().uf(),properties:[{name:t+".debugger.vector-x",value:this.pes(),o8t:t=>this.Ues(t)},{name:t+".debugger.vector-y",value:this.mes(),o8t:t=>this.zes(t)},{name:t+".properties.max-speed.name",value:this.Ges(),o8t:t=>this.Tes(t)},{name:t+".properties.acceleration.name",value:this.Ies(),o8t:t=>this._es(t)},{name:t+".properties.deceleration.name",value:this.Pes(),o8t:t=>this.Ces(t)},{name:t+".properties.jump-strength.name",value:this.Aes(),o8t:t=>this.Ees(t)},{name:t+".properties.gravity.name",value:this.Des(),o8t:t=>this.Oes(t)},{name:t+".debugger.gravity-angle",value:Ic.Cr(this.Les()),o8t:t=>this.kes(Ic.Ir(t))},{name:t+".properties.max-fall-speed.name",value:this.Fes(),o8t:t=>this.Res(t)},{name:t+".properties.double-jump.name",value:this.Bes(),o8t:t=>this.Nes(t)},{name:t+".properties.jump-sustain.name",value:1e3*this.Ves(),o8t:t=>this.Wes(t/1e3)},{name:t+".debugger.animation-mode",value:[t+".debugger.anim-"+this.Mis]},{name:t+".properties.enabled.name",value:this.$Mt(),o8t:t=>this.XMt(t)}]}]}Bxt(){return self.Kes}},new WeakMap),Ec=new Map([["left",0],["right",1],["jump",2]]);self.Kes=class extends Pc{constructor(){super(),P.set(this,Pc.ZN().O6())}Zes(){P.get(this).wes()}Qes(t){P.get(this).Ses(!!t)}ths(t){Cc.Ae(t);const s=Ec.get(t);if("number"!=typeof s)throw new Error("invalid control");P.get(this).Jes(s)}get speed(){return P.get(this).bes()}get shs(){return P.get(this).Ges()}set shs(t){Cc.Ie(t),P.get(this).Tes(t)}get acceleration(){return P.get(this).Ies()}set acceleration(t){Cc.Ie(t),P.get(this)._es(t)}get ihs(){return P.get(this).Pes()}set ihs(t){Cc.Ie(t),P.get(this).Ces(t)}get ehs(){return P.get(this).Aes()}set ehs(t){Cc.Ie(t),P.get(this).Ees(t)}get hhs(){return P.get(this).Fes()}set hhs(t){Cc.Ie(t),P.get(this).Res(t)}get rhs(){return P.get(this).Des()}set rhs(t){Cc.Ie(t),P.get(this).Oes(t)}get nhs(){return P.get(this).Les()}set nhs(t){Cc.Ie(t),P.get(this).kes(t)}get ohs(){return P.get(this).Bes()}set ohs(t){P.get(this).Nes(!!t)}get ahs(){return P.get(this).Ves()}set ahs(t){Cc.Ie(t),P.get(this).Wes(t)}get lhs(){const t=P.get(this).Hes();return 0===t?"stop":"preserve-momentum"}set lhs(t){Cc.Ae(t);const s=P.get(this);if("stop"===t)s.jes(0);else{if("preserve-momentum"!==t)throw new Error("invalid mode");s.jes(1)}}get uhs(){return P.get(this).ges()}chs(t){Cc.Ae(t);const s=P.get(this);if("left"===t)return s.yes(0);if("right"===t)return s.yes(1);throw new Error("invalid side")}get fhs(){return P.get(this).des()}get dhs(){return P.get(this).Mes()}get phs(){return P.get(this).xes()}get mhs(){return P.get(this).pes()}set mhs(t){Cc.Ie(t),P.get(this).Ues(t)}get ghs(){return P.get(this).mes()}set ghs(t){Cc.Ie(t),P.get(this).zes(t)}yhs(t,s){Cc.Ie(t),Cc.Ie(s);const i=P.get(this);i.Ues(t),i.zes(s)}whs(){const t=P.get(this);return[t.pes(),t.mes()]}get Shs(){return P.get(this).Xes()}set Shs(t){P.get(this).qes(!!t)}get bhs(){return P.get(this).$es()}set bhs(t){P.get(this).Yes(!!t)}get isEnabled(){return P.get(this).$Mt()}set isEnabled(t){P.get(this).XMt(!!t)}}}{const Ac=self.Bs;Ac.olt.mi.MY={vhs(){return this.des()},Mhs(t,s){return Ac.compare(this.bes(),t,s)},xhs(){return this.ges()},Ths(t){return this.yes(t)},Ghs(){return this.Mes()},_hs(){return this.xes()},Ihs(){return this.Bes()},oes(){return!0},les(){return!0},ces(){return!0},fes(){return!0},ues(){return!0},rc(){return this.$Mt()}}}{const Rc=self.Bs;Rc.olt.mi.frt={Chs(t){this.Tes(t)},Phs(t){this._es(t)},Ehs(t){this.Ces(t)},Ahs(t){this.Ees(t)},Rhs(t){this.Res(t)},SetGravity(t){this.Oes(t)},Fhs(t){this.Jes(t)},Ohs(t){this.Yes(!!t)},Dhs(t){this.Ues(t)},khs(t){this.zes(t)},Lhs(t){this.kes(Rc.Ir(t))},q2t(t){this.XMt(0!==t)},Nhs(){this.wes()},Bhs(t){this.Nes(0!==t)},Whs(t){this.Wes(t/1e3)},Vhs(t){this.jes(t)},jhs(t){this.qes(t)},Hhs(t){this.Ses(t)}}}{const Fc=self.Bs;Fc.olt.mi.drt={Uhs(){return this.bes()},zhs(){return this.Ges()},Jhs(){return this.Ies()},qhs(){return this.Pes()},Xhs(){return this.Aes()},Yhs(){return this.Des()},$hs(){return Fc.Cr(this.Les())},Khs(){return this.Fes()},Zhs(){return Fc.Cr(this.ves())},Qhs(){return this.pes()},trs(){return this.mes()},srs(){return 1e3*this.Ves()}}}{const Oc=self.Bs;Oc.olt.irs=class extends Oc.mGt{constructor(t){super(t),this.ers=0,this.hrs=0,this.rrs=0,this.nrs=0}Sr(){super.Sr()}ors(t){this.ers=t}ars(){return this.ers}lrs(t){this.hrs=t}urs(){return this.hrs}crs(t){this.rrs=t}frs(){return this.rrs}drs(t){this.nrs=t}prs(){return this.nrs}}}{const Dc=self.Bs;Dc.olt.irs.RIt=class extends Dc.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const kc=self.Bs;kc.olt.irs.Instance=class extends kc.MGt{constructor(t,s){super(t),this.swt=!0,s&&(this.swt=s[0]),this.swt&&this.GTt()}Sr(){super.Sr()}iM(){const t=this.V6();return{e:this.swt,smg:t.ars(),ss:t.urs(),se:t.frs(),smd:t.prs()}}eM(t){const s=this.V6();s.ors(t.smg),s.lrs(t.ss),s.crs(t.se),s.drs(t.smd),this.swt=t.e,this.swt?this.GTt():this.aTt()}XMt(t){this.swt=!!t,this.swt?this.GTt():this.aTt()}rc(){return this.swt}MTt(){if(this.rc()){this.Sf.YO(this.Pi);let s=this.V6(),t=s.i5(),i=0,e=0,h=0;for(const l of t){const u=l.OPt(kc.olt.irs);if(u&&u.O6().rc()){const c=l.jD();i+=c.Hv(),e+=c.Jv(),++h}}let r=this.Pi.jD().TD(),n=this.Sf.ZO(),o=0,a=0;if(n>=s.urs()&&n<s.frs()){let t=s.ars()*Math.min(this.Sf.sD(),1);0===s.prs()&&(t*=1-(n-s.urs())/(s.frs()-s.urs()));const f=this.Sf.SD()*Math.PI*2,d=this.Sf.SD()*t;o=Math.cos(f)*d,a=Math.sin(f)*d}r.M5(i/h+o),r.T5(e/h+a)}}$rt(t){if(0===t)return this.swt}int(t,s){0===t&&(this.swt=!!s,this.swt?this.GTt():this.aTt())}ITt(){return[{title:"$"+this.U6().uf(),properties:[{name:"behaviors.scrollto.properties.enabled.name",value:this.rc(),o8t:t=>this.XMt(t)}]}]}}}{const Lc=self.Bs;Lc.olt.irs.MY={rc(){return this.rc()}}}{const Nc=self.Bs;Nc.olt.irs.frt={mrs(t,s,i){const e=this.V6();e.ors(t),e.lrs(this.Sf.ZO()),e.crs(this.Sf.ZO()+s),e.drs(i)},q2t(t){this.XMt(0!==t)}}}{const Bc=self.Bs;Bc.olt.irs.drt={}}{let h=function(i,e,t){const h=i.Ebt(),r=e.Ebt();if(t){const s=h.get(p),n=(s&&s.delete(e.mJ()),r.get(p));n&&n.delete(i.mJ())}else{let t=h.get(p),s=(t||(t=new Set,h.set(p,t)),r.get(p));s||(s=new Set,r.set(p,s)),t.add(e.mJ()),s.add(i.mJ())}},f=(h,self.Bs),s=self.$s,i=null,e=null,r=[],d=null,n=null,p="Physics_DisabledCollisions";f.olt.grs=class extends f.mGt{constructor(t){super(t),(n=this).yrs=null,this.wrs=10,this.Srs=.02,this.brs=null,this.vrs=-1,this.Mrs=1,this.xrs=8,this.Trs=3,this.Grs=!0,this.Sf.ik(this._rs())}Bxt(){return self.Irs}async _rs(){const t=await this.Sf.sO().yk("box2d.wasm");await new Promise(s=>{self.Box2DWasmModule({wasmBinaryFile:t}).then(t=>{d=t,this.Crs(),s()})})}Crs(){const h=this.Sf.hO(),t=(i=f.olt.grs.z_t(0,0),e=f.olt.grs.z_t(0,0),this.yrs=new d.b2World(f.olt.grs.Prs(0,this.wrs),!0),new d.JSContactListener),s=(t.BeginContact=t=>{const s=d.wrapPointer(t,d.b2Contact),i=f.olt.grs.Instance.Ers(s.GetFixtureA().GetBody()),e=f.olt.grs.Instance.Ers(s.GetFixtureB().GetBody());h.S3t(i.J6(),e.J6())},t.EndContact=()=>{},t.PreSolve=()=>{},t.PostSolve=()=>{},this.yrs.SetContactListener(t),new d.JSContactFilter);s.ShouldCollide=(t,s)=>{if(this.Grs)return!0;const i=d.wrapPointer(t,d.b2Fixture),e=d.wrapPointer(s,d.b2Fixture),h=f.olt.grs.Instance.Ers(i.GetBody()),r=f.olt.grs.Instance.Ers(e.GetBody()),n=h.J6().YN(),o=r.J6().YN(),a=n.mJ(),l=o.mJ(),u=n.Ebt().get(p);if(u&&u.has(l))return!1;const c=o.Ebt().get(p);return!c||!c.has(a)},this.yrs.SetContactFilter(s),this.brs=new d.b2WorldManifold}Sr(){super.Sr()}Ars(){return d}Rrs(){return this.yrs}Frs(){return this.Srs}Ors(){return this.Mrs}Drs(t){this.Mrs=t}krs(t){this.vrs=t}Lrs(){return this.vrs}Nrs(t){this.xrs=Math.max(t,1)}Brs(){return this.xrs}Wrs(t){this.Trs=Math.max(t,1)}Vrs(){return this.Trs}jrs(t,s){this.Nrs(t),this.Wrs(s)}Hrs(){return this.wrs}SetGravity(t){t!==this.wrs&&(this.yrs.SetGravity(f.olt.grs.Prs(0,t)),this.wrs=t,this.Urs())}Urs(){for(const t of this.i5()){const s=f.olt.grs.Instance.zrs(t);if(s){const i=s.GetBody();i&&i.SetAwake(!0)}}}Jrs(){this.Grs=!1}qrs(t,s,i){if(i=!!i,t&&s){if(s.oJ())for(const e of s.Pgt())h(t,e,i);else h(t,s,i);this.Jrs()}}GetWorldManifold(){return this.brs}static Xrs(){return p}static z_t(t,s){if(r.length){const i=r.pop();return i.set_x(t),i.set_y(s),i}{const e=d.b2Vec2;return new e(t,s)}}static Yrs(t){r.push(t)}static Prs(t,s){return i.set_x(t),i.set_y(s),i}static $rs(t,s){return e.set_x(t),e.set_y(s),e}static Krs(s){let t=d.b2PolygonShape,i=new t,e=d._malloc(8*s.length),h=0;for(let t=0;t<s.length;++t)d.HEAPF32[e+h>>2]=s[t].get_x(),d.HEAPF32[e+(h+4)>>2]=s[t].get_y(),h+=8;const r=d.wrapPointer(e,d.b2Vec2);return i.Set(r,s.length),d._free(e),i}};const Wc=["fixed","variable"];self.Irs=class extends self.X6{constructor(){super()}set Zrs(t){s.Ie(t),n.SetGravity(t)}get Zrs(){return n.Hrs()}set Qrs(t){const s=Wc.indexOf(t);if(s<0)throw new Error("invalid stepping mode");n.Drs(Wc[s])}get Qrs(){return Wc[n.Ors()]}set tns(t){s.Ie(t),n.Nrs(t)}get tns(){return n.Brs()}set sns(t){s.Ie(t),n.Wrs(t)}get sns(){return n.Vrs()}ins(t,s,i){const e=n.ck(),h=e.jk(t),r=e.jk(s);i=!!i,n.qrs(h,r,i)}}}{const Vc=self.Bs;Vc.olt.grs.RIt=class extends Vc.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{let u=function(t,s){const i=R.get(t).ck();return i.VD(s)};u;const E=self.Bs,A=self.$s,jc=self.B6,Hc=new WeakMap,Uc=new WeakMap,zc=new WeakMap,Jc=E.olt.grs.Prs,qc=E.olt.grs.$rs,Xc=E.wr(E.Rect),Yc=E.wr(E.ou),R=(E.olt.grs.Instance=class extends E.MGt{constructor(t,s){super(t);const i=this.V6(),e=this.jD(),h=(this.ens=i.Ars(),this.yrs=i.Rrs(),this.Srs=i.Frs(),this.hns=!1,this.rns=0,this.nns=0,this.ons=!1,this.ans=1,this.lns=.5,this.uns=.2,this.cns=0,this.fns=.01,this.dns=!1,this.swt=!0,this.pns=null,this.mns=[],this.gns=[],this.yns=[],this.wns=new Set,this.Sns=e.Hv(),this.bns=e.Jv(),this.vns=e.GetAngle(),this.Gzt=0,this._zt=0,this.Mns=!1,s&&(this.hns=!!s[0],this.rns=s[1],this.ons=!!s[2],this.ans=s[3],this.lns=s[4],this.uns=s[5],this.cns=s[6],this.fns=s[7],this.dns=!!s[8],this.swt=!!s[9]),this.Sf.Qf());this.A0=new E.C0(E.M0.I0(h,"instancedestroy",t=>this.Hqt(t.z6)),E.M0.I0(h,"beforeload",()=>this.$$()),E.M0.I0(h,"afterload",()=>this.Z$())),Uc.set(this.Pi,this),this.swt&&this.xTt()}_Gt(){this.xns()}Sr(){this.Tns(),E.Un(this.yns),this.wns.clear(),this.pns&&(this.Gns(),this.yrs.DestroyBody(this.pns),this.pns=null),super.Sr()}_ns(t){if(this.pns){const s=this.pns.CreateFixture(t);return this.mns.push(s),s}}Gns(){if(this.pns){for(const t of this.mns)this.pns.DestroyFixture(t);E.Un(this.mns)}}Ins(){const t=this.jD();return t._6()?(t.tRt(Xc,Yc,!1),Yc):t.vB()}Cns(t){this.ens.destroy(t)}xns(){if(this.swt){const t=this.ens.b2FixtureDef,i=this.ens.b2BodyDef,e=this.jD(),s=e.pRt();if(this.nns=this.rns,s||this.Pi.lPt()||0!==this.nns||(this.nns=1),!this.pns){const o=new i;o.set_type(this.hns?0:2);let t=e.Hv()*this.Srs,s=e.Jv()*this.Srs;if(2===this.nns){const a=this.Ins();t=a.Bl()*this.Srs,s=a.Wl()*this.Srs}o.set_position(qc(t,s)),o.set_angle(e.GetAngle()),o.set_fixedRotation(this.ons),o.set_linearDamping(this.cns),o.set_angularDamping(this.fns),o.set_bullet(this.dns),this.pns=this.yrs.CreateBody(o),this.Cns(o),Hc.set(this.pns,this)}this.Gns();const h=new t,r=(h.set_density(this.ans),h.set_friction(this.lns),h.set_restitution(this.uns),Math.max(Math.abs(e.Em()),1)),n=Math.max(Math.abs(e.Wm()),1);0===this.nns?this.Pi.lPt()?this.Pns(h):this.Ens(h,r,n):1===this.nns?this.Ans(h,e,r,n):this.Rns(h,r,n),this.Gzt=e.Em(),this._zt=e.Wm(),e.wRt(!1),this.Cns(h)}}Ans(t,s,i,e){let h=this.ens.b2PolygonShape,r=new h,n=i*this.Srs,o=e*this.Srs,a=s.vW(),l=s.xW();s.Em()<0&&(a=1-a),s.Wm()<0&&(l=1-l);const u=(.5-a)*n,c=(.5-l)*o,f=E.olt.grs.z_t(u,c);r.SetAsBox(n/2,o/2,f,0),t.set_shape(r),this._ns(t),this.Cns(r),E.olt.grs.Yrs(f)}Rns(t,s,i){const e=this.ens.b2CircleShape,h=new e;h.set_m_radius(Math.min(s,i)*this.Srs*.5),t.set_shape(h),this._ns(t),this.Cns(h)}Ens(t,s,i){const e=this.jD(),h=e.Em()<0,r=e.Wm()<0,n=this.Srs,o=e.yRt(h?-s:s,r?-i:i,0),a=o.Ju(),l=a.length/2,u=[];for(let t=0;t<l;++t)u.push(E.olt.grs.z_t(a[2*t],a[2*t+1]));h!=r&&u.reverse();const c=E.olt.grs.Ons.Fns(u,s*i);for(const f of u)E.olt.grs.Yrs(f);if(c.length)for(const d of c){for(const m of d)m.set_x(m.get_x()*n),m.set_y(m.get_y()*n);const p=E.olt.grs.Krs(d);t.set_shape(p),this._ns(t),this.Cns(p);for(const g of d)E.olt.grs.Yrs(g)}else this.Ans(t,e,s,i)}Pns(e){const h=this.Srs,r=E.olt.grs.z_t,n=E.olt.grs.Yrs,i=[],o=(this.Pi.O6().nJt(i),[]);for(let t=0,s=i.length;t<s;++t){const a=i[t],l=a._3t(),u=a.I3t();if(u){let i=zc.get(u);if(!i){const c=u.Ju(),f=u.qu();for(let t=0;t<f;++t)o.push(r(c[2*t],c[2*t+1]));const d=3758096384&a.u9t();(-2147483648==d||1073741824==d||536870912==d||-2147483648&d&&1073741824&d&&536870912&d)&&o.reverse(),i=E.olt.grs.Ons.Fns(o,l.width()*l.height()),zc.set(u,i);for(const p of o)n(p);E.Un(o)}for(let t=0,s=i.length;t<s;++t){const m=i[t];for(let t=0,s=m.length;t<s;++t)o.push(r((l.Al()+m[t].get_x())*h,(l.Rl()+m[t].get_y())*h));const g=E.olt.grs.Krs(o);e.set_shape(g),this._ns(e),this.Cns(g);for(const y of o)n(y);E.Un(o)}}else{o.push(r(l.Al()*h,l.Rl()*h)),o.push(r(l.Fl()*h,l.Rl()*h)),o.push(r(l.Fl()*h,l.Ol()*h)),o.push(r(l.Al()*h,l.Ol()*h));const w=E.olt.grs.Krs(o);e.set_shape(w),this._ns(e),this.Cns(w)}for(const S of o)n(S);E.Un(o)}}Dns(){this.pns&&(this.Tns(),Hc.delete(this.pns),this.Gns(),this.yrs.DestroyBody(this.pns),this.pns=null)}Tns(){for(const t of this.gns)this.yrs.DestroyJoint(t);E.Un(this.gns)}kns(){for(const t of this.yns)switch(t.type){case 0:this.Lns(...t.params);break;case 1:this.Nns(...t.params);break;case 2:this.Bns(...t.params);break;case 3:this.Wns(...t.params)}}Vns(t){const s=this.jD();if(-1===t)return[s.Hv(),s.Jv()];if(0===t&&this.pns){const i=this.pns.GetWorldCenter();return[i.get_x()/this.Srs,i.get_y()/this.Srs]}return this.Pi.Dvt(t)}jns(t,s,i,e,h){if(this.swt&&s&&s!==this.Pi){const r=E.olt.grs.Instance.zrs(s);r&&r.$Mt()&&(this.yns.push({type:0,params:[t,s.a4(),i,e,h]}),this.Lns(t,s.a4(),i,e,h))}}Lns(t,s,i,e,h){if(this.swt){const r=this.Sf.LD(s);if(r&&r!==this.Pi){const n=E.olt.grs.Instance.zrs(r);if(n&&n.$Mt()){n.wns.add(this.Pi),this.Hns(!1),n.Hns(!1);const[o,a]=this.Vns(t),[l,u]=r.Dvt(i),c=o-l,f=a-u,d=this.ens.b2DistanceJointDef,p=this.Srs,m=new d;m.Initialize(this.pns,n.GetBody(),Jc(o*p,a*p),qc(l*p,u*p)),m.set_length(Math.hypot(c,f)*p),m.set_dampingRatio(e),m.set_frequencyHz(h),this.gns.push(this.yrs.CreateJoint(m)),this.Cns(m)}}}}Uns(t,s){if(this.swt&&s&&s!==this.Pi){const i=E.olt.grs.Instance.zrs(s);i&&i.$Mt()&&(this.yns.push({type:1,params:[t,s.a4()]}),this.Nns(t,s.a4()))}}Nns(t,s){if(this.swt){const i=this.Sf.LD(s);if(i&&i!==this.Pi){const e=E.olt.grs.Instance.zrs(i);if(e&&e.$Mt()){e.wns.add(this.Pi),this.Hns(!1),e.Hns(!1);const[h,r]=this.Vns(t),n=this.ens.b2RevoluteJointDef,o=this.Srs,a=new n;a.Initialize(this.pns,e.GetBody(),Jc(h*o,r*o)),this.gns.push(this.yrs.CreateJoint(a)),this.Cns(a)}}}}zns(t,s,i,e){if(this.swt&&s&&s!==this.Pi){const h=E.olt.grs.Instance.zrs(s);h&&h.$Mt()&&(i=E.Cr(i),e=E.Cr(e),this.yns.push({type:2,params:[t,s.a4(),i,e]}),this.Bns(t,s.a4(),i,e))}}Bns(t,s,i,e){if(this.swt){const h=this.Sf.LD(s);if(h&&h!==this.Pi){const r=E.olt.grs.Instance.zrs(h);if(r&&r.$Mt()){r.wns.add(this.Pi),this.Hns(!1),r.Hns(!1);const[n,o]=this.Vns(t),a=this.ens.b2RevoluteJointDef,l=this.Srs,u=new a;u.Initialize(this.pns,r.GetBody(),Jc(n*l,o*l)),u.set_enableLimit(!0),u.set_lowerAngle(E.Ir(i)),u.set_upperAngle(E.Ir(e)),this.gns.push(this.yrs.CreateJoint(u)),this.Cns(u)}}}}Jns(t,s,i,e,h,r,n,o,a){if(this.swt&&s&&s!==this.Pi){const l=E.olt.grs.Instance.zrs(s);l&&l.$Mt()&&(i=E.Cr(i),o=E.Cr(o),this.yns.push({type:3,params:[t,s.a4(),i,e,h,r,n,o,a]}),this.Wns(t,s.a4(),i,e,h,r,n,o,a))}}Wns(t,s,i,e,h,r,n,o,a){if(this.swt){const l=this.Sf.LD(s);if(l&&l!==this.Pi){const u=E.olt.grs.Instance.zrs(l);if(u&&u.$Mt()){u.wns.add(this.Pi),this.Hns(!1),u.Hns(!1);const[c,f]=this.Vns(t),d=(i=E.Ir(i),Math.cos(i)),p=Math.sin(i),m=this.ens.b2PrismaticJointDef,g=this.Srs,y=new m;y.Initialize(this.pns,u.GetBody(),Jc(c*g,f*g),qc(d,p)),y.set_enableLimit(!!e),y.set_lowerTranslation(h*g),y.set_upperTranslation(r*g),y.set_enableMotor(!!n),y.set_motorSpeed(E.Ir(o)),y.set_maxMotorForce(a),this.gns.push(this.yrs.CreateJoint(y)),this.Cns(y)}}}}qns(){this.swt&&(this.Tns(),E.Un(this.yns),this.wns.clear())}Xns(){for(const t of this.wns){const s=E.olt.grs.Instance.zrs(t);if(!s||!s.$Mt())return;s.Yns(this.Pi)}this.wns.clear()}Hqt(t){this.Yns(t)}Yns(t){let i=t.a4(),e=0;for(let t=0,s=this.yns.length;t<s;++t)this.yns[e]=this.yns[t],e<this.gns.length&&(this.gns[e]=this.gns[t]),this.yns[t].params[1]===i?t<this.gns.length&&this.yrs.DestroyJoint(this.gns[t]):++e;E.Hn(this.yns,e),e<this.gns.length&&E.Hn(this.gns,e),this.wns.delete(t)}GetBody(){return this.pns}static Ers(t){return Hc.get(t)||null}static zrs(t){return Uc.get(t)||null}iM(){const t={e:this.swt,im:this.hns,pr:this.ons,d:this.ans,fr:this.lns,re:this.uns,ld:this.cns,ad:this.fns,b:this.dns,mcj:this.yns};if(this.swt){const s=this.pns.GetLinearVelocity();t.vx=s.get_x(),t.vy=s.get_y(),t.om=this.pns.GetAngularVelocity()}return t}$$(){this.Tns(),E.Un(this.yns),this.wns.clear()}eM(t){this.Dns(),this.swt=t.e,t.hasOwnProperty("im")&&(this.hns=!!t.im),this.ons=t.pr,this.ans=t.d,this.lns=t.fr,this.uns=t.re,this.cns=t.ld,this.fns=t.ad,this.dns=t.b,this.yns=t.mcj;const s=this.jD();this.Sns=s.Hv(),this.bns=s.Jv(),this.vns=s.GetAngle(),this.Gzt=s.Em(),this._zt=s.Wm(),this.swt&&(this.xns(),this.pns.SetLinearVelocity(Jc(t.vx,t.vy)),this.pns.SetAngularVelocity(t.om),0===t.vx&&0===t.vy&&0===t.om||this.pns.SetAwake(!0),this.yns=t.mcj),this.swt?this.xTt():this.oTt()}Z$(){this.swt&&this.kns()}YK(){if(this.swt){let t=this.Sf,i=this.V6(),e=0;0===i.Ors()?e=t.sD()/60:(e=t.YO(this.Pi))>1/30&&(e=1/30);const h=t.ZNt();if(h>i.Lrs()&&0<t.sD()){let t=this.Sf.s$(),s=0;t&&(s=performance.now()),0!==e&&this.yrs.Step(e,i.Brs(),i.Vrs()),this.yrs.ClearForces(),t&&self.C3Debugger.AddPhysicsTime(performance.now()-s),i.krs(h)}this.Hns(!0)}}Hns(t){let s=this.Pi,i=s.jD(),e=this.Srs,h=(i.Em()===this.Gzt&&i.Wm()===this._zt&&!i.TRt()||this.xns(),this.pns),r=i.Hv(),n=i.Jv(),o=r-this.Sns,a=n-this.bns,l=.001<Math.abs(o)||.001<Math.abs(a),u=i.GetAngle()!==this.vns,c=r,f=n;if(2===this.nns){const y=this.Ins();c=y.Bl(),f=y.Wl()}l?(u?h.SetTransform(Jc(c*e,f*e),i.GetAngle()):h.SetTransform(Jc(c*e,f*e),h.GetAngle()),t&&(h.SetLinearVelocity(Jc(o,a)),this.Mns=!0),h.SetAwake(!0)):t&&this.Mns&&(this.Mns=!1,h.SetLinearVelocity(Jc(0,0)),h.SetTransform(Jc(c*e,f*e),h.GetAngle())),!l&&u&&(h.SetTransform(h.GetPosition(),i.GetAngle()),h.SetAwake(!0));const d=h.GetPosition(),p=d.get_x()/e,m=d.get_y()/e,g=h.GetAngle();if((p!==i.Hv()||m!==i.Jv()||g!==i.GetAngle())&&(i.fB(p,m),i.v5(g),i.cB(),2===this.nns)){const w=this.Ins(),S=w.Bl()-i.Hv(),b=w.Wl()-i.Jv();0==S&&0==b||(i.mB(-S,-b),i.cB())}this.Sns=i.Hv(),this.bns=i.Jv(),this.vns=i.GetAngle()}$rt(t){switch(t){case 2:return this.$ns();case 3:return this.Kns();case 4:return this.Zns();case 5:return this.Qns();case 6:return this.tos();case 7:return this.ios();case 8:return this.eos();case 9:return this.$Mt()}}int(t,s){switch(t){case 2:this.hos(s);break;case 3:this.ros(s);break;case 4:this.nos(s);break;case 5:this.oos(s);break;case 6:this.aos(s);break;case 7:this.los(s);break;case 8:this.uos(s);break;case 9:this.XMt(s)}}XMt(t){t=!!t,this.swt&&!t?(this.Xns(),this.Dns(),this.swt=!1,this.oTt()):!this.swt&&t&&(this.swt=!0,this.xns(),this.xTt())}$Mt(){return this.swt}ITt(){const t="behaviors.physics",s=[{name:t+".properties.enabled.name",value:this.$Mt(),o8t:t=>this.XMt(t)},{name:t+".properties.immovable.name",value:this.fos(),o8t:t=>this.dos(t)},{name:t+".properties.density.name",value:this.Kns(),o8t:t=>this.ros(t)},{name:t+".properties.friction.name",value:this.Zns(),o8t:t=>this.nos(t)},{name:t+".properties.elasticity.name",value:this.Qns(),o8t:t=>this.oos(t)},{name:t+".properties.linear-damping.name",value:this.tos(),o8t:t=>this.aos(t)},{name:t+".properties.angular-damping.name",value:this.ios(),o8t:t=>this.los(t)}];return this.swt&&(s.push({name:t+".debugger.is-sleeping",value:!this.mos()}),s.push({name:t+".debugger.velocity-x",value:this.gos(),o8t:t=>this.yos(t,this.wos())}),s.push({name:t+".debugger.velocity-y",value:this.wos(),o8t:t=>this.yos(this.gos(),t)}),s.push({name:t+".debugger.angular-velocity",value:E.Cr(this.Sos()),o8t:t=>this.bos(E.Ir(t))}),s.push({name:t+".debugger.mass",value:this.vos()})),[{title:"$"+this.U6().uf(),properties:s}]}Mos(t,s,i){const[e,h]=this.Vns(i);this.xos(t,s,e,h)}Tos(t,s,i,e){const[h,r]=this.Vns(e),n=E.Ar(h,r,s,i);this.xos(Math.cos(n)*t,Math.sin(n)*t,h,r)}Gos(t,s,i){const[e,h]=this.Vns(i);this.xos(Math.cos(s)*t,Math.sin(s)*t,e,h)}xos(t,s,i,e){if(this.swt){const h=this.Srs;this.pns.ApplyForce(Jc(t,s),qc(i*h,e*h),!0)}}_os(t,s,i){const[e,h]=this.Vns(i);this.Ios(t,s,e,h)}Cos(t,s,i,e){const[h,r]=this.Vns(e),n=E.Ar(h,r,s,i);this.Ios(Math.cos(n)*t,Math.sin(n)*t,h,r)}Pos(t,s,i){const[e,h]=this.Vns(i);this.Ios(Math.cos(s)*t,Math.sin(s)*t,e,h)}Ios(t,s,i,e){if(this.swt){const h=this.Srs,r=(this.pns.ApplyLinearImpulse(Jc(t,s),qc(i*h,e*h),!0),this.jD());this.Sns=r.Hv(),this.bns=r.Jv(),this.Mns=!1}}Eos(t){this.swt&&this.pns.ApplyTorque(t,!0)}Aos(t,s){const i=E.Or(this.jD().GetAngle(),s)?-1:1;this.Eos(t*i)}Ros(t,s,i){const e=this.jD(),h=E.Ar(e.Hv(),e.Jv(),s,i),r=E.Or(e.GetAngle(),h)?-1:1;this.Eos(t*r)}bos(t){this.swt&&(this.pns.SetAngularVelocity(t),this.pns.SetAwake(!0))}Sos(){return this.swt?this.pns.GetAngularVelocity():0}yos(t,s){if(this.swt){const i=this.Srs,e=(this.pns.SetLinearVelocity(Jc(t*i,s*i)),this.pns.SetAwake(!0),this.jD());this.Sns=e.Hv(),this.bns=e.Jv(),this.Mns=!1}}Fos(){if(!this.swt)return[0,0];const t=this.Srs,s=this.pns.GetLinearVelocity();return[s.get_x()/t,s.get_y()/t]}gos(){return this.swt?this.pns.GetLinearVelocity().get_x()/this.Srs:0}wos(){return this.swt?this.pns.GetLinearVelocity().get_y()/this.Srs:0}Oos(t,s){if(this.swt){const i=this.Srs,e=(this.pns.SetTransform(Jc(t*i,s*i),this.pns.GetAngle()),this.jD());e.fB(t,s),e.cB(),this.Sns=e.Hv(),this.bns=e.Jv()}}ros(t){if(this.swt&&this.ans!==t){this.ans=t;for(const s of this.mns)s.SetDensity(t);this.pns.ResetMassData()}}Kns(){return this.swt?this.ans:0}nos(t){if(this.swt&&this.lns!==t){this.lns=t;for(const s of this.mns)s.SetFriction(t);if(this.pns)for(let t=this.pns.GetContactList();this.ens.getPointer(t);t=t.get_next()){const i=t.get_contact();i&&i.ResetFriction()}}}Zns(){return this.swt?this.lns:0}oos(t){if(this.swt&&this.uns!==t){this.uns=t;for(const s of this.mns)s.SetRestitution(t)}}Qns(){return this.swt?this.uns:0}aos(t){this.swt&&this.cns!==t&&(this.cns=t,this.pns.SetLinearDamping(t))}tos(){return this.swt?this.cns:0}los(t){this.swt&&this.fns!==t&&(this.fns=t,this.pns.SetAngularDamping(t))}ios(){return this.swt?this.fns:0}dos(t){this.swt&&this.hns!==(t=!!t)&&(this.hns=t,this.pns.SetType(this.hns?0:2),this.pns.SetAwake(!0))}fos(){return this.hns}hos(t){this.swt&&this.ons!==(t=!!t)&&(this.ons=t,this.pns.SetFixedRotation(this.ons),this.pns.SetAngularVelocity(0),this.pns.SetAwake(!0))}$ns(){return this.ons}uos(t){this.swt&&this.dns!==(t=!!t)&&(this.dns=t,this.pns.SetBullet(this.dns),this.pns.SetAwake(!0))}eos(){return this.dns}Dos(t){this.swt&&this.pns.SetAwake(!!t)}mos(){return!!this.swt&&this.pns.IsAwake()}vos(){return this.swt?this.pns.GetMass()/this.Srs:0}kos(){return this.swt?this.pns.GetWorldCenter().get_x()/this.Srs:0}Los(){return this.swt?this.pns.GetWorldCenter().get_y()/this.Srs:0}Nos(){if(!this.swt)return[0,0];const t=this.pns.GetWorldCenter(),s=this.Srs;return[t.get_x()/s,t.get_y()/s]}Bos(){if(!this.swt)return 0;let s=0;for(let t=this.pns.GetContactList();this.ens.getPointer(t);t=t.get_next()){const i=t.get_contact();if(i){const e=i.GetManifold(),h=e.get_pointCount();s+=h}}return s}Wos(i){if(i=Math.floor(i),this.swt){let s=0;for(let t=this.pns.GetContactList();this.ens.getPointer(t);t=t.get_next()){const e=t.get_contact();if(e){const h=e.GetManifold(),r=h.get_pointCount();if(i>=s&&i<s+r){const n=i-s,o=this.V6().GetWorldManifold(),a=(e.GetWorldManifold(o),o.get_points(n));return[a.get_x()/this.Srs,a.get_y()/this.Srs]}s+=r}}}return[0,0]}Bxt(){return self.Vos}},new WeakMap);self.Vos=class extends jc{constructor(){super(),R.set(this,jc.ZN().O6())}get isEnabled(){return R.get(this).$Mt()}set isEnabled(t){R.get(this).XMt(t)}jos(t,s,i=0){A.Ie(t),A.Ie(s),R.get(this).Mos(t,s,i)}Hos(t,s,i,e=0){A.Ie(t),A.Ie(s),A.Ie(i),R.get(this).Tos(t,s,i,e)}Uos(t,s,i=0){A.Ie(t),A.Ie(s),R.get(this).Gos(t,s,i)}zos(t,s,i=0){A.Ie(t),A.Ie(s),R.get(this)._os(t,s,i)}Jos(t,s,i,e=0){A.Ie(t),A.Ie(s),A.Ie(i),R.get(this).Cos(t,s,i,e)}qos(t,s,i=0){A.Ie(t),A.Ie(s),R.get(this).Pos(t,s,i)}Xos(t){A.Ie(t),R.get(this).Eos(t)}Yos(t,s){A.Ie(t),A.Ie(s),R.get(this).Aos(t,s)}$os(t,s,i){A.Ie(t),A.Ie(s),A.Ie(i),R.get(this).Ros(t,s,i)}set angularVelocity(t){A.Ie(t),R.get(this).bos(t)}get angularVelocity(){return R.get(this).Sos()}setVelocity(t,s){A.Ie(t),A.Ie(s),R.get(this).yos(t,s)}Kos(){return R.get(this).gos()}Zos(){return R.get(this).wos()}Qos(){return R.get(this).Fos()}tas(t,s){A.Ie(t),A.Ie(s),R.get(this).Oos(t,s)}set sas(t){A.Ie(t),R.get(this).ros(t)}get sas(){return R.get(this).Kns()}set ias(t){A.Ie(t),R.get(this).nos(t)}get ias(){return R.get(this).Zns()}set eas(t){A.Ie(t),R.get(this).oos(t)}get eas(){return R.get(this).Qns()}set ras(t){A.Ie(t),R.get(this).aos(t)}get ras(){return R.get(this).tos()}set nas(t){A.Ie(t),R.get(this).los(t)}get nas(){return R.get(this).ios()}set oas(t){R.get(this).dos(t)}get oas(){return R.get(this).fos()}set aas(t){R.get(this).hos(t)}get aas(){return R.get(this).$ns()}set las(t){R.get(this).uos(t)}get las(){return R.get(this).eos()}get uas(){return R.get(this).vos()}fas(){return R.get(this).kos()}das(){return R.get(this).Los()}pas(){return R.get(this).Nos()}mas(){return R.get(this).Bos()}gas(t){return A.Ie(t),R.get(this).Wos(t)[0]}yas(t){return A.Ie(t),R.get(this).Wos(t)[1]}was(t){return A.Ie(t),R.get(this).Wos(t)}set Sas(t){R.get(this).Dos(!!t)}get Sas(){return R.get(this).mos()}get bas(){return!R.get(this).mos()}vas(t,s,i,e,h){A.Ie(e),A.Ie(h);const r=u(this,s);R.get(this).jns(t,r,i,e,h)}Mas(t,s){const i=u(this,s);R.get(this).Uns(t,i)}xas(t,s,i,e){A.Ie(i),A.Ie(e);const h=u(this,s);R.get(this).zns(t,h,i,e)}Tas(t,s,i,e,h,r,n,o,a){const l=u(this,s);R.get(this).Jns(t,l,i,e,h,r,n,o,a)}Gas(){R.get(this).qns()}}}{const $c=self.Bs;$c.olt.grs.MY={_as(){return!this.mos()},Ias(t,s,i){if(!this.swt)return!1;let e=0;if(0===t)e=this.gos();else if(1===t)e=this.wos();else{const[h,r]=this.Fos();e=Math.hypot(h,r)}return $c.compare(e,s,i)},Cas(t,s){if(!this.swt)return!1;const i=$c.Cr(this.Sos());return $c.compare(i,t,s)},Pas(t,s){if(!this.swt)return!1;const i=this.vos();return $c.compare(i,t,s)},rc(){return this.$Mt()}}}{const Kc=self.Bs;Kc.olt.grs.frt={ApplyForce(t,s,i){this.Mos(t,s,i)},Eas(t,s,i,e){this.Tos(t,s,i,e)},Aas(t,s,i){this.Gos(t,Kc.Ir(s),i)},Ras(t,s,i){this._os(t,s,i)},Fas(t,s,i,e){this.Cos(t,s,i,e)},Oas(t,s,i){this.Pos(t,Kc.Ir(s),i)},ApplyTorque(t){this.Eos(Kc.Ir(t))},Das(t,s){this.Aos(Kc.Ir(t),Kc.Ir(s))},kas(t,s,i){this.Ros(Kc.Ir(t),s,i)},SetAngularVelocity(t){this.bos(Kc.Ir(t))},Las(t,s,i,e,h){if(s){const r=s.fMt(this.Pi);this.jns(t,r,i,e,h)}},Nas(t,s){if(s){const i=s.fMt(this.Pi);this.Uns(t,i)}},Bas(t,s,i,e){if(s){const h=s.fMt(this.Pi);this.zns(t,h,Kc.Ir(i),Kc.Ir(e))}},Was(t,s,i,e,h,r,n,o,a){if(s){const l=s.fMt(this.Pi);this.Jns(t,l,Kc.Ir(i),e,h,r,n,Kc.Ir(o),a)}},Vas(){this.qns()},jas(t){this.V6().SetGravity(t)},Drs(t){this.V6().Drs(t)},jrs(t,s){this.V6().jrs(t,s)},Has(t,s){this.yos(t,s)},Uas(t,s){this.Oos(t,s)},SetDensity(t){this.ros(t)},SetFriction(t){this.nos(t)},zas(t){this.oos(t)},SetLinearDamping(t){this.aos(t)},SetAngularDamping(t){this.los(t)},Jas(t){this.dos(t)},qas(t,s){this.V6().qrs(this.YN(),t,0!==s)},Xas(t){this.hos(0!==t)},SetBullet(t){this.uos(0!==t)},SetAwake(t){this.Dos(!!t)},q2t(t){this.XMt(0!==t)}}}{const Zc=self.Bs;Zc.olt.grs.drt={Yas(){return this.gos()},$as(){return this.wos()},Kas(){return Zc.Cr(this.Sos())},Zas(){return this.vos()},Qas(){return this.kos()},tls(){return this.Los()},sls(){return this.Kns()},ils(){return this.Zns()},els(){return this.Qns()},hls(){return this.tos()},rls(){return this.ios()},nls(){return this.Bos()},ols(t){return this.Wos(t)[0]},als(t){return this.Wos(t)[1]}}}{let n=function(t){return sf(t.get_x(),t.get_y())},s=function(t){const s=[];for(const i of t)i.length<=8?s.push(i):s.push.apply(s,e(i));return s},e=function(i){let e=[],h=(e.push(i.splice(0,8)),e[0][0]),r=e[0][7];for(;i.length;){let t=i.splice(0,Math.min(i.length,6)),s=t.at(-1);t.push(n(h)),t.push(n(r)),e.push(t),r=s}return e};n,s,e;const Qc=self.Bs,tf={},sf=(Qc.olt.grs.Ons=tf,Qc.olt.grs.z_t),ef=Qc.olt.grs.Yrs;tf.lls=function(t,s,i,e,h,r){return t*e+i*r+h*s-s*i-e*h-r*t},tf.uls=function(t,s,i,e,h,r,n,o){const a=h-t,l=r-s,u=i-t,c=e-s,f=n-h,d=o-r,p=c*f-u*d,m=(f*l-d*a)/p,g=t+m*u,y=s+m*c,w=tf.cls(i,e,t,s,g,y),S=tf.cls(g,y,h,r,n,o);return w&&S?sf(g,y):null},tf.cls=function(t,s,i,e,h,r){const n=t<=i+.1&&h-.1<=t||i-.1<=t&&t<=h+.1,o=s<=e+.1&&r-.1<=s||e-.1<=s&&s<=r+.1;return n&&o&&tf.fls(t,s,i,e,h,r)},tf.fls=function(t,s,i,e,h,r){if(.1<Math.abs(h-i)){const n=(r-e)/(h-i),o=n*(t-i)+e,a=Math.abs(o-s);return a<.1}return Math.abs(t-i)<.1},tf.dls=function(t,s,i,e){return Math.abs(i-t)<.1&&Math.abs(e-s)<.1},tf.Fns=function(t,r){let n=tf.pls(t),o=[];for(let t=0,s=n.length;t<s;++t){let i=n[t],e=[],h=0;for(let t=0,s=i.length;t<s;++t){const a=i[t],l=i[(t+1)%s];h+=a.get_x()*l.get_y()-a.get_y()*l.get_x(),e.push(sf(a.get_x(),a.get_y()))}if((h=Math.abs(h/2))>=.001*r)o.push(e);else for(let t=0,s=e.length;t<s;t++)ef(e[t])}return o=s(o)},tf.pls=function(t){let s=[],i=0,e,h=0,r,n,o,a=0,l,u,c,f,d,p,m,g,y,w,S=0,b=0,v=0,M=0,x=[],T=[],G=!1,_=[],I=[],C=!1;for(I.push(t);I.length;){for(e=(s=I[0]).length,G=!0,i=0;i<e;i++)if(u=(l=i)<e-1?i+1:i+1-e,c=i<e-2?i+2:i+2-e,f=s[l],d=s[u],p=s[c],tf.lls(f.get_x(),f.get_y(),d.get_x(),d.get_y(),p.get_x(),p.get_y())<0){for(G=!1,a=1e9,h=0;h<e;h++)h!==l&&h!==u&&(S=h,b=h<e-1?h+1:0,m=s[S],g=s[b],y=tf.uls(f.get_x(),f.get_y(),d.get_x(),d.get_y(),m.get_x(),m.get_y(),g.get_x(),g.get_y()))&&((r=(n=d.get_x()-y.get_x())*n+(o=d.get_y()-y.get_y())*o)<a?(M=S,v=b,w=y,a=r):ef(y));if(1e9===a)return[];for(x=[],T=[],S=M,b=v,m=s[S],g=s[b],C=!1,tf.dls(w.get_x(),w.get_y(),g.get_x(),g.get_y())||(x.push(w),C=!0),tf.dls(w.get_x(),w.get_y(),m.get_x(),m.get_y())||(T.push(w),C=!0),C||ef(w),M=-1,v=l;;){if(v===b){if(M<0||M>=e)return[];tf.cls(g.get_x(),g.get_y(),s[M].get_x(),s[M].get_y(),f.get_x(),f.get_y())||x.push(s[v]);break}x.push(s[v]),(M=v)-1<0?v=e-1:v--}for(x.reverse(),M=-1,v=u;;){if(v===S){if(M<0||M>=e)return[];v!==S||tf.cls(m.get_x(),m.get_y(),s[M].get_x(),s[M].get_y(),d.get_x(),d.get_y())||T.push(s[v]);break}T.push(s[v]),(M=v)+1>e-1?v=0:v++}I.push(x,T),I.shift();break}G&&_.push(I.shift())}return _}}{const hf=self.Bs;hf.olt.VGt=class extends hf.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const rf=self.Bs;rf.olt.VGt.RIt=class extends rf.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const nf=self.Bs,of=self.$s,af=self.B6,lf=new Set,uf=(nf.olt.VGt.Instance=class extends nf.MGt{constructor(t,s){super(t),this.q2t(!0),s&&(this.q2t(s[0]),this.Ntt(s[1]))}Sr(){super.Sr()}q2t(t){this.Pi.dPt(!!t)}rc(){return this.Pi.fPt()}Ntt(s){const i=this.Pi.Ebt();if(s.trim()){let t=i.get("solidTags");t||(t=new Set,i.set("solidTags",t)),t.clear();for(const e of s.split(" "))e&&t.add(e.toLowerCase())}else i.delete("solidTags")}QW(){return this.Pi.Ebt().get("solidTags")||lf}mls(){return[...this.QW()].join(" ")}iM(){return{e:this.rc()}}eM(t){this.q2t(t.e)}$rt(t){if(0===t)return this.rc()}int(t,s){0===t&&this.q2t(s)}ITt(){return[{title:"$"+this.U6().uf(),properties:[{name:"behaviors.solid.properties.enabled.name",value:this.rc(),o8t:t=>this.q2t(t)},{name:"behaviors.solid.properties.tags.name",value:this.mls(),o8t:t=>this.Ntt(t)}]}]}Bxt(){return self.gls}},new WeakMap);self.gls=class extends af{constructor(){super(),uf.set(this,af.ZN().O6())}set isEnabled(t){uf.get(this).q2t(!!t)}get isEnabled(){return uf.get(this).rc()}set tags(t){of.Ae(t),uf.get(this).Ntt(t)}get tags(){return uf.get(this).mls()}}}{const cf=self.Bs;cf.olt.VGt.MY={rc(){return this.rc()}}}{const ff=self.Bs;ff.olt.VGt.frt={q2t(t){this.q2t(t)},Ntt(t){this.Ntt(t)}}}{const df=self.Bs;df.olt.VGt.drt={}}{const pf=self.Bs;pf.olt.nlt=class extends pf.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const mf=self.Bs;mf.olt.nlt.RIt=class extends mf.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const gf=self.Bs,yf=gf.olt.nlt;yf.Instance=class extends gf.MGt{constructor(t,s){super(t),this.yls=!1,this.zu=!0,s&&(this.yls=!1,this.zu=!!s[0]),this.wls=new Map,this.Sls=[],this.bls=new Map,this.vls=null,this.Mls=null,this.xls=null,this.Tls=null,this.Gls="",this._ls=[],this.K$=t=>this.Z$(),this.ck().Qf().addEventListener("afterload",this.K$)}Sr(){this.ck().Qf().removeEventListener("afterload",this.K$),this.K$=null,this.vls&&(this.Ils(this.vls),this.vls=null),this.Cls(),this.Pls=null,this.Els(),this.Sls=null,this.Als(),this.bls=null,this._ls=null,super.Sr()}dlt(t){this._ls.push(t)}plt(){this._ls.pop()}Rls(){return this._ls[this._ls.length-1]}q2t(t){this.zu=!!t,t?this.bls&&this.bls.size&&this.GTt():this.aTt();for(const s of this.Fls())t?this.Ols(s)&&s.jW():((s.IsPlaying()||s.Jtt())&&this.Dls(s),s.VW());t&&this.Els()}rc(){return this.zu}Dls(t){this.Sls.push(t)}Ols(t){return this.Sls.includes(t)}Els(){gf.Un(this.Sls)}kls(){return this.vls}oit(){const t=this.J6();return!!t&&!t.mj()}Lls(t,s,i=!1){const e=s?this.Nls(s,i):this.Fls(i);if(e&&e.length)for(const h of e)if(h.HW(t))return h}Bls(t,s){for(const i of this.wls.values())for(const e of i)if(!e.BW()&&e.HW(t)&&s(e))return!0;for(const h of this.bls.values())for(const r of h)if(!r.BW()&&r.HW(t)&&s(r))return!0;return!1}Wls(t){for(const s of this.wls.values())for(const i of s)if(!i.BW()&&t(i))return!0;for(const e of this.bls.values())for(const h of e)if(!h.BW()&&t(h))return!0;return!1}Vls(t,s){return this.Lls(t,s,!0)}*jls(t,s,i=!1){const e=s?this.Nls(s,i):this.Fls(i);if(e&&e.length)for(const h of e)h.HW(t)&&(yield h)}*Hls(t,s){yield*this.jls(t,s,!0)}Nls(i,t){if(t){let t=this.wls.get(i),s=this.bls.get(i);return(t=t||[]).concat(s||[]).filter(t=>t).filter(t=>!t.BW())}{let t=this.wls.get(i);return(t=t||[]).filter(t=>t).filter(t=>!t.BW())}}Fls(t){if(t){const s=[...this.wls.values()].flat(),i=[...this.bls.values()].flat();return s.concat(i).filter(t=>t).filter(t=>!t.BW())}{const e=[...this.wls.values()].flat();return e.filter(t=>t).filter(t=>!t.BW())}}Uls(){return this.Fls(!0)}iM(t=0){return{s:!1,e:!!this.zu,at:this.zls(),dt:this.Jls(),wt:this.qls(),ft:this.Xls()}}eM(t,s="full"){t&&(this.Mls=t.at,this.xls=t.dt,this.Tls=t.wt,this.Gls=t.ft,this.yls=!1,this.zu=!!t.e,"state"===s)&&this.Z$()}Z$(){const t=this.ck().Mtt();if(this.Yls(this.Mls,this.wls,t),this.xls){gf.Un(this.Sls);for(const s of this.xls)this.$ls(this.Sls,s,t)}this.Yls(this.Tls,this.bls,t),this.vls=this.Kls(this.Gls,t),this.zu?this.bls&&this.bls.size&&this.GTt():this.aTt()}Yls(s,i,e){if(s)for(const h in s){let t=i.get(h);t?gf.Un(t):t=[];const r=s[h];for(const n of r){const o=this.$ls(t,n.name,e);if(o)this.Zls(n.name,n,e);else{const a=gf.znt.ylt({runtime:this.ck(),json:n});gf.znt._it(a,this.J6().a4()),a.qat(t=>this.Qls(t)),e.PK(a),this.$ls(t,a,e)}}i.set(h,t)}}Kls(t,s){return s._K(t)}$ls(t,s,i){if("string"!=typeof s)return!!t.push(s);{const e=this.Kls(s,i);if(e)return!!t.push(e)}return!1}Zls(t,s,i){if("string"==typeof t){const e=this.Kls(t,i);e&&(e.Oq(s),gf.znt._it(e,this.J6().a4()))}else t.Oq(s),gf.znt._it(t,this.J6().a4())}zls(){const t={};for(const[s,i]of this.wls)t[s]=i.filter(t=>!t.BW()).map(t=>t.Fq());return t}Jls(){return this.Sls.filter(t=>!t.BW()).map(t=>t.uf())}qls(){const t={};for(const[s,i]of this.bls)t[s]=i.map(t=>t.Fq());return t}Xls(){return this.vls?this.vls.uf():""}MTt(){this.Als()}tus(t){const s=yf.eus.ius(t.property,t.Mlt,t.xlt,t.ease,t.resultMode,this.J6()),i=yf.rus.hus(t.property),e=(yf.rus.nus(i)||this.ous(t.property),gf.znt.ylt({runtime:this.ck(),id:i,tags:t.tags,time:t.time,z6:this.J6(),Slt:!!t.Slt,loop:!!t.loop,pingPong:!!t.pingPong,repeatCount:t.repeatCount,initialValueMode:t.initialValueMode,wlt:s}));return e.qat(t=>this.Qls(t)),this.aus(e,t.property),e}lus(t){const s=t.pV();if(this.wls.has(s)){const i=this.wls.get(s);if(i){const e=i.indexOf(t);-1!==e&&i.splice(e,1)}}}oV(t,s=!1){this.lus(t),t.BW()||this.uus(t)||(t.VW(s),this.cus(t))}ous(t,s=!1){if(gf.ve(t)){const i=yf.rus.hus(t);if(this.wls.has(i)){const e=this.wls.get(i),h=this.kls();for(const r of e)r===h||r.BW()||this.uus(r)||(r.VW(s),r.Sr());gf.Un(e)}}else{const n=this.kls();for(const o of this.Fls())o===n||o.BW()||this.uus(o)||(o.VW(s),o.Sr());for(const a of this.wls.keys())gf.Un(this.wls.get(a)),this.wls.delete(a);this.wls.clear()}}Ils(t){this.oV(t,!0)}Cls(){this.ous(NaN,!0)}$rt(t){if(0===t)return this.zu}int(t,s){0===t&&(this.zu=!!s)}fus(t){const s=t.uV(),i=s.Hht();for(const e of i){const h=e.U6();if(h.tCt()===this.constructor)return h}}O4(t,s,i,e){return this.Sf?super.O4(t):s.O4(t,i,e)}Qls(t){this.vls=t,yf.MY.dus(t);let s,i;if(this.ck())s=this.Pi,i=this.Sf,this.O4(yf.MY.pus),this.O4(yf.MY.mus),this.oV(t);else{if(!(s=t.uV()))return;if(s&&s.mj())return;i=s.ck();const e=this.fus(t);this.O4(yf.MY.pus,i,s,e),this.O4(yf.MY.mus,i,s,e),t.VW()}this.vls=null,yf.MY.dus(null),t.fV()&&i.s4(s)}aus(t,s){const i=yf.rus.hus(s),e=(this.wls.has(i)||this.wls.set(i,[]),this.wls.get(i));e.push(t)}cus(t){const s=t.pV();this.bls.has(s)||this.bls.set(s,[]),this.bls.get(s).push(t),this._Tt()||this.GTt()}uus(t){const s=t.pV();return!!this.bls.has(s)&&this.bls.get(s).includes(t)}Als(){if(this.bls.size){for(const t of this.bls.values()){for(const s of t)s.BW()||s.Sr();gf.Un(t)}this.bls.clear(),this._Tt()&&this.aTt()}}ITt(){return[{title:"$"+this.U6().uf(),properties:[{name:"behaviors.tween.properties.enabled.name",value:this.rc(),o8t:t=>this.q2t(t)}]}]}Bxt(){return self.gus}}}{let i=self.Bs,s=null;i.olt.nlt.MY={rlt(){return!0},llt(t){const s=this.Rls();return!!s&&s.HW(t)},ult(t){const s=this.Rls();return!!s&&(s.ktt()===t||2===t)},clt(t,s){const i=this.Rls();return!!i&&(i.ktt()===s||2===s)&&i.HW(t)},dus(t){s=t},pus(t){return s.HW(t)},mus(){return!0},IsPlaying(t){return this.Bls(t,i.znt.IsPlaying)},pXt(){return this.Wls(i.znt.IsPlaying)},iV(t){return this.Bls(t,i.znt.iV)},yus(){return this.Wls(i.znt.iV)},lW(t,s){return 0===s?this.Bls(t,i.znt.mlt):1===s&&this.Bls(t,i.znt.glt)},wus(t){return 0===t?this.Wls(i.znt.mlt):1===t&&this.Wls(i.znt.glt)}}}{const wf=self.Bs,Sf=self._c,bf=wf.olt.nlt;bf.frt={q2t(t){this.q2t(!!t)},async Sus(...t){if(this.rc()&&this.oit()){const s=this.tus(bf.vus.bus(this,...t));s.Play()&&await s.tV()}},async Mus(...t){if(this.rc()&&this.oit()){const s=this.tus(bf.vus.xus(this,...t));s.Play()&&await s.tV()}},async Tus(...t){if(this.rc()&&this.oit()){const s=this.tus(bf.vus.Gus(this,...t));s.Play()&&await s.tV()}},_us(t){if(this.rc()&&this.oit())for(const s of this.jls(t))s.VW()},Ius(){if(this.rc()&&this.oit())for(const t of this.Fls())t.VW()},Cus(t){if(this.rc()&&this.oit())for(const s of this.jls(t))s.jW()},Pus(){if(this.rc()&&this.oit())for(const t of this.Fls())t.jW()},Eus(t){if(this.rc()&&this.oit())for(const s of this.jls(t))this.oV(s)},Aus(){if(this.rc()&&this.oit())for(const t of this.Fls())this.oV(t)},Rus(t,s,i){if(this.rc()&&this.oit()){const e=wf.olt.nlt.rus.Fus(s);for(const h of this.jls(t))h.Zat([e]),h.Qat(i,e)}},Ous(t,s,i,e){if(this.rc()&&this.oit()){const h=wf.olt.nlt.rus.Dus(s);for(const r of this.jls(t))r.Zat(h),r.Qat(i,h[0]),r.Qat(e,h[1])}},kus(t,s){if(this.rc()&&this.oit())for(const i of this.jls(t,"value"))i.$at(s,"value")},Lus(t,s){if(this.rc()&&this.oit())for(const i of this.jls(t,"value"))i.Zat(["value"]),i.Qat(s,"value")},Nus(t,s){if(this.rc()&&this.oit()){const i=Sf.Hc(s);for(const e of this.jls(t))e.lV(i)}},Bus(t){if(this.rc()&&this.oit()){const s=Sf.Hc(t);for(const i of this.Fls())i.lV(s)}},Wus(t,s){if(this.rc()&&this.oit())for(const i of this.jls(t))i.UW(s)},Vus(t){if(this.rc()&&this.oit())for(const s of this.Fls())s.UW(t)},jus(t,s){if(this.rc()&&this.oit())for(const i of this.jls(t))i.KW(s)},Hus(t){if(this.rc()&&this.oit())for(const s of this.Fls())s.KW(t)},Uus(t,s){if(this.rc()&&this.oit())for(const i of this.jls(t))i.dV(!!s)},zus(t){if(this.rc()&&this.oit())for(const s of this.Fls())s.dV(!!t)}}}{const vf=self.Bs;vf.olt.nlt.drt={Jus(t){const s=this.Vls(t);return s?s.ER():0},qus(t){const s=this.Vls(t);return s?s.ER()/s.JW():0},vrt(t){const s=this.Vls(t);return s?s.ZW():0},Xus(t){const s=this.Vls(t,"value");return s?s.gV("value").mV():0},s2t(){let t=this.kls();return(t=t||this.Rls())?t.Wtt():""}}}{const Mf=self.Bs,xf=self._c,Tf=["position","size","scale"],Gf=["offsetX","offsetY","offsetWidth","offsetHeight","offsetAngle","offsetOpacity","offsetColor","offsetZElevation","offsetScaleX","offsetScaleY"],_f=["value"],If=[].concat(Tf).concat(Gf).concat(_f),Cf={position:["offsetX","offsetY"],size:["offsetWidth","offsetHeight"],scale:["offsetScaleX","offsetScaleY"]},Pf=Object.assign({},If.reduce((t,s)=>Object.assign({},t,{[s]:[s]}),{}),Cf);Mf.olt.nlt.rus=class{constructor(){}static Yus(){return[...xf.Fc()]}static Hc(t){return[...xf.Fc()][t]}static hus(t){return If[t]}static $us(t){return If.indexOf(t)}static Kus(t){return Tf[t]}static Fus(t){return Gf[t]}static Zus(t){return _f[t]}static Qus(t){return Cf[t]}static Dus(t){return Mf.Ee(t)?Pf[t]:Pf[If[t]]}static tcs(t){return!!Cf[t]}static scs(t){return"offsetColor"===t}static ics(t){return"offsetAngle"===t}static ecs(t){return"offsetOpacity"===t}static nus(t){return"value"===t}}}{const Ef=self.Bs,Af=Ef.olt.nlt,Rf=new Map;Af.eus=class{constructor(){}static ius(t,s,i,e,h,r){0===Rf.size&&this.hcs();let n=Af.ncs.rcs(t),o=Rf.get(n);return Ef.ve(t)&&(t=Af.rus.hus(t)),this.ocs(o,t,s,i,e,h,r)}static acs(t,s){const i=Ef.olt.nlt.ius(t);return i.lcs(s)}static hcs(){const t=Af.ncs,s=Af.ucs;this.ccs(t.fcs,this.dcs,s.pcs),this.ccs(t.COLOR,this.mcs,s.gcs),this.ccs(t.ycs,this.wcs,s.Scs),this.ccs(t.bcs,this.vcs,s.pcs),this.ccs(t.Mcs,this.xcs,s.pcs)}static ccs(t,s,i){Rf.set(t,this.Tcs(t,s,i))}static Tcs(t,s,i){return{name:t,Gcs:s,lcs:i}}static ocs(t,s,i,e,h,r,n){return t.Gcs(s,t.lcs(i),t.lcs(e),h,r,n)}static dcs(t,i,e,h,r,s){const n=Af.rus.Qus(t);return n.map((t,s)=>({blt:"world-instance",property:t,type:"float",valueType:"numeric",Mlt:i[s],xlt:e[s],ease:Af.rus.Hc(h),resultMode:r}))}static mcs(t,s,i,e,h,r){return Ef.TY.Text&&r.zL()instanceof Ef.TY.Text?{blt:"plugin",vlt:[7],property:"color",type:"color",valueType:"color",Mlt:s,xlt:i,ease:Af.rus.Hc(e),resultMode:h}:{blt:"world-instance",property:t,type:"color",valueType:"color",Mlt:s,xlt:i,ease:Af.rus.Hc(e),resultMode:h}}static wcs(t,s,i,e,h,r){return{blt:"world-instance",property:t,type:"angle",valueType:"angle",Mlt:s,xlt:i,ease:Af.rus.Hc(e),resultMode:h}}static xcs(t,s,i,e,h,r){return{blt:"world-instance",property:t,type:"float",valueType:"numeric",Mlt:s,xlt:i,ease:Af.rus.Hc(e),resultMode:h}}static vcs(t,s,i,e,h,r){return{blt:"value",property:t,type:"float",valueType:"numeric",Mlt:s,xlt:i,ease:Af.rus.Hc(e),resultMode:h}}}}{const Ff=self.Bs,Of=Ff.olt.nlt,Df={resultMode:"absolute"},kf=Object.assign({},Df,{tags:"",property:"",time:0,ease:0,Slt:0,loop:!1,pingPong:!1,repeatCount:1}),Lf=Object.assign({},kf,{initialValueMode:"current-state",Mlt:0,xlt:0}),Nf=Object.assign({},kf,{initialValueMode:"current-state",Mlt:[0,0],xlt:[0,0]}),Bf=Object.assign({},kf,{initialValueMode:"current-state",Mlt:[0,0,0],xlt:[0,0,0]}),Wf=Object.assign({},Lf,{initialValueMode:"start-value"});Of.vus=class{constructor(){}static _cs(t,s,i,e,h,r,n,o){t.tags=s,t.time=i,t.ease=e,t.Slt=h,t.loop=r,t.pingPong=n,t.repeatCount=o}static bus(t,s,i,e,h,r,n,o,a,l){const u="string"==typeof i?i:Of.rus.Fus(i),c=Of.rus.scs(u)?Bf:Lf;return this._cs(c,s,h,r,n,o,a,l),Of.rus.scs(u)?(Bf.xlt[0]=Ff.Qr(e),Bf.xlt[1]=Ff.tn(e),Bf.xlt[2]=Ff.sn(e),Bf.property=Of.rus.$us(u)):Of.rus.ecs(u)?Lf.xlt=e/100:Lf.xlt=e,c.property=Of.rus.$us(u),c}static xus(t,s,i,e,h,r,n,o,a,l,u){this._cs(Nf,s,r,n,o,a,l,u);const c="string"==typeof i?i:Of.rus.Kus(i);return Nf.xlt[0]=e,Nf.xlt[1]=h,Nf.property=Of.rus.$us(c),Nf}static Gus(t,s,i,e,h,r,n,o,a,l){return this._cs(Wf,s,h,r,n,o,a,l),Wf.Mlt=i,Wf.xlt=e,Wf.property=Of.rus.$us("value"),Wf}}}{const Vf=self.Bs,jf=Vf.olt.nlt,Hf=[];jf.ncs=class{constructor(){}static rcs(t){if(0===Hf.length){const s=Hf;s.push({FP:jf.rus.tcs,result:this.fcs}),s.push({FP:jf.rus.scs,result:this.COLOR}),s.push({FP:jf.rus.ics,result:this.ycs}),s.push({FP:jf.rus.nus,result:this.bcs}),s.push({FP:()=>!0,result:this.Mcs})}Vf.ve(t)&&(t=Vf.olt.nlt.rus.hus(t));for(const i of Hf)if(i.FP(t))return i.result}static get fcs(){return"pair"}static get COLOR(){return"color"}static get ycs(){return"angle"}static get bcs(){return"value"}static get Mcs(){return"other"}}}{const Uf=self.Bs,zf=Uf.olt.nlt;zf.ucs=class{constructor(){}static Scs(t){const s=Uf.Ir(parseFloat(t));return Uf._r(s)}static gcs(t){return t.slice(0)}static pcs(t){return t}}}{let l=function(t){qf.Ae(t);let s=Yf.Pc(t),i;if(-1===(i=s?Yf.Uc(s,null):Yf.Uc(t,null)))throw new Error(`invalid ease name '${t}'`);return i},u=function(t,s=!1){if(!(s&&null==t||"string"==typeof t||Array.isArray(t)))throw new Error("invalid tags")};l,u;const Jf=self.Bs,qf=self.$s,Xf=self.B6,Yf=self._c,$f=Jf.olt.nlt,Kf=new WeakMap,Zf=new Map([["x",{name:"offsetX",type:"one"}],["y",{name:"offsetY",type:"one"}],["width",{name:"offsetWidth",type:"one"}],["height",{name:"offsetHeight",type:"one"}],["angle",{name:"offsetAngle",type:"one"}],["opacity",{name:"offsetOpacity",type:"one"}],["color",{name:"offsetColor",type:"color"}],["z-elevation",{name:"offsetZElevation",type:"one"}],["x-scale",{name:"offsetScaleX",type:"one"}],["y-scale",{name:"offsetScaleY",type:"one"}],["position",{name:"position",type:"two"}],["size",{name:"size",type:"two"}],["scale",{name:"scale",type:"two"}],["value",{name:"value",type:"value"}]]),Qf={tags:"",Ics:!1,loop:!1,pingPong:!1,repeatCount:1,Mlt:0},t0={nV:l};self.gus=class extends Xf{constructor(){super(),Kf.set(this,Xf.ZN().O6())}Ccs(t,s,i,e,h){const r=Kf.get(this);if(!r.rc()||!r.oit())return null;const n=Zf.get(t);if(!n)throw new Error("invalid tween property");"one"===n.type||"value"===n.type?qf.Me(s):(qf.qe(s),"two"===n.type?(qf.Me(s[0]),qf.Me(s[1])):"color"===n.type&&(qf.Me(s[0]),qf.Me(s[1]),qf.Me(s[2]))),"angle"===t?s=Jf.Cr(s):"opacity"===t?s*=100:"color"===t&&(s=Jf.Zr(s[0],s[1],s[2]));const o=l(e);qf.Ie(i),h=Object.assign({},Qf,h),"value"===n.type&&qf.Me(h.Mlt),u(h.tags,!0);let a;if("one"===n.type||"color"===n.type?a=r.tus($f.vus.bus(r,h.tags,n.name,s,i,o,!!h.Ics,!!h.loop,!!h.pingPong,h.repeatCount)):"two"===n.type?a=r.tus($f.vus.xus(r,h.tags,n.name,s[0],s[1],i,o,!!h.Ics,!!h.loop,!!h.pingPong,h.repeatCount)):"value"===n.type&&(a=r.tus($f.vus.Gus(r,h.tags,h.Mlt,s,i,o,!!h.Ics,!!h.loop,!!h.pingPong,h.repeatCount))),a.Play())return a.Tlt(r,t0);throw new Error("failed to start tween")}*Pcs(){const t=Kf.get(this);for(const s of t.Fls())yield s.Tlt(t,t0)}*Ecs(t){u(t);const s=Kf.get(this);for(const i of s.jls(t))yield i.Tlt(s,t0)}get isEnabled(){return Kf.get(this).rc()}set isEnabled(t){Kf.get(this).q2t(t)}}}{const s0=self.Bs;s0.olt.Acs=class extends s0.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const i0=self.Bs;i0.olt.Acs.RIt=class extends i0.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const e0=self.Bs,h0=self.$s,r0=self.B6,n0=(e0.olt.Acs.Instance=class extends e0.MGt{constructor(t,s){super(t),this.Rcs=0,this.Fcs=0,this.Ocs=0,this.Dcs=!0,this.kcs=!0,this.Lcs=!1,this.Ncs=0,this.Bcs=e0.wr(e0.O0),this.Wcs=this.Pi.jD().sA()||1,s&&(this.Rcs=s[0],this.Fcs=s[1],this.Ocs=s[2],this.Dcs=!!s[3],this.kcs=!!s[4],this.Ncs=this.kcs?0:3),this.kcs&&(0===this.Rcs?(this.Ncs=1,0===this.Fcs&&(this.Ncs=2)):(this.Pi.jD().eA(0),this.Sf.YD())),this.xTt()}Sr(){super.Sr()}iM(){return{fit:this.Rcs,wt:this.Fcs,fot:this.Ocs,d:this.Dcs,s:this.Ncs,st:this.Bcs.ni(),mo:this.Wcs}}eM(t){this.Rcs=t.fit,this.Fcs=t.wt,this.Ocs=t.fot,this.Dcs=t.d,this.Ncs=t.s,this.Bcs.Set(t.st),this.Wcs=t.mo,3===this.Ncs?this.oTt():this.xTt()}YK(){const t=this.Sf.YO(this.Pi),s=(this.Bcs.xc(t),this.Pi.jD());0===this.Ncs&&(s.eA(this.Bcs.ni()/this.Rcs*this.Wcs),this.Sf.YD(),s.sA()>=this.Wcs)&&(s.eA(this.Wcs),this.Ncs=1,this.Bcs.b0(),this.iTt("fadeinend"),this.O4(e0.olt.Acs.MY.Vcs)),1===this.Ncs&&this.Bcs.ni()>=this.Fcs&&(this.Ncs=2,this.Bcs.b0(),this.iTt("waitend"),this.O4(e0.olt.Acs.MY.jcs)),2===this.Ncs&&(0!==this.Ocs?(s.eA(this.Wcs-this.Bcs.ni()/this.Ocs*this.Wcs),this.Sf.YD(),s.sA()<=0&&(this.Ncs=3,this.Bcs.b0(),this.iTt("fadeoutend"),this.O4(e0.olt.Acs.MY.Hcs),this.Dcs)&&this.Sf.s4(this.Pi)):(this.Ncs=3,this.Bcs.b0())),3===this.Ncs&&this.oTt()}Ucs(){this.kcs||this.Lcs||(this.Wcs=this.Pi.jD().sA()||1,this.Lcs=!0),3===this.Ncs&&this.FA()}zcs(){this.FA()}FA(){this.Ncs=0,this.Bcs.b0(),0===this.Rcs?(this.Ncs=1,0===this.Fcs&&(this.Ncs=2)):(this.Pi.jD().eA(0),this.Sf.YD()),this.xTt()}Jcs(t){this.Rcs=Math.max(t,0)}qcs(){return this.Rcs}Xcs(t){this.Fcs=Math.max(t,0)}Ycs(){return this.Fcs}$cs(t){this.Ocs=Math.max(t,0)}Kcs(){return this.Ocs}$rt(t){switch(t){case 0:return this.qcs();case 1:return this.Ycs();case 2:return this.Kcs();case 3:return this.Dcs}}int(t,s){switch(t){case 0:this.Jcs(s);break;case 1:this.Xcs(s);break;case 2:this.$cs(s);break;case 3:this.Dcs=!!s}}ITt(){const t="behaviors.fade";return[{title:"$"+this.U6().uf(),properties:[{name:t+".properties.fade-in-time.name",value:this.qcs(),o8t:t=>this.Jcs(t)},{name:t+".properties.wait-time.name",value:this.Ycs(),o8t:t=>this.Xcs(t)},{name:t+".properties.fade-out-time.name",value:this.Kcs(),o8t:t=>this.$cs(t)},{name:t+".debugger.stage",value:[t+".debugger."+["fade-in","wait","fade-out","done"][this.Ncs]]}]}]}Bxt(){return self.Zcs}},new WeakMap);self.Zcs=class extends r0{constructor(){super(),n0.set(this,r0.ZN().O6())}Qcs(){n0.get(this).Ucs()}tfs(){n0.get(this).zcs()}set sfs(t){h0.Ie(t),n0.get(this).Jcs(t)}get sfs(){return n0.get(this).qcs()}set ifs(t){h0.Ie(t),n0.get(this).Xcs(t)}get ifs(){return n0.get(this).Ycs()}set efs(t){h0.Ie(t),n0.get(this).$cs(t)}get efs(){return n0.get(this).Kcs()}}}{const o0=self.Bs;o0.olt.Acs.MY={Hcs(){return!0},Vcs(){return!0},jcs(){return!0}}}{const a0=self.Bs;a0.olt.Acs.frt={hfs(){this.Ucs()},rfs(){this.zcs()},nfs(t){this.Jcs(t)},ofs(t){this.Xcs(t)},afs(t){this.$cs(t)}}}{const l0=self.Bs;l0.olt.Acs.drt={lfs(){return this.qcs()},ufs(){return this.Ycs()},cfs(){return this.Kcs()}}}{const u0=self.Bs;u0.olt.jGt=class extends u0.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const c0=self.Bs;c0.olt.jGt.RIt=class extends c0.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const f0=self.Bs,d0=self.B6,p0=(f0.olt.jGt.Instance=class extends f0.MGt{constructor(t,s){super(t),this.q2t(!0),s&&this.q2t(s[0])}Sr(){super.Sr()}q2t(t){this.Pi.mPt(!!t)}rc(){return this.Pi.pPt()}iM(){return{e:this.rc()}}eM(t){this.q2t(t.e)}$rt(t){if(0===t)return this.rc()}int(t,s){0===t&&this.q2t(s)}ITt(){return[{title:"$"+this.U6().uf(),properties:[{name:"behaviors.jumpthru.properties.enabled.name",value:this.rc(),o8t:t=>this.q2t(t)}]}]}Bxt(){return self.ffs}},new WeakMap);self.ffs=class extends d0{constructor(){super(),p0.set(this,d0.ZN().O6())}set isEnabled(t){p0.get(this).q2t(!!t)}get isEnabled(){return p0.get(this).rc()}}}{const m0=self.Bs;m0.olt.jGt.MY={rc(){return this.rc()}}}{const g0=self.Bs;g0.olt.jGt.frt={q2t(t){this.q2t(t)}}}{const y0=self.Bs;y0.olt.jGt.drt={}}{const w0=self.Bs;w0.olt.dfs=class extends w0.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const S0=self.Bs;S0.olt.dfs.RIt=class extends S0.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const b0=self.Bs,v0=self.$s,M0=self.B6,F=(b0.olt.dfs.Instance=class extends b0.MGt{constructor(t,s){super(t),this.Fis=200,this.Ois=600,this.Dis=600,this.pfs=0,this.mfs=!0,this.gfs=!1,this.swt=!0,this.S_t=0,this.yfs=this.jD().GetAngle(),this.wfs=[],s&&(this.Fis=s[0],this.Ois=s[1],this.Dis=s[2],this.pfs=b0.Ir(s[3]),this.mfs=s[4],this.gfs=s[5],this.swt=s[6]),this.Sfs=null,this.bfs=NaN,this.vfs=NaN,this.Mfs=[0,0],this.xfs={DZ:this.Mfs}}Sr(){this.Sfs&&(this.Sfs.Sr(),this.Sfs=null),this.bfs=NaN,this.vfs=NaN,this.Mfs=null,this.xfs=null,super.Sr()}iM(){return{ms:this.Fis,acc:this.Ois,dec:this.Dis,rs:this.pfs,sa:this.mfs,sos:this.gfs,s:this.S_t,ma:this.yfs,wp:this.wfs.map(t=>({x:t.x,y:t.y})),e:this.swt}}eM(t){this.Fis=t.ms,this.Ois=t.acc,this.Dis=t.dec,this.pfs=t.rs,this.mfs=t.sa,this.gfs=t.sos,this.S_t=t.s,this.yfs=t.ma,this.wfs=t.wp.map(t=>({x:t.x,y:t.y})),this.XMt(t.e),this.swt&&0<this.wfs.length&&this.xTt()}Tfs(t,s,i,e){i&&b0.Un(this.wfs),this.wfs.push({x:t,y:s,opts:e}),this.swt&&this.xTt()}Gfs(){return this.wfs.length}_fs(t){return(t=Math.floor(t))<0||t>=this.wfs.length?0:this.wfs[t].x}Ifs(t){return(t=Math.floor(t))<0||t>=this.wfs.length?0:this.wfs[t].y}des(){return 0<this.wfs.length}Cfs(){b0.Un(this.wfs),this.S_t=0,this.oTt()}Pfs(){return 0<this.wfs.length?this.wfs[0].x:0}Efs(){return 0<this.wfs.length?this.wfs[0].y:0}Afs(){if(0<this.wfs.length){const t=this.wfs[0];if(t.opts)return t.opts.Rfs}return!1}Ffs(){if(0<this.wfs.length){const t=this.wfs[0];if(t.opts)return t.opts.Rfs&&t.opts.Ofs}return!1}Dfs(){if(0<this.wfs.length){const t=this.wfs[0];if(t.opts)return t.opts.kfs}return NaN}Lfs(){if(0<this.wfs.length){const t=this.wfs[0];if(t.opts)return t.opts.Nfs}return NaN}Bfs(t){this.des()&&(this.S_t=Math.min(t,this.Fis))}bes(){return this.S_t}Tes(t){this.Fis=Math.max(t,0),this.Bfs(this.S_t)}Ges(){return this.Fis}Wfs(){return this.swt&&this.des()&&this.Afs()?!!this.Ffs():0!==this.pfs}YK(){if(this.swt&&this.des()){let t=this.Sf.YO(this.Pi),r=this.Pi.jD(),s=r.Hv(),i=r.Jv(),e=r.GetAngle(),h=this.S_t,n=this.Fis,o=this.Ois,a=this.Dis,l=this.Pfs(),u=this.Efs(),c=b0.Ar(s,i,l,u),f=!1;if(0<a&&1===this.wfs.length){const m=.5*h*h/a*1.0001;if(f=b0.Er(s,i,l,u)<=m*m){const g=b0.Pr(s,i,l,u);h=Math.sqrt(2*a*g),n=h,this.S_t=h}}if(this.Wfs()){const y=b0.Rr(this.yfs,c);if(y>Number.EPSILON){const w=y/this.pfs,S=b0.Pr(r.Hv(),r.Jv(),l,u),b=S/(2*Math.sin(y)),v=b*y;n=Math.min(n,b0.Gr(v/w,0,this.Fis))}}let d=f?-a:o,p=Math.min(h*t+.5*d*t*t,n*t);if(f){if(0<a&&(this.S_t=Math.max(this.S_t-a*t,0),0===this.S_t))return void this.Vfs(r,l,u)}else this.S_t=0===o?n:Math.min(this.S_t+o*t,n);if(b0.Er(r.Hv(),r.Jv(),l,u)<=p*p)this.Vfs(r,l,u);else{if(this.Wfs()?this.yfs=b0.Fr(this.yfs,c,this.pfs*t):this.yfs=c,r.mB(Math.cos(this.yfs)*p,Math.sin(this.yfs)*p),this.mfs){const M=this.Afs(),x=this.Ffs();if(M&&!x){let t=this.Lfs(),s=this.Dfs(),i=r.Hv(),e=r.Jv();self.isNaN(this.vfs)&&(this.vfs=0),self.isNaN(t)&&(t=0);let h;h=this.vfs===t?(this.Mfs[0]=this.bfs,this.Mfs[1]=s,this.Sfs.OZ(i,e,this.xfs)):this.Sfs.Cy(i,e),r.v5(this.Sfs.NZ(h[0],h[1]))}else r.v5(this.yfs),this.bfs=NaN,this.vfs=NaN}r.cB(),this.jfs(s,i,e)}}}Vfs(t,s,i){t.fB(s,i),t.cB();const e=this.wfs[0];e.opts&&e.opts.Rfs?(this.bfs=e.opts.kfs,this.vfs=e.opts.Nfs):(this.bfs=NaN,this.vfs=NaN),this.wfs.shift(),0===this.wfs.length&&(this.Sfs&&(this.Sfs.Sr(),this.Sfs=null,this.bfs=NaN,this.vfs=NaN),this.S_t=0,this.oTt()),this.iTt("arrived"),this.O4(b0.olt.dfs.MY.Hfs)}jfs(t,s,i){const e=this.Sf.hO();if(this.gfs&&e.kk(this.Pi)){this.Cfs();const h=this.Pi.jD(),r=h.Hv(),n=h.Jv(),o=b0.Ar(r,n,t,s),a=b0.Pr(r,n,t,s);e.k3t(this.Pi,Math.cos(o),Math.sin(o),Math.max(a,1))||(h.fB(t,s),h.v5(i),h.cB()),this.iTt("hitsolid"),this.O4(b0.olt.dfs.MY.Ufs)}}zfs(){return this.mfs}Jfs(t){this.mfs=!!t}qfs(t){if(this.yfs=t,this.swt&&this.mfs&&!this.des()){const s=this.jD();s.v5(this.yfs),s.cB()}}Xfs(){return this.yfs}_es(t){this.Ois=Math.max(t,0)}Ies(){return this.Ois}Ces(t){this.Dis=Math.max(t,0)}Pes(){return this.Dis}Yfs(t){this.pfs=Math.max(t,0)}$fs(){return this.pfs}Kfs(t){this.gfs=!!t}Zfs(){return this.gfs}XMt(t){this.swt!==(t=!!t)&&(this.swt=t,this.swt&&this.des()?this.xTt():this.oTt())}$Mt(){return this.swt}$rt(t){switch(t){case 0:return this.Ges();case 1:return this.Ies();case 2:return this.Pes();case 3:return b0.Cr(this.$fs());case 4:return this.zfs();case 5:return this.Zfs();case 6:return this.$Mt()}}int(t,s){switch(t){case 0:this.Tes(s);break;case 1:this._es(s);break;case 2:this.Ces(s);break;case 3:this.Yfs(b0.Ir(s));break;case 4:this.Jfs(s);break;case 5:this.Kfs(s);break;case 6:this.XMt(s)}}ITt(){const t="behaviors.moveto";return[{title:"$"+this.U6().uf(),properties:[{name:t+".debugger.speed",value:this.bes(),o8t:t=>this.Bfs(t)},{name:t+".debugger.angle-of-motion",value:b0.Cr(this.Xfs()),o8t:t=>this.yfs=b0.Ir(t)},{name:t+".debugger.target-x",value:this.Pfs()},{name:t+".debugger.target-y",value:this.Efs()},{name:t+".debugger.waypoint-count",value:this.Gfs()},{name:t+".properties.max-speed.name",value:this.Ges(),o8t:t=>this.Tes(t)},{name:t+".properties.acceleration.name",value:this.Ies(),o8t:t=>this._es(t)},{name:t+".properties.deceleration.name",value:this.Pes(),o8t:t=>this.Ces(t)},{name:t+".properties.rotate-speed.name",value:b0.Cr(this.$fs()),o8t:t=>this.Yfs(b0.Ir(t))},{name:t+".properties.enabled.name",value:this.$Mt(),o8t:t=>this.XMt(t)}]}]}Bxt(){return self.Qfs}},new WeakMap);self.Qfs=class extends M0{constructor(){super(),F.set(this,M0.ZN().O6())}t0s(t,s,i=!0){v0.Ie(t),v0.Ie(s),F.get(this).Tfs(t,s,!!i)}s0s(){return F.get(this).Pfs()}i0s(){return F.get(this).Efs()}e0s(){const t=F.get(this);return[t.Pfs(),t.Efs()]}h0s(){return F.get(this).Gfs()}r0s(t){return v0.Ie(t),F.get(this)._fs(t)}n0s(t){return v0.Ie(t),F.get(this).Ifs(t)}o0s(t){v0.Ie(t);const s=F.get(this);return[s._fs(t),s.Ifs(t)]}stop(){F.get(this).Cfs()}get fhs(){return F.get(this).des()}get speed(){return F.get(this).bes()}set speed(t){v0.Ie(t),F.get(this).Bfs(t)}get shs(){return F.get(this).Ges()}set shs(t){v0.Ie(t),F.get(this).Tes(t)}get acceleration(){return F.get(this).Ies()}set acceleration(t){v0.Ie(t),F.get(this)._es(t)}get ihs(){return F.get(this).Pes()}set ihs(t){v0.Ie(t),F.get(this).Ces(t)}get a0s(){return F.get(this).Xfs()}set a0s(t){v0.Ie(t),F.get(this).qfs(t)}get l0s(){return F.get(this).$fs()}set l0s(t){v0.Ie(t),F.get(this).Yfs(t)}get u0s(){return F.get(this).Zfs()}set u0s(t){F.get(this).Kfs(t)}get isEnabled(){return F.get(this).$Mt()}set isEnabled(t){F.get(this).XMt(t)}}}{const x0=self.Bs;x0.olt.dfs.MY={vhs(){return this.des()},Mhs(t,s){return x0.compare(this.bes(),t,s)},rc(){return this.$Mt()},Hfs(){return!0},Ufs(){return!0}}}{const T0=self.Bs;T0.olt.dfs.frt={c0s(t,s,i){this.Tfs(t,s,0===i)},f0s(t,s,i){if(t){const e=t.t5(this.Pi);if(e&&e.jD()){const[h,r]=e.Dvt(s);this.Tfs(h,r,0===i)}}},d0s(i){const t=this.Pi.flt(T0.olt.Pathfinding);if(t){const e=t._GetPath();if(0!==e.length)for(let t=0,s=e.length;t<s;++t){const h=e[t];this.Tfs(h.x,h.y,0===t&&0===i)}}},p0s(t,s,i){const e=T0.wr(T0.gZ,t,s);if(e.EZ()){e.RZ(this.Pi.jD());let s=!0;for(const h of e.AZ())switch(h.NT()){case"line":{const r=h.Hv(),n=h.Jv();this.Tfs(r,n,s&&0===i),s=!1;break}case"cubic-bezier":for(let t=0;t<=h.TQ();t++){const o=t*h.GQ(),a=h.Map(o),l=a[0],u=a[1];this.Tfs(l,u,s&&0===i,{Rfs:!0,Ofs:s,kfs:h.CQ(o),Nfs:h.KF()}),s=!1}}this.Sfs=e}else e.Sr()},m0s(t,s,i){const e=this.Sf.Mtt().GK(t);e&&T0.olt.dfs.frt.p0s.call(this,e,s,i)},VW(){this.Cfs()},g0s(t){this.qfs(T0.Ir(t))},y0s(t){this.Bfs(t)},Chs(t){this.Tes(t)},Phs(t){this._es(t)},Ehs(t){this.Ces(t)},w0s(t){this.Yfs(T0.Ir(t))},S0s(t){this.Kfs(t)},q2t(t){this.XMt(t)}}}{const G0=self.Bs;G0.olt.dfs.drt={Uhs(){return this.bes()},zhs(){return this.Ges()},Jhs(){return this.Ies()},qhs(){return this.Pes()},Zhs(){return G0.Cr(this.Xfs())},b0s(){return G0.Cr(this.$fs())},v0s(){return this.Pfs()},M0s(){return this.Efs()},x0s(){return this.Gfs()},T0s(t){return this._fs(t)},G0s(t){return this.Ifs(t)}}}{const _0=self.Bs;_0.olt._0s=class extends _0.mGt{constructor(t){super(t)}Sr(){super.Sr()}}}{const I0=self.Bs;I0.olt._0s.RIt=class extends I0.bGt{constructor(t){super(t)}Sr(){super.Sr()}Nxt(){}}}{const C0=self.Bs,P0=self.$s,E0=self.B6,A0=2*Math.PI,R0=Math.PI/2,F0=3*Math.PI/2,O0=[0,1,8,3,4,2,5,6,9,7],D0=(C0.olt._0s.Instance=class extends C0.MGt{constructor(t,s){super(t),this.I0s=0,this.C0s=0,this.P0s=0,this.E0s=0,this.A0s=0,this.swt=!0,this.R0s=0,this.F0s=0,this.O0s=0,this.D0s=0,this.k0s=0,this.L0s=0,this._wt=0,this.N0s=0,this.B0s=0,this.W0s=0,this.V0s=0,s&&(this.C0s=O0[s[0]],this.P0s=s[1],this.D0s=this.Sf.SD()*s[3],this.R0s=s[2],this.E0s=s[2],this.E0s+=this.D0s,this.F0s=s[4],0!==this.E0s&&(this.k0s=this.Sf.SD()*s[5],this.I0s=s[4]/this.E0s*A0,this.I0s+=this.k0s/this.E0s*A0),this.L0s=this.Sf.SD()*s[7],this.O0s=s[6],this.A0s=s[6],this.A0s+=this.L0s,this.swt=!!s[8]),5===this.C0s&&(this.A0s=C0.Ir(this.A0s)),this.QCt(),this.swt&&this.xTt()}Sr(){super.Sr()}iM(){return{i:this.I0s,e:this.swt,mv:this.C0s,w:this.P0s,p:this.E0s,mag:this.A0s,iv:this._wt,iv2:this.N0s,r:this.V0s,lkv:this.B0s,lkv2:this.W0s}}eM(t){this.I0s=t.i,this.XMt(t.e),this.C0s=t.mv,this.P0s=t.w,this.E0s=t.p,this.A0s=t.mag,this._wt=t.iv,this.N0s=t.iv2,this.V0s=t.r,this.B0s=t.lkv,this.W0s=t.lkv2}QCt(){const t=this.Pi.jD();switch(this.C0s){case 0:this._wt=t.Hv();break;case 1:this._wt=t.Jv();break;case 2:this._wt=t.Em(),this.V0s=t.Wm()/t.Em();break;case 3:this._wt=t.Em();break;case 4:this._wt=t.Wm();break;case 5:this._wt=t.GetAngle();break;case 6:this._wt=t.sA();break;case 7:this._wt=0;break;case 8:this._wt=t.Hv(),this.N0s=t.Jv();break;case 9:this._wt=t.Xv()}this.B0s=this._wt,this.W0s=this.N0s}j0s(t){switch(t%=A0,this.P0s){case 0:return Math.sin(t);case 1:return t<=R0?t/R0:t<=F0?1-2*(t-R0)/Math.PI:(t-F0)/R0-1;case 2:return 2*t/A0-1;case 3:return-2*t/A0+1;case 4:return t<Math.PI?-1:1}return 0}YK(){const t=this.Sf.YO(this.Pi);this.swt&&0!==t&&(0===this.E0s?this.I0s=0:this.I0s=(this.I0s+t/this.E0s*A0)%A0,this.H0s())}H0s(){const t=this.Pi.jD();switch(this.C0s){case 0:t.Hv()!==this.B0s&&(this._wt+=t.Hv()-this.B0s),t.Uv(this._wt+this.j0s(this.I0s)*this.A0s),this.B0s=t.Hv();break;case 1:t.Jv()!==this.B0s&&(this._wt+=t.Jv()-this.B0s),t.qv(this._wt+this.j0s(this.I0s)*this.A0s),this.B0s=t.Jv();break;case 2:t.Lm(this._wt+this.j0s(this.I0s)*this.A0s),t.Am(t.Em()*this.V0s);break;case 3:t.Lm(this._wt+this.j0s(this.I0s)*this.A0s);break;case 4:t.Am(this._wt+this.j0s(this.I0s)*this.A0s);break;case 5:t.GetAngle()!==this.B0s&&(this._wt=C0._r(this._wt+(t.GetAngle()-this.B0s))),t.v5(this._wt+this.j0s(this.I0s)*this.A0s),this.B0s=t.GetAngle();break;case 6:t.eA(this._wt+this.j0s(this.I0s)*this.A0s/100);break;case 8:t.Hv()!==this.B0s&&(this._wt+=t.Hv()-this.B0s),t.Jv()!==this.W0s&&(this.N0s+=t.Jv()-this.W0s),t.Uv(this._wt+Math.cos(t.GetAngle())*this.j0s(this.I0s)*this.A0s),t.qv(this.N0s+Math.sin(t.GetAngle())*this.j0s(this.I0s)*this.A0s),this.B0s=t.Hv(),this.W0s=t.Jv();break;case 9:t.Yv(this._wt+this.j0s(this.I0s)*this.A0s)}t.cB()}U0s(t,s){}z0s(t){this.E0s=t}J0s(){return this.E0s}q0s(t){this.A0s=t}X0s(t){5===this.C0s&&(t=C0.Ir(t)),this.q0s(t)}Y0s(){return this.A0s}$0s(){let t=this.Y0s();return 5===this.C0s?C0.Cr(t):t}K0s(t){5===this.C0s&&5!==t&&(this.A0s=C0.Cr(this.A0s)),this.C0s=t,this.QCt()}Z0s(){return this.C0s}Q0s(t){this.P0s=t}tds(){return this.P0s}sds(t){this.I0s=C0.Gr(t,0,2*Math.PI),this.H0s()}ids(){return this.I0s}XMt(t){this.swt=!!t,this.swt?this.xTt():this.oTt()}$Mt(){return this.swt}$rt(t){switch(t){case 0:return this.C0s;case 1:return this.P0s;case 2:return this.R0s;case 6:return this.O0s;case 8:return this.swt}}int(t,s){switch(t){case 0:this.C0s=O0[s],this.QCt();break;case 1:this.P0s=s;break;case 2:this.R0s=s,this.E0s=this.R0s+this.D0s,this.swt||(0!==this.E0s?(this.I0s=this.F0s/this.E0s*A0,this.I0s+=this.k0s/this.E0s*A0):this.I0s=0);break;case 6:this.O0s=s,this.A0s=this.O0s+this.L0s,5===this.C0s&&(this.A0s=C0.Ir(this.A0s));break;case 8:this.swt=!!s}}ITt(){const t="behaviors.sin";return[{title:"$"+this.U6().uf(),properties:[{name:t+".properties.enabled.name",value:this.$Mt(),o8t:t=>this.XMt(t)},{name:t+".properties.period.name",value:this.J0s(),o8t:t=>this.z0s(t)},{name:t+".properties.magnitude.name",value:this.$0s(),o8t:t=>this.X0s(t)},{name:t+".debugger.value",value:this.j0s(this.ids())*this.$0s()}]}]}Bxt(){return self.eds}},new WeakMap),k0=["horizontal","vertical","size","width","height","angle","opacity","value-only","forwards-backwards","z-elevation"],L0=["sine","triangle","sawtooth","reverse-sawtooth","square"];self.eds=class extends E0{constructor(){super(),D0.set(this,E0.ZN().O6())}set hds(t){P0.Ie(t),D0.get(this).z0s(t)}get hds(){return D0.get(this).J0s()}set rds(t){P0.Ie(t),D0.get(this).q0s(t)}get rds(){return D0.get(this).Y0s()}set nds(t){D0.get(this).sds(t)}get nds(){return D0.get(this).ids()}set ods(t){P0.Ae(t);const s=k0.indexOf(t);if(-1===s)throw new Error("invalid movement");D0.get(this).K0s(s)}get ods(){return k0[D0.get(this).Z0s()]}set ads(t){P0.Ae(t);const s=L0.indexOf(t);if(-1===s)throw new Error("invalid wave");D0.get(this).Q0s(s)}get ads(){return L0[D0.get(this).tds()]}get value(){const t=D0.get(this);return t.j0s(t.ids())*t.Y0s()}lds(){D0.get(this).QCt()}set isEnabled(t){D0.get(this).XMt(!!t)}get isEnabled(){return D0.get(this).$Mt()}}}{const N0=self.Bs;N0.olt._0s.MY={rc(){return this.$Mt()},uds(t){return this.Z0s()===t},cds(t,s){return N0.compare(this.J0s(),t,s)},fds(t,s){return N0.compare(this.$0s(),t,s)},dds(t){return this.tds()===t}}}{const B0=self.Bs;B0.olt._0s.frt={q2t(t){this.XMt(0!==t)},pds(t){this.z0s(t)},mds(t){this.X0s(t)},gds(t){this.K0s(t)},yds(t){this.P0s=t},wds(t){const s=2*Math.PI;this.sds(t*s%s)},Sds(){this.QCt()}}}{const W0=self.Bs;W0.olt._0s.drt={bds(){return this.ids()/(2*Math.PI)},vds(){return this.J0s()},Mds(){return this.$0s()},Xus(){return this.j0s(this.ids())*this.$0s()}}}{let t=function(t,s){return"number"==typeof t&&"number"==typeof s},i=function(i,e){if("string"!=typeof i&&"string"!=typeof e)return i&&e?1:0;{let t,s;return t="number"==typeof i?(Math.round(1e10*i)/1e10).toString():i,s="number"==typeof e?(Math.round(1e10*e)/1e10).toString():e,t+s}};t,i,0;const V0=self.Bs;self.gSt=[()=>0,()=>"n",t=>{const s=t._St(0),i=t._St(1).mSt(),e=t._St(2).Jwt();return()=>s.Zwt()-i.Bet()*e()},t=>{const s=t._St(0).Jwt();return()=>4*s()},t=>{const s=t._St(0).Jwt();return()=>s()},t=>{const s=t._St(0).mSt();return()=>s.Bet()/20},()=>"w",t=>{const s=t._St(0).mSt();return()=>s.Bet()/4-50},t=>{const s=t._St(0).mSt();return()=>.5+s.Bet()/400},t=>{const s=t._St(0),i=t._St(1),e=t._St(2),h=t._St(3).mSt(),r=t._St(4),n=t._St(5);return()=>V0.Cr(V0.Ar(s.Zwt(),i.Zwt(),e.Zwt()+5*h.Bet(),r.Zwt()+n.uSt()))},t=>{const s=t._St(0).mSt();return()=>V0.Gr(s.Bet(),-2,0)},()=>3,t=>{const s=t._St(0).mSt(),i=t._St(1);return()=>V0.Gr(s.Bet()/3-50,-50,30/Math.abs(i.uSt()+.1))},t=>{const s=t._St(0).mSt(),i=t._St(1).Jwt();return()=>V0.Gr(s.Bet()-50*i(),0,1e6)},t=>{const s=t._St(0);return()=>V0.Gr(s.uSt(),-5,10)},t=>{const s=t._St(0);return()=>s.uSt()},()=>376,t=>{const s=t._St(0);return()=>s.Zwt()+64},()=>-770,t=>{const s=t._St(0);return()=>s.Zwt()+128},()=>-218,()=>900,t=>{const s=t._St(0);return()=>s.Zwt()+120},()=>-500,t=>{const s=t._St(0);return()=>s.Zwt()+256},()=>-1282,t=>{const s=t._St(0);return()=>s.Zwt()+512},t=>{const s=t._St(0).Jwt(),i=t._St(1).mSt(),e=t._St(2).mSt();return()=>s(1-V0.Gr(i.Bet()/400,.5,.9),7-V0.Gr(e.Bet()/50,.6,5))},()=>"",t=>{const s=t._St(0).mSt();return()=>40-s.Bet()},()=>-10,t=>{const s=t._St(0).mSt();return()=>30-s.Bet()},()=>10,()=>-150,t=>{const s=t._St(0).Jwt();return()=>s(-5,5)},t=>{const s=t._St(0).Jwt();return()=>s(-15,-10)},()=>1,t=>{const s=t._St(0).Jwt();return()=>10*s()},()=>"WarpRadial",t=>{const s=t._St(0);return()=>s.iSt()},()=>"AdjustHSL",()=>"f",t=>{const s=t._St(0).Jwt(),i=t._St(1),e=t._St(2);return()=>s("Main","HUD",i.Zwt(),e.Zwt())},t=>{const s=t._St(0).Jwt();return()=>s(1)/2+10},t=>{const s=t._St(0).Jwt();return()=>s(1)/2-10},t=>{const s=t._St(0);return()=>s.Zwt()},()=>240,()=>104,()=>2,t=>{const s=t._St(0).mSt();return()=>i("run ",s.Bet())},t=>{const s=t._St(0).mSt();return()=>i("still ",s.Bet())},t=>{const s=t._St(0).mSt();return()=>i("jump ",s.Bet())},t=>{const s=t._St(0).mSt();return()=>i("fall ",s.Bet())},t=>{const s=t._St(0),i=t._St(1).mSt();return()=>s.iSt()-i.Bet()},()=>-100,()=>-50,()=>-717706217705471,t=>{const s=t._St(0);return()=>s.Zwt()-16},()=>7,()=>5,()=>8,t=>{const s=t._St(0),i=t._St(1).Jwt();return()=>s.Zwt()-15*i()},()=>100,()=>4,()=>6,()=>3.5]}var t=self.Bs;self.$5t=function(){return[t.TY.Yht,t.olt.mi,t.olt.irs,t.olt.grs,t.olt.VGt,t.olt.nlt,t.TY.iHt,t.TY.FHt,t.TY.$7t,t.TY.Audio,t.TY.OHt,t.TY.Keyboard,t.TY.f$t,t.olt.Acs,t.olt.jGt,t.TY.FZt,t.TY.BQt,t.TY.Touch,t.olt.dfs,t.olt._0s,t.TY.xY.MY.vY,t.TY.Audio.frt.Play,t.TY.xY.MY._Bt,t.TY.iHt.frt.Uv,t.TY.iHt.drt.I2t,t.TY.xY.drt.dt,t.TY.FHt.frt.Uv,t.TY.FHt.drt.I2t,t.TY.xY.frt.l6t,t.TY.xY.frt.u6t,t.TY.Yht.frt.f8t,t.TY.Audio.frt.brt,t.TY.Audio.frt.KW,t.olt.mi.MY.rc,t.TY.Yht.frt.v5,t.TY.Yht.drt.I2t,t.TY.Yht.drt.C2t,t.olt.mi.drt.trs,t.olt.grs.frt.ApplyForce,t.olt.grs.frt.ApplyTorque,t.olt.grs.drt.Kas,t.TY.xY.frt.a6t,t.olt.grs.frt.Has,t.olt.grs.drt.Yas,t.olt.grs.drt.$as,t.TY.Yht.MY._Mt,t.TY.Audio.MY.mXt,t.TY.Audio.frt.VW,t.TY.Yht.MY.Pvt,t.TY.Yht.frt.o2t,t.TY.iHt.MY.Ivt,t.TY.FHt.MY.Ivt,t.TY.xY.MY.kBt,t.TY.xY.drt.random,t.TY.Yht.frt.R8t,t.olt.grs.MY.Ias,t.TY.Yht.MY.vMt,t.olt.mi.frt.q2t,t.TY.xY.MY.IBt,t.olt.mi.MY.oes,t.TY.Yht.frt.Rvt,t.olt.Acs.frt.nfs,t.olt.Acs.frt.hfs,t.TY.xY.frt.Nn,t.TY.xY.frt.O6t,t.TY.xY.frt.c6t,t.TY.Yht.frt.c2t,t.TY.xY.frt.hWt,t.TY.Audio.frt.CXt,t.TY.xY.MY.OBt,t.TY.xY.drt.xVt,t.TY.xY.drt.mVt,t.TY.xY.MY.Ggt,t.olt.mi.MY.xhs,t.TY.Keyboard.MY.UYt,t.olt.mi.MY.vhs,t.TY.Yht.frt.a8t,t.olt.mi.MY.Ghs,t.olt.mi.MY._hs,t.TY.Yht.frt.l8t,t.olt.mi.MY.les,t.TY.Keyboard.MY.s$t,t.TY.f$t.MY.RKt,t.TY.f$t.frt.kKt,t.TY.xY.MY.LBt,t.TY.Yht.MY.GMt,t.olt.mi.frt.Ohs,t.TY.Yht.frt.hN,t.TY.f$t.frt.hN,t.TY.f$t.frt.DKt,t.TY.Yht.frt.d2t,t.TY.Yht.MY.ZMt,t.TY.Yht.MY.KMt,t.TY.Audio.frt.TXt,t.TY.Yht.frt.u2t,t.olt.grs.frt.q2t,t.olt.grs.frt.qas,t.olt.grs.frt.jas,t.olt.grs.frt.Jas,t.TY.Yht.frt.hMt,t.olt.nlt.frt.Sus,t.olt.nlt.frt.Mus,t.olt.Acs.frt.ofs,t.olt.Acs.frt.rfs,t.TY.xY.frt.D6t,t.TY.f$t.frt.qv,t.TY.f$t.drt.C2t,t.TY.FZt.MY.yQt,t.TY.Touch.MY.Zts,t.TY.OHt.MY.iMt,t.TY.f$t.MY.iMt,t.TY.f$t.frt.o2t]},self.dNt=[{mi:0},{xds:0},{grs:0},{Tds:0},{Gds:0},{nlt:0},{_ds:0},{Ids:0},{Cds:0},{Pds:0},{Eds:0},{Ads:0},{Rds:0},{Fds:0},{Ods:0},{Dds:0},{kds:0},{debug:0},{Lds:0},{Nds:0},{Bds:0},{$7t:0},{Wds:0},{Vds:0},{Audio:0},{"2DGround":0},{jds:0},{Hds:0},{Uds:0},{Keyboard:0},{zds:0},{Jds:0},{qds:0},{Xds:0},{Yds:0},{$ds:0},{Kds:0},{Zds:0},{Nq:0},{Qds:0},{t1s:0},{Acs:0},{Yht:0},{s1s:0},{"1st":0},{"2nd":0},{"3rd":0},{"4th":0},{i1s:0},{e1s:0},{h1s:0},{r1s:0},{n1s:0},{o1s:0},{a1s:0},{l1s:0},{u1s:0},{c1s:0},{FZt:0},{f1s:0},{Touch:0},{dfs:0},{d1s:0},{p1s:0},{m1s:0},{g1s:0},{y1s:0},{w1s:0},{S1s:0},{b1s:0},{v1s:0},{M1s:0},{x1s:0},{T1s:0},{G1s:0},{_1s:0},{I1s:0},{C1s:0},{P1s:0},{E1s:0},{A1s:0}],self.R1s={Tds:class extends self.d8t{},_ds:class extends self.d8t{},Ids:class extends self.d8t{},Cds:class extends self.ZHt{},Pds:class extends self.a7t{},Eds:class extends self.a7t{},Gds:class extends self.d8t{},Ads:class extends self.a7t{},Rds:class extends self.a7t{},Fds:class extends self.a7t{},Ods:class extends self.a7t{},Dds:class extends self.a7t{},kds:class extends self.a7t{},Nds:class extends self.d8t{},Bds:class extends self.d8t{},$7t:class extends self.fJt{},Wds:class extends self.d8t{},Vds:class extends self.d8t{},Audio:class extends self.qN{},F1s:class extends self.P6{},jds:class extends self.d8t{},Hds:class extends self.d8t{},Uds:class extends self.d8t{},Keyboard:class extends self.qN{},Yds:class extends self.d8t{},$ds:class extends self.d8t{},Kds:class extends self.bKt{},Zds:class extends self.d8t{},Qds:class extends self.d8t{},t1s:class extends self.d8t{},Yht:class extends self.d8t{},s1s:class extends self.d8t{},O1s:class extends self.d8t{},D1s:class extends self.d8t{},k1s:class extends self.d8t{},L1s:class extends self.d8t{},i1s:class extends self.d8t{},e1s:class extends self.d8t{},h1s:class extends self.d8t{},r1s:class extends self.fJt{},o1s:class extends self.d8t{},a1s:class extends self.bKt{},l1s:class extends self.bKt{},u1s:class extends self.P6{},c1s:class extends self.d8t{},FZt:class extends self.qN{},f1s:class extends self.ats{},Touch:class extends self.qN{},d1s:class extends self.d8t{},p1s:class extends self.d8t{},m1s:class extends self.P6{},y1s:class extends self.d8t{},S1s:class extends self.d8t{},b1s:class extends self.d8t{},v1s:class extends self.a7t{},M1s:class extends self.bKt{}};